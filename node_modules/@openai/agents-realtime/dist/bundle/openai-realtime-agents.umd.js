(function(J,ee){typeof exports=="object"&&typeof module<"u"?ee(exports):typeof define=="function"&&define.amd?define(["exports"],ee):(J=typeof globalThis<"u"?globalThis:J||self,ee(J.OpenAIAgentsRealtime={}))})(this,(function(J){"use strict";var df=Object.defineProperty;var vo=J=>{throw TypeError(J)};var pf=(J,ee,ce)=>ee in J?df(J,ee,{enumerable:!0,configurable:!0,writable:!0,value:ce}):J[ee]=ce;var S=(J,ee,ce)=>pf(J,typeof ee!="symbol"?ee+"":ee,ce),js=(J,ee,ce)=>ee.has(J)||vo("Cannot "+ce);var u=(J,ee,ce)=>(js(J,ee,"read from private field"),ce?ce.call(J):ee.get(J)),R=(J,ee,ce)=>ee.has(J)?vo("Cannot add the same private member more than once"):ee instanceof WeakSet?ee.add(J):ee.set(J,ce),k=(J,ee,ce,tr)=>(js(J,ee,"write to private field"),tr?tr.call(J,ce):ee.set(J,ce),ce),U=(J,ee,ce)=>(js(J,ee,"access private method"),ce);var Yt,Et,Te,Qt,ae,$s,Fs,wo,bo,Io,So,Xn,Ls,Us,On,dt,ke,nt,en,tn,En,Rt,Rn,Nn,nn,Pn,Dn,rn,ve,rt,pt,ft,sn,Se,Zs,qs,fn,Ae,Mn,jn,$n,Fn,Nt,ht,mt,Pt,Ln,an,st,ye,Dt,jr,xo,Mt,Un,xe,Zn,qn,se,Bn,gt,Jn,yt,jt,$t,ge,zn,it,Ft,Lt,on,Gn,Ut,Bs,To,H,q,un,B,cn,ln,Vn,oe,dn,pn,ze,Wn,Zt,Hn,Kn,ie,Qn,er,ko,Fr,Ao,Js,Co,zs;const ee={version:"0.3.7"};async function ce(n){try{return[null,await n()]}catch(e){return[e,null]}}function tr(n){const e=Object.values(n).filter(r=>typeof r=="number");return Object.entries(n).filter(([r,s])=>e.indexOf(+r)===-1).map(([r,s])=>s)}class Gs{constructor(){this._map=new Map,this._idmap=new Map}add(e,...t){const r=t[0];if(this._map.set(e,r),r&&typeof r=="object"&&"id"in r){if(this._idmap.has(r.id))throw new Error(`ID ${r.id} already exists in the registry`);this._idmap.set(r.id,e)}return this}clear(){return this._map=new Map,this._idmap=new Map,this}remove(e){const t=this._map.get(e);return t&&typeof t=="object"&&"id"in t&&this._idmap.delete(t.id),this._map.delete(e),this}get(e){const t=e._zod.parent;if(t){const r={...this.get(t)??{}};return delete r.id,{...r,...this._map.get(e)}}return this._map.get(e)}has(e){return this._map.has(e)}}function Oo(){return new Gs}const Eo=Oo();class Vs{constructor(e){this.counter=0,this.metadataRegistry=(e==null?void 0:e.metadata)??Eo,this.target=(e==null?void 0:e.target)??"draft-2020-12",this.unrepresentable=(e==null?void 0:e.unrepresentable)??"throw",this.override=(e==null?void 0:e.override)??(()=>{}),this.io=(e==null?void 0:e.io)??"output",this.seen=new Map}process(e,t={path:[],schemaPath:[]}){var d,m,g;var r;const s=e._zod.def,i={guid:"uuid",url:"uri",datetime:"date-time",json_string:"json-string",regex:""},o=this.seen.get(e);if(o)return o.count++,t.schemaPath.includes(e)&&(o.cycle=t.path),o.schema;const a={schema:{},count:1,cycle:void 0,path:t.path};this.seen.set(e,a);const c=(m=(d=e._zod).toJSONSchema)==null?void 0:m.call(d);if(c)a.schema=c;else{const v={...t,schemaPath:[...t.schemaPath,e],path:t.path},x=e._zod.parent;if(x)a.ref=x,this.process(x,v),this.seen.get(x).isParent=!0;else{const y=a.schema;switch(s.type){case"string":{const h=y;h.type="string";const{minimum:b,maximum:_,format:N,patterns:T,contentEncoding:A}=e._zod.bag;if(typeof b=="number"&&(h.minLength=b),typeof _=="number"&&(h.maxLength=_),N&&(h.format=i[N]??N,h.format===""&&delete h.format),A&&(h.contentEncoding=A),T&&T.size>0){const D=[...T];D.length===1?h.pattern=D[0].source:D.length>1&&(a.schema.allOf=[...D.map(F=>({...this.target==="draft-7"?{type:"string"}:{},pattern:F.source}))])}break}case"number":{const h=y,{minimum:b,maximum:_,format:N,multipleOf:T,exclusiveMaximum:A,exclusiveMinimum:D}=e._zod.bag;typeof N=="string"&&N.includes("int")?h.type="integer":h.type="number",typeof D=="number"&&(h.exclusiveMinimum=D),typeof b=="number"&&(h.minimum=b,typeof D=="number"&&(D>=b?delete h.minimum:delete h.exclusiveMinimum)),typeof A=="number"&&(h.exclusiveMaximum=A),typeof _=="number"&&(h.maximum=_,typeof A=="number"&&(A<=_?delete h.maximum:delete h.exclusiveMaximum)),typeof T=="number"&&(h.multipleOf=T);break}case"boolean":{const h=y;h.type="boolean";break}case"bigint":{if(this.unrepresentable==="throw")throw new Error("BigInt cannot be represented in JSON Schema");break}case"symbol":{if(this.unrepresentable==="throw")throw new Error("Symbols cannot be represented in JSON Schema");break}case"null":{y.type="null";break}case"any":break;case"unknown":break;case"undefined":{if(this.unrepresentable==="throw")throw new Error("Undefined cannot be represented in JSON Schema");break}case"void":{if(this.unrepresentable==="throw")throw new Error("Void cannot be represented in JSON Schema");break}case"never":{y.not={};break}case"date":{if(this.unrepresentable==="throw")throw new Error("Date cannot be represented in JSON Schema");break}case"array":{const h=y,{minimum:b,maximum:_}=e._zod.bag;typeof b=="number"&&(h.minItems=b),typeof _=="number"&&(h.maxItems=_),h.type="array",h.items=this.process(s.element,{...v,path:[...v.path,"items"]});break}case"object":{const h=y;h.type="object",h.properties={};const b=s.shape;for(const T in b)h.properties[T]=this.process(b[T],{...v,path:[...v.path,"properties",T]});const _=new Set(Object.keys(b)),N=new Set([..._].filter(T=>{const A=s.shape[T]._zod;return this.io==="input"?A.optin===void 0:A.optout===void 0}));N.size>0&&(h.required=Array.from(N)),((g=s.catchall)==null?void 0:g._zod.def.type)==="never"?h.additionalProperties=!1:s.catchall?s.catchall&&(h.additionalProperties=this.process(s.catchall,{...v,path:[...v.path,"additionalProperties"]})):this.io==="output"&&(h.additionalProperties=!1);break}case"union":{const h=y;h.anyOf=s.options.map((b,_)=>this.process(b,{...v,path:[...v.path,"anyOf",_]}));break}case"intersection":{const h=y,b=this.process(s.left,{...v,path:[...v.path,"allOf",0]}),_=this.process(s.right,{...v,path:[...v.path,"allOf",1]}),N=A=>"allOf"in A&&Object.keys(A).length===1,T=[...N(b)?b.allOf:[b],...N(_)?_.allOf:[_]];h.allOf=T;break}case"tuple":{const h=y;h.type="array";const b=s.items.map((T,A)=>this.process(T,{...v,path:[...v.path,"prefixItems",A]}));if(this.target==="draft-2020-12"?h.prefixItems=b:h.items=b,s.rest){const T=this.process(s.rest,{...v,path:[...v.path,"items"]});this.target==="draft-2020-12"?h.items=T:h.additionalItems=T}s.rest&&(h.items=this.process(s.rest,{...v,path:[...v.path,"items"]}));const{minimum:_,maximum:N}=e._zod.bag;typeof _=="number"&&(h.minItems=_),typeof N=="number"&&(h.maxItems=N);break}case"record":{const h=y;h.type="object",h.propertyNames=this.process(s.keyType,{...v,path:[...v.path,"propertyNames"]}),h.additionalProperties=this.process(s.valueType,{...v,path:[...v.path,"additionalProperties"]});break}case"map":{if(this.unrepresentable==="throw")throw new Error("Map cannot be represented in JSON Schema");break}case"set":{if(this.unrepresentable==="throw")throw new Error("Set cannot be represented in JSON Schema");break}case"enum":{const h=y,b=tr(s.entries);b.every(_=>typeof _=="number")&&(h.type="number"),b.every(_=>typeof _=="string")&&(h.type="string"),h.enum=b;break}case"literal":{const h=y,b=[];for(const _ of s.values)if(_===void 0){if(this.unrepresentable==="throw")throw new Error("Literal `undefined` cannot be represented in JSON Schema")}else if(typeof _=="bigint"){if(this.unrepresentable==="throw")throw new Error("BigInt literals cannot be represented in JSON Schema");b.push(Number(_))}else b.push(_);if(b.length!==0)if(b.length===1){const _=b[0];h.type=_===null?"null":typeof _,h.const=_}else b.every(_=>typeof _=="number")&&(h.type="number"),b.every(_=>typeof _=="string")&&(h.type="string"),b.every(_=>typeof _=="boolean")&&(h.type="string"),b.every(_=>_===null)&&(h.type="null"),h.enum=b;break}case"file":{const h=y,b={type:"string",format:"binary",contentEncoding:"binary"},{minimum:_,maximum:N,mime:T}=e._zod.bag;_!==void 0&&(b.minLength=_),N!==void 0&&(b.maxLength=N),T?T.length===1?(b.contentMediaType=T[0],Object.assign(h,b)):h.anyOf=T.map(A=>({...b,contentMediaType:A})):Object.assign(h,b);break}case"transform":{if(this.unrepresentable==="throw")throw new Error("Transforms cannot be represented in JSON Schema");break}case"nullable":{const h=this.process(s.innerType,v);y.anyOf=[h,{type:"null"}];break}case"nonoptional":{this.process(s.innerType,v),a.ref=s.innerType;break}case"success":{const h=y;h.type="boolean";break}case"default":{this.process(s.innerType,v),a.ref=s.innerType,y.default=JSON.parse(JSON.stringify(s.defaultValue));break}case"prefault":{this.process(s.innerType,v),a.ref=s.innerType,this.io==="input"&&(y._prefault=JSON.parse(JSON.stringify(s.defaultValue)));break}case"catch":{this.process(s.innerType,v),a.ref=s.innerType;let h;try{h=s.catchValue(void 0)}catch{throw new Error("Dynamic catch values are not supported in JSON Schema")}y.default=h;break}case"nan":{if(this.unrepresentable==="throw")throw new Error("NaN cannot be represented in JSON Schema");break}case"template_literal":{const h=y,b=e._zod.pattern;if(!b)throw new Error("Pattern not found in template literal");h.type="string",h.pattern=b.source;break}case"pipe":{const h=this.io==="input"?s.in._zod.def.type==="transform"?s.out:s.in:s.out;this.process(h,v),a.ref=h;break}case"readonly":{this.process(s.innerType,v),a.ref=s.innerType,y.readOnly=!0;break}case"promise":{this.process(s.innerType,v),a.ref=s.innerType;break}case"optional":{this.process(s.innerType,v),a.ref=s.innerType;break}case"lazy":{const h=e._zod.innerType;this.process(h,v),a.ref=h;break}case"custom":{if(this.unrepresentable==="throw")throw new Error("Custom types cannot be represented in JSON Schema");break}}}}const l=this.metadataRegistry.get(e);return l&&Object.assign(a.schema,l),this.io==="input"&&fe(e)&&(delete a.schema.examples,delete a.schema.default),this.io==="input"&&a.schema._prefault&&((r=a.schema).default??(r.default=a.schema._prefault)),delete a.schema._prefault,this.seen.get(e).schema}emit(e,t){var f,d,m,g,v,x;const r={cycles:(t==null?void 0:t.cycles)??"ref",reused:(t==null?void 0:t.reused)??"inline",external:(t==null?void 0:t.external)??void 0},s=this.seen.get(e);if(!s)throw new Error("Unprocessed schema. This is a bug in Zod.");const i=y=>{var T;const h=this.target==="draft-2020-12"?"$defs":"definitions";if(r.external){const A=(T=r.external.registry.get(y[0]))==null?void 0:T.id,D=r.external.uri??(G=>G);if(A)return{ref:D(A)};const F=y[1].defId??y[1].schema.id??`schema${this.counter++}`;return y[1].defId=F,{defId:F,ref:`${D("__shared")}#/${h}/${F}`}}if(y[1]===s)return{ref:"#"};const _=`#/${h}/`,N=y[1].schema.id??`__schema${this.counter++}`;return{defId:N,ref:_+N}},o=y=>{if(y[1].schema.$ref)return;const h=y[1],{ref:b,defId:_}=i(y);h.def={...h.schema},_&&(h.defId=_);const N=h.schema;for(const T in N)delete N[T];N.$ref=b};if(r.cycles==="throw")for(const y of this.seen.entries()){const h=y[1];if(h.cycle)throw new Error(`Cycle detected: #/${(f=h.cycle)==null?void 0:f.join("/")}/<root>

Set the \`cycles\` parameter to \`"ref"\` to resolve cyclical schemas with defs.`)}for(const y of this.seen.entries()){const h=y[1];if(e===y[0]){o(y);continue}if(r.external){const _=(d=r.external.registry.get(y[0]))==null?void 0:d.id;if(e!==y[0]&&_){o(y);continue}}if((m=this.metadataRegistry.get(y[0]))==null?void 0:m.id){o(y);continue}if(h.cycle){o(y);continue}if(h.count>1&&r.reused==="ref"){o(y);continue}}const a=(y,h)=>{const b=this.seen.get(y),_=b.def??b.schema,N={..._};if(b.ref===null)return;const T=b.ref;if(b.ref=null,T){a(T,h);const A=this.seen.get(T).schema;A.$ref&&h.target==="draft-7"?(_.allOf=_.allOf??[],_.allOf.push(A)):(Object.assign(_,A),Object.assign(_,N))}b.isParent||this.override({zodSchema:y,jsonSchema:_,path:b.path??[]})};for(const y of[...this.seen.entries()].reverse())a(y[0],{target:this.target});const c={};if(this.target==="draft-2020-12"?c.$schema="https://json-schema.org/draft/2020-12/schema":this.target==="draft-7"?c.$schema="http://json-schema.org/draft-07/schema#":console.warn(`Invalid target: ${this.target}`),(g=r.external)!=null&&g.uri){const y=(v=r.external.registry.get(e))==null?void 0:v.id;if(!y)throw new Error("Schema is missing an `id` property");c.$id=r.external.uri(y)}Object.assign(c,s.def);const l=((x=r.external)==null?void 0:x.defs)??{};for(const y of this.seen.entries()){const h=y[1];h.def&&h.defId&&(l[h.defId]=h.def)}r.external||Object.keys(l).length>0&&(this.target==="draft-2020-12"?c.$defs=l:c.definitions=l);try{return JSON.parse(JSON.stringify(c))}catch{throw new Error("Error converting schema to JSON.")}}}function Ro(n,e){if(n instanceof Gs){const r=new Vs(e),s={};for(const a of n._idmap.entries()){const[c,l]=a;r.process(l)}const i={},o={registry:n,uri:e==null?void 0:e.uri,defs:s};for(const a of n._idmap.entries()){const[c,l]=a;i[c]=r.emit(l,{...e,external:o})}if(Object.keys(s).length>0){const a=r.target==="draft-2020-12"?"$defs":"definitions";i.__shared={[a]:s}}return{schemas:i}}const t=new Vs(e);return t.process(n),t.emit(n,e)}function fe(n,e){const t=e??{seen:new Set};if(t.seen.has(n))return!1;t.seen.add(n);const s=n._zod.def;switch(s.type){case"string":case"number":case"bigint":case"boolean":case"date":case"symbol":case"undefined":case"null":case"any":case"unknown":case"never":case"void":case"literal":case"enum":case"nan":case"file":case"template_literal":return!1;case"array":return fe(s.element,t);case"object":{for(const i in s.shape)if(fe(s.shape[i],t))return!0;return!1}case"union":{for(const i of s.options)if(fe(i,t))return!0;return!1}case"intersection":return fe(s.left,t)||fe(s.right,t);case"tuple":{for(const i of s.items)if(fe(i,t))return!0;return!!(s.rest&&fe(s.rest,t))}case"record":return fe(s.keyType,t)||fe(s.valueType,t);case"map":return fe(s.keyType,t)||fe(s.valueType,t);case"set":return fe(s.valueType,t);case"promise":case"optional":case"nonoptional":case"nullable":case"readonly":return fe(s.innerType,t);case"lazy":return fe(s.getter(),t);case"default":return fe(s.innerType,t);case"prefault":return fe(s.innerType,t);case"custom":return!1;case"transform":return!0;case"pipe":return fe(s.in,t)||fe(s.out,t);case"success":return!1;case"catch":return!1}throw new Error(`Unknown schema type: ${s.type}`)}function No(n,e){const t={...n};return Object.defineProperties(t,{$brand:{value:"auto-parseable-response-format",enumerable:!1},$parseRaw:{value:e,enumerable:!1}}),t}const Po=Symbol("Let zodToJsonSchema decide on which parser to use"),Ws={name:void 0,$refStrategy:"root",effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",nullableStrategy:"from-target",removeAdditionalStrategy:"passthrough",definitionPath:"definitions",target:"jsonSchema7",strictUnions:!1,errorMessages:!1,markdownDescription:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref"},Do=n=>typeof n=="string"?{...Ws,basePath:["#"],definitions:{},name:n}:{...Ws,basePath:["#"],definitions:{},...n},Lr=n=>"_def"in n?n._def:n;function Mo(n){if(!n)return!0;for(const e in n)return!1;return!0}const jo=n=>{const e=Do(n),t=e.name!==void 0?[...e.basePath,e.definitionPath,e.name]:e.basePath;return{...e,currentPath:t,propertyPath:void 0,seenRefs:new Set,seen:new Map(Object.entries(e.definitions).map(([r,s])=>[Lr(s),{def:Lr(s),path:[...e.basePath,e.definitionPath,r],jsonSchema:void 0}]))}};function Hs(n,e,t,r){r!=null&&r.errorMessages&&t&&(n.errorMessage={...n.errorMessage,[e]:t})}function ne(n,e,t,r,s){n[e]=t,Hs(n,e,r,s)}var X;(function(n){n.assertEqual=s=>{};function e(s){}n.assertIs=e;function t(s){throw new Error}n.assertNever=t,n.arrayToEnum=s=>{const i={};for(const o of s)i[o]=o;return i},n.getValidEnumValues=s=>{const i=n.objectKeys(s).filter(a=>typeof s[s[a]]!="number"),o={};for(const a of i)o[a]=s[a];return n.objectValues(o)},n.objectValues=s=>n.objectKeys(s).map(function(i){return s[i]}),n.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const i=[];for(const o in s)Object.prototype.hasOwnProperty.call(s,o)&&i.push(o);return i},n.find=(s,i)=>{for(const o of s)if(i(o))return o},n.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&Number.isFinite(s)&&Math.floor(s)===s;function r(s,i=" | "){return s.map(o=>typeof o=="string"?`'${o}'`:o).join(i)}n.joinValues=r,n.jsonStringifyReplacer=(s,i)=>typeof i=="bigint"?i.toString():i})(X||(X={}));var Ks;(function(n){n.mergeShapes=(e,t)=>({...e,...t})})(Ks||(Ks={}));const M=X.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),at=n=>{switch(typeof n){case"undefined":return M.undefined;case"string":return M.string;case"number":return Number.isNaN(n)?M.nan:M.number;case"boolean":return M.boolean;case"function":return M.function;case"bigint":return M.bigint;case"symbol":return M.symbol;case"object":return Array.isArray(n)?M.array:n===null?M.null:n.then&&typeof n.then=="function"&&n.catch&&typeof n.catch=="function"?M.promise:typeof Map<"u"&&n instanceof Map?M.map:typeof Set<"u"&&n instanceof Set?M.set:typeof Date<"u"&&n instanceof Date?M.date:M.object;default:return M.unknown}},C=X.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class je extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}format(e){const t=e||function(i){return i.message},r={_errors:[]},s=i=>{for(const o of i.issues)if(o.code==="invalid_union")o.unionErrors.map(s);else if(o.code==="invalid_return_type")s(o.returnTypeError);else if(o.code==="invalid_arguments")s(o.argumentsError);else if(o.path.length===0)r._errors.push(t(o));else{let a=r,c=0;for(;c<o.path.length;){const l=o.path[c];c===o.path.length-1?(a[l]=a[l]||{_errors:[]},a[l]._errors.push(t(o))):a[l]=a[l]||{_errors:[]},a=a[l],c++}}};return s(this),r}static assert(e){if(!(e instanceof je))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,X.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=t=>t.message){const t={},r=[];for(const s of this.issues)if(s.path.length>0){const i=s.path[0];t[i]=t[i]||[],t[i].push(e(s))}else r.push(e(s));return{formErrors:r,fieldErrors:t}}get formErrors(){return this.flatten()}}je.create=n=>new je(n);const Ur=(n,e)=>{let t;switch(n.code){case C.invalid_type:n.received===M.undefined?t="Required":t=`Expected ${n.expected}, received ${n.received}`;break;case C.invalid_literal:t=`Invalid literal value, expected ${JSON.stringify(n.expected,X.jsonStringifyReplacer)}`;break;case C.unrecognized_keys:t=`Unrecognized key(s) in object: ${X.joinValues(n.keys,", ")}`;break;case C.invalid_union:t="Invalid input";break;case C.invalid_union_discriminator:t=`Invalid discriminator value. Expected ${X.joinValues(n.options)}`;break;case C.invalid_enum_value:t=`Invalid enum value. Expected ${X.joinValues(n.options)}, received '${n.received}'`;break;case C.invalid_arguments:t="Invalid function arguments";break;case C.invalid_return_type:t="Invalid function return type";break;case C.invalid_date:t="Invalid date";break;case C.invalid_string:typeof n.validation=="object"?"includes"in n.validation?(t=`Invalid input: must include "${n.validation.includes}"`,typeof n.validation.position=="number"&&(t=`${t} at one or more positions greater than or equal to ${n.validation.position}`)):"startsWith"in n.validation?t=`Invalid input: must start with "${n.validation.startsWith}"`:"endsWith"in n.validation?t=`Invalid input: must end with "${n.validation.endsWith}"`:X.assertNever(n.validation):n.validation!=="regex"?t=`Invalid ${n.validation}`:t="Invalid";break;case C.too_small:n.type==="array"?t=`Array must contain ${n.exact?"exactly":n.inclusive?"at least":"more than"} ${n.minimum} element(s)`:n.type==="string"?t=`String must contain ${n.exact?"exactly":n.inclusive?"at least":"over"} ${n.minimum} character(s)`:n.type==="number"?t=`Number must be ${n.exact?"exactly equal to ":n.inclusive?"greater than or equal to ":"greater than "}${n.minimum}`:n.type==="bigint"?t=`Number must be ${n.exact?"exactly equal to ":n.inclusive?"greater than or equal to ":"greater than "}${n.minimum}`:n.type==="date"?t=`Date must be ${n.exact?"exactly equal to ":n.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(n.minimum))}`:t="Invalid input";break;case C.too_big:n.type==="array"?t=`Array must contain ${n.exact?"exactly":n.inclusive?"at most":"less than"} ${n.maximum} element(s)`:n.type==="string"?t=`String must contain ${n.exact?"exactly":n.inclusive?"at most":"under"} ${n.maximum} character(s)`:n.type==="number"?t=`Number must be ${n.exact?"exactly":n.inclusive?"less than or equal to":"less than"} ${n.maximum}`:n.type==="bigint"?t=`BigInt must be ${n.exact?"exactly":n.inclusive?"less than or equal to":"less than"} ${n.maximum}`:n.type==="date"?t=`Date must be ${n.exact?"exactly":n.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(n.maximum))}`:t="Invalid input";break;case C.custom:t="Invalid input";break;case C.invalid_intersection_types:t="Intersection results could not be merged";break;case C.not_multiple_of:t=`Number must be a multiple of ${n.multipleOf}`;break;case C.not_finite:t="Number must be finite";break;default:t=e.defaultError,X.assertNever(n)}return{message:t}};let $o=Ur;function Fo(){return $o}const Lo=n=>{const{data:e,path:t,errorMaps:r,issueData:s}=n,i=[...t,...s.path||[]],o={...s,path:i};if(s.message!==void 0)return{...s,path:i,message:s.message};let a="";const c=r.filter(l=>!!l).slice().reverse();for(const l of c)a=l(o,{data:e,defaultError:a}).message;return{...s,path:i,message:a}};function P(n,e){const t=Fo(),r=Lo({issueData:e,data:n.data,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,t,t===Ur?void 0:Ur].filter(s=>!!s)});n.common.issues.push(r)}class we{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,t){const r=[];for(const s of t){if(s.status==="aborted")return Z;s.status==="dirty"&&e.dirty(),r.push(s.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,t){const r=[];for(const s of t){const i=await s.key,o=await s.value;r.push({key:i,value:o})}return we.mergeObjectSync(e,r)}static mergeObjectSync(e,t){const r={};for(const s of t){const{key:i,value:o}=s;if(i.status==="aborted"||o.status==="aborted")return Z;i.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),i.value!=="__proto__"&&(typeof o.value<"u"||s.alwaysSet)&&(r[i.value]=o.value)}return{status:e.value,value:r}}}const Z=Object.freeze({status:"aborted"}),hn=n=>({status:"dirty",value:n}),Ce=n=>({status:"valid",value:n}),Ys=n=>n.status==="aborted",Xs=n=>n.status==="dirty",qt=n=>n.status==="valid",nr=n=>typeof Promise<"u"&&n instanceof Promise;var $;(function(n){n.errToObj=e=>typeof e=="string"?{message:e}:e||{},n.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})($||($={}));class $e{constructor(e,t,r,s){this._cachedPath=[],this.parent=e,this.data=t,this._path=r,this._key=s}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const Qs=(n,e)=>{if(qt(e))return{success:!0,data:e.value};if(!n.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t=new je(n.common.issues);return this._error=t,this._error}}};function V(n){if(!n)return{};const{errorMap:e,invalid_type_error:t,required_error:r,description:s}=n;if(e&&(t||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:s}:{errorMap:(o,a)=>{const{message:c}=n;return o.code==="invalid_enum_value"?{message:c??a.defaultError}:typeof a.data>"u"?{message:c??r??a.defaultError}:o.code!=="invalid_type"?{message:a.defaultError}:{message:c??t??a.defaultError}},description:s}}class K{get description(){return this._def.description}_getType(e){return at(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:at(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new we,ctx:{common:e.parent.common,data:e.data,parsedType:at(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if(nr(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const r=this.safeParse(e,t);if(r.success)return r.data;throw r.error}safeParse(e,t){const r={common:{issues:[],async:(t==null?void 0:t.async)??!1,contextualErrorMap:t==null?void 0:t.errorMap},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:at(e)},s=this._parseSync({data:e,path:r.path,parent:r});return Qs(r,s)}"~validate"(e){var r,s;const t={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:at(e)};if(!this["~standard"].async)try{const i=this._parseSync({data:e,path:[],parent:t});return qt(i)?{value:i.value}:{issues:t.common.issues}}catch(i){(s=(r=i==null?void 0:i.message)==null?void 0:r.toLowerCase())!=null&&s.includes("encountered")&&(this["~standard"].async=!0),t.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:t}).then(i=>qt(i)?{value:i.value}:{issues:t.common.issues})}async parseAsync(e,t){const r=await this.safeParseAsync(e,t);if(r.success)return r.data;throw r.error}async safeParseAsync(e,t){const r={common:{issues:[],contextualErrorMap:t==null?void 0:t.errorMap,async:!0},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:at(e)},s=this._parse({data:e,path:r.path,parent:r}),i=await(nr(s)?s:Promise.resolve(s));return Qs(r,i)}refine(e,t){const r=s=>typeof t=="string"||typeof t>"u"?{message:t}:typeof t=="function"?t(s):t;return this._refinement((s,i)=>{const o=e(s),a=()=>i.addIssue({code:C.custom,...r(s)});return typeof Promise<"u"&&o instanceof Promise?o.then(c=>c?!0:(a(),!1)):o?!0:(a(),!1)})}refinement(e,t){return this._refinement((r,s)=>e(r)?!0:(s.addIssue(typeof t=="function"?t(r,s):t),!1))}_refinement(e){return new wt({schema:this,typeName:O.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:t=>this["~validate"](t)}}optional(){return He.create(this,this._def)}nullable(){return bt.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Fe.create(this)}promise(){return cr.create(this,this._def)}or(e){return sr.create([this,e],this._def)}and(e){return ir.create(this,e,this._def)}transform(e){return new wt({...V(this._def),schema:this,typeName:O.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const t=typeof e=="function"?e:()=>e;return new lr({...V(this._def),innerType:this,defaultValue:t,typeName:O.ZodDefault})}brand(){return new ui({typeName:O.ZodBranded,type:this,...V(this._def)})}catch(e){const t=typeof e=="function"?e:()=>e;return new dr({...V(this._def),innerType:this,catchValue:t,typeName:O.ZodCatch})}describe(e){const t=this.constructor;return new t({...this._def,description:e})}pipe(e){return Wr.create(this,e)}readonly(){return pr.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const Uo=/^c[^\s-]{8,}$/i,Zo=/^[0-9a-z]+$/,qo=/^[0-9A-HJKMNP-TV-Z]{26}$/i,Bo=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,Jo=/^[a-z0-9_-]{21}$/i,zo=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,Go=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,Vo=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,Wo="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let Zr;const Ho=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Ko=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,Yo=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,Xo=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,Qo=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,eu=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,ei="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",tu=new RegExp(`^${ei}$`);function ti(n){let e="[0-5]\\d";n.precision?e=`${e}\\.\\d{${n.precision}}`:n.precision==null&&(e=`${e}(\\.\\d+)?`);const t=n.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${t}`}function nu(n){return new RegExp(`^${ti(n)}$`)}function ru(n){let e=`${ei}T${ti(n)}`;const t=[];return t.push(n.local?"Z?":"Z"),n.offset&&t.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${t.join("|")})`,new RegExp(`^${e}$`)}function su(n,e){return!!((e==="v4"||!e)&&Ho.test(n)||(e==="v6"||!e)&&Yo.test(n))}function iu(n,e){if(!zo.test(n))return!1;try{const[t]=n.split(".");if(!t)return!1;const r=t.replace(/-/g,"+").replace(/_/g,"/").padEnd(t.length+(4-t.length%4)%4,"="),s=JSON.parse(atob(r));return!(typeof s!="object"||s===null||"typ"in s&&(s==null?void 0:s.typ)!=="JWT"||!s.alg||e&&s.alg!==e)}catch{return!1}}function au(n,e){return!!((e==="v4"||!e)&&Ko.test(n)||(e==="v6"||!e)&&Xo.test(n))}class Ve extends K{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==M.string){const i=this._getOrReturnCtx(e);return P(i,{code:C.invalid_type,expected:M.string,received:i.parsedType}),Z}const r=new we;let s;for(const i of this._def.checks)if(i.kind==="min")e.data.length<i.value&&(s=this._getOrReturnCtx(e,s),P(s,{code:C.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="max")e.data.length>i.value&&(s=this._getOrReturnCtx(e,s),P(s,{code:C.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="length"){const o=e.data.length>i.value,a=e.data.length<i.value;(o||a)&&(s=this._getOrReturnCtx(e,s),o?P(s,{code:C.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):a&&P(s,{code:C.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),r.dirty())}else if(i.kind==="email")Vo.test(e.data)||(s=this._getOrReturnCtx(e,s),P(s,{validation:"email",code:C.invalid_string,message:i.message}),r.dirty());else if(i.kind==="emoji")Zr||(Zr=new RegExp(Wo,"u")),Zr.test(e.data)||(s=this._getOrReturnCtx(e,s),P(s,{validation:"emoji",code:C.invalid_string,message:i.message}),r.dirty());else if(i.kind==="uuid")Bo.test(e.data)||(s=this._getOrReturnCtx(e,s),P(s,{validation:"uuid",code:C.invalid_string,message:i.message}),r.dirty());else if(i.kind==="nanoid")Jo.test(e.data)||(s=this._getOrReturnCtx(e,s),P(s,{validation:"nanoid",code:C.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid")Uo.test(e.data)||(s=this._getOrReturnCtx(e,s),P(s,{validation:"cuid",code:C.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid2")Zo.test(e.data)||(s=this._getOrReturnCtx(e,s),P(s,{validation:"cuid2",code:C.invalid_string,message:i.message}),r.dirty());else if(i.kind==="ulid")qo.test(e.data)||(s=this._getOrReturnCtx(e,s),P(s,{validation:"ulid",code:C.invalid_string,message:i.message}),r.dirty());else if(i.kind==="url")try{new URL(e.data)}catch{s=this._getOrReturnCtx(e,s),P(s,{validation:"url",code:C.invalid_string,message:i.message}),r.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(e.data)||(s=this._getOrReturnCtx(e,s),P(s,{validation:"regex",code:C.invalid_string,message:i.message}),r.dirty())):i.kind==="trim"?e.data=e.data.trim():i.kind==="includes"?e.data.includes(i.value,i.position)||(s=this._getOrReturnCtx(e,s),P(s,{code:C.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),r.dirty()):i.kind==="toLowerCase"?e.data=e.data.toLowerCase():i.kind==="toUpperCase"?e.data=e.data.toUpperCase():i.kind==="startsWith"?e.data.startsWith(i.value)||(s=this._getOrReturnCtx(e,s),P(s,{code:C.invalid_string,validation:{startsWith:i.value},message:i.message}),r.dirty()):i.kind==="endsWith"?e.data.endsWith(i.value)||(s=this._getOrReturnCtx(e,s),P(s,{code:C.invalid_string,validation:{endsWith:i.value},message:i.message}),r.dirty()):i.kind==="datetime"?ru(i).test(e.data)||(s=this._getOrReturnCtx(e,s),P(s,{code:C.invalid_string,validation:"datetime",message:i.message}),r.dirty()):i.kind==="date"?tu.test(e.data)||(s=this._getOrReturnCtx(e,s),P(s,{code:C.invalid_string,validation:"date",message:i.message}),r.dirty()):i.kind==="time"?nu(i).test(e.data)||(s=this._getOrReturnCtx(e,s),P(s,{code:C.invalid_string,validation:"time",message:i.message}),r.dirty()):i.kind==="duration"?Go.test(e.data)||(s=this._getOrReturnCtx(e,s),P(s,{validation:"duration",code:C.invalid_string,message:i.message}),r.dirty()):i.kind==="ip"?su(e.data,i.version)||(s=this._getOrReturnCtx(e,s),P(s,{validation:"ip",code:C.invalid_string,message:i.message}),r.dirty()):i.kind==="jwt"?iu(e.data,i.alg)||(s=this._getOrReturnCtx(e,s),P(s,{validation:"jwt",code:C.invalid_string,message:i.message}),r.dirty()):i.kind==="cidr"?au(e.data,i.version)||(s=this._getOrReturnCtx(e,s),P(s,{validation:"cidr",code:C.invalid_string,message:i.message}),r.dirty()):i.kind==="base64"?Qo.test(e.data)||(s=this._getOrReturnCtx(e,s),P(s,{validation:"base64",code:C.invalid_string,message:i.message}),r.dirty()):i.kind==="base64url"?eu.test(e.data)||(s=this._getOrReturnCtx(e,s),P(s,{validation:"base64url",code:C.invalid_string,message:i.message}),r.dirty()):X.assertNever(i);return{status:r.value,value:e.data}}_regex(e,t,r){return this.refinement(s=>e.test(s),{validation:t,code:C.invalid_string,...$.errToObj(r)})}_addCheck(e){return new Ve({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...$.errToObj(e)})}url(e){return this._addCheck({kind:"url",...$.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...$.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...$.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...$.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...$.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...$.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...$.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...$.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...$.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...$.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...$.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...$.errToObj(e)})}datetime(e){return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(e==null?void 0:e.offset)??!1,local:(e==null?void 0:e.local)??!1,...$.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...$.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...$.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...$.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:t==null?void 0:t.position,...$.errToObj(t==null?void 0:t.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...$.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...$.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...$.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...$.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...$.errToObj(t)})}nonempty(e){return this.min(1,$.errToObj(e))}trim(){return new Ve({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Ve({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Ve({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}Ve.create=n=>new Ve({checks:[],typeName:O.ZodString,coerce:(n==null?void 0:n.coerce)??!1,...V(n)});function ou(n,e){const t=(n.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,s=t>r?t:r,i=Number.parseInt(n.toFixed(s).replace(".","")),o=Number.parseInt(e.toFixed(s).replace(".",""));return i%o/10**s}class Bt extends K{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==M.number){const i=this._getOrReturnCtx(e);return P(i,{code:C.invalid_type,expected:M.number,received:i.parsedType}),Z}let r;const s=new we;for(const i of this._def.checks)i.kind==="int"?X.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),P(r,{code:C.invalid_type,expected:"integer",received:"float",message:i.message}),s.dirty()):i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),P(r,{code:C.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),P(r,{code:C.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="multipleOf"?ou(e.data,i.value)!==0&&(r=this._getOrReturnCtx(e,r),P(r,{code:C.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):i.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),P(r,{code:C.not_finite,message:i.message}),s.dirty()):X.assertNever(i);return{status:s.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,$.toString(t))}gt(e,t){return this.setLimit("min",e,!1,$.toString(t))}lte(e,t){return this.setLimit("max",e,!0,$.toString(t))}lt(e,t){return this.setLimit("max",e,!1,$.toString(t))}setLimit(e,t,r,s){return new Bt({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:$.toString(s)}]})}_addCheck(e){return new Bt({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:$.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:$.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:$.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:$.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:$.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:$.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:$.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:$.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:$.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&X.isInteger(e.value))}get isFinite(){let e=null,t=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(t===null||r.value>t)&&(t=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(t)&&Number.isFinite(e)}}Bt.create=n=>new Bt({checks:[],typeName:O.ZodNumber,coerce:(n==null?void 0:n.coerce)||!1,...V(n)});class mn extends K{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==M.bigint)return this._getInvalidInput(e);let r;const s=new we;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),P(r,{code:C.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),P(r,{code:C.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="multipleOf"?e.data%i.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),P(r,{code:C.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):X.assertNever(i);return{status:s.value,value:e.data}}_getInvalidInput(e){const t=this._getOrReturnCtx(e);return P(t,{code:C.invalid_type,expected:M.bigint,received:t.parsedType}),Z}gte(e,t){return this.setLimit("min",e,!0,$.toString(t))}gt(e,t){return this.setLimit("min",e,!1,$.toString(t))}lte(e,t){return this.setLimit("max",e,!0,$.toString(t))}lt(e,t){return this.setLimit("max",e,!1,$.toString(t))}setLimit(e,t,r,s){return new mn({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:$.toString(s)}]})}_addCheck(e){return new mn({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:$.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:$.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:$.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:$.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:$.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}mn.create=n=>new mn({checks:[],typeName:O.ZodBigInt,coerce:(n==null?void 0:n.coerce)??!1,...V(n)});class qr extends K{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==M.boolean){const r=this._getOrReturnCtx(e);return P(r,{code:C.invalid_type,expected:M.boolean,received:r.parsedType}),Z}return Ce(e.data)}}qr.create=n=>new qr({typeName:O.ZodBoolean,coerce:(n==null?void 0:n.coerce)||!1,...V(n)});class rr extends K{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==M.date){const i=this._getOrReturnCtx(e);return P(i,{code:C.invalid_type,expected:M.date,received:i.parsedType}),Z}if(Number.isNaN(e.data.getTime())){const i=this._getOrReturnCtx(e);return P(i,{code:C.invalid_date}),Z}const r=new we;let s;for(const i of this._def.checks)i.kind==="min"?e.data.getTime()<i.value&&(s=this._getOrReturnCtx(e,s),P(s,{code:C.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),r.dirty()):i.kind==="max"?e.data.getTime()>i.value&&(s=this._getOrReturnCtx(e,s),P(s,{code:C.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),r.dirty()):X.assertNever(i);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new rr({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:$.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:$.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e!=null?new Date(e):null}}rr.create=n=>new rr({checks:[],coerce:(n==null?void 0:n.coerce)||!1,typeName:O.ZodDate,...V(n)});class ni extends K{_parse(e){if(this._getType(e)!==M.symbol){const r=this._getOrReturnCtx(e);return P(r,{code:C.invalid_type,expected:M.symbol,received:r.parsedType}),Z}return Ce(e.data)}}ni.create=n=>new ni({typeName:O.ZodSymbol,...V(n)});class Br extends K{_parse(e){if(this._getType(e)!==M.undefined){const r=this._getOrReturnCtx(e);return P(r,{code:C.invalid_type,expected:M.undefined,received:r.parsedType}),Z}return Ce(e.data)}}Br.create=n=>new Br({typeName:O.ZodUndefined,...V(n)});class Jr extends K{_parse(e){if(this._getType(e)!==M.null){const r=this._getOrReturnCtx(e);return P(r,{code:C.invalid_type,expected:M.null,received:r.parsedType}),Z}return Ce(e.data)}}Jr.create=n=>new Jr({typeName:O.ZodNull,...V(n)});class gn extends K{constructor(){super(...arguments),this._any=!0}_parse(e){return Ce(e.data)}}gn.create=n=>new gn({typeName:O.ZodAny,...V(n)});class ri extends K{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Ce(e.data)}}ri.create=n=>new ri({typeName:O.ZodUnknown,...V(n)});class ot extends K{_parse(e){const t=this._getOrReturnCtx(e);return P(t,{code:C.invalid_type,expected:M.never,received:t.parsedType}),Z}}ot.create=n=>new ot({typeName:O.ZodNever,...V(n)});class si extends K{_parse(e){if(this._getType(e)!==M.undefined){const r=this._getOrReturnCtx(e);return P(r,{code:C.invalid_type,expected:M.void,received:r.parsedType}),Z}return Ce(e.data)}}si.create=n=>new si({typeName:O.ZodVoid,...V(n)});class Fe extends K{_parse(e){const{ctx:t,status:r}=this._processInputParams(e),s=this._def;if(t.parsedType!==M.array)return P(t,{code:C.invalid_type,expected:M.array,received:t.parsedType}),Z;if(s.exactLength!==null){const o=t.data.length>s.exactLength.value,a=t.data.length<s.exactLength.value;(o||a)&&(P(t,{code:o?C.too_big:C.too_small,minimum:a?s.exactLength.value:void 0,maximum:o?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),r.dirty())}if(s.minLength!==null&&t.data.length<s.minLength.value&&(P(t,{code:C.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),r.dirty()),s.maxLength!==null&&t.data.length>s.maxLength.value&&(P(t,{code:C.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),r.dirty()),t.common.async)return Promise.all([...t.data].map((o,a)=>s.type._parseAsync(new $e(t,o,t.path,a)))).then(o=>we.mergeArray(r,o));const i=[...t.data].map((o,a)=>s.type._parseSync(new $e(t,o,t.path,a)));return we.mergeArray(r,i)}get element(){return this._def.type}min(e,t){return new Fe({...this._def,minLength:{value:e,message:$.toString(t)}})}max(e,t){return new Fe({...this._def,maxLength:{value:e,message:$.toString(t)}})}length(e,t){return new Fe({...this._def,exactLength:{value:e,message:$.toString(t)}})}nonempty(e){return this.min(1,e)}}Fe.create=(n,e)=>new Fe({type:n,minLength:null,maxLength:null,exactLength:null,typeName:O.ZodArray,...V(e)});function Jt(n){if(n instanceof le){const e={};for(const t in n.shape){const r=n.shape[t];e[t]=He.create(Jt(r))}return new le({...n._def,shape:()=>e})}else return n instanceof Fe?new Fe({...n._def,type:Jt(n.element)}):n instanceof He?He.create(Jt(n.unwrap())):n instanceof bt?bt.create(Jt(n.unwrap())):n instanceof _t?_t.create(n.items.map(e=>Jt(e))):n}class le extends K{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),t=X.objectKeys(e);return this._cached={shape:e,keys:t},this._cached}_parse(e){if(this._getType(e)!==M.object){const l=this._getOrReturnCtx(e);return P(l,{code:C.invalid_type,expected:M.object,received:l.parsedType}),Z}const{status:r,ctx:s}=this._processInputParams(e),{shape:i,keys:o}=this._getCached(),a=[];if(!(this._def.catchall instanceof ot&&this._def.unknownKeys==="strip"))for(const l in s.data)o.includes(l)||a.push(l);const c=[];for(const l of o){const f=i[l],d=s.data[l];c.push({key:{status:"valid",value:l},value:f._parse(new $e(s,d,s.path,l)),alwaysSet:l in s.data})}if(this._def.catchall instanceof ot){const l=this._def.unknownKeys;if(l==="passthrough")for(const f of a)c.push({key:{status:"valid",value:f},value:{status:"valid",value:s.data[f]}});else if(l==="strict")a.length>0&&(P(s,{code:C.unrecognized_keys,keys:a}),r.dirty());else if(l!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const l=this._def.catchall;for(const f of a){const d=s.data[f];c.push({key:{status:"valid",value:f},value:l._parse(new $e(s,d,s.path,f)),alwaysSet:f in s.data})}}return s.common.async?Promise.resolve().then(async()=>{const l=[];for(const f of c){const d=await f.key,m=await f.value;l.push({key:d,value:m,alwaysSet:f.alwaysSet})}return l}).then(l=>we.mergeObjectSync(r,l)):we.mergeObjectSync(r,c)}get shape(){return this._def.shape()}strict(e){return $.errToObj,new le({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(t,r)=>{var i,o;const s=((o=(i=this._def).errorMap)==null?void 0:o.call(i,t,r).message)??r.defaultError;return t.code==="unrecognized_keys"?{message:$.errToObj(e).message??s}:{message:s}}}:{}})}strip(){return new le({...this._def,unknownKeys:"strip"})}passthrough(){return new le({...this._def,unknownKeys:"passthrough"})}extend(e){return new le({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new le({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:O.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new le({...this._def,catchall:e})}pick(e){const t={};for(const r of X.objectKeys(e))e[r]&&this.shape[r]&&(t[r]=this.shape[r]);return new le({...this._def,shape:()=>t})}omit(e){const t={};for(const r of X.objectKeys(this.shape))e[r]||(t[r]=this.shape[r]);return new le({...this._def,shape:()=>t})}deepPartial(){return Jt(this)}partial(e){const t={};for(const r of X.objectKeys(this.shape)){const s=this.shape[r];e&&!e[r]?t[r]=s:t[r]=s.optional()}return new le({...this._def,shape:()=>t})}required(e){const t={};for(const r of X.objectKeys(this.shape))if(e&&!e[r])t[r]=this.shape[r];else{let i=this.shape[r];for(;i instanceof He;)i=i._def.innerType;t[r]=i}return new le({...this._def,shape:()=>t})}keyof(){return ai(X.objectKeys(this.shape))}}le.create=(n,e)=>new le({shape:()=>n,unknownKeys:"strip",catchall:ot.create(),typeName:O.ZodObject,...V(e)}),le.strictCreate=(n,e)=>new le({shape:()=>n,unknownKeys:"strict",catchall:ot.create(),typeName:O.ZodObject,...V(e)}),le.lazycreate=(n,e)=>new le({shape:n,unknownKeys:"strip",catchall:ot.create(),typeName:O.ZodObject,...V(e)});class sr extends K{_parse(e){const{ctx:t}=this._processInputParams(e),r=this._def.options;function s(i){for(const a of i)if(a.result.status==="valid")return a.result;for(const a of i)if(a.result.status==="dirty")return t.common.issues.push(...a.ctx.common.issues),a.result;const o=i.map(a=>new je(a.ctx.common.issues));return P(t,{code:C.invalid_union,unionErrors:o}),Z}if(t.common.async)return Promise.all(r.map(async i=>{const o={...t,common:{...t.common,issues:[]},parent:null};return{result:await i._parseAsync({data:t.data,path:t.path,parent:o}),ctx:o}})).then(s);{let i;const o=[];for(const c of r){const l={...t,common:{...t.common,issues:[]},parent:null},f=c._parseSync({data:t.data,path:t.path,parent:l});if(f.status==="valid")return f;f.status==="dirty"&&!i&&(i={result:f,ctx:l}),l.common.issues.length&&o.push(l.common.issues)}if(i)return t.common.issues.push(...i.ctx.common.issues),i.result;const a=o.map(c=>new je(c));return P(t,{code:C.invalid_union,unionErrors:a}),Z}}get options(){return this._def.options}}sr.create=(n,e)=>new sr({options:n,typeName:O.ZodUnion,...V(e)});const We=n=>n instanceof or?We(n.schema):n instanceof wt?We(n.innerType()):n instanceof ur?[n.value]:n instanceof vt?n.options:n instanceof Vr?X.objectValues(n.enum):n instanceof lr?We(n._def.innerType):n instanceof Br?[void 0]:n instanceof Jr?[null]:n instanceof He?[void 0,...We(n.unwrap())]:n instanceof bt?[null,...We(n.unwrap())]:n instanceof ui||n instanceof pr?We(n.unwrap()):n instanceof dr?We(n._def.innerType):[];class zr extends K{_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==M.object)return P(t,{code:C.invalid_type,expected:M.object,received:t.parsedType}),Z;const r=this.discriminator,s=t.data[r],i=this.optionsMap.get(s);return i?t.common.async?i._parseAsync({data:t.data,path:t.path,parent:t}):i._parseSync({data:t.data,path:t.path,parent:t}):(P(t,{code:C.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),Z)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,r){const s=new Map;for(const i of t){const o=We(i.shape[e]);if(!o.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const a of o){if(s.has(a))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(a)}`);s.set(a,i)}}return new zr({typeName:O.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:s,...V(r)})}}function Gr(n,e){const t=at(n),r=at(e);if(n===e)return{valid:!0,data:n};if(t===M.object&&r===M.object){const s=X.objectKeys(e),i=X.objectKeys(n).filter(a=>s.indexOf(a)!==-1),o={...n,...e};for(const a of i){const c=Gr(n[a],e[a]);if(!c.valid)return{valid:!1};o[a]=c.data}return{valid:!0,data:o}}else if(t===M.array&&r===M.array){if(n.length!==e.length)return{valid:!1};const s=[];for(let i=0;i<n.length;i++){const o=n[i],a=e[i],c=Gr(o,a);if(!c.valid)return{valid:!1};s.push(c.data)}return{valid:!0,data:s}}else return t===M.date&&r===M.date&&+n==+e?{valid:!0,data:n}:{valid:!1}}class ir extends K{_parse(e){const{status:t,ctx:r}=this._processInputParams(e),s=(i,o)=>{if(Ys(i)||Ys(o))return Z;const a=Gr(i.value,o.value);return a.valid?((Xs(i)||Xs(o))&&t.dirty(),{status:t.value,value:a.data}):(P(r,{code:C.invalid_intersection_types}),Z)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([i,o])=>s(i,o)):s(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}ir.create=(n,e,t)=>new ir({left:n,right:e,typeName:O.ZodIntersection,...V(t)});class _t extends K{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==M.array)return P(r,{code:C.invalid_type,expected:M.array,received:r.parsedType}),Z;if(r.data.length<this._def.items.length)return P(r,{code:C.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Z;!this._def.rest&&r.data.length>this._def.items.length&&(P(r,{code:C.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const i=[...r.data].map((o,a)=>{const c=this._def.items[a]||this._def.rest;return c?c._parse(new $e(r,o,r.path,a)):null}).filter(o=>!!o);return r.common.async?Promise.all(i).then(o=>we.mergeArray(t,o)):we.mergeArray(t,i)}get items(){return this._def.items}rest(e){return new _t({...this._def,rest:e})}}_t.create=(n,e)=>{if(!Array.isArray(n))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new _t({items:n,typeName:O.ZodTuple,rest:null,...V(e)})};class ar extends K{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==M.object)return P(r,{code:C.invalid_type,expected:M.object,received:r.parsedType}),Z;const s=[],i=this._def.keyType,o=this._def.valueType;for(const a in r.data)s.push({key:i._parse(new $e(r,a,r.path,a)),value:o._parse(new $e(r,r.data[a],r.path,a)),alwaysSet:a in r.data});return r.common.async?we.mergeObjectAsync(t,s):we.mergeObjectSync(t,s)}get element(){return this._def.valueType}static create(e,t,r){return t instanceof K?new ar({keyType:e,valueType:t,typeName:O.ZodRecord,...V(r)}):new ar({keyType:Ve.create(),valueType:e,typeName:O.ZodRecord,...V(t)})}}class ii extends K{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==M.map)return P(r,{code:C.invalid_type,expected:M.map,received:r.parsedType}),Z;const s=this._def.keyType,i=this._def.valueType,o=[...r.data.entries()].map(([a,c],l)=>({key:s._parse(new $e(r,a,r.path,[l,"key"])),value:i._parse(new $e(r,c,r.path,[l,"value"]))}));if(r.common.async){const a=new Map;return Promise.resolve().then(async()=>{for(const c of o){const l=await c.key,f=await c.value;if(l.status==="aborted"||f.status==="aborted")return Z;(l.status==="dirty"||f.status==="dirty")&&t.dirty(),a.set(l.value,f.value)}return{status:t.value,value:a}})}else{const a=new Map;for(const c of o){const l=c.key,f=c.value;if(l.status==="aborted"||f.status==="aborted")return Z;(l.status==="dirty"||f.status==="dirty")&&t.dirty(),a.set(l.value,f.value)}return{status:t.value,value:a}}}}ii.create=(n,e,t)=>new ii({valueType:e,keyType:n,typeName:O.ZodMap,...V(t)});class yn extends K{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==M.set)return P(r,{code:C.invalid_type,expected:M.set,received:r.parsedType}),Z;const s=this._def;s.minSize!==null&&r.data.size<s.minSize.value&&(P(r,{code:C.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),t.dirty()),s.maxSize!==null&&r.data.size>s.maxSize.value&&(P(r,{code:C.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),t.dirty());const i=this._def.valueType;function o(c){const l=new Set;for(const f of c){if(f.status==="aborted")return Z;f.status==="dirty"&&t.dirty(),l.add(f.value)}return{status:t.value,value:l}}const a=[...r.data.values()].map((c,l)=>i._parse(new $e(r,c,r.path,l)));return r.common.async?Promise.all(a).then(c=>o(c)):o(a)}min(e,t){return new yn({...this._def,minSize:{value:e,message:$.toString(t)}})}max(e,t){return new yn({...this._def,maxSize:{value:e,message:$.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}yn.create=(n,e)=>new yn({valueType:n,minSize:null,maxSize:null,typeName:O.ZodSet,...V(e)});class or extends K{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}or.create=(n,e)=>new or({getter:n,typeName:O.ZodLazy,...V(e)});class ur extends K{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return P(t,{received:t.data,code:C.invalid_literal,expected:this._def.value}),Z}return{status:"valid",value:e.data}}get value(){return this._def.value}}ur.create=(n,e)=>new ur({value:n,typeName:O.ZodLiteral,...V(e)});function ai(n,e){return new vt({values:n,typeName:O.ZodEnum,...V(e)})}class vt extends K{_parse(e){if(typeof e.data!="string"){const t=this._getOrReturnCtx(e),r=this._def.values;return P(t,{expected:X.joinValues(r),received:t.parsedType,code:C.invalid_type}),Z}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){const t=this._getOrReturnCtx(e),r=this._def.values;return P(t,{received:t.data,code:C.invalid_enum_value,options:r}),Z}return Ce(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return vt.create(e,{...this._def,...t})}exclude(e,t=this._def){return vt.create(this.options.filter(r=>!e.includes(r)),{...this._def,...t})}}vt.create=ai;class Vr extends K{_parse(e){const t=X.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==M.string&&r.parsedType!==M.number){const s=X.objectValues(t);return P(r,{expected:X.joinValues(s),received:r.parsedType,code:C.invalid_type}),Z}if(this._cache||(this._cache=new Set(X.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){const s=X.objectValues(t);return P(r,{received:r.data,code:C.invalid_enum_value,options:s}),Z}return Ce(e.data)}get enum(){return this._def.values}}Vr.create=(n,e)=>new Vr({values:n,typeName:O.ZodNativeEnum,...V(e)});class cr extends K{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==M.promise&&t.common.async===!1)return P(t,{code:C.invalid_type,expected:M.promise,received:t.parsedType}),Z;const r=t.parsedType===M.promise?t.data:Promise.resolve(t.data);return Ce(r.then(s=>this._def.type.parseAsync(s,{path:t.path,errorMap:t.common.contextualErrorMap})))}}cr.create=(n,e)=>new cr({type:n,typeName:O.ZodPromise,...V(e)});class wt extends K{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===O.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:r}=this._processInputParams(e),s=this._def.effect||null,i={addIssue:o=>{P(r,o),o.fatal?t.abort():t.dirty()},get path(){return r.path}};if(i.addIssue=i.addIssue.bind(i),s.type==="preprocess"){const o=s.transform(r.data,i);if(r.common.async)return Promise.resolve(o).then(async a=>{if(t.value==="aborted")return Z;const c=await this._def.schema._parseAsync({data:a,path:r.path,parent:r});return c.status==="aborted"?Z:c.status==="dirty"||t.value==="dirty"?hn(c.value):c});{if(t.value==="aborted")return Z;const a=this._def.schema._parseSync({data:o,path:r.path,parent:r});return a.status==="aborted"?Z:a.status==="dirty"||t.value==="dirty"?hn(a.value):a}}if(s.type==="refinement"){const o=a=>{const c=s.refinement(a,i);if(r.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(r.common.async===!1){const a=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?Z:(a.status==="dirty"&&t.dirty(),o(a.value),{status:t.value,value:a.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(a=>a.status==="aborted"?Z:(a.status==="dirty"&&t.dirty(),o(a.value).then(()=>({status:t.value,value:a.value}))))}if(s.type==="transform")if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!qt(o))return Z;const a=s.transform(o.value,i);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:a}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>qt(o)?Promise.resolve(s.transform(o.value,i)).then(a=>({status:t.value,value:a})):Z);X.assertNever(s)}}wt.create=(n,e,t)=>new wt({schema:n,typeName:O.ZodEffects,effect:e,...V(t)}),wt.createWithPreprocess=(n,e,t)=>new wt({schema:e,effect:{type:"preprocess",transform:n},typeName:O.ZodEffects,...V(t)});class He extends K{_parse(e){return this._getType(e)===M.undefined?Ce(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}He.create=(n,e)=>new He({innerType:n,typeName:O.ZodOptional,...V(e)});class bt extends K{_parse(e){return this._getType(e)===M.null?Ce(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}bt.create=(n,e)=>new bt({innerType:n,typeName:O.ZodNullable,...V(e)});class lr extends K{_parse(e){const{ctx:t}=this._processInputParams(e);let r=t.data;return t.parsedType===M.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}lr.create=(n,e)=>new lr({innerType:n,typeName:O.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...V(e)});class dr extends K{_parse(e){const{ctx:t}=this._processInputParams(e),r={...t,common:{...t.common,issues:[]}},s=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return nr(s)?s.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new je(r.common.issues)},input:r.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new je(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}dr.create=(n,e)=>new dr({innerType:n,typeName:O.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...V(e)});class oi extends K{_parse(e){if(this._getType(e)!==M.nan){const r=this._getOrReturnCtx(e);return P(r,{code:C.invalid_type,expected:M.nan,received:r.parsedType}),Z}return{status:"valid",value:e.data}}}oi.create=n=>new oi({typeName:O.ZodNaN,...V(n)});class ui extends K{_parse(e){const{ctx:t}=this._processInputParams(e),r=t.data;return this._def.type._parse({data:r,path:t.path,parent:t})}unwrap(){return this._def.type}}class Wr extends K{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?Z:i.status==="dirty"?(t.dirty(),hn(i.value)):this._def.out._parseAsync({data:i.value,path:r.path,parent:r})})();{const s=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?Z:s.status==="dirty"?(t.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:r.path,parent:r})}}static create(e,t){return new Wr({in:e,out:t,typeName:O.ZodPipeline})}}class pr extends K{_parse(e){const t=this._def.innerType._parse(e),r=s=>(qt(s)&&(s.value=Object.freeze(s.value)),s);return nr(t)?t.then(s=>r(s)):r(t)}unwrap(){return this._def.innerType}}pr.create=(n,e)=>new pr({innerType:n,typeName:O.ZodReadonly,...V(e)});function ci(n,e){const t=typeof n=="function"?n(e):typeof n=="string"?{message:n}:n;return typeof t=="string"?{message:t}:t}function uu(n,e={},t){return n?gn.create().superRefine((r,s)=>{const i=n(r);if(i instanceof Promise)return i.then(o=>{if(!o){const a=ci(e,r),c=a.fatal??t??!0;s.addIssue({code:"custom",...a,fatal:c})}});if(!i){const o=ci(e,r),a=o.fatal??t??!0;s.addIssue({code:"custom",...o,fatal:a})}}):gn.create()}var O;(function(n){n.ZodString="ZodString",n.ZodNumber="ZodNumber",n.ZodNaN="ZodNaN",n.ZodBigInt="ZodBigInt",n.ZodBoolean="ZodBoolean",n.ZodDate="ZodDate",n.ZodSymbol="ZodSymbol",n.ZodUndefined="ZodUndefined",n.ZodNull="ZodNull",n.ZodAny="ZodAny",n.ZodUnknown="ZodUnknown",n.ZodNever="ZodNever",n.ZodVoid="ZodVoid",n.ZodArray="ZodArray",n.ZodObject="ZodObject",n.ZodUnion="ZodUnion",n.ZodDiscriminatedUnion="ZodDiscriminatedUnion",n.ZodIntersection="ZodIntersection",n.ZodTuple="ZodTuple",n.ZodRecord="ZodRecord",n.ZodMap="ZodMap",n.ZodSet="ZodSet",n.ZodFunction="ZodFunction",n.ZodLazy="ZodLazy",n.ZodLiteral="ZodLiteral",n.ZodEnum="ZodEnum",n.ZodEffects="ZodEffects",n.ZodNativeEnum="ZodNativeEnum",n.ZodOptional="ZodOptional",n.ZodNullable="ZodNullable",n.ZodDefault="ZodDefault",n.ZodCatch="ZodCatch",n.ZodPromise="ZodPromise",n.ZodBranded="ZodBranded",n.ZodPipeline="ZodPipeline",n.ZodReadonly="ZodReadonly"})(O||(O={}));const li=(n,e={message:`Input not instance of ${n.name}`})=>uu(t=>t instanceof n,e),p=Ve.create,E=Bt.create,It=qr.create,W=gn.create;ot.create;const z=Fe.create,w=le.create,Ke=sr.create,_e=zr.create;ir.create,_t.create;const re=ar.create,cu=or.create,I=ur.create,de=vt.create;cr.create,He.create,bt.create;function lu(){return{}}function du(n,e){var r,s;const t={type:"array"};return((s=(r=n.type)==null?void 0:r._def)==null?void 0:s.typeName)!==O.ZodAny&&(t.items=Q(n.type._def,{...e,currentPath:[...e.currentPath,"items"]})),n.minLength&&ne(t,"minItems",n.minLength.value,n.minLength.message,e),n.maxLength&&ne(t,"maxItems",n.maxLength.value,n.maxLength.message,e),n.exactLength&&(ne(t,"minItems",n.exactLength.value,n.exactLength.message,e),ne(t,"maxItems",n.exactLength.value,n.exactLength.message,e)),t}function pu(n,e){const t={type:"integer",format:"int64"};if(!n.checks)return t;for(const r of n.checks)switch(r.kind){case"min":e.target==="jsonSchema7"?r.inclusive?ne(t,"minimum",r.value,r.message,e):ne(t,"exclusiveMinimum",r.value,r.message,e):(r.inclusive||(t.exclusiveMinimum=!0),ne(t,"minimum",r.value,r.message,e));break;case"max":e.target==="jsonSchema7"?r.inclusive?ne(t,"maximum",r.value,r.message,e):ne(t,"exclusiveMaximum",r.value,r.message,e):(r.inclusive||(t.exclusiveMaximum=!0),ne(t,"maximum",r.value,r.message,e));break;case"multipleOf":ne(t,"multipleOf",r.value,r.message,e);break}return t}function fu(){return{type:"boolean"}}function hu(n,e){return Q(n.type._def,e)}const mu=(n,e)=>Q(n.innerType._def,e);function di(n,e,t){const r=t??e.dateStrategy;if(Array.isArray(r))return{anyOf:r.map((s,i)=>di(n,e,s))};switch(r){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return gu(n,e)}}const gu=(n,e)=>{const t={type:"integer",format:"unix-time"};if(e.target==="openApi3")return t;for(const r of n.checks)switch(r.kind){case"min":ne(t,"minimum",r.value,r.message,e);break;case"max":ne(t,"maximum",r.value,r.message,e);break}return t};function yu(n,e){return{...Q(n.innerType._def,e),default:n.defaultValue()}}function _u(n,e,t){return e.effectStrategy==="input"?Q(n.schema._def,e,t):{}}function vu(n){return{type:"string",enum:[...n.values]}}const wu=n=>"type"in n&&n.type==="string"?!1:"allOf"in n;function bu(n,e){const t=[Q(n.left._def,{...e,currentPath:[...e.currentPath,"allOf","0"]}),Q(n.right._def,{...e,currentPath:[...e.currentPath,"allOf","1"]})].filter(i=>!!i);let r=e.target==="jsonSchema2019-09"?{unevaluatedProperties:!1}:void 0;const s=[];return t.forEach(i=>{if(wu(i))s.push(...i.allOf),i.unevaluatedProperties===void 0&&(r=void 0);else{let o=i;if("additionalProperties"in i&&i.additionalProperties===!1){const{additionalProperties:a,...c}=i;o=c}else r=void 0;s.push(o)}}),s.length?{allOf:s,...r}:void 0}function Iu(n,e){const t=typeof n.value;return t!=="bigint"&&t!=="number"&&t!=="boolean"&&t!=="string"?{type:Array.isArray(n.value)?"array":"object"}:e.target==="openApi3"?{type:t==="bigint"?"integer":t,enum:[n.value]}:{type:t==="bigint"?"integer":t,const:n.value}}let Hr;const St={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:()=>(Hr===void 0&&(Hr=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),Hr),base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/};function pi(n,e){const t={type:"string"};function r(s){return e.patternStrategy==="escape"?Su(s):s}if(n.checks)for(const s of n.checks)switch(s.kind){case"min":ne(t,"minLength",typeof t.minLength=="number"?Math.max(t.minLength,s.value):s.value,s.message,e);break;case"max":ne(t,"maxLength",typeof t.maxLength=="number"?Math.min(t.maxLength,s.value):s.value,s.message,e);break;case"email":switch(e.emailStrategy){case"format:email":Ne(t,"email",s.message,e);break;case"format:idn-email":Ne(t,"idn-email",s.message,e);break;case"pattern:zod":Pe(t,St.email,s.message,e);break}break;case"url":Ne(t,"uri",s.message,e);break;case"uuid":Ne(t,"uuid",s.message,e);break;case"regex":Pe(t,s.regex,s.message,e);break;case"cuid":Pe(t,St.cuid,s.message,e);break;case"cuid2":Pe(t,St.cuid2,s.message,e);break;case"startsWith":Pe(t,RegExp(`^${r(s.value)}`),s.message,e);break;case"endsWith":Pe(t,RegExp(`${r(s.value)}$`),s.message,e);break;case"datetime":Ne(t,"date-time",s.message,e);break;case"date":Ne(t,"date",s.message,e);break;case"time":Ne(t,"time",s.message,e);break;case"duration":Ne(t,"duration",s.message,e);break;case"length":ne(t,"minLength",typeof t.minLength=="number"?Math.max(t.minLength,s.value):s.value,s.message,e),ne(t,"maxLength",typeof t.maxLength=="number"?Math.min(t.maxLength,s.value):s.value,s.message,e);break;case"includes":{Pe(t,RegExp(r(s.value)),s.message,e);break}case"ip":{s.version!=="v6"&&Ne(t,"ipv4",s.message,e),s.version!=="v4"&&Ne(t,"ipv6",s.message,e);break}case"emoji":Pe(t,St.emoji,s.message,e);break;case"ulid":{Pe(t,St.ulid,s.message,e);break}case"base64":{switch(e.base64Strategy){case"format:binary":{Ne(t,"binary",s.message,e);break}case"contentEncoding:base64":{ne(t,"contentEncoding","base64",s.message,e);break}case"pattern:zod":{Pe(t,St.base64,s.message,e);break}}break}case"nanoid":Pe(t,St.nanoid,s.message,e)}return t}const Su=n=>Array.from(n).map(e=>/[a-zA-Z0-9]/.test(e)?e:`\\${e}`).join(""),Ne=(n,e,t,r)=>{var s;n.format||(s=n.anyOf)!=null&&s.some(i=>i.format)?(n.anyOf||(n.anyOf=[]),n.format&&(n.anyOf.push({format:n.format,...n.errorMessage&&r.errorMessages&&{errorMessage:{format:n.errorMessage.format}}}),delete n.format,n.errorMessage&&(delete n.errorMessage.format,Object.keys(n.errorMessage).length===0&&delete n.errorMessage)),n.anyOf.push({format:e,...t&&r.errorMessages&&{errorMessage:{format:t}}})):ne(n,"format",e,t,r)},Pe=(n,e,t,r)=>{var s;n.pattern||(s=n.allOf)!=null&&s.some(i=>i.pattern)?(n.allOf||(n.allOf=[]),n.pattern&&(n.allOf.push({pattern:n.pattern,...n.errorMessage&&r.errorMessages&&{errorMessage:{pattern:n.errorMessage.pattern}}}),delete n.pattern,n.errorMessage&&(delete n.errorMessage.pattern,Object.keys(n.errorMessage).length===0&&delete n.errorMessage)),n.allOf.push({pattern:fi(e,r),...t&&r.errorMessages&&{errorMessage:{pattern:t}}})):ne(n,"pattern",fi(e,r),t,r)},fi=(n,e)=>{var l;const t=typeof n=="function"?n():n;if(!e.applyRegexFlags||!t.flags)return t.source;const r={i:t.flags.includes("i"),m:t.flags.includes("m"),s:t.flags.includes("s")},s=r.i?t.source.toLowerCase():t.source;let i="",o=!1,a=!1,c=!1;for(let f=0;f<s.length;f++){if(o){i+=s[f],o=!1;continue}if(r.i){if(a){if(s[f].match(/[a-z]/)){c?(i+=s[f],i+=`${s[f-2]}-${s[f]}`.toUpperCase(),c=!1):s[f+1]==="-"&&((l=s[f+2])!=null&&l.match(/[a-z]/))?(i+=s[f],c=!0):i+=`${s[f]}${s[f].toUpperCase()}`;continue}}else if(s[f].match(/[a-z]/)){i+=`[${s[f]}${s[f].toUpperCase()}]`;continue}}if(r.m){if(s[f]==="^"){i+=`(^|(?<=[\r
]))`;continue}else if(s[f]==="$"){i+=`($|(?=[\r
]))`;continue}}if(r.s&&s[f]==="."){i+=a?`${s[f]}\r
`:`[${s[f]}\r
]`;continue}i+=s[f],s[f]==="\\"?o=!0:a&&s[f]==="]"?a=!1:!a&&s[f]==="["&&(a=!0)}try{const f=new RegExp(i)}catch{return console.warn(`Could not convert regex pattern at ${e.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),t.source}return i};function hi(n,e){var r,s,i,o;if(e.target==="openApi3"&&((r=n.keyType)==null?void 0:r._def.typeName)===O.ZodEnum)return{type:"object",required:n.keyType._def.values,properties:n.keyType._def.values.reduce((a,c)=>({...a,[c]:Q(n.valueType._def,{...e,currentPath:[...e.currentPath,"properties",c]})??{}}),{}),additionalProperties:!1};const t={type:"object",additionalProperties:Q(n.valueType._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]})??{}};if(e.target==="openApi3")return t;if(((s=n.keyType)==null?void 0:s._def.typeName)===O.ZodString&&((i=n.keyType._def.checks)!=null&&i.length)){const a=Object.entries(pi(n.keyType._def,e)).reduce((c,[l,f])=>l==="type"?c:{...c,[l]:f},{});return{...t,propertyNames:a}}else if(((o=n.keyType)==null?void 0:o._def.typeName)===O.ZodEnum)return{...t,propertyNames:{enum:n.keyType._def.values}};return t}function xu(n,e){if(e.mapStrategy==="record")return hi(n,e);const t=Q(n.keyType._def,{...e,currentPath:[...e.currentPath,"items","items","0"]})||{},r=Q(n.valueType._def,{...e,currentPath:[...e.currentPath,"items","items","1"]})||{};return{type:"array",maxItems:125,items:{type:"array",items:[t,r],minItems:2,maxItems:2}}}function Tu(n){const e=n.values,r=Object.keys(n.values).filter(i=>typeof e[e[i]]!="number").map(i=>e[i]),s=Array.from(new Set(r.map(i=>typeof i)));return{type:s.length===1?s[0]==="string"?"string":"number":["string","number"],enum:r}}function ku(){return{not:{}}}function Au(n){return n.target==="openApi3"?{enum:["null"],nullable:!0}:{type:"null"}}const fr={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function Cu(n,e){if(e.target==="openApi3")return mi(n,e);const t=n.options instanceof Map?Array.from(n.options.values()):n.options;if(t.every(r=>r._def.typeName in fr&&(!r._def.checks||!r._def.checks.length))){const r=t.reduce((s,i)=>{const o=fr[i._def.typeName];return o&&!s.includes(o)?[...s,o]:s},[]);return{type:r.length>1?r:r[0]}}else if(t.every(r=>r._def.typeName==="ZodLiteral"&&!r.description)){const r=t.reduce((s,i)=>{const o=typeof i._def.value;switch(o){case"string":case"number":case"boolean":return[...s,o];case"bigint":return[...s,"integer"];case"object":if(i._def.value===null)return[...s,"null"];case"symbol":case"undefined":case"function":default:return s}},[]);if(r.length===t.length){const s=r.filter((i,o,a)=>a.indexOf(i)===o);return{type:s.length>1?s:s[0],enum:t.reduce((i,o)=>i.includes(o._def.value)?i:[...i,o._def.value],[])}}}else if(t.every(r=>r._def.typeName==="ZodEnum"))return{type:"string",enum:t.reduce((r,s)=>[...r,...s._def.values.filter(i=>!r.includes(i))],[])};return mi(n,e)}const mi=(n,e)=>{const t=(n.options instanceof Map?Array.from(n.options.values()):n.options).map((r,s)=>Q(r._def,{...e,currentPath:[...e.currentPath,"anyOf",`${s}`]})).filter(r=>!!r&&(!e.strictUnions||typeof r=="object"&&Object.keys(r).length>0));return t.length?{anyOf:t}:void 0};function Ou(n,e){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(n.innerType._def.typeName)&&(!n.innerType._def.checks||!n.innerType._def.checks.length))return e.target==="openApi3"||e.nullableStrategy==="property"?{type:fr[n.innerType._def.typeName],nullable:!0}:{type:[fr[n.innerType._def.typeName],"null"]};if(e.target==="openApi3"){const r=Q(n.innerType._def,{...e,currentPath:[...e.currentPath]});return r&&"$ref"in r?{allOf:[r],nullable:!0}:r&&{...r,nullable:!0}}const t=Q(n.innerType._def,{...e,currentPath:[...e.currentPath,"anyOf","0"]});return t&&{anyOf:[t,{type:"null"}]}}function Eu(n,e){const t={type:"number"};if(!n.checks)return t;for(const r of n.checks)switch(r.kind){case"int":t.type="integer",Hs(t,"type",r.message,e);break;case"min":e.target==="jsonSchema7"?r.inclusive?ne(t,"minimum",r.value,r.message,e):ne(t,"exclusiveMinimum",r.value,r.message,e):(r.inclusive||(t.exclusiveMinimum=!0),ne(t,"minimum",r.value,r.message,e));break;case"max":e.target==="jsonSchema7"?r.inclusive?ne(t,"maximum",r.value,r.message,e):ne(t,"exclusiveMaximum",r.value,r.message,e):(r.inclusive||(t.exclusiveMaximum=!0),ne(t,"maximum",r.value,r.message,e));break;case"multipleOf":ne(t,"multipleOf",r.value,r.message,e);break}return t}function Ru(n,e){return e.removeAdditionalStrategy==="strict"?n.catchall._def.typeName==="ZodNever"?n.unknownKeys!=="strict":Q(n.catchall._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]})??!0:n.catchall._def.typeName==="ZodNever"?n.unknownKeys==="passthrough":Q(n.catchall._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]})??!0}function Nu(n,e){const t={type:"object",...Object.entries(n.shape()).reduce((r,[s,i])=>{var c;if(i===void 0||i._def===void 0)return r;const o=[...e.currentPath,"properties",s],a=Q(i._def,{...e,currentPath:o,propertyPath:o});if(a===void 0)return r;if(e.openaiStrictMode&&i.isOptional()&&!i.isNullable()&&typeof((c=i._def)==null?void 0:c.defaultValue)>"u")throw new Error(`Zod field at \`${o.join("/")}\` uses \`.optional()\` without \`.nullable()\` which is not supported by the API. See: https://platform.openai.com/docs/guides/structured-outputs?api-mode=responses#all-fields-must-be-required`);return{properties:{...r.properties,[s]:a},required:i.isOptional()&&!e.openaiStrictMode?r.required:[...r.required,s]}},{properties:{},required:[]}),additionalProperties:Ru(n,e)};return t.required.length||delete t.required,t}const Pu=(n,e)=>{if(e.propertyPath&&e.currentPath.slice(0,e.propertyPath.length).toString()===e.propertyPath.toString())return Q(n.innerType._def,{...e,currentPath:e.currentPath});const t=Q(n.innerType._def,{...e,currentPath:[...e.currentPath,"anyOf","1"]});return t?{anyOf:[{not:{}},t]}:{}},Du=(n,e)=>{if(e.pipeStrategy==="input")return Q(n.in._def,e);if(e.pipeStrategy==="output")return Q(n.out._def,e);const t=Q(n.in._def,{...e,currentPath:[...e.currentPath,"allOf","0"]}),r=Q(n.out._def,{...e,currentPath:[...e.currentPath,"allOf",t?"1":"0"]});return{allOf:[t,r].filter(s=>s!==void 0)}};function Mu(n,e){return Q(n.type._def,e)}function ju(n,e){const r={type:"array",uniqueItems:!0,items:Q(n.valueType._def,{...e,currentPath:[...e.currentPath,"items"]})};return n.minSize&&ne(r,"minItems",n.minSize.value,n.minSize.message,e),n.maxSize&&ne(r,"maxItems",n.maxSize.value,n.maxSize.message,e),r}function $u(n,e){return n.rest?{type:"array",minItems:n.items.length,items:n.items.map((t,r)=>Q(t._def,{...e,currentPath:[...e.currentPath,"items",`${r}`]})).reduce((t,r)=>r===void 0?t:[...t,r],[]),additionalItems:Q(n.rest._def,{...e,currentPath:[...e.currentPath,"additionalItems"]})}:{type:"array",minItems:n.items.length,maxItems:n.items.length,items:n.items.map((t,r)=>Q(t._def,{...e,currentPath:[...e.currentPath,"items",`${r}`]})).reduce((t,r)=>r===void 0?t:[...t,r],[])}}function Fu(){return{not:{}}}function Lu(){return{}}const Uu=(n,e)=>Q(n.innerType._def,e);function Q(n,e,t=!1){var o;const r=e.seen.get(n);if(e.override){const a=(o=e.override)==null?void 0:o.call(e,n,e,r,t);if(a!==Po)return a}if(r&&!t){const a=Zu(r,e);if(a!==void 0)return"$ref"in a&&e.seenRefs.add(a.$ref),a}const s={def:n,path:e.currentPath,jsonSchema:void 0};e.seen.set(n,s);const i=Bu(n,n.typeName,e,t);return i&&Ju(n,e,i),s.jsonSchema=i,i}const Zu=(n,e)=>{switch(e.$refStrategy){case"root":return{$ref:n.path.join("/")};case"extract-to-root":const t=n.path.slice(e.basePath.length+1).join("_");return t!==e.name&&e.nameStrategy==="duplicate-ref"&&(e.definitions[t]=n.def),{$ref:[...e.basePath,e.definitionPath,t].join("/")};case"relative":return{$ref:qu(e.currentPath,n.path)};case"none":case"seen":return n.path.length<e.currentPath.length&&n.path.every((r,s)=>e.currentPath[s]===r)?(console.warn(`Recursive reference detected at ${e.currentPath.join("/")}! Defaulting to any`),{}):e.$refStrategy==="seen"?{}:void 0}},qu=(n,e)=>{let t=0;for(;t<n.length&&t<e.length&&n[t]===e[t];t++);return[(n.length-t).toString(),...e.slice(t)].join("/")},Bu=(n,e,t,r)=>{switch(e){case O.ZodString:return pi(n,t);case O.ZodNumber:return Eu(n,t);case O.ZodObject:return Nu(n,t);case O.ZodBigInt:return pu(n,t);case O.ZodBoolean:return fu();case O.ZodDate:return di(n,t);case O.ZodUndefined:return Fu();case O.ZodNull:return Au(t);case O.ZodArray:return du(n,t);case O.ZodUnion:case O.ZodDiscriminatedUnion:return Cu(n,t);case O.ZodIntersection:return bu(n,t);case O.ZodTuple:return $u(n,t);case O.ZodRecord:return hi(n,t);case O.ZodLiteral:return Iu(n,t);case O.ZodEnum:return vu(n);case O.ZodNativeEnum:return Tu(n);case O.ZodNullable:return Ou(n,t);case O.ZodOptional:return Pu(n,t);case O.ZodMap:return xu(n,t);case O.ZodSet:return ju(n,t);case O.ZodLazy:return Q(n.getter()._def,t);case O.ZodPromise:return Mu(n,t);case O.ZodNaN:case O.ZodNever:return ku();case O.ZodEffects:return _u(n,t,r);case O.ZodAny:return lu();case O.ZodUnknown:return Lu();case O.ZodDefault:return yu(n,t);case O.ZodBranded:return hu(n,t);case O.ZodReadonly:return Uu(n,t);case O.ZodCatch:return mu(n,t);case O.ZodPipeline:return Du(n,t);case O.ZodFunction:case O.ZodVoid:case O.ZodSymbol:return;default:return(s=>{})()}},Ju=(n,e,t)=>(n.description&&(t.description=n.description,e.markdownDescription&&(t.markdownDescription=n.description)),t),zu=(n,e)=>{const t=jo(e),r=typeof e=="string"?e:(e==null?void 0:e.nameStrategy)==="title"||e==null?void 0:e.name,s=Q(n._def,r===void 0?t:{...t,currentPath:[...t.basePath,t.definitionPath,r]},!1)??{},i=typeof e=="object"&&e.name!==void 0&&e.nameStrategy==="title"?e.name:void 0;i!==void 0&&(s.title=i);const o=(()=>{if(Mo(t.definitions))return;const c={},l=new Set;for(let f=0;f<500;f++){const d=Object.entries(t.definitions).filter(([m])=>!l.has(m));if(d.length===0)break;for(const[m,g]of d)c[m]=Q(Lr(g),{...t,currentPath:[...t.basePath,t.definitionPath,m]},!0)??{},l.add(m)}return c})(),a=r===void 0?o?{...s,[t.definitionPath]:o}:s:t.nameStrategy==="duplicate-ref"?{...s,...o||t.seenRefs.size?{[t.definitionPath]:{...o,...t.seenRefs.size?{[r]:s}:void 0}}:void 0}:{$ref:[...t.$refStrategy==="relative"?[]:t.basePath,t.definitionPath,r].join("/"),[t.definitionPath]:{...o,[r]:s}};return t.target==="jsonSchema7"?a.$schema="http://json-schema.org/draft-07/schema#":t.target==="jsonSchema2019-09"&&(a.$schema="https://json-schema.org/draft/2019-09/schema#"),a};function Gu(n,{parser:e,callback:t}){const r={...n};return Object.defineProperties(r,{$brand:{value:"auto-parseable-tool",enumerable:!1},$parseRaw:{value:e,enumerable:!1},$callback:{value:t,enumerable:!1}}),r}function Vu(n){if(n.type!=="object")throw new Error(`Root schema must have type: 'object' but got type: ${n.type?`'${n.type}'`:"undefined"}`);const e=structuredClone(n);return Ye(e,[],e)}function Kr(n){if(typeof n=="boolean")return!1;if(n.type==="null")return!0;for(const e of n.oneOf??[])if(Kr(e))return!0;for(const e of n.anyOf??[])if(Kr(e))return!0;return!1}function Ye(n,e,t){if(typeof n=="boolean")throw new TypeError(`Expected object schema but got boolean; path=${e.join("/")}`);if(!xt(n))throw new TypeError(`Expected ${JSON.stringify(n)} to be an object; path=${e.join("/")}`);const r=n.$defs;if(xt(r))for(const[m,g]of Object.entries(r))Ye(g,[...e,"$defs",m],t);const s=n.definitions;if(xt(s))for(const[m,g]of Object.entries(s))Ye(g,[...e,"definitions",m],t);n.type==="object"&&!("additionalProperties"in n)&&(n.additionalProperties=!1);const o=n.required??[],a=n.properties;if(xt(a)){for(const[m,g]of Object.entries(a))if(!Kr(g)&&!o.includes(m))throw new Error(`Zod field at \`${[...e,"properties",m].join("/")}\` uses \`.optional()\` without \`.nullable()\` which is not supported by the API. See: https://platform.openai.com/docs/guides/structured-outputs?api-mode=responses#all-fields-must-be-required`);n.required=Object.keys(a),n.properties=Object.fromEntries(Object.entries(a).map(([m,g])=>[m,Ye(g,[...e,"properties",m],t)]))}const c=n.items;xt(c)&&(n.items=Ye(c,[...e,"items"],t));const l=n.anyOf;Array.isArray(l)&&(n.anyOf=l.map((m,g)=>Ye(m,[...e,"anyOf",String(g)],t)));const f=n.allOf;if(Array.isArray(f))if(f.length===1){const m=Ye(f[0],[...e,"allOf","0"],t);Object.assign(n,m),delete n.allOf}else n.allOf=f.map((m,g)=>Ye(m,[...e,"allOf",String(g)],t));n.default===null&&delete n.default;const d=n.$ref;if(d&&Hu(n,1)){if(typeof d!="string")throw new TypeError(`Received non-string $ref - ${d}; path=${e.join("/")}`);const m=Wu(t,d);if(typeof m=="boolean")throw new Error(`Expected \`$ref: ${d}\` to resolve to an object schema but got boolean`);if(!xt(m))throw new Error(`Expected \`$ref: ${d}\` to resolve to an object but got ${JSON.stringify(m)}`);return Object.assign(n,{...m,...n}),delete n.$ref,Ye(n,e,t)}return n}function Wu(n,e){if(!e.startsWith("#/"))throw new Error(`Unexpected $ref format ${JSON.stringify(e)}; Does not start with #/`);const t=e.slice(2).split("/");let r=n;for(const s of t){if(!xt(r))throw new Error(`encountered non-object entry while resolving ${e} - ${JSON.stringify(r)}`);const i=r[s];if(i===void 0)throw new Error(`Key ${s} not found while resolving ${e}`);r=i}return r}function xt(n){return typeof n=="object"&&n!==null&&!Array.isArray(n)}function Hu(n,e){let t=0;for(const r in n)if(t++,t>e)return!0;return!1}function gi(n,e){return zu(n,{openaiStrictMode:!0,name:e.name,nameStrategy:"duplicate-ref",$refStrategy:"extract-to-root",nullableStrategy:"property"})}function yi(n){return Vu(Ro(n,{target:"draft-7"}))}function _i(n){return"_zod"in n}function Ku(n,e,t){return No({type:"json_schema",...t,name:e,strict:!0,schema:_i(n)?yi(n):gi(n,{name:e})},r=>n.parse(JSON.parse(r)))}function Yu(n){return Gu({type:"function",name:n.name,parameters:_i(n.parameters)?yi(n.parameters):gi(n.parameters,{name:n.name}),strict:!0,...n.description?{description:n.description}:void 0},{callback:n.function,parser:e=>n.parameters.parse(JSON.parse(e))})}class ut extends Error{constructor(t,r){super(t);S(this,"state");this.state=r}}class Xu extends ut{}class vi extends ut{}class be extends ut{}class te extends ut{}class wi extends ut{constructor(t,r,s){super(t,s);S(this,"error");this.error=r}}class Qu extends ut{constructor(t,r,s){super(t,s);S(this,"error");this.error=r}}class bi extends ut{constructor(t,r,s){super(t,s);S(this,"result");this.result=r}}class hr extends ut{constructor(t,r,s){super(t,s);S(this,"result");this.result=r}}function ff(n){return n}function zt(n){var t;if(typeof n!="object"||n===null)return;const e=n;return((t=e._zod)==null?void 0:t.def)||e._def||e.def}function mr(n){const e=zt(n);if(!e)return;const t=typeof e.typeName=="string"&&e.typeName||typeof e.type=="string"&&e.type;if(typeof t!="string")return;const r=t.toLowerCase();return r.startsWith("zod")?r.slice(3):r}function Tt(n){return zt(n)?mr(n)==="object":!1}function ec(n){return typeof n=="object"&&n!==null&&"input"in n&&typeof n.input=="string"}const tc="http://json-schema.org/draft-07/schema#",nc=new Set(["optional"]),rc=new Set(["brand","branded","catch","default","effects","pipeline","pipe","prefault","readonly","refinement","transform"]),Ii={string:{type:"string"},number:{type:"number"},bigint:{type:"integer"},boolean:{type:"boolean"},date:{type:"string",format:"date-time"}};function Si(n){return typeof n=="object"&&n!==null&&n.type==="object"&&"properties"in n&&"additionalProperties"in n}function sc(n){const e=xi(n);if(e)return Array.isArray(e.required)||(e.required=[]),typeof e.additionalProperties>"u"&&(e.additionalProperties=!1),typeof e.$schema!="string"&&(e.$schema=tc),e}function xi(n){const e=gc(n);if(!e)return;const t={},r=[];for(const[s,i]of Object.entries(e)){const{schema:o,optional:a}=ic(i);if(!o)return;t[s]=o,a||r.push(s)}return{type:"object",properties:t,required:r,additionalProperties:!1}}function ic(n){let e=Yr(n),t=!1;for(;nc.has(mr(e)??"");){t=!0;const r=zt(e),s=Yr(r==null?void 0:r.innerType);if(!s||s===e)break;e=s}return{schema:Le(e),optional:t}}function Le(n){if(n===void 0)return;const e=Yr(n),t=mr(e),r=zt(e);if(t){if(t in Ii)return Ii[t];switch(t){case"object":return xi(e);case"array":return ac(r);case"tuple":return oc(r);case"union":return uc(r);case"intersection":return cc(r);case"literal":return hc(r);case"enum":case"nativeenum":return mc(r);case"record":return lc(r);case"map":return dc(r);case"set":return pc(r);case"nullable":return fc(r);default:return}}}function ac(n){const e=Le(Ti(n,"element","items","type"));return e?{type:"array",items:e}:void 0}function oc(n){const e=ki(n==null?void 0:n.items).map(r=>Le(r)).filter(Boolean);if(!e.length)return;const t={type:"array",items:e,minItems:e.length};return n!=null&&n.rest||(t.maxItems=e.length),t}function uc(n){const e=ki((n==null?void 0:n.options)??(n==null?void 0:n.schemas)).map(t=>Le(t)).filter(Boolean);return e.length?{anyOf:e}:void 0}function cc(n){const e=Le(n==null?void 0:n.left),t=Le(n==null?void 0:n.right);return e&&t?{allOf:[e,t]}:void 0}function lc(n){const e=Le((n==null?void 0:n.valueType)??(n==null?void 0:n.values));return e?{type:"object",additionalProperties:e}:void 0}function dc(n){const e=Le((n==null?void 0:n.valueType)??(n==null?void 0:n.values));return e?{type:"array",items:e}:void 0}function pc(n){const e=Le(n==null?void 0:n.valueType);return e?{type:"array",items:e,uniqueItems:!0}:void 0}function fc(n){const e=Le((n==null?void 0:n.innerType)??(n==null?void 0:n.type));return e?{anyOf:[e,{type:"null"}]}:void 0}function Yr(n){let e=n;for(;rc.has(mr(e)??"");){const t=zt(e),r=(t==null?void 0:t.innerType)??(t==null?void 0:t.schema)??(t==null?void 0:t.base)??(t==null?void 0:t.type)??(t==null?void 0:t.wrapped)??(t==null?void 0:t.underlying);if(!r||r===e)return e;e=r}return e}function Ti(n,...e){if(n){for(const t of e)if(t in n&&n[t]!==void 0)return n[t]}}function ki(n){return Array.isArray(n)?n:n===void 0?[]:[n]}function hc(n){if(!n)return;const e=Ti(n,"value","literal");if(e!==void 0)return{const:e,type:e===null?"null":typeof e}}function mc(n){if(n){if(Array.isArray(n.values))return{enum:n.values};if(Array.isArray(n.options))return{enum:n.options};if(n.values&&typeof n.values=="object")return{enum:Object.values(n.values)};if(n.enum&&typeof n.enum=="object")return{enum:Object.values(n.enum)}}}function gc(n){if(typeof n!="object"||n===null)return;const e=n;if(e.shape&&typeof e.shape=="object")return e.shape;if(typeof e.shape=="function")try{return e.shape()}catch{return}const t=zt(e),r=t==null?void 0:t.shape;if(r&&typeof r=="object")return r;if(typeof r=="function")try{return r()}catch{return}}const yc=Yu,_c=Ku;function Ai(n){return sc(n)}function gr(n){if(n=n.replace(/\s/g,"_"),n=n.replace(/[^a-zA-Z0-9]/g,"_"),n.length===0)throw new Error("Tool name cannot be empty");return n}function Xr(n,e){const t=r=>JSON.parse(r);if(Tt(n)){const r=i=>{const o=Ai(n);if(o)return{schema:o,parser:c=>n.parse(JSON.parse(c))};const a=i instanceof Error?` Upstream helper error: ${i.message}`:"";throw new te(`Unable to convert the provided Zod schema to JSON Schema. Ensure that the \`zod\` package is available at runtime or provide a JSON schema object instead.${a}`)};let s;try{s=yc({name:e,parameters:n,function:()=>{},description:""})}catch(i){return r(i)}return Si(s.parameters)?{schema:s.parameters,parser:s.$parseRaw}:r()}else if(typeof n=="object"&&n!==null)return{schema:n,parser:t};throw new te("Input type is not a ZodObject or a valid JSON schema")}function Ci(n){if(n==="text")return"text";if(Tt(n)){const e=(r,s)=>{const i=Ai(n);if(i)return{type:(r==null?void 0:r.type)??"json_schema",name:(r==null?void 0:r.name)??"output",strict:(r==null?void 0:r.strict)??!1,schema:i};const o=s instanceof Error?` Upstream helper error: ${s.message}`:"";throw new te(`Unable to convert the provided Zod schema to JSON Schema. Ensure that the \`zod\` package is available at runtime or provide a JSON schema object instead.${o}`)};let t;try{t=_c(n,"output")}catch(r){return e(void 0,r)}return Si(t.schema)?{type:t.type,name:t.name,strict:t.strict||!1,schema:t.schema}:e(t)}return n}function vc(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var yr={exports:{}},Qr,Oi;function wc(){if(Oi)return Qr;Oi=1;var n=1e3,e=n*60,t=e*60,r=t*24,s=r*7,i=r*365.25;Qr=function(f,d){d=d||{};var m=typeof f;if(m==="string"&&f.length>0)return o(f);if(m==="number"&&isFinite(f))return d.long?c(f):a(f);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(f))};function o(f){if(f=String(f),!(f.length>100)){var d=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(f);if(d){var m=parseFloat(d[1]),g=(d[2]||"ms").toLowerCase();switch(g){case"years":case"year":case"yrs":case"yr":case"y":return m*i;case"weeks":case"week":case"w":return m*s;case"days":case"day":case"d":return m*r;case"hours":case"hour":case"hrs":case"hr":case"h":return m*t;case"minutes":case"minute":case"mins":case"min":case"m":return m*e;case"seconds":case"second":case"secs":case"sec":case"s":return m*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return m;default:return}}}}function a(f){var d=Math.abs(f);return d>=r?Math.round(f/r)+"d":d>=t?Math.round(f/t)+"h":d>=e?Math.round(f/e)+"m":d>=n?Math.round(f/n)+"s":f+"ms"}function c(f){var d=Math.abs(f);return d>=r?l(f,d,r,"day"):d>=t?l(f,d,t,"hour"):d>=e?l(f,d,e,"minute"):d>=n?l(f,d,n,"second"):f+" ms"}function l(f,d,m,g){var v=d>=m*1.5;return Math.round(f/m)+" "+g+(v?"s":"")}return Qr}var es,Ei;function bc(){if(Ei)return es;Ei=1;function n(e){r.debug=r,r.default=r,r.coerce=l,r.disable=a,r.enable=i,r.enabled=c,r.humanize=wc(),r.destroy=f,Object.keys(e).forEach(d=>{r[d]=e[d]}),r.names=[],r.skips=[],r.formatters={};function t(d){let m=0;for(let g=0;g<d.length;g++)m=(m<<5)-m+d.charCodeAt(g),m|=0;return r.colors[Math.abs(m)%r.colors.length]}r.selectColor=t;function r(d){let m,g=null,v,x;function y(...h){if(!y.enabled)return;const b=y,_=Number(new Date),N=_-(m||_);b.diff=N,b.prev=m,b.curr=_,m=_,h[0]=r.coerce(h[0]),typeof h[0]!="string"&&h.unshift("%O");let T=0;h[0]=h[0].replace(/%([a-zA-Z%])/g,(D,F)=>{if(D==="%%")return"%";T++;const G=r.formatters[F];if(typeof G=="function"){const L=h[T];D=G.call(b,L),h.splice(T,1),T--}return D}),r.formatArgs.call(b,h),(b.log||r.log).apply(b,h)}return y.namespace=d,y.useColors=r.useColors(),y.color=r.selectColor(d),y.extend=s,y.destroy=r.destroy,Object.defineProperty(y,"enabled",{enumerable:!0,configurable:!1,get:()=>g!==null?g:(v!==r.namespaces&&(v=r.namespaces,x=r.enabled(d)),x),set:h=>{g=h}}),typeof r.init=="function"&&r.init(y),y}function s(d,m){const g=r(this.namespace+(typeof m>"u"?":":m)+d);return g.log=this.log,g}function i(d){r.save(d),r.namespaces=d,r.names=[],r.skips=[];const m=(typeof d=="string"?d:"").trim().replace(/\s+/g,",").split(",").filter(Boolean);for(const g of m)g[0]==="-"?r.skips.push(g.slice(1)):r.names.push(g)}function o(d,m){let g=0,v=0,x=-1,y=0;for(;g<d.length;)if(v<m.length&&(m[v]===d[g]||m[v]==="*"))m[v]==="*"?(x=v,y=g,v++):(g++,v++);else if(x!==-1)v=x+1,y++,g=y;else return!1;for(;v<m.length&&m[v]==="*";)v++;return v===m.length}function a(){const d=[...r.names,...r.skips.map(m=>"-"+m)].join(",");return r.enable(""),d}function c(d){for(const m of r.skips)if(o(d,m))return!1;for(const m of r.names)if(o(d,m))return!0;return!1}function l(d){return d instanceof Error?d.stack||d.message:d}function f(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}return es=n,es}var Ri;function Ic(){return Ri||(Ri=1,(function(n,e){e.formatArgs=r,e.save=s,e.load=i,e.useColors=t,e.storage=o(),e.destroy=(()=>{let c=!1;return()=>{c||(c=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function t(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let c;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(c=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(c[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function r(c){if(c[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+c[0]+(this.useColors?"%c ":" ")+"+"+n.exports.humanize(this.diff),!this.useColors)return;const l="color: "+this.color;c.splice(1,0,l,"color: inherit");let f=0,d=0;c[0].replace(/%[a-zA-Z%]/g,m=>{m!=="%%"&&(f++,m==="%c"&&(d=f))}),c.splice(d,0,l)}e.log=console.debug||console.log||(()=>{});function s(c){try{c?e.storage.setItem("debug",c):e.storage.removeItem("debug")}catch{}}function i(){let c;try{c=e.storage.getItem("debug")||e.storage.getItem("DEBUG")}catch{}return!c&&typeof process<"u"&&"env"in process&&(c=process.env.DEBUG),c}function o(){try{return localStorage}catch{}}n.exports=bc()(e);const{formatters:a}=n.exports;a.j=function(c){try{return JSON.stringify(c)}catch(l){return"[UnexpectedJSONParseError]: "+l.message}}})(yr,yr.exports)),yr.exports}var Sc=Ic();const xc=vc(Sc);function Ni(){return Mc()}function Pi(n){const e=Ni();return typeof e<"u"&&(e[n]==="true"||e[n]==="1")}const Di={get disabled(){return!0}},Mi={get dontLogModelData(){return Pi("OPENAI_AGENTS_DONT_LOG_MODEL_DATA")},get dontLogToolData(){return Pi("OPENAI_AGENTS_DONT_LOG_TOOL_DATA")}},Tc=Mi.dontLogModelData,kc=Mi.dontLogToolData;function ji(n="openai-agents"){return{namespace:n,debug:xc(n),error:console.error,warn:console.warn,dontLogModelData:Tc,dontLogToolData:kc}}const j=ji("openai-agents:core"),$i=20;function ct(n){if(n==null)return String(n);if(Fi(n))return vn(new Uint8Array(n));if(_n(n)){const e=n;return vn(new Uint8Array(e.buffer,e.byteOffset,e.byteLength))}if(typeof n=="string")return n;if(typeof n=="object")try{return JSON.stringify(n,Cc)}catch{return"[object with circular references]"}return String(n)}function Fi(n){if(n instanceof ArrayBuffer)return!0;const e=globalThis.SharedArrayBuffer;return!!(e&&n instanceof e)}function _n(n){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView(n)}function _r(n){return typeof n=="object"&&n!==null&&n.type==="Buffer"&&Array.isArray(n.data)}function ts(n){const e=globalThis.Buffer;return!!(e&&typeof e.isBuffer=="function"&&e.isBuffer(n))}function vn(n){if(n.length===0)return"[byte array (0 bytes)]";const e=Math.min(n.length,$i),t=[];for(let i=0;i<e;i++)t.push(Ac(n[i]));const r=n.length>$i?" ":"";return`[byte array ${t.join(" ")}${r} (${n.length} bytes)]`}function Ac(n){return`0x${n.toString(16).padStart(2,"0")}`}function Cc(n,e){if(Fi(e))return vn(new Uint8Array(e));if(_n(e)){const t=e;return vn(new Uint8Array(t.buffer,t.byteOffset,t.byteLength))}return _r(e)?vn(Uint8Array.from(e.data)):e}function ns(n){return!!n&&typeof n=="object"&&typeof n.create=="function"}const rs=new WeakMap,Oc=new WeakMap,vr=new WeakMap;function Li(n){const e=Oc.get(n);if(e)return e;if(typeof n.computer=="function"||ns(n.computer))return n.computer}function Ui(n,e,t){let r=vr.get(e);r||(r=new Map,vr.set(e,r)),r.set(n,t)}async function Zi(n){const{tool:e,runContext:t}=n,r=e;let s=rs.get(r);s||(s=new WeakMap,rs.set(r,s));const i=s.get(t);if(i)return Ui(e,t,i),i.computer;const o=Li(e),a=o&&ns(o)?o:ns(e.computer)?e.computer:void 0,c=typeof o=="function"?o:(a==null?void 0:a.create)??(typeof e.computer=="function"?e.computer:void 0),l=a==null?void 0:a.dispose,f=c&&typeof c=="function"?await c({runContext:t}):e.computer;if(!f)throw new te("The computer tool did not provide a computer instance.");const d={computer:f,dispose:l};return s.set(t,d),Ui(e,t,d),e.computer=f,f}async function qi({runContext:n}){const e=vr.get(n);if(!e)return;vr.delete(n);const t=[];for(const[r,s]of e.entries()){const i=rs.get(r);i==null||i.delete(n);const o=Li(r);o&&(r.computer=o),s.dispose&&t.push(async()=>{var a;await((a=s.dispose)==null?void 0:a.call(s,{runContext:n,computer:s.computer}))})}for(const r of t)try{await r()}catch(s){j.warn(`Failed to dispose computer for run context: ${s}`)}}function Ec(n,e){return`An error occurred while running the tool. Please try again. Error: ${e instanceof Error?e.toString():String(e)}`}function wr(n){const e=n.name?gr(n.name):gr(n.execute.name),t=typeof n.errorFunction>"u"?Ec:n.errorFunction;if(!e)throw new Error("Tool name cannot be empty. Either name your function or provide a name in the options.");const r=n.strict??!0;if(!r&&Tt(n.parameters))throw new te("Strict mode is required for Zod parameters");const{parser:s,schema:i}=Xr(n.parameters,e);async function o(f,d,m){const[g,v]=await ce(()=>s(d));if(g!==null)throw j.dontLogToolData?j.debug(`Invalid JSON input for tool ${e}`):j.debug(`Invalid JSON input for tool ${e}: ${d}`),new be("Invalid JSON input for tool");j.dontLogToolData?j.debug(`Invoking tool ${e}`):j.debug(`Invoking tool ${e} with input ${d}`);const x=await n.execute(v,f,m),y=ct(x);return j.dontLogToolData?j.debug(`Tool ${e} completed`):j.debug(`Tool ${e} returned: ${y}`),x}async function a(f,d,m){return o(f,d,m).catch(g=>{if(t){const v=xn();return v==null||v.setError({message:"Error running tool (non-fatal)",data:{tool_name:e,error:g.toString()}}),t(f,g)}throw g})}const c=typeof n.needsApproval=="function"?n.needsApproval:async()=>typeof n.needsApproval=="boolean"?n.needsApproval:!1,l=typeof n.isEnabled=="function"?async(f,d)=>{const m=n.isEnabled;return!!await m({runContext:f,agent:d})}:async()=>typeof n.isEnabled=="boolean"?n.isEnabled:!0;return{type:"function",name:e,description:n.description,parameters:i,strict:r,invoke:a,needsApproval:c,isEnabled:l}}w({name:p(),description:p().optional(),inputSchema:w({type:I("object"),properties:re(p(),W()),required:z(p()),additionalProperties:It()})});const ss={},is={},Rc=({server:n,agent:e})=>n.toolFilter&&typeof n.toolFilter=="function"&&e?`${n.name}:${e.name}`:n.name;async function Nc({server:n,convertSchemasToStrict:e,runContext:t,agent:r,generateMCPToolCacheKey:s}){const i=(s||Rc)({server:n,agent:r,runContext:t});if(n.cacheToolsList&&ss[i])return ss[i].map(a=>Bi(a,n,e));const o=async a=>{const c=await n.listTools();let l=c;if(t&&r){const d={runContext:t,agent:r,serverName:n.name},m=[];for(const g of c){const v=n.toolFilter;if(v)if(typeof v=="function"){if(!await v(d,g)){j.debug(`MCP Tool (server: ${n.name}, tool: ${g.name}) is blocked by the callable filter.`);continue}}else{const x=v.allowedToolNames??[],y=v.blockedToolNames??[];if(x.length>0||y.length>0){const h=x.length>0?x.includes(g.name):!0,b=y.length>0?y.includes(g.name):!1;if(!h||b){b?j.debug(`MCP Tool (server: ${n.name}, tool: ${g.name}) is blocked by the static filter.`):h||j.debug(`MCP Tool (server: ${n.name}, tool: ${g.name}) is not allowed by the static filter.`);continue}}}m.push(g)}l=m}a&&(a.spanData.result=l.map(d=>d.name));const f=l.map(d=>Bi(d,n,e));return n.cacheToolsList&&(ss[i]=l,is[n.name]||(is[n.name]=new Set),is[n.name].add(i)),f};return Ht()?zl(o,{data:{server:n.name}}):o()}async function Pc(n,e,t,r=!1){const s=Array.isArray(n)?{mcpServers:n,runContext:e,agent:t,convertSchemasToStrict:r}:n,{mcpServers:i,convertSchemasToStrict:o=!1,runContext:a,agent:c,generateMCPToolCacheKey:l}=s,f=[],d=new Set;for(const m of i){const g=await Nc({server:m,convertSchemasToStrict:o,runContext:a,agent:c,generateMCPToolCacheKey:l}),x=[...new Set(g.map(y=>y.name))].filter(y=>d.has(y));if(x.length>0)throw new te(`Duplicate tool names found across MCP servers: ${x.join(", ")}`);for(const y of g)d.add(y.name),f.push(y)}return f}function Bi(n,e,t){var o,a,c,l;async function r(f,d){let m={};typeof f=="string"&&f?m=JSON.parse(f):typeof f=="object"&&f!=null&&(m=f);const g=xn();g&&(g.spanData.mcp_data={server:e.name});const v=await e.callTool(n.name,m);return v.length===1?v[0]:v}const s={...n.inputSchema,type:((o=n.inputSchema)==null?void 0:o.type)??"object",properties:((a=n.inputSchema)==null?void 0:a.properties)??{},required:((c=n.inputSchema)==null?void 0:c.required)??[],additionalProperties:((l=n.inputSchema)==null?void 0:l.additionalProperties)??!1};if(t||s.additionalProperties===!0)try{const f=Dc(s);return wr({name:n.name,description:n.description||"",parameters:f,strict:!0,execute:r})}catch(f){j.warn(`Error converting MCP schema to strict mode: ${f}`)}const i={...s,additionalProperties:!0};return wr({name:n.name,description:n.description||"",parameters:i,strict:!1,execute:r})}function Dc(n){const e={...n,additionalProperties:!1};return e.required||(e.required=[]),e}function Mc(){return{}}class br{constructor(){R(this,Yt,new EventTarget);R(this,Et,new Map)}on(e,t){const r=e;let s=u(this,Et).get(r);s||(s=new Map,u(this,Et).set(r,s));let i=s.get(t);i||(i=new Set,s.set(t,i));const o=(a=>t(...a.detail??[]));return i.add(o),u(this,Yt).addEventListener(r,o),this}off(e,t){const r=e,s=u(this,Et).get(r),i=s==null?void 0:s.get(t);if(i!=null&&i.size){for(const o of i)u(this,Yt).removeEventListener(r,o);s==null||s.delete(t),(s==null?void 0:s.size)===0&&u(this,Et).delete(r)}return this}emit(e,...t){const r=new CustomEvent(e,{detail:t});return u(this,Yt).dispatchEvent(r)}once(e,t){const r=(...s)=>{this.off(e,r),t(...s)};return this.on(e,r),this}}Yt=new WeakMap,Et=new WeakMap;const Ji=()=>typeof crypto<"u"&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){const e=Math.random()*16|0;return(n==="x"?e:e&3|8).toString(16)}),jc=class{constructor(){}pipeTo(e,t){}pipeThrough(e,t){}},$c=globalThis.ReadableStream,Fc=globalThis.TransformStream;class Lc{constructor(){S(this,"context",null)}run(e,t){return this.context=e,t()}getStore(){return this.context}enterWith(e){this.context=e}}class Uc{constructor(){}setTimeout(e,t){const r=setTimeout(e,t);return r.ref=typeof r.ref=="function"?r.ref:()=>r,r.unref=typeof r.unref=="function"?r.unref:()=>r,r.hasRef=typeof r.hasRef=="function"?r.hasRef:()=>!0,r.refresh=typeof r.refresh=="function"?r.refresh:()=>r,r}clearTimeout(e){window.clearTimeout(e)}}const Zc=new Uc;class as{on(e,t){return this.eventEmitter.on(e,t),this.eventEmitter}off(e,t){return this.eventEmitter.off(e,t),this.eventEmitter}emit(e,...t){return this.eventEmitter.emit(e,...t)}once(e,t){return this.eventEmitter.once(e,t),this.eventEmitter}}class qc extends as{constructor(){super(...arguments);S(this,"eventEmitter",new br)}}class Bc extends as{constructor(){super(...arguments);S(this,"eventEmitter",new br)}}const Jc="OPENAI_DEFAULT_MODEL";function Ir(n){return n.startsWith("gpt-5-chat")?!1:n.startsWith("gpt-5")}function zi(){return Ir(Gi())}function Gi(){var e;return((e=Ni()[Jc])==null?void 0:e.toLowerCase())??"gpt-4.1"}function zc(n){const e=Gi();return Ir(e)?{reasoning:{effort:"low"},text:{verbosity:"low"}}:{}}function Vi(n){return JSON.stringify({assistant:n.name})}function Gc(n){return`transfer_to_${gr(n.name)}`}function Vc(n){return`Handoff to the ${n.name} agent to handle the request. ${n.handoffDescription??""}`}class Wi{constructor(e,t){S(this,"toolName");S(this,"toolDescription");S(this,"inputJsonSchema",{type:"object",properties:{},required:[],additionalProperties:!1});S(this,"strictJsonSchema",!0);S(this,"onInvokeHandoff");S(this,"agentName");S(this,"inputFilter");S(this,"agent");S(this,"isEnabled",async()=>!0);this.agentName=e.name,this.onInvokeHandoff=t,this.toolName=Gc(e),this.toolDescription=Vc(e),this.agent=e}getHandoffAsFunctionTool(){return{type:"function",name:this.toolName,description:this.toolDescription,parameters:this.inputJsonSchema,strict:this.strictJsonSchema}}}function Hi(n,e={}){let t;const r=!!e.onHandoff,s=!!e.inputType;if(!(r===s))throw new te("You must provide either both `onHandoff` and `inputType` or neither.");async function o(c,l){var f;if(t){if(!l)throw tt({message:`Handoff function expected non empty input but got: ${l}`,data:{details:"input is empty"}}),new be("Handoff function expected non empty input");try{const d=await t(l);e.onHandoff&&await e.onHandoff(c,d)}catch(d){throw tt({message:"Invalid JSON provided",data:{}}),j.dontLogToolData||j.error(`Invalid JSON when parsing: ${l}. Error: ${d}`),new be("Invalid JSON provided")}}else await((f=e.onHandoff)==null?void 0:f.call(e,c));return n}const a=new Wi(n,o);if(typeof e.isEnabled=="function"){const c=e.isEnabled;a.isEnabled=async({runContext:l,agent:f})=>!!await c({runContext:l,agent:f})}else typeof e.isEnabled=="boolean"&&(a.isEnabled=async()=>e.isEnabled);if(e.inputType){const c=Xr(e.inputType,a.toolName);a.inputJsonSchema=c.schema,a.strictJsonSchema=!0,t=c.parser}return e.toolNameOverride&&(a.toolName=e.toolNameOverride),e.toolDescriptionOverride&&(a.toolDescription=e.toolDescriptionOverride),e.inputFilter&&(a.inputFilter=e.inputFilter),a}function Wc(n){return n instanceof Wi?n:Hi(n)}function Ki(n){if(n.type!=="message"||n.role!=="assistant")return;const e=n.content[n.content.length-1];if(e.type==="output_text")return e.text}function Hc(n){return n.output.length===0?"":Ki(n.output[n.output.length-1])||""}const os=new WeakMap;function Kc(n,e){n&&os.set(n,e)}function Yc(n){const e=os.get(n);return e&&os.delete(n),e}const Xc=w({input:p()}),Xt=class Xt extends qc{constructor(t){super();S(this,"name");S(this,"instructions");S(this,"prompt");S(this,"handoffDescription");S(this,"handoffs");S(this,"model");S(this,"modelSettings");S(this,"tools");S(this,"mcpServers");S(this,"inputGuardrails");S(this,"outputGuardrails");S(this,"outputType","text");S(this,"toolUseBehavior");S(this,"resetToolChoice");S(this,"_toolsExplicitlyConfigured");if(typeof t.name!="string"||t.name.trim()==="")throw new te("Agent must have a name.");if(this.name=t.name,this.instructions=t.instructions??Xt.DEFAULT_MODEL_PLACEHOLDER,this.prompt=t.prompt,this.handoffDescription=t.handoffDescription??"",this.handoffs=t.handoffs??[],this.model=t.model??"",this.modelSettings=t.modelSettings??zc(),this.tools=t.tools??[],this._toolsExplicitlyConfigured=t.tools!==void 0,this.mcpServers=t.mcpServers??[],this.inputGuardrails=t.inputGuardrails??[],this.outputGuardrails=t.outputGuardrails??[],t.outputType&&(this.outputType=t.outputType),this.toolUseBehavior=t.toolUseBehavior??"run_llm_again",this.resetToolChoice=t.resetToolChoice??!0,t.model!==void 0&&zi()&&(typeof t.model!="string"||!Ir(t.model))&&t.modelSettings===void 0&&(this.modelSettings={}),(t.handoffOutputTypeWarningEnabled===void 0||t.handoffOutputTypeWarningEnabled)&&this.handoffs&&this.outputType){const r=new Set([JSON.stringify(this.outputType)]);for(const s of this.handoffs)"outputType"in s&&s.outputType?r.add(JSON.stringify(s.outputType)):"agent"in s&&s.agent.outputType&&r.add(JSON.stringify(s.agent.outputType));r.size>1&&j.warn(`[Agent] Warning: Handoff agents have different output types: ${Array.from(r).join(", ")}. You can make it type-safe by using Agent.create({ ... }) method instead.`)}}static create(t){return new Xt({...t,handoffs:t.handoffs,outputType:t.outputType,handoffOutputTypeWarningEnabled:!1})}get outputSchemaName(){if(this.outputType==="text")return"text";if(Tt(this.outputType))return"ZodOutput";if(typeof this.outputType=="object")return this.outputType.name;throw new Error(`Unknown output type: ${this.outputType}`)}clone(t){return new Xt({...this,...t})}asTool(t){const{toolName:r,toolDescription:s,customOutputExtractor:i,needsApproval:o,runConfig:a,runOptions:c,isEnabled:l,onStream:f}=t,d=new Map,m=async x=>{const y=d.get(x.event.type),h=d.get("*"),b=[...f?[f]:[],...y?Array.from(y):[],...h?Array.from(h):[]];await Promise.allSettled(b.map(_=>Promise.resolve().then(()=>_(x))))},v={...wr({name:r??gr(this.name),description:s??"",parameters:Xc,strict:!0,needsApproval:o,isEnabled:l,execute:async(x,y,h)=>{if(!ec(x))throw new be("Agent tool called with invalid input");const b=new Cd(a??{}),_=typeof f=="function"||d.size>0,N=_?await b.run(this,x.input,{context:y,...c??{},stream:!0}):await b.run(this,x.input,{context:y,...c??{}}),T={agent:this,toolCall:h==null?void 0:h.toolCall};if(_){const G=N;for await(const L of G)await m({event:L,...T});await G.completed}const A=N,D=typeof this.toolUseBehavior=="object"&&this.toolUseBehavior!==null&&"stopAtToolNames"in this.toolUseBehavior;typeof i!="function"&&D&&j.debug(`You're passing the agent (name: ${this.name}) with toolUseBehavior.stopAtToolNames configured as a tool to a different agent; this may not work as you expect. You may want to have a wrapper function tool to consistently return the final output.`);const F=typeof i=="function"?await i(A):Hc(A.rawResponses[A.rawResponses.length-1]);return h!=null&&h.toolCall&&Kc(h.toolCall,A),F}}),on:(x,y)=>{const h=d.get(x)??new Set;return h.add(y),d.set(x,h),v}};return v}async getSystemPrompt(t){return typeof this.instructions=="function"?await this.instructions(t,this):this.instructions}async getPrompt(t){return typeof this.prompt=="function"?await this.prompt(t,this):this.prompt}async getMcpTools(t){return this.mcpServers.length>0?Pc({mcpServers:this.mcpServers,runContext:t,agent:this,convertSchemasToStrict:!1}):[]}async getAllTools(t){const r=await this.getMcpTools(t),s=[];for(const i of this.tools){if(i.type==="function"){const o=i.isEnabled;if(!(typeof o=="function"?await o(t,this):typeof o=="boolean"?o:!0))continue}s.push(i)}return[...r,...s]}hasExplicitToolConfig(){return this._toolsExplicitlyConfigured}async getEnabledHandoffs(t){var i;const r=((i=this.handoffs)==null?void 0:i.map(o=>Wc(o)))??[],s=[];for(const o of r)await o.isEnabled({runContext:t,agent:this})&&s.push(o);return s}processFinalOutput(t){if(this.outputType==="text")return t;if(typeof this.outputType=="object"){const r=JSON.parse(t);return Tt(this.outputType)?this.outputType.parse(r):r}throw new Error(`Unknown output type: ${this.outputType}`)}toJSON(){return{name:this.name}}};S(Xt,"DEFAULT_MODEL_PLACEHOLDER","");let Xe=Xt;function Yi({name:n,execute:e,runInParallel:t=!0}){return{type:"input",name:n,runInParallel:t,guardrailFunction:e,async run(r){return{guardrail:{type:"input",name:n},output:await e(r)}}}}function us({name:n,execute:e}){return{type:"output",name:n,guardrailFunction:e,async run(t){return{guardrail:{type:"output",name:n},agent:t.agent,agentOutput:t.agentOutput,output:await e(t)}}}}function Qc(){throw new Error("No default model provider set. Make sure to set a provider using setDefaultModelProvider before calling getDefaultModelProvider or pass an explicit provider.")}const he=w({providerData:re(p(),W()).optional()}),Oe=he.extend({id:p().optional()}),el=he.extend({type:I("refusal"),refusal:p()}),tl=he.extend({type:I("output_text"),text:p()}),cs=he.extend({type:I("input_text"),text:p()}),nl=he.extend({type:I("reasoning_text"),text:p()}),Xi=he.extend({type:I("input_image"),image:p().or(w({id:p().describe("OpenAI file ID")})).describe("Either base64 encoded image data, a data URL, or an object with a file ID.").optional(),detail:p().optional()}),Qi=he.extend({type:I("input_file"),file:p().describe("Either base64 encoded file data or a publicly accessible file URL").or(w({id:p().describe("OpenAI file ID")})).or(w({url:p().describe("Publicly accessible file URL")})).describe("Contents of the file or an object with a file ID.").optional(),filename:p().optional()}),ea=he.extend({type:I("audio"),audio:p().or(w({id:p()})).describe("Base64 encoded audio data or file id"),format:p().nullable().optional(),transcript:p().nullable().optional()}),rl=he.extend({type:I("image"),image:p().describe("Base64 encoded image data")}),sl=he.extend({type:I("text"),text:p()}),il=w({data:Ke([p(),li(Uint8Array)]).describe("Base64 image data, or raw bytes that will be base64 encoded automatically."),mediaType:p().optional()}),al=w({url:p().describe("Publicly accessible URL pointing to the image content")}),ol=w({fileId:p().describe("OpenAI file ID referencing uploaded image content")}),ul=Ke([il,al,ol]).describe("Inline image data or references to uploaded content."),cl=w({data:Ke([p(),li(Uint8Array)]).describe("Base64 encoded file data, or raw bytes that will be encoded automatically."),mediaType:p().describe("IANA media type describing the file contents"),filename:p().describe("Filename associated with the inline data")}),ll=w({url:p().describe("Publicly accessible URL for the file content"),filename:p().optional()}),dl=w({id:p().describe("OpenAI file ID referencing uploaded content"),filename:p().optional()}),pl=Ke([p().describe("Existing data URL or base64 string"),cl,ll,dl]).describe("Inline data (with metadata) or references pointing to file contents."),fl=(...n)=>p(),hl=he.extend({type:I("image"),image:p().or(ul).optional(),detail:fl("low","high","auto").optional()}),ml=he.extend({type:I("file"),file:pl}),gl=he.extend({type:I("computer_screenshot"),data:p().describe("Base64 encoded image data or URL")}),yl=_e("type",[w({type:I("screenshot")}),w({type:I("click"),x:E(),y:E(),button:de(["left","right","wheel","back","forward"])}),w({type:I("double_click"),x:E(),y:E()}),w({type:I("scroll"),x:E(),y:E(),scroll_x:E(),scroll_y:E()}),w({type:I("type"),text:p()}),w({type:I("wait")}),w({type:I("move"),x:E(),y:E()}),w({type:I("keypress"),keys:z(p())}),w({type:I("drag"),path:z(w({x:E(),y:E()}))})]),_l=_e("type",[tl,el,ea,rl]),ls=Oe.extend({type:I("message").optional()}),Sr=ls.extend({role:I("assistant"),status:de(["in_progress","completed","incomplete"]),content:z(_l)}),vl=_e("type",[cs,Xi,Qi,ea]),ta=ls.extend({role:I("user"),content:z(vl).or(p())}),na=ls.extend({role:I("system"),content:p()});_e("role",[na,Sr,ta]);const wn=Oe.extend({type:I("hosted_tool_call"),name:p().describe("The name of the hosted tool"),arguments:p().describe("The arguments of the hosted tool call").optional(),status:p().optional(),output:p().optional()}),bn=Oe.extend({type:I("function_call"),callId:p().describe("The ID of the tool call"),name:p().describe("The name of the function"),status:de(["in_progress","completed","incomplete"]).optional(),arguments:p()}),wl=_e("type",[sl,hl,ml]),bl=_e("type",[cs,Xi,Qi]),xr=Oe.extend({type:I("function_call_result"),name:p().describe("The name of the tool"),callId:p().describe("The ID of the tool call"),status:de(["in_progress","completed","incomplete"]),output:Ke([p(),wl,z(bl)]).describe("Output returned by the tool call. Supports plain strings, legacy ToolOutput items, or structured input_* items.")}),ds=Oe.extend({type:I("computer_call"),callId:p().describe("The ID of the computer call"),status:de(["in_progress","completed","incomplete"]),action:yl}),Il=Oe.extend({type:I("computer_call_result"),callId:p().describe("The ID of the computer call"),output:gl}),Sl=w({commands:z(p()),timeoutMs:E().int().min(0).optional(),maxOutputLength:E().int().min(0).optional()}),Tr=Oe.extend({type:I("shell_call"),callId:p(),status:de(["in_progress","completed","incomplete"]).optional(),action:Sl}),xl=_e("type",[w({type:I("timeout")}),w({type:I("exit"),exitCode:E().int().nullable()})]),Tl=w({stdout:p(),stderr:p(),outcome:xl}).passthrough(),ra=Oe.extend({type:I("shell_call_output"),callId:p(),maxOutputLength:E().optional(),output:z(Tl)}),kl=w({type:I("create_file"),path:p(),diff:p()}),Al=w({type:I("update_file"),path:p(),diff:p()}),Cl=w({type:I("delete_file"),path:p()}),Ol=_e("type",[kl,Al,Cl]),kr=Oe.extend({type:I("apply_patch_call"),callId:p(),status:de(["in_progress","completed"]),operation:Ol}),sa=Oe.extend({type:I("apply_patch_call_output"),callId:p(),status:de(["completed","failed"]),output:p().optional()}),El=_e("type",[ds,Tr,kr,bn,wn]),ps=he.extend({id:p().optional(),type:I("reasoning"),content:z(cs),rawContent:z(nl).optional()}),ia=Oe.extend({type:I("compaction"),encrypted_content:p(),id:p().optional(),created_by:p().optional()}),aa=Oe.extend({type:I("unknown")}),fs=_e("type",[Sr,wn,bn,ds,Tr,kr,xr,ra,sa,ps,ia,aa]),Rl=Ke([ta,Sr,na,wn,bn,ds,Tr,kr,xr,Il,ra,sa,ps,ia,aa]),Nl=w({inputTokens:E(),outputTokens:E(),totalTokens:E(),inputTokensDetails:re(p(),E()).optional(),outputTokensDetails:re(p(),E()).optional(),endpoint:p().optional()}),Pl=w({requests:E().optional(),inputTokens:E(),outputTokens:E(),totalTokens:E(),inputTokensDetails:Ke([re(p(),E()),z(re(p(),E()))]).optional(),outputTokensDetails:Ke([re(p(),E()),z(re(p(),E()))]).optional(),requestUsageEntries:z(Nl).optional()}),oa=he.extend({type:I("output_text_delta"),delta:p()}),Dl=he.extend({type:I("response_started")}),ua=he.extend({type:I("response_done"),response:he.extend({id:p(),usage:Pl,output:z(fs)})}),Ml=he.extend({type:I("model"),event:W().describe("The event from the model")});_e("type",[oa,ua,Dl,Ml]);class In{constructor(e){S(this,"inputTokens");S(this,"outputTokens");S(this,"totalTokens");S(this,"inputTokensDetails");S(this,"outputTokensDetails");S(this,"endpoint");this.inputTokens=(e==null?void 0:e.inputTokens)??(e==null?void 0:e.input_tokens)??0,this.outputTokens=(e==null?void 0:e.outputTokens)??(e==null?void 0:e.output_tokens)??0,this.totalTokens=(e==null?void 0:e.totalTokens)??(e==null?void 0:e.total_tokens)??this.inputTokens+this.outputTokens;const t=(e==null?void 0:e.inputTokensDetails)??(e==null?void 0:e.input_tokens_details);this.inputTokensDetails=t||{};const r=(e==null?void 0:e.outputTokensDetails)??(e==null?void 0:e.output_tokens_details);this.outputTokensDetails=r||{},typeof(e==null?void 0:e.endpoint)<"u"&&(this.endpoint=e.endpoint)}}class Sn{constructor(e){S(this,"requests");S(this,"inputTokens");S(this,"outputTokens");S(this,"totalTokens");S(this,"inputTokensDetails",[]);S(this,"outputTokensDetails",[]);S(this,"requestUsageEntries");if(typeof e>"u")this.requests=0,this.inputTokens=0,this.outputTokens=0,this.totalTokens=0,this.inputTokensDetails=[],this.outputTokensDetails=[],this.requestUsageEntries=void 0;else{this.requests=(e==null?void 0:e.requests)??1,this.inputTokens=(e==null?void 0:e.inputTokens)??(e==null?void 0:e.input_tokens)??0,this.outputTokens=(e==null?void 0:e.outputTokens)??(e==null?void 0:e.output_tokens)??0,this.totalTokens=(e==null?void 0:e.totalTokens)??(e==null?void 0:e.total_tokens)??this.inputTokens+this.outputTokens;const t=(e==null?void 0:e.inputTokensDetails)??(e==null?void 0:e.input_tokens_details);Array.isArray(t)?this.inputTokensDetails=t:this.inputTokensDetails=t?[t]:[];const r=(e==null?void 0:e.outputTokensDetails)??(e==null?void 0:e.output_tokens_details);Array.isArray(r)?this.outputTokensDetails=r:this.outputTokensDetails=r?[r]:[];const s=(e==null?void 0:e.requestUsageEntries)??(e==null?void 0:e.request_usage_entries),i=Array.isArray(s)?s.map(o=>o instanceof In?o:new In(o)):void 0;this.requestUsageEntries=i&&i.length>0?i:void 0}}add(e){var t,r;this.requests+=e.requests??0,this.inputTokens+=e.inputTokens??0,this.outputTokens+=e.outputTokens??0,this.totalTokens+=e.totalTokens??0,e.inputTokensDetails&&this.inputTokensDetails.push(...e.inputTokensDetails),e.outputTokensDetails&&this.outputTokensDetails.push(...e.outputTokensDetails),Array.isArray(e.requestUsageEntries)&&e.requestUsageEntries.length>0?(this.requestUsageEntries??(this.requestUsageEntries=[]),this.requestUsageEntries.push(...e.requestUsageEntries.map(s=>s instanceof In?s:new In(s)))):e.requests===1&&e.totalTokens>0&&(this.requestUsageEntries??(this.requestUsageEntries=[]),this.requestUsageEntries.push(new In({inputTokens:e.inputTokens,outputTokens:e.outputTokens,totalTokens:e.totalTokens,inputTokensDetails:(t=e.inputTokensDetails)==null?void 0:t[0],outputTokensDetails:(r=e.outputTokensDetails)==null?void 0:r[0]})))}}class Gt{constructor(e={}){S(this,"context");S(this,"usage");R(this,Te);this.context=e,this.usage=new Sn,k(this,Te,new Map)}_rebuildApprovals(e){k(this,Te,new Map(Object.entries(e)))}isToolApproved(e){const{toolName:t,callId:r}=e,s=u(this,Te).get(t);if((s==null?void 0:s.approved)===!0&&s.rejected===!0)return j.warn("Tool is permanently approved and rejected at the same time. Approval takes precedence"),!0;if((s==null?void 0:s.approved)===!0)return!0;if((s==null?void 0:s.rejected)===!0)return!1;const i=Array.isArray(s==null?void 0:s.approved)?s.approved.includes(r):!1,o=Array.isArray(s==null?void 0:s.rejected)?s.rejected.includes(r):!1;if(i&&o)return j.warn(`Tool call ${r} is both approved and rejected at the same time. Approval takes precedence`),!0;if(i)return!0;if(o)return!1}approveTool(e,{alwaysApprove:t=!1}={}){const r=e.toolName??e.rawItem.name;if(t){u(this,Te).set(r,{approved:!0,rejected:[]});return}const s=u(this,Te).get(r)??{approved:[],rejected:[]};if(Array.isArray(s.approved)){const i="callId"in e.rawItem?e.rawItem.callId:e.rawItem.id;s.approved.push(i)}u(this,Te).set(r,s)}rejectTool(e,{alwaysReject:t=!1}={}){const r=e.toolName??e.rawItem.name;if(t){u(this,Te).set(r,{approved:!1,rejected:!0});return}const s=u(this,Te).get(r)??{approved:[],rejected:[]};if(Array.isArray(s.rejected)){const i="callId"in e.rawItem?e.rawItem.callId:e.rawItem.id;s.rejected.push(i)}u(this,Te).set(r,s)}toJSON(){return{context:this.context,usage:this.usage,approvals:Object.fromEntries(u(this,Te).entries())}}}Te=new WeakMap;function jl(n){return!!n&&typeof n=="object"&&"environment"in n&&"dimensions"in n}function $l(n){if(n.type==="function")return{type:"function",name:n.name,description:n.description,parameters:n.parameters,strict:n.strict};if(n.type==="computer"){if(!jl(n.computer))throw new te("Computer tool is not initialized for serialization. Call resolveComputer({ tool, runContext }) first (for example, when building a model payload outside Runner.run).");return{type:"computer",name:n.name,environment:n.computer.environment,dimensions:n.computer.dimensions}}return n.type==="shell"?{type:"shell",name:n.name}:n.type==="apply_patch"?{type:"apply_patch",name:n.name}:{type:"hosted_tool",name:n.name,providerData:n.providerData}}function Fl(n){return{toolName:n.toolName,toolDescription:n.toolDescription,inputJsonSchema:n.inputJsonSchema,strictJsonSchema:n.strictJsonSchema}}class kt{constructor(){S(this,"type","base_item");S(this,"rawItem")}toJSON(){return{type:this.type,rawItem:this.rawItem}}}class Ar extends kt{constructor(t,r){super();S(this,"rawItem");S(this,"agent");S(this,"type","message_output_item");this.rawItem=t,this.agent=r}toJSON(){return{...super.toJSON(),agent:this.agent.toJSON()}}get content(){let t="";for(const r of this.rawItem.content)r.type==="output_text"&&(t+=r.text);return t}}class Qe extends kt{constructor(t,r){super();S(this,"rawItem");S(this,"agent");S(this,"type","tool_call_item");this.rawItem=t,this.agent=r}toJSON(){return{...super.toJSON(),agent:this.agent.toJSON()}}}class Ue extends kt{constructor(t,r,s){super();S(this,"rawItem");S(this,"agent");S(this,"output");S(this,"type","tool_call_output_item");this.rawItem=t,this.agent=r,this.output=s}toJSON(){return{...super.toJSON(),agent:this.agent.toJSON(),output:ct(this.output)}}}class hs extends kt{constructor(t,r){super();S(this,"rawItem");S(this,"agent");S(this,"type","reasoning_item");this.rawItem=t,this.agent=r}toJSON(){return{...super.toJSON(),agent:this.agent.toJSON()}}}class ms extends kt{constructor(t,r){super();S(this,"rawItem");S(this,"agent");S(this,"type","handoff_call_item");this.rawItem=t,this.agent=r}toJSON(){return{...super.toJSON(),agent:this.agent.toJSON()}}}class gs extends kt{constructor(t,r,s){super();S(this,"rawItem");S(this,"sourceAgent");S(this,"targetAgent");S(this,"type","handoff_output_item");this.rawItem=t,this.sourceAgent=r,this.targetAgent=s}toJSON(){return{...super.toJSON(),sourceAgent:this.sourceAgent.toJSON(),targetAgent:this.targetAgent.toJSON()}}}class Ie extends kt{constructor(t,r,s){super();S(this,"rawItem");S(this,"agent");S(this,"toolName");S(this,"type","tool_approval_item");this.rawItem=t,this.agent=r,this.toolName=s,this.toolName=s??t.name}get name(){return this.toolName??this.rawItem.name}get arguments(){return"arguments"in this.rawItem?this.rawItem.arguments:void 0}toJSON(){return{...super.toJSON(),agent:this.agent.toJSON(),toolName:this.toolName}}}function Cr(n){return async(e,...t)=>xs(async()=>{const r=n(...t);Ss(r);try{return r.start(),await e(r)}catch(s){throw r.setError({message:s.message,data:s.data}),s}finally{r.end(),Tn()}})}function Ll(n,e){var t;return Je().createSpan({...n,data:{type:"agent",name:((t=n==null?void 0:n.data)==null?void 0:t.name)??"Agent",...n==null?void 0:n.data}},e)}function Ul(n,e){var t,r;return Je().createSpan({...n,data:{type:"function",input:((t=n==null?void 0:n.data)==null?void 0:t.input)??"",output:((r=n==null?void 0:n.data)==null?void 0:r.output)??"",...n==null?void 0:n.data}},e)}const ca=Cr(Ul);function Zl(n,e){return Je().createSpan({...n,data:{type:"handoff",...n==null?void 0:n.data}},e)}const ql=Cr(Zl);function Bl(n,e){return Je().createSpan({...n,data:{type:"guardrail",triggered:!1,...n==null?void 0:n.data}},e)}const la=Cr(Bl);function Jl(n,e){return Je().createSpan({...n,data:{type:"mcp_tools",...n==null?void 0:n.data}},e)}const zl=Cr(Jl);function Ee(n){if(n.length===0)return"";const e=typeof globalThis<"u"&&globalThis.Buffer?globalThis.Buffer:void 0;if(e)return e.from(n).toString("base64");let t="";for(let o=0;o<n.length;o+=1)t+=String.fromCharCode(n[o]);if(typeof globalThis.btoa=="function")return globalThis.btoa(t);const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let s="",i=0;for(;i<t.length;){const o=t.charCodeAt(i++),a=t.charCodeAt(i++),c=t.charCodeAt(i++),l=o>>2,f=(o&3)<<4|a>>4,d=isNaN(a)?64:(a&15)<<2|c>>6,m=isNaN(c)?64:c&63;s+=r.charAt(l)+r.charAt(f)+r.charAt(d)+r.charAt(m)}return s}class Gl{constructor(e){S(this,"data");S(this,"type","raw_model_stream_event");this.data=e}}class Vl{constructor(e,t){S(this,"name");S(this,"item");S(this,"type","run_item_stream_event");this.name=e,this.item=t}}class Wl{constructor(e){S(this,"agent");S(this,"type","agent_updated_stream_event");this.agent=e}}function Hl(n){return!!n&&typeof n.runCompaction=="function"}function Kl(n){if(!n||typeof n!="object"||!("rawItem"in n))return!1;const e=n.rawItem;if(!e||typeof e!="object")return!1;const t=e.type;return t==="function_call"||t==="hosted_tool_call"}function da(n){const e=n.rawItem;if(!e)return;if(e.type==="function_call"&&e.callId)return`function_call:${e.callId}`;if("callId"in e&&e.callId)return`${e.type}:${e.callId}`;const t="id"in e?e.id:void 0;if(t)return`${e.type}:${t}`;const r=typeof e.providerData=="object"&&e.providerData?e.providerData:void 0;if(r!=null&&r.id)return`${e.type}:provider:${r.id}`;const s="agent"in n&&n.agent?n.agent.name:"";try{return`${s}:${e.type}:${JSON.stringify(e)}`}catch{return`${s}:${e.type}`}}function Yl(n){try{if(n instanceof je){const e=n.issues[0];if(e){const t=Array.isArray(e.path)?e.path:[],r=t.length>0?t.map(i=>String(i)).join("."):"(root)",s=pa(e.message??"");return`Invalid output type: final assistant output failed schema validation at "${r}" (${s}).`}return"Invalid output type: final assistant output failed schema validation."}if(n instanceof Error&&n.message)return`Invalid output type: ${pa(n.message)}`}catch{}return"Invalid output type: final assistant output did not match the expected schema."}function pa(n,e=160){const t=n.trim();return t?t.length<=e?t:`${t.slice(0,e-3)}...`:"Schema validation failed."}function fa(n,e,t,r){var b;const s=[],i=[],o=[],a=[],c=[],l=[],f=[],d=[],m=new Map(r.map(_=>[_.toolName,_])),g=new Map(t.filter(_=>_.type==="function").map(_=>[_.name,_])),v=t.find(_=>_.type==="computer"),x=t.find(_=>_.type==="shell"),y=t.find(_=>_.type==="apply_patch"),h=new Map(t.filter(_=>{var N;return _.type==="hosted_tool"&&((N=_.providerData)==null?void 0:N.type)==="mcp"}).map(_=>_).map(_=>[_.providerData.server_label,_]));for(const _ of n.output){if(_.type==="message")_.role==="assistant"&&s.push(new Ar(_,e));else if(_.type==="hosted_tool_call"){s.push(new Qe(_,e));const T=_.name;if(d.push(T),((b=_.providerData)==null?void 0:b.type)==="mcp_approval_request"||_.name==="mcp_approval_request"){const A=_.providerData,D=A.server_label,F=h.get(D);if(typeof F>"u"){const L=`MCP server (${D}) not found in Agent (${e.name})`;throw tt({message:L,data:{mcp_server_label:D}}),new be(L)}const G=new Ie({type:"hosted_tool_call",name:A.name,id:A.id,status:"in_progress",providerData:A},e);f.push({requestItem:G,mcpTool:F}),F.providerData.on_approval||s.push(G)}}else if(_.type==="reasoning")s.push(new hs(_,e));else if(_.type==="computer_call"){if(s.push(new Qe(_,e)),d.push("computer_use"),!v)throw tt({message:"Model produced computer action without a computer tool.",data:{agent_name:e.name}}),new be("Model produced computer action without a computer tool.");a.push({toolCall:_,computer:v})}else if(_.type==="shell_call"){if(s.push(new Qe(_,e)),d.push("shell"),!x)throw tt({message:"Model produced shell action without a shell tool.",data:{agent_name:e.name}}),new be("Model produced shell action without a shell tool.");c.push({toolCall:_,shell:x})}else if(_.type==="apply_patch_call"){if(s.push(new Qe(_,e)),d.push("apply_patch"),!y)throw tt({message:"Model produced apply_patch action without an apply_patch tool.",data:{agent_name:e.name}}),new be("Model produced apply_patch action without an apply_patch tool.");l.push({toolCall:_,applyPatch:y})}if(_.type!=="function_call")continue;d.push(_.name);const N=m.get(_.name);if(N)s.push(new ms(_,e)),i.push({toolCall:_,handoff:N});else{const T=g.get(_.name);if(!T)throw tt({message:`Tool ${_.name} not found in agent ${e.name}.`,data:{tool_name:_.name,agent_name:e.name}}),new be(`Tool ${_.name} not found in agent ${e.name}.`);s.push(new Qe(_,e)),o.push({toolCall:_,tool:T})}}return{newItems:s,handoffs:i,functions:o,computerActions:a,shellActions:c,applyPatchActions:l,mcpApprovalRequests:f,toolsUsed:d,hasToolsOrApprovalsToRun(){return i.length>0||o.length>0||f.length>0||a.length>0||c.length>0||l.length>0}}}const Xl=_e("type",[w({type:I("next_step_handoff"),newAgent:W()}),w({type:I("next_step_final_output"),output:p()}),w({type:I("next_step_run_again")}),w({type:I("next_step_interruption"),data:re(p(),W())})]);class Ze{constructor(e,t,r,s,i){S(this,"originalInput");S(this,"modelResponse");S(this,"preStepItems");S(this,"newStepItems");S(this,"nextStep");this.originalInput=e,this.modelResponse=t,this.preStepItems=r,this.newStepItems=s,this.nextStep=i}get generatedItems(){return this.preStepItems.concat(this.newStepItems)}}function Ql(n,e,t){return n.resetToolChoice&&e.hasUsedTools(n)?{...t,toolChoice:void 0}:t}async function ha(n,e,t,r,s,i,o){const a=t.filter(T=>T instanceof Ie&&"callId"in T.rawItem&&T.rawItem.type==="function_call").map(T=>T.rawItem.callId),c=o.getInterruptions().filter(Kl);if(c.length>0){const T=new Set;for(const A of c){const D=da(A);D&&T.add(D)}if(T.size>0){let A=0;for(let D=t.length-1;D>=0;D--){const F=t[D];if(!(F instanceof Ie))continue;const G=da(F);if(G&&T.has(G)&&(A++,T.delete(G),T.size===0))break}A>0&&(o._currentTurnPersistedItemCount=Math.max(0,o._currentTurnPersistedItemCount-A))}}const l=s.functions.filter(T=>a.includes(T.toolCall.callId)),f=await ya(n,l,i,o),d=s.computerActions.length>0?await va(n,s.computerActions,i,o._context):[],m=new Set(t),g=[],v=new Set,x=T=>{m.has(T)||v.has(T)||(g.push(T),v.add(T))};for(const T of f)x(T.runItem);for(const T of d)x(T);const y=s.mcpApprovalRequests.filter(T=>{var A;return T.requestItem.type==="tool_approval_item"&&T.requestItem.rawItem.type==="hosted_tool_call"&&((A=T.requestItem.rawItem.providerData)==null?void 0:A.type)==="mcp_approval_request"}),h=new Set,b=new Set;for(const T of y){const A=T.requestItem.rawItem;if(A.type!=="hosted_tool_call")continue;const D=A.id,F=o._context.isToolApproved({toolName:A.name,callId:D});if(typeof F<"u"){const G={approve:F,approval_request_id:D,reason:void 0},L=new Qe({type:"hosted_tool_call",name:"mcp_approval_response",providerData:G},n);x(L)}else h.add(T.requestItem),b.add(D),f.push({type:"hosted_mcp_tool_approval",tool:T.mcpTool,runItem:T.requestItem}),x(T.requestItem)}const _=t.filter(T=>{var A;if(!(T instanceof Ie))return!0;if(T.rawItem.type==="hosted_tool_call"&&((A=T.rawItem.providerData)==null?void 0:A.type)==="mcp_approval_request"){if(h.has(T))return!0;const D=T.rawItem.id;return D?b.has(D):!1}return!1}),N=await ga({agent:n,runner:i,state:o,functionResults:f,originalInput:e,newResponse:r,preStepItems:_,newItems:g});return N||new Ze(e,r,_,g,{type:"next_step_run_again"})}async function ma(n,e,t,r,s,i,o){var N,T,A,D,F,G;const a=t,c=new Set(t),l=[],f=L=>{c.has(L)||(l.push(L),c.add(L))};for(const L of s.newItems)f(L);const[d,m,g,v]=await Promise.all([ya(n,s.functions,i,o),va(n,s.computerActions,i,o._context),sd(n,s.shellActions,i,o._context),id(n,s.applyPatchActions,i,o._context)]);for(const L of d)f(L.runItem);for(const L of m)f(L);for(const L of g)f(L);for(const L of v)f(L);if(s.mcpApprovalRequests.length>0)for(const L of s.mcpApprovalRequests){const pe=L.mcpTool.providerData,Y=L.requestItem.rawItem.providerData;if(pe.on_approval){const ue=await pe.on_approval(o._context,L.requestItem),Me={approve:ue.approve,approval_request_id:Y.id,reason:ue.reason};l.push(new Qe({type:"hosted_tool_call",name:"mcp_approval_response",providerData:Me},n))}else{l.push(L.requestItem);const ue={type:"hosted_mcp_tool_approval",tool:L.mcpTool,runItem:new Ie({type:"hosted_tool_call",name:Y.name,id:Y.id,arguments:Y.arguments,status:"in_progress",providerData:Y},n)};d.push(ue)}}if(s.handoffs.length>0)return await ad(n,e,a,l,r,s.handoffs,i,o._context);const x=await ga({agent:n,runner:i,state:o,functionResults:d,originalInput:e,newResponse:r,preStepItems:a,newItems:l});if(x)return x;if((((N=s.functions)==null?void 0:N.length)??0)>0||(((T=s.computerActions)==null?void 0:T.length)??0)>0||(((A=s.shellActions)==null?void 0:A.length)??0)>0||(((D=s.applyPatchActions)==null?void 0:D.length)??0)>0||(((F=s.mcpApprovalRequests)==null?void 0:F.length)??0)>0||(((G=s.handoffs)==null?void 0:G.length)??0)>0)return new Ze(e,r,a,l,{type:"next_step_run_again"});const h=l.filter(L=>L instanceof Ar),b=h.length>0?Ki(h[h.length-1].rawItem):void 0;if(typeof b>"u")return new Ze(e,r,a,l,{type:"next_step_run_again"});if(!d.some(L=>L.runItem instanceof Ie)){if(n.outputType==="text")return new Ze(e,r,a,l,{type:"next_step_final_output",output:b});if(n.outputType!=="text"&&b){const{parser:L}=Xr(n.outputType,"final_output"),[pe]=await ce(()=>L(b));if(pe){const Y=Yl(pe);throw tt({message:Y,data:{error:String(pe)}}),new be(Y)}return new Ze(e,r,a,l,{type:"next_step_final_output",output:b})}}return new Ze(e,r,a,l,{type:"next_step_run_again"})}async function ga({agent:n,runner:e,state:t,functionResults:r,originalInput:s,newResponse:i,preStepItems:o,newItems:a}){const c=await od(n,r,t);return c.isFinalOutput?(e.emit("agent_end",t._context,n,c.finalOutput),n.emit("agent_end",t._context,c.finalOutput),new Ze(s,i,o,a,{type:"next_step_final_output",output:c.finalOutput})):c.isInterrupted?new Ze(s,i,o,a,{type:"next_step_interruption",data:{interruptions:c.interruptions}}):null}function Or(n,e){const t=yd(e);if(t){const r=t.map(_d);return{type:"function_call_result",name:n.name,callId:n.callId,status:"completed",output:r}}return{type:"function_call_result",name:n.name,callId:n.callId,status:"completed",output:{type:"text",text:ct(e)}}}function ed(n){const e=n.file;if(typeof e=="string"&&e.length>0)return e;const t=td(e);if(t)return t;const r=nd(n);return r||null}function td(n){if(!At(n))return null;if("data"in n&&n.data!==void 0){const t=n.data,r=typeof t=="string"&&t.length>0,s=t instanceof Uint8Array&&t.length>0;return!r&&!s||!me(n.mediaType)||!me(n.filename)?null:{data:typeof t=="string"?t:new Uint8Array(t),mediaType:n.mediaType,filename:n.filename}}if(me(n.url)){const t={url:n.url};return me(n.filename)&&(t.filename=n.filename),t}const e=me(n.id)&&n.id||me(n.fileId)&&n.fileId;if(e){const t={id:e};return me(n.filename)&&(t.filename=n.filename),t}return null}function nd(n){const e=typeof n.filename=="string"&&n.filename.length>0?n.filename:void 0,t=typeof n.mediaType=="string"&&n.mediaType.length>0?n.mediaType:void 0;if(typeof n.fileData=="string"&&n.fileData.length>0)return!t||!e?null:{data:n.fileData,mediaType:t,filename:e};if(n.fileData instanceof Uint8Array&&n.fileData.length>0)return!t||!e?null:{data:new Uint8Array(n.fileData),mediaType:t,filename:e};if(typeof n.fileUrl=="string"&&n.fileUrl.length>0){const r={url:n.fileUrl};return e&&(r.filename=e),r}if(typeof n.fileId=="string"&&n.fileId.length>0){const r={id:n.fileId};return e&&(r.filename=e),r}return null}function At(n){return typeof n=="object"&&n!==null}function me(n){return typeof n=="string"&&n.length>0}function Er(n,e){if(typeof n=="string")return e&&!n.startsWith("data:")?Vt(n,e):n;const t=Ee(n);return Vt(t,e)}function Vt(n,e){return e?`data:${e};base64,${n}`:n}async function ya(n,e,t,r){async function s(i){let o=i.toolCall.arguments;if(i.tool.parameters&&(Tt(i.tool.parameters)?o=i.tool.parameters.parse(o):o=JSON.parse(o)),await i.tool.needsApproval(r._context,o,i.toolCall.callId)){const c=r._context.isToolApproved({toolName:i.tool.name,callId:i.toolCall.callId});if(c===!1)return ca(async l=>{const f="Tool execution was not approved.";return l.setError({message:f,data:{tool_name:i.tool.name,error:`Tool execution for ${i.toolCall.callId} was manually rejected by user.`}}),l.spanData.output=f,{type:"function_output",tool:i.tool,output:f,runItem:new Ue(Or(i.toolCall,f),n,f)}},{data:{name:i.tool.name}});if(c!==!0)return{type:"function_approval",tool:i.tool,runItem:new Ie(i.toolCall,n)}}return ca(async c=>{t.config.traceIncludeSensitiveData&&(c.spanData.input=i.toolCall.arguments);try{t.emit("agent_tool_start",r._context,n,i.tool,{toolCall:i.toolCall}),n.emit("agent_tool_start",r._context,i.tool,{toolCall:i.toolCall});const l=await i.tool.invoke(r._context,i.toolCall.arguments,{toolCall:i.toolCall}),f=ct(l);t.emit("agent_tool_end",r._context,n,i.tool,f,{toolCall:i.toolCall}),n.emit("agent_tool_end",r._context,i.tool,f,{toolCall:i.toolCall}),t.config.traceIncludeSensitiveData&&(c.spanData.output=f);const d={type:"function_output",tool:i.tool,output:l,runItem:new Ue(Or(i.toolCall,l),n,l)},m=Yc(i.toolCall);if(m){d.agentRunResult=m;const g=m.interruptions;g.length>0&&(d.interruptions=g)}return d}catch(l){c.setError({message:"Error running tool",data:{tool_name:i.tool.name,error:String(l)}});const f=String(l);throw t.emit("agent_tool_end",r._context,n,i.tool,f,{toolCall:i.toolCall}),n.emit("agent_tool_end",r._context,i.tool,f,{toolCall:i.toolCall}),l}},{data:{name:i.tool.name}})}try{return await Promise.all(e.map(s))}catch(i){throw new Qu(`Failed to run function tools: ${i}`,i,r)}}async function rd(n,e){const t=e.action;let r;switch(t.type){case"click":await n.click(t.x,t.y,t.button);break;case"double_click":await n.doubleClick(t.x,t.y);break;case"drag":await n.drag(t.path.map(s=>[s.x,s.y]));break;case"keypress":await n.keypress(t.keys);break;case"move":await n.move(t.x,t.y);break;case"screenshot":r=await n.screenshot();break;case"scroll":await n.scroll(t.x,t.y,t.scroll_x,t.scroll_y);break;case"type":await n.type(t.text);break;case"wait":await n.wait();break}if(typeof r<"u"||typeof n.screenshot=="function"&&(r=await n.screenshot(),typeof r<"u"))return r;throw new Error("Computer does not implement screenshot()")}function _a(n){if(n instanceof Error)return n.message||n.toString();try{return JSON.stringify(n)}catch{return String(n)}}async function sd(n,e,t,r,s=void 0){const i=s??j,o=[];for(const a of e){const c=a.shell,l=a.toolCall,f=new Ie(l,n,c.name);if(await c.needsApproval(r,l.action,l.callId)){if(c.onApproval){const h=await c.onApproval(r,f);h.approve===!0?r.approveTool(f):h.approve===!1&&r.rejectTool(f)}const y=r.isToolApproved({toolName:c.name,callId:l.callId});if(y===!1){const h="Tool execution was not approved.",b={stdout:"",stderr:h,outcome:{type:"exit",exitCode:null}};o.push(new Ue({type:"shell_call_output",callId:l.callId,output:[b]},n,h));continue}if(y!==!0){o.push(f);continue}}t.emit("agent_tool_start",r,n,c,{toolCall:l}),typeof n.emit=="function"&&n.emit("agent_tool_start",r,c,{toolCall:l});let m;const g={};let v;try{const y=await c.shell.run(l.action);m=y.output??[],y.providerData&&Object.assign(g,y.providerData),typeof y.maxOutputLength=="number"&&(v=y.maxOutputLength)}catch(y){m=[{stdout:"",stderr:_a(y),outcome:{type:"exit",exitCode:null}}],i.error("Failed to execute shell action:",y)}m=m??[],t.emit("agent_tool_end",r,n,c,JSON.stringify(m),{toolCall:l}),typeof n.emit=="function"&&n.emit("agent_tool_end",r,c,JSON.stringify(m),{toolCall:l});const x={type:"shell_call_output",callId:l.callId,output:m??[]};typeof v=="number"&&(x.maxOutputLength=v),Object.keys(g).length>0&&(x.providerData=g),o.push(new Ue(x,n,x.output))}return o}async function id(n,e,t,r,s=void 0){const i=s??j,o=[];for(const a of e){const c=a.applyPatch,l=a.toolCall,f=new Ie(l,n,c.name);if(await c.needsApproval(r,l.operation,l.callId)){if(c.onApproval){const y=await c.onApproval(r,f);y.approve===!0?r.approveTool(f):y.approve===!1&&r.rejectTool(f)}const x=r.isToolApproved({toolName:c.name,callId:l.callId});if(x===!1){const y="Tool execution was not approved.";o.push(new Ue({type:"apply_patch_call_output",callId:l.callId,status:"failed",output:y},n,y));continue}if(x!==!0){o.push(f);continue}}t.emit("agent_tool_start",r,n,c,{toolCall:l}),typeof n.emit=="function"&&n.emit("agent_tool_start",r,c,{toolCall:l});let m="completed",g="";try{let x;switch(l.operation.type){case"create_file":x=await c.editor.createFile(l.operation);break;case"update_file":x=await c.editor.updateFile(l.operation);break;case"delete_file":x=await c.editor.deleteFile(l.operation);break;default:throw new Error("Unsupported apply_patch operation")}x&&typeof x.status=="string"&&(m=x.status),x&&typeof x.output=="string"&&(g=x.output)}catch(x){m="failed",g=_a(x),i.error("Failed to execute apply_patch operation:",x)}t.emit("agent_tool_end",r,n,c,g,{toolCall:l}),typeof n.emit=="function"&&n.emit("agent_tool_end",r,c,g,{toolCall:l});const v={type:"apply_patch_call_output",callId:l.callId,status:m};g&&(v.output=g),o.push(new Ue(v,n,g))}return o}async function va(n,e,t,r,s=void 0){const i=s??j,o=[];for(const a of e){const c=a.toolCall;t.emit("agent_tool_start",r,n,a.computer,{toolCall:c}),typeof n.emit=="function"&&n.emit("agent_tool_start",r,a.computer,{toolCall:c});let l;try{const m=await Zi({tool:a.computer,runContext:r});l=await rd(m,c)}catch(m){i.error("Failed to execute computer action:",m),l=""}t.emit("agent_tool_end",r,n,a.computer,l,{toolCall:c}),typeof n.emit=="function"&&n.emit("agent_tool_end",r,a.computer,l,{toolCall:c});const f=l?`data:image/png;base64,${l}`:"",d={type:"computer_call_result",callId:c.callId,output:{type:"computer_screenshot",data:f}};o.push(new Ue(d,n,f))}return o}async function ad(n,e,t,r,s,i,o,a){if(r=[...r],i.length===0)return j.warn("Incorrectly called executeHandoffCalls with no handoffs. This should not happen. Moving on."),new Ze(e,s,t,r,{type:"next_step_run_again"});if(i.length>1){const l="Multiple handoffs detected, ignoring this one.";for(let f=1;f<i.length;f++)r.push(new Ue(Or(i[f].toolCall,l),n,l))}const c=i[0];return ql(async l=>{const f=c.handoff,d=await f.onInvokeHandoff(a,c.toolCall.arguments);if(l.spanData.to_agent=d.name,i.length>1){const g=i.map(v=>v.handoff.agentName);l.setError({message:"Multiple handoffs requested",data:{requested_agents:g}})}r.push(new gs(Or(c.toolCall,Vi(d)),n,d)),o.emit("agent_handoff",a,n,d),n.emit("agent_handoff",a,d);const m=f.inputFilter??o.config.handoffInputFilter;if(m){j.debug("Filtering inputs for handoff"),typeof m!="function"&&l.setError({message:"Invalid input filter",data:{details:"not callable"}});const g={inputHistory:Array.isArray(e)?[...e]:e,preHandoffItems:[...t],newItems:[...r],runContext:a},v=m(g);e=v.inputHistory,t=v.preHandoffItems,r=v.newItems}return new Ze(e,s,t,r,{type:"next_step_handoff",newAgent:d})},{data:{from_agent:n.name}})}const Rr={isFinalOutput:!1,isInterrupted:void 0};async function od(n,e,t){if(e.length===0)return Rr;const r=[];for(const o of e)if(o.runItem instanceof Ie&&r.push(o.runItem),o.type==="function_output"){if(Array.isArray(o.interruptions))r.push(...o.interruptions);else if(o.agentRunResult){const a=o.agentRunResult.interruptions;a.length>0&&r.push(...a)}}if(r.length>0)return{isFinalOutput:!1,isInterrupted:!0,interruptions:r};if(n.toolUseBehavior==="run_llm_again")return Rr;const s=e[0];if(n.toolUseBehavior==="stop_on_first_tool")return(s==null?void 0:s.type)==="function_output"?{isFinalOutput:!0,isInterrupted:void 0,finalOutput:ct(s.output)}:Rr;const i=n.toolUseBehavior;if(typeof i=="object"){const o=e.find(a=>i.stopAtToolNames.includes(a.tool.name));return(o==null?void 0:o.type)==="function_output"?{isFinalOutput:!0,isInterrupted:void 0,finalOutput:ct(o.output)}:Rr}if(typeof i=="function")return i(t._context,e);throw new te(`Invalid toolUseBehavior: ${i}`,t)}function ud(n){if(n instanceof Ar)return"message_output_created";if(n instanceof ms)return"handoff_requested";if(n instanceof gs)return"handoff_occurred";if(n instanceof Qe)return"tool_called";if(n instanceof Ue)return"tool_output";if(n instanceof hs)return"reasoning_item_created";if(n instanceof Ie)return"tool_approval_requested"}function wa(n,e){const t=ud(e);if(!t){j.warn("Unknown item type: ",e);return}n._addItem(new Vl(t,e))}function cd(n,e){for(const t of e)wa(n,t)}function ba(n,e,t){const r=t==null?void 0:t.skipItems;for(const s of e.newStepItems)r!=null&&r.has(s)||wa(n,s)}class Ia{constructor(){R(this,Qt,new Map)}addToolUse(e,t){u(this,Qt).set(e,t)}hasUsedTools(e){return u(this,Qt).has(e)}toJSON(){return Object.fromEntries(Array.from(u(this,Qt).entries()).map(([e,t])=>[e.name,t]))}}Qt=new WeakMap;function ld(n){return typeof n=="string"?[{type:"message",role:"user",content:n}]:[...n]}function Sa(n){return n.filter(e=>e.type!=="tool_approval_item").map(e=>e.rawItem)}function ys(n){return n.map(e=>_s(vs(e)))}function _s(n,e={}){if(n==null)return n;const t=dd(n);if(t)return pd(t,e.mediaType);if(Array.isArray(n))return n.map(o=>_s(o,e));if(!xa(n))return n;const r=n,s={},i=typeof r.mediaType=="string"&&r.mediaType.length>0?r.mediaType:e.mediaType;for(const[o,a]of Object.entries(r)){const c=o==="data"||o==="fileData"?{mediaType:i}:e;s[o]=_s(a,c)}return s}function dd(n){if(n instanceof ArrayBuffer)return new Uint8Array(n);if(_n(n)){const e=n;return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}if(ts(n)){const e=n;return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}if(_r(n)){const e=n;return Uint8Array.from(e.data)}}function pd(n,e){const t=Ee(n);return`data:${e&&!e.startsWith("data:")?e:"text/plain"};base64,${t}`}function xa(n){if(typeof n!="object"||n===null)return!1;const e=Object.getPrototypeOf(n);return e===Object.prototype||e===null}function vs(n){if(n==null)return n;if(Array.isArray(n))return n.map(i=>vs(i));if(!xa(n))return n;const e=n,t={},s=typeof e.type=="string"&&e.type.length>0&&fd(e.type);for(const[i,o]of Object.entries(e))s&&i==="id"||(t[i]=vs(o));return t}function fd(n){switch(n){case"function_call":case"function_call_result":return!0;default:return!1}}async function Nr(n,e,t){if(!Hl(n))return;const r=await n.runCompaction(typeof e>"u"?void 0:{responseId:e});if(!r)return;const s=r.usage;t._context.usage.add(new Sn({requests:1,inputTokens:s.inputTokens,outputTokens:s.outputTokens,totalTokens:s.totalTokens,inputTokensDetails:s.inputTokensDetails,outputTokensDetails:s.outputTokensDetails,requestUsageEntries:[s]}))}async function hd(n,e,t){if(!n)return;const r=e??[],s=t.state,i=s._currentTurnPersistedItemCount??0,o=t.newItems.slice(i);process.env.OPENAI_AGENTS__DEBUG_SAVE_SESSION&&console.debug("saveToSession:newRunItems",o.map(f=>f.type));const a=Sa(o),c=[...r,...a];if(c.length===0){s._currentTurnPersistedItemCount=i+o.length,await Nr(n,t.lastResponseId,s);return}const l=ys(c);await n.addItems(l),await Nr(n,t.lastResponseId,s),s._currentTurnPersistedItemCount=i+o.length}async function md(n,e){if(!n||!e||e.length===0)return;const t=ys(e);await n.addItems(t)}async function Ta(n,e){if(!n)return;const t=e.state,r=t._currentTurnPersistedItemCount??0,s=e.newItems.slice(r),i=Sa(s);if(i.length===0){t._currentTurnPersistedItemCount=r+s.length,await Nr(n,e.lastResponseId,t);return}const o=ys(i);await n.addItems(o),await Nr(n,e.lastResponseId,t),t._currentTurnPersistedItemCount=r+s.length}async function gd(n,e,t,r){if(!e)return{preparedInput:n,sessionItems:void 0};const s=(r==null?void 0:r.includeHistoryInPreparedInput)??!0,i=(r==null?void 0:r.preserveDroppedNewItems)??!1,o=await e.getItems(),a=Array.isArray(n)?[...n]:ld(n);if(!t)return{preparedInput:s?[...o,...a]:a,sessionItems:a};const c=o.slice(),l=a.slice(),f=await t(o,a);if(!Array.isArray(f))throw new te("Session input callback must return an array of AgentInputItem objects.");const d=Aa(c),m=Aa(l),g=Ca(c),v=Ca(l),x=[];for(const h of f){const b=ws(h);if(Oa(v,b,h)){Ea(m,b),x.push(h);continue}if(Oa(g,b,h)){Ea(d,b);continue}const _=d.get(b)??0;if(_>0){d.set(b,_-1);continue}const N=m.get(b)??0;if(N>0){m.set(b,N-1),x.push(h);continue}x.push(h)}return{preparedInput:s?f:x.length>0?x:i?l:[],sessionItems:x}}function yd(n){if(Array.isArray(n)){const t=[];for(const r of n){const s=ka(r);if(!s)return null;t.push(s)}return t}const e=ka(n);return e?[e]:null}function ka(n){if(!At(n))return null;const e=n.type;if(e==="text"&&typeof n.text=="string"){const t={type:"text",text:n.text};return At(n.providerData)&&(t.providerData=n.providerData),t}if(e==="image"){const t={type:"image"};let r,s;const i=me(n.mediaType)?n.mediaType:void 0,o=n.image;if(typeof o=="string"&&o.length>0)r=o;else if(At(o)){const a=o,c=me(a.mediaType)?a.mediaType:i;if(me(a.url)?r=a.url:(me(a.data)||a.data instanceof Uint8Array&&a.data.length>0)&&(r=Er(a.data,c)),!r){const l=me(a.fileId)&&a.fileId||me(a.id)&&a.id||void 0;l&&(s=l)}}if(!r&&typeof n.imageUrl=="string"&&n.imageUrl.length>0&&(r=n.imageUrl),!s&&typeof n.fileId=="string"&&n.fileId.length>0&&(s=n.fileId),!r&&typeof n.data=="string"&&n.data.length>0?r=i?Er(n.data,i):n.data:!r&&n.data instanceof Uint8Array&&n.data.length>0&&(r=Er(n.data,i)),typeof n.detail=="string"&&n.detail.length>0&&(t.detail=n.detail),r)t.image=r;else if(s)t.image={fileId:s};else return null;return At(n.providerData)&&(t.providerData=n.providerData),t}if(e==="file"){const t=ed(n);if(!t)return null;const r={type:"file",file:t};return At(n.providerData)&&(r.providerData=n.providerData),r}return null}function _d(n){if(n.type==="text"){const t={type:"input_text",text:n.text};return n.providerData&&(t.providerData=n.providerData),t}if(n.type==="image"){const t={type:"input_image"};if(typeof n.detail=="string"&&n.detail.length>0&&(t.detail=n.detail),typeof n.image=="string"&&n.image.length>0)t.image=n.image;else if(At(n.image)){const r=n.image,s=me(r.mediaType)?r.mediaType:void 0;if(me(r.url))t.image=r.url;else if(me(r.data))t.image=s&&!r.data.startsWith("data:")?Vt(r.data,s):r.data;else if(r.data instanceof Uint8Array&&r.data.length>0){const i=Ee(r.data);t.image=Vt(i,s)}else{const i=me(r.fileId)&&r.fileId||me(r.id)&&r.id||void 0;i&&(t.image={id:i})}}return n.providerData&&(t.providerData=n.providerData),t}if(n.type==="file"){const t={type:"input_file"},r=n.file;if(typeof r=="string")t.file=r;else if(r&&typeof r=="object"){const s=r;if("data"in s&&s.data){const i=s.mediaType??"text/plain";if(typeof s.data=="string")t.file=Vt(s.data,i);else{const o=Ee(s.data);t.file=Vt(o,i)}}else if(typeof s.url=="string"&&s.url.length>0)t.file={url:s.url};else{const i=typeof s.id=="string"&&s.id.length>0&&s.id||(typeof s.fileId=="string"&&s.fileId.length>0?s.fileId:void 0);i&&(t.file={id:i})}typeof s.filename=="string"&&s.filename.length>0&&(t.filename=s.filename)}return n.providerData&&(t.providerData=n.providerData),t}return n}function Aa(n){const e=new Map;for(const t of n){const r=ws(t);e.set(r,(e.get(r)??0)+1)}return e}function Ca(n){const e=new Map;for(const t of n){const r=ws(t),s=e.get(r);s?s.push(t):e.set(r,[t])}return e}function Oa(n,e,t){const r=n.get(e);if(!r||r.length===0)return!1;const s=r.findIndex(i=>i===t);return s===-1?!1:(r.splice(s,1),r.length===0&&n.delete(e),!0)}function Ea(n,e){const t=(n.get(e)??0)-1;t<=0?n.delete(e):n.set(e,t)}function ws(n){return JSON.stringify(n,vd)}function vd(n,e){if(e instanceof ArrayBuffer)return{__type:"ArrayBuffer",data:Ee(new Uint8Array(e))};if(_n(e)){const t=e;return{__type:t.constructor.name,data:Ee(new Uint8Array(t.buffer,t.byteOffset,t.byteLength))}}if(ts(e)){const t=e;return{__type:"Buffer",data:Ee(new Uint8Array(t.buffer,t.byteOffset,t.byteLength))}}return _r(e)?{__type:"Buffer",data:Ee(Uint8Array.from(e.data))}:e}const Pr="1.0",wd=I(Pr),qe=w({name:p()}),Ra=w({object:I("trace.span"),id:p(),trace_id:p(),parent_id:p().nullable(),started_at:p().nullable(),ended_at:p().nullable(),error:w({message:p(),data:re(p(),W()).optional()}).nullable(),span_data:re(p(),W())}).extend({previous_span:cu(()=>Ra).optional()}),bd=w({inputTokens:E(),outputTokens:E(),totalTokens:E(),inputTokensDetails:re(p(),E()).optional(),outputTokensDetails:re(p(),E()).optional(),endpoint:p().optional()}),Na=w({requests:E(),inputTokens:E(),outputTokens:E(),totalTokens:E(),inputTokensDetails:z(re(p(),E())).optional(),outputTokensDetails:z(re(p(),E())).optional(),requestUsageEntries:z(bd).optional()}),Pa=w({usage:Na,output:z(fs),responseId:p().optional(),providerData:re(p(),W()).optional()}),Da=_e("type",[w({type:I("message_output_item"),rawItem:Sr,agent:qe}),w({type:I("tool_call_item"),rawItem:El.or(wn),agent:qe}),w({type:I("tool_call_output_item"),rawItem:xr,agent:qe,output:p()}),w({type:I("reasoning_item"),rawItem:ps,agent:qe}),w({type:I("handoff_call_item"),rawItem:bn,agent:qe}),w({type:I("handoff_output_item"),rawItem:xr,sourceAgent:qe,targetAgent:qe}),w({type:I("tool_approval_item"),rawItem:bn.or(wn).or(Tr).or(kr),agent:qe,toolName:p().optional()})]),Id=w({object:I("trace"),id:p(),workflow_name:p(),group_id:p().nullable(),metadata:re(p(),W())}),Sd=w({newItems:z(Da),toolsUsed:z(p()),handoffs:z(w({toolCall:W(),handoff:W()})),functions:z(w({toolCall:W(),tool:W()})),computerActions:z(w({toolCall:W(),computer:W()})),shellActions:z(w({toolCall:W(),shell:W()})).optional(),applyPatchActions:z(w({toolCall:W(),applyPatch:W()})).optional(),mcpApprovalRequests:z(w({requestItem:w({rawItem:w({type:I("hosted_tool_call"),name:p(),arguments:p().optional(),status:p().optional(),output:p().optional(),providerData:re(p(),W()).nullable().optional()})}),mcpTool:w({type:I("hosted_tool"),name:I("hosted_mcp"),providerData:re(p(),W())})})).optional()}),Ma=w({tripwireTriggered:It(),outputInfo:W()}),xd=w({guardrail:w({type:I("input"),name:p()}),output:Ma}),Td=w({guardrail:w({type:I("output"),name:p()}),agentOutput:W(),agent:qe,output:Ma}),ja=w({$schemaVersion:wd,currentTurn:E(),currentAgent:qe,originalInput:p().or(z(Rl)),modelResponses:z(Pa),context:w({usage:Na,approvals:re(p(),w({approved:z(p()).or(It()),rejected:z(p()).or(It())})),context:re(p(),W())}),toolUseTracker:re(p(),z(p())),maxTurns:E(),currentAgentSpan:Ra.nullable().optional(),noActiveAgentRun:It(),inputGuardrailResults:z(xd),outputGuardrailResults:z(Td),currentStep:Xl.optional(),lastModelResponse:Pa.optional(),generatedItems:z(Da),lastProcessedResponse:Sd.optional(),currentTurnPersistedItemCount:E().int().min(0).optional(),trace:Id.nullable()});class et{constructor(e,t,r,s){S(this,"_currentTurn",0);S(this,"_currentAgent");S(this,"_originalInput");S(this,"_modelResponses");S(this,"_currentAgentSpan");S(this,"_context");S(this,"_toolUseTracker");S(this,"_generatedItems");S(this,"_currentTurnPersistedItemCount");S(this,"_maxTurns");S(this,"_noActiveAgentRun",!0);S(this,"_lastTurnResponse");S(this,"_inputGuardrailResults");S(this,"_outputGuardrailResults");S(this,"_currentStep");S(this,"_lastProcessedResponse");S(this,"_trace",null);this._context=e,this._originalInput=structuredClone(t),this._modelResponses=[],this._currentAgentSpan=void 0,this._currentAgent=r,this._toolUseTracker=new Ia,this._generatedItems=[],this._currentTurnPersistedItemCount=0,this._maxTurns=s,this._inputGuardrailResults=[],this._outputGuardrailResults=[],this._trace=Ht()}get usage(){return this._context.usage}get history(){return Wt(this._originalInput,this._generatedItems)}getInterruptions(){var e;return((e=this._currentStep)==null?void 0:e.type)!=="next_step_interruption"?[]:this._currentStep.data.interruptions}approve(e,t={alwaysApprove:!1}){this._context.approveTool(e,t)}reject(e,t={alwaysReject:!1}){this._context.rejectTool(e,t)}toJSON(){var r;const e={$schemaVersion:Pr,currentTurn:this._currentTurn,currentAgent:{name:this._currentAgent.name},originalInput:this._originalInput,modelResponses:this._modelResponses.map(s=>({usage:{requests:s.usage.requests,inputTokens:s.usage.inputTokens,outputTokens:s.usage.outputTokens,totalTokens:s.usage.totalTokens,inputTokensDetails:s.usage.inputTokensDetails,outputTokensDetails:s.usage.outputTokensDetails,...s.usage.requestUsageEntries&&s.usage.requestUsageEntries.length>0?{requestUsageEntries:s.usage.requestUsageEntries.map(i=>({inputTokens:i.inputTokens,outputTokens:i.outputTokens,totalTokens:i.totalTokens,inputTokensDetails:i.inputTokensDetails,outputTokensDetails:i.outputTokensDetails,...i.endpoint?{endpoint:i.endpoint}:{}}))}:{}},output:s.output,responseId:s.responseId,providerData:s.providerData})),context:this._context.toJSON(),toolUseTracker:this._toolUseTracker.toJSON(),maxTurns:this._maxTurns,currentAgentSpan:(r=this._currentAgentSpan)==null?void 0:r.toJSON(),noActiveAgentRun:this._noActiveAgentRun,inputGuardrailResults:this._inputGuardrailResults,outputGuardrailResults:this._outputGuardrailResults.map(s=>({...s,agent:s.agent.toJSON()})),currentStep:this._currentStep,lastModelResponse:this._lastTurnResponse,generatedItems:this._generatedItems.map(s=>s.toJSON()),currentTurnPersistedItemCount:this._currentTurnPersistedItemCount,lastProcessedResponse:this._lastProcessedResponse,trace:this._trace?this._trace.toJSON():null},t=ja.safeParse(e);if(!t.success)throw new Xu(`Failed to serialize run state. ${t.error.message}`);return t.data}toString(){return JSON.stringify(this.toJSON())}static async fromString(e,t){var d,m,g,v,x;const[r,s]=await ce(()=>JSON.parse(t));if(r)throw new te(`Failed to parse run state. ${r instanceof Error?r.message:String(r)}`);const i=s.$schemaVersion;if(!i)throw new te("Run state is missing schema version");if(i!==Pr)throw new te(`Run state schema version ${i} is not supported. Please use version ${Pr}`);const o=ja.parse(JSON.parse(t)),a=kd(e),c=new Gt(o.context.context);c._rebuildApprovals(o.context.approvals);const l=a.get(o.currentAgent.name);if(!l)throw new te(`Agent ${o.currentAgent.name} not found`);const f=new et(c,"",l,o.maxTurns);f._currentTurn=o.currentTurn,f._toolUseTracker=new Ia;for(const[y,h]of Object.entries(o.toolUseTracker))f._toolUseTracker.addToolUse(a.get(y),h);if(o.currentAgentSpan){o.trace||j.warn("Trace is not set, skipping tracing setup");const y=Je().createTrace({traceId:(d=o.trace)==null?void 0:d.id,name:(m=o.trace)==null?void 0:m.workflow_name,groupId:((g=o.trace)==null?void 0:g.group_id)??void 0,metadata:(v=o.trace)==null?void 0:v.metadata});f._currentAgentSpan=$a(y,o.currentAgentSpan),f._trace=y}return f._noActiveAgentRun=o.noActiveAgentRun,f._inputGuardrailResults=o.inputGuardrailResults,f._outputGuardrailResults=o.outputGuardrailResults.map(y=>({...y,agent:a.get(y.agent.name)})),f._currentStep=o.currentStep,f._originalInput=o.originalInput,f._modelResponses=o.modelResponses.map(Fa),f._lastTurnResponse=o.lastModelResponse?Fa(o.lastModelResponse):void 0,f._generatedItems=o.generatedItems.map(y=>La(y,a)),f._currentTurnPersistedItemCount=o.currentTurnPersistedItemCount??0,f._lastProcessedResponse=o.lastProcessedResponse?await Ad(a,f._currentAgent,f._context,o.lastProcessedResponse):void 0,((x=o.currentStep)==null?void 0:x.type)==="next_step_handoff"&&(f._currentStep={type:"next_step_handoff",newAgent:a.get(o.currentStep.newAgent.name)}),f}}function kd(n){const e=new Map,t=[n];for(;t.length>0;){const r=t.shift();if(!e.has(r.name)){e.set(r.name,r);for(const s of r.handoffs)s instanceof Xe?e.has(s.name)||t.push(s):s.agent&&(e.has(s.agent.name)||t.push(s.agent))}}return e}function $a(n,e){const t=e.span_data,r=e.previous_span?$a(n,e.previous_span):void 0,s=Je().createSpan({spanId:e.id,traceId:e.trace_id,parentId:e.parent_id??void 0,startedAt:e.started_at??void 0,endedAt:e.ended_at??void 0,data:t},n);return s.previousSpan=r,s}function Fa(n){return{usage:new Sn(n.usage),output:n.output.map(t=>fs.parse(t)),responseId:n.responseId,providerData:n.providerData}}function La(n,e){switch(n.type){case"message_output_item":return new Ar(n.rawItem,e.get(n.agent.name));case"tool_call_item":return new Qe(n.rawItem,e.get(n.agent.name));case"tool_call_output_item":return new Ue(n.rawItem,e.get(n.agent.name),n.output);case"reasoning_item":return new hs(n.rawItem,e.get(n.agent.name));case"handoff_call_item":return new ms(n.rawItem,e.get(n.agent.name));case"handoff_output_item":return new gs(n.rawItem,e.get(n.sourceAgent.name),e.get(n.targetAgent.name));case"tool_approval_item":return new Ie(n.rawItem,e.get(n.agent.name),n.toolName)}}async function Ad(n,e,t,r){const s=await e.getAllTools(t),i=new Map(s.filter(d=>d.type==="function").map(d=>[d.name,d])),o=new Map(s.filter(d=>d.type==="computer").map(d=>[d.name,d])),a=new Map(s.filter(d=>d.type==="shell").map(d=>[d.name,d])),c=new Map(s.filter(d=>d.type==="apply_patch").map(d=>[d.name,d])),l=new Map(e.handoffs.map(d=>d instanceof Xe?[d.name,Hi(d)]:[d.toolName,d])),f={newItems:r.newItems.map(d=>La(d,n)),toolsUsed:r.toolsUsed,handoffs:r.handoffs.map(d=>{if(!l.has(d.handoff.toolName))throw new te(`Handoff ${d.handoff.toolName} not found`);return{toolCall:d.toolCall,handoff:l.get(d.handoff.toolName)}}),functions:await Promise.all(r.functions.map(async d=>{if(!i.has(d.tool.name))throw new te(`Tool ${d.tool.name} not found`);return{toolCall:d.toolCall,tool:i.get(d.tool.name)}})),computerActions:r.computerActions.map(d=>{const m=d.computer.name;if(!o.has(m))throw new te(`Computer tool ${m} not found`);return{toolCall:d.toolCall,computer:o.get(m)}}),shellActions:(r.shellActions??[]).map(d=>{const m=d.shell.name;if(!a.has(m))throw new te(`Shell tool ${m} not found`);return{toolCall:d.toolCall,shell:a.get(m)}}),applyPatchActions:(r.applyPatchActions??[]).map(d=>{const m=d.applyPatch.name;if(!c.has(m))throw new te(`Apply patch tool ${m} not found`);return{toolCall:d.toolCall,applyPatch:c.get(m)}}),mcpApprovalRequests:(r.mcpApprovalRequests??[]).map(d=>({requestItem:new Ie(d.requestItem.rawItem,e),mcpTool:d.mcpTool}))};return{...f,hasToolsOrApprovalsToRun(){return f.handoffs.length>0||f.functions.length>0||f.mcpApprovalRequests.length>0||f.computerActions.length>0||f.shellActions.length>0||f.applyPatchActions.length>0}}}class Cd extends Bc{constructor(t={}){super();R(this,ae);S(this,"config");S(this,"inputGuardrailDefs");S(this,"outputGuardrailDefs");this.config={modelProvider:t.modelProvider??Qc(),model:t.model,modelSettings:t.modelSettings,handoffInputFilter:t.handoffInputFilter,inputGuardrails:t.inputGuardrails,outputGuardrails:t.outputGuardrails,tracingDisabled:t.tracingDisabled??!1,traceIncludeSensitiveData:t.traceIncludeSensitiveData??!0,workflowName:t.workflowName??"Agent workflow",traceId:t.traceId,groupId:t.groupId,traceMetadata:t.traceMetadata,sessionInputCallback:t.sessionInputCallback,callModelInputFilter:t.callModelInputFilter},this.inputGuardrailDefs=(t.inputGuardrails??[]).map(Yi),this.outputGuardrailDefs=(t.outputGuardrails??[]).map(us)}async run(t,r,s={stream:!1,context:void 0}){const i=s??{stream:!1,context:void 0},o=i.sessionInputCallback??this.config.sessionInputCallback,a=i.callModelInputFilter??this.config.callModelInputFilter,c=!!a,l={...i,sessionInputCallback:o,callModelInputFilter:a},f=!!l.conversationId||!!l.previousResponseId,d=l.session,m=r instanceof et;let g=d&&m?[]:void 0,v,x=d&&m?new Map:void 0;const y=(T,A)=>{const D=x;if(A!==void 0){if(!D){v=A.map(Y=>structuredClone(Y));return}const G=[],L=new WeakMap;for(const Y of T){if(!Y||typeof Y!="object")continue;const ue=(L.get(Y)??0)+1;L.set(Y,ue)}const pe=()=>{for(const[Y,ue]of D)if(ue>0)return D.set(Y,ue-1),!0;return!1};for(let Y=0;Y<A.length;Y++){const ue=A[Y];if(!ue)continue;let Me=!1;const Ge=T[Y];if(Ge&&typeof Ge=="object"){const go=(L.get(Ge)??0)-1;if(L.set(Ge,go),go>0)continue;const yo=Ct(Ge),_o=D.get(yo)??0;if(_o>0){D.set(yo,_o-1),G.push(structuredClone(ue)),Me=!0;continue}}const Yn=Ct(ue),$r=D.get(Yn)??0;if($r>0){D.set(Yn,$r-1),G.push(structuredClone(ue)),Me=!0;continue}!Ge&&pe()&&(G.push(structuredClone(ue)),Me=!0),!Me&&!Ge&&v===void 0&&G.push(structuredClone(ue))}(G.length>0||v===void 0)&&(v=G);return}const F=[];if(D)for(const G of T){if(!G)continue;const L=Ct(G),pe=D.get(L)??0;pe<=0||(D.set(L,pe-1),F.push(structuredClone(G)))}else for(const G of T)G&&F.push(structuredClone(G));F.length>0?v=F:v===void 0&&(v=[])},h=()=>{if(v!==void 0)return v;if(!c)return g};let b=r;if(!(b instanceof et)){if(d&&Array.isArray(b)&&!o)throw new te("RunConfig.sessionInputCallback must be provided when using session history with list inputs.");const T=await gd(b,d,o,{includeHistoryInPreparedInput:!f,preserveDroppedNewItems:f});if(f&&d){const A=T.sessionItems;A&&A.length>0?b=A:b=T.preparedInput}else b=T.preparedInput;if(d){const A=T.sessionItems??[];g=A.map(D=>structuredClone(D)),x=new Map;for(const D of A){const F=Ct(D);x.set(F,(x.get(F)??0)+1)}}}let _;if(d&&!f){let T=!1;_=async()=>{if(T)return;const A=h();!A||A.length===0||(T=!0,await md(d,A))}}const N=async()=>{if(l.stream)return await U(this,ae,So).call(this,t,b,l,_,y);const T=await U(this,ae,bo).call(this,t,b,l,y);return d&&!f&&await hd(d,h(),T),T};return b instanceof et&&b._trace?Md(b._trace,async()=>(b._currentAgentSpan&&Ss(b._currentAgentSpan),N())):jd(async()=>N(),{traceId:this.config.traceId,name:this.config.workflowName,groupId:this.config.groupId,metadata:this.config.traceMetadata})}}ae=new WeakSet,$s=function(t){return this.inputGuardrailDefs.concat(t._currentAgent.inputGuardrails.map(Yi))},Fs=function(t){const r=U(this,ae,$s).call(this,t),s=[],i=[];for(const o of r)o.runInParallel===!1?s.push(o):i.push(o);return{blocking:s,parallel:i}},wo=async function(t){const r=t.model!==void 0&&t.model!==Xe.DEFAULT_MODEL_PLACEHOLDER||this.config.model!==void 0&&this.config.model!==Xe.DEFAULT_MODEL_PLACEHOLDER;let s=Od(t.model,this.config.model);return typeof s=="string"&&(s=await this.config.modelProvider.getModel(s)),{model:s,explictlyModelSet:r}},bo=async function(t,r,s,i){return xs(async()=>{var f,d,m;const o=r instanceof et,a=o?r:new et(s.context instanceof Gt?s.context:new Gt(s.context),r,t,s.maxTurns??Ua),c=s.conversationId||s.previousResponseId?new qa({conversationId:s.conversationId,previousResponseId:s.previousResponseId}):void 0;c&&o&&c.primeFromState({originalInput:a._originalInput,generatedItems:a._generatedItems,modelResponses:a._modelResponses});let l=!1;try{for(;;){if(a._currentStep=a._currentStep??{type:"next_step_run_again"},a._currentStep.type==="next_step_interruption"){if(j.debug("Continuing from interruption"),!a._lastTurnResponse||!a._lastProcessedResponse)throw new te("No model response found in previous state",a);const g=await ha(a._currentAgent,a._originalInput,a._generatedItems,a._lastTurnResponse,a._lastProcessedResponse,this,a);if(a._toolUseTracker.addToolUse(a._currentAgent,a._lastProcessedResponse.toolsUsed),a._originalInput=g.originalInput,a._generatedItems=g.generatedItems,g.nextStep.type==="next_step_interruption")return a._currentStep=g.nextStep,new Is(a);if(g.nextStep.type==="next_step_run_again"){l=!0,a._currentStep=void 0;continue}l=!1,a._currentStep=g.nextStep}if(a._currentStep.type==="next_step_run_again"){const g=await Ba(a),v=o&&l;if(l=!1,v||(a._currentTurn++,a._currentTurnPersistedItemCount=0),a._currentTurn>a._maxTurns)throw(f=a._currentAgentSpan)==null||f.setError({message:"Max turns exceeded",data:{max_turns:a._maxTurns}}),new vi(`Max turns (${a._maxTurns}) exceeded`,a);j.debug(`Running agent ${a._currentAgent.name} (turn ${a._currentTurn})`);let x;if(a._currentTurn===1&&!v){const N=U(this,ae,Fs).call(this,a);N.blocking.length>0&&await U(this,ae,Xn).call(this,a,N.blocking),N.parallel.length>0&&(x=U(this,ae,Xn).call(this,a,N.parallel),x.catch(()=>{}))}const y=c?c.prepareInput(a._originalInput,a._generatedItems):Wt(a._originalInput,a._generatedItems);a._noActiveAgentRun&&(a._currentAgent.emit("agent_start",a._context,a._currentAgent,y),this.emit("agent_start",a._context,a._currentAgent,y));const h=await U(this,ae,Us).call(this,a,s,g,y,c,i);a._lastTurnResponse=await h.model.getResponse({systemInstructions:h.modelInput.instructions,prompt:h.prompt,...h.explictlyModelSet?{overridePromptModel:!0}:{},input:h.modelInput.input,previousResponseId:h.previousResponseId,conversationId:h.conversationId,modelSettings:h.modelSettings,tools:h.serializedTools,toolsExplicitlyProvided:h.toolsExplicitlyProvided,outputType:Ci(a._currentAgent.outputType),handoffs:h.serializedHandoffs,tracing:Za(this.config.tracingDisabled,this.config.traceIncludeSensitiveData),signal:s.signal}),a._modelResponses.push(a._lastTurnResponse),a._context.usage.add(a._lastTurnResponse.usage),a._noActiveAgentRun=!1,c==null||c.trackServerItems(a._lastTurnResponse);const b=fa(a._lastTurnResponse,a._currentAgent,h.tools,h.handoffs);a._lastProcessedResponse=b;const _=await ma(a._currentAgent,a._originalInput,a._generatedItems,a._lastTurnResponse,a._lastProcessedResponse,this,a);a._toolUseTracker.addToolUse(a._currentAgent,a._lastProcessedResponse.toolsUsed),a._originalInput=_.originalInput,a._generatedItems=_.generatedItems,_.nextStep.type==="next_step_run_again"&&(a._currentTurnPersistedItemCount=0),a._currentStep=_.nextStep,x&&await x}if(a._currentStep&&a._currentStep.type==="next_step_final_output")return await U(this,ae,Ls).call(this,a,a._currentStep.output),this.emit("agent_end",a._context,a._currentAgent,a._currentStep.output),a._currentAgent.emit("agent_end",a._context,a._currentStep.output),new Is(a);if(a._currentStep&&a._currentStep.type==="next_step_handoff")a._currentAgent=a._currentStep.newAgent,a._currentAgentSpan&&(a._currentAgentSpan.end(),Tn(),a._currentAgentSpan=void 0),a._noActiveAgentRun=!0,a._currentStep={type:"next_step_run_again"};else{if(a._currentStep&&a._currentStep.type==="next_step_interruption")return new Is(a);j.debug("Running next loop")}}}catch(g){throw a._currentAgentSpan&&a._currentAgentSpan.setError({message:"Error in agent run",data:{error:String(g)}}),g}finally{if(((d=a._currentStep)==null?void 0:d.type)!=="next_step_interruption")try{await qi({runContext:a._context})}catch(g){j.warn(`Failed to dispose computers after run: ${g}`)}a._currentAgentSpan&&(((m=a._currentStep)==null?void 0:m.type)!=="next_step_interruption"&&a._currentAgentSpan.end(),Tn())}})},Io=async function(t,r,s,i,o){var g,v,x,y;const a=!!r.conversationId||!!r.previousResponseId,c=a?new qa({conversationId:r.conversationId,previousResponseId:r.previousResponseId}):void 0;let l=!1,f=!1;const d=async()=>{f||!i||(await i(),f=!0)};c&&s&&c.primeFromState({originalInput:t.state._originalInput,generatedItems:t.state._generatedItems,modelResponses:t.state._modelResponses});let m=!1;try{for(;;){const h=t.state._currentAgent;if(t.state._currentStep=t.state._currentStep??{type:"next_step_run_again"},t.state._currentStep.type==="next_step_interruption"){if(j.debug("Continuing from interruption"),!t.state._lastTurnResponse||!t.state._lastProcessedResponse)throw new te("No model response found in previous state",t.state);const b=await ha(t.state._currentAgent,t.state._originalInput,t.state._generatedItems,t.state._lastTurnResponse,t.state._lastProcessedResponse,this,t.state);if(ba(t,b),t.state._toolUseTracker.addToolUse(t.state._currentAgent,t.state._lastProcessedResponse.toolsUsed),t.state._originalInput=b.originalInput,t.state._generatedItems=b.generatedItems,b.nextStep.type==="next_step_interruption"){t.state._currentStep=b.nextStep;return}if(b.nextStep.type==="next_step_run_again"){m=!0,t.state._currentStep=void 0;continue}m=!1,t.state._currentStep=b.nextStep}if(t.state._currentStep.type==="next_step_run_again"){const b=await Ba(t.state),_=s&&m;if(m=!1,_||(t.state._currentTurn++,t.state._currentTurnPersistedItemCount=0),t.state._currentTurn>t.state._maxTurns)throw(g=t.state._currentAgentSpan)==null||g.setError({message:"Max turns exceeded",data:{max_turns:t.state._maxTurns}}),new vi(`Max turns (${t.state._maxTurns}) exceeded`,t.state);j.debug(`Running agent ${h.name} (turn ${t.state._currentTurn})`);let N,T;if(t.state._currentTurn===1&&!_){const Y=U(this,ae,Fs).call(this,t.state);Y.blocking.length>0&&await U(this,ae,Xn).call(this,t.state,Y.blocking),Y.parallel.length>0&&(T=U(this,ae,Xn).call(this,t.state,Y.parallel).catch(Me=>(N=Me,[])))}const A=c?c.prepareInput(t.input,t.newItems):Wt(t.input,t.newItems);t.state._noActiveAgentRun&&(h.emit("agent_start",t.state._context,h,A),this.emit("agent_start",t.state._context,h,A));let D;const F=await U(this,ae,Us).call(this,t.state,r,b,A,c,o);if(N)throw N;l=!0,await d();for await(const Y of F.model.getStreamedResponse({systemInstructions:F.modelInput.instructions,prompt:F.prompt,...F.explictlyModelSet?{overridePromptModel:!0}:{},input:F.modelInput.input,previousResponseId:F.previousResponseId,conversationId:F.conversationId,modelSettings:F.modelSettings,tools:F.serializedTools,toolsExplicitlyProvided:F.toolsExplicitlyProvided,handoffs:F.serializedHandoffs,outputType:Ci(h.outputType),tracing:Za(this.config.tracingDisabled,this.config.traceIncludeSensitiveData),signal:r.signal})){if(N)throw N;if(Y.type==="response_done"){const ue=ua.parse(Y);D={usage:new Sn(ue.response.usage),output:ue.response.output,responseId:ue.response.id},t.state._context.usage.add(D.usage)}if(t.cancelled)return;t._addItem(new Gl(Y))}if(T&&(await T,N))throw N;if(t.state._noActiveAgentRun=!1,!D)throw new be("Model did not produce a final response!",t.state);t.state._lastTurnResponse=D,c==null||c.trackServerItems(D),t.state._modelResponses.push(t.state._lastTurnResponse);const G=fa(t.state._lastTurnResponse,h,F.tools,F.handoffs);t.state._lastProcessedResponse=G;const L=new Set(G.newItems);L.size>0&&cd(t,G.newItems);const pe=await ma(h,t.state._originalInput,t.state._generatedItems,t.state._lastTurnResponse,t.state._lastProcessedResponse,this,t.state);ba(t,pe,{skipItems:L}),t.state._toolUseTracker.addToolUse(h,G.toolsUsed),t.state._originalInput=pe.originalInput,t.state._generatedItems=pe.generatedItems,pe.nextStep.type==="next_step_run_again"&&(t.state._currentTurnPersistedItemCount=0),t.state._currentStep=pe.nextStep}if(t.state._currentStep.type==="next_step_final_output"){await U(this,ae,Ls).call(this,t.state,t.state._currentStep.output),await d(),a||await Ta(r.session,t),this.emit("agent_end",t.state._context,h,t.state._currentStep.output),h.emit("agent_end",t.state._context,t.state._currentStep.output);return}else if(t.state._currentStep.type==="next_step_interruption"){await d(),a||await Ta(r.session,t);return}else t.state._currentStep.type==="next_step_handoff"?(t.state._currentAgent=(v=t.state._currentStep)==null?void 0:v.newAgent,t.state._currentAgentSpan&&(t.state._currentAgentSpan.end(),Tn()),t.state._currentAgentSpan=void 0,t._addItem(new Wl(t.state._currentAgent)),t.state._noActiveAgentRun=!0,t.state._currentStep={type:"next_step_run_again"}):j.debug("Running next loop")}}catch(h){throw l&&!f&&await d(),t.state._currentAgentSpan&&t.state._currentAgentSpan.setError({message:"Error in agent run",data:{error:String(h)}}),h}finally{if(((x=t.state._currentStep)==null?void 0:x.type)!=="next_step_interruption")try{await qi({runContext:t.state._context})}catch(h){j.warn(`Failed to dispose computers after run: ${h}`)}t.state._currentAgentSpan&&(((y=t.state._currentStep)==null?void 0:y.type)!=="next_step_interruption"&&t.state._currentAgentSpan.end(),Tn())}},So=async function(t,r,s,i,o){return s=s??{},xs(async()=>{const a=r instanceof et,c=a?r:new et(s.context instanceof Gt?s.context:new Gt(s.context),r,t,s.maxTurns??Ua),l=new Ga({signal:s.signal,state:c});l.maxTurns=s.maxTurns??c._maxTurns;const f=U(this,ae,Io).call(this,l,s,a,i,o).then(()=>{l._done()},d=>{l._raiseError(d)});return l._setStreamLoopPromise(f),l})},Xn=async function(t,r){const s=r??U(this,ae,$s).call(this,t);if(s.length>0){const i={agent:t._currentAgent,input:t._originalInput,context:t._context};try{const o=await Promise.all(s.map(async a=>la(async c=>{const l=await a.run(i);return c.spanData.triggered=l.output.tripwireTriggered,l},{data:{name:a.name}},t._currentAgentSpan)));t._inputGuardrailResults.push(...o);for(const a of o)if(a.output.tripwireTriggered)throw t._currentAgentSpan&&t._currentAgentSpan.setError({message:"Guardrail tripwire triggered",data:{guardrail:a.guardrail.name}}),new bi(`Input guardrail triggered: ${JSON.stringify(a.output.outputInfo)}`,a,t);return o}catch(o){throw o instanceof bi?o:(t._currentTurn--,new wi(`Input guardrail failed to complete: ${o}`,o,t))}}return[]},Ls=async function(t,r){const s=this.outputGuardrailDefs.concat(t._currentAgent.outputGuardrails.map(us));if(s.length>0){const i=t._currentAgent.processFinalOutput(r),o=Wt([],t._generatedItems),a={agent:t._currentAgent,agentOutput:i,context:t._context,details:{modelResponse:t._lastTurnResponse,output:o}};try{const c=await Promise.all(s.map(async l=>la(async f=>{const d=await l.run(a);return f.spanData.triggered=d.output.tripwireTriggered,d},{data:{name:l.name}},t._currentAgentSpan)));for(const l of c)if(l.output.tripwireTriggered)throw t._currentAgentSpan&&t._currentAgentSpan.setError({message:"Guardrail tripwire triggered",data:{guardrail:l.guardrail.name}}),new hr(`Output guardrail triggered: ${JSON.stringify(l.output.outputInfo)}`,l,t)}catch(c){throw c instanceof hr?c:new wi(`Output guardrail failed to complete: ${c}`,c,t)}}},Us=async function(t,r,s,i,o,a){const{model:c,explictlyModelSet:l}=await U(this,ae,wo).call(this,t._currentAgent);let f={...this.config.modelSettings,...t._currentAgent.modelSettings};f=Rd(l,t._currentAgent.modelSettings,c,f),f=Ql(t._currentAgent,t._toolUseTracker,f);const d=await t._currentAgent.getSystemPrompt(t._context),m=await t._currentAgent.getPrompt(t._context),{modelInput:g,sourceItems:v,persistedItems:x,filterApplied:y}=await Ed(t._currentAgent,r.callModelInputFilter,t._context,i,d);o==null||o.markInputAsSent(v),a==null||a(v,y?x:void 0);const h=(o==null?void 0:o.previousResponseId)??r.previousResponseId,b=(o==null?void 0:o.conversationId)??r.conversationId;return{...s,model:c,explictlyModelSet:l,modelSettings:f,modelInput:g,prompt:m,previousResponseId:h,conversationId:b}};function Wt(n,e){const t=e.filter(r=>r.type!=="tool_approval_item").map(r=>r.rawItem);return[...bs(n),...t]}const Ua=10;function Od(n,e){return typeof n=="string"&&n!==Xe.DEFAULT_MODEL_PLACEHOLDER||n?n:e??n??Xe.DEFAULT_MODEL_PLACEHOLDER}function Za(n,e){return n?!1:e?!0:"enabled_without_data"}async function Ed(n,e,t,r,s){const i=(g,v)=>g.map(x=>{const y=structuredClone(x);return v&&y&&typeof y=="object"&&v.set(y,x),y}),o=new WeakMap,a=Nd(r),c=[];for(const g of r)g&&typeof g=="object"&&c.push(g);const l=g=>{if(!g||typeof g!="object")return;const v=c.findIndex(x=>x===g);v!==-1&&c.splice(v,1)},f=()=>{const g=c.shift();return g&&Ja(a,g),g},m={input:i(r,o),instructions:s};if(!e)return{modelInput:m,sourceItems:[...r],persistedItems:[],filterApplied:!1};try{const g=await e({modelData:m,agent:n,context:t.context});if(!g||!Array.isArray(g.input))throw new te("callModelInputFilter must return a ModelInputData object with an input array.");const v=g.input.map(y=>{if(!y||typeof y!="object")return;const h=o.get(y);if(h)return l(h),Ja(a,h),h;const b=Ct(y),_=Pd(a,b);if(_)return l(_),_;const N=f();if(N)return N}),x=i(g.input);return{modelInput:{input:x,instructions:typeof g.instructions>"u"?s:g.instructions},sourceItems:v,persistedItems:x.map(y=>structuredClone(y)),filterApplied:!0}}catch(g){throw tt({message:"Error in callModelInputFilter",data:{error:String(g)}}),g}}class qa{constructor({conversationId:e,previousResponseId:t}){S(this,"conversationId");S(this,"previousResponseId");S(this,"sentInitialInput",!1);S(this,"sentItems",new WeakSet);S(this,"serverItems",new WeakSet);S(this,"remainingInitialInput",null);this.conversationId=e??void 0,this.previousResponseId=t??void 0}primeFromState({originalInput:e,generatedItems:t,modelResponses:r}){if(this.sentInitialInput)return;for(const i of bs(e))i&&typeof i=="object"&&this.sentItems.add(i);this.sentInitialInput=!0,this.remainingInitialInput=null;const s=r[r.length-1];for(const i of r)for(const o of i.output)o&&typeof o=="object"&&this.serverItems.add(o);!this.conversationId&&(s!=null&&s.responseId)&&(this.previousResponseId=s.responseId);for(const i of t){const o=i.rawItem;!o||typeof o!="object"||this.serverItems.has(o)&&this.sentItems.add(o)}}trackServerItems(e){if(e){for(const t of e.output)t&&typeof t=="object"&&this.serverItems.add(t);!this.conversationId&&e.responseId&&(this.previousResponseId=e.responseId)}}prepareInput(e,t){const r=[];if(this.sentInitialInput)this.remainingInitialInput&&this.remainingInitialInput.length>0&&r.push(...this.remainingInitialInput);else{const s=bs(e);r.push(...s),this.remainingInitialInput=s.filter(i=>!!i&&typeof i=="object"),this.sentInitialInput=!0}for(const s of t){if(s.type==="tool_approval_item")continue;const i=s.rawItem;!i||typeof i!="object"||this.sentItems.has(i)||this.serverItems.has(i)||r.push(i)}return r}markInputAsSent(e){if(!e.length)return;const t=new Set;for(const r of e)!r||typeof r!="object"||t.has(r)||(t.add(r),this.sentItems.add(r));!this.remainingInitialInput||this.remainingInitialInput.length===0||(this.remainingInitialInput=this.remainingInitialInput.filter(r=>!t.has(r)),this.remainingInitialInput.length===0&&(this.remainingInitialInput=null))}}function Rd(n,e,t,r){var s,i,o,a,c,l,f,d;if(zi()&&n&&(typeof t!="string"||!Ir(t))&&((s=e.providerData)!=null&&s.reasoning||(o=(i=e.providerData)==null?void 0:i.text)!=null&&o.verbosity||(a=e.providerData)!=null&&a.reasoning_effort)){const m={...r};return(c=m.providerData)==null||delete c.reasoning,(f=(l=m.providerData)==null?void 0:l.text)==null||delete f.verbosity,(d=m.providerData)==null||delete d.reasoning_effort,m.reasoning&&(delete m.reasoning.effort,delete m.reasoning.summary),m.text&&delete m.text.verbosity,m}return r}async function Ba(n){const e=await n._currentAgent.getEnabledHandoffs(n._context),t=await n._currentAgent.getAllTools(n._context),r=t.filter(s=>s.type==="computer");if(r.length>0&&await Promise.all(r.map(async s=>{await Zi({tool:s,runContext:n._context})})),n._currentAgentSpan)n._currentAgentSpan.spanData.tools=t.map(s=>s.name);else{const s=e.map(i=>i.agentName);n._currentAgentSpan=Ll({data:{name:n._currentAgent.name,handoffs:s,tools:t.map(i=>i.name),output_type:n._currentAgent.outputSchemaName}}),n._currentAgentSpan.start(),Ss(n._currentAgentSpan)}return{handoffs:e,tools:t,serializedHandoffs:e.map(s=>Fl(s)),serializedTools:t.map(s=>$l(s)),toolsExplicitlyProvided:n._currentAgent.hasExplicitToolConfig()}}function Ct(n){return JSON.stringify(n,Dd)}function Nd(n){const e=new Map;for(const t of n){const r=Ct(t),s=e.get(r);s?s.push(t):e.set(r,[t])}return e}function Pd(n,e){const t=n.get(e);if(!t||t.length===0)return;const[r]=t;return t.shift(),t.length===0&&n.delete(e),r}function Ja(n,e){const t=Ct(e),r=n.get(t);if(!r||r.length===0)return;const s=r.findIndex(i=>i===e);s!==-1&&(r.splice(s,1),r.length===0&&n.delete(t))}function Dd(n,e){if(e instanceof ArrayBuffer)return{__type:"ArrayBuffer",data:Ee(new Uint8Array(e))};if(_n(e)){const t=e;return{__type:t.constructor.name,data:Ee(new Uint8Array(t.buffer,t.byteOffset,t.byteLength))}}if(ts(e)){const t=e;return{__type:"Buffer",data:Ee(new Uint8Array(t.buffer,t.byteOffset,t.byteLength))}}return _r(e)?{__type:"Buffer",data:Ee(Uint8Array.from(e.data))}:e}function bs(n){return typeof n=="string"?[{type:"message",role:"user",content:n}]:[...n]}class za{constructor(e){S(this,"state");this.state=e}get history(){return Wt(this.input,this.newItems)}get output(){return Wt([],this.newItems)}get input(){return this.state._originalInput}get newItems(){return this.state._generatedItems}get rawResponses(){return this.state._modelResponses}get lastResponseId(){const e=this.rawResponses;return e&&e.length>0?e[e.length-1].responseId:void 0}get lastAgent(){return this.state._currentAgent}get inputGuardrailResults(){return this.state._inputGuardrailResults}get outputGuardrailResults(){return this.state._outputGuardrailResults}get interruptions(){var e;return((e=this.state._currentStep)==null?void 0:e.type)==="next_step_interruption"?this.state._currentStep.data.interruptions:[]}get finalOutput(){var e;if(((e=this.state._currentStep)==null?void 0:e.type)==="next_step_final_output")return this.state._currentAgent.processFinalOutput(this.state._currentStep.output);j.warn("Accessed finalOutput before agent run is completed.")}}class Is extends za{constructor(e){super(e)}}class Ga extends za{constructor(t={}){super(t.state);S(this,"currentTurn",0);S(this,"maxTurns");R(this,On,null);R(this,dt);R(this,ke);R(this,nt);R(this,en);R(this,tn);R(this,En);R(this,Rt,!1);R(this,Rn);if(k(this,dt,t.signal),k(this,nt,new $c({start:r=>{k(this,ke,r)},cancel:()=>{k(this,Rt,!0)}})),k(this,en,new Promise((r,s)=>{k(this,tn,r),k(this,En,s)})),u(this,dt)){const r=()=>{var i,o;if(u(this,Rt))return;k(this,Rt,!0);const s=u(this,ke);if(k(this,ke,void 0),u(this,nt).locked){if(s)try{s.close()}catch(a){j.debug(`Failed to close readable stream on abort: ${a}`)}}else u(this,nt).cancel((i=u(this,dt))==null?void 0:i.reason).catch(a=>{j.debug(`Failed to cancel readable stream on abort: ${a}`)});(o=u(this,tn))==null||o.call(this)};u(this,dt).aborted?r():u(this,dt).addEventListener("abort",r,{once:!0})}}get currentAgent(){return this.lastAgent}_addItem(t){var r;this.cancelled||(r=u(this,ke))==null||r.enqueue(t)}_done(){var t;!this.cancelled&&u(this,ke)&&(u(this,ke).close(),k(this,ke,void 0),(t=u(this,tn))==null||t.call(this))}_raiseError(t){var r;!this.cancelled&&u(this,ke)&&(u(this,ke).error(t),k(this,ke,void 0)),k(this,On,t),(r=u(this,En))==null||r.call(this,t),u(this,en).catch(s=>{j.debug(`Resulted in an error: ${s}`)})}get cancelled(){return u(this,Rt)}toStream(){return u(this,nt)}get completed(){return u(this,en)}get error(){return u(this,On)}toTextStream(t={}){const r=u(this,nt).pipeThrough(new Fc({transform(s,i){if(s.type==="raw_model_stream_event"&&s.data.type==="output_text_delta"){const o=oa.parse(s.data);i.enqueue(o.delta)}}}));return t.compatibleWithNodeStreams?jc.fromWeb(r):r}[Symbol.asyncIterator](){return u(this,nt)[Symbol.asyncIterator]()}_setStreamLoopPromise(t){k(this,Rn,t)}_getStreamLoopPromise(){return u(this,Rn)}}On=new WeakMap,dt=new WeakMap,ke=new WeakMap,nt=new WeakMap,en=new WeakMap,tn=new WeakMap,En=new WeakMap,Rt=new WeakMap,Rn=new WeakMap;let Va;function Be(){return Va??(Va=new Lc),Va}function Ht(){const n=Be().getStore();return n!=null&&n.trace?n.trace:null}function xn(){const n=Be().getStore();return n!=null&&n.span?n.span:null}function Wa(n){return async()=>{const e=Ht();if(!e)throw new Error("No trace found");await e.start();const t=await n(e);if(t instanceof Ga){const r=t._getStreamLoopPromise();if(r)return r.finally(()=>e.end()),t}return await e.end(),t}}async function Md(n,e,t={}){const r=typeof n=="string"?Je().createTrace({...t,name:n}):n;return Be().run({trace:r},Wa(e))}async function jd(n,e={}){if(Ht())return await n();const r=Je().createTrace(e);return Be().run({trace:r},Wa(n))}function Ss(n){const e=Be().getStore();if(!e)throw new Error("No existing trace found");e.span&&(e.span.previousSpan=e.previousSpan,e.previousSpan=e.span),n.previousSpan=e.span??e.previousSpan,e.span=n,Be().enterWith(e)}function Tn(){var e;const n=Be().getStore();n&&(n.span=n.previousSpan,n.previousSpan=(e=n.previousSpan)==null?void 0:e.previousSpan,Be().enterWith(n))}function tt(n){const e=xn();e&&e.setError(n)}function $d(n){var e,t,r;return{trace:(e=n.trace)==null?void 0:e.clone(),span:(t=n.span)==null?void 0:t.clone(),previousSpan:(r=n.previousSpan)==null?void 0:r.clone()}}function xs(n){const e=Be().getStore();if(!e)throw new Error("No existing trace found");const t=$d(e);return Be().run(t,n)}class Fd{async export(e){if(Di.disabled){j.debug("Tracing is disabled. Skipping export");return}for(const t of e)t.type==="trace"?console.log(`[Exporter] Export trace traceId=${t.traceId} name=${t.name}${t.groupId?` groupId=${t.groupId}`:""}`):console.log(`[Exporter] Export span: ${JSON.stringify(t)}`)}}class Ld{constructor(e,{maxQueueSize:t=1e3,maxBatchSize:r=100,scheduleDelay:s=5e3,exportTriggerRatio:i=.8}={}){R(this,Se);R(this,Nn);R(this,nn);R(this,Pn);R(this,Dn);R(this,rn);R(this,ve,[]);R(this,rt);R(this,pt,null);R(this,ft,!1);R(this,sn,null);k(this,Nn,t),k(this,nn,r),k(this,Pn,s),k(this,Dn,t*i),k(this,rn,e),k(this,rt,Zc),j.debug("Automatic trace export loop is not supported in this environment. You need to manually call `getGlobalTraceProvider().forceFlush()` to export traces.")}start(){k(this,sn,new AbortController),U(this,Se,qs).call(this)}async onTraceStart(e){await U(this,Se,Zs).call(this,e)}async onTraceEnd(e){}async onSpanStart(e){}async onSpanEnd(e){await U(this,Se,Zs).call(this,e)}async shutdown(e){var t;for(e&&u(this,rt).setTimeout(()=>{var r;(r=u(this,sn))==null||r.abort()},e),j.debug("Shutting down gracefully");u(this,ve).length>0;){if(j.debug(`Waiting for buffer to empty. Items left: ${u(this,ve).length}`),u(this,ft)||await U(this,Se,fn).call(this,!0),(t=u(this,sn))!=null&&t.signal.aborted){j.debug("Timeout reached, force flushing"),await U(this,Se,fn).call(this,!0);break}await new Promise(r=>u(this,rt).setTimeout(r,500))}j.debug("Buffer empty. Exiting"),u(this,rt)&&u(this,pt)&&u(this,rt).clearTimeout(u(this,pt))}async forceFlush(){u(this,ve).length>0&&await U(this,Se,fn).call(this,!0)}}Nn=new WeakMap,nn=new WeakMap,Pn=new WeakMap,Dn=new WeakMap,rn=new WeakMap,ve=new WeakMap,rt=new WeakMap,pt=new WeakMap,ft=new WeakMap,sn=new WeakMap,Se=new WeakSet,Zs=async function(e){if(u(this,ve).length+1>u(this,Nn)){j.error("Dropping trace because buffer is full");return}u(this,ve).push(e),u(this,ve).length>u(this,Dn)&&await U(this,Se,fn).call(this)},qs=function(){k(this,pt,u(this,rt).setTimeout(async()=>{await U(this,Se,fn).call(this),U(this,Se,qs).call(this)},u(this,Pn))),typeof u(this,pt).unref=="function"&&u(this,pt).unref()},fn=async function(e=!1){if(u(this,ve).length!==0){if(j.debug(`Exporting batches. Force: ${e}. Buffer size: ${u(this,ve).length}`),e||u(this,ve).length<u(this,nn)){const t=[...u(this,ve)];k(this,ve,[]),k(this,ft,!0),await u(this,rn).export(t),k(this,ft,!1)}else if(u(this,ve).length>0){const t=u(this,ve).splice(0,u(this,nn));k(this,ft,!0),await u(this,rn).export(t),k(this,ft,!1)}}};class Ud{constructor(){R(this,Ae,[])}start(){for(const e of u(this,Ae))e.start&&e.start()}addTraceProcessor(e){u(this,Ae).push(e)}setProcessors(e){j.debug("Shutting down old processors");for(const t of u(this,Ae))t.shutdown();k(this,Ae,e)}async onTraceStart(e){for(const t of u(this,Ae))await t.onTraceStart(e)}async onTraceEnd(e){for(const t of u(this,Ae))await t.onTraceEnd(e)}async onSpanStart(e){for(const t of u(this,Ae))await t.onSpanStart(e)}async onSpanEnd(e){for(const t of u(this,Ae))await t.onSpanEnd(e)}async shutdown(e){for(const t of u(this,Ae))await t.shutdown(e)}async forceFlush(){for(const e of u(this,Ae))await e.forceFlush()}}Ae=new WeakMap;let Ts=null,ks=null;function Zd(){return Ts||(Ts=new Fd),Ts}function Ha(){return ks||(ks=new Ld(Zd())),ks}function Ka(){return new Date().toISOString()}function Ya(){return`trace_${Ji().replace(/-/g,"")}`}function qd(){return`span_${Ji().replace(/-/g,"").slice(0,24)}`}function Bd(n){return Object.fromEntries(Object.entries(n).filter(([e])=>!e.startsWith("_")))}const Ns=class Ns{constructor(e,t){S(this,"type","trace.span");R(this,Mn);R(this,jn);R(this,$n);R(this,Fn);R(this,Nt);R(this,ht);R(this,mt);R(this,Pt);R(this,Ln);k(this,jn,e.traceId),k(this,$n,e.spanId??qd()),k(this,Mn,e.data),k(this,Nt,t),k(this,Fn,e.parentId??null),k(this,Pt,e.error??null),k(this,ht,e.startedAt??null),k(this,mt,e.endedAt??null)}get traceId(){return u(this,jn)}get spanData(){return u(this,Mn)}get spanId(){return u(this,$n)}get parentId(){return u(this,Fn)}get previousSpan(){return u(this,Ln)}set previousSpan(e){k(this,Ln,e)}start(){if(u(this,ht)){j.warn("Span already started");return}k(this,ht,Ka()),u(this,Nt).onSpanStart(this)}end(){if(u(this,mt)){j.debug("Span already finished",this.spanData);return}k(this,mt,Ka()),u(this,Nt).onSpanEnd(this)}setError(e){k(this,Pt,e)}get error(){return u(this,Pt)}get startedAt(){return u(this,ht)}get endedAt(){return u(this,mt)}clone(){var t;const e=new Ns({traceId:this.traceId,spanId:this.spanId,parentId:this.parentId??void 0,data:this.spanData,startedAt:u(this,ht)??void 0,endedAt:u(this,mt)??void 0,error:u(this,Pt)??void 0},u(this,Nt));return e.previousSpan=(t=this.previousSpan)==null?void 0:t.clone(),e}toJSON(){return{object:this.type,id:this.spanId,trace_id:this.traceId,parent_id:this.parentId,started_at:this.startedAt,ended_at:this.endedAt,span_data:Bd(this.spanData),error:this.error}}};Mn=new WeakMap,jn=new WeakMap,$n=new WeakMap,Fn=new WeakMap,Nt=new WeakMap,ht=new WeakMap,mt=new WeakMap,Pt=new WeakMap,Ln=new WeakMap;let kn=Ns;class lt extends kn{constructor(e,t){super({traceId:"no-op",spanId:"no-op",data:e},t)}start(){}end(){}setError(){}toJSON(){return null}}const Ps=class Ps{constructor(e,t){S(this,"type","trace");S(this,"traceId");S(this,"name");S(this,"groupId",null);S(this,"metadata");R(this,an);R(this,st);this.traceId=e.traceId??Ya(),this.name=e.name??"Agent workflow",this.groupId=e.groupId??null,this.metadata=e.metadata??{},k(this,an,t??Ha()),k(this,st,e.started??!1)}async start(){u(this,st)||(k(this,st,!0),await u(this,an).onTraceStart(this))}async end(){u(this,st)&&(k(this,st,!1),await u(this,an).onTraceEnd(this))}clone(){return new Ps({traceId:this.traceId,name:this.name,groupId:this.groupId??void 0,metadata:this.metadata,started:u(this,st)})}toJSON(){return{object:this.type,id:this.traceId,workflow_name:this.name,group_id:this.groupId,metadata:this.metadata}}};an=new WeakMap,st=new WeakMap;let An=Ps;class As extends An{constructor(){super({})}async start(){}async end(){}toJSON(){return null}}class Jd{constructor(){R(this,jr);R(this,ye);R(this,Dt);k(this,ye,new Ud),k(this,Dt,Di.disabled),U(this,jr,xo).call(this)}registerProcessor(e){u(this,ye).addTraceProcessor(e)}setProcessors(e){u(this,ye).setProcessors(e)}getCurrentTrace(){return Ht()}getCurrentSpan(){return xn()}setDisabled(e){k(this,Dt,e)}startExportLoop(){u(this,ye).start()}createTrace(e){if(u(this,Dt))return j.debug("Tracing is disabled, Not creating trace %o",e),new As;const t=e.traceId??Ya(),r=e.name??"Agent workflow";return j.debug("Creating trace %s with name %s",t,r),new An({...e,name:r,traceId:t},u(this,ye))}createSpan(e,t){if(u(this,Dt)||e.disabled)return j.debug("Tracing is disabled, Not creating span %o",e),new lt(e.data,u(this,ye));let r,s;if(t){if(t instanceof An){if(t instanceof As)return j.debug("Parent trace is no-op, returning NoopSpan"),new lt(e.data,u(this,ye));s=t.traceId}else if(t instanceof kn){if(t instanceof lt)return j.debug("Parent span is no-op, returning NoopSpan"),new lt(e.data,u(this,ye));r=t.spanId,s=t.traceId}}else{const i=Ht(),o=xn();if(!i)return j.error("No active trace. Make sure to start a trace with `withTrace()` first. Returning NoopSpan."),new lt(e.data,u(this,ye));if(o instanceof lt||i instanceof As)return j.debug(`Parent ${o} or ${i} is no-op, returning NoopSpan`),new lt(e.data,u(this,ye));s=i.traceId,o?(j.debug("Using parent span %s",o.spanId),r=o.spanId):j.debug("No parent span, using current trace %s",i.traceId)}return s?(j.debug(`Creating span ${JSON.stringify(e.data)} with id ${e.spanId??s}`),new kn({...e,traceId:s,parentId:r},u(this,ye))):(j.error("No traceId found. Make sure to start a trace with `withTrace()` first. Returning NoopSpan."),new lt(e.data,u(this,ye)))}async shutdown(e){try{j.debug("Shutting down tracing provider"),await u(this,ye).shutdown(e)}catch(t){j.error("Error shutting down tracing provider %o",t)}}async forceFlush(){await u(this,ye).forceFlush()}}ye=new WeakMap,Dt=new WeakMap,jr=new WeakSet,xo=function(){if(typeof process<"u"&&typeof process.on=="function"){const e=async()=>{const t=setTimeout(()=>{console.warn("Cleanup timeout, forcing exit"),process.exit(1)},5e3);try{await this.shutdown()}finally{clearTimeout(t)}};process.on("beforeExit",e),process.on("SIGINT",async()=>{await e(),Xa("SIGINT")||process.exit(130)}),process.on("SIGTERM",async()=>{await e(),Xa("SIGTERM")||process.exit(0)}),process.on("unhandledRejection",async(t,r)=>{j.error("Unhandled rejection",t,r),await e(),zd("unhandledRejection")||process.exit(1)})}};function Xa(n){return process.listeners(n).length>1}function zd(n){return process.listeners(n).length>1}let Cs;function Je(){return Cs||(Cs=new Jd),Cs}function Gd(n){Je().registerProcessor(n)}Gd(Ha());function Qa(n){const e=atob(n),t=e.length,r=new Uint8Array(t);for(let s=0;s<t;s++)r[s]=e.charCodeAt(s);return r.buffer}function eo(n){const e=String.fromCharCode(...new Uint8Array(n));return btoa(e)}function to(n){if(typeof n>"u"||n===null||typeof n!="object"||!("type"in n)||typeof n.type!="string"||!n.type||n.type!=="message"||!("content"in n)||!Array.isArray(n.content)||n.content.length<1)return;const e=n.content[n.content.length-1];if(!(!("type"in e)||typeof e.type!="string")){if(e.type==="output_text")return typeof e.text=="string"?e.text:void 0;if(e.type==="output_audio")return typeof e.transcript=="string"?e.transcript:void 0}}function Vd(n,e){const t=n.filter(i=>!e.some(o=>o.itemId===i.itemId)),r=e.filter(i=>!n.some(o=>o.itemId===i.itemId)),s=e.filter(i=>n.some(o=>o.itemId===i.itemId&&JSON.stringify(o)!==JSON.stringify(i)));return{removals:t,additions:r,updates:s}}function Wd(){return typeof window>"u"?!1:typeof window.RTCPeerConnection<"u"}function no(n){return n.role==="system"?n:n.role==="assistant"?{...n,content:n.content.map(e=>e.type==="output_audio"?{...e,audio:null}:e)}:n.role==="user"?{...n,content:n.content.map(e=>e.type==="input_audio"?{...e,audio:null}:e)}:n}function Hd(n,e){if(n.role!=="assistant"||e.role!=="assistant")return e;const t=e.content.map((r,s)=>{if(r.type!=="output_audio"||!(typeof r.transcript!="string"||r.transcript.length===0))return r;const o=n.content[s];return o&&o.type==="output_audio"&&typeof o.transcript=="string"&&o.transcript.length>0?{...r,transcript:o.transcript}:r});return{...e,content:t}}function ro(n,e,t){if(e.type==="conversation.item.input_audio_transcription.completed")return n.map(i=>{if(i.itemId===e.item_id&&i.type==="message"&&"role"in i&&i.role==="user"){const o=i.content.map(a=>a.type==="input_audio"?{...a,transcript:e.transcript}:a);return{...i,content:o,status:"completed"}}return i});const r=!t&&e.type==="message"?no(e):e,s=n.findIndex(i=>i.itemId===e.itemId);if(s!==-1){const i=n[s],o=r.type==="message"&&i.type==="message"?Hd(i,r):r;return n.map((a,c)=>c===s?o:!t&&a.type==="message"?no(a):a)}else if(e.previousItemId){const i=n.findIndex(o=>o.itemId===e.previousItemId);return i!==-1?[...n.slice(0,i+1),r,...n.slice(i+1)]:[...n,r]}else return[...n,r]}const so={"User-Agent":`Agents/JavaScript ${ee.version}`,"X-OpenAI-Agents-SDK":`openai-agents-sdk.${ee.version}`},Kd=`openai-agents-sdk.${ee.version}`;function Yd(n,e){const{name:t,arguments:r,...s}=e;return new Ie({type:"hosted_tool_call",name:t,arguments:JSON.stringify(r),status:"in_progress",providerData:{...s}},n)}function io(n){if(n.rawItem.type!=="function_call"&&n.rawItem.type!=="hosted_tool_call")throw new Error("Invalid approval item type for Realtime MCP approval request");const{name:e,arguments:t,providerData:r}=n.rawItem,{itemId:s,serverLabel:i,...o}=r??{};if(!s||!i)throw new Error("Invalid approval item for Realtime MCP approval request");return{type:"mcp_approval_request",itemId:s,serverLabel:i,...o,name:e,arguments:t?JSON.parse(t):{},approved:null}}class Xd extends Xe{constructor(t){super(t);S(this,"voice");this.voice=t.voice}}function Qd(n){return{debounceTextLength:n.debounceTextLength??100}}function ep({policyHint:n,...e}){const t=us(e),r=n??t.name;return{...t,policyHint:r,run:async s=>{const i=await t.run(s);return{...i,guardrail:{...i.guardrail,policyHint:r}}}}}function tp(n){return`
 Your last answer was blocked. 
Failed Guardrail Reason: ${n.guardrail.policyHint}. 
Failure Details: ${JSON.stringify(n.output.outputInfo??{})}. 
Please respond again following policy. Apologize for not being able to answer the question (while avoiding the specific reason) and divert discussion back to an approved topic immediately and not invite more discussion.
`.trim()}function Ot(n,e){return n in e&&typeof e[n]<"u"}function np(n){return Ot("modalities",n)||Ot("inputAudioFormat",n)||Ot("outputAudioFormat",n)||Ot("inputAudioTranscription",n)||Ot("turnDetection",n)||Ot("inputAudioNoiseReduction",n)||Ot("speed",n)}function rp(n){var e,t,r,s,i,o,a,c;if(!np(n)){const l=(e=n.audio)!=null&&e.input?{format:Dr(n.audio.input.format),noiseReduction:n.audio.input.noiseReduction??null,transcription:n.audio.input.transcription,turnDetection:n.audio.input.turnDetection}:void 0,f=((r=(t=n.audio)==null?void 0:t.output)==null?void 0:r.voice)??n.voice,d=(s=n.audio)!=null&&s.output||typeof f<"u"?{format:Dr((o=(i=n.audio)==null?void 0:i.output)==null?void 0:o.format),voice:f,speed:(c=(a=n.audio)==null?void 0:a.output)==null?void 0:c.speed}:void 0;return{model:n.model,instructions:n.instructions,toolChoice:n.toolChoice,tools:n.tools,tracing:n.tracing,providerData:n.providerData,prompt:n.prompt,outputModalities:n.outputModalities,audio:l||d?{input:l,output:d}:void 0}}return{model:n.model,instructions:n.instructions,toolChoice:n.toolChoice,tools:n.tools,tracing:n.tracing,providerData:n.providerData,prompt:n.prompt,outputModalities:n.modalities,audio:{input:{format:Dr(n.inputAudioFormat),noiseReduction:n.inputAudioNoiseReduction??null,transcription:n.inputAudioTranscription,turnDetection:n.turnDetection},output:{format:Dr(n.outputAudioFormat),voice:n.voice,speed:n.speed}}}}function Dr(n){if(!n)return;if(typeof n=="object")return n;const e=String(n);return e==="pcm16"?{type:"audio/pcm",rate:24e3}:e==="g711_ulaw"?{type:"audio/pcmu"}:e==="g711_alaw"?{type:"audio/pcma"}:{type:"audio/pcm",rate:24e3}}w({itemId:p()});const ao=_e("role",[w({itemId:p(),previousItemId:p().nullable().optional(),type:I("message"),role:I("system"),content:z(w({type:I("input_text"),text:p()}))}),w({itemId:p(),previousItemId:p().nullable().optional(),type:I("message"),role:I("user"),status:de(["in_progress","completed"]),content:z(w({type:I("input_text"),text:p()}).or(w({type:I("input_audio"),audio:p().nullable().optional(),transcript:p().nullable()})))}),w({itemId:p(),previousItemId:p().nullable().optional(),type:I("message"),role:I("assistant"),status:de(["in_progress","completed","incomplete"]),content:z(w({type:I("output_text"),text:p()}).or(w({type:I("output_audio"),audio:p().nullable().optional(),transcript:p().nullable().optional()})))})]),oo=w({itemId:p(),previousItemId:p().nullable().optional(),type:I("function_call"),status:de(["in_progress","completed","incomplete"]),arguments:p(),name:p(),output:p().nullable()}),uo=w({itemId:p(),previousItemId:p().nullable().optional(),type:de(["mcp_call","mcp_tool_call"]),status:de(["in_progress","completed","incomplete"]),arguments:p(),name:p(),output:p().nullable()}),sp=w({itemId:p(),type:I("mcp_approval_request"),serverLabel:p(),name:p(),arguments:re(p(),W()),approved:It().optional().nullable()}),Re=ji("openai-agents:realtime"),co=w({id:p().optional().nullable(),conversation_id:p().optional().nullable(),max_output_tokens:E().or(I("inf")).optional().nullable(),metadata:re(p(),W()).optional().nullable(),output_modalities:z(p()).optional().nullable(),object:I("realtime.response").optional().nullable(),output:z(W()).optional().nullable(),audio:w({output:w({format:W().optional().nullable(),voice:p().optional().nullable()}).optional().nullable()}).optional().nullable(),status:de(["completed","incomplete","failed","cancelled","in_progress"]).optional().nullable(),status_details:re(p(),W()).optional().nullable(),usage:w({input_tokens:E().optional(),input_token_details:re(p(),W()).optional().nullable(),output_tokens:E().optional(),output_token_details:re(p(),W()).optional().nullable()}).optional().nullable()}),ip=w({id:p().optional(),audio:p().nullable().optional(),text:p().nullable().optional(),transcript:p().nullable().optional(),type:Ke([I("input_text"),I("input_audio"),I("item_reference"),I("output_text"),I("output_audio")])}),Kt=w({id:p().optional(),arguments:p().optional(),call_id:p().optional(),content:z(ip).optional(),name:p().optional(),output:p().nullable().optional(),role:de(["user","assistant","system"]).optional(),status:de(["completed","incomplete","in_progress"]).optional(),type:de(["message","function_call","function_call_output","mcp_list_tools","mcp_tool_call","mcp_call","mcp_approval_request","mcp_approval_response"]).optional(),approval_request_id:p().nullable().optional(),approve:It().nullable().optional(),reason:p().nullable().optional(),server_label:p().optional(),error:W().nullable().optional(),tools:z(w({name:p(),description:p(),input_schema:re(W()).optional()}).passthrough()).optional()}).passthrough(),ap=w({type:I("conversation.created"),event_id:p(),conversation:w({id:p().optional(),object:I("realtime.conversation").optional()})}),op=w({type:I("conversation.item.added"),event_id:p(),item:Kt,previous_item_id:p().nullable().optional()}),up=w({type:I("conversation.item.done"),event_id:p(),item:Kt,previous_item_id:p().nullable().optional()}),cp=w({type:I("conversation.item.deleted"),event_id:p(),item_id:p()}),lp=w({type:I("conversation.item.input_audio_transcription.completed"),event_id:p(),item_id:p(),content_index:E(),transcript:p(),logprobs:z(W()).nullable().optional(),usage:w({type:I("tokens"),total_tokens:E(),input_tokens:E(),input_token_details:w({text_tokens:E(),audio_tokens:E()}),output_tokens:E()}).optional()}),dp=w({type:I("conversation.item.input_audio_transcription.delta"),event_id:p(),item_id:p(),content_index:E().optional(),delta:p().optional(),logprobs:z(W()).nullable().optional()}),pp=w({type:I("conversation.item.input_audio_transcription.failed"),event_id:p(),item_id:p(),content_index:E(),error:w({code:p().optional(),message:p().optional(),param:p().optional(),type:p().optional()})}),fp=w({type:I("conversation.item.retrieved"),event_id:p(),item:Kt}),hp=w({type:I("conversation.item.truncated"),event_id:p(),item_id:p(),audio_end_ms:E(),content_index:E()}),mp=w({type:I("conversation.item.create"),item:Kt,event_id:p().optional(),previous_item_id:p().nullable().optional()}),gp=w({type:I("conversation.item.delete"),item_id:p(),event_id:p().optional()}),yp=w({type:I("conversation.item.retrieve"),item_id:p(),event_id:p().optional()}),_p=w({type:I("conversation.item.truncate"),item_id:p(),audio_end_ms:E(),content_index:E(),event_id:p().optional()}),vp=w({type:I("error"),event_id:p().optional(),error:W().optional()}),wp=w({type:I("input_audio_buffer.cleared"),event_id:p()}),bp=w({type:I("input_audio_buffer.append"),audio:p(),event_id:p().optional()}),Ip=w({type:I("input_audio_buffer.clear"),event_id:p().optional()}),Sp=w({type:I("input_audio_buffer.commit"),event_id:p().optional()}),xp=w({type:I("input_audio_buffer.committed"),event_id:p(),item_id:p(),previous_item_id:p().nullable().optional()}),Tp=w({type:I("input_audio_buffer.speech_started"),event_id:p(),item_id:p(),audio_start_ms:E()}),kp=w({type:I("input_audio_buffer.speech_stopped"),event_id:p(),item_id:p(),audio_end_ms:E()}),Ap=w({type:I("output_audio_buffer.started"),event_id:p()}).passthrough(),Cp=w({type:I("output_audio_buffer.stopped"),event_id:p()}).passthrough(),Op=w({type:I("output_audio_buffer.cleared"),event_id:p()}),Ep=w({type:I("rate_limits.updated"),event_id:p(),rate_limits:z(w({limit:E().optional(),name:de(["requests","tokens"]).optional(),remaining:E().optional(),reset_seconds:E().optional()}))}),Rp=w({type:I("response.output_audio.delta"),event_id:p(),item_id:p(),content_index:E(),delta:p(),output_index:E(),response_id:p()}),Np=w({type:I("response.output_audio.done"),event_id:p(),item_id:p(),content_index:E(),output_index:E(),response_id:p()}),Pp=w({type:I("response.output_audio_transcript.delta"),event_id:p(),item_id:p(),content_index:E(),delta:p(),output_index:E(),response_id:p()}),Dp=w({type:I("response.output_audio_transcript.done"),event_id:p(),item_id:p(),content_index:E(),transcript:p(),output_index:E(),response_id:p()}),Mp=w({type:I("response.content_part.added"),event_id:p(),item_id:p(),content_index:E(),output_index:E(),response_id:p(),part:w({audio:p().optional(),text:p().optional(),transcript:p().optional(),type:de(["text","audio"]).optional()})}),jp=w({type:I("response.content_part.done"),event_id:p(),item_id:p(),content_index:E(),output_index:E(),response_id:p(),part:w({audio:p().optional(),text:p().optional(),transcript:p().optional(),type:de(["text","audio"]).optional()})}),$p=w({type:I("response.created"),event_id:p(),response:co}),lo=w({type:I("response.done"),event_id:p(),response:co}),Fp=w({type:I("response.function_call_arguments.delta"),event_id:p(),item_id:p(),call_id:p(),delta:p(),output_index:E(),response_id:p()}),Lp=w({type:I("response.function_call_arguments.done"),event_id:p(),item_id:p(),call_id:p(),arguments:p(),output_index:E(),response_id:p()}),Up=w({type:I("response.output_item.added"),event_id:p(),item:Kt,output_index:E(),response_id:p()}),Zp=w({type:I("response.output_item.done"),event_id:p(),item:Kt,output_index:E(),response_id:p()}),qp=w({type:I("response.output_text.delta"),event_id:p(),item_id:p(),content_index:E(),delta:p(),output_index:E(),response_id:p()}),Bp=w({type:I("response.output_text.done"),event_id:p(),item_id:p(),content_index:E(),text:p(),output_index:E(),response_id:p()}),Jp=w({type:I("session.created"),event_id:p(),session:W()}),zp=w({type:I("session.updated"),event_id:p(),session:W()}),Gp=w({type:I("response.cancel"),event_id:p().optional(),response_id:p().optional()}),Vp=w({type:I("response.create"),event_id:p().optional(),response:W().optional()}),Wp=w({type:I("session.update"),event_id:p().optional(),session:W()}),Hp=w({type:I("mcp_list_tools.in_progress"),event_id:p().optional(),item_id:p().optional()}),Kp=w({type:I("mcp_list_tools.completed"),event_id:p().optional(),item_id:p().optional()}),Yp=w({type:I("response.mcp_call_arguments.delta"),event_id:p(),response_id:p(),item_id:p(),output_index:E(),delta:p(),obfuscation:p()}),Xp=w({type:I("response.mcp_call_arguments.done"),event_id:p(),response_id:p(),item_id:p(),output_index:E(),arguments:p()}),Qp=w({type:I("response.mcp_call.in_progress"),event_id:p(),output_index:E(),item_id:p()}),ef=w({type:I("response.mcp_call.completed"),event_id:p(),output_index:E(),item_id:p()}),tf=w({type:I("mcp_list_tools.failed"),event_id:p().optional(),item_id:p().optional()}),nf=w({type:p(),event_id:p().optional().nullable()}).passthrough(),rf=_e("type",[ap,op,up,cp,lp,dp,pp,fp,hp,vp,wp,xp,Tp,kp,Ap,Cp,Op,Ep,Rp,Np,Pp,Dp,Mp,jp,$p,lo,Fp,Lp,Up,Zp,qp,Bp,Jp,zp,Hp,Kp,tf,Yp,Xp,Qp,ef]);_e("type",[mp,gp,yp,_p,bp,Ip,Sp,Gp,Vp,Wp]);function Os(n){const e=JSON.parse(n.data.toString()),t=rf.safeParse(e);if(!t.success){const r=nf.safeParse(e);return r.success?{data:r.data,isGeneric:!0}:{data:null,isGeneric:!0}}return{data:t.data,isGeneric:!1}}const po="gpt-realtime",De={outputModalities:["audio"],audio:{input:{format:{type:"audio/pcm",rate:24e3},transcription:{model:"gpt-4o-mini-transcribe"},turnDetection:{type:"semantic_vad"},noiseReduction:null},output:{format:{type:"audio/pcm",rate:24e3},speed:1}}},Ds=class Ds extends as{constructor(t={}){super();R(this,Mt);R(this,Un);R(this,xe,null);R(this,Zn,null);S(this,"eventEmitter",new br);k(this,Mt,t.model??po),k(this,Un,t.apiKey)}get currentModel(){return u(this,Mt)}set currentModel(t){k(this,Mt,t)}_afterAudioDoneEvent(){}get _rawSessionConfig(){return u(this,Zn)??null}async _getApiKey(t){const r=t.apiKey??u(this,Un);return typeof r=="function"?await r():r}_onMessage(t){var i,o,a,c,l,f;const{data:r,isGeneric:s}=Os(t);if(r!==null&&(this.emit("*",r),!s)){if(r.type==="error"?this.emit("error",{type:"error",error:r}):this.emit(r.type,r),r.type==="response.created"){this.emit("turn_started",{type:"response_started",providerData:{...r}});return}if(r.type==="session.updated"&&k(this,Zn,r.session),r.type==="response.done"){const d=lo.safeParse(r);if(!d.success){Re.error("Error parsing response done event",d.error);return}const m=((i=d.data.response.usage)==null?void 0:i.input_tokens)??0,g=((o=d.data.response.usage)==null?void 0:o.output_tokens)??0,v=m+g,x=new Sn({inputTokens:m,inputTokensDetails:((a=d.data.response.usage)==null?void 0:a.input_token_details)??{},outputTokens:g,outputTokensDetails:((c=d.data.response.usage)==null?void 0:c.output_token_details)??{},totalTokens:v});this.emit("usage_update",x),this.emit("turn_done",{type:"response_done",response:{id:d.data.response.id??"",output:d.data.response.output??[],usage:{inputTokens:m,inputTokensDetails:((l=d.data.response.usage)==null?void 0:l.input_token_details)??{},outputTokens:g,outputTokensDetails:((f=d.data.response.usage)==null?void 0:f.output_token_details)??{},totalTokens:v}}});return}if(r.type==="response.output_audio.done"){this.emit("audio_done"),this._afterAudioDoneEvent();return}if(r.type==="conversation.item.deleted"){this.emit("item_deleted",{itemId:r.item_id});return}if(r.type==="conversation.item.input_audio_transcription.completed"||r.type==="conversation.item.truncated"){this.sendEvent({type:"conversation.item.retrieve",item_id:r.item_id});return}if(r.type==="conversation.item.input_audio_transcription.delta"||r.type==="response.output_text.delta"||r.type==="response.output_audio_transcript.delta"||r.type==="response.function_call_arguments.delta"){r.type==="response.output_audio_transcript.delta"&&this.emit("audio_transcript_delta",{type:"transcript_delta",delta:r.delta,itemId:r.item_id,responseId:r.response_id});return}if(r.type==="conversation.item.added"||r.type==="conversation.item.done"||r.type==="conversation.item.retrieved"){if(r.item.type==="mcp_list_tools"&&r.type==="conversation.item.done"){const d=r.item.server_label??"",m=r.item.tools??[];try{this.emit("mcp_tools_listed",{serverLabel:d,tools:m})}catch(g){Re.error("Error emitting mcp_tools_listed",g,r.item)}return}if(r.item.type==="message"){const d=r.type==="conversation.item.added"||r.type==="conversation.item.done"?r.previous_item_id:null,m=ao.parse({itemId:r.item.id,previousItemId:d,type:r.item.type,role:r.item.role,content:r.item.content,status:r.item.status});this.emit("item_update",m);return}if(r.item.type==="mcp_approval_request"&&r.type==="conversation.item.done"){const d=r.item,m=sp.parse({itemId:d.id,type:d.type,serverLabel:d.server_label,name:d.name,arguments:JSON.parse(d.arguments||"{}"),approved:d.approved});this.emit("item_update",m),this.emit("mcp_approval_request",m);return}if(r.item.type==="mcp_tool_call"||r.item.type==="mcp_call"){const d=r.type==="conversation.item.done"?"completed":"in_progress",m=uo.parse({itemId:r.item.id,type:r.item.type,status:d,arguments:r.item.arguments,name:r.item.name,output:r.item.output});this.emit("item_update",m),r.type==="conversation.item.done"&&this.emit("mcp_tool_call_completed",m);return}}if(r.type==="response.mcp_call.in_progress"){const d=r;this.sendEvent({type:"conversation.item.retrieve",item_id:d.item_id});return}if(r.type==="mcp_list_tools.in_progress"){const d=r;d.item_id&&this.sendEvent({type:"conversation.item.retrieve",item_id:d.item_id});return}if(r.type==="response.output_item.done"||r.type==="response.output_item.added"){const d=r.item;if(d.type==="function_call"&&d.status==="completed"){const m=oo.parse({itemId:d.id,type:d.type,status:"in_progress",arguments:d.arguments,name:d.name,output:null});this.emit("item_update",m),this.emit("function_call",{id:d.id,type:"function_call",callId:d.call_id??"",arguments:d.arguments??"",name:d.name??""});return}if(d.type==="mcp_tool_call"||d.type==="mcp_call"){const m=uo.parse({itemId:d.id,type:d.type,status:r.type==="response.output_item.done"?"completed":"in_progress",arguments:d.arguments,name:d.name,output:d.output});this.emit("item_update",m);return}if(d.type==="message"){const m=ao.parse({itemId:r.item.id,type:r.item.type,role:r.item.role,content:r.item.content,status:r.type==="response.output_item.done"?d.status??"completed":d.status??"in_progress"});this.emit("item_update",m);return}}}}_onError(t){this.emit("error",{type:"error",error:t})}_onOpen(){this.emit("connected")}_onClose(){this.emit("disconnected")}sendMessage(t,r,{triggerResponse:s=!0}={}){const i=typeof t=="string"?[{type:"input_text",text:t}]:t.content.map(o=>o.type==="input_image"?{type:"input_image",image_url:o.image,...o.providerData??{}}:o);this.sendEvent({type:"conversation.item.create",item:{type:"message",role:"user",content:i},...r}),s&&this.sendEvent({type:"response.create"})}addImage(t,{triggerResponse:r=!0}={}){this.sendMessage({type:"message",role:"user",content:[{type:"input_image",image:t}]},{},{triggerResponse:r})}_getMergedSessionConfig(t){var i,o,a,c,l,f,d,m,g,v,x,y,h,b,_,N,T,A,D,F,G,L,pe,Y,ue,Me,Ge,Yn;const r=rp(t),s={type:"realtime",instructions:r.instructions,model:r.model??u(this,Mt),output_modalities:r.outputModalities??De.outputModalities,audio:{input:{format:((o=(i=r.audio)==null?void 0:i.input)==null?void 0:o.format)??((c=(a=De.audio)==null?void 0:a.input)==null?void 0:c.format),noise_reduction:((f=(l=r.audio)==null?void 0:l.input)==null?void 0:f.noiseReduction)??((m=(d=De.audio)==null?void 0:d.input)==null?void 0:m.noiseReduction),transcription:((v=(g=r.audio)==null?void 0:g.input)==null?void 0:v.transcription)??((y=(x=De.audio)==null?void 0:x.input)==null?void 0:y.transcription),turn_detection:Ds.buildTurnDetectionConfig((b=(h=r.audio)==null?void 0:h.input)==null?void 0:b.turnDetection)??((N=(_=De.audio)==null?void 0:_.input)==null?void 0:N.turnDetection)},output:{format:((A=(T=r.audio)==null?void 0:T.output)==null?void 0:A.format)??((F=(D=De.audio)==null?void 0:D.output)==null?void 0:F.format),voice:((L=(G=r.audio)==null?void 0:G.output)==null?void 0:L.voice)??((Y=(pe=De.audio)==null?void 0:pe.output)==null?void 0:Y.voice),speed:((Me=(ue=r.audio)==null?void 0:ue.output)==null?void 0:Me.speed)??((Yn=(Ge=De.audio)==null?void 0:Ge.output)==null?void 0:Yn.speed)}},tool_choice:r.toolChoice??De.toolChoice,...r.providerData??{}};return r.prompt&&(s.prompt={id:r.prompt.promptId,version:r.prompt.version,variables:r.prompt.variables}),r.tools&&r.tools.length>0&&(s.tools=r.tools.map($r=>({...$r,strict:void 0}))),s}buildSessionPayload(t){return this._getMergedSessionConfig(t)}static buildTurnDetectionConfig(t){if(typeof t>"u")return;const{type:r,createResponse:s,create_response:i,eagerness:o,interruptResponse:a,interrupt_response:c,prefixPaddingMs:l,prefix_padding_ms:f,silenceDurationMs:d,silence_duration_ms:m,threshold:g,idleTimeoutMs:v,idle_timeout_ms:x,...y}=t,h={type:r,create_response:s||i,eagerness:o,interrupt_response:a||c,prefix_padding_ms:l||f,silence_duration_ms:d||m,idle_timeout_ms:v||x,threshold:g,...y};return Object.keys(h).forEach(b=>{h[b]===void 0&&delete h[b]}),Object.keys(h).length>0?h:void 0}set _tracingConfig(t){k(this,xe,t)}_updateTracingConfig(t){var r,s,i;if(typeof u(this,xe)>"u"&&k(this,xe,null),t==="auto"){this.sendEvent({type:"session.update",session:{type:"realtime",tracing:"auto"}});return}if(u(this,xe)!==null&&typeof u(this,xe)!="string"&&typeof t!="string"){Re.warn("Tracing config is already set, skipping setting it again. This likely happens when you already set a tracing config on session creation.");return}if(t===null){Re.debug("Disabling tracing for this session. It cannot be turned on for this session from this point on."),this.sendEvent({type:"session.update",session:{type:"realtime",tracing:null}});return}if(u(this,xe)===null||typeof u(this,xe)=="string"){this.sendEvent({type:"session.update",session:{type:"realtime",tracing:t}});return}if((t==null?void 0:t.group_id)!==((r=u(this,xe))==null?void 0:r.group_id)||(t==null?void 0:t.metadata)!==((s=u(this,xe))==null?void 0:s.metadata)||(t==null?void 0:t.workflow_name)!==((i=u(this,xe))==null?void 0:i.workflow_name)){Re.warn("Mismatch in tracing config. Ignoring the new tracing config. This likely happens when you already set a tracing config on session creation. Current tracing config: %s, new tracing config: %s",JSON.stringify(u(this,xe)),JSON.stringify(t));return}this.sendEvent({type:"session.update",session:{type:"realtime",tracing:t}})}updateSessionConfig(t){const r=this.buildSessionPayload(t);this.sendEvent({type:"session.update",session:r})}sendFunctionCallOutput(t,r,s=!0){this.sendEvent({type:"conversation.item.create",item:{type:"function_call_output",output:r,call_id:t.callId}});try{const i=oo.parse({itemId:t.id,previousItemId:t.previousItemId,type:"function_call",status:"completed",arguments:t.arguments,name:t.name,output:r});this.emit("item_update",i)}catch(i){Re.error("Error parsing tool call item",i,t)}s&&this.sendEvent({type:"response.create"})}sendAudio(t,{commit:r=!1}={}){this.sendEvent({type:"input_audio_buffer.append",audio:eo(t)}),r&&this.sendEvent({type:"input_audio_buffer.commit"})}resetHistory(t,r){const{removals:s,additions:i,updates:o}=Vd(t,r),a=new Set(s.map(l=>l.itemId));for(const l of o)a.add(l.itemId);if(a.size>0)for(const l of a)this.sendEvent({type:"conversation.item.delete",item_id:l});const c=[...i,...o];for(const l of c)if(l.type==="message"){const f={type:"message",role:l.role,content:l.content,id:l.itemId};l.role!=="system"&&l.status&&(f.status=l.status),this.sendEvent({type:"conversation.item.create",item:f})}else l.type==="function_call"&&Re.warn("Function calls cannot be manually added or updated at the moment. Ignoring.")}sendMcpResponse(t,r){this.sendEvent({type:"conversation.item.create",previous_item_id:t.itemId,item:{type:"mcp_approval_response",approval_request_id:t.itemId,approve:r}})}};Mt=new WeakMap,Un=new WeakMap,xe=new WeakMap,Zn=new WeakMap;let Cn=Ds;class fo extends Cn{constructor(t={}){if(typeof RTCPeerConnection>"u")throw new Error("WebRTC is not supported in this environment");super(t);S(this,"options");R(this,qn);R(this,se,{status:"disconnected",peerConnection:void 0,dataChannel:void 0,callId:void 0});R(this,Bn);R(this,gt,!1);R(this,Jn,!1);this.options=t,k(this,qn,t.baseUrl??"https://api.openai.com/v1/realtime/calls"),k(this,Bn,t.useInsecureApiKey??!1)}get callId(){return u(this,se).callId}get status(){return u(this,se).status}get connectionState(){return u(this,se)}get muted(){return u(this,Jn)}async connect(t){if(u(this,se).status==="connected")return;u(this,se).status==="connecting"&&Re.warn("Realtime connection already in progress. Please await original promise");const r=t.model??this.currentModel;this.currentModel=r;const s=t.url??u(this,qn),i=await this._getApiKey(t),o=typeof i=="string"&&i.startsWith("ek_");if(!u(this,Bn)&&!o)throw new te("Using the WebRTC connection in a browser environment requires an ephemeral client key. If you need to use a regular API key, use the WebSocket transport or set the `useInsecureApiKey` option to true.");return new Promise(async(a,c)=>{var l,f;try{const d={...t.initialSessionConfig||{},model:this.currentModel},m=new URL(s);let g=new RTCPeerConnection;const v=g.createDataChannel("oai-events");let x;const y=A=>{A.onconnectionstatechange=()=>{switch(A.connectionState){case"disconnected":case"failed":case"closed":this.close();break}}};y(g),k(this,se,{status:"connecting",peerConnection:g,dataChannel:v,callId:x}),this.emit("connection_change",u(this,se).status),v.addEventListener("open",()=>{k(this,se,{status:"connected",peerConnection:g,dataChannel:v,callId:x}),this.updateSessionConfig(d),this.emit("connection_change",u(this,se).status),this._onOpen(),a()}),v.addEventListener("error",A=>{this.close(),this._onError(A),c(A)}),v.addEventListener("message",A=>{this._onMessage(A);const{data:D,isGeneric:F}=Os(A);if(!(!D||F)&&(D.type==="response.created"?k(this,gt,!0):D.type==="response.done"&&k(this,gt,!1),D.type==="session.created")){this._tracingConfig=D.session.tracing;const G=typeof d.tracing>"u"?"auto":d.tracing;this._updateTracingConfig(G)}});const h=this.options.audioElement??document.createElement("audio");h.autoplay=!0,g.ontrack=A=>{h.srcObject=A.streams[0]};const b=this.options.mediaStream??await navigator.mediaDevices.getUserMedia({audio:!0});if(g.addTrack(b.getAudioTracks()[0]),this.options.changePeerConnection){const A=g;g=await this.options.changePeerConnection(g),A!==g&&(A.onconnectionstatechange=null),y(g),k(this,se,{...u(this,se),peerConnection:g})}const _=await g.createOffer();if(await g.setLocalDescription(_),!_.sdp)throw new Error("Failed to create offer");const N=await fetch(m,{method:"POST",body:_.sdp,headers:{"Content-Type":"application/sdp",Authorization:`Bearer ${i}`,"X-OpenAI-Agents-SDK":so["X-OpenAI-Agents-SDK"]}});x=(f=(l=N.headers)==null?void 0:l.get("Location"))==null?void 0:f.split("/").pop(),k(this,se,{...u(this,se),callId:x});const T={type:"answer",sdp:await N.text()};await g.setRemoteDescription(T)}catch(d){this.close(),this._onError(d),c(d)}})}sendEvent(t){if(!u(this,se).dataChannel||u(this,se).dataChannel.readyState!=="open")throw new Error("WebRTC data channel is not connected. Make sure you call `connect()` before sending events.");u(this,se).dataChannel.send(JSON.stringify(t))}mute(t){k(this,Jn,t),u(this,se).peerConnection&&u(this,se).peerConnection.getSenders().forEach(s=>{s.track&&(s.track.enabled=!t)})}_afterAudioDoneEvent(){k(this,gt,!1)}close(){if(u(this,se).dataChannel&&u(this,se).dataChannel.close(),u(this,se).peerConnection){const t=u(this,se).peerConnection;t.onconnectionstatechange=null,t.getSenders().forEach(r=>{var s;(s=r.track)==null||s.stop()}),t.close()}u(this,se).status!=="disconnected"&&(k(this,se,{status:"disconnected",peerConnection:void 0,dataChannel:void 0,callId:void 0}),this.emit("connection_change",u(this,se).status),this._onClose())}interrupt(){u(this,gt)&&(this.sendEvent({type:"response.cancel"}),k(this,gt,!1)),this.sendEvent({type:"output_audio_buffer.clear"})}}qn=new WeakMap,se=new WeakMap,Bn=new WeakMap,gt=new WeakMap,Jn=new WeakMap;const sf=globalThis.WebSocket;class Es extends Cn{constructor(t={}){super(t);R(this,Ut);R(this,yt);R(this,jt);R(this,$t);R(this,ge,{status:"disconnected",websocket:void 0});R(this,zn);R(this,it);R(this,Ft);S(this,"_firstAudioTimestamp");S(this,"_audioLengthMs",0);R(this,Lt,!1);R(this,on);R(this,Gn);k(this,jt,t.url),k(this,$t,t.url),k(this,zn,t.useInsecureApiKey??!1),k(this,on,t.createWebSocket),k(this,Gn,t.skipOpenEventListeners??!1)}getCommonRequestHeaders(){return so}get status(){return u(this,ge).status}get connectionState(){return u(this,ge)}get muted(){return null}get currentItemId(){return u(this,it)}_onAudio(t){this.emit("audio",t)}_afterAudioDoneEvent(){U(this,Ut,Bs).call(this)}async connect(t){const r=t.model??this.currentModel;this.currentModel=r,k(this,yt,await this._getApiKey(t));const s=t.callId;let i;t.url?(i=t.url,k(this,$t,t.url)):s?i=`wss://api.openai.com/v1/realtime?call_id=${s}`:u(this,$t)?i=u(this,$t):i=`wss://api.openai.com/v1/realtime?model=${this.currentModel}`,k(this,jt,i);const o={...t.initialSessionConfig||{},model:this.currentModel};await new Promise((a,c)=>{U(this,Ut,To).call(this,a,c,o).catch(c)}),await this.updateSessionConfig(o)}sendEvent(t){if(!u(this,ge).websocket)throw new Error("WebSocket is not connected. Make sure you call `connect()` before sending events.");u(this,ge).websocket.send(JSON.stringify(t))}close(){var t;(t=u(this,ge).websocket)==null||t.close(),k(this,it,void 0),this._firstAudioTimestamp=void 0,this._audioLengthMs=0,k(this,Ft,void 0)}mute(t){throw new Error("Mute is not supported for the WebSocket transport. You have to mute the audio input yourself.")}sendAudio(t,r={}){u(this,ge).status==="connected"&&super.sendAudio(t,r)}_cancelResponse(){u(this,Lt)&&(this.sendEvent({type:"response.cancel"}),k(this,Lt,!1))}_interrupt(t,r=!0){if(t<0)return;r&&this._cancelResponse();const s=this._audioLengthMs??Number.POSITIVE_INFINITY,i=Math.max(0,Math.floor(Math.min(t,s)));this.emit("audio_interrupted"),this.sendEvent({type:"conversation.item.truncate",item_id:u(this,it),content_index:u(this,Ft),audio_end_ms:i})}interrupt(t=!0){if(!u(this,it)||typeof this._firstAudioTimestamp!="number")return;const r=Date.now()-this._firstAudioTimestamp;r>=0&&this._interrupt(r,t),U(this,Ut,Bs).call(this)}}yt=new WeakMap,jt=new WeakMap,$t=new WeakMap,ge=new WeakMap,zn=new WeakMap,it=new WeakMap,Ft=new WeakMap,Lt=new WeakMap,on=new WeakMap,Gn=new WeakMap,Ut=new WeakSet,Bs=function(){k(this,it,void 0),this._firstAudioTimestamp=void 0,this._audioLengthMs=0,k(this,Ft,void 0)},To=async function(t,r,s){if(u(this,ge).websocket){t();return}if(!u(this,yt))throw new te("API key is not set. Please call `connect()` with an API key first.");if(!u(this,yt).startsWith("ek_")&&!u(this,zn))throw new te("Using the WebSocket connection in a browser environment requires an ephemeral client key. If you have to use a regular API key, set the `useInsecureApiKey` option to true.");let i=null;if(u(this,on))i=await u(this,on).call(this,{url:u(this,jt),apiKey:u(this,yt)});else{const a=["realtime","openai-insecure-api-key."+u(this,yt),Kd];i=new sf(u(this,jt),a)}k(this,ge,{status:"connecting",websocket:i}),this.emit("connection_change",u(this,ge).status);const o=()=>{k(this,ge,{status:"connected",websocket:i}),this.emit("connection_change",u(this,ge).status),this._onOpen(),t()};u(this,Gn)===!0?o():i.addEventListener("open",o),i.addEventListener("error",a=>{this._onError(a),k(this,ge,{status:"disconnected",websocket:void 0}),this.emit("connection_change",u(this,ge).status),r(a)}),i.addEventListener("message",a=>{var f,d,m,g,v,x,y;this._onMessage(a);const{data:c,isGeneric:l}=Os(a);if(!(!c||l)){if(c.type==="response.output_audio.delta"){k(this,Ft,c.content_index),k(this,it,c.item_id),this._firstAudioTimestamp===void 0&&(this._firstAudioTimestamp=Date.now(),this._audioLengthMs=0);const h=Qa(c.delta),b=(m=(d=(f=this._rawSessionConfig)==null?void 0:f.audio)==null?void 0:d.output)==null?void 0:m.format;if(b&&typeof b=="object"){const N=b.type;if(N==="audio/pcmu"||N==="audio/pcma")this._audioLengthMs+=h.byteLength/8;else if(N==="audio/pcm"){const T=b.rate??24e3;this._audioLengthMs+=h.byteLength/2/T*1e3}else this._audioLengthMs+=h.byteLength/24/2}else typeof b=="string"?b.startsWith("g711_")?this._audioLengthMs+=h.byteLength/8:this._audioLengthMs+=h.byteLength/24/2:this._audioLengthMs+=h.byteLength/24/2;const _={type:"audio",data:h,responseId:c.response_id};this._onAudio(_)}else if(c.type==="input_audio_buffer.speech_started"){const h=((y=(x=(v=(g=this._rawSessionConfig)==null?void 0:g.audio)==null?void 0:v.input)==null?void 0:x.turn_detection)==null?void 0:y.interrupt_response)??!1;this.interrupt(!h)}else if(c.type==="response.created")k(this,Lt,!0);else if(c.type==="response.done")k(this,Lt,!1);else if(c.type==="session.created"){this._tracingConfig=c.session.tracing;const h=typeof s.tracing>"u"?"auto":s.tracing;this._updateTracingConfig(h)}}}),i.addEventListener("close",()=>{k(this,ge,{status:"disconnected",websocket:void 0}),this.emit("connection_change",u(this,ge).status),this._onClose()})};const ho=Symbol("backgroundResult");function af(n){return{[ho]:!0,content:n}}function mo(n){return typeof n=="object"&&n!==null&&ho in n}function of(n){return n.type==="function"||n.type==="hosted_tool"&&n.name==="hosted_mcp"}function uf(n){if(n.type==="function")return n;if(n.type==="hosted_tool"&&n.name==="hosted_mcp"){const e=n.providerData.server_url&&n.providerData.server_url.length>0?n.providerData.server_url:void 0;return{type:"mcp",server_label:n.providerData.server_label,server_url:e,headers:n.providerData.headers,allowed_tools:n.providerData.allowed_tools,require_approval:n.providerData.require_approval}}throw new te(`Invalid tool type: ${n}`)}function cf(){return JSON.parse(JSON.stringify(De))}const Ms=class Ms extends br{constructor(t,r={}){super();R(this,ie);S(this,"initialAgent");S(this,"options");R(this,H);R(this,q);R(this,un);R(this,B);R(this,cn,[]);R(this,ln);R(this,Vn,{});R(this,oe,[]);R(this,dn);R(this,pn,{});R(this,ze,!1);R(this,Wn,new Map);R(this,Zt,[]);R(this,Hn,cf());R(this,Kn,!0);this.initialAgent=t,this.options=r,typeof r.transport>"u"&&Wd()||r.transport==="webrtc"?k(this,H,new fo):r.transport==="websocket"||typeof r.transport>"u"?k(this,H,new Es):k(this,H,r.transport),k(this,q,t),k(this,B,new Gt({...r.context??{},history:u(this,oe)})),k(this,cn,(r.outputGuardrails??[]).map(ep)),k(this,ln,Qd(r.outputGuardrailSettings??{})),k(this,dn,r.historyStoreAudio??!1),k(this,Kn,r.automaticallyTriggerResponseForMcpToolCalls??!0)}get transport(){return u(this,H)}get currentAgent(){return u(this,q)}get usage(){return u(this,B).usage}get context(){return u(this,B)}get muted(){return u(this,H).muted}get history(){return u(this,oe)}get availableMcpTools(){return u(this,Zt)}async getInitialSessionConfig(t={}){return await U(this,ie,Qn).call(this,this.initialAgent),U(this,ie,er).call(this,{...this.options.config??{},...t??{}})}static async computeInitialSessionConfig(t,r={},s={}){const i=new Ms(t,r);try{return await i.getInitialSessionConfig(s)}finally{i.close()}}async updateAgent(t){return u(this,q).emit("agent_handoff",u(this,B),t),this.emit("agent_handoff",u(this,B),u(this,q),t),await U(this,ie,Qn).call(this,t),await u(this,H).updateSessionConfig(await U(this,ie,er).call(this)),t}async connect(t){await U(this,ie,Qn).call(this,this.initialAgent),U(this,ie,Co).call(this),await u(this,H).connect({apiKey:t.apiKey??this.options.apiKey,model:this.options.model,url:t.url,callId:t.callId,initialSessionConfig:await U(this,ie,er).call(this,this.options.config)}),k(this,oe,[]),this.emit("history_updated",u(this,oe))}updateHistory(t){let r;typeof t=="function"?r=t(u(this,oe)):r=t,u(this,H).resetHistory(u(this,oe),r)}sendMessage(t,r={}){u(this,H).sendMessage(t,r)}addImage(t,{triggerResponse:r=!0}={}){u(this,H).addImage(t,{triggerResponse:r})}mute(t){u(this,H).mute(t)}close(){k(this,pn,{}),u(this,H).close()}sendAudio(t,r={}){u(this,H).sendAudio(t,r)}interrupt(){u(this,H).interrupt()}async approve(t,r={alwaysApprove:!1}){u(this,B).approveTool(t,r);const s=t.toolName??t.rawItem.name,i=u(this,q).tools.find(o=>o.name===s);if(i&&i.type==="function"&&t.rawItem.type==="function_call")await U(this,ie,Fr).call(this,t.rawItem,i);else if(t.rawItem.type==="hosted_tool_call"){r.alwaysApprove&&Re.warn("Always approving MCP tools is not supported. Use the allowed tools configuration instead.");const o=io(t);u(this,H).sendMcpResponse(o,!0)}else throw new be(`Tool ${s??"unknown"} not found`)}async reject(t,r={alwaysReject:!1}){u(this,B).rejectTool(t,r);const s=t.toolName??t.rawItem.name,i=u(this,q).tools.find(o=>o.name===s);if(i&&i.type==="function"&&t.rawItem.type==="function_call")await U(this,ie,Fr).call(this,t.rawItem,i);else if(t.rawItem.type==="hosted_tool_call"){r.alwaysReject&&Re.warn("Always rejecting MCP tools is not supported. Use the allowed tools configuration instead.");const o=io(t);u(this,H).sendMcpResponse(o,!1)}else throw new be(`Tool ${s??"unknown"} not found`)}};H=new WeakMap,q=new WeakMap,un=new WeakMap,B=new WeakMap,cn=new WeakMap,ln=new WeakMap,Vn=new WeakMap,oe=new WeakMap,dn=new WeakMap,pn=new WeakMap,ze=new WeakMap,Wn=new WeakMap,Zt=new WeakMap,Hn=new WeakMap,Kn=new WeakMap,ie=new WeakSet,Qn=async function(t){k(this,q,t);const r=await u(this,q).getEnabledHandoffs(u(this,B)),s=r.map(c=>c.getHandoffAsFunctionTool()),i=(await u(this,q).getAllTools(u(this,B))).filter(of).map(uf),o=typeof u(this,q).tools<"u"||typeof u(this,q).mcpServers<"u",a=r.length>0;k(this,un,o||a?[...i,...s]:void 0),U(this,ie,zs).call(this)},er=async function(t={}){const r=t??{},s=this.options.config??{},i=await u(this,q).getSystemPrompt(u(this,B)),o=g=>{var x;const v=g.audio;return(x=v==null?void 0:v.output)==null?void 0:x.voice},a=this.options.tracingDisabled?null:this.options.workflowName?{workflow_name:this.options.workflowName}:"auto";a!==null&&a!=="auto"?(this.options.groupId&&(a.group_id=this.options.groupId),this.options.traceMetadata&&(a.metadata=this.options.traceMetadata)):(this.options.groupId||this.options.traceMetadata)&&Re.warn("In order to set traceMetadata or a groupId you need to specify a workflowName.");const c=o(r)??o(s),l=r.voice??s.voice,f=typeof c<"u"?c:typeof l<"u"?l:u(this,q).voice,m={...{...u(this,Hn)??{},...s,...r},instructions:i,voice:f,model:this.options.model,tools:u(this,un),tracing:a,prompt:typeof u(this,q).prompt=="function"?await u(this,q).prompt(u(this,B),u(this,q)):u(this,q).prompt};return k(this,Hn,m),m},ko=async function(t,r){const s=await r.onInvokeHandoff(u(this,B),t.arguments);u(this,q).emit("agent_handoff",u(this,B),s),this.emit("agent_handoff",u(this,B),u(this,q),s),await U(this,ie,Qn).call(this,s),await u(this,H).updateSessionConfig(await U(this,ie,er).call(this));const i=Vi(s);return u(this,H).sendFunctionCallOutput(t,i,!0),s},Fr=async function(t,r){u(this,B).context.history=JSON.parse(JSON.stringify(u(this,oe)));let s=t.arguments;if(r.parameters&&(Tt(r.parameters)?s=r.parameters.parse(s):s=JSON.parse(s)),await r.needsApproval(u(this,B),s,t.callId)){const c=this.context.isToolApproved({toolName:r.name,callId:t.callId});if(c===!1){this.emit("agent_tool_start",u(this,B),u(this,q),r,{toolCall:t}),u(this,q).emit("agent_tool_start",u(this,B),r,{toolCall:t});const l="Tool execution was not approved.";u(this,H).sendFunctionCallOutput(t,l,!0),this.emit("agent_tool_end",u(this,B),u(this,q),r,l,{toolCall:t}),u(this,q).emit("agent_tool_end",u(this,B),r,l,{toolCall:t});return}else if(typeof c>"u"){this.emit("tool_approval_requested",u(this,B),u(this,q),{type:"function_approval",tool:r,approvalItem:new Ie(t,u(this,q))});return}}this.emit("agent_tool_start",u(this,B),u(this,q),r,{toolCall:t}),u(this,q).emit("agent_tool_start",u(this,B),r,{toolCall:t}),u(this,B).context.history=JSON.parse(JSON.stringify(u(this,oe)));const o=await r.invoke(u(this,B),t.arguments,{toolCall:t});let a;mo(o)?(a=ct(o.content),u(this,H).sendFunctionCallOutput(t,a,!1)):(a=ct(o),u(this,H).sendFunctionCallOutput(t,a,!0)),this.emit("agent_tool_end",u(this,B),u(this,q),r,a,{toolCall:t}),u(this,q).emit("agent_tool_end",u(this,B),r,a,{toolCall:t})},Ao=async function(t){const r=await u(this,q).getEnabledHandoffs(u(this,B)),s=new Map(r.map(c=>[c.toolName,c])),i=await u(this,q).getAllTools(u(this,B)),o=new Map(i.map(c=>[c.name,c])),a=s.get(t.name);if(a)await U(this,ie,ko).call(this,t,a);else{const c=o.get(t.name);if(c&&c.type==="function")await U(this,ie,Fr).call(this,t,c);else throw new be(`Tool ${t.name} not found`)}},Js=async function(t,r,s){if(u(this,cn).length===0)return;const i={agent:u(this,q),agentOutput:t,context:u(this,B)},a=(await Promise.all(u(this,cn).map(c=>c.run(i)))).find(c=>c.output.tripwireTriggered);if(a){if(u(this,pn)[r])return;u(this,pn)[r]=!0;const c=new hr(`Output guardrail triggered: ${JSON.stringify(a.output.outputInfo)}`,a);this.emit("guardrail_tripped",u(this,B),u(this,q),c,{itemId:s}),this.interrupt();const l=tp(a);this.sendMessage(l);return}},Co=function(){u(this,H).on("*",s=>{if(this.emit("transport_event",s),s.type==="conversation.item.input_audio_transcription.completed")try{const i=s;k(this,oe,ro(u(this,oe),i,u(this,dn))),u(this,B).context.history=u(this,oe),this.emit("history_updated",u(this,oe))}catch(i){this.emit("error",{type:"error",error:i})}}),u(this,H).on("mcp_tools_listed",({serverLabel:s,tools:i})=>{try{u(this,Wn).set(s,i??[]),U(this,ie,zs).call(this)}catch(o){this.emit("error",{type:"error",error:o})}}),u(this,H).on("audio",s=>{u(this,ze)||(k(this,ze,!0),this.emit("audio_start",u(this,B),u(this,q))),this.emit("audio",s)}),u(this,H).on("turn_started",()=>{k(this,ze,!1),this.emit("agent_start",u(this,B),u(this,q)),u(this,q).emit("agent_start",u(this,B),u(this,q))}),u(this,H).on("turn_done",s=>{const i=s.response.output[s.response.output.length-1],o=to(i)??"",a=(i==null?void 0:i.id)??"";this.emit("agent_end",u(this,B),u(this,q),o),u(this,q).emit("agent_end",u(this,B),o),U(this,ie,Js).call(this,o,s.response.id,a)}),u(this,H).on("audio_done",()=>{u(this,ze)&&k(this,ze,!1),this.emit("audio_stopped",u(this,B),u(this,q))});let t=0,r;u(this,H).on("audio_transcript_delta",s=>{try{const i=s.delta,o=s.itemId,a=s.responseId;r!==o&&(r=o,t=0);const l=(u(this,Vn)[o]??"")+i;if(u(this,Vn)[o]=l,u(this,ln).debounceTextLength<0)return;const f=Math.floor(l.length/u(this,ln).debounceTextLength);f>t&&(t=f,U(this,ie,Js).call(this,l,a,o))}catch(i){this.emit("error",{type:"error",error:i})}}),u(this,H).on("item_update",s=>{try{const i=!u(this,oe).some(o=>o.itemId===s.itemId);if(k(this,oe,ro(u(this,oe),s,u(this,dn))),u(this,B).context.history=u(this,oe),i){const o=u(this,oe).find(a=>a.itemId===s.itemId);o&&this.emit("history_added",o)}this.emit("history_updated",u(this,oe))}catch(i){this.emit("error",{type:"error",error:i})}}),u(this,H).on("item_deleted",s=>{try{k(this,oe,u(this,oe).filter(i=>i.itemId!==s.itemId)),u(this,B).context.history=u(this,oe),this.emit("history_updated",u(this,oe))}catch(i){this.emit("error",{type:"error",error:i})}}),u(this,H).on("function_call",async s=>{try{await U(this,ie,Ao).call(this,s)}catch(i){Re.error("Error handling function call",i),this.emit("error",{type:"error",error:i})}}),u(this,H).on("usage_update",s=>{u(this,B).usage.add(s)}),u(this,H).on("audio_interrupted",()=>{u(this,ze)&&k(this,ze,!1),this.emit("audio_interrupted",u(this,B),u(this,q))}),u(this,H).on("error",s=>{this.emit("error",s)}),u(this,H).on("mcp_tool_call_completed",s=>{this.emit("mcp_tool_call_completed",u(this,B),u(this,q),s),u(this,Kn)&&u(this,H).sendEvent({type:"response.create"})}),u(this,H).on("mcp_approval_request",s=>{this.emit("tool_approval_requested",u(this,B),u(this,q),{type:"mcp_approval_request",approvalItem:Yd(u(this,q),s)})})},zs=function(){var c;const t=(c=u(this,un))==null?void 0:c.filter(l=>l.type==="mcp"),r=l=>{const f=l.allowed_tools;if(f){if(Array.isArray(f))return f;if(f&&Array.isArray(f.tool_names))return f.tool_names}},s=new Map;for(const l of t){const f=u(this,Wn).get(l.server_label)??[],d=r(l);for(const m of f)d&&!d.includes(m.name)||s.has(m.name)||s.set(m.name,m)}const i=Array.from(s.values()),o=u(this,Zt);(o.length!==i.length||JSON.stringify(o.map(l=>l.name).sort())!==JSON.stringify(i.map(l=>l.name).sort()))&&(k(this,Zt,i),this.emit("mcp_tools_changed",u(this,Zt)))};let Mr=Ms;class Rs extends Es{constructor(e={}){super(e)}static async buildInitialConfig(e,t={},r={}){const s=await Mr.computeInitialSessionConfig(e,t,r);return new Rs().buildSessionPayload(s)}sendAudio(e,t={}){throw new Error("OpenAIRealtimeSIP does not support sending audio buffers; audio is handled by the SIP call.")}async connect(e){if(!e.callId)throw new te("OpenAIRealtimeSIP requires `callId` in the connect options.");await super.connect(e)}}const lf={base64ToArrayBuffer:Qa,arrayBufferToBase64:eo,getLastTextFromAudioOutputMessage:to};J.DEFAULT_OPENAI_REALTIME_MODEL=po,J.DEFAULT_OPENAI_REALTIME_SESSION_CONFIG=De,J.ModelBehaviorError=be,J.OpenAIRealtimeBase=Cn,J.OpenAIRealtimeSIP=Rs,J.OpenAIRealtimeWebRTC=fo,J.OpenAIRealtimeWebSocket=Es,J.OutputGuardrailTripwireTriggered=hr,J.RealtimeAgent=Xd,J.RealtimeSession=Mr,J.UserError=te,J.backgroundResult=af,J.isBackgroundResult=mo,J.tool=wr,J.utils=lf,Object.defineProperty(J,Symbol.toStringTag,{value:"Module"})}));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoib3BlbmFpLXJlYWx0aW1lLWFnZW50cy51bWQuanMiLCJzb3VyY2VzIjpbIi4uL21ldGFkYXRhLm1qcyIsIi4uLy4uLy4uL2FnZW50cy1jb3JlL2Rpc3QvdXRpbHMvc2FmZUV4ZWN1dGUubWpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3pvZC92NC9jb3JlL3V0aWwuanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvem9kL3Y0L2NvcmUvcmVnaXN0cmllcy5qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy96b2QvdjQvY29yZS90by1qc29uLXNjaGVtYS5qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9vcGVuYWkvbGliL3BhcnNlci5tanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvb3BlbmFpL192ZW5kb3Ivem9kLXRvLWpzb24tc2NoZW1hL09wdGlvbnMubWpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL29wZW5haS9fdmVuZG9yL3pvZC10by1qc29uLXNjaGVtYS91dGlsLm1qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9vcGVuYWkvX3ZlbmRvci96b2QtdG8tanNvbi1zY2hlbWEvUmVmcy5tanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvb3BlbmFpL192ZW5kb3Ivem9kLXRvLWpzb24tc2NoZW1hL2Vycm9yTWVzc2FnZXMubWpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3pvZC92My9oZWxwZXJzL3V0aWwuanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvem9kL3YzL1pvZEVycm9yLmpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3pvZC92My9sb2NhbGVzL2VuLmpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3pvZC92My9lcnJvcnMuanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvem9kL3YzL2hlbHBlcnMvcGFyc2VVdGlsLmpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3pvZC92My9oZWxwZXJzL2Vycm9yVXRpbC5qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy96b2QvdjMvdHlwZXMuanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvb3BlbmFpL192ZW5kb3Ivem9kLXRvLWpzb24tc2NoZW1hL3BhcnNlcnMvYW55Lm1qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9vcGVuYWkvX3ZlbmRvci96b2QtdG8tanNvbi1zY2hlbWEvcGFyc2Vycy9hcnJheS5tanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvb3BlbmFpL192ZW5kb3Ivem9kLXRvLWpzb24tc2NoZW1hL3BhcnNlcnMvYmlnaW50Lm1qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9vcGVuYWkvX3ZlbmRvci96b2QtdG8tanNvbi1zY2hlbWEvcGFyc2Vycy9ib29sZWFuLm1qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9vcGVuYWkvX3ZlbmRvci96b2QtdG8tanNvbi1zY2hlbWEvcGFyc2Vycy9icmFuZGVkLm1qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9vcGVuYWkvX3ZlbmRvci96b2QtdG8tanNvbi1zY2hlbWEvcGFyc2Vycy9jYXRjaC5tanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvb3BlbmFpL192ZW5kb3Ivem9kLXRvLWpzb24tc2NoZW1hL3BhcnNlcnMvZGF0ZS5tanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvb3BlbmFpL192ZW5kb3Ivem9kLXRvLWpzb24tc2NoZW1hL3BhcnNlcnMvZGVmYXVsdC5tanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvb3BlbmFpL192ZW5kb3Ivem9kLXRvLWpzb24tc2NoZW1hL3BhcnNlcnMvZWZmZWN0cy5tanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvb3BlbmFpL192ZW5kb3Ivem9kLXRvLWpzb24tc2NoZW1hL3BhcnNlcnMvZW51bS5tanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvb3BlbmFpL192ZW5kb3Ivem9kLXRvLWpzb24tc2NoZW1hL3BhcnNlcnMvaW50ZXJzZWN0aW9uLm1qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9vcGVuYWkvX3ZlbmRvci96b2QtdG8tanNvbi1zY2hlbWEvcGFyc2Vycy9saXRlcmFsLm1qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9vcGVuYWkvX3ZlbmRvci96b2QtdG8tanNvbi1zY2hlbWEvcGFyc2Vycy9zdHJpbmcubWpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL29wZW5haS9fdmVuZG9yL3pvZC10by1qc29uLXNjaGVtYS9wYXJzZXJzL3JlY29yZC5tanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvb3BlbmFpL192ZW5kb3Ivem9kLXRvLWpzb24tc2NoZW1hL3BhcnNlcnMvbWFwLm1qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9vcGVuYWkvX3ZlbmRvci96b2QtdG8tanNvbi1zY2hlbWEvcGFyc2Vycy9uYXRpdmVFbnVtLm1qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9vcGVuYWkvX3ZlbmRvci96b2QtdG8tanNvbi1zY2hlbWEvcGFyc2Vycy9uZXZlci5tanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvb3BlbmFpL192ZW5kb3Ivem9kLXRvLWpzb24tc2NoZW1hL3BhcnNlcnMvbnVsbC5tanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvb3BlbmFpL192ZW5kb3Ivem9kLXRvLWpzb24tc2NoZW1hL3BhcnNlcnMvdW5pb24ubWpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL29wZW5haS9fdmVuZG9yL3pvZC10by1qc29uLXNjaGVtYS9wYXJzZXJzL251bGxhYmxlLm1qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9vcGVuYWkvX3ZlbmRvci96b2QtdG8tanNvbi1zY2hlbWEvcGFyc2Vycy9udW1iZXIubWpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL29wZW5haS9fdmVuZG9yL3pvZC10by1qc29uLXNjaGVtYS9wYXJzZXJzL29iamVjdC5tanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvb3BlbmFpL192ZW5kb3Ivem9kLXRvLWpzb24tc2NoZW1hL3BhcnNlcnMvb3B0aW9uYWwubWpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL29wZW5haS9fdmVuZG9yL3pvZC10by1qc29uLXNjaGVtYS9wYXJzZXJzL3BpcGVsaW5lLm1qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9vcGVuYWkvX3ZlbmRvci96b2QtdG8tanNvbi1zY2hlbWEvcGFyc2Vycy9wcm9taXNlLm1qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9vcGVuYWkvX3ZlbmRvci96b2QtdG8tanNvbi1zY2hlbWEvcGFyc2Vycy9zZXQubWpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL29wZW5haS9fdmVuZG9yL3pvZC10by1qc29uLXNjaGVtYS9wYXJzZXJzL3R1cGxlLm1qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9vcGVuYWkvX3ZlbmRvci96b2QtdG8tanNvbi1zY2hlbWEvcGFyc2Vycy91bmRlZmluZWQubWpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL29wZW5haS9fdmVuZG9yL3pvZC10by1qc29uLXNjaGVtYS9wYXJzZXJzL3Vua25vd24ubWpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL29wZW5haS9fdmVuZG9yL3pvZC10by1qc29uLXNjaGVtYS9wYXJzZXJzL3JlYWRvbmx5Lm1qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9vcGVuYWkvX3ZlbmRvci96b2QtdG8tanNvbi1zY2hlbWEvcGFyc2VEZWYubWpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL29wZW5haS9fdmVuZG9yL3pvZC10by1qc29uLXNjaGVtYS96b2RUb0pzb25TY2hlbWEubWpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL29wZW5haS9saWIvUmVzcG9uc2VzUGFyc2VyLm1qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9vcGVuYWkvbGliL3RyYW5zZm9ybS5tanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvb3BlbmFpL2hlbHBlcnMvem9kLm1qcyIsIi4uLy4uLy4uL2FnZW50cy1jb3JlL2Rpc3QvZXJyb3JzLm1qcyIsIi4uLy4uLy4uL2FnZW50cy1jb3JlL2Rpc3QvdXRpbHMvem9kQ29tcGF0Lm1qcyIsIi4uLy4uLy4uL2FnZW50cy1jb3JlL2Rpc3QvdXRpbHMvdHlwZUd1YXJkcy5tanMiLCIuLi8uLi8uLi9hZ2VudHMtY29yZS9kaXN0L3V0aWxzL3pvZEpzb25TY2hlbWFDb21wYXQubWpzIiwiLi4vLi4vLi4vYWdlbnRzLWNvcmUvZGlzdC91dGlscy90b29scy5tanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvbXMvaW5kZXguanMiLCIuLi8uLi8uLi9hZ2VudHMtY29yZS9ub2RlX21vZHVsZXMvZGVidWcvc3JjL2NvbW1vbi5qcyIsIi4uLy4uLy4uL2FnZW50cy1jb3JlL25vZGVfbW9kdWxlcy9kZWJ1Zy9zcmMvYnJvd3Nlci5qcyIsIi4uLy4uLy4uL2FnZW50cy1jb3JlL2Rpc3QvY29uZmlnLm1qcyIsIi4uLy4uLy4uL2FnZW50cy1jb3JlL2Rpc3QvbG9nZ2VyLm1qcyIsIi4uLy4uLy4uL2FnZW50cy1jb3JlL2Rpc3QvdXRpbHMvc21hcnRTdHJpbmcubWpzIiwiLi4vLi4vLi4vYWdlbnRzLWNvcmUvZGlzdC90b29sLm1qcyIsIi4uLy4uLy4uL2FnZW50cy1jb3JlL2Rpc3QvbWNwLm1qcyIsIi4uLy4uLy4uL2FnZW50cy1jb3JlL2Rpc3Qvc2hpbXMvc2hpbXMtYnJvd3Nlci5tanMiLCIuLi8uLi8uLi9hZ2VudHMtY29yZS9kaXN0L2xpZmVjeWNsZS5tanMiLCIuLi8uLi8uLi9hZ2VudHMtY29yZS9kaXN0L2RlZmF1bHRNb2RlbC5tanMiLCIuLi8uLi8uLi9hZ2VudHMtY29yZS9kaXN0L2hhbmRvZmYubWpzIiwiLi4vLi4vLi4vYWdlbnRzLWNvcmUvZGlzdC91dGlscy9tZXNzYWdlcy5tanMiLCIuLi8uLi8uLi9hZ2VudHMtY29yZS9kaXN0L2FnZW50Lm1qcyIsIi4uLy4uLy4uL2FnZW50cy1jb3JlL2Rpc3QvZ3VhcmRyYWlsLm1qcyIsIi4uLy4uLy4uL2FnZW50cy1jb3JlL2Rpc3QvcHJvdmlkZXJzLm1qcyIsIi4uLy4uLy4uL2FnZW50cy1jb3JlL2Rpc3QvdHlwZXMvcHJvdG9jb2wubWpzIiwiLi4vLi4vLi4vYWdlbnRzLWNvcmUvZGlzdC91c2FnZS5tanMiLCIuLi8uLi8uLi9hZ2VudHMtY29yZS9kaXN0L3J1bkNvbnRleHQubWpzIiwiLi4vLi4vLi4vYWdlbnRzLWNvcmUvZGlzdC91dGlscy9zZXJpYWxpemUubWpzIiwiLi4vLi4vLi4vYWdlbnRzLWNvcmUvZGlzdC9pdGVtcy5tanMiLCIuLi8uLi8uLi9hZ2VudHMtY29yZS9kaXN0L3RyYWNpbmcvY3JlYXRlU3BhbnMubWpzIiwiLi4vLi4vLi4vYWdlbnRzLWNvcmUvZGlzdC91dGlscy9iYXNlNjQubWpzIiwiLi4vLi4vLi4vYWdlbnRzLWNvcmUvZGlzdC9ldmVudHMubWpzIiwiLi4vLi4vLi4vYWdlbnRzLWNvcmUvZGlzdC9tZW1vcnkvc2Vzc2lvbi5tanMiLCIuLi8uLi8uLi9hZ2VudHMtY29yZS9kaXN0L3J1bkltcGxlbWVudGF0aW9uLm1qcyIsIi4uLy4uLy4uL2FnZW50cy1jb3JlL2Rpc3QvcnVuU3RhdGUubWpzIiwiLi4vLi4vLi4vYWdlbnRzLWNvcmUvZGlzdC9ydW4ubWpzIiwiLi4vLi4vLi4vYWdlbnRzLWNvcmUvZGlzdC9yZXN1bHQubWpzIiwiLi4vLi4vLi4vYWdlbnRzLWNvcmUvZGlzdC90cmFjaW5nL2NvbnRleHQubWpzIiwiLi4vLi4vLi4vYWdlbnRzLWNvcmUvZGlzdC90cmFjaW5nL3Byb2Nlc3Nvci5tanMiLCIuLi8uLi8uLi9hZ2VudHMtY29yZS9kaXN0L3RyYWNpbmcvdXRpbHMubWpzIiwiLi4vLi4vLi4vYWdlbnRzLWNvcmUvZGlzdC90cmFjaW5nL3NwYW5zLm1qcyIsIi4uLy4uLy4uL2FnZW50cy1jb3JlL2Rpc3QvdHJhY2luZy90cmFjZXMubWpzIiwiLi4vLi4vLi4vYWdlbnRzLWNvcmUvZGlzdC90cmFjaW5nL3Byb3ZpZGVyLm1qcyIsIi4uLy4uLy4uL2FnZW50cy1jb3JlL2Rpc3QvdHJhY2luZy9pbmRleC5tanMiLCIuLi8uLi8uLi9hZ2VudHMtY29yZS9kaXN0L2luZGV4Lm1qcyIsIi4uL3V0aWxzLm1qcyIsIi4uL3JlYWx0aW1lQWdlbnQubWpzIiwiLi4vZ3VhcmRyYWlsLm1qcyIsIi4uL2NsaWVudE1lc3NhZ2VzLm1qcyIsIi4uL2l0ZW1zLm1qcyIsIi4uL2xvZ2dlci5tanMiLCIuLi9vcGVuYWlSZWFsdGltZUV2ZW50cy5tanMiLCIuLi9vcGVuYWlSZWFsdGltZUJhc2UubWpzIiwiLi4vb3BlbmFpUmVhbHRpbWVXZWJSdGMubWpzIiwiLi4vc2hpbXMvc2hpbXMtYnJvd3Nlci5tanMiLCIuLi9vcGVuYWlSZWFsdGltZVdlYnNvY2tldC5tanMiLCIuLi90b29sLm1qcyIsIi4uL3JlYWx0aW1lU2Vzc2lvbi5tanMiLCIuLi9vcGVuYWlSZWFsdGltZVNpcC5tanMiLCIuLi9pbmRleC5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gVGhpcyBmaWxlIGlzIGF1dG9tYXRpY2FsbHkgZ2VuZXJhdGVkXG5leHBvcnQgY29uc3QgTUVUQURBVEEgPSB7XG4gICAgXCJuYW1lXCI6IFwiQG9wZW5haS9hZ2VudHMtcmVhbHRpbWVcIixcbiAgICBcInZlcnNpb25cIjogXCIwLjMuN1wiLFxuICAgIFwidmVyc2lvbnNcIjoge1xuICAgICAgICBcIkBvcGVuYWkvYWdlbnRzLXJlYWx0aW1lXCI6IFwiMC4zLjdcIixcbiAgICAgICAgXCJAb3BlbmFpL2FnZW50cy1jb3JlXCI6IFwid29ya3NwYWNlOipcIlxuICAgIH1cbn07XG5leHBvcnQgZGVmYXVsdCBNRVRBREFUQTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW1ldGFkYXRhLm1qcy5tYXAiLCJleHBvcnQgYXN5bmMgZnVuY3Rpb24gc2FmZUV4ZWN1dGUoZm4pIHtcbiAgICB0cnkge1xuICAgICAgICByZXR1cm4gW251bGwsIGF3YWl0IGZuKCldO1xuICAgIH1cbiAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgcmV0dXJuIFtlcnJvciwgbnVsbF07XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c2FmZUV4ZWN1dGUubWpzLm1hcCIsIi8vIGZ1bmN0aW9uc1xuZXhwb3J0IGZ1bmN0aW9uIGFzc2VydEVxdWFsKHZhbCkge1xuICAgIHJldHVybiB2YWw7XG59XG5leHBvcnQgZnVuY3Rpb24gYXNzZXJ0Tm90RXF1YWwodmFsKSB7XG4gICAgcmV0dXJuIHZhbDtcbn1cbmV4cG9ydCBmdW5jdGlvbiBhc3NlcnRJcyhfYXJnKSB7IH1cbmV4cG9ydCBmdW5jdGlvbiBhc3NlcnROZXZlcihfeCkge1xuICAgIHRocm93IG5ldyBFcnJvcigpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGFzc2VydChfKSB7IH1cbmV4cG9ydCBmdW5jdGlvbiBnZXRFbnVtVmFsdWVzKGVudHJpZXMpIHtcbiAgICBjb25zdCBudW1lcmljVmFsdWVzID0gT2JqZWN0LnZhbHVlcyhlbnRyaWVzKS5maWx0ZXIoKHYpID0+IHR5cGVvZiB2ID09PSBcIm51bWJlclwiKTtcbiAgICBjb25zdCB2YWx1ZXMgPSBPYmplY3QuZW50cmllcyhlbnRyaWVzKVxuICAgICAgICAuZmlsdGVyKChbaywgX10pID0+IG51bWVyaWNWYWx1ZXMuaW5kZXhPZigraykgPT09IC0xKVxuICAgICAgICAubWFwKChbXywgdl0pID0+IHYpO1xuICAgIHJldHVybiB2YWx1ZXM7XG59XG5leHBvcnQgZnVuY3Rpb24gam9pblZhbHVlcyhhcnJheSwgc2VwYXJhdG9yID0gXCJ8XCIpIHtcbiAgICByZXR1cm4gYXJyYXkubWFwKCh2YWwpID0+IHN0cmluZ2lmeVByaW1pdGl2ZSh2YWwpKS5qb2luKHNlcGFyYXRvcik7XG59XG5leHBvcnQgZnVuY3Rpb24ganNvblN0cmluZ2lmeVJlcGxhY2VyKF8sIHZhbHVlKSB7XG4gICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gXCJiaWdpbnRcIilcbiAgICAgICAgcmV0dXJuIHZhbHVlLnRvU3RyaW5nKCk7XG4gICAgcmV0dXJuIHZhbHVlO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGNhY2hlZChnZXR0ZXIpIHtcbiAgICBjb25zdCBzZXQgPSBmYWxzZTtcbiAgICByZXR1cm4ge1xuICAgICAgICBnZXQgdmFsdWUoKSB7XG4gICAgICAgICAgICBpZiAoIXNldCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gZ2V0dGVyKCk7XG4gICAgICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwidmFsdWVcIiwgeyB2YWx1ZSB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJjYWNoZWQgdmFsdWUgYWxyZWFkeSBzZXRcIik7XG4gICAgICAgIH0sXG4gICAgfTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBudWxsaXNoKGlucHV0KSB7XG4gICAgcmV0dXJuIGlucHV0ID09PSBudWxsIHx8IGlucHV0ID09PSB1bmRlZmluZWQ7XG59XG5leHBvcnQgZnVuY3Rpb24gY2xlYW5SZWdleChzb3VyY2UpIHtcbiAgICBjb25zdCBzdGFydCA9IHNvdXJjZS5zdGFydHNXaXRoKFwiXlwiKSA/IDEgOiAwO1xuICAgIGNvbnN0IGVuZCA9IHNvdXJjZS5lbmRzV2l0aChcIiRcIikgPyBzb3VyY2UubGVuZ3RoIC0gMSA6IHNvdXJjZS5sZW5ndGg7XG4gICAgcmV0dXJuIHNvdXJjZS5zbGljZShzdGFydCwgZW5kKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBmbG9hdFNhZmVSZW1haW5kZXIodmFsLCBzdGVwKSB7XG4gICAgY29uc3QgdmFsRGVjQ291bnQgPSAodmFsLnRvU3RyaW5nKCkuc3BsaXQoXCIuXCIpWzFdIHx8IFwiXCIpLmxlbmd0aDtcbiAgICBjb25zdCBzdGVwRGVjQ291bnQgPSAoc3RlcC50b1N0cmluZygpLnNwbGl0KFwiLlwiKVsxXSB8fCBcIlwiKS5sZW5ndGg7XG4gICAgY29uc3QgZGVjQ291bnQgPSB2YWxEZWNDb3VudCA+IHN0ZXBEZWNDb3VudCA/IHZhbERlY0NvdW50IDogc3RlcERlY0NvdW50O1xuICAgIGNvbnN0IHZhbEludCA9IE51bWJlci5wYXJzZUludCh2YWwudG9GaXhlZChkZWNDb3VudCkucmVwbGFjZShcIi5cIiwgXCJcIikpO1xuICAgIGNvbnN0IHN0ZXBJbnQgPSBOdW1iZXIucGFyc2VJbnQoc3RlcC50b0ZpeGVkKGRlY0NvdW50KS5yZXBsYWNlKFwiLlwiLCBcIlwiKSk7XG4gICAgcmV0dXJuICh2YWxJbnQgJSBzdGVwSW50KSAvIDEwICoqIGRlY0NvdW50O1xufVxuZXhwb3J0IGZ1bmN0aW9uIGRlZmluZUxhenkob2JqZWN0LCBrZXksIGdldHRlcikge1xuICAgIGNvbnN0IHNldCA9IGZhbHNlO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmplY3QsIGtleSwge1xuICAgICAgICBnZXQoKSB7XG4gICAgICAgICAgICBpZiAoIXNldCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gZ2V0dGVyKCk7XG4gICAgICAgICAgICAgICAgb2JqZWN0W2tleV0gPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJjYWNoZWQgdmFsdWUgYWxyZWFkeSBzZXRcIik7XG4gICAgICAgIH0sXG4gICAgICAgIHNldCh2KSB7XG4gICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqZWN0LCBrZXksIHtcbiAgICAgICAgICAgICAgICB2YWx1ZTogdixcbiAgICAgICAgICAgICAgICAvLyBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIC8vIG9iamVjdFtrZXldID0gdjtcbiAgICAgICAgfSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgIH0pO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGFzc2lnblByb3AodGFyZ2V0LCBwcm9wLCB2YWx1ZSkge1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIHByb3AsIHtcbiAgICAgICAgdmFsdWUsXG4gICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgfSk7XG59XG5leHBvcnQgZnVuY3Rpb24gZ2V0RWxlbWVudEF0UGF0aChvYmosIHBhdGgpIHtcbiAgICBpZiAoIXBhdGgpXG4gICAgICAgIHJldHVybiBvYmo7XG4gICAgcmV0dXJuIHBhdGgucmVkdWNlKChhY2MsIGtleSkgPT4gYWNjPy5ba2V5XSwgb2JqKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBwcm9taXNlQWxsT2JqZWN0KHByb21pc2VzT2JqKSB7XG4gICAgY29uc3Qga2V5cyA9IE9iamVjdC5rZXlzKHByb21pc2VzT2JqKTtcbiAgICBjb25zdCBwcm9taXNlcyA9IGtleXMubWFwKChrZXkpID0+IHByb21pc2VzT2JqW2tleV0pO1xuICAgIHJldHVybiBQcm9taXNlLmFsbChwcm9taXNlcykudGhlbigocmVzdWx0cykgPT4ge1xuICAgICAgICBjb25zdCByZXNvbHZlZE9iaiA9IHt9O1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHJlc29sdmVkT2JqW2tleXNbaV1dID0gcmVzdWx0c1tpXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzb2x2ZWRPYmo7XG4gICAgfSk7XG59XG5leHBvcnQgZnVuY3Rpb24gcmFuZG9tU3RyaW5nKGxlbmd0aCA9IDEwKSB7XG4gICAgY29uc3QgY2hhcnMgPSBcImFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6XCI7XG4gICAgbGV0IHN0ciA9IFwiXCI7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgICBzdHIgKz0gY2hhcnNbTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogY2hhcnMubGVuZ3RoKV07XG4gICAgfVxuICAgIHJldHVybiBzdHI7XG59XG5leHBvcnQgZnVuY3Rpb24gZXNjKHN0cikge1xuICAgIHJldHVybiBKU09OLnN0cmluZ2lmeShzdHIpO1xufVxuZXhwb3J0IGNvbnN0IGNhcHR1cmVTdGFja1RyYWNlID0gRXJyb3IuY2FwdHVyZVN0YWNrVHJhY2VcbiAgICA/IEVycm9yLmNhcHR1cmVTdGFja1RyYWNlXG4gICAgOiAoLi4uX2FyZ3MpID0+IHsgfTtcbmV4cG9ydCBmdW5jdGlvbiBpc09iamVjdChkYXRhKSB7XG4gICAgcmV0dXJuIHR5cGVvZiBkYXRhID09PSBcIm9iamVjdFwiICYmIGRhdGEgIT09IG51bGwgJiYgIUFycmF5LmlzQXJyYXkoZGF0YSk7XG59XG5leHBvcnQgY29uc3QgYWxsb3dzRXZhbCA9IGNhY2hlZCgoKSA9PiB7XG4gICAgaWYgKHR5cGVvZiBuYXZpZ2F0b3IgIT09IFwidW5kZWZpbmVkXCIgJiYgbmF2aWdhdG9yPy51c2VyQWdlbnQ/LmluY2x1ZGVzKFwiQ2xvdWRmbGFyZVwiKSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IEYgPSBGdW5jdGlvbjtcbiAgICAgICAgbmV3IEYoXCJcIik7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBjYXRjaCAoXykge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxufSk7XG5leHBvcnQgZnVuY3Rpb24gaXNQbGFpbk9iamVjdChvKSB7XG4gICAgaWYgKGlzT2JqZWN0KG8pID09PSBmYWxzZSlcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIC8vIG1vZGlmaWVkIGNvbnN0cnVjdG9yXG4gICAgY29uc3QgY3RvciA9IG8uY29uc3RydWN0b3I7XG4gICAgaWYgKGN0b3IgPT09IHVuZGVmaW5lZClcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgLy8gbW9kaWZpZWQgcHJvdG90eXBlXG4gICAgY29uc3QgcHJvdCA9IGN0b3IucHJvdG90eXBlO1xuICAgIGlmIChpc09iamVjdChwcm90KSA9PT0gZmFsc2UpXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAvLyBjdG9yIGRvZXNuJ3QgaGF2ZSBzdGF0aWMgYGlzUHJvdG90eXBlT2ZgXG4gICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChwcm90LCBcImlzUHJvdG90eXBlT2ZcIikgPT09IGZhbHNlKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG59XG5leHBvcnQgZnVuY3Rpb24gbnVtS2V5cyhkYXRhKSB7XG4gICAgbGV0IGtleUNvdW50ID0gMDtcbiAgICBmb3IgKGNvbnN0IGtleSBpbiBkYXRhKSB7XG4gICAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZGF0YSwga2V5KSkge1xuICAgICAgICAgICAga2V5Q291bnQrKztcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4ga2V5Q291bnQ7XG59XG5leHBvcnQgY29uc3QgZ2V0UGFyc2VkVHlwZSA9IChkYXRhKSA9PiB7XG4gICAgY29uc3QgdCA9IHR5cGVvZiBkYXRhO1xuICAgIHN3aXRjaCAodCkge1xuICAgICAgICBjYXNlIFwidW5kZWZpbmVkXCI6XG4gICAgICAgICAgICByZXR1cm4gXCJ1bmRlZmluZWRcIjtcbiAgICAgICAgY2FzZSBcInN0cmluZ1wiOlxuICAgICAgICAgICAgcmV0dXJuIFwic3RyaW5nXCI7XG4gICAgICAgIGNhc2UgXCJudW1iZXJcIjpcbiAgICAgICAgICAgIHJldHVybiBOdW1iZXIuaXNOYU4oZGF0YSkgPyBcIm5hblwiIDogXCJudW1iZXJcIjtcbiAgICAgICAgY2FzZSBcImJvb2xlYW5cIjpcbiAgICAgICAgICAgIHJldHVybiBcImJvb2xlYW5cIjtcbiAgICAgICAgY2FzZSBcImZ1bmN0aW9uXCI6XG4gICAgICAgICAgICByZXR1cm4gXCJmdW5jdGlvblwiO1xuICAgICAgICBjYXNlIFwiYmlnaW50XCI6XG4gICAgICAgICAgICByZXR1cm4gXCJiaWdpbnRcIjtcbiAgICAgICAgY2FzZSBcInN5bWJvbFwiOlxuICAgICAgICAgICAgcmV0dXJuIFwic3ltYm9sXCI7XG4gICAgICAgIGNhc2UgXCJvYmplY3RcIjpcbiAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KGRhdGEpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiYXJyYXlcIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChkYXRhID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFwibnVsbFwiO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGRhdGEudGhlbiAmJiB0eXBlb2YgZGF0YS50aGVuID09PSBcImZ1bmN0aW9uXCIgJiYgZGF0YS5jYXRjaCAmJiB0eXBlb2YgZGF0YS5jYXRjaCA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFwicHJvbWlzZVwiO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHR5cGVvZiBNYXAgIT09IFwidW5kZWZpbmVkXCIgJiYgZGF0YSBpbnN0YW5jZW9mIE1hcCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBcIm1hcFwiO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHR5cGVvZiBTZXQgIT09IFwidW5kZWZpbmVkXCIgJiYgZGF0YSBpbnN0YW5jZW9mIFNldCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBcInNldFwiO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHR5cGVvZiBEYXRlICE9PSBcInVuZGVmaW5lZFwiICYmIGRhdGEgaW5zdGFuY2VvZiBEYXRlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiZGF0ZVwiO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHR5cGVvZiBGaWxlICE9PSBcInVuZGVmaW5lZFwiICYmIGRhdGEgaW5zdGFuY2VvZiBGaWxlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiZmlsZVwiO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIFwib2JqZWN0XCI7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFVua25vd24gZGF0YSB0eXBlOiAke3R9YCk7XG4gICAgfVxufTtcbmV4cG9ydCBjb25zdCBwcm9wZXJ0eUtleVR5cGVzID0gbmV3IFNldChbXCJzdHJpbmdcIiwgXCJudW1iZXJcIiwgXCJzeW1ib2xcIl0pO1xuZXhwb3J0IGNvbnN0IHByaW1pdGl2ZVR5cGVzID0gbmV3IFNldChbXCJzdHJpbmdcIiwgXCJudW1iZXJcIiwgXCJiaWdpbnRcIiwgXCJib29sZWFuXCIsIFwic3ltYm9sXCIsIFwidW5kZWZpbmVkXCJdKTtcbmV4cG9ydCBmdW5jdGlvbiBlc2NhcGVSZWdleChzdHIpIHtcbiAgICByZXR1cm4gc3RyLnJlcGxhY2UoL1suKis/XiR7fSgpfFtcXF1cXFxcXS9nLCBcIlxcXFwkJlwiKTtcbn1cbi8vIHpvZC1zcGVjaWZpYyB1dGlsc1xuZXhwb3J0IGZ1bmN0aW9uIGNsb25lKGluc3QsIGRlZiwgcGFyYW1zKSB7XG4gICAgY29uc3QgY2wgPSBuZXcgaW5zdC5fem9kLmNvbnN0cihkZWYgPz8gaW5zdC5fem9kLmRlZik7XG4gICAgaWYgKCFkZWYgfHwgcGFyYW1zPy5wYXJlbnQpXG4gICAgICAgIGNsLl96b2QucGFyZW50ID0gaW5zdDtcbiAgICByZXR1cm4gY2w7XG59XG5leHBvcnQgZnVuY3Rpb24gbm9ybWFsaXplUGFyYW1zKF9wYXJhbXMpIHtcbiAgICBjb25zdCBwYXJhbXMgPSBfcGFyYW1zO1xuICAgIGlmICghcGFyYW1zKVxuICAgICAgICByZXR1cm4ge307XG4gICAgaWYgKHR5cGVvZiBwYXJhbXMgPT09IFwic3RyaW5nXCIpXG4gICAgICAgIHJldHVybiB7IGVycm9yOiAoKSA9PiBwYXJhbXMgfTtcbiAgICBpZiAocGFyYW1zPy5tZXNzYWdlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgaWYgKHBhcmFtcz8uZXJyb3IgIT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkNhbm5vdCBzcGVjaWZ5IGJvdGggYG1lc3NhZ2VgIGFuZCBgZXJyb3JgIHBhcmFtc1wiKTtcbiAgICAgICAgcGFyYW1zLmVycm9yID0gcGFyYW1zLm1lc3NhZ2U7XG4gICAgfVxuICAgIGRlbGV0ZSBwYXJhbXMubWVzc2FnZTtcbiAgICBpZiAodHlwZW9mIHBhcmFtcy5lcnJvciA9PT0gXCJzdHJpbmdcIilcbiAgICAgICAgcmV0dXJuIHsgLi4ucGFyYW1zLCBlcnJvcjogKCkgPT4gcGFyYW1zLmVycm9yIH07XG4gICAgcmV0dXJuIHBhcmFtcztcbn1cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVUcmFuc3BhcmVudFByb3h5KGdldHRlcikge1xuICAgIGxldCB0YXJnZXQ7XG4gICAgcmV0dXJuIG5ldyBQcm94eSh7fSwge1xuICAgICAgICBnZXQoXywgcHJvcCwgcmVjZWl2ZXIpIHtcbiAgICAgICAgICAgIHRhcmdldCA/PyAodGFyZ2V0ID0gZ2V0dGVyKCkpO1xuICAgICAgICAgICAgcmV0dXJuIFJlZmxlY3QuZ2V0KHRhcmdldCwgcHJvcCwgcmVjZWl2ZXIpO1xuICAgICAgICB9LFxuICAgICAgICBzZXQoXywgcHJvcCwgdmFsdWUsIHJlY2VpdmVyKSB7XG4gICAgICAgICAgICB0YXJnZXQgPz8gKHRhcmdldCA9IGdldHRlcigpKTtcbiAgICAgICAgICAgIHJldHVybiBSZWZsZWN0LnNldCh0YXJnZXQsIHByb3AsIHZhbHVlLCByZWNlaXZlcik7XG4gICAgICAgIH0sXG4gICAgICAgIGhhcyhfLCBwcm9wKSB7XG4gICAgICAgICAgICB0YXJnZXQgPz8gKHRhcmdldCA9IGdldHRlcigpKTtcbiAgICAgICAgICAgIHJldHVybiBSZWZsZWN0Lmhhcyh0YXJnZXQsIHByb3ApO1xuICAgICAgICB9LFxuICAgICAgICBkZWxldGVQcm9wZXJ0eShfLCBwcm9wKSB7XG4gICAgICAgICAgICB0YXJnZXQgPz8gKHRhcmdldCA9IGdldHRlcigpKTtcbiAgICAgICAgICAgIHJldHVybiBSZWZsZWN0LmRlbGV0ZVByb3BlcnR5KHRhcmdldCwgcHJvcCk7XG4gICAgICAgIH0sXG4gICAgICAgIG93bktleXMoXykge1xuICAgICAgICAgICAgdGFyZ2V0ID8/ICh0YXJnZXQgPSBnZXR0ZXIoKSk7XG4gICAgICAgICAgICByZXR1cm4gUmVmbGVjdC5vd25LZXlzKHRhcmdldCk7XG4gICAgICAgIH0sXG4gICAgICAgIGdldE93blByb3BlcnR5RGVzY3JpcHRvcihfLCBwcm9wKSB7XG4gICAgICAgICAgICB0YXJnZXQgPz8gKHRhcmdldCA9IGdldHRlcigpKTtcbiAgICAgICAgICAgIHJldHVybiBSZWZsZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIHByb3ApO1xuICAgICAgICB9LFxuICAgICAgICBkZWZpbmVQcm9wZXJ0eShfLCBwcm9wLCBkZXNjcmlwdG9yKSB7XG4gICAgICAgICAgICB0YXJnZXQgPz8gKHRhcmdldCA9IGdldHRlcigpKTtcbiAgICAgICAgICAgIHJldHVybiBSZWZsZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgcHJvcCwgZGVzY3JpcHRvcik7XG4gICAgICAgIH0sXG4gICAgfSk7XG59XG5leHBvcnQgZnVuY3Rpb24gc3RyaW5naWZ5UHJpbWl0aXZlKHZhbHVlKSB7XG4gICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gXCJiaWdpbnRcIilcbiAgICAgICAgcmV0dXJuIHZhbHVlLnRvU3RyaW5nKCkgKyBcIm5cIjtcbiAgICBpZiAodHlwZW9mIHZhbHVlID09PSBcInN0cmluZ1wiKVxuICAgICAgICByZXR1cm4gYFwiJHt2YWx1ZX1cImA7XG4gICAgcmV0dXJuIGAke3ZhbHVlfWA7XG59XG5leHBvcnQgZnVuY3Rpb24gb3B0aW9uYWxLZXlzKHNoYXBlKSB7XG4gICAgcmV0dXJuIE9iamVjdC5rZXlzKHNoYXBlKS5maWx0ZXIoKGspID0+IHtcbiAgICAgICAgcmV0dXJuIHNoYXBlW2tdLl96b2Qub3B0aW4gPT09IFwib3B0aW9uYWxcIiAmJiBzaGFwZVtrXS5fem9kLm9wdG91dCA9PT0gXCJvcHRpb25hbFwiO1xuICAgIH0pO1xufVxuZXhwb3J0IGNvbnN0IE5VTUJFUl9GT1JNQVRfUkFOR0VTID0ge1xuICAgIHNhZmVpbnQ6IFtOdW1iZXIuTUlOX1NBRkVfSU5URUdFUiwgTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVJdLFxuICAgIGludDMyOiBbLTIxNDc0ODM2NDgsIDIxNDc0ODM2NDddLFxuICAgIHVpbnQzMjogWzAsIDQyOTQ5NjcyOTVdLFxuICAgIGZsb2F0MzI6IFstMy40MDI4MjM0NjYzODUyODg2ZTM4LCAzLjQwMjgyMzQ2NjM4NTI4ODZlMzhdLFxuICAgIGZsb2F0NjQ6IFstTnVtYmVyLk1BWF9WQUxVRSwgTnVtYmVyLk1BWF9WQUxVRV0sXG59O1xuZXhwb3J0IGNvbnN0IEJJR0lOVF9GT1JNQVRfUkFOR0VTID0ge1xuICAgIGludDY0OiBbLyogQF9fUFVSRV9fKi8gQmlnSW50KFwiLTkyMjMzNzIwMzY4NTQ3NzU4MDhcIiksIC8qIEBfX1BVUkVfXyovIEJpZ0ludChcIjkyMjMzNzIwMzY4NTQ3NzU4MDdcIildLFxuICAgIHVpbnQ2NDogWy8qIEBfX1BVUkVfXyovIEJpZ0ludCgwKSwgLyogQF9fUFVSRV9fKi8gQmlnSW50KFwiMTg0NDY3NDQwNzM3MDk1NTE2MTVcIildLFxufTtcbmV4cG9ydCBmdW5jdGlvbiBwaWNrKHNjaGVtYSwgbWFzaykge1xuICAgIGNvbnN0IG5ld1NoYXBlID0ge307XG4gICAgY29uc3QgY3VyckRlZiA9IHNjaGVtYS5fem9kLmRlZjsgLy8uc2hhcGU7XG4gICAgZm9yIChjb25zdCBrZXkgaW4gbWFzaykge1xuICAgICAgICBpZiAoIShrZXkgaW4gY3VyckRlZi5zaGFwZSkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgVW5yZWNvZ25pemVkIGtleTogXCIke2tleX1cImApO1xuICAgICAgICB9XG4gICAgICAgIGlmICghbWFza1trZXldKVxuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIC8vIHBpY2sga2V5XG4gICAgICAgIG5ld1NoYXBlW2tleV0gPSBjdXJyRGVmLnNoYXBlW2tleV07XG4gICAgfVxuICAgIHJldHVybiBjbG9uZShzY2hlbWEsIHtcbiAgICAgICAgLi4uc2NoZW1hLl96b2QuZGVmLFxuICAgICAgICBzaGFwZTogbmV3U2hhcGUsXG4gICAgICAgIGNoZWNrczogW10sXG4gICAgfSk7XG59XG5leHBvcnQgZnVuY3Rpb24gb21pdChzY2hlbWEsIG1hc2spIHtcbiAgICBjb25zdCBuZXdTaGFwZSA9IHsgLi4uc2NoZW1hLl96b2QuZGVmLnNoYXBlIH07XG4gICAgY29uc3QgY3VyckRlZiA9IHNjaGVtYS5fem9kLmRlZjsgLy8uc2hhcGU7XG4gICAgZm9yIChjb25zdCBrZXkgaW4gbWFzaykge1xuICAgICAgICBpZiAoIShrZXkgaW4gY3VyckRlZi5zaGFwZSkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgVW5yZWNvZ25pemVkIGtleTogXCIke2tleX1cImApO1xuICAgICAgICB9XG4gICAgICAgIGlmICghbWFza1trZXldKVxuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIGRlbGV0ZSBuZXdTaGFwZVtrZXldO1xuICAgIH1cbiAgICByZXR1cm4gY2xvbmUoc2NoZW1hLCB7XG4gICAgICAgIC4uLnNjaGVtYS5fem9kLmRlZixcbiAgICAgICAgc2hhcGU6IG5ld1NoYXBlLFxuICAgICAgICBjaGVja3M6IFtdLFxuICAgIH0pO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGV4dGVuZChzY2hlbWEsIHNoYXBlKSB7XG4gICAgaWYgKCFpc1BsYWluT2JqZWN0KHNoYXBlKSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIGlucHV0IHRvIGV4dGVuZDogZXhwZWN0ZWQgYSBwbGFpbiBvYmplY3RcIik7XG4gICAgfVxuICAgIGNvbnN0IGRlZiA9IHtcbiAgICAgICAgLi4uc2NoZW1hLl96b2QuZGVmLFxuICAgICAgICBnZXQgc2hhcGUoKSB7XG4gICAgICAgICAgICBjb25zdCBfc2hhcGUgPSB7IC4uLnNjaGVtYS5fem9kLmRlZi5zaGFwZSwgLi4uc2hhcGUgfTtcbiAgICAgICAgICAgIGFzc2lnblByb3AodGhpcywgXCJzaGFwZVwiLCBfc2hhcGUpOyAvLyBzZWxmLWNhY2hpbmdcbiAgICAgICAgICAgIHJldHVybiBfc2hhcGU7XG4gICAgICAgIH0sXG4gICAgICAgIGNoZWNrczogW10sIC8vIGRlbGV0ZSBleGlzdGluZyBjaGVja3NcbiAgICB9O1xuICAgIHJldHVybiBjbG9uZShzY2hlbWEsIGRlZik7XG59XG5leHBvcnQgZnVuY3Rpb24gbWVyZ2UoYSwgYikge1xuICAgIHJldHVybiBjbG9uZShhLCB7XG4gICAgICAgIC4uLmEuX3pvZC5kZWYsXG4gICAgICAgIGdldCBzaGFwZSgpIHtcbiAgICAgICAgICAgIGNvbnN0IF9zaGFwZSA9IHsgLi4uYS5fem9kLmRlZi5zaGFwZSwgLi4uYi5fem9kLmRlZi5zaGFwZSB9O1xuICAgICAgICAgICAgYXNzaWduUHJvcCh0aGlzLCBcInNoYXBlXCIsIF9zaGFwZSk7IC8vIHNlbGYtY2FjaGluZ1xuICAgICAgICAgICAgcmV0dXJuIF9zaGFwZTtcbiAgICAgICAgfSxcbiAgICAgICAgY2F0Y2hhbGw6IGIuX3pvZC5kZWYuY2F0Y2hhbGwsXG4gICAgICAgIGNoZWNrczogW10sIC8vIGRlbGV0ZSBleGlzdGluZyBjaGVja3NcbiAgICB9KTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBwYXJ0aWFsKENsYXNzLCBzY2hlbWEsIG1hc2spIHtcbiAgICBjb25zdCBvbGRTaGFwZSA9IHNjaGVtYS5fem9kLmRlZi5zaGFwZTtcbiAgICBjb25zdCBzaGFwZSA9IHsgLi4ub2xkU2hhcGUgfTtcbiAgICBpZiAobWFzaykge1xuICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBtYXNrKSB7XG4gICAgICAgICAgICBpZiAoIShrZXkgaW4gb2xkU2hhcGUpKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBVbnJlY29nbml6ZWQga2V5OiBcIiR7a2V5fVwiYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIW1hc2tba2V5XSlcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIC8vIGlmIChvbGRTaGFwZVtrZXldIS5fem9kLm9wdGluID09PSBcIm9wdGlvbmFsXCIpIGNvbnRpbnVlO1xuICAgICAgICAgICAgc2hhcGVba2V5XSA9IENsYXNzXG4gICAgICAgICAgICAgICAgPyBuZXcgQ2xhc3Moe1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiBcIm9wdGlvbmFsXCIsXG4gICAgICAgICAgICAgICAgICAgIGlubmVyVHlwZTogb2xkU2hhcGVba2V5XSxcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIDogb2xkU2hhcGVba2V5XTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gb2xkU2hhcGUpIHtcbiAgICAgICAgICAgIC8vIGlmIChvbGRTaGFwZVtrZXldIS5fem9kLm9wdGluID09PSBcIm9wdGlvbmFsXCIpIGNvbnRpbnVlO1xuICAgICAgICAgICAgc2hhcGVba2V5XSA9IENsYXNzXG4gICAgICAgICAgICAgICAgPyBuZXcgQ2xhc3Moe1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiBcIm9wdGlvbmFsXCIsXG4gICAgICAgICAgICAgICAgICAgIGlubmVyVHlwZTogb2xkU2hhcGVba2V5XSxcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIDogb2xkU2hhcGVba2V5XTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gY2xvbmUoc2NoZW1hLCB7XG4gICAgICAgIC4uLnNjaGVtYS5fem9kLmRlZixcbiAgICAgICAgc2hhcGUsXG4gICAgICAgIGNoZWNrczogW10sXG4gICAgfSk7XG59XG5leHBvcnQgZnVuY3Rpb24gcmVxdWlyZWQoQ2xhc3MsIHNjaGVtYSwgbWFzaykge1xuICAgIGNvbnN0IG9sZFNoYXBlID0gc2NoZW1hLl96b2QuZGVmLnNoYXBlO1xuICAgIGNvbnN0IHNoYXBlID0geyAuLi5vbGRTaGFwZSB9O1xuICAgIGlmIChtYXNrKSB7XG4gICAgICAgIGZvciAoY29uc3Qga2V5IGluIG1hc2spIHtcbiAgICAgICAgICAgIGlmICghKGtleSBpbiBzaGFwZSkpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFVucmVjb2duaXplZCBrZXk6IFwiJHtrZXl9XCJgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghbWFza1trZXldKVxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgLy8gb3ZlcndyaXRlIHdpdGggbm9uLW9wdGlvbmFsXG4gICAgICAgICAgICBzaGFwZVtrZXldID0gbmV3IENsYXNzKHtcbiAgICAgICAgICAgICAgICB0eXBlOiBcIm5vbm9wdGlvbmFsXCIsXG4gICAgICAgICAgICAgICAgaW5uZXJUeXBlOiBvbGRTaGFwZVtrZXldLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGZvciAoY29uc3Qga2V5IGluIG9sZFNoYXBlKSB7XG4gICAgICAgICAgICAvLyBvdmVyd3JpdGUgd2l0aCBub24tb3B0aW9uYWxcbiAgICAgICAgICAgIHNoYXBlW2tleV0gPSBuZXcgQ2xhc3Moe1xuICAgICAgICAgICAgICAgIHR5cGU6IFwibm9ub3B0aW9uYWxcIixcbiAgICAgICAgICAgICAgICBpbm5lclR5cGU6IG9sZFNoYXBlW2tleV0sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gY2xvbmUoc2NoZW1hLCB7XG4gICAgICAgIC4uLnNjaGVtYS5fem9kLmRlZixcbiAgICAgICAgc2hhcGUsXG4gICAgICAgIC8vIG9wdGlvbmFsOiBbXSxcbiAgICAgICAgY2hlY2tzOiBbXSxcbiAgICB9KTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBhYm9ydGVkKHgsIHN0YXJ0SW5kZXggPSAwKSB7XG4gICAgZm9yIChsZXQgaSA9IHN0YXJ0SW5kZXg7IGkgPCB4Lmlzc3Vlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICBpZiAoeC5pc3N1ZXNbaV0/LmNvbnRpbnVlICE9PSB0cnVlKVxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBwcmVmaXhJc3N1ZXMocGF0aCwgaXNzdWVzKSB7XG4gICAgcmV0dXJuIGlzc3Vlcy5tYXAoKGlzcykgPT4ge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIChfYSA9IGlzcykucGF0aCA/PyAoX2EucGF0aCA9IFtdKTtcbiAgICAgICAgaXNzLnBhdGgudW5zaGlmdChwYXRoKTtcbiAgICAgICAgcmV0dXJuIGlzcztcbiAgICB9KTtcbn1cbmV4cG9ydCBmdW5jdGlvbiB1bndyYXBNZXNzYWdlKG1lc3NhZ2UpIHtcbiAgICByZXR1cm4gdHlwZW9mIG1lc3NhZ2UgPT09IFwic3RyaW5nXCIgPyBtZXNzYWdlIDogbWVzc2FnZT8ubWVzc2FnZTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBmaW5hbGl6ZUlzc3VlKGlzcywgY3R4LCBjb25maWcpIHtcbiAgICBjb25zdCBmdWxsID0geyAuLi5pc3MsIHBhdGg6IGlzcy5wYXRoID8/IFtdIH07XG4gICAgLy8gZm9yIGJhY2t3YXJkcyBjb21wYXRpYmlsaXR5XG4gICAgaWYgKCFpc3MubWVzc2FnZSkge1xuICAgICAgICBjb25zdCBtZXNzYWdlID0gdW53cmFwTWVzc2FnZShpc3MuaW5zdD8uX3pvZC5kZWY/LmVycm9yPy4oaXNzKSkgPz9cbiAgICAgICAgICAgIHVud3JhcE1lc3NhZ2UoY3R4Py5lcnJvcj8uKGlzcykpID8/XG4gICAgICAgICAgICB1bndyYXBNZXNzYWdlKGNvbmZpZy5jdXN0b21FcnJvcj8uKGlzcykpID8/XG4gICAgICAgICAgICB1bndyYXBNZXNzYWdlKGNvbmZpZy5sb2NhbGVFcnJvcj8uKGlzcykpID8/XG4gICAgICAgICAgICBcIkludmFsaWQgaW5wdXRcIjtcbiAgICAgICAgZnVsbC5tZXNzYWdlID0gbWVzc2FnZTtcbiAgICB9XG4gICAgLy8gZGVsZXRlIChmdWxsIGFzIGFueSkuZGVmO1xuICAgIGRlbGV0ZSBmdWxsLmluc3Q7XG4gICAgZGVsZXRlIGZ1bGwuY29udGludWU7XG4gICAgaWYgKCFjdHg/LnJlcG9ydElucHV0KSB7XG4gICAgICAgIGRlbGV0ZSBmdWxsLmlucHV0O1xuICAgIH1cbiAgICByZXR1cm4gZnVsbDtcbn1cbmV4cG9ydCBmdW5jdGlvbiBnZXRTaXphYmxlT3JpZ2luKGlucHV0KSB7XG4gICAgaWYgKGlucHV0IGluc3RhbmNlb2YgU2V0KVxuICAgICAgICByZXR1cm4gXCJzZXRcIjtcbiAgICBpZiAoaW5wdXQgaW5zdGFuY2VvZiBNYXApXG4gICAgICAgIHJldHVybiBcIm1hcFwiO1xuICAgIGlmIChpbnB1dCBpbnN0YW5jZW9mIEZpbGUpXG4gICAgICAgIHJldHVybiBcImZpbGVcIjtcbiAgICByZXR1cm4gXCJ1bmtub3duXCI7XG59XG5leHBvcnQgZnVuY3Rpb24gZ2V0TGVuZ3RoYWJsZU9yaWdpbihpbnB1dCkge1xuICAgIGlmIChBcnJheS5pc0FycmF5KGlucHV0KSlcbiAgICAgICAgcmV0dXJuIFwiYXJyYXlcIjtcbiAgICBpZiAodHlwZW9mIGlucHV0ID09PSBcInN0cmluZ1wiKVxuICAgICAgICByZXR1cm4gXCJzdHJpbmdcIjtcbiAgICByZXR1cm4gXCJ1bmtub3duXCI7XG59XG5leHBvcnQgZnVuY3Rpb24gaXNzdWUoLi4uYXJncykge1xuICAgIGNvbnN0IFtpc3MsIGlucHV0LCBpbnN0XSA9IGFyZ3M7XG4gICAgaWYgKHR5cGVvZiBpc3MgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG1lc3NhZ2U6IGlzcyxcbiAgICAgICAgICAgIGNvZGU6IFwiY3VzdG9tXCIsXG4gICAgICAgICAgICBpbnB1dCxcbiAgICAgICAgICAgIGluc3QsXG4gICAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiB7IC4uLmlzcyB9O1xufVxuZXhwb3J0IGZ1bmN0aW9uIGNsZWFuRW51bShvYmopIHtcbiAgICByZXR1cm4gT2JqZWN0LmVudHJpZXMob2JqKVxuICAgICAgICAuZmlsdGVyKChbaywgX10pID0+IHtcbiAgICAgICAgLy8gcmV0dXJuIHRydWUgaWYgTmFOLCBtZWFuaW5nIGl0J3Mgbm90IGEgbnVtYmVyLCB0aHVzIGEgc3RyaW5nIGtleVxuICAgICAgICByZXR1cm4gTnVtYmVyLmlzTmFOKE51bWJlci5wYXJzZUludChrLCAxMCkpO1xuICAgIH0pXG4gICAgICAgIC5tYXAoKGVsKSA9PiBlbFsxXSk7XG59XG4vLyBpbnN0YW5jZW9mXG5leHBvcnQgY2xhc3MgQ2xhc3Mge1xuICAgIGNvbnN0cnVjdG9yKC4uLl9hcmdzKSB7IH1cbn1cbiIsImV4cG9ydCBjb25zdCAkb3V0cHV0ID0gU3ltYm9sKFwiWm9kT3V0cHV0XCIpO1xuZXhwb3J0IGNvbnN0ICRpbnB1dCA9IFN5bWJvbChcIlpvZElucHV0XCIpO1xuZXhwb3J0IGNsYXNzICRab2RSZWdpc3RyeSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuX21hcCA9IG5ldyBNYXAoKTtcbiAgICAgICAgdGhpcy5faWRtYXAgPSBuZXcgTWFwKCk7XG4gICAgfVxuICAgIGFkZChzY2hlbWEsIC4uLl9tZXRhKSB7XG4gICAgICAgIGNvbnN0IG1ldGEgPSBfbWV0YVswXTtcbiAgICAgICAgdGhpcy5fbWFwLnNldChzY2hlbWEsIG1ldGEpO1xuICAgICAgICBpZiAobWV0YSAmJiB0eXBlb2YgbWV0YSA9PT0gXCJvYmplY3RcIiAmJiBcImlkXCIgaW4gbWV0YSkge1xuICAgICAgICAgICAgaWYgKHRoaXMuX2lkbWFwLmhhcyhtZXRhLmlkKSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgSUQgJHttZXRhLmlkfSBhbHJlYWR5IGV4aXN0cyBpbiB0aGUgcmVnaXN0cnlgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuX2lkbWFwLnNldChtZXRhLmlkLCBzY2hlbWEpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICBjbGVhcigpIHtcbiAgICAgICAgdGhpcy5fbWFwID0gbmV3IE1hcCgpO1xuICAgICAgICB0aGlzLl9pZG1hcCA9IG5ldyBNYXAoKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIHJlbW92ZShzY2hlbWEpIHtcbiAgICAgICAgY29uc3QgbWV0YSA9IHRoaXMuX21hcC5nZXQoc2NoZW1hKTtcbiAgICAgICAgaWYgKG1ldGEgJiYgdHlwZW9mIG1ldGEgPT09IFwib2JqZWN0XCIgJiYgXCJpZFwiIGluIG1ldGEpIHtcbiAgICAgICAgICAgIHRoaXMuX2lkbWFwLmRlbGV0ZShtZXRhLmlkKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9tYXAuZGVsZXRlKHNjaGVtYSk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICBnZXQoc2NoZW1hKSB7XG4gICAgICAgIC8vIHJldHVybiB0aGlzLl9tYXAuZ2V0KHNjaGVtYSkgYXMgYW55O1xuICAgICAgICAvLyBpbmhlcml0IG1ldGFkYXRhXG4gICAgICAgIGNvbnN0IHAgPSBzY2hlbWEuX3pvZC5wYXJlbnQ7XG4gICAgICAgIGlmIChwKSB7XG4gICAgICAgICAgICBjb25zdCBwbSA9IHsgLi4uKHRoaXMuZ2V0KHApID8/IHt9KSB9O1xuICAgICAgICAgICAgZGVsZXRlIHBtLmlkOyAvLyBkbyBub3QgaW5oZXJpdCBpZFxuICAgICAgICAgICAgcmV0dXJuIHsgLi4ucG0sIC4uLnRoaXMuX21hcC5nZXQoc2NoZW1hKSB9O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLl9tYXAuZ2V0KHNjaGVtYSk7XG4gICAgfVxuICAgIGhhcyhzY2hlbWEpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX21hcC5oYXMoc2NoZW1hKTtcbiAgICB9XG59XG4vLyByZWdpc3RyaWVzXG5leHBvcnQgZnVuY3Rpb24gcmVnaXN0cnkoKSB7XG4gICAgcmV0dXJuIG5ldyAkWm9kUmVnaXN0cnkoKTtcbn1cbmV4cG9ydCBjb25zdCBnbG9iYWxSZWdpc3RyeSA9IC8qQF9fUFVSRV9fKi8gcmVnaXN0cnkoKTtcbiIsImltcG9ydCB7ICRab2RSZWdpc3RyeSwgZ2xvYmFsUmVnaXN0cnkgfSBmcm9tIFwiLi9yZWdpc3RyaWVzLmpzXCI7XG5pbXBvcnQgeyBnZXRFbnVtVmFsdWVzIH0gZnJvbSBcIi4vdXRpbC5qc1wiO1xuZXhwb3J0IGNsYXNzIEpTT05TY2hlbWFHZW5lcmF0b3Ige1xuICAgIGNvbnN0cnVjdG9yKHBhcmFtcykge1xuICAgICAgICB0aGlzLmNvdW50ZXIgPSAwO1xuICAgICAgICB0aGlzLm1ldGFkYXRhUmVnaXN0cnkgPSBwYXJhbXM/Lm1ldGFkYXRhID8/IGdsb2JhbFJlZ2lzdHJ5O1xuICAgICAgICB0aGlzLnRhcmdldCA9IHBhcmFtcz8udGFyZ2V0ID8/IFwiZHJhZnQtMjAyMC0xMlwiO1xuICAgICAgICB0aGlzLnVucmVwcmVzZW50YWJsZSA9IHBhcmFtcz8udW5yZXByZXNlbnRhYmxlID8/IFwidGhyb3dcIjtcbiAgICAgICAgdGhpcy5vdmVycmlkZSA9IHBhcmFtcz8ub3ZlcnJpZGUgPz8gKCgpID0+IHsgfSk7XG4gICAgICAgIHRoaXMuaW8gPSBwYXJhbXM/LmlvID8/IFwib3V0cHV0XCI7XG4gICAgICAgIHRoaXMuc2VlbiA9IG5ldyBNYXAoKTtcbiAgICB9XG4gICAgcHJvY2VzcyhzY2hlbWEsIF9wYXJhbXMgPSB7IHBhdGg6IFtdLCBzY2hlbWFQYXRoOiBbXSB9KSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgY29uc3QgZGVmID0gc2NoZW1hLl96b2QuZGVmO1xuICAgICAgICBjb25zdCBmb3JtYXRNYXAgPSB7XG4gICAgICAgICAgICBndWlkOiBcInV1aWRcIixcbiAgICAgICAgICAgIHVybDogXCJ1cmlcIixcbiAgICAgICAgICAgIGRhdGV0aW1lOiBcImRhdGUtdGltZVwiLFxuICAgICAgICAgICAganNvbl9zdHJpbmc6IFwianNvbi1zdHJpbmdcIixcbiAgICAgICAgICAgIHJlZ2V4OiBcIlwiLCAvLyBkbyBub3Qgc2V0XG4gICAgICAgIH07XG4gICAgICAgIC8vIGNoZWNrIGZvciBzY2hlbWEgaW4gc2VlbnNcbiAgICAgICAgY29uc3Qgc2VlbiA9IHRoaXMuc2Vlbi5nZXQoc2NoZW1hKTtcbiAgICAgICAgaWYgKHNlZW4pIHtcbiAgICAgICAgICAgIHNlZW4uY291bnQrKztcbiAgICAgICAgICAgIC8vIGNoZWNrIGlmIGN5Y2xlXG4gICAgICAgICAgICBjb25zdCBpc0N5Y2xlID0gX3BhcmFtcy5zY2hlbWFQYXRoLmluY2x1ZGVzKHNjaGVtYSk7XG4gICAgICAgICAgICBpZiAoaXNDeWNsZSkge1xuICAgICAgICAgICAgICAgIHNlZW4uY3ljbGUgPSBfcGFyYW1zLnBhdGg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gc2Vlbi5zY2hlbWE7XG4gICAgICAgIH1cbiAgICAgICAgLy8gaW5pdGlhbGl6ZVxuICAgICAgICBjb25zdCByZXN1bHQgPSB7IHNjaGVtYToge30sIGNvdW50OiAxLCBjeWNsZTogdW5kZWZpbmVkLCBwYXRoOiBfcGFyYW1zLnBhdGggfTtcbiAgICAgICAgdGhpcy5zZWVuLnNldChzY2hlbWEsIHJlc3VsdCk7XG4gICAgICAgIC8vIGN1c3RvbSBtZXRob2Qgb3ZlcnJpZGVzIGRlZmF1bHQgYmVoYXZpb3JcbiAgICAgICAgY29uc3Qgb3ZlcnJpZGVTY2hlbWEgPSBzY2hlbWEuX3pvZC50b0pTT05TY2hlbWE/LigpO1xuICAgICAgICBpZiAob3ZlcnJpZGVTY2hlbWEpIHtcbiAgICAgICAgICAgIHJlc3VsdC5zY2hlbWEgPSBvdmVycmlkZVNjaGVtYTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IHBhcmFtcyA9IHtcbiAgICAgICAgICAgICAgICAuLi5fcGFyYW1zLFxuICAgICAgICAgICAgICAgIHNjaGVtYVBhdGg6IFsuLi5fcGFyYW1zLnNjaGVtYVBhdGgsIHNjaGVtYV0sXG4gICAgICAgICAgICAgICAgcGF0aDogX3BhcmFtcy5wYXRoLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNvbnN0IHBhcmVudCA9IHNjaGVtYS5fem9kLnBhcmVudDtcbiAgICAgICAgICAgIGlmIChwYXJlbnQpIHtcbiAgICAgICAgICAgICAgICAvLyBzY2hlbWEgd2FzIGNsb25lZCBmcm9tIGFub3RoZXIgc2NoZW1hXG4gICAgICAgICAgICAgICAgcmVzdWx0LnJlZiA9IHBhcmVudDtcbiAgICAgICAgICAgICAgICB0aGlzLnByb2Nlc3MocGFyZW50LCBwYXJhbXMpO1xuICAgICAgICAgICAgICAgIHRoaXMuc2Vlbi5nZXQocGFyZW50KS5pc1BhcmVudCA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zdCBfanNvbiA9IHJlc3VsdC5zY2hlbWE7XG4gICAgICAgICAgICAgICAgc3dpdGNoIChkZWYudHlwZSkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIFwic3RyaW5nXCI6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGpzb24gPSBfanNvbjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGpzb24udHlwZSA9IFwic3RyaW5nXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB7IG1pbmltdW0sIG1heGltdW0sIGZvcm1hdCwgcGF0dGVybnMsIGNvbnRlbnRFbmNvZGluZyB9ID0gc2NoZW1hLl96b2RcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYmFnO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBtaW5pbXVtID09PSBcIm51bWJlclwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGpzb24ubWluTGVuZ3RoID0gbWluaW11bTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgbWF4aW11bSA9PT0gXCJudW1iZXJcIilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBqc29uLm1heExlbmd0aCA9IG1heGltdW07XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBjdXN0b20gcGF0dGVybiBvdmVycmlkZXMgZm9ybWF0XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZm9ybWF0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAganNvbi5mb3JtYXQgPSBmb3JtYXRNYXBbZm9ybWF0XSA/PyBmb3JtYXQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGpzb24uZm9ybWF0ID09PSBcIlwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUganNvbi5mb3JtYXQ7IC8vIGVtcHR5IGZvcm1hdCBpcyBub3QgdmFsaWRcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjb250ZW50RW5jb2RpbmcpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAganNvbi5jb250ZW50RW5jb2RpbmcgPSBjb250ZW50RW5jb2Rpbmc7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocGF0dGVybnMgJiYgcGF0dGVybnMuc2l6ZSA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCByZWdleGVzID0gWy4uLnBhdHRlcm5zXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVnZXhlcy5sZW5ndGggPT09IDEpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGpzb24ucGF0dGVybiA9IHJlZ2V4ZXNbMF0uc291cmNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHJlZ2V4ZXMubGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQuc2NoZW1hLmFsbE9mID0gW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4ucmVnZXhlcy5tYXAoKHJlZ2V4KSA9PiAoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLih0aGlzLnRhcmdldCA9PT0gXCJkcmFmdC03XCIgPyB7IHR5cGU6IFwic3RyaW5nXCIgfSA6IHt9KSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXR0ZXJuOiByZWdleC5zb3VyY2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcIm51bWJlclwiOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBqc29uID0gX2pzb247XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB7IG1pbmltdW0sIG1heGltdW0sIGZvcm1hdCwgbXVsdGlwbGVPZiwgZXhjbHVzaXZlTWF4aW11bSwgZXhjbHVzaXZlTWluaW11bSB9ID0gc2NoZW1hLl96b2QuYmFnO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBmb3JtYXQgPT09IFwic3RyaW5nXCIgJiYgZm9ybWF0LmluY2x1ZGVzKFwiaW50XCIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGpzb24udHlwZSA9IFwiaW50ZWdlclwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGpzb24udHlwZSA9IFwibnVtYmVyXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGV4Y2x1c2l2ZU1pbmltdW0gPT09IFwibnVtYmVyXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAganNvbi5leGNsdXNpdmVNaW5pbXVtID0gZXhjbHVzaXZlTWluaW11bTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgbWluaW11bSA9PT0gXCJudW1iZXJcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGpzb24ubWluaW11bSA9IG1pbmltdW07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBleGNsdXNpdmVNaW5pbXVtID09PSBcIm51bWJlclwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChleGNsdXNpdmVNaW5pbXVtID49IG1pbmltdW0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUganNvbi5taW5pbXVtO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUganNvbi5leGNsdXNpdmVNaW5pbXVtO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgZXhjbHVzaXZlTWF4aW11bSA9PT0gXCJudW1iZXJcIilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBqc29uLmV4Y2x1c2l2ZU1heGltdW0gPSBleGNsdXNpdmVNYXhpbXVtO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBtYXhpbXVtID09PSBcIm51bWJlclwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAganNvbi5tYXhpbXVtID0gbWF4aW11bTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGV4Y2x1c2l2ZU1heGltdW0gPT09IFwibnVtYmVyXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGV4Y2x1c2l2ZU1heGltdW0gPD0gbWF4aW11bSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBqc29uLm1heGltdW07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBqc29uLmV4Y2x1c2l2ZU1heGltdW07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBtdWx0aXBsZU9mID09PSBcIm51bWJlclwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGpzb24ubXVsdGlwbGVPZiA9IG11bHRpcGxlT2Y7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXNlIFwiYm9vbGVhblwiOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBqc29uID0gX2pzb247XG4gICAgICAgICAgICAgICAgICAgICAgICBqc29uLnR5cGUgPSBcImJvb2xlYW5cIjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJiaWdpbnRcIjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMudW5yZXByZXNlbnRhYmxlID09PSBcInRocm93XCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJCaWdJbnQgY2Fubm90IGJlIHJlcHJlc2VudGVkIGluIEpTT04gU2NoZW1hXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcInN5bWJvbFwiOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy51bnJlcHJlc2VudGFibGUgPT09IFwidGhyb3dcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlN5bWJvbHMgY2Fubm90IGJlIHJlcHJlc2VudGVkIGluIEpTT04gU2NoZW1hXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcIm51bGxcIjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgX2pzb24udHlwZSA9IFwibnVsbFwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcImFueVwiOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXNlIFwidW5rbm93blwiOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXNlIFwidW5kZWZpbmVkXCI6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnVucmVwcmVzZW50YWJsZSA9PT0gXCJ0aHJvd1wiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVW5kZWZpbmVkIGNhbm5vdCBiZSByZXByZXNlbnRlZCBpbiBKU09OIFNjaGVtYVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJ2b2lkXCI6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnVucmVwcmVzZW50YWJsZSA9PT0gXCJ0aHJvd1wiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVm9pZCBjYW5ub3QgYmUgcmVwcmVzZW50ZWQgaW4gSlNPTiBTY2hlbWFcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXNlIFwibmV2ZXJcIjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgX2pzb24ubm90ID0ge307XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXNlIFwiZGF0ZVwiOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy51bnJlcHJlc2VudGFibGUgPT09IFwidGhyb3dcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkRhdGUgY2Fubm90IGJlIHJlcHJlc2VudGVkIGluIEpTT04gU2NoZW1hXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcImFycmF5XCI6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGpzb24gPSBfanNvbjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHsgbWluaW11bSwgbWF4aW11bSB9ID0gc2NoZW1hLl96b2QuYmFnO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBtaW5pbXVtID09PSBcIm51bWJlclwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGpzb24ubWluSXRlbXMgPSBtaW5pbXVtO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBtYXhpbXVtID09PSBcIm51bWJlclwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGpzb24ubWF4SXRlbXMgPSBtYXhpbXVtO1xuICAgICAgICAgICAgICAgICAgICAgICAganNvbi50eXBlID0gXCJhcnJheVwiO1xuICAgICAgICAgICAgICAgICAgICAgICAganNvbi5pdGVtcyA9IHRoaXMucHJvY2VzcyhkZWYuZWxlbWVudCwgeyAuLi5wYXJhbXMsIHBhdGg6IFsuLi5wYXJhbXMucGF0aCwgXCJpdGVtc1wiXSB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJvYmplY3RcIjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QganNvbiA9IF9qc29uO1xuICAgICAgICAgICAgICAgICAgICAgICAganNvbi50eXBlID0gXCJvYmplY3RcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGpzb24ucHJvcGVydGllcyA9IHt9O1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2hhcGUgPSBkZWYuc2hhcGU7IC8vIHBhcmFtcy5zaGFwZUNhY2hlLmdldChzY2hlbWEpITtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3Qga2V5IGluIHNoYXBlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAganNvbi5wcm9wZXJ0aWVzW2tleV0gPSB0aGlzLnByb2Nlc3Moc2hhcGVba2V5XSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5wYXJhbXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhdGg6IFsuLi5wYXJhbXMucGF0aCwgXCJwcm9wZXJ0aWVzXCIsIGtleV0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyByZXF1aXJlZCBrZXlzXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBhbGxLZXlzID0gbmV3IFNldChPYmplY3Qua2V5cyhzaGFwZSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uc3Qgb3B0aW9uYWxLZXlzID0gbmV3IFNldChkZWYub3B0aW9uYWwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVxdWlyZWRLZXlzID0gbmV3IFNldChbLi4uYWxsS2V5c10uZmlsdGVyKChrZXkpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB2ID0gZGVmLnNoYXBlW2tleV0uX3pvZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5pbyA9PT0gXCJpbnB1dFwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB2Lm9wdGluID09PSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdi5vcHRvdXQgPT09IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVxdWlyZWRLZXlzLnNpemUgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAganNvbi5yZXF1aXJlZCA9IEFycmF5LmZyb20ocmVxdWlyZWRLZXlzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNhdGNoYWxsXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGVmLmNhdGNoYWxsPy5fem9kLmRlZi50eXBlID09PSBcIm5ldmVyXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzdHJpY3RcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBqc29uLmFkZGl0aW9uYWxQcm9wZXJ0aWVzID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICghZGVmLmNhdGNoYWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmVndWxhclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmlvID09PSBcIm91dHB1dFwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBqc29uLmFkZGl0aW9uYWxQcm9wZXJ0aWVzID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChkZWYuY2F0Y2hhbGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBqc29uLmFkZGl0aW9uYWxQcm9wZXJ0aWVzID0gdGhpcy5wcm9jZXNzKGRlZi5jYXRjaGFsbCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5wYXJhbXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhdGg6IFsuLi5wYXJhbXMucGF0aCwgXCJhZGRpdGlvbmFsUHJvcGVydGllc1wiXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJ1bmlvblwiOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBqc29uID0gX2pzb247XG4gICAgICAgICAgICAgICAgICAgICAgICBqc29uLmFueU9mID0gZGVmLm9wdGlvbnMubWFwKCh4LCBpKSA9PiB0aGlzLnByb2Nlc3MoeCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLnBhcmFtcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXRoOiBbLi4ucGFyYW1zLnBhdGgsIFwiYW55T2ZcIiwgaV0sXG4gICAgICAgICAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXNlIFwiaW50ZXJzZWN0aW9uXCI6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGpzb24gPSBfanNvbjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGEgPSB0aGlzLnByb2Nlc3MoZGVmLmxlZnQsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5wYXJhbXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGF0aDogWy4uLnBhcmFtcy5wYXRoLCBcImFsbE9mXCIsIDBdLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBiID0gdGhpcy5wcm9jZXNzKGRlZi5yaWdodCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLnBhcmFtcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXRoOiBbLi4ucGFyYW1zLnBhdGgsIFwiYWxsT2ZcIiwgMV0sXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGlzU2ltcGxlSW50ZXJzZWN0aW9uID0gKHZhbCkgPT4gXCJhbGxPZlwiIGluIHZhbCAmJiBPYmplY3Qua2V5cyh2YWwpLmxlbmd0aCA9PT0gMTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGFsbE9mID0gW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLihpc1NpbXBsZUludGVyc2VjdGlvbihhKSA/IGEuYWxsT2YgOiBbYV0pLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLihpc1NpbXBsZUludGVyc2VjdGlvbihiKSA/IGIuYWxsT2YgOiBbYl0pLFxuICAgICAgICAgICAgICAgICAgICAgICAgXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGpzb24uYWxsT2YgPSBhbGxPZjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJ0dXBsZVwiOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBqc29uID0gX2pzb247XG4gICAgICAgICAgICAgICAgICAgICAgICBqc29uLnR5cGUgPSBcImFycmF5XCI7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBwcmVmaXhJdGVtcyA9IGRlZi5pdGVtcy5tYXAoKHgsIGkpID0+IHRoaXMucHJvY2Vzcyh4LCB7IC4uLnBhcmFtcywgcGF0aDogWy4uLnBhcmFtcy5wYXRoLCBcInByZWZpeEl0ZW1zXCIsIGldIH0pKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnRhcmdldCA9PT0gXCJkcmFmdC0yMDIwLTEyXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBqc29uLnByZWZpeEl0ZW1zID0gcHJlZml4SXRlbXM7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBqc29uLml0ZW1zID0gcHJlZml4SXRlbXM7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGVmLnJlc3QpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCByZXN0ID0gdGhpcy5wcm9jZXNzKGRlZi5yZXN0LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLnBhcmFtcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGF0aDogWy4uLnBhcmFtcy5wYXRoLCBcIml0ZW1zXCJdLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnRhcmdldCA9PT0gXCJkcmFmdC0yMDIwLTEyXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAganNvbi5pdGVtcyA9IHJlc3Q7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBqc29uLmFkZGl0aW9uYWxJdGVtcyA9IHJlc3Q7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gYWRkaXRpb25hbEl0ZW1zXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGVmLnJlc3QpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBqc29uLml0ZW1zID0gdGhpcy5wcm9jZXNzKGRlZi5yZXN0LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLnBhcmFtcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGF0aDogWy4uLnBhcmFtcy5wYXRoLCBcIml0ZW1zXCJdLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gbGVuZ3RoXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB7IG1pbmltdW0sIG1heGltdW0gfSA9IHNjaGVtYS5fem9kLmJhZztcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgbWluaW11bSA9PT0gXCJudW1iZXJcIilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBqc29uLm1pbkl0ZW1zID0gbWluaW11bTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgbWF4aW11bSA9PT0gXCJudW1iZXJcIilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBqc29uLm1heEl0ZW1zID0gbWF4aW11bTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJyZWNvcmRcIjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QganNvbiA9IF9qc29uO1xuICAgICAgICAgICAgICAgICAgICAgICAganNvbi50eXBlID0gXCJvYmplY3RcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGpzb24ucHJvcGVydHlOYW1lcyA9IHRoaXMucHJvY2VzcyhkZWYua2V5VHlwZSwgeyAuLi5wYXJhbXMsIHBhdGg6IFsuLi5wYXJhbXMucGF0aCwgXCJwcm9wZXJ0eU5hbWVzXCJdIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAganNvbi5hZGRpdGlvbmFsUHJvcGVydGllcyA9IHRoaXMucHJvY2VzcyhkZWYudmFsdWVUeXBlLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4ucGFyYW1zLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhdGg6IFsuLi5wYXJhbXMucGF0aCwgXCJhZGRpdGlvbmFsUHJvcGVydGllc1wiXSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcIm1hcFwiOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy51bnJlcHJlc2VudGFibGUgPT09IFwidGhyb3dcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIk1hcCBjYW5ub3QgYmUgcmVwcmVzZW50ZWQgaW4gSlNPTiBTY2hlbWFcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXNlIFwic2V0XCI6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnVucmVwcmVzZW50YWJsZSA9PT0gXCJ0aHJvd1wiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiU2V0IGNhbm5vdCBiZSByZXByZXNlbnRlZCBpbiBKU09OIFNjaGVtYVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJlbnVtXCI6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGpzb24gPSBfanNvbjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHZhbHVlcyA9IGdldEVudW1WYWx1ZXMoZGVmLmVudHJpZXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gTnVtYmVyIGVudW1zIGNhbiBoYXZlIGJvdGggc3RyaW5nIGFuZCBudW1iZXIgdmFsdWVzXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWVzLmV2ZXJ5KCh2KSA9PiB0eXBlb2YgdiA9PT0gXCJudW1iZXJcIikpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAganNvbi50eXBlID0gXCJudW1iZXJcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZXMuZXZlcnkoKHYpID0+IHR5cGVvZiB2ID09PSBcInN0cmluZ1wiKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBqc29uLnR5cGUgPSBcInN0cmluZ1wiO1xuICAgICAgICAgICAgICAgICAgICAgICAganNvbi5lbnVtID0gdmFsdWVzO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcImxpdGVyYWxcIjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QganNvbiA9IF9qc29uO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdmFscyA9IFtdO1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCB2YWwgb2YgZGVmLnZhbHVlcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWwgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy51bnJlcHJlc2VudGFibGUgPT09IFwidGhyb3dcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTGl0ZXJhbCBgdW5kZWZpbmVkYCBjYW5ub3QgYmUgcmVwcmVzZW50ZWQgaW4gSlNPTiBTY2hlbWFcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBkbyBub3QgYWRkIHRvIHZhbHNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICh0eXBlb2YgdmFsID09PSBcImJpZ2ludFwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnVucmVwcmVzZW50YWJsZSA9PT0gXCJ0aHJvd1wiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJCaWdJbnQgbGl0ZXJhbHMgY2Fubm90IGJlIHJlcHJlc2VudGVkIGluIEpTT04gU2NoZW1hXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFscy5wdXNoKE51bWJlcih2YWwpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFscy5wdXNoKHZhbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZG8gbm90aGluZyAoYW4gdW5kZWZpbmVkIGxpdGVyYWwgd2FzIHN0cmlwcGVkKVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAodmFscy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB2YWwgPSB2YWxzWzBdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGpzb24udHlwZSA9IHZhbCA9PT0gbnVsbCA/IFwibnVsbFwiIDogdHlwZW9mIHZhbDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBqc29uLmNvbnN0ID0gdmFsO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHMuZXZlcnkoKHYpID0+IHR5cGVvZiB2ID09PSBcIm51bWJlclwiKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAganNvbi50eXBlID0gXCJudW1iZXJcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodmFscy5ldmVyeSgodikgPT4gdHlwZW9mIHYgPT09IFwic3RyaW5nXCIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBqc29uLnR5cGUgPSBcInN0cmluZ1wiO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWxzLmV2ZXJ5KCh2KSA9PiB0eXBlb2YgdiA9PT0gXCJib29sZWFuXCIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBqc29uLnR5cGUgPSBcInN0cmluZ1wiO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWxzLmV2ZXJ5KCh2KSA9PiB2ID09PSBudWxsKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAganNvbi50eXBlID0gXCJudWxsXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAganNvbi5lbnVtID0gdmFscztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJmaWxlXCI6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGpzb24gPSBfanNvbjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGZpbGUgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJzdHJpbmdcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3JtYXQ6IFwiYmluYXJ5XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudEVuY29kaW5nOiBcImJpbmFyeVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHsgbWluaW11bSwgbWF4aW11bSwgbWltZSB9ID0gc2NoZW1hLl96b2QuYmFnO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1pbmltdW0gIT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWxlLm1pbkxlbmd0aCA9IG1pbmltdW07XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobWF4aW11bSAhPT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGUubWF4TGVuZ3RoID0gbWF4aW11bTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtaW1lKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1pbWUubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGUuY29udGVudE1lZGlhVHlwZSA9IG1pbWVbMF07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE9iamVjdC5hc3NpZ24oanNvbiwgZmlsZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBqc29uLmFueU9mID0gbWltZS5tYXAoKG0pID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG1GaWxlID0geyAuLi5maWxlLCBjb250ZW50TWVkaWFUeXBlOiBtIH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbUZpbGU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIE9iamVjdC5hc3NpZ24oanNvbiwgZmlsZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiAodGhpcy51bnJlcHJlc2VudGFibGUgPT09IFwidGhyb3dcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gICB0aHJvdyBuZXcgRXJyb3IoXCJGaWxlIGNhbm5vdCBiZSByZXByZXNlbnRlZCBpbiBKU09OIFNjaGVtYVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJ0cmFuc2Zvcm1cIjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMudW5yZXByZXNlbnRhYmxlID09PSBcInRocm93XCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJUcmFuc2Zvcm1zIGNhbm5vdCBiZSByZXByZXNlbnRlZCBpbiBKU09OIFNjaGVtYVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJudWxsYWJsZVwiOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpbm5lciA9IHRoaXMucHJvY2VzcyhkZWYuaW5uZXJUeXBlLCBwYXJhbXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgX2pzb24uYW55T2YgPSBbaW5uZXIsIHsgdHlwZTogXCJudWxsXCIgfV07XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXNlIFwibm9ub3B0aW9uYWxcIjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9jZXNzKGRlZi5pbm5lclR5cGUsIHBhcmFtcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQucmVmID0gZGVmLmlubmVyVHlwZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJzdWNjZXNzXCI6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGpzb24gPSBfanNvbjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGpzb24udHlwZSA9IFwiYm9vbGVhblwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcImRlZmF1bHRcIjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9jZXNzKGRlZi5pbm5lclR5cGUsIHBhcmFtcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQucmVmID0gZGVmLmlubmVyVHlwZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9qc29uLmRlZmF1bHQgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGRlZi5kZWZhdWx0VmFsdWUpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJwcmVmYXVsdFwiOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByb2Nlc3MoZGVmLmlubmVyVHlwZSwgcGFyYW1zKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC5yZWYgPSBkZWYuaW5uZXJUeXBlO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuaW8gPT09IFwiaW5wdXRcIilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfanNvbi5fcHJlZmF1bHQgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGRlZi5kZWZhdWx0VmFsdWUpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJjYXRjaFwiOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB1c2UgY29uZGl0aW9uYWxzXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByb2Nlc3MoZGVmLmlubmVyVHlwZSwgcGFyYW1zKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC5yZWYgPSBkZWYuaW5uZXJUeXBlO1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGNhdGNoVmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhdGNoVmFsdWUgPSBkZWYuY2F0Y2hWYWx1ZSh1bmRlZmluZWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgY2F0Y2gge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkR5bmFtaWMgY2F0Y2ggdmFsdWVzIGFyZSBub3Qgc3VwcG9ydGVkIGluIEpTT04gU2NoZW1hXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgX2pzb24uZGVmYXVsdCA9IGNhdGNoVmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXNlIFwibmFuXCI6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnVucmVwcmVzZW50YWJsZSA9PT0gXCJ0aHJvd1wiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTmFOIGNhbm5vdCBiZSByZXByZXNlbnRlZCBpbiBKU09OIFNjaGVtYVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJ0ZW1wbGF0ZV9saXRlcmFsXCI6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGpzb24gPSBfanNvbjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHBhdHRlcm4gPSBzY2hlbWEuX3pvZC5wYXR0ZXJuO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFwYXR0ZXJuKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlBhdHRlcm4gbm90IGZvdW5kIGluIHRlbXBsYXRlIGxpdGVyYWxcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICBqc29uLnR5cGUgPSBcInN0cmluZ1wiO1xuICAgICAgICAgICAgICAgICAgICAgICAganNvbi5wYXR0ZXJuID0gcGF0dGVybi5zb3VyY2U7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXNlIFwicGlwZVwiOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpbm5lclR5cGUgPSB0aGlzLmlvID09PSBcImlucHV0XCIgPyAoZGVmLmluLl96b2QuZGVmLnR5cGUgPT09IFwidHJhbnNmb3JtXCIgPyBkZWYub3V0IDogZGVmLmluKSA6IGRlZi5vdXQ7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByb2Nlc3MoaW5uZXJUeXBlLCBwYXJhbXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnJlZiA9IGlubmVyVHlwZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJyZWFkb25seVwiOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByb2Nlc3MoZGVmLmlubmVyVHlwZSwgcGFyYW1zKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC5yZWYgPSBkZWYuaW5uZXJUeXBlO1xuICAgICAgICAgICAgICAgICAgICAgICAgX2pzb24ucmVhZE9ubHkgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgLy8gcGFzc3Rocm91Z2ggdHlwZXNcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcInByb21pc2VcIjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9jZXNzKGRlZi5pbm5lclR5cGUsIHBhcmFtcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQucmVmID0gZGVmLmlubmVyVHlwZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJvcHRpb25hbFwiOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByb2Nlc3MoZGVmLmlubmVyVHlwZSwgcGFyYW1zKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC5yZWYgPSBkZWYuaW5uZXJUeXBlO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcImxhenlcIjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaW5uZXJUeXBlID0gc2NoZW1hLl96b2QuaW5uZXJUeXBlO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9jZXNzKGlubmVyVHlwZSwgcGFyYW1zKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC5yZWYgPSBpbm5lclR5cGU7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXNlIFwiY3VzdG9tXCI6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnVucmVwcmVzZW50YWJsZSA9PT0gXCJ0aHJvd1wiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQ3VzdG9tIHR5cGVzIGNhbm5vdCBiZSByZXByZXNlbnRlZCBpbiBKU09OIFNjaGVtYVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBtZXRhZGF0YVxuICAgICAgICBjb25zdCBtZXRhID0gdGhpcy5tZXRhZGF0YVJlZ2lzdHJ5LmdldChzY2hlbWEpO1xuICAgICAgICBpZiAobWV0YSlcbiAgICAgICAgICAgIE9iamVjdC5hc3NpZ24ocmVzdWx0LnNjaGVtYSwgbWV0YSk7XG4gICAgICAgIGlmICh0aGlzLmlvID09PSBcImlucHV0XCIgJiYgaXNUcmFuc2Zvcm1pbmcoc2NoZW1hKSkge1xuICAgICAgICAgICAgLy8gZXhhbXBsZXMvZGVmYXVsdHMgb25seSBhcHBseSB0byBvdXRwdXQgdHlwZSBvZiBwaXBlXG4gICAgICAgICAgICBkZWxldGUgcmVzdWx0LnNjaGVtYS5leGFtcGxlcztcbiAgICAgICAgICAgIGRlbGV0ZSByZXN1bHQuc2NoZW1hLmRlZmF1bHQ7XG4gICAgICAgIH1cbiAgICAgICAgLy8gc2V0IHByZWZhdWx0IGFzIGRlZmF1bHRcbiAgICAgICAgaWYgKHRoaXMuaW8gPT09IFwiaW5wdXRcIiAmJiByZXN1bHQuc2NoZW1hLl9wcmVmYXVsdClcbiAgICAgICAgICAgIChfYSA9IHJlc3VsdC5zY2hlbWEpLmRlZmF1bHQgPz8gKF9hLmRlZmF1bHQgPSByZXN1bHQuc2NoZW1hLl9wcmVmYXVsdCk7XG4gICAgICAgIGRlbGV0ZSByZXN1bHQuc2NoZW1hLl9wcmVmYXVsdDtcbiAgICAgICAgLy8gcHVsbGluZyBmcmVzaCBmcm9tIHRoaXMuc2VlbiBpbiBjYXNlIGl0IHdhcyBvdmVyd3JpdHRlblxuICAgICAgICBjb25zdCBfcmVzdWx0ID0gdGhpcy5zZWVuLmdldChzY2hlbWEpO1xuICAgICAgICByZXR1cm4gX3Jlc3VsdC5zY2hlbWE7XG4gICAgfVxuICAgIGVtaXQoc2NoZW1hLCBfcGFyYW1zKSB7XG4gICAgICAgIGNvbnN0IHBhcmFtcyA9IHtcbiAgICAgICAgICAgIGN5Y2xlczogX3BhcmFtcz8uY3ljbGVzID8/IFwicmVmXCIsXG4gICAgICAgICAgICByZXVzZWQ6IF9wYXJhbXM/LnJldXNlZCA/PyBcImlubGluZVwiLFxuICAgICAgICAgICAgLy8gdW5yZXByZXNlbnRhYmxlOiBfcGFyYW1zPy51bnJlcHJlc2VudGFibGUgPz8gXCJ0aHJvd1wiLFxuICAgICAgICAgICAgLy8gdXJpOiBfcGFyYW1zPy51cmkgPz8gKChpZCkgPT4gYCR7aWR9YCksXG4gICAgICAgICAgICBleHRlcm5hbDogX3BhcmFtcz8uZXh0ZXJuYWwgPz8gdW5kZWZpbmVkLFxuICAgICAgICB9O1xuICAgICAgICAvLyBpdGVyYXRlIG92ZXIgc2VlbiBtYXA7XG4gICAgICAgIGNvbnN0IHJvb3QgPSB0aGlzLnNlZW4uZ2V0KHNjaGVtYSk7XG4gICAgICAgIGlmICghcm9vdClcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlVucHJvY2Vzc2VkIHNjaGVtYS4gVGhpcyBpcyBhIGJ1ZyBpbiBab2QuXCIpO1xuICAgICAgICAvLyBpbml0aWFsaXplIHJlc3VsdCB3aXRoIHJvb3Qgc2NoZW1hIGZpZWxkc1xuICAgICAgICAvLyBPYmplY3QuYXNzaWduKHJlc3VsdCwgc2Vlbi5jYWNoZWQpO1xuICAgICAgICAvLyByZXR1cm5zIGEgcmVmIHRvIHRoZSBzY2hlbWFcbiAgICAgICAgLy8gZGVmSWQgd2lsbCBiZSBlbXB0eSBpZiB0aGUgcmVmIHBvaW50cyB0byBhbiBleHRlcm5hbCBzY2hlbWEgKG9yICMpXG4gICAgICAgIGNvbnN0IG1ha2VVUkkgPSAoZW50cnkpID0+IHtcbiAgICAgICAgICAgIC8vIGNvbXBhcmluZyB0aGUgc2VlbiBvYmplY3RzIGJlY2F1c2Ugc29tZXRpbWVzXG4gICAgICAgICAgICAvLyBtdWx0aXBsZSBzY2hlbWFzIG1hcCB0byB0aGUgc2FtZSBzZWVuIG9iamVjdC5cbiAgICAgICAgICAgIC8vIGUuZy4gbGF6eVxuICAgICAgICAgICAgLy8gZXh0ZXJuYWwgaXMgY29uZmlndXJlZFxuICAgICAgICAgICAgY29uc3QgZGVmc1NlZ21lbnQgPSB0aGlzLnRhcmdldCA9PT0gXCJkcmFmdC0yMDIwLTEyXCIgPyBcIiRkZWZzXCIgOiBcImRlZmluaXRpb25zXCI7XG4gICAgICAgICAgICBpZiAocGFyYW1zLmV4dGVybmFsKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZXh0ZXJuYWxJZCA9IHBhcmFtcy5leHRlcm5hbC5yZWdpc3RyeS5nZXQoZW50cnlbMF0pPy5pZDsgLy8gPz8gXCJfX3NoYXJlZFwiOy8vIGBfX3NjaGVtYSR7dGhpcy5jb3VudGVyKyt9YDtcbiAgICAgICAgICAgICAgICAvLyBjaGVjayBpZiBzY2hlbWEgaXMgaW4gdGhlIGV4dGVybmFsIHJlZ2lzdHJ5XG4gICAgICAgICAgICAgICAgY29uc3QgdXJpR2VuZXJhdG9yID0gcGFyYW1zLmV4dGVybmFsLnVyaSA/PyAoKGlkKSA9PiBpZCk7XG4gICAgICAgICAgICAgICAgaWYgKGV4dGVybmFsSWQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsgcmVmOiB1cmlHZW5lcmF0b3IoZXh0ZXJuYWxJZCkgfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gb3RoZXJ3aXNlLCBhZGQgdG8gX19zaGFyZWRcbiAgICAgICAgICAgICAgICBjb25zdCBpZCA9IGVudHJ5WzFdLmRlZklkID8/IGVudHJ5WzFdLnNjaGVtYS5pZCA/PyBgc2NoZW1hJHt0aGlzLmNvdW50ZXIrK31gO1xuICAgICAgICAgICAgICAgIGVudHJ5WzFdLmRlZklkID0gaWQ7IC8vIHNldCBkZWZJZCBzbyBpdCB3aWxsIGJlIHJldXNlZCBpZiBuZWVkZWRcbiAgICAgICAgICAgICAgICByZXR1cm4geyBkZWZJZDogaWQsIHJlZjogYCR7dXJpR2VuZXJhdG9yKFwiX19zaGFyZWRcIil9Iy8ke2RlZnNTZWdtZW50fS8ke2lkfWAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChlbnRyeVsxXSA9PT0gcm9vdCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB7IHJlZjogXCIjXCIgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIHNlbGYtY29udGFpbmVkIHNjaGVtYVxuICAgICAgICAgICAgY29uc3QgdXJpUHJlZml4ID0gYCNgO1xuICAgICAgICAgICAgY29uc3QgZGVmVXJpUHJlZml4ID0gYCR7dXJpUHJlZml4fS8ke2RlZnNTZWdtZW50fS9gO1xuICAgICAgICAgICAgY29uc3QgZGVmSWQgPSBlbnRyeVsxXS5zY2hlbWEuaWQgPz8gYF9fc2NoZW1hJHt0aGlzLmNvdW50ZXIrK31gO1xuICAgICAgICAgICAgcmV0dXJuIHsgZGVmSWQsIHJlZjogZGVmVXJpUHJlZml4ICsgZGVmSWQgfTtcbiAgICAgICAgfTtcbiAgICAgICAgLy8gc3RvcmVkIGNhY2hlZCB2ZXJzaW9uIGluIGBkZWZgIHByb3BlcnR5XG4gICAgICAgIC8vIHJlbW92ZSBhbGwgcHJvcGVydGllcywgc2V0ICRyZWZcbiAgICAgICAgY29uc3QgZXh0cmFjdFRvRGVmID0gKGVudHJ5KSA9PiB7XG4gICAgICAgICAgICAvLyBpZiB0aGUgc2NoZW1hIGlzIGFscmVhZHkgYSByZWZlcmVuY2UsIGRvIG5vdCBleHRyYWN0IGl0XG4gICAgICAgICAgICBpZiAoZW50cnlbMV0uc2NoZW1hLiRyZWYpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBzZWVuID0gZW50cnlbMV07XG4gICAgICAgICAgICBjb25zdCB7IHJlZiwgZGVmSWQgfSA9IG1ha2VVUkkoZW50cnkpO1xuICAgICAgICAgICAgc2Vlbi5kZWYgPSB7IC4uLnNlZW4uc2NoZW1hIH07XG4gICAgICAgICAgICAvLyBkZWZJZCB3b24ndCBiZSBzZXQgaWYgdGhlIHNjaGVtYSBpcyBhIHJlZmVyZW5jZSB0byBhbiBleHRlcm5hbCBzY2hlbWFcbiAgICAgICAgICAgIGlmIChkZWZJZClcbiAgICAgICAgICAgICAgICBzZWVuLmRlZklkID0gZGVmSWQ7XG4gICAgICAgICAgICAvLyB3aXBlIGF3YXkgYWxsIHByb3BlcnRpZXMgZXhjZXB0ICRyZWZcbiAgICAgICAgICAgIGNvbnN0IHNjaGVtYSA9IHNlZW4uc2NoZW1hO1xuICAgICAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gc2NoZW1hKSB7XG4gICAgICAgICAgICAgICAgZGVsZXRlIHNjaGVtYVtrZXldO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc2NoZW1hLiRyZWYgPSByZWY7XG4gICAgICAgIH07XG4gICAgICAgIC8vIHRocm93IG9uIGN5Y2xlc1xuICAgICAgICAvLyBicmVhayBjeWNsZXNcbiAgICAgICAgaWYgKHBhcmFtcy5jeWNsZXMgPT09IFwidGhyb3dcIikge1xuICAgICAgICAgICAgZm9yIChjb25zdCBlbnRyeSBvZiB0aGlzLnNlZW4uZW50cmllcygpKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgc2VlbiA9IGVudHJ5WzFdO1xuICAgICAgICAgICAgICAgIGlmIChzZWVuLmN5Y2xlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkN5Y2xlIGRldGVjdGVkOiBcIiArXG4gICAgICAgICAgICAgICAgICAgICAgICBgIy8ke3NlZW4uY3ljbGU/LmpvaW4oXCIvXCIpfS88cm9vdD5gICtcbiAgICAgICAgICAgICAgICAgICAgICAgICdcXG5cXG5TZXQgdGhlIGBjeWNsZXNgIHBhcmFtZXRlciB0byBgXCJyZWZcImAgdG8gcmVzb2x2ZSBjeWNsaWNhbCBzY2hlbWFzIHdpdGggZGVmcy4nKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gZXh0cmFjdCBzY2hlbWFzIGludG8gJGRlZnNcbiAgICAgICAgZm9yIChjb25zdCBlbnRyeSBvZiB0aGlzLnNlZW4uZW50cmllcygpKSB7XG4gICAgICAgICAgICBjb25zdCBzZWVuID0gZW50cnlbMV07XG4gICAgICAgICAgICAvLyBjb252ZXJ0IHJvb3Qgc2NoZW1hIHRvICMgJHJlZlxuICAgICAgICAgICAgaWYgKHNjaGVtYSA9PT0gZW50cnlbMF0pIHtcbiAgICAgICAgICAgICAgICBleHRyYWN0VG9EZWYoZW50cnkpOyAvLyB0aGlzIGhhcyBzcGVjaWFsIGhhbmRsaW5nIGZvciB0aGUgcm9vdCBzY2hlbWFcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIGV4dHJhY3Qgc2NoZW1hcyB0aGF0IGFyZSBpbiB0aGUgZXh0ZXJuYWwgcmVnaXN0cnlcbiAgICAgICAgICAgIGlmIChwYXJhbXMuZXh0ZXJuYWwpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBleHQgPSBwYXJhbXMuZXh0ZXJuYWwucmVnaXN0cnkuZ2V0KGVudHJ5WzBdKT8uaWQ7XG4gICAgICAgICAgICAgICAgaWYgKHNjaGVtYSAhPT0gZW50cnlbMF0gJiYgZXh0KSB7XG4gICAgICAgICAgICAgICAgICAgIGV4dHJhY3RUb0RlZihlbnRyeSk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIGV4dHJhY3Qgc2NoZW1hcyB3aXRoIGBpZGAgbWV0YVxuICAgICAgICAgICAgY29uc3QgaWQgPSB0aGlzLm1ldGFkYXRhUmVnaXN0cnkuZ2V0KGVudHJ5WzBdKT8uaWQ7XG4gICAgICAgICAgICBpZiAoaWQpIHtcbiAgICAgICAgICAgICAgICBleHRyYWN0VG9EZWYoZW50cnkpO1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gYnJlYWsgY3ljbGVzXG4gICAgICAgICAgICBpZiAoc2Vlbi5jeWNsZSkge1xuICAgICAgICAgICAgICAgIC8vIGFueVxuICAgICAgICAgICAgICAgIGV4dHJhY3RUb0RlZihlbnRyeSk7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBleHRyYWN0IHJldXNlZCBzY2hlbWFzXG4gICAgICAgICAgICBpZiAoc2Vlbi5jb3VudCA+IDEpIHtcbiAgICAgICAgICAgICAgICBpZiAocGFyYW1zLnJldXNlZCA9PT0gXCJyZWZcIikge1xuICAgICAgICAgICAgICAgICAgICBleHRyYWN0VG9EZWYoZW50cnkpO1xuICAgICAgICAgICAgICAgICAgICAvLyBiaW9tZS1pZ25vcmUgbGludDpcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIGZsYXR0ZW4gX3JlZnNcbiAgICAgICAgY29uc3QgZmxhdHRlblJlZiA9ICh6b2RTY2hlbWEsIHBhcmFtcykgPT4ge1xuICAgICAgICAgICAgY29uc3Qgc2VlbiA9IHRoaXMuc2Vlbi5nZXQoem9kU2NoZW1hKTtcbiAgICAgICAgICAgIGNvbnN0IHNjaGVtYSA9IHNlZW4uZGVmID8/IHNlZW4uc2NoZW1hO1xuICAgICAgICAgICAgY29uc3QgX2NhY2hlZCA9IHsgLi4uc2NoZW1hIH07XG4gICAgICAgICAgICAvLyBhbHJlYWR5IHNlZW5cbiAgICAgICAgICAgIGlmIChzZWVuLnJlZiA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIGZsYXR0ZW4gcmVmIGlmIGRlZmluZWRcbiAgICAgICAgICAgIGNvbnN0IHJlZiA9IHNlZW4ucmVmO1xuICAgICAgICAgICAgc2Vlbi5yZWYgPSBudWxsOyAvLyBwcmV2ZW50IHJlY3Vyc2lvblxuICAgICAgICAgICAgaWYgKHJlZikge1xuICAgICAgICAgICAgICAgIGZsYXR0ZW5SZWYocmVmLCBwYXJhbXMpO1xuICAgICAgICAgICAgICAgIC8vIG1lcmdlIHJlZmVyZW5jZWQgc2NoZW1hIGludG8gY3VycmVudFxuICAgICAgICAgICAgICAgIGNvbnN0IHJlZlNjaGVtYSA9IHRoaXMuc2Vlbi5nZXQocmVmKS5zY2hlbWE7XG4gICAgICAgICAgICAgICAgaWYgKHJlZlNjaGVtYS4kcmVmICYmIHBhcmFtcy50YXJnZXQgPT09IFwiZHJhZnQtN1wiKSB7XG4gICAgICAgICAgICAgICAgICAgIHNjaGVtYS5hbGxPZiA9IHNjaGVtYS5hbGxPZiA/PyBbXTtcbiAgICAgICAgICAgICAgICAgICAgc2NoZW1hLmFsbE9mLnB1c2gocmVmU2NoZW1hKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIE9iamVjdC5hc3NpZ24oc2NoZW1hLCByZWZTY2hlbWEpO1xuICAgICAgICAgICAgICAgICAgICBPYmplY3QuYXNzaWduKHNjaGVtYSwgX2NhY2hlZCk7IC8vIHByZXZlbnQgb3ZlcndyaXRpbmcgYW55IGZpZWxkcyBpbiB0aGUgb3JpZ2luYWwgc2NoZW1hXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gZXhlY3V0ZSBvdmVycmlkZXNcbiAgICAgICAgICAgIGlmICghc2Vlbi5pc1BhcmVudClcbiAgICAgICAgICAgICAgICB0aGlzLm92ZXJyaWRlKHtcbiAgICAgICAgICAgICAgICAgICAgem9kU2NoZW1hOiB6b2RTY2hlbWEsXG4gICAgICAgICAgICAgICAgICAgIGpzb25TY2hlbWE6IHNjaGVtYSxcbiAgICAgICAgICAgICAgICAgICAgcGF0aDogc2Vlbi5wYXRoID8/IFtdLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICBmb3IgKGNvbnN0IGVudHJ5IG9mIFsuLi50aGlzLnNlZW4uZW50cmllcygpXS5yZXZlcnNlKCkpIHtcbiAgICAgICAgICAgIGZsYXR0ZW5SZWYoZW50cnlbMF0sIHsgdGFyZ2V0OiB0aGlzLnRhcmdldCB9KTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCByZXN1bHQgPSB7fTtcbiAgICAgICAgaWYgKHRoaXMudGFyZ2V0ID09PSBcImRyYWZ0LTIwMjAtMTJcIikge1xuICAgICAgICAgICAgcmVzdWx0LiRzY2hlbWEgPSBcImh0dHBzOi8vanNvbi1zY2hlbWEub3JnL2RyYWZ0LzIwMjAtMTIvc2NoZW1hXCI7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodGhpcy50YXJnZXQgPT09IFwiZHJhZnQtN1wiKSB7XG4gICAgICAgICAgICByZXN1bHQuJHNjaGVtYSA9IFwiaHR0cDovL2pzb24tc2NoZW1hLm9yZy9kcmFmdC0wNy9zY2hlbWEjXCI7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oYEludmFsaWQgdGFyZ2V0OiAke3RoaXMudGFyZ2V0fWApO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwYXJhbXMuZXh0ZXJuYWw/LnVyaSkge1xuICAgICAgICAgICAgY29uc3QgaWQgPSBwYXJhbXMuZXh0ZXJuYWwucmVnaXN0cnkuZ2V0KHNjaGVtYSk/LmlkO1xuICAgICAgICAgICAgaWYgKCFpZClcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJTY2hlbWEgaXMgbWlzc2luZyBhbiBgaWRgIHByb3BlcnR5XCIpO1xuICAgICAgICAgICAgcmVzdWx0LiRpZCA9IHBhcmFtcy5leHRlcm5hbC51cmkoaWQpO1xuICAgICAgICB9XG4gICAgICAgIE9iamVjdC5hc3NpZ24ocmVzdWx0LCByb290LmRlZik7XG4gICAgICAgIC8vIGJ1aWxkIGRlZnMgb2JqZWN0XG4gICAgICAgIGNvbnN0IGRlZnMgPSBwYXJhbXMuZXh0ZXJuYWw/LmRlZnMgPz8ge307XG4gICAgICAgIGZvciAoY29uc3QgZW50cnkgb2YgdGhpcy5zZWVuLmVudHJpZXMoKSkge1xuICAgICAgICAgICAgY29uc3Qgc2VlbiA9IGVudHJ5WzFdO1xuICAgICAgICAgICAgaWYgKHNlZW4uZGVmICYmIHNlZW4uZGVmSWQpIHtcbiAgICAgICAgICAgICAgICBkZWZzW3NlZW4uZGVmSWRdID0gc2Vlbi5kZWY7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gc2V0IGRlZmluaXRpb25zIGluIHJlc3VsdFxuICAgICAgICBpZiAocGFyYW1zLmV4dGVybmFsKSB7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBpZiAoT2JqZWN0LmtleXMoZGVmcykubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnRhcmdldCA9PT0gXCJkcmFmdC0yMDIwLTEyXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LiRkZWZzID0gZGVmcztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdC5kZWZpbml0aW9ucyA9IGRlZnM7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyB0aGlzIFwiZmluYWxpemVzXCIgdGhpcyBzY2hlbWEgYW5kIGVuc3VyZXMgYWxsIGN5Y2xlcyBhcmUgcmVtb3ZlZFxuICAgICAgICAgICAgLy8gZWFjaCBjYWxsIHRvIC5lbWl0KCkgaXMgZnVuY3Rpb25hbGx5IGluZGVwZW5kZW50XG4gICAgICAgICAgICAvLyB0aG91Z2ggdGhlIHNlZW4gbWFwIGlzIHNoYXJlZFxuICAgICAgICAgICAgcmV0dXJuIEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkocmVzdWx0KSk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKF9lcnIpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkVycm9yIGNvbnZlcnRpbmcgc2NoZW1hIHRvIEpTT04uXCIpO1xuICAgICAgICB9XG4gICAgfVxufVxuZXhwb3J0IGZ1bmN0aW9uIHRvSlNPTlNjaGVtYShpbnB1dCwgX3BhcmFtcykge1xuICAgIGlmIChpbnB1dCBpbnN0YW5jZW9mICRab2RSZWdpc3RyeSkge1xuICAgICAgICBjb25zdCBnZW4gPSBuZXcgSlNPTlNjaGVtYUdlbmVyYXRvcihfcGFyYW1zKTtcbiAgICAgICAgY29uc3QgZGVmcyA9IHt9O1xuICAgICAgICBmb3IgKGNvbnN0IGVudHJ5IG9mIGlucHV0Ll9pZG1hcC5lbnRyaWVzKCkpIHtcbiAgICAgICAgICAgIGNvbnN0IFtfLCBzY2hlbWFdID0gZW50cnk7XG4gICAgICAgICAgICBnZW4ucHJvY2VzcyhzY2hlbWEpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHNjaGVtYXMgPSB7fTtcbiAgICAgICAgY29uc3QgZXh0ZXJuYWwgPSB7XG4gICAgICAgICAgICByZWdpc3RyeTogaW5wdXQsXG4gICAgICAgICAgICB1cmk6IF9wYXJhbXM/LnVyaSxcbiAgICAgICAgICAgIGRlZnMsXG4gICAgICAgIH07XG4gICAgICAgIGZvciAoY29uc3QgZW50cnkgb2YgaW5wdXQuX2lkbWFwLmVudHJpZXMoKSkge1xuICAgICAgICAgICAgY29uc3QgW2tleSwgc2NoZW1hXSA9IGVudHJ5O1xuICAgICAgICAgICAgc2NoZW1hc1trZXldID0gZ2VuLmVtaXQoc2NoZW1hLCB7XG4gICAgICAgICAgICAgICAgLi4uX3BhcmFtcyxcbiAgICAgICAgICAgICAgICBleHRlcm5hbCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGlmIChPYmplY3Qua2V5cyhkZWZzKS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBjb25zdCBkZWZzU2VnbWVudCA9IGdlbi50YXJnZXQgPT09IFwiZHJhZnQtMjAyMC0xMlwiID8gXCIkZGVmc1wiIDogXCJkZWZpbml0aW9uc1wiO1xuICAgICAgICAgICAgc2NoZW1hcy5fX3NoYXJlZCA9IHtcbiAgICAgICAgICAgICAgICBbZGVmc1NlZ21lbnRdOiBkZWZzLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4geyBzY2hlbWFzIH07XG4gICAgfVxuICAgIGNvbnN0IGdlbiA9IG5ldyBKU09OU2NoZW1hR2VuZXJhdG9yKF9wYXJhbXMpO1xuICAgIGdlbi5wcm9jZXNzKGlucHV0KTtcbiAgICByZXR1cm4gZ2VuLmVtaXQoaW5wdXQsIF9wYXJhbXMpO1xufVxuZnVuY3Rpb24gaXNUcmFuc2Zvcm1pbmcoX3NjaGVtYSwgX2N0eCkge1xuICAgIGNvbnN0IGN0eCA9IF9jdHggPz8geyBzZWVuOiBuZXcgU2V0KCkgfTtcbiAgICBpZiAoY3R4LnNlZW4uaGFzKF9zY2hlbWEpKVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgY3R4LnNlZW4uYWRkKF9zY2hlbWEpO1xuICAgIGNvbnN0IHNjaGVtYSA9IF9zY2hlbWE7XG4gICAgY29uc3QgZGVmID0gc2NoZW1hLl96b2QuZGVmO1xuICAgIHN3aXRjaCAoZGVmLnR5cGUpIHtcbiAgICAgICAgY2FzZSBcInN0cmluZ1wiOlxuICAgICAgICBjYXNlIFwibnVtYmVyXCI6XG4gICAgICAgIGNhc2UgXCJiaWdpbnRcIjpcbiAgICAgICAgY2FzZSBcImJvb2xlYW5cIjpcbiAgICAgICAgY2FzZSBcImRhdGVcIjpcbiAgICAgICAgY2FzZSBcInN5bWJvbFwiOlxuICAgICAgICBjYXNlIFwidW5kZWZpbmVkXCI6XG4gICAgICAgIGNhc2UgXCJudWxsXCI6XG4gICAgICAgIGNhc2UgXCJhbnlcIjpcbiAgICAgICAgY2FzZSBcInVua25vd25cIjpcbiAgICAgICAgY2FzZSBcIm5ldmVyXCI6XG4gICAgICAgIGNhc2UgXCJ2b2lkXCI6XG4gICAgICAgIGNhc2UgXCJsaXRlcmFsXCI6XG4gICAgICAgIGNhc2UgXCJlbnVtXCI6XG4gICAgICAgIGNhc2UgXCJuYW5cIjpcbiAgICAgICAgY2FzZSBcImZpbGVcIjpcbiAgICAgICAgY2FzZSBcInRlbXBsYXRlX2xpdGVyYWxcIjpcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgY2FzZSBcImFycmF5XCI6IHtcbiAgICAgICAgICAgIHJldHVybiBpc1RyYW5zZm9ybWluZyhkZWYuZWxlbWVudCwgY3R4KTtcbiAgICAgICAgfVxuICAgICAgICBjYXNlIFwib2JqZWN0XCI6IHtcbiAgICAgICAgICAgIGZvciAoY29uc3Qga2V5IGluIGRlZi5zaGFwZSkge1xuICAgICAgICAgICAgICAgIGlmIChpc1RyYW5zZm9ybWluZyhkZWYuc2hhcGVba2V5XSwgY3R4KSlcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSBcInVuaW9uXCI6IHtcbiAgICAgICAgICAgIGZvciAoY29uc3Qgb3B0aW9uIG9mIGRlZi5vcHRpb25zKSB7XG4gICAgICAgICAgICAgICAgaWYgKGlzVHJhbnNmb3JtaW5nKG9wdGlvbiwgY3R4KSlcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSBcImludGVyc2VjdGlvblwiOiB7XG4gICAgICAgICAgICByZXR1cm4gaXNUcmFuc2Zvcm1pbmcoZGVmLmxlZnQsIGN0eCkgfHwgaXNUcmFuc2Zvcm1pbmcoZGVmLnJpZ2h0LCBjdHgpO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgXCJ0dXBsZVwiOiB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgZGVmLml0ZW1zKSB7XG4gICAgICAgICAgICAgICAgaWYgKGlzVHJhbnNmb3JtaW5nKGl0ZW0sIGN0eCkpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGRlZi5yZXN0ICYmIGlzVHJhbnNmb3JtaW5nKGRlZi5yZXN0LCBjdHgpKVxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgXCJyZWNvcmRcIjoge1xuICAgICAgICAgICAgcmV0dXJuIGlzVHJhbnNmb3JtaW5nKGRlZi5rZXlUeXBlLCBjdHgpIHx8IGlzVHJhbnNmb3JtaW5nKGRlZi52YWx1ZVR5cGUsIGN0eCk7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSBcIm1hcFwiOiB7XG4gICAgICAgICAgICByZXR1cm4gaXNUcmFuc2Zvcm1pbmcoZGVmLmtleVR5cGUsIGN0eCkgfHwgaXNUcmFuc2Zvcm1pbmcoZGVmLnZhbHVlVHlwZSwgY3R4KTtcbiAgICAgICAgfVxuICAgICAgICBjYXNlIFwic2V0XCI6IHtcbiAgICAgICAgICAgIHJldHVybiBpc1RyYW5zZm9ybWluZyhkZWYudmFsdWVUeXBlLCBjdHgpO1xuICAgICAgICB9XG4gICAgICAgIC8vIGlubmVyIHR5cGVzXG4gICAgICAgIGNhc2UgXCJwcm9taXNlXCI6XG4gICAgICAgIGNhc2UgXCJvcHRpb25hbFwiOlxuICAgICAgICBjYXNlIFwibm9ub3B0aW9uYWxcIjpcbiAgICAgICAgY2FzZSBcIm51bGxhYmxlXCI6XG4gICAgICAgIGNhc2UgXCJyZWFkb25seVwiOlxuICAgICAgICAgICAgcmV0dXJuIGlzVHJhbnNmb3JtaW5nKGRlZi5pbm5lclR5cGUsIGN0eCk7XG4gICAgICAgIGNhc2UgXCJsYXp5XCI6XG4gICAgICAgICAgICByZXR1cm4gaXNUcmFuc2Zvcm1pbmcoZGVmLmdldHRlcigpLCBjdHgpO1xuICAgICAgICBjYXNlIFwiZGVmYXVsdFwiOiB7XG4gICAgICAgICAgICByZXR1cm4gaXNUcmFuc2Zvcm1pbmcoZGVmLmlubmVyVHlwZSwgY3R4KTtcbiAgICAgICAgfVxuICAgICAgICBjYXNlIFwicHJlZmF1bHRcIjoge1xuICAgICAgICAgICAgcmV0dXJuIGlzVHJhbnNmb3JtaW5nKGRlZi5pbm5lclR5cGUsIGN0eCk7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSBcImN1c3RvbVwiOiB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSBcInRyYW5zZm9ybVwiOiB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBjYXNlIFwicGlwZVwiOiB7XG4gICAgICAgICAgICByZXR1cm4gaXNUcmFuc2Zvcm1pbmcoZGVmLmluLCBjdHgpIHx8IGlzVHJhbnNmb3JtaW5nKGRlZi5vdXQsIGN0eCk7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSBcInN1Y2Nlc3NcIjoge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgXCJjYXRjaFwiOiB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIGRlZjtcbiAgICB9XG4gICAgdGhyb3cgbmV3IEVycm9yKGBVbmtub3duIHNjaGVtYSB0eXBlOiAke2RlZi50eXBlfWApO1xufVxuIiwiaW1wb3J0IHsgQ29udGVudEZpbHRlckZpbmlzaFJlYXNvbkVycm9yLCBMZW5ndGhGaW5pc2hSZWFzb25FcnJvciwgT3BlbkFJRXJyb3IgfSBmcm9tIFwiLi4vZXJyb3IubWpzXCI7XG5leHBvcnQgZnVuY3Rpb24gaXNDaGF0Q29tcGxldGlvbkZ1bmN0aW9uVG9vbCh0b29sKSB7XG4gICAgcmV0dXJuIHRvb2wgIT09IHVuZGVmaW5lZCAmJiAnZnVuY3Rpb24nIGluIHRvb2wgJiYgdG9vbC5mdW5jdGlvbiAhPT0gdW5kZWZpbmVkO1xufVxuZXhwb3J0IGZ1bmN0aW9uIG1ha2VQYXJzZWFibGVSZXNwb25zZUZvcm1hdChyZXNwb25zZV9mb3JtYXQsIHBhcnNlcikge1xuICAgIGNvbnN0IG9iaiA9IHsgLi4ucmVzcG9uc2VfZm9ybWF0IH07XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnRpZXMob2JqLCB7XG4gICAgICAgICRicmFuZDoge1xuICAgICAgICAgICAgdmFsdWU6ICdhdXRvLXBhcnNlYWJsZS1yZXNwb25zZS1mb3JtYXQnLFxuICAgICAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIH0sXG4gICAgICAgICRwYXJzZVJhdzoge1xuICAgICAgICAgICAgdmFsdWU6IHBhcnNlcixcbiAgICAgICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICB9LFxuICAgIH0pO1xuICAgIHJldHVybiBvYmo7XG59XG5leHBvcnQgZnVuY3Rpb24gbWFrZVBhcnNlYWJsZVRleHRGb3JtYXQocmVzcG9uc2VfZm9ybWF0LCBwYXJzZXIpIHtcbiAgICBjb25zdCBvYmogPSB7IC4uLnJlc3BvbnNlX2Zvcm1hdCB9O1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKG9iaiwge1xuICAgICAgICAkYnJhbmQ6IHtcbiAgICAgICAgICAgIHZhbHVlOiAnYXV0by1wYXJzZWFibGUtcmVzcG9uc2UtZm9ybWF0JyxcbiAgICAgICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICB9LFxuICAgICAgICAkcGFyc2VSYXc6IHtcbiAgICAgICAgICAgIHZhbHVlOiBwYXJzZXIsXG4gICAgICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgfSxcbiAgICB9KTtcbiAgICByZXR1cm4gb2JqO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGlzQXV0b1BhcnNhYmxlUmVzcG9uc2VGb3JtYXQocmVzcG9uc2VfZm9ybWF0KSB7XG4gICAgcmV0dXJuIHJlc3BvbnNlX2Zvcm1hdD8uWyckYnJhbmQnXSA9PT0gJ2F1dG8tcGFyc2VhYmxlLXJlc3BvbnNlLWZvcm1hdCc7XG59XG5leHBvcnQgZnVuY3Rpb24gbWFrZVBhcnNlYWJsZVRvb2wodG9vbCwgeyBwYXJzZXIsIGNhbGxiYWNrLCB9KSB7XG4gICAgY29uc3Qgb2JqID0geyAuLi50b29sIH07XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnRpZXMob2JqLCB7XG4gICAgICAgICRicmFuZDoge1xuICAgICAgICAgICAgdmFsdWU6ICdhdXRvLXBhcnNlYWJsZS10b29sJyxcbiAgICAgICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICB9LFxuICAgICAgICAkcGFyc2VSYXc6IHtcbiAgICAgICAgICAgIHZhbHVlOiBwYXJzZXIsXG4gICAgICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgfSxcbiAgICAgICAgJGNhbGxiYWNrOiB7XG4gICAgICAgICAgICB2YWx1ZTogY2FsbGJhY2ssXG4gICAgICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgfSxcbiAgICB9KTtcbiAgICByZXR1cm4gb2JqO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGlzQXV0b1BhcnNhYmxlVG9vbCh0b29sKSB7XG4gICAgcmV0dXJuIHRvb2w/LlsnJGJyYW5kJ10gPT09ICdhdXRvLXBhcnNlYWJsZS10b29sJztcbn1cbmV4cG9ydCBmdW5jdGlvbiBtYXliZVBhcnNlQ2hhdENvbXBsZXRpb24oY29tcGxldGlvbiwgcGFyYW1zKSB7XG4gICAgaWYgKCFwYXJhbXMgfHwgIWhhc0F1dG9QYXJzZWFibGVJbnB1dChwYXJhbXMpKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAuLi5jb21wbGV0aW9uLFxuICAgICAgICAgICAgY2hvaWNlczogY29tcGxldGlvbi5jaG9pY2VzLm1hcCgoY2hvaWNlKSA9PiB7XG4gICAgICAgICAgICAgICAgYXNzZXJ0VG9vbENhbGxzQXJlQ2hhdENvbXBsZXRpb25GdW5jdGlvblRvb2xDYWxscyhjaG9pY2UubWVzc2FnZS50b29sX2NhbGxzKTtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAuLi5jaG9pY2UsXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLmNob2ljZS5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VkOiBudWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgLi4uKGNob2ljZS5tZXNzYWdlLnRvb2xfY2FsbHMgP1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9vbF9jYWxsczogY2hvaWNlLm1lc3NhZ2UudG9vbF9jYWxscyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgOiB1bmRlZmluZWQpLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9KSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIHBhcnNlQ2hhdENvbXBsZXRpb24oY29tcGxldGlvbiwgcGFyYW1zKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBwYXJzZUNoYXRDb21wbGV0aW9uKGNvbXBsZXRpb24sIHBhcmFtcykge1xuICAgIGNvbnN0IGNob2ljZXMgPSBjb21wbGV0aW9uLmNob2ljZXMubWFwKChjaG9pY2UpID0+IHtcbiAgICAgICAgaWYgKGNob2ljZS5maW5pc2hfcmVhc29uID09PSAnbGVuZ3RoJykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IExlbmd0aEZpbmlzaFJlYXNvbkVycm9yKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNob2ljZS5maW5pc2hfcmVhc29uID09PSAnY29udGVudF9maWx0ZXInKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgQ29udGVudEZpbHRlckZpbmlzaFJlYXNvbkVycm9yKCk7XG4gICAgICAgIH1cbiAgICAgICAgYXNzZXJ0VG9vbENhbGxzQXJlQ2hhdENvbXBsZXRpb25GdW5jdGlvblRvb2xDYWxscyhjaG9pY2UubWVzc2FnZS50b29sX2NhbGxzKTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIC4uLmNob2ljZSxcbiAgICAgICAgICAgIG1lc3NhZ2U6IHtcbiAgICAgICAgICAgICAgICAuLi5jaG9pY2UubWVzc2FnZSxcbiAgICAgICAgICAgICAgICAuLi4oY2hvaWNlLm1lc3NhZ2UudG9vbF9jYWxscyA/XG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvb2xfY2FsbHM6IGNob2ljZS5tZXNzYWdlLnRvb2xfY2FsbHM/Lm1hcCgodG9vbENhbGwpID0+IHBhcnNlVG9vbENhbGwocGFyYW1zLCB0b29sQ2FsbCkpID8/IHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICA6IHVuZGVmaW5lZCksXG4gICAgICAgICAgICAgICAgcGFyc2VkOiBjaG9pY2UubWVzc2FnZS5jb250ZW50ICYmICFjaG9pY2UubWVzc2FnZS5yZWZ1c2FsID9cbiAgICAgICAgICAgICAgICAgICAgcGFyc2VSZXNwb25zZUZvcm1hdChwYXJhbXMsIGNob2ljZS5tZXNzYWdlLmNvbnRlbnQpXG4gICAgICAgICAgICAgICAgICAgIDogbnVsbCxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH07XG4gICAgfSk7XG4gICAgcmV0dXJuIHsgLi4uY29tcGxldGlvbiwgY2hvaWNlcyB9O1xufVxuZnVuY3Rpb24gcGFyc2VSZXNwb25zZUZvcm1hdChwYXJhbXMsIGNvbnRlbnQpIHtcbiAgICBpZiAocGFyYW1zLnJlc3BvbnNlX2Zvcm1hdD8udHlwZSAhPT0gJ2pzb25fc2NoZW1hJykge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgaWYgKHBhcmFtcy5yZXNwb25zZV9mb3JtYXQ/LnR5cGUgPT09ICdqc29uX3NjaGVtYScpIHtcbiAgICAgICAgaWYgKCckcGFyc2VSYXcnIGluIHBhcmFtcy5yZXNwb25zZV9mb3JtYXQpIHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlX2Zvcm1hdCA9IHBhcmFtcy5yZXNwb25zZV9mb3JtYXQ7XG4gICAgICAgICAgICByZXR1cm4gcmVzcG9uc2VfZm9ybWF0LiRwYXJzZVJhdyhjb250ZW50KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gSlNPTi5wYXJzZShjb250ZW50KTtcbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG59XG5mdW5jdGlvbiBwYXJzZVRvb2xDYWxsKHBhcmFtcywgdG9vbENhbGwpIHtcbiAgICBjb25zdCBpbnB1dFRvb2wgPSBwYXJhbXMudG9vbHM/LmZpbmQoKGlucHV0VG9vbCkgPT4gaXNDaGF0Q29tcGxldGlvbkZ1bmN0aW9uVG9vbChpbnB1dFRvb2wpICYmIGlucHV0VG9vbC5mdW5jdGlvbj8ubmFtZSA9PT0gdG9vbENhbGwuZnVuY3Rpb24ubmFtZSk7IC8vIFRTIGRvZXNuJ3QgbmFycm93IGJhc2VkIG9uIGlzQ2hhdENvbXBsZXRpb25Ub29sXG4gICAgcmV0dXJuIHtcbiAgICAgICAgLi4udG9vbENhbGwsXG4gICAgICAgIGZ1bmN0aW9uOiB7XG4gICAgICAgICAgICAuLi50b29sQ2FsbC5mdW5jdGlvbixcbiAgICAgICAgICAgIHBhcnNlZF9hcmd1bWVudHM6IGlzQXV0b1BhcnNhYmxlVG9vbChpbnB1dFRvb2wpID8gaW5wdXRUb29sLiRwYXJzZVJhdyh0b29sQ2FsbC5mdW5jdGlvbi5hcmd1bWVudHMpXG4gICAgICAgICAgICAgICAgOiBpbnB1dFRvb2w/LmZ1bmN0aW9uLnN0cmljdCA/IEpTT04ucGFyc2UodG9vbENhbGwuZnVuY3Rpb24uYXJndW1lbnRzKVxuICAgICAgICAgICAgICAgICAgICA6IG51bGwsXG4gICAgICAgIH0sXG4gICAgfTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBzaG91bGRQYXJzZVRvb2xDYWxsKHBhcmFtcywgdG9vbENhbGwpIHtcbiAgICBpZiAoIXBhcmFtcyB8fCAhKCd0b29scycgaW4gcGFyYW1zKSB8fCAhcGFyYW1zLnRvb2xzKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgY29uc3QgaW5wdXRUb29sID0gcGFyYW1zLnRvb2xzPy5maW5kKChpbnB1dFRvb2wpID0+IGlzQ2hhdENvbXBsZXRpb25GdW5jdGlvblRvb2woaW5wdXRUb29sKSAmJiBpbnB1dFRvb2wuZnVuY3Rpb24/Lm5hbWUgPT09IHRvb2xDYWxsLmZ1bmN0aW9uLm5hbWUpO1xuICAgIHJldHVybiAoaXNDaGF0Q29tcGxldGlvbkZ1bmN0aW9uVG9vbChpbnB1dFRvb2wpICYmXG4gICAgICAgIChpc0F1dG9QYXJzYWJsZVRvb2woaW5wdXRUb29sKSB8fCBpbnB1dFRvb2w/LmZ1bmN0aW9uLnN0cmljdCB8fCBmYWxzZSkpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGhhc0F1dG9QYXJzZWFibGVJbnB1dChwYXJhbXMpIHtcbiAgICBpZiAoaXNBdXRvUGFyc2FibGVSZXNwb25zZUZvcm1hdChwYXJhbXMucmVzcG9uc2VfZm9ybWF0KSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIChwYXJhbXMudG9vbHM/LnNvbWUoKHQpID0+IGlzQXV0b1BhcnNhYmxlVG9vbCh0KSB8fCAodC50eXBlID09PSAnZnVuY3Rpb24nICYmIHQuZnVuY3Rpb24uc3RyaWN0ID09PSB0cnVlKSkgPz8gZmFsc2UpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGFzc2VydFRvb2xDYWxsc0FyZUNoYXRDb21wbGV0aW9uRnVuY3Rpb25Ub29sQ2FsbHModG9vbENhbGxzKSB7XG4gICAgZm9yIChjb25zdCB0b29sQ2FsbCBvZiB0b29sQ2FsbHMgfHwgW10pIHtcbiAgICAgICAgaWYgKHRvb2xDYWxsLnR5cGUgIT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBPcGVuQUlFcnJvcihgQ3VycmVudGx5IG9ubHkgXFxgZnVuY3Rpb25cXGAgdG9vbCBjYWxscyBhcmUgc3VwcG9ydGVkOyBSZWNlaXZlZCBcXGAke3Rvb2xDYWxsLnR5cGV9XFxgYCk7XG4gICAgICAgIH1cbiAgICB9XG59XG5leHBvcnQgZnVuY3Rpb24gdmFsaWRhdGVJbnB1dFRvb2xzKHRvb2xzKSB7XG4gICAgZm9yIChjb25zdCB0b29sIG9mIHRvb2xzID8/IFtdKSB7XG4gICAgICAgIGlmICh0b29sLnR5cGUgIT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBPcGVuQUlFcnJvcihgQ3VycmVudGx5IG9ubHkgXFxgZnVuY3Rpb25cXGAgdG9vbCB0eXBlcyBzdXBwb3J0IGF1dG8tcGFyc2luZzsgUmVjZWl2ZWQgXFxgJHt0b29sLnR5cGV9XFxgYCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRvb2wuZnVuY3Rpb24uc3RyaWN0ICE9PSB0cnVlKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgT3BlbkFJRXJyb3IoYFRoZSBcXGAke3Rvb2wuZnVuY3Rpb24ubmFtZX1cXGAgdG9vbCBpcyBub3QgbWFya2VkIHdpdGggXFxgc3RyaWN0OiB0cnVlXFxgLiBPbmx5IHN0cmljdCBmdW5jdGlvbiB0b29scyBjYW4gYmUgYXV0by1wYXJzZWRgKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBhcnNlci5tanMubWFwIiwiZXhwb3J0IGNvbnN0IGlnbm9yZU92ZXJyaWRlID0gU3ltYm9sKCdMZXQgem9kVG9Kc29uU2NoZW1hIGRlY2lkZSBvbiB3aGljaCBwYXJzZXIgdG8gdXNlJyk7XG5jb25zdCBkZWZhdWx0T3B0aW9ucyA9IHtcbiAgICBuYW1lOiB1bmRlZmluZWQsXG4gICAgJHJlZlN0cmF0ZWd5OiAncm9vdCcsXG4gICAgZWZmZWN0U3RyYXRlZ3k6ICdpbnB1dCcsXG4gICAgcGlwZVN0cmF0ZWd5OiAnYWxsJyxcbiAgICBkYXRlU3RyYXRlZ3k6ICdmb3JtYXQ6ZGF0ZS10aW1lJyxcbiAgICBtYXBTdHJhdGVneTogJ2VudHJpZXMnLFxuICAgIG51bGxhYmxlU3RyYXRlZ3k6ICdmcm9tLXRhcmdldCcsXG4gICAgcmVtb3ZlQWRkaXRpb25hbFN0cmF0ZWd5OiAncGFzc3Rocm91Z2gnLFxuICAgIGRlZmluaXRpb25QYXRoOiAnZGVmaW5pdGlvbnMnLFxuICAgIHRhcmdldDogJ2pzb25TY2hlbWE3JyxcbiAgICBzdHJpY3RVbmlvbnM6IGZhbHNlLFxuICAgIGVycm9yTWVzc2FnZXM6IGZhbHNlLFxuICAgIG1hcmtkb3duRGVzY3JpcHRpb246IGZhbHNlLFxuICAgIHBhdHRlcm5TdHJhdGVneTogJ2VzY2FwZScsXG4gICAgYXBwbHlSZWdleEZsYWdzOiBmYWxzZSxcbiAgICBlbWFpbFN0cmF0ZWd5OiAnZm9ybWF0OmVtYWlsJyxcbiAgICBiYXNlNjRTdHJhdGVneTogJ2NvbnRlbnRFbmNvZGluZzpiYXNlNjQnLFxuICAgIG5hbWVTdHJhdGVneTogJ3JlZicsXG59O1xuZXhwb3J0IGNvbnN0IGdldERlZmF1bHRPcHRpb25zID0gKG9wdGlvbnMpID0+IHtcbiAgICAvLyBXZSBuZWVkIHRvIGFkZCBgZGVmaW5pdGlvbnNgIGhlcmUgYXMgd2UgbWF5IG11dGF0ZSBpdFxuICAgIHJldHVybiAodHlwZW9mIG9wdGlvbnMgPT09ICdzdHJpbmcnID9cbiAgICAgICAge1xuICAgICAgICAgICAgLi4uZGVmYXVsdE9wdGlvbnMsXG4gICAgICAgICAgICBiYXNlUGF0aDogWycjJ10sXG4gICAgICAgICAgICBkZWZpbml0aW9uczoge30sXG4gICAgICAgICAgICBuYW1lOiBvcHRpb25zLFxuICAgICAgICB9XG4gICAgICAgIDoge1xuICAgICAgICAgICAgLi4uZGVmYXVsdE9wdGlvbnMsXG4gICAgICAgICAgICBiYXNlUGF0aDogWycjJ10sXG4gICAgICAgICAgICBkZWZpbml0aW9uczoge30sXG4gICAgICAgICAgICAuLi5vcHRpb25zLFxuICAgICAgICB9KTtcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1PcHRpb25zLm1qcy5tYXAiLCJleHBvcnQgY29uc3Qgem9kRGVmID0gKHpvZFNjaGVtYSkgPT4ge1xuICAgIHJldHVybiAnX2RlZicgaW4gem9kU2NoZW1hID8gem9kU2NoZW1hLl9kZWYgOiB6b2RTY2hlbWE7XG59O1xuZXhwb3J0IGZ1bmN0aW9uIGlzRW1wdHlPYmoob2JqKSB7XG4gICAgaWYgKCFvYmopXG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIGZvciAoY29uc3QgX2sgaW4gb2JqKVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgcmV0dXJuIHRydWU7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD11dGlsLm1qcy5tYXAiLCJpbXBvcnQgeyBnZXREZWZhdWx0T3B0aW9ucyB9IGZyb20gXCIuL09wdGlvbnMubWpzXCI7XG5pbXBvcnQgeyB6b2REZWYgfSBmcm9tIFwiLi91dGlsLm1qc1wiO1xuZXhwb3J0IGNvbnN0IGdldFJlZnMgPSAob3B0aW9ucykgPT4ge1xuICAgIGNvbnN0IF9vcHRpb25zID0gZ2V0RGVmYXVsdE9wdGlvbnMob3B0aW9ucyk7XG4gICAgY29uc3QgY3VycmVudFBhdGggPSBfb3B0aW9ucy5uYW1lICE9PSB1bmRlZmluZWQgP1xuICAgICAgICBbLi4uX29wdGlvbnMuYmFzZVBhdGgsIF9vcHRpb25zLmRlZmluaXRpb25QYXRoLCBfb3B0aW9ucy5uYW1lXVxuICAgICAgICA6IF9vcHRpb25zLmJhc2VQYXRoO1xuICAgIHJldHVybiB7XG4gICAgICAgIC4uLl9vcHRpb25zLFxuICAgICAgICBjdXJyZW50UGF0aDogY3VycmVudFBhdGgsXG4gICAgICAgIHByb3BlcnR5UGF0aDogdW5kZWZpbmVkLFxuICAgICAgICBzZWVuUmVmczogbmV3IFNldCgpLFxuICAgICAgICBzZWVuOiBuZXcgTWFwKE9iamVjdC5lbnRyaWVzKF9vcHRpb25zLmRlZmluaXRpb25zKS5tYXAoKFtuYW1lLCBkZWZdKSA9PiBbXG4gICAgICAgICAgICB6b2REZWYoZGVmKSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBkZWY6IHpvZERlZihkZWYpLFxuICAgICAgICAgICAgICAgIHBhdGg6IFsuLi5fb3B0aW9ucy5iYXNlUGF0aCwgX29wdGlvbnMuZGVmaW5pdGlvblBhdGgsIG5hbWVdLFxuICAgICAgICAgICAgICAgIC8vIFJlc29sdXRpb24gb2YgcmVmZXJlbmNlcyB3aWxsIGJlIGZvcmNlZCBldmVuIHRob3VnaCBzZWVuLCBzbyBpdCdzIG9rIHRoYXQgdGhlIHNjaGVtYSBpcyB1bmRlZmluZWQgaGVyZSBmb3Igbm93LlxuICAgICAgICAgICAgICAgIGpzb25TY2hlbWE6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIF0pKSxcbiAgICB9O1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVJlZnMubWpzLm1hcCIsImV4cG9ydCBmdW5jdGlvbiBhZGRFcnJvck1lc3NhZ2UocmVzLCBrZXksIGVycm9yTWVzc2FnZSwgcmVmcykge1xuICAgIGlmICghcmVmcz8uZXJyb3JNZXNzYWdlcylcbiAgICAgICAgcmV0dXJuO1xuICAgIGlmIChlcnJvck1lc3NhZ2UpIHtcbiAgICAgICAgcmVzLmVycm9yTWVzc2FnZSA9IHtcbiAgICAgICAgICAgIC4uLnJlcy5lcnJvck1lc3NhZ2UsXG4gICAgICAgICAgICBba2V5XTogZXJyb3JNZXNzYWdlLFxuICAgICAgICB9O1xuICAgIH1cbn1cbmV4cG9ydCBmdW5jdGlvbiBzZXRSZXNwb25zZVZhbHVlQW5kRXJyb3JzKHJlcywga2V5LCB2YWx1ZSwgZXJyb3JNZXNzYWdlLCByZWZzKSB7XG4gICAgcmVzW2tleV0gPSB2YWx1ZTtcbiAgICBhZGRFcnJvck1lc3NhZ2UocmVzLCBrZXksIGVycm9yTWVzc2FnZSwgcmVmcyk7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1lcnJvck1lc3NhZ2VzLm1qcy5tYXAiLCJleHBvcnQgdmFyIHV0aWw7XG4oZnVuY3Rpb24gKHV0aWwpIHtcbiAgICB1dGlsLmFzc2VydEVxdWFsID0gKF8pID0+IHsgfTtcbiAgICBmdW5jdGlvbiBhc3NlcnRJcyhfYXJnKSB7IH1cbiAgICB1dGlsLmFzc2VydElzID0gYXNzZXJ0SXM7XG4gICAgZnVuY3Rpb24gYXNzZXJ0TmV2ZXIoX3gpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCk7XG4gICAgfVxuICAgIHV0aWwuYXNzZXJ0TmV2ZXIgPSBhc3NlcnROZXZlcjtcbiAgICB1dGlsLmFycmF5VG9FbnVtID0gKGl0ZW1zKSA9PiB7XG4gICAgICAgIGNvbnN0IG9iaiA9IHt9O1xuICAgICAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgaXRlbXMpIHtcbiAgICAgICAgICAgIG9ialtpdGVtXSA9IGl0ZW07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG9iajtcbiAgICB9O1xuICAgIHV0aWwuZ2V0VmFsaWRFbnVtVmFsdWVzID0gKG9iaikgPT4ge1xuICAgICAgICBjb25zdCB2YWxpZEtleXMgPSB1dGlsLm9iamVjdEtleXMob2JqKS5maWx0ZXIoKGspID0+IHR5cGVvZiBvYmpbb2JqW2tdXSAhPT0gXCJudW1iZXJcIik7XG4gICAgICAgIGNvbnN0IGZpbHRlcmVkID0ge307XG4gICAgICAgIGZvciAoY29uc3QgayBvZiB2YWxpZEtleXMpIHtcbiAgICAgICAgICAgIGZpbHRlcmVkW2tdID0gb2JqW2tdO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB1dGlsLm9iamVjdFZhbHVlcyhmaWx0ZXJlZCk7XG4gICAgfTtcbiAgICB1dGlsLm9iamVjdFZhbHVlcyA9IChvYmopID0+IHtcbiAgICAgICAgcmV0dXJuIHV0aWwub2JqZWN0S2V5cyhvYmopLm1hcChmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgcmV0dXJuIG9ialtlXTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICB1dGlsLm9iamVjdEtleXMgPSB0eXBlb2YgT2JqZWN0LmtleXMgPT09IFwiZnVuY3Rpb25cIiAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIGJhbi9iYW5cbiAgICAgICAgPyAob2JqKSA9PiBPYmplY3Qua2V5cyhvYmopIC8vIGVzbGludC1kaXNhYmxlLWxpbmUgYmFuL2JhblxuICAgICAgICA6IChvYmplY3QpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGtleXMgPSBbXTtcbiAgICAgICAgICAgIGZvciAoY29uc3Qga2V5IGluIG9iamVjdCkge1xuICAgICAgICAgICAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBrZXkpKSB7XG4gICAgICAgICAgICAgICAgICAgIGtleXMucHVzaChrZXkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBrZXlzO1xuICAgICAgICB9O1xuICAgIHV0aWwuZmluZCA9IChhcnIsIGNoZWNrZXIpID0+IHtcbiAgICAgICAgZm9yIChjb25zdCBpdGVtIG9mIGFycikge1xuICAgICAgICAgICAgaWYgKGNoZWNrZXIoaXRlbSkpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGl0ZW07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9O1xuICAgIHV0aWwuaXNJbnRlZ2VyID0gdHlwZW9mIE51bWJlci5pc0ludGVnZXIgPT09IFwiZnVuY3Rpb25cIlxuICAgICAgICA/ICh2YWwpID0+IE51bWJlci5pc0ludGVnZXIodmFsKSAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIGJhbi9iYW5cbiAgICAgICAgOiAodmFsKSA9PiB0eXBlb2YgdmFsID09PSBcIm51bWJlclwiICYmIE51bWJlci5pc0Zpbml0ZSh2YWwpICYmIE1hdGguZmxvb3IodmFsKSA9PT0gdmFsO1xuICAgIGZ1bmN0aW9uIGpvaW5WYWx1ZXMoYXJyYXksIHNlcGFyYXRvciA9IFwiIHwgXCIpIHtcbiAgICAgICAgcmV0dXJuIGFycmF5Lm1hcCgodmFsKSA9PiAodHlwZW9mIHZhbCA9PT0gXCJzdHJpbmdcIiA/IGAnJHt2YWx9J2AgOiB2YWwpKS5qb2luKHNlcGFyYXRvcik7XG4gICAgfVxuICAgIHV0aWwuam9pblZhbHVlcyA9IGpvaW5WYWx1ZXM7XG4gICAgdXRpbC5qc29uU3RyaW5naWZ5UmVwbGFjZXIgPSAoXywgdmFsdWUpID0+IHtcbiAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gXCJiaWdpbnRcIikge1xuICAgICAgICAgICAgcmV0dXJuIHZhbHVlLnRvU3RyaW5nKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH07XG59KSh1dGlsIHx8ICh1dGlsID0ge30pKTtcbmV4cG9ydCB2YXIgb2JqZWN0VXRpbDtcbihmdW5jdGlvbiAob2JqZWN0VXRpbCkge1xuICAgIG9iamVjdFV0aWwubWVyZ2VTaGFwZXMgPSAoZmlyc3QsIHNlY29uZCkgPT4ge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgLi4uZmlyc3QsXG4gICAgICAgICAgICAuLi5zZWNvbmQsIC8vIHNlY29uZCBvdmVyd3JpdGVzIGZpcnN0XG4gICAgICAgIH07XG4gICAgfTtcbn0pKG9iamVjdFV0aWwgfHwgKG9iamVjdFV0aWwgPSB7fSkpO1xuZXhwb3J0IGNvbnN0IFpvZFBhcnNlZFR5cGUgPSB1dGlsLmFycmF5VG9FbnVtKFtcbiAgICBcInN0cmluZ1wiLFxuICAgIFwibmFuXCIsXG4gICAgXCJudW1iZXJcIixcbiAgICBcImludGVnZXJcIixcbiAgICBcImZsb2F0XCIsXG4gICAgXCJib29sZWFuXCIsXG4gICAgXCJkYXRlXCIsXG4gICAgXCJiaWdpbnRcIixcbiAgICBcInN5bWJvbFwiLFxuICAgIFwiZnVuY3Rpb25cIixcbiAgICBcInVuZGVmaW5lZFwiLFxuICAgIFwibnVsbFwiLFxuICAgIFwiYXJyYXlcIixcbiAgICBcIm9iamVjdFwiLFxuICAgIFwidW5rbm93blwiLFxuICAgIFwicHJvbWlzZVwiLFxuICAgIFwidm9pZFwiLFxuICAgIFwibmV2ZXJcIixcbiAgICBcIm1hcFwiLFxuICAgIFwic2V0XCIsXG5dKTtcbmV4cG9ydCBjb25zdCBnZXRQYXJzZWRUeXBlID0gKGRhdGEpID0+IHtcbiAgICBjb25zdCB0ID0gdHlwZW9mIGRhdGE7XG4gICAgc3dpdGNoICh0KSB7XG4gICAgICAgIGNhc2UgXCJ1bmRlZmluZWRcIjpcbiAgICAgICAgICAgIHJldHVybiBab2RQYXJzZWRUeXBlLnVuZGVmaW5lZDtcbiAgICAgICAgY2FzZSBcInN0cmluZ1wiOlxuICAgICAgICAgICAgcmV0dXJuIFpvZFBhcnNlZFR5cGUuc3RyaW5nO1xuICAgICAgICBjYXNlIFwibnVtYmVyXCI6XG4gICAgICAgICAgICByZXR1cm4gTnVtYmVyLmlzTmFOKGRhdGEpID8gWm9kUGFyc2VkVHlwZS5uYW4gOiBab2RQYXJzZWRUeXBlLm51bWJlcjtcbiAgICAgICAgY2FzZSBcImJvb2xlYW5cIjpcbiAgICAgICAgICAgIHJldHVybiBab2RQYXJzZWRUeXBlLmJvb2xlYW47XG4gICAgICAgIGNhc2UgXCJmdW5jdGlvblwiOlxuICAgICAgICAgICAgcmV0dXJuIFpvZFBhcnNlZFR5cGUuZnVuY3Rpb247XG4gICAgICAgIGNhc2UgXCJiaWdpbnRcIjpcbiAgICAgICAgICAgIHJldHVybiBab2RQYXJzZWRUeXBlLmJpZ2ludDtcbiAgICAgICAgY2FzZSBcInN5bWJvbFwiOlxuICAgICAgICAgICAgcmV0dXJuIFpvZFBhcnNlZFR5cGUuc3ltYm9sO1xuICAgICAgICBjYXNlIFwib2JqZWN0XCI6XG4gICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShkYXRhKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBab2RQYXJzZWRUeXBlLmFycmF5O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGRhdGEgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gWm9kUGFyc2VkVHlwZS5udWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGRhdGEudGhlbiAmJiB0eXBlb2YgZGF0YS50aGVuID09PSBcImZ1bmN0aW9uXCIgJiYgZGF0YS5jYXRjaCAmJiB0eXBlb2YgZGF0YS5jYXRjaCA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFpvZFBhcnNlZFR5cGUucHJvbWlzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0eXBlb2YgTWFwICE9PSBcInVuZGVmaW5lZFwiICYmIGRhdGEgaW5zdGFuY2VvZiBNYXApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gWm9kUGFyc2VkVHlwZS5tYXA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodHlwZW9mIFNldCAhPT0gXCJ1bmRlZmluZWRcIiAmJiBkYXRhIGluc3RhbmNlb2YgU2V0KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFpvZFBhcnNlZFR5cGUuc2V0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHR5cGVvZiBEYXRlICE9PSBcInVuZGVmaW5lZFwiICYmIGRhdGEgaW5zdGFuY2VvZiBEYXRlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFpvZFBhcnNlZFR5cGUuZGF0ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBab2RQYXJzZWRUeXBlLm9iamVjdDtcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiBab2RQYXJzZWRUeXBlLnVua25vd247XG4gICAgfVxufTtcbiIsImltcG9ydCB7IHV0aWwgfSBmcm9tIFwiLi9oZWxwZXJzL3V0aWwuanNcIjtcbmV4cG9ydCBjb25zdCBab2RJc3N1ZUNvZGUgPSB1dGlsLmFycmF5VG9FbnVtKFtcbiAgICBcImludmFsaWRfdHlwZVwiLFxuICAgIFwiaW52YWxpZF9saXRlcmFsXCIsXG4gICAgXCJjdXN0b21cIixcbiAgICBcImludmFsaWRfdW5pb25cIixcbiAgICBcImludmFsaWRfdW5pb25fZGlzY3JpbWluYXRvclwiLFxuICAgIFwiaW52YWxpZF9lbnVtX3ZhbHVlXCIsXG4gICAgXCJ1bnJlY29nbml6ZWRfa2V5c1wiLFxuICAgIFwiaW52YWxpZF9hcmd1bWVudHNcIixcbiAgICBcImludmFsaWRfcmV0dXJuX3R5cGVcIixcbiAgICBcImludmFsaWRfZGF0ZVwiLFxuICAgIFwiaW52YWxpZF9zdHJpbmdcIixcbiAgICBcInRvb19zbWFsbFwiLFxuICAgIFwidG9vX2JpZ1wiLFxuICAgIFwiaW52YWxpZF9pbnRlcnNlY3Rpb25fdHlwZXNcIixcbiAgICBcIm5vdF9tdWx0aXBsZV9vZlwiLFxuICAgIFwibm90X2Zpbml0ZVwiLFxuXSk7XG5leHBvcnQgY29uc3QgcXVvdGVsZXNzSnNvbiA9IChvYmopID0+IHtcbiAgICBjb25zdCBqc29uID0gSlNPTi5zdHJpbmdpZnkob2JqLCBudWxsLCAyKTtcbiAgICByZXR1cm4ganNvbi5yZXBsYWNlKC9cIihbXlwiXSspXCI6L2csIFwiJDE6XCIpO1xufTtcbmV4cG9ydCBjbGFzcyBab2RFcnJvciBleHRlbmRzIEVycm9yIHtcbiAgICBnZXQgZXJyb3JzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5pc3N1ZXM7XG4gICAgfVxuICAgIGNvbnN0cnVjdG9yKGlzc3Vlcykge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLmlzc3VlcyA9IFtdO1xuICAgICAgICB0aGlzLmFkZElzc3VlID0gKHN1YikgPT4ge1xuICAgICAgICAgICAgdGhpcy5pc3N1ZXMgPSBbLi4udGhpcy5pc3N1ZXMsIHN1Yl07XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuYWRkSXNzdWVzID0gKHN1YnMgPSBbXSkgPT4ge1xuICAgICAgICAgICAgdGhpcy5pc3N1ZXMgPSBbLi4udGhpcy5pc3N1ZXMsIC4uLnN1YnNdO1xuICAgICAgICB9O1xuICAgICAgICBjb25zdCBhY3R1YWxQcm90byA9IG5ldy50YXJnZXQucHJvdG90eXBlO1xuICAgICAgICBpZiAoT2JqZWN0LnNldFByb3RvdHlwZU9mKSB7XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgYmFuL2JhblxuICAgICAgICAgICAgT2JqZWN0LnNldFByb3RvdHlwZU9mKHRoaXMsIGFjdHVhbFByb3RvKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuX19wcm90b19fID0gYWN0dWFsUHJvdG87XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5uYW1lID0gXCJab2RFcnJvclwiO1xuICAgICAgICB0aGlzLmlzc3VlcyA9IGlzc3VlcztcbiAgICB9XG4gICAgZm9ybWF0KF9tYXBwZXIpIHtcbiAgICAgICAgY29uc3QgbWFwcGVyID0gX21hcHBlciB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGlzc3VlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGlzc3VlLm1lc3NhZ2U7XG4gICAgICAgICAgICB9O1xuICAgICAgICBjb25zdCBmaWVsZEVycm9ycyA9IHsgX2Vycm9yczogW10gfTtcbiAgICAgICAgY29uc3QgcHJvY2Vzc0Vycm9yID0gKGVycm9yKSA9PiB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGlzc3VlIG9mIGVycm9yLmlzc3Vlcykge1xuICAgICAgICAgICAgICAgIGlmIChpc3N1ZS5jb2RlID09PSBcImludmFsaWRfdW5pb25cIikge1xuICAgICAgICAgICAgICAgICAgICBpc3N1ZS51bmlvbkVycm9ycy5tYXAocHJvY2Vzc0Vycm9yKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoaXNzdWUuY29kZSA9PT0gXCJpbnZhbGlkX3JldHVybl90eXBlXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgcHJvY2Vzc0Vycm9yKGlzc3VlLnJldHVyblR5cGVFcnJvcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGlzc3VlLmNvZGUgPT09IFwiaW52YWxpZF9hcmd1bWVudHNcIikge1xuICAgICAgICAgICAgICAgICAgICBwcm9jZXNzRXJyb3IoaXNzdWUuYXJndW1lbnRzRXJyb3IpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChpc3N1ZS5wYXRoLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICBmaWVsZEVycm9ycy5fZXJyb3JzLnB1c2gobWFwcGVyKGlzc3VlKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBsZXQgY3VyciA9IGZpZWxkRXJyb3JzO1xuICAgICAgICAgICAgICAgICAgICBsZXQgaSA9IDA7XG4gICAgICAgICAgICAgICAgICAgIHdoaWxlIChpIDwgaXNzdWUucGF0aC5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGVsID0gaXNzdWUucGF0aFtpXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRlcm1pbmFsID0gaSA9PT0gaXNzdWUucGF0aC5sZW5ndGggLSAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF0ZXJtaW5hbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJbZWxdID0gY3VycltlbF0gfHwgeyBfZXJyb3JzOiBbXSB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmICh0eXBlb2YgZWwgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgIGN1cnJbZWxdID0gY3VycltlbF0gfHwgeyBfZXJyb3JzOiBbXSB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIH0gZWxzZSBpZiAodHlwZW9mIGVsID09PSBcIm51bWJlclwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICBjb25zdCBlcnJvckFycmF5OiBhbnkgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgIGVycm9yQXJyYXkuX2Vycm9ycyA9IFtdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgY3VycltlbF0gPSBjdXJyW2VsXSB8fCBlcnJvckFycmF5O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJbZWxdID0gY3VycltlbF0gfHwgeyBfZXJyb3JzOiBbXSB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJbZWxdLl9lcnJvcnMucHVzaChtYXBwZXIoaXNzdWUpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnIgPSBjdXJyW2VsXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGkrKztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgcHJvY2Vzc0Vycm9yKHRoaXMpO1xuICAgICAgICByZXR1cm4gZmllbGRFcnJvcnM7XG4gICAgfVxuICAgIHN0YXRpYyBhc3NlcnQodmFsdWUpIHtcbiAgICAgICAgaWYgKCEodmFsdWUgaW5zdGFuY2VvZiBab2RFcnJvcikpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgTm90IGEgWm9kRXJyb3I6ICR7dmFsdWV9YCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1lc3NhZ2U7XG4gICAgfVxuICAgIGdldCBtZXNzYWdlKCkge1xuICAgICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkodGhpcy5pc3N1ZXMsIHV0aWwuanNvblN0cmluZ2lmeVJlcGxhY2VyLCAyKTtcbiAgICB9XG4gICAgZ2V0IGlzRW1wdHkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmlzc3Vlcy5sZW5ndGggPT09IDA7XG4gICAgfVxuICAgIGZsYXR0ZW4obWFwcGVyID0gKGlzc3VlKSA9PiBpc3N1ZS5tZXNzYWdlKSB7XG4gICAgICAgIGNvbnN0IGZpZWxkRXJyb3JzID0ge307XG4gICAgICAgIGNvbnN0IGZvcm1FcnJvcnMgPSBbXTtcbiAgICAgICAgZm9yIChjb25zdCBzdWIgb2YgdGhpcy5pc3N1ZXMpIHtcbiAgICAgICAgICAgIGlmIChzdWIucGF0aC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZmlyc3RFbCA9IHN1Yi5wYXRoWzBdO1xuICAgICAgICAgICAgICAgIGZpZWxkRXJyb3JzW2ZpcnN0RWxdID0gZmllbGRFcnJvcnNbZmlyc3RFbF0gfHwgW107XG4gICAgICAgICAgICAgICAgZmllbGRFcnJvcnNbZmlyc3RFbF0ucHVzaChtYXBwZXIoc3ViKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBmb3JtRXJyb3JzLnB1c2gobWFwcGVyKHN1YikpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7IGZvcm1FcnJvcnMsIGZpZWxkRXJyb3JzIH07XG4gICAgfVxuICAgIGdldCBmb3JtRXJyb3JzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5mbGF0dGVuKCk7XG4gICAgfVxufVxuWm9kRXJyb3IuY3JlYXRlID0gKGlzc3VlcykgPT4ge1xuICAgIGNvbnN0IGVycm9yID0gbmV3IFpvZEVycm9yKGlzc3Vlcyk7XG4gICAgcmV0dXJuIGVycm9yO1xufTtcbiIsImltcG9ydCB7IFpvZElzc3VlQ29kZSB9IGZyb20gXCIuLi9ab2RFcnJvci5qc1wiO1xuaW1wb3J0IHsgdXRpbCwgWm9kUGFyc2VkVHlwZSB9IGZyb20gXCIuLi9oZWxwZXJzL3V0aWwuanNcIjtcbmNvbnN0IGVycm9yTWFwID0gKGlzc3VlLCBfY3R4KSA9PiB7XG4gICAgbGV0IG1lc3NhZ2U7XG4gICAgc3dpdGNoIChpc3N1ZS5jb2RlKSB7XG4gICAgICAgIGNhc2UgWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZTpcbiAgICAgICAgICAgIGlmIChpc3N1ZS5yZWNlaXZlZCA9PT0gWm9kUGFyc2VkVHlwZS51bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBtZXNzYWdlID0gXCJSZXF1aXJlZFwiO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgbWVzc2FnZSA9IGBFeHBlY3RlZCAke2lzc3VlLmV4cGVjdGVkfSwgcmVjZWl2ZWQgJHtpc3N1ZS5yZWNlaXZlZH1gO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgWm9kSXNzdWVDb2RlLmludmFsaWRfbGl0ZXJhbDpcbiAgICAgICAgICAgIG1lc3NhZ2UgPSBgSW52YWxpZCBsaXRlcmFsIHZhbHVlLCBleHBlY3RlZCAke0pTT04uc3RyaW5naWZ5KGlzc3VlLmV4cGVjdGVkLCB1dGlsLmpzb25TdHJpbmdpZnlSZXBsYWNlcil9YDtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFpvZElzc3VlQ29kZS51bnJlY29nbml6ZWRfa2V5czpcbiAgICAgICAgICAgIG1lc3NhZ2UgPSBgVW5yZWNvZ25pemVkIGtleShzKSBpbiBvYmplY3Q6ICR7dXRpbC5qb2luVmFsdWVzKGlzc3VlLmtleXMsIFwiLCBcIil9YDtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFpvZElzc3VlQ29kZS5pbnZhbGlkX3VuaW9uOlxuICAgICAgICAgICAgbWVzc2FnZSA9IGBJbnZhbGlkIGlucHV0YDtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFpvZElzc3VlQ29kZS5pbnZhbGlkX3VuaW9uX2Rpc2NyaW1pbmF0b3I6XG4gICAgICAgICAgICBtZXNzYWdlID0gYEludmFsaWQgZGlzY3JpbWluYXRvciB2YWx1ZS4gRXhwZWN0ZWQgJHt1dGlsLmpvaW5WYWx1ZXMoaXNzdWUub3B0aW9ucyl9YDtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFpvZElzc3VlQ29kZS5pbnZhbGlkX2VudW1fdmFsdWU6XG4gICAgICAgICAgICBtZXNzYWdlID0gYEludmFsaWQgZW51bSB2YWx1ZS4gRXhwZWN0ZWQgJHt1dGlsLmpvaW5WYWx1ZXMoaXNzdWUub3B0aW9ucyl9LCByZWNlaXZlZCAnJHtpc3N1ZS5yZWNlaXZlZH0nYDtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFpvZElzc3VlQ29kZS5pbnZhbGlkX2FyZ3VtZW50czpcbiAgICAgICAgICAgIG1lc3NhZ2UgPSBgSW52YWxpZCBmdW5jdGlvbiBhcmd1bWVudHNgO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgWm9kSXNzdWVDb2RlLmludmFsaWRfcmV0dXJuX3R5cGU6XG4gICAgICAgICAgICBtZXNzYWdlID0gYEludmFsaWQgZnVuY3Rpb24gcmV0dXJuIHR5cGVgO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgWm9kSXNzdWVDb2RlLmludmFsaWRfZGF0ZTpcbiAgICAgICAgICAgIG1lc3NhZ2UgPSBgSW52YWxpZCBkYXRlYDtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFpvZElzc3VlQ29kZS5pbnZhbGlkX3N0cmluZzpcbiAgICAgICAgICAgIGlmICh0eXBlb2YgaXNzdWUudmFsaWRhdGlvbiA9PT0gXCJvYmplY3RcIikge1xuICAgICAgICAgICAgICAgIGlmIChcImluY2x1ZGVzXCIgaW4gaXNzdWUudmFsaWRhdGlvbikge1xuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlID0gYEludmFsaWQgaW5wdXQ6IG11c3QgaW5jbHVkZSBcIiR7aXNzdWUudmFsaWRhdGlvbi5pbmNsdWRlc31cImA7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgaXNzdWUudmFsaWRhdGlvbi5wb3NpdGlvbiA9PT0gXCJudW1iZXJcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZSA9IGAke21lc3NhZ2V9IGF0IG9uZSBvciBtb3JlIHBvc2l0aW9ucyBncmVhdGVyIHRoYW4gb3IgZXF1YWwgdG8gJHtpc3N1ZS52YWxpZGF0aW9uLnBvc2l0aW9ufWA7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoXCJzdGFydHNXaXRoXCIgaW4gaXNzdWUudmFsaWRhdGlvbikge1xuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlID0gYEludmFsaWQgaW5wdXQ6IG11c3Qgc3RhcnQgd2l0aCBcIiR7aXNzdWUudmFsaWRhdGlvbi5zdGFydHNXaXRofVwiYDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoXCJlbmRzV2l0aFwiIGluIGlzc3VlLnZhbGlkYXRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZSA9IGBJbnZhbGlkIGlucHV0OiBtdXN0IGVuZCB3aXRoIFwiJHtpc3N1ZS52YWxpZGF0aW9uLmVuZHNXaXRofVwiYDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHV0aWwuYXNzZXJ0TmV2ZXIoaXNzdWUudmFsaWRhdGlvbik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoaXNzdWUudmFsaWRhdGlvbiAhPT0gXCJyZWdleFwiKSB7XG4gICAgICAgICAgICAgICAgbWVzc2FnZSA9IGBJbnZhbGlkICR7aXNzdWUudmFsaWRhdGlvbn1gO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgbWVzc2FnZSA9IFwiSW52YWxpZFwiO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgWm9kSXNzdWVDb2RlLnRvb19zbWFsbDpcbiAgICAgICAgICAgIGlmIChpc3N1ZS50eXBlID09PSBcImFycmF5XCIpXG4gICAgICAgICAgICAgICAgbWVzc2FnZSA9IGBBcnJheSBtdXN0IGNvbnRhaW4gJHtpc3N1ZS5leGFjdCA/IFwiZXhhY3RseVwiIDogaXNzdWUuaW5jbHVzaXZlID8gYGF0IGxlYXN0YCA6IGBtb3JlIHRoYW5gfSAke2lzc3VlLm1pbmltdW19IGVsZW1lbnQocylgO1xuICAgICAgICAgICAgZWxzZSBpZiAoaXNzdWUudHlwZSA9PT0gXCJzdHJpbmdcIilcbiAgICAgICAgICAgICAgICBtZXNzYWdlID0gYFN0cmluZyBtdXN0IGNvbnRhaW4gJHtpc3N1ZS5leGFjdCA/IFwiZXhhY3RseVwiIDogaXNzdWUuaW5jbHVzaXZlID8gYGF0IGxlYXN0YCA6IGBvdmVyYH0gJHtpc3N1ZS5taW5pbXVtfSBjaGFyYWN0ZXIocylgO1xuICAgICAgICAgICAgZWxzZSBpZiAoaXNzdWUudHlwZSA9PT0gXCJudW1iZXJcIilcbiAgICAgICAgICAgICAgICBtZXNzYWdlID0gYE51bWJlciBtdXN0IGJlICR7aXNzdWUuZXhhY3QgPyBgZXhhY3RseSBlcXVhbCB0byBgIDogaXNzdWUuaW5jbHVzaXZlID8gYGdyZWF0ZXIgdGhhbiBvciBlcXVhbCB0byBgIDogYGdyZWF0ZXIgdGhhbiBgfSR7aXNzdWUubWluaW11bX1gO1xuICAgICAgICAgICAgZWxzZSBpZiAoaXNzdWUudHlwZSA9PT0gXCJiaWdpbnRcIilcbiAgICAgICAgICAgICAgICBtZXNzYWdlID0gYE51bWJlciBtdXN0IGJlICR7aXNzdWUuZXhhY3QgPyBgZXhhY3RseSBlcXVhbCB0byBgIDogaXNzdWUuaW5jbHVzaXZlID8gYGdyZWF0ZXIgdGhhbiBvciBlcXVhbCB0byBgIDogYGdyZWF0ZXIgdGhhbiBgfSR7aXNzdWUubWluaW11bX1gO1xuICAgICAgICAgICAgZWxzZSBpZiAoaXNzdWUudHlwZSA9PT0gXCJkYXRlXCIpXG4gICAgICAgICAgICAgICAgbWVzc2FnZSA9IGBEYXRlIG11c3QgYmUgJHtpc3N1ZS5leGFjdCA/IGBleGFjdGx5IGVxdWFsIHRvIGAgOiBpc3N1ZS5pbmNsdXNpdmUgPyBgZ3JlYXRlciB0aGFuIG9yIGVxdWFsIHRvIGAgOiBgZ3JlYXRlciB0aGFuIGB9JHtuZXcgRGF0ZShOdW1iZXIoaXNzdWUubWluaW11bSkpfWA7XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgbWVzc2FnZSA9IFwiSW52YWxpZCBpbnB1dFwiO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgWm9kSXNzdWVDb2RlLnRvb19iaWc6XG4gICAgICAgICAgICBpZiAoaXNzdWUudHlwZSA9PT0gXCJhcnJheVwiKVxuICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSBgQXJyYXkgbXVzdCBjb250YWluICR7aXNzdWUuZXhhY3QgPyBgZXhhY3RseWAgOiBpc3N1ZS5pbmNsdXNpdmUgPyBgYXQgbW9zdGAgOiBgbGVzcyB0aGFuYH0gJHtpc3N1ZS5tYXhpbXVtfSBlbGVtZW50KHMpYDtcbiAgICAgICAgICAgIGVsc2UgaWYgKGlzc3VlLnR5cGUgPT09IFwic3RyaW5nXCIpXG4gICAgICAgICAgICAgICAgbWVzc2FnZSA9IGBTdHJpbmcgbXVzdCBjb250YWluICR7aXNzdWUuZXhhY3QgPyBgZXhhY3RseWAgOiBpc3N1ZS5pbmNsdXNpdmUgPyBgYXQgbW9zdGAgOiBgdW5kZXJgfSAke2lzc3VlLm1heGltdW19IGNoYXJhY3RlcihzKWA7XG4gICAgICAgICAgICBlbHNlIGlmIChpc3N1ZS50eXBlID09PSBcIm51bWJlclwiKVxuICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSBgTnVtYmVyIG11c3QgYmUgJHtpc3N1ZS5leGFjdCA/IGBleGFjdGx5YCA6IGlzc3VlLmluY2x1c2l2ZSA/IGBsZXNzIHRoYW4gb3IgZXF1YWwgdG9gIDogYGxlc3MgdGhhbmB9ICR7aXNzdWUubWF4aW11bX1gO1xuICAgICAgICAgICAgZWxzZSBpZiAoaXNzdWUudHlwZSA9PT0gXCJiaWdpbnRcIilcbiAgICAgICAgICAgICAgICBtZXNzYWdlID0gYEJpZ0ludCBtdXN0IGJlICR7aXNzdWUuZXhhY3QgPyBgZXhhY3RseWAgOiBpc3N1ZS5pbmNsdXNpdmUgPyBgbGVzcyB0aGFuIG9yIGVxdWFsIHRvYCA6IGBsZXNzIHRoYW5gfSAke2lzc3VlLm1heGltdW19YDtcbiAgICAgICAgICAgIGVsc2UgaWYgKGlzc3VlLnR5cGUgPT09IFwiZGF0ZVwiKVxuICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSBgRGF0ZSBtdXN0IGJlICR7aXNzdWUuZXhhY3QgPyBgZXhhY3RseWAgOiBpc3N1ZS5pbmNsdXNpdmUgPyBgc21hbGxlciB0aGFuIG9yIGVxdWFsIHRvYCA6IGBzbWFsbGVyIHRoYW5gfSAke25ldyBEYXRlKE51bWJlcihpc3N1ZS5tYXhpbXVtKSl9YDtcbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICBtZXNzYWdlID0gXCJJbnZhbGlkIGlucHV0XCI7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBab2RJc3N1ZUNvZGUuY3VzdG9tOlxuICAgICAgICAgICAgbWVzc2FnZSA9IGBJbnZhbGlkIGlucHV0YDtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFpvZElzc3VlQ29kZS5pbnZhbGlkX2ludGVyc2VjdGlvbl90eXBlczpcbiAgICAgICAgICAgIG1lc3NhZ2UgPSBgSW50ZXJzZWN0aW9uIHJlc3VsdHMgY291bGQgbm90IGJlIG1lcmdlZGA7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBab2RJc3N1ZUNvZGUubm90X211bHRpcGxlX29mOlxuICAgICAgICAgICAgbWVzc2FnZSA9IGBOdW1iZXIgbXVzdCBiZSBhIG11bHRpcGxlIG9mICR7aXNzdWUubXVsdGlwbGVPZn1gO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgWm9kSXNzdWVDb2RlLm5vdF9maW5pdGU6XG4gICAgICAgICAgICBtZXNzYWdlID0gXCJOdW1iZXIgbXVzdCBiZSBmaW5pdGVcIjtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgbWVzc2FnZSA9IF9jdHguZGVmYXVsdEVycm9yO1xuICAgICAgICAgICAgdXRpbC5hc3NlcnROZXZlcihpc3N1ZSk7XG4gICAgfVxuICAgIHJldHVybiB7IG1lc3NhZ2UgfTtcbn07XG5leHBvcnQgZGVmYXVsdCBlcnJvck1hcDtcbiIsImltcG9ydCBkZWZhdWx0RXJyb3JNYXAgZnJvbSBcIi4vbG9jYWxlcy9lbi5qc1wiO1xubGV0IG92ZXJyaWRlRXJyb3JNYXAgPSBkZWZhdWx0RXJyb3JNYXA7XG5leHBvcnQgeyBkZWZhdWx0RXJyb3JNYXAgfTtcbmV4cG9ydCBmdW5jdGlvbiBzZXRFcnJvck1hcChtYXApIHtcbiAgICBvdmVycmlkZUVycm9yTWFwID0gbWFwO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGdldEVycm9yTWFwKCkge1xuICAgIHJldHVybiBvdmVycmlkZUVycm9yTWFwO1xufVxuIiwiaW1wb3J0IHsgZ2V0RXJyb3JNYXAgfSBmcm9tIFwiLi4vZXJyb3JzLmpzXCI7XG5pbXBvcnQgZGVmYXVsdEVycm9yTWFwIGZyb20gXCIuLi9sb2NhbGVzL2VuLmpzXCI7XG5leHBvcnQgY29uc3QgbWFrZUlzc3VlID0gKHBhcmFtcykgPT4ge1xuICAgIGNvbnN0IHsgZGF0YSwgcGF0aCwgZXJyb3JNYXBzLCBpc3N1ZURhdGEgfSA9IHBhcmFtcztcbiAgICBjb25zdCBmdWxsUGF0aCA9IFsuLi5wYXRoLCAuLi4oaXNzdWVEYXRhLnBhdGggfHwgW10pXTtcbiAgICBjb25zdCBmdWxsSXNzdWUgPSB7XG4gICAgICAgIC4uLmlzc3VlRGF0YSxcbiAgICAgICAgcGF0aDogZnVsbFBhdGgsXG4gICAgfTtcbiAgICBpZiAoaXNzdWVEYXRhLm1lc3NhZ2UgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgLi4uaXNzdWVEYXRhLFxuICAgICAgICAgICAgcGF0aDogZnVsbFBhdGgsXG4gICAgICAgICAgICBtZXNzYWdlOiBpc3N1ZURhdGEubWVzc2FnZSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgbGV0IGVycm9yTWVzc2FnZSA9IFwiXCI7XG4gICAgY29uc3QgbWFwcyA9IGVycm9yTWFwc1xuICAgICAgICAuZmlsdGVyKChtKSA9PiAhIW0pXG4gICAgICAgIC5zbGljZSgpXG4gICAgICAgIC5yZXZlcnNlKCk7XG4gICAgZm9yIChjb25zdCBtYXAgb2YgbWFwcykge1xuICAgICAgICBlcnJvck1lc3NhZ2UgPSBtYXAoZnVsbElzc3VlLCB7IGRhdGEsIGRlZmF1bHRFcnJvcjogZXJyb3JNZXNzYWdlIH0pLm1lc3NhZ2U7XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICAgIC4uLmlzc3VlRGF0YSxcbiAgICAgICAgcGF0aDogZnVsbFBhdGgsXG4gICAgICAgIG1lc3NhZ2U6IGVycm9yTWVzc2FnZSxcbiAgICB9O1xufTtcbmV4cG9ydCBjb25zdCBFTVBUWV9QQVRIID0gW107XG5leHBvcnQgZnVuY3Rpb24gYWRkSXNzdWVUb0NvbnRleHQoY3R4LCBpc3N1ZURhdGEpIHtcbiAgICBjb25zdCBvdmVycmlkZU1hcCA9IGdldEVycm9yTWFwKCk7XG4gICAgY29uc3QgaXNzdWUgPSBtYWtlSXNzdWUoe1xuICAgICAgICBpc3N1ZURhdGE6IGlzc3VlRGF0YSxcbiAgICAgICAgZGF0YTogY3R4LmRhdGEsXG4gICAgICAgIHBhdGg6IGN0eC5wYXRoLFxuICAgICAgICBlcnJvck1hcHM6IFtcbiAgICAgICAgICAgIGN0eC5jb21tb24uY29udGV4dHVhbEVycm9yTWFwLCAvLyBjb250ZXh0dWFsIGVycm9yIG1hcCBpcyBmaXJzdCBwcmlvcml0eVxuICAgICAgICAgICAgY3R4LnNjaGVtYUVycm9yTWFwLCAvLyB0aGVuIHNjaGVtYS1ib3VuZCBtYXAgaWYgYXZhaWxhYmxlXG4gICAgICAgICAgICBvdmVycmlkZU1hcCwgLy8gdGhlbiBnbG9iYWwgb3ZlcnJpZGUgbWFwXG4gICAgICAgICAgICBvdmVycmlkZU1hcCA9PT0gZGVmYXVsdEVycm9yTWFwID8gdW5kZWZpbmVkIDogZGVmYXVsdEVycm9yTWFwLCAvLyB0aGVuIGdsb2JhbCBkZWZhdWx0IG1hcFxuICAgICAgICBdLmZpbHRlcigoeCkgPT4gISF4KSxcbiAgICB9KTtcbiAgICBjdHguY29tbW9uLmlzc3Vlcy5wdXNoKGlzc3VlKTtcbn1cbmV4cG9ydCBjbGFzcyBQYXJzZVN0YXR1cyB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMudmFsdWUgPSBcInZhbGlkXCI7XG4gICAgfVxuICAgIGRpcnR5KCkge1xuICAgICAgICBpZiAodGhpcy52YWx1ZSA9PT0gXCJ2YWxpZFwiKVxuICAgICAgICAgICAgdGhpcy52YWx1ZSA9IFwiZGlydHlcIjtcbiAgICB9XG4gICAgYWJvcnQoKSB7XG4gICAgICAgIGlmICh0aGlzLnZhbHVlICE9PSBcImFib3J0ZWRcIilcbiAgICAgICAgICAgIHRoaXMudmFsdWUgPSBcImFib3J0ZWRcIjtcbiAgICB9XG4gICAgc3RhdGljIG1lcmdlQXJyYXkoc3RhdHVzLCByZXN1bHRzKSB7XG4gICAgICAgIGNvbnN0IGFycmF5VmFsdWUgPSBbXTtcbiAgICAgICAgZm9yIChjb25zdCBzIG9mIHJlc3VsdHMpIHtcbiAgICAgICAgICAgIGlmIChzLnN0YXR1cyA9PT0gXCJhYm9ydGVkXCIpXG4gICAgICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgICAgICBpZiAocy5zdGF0dXMgPT09IFwiZGlydHlcIilcbiAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgIGFycmF5VmFsdWUucHVzaChzLnZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4geyBzdGF0dXM6IHN0YXR1cy52YWx1ZSwgdmFsdWU6IGFycmF5VmFsdWUgfTtcbiAgICB9XG4gICAgc3RhdGljIGFzeW5jIG1lcmdlT2JqZWN0QXN5bmMoc3RhdHVzLCBwYWlycykge1xuICAgICAgICBjb25zdCBzeW5jUGFpcnMgPSBbXTtcbiAgICAgICAgZm9yIChjb25zdCBwYWlyIG9mIHBhaXJzKSB7XG4gICAgICAgICAgICBjb25zdCBrZXkgPSBhd2FpdCBwYWlyLmtleTtcbiAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gYXdhaXQgcGFpci52YWx1ZTtcbiAgICAgICAgICAgIHN5bmNQYWlycy5wdXNoKHtcbiAgICAgICAgICAgICAgICBrZXksXG4gICAgICAgICAgICAgICAgdmFsdWUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gUGFyc2VTdGF0dXMubWVyZ2VPYmplY3RTeW5jKHN0YXR1cywgc3luY1BhaXJzKTtcbiAgICB9XG4gICAgc3RhdGljIG1lcmdlT2JqZWN0U3luYyhzdGF0dXMsIHBhaXJzKSB7XG4gICAgICAgIGNvbnN0IGZpbmFsT2JqZWN0ID0ge307XG4gICAgICAgIGZvciAoY29uc3QgcGFpciBvZiBwYWlycykge1xuICAgICAgICAgICAgY29uc3QgeyBrZXksIHZhbHVlIH0gPSBwYWlyO1xuICAgICAgICAgICAgaWYgKGtleS5zdGF0dXMgPT09IFwiYWJvcnRlZFwiKVxuICAgICAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICAgICAgaWYgKHZhbHVlLnN0YXR1cyA9PT0gXCJhYm9ydGVkXCIpXG4gICAgICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgICAgICBpZiAoa2V5LnN0YXR1cyA9PT0gXCJkaXJ0eVwiKVxuICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgaWYgKHZhbHVlLnN0YXR1cyA9PT0gXCJkaXJ0eVwiKVxuICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgaWYgKGtleS52YWx1ZSAhPT0gXCJfX3Byb3RvX19cIiAmJiAodHlwZW9mIHZhbHVlLnZhbHVlICE9PSBcInVuZGVmaW5lZFwiIHx8IHBhaXIuYWx3YXlzU2V0KSkge1xuICAgICAgICAgICAgICAgIGZpbmFsT2JqZWN0W2tleS52YWx1ZV0gPSB2YWx1ZS52YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4geyBzdGF0dXM6IHN0YXR1cy52YWx1ZSwgdmFsdWU6IGZpbmFsT2JqZWN0IH07XG4gICAgfVxufVxuZXhwb3J0IGNvbnN0IElOVkFMSUQgPSBPYmplY3QuZnJlZXplKHtcbiAgICBzdGF0dXM6IFwiYWJvcnRlZFwiLFxufSk7XG5leHBvcnQgY29uc3QgRElSVFkgPSAodmFsdWUpID0+ICh7IHN0YXR1czogXCJkaXJ0eVwiLCB2YWx1ZSB9KTtcbmV4cG9ydCBjb25zdCBPSyA9ICh2YWx1ZSkgPT4gKHsgc3RhdHVzOiBcInZhbGlkXCIsIHZhbHVlIH0pO1xuZXhwb3J0IGNvbnN0IGlzQWJvcnRlZCA9ICh4KSA9PiB4LnN0YXR1cyA9PT0gXCJhYm9ydGVkXCI7XG5leHBvcnQgY29uc3QgaXNEaXJ0eSA9ICh4KSA9PiB4LnN0YXR1cyA9PT0gXCJkaXJ0eVwiO1xuZXhwb3J0IGNvbnN0IGlzVmFsaWQgPSAoeCkgPT4geC5zdGF0dXMgPT09IFwidmFsaWRcIjtcbmV4cG9ydCBjb25zdCBpc0FzeW5jID0gKHgpID0+IHR5cGVvZiBQcm9taXNlICE9PSBcInVuZGVmaW5lZFwiICYmIHggaW5zdGFuY2VvZiBQcm9taXNlO1xuIiwiZXhwb3J0IHZhciBlcnJvclV0aWw7XG4oZnVuY3Rpb24gKGVycm9yVXRpbCkge1xuICAgIGVycm9yVXRpbC5lcnJUb09iaiA9IChtZXNzYWdlKSA9PiB0eXBlb2YgbWVzc2FnZSA9PT0gXCJzdHJpbmdcIiA/IHsgbWVzc2FnZSB9IDogbWVzc2FnZSB8fCB7fTtcbiAgICAvLyBiaW9tZS1pZ25vcmUgbGludDpcbiAgICBlcnJvclV0aWwudG9TdHJpbmcgPSAobWVzc2FnZSkgPT4gdHlwZW9mIG1lc3NhZ2UgPT09IFwic3RyaW5nXCIgPyBtZXNzYWdlIDogbWVzc2FnZT8ubWVzc2FnZTtcbn0pKGVycm9yVXRpbCB8fCAoZXJyb3JVdGlsID0ge30pKTtcbiIsImltcG9ydCB7IFpvZEVycm9yLCBab2RJc3N1ZUNvZGUsIH0gZnJvbSBcIi4vWm9kRXJyb3IuanNcIjtcbmltcG9ydCB7IGRlZmF1bHRFcnJvck1hcCwgZ2V0RXJyb3JNYXAgfSBmcm9tIFwiLi9lcnJvcnMuanNcIjtcbmltcG9ydCB7IGVycm9yVXRpbCB9IGZyb20gXCIuL2hlbHBlcnMvZXJyb3JVdGlsLmpzXCI7XG5pbXBvcnQgeyBESVJUWSwgSU5WQUxJRCwgT0ssIFBhcnNlU3RhdHVzLCBhZGRJc3N1ZVRvQ29udGV4dCwgaXNBYm9ydGVkLCBpc0FzeW5jLCBpc0RpcnR5LCBpc1ZhbGlkLCBtYWtlSXNzdWUsIH0gZnJvbSBcIi4vaGVscGVycy9wYXJzZVV0aWwuanNcIjtcbmltcG9ydCB7IHV0aWwsIFpvZFBhcnNlZFR5cGUsIGdldFBhcnNlZFR5cGUgfSBmcm9tIFwiLi9oZWxwZXJzL3V0aWwuanNcIjtcbmNsYXNzIFBhcnNlSW5wdXRMYXp5UGF0aCB7XG4gICAgY29uc3RydWN0b3IocGFyZW50LCB2YWx1ZSwgcGF0aCwga2V5KSB7XG4gICAgICAgIHRoaXMuX2NhY2hlZFBhdGggPSBbXTtcbiAgICAgICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XG4gICAgICAgIHRoaXMuZGF0YSA9IHZhbHVlO1xuICAgICAgICB0aGlzLl9wYXRoID0gcGF0aDtcbiAgICAgICAgdGhpcy5fa2V5ID0ga2V5O1xuICAgIH1cbiAgICBnZXQgcGF0aCgpIHtcbiAgICAgICAgaWYgKCF0aGlzLl9jYWNoZWRQYXRoLmxlbmd0aCkge1xuICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkodGhpcy5fa2V5KSkge1xuICAgICAgICAgICAgICAgIHRoaXMuX2NhY2hlZFBhdGgucHVzaCguLi50aGlzLl9wYXRoLCAuLi50aGlzLl9rZXkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fY2FjaGVkUGF0aC5wdXNoKC4uLnRoaXMuX3BhdGgsIHRoaXMuX2tleSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuX2NhY2hlZFBhdGg7XG4gICAgfVxufVxuY29uc3QgaGFuZGxlUmVzdWx0ID0gKGN0eCwgcmVzdWx0KSA9PiB7XG4gICAgaWYgKGlzVmFsaWQocmVzdWx0KSkge1xuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCBkYXRhOiByZXN1bHQudmFsdWUgfTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGlmICghY3R4LmNvbW1vbi5pc3N1ZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJWYWxpZGF0aW9uIGZhaWxlZCBidXQgbm8gaXNzdWVzIGRldGVjdGVkLlwiKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgICBnZXQgZXJyb3IoKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuX2Vycm9yKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fZXJyb3I7XG4gICAgICAgICAgICAgICAgY29uc3QgZXJyb3IgPSBuZXcgWm9kRXJyb3IoY3R4LmNvbW1vbi5pc3N1ZXMpO1xuICAgICAgICAgICAgICAgIHRoaXMuX2Vycm9yID0gZXJyb3I7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2Vycm9yO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgfTtcbiAgICB9XG59O1xuZnVuY3Rpb24gcHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpIHtcbiAgICBpZiAoIXBhcmFtcylcbiAgICAgICAgcmV0dXJuIHt9O1xuICAgIGNvbnN0IHsgZXJyb3JNYXAsIGludmFsaWRfdHlwZV9lcnJvciwgcmVxdWlyZWRfZXJyb3IsIGRlc2NyaXB0aW9uIH0gPSBwYXJhbXM7XG4gICAgaWYgKGVycm9yTWFwICYmIChpbnZhbGlkX3R5cGVfZXJyb3IgfHwgcmVxdWlyZWRfZXJyb3IpKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgQ2FuJ3QgdXNlIFwiaW52YWxpZF90eXBlX2Vycm9yXCIgb3IgXCJyZXF1aXJlZF9lcnJvclwiIGluIGNvbmp1bmN0aW9uIHdpdGggY3VzdG9tIGVycm9yIG1hcC5gKTtcbiAgICB9XG4gICAgaWYgKGVycm9yTWFwKVxuICAgICAgICByZXR1cm4geyBlcnJvck1hcDogZXJyb3JNYXAsIGRlc2NyaXB0aW9uIH07XG4gICAgY29uc3QgY3VzdG9tTWFwID0gKGlzcywgY3R4KSA9PiB7XG4gICAgICAgIGNvbnN0IHsgbWVzc2FnZSB9ID0gcGFyYW1zO1xuICAgICAgICBpZiAoaXNzLmNvZGUgPT09IFwiaW52YWxpZF9lbnVtX3ZhbHVlXCIpIHtcbiAgICAgICAgICAgIHJldHVybiB7IG1lc3NhZ2U6IG1lc3NhZ2UgPz8gY3R4LmRlZmF1bHRFcnJvciB9O1xuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlb2YgY3R4LmRhdGEgPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgICAgIHJldHVybiB7IG1lc3NhZ2U6IG1lc3NhZ2UgPz8gcmVxdWlyZWRfZXJyb3IgPz8gY3R4LmRlZmF1bHRFcnJvciB9O1xuICAgICAgICB9XG4gICAgICAgIGlmIChpc3MuY29kZSAhPT0gXCJpbnZhbGlkX3R5cGVcIilcbiAgICAgICAgICAgIHJldHVybiB7IG1lc3NhZ2U6IGN0eC5kZWZhdWx0RXJyb3IgfTtcbiAgICAgICAgcmV0dXJuIHsgbWVzc2FnZTogbWVzc2FnZSA/PyBpbnZhbGlkX3R5cGVfZXJyb3IgPz8gY3R4LmRlZmF1bHRFcnJvciB9O1xuICAgIH07XG4gICAgcmV0dXJuIHsgZXJyb3JNYXA6IGN1c3RvbU1hcCwgZGVzY3JpcHRpb24gfTtcbn1cbmV4cG9ydCBjbGFzcyBab2RUeXBlIHtcbiAgICBnZXQgZGVzY3JpcHRpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYuZGVzY3JpcHRpb247XG4gICAgfVxuICAgIF9nZXRUeXBlKGlucHV0KSB7XG4gICAgICAgIHJldHVybiBnZXRQYXJzZWRUeXBlKGlucHV0LmRhdGEpO1xuICAgIH1cbiAgICBfZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCkge1xuICAgICAgICByZXR1cm4gKGN0eCB8fCB7XG4gICAgICAgICAgICBjb21tb246IGlucHV0LnBhcmVudC5jb21tb24sXG4gICAgICAgICAgICBkYXRhOiBpbnB1dC5kYXRhLFxuICAgICAgICAgICAgcGFyc2VkVHlwZTogZ2V0UGFyc2VkVHlwZShpbnB1dC5kYXRhKSxcbiAgICAgICAgICAgIHNjaGVtYUVycm9yTWFwOiB0aGlzLl9kZWYuZXJyb3JNYXAsXG4gICAgICAgICAgICBwYXRoOiBpbnB1dC5wYXRoLFxuICAgICAgICAgICAgcGFyZW50OiBpbnB1dC5wYXJlbnQsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBfcHJvY2Vzc0lucHV0UGFyYW1zKGlucHV0KSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBzdGF0dXM6IG5ldyBQYXJzZVN0YXR1cygpLFxuICAgICAgICAgICAgY3R4OiB7XG4gICAgICAgICAgICAgICAgY29tbW9uOiBpbnB1dC5wYXJlbnQuY29tbW9uLFxuICAgICAgICAgICAgICAgIGRhdGE6IGlucHV0LmRhdGEsXG4gICAgICAgICAgICAgICAgcGFyc2VkVHlwZTogZ2V0UGFyc2VkVHlwZShpbnB1dC5kYXRhKSxcbiAgICAgICAgICAgICAgICBzY2hlbWFFcnJvck1hcDogdGhpcy5fZGVmLmVycm9yTWFwLFxuICAgICAgICAgICAgICAgIHBhdGg6IGlucHV0LnBhdGgsXG4gICAgICAgICAgICAgICAgcGFyZW50OiBpbnB1dC5wYXJlbnQsXG4gICAgICAgICAgICB9LFxuICAgICAgICB9O1xuICAgIH1cbiAgICBfcGFyc2VTeW5jKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMuX3BhcnNlKGlucHV0KTtcbiAgICAgICAgaWYgKGlzQXN5bmMocmVzdWx0KSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiU3luY2hyb25vdXMgcGFyc2UgZW5jb3VudGVyZWQgcHJvbWlzZS5cIik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG4gICAgX3BhcnNlQXN5bmMoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gdGhpcy5fcGFyc2UoaW5wdXQpO1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHJlc3VsdCk7XG4gICAgfVxuICAgIHBhcnNlKGRhdGEsIHBhcmFtcykge1xuICAgICAgICBjb25zdCByZXN1bHQgPSB0aGlzLnNhZmVQYXJzZShkYXRhLCBwYXJhbXMpO1xuICAgICAgICBpZiAocmVzdWx0LnN1Y2Nlc3MpXG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0LmRhdGE7XG4gICAgICAgIHRocm93IHJlc3VsdC5lcnJvcjtcbiAgICB9XG4gICAgc2FmZVBhcnNlKGRhdGEsIHBhcmFtcykge1xuICAgICAgICBjb25zdCBjdHggPSB7XG4gICAgICAgICAgICBjb21tb246IHtcbiAgICAgICAgICAgICAgICBpc3N1ZXM6IFtdLFxuICAgICAgICAgICAgICAgIGFzeW5jOiBwYXJhbXM/LmFzeW5jID8/IGZhbHNlLFxuICAgICAgICAgICAgICAgIGNvbnRleHR1YWxFcnJvck1hcDogcGFyYW1zPy5lcnJvck1hcCxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBwYXRoOiBwYXJhbXM/LnBhdGggfHwgW10sXG4gICAgICAgICAgICBzY2hlbWFFcnJvck1hcDogdGhpcy5fZGVmLmVycm9yTWFwLFxuICAgICAgICAgICAgcGFyZW50OiBudWxsLFxuICAgICAgICAgICAgZGF0YSxcbiAgICAgICAgICAgIHBhcnNlZFR5cGU6IGdldFBhcnNlZFR5cGUoZGF0YSksXG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMuX3BhcnNlU3luYyh7IGRhdGEsIHBhdGg6IGN0eC5wYXRoLCBwYXJlbnQ6IGN0eCB9KTtcbiAgICAgICAgcmV0dXJuIGhhbmRsZVJlc3VsdChjdHgsIHJlc3VsdCk7XG4gICAgfVxuICAgIFwifnZhbGlkYXRlXCIoZGF0YSkge1xuICAgICAgICBjb25zdCBjdHggPSB7XG4gICAgICAgICAgICBjb21tb246IHtcbiAgICAgICAgICAgICAgICBpc3N1ZXM6IFtdLFxuICAgICAgICAgICAgICAgIGFzeW5jOiAhIXRoaXNbXCJ+c3RhbmRhcmRcIl0uYXN5bmMsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcGF0aDogW10sXG4gICAgICAgICAgICBzY2hlbWFFcnJvck1hcDogdGhpcy5fZGVmLmVycm9yTWFwLFxuICAgICAgICAgICAgcGFyZW50OiBudWxsLFxuICAgICAgICAgICAgZGF0YSxcbiAgICAgICAgICAgIHBhcnNlZFR5cGU6IGdldFBhcnNlZFR5cGUoZGF0YSksXG4gICAgICAgIH07XG4gICAgICAgIGlmICghdGhpc1tcIn5zdGFuZGFyZFwiXS5hc3luYykge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSB0aGlzLl9wYXJzZVN5bmMoeyBkYXRhLCBwYXRoOiBbXSwgcGFyZW50OiBjdHggfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGlzVmFsaWQocmVzdWx0KVxuICAgICAgICAgICAgICAgICAgICA/IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiByZXN1bHQudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpc3N1ZXM6IGN0eC5jb21tb24uaXNzdWVzLFxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgIGlmIChlcnI/Lm1lc3NhZ2U/LnRvTG93ZXJDYXNlKCk/LmluY2x1ZGVzKFwiZW5jb3VudGVyZWRcIikpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpc1tcIn5zdGFuZGFyZFwiXS5hc3luYyA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGN0eC5jb21tb24gPSB7XG4gICAgICAgICAgICAgICAgICAgIGlzc3VlczogW10sXG4gICAgICAgICAgICAgICAgICAgIGFzeW5jOiB0cnVlLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuX3BhcnNlQXN5bmMoeyBkYXRhLCBwYXRoOiBbXSwgcGFyZW50OiBjdHggfSkudGhlbigocmVzdWx0KSA9PiBpc1ZhbGlkKHJlc3VsdClcbiAgICAgICAgICAgID8ge1xuICAgICAgICAgICAgICAgIHZhbHVlOiByZXN1bHQudmFsdWUsXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICA6IHtcbiAgICAgICAgICAgICAgICBpc3N1ZXM6IGN0eC5jb21tb24uaXNzdWVzLFxuICAgICAgICAgICAgfSk7XG4gICAgfVxuICAgIGFzeW5jIHBhcnNlQXN5bmMoZGF0YSwgcGFyYW1zKSB7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMuc2FmZVBhcnNlQXN5bmMoZGF0YSwgcGFyYW1zKTtcbiAgICAgICAgaWYgKHJlc3VsdC5zdWNjZXNzKVxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdC5kYXRhO1xuICAgICAgICB0aHJvdyByZXN1bHQuZXJyb3I7XG4gICAgfVxuICAgIGFzeW5jIHNhZmVQYXJzZUFzeW5jKGRhdGEsIHBhcmFtcykge1xuICAgICAgICBjb25zdCBjdHggPSB7XG4gICAgICAgICAgICBjb21tb246IHtcbiAgICAgICAgICAgICAgICBpc3N1ZXM6IFtdLFxuICAgICAgICAgICAgICAgIGNvbnRleHR1YWxFcnJvck1hcDogcGFyYW1zPy5lcnJvck1hcCxcbiAgICAgICAgICAgICAgICBhc3luYzogdHJ1ZSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBwYXRoOiBwYXJhbXM/LnBhdGggfHwgW10sXG4gICAgICAgICAgICBzY2hlbWFFcnJvck1hcDogdGhpcy5fZGVmLmVycm9yTWFwLFxuICAgICAgICAgICAgcGFyZW50OiBudWxsLFxuICAgICAgICAgICAgZGF0YSxcbiAgICAgICAgICAgIHBhcnNlZFR5cGU6IGdldFBhcnNlZFR5cGUoZGF0YSksXG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IG1heWJlQXN5bmNSZXN1bHQgPSB0aGlzLl9wYXJzZSh7IGRhdGEsIHBhdGg6IGN0eC5wYXRoLCBwYXJlbnQ6IGN0eCB9KTtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgKGlzQXN5bmMobWF5YmVBc3luY1Jlc3VsdCkgPyBtYXliZUFzeW5jUmVzdWx0IDogUHJvbWlzZS5yZXNvbHZlKG1heWJlQXN5bmNSZXN1bHQpKTtcbiAgICAgICAgcmV0dXJuIGhhbmRsZVJlc3VsdChjdHgsIHJlc3VsdCk7XG4gICAgfVxuICAgIHJlZmluZShjaGVjaywgbWVzc2FnZSkge1xuICAgICAgICBjb25zdCBnZXRJc3N1ZVByb3BlcnRpZXMgPSAodmFsKSA9PiB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIG1lc3NhZ2UgPT09IFwic3RyaW5nXCIgfHwgdHlwZW9mIG1lc3NhZ2UgPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4geyBtZXNzYWdlIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh0eXBlb2YgbWVzc2FnZSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG1lc3NhZ2UodmFsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gdGhpcy5fcmVmaW5lbWVudCgodmFsLCBjdHgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGNoZWNrKHZhbCk7XG4gICAgICAgICAgICBjb25zdCBzZXRFcnJvciA9ICgpID0+IGN0eC5hZGRJc3N1ZSh7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmN1c3RvbSxcbiAgICAgICAgICAgICAgICAuLi5nZXRJc3N1ZVByb3BlcnRpZXModmFsKSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBQcm9taXNlICE9PSBcInVuZGVmaW5lZFwiICYmIHJlc3VsdCBpbnN0YW5jZW9mIFByb21pc2UpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0LnRoZW4oKGRhdGEpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRFcnJvcigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghcmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgc2V0RXJyb3IoKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHJlZmluZW1lbnQoY2hlY2ssIHJlZmluZW1lbnREYXRhKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9yZWZpbmVtZW50KCh2YWwsIGN0eCkgPT4ge1xuICAgICAgICAgICAgaWYgKCFjaGVjayh2YWwpKSB7XG4gICAgICAgICAgICAgICAgY3R4LmFkZElzc3VlKHR5cGVvZiByZWZpbmVtZW50RGF0YSA9PT0gXCJmdW5jdGlvblwiID8gcmVmaW5lbWVudERhdGEodmFsLCBjdHgpIDogcmVmaW5lbWVudERhdGEpO1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgX3JlZmluZW1lbnQocmVmaW5lbWVudCkge1xuICAgICAgICByZXR1cm4gbmV3IFpvZEVmZmVjdHMoe1xuICAgICAgICAgICAgc2NoZW1hOiB0aGlzLFxuICAgICAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RFZmZlY3RzLFxuICAgICAgICAgICAgZWZmZWN0OiB7IHR5cGU6IFwicmVmaW5lbWVudFwiLCByZWZpbmVtZW50IH0sXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBzdXBlclJlZmluZShyZWZpbmVtZW50KSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9yZWZpbmVtZW50KHJlZmluZW1lbnQpO1xuICAgIH1cbiAgICBjb25zdHJ1Y3RvcihkZWYpIHtcbiAgICAgICAgLyoqIEFsaWFzIG9mIHNhZmVQYXJzZUFzeW5jICovXG4gICAgICAgIHRoaXMuc3BhID0gdGhpcy5zYWZlUGFyc2VBc3luYztcbiAgICAgICAgdGhpcy5fZGVmID0gZGVmO1xuICAgICAgICB0aGlzLnBhcnNlID0gdGhpcy5wYXJzZS5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLnNhZmVQYXJzZSA9IHRoaXMuc2FmZVBhcnNlLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMucGFyc2VBc3luYyA9IHRoaXMucGFyc2VBc3luYy5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLnNhZmVQYXJzZUFzeW5jID0gdGhpcy5zYWZlUGFyc2VBc3luYy5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLnNwYSA9IHRoaXMuc3BhLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMucmVmaW5lID0gdGhpcy5yZWZpbmUuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5yZWZpbmVtZW50ID0gdGhpcy5yZWZpbmVtZW50LmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuc3VwZXJSZWZpbmUgPSB0aGlzLnN1cGVyUmVmaW5lLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMub3B0aW9uYWwgPSB0aGlzLm9wdGlvbmFsLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMubnVsbGFibGUgPSB0aGlzLm51bGxhYmxlLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMubnVsbGlzaCA9IHRoaXMubnVsbGlzaC5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLmFycmF5ID0gdGhpcy5hcnJheS5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLnByb21pc2UgPSB0aGlzLnByb21pc2UuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5vciA9IHRoaXMub3IuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5hbmQgPSB0aGlzLmFuZC5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLnRyYW5zZm9ybSA9IHRoaXMudHJhbnNmb3JtLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuYnJhbmQgPSB0aGlzLmJyYW5kLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuZGVmYXVsdCA9IHRoaXMuZGVmYXVsdC5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLmNhdGNoID0gdGhpcy5jYXRjaC5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLmRlc2NyaWJlID0gdGhpcy5kZXNjcmliZS5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLnBpcGUgPSB0aGlzLnBpcGUuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5yZWFkb25seSA9IHRoaXMucmVhZG9ubHkuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5pc051bGxhYmxlID0gdGhpcy5pc051bGxhYmxlLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuaXNPcHRpb25hbCA9IHRoaXMuaXNPcHRpb25hbC5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzW1wifnN0YW5kYXJkXCJdID0ge1xuICAgICAgICAgICAgdmVyc2lvbjogMSxcbiAgICAgICAgICAgIHZlbmRvcjogXCJ6b2RcIixcbiAgICAgICAgICAgIHZhbGlkYXRlOiAoZGF0YSkgPT4gdGhpc1tcIn52YWxpZGF0ZVwiXShkYXRhKSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgb3B0aW9uYWwoKSB7XG4gICAgICAgIHJldHVybiBab2RPcHRpb25hbC5jcmVhdGUodGhpcywgdGhpcy5fZGVmKTtcbiAgICB9XG4gICAgbnVsbGFibGUoKSB7XG4gICAgICAgIHJldHVybiBab2ROdWxsYWJsZS5jcmVhdGUodGhpcywgdGhpcy5fZGVmKTtcbiAgICB9XG4gICAgbnVsbGlzaCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubnVsbGFibGUoKS5vcHRpb25hbCgpO1xuICAgIH1cbiAgICBhcnJheSgpIHtcbiAgICAgICAgcmV0dXJuIFpvZEFycmF5LmNyZWF0ZSh0aGlzKTtcbiAgICB9XG4gICAgcHJvbWlzZSgpIHtcbiAgICAgICAgcmV0dXJuIFpvZFByb21pc2UuY3JlYXRlKHRoaXMsIHRoaXMuX2RlZik7XG4gICAgfVxuICAgIG9yKG9wdGlvbikge1xuICAgICAgICByZXR1cm4gWm9kVW5pb24uY3JlYXRlKFt0aGlzLCBvcHRpb25dLCB0aGlzLl9kZWYpO1xuICAgIH1cbiAgICBhbmQoaW5jb21pbmcpIHtcbiAgICAgICAgcmV0dXJuIFpvZEludGVyc2VjdGlvbi5jcmVhdGUodGhpcywgaW5jb21pbmcsIHRoaXMuX2RlZik7XG4gICAgfVxuICAgIHRyYW5zZm9ybSh0cmFuc2Zvcm0pIHtcbiAgICAgICAgcmV0dXJuIG5ldyBab2RFZmZlY3RzKHtcbiAgICAgICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXModGhpcy5fZGVmKSxcbiAgICAgICAgICAgIHNjaGVtYTogdGhpcyxcbiAgICAgICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kRWZmZWN0cyxcbiAgICAgICAgICAgIGVmZmVjdDogeyB0eXBlOiBcInRyYW5zZm9ybVwiLCB0cmFuc2Zvcm0gfSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGRlZmF1bHQoZGVmKSB7XG4gICAgICAgIGNvbnN0IGRlZmF1bHRWYWx1ZUZ1bmMgPSB0eXBlb2YgZGVmID09PSBcImZ1bmN0aW9uXCIgPyBkZWYgOiAoKSA9PiBkZWY7XG4gICAgICAgIHJldHVybiBuZXcgWm9kRGVmYXVsdCh7XG4gICAgICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHRoaXMuX2RlZiksXG4gICAgICAgICAgICBpbm5lclR5cGU6IHRoaXMsXG4gICAgICAgICAgICBkZWZhdWx0VmFsdWU6IGRlZmF1bHRWYWx1ZUZ1bmMsXG4gICAgICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZERlZmF1bHQsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBicmFuZCgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBab2RCcmFuZGVkKHtcbiAgICAgICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kQnJhbmRlZCxcbiAgICAgICAgICAgIHR5cGU6IHRoaXMsXG4gICAgICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHRoaXMuX2RlZiksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBjYXRjaChkZWYpIHtcbiAgICAgICAgY29uc3QgY2F0Y2hWYWx1ZUZ1bmMgPSB0eXBlb2YgZGVmID09PSBcImZ1bmN0aW9uXCIgPyBkZWYgOiAoKSA9PiBkZWY7XG4gICAgICAgIHJldHVybiBuZXcgWm9kQ2F0Y2goe1xuICAgICAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyh0aGlzLl9kZWYpLFxuICAgICAgICAgICAgaW5uZXJUeXBlOiB0aGlzLFxuICAgICAgICAgICAgY2F0Y2hWYWx1ZTogY2F0Y2hWYWx1ZUZ1bmMsXG4gICAgICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZENhdGNoLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgZGVzY3JpYmUoZGVzY3JpcHRpb24pIHtcbiAgICAgICAgY29uc3QgVGhpcyA9IHRoaXMuY29uc3RydWN0b3I7XG4gICAgICAgIHJldHVybiBuZXcgVGhpcyh7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICBkZXNjcmlwdGlvbixcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHBpcGUodGFyZ2V0KSB7XG4gICAgICAgIHJldHVybiBab2RQaXBlbGluZS5jcmVhdGUodGhpcywgdGFyZ2V0KTtcbiAgICB9XG4gICAgcmVhZG9ubHkoKSB7XG4gICAgICAgIHJldHVybiBab2RSZWFkb25seS5jcmVhdGUodGhpcyk7XG4gICAgfVxuICAgIGlzT3B0aW9uYWwoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNhZmVQYXJzZSh1bmRlZmluZWQpLnN1Y2Nlc3M7XG4gICAgfVxuICAgIGlzTnVsbGFibGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNhZmVQYXJzZShudWxsKS5zdWNjZXNzO1xuICAgIH1cbn1cbmNvbnN0IGN1aWRSZWdleCA9IC9eY1teXFxzLV17OCx9JC9pO1xuY29uc3QgY3VpZDJSZWdleCA9IC9eWzAtOWEtel0rJC87XG5jb25zdCB1bGlkUmVnZXggPSAvXlswLTlBLUhKS01OUC1UVi1aXXsyNn0kL2k7XG4vLyBjb25zdCB1dWlkUmVnZXggPVxuLy8gICAvXihbYS1mMC05XXs4fS1bYS1mMC05XXs0fS1bMS01XVthLWYwLTldezN9LVthLWYwLTldezR9LVthLWYwLTldezEyfXwwMDAwMDAwMC0wMDAwLTAwMDAtMDAwMC0wMDAwMDAwMDAwMDApJC9pO1xuY29uc3QgdXVpZFJlZ2V4ID0gL15bMC05YS1mQS1GXXs4fVxcYi1bMC05YS1mQS1GXXs0fVxcYi1bMC05YS1mQS1GXXs0fVxcYi1bMC05YS1mQS1GXXs0fVxcYi1bMC05YS1mQS1GXXsxMn0kL2k7XG5jb25zdCBuYW5vaWRSZWdleCA9IC9eW2EtejAtOV8tXXsyMX0kL2k7XG5jb25zdCBqd3RSZWdleCA9IC9eW0EtWmEtejAtOS1fXStcXC5bQS1aYS16MC05LV9dK1xcLltBLVphLXowLTktX10qJC87XG5jb25zdCBkdXJhdGlvblJlZ2V4ID0gL15bLStdP1AoPyEkKSg/Oig/OlstK10/XFxkK1kpfCg/OlstK10/XFxkK1suLF1cXGQrWSQpKT8oPzooPzpbLStdP1xcZCtNKXwoPzpbLStdP1xcZCtbLixdXFxkK00kKSk/KD86KD86Wy0rXT9cXGQrVyl8KD86Wy0rXT9cXGQrWy4sXVxcZCtXJCkpPyg/Oig/OlstK10/XFxkK0QpfCg/OlstK10/XFxkK1suLF1cXGQrRCQpKT8oPzpUKD89W1xcZCstXSkoPzooPzpbLStdP1xcZCtIKXwoPzpbLStdP1xcZCtbLixdXFxkK0gkKSk/KD86KD86Wy0rXT9cXGQrTSl8KD86Wy0rXT9cXGQrWy4sXVxcZCtNJCkpPyg/OlstK10/XFxkKyg/OlsuLF1cXGQrKT9TKT8pPz8kLztcbi8vIGZyb20gaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9hLzQ2MTgxLzE1NTAxNTVcbi8vIG9sZCB2ZXJzaW9uOiB0b28gc2xvdywgZGlkbid0IHN1cHBvcnQgdW5pY29kZVxuLy8gY29uc3QgZW1haWxSZWdleCA9IC9eKCgoW2Etel18XFxkfFshI1xcJCUmJ1xcKlxcK1xcLVxcLz1cXD9cXF5fYHtcXHx9fl18W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pKyhcXC4oW2Etel18XFxkfFshI1xcJCUmJ1xcKlxcK1xcLVxcLz1cXD9cXF5fYHtcXHx9fl18W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pKykqKXwoKFxceDIyKSgoKChcXHgyMHxcXHgwOSkqKFxceDBkXFx4MGEpKT8oXFx4MjB8XFx4MDkpKyk/KChbXFx4MDEtXFx4MDhcXHgwYlxceDBjXFx4MGUtXFx4MWZcXHg3Zl18XFx4MjF8W1xceDIzLVxceDViXXxbXFx4NWQtXFx4N2VdfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKXwoXFxcXChbXFx4MDEtXFx4MDlcXHgwYlxceDBjXFx4MGQtXFx4N2ZdfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKSkpKSooKChcXHgyMHxcXHgwOSkqKFxceDBkXFx4MGEpKT8oXFx4MjB8XFx4MDkpKyk/KFxceDIyKSkpQCgoKFthLXpdfFxcZHxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSl8KChbYS16XXxcXGR8W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pKFthLXpdfFxcZHwtfFxcLnxffH58W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pKihbYS16XXxcXGR8W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pKSlcXC4pKygoW2Etel18W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pfCgoW2Etel18W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pKFthLXpdfFxcZHwtfFxcLnxffH58W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pKihbYS16XXxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSkpKSQvaTtcbi8vb2xkIGVtYWlsIHJlZ2V4XG4vLyBjb25zdCBlbWFpbFJlZ2V4ID0gL14oKFtePD4oKVtcXF0uLDs6XFxzQFwiXSsoXFwuW148PigpW1xcXS4sOzpcXHNAXCJdKykqKXwoXCIuK1wiKSlAKCg/IS0pKFtePD4oKVtcXF0uLDs6XFxzQFwiXStcXC4pK1tePD4oKVtcXF0uLDs6XFxzQFwiXXsxLH0pW14tPD4oKVtcXF0uLDs6XFxzQFwiXSQvaTtcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZVxuLy8gY29uc3QgZW1haWxSZWdleCA9XG4vLyAgIC9eKChbXjw+KClbXFxdXFxcXC4sOzpcXHNAXFxcIl0rKFxcLltePD4oKVtcXF1cXFxcLiw7Olxcc0BcXFwiXSspKil8KFxcXCIuK1xcXCIpKUAoKFxcWygoKDI1WzAtNV0pfCgyWzAtNF1bMC05XSl8KDFbMC05XXsyfSl8KFswLTldezEsMn0pKVxcLil7M30oKDI1WzAtNV0pfCgyWzAtNF1bMC05XSl8KDFbMC05XXsyfSl8KFswLTldezEsMn0pKVxcXSl8KFxcW0lQdjY6KChbYS1mMC05XXsxLDR9Oil7N318OjooW2EtZjAtOV17MSw0fTopezAsNn18KFthLWYwLTldezEsNH06KXsxfTooW2EtZjAtOV17MSw0fTopezAsNX18KFthLWYwLTldezEsNH06KXsyfTooW2EtZjAtOV17MSw0fTopezAsNH18KFthLWYwLTldezEsNH06KXszfTooW2EtZjAtOV17MSw0fTopezAsM318KFthLWYwLTldezEsNH06KXs0fTooW2EtZjAtOV17MSw0fTopezAsMn18KFthLWYwLTldezEsNH06KXs1fTooW2EtZjAtOV17MSw0fTopezAsMX0pKFthLWYwLTldezEsNH18KCgoMjVbMC01XSl8KDJbMC00XVswLTldKXwoMVswLTldezJ9KXwoWzAtOV17MSwyfSkpXFwuKXszfSgoMjVbMC01XSl8KDJbMC00XVswLTldKXwoMVswLTldezJ9KXwoWzAtOV17MSwyfSkpKVxcXSl8KFtBLVphLXowLTldKFtBLVphLXowLTktXSpbQS1aYS16MC05XSkqKFxcLltBLVphLXpdezIsfSkrKSkkLztcbi8vIGNvbnN0IGVtYWlsUmVnZXggPVxuLy8gICAvXlthLXpBLVowLTlcXC5cXCFcXCNcXCRcXCVcXCZcXCdcXCpcXCtcXC9cXD1cXD9cXF5cXF9cXGBcXHtcXHxcXH1cXH5cXC1dK0BbYS16QS1aMC05XSg/OlthLXpBLVowLTktXXswLDYxfVthLXpBLVowLTldKT8oPzpcXC5bYS16QS1aMC05XSg/OlthLXpBLVowLTktXXswLDYxfVthLXpBLVowLTldKT8pKiQvO1xuLy8gY29uc3QgZW1haWxSZWdleCA9XG4vLyAgIC9eKD86W2EtejAtOSEjJCUmJyorLz0/Xl9ge3x9fi1dKyg/OlxcLlthLXowLTkhIyQlJicqKy89P15fYHt8fX4tXSspKnxcIig/OltcXHgwMS1cXHgwOFxceDBiXFx4MGNcXHgwZS1cXHgxZlxceDIxXFx4MjMtXFx4NWJcXHg1ZC1cXHg3Zl18XFxcXFtcXHgwMS1cXHgwOVxceDBiXFx4MGNcXHgwZS1cXHg3Zl0pKlwiKUAoPzooPzpbYS16MC05XSg/OlthLXowLTktXSpbYS16MC05XSk/XFwuKStbYS16MC05XSg/OlthLXowLTktXSpbYS16MC05XSk/fFxcWyg/Oig/OjI1WzAtNV18MlswLTRdWzAtOV18WzAxXT9bMC05XVswLTldPylcXC4pezN9KD86MjVbMC01XXwyWzAtNF1bMC05XXxbMDFdP1swLTldWzAtOV0/fFthLXowLTktXSpbYS16MC05XTooPzpbXFx4MDEtXFx4MDhcXHgwYlxceDBjXFx4MGUtXFx4MWZcXHgyMS1cXHg1YVxceDUzLVxceDdmXXxcXFxcW1xceDAxLVxceDA5XFx4MGJcXHgwY1xceDBlLVxceDdmXSkrKVxcXSkkL2k7XG5jb25zdCBlbWFpbFJlZ2V4ID0gL14oPyFcXC4pKD8hLipcXC5cXC4pKFtBLVowLTlfJytcXC1cXC5dKilbQS1aMC05XystXUAoW0EtWjAtOV1bQS1aMC05XFwtXSpcXC4pK1tBLVpdezIsfSQvaTtcbi8vIGNvbnN0IGVtYWlsUmVnZXggPVxuLy8gICAvXlthLXowLTkuISMkJSbigJkqKy89P15fYHt8fX4tXStAW2EtejAtOS1dKyg/OlxcLlthLXowLTlcXC1dKykqJC9pO1xuLy8gZnJvbSBodHRwczovL3RoZWtldmluc2NvdHQuY29tL2Vtb2ppcy1pbi1qYXZhc2NyaXB0LyN3cml0aW5nLWEtcmVndWxhci1leHByZXNzaW9uXG5jb25zdCBfZW1vamlSZWdleCA9IGBeKFxcXFxwe0V4dGVuZGVkX1BpY3RvZ3JhcGhpY318XFxcXHB7RW1vamlfQ29tcG9uZW50fSkrJGA7XG5sZXQgZW1vamlSZWdleDtcbi8vIGZhc3Rlciwgc2ltcGxlciwgc2FmZXJcbmNvbnN0IGlwdjRSZWdleCA9IC9eKD86KD86MjVbMC01XXwyWzAtNF1bMC05XXwxWzAtOV1bMC05XXxbMS05XVswLTldfFswLTldKVxcLil7M30oPzoyNVswLTVdfDJbMC00XVswLTldfDFbMC05XVswLTldfFsxLTldWzAtOV18WzAtOV0pJC87XG5jb25zdCBpcHY0Q2lkclJlZ2V4ID0gL14oPzooPzoyNVswLTVdfDJbMC00XVswLTldfDFbMC05XVswLTldfFsxLTldWzAtOV18WzAtOV0pXFwuKXszfSg/OjI1WzAtNV18MlswLTRdWzAtOV18MVswLTldWzAtOV18WzEtOV1bMC05XXxbMC05XSlcXC8oM1swLTJdfFsxMl0/WzAtOV0pJC87XG4vLyBjb25zdCBpcHY2UmVnZXggPVxuLy8gL14oKFthLWYwLTldezEsNH06KXs3fXw6OihbYS1mMC05XXsxLDR9Oil7MCw2fXwoW2EtZjAtOV17MSw0fTopezF9OihbYS1mMC05XXsxLDR9Oil7MCw1fXwoW2EtZjAtOV17MSw0fTopezJ9OihbYS1mMC05XXsxLDR9Oil7MCw0fXwoW2EtZjAtOV17MSw0fTopezN9OihbYS1mMC05XXsxLDR9Oil7MCwzfXwoW2EtZjAtOV17MSw0fTopezR9OihbYS1mMC05XXsxLDR9Oil7MCwyfXwoW2EtZjAtOV17MSw0fTopezV9OihbYS1mMC05XXsxLDR9Oil7MCwxfSkoW2EtZjAtOV17MSw0fXwoKCgyNVswLTVdKXwoMlswLTRdWzAtOV0pfCgxWzAtOV17Mn0pfChbMC05XXsxLDJ9KSlcXC4pezN9KCgyNVswLTVdKXwoMlswLTRdWzAtOV0pfCgxWzAtOV17Mn0pfChbMC05XXsxLDJ9KSkpJC87XG5jb25zdCBpcHY2UmVnZXggPSAvXigoWzAtOWEtZkEtRl17MSw0fTopezcsN31bMC05YS1mQS1GXXsxLDR9fChbMC05YS1mQS1GXXsxLDR9Oil7MSw3fTp8KFswLTlhLWZBLUZdezEsNH06KXsxLDZ9OlswLTlhLWZBLUZdezEsNH18KFswLTlhLWZBLUZdezEsNH06KXsxLDV9KDpbMC05YS1mQS1GXXsxLDR9KXsxLDJ9fChbMC05YS1mQS1GXXsxLDR9Oil7MSw0fSg6WzAtOWEtZkEtRl17MSw0fSl7MSwzfXwoWzAtOWEtZkEtRl17MSw0fTopezEsM30oOlswLTlhLWZBLUZdezEsNH0pezEsNH18KFswLTlhLWZBLUZdezEsNH06KXsxLDJ9KDpbMC05YS1mQS1GXXsxLDR9KXsxLDV9fFswLTlhLWZBLUZdezEsNH06KCg6WzAtOWEtZkEtRl17MSw0fSl7MSw2fSl8OigoOlswLTlhLWZBLUZdezEsNH0pezEsN318Oil8ZmU4MDooOlswLTlhLWZBLUZdezAsNH0pezAsNH0lWzAtOWEtekEtWl17MSx9fDo6KGZmZmYoOjB7MSw0fSl7MCwxfTopezAsMX0oKDI1WzAtNV18KDJbMC00XXwxezAsMX1bMC05XSl7MCwxfVswLTldKVxcLil7MywzfSgyNVswLTVdfCgyWzAtNF18MXswLDF9WzAtOV0pezAsMX1bMC05XSl8KFswLTlhLWZBLUZdezEsNH06KXsxLDR9OigoMjVbMC01XXwoMlswLTRdfDF7MCwxfVswLTldKXswLDF9WzAtOV0pXFwuKXszLDN9KDI1WzAtNV18KDJbMC00XXwxezAsMX1bMC05XSl7MCwxfVswLTldKSkkLztcbmNvbnN0IGlwdjZDaWRyUmVnZXggPSAvXigoWzAtOWEtZkEtRl17MSw0fTopezcsN31bMC05YS1mQS1GXXsxLDR9fChbMC05YS1mQS1GXXsxLDR9Oil7MSw3fTp8KFswLTlhLWZBLUZdezEsNH06KXsxLDZ9OlswLTlhLWZBLUZdezEsNH18KFswLTlhLWZBLUZdezEsNH06KXsxLDV9KDpbMC05YS1mQS1GXXsxLDR9KXsxLDJ9fChbMC05YS1mQS1GXXsxLDR9Oil7MSw0fSg6WzAtOWEtZkEtRl17MSw0fSl7MSwzfXwoWzAtOWEtZkEtRl17MSw0fTopezEsM30oOlswLTlhLWZBLUZdezEsNH0pezEsNH18KFswLTlhLWZBLUZdezEsNH06KXsxLDJ9KDpbMC05YS1mQS1GXXsxLDR9KXsxLDV9fFswLTlhLWZBLUZdezEsNH06KCg6WzAtOWEtZkEtRl17MSw0fSl7MSw2fSl8OigoOlswLTlhLWZBLUZdezEsNH0pezEsN318Oil8ZmU4MDooOlswLTlhLWZBLUZdezAsNH0pezAsNH0lWzAtOWEtekEtWl17MSx9fDo6KGZmZmYoOjB7MSw0fSl7MCwxfTopezAsMX0oKDI1WzAtNV18KDJbMC00XXwxezAsMX1bMC05XSl7MCwxfVswLTldKVxcLil7MywzfSgyNVswLTVdfCgyWzAtNF18MXswLDF9WzAtOV0pezAsMX1bMC05XSl8KFswLTlhLWZBLUZdezEsNH06KXsxLDR9OigoMjVbMC01XXwoMlswLTRdfDF7MCwxfVswLTldKXswLDF9WzAtOV0pXFwuKXszLDN9KDI1WzAtNV18KDJbMC00XXwxezAsMX1bMC05XSl7MCwxfVswLTldKSlcXC8oMTJbMC04XXwxWzAxXVswLTldfFsxLTldP1swLTldKSQvO1xuLy8gaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvNzg2MDM5Mi9kZXRlcm1pbmUtaWYtc3RyaW5nLWlzLWluLWJhc2U2NC11c2luZy1qYXZhc2NyaXB0XG5jb25zdCBiYXNlNjRSZWdleCA9IC9eKFswLTlhLXpBLVorL117NH0pKigoWzAtOWEtekEtWisvXXsyfT09KXwoWzAtOWEtekEtWisvXXszfT0pKT8kLztcbi8vIGh0dHBzOi8vYmFzZTY0Lmd1cnUvc3RhbmRhcmRzL2Jhc2U2NHVybFxuY29uc3QgYmFzZTY0dXJsUmVnZXggPSAvXihbMC05YS16QS1aLV9dezR9KSooKFswLTlhLXpBLVotX117Mn0oPT0pPyl8KFswLTlhLXpBLVotX117M30oPSk/KSk/JC87XG4vLyBzaW1wbGVcbi8vIGNvbnN0IGRhdGVSZWdleFNvdXJjZSA9IGBcXFxcZHs0fS1cXFxcZHsyfS1cXFxcZHsyfWA7XG4vLyBubyBsZWFwIHllYXIgdmFsaWRhdGlvblxuLy8gY29uc3QgZGF0ZVJlZ2V4U291cmNlID0gYFxcXFxkezR9LSgoMFsxMzU3OF18MTB8MTIpLTMxfCgwWzEzLTldfDFbMC0yXSktMzB8KDBbMS05XXwxWzAtMl0pLSgwWzEtOV18MVxcXFxkfDJcXFxcZCkpYDtcbi8vIHdpdGggbGVhcCB5ZWFyIHZhbGlkYXRpb25cbmNvbnN0IGRhdGVSZWdleFNvdXJjZSA9IGAoKFxcXFxkXFxcXGRbMjQ2OF1bMDQ4XXxcXFxcZFxcXFxkWzEzNTc5XVsyNl18XFxcXGRcXFxcZDBbNDhdfFswMjQ2OF1bMDQ4XTAwfFsxMzU3OV1bMjZdMDApLTAyLTI5fFxcXFxkezR9LSgoMFsxMzU3OF18MVswMl0pLSgwWzEtOV18WzEyXVxcXFxkfDNbMDFdKXwoMFs0NjldfDExKS0oMFsxLTldfFsxMl1cXFxcZHwzMCl8KDAyKS0oMFsxLTldfDFcXFxcZHwyWzAtOF0pKSlgO1xuY29uc3QgZGF0ZVJlZ2V4ID0gbmV3IFJlZ0V4cChgXiR7ZGF0ZVJlZ2V4U291cmNlfSRgKTtcbmZ1bmN0aW9uIHRpbWVSZWdleFNvdXJjZShhcmdzKSB7XG4gICAgbGV0IHNlY29uZHNSZWdleFNvdXJjZSA9IGBbMC01XVxcXFxkYDtcbiAgICBpZiAoYXJncy5wcmVjaXNpb24pIHtcbiAgICAgICAgc2Vjb25kc1JlZ2V4U291cmNlID0gYCR7c2Vjb25kc1JlZ2V4U291cmNlfVxcXFwuXFxcXGR7JHthcmdzLnByZWNpc2lvbn19YDtcbiAgICB9XG4gICAgZWxzZSBpZiAoYXJncy5wcmVjaXNpb24gPT0gbnVsbCkge1xuICAgICAgICBzZWNvbmRzUmVnZXhTb3VyY2UgPSBgJHtzZWNvbmRzUmVnZXhTb3VyY2V9KFxcXFwuXFxcXGQrKT9gO1xuICAgIH1cbiAgICBjb25zdCBzZWNvbmRzUXVhbnRpZmllciA9IGFyZ3MucHJlY2lzaW9uID8gXCIrXCIgOiBcIj9cIjsgLy8gcmVxdWlyZSBzZWNvbmRzIGlmIHByZWNpc2lvbiBpcyBub256ZXJvXG4gICAgcmV0dXJuIGAoWzAxXVxcXFxkfDJbMC0zXSk6WzAtNV1cXFxcZCg6JHtzZWNvbmRzUmVnZXhTb3VyY2V9KSR7c2Vjb25kc1F1YW50aWZpZXJ9YDtcbn1cbmZ1bmN0aW9uIHRpbWVSZWdleChhcmdzKSB7XG4gICAgcmV0dXJuIG5ldyBSZWdFeHAoYF4ke3RpbWVSZWdleFNvdXJjZShhcmdzKX0kYCk7XG59XG4vLyBBZGFwdGVkIGZyb20gaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9hLzMxNDMyMzFcbmV4cG9ydCBmdW5jdGlvbiBkYXRldGltZVJlZ2V4KGFyZ3MpIHtcbiAgICBsZXQgcmVnZXggPSBgJHtkYXRlUmVnZXhTb3VyY2V9VCR7dGltZVJlZ2V4U291cmNlKGFyZ3MpfWA7XG4gICAgY29uc3Qgb3B0cyA9IFtdO1xuICAgIG9wdHMucHVzaChhcmdzLmxvY2FsID8gYFo/YCA6IGBaYCk7XG4gICAgaWYgKGFyZ3Mub2Zmc2V0KVxuICAgICAgICBvcHRzLnB1c2goYChbKy1dXFxcXGR7Mn06P1xcXFxkezJ9KWApO1xuICAgIHJlZ2V4ID0gYCR7cmVnZXh9KCR7b3B0cy5qb2luKFwifFwiKX0pYDtcbiAgICByZXR1cm4gbmV3IFJlZ0V4cChgXiR7cmVnZXh9JGApO1xufVxuZnVuY3Rpb24gaXNWYWxpZElQKGlwLCB2ZXJzaW9uKSB7XG4gICAgaWYgKCh2ZXJzaW9uID09PSBcInY0XCIgfHwgIXZlcnNpb24pICYmIGlwdjRSZWdleC50ZXN0KGlwKSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgaWYgKCh2ZXJzaW9uID09PSBcInY2XCIgfHwgIXZlcnNpb24pICYmIGlwdjZSZWdleC50ZXN0KGlwKSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xufVxuZnVuY3Rpb24gaXNWYWxpZEpXVChqd3QsIGFsZykge1xuICAgIGlmICghand0UmVnZXgudGVzdChqd3QpKVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgW2hlYWRlcl0gPSBqd3Quc3BsaXQoXCIuXCIpO1xuICAgICAgICBpZiAoIWhlYWRlcilcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgLy8gQ29udmVydCBiYXNlNjR1cmwgdG8gYmFzZTY0XG4gICAgICAgIGNvbnN0IGJhc2U2NCA9IGhlYWRlclxuICAgICAgICAgICAgLnJlcGxhY2UoLy0vZywgXCIrXCIpXG4gICAgICAgICAgICAucmVwbGFjZSgvXy9nLCBcIi9cIilcbiAgICAgICAgICAgIC5wYWRFbmQoaGVhZGVyLmxlbmd0aCArICgoNCAtIChoZWFkZXIubGVuZ3RoICUgNCkpICUgNCksIFwiPVwiKTtcbiAgICAgICAgY29uc3QgZGVjb2RlZCA9IEpTT04ucGFyc2UoYXRvYihiYXNlNjQpKTtcbiAgICAgICAgaWYgKHR5cGVvZiBkZWNvZGVkICE9PSBcIm9iamVjdFwiIHx8IGRlY29kZWQgPT09IG51bGwpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIGlmIChcInR5cFwiIGluIGRlY29kZWQgJiYgZGVjb2RlZD8udHlwICE9PSBcIkpXVFwiKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICBpZiAoIWRlY29kZWQuYWxnKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICBpZiAoYWxnICYmIGRlY29kZWQuYWxnICE9PSBhbGcpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBjYXRjaCB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG59XG5mdW5jdGlvbiBpc1ZhbGlkQ2lkcihpcCwgdmVyc2lvbikge1xuICAgIGlmICgodmVyc2lvbiA9PT0gXCJ2NFwiIHx8ICF2ZXJzaW9uKSAmJiBpcHY0Q2lkclJlZ2V4LnRlc3QoaXApKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBpZiAoKHZlcnNpb24gPT09IFwidjZcIiB8fCAhdmVyc2lvbikgJiYgaXB2NkNpZHJSZWdleC50ZXN0KGlwKSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xufVxuZXhwb3J0IGNsYXNzIFpvZFN0cmluZyBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBpZiAodGhpcy5fZGVmLmNvZXJjZSkge1xuICAgICAgICAgICAgaW5wdXQuZGF0YSA9IFN0cmluZyhpbnB1dC5kYXRhKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwYXJzZWRUeXBlID0gdGhpcy5fZ2V0VHlwZShpbnB1dCk7XG4gICAgICAgIGlmIChwYXJzZWRUeXBlICE9PSBab2RQYXJzZWRUeXBlLnN0cmluZykge1xuICAgICAgICAgICAgY29uc3QgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQpO1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogWm9kUGFyc2VkVHlwZS5zdHJpbmcsXG4gICAgICAgICAgICAgICAgcmVjZWl2ZWQ6IGN0eC5wYXJzZWRUeXBlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBzdGF0dXMgPSBuZXcgUGFyc2VTdGF0dXMoKTtcbiAgICAgICAgbGV0IGN0eCA9IHVuZGVmaW5lZDtcbiAgICAgICAgZm9yIChjb25zdCBjaGVjayBvZiB0aGlzLl9kZWYuY2hlY2tzKSB7XG4gICAgICAgICAgICBpZiAoY2hlY2sua2luZCA9PT0gXCJtaW5cIikge1xuICAgICAgICAgICAgICAgIGlmIChpbnB1dC5kYXRhLmxlbmd0aCA8IGNoZWNrLnZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS50b29fc21hbGwsXG4gICAgICAgICAgICAgICAgICAgICAgICBtaW5pbXVtOiBjaGVjay52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwic3RyaW5nXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBpbmNsdXNpdmU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBleGFjdDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJtYXhcIikge1xuICAgICAgICAgICAgICAgIGlmIChpbnB1dC5kYXRhLmxlbmd0aCA+IGNoZWNrLnZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS50b29fYmlnLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWF4aW11bTogY2hlY2sudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcInN0cmluZ1wiLFxuICAgICAgICAgICAgICAgICAgICAgICAgaW5jbHVzaXZlOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgZXhhY3Q6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwibGVuZ3RoXCIpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0b29CaWcgPSBpbnB1dC5kYXRhLmxlbmd0aCA+IGNoZWNrLnZhbHVlO1xuICAgICAgICAgICAgICAgIGNvbnN0IHRvb1NtYWxsID0gaW5wdXQuZGF0YS5sZW5ndGggPCBjaGVjay52YWx1ZTtcbiAgICAgICAgICAgICAgICBpZiAodG9vQmlnIHx8IHRvb1NtYWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAodG9vQmlnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUudG9vX2JpZyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXhpbXVtOiBjaGVjay52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcInN0cmluZ1wiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluY2x1c2l2ZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBleGFjdDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAodG9vU21hbGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS50b29fc21hbGwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWluaW11bTogY2hlY2sudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJzdHJpbmdcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmNsdXNpdmU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhhY3Q6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwiZW1haWxcIikge1xuICAgICAgICAgICAgICAgIGlmICghZW1haWxSZWdleC50ZXN0KGlucHV0LmRhdGEpKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkYXRpb246IFwiZW1haWxcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3N0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcImVtb2ppXCIpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWVtb2ppUmVnZXgpIHtcbiAgICAgICAgICAgICAgICAgICAgZW1vamlSZWdleCA9IG5ldyBSZWdFeHAoX2Vtb2ppUmVnZXgsIFwidVwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKCFlbW9qaVJlZ2V4LnRlc3QoaW5wdXQuZGF0YSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbjogXCJlbW9qaVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfc3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwidXVpZFwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKCF1dWlkUmVnZXgudGVzdChpbnB1dC5kYXRhKSkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWxpZGF0aW9uOiBcInV1aWRcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3N0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcIm5hbm9pZFwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFuYW5vaWRSZWdleC50ZXN0KGlucHV0LmRhdGEpKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkYXRpb246IFwibmFub2lkXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9zdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJjdWlkXCIpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWN1aWRSZWdleC50ZXN0KGlucHV0LmRhdGEpKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkYXRpb246IFwiY3VpZFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfc3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwiY3VpZDJcIikge1xuICAgICAgICAgICAgICAgIGlmICghY3VpZDJSZWdleC50ZXN0KGlucHV0LmRhdGEpKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkYXRpb246IFwiY3VpZDJcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3N0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcInVsaWRcIikge1xuICAgICAgICAgICAgICAgIGlmICghdWxpZFJlZ2V4LnRlc3QoaW5wdXQuZGF0YSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbjogXCJ1bGlkXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9zdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJ1cmxcIikge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIG5ldyBVUkwoaW5wdXQuZGF0YSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbjogXCJ1cmxcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3N0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcInJlZ2V4XCIpIHtcbiAgICAgICAgICAgICAgICBjaGVjay5yZWdleC5sYXN0SW5kZXggPSAwO1xuICAgICAgICAgICAgICAgIGNvbnN0IHRlc3RSZXN1bHQgPSBjaGVjay5yZWdleC50ZXN0KGlucHV0LmRhdGEpO1xuICAgICAgICAgICAgICAgIGlmICghdGVzdFJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWxpZGF0aW9uOiBcInJlZ2V4XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9zdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJ0cmltXCIpIHtcbiAgICAgICAgICAgICAgICBpbnB1dC5kYXRhID0gaW5wdXQuZGF0YS50cmltKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcImluY2x1ZGVzXCIpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWlucHV0LmRhdGEuaW5jbHVkZXMoY2hlY2sudmFsdWUsIGNoZWNrLnBvc2l0aW9uKSkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9zdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWxpZGF0aW9uOiB7IGluY2x1ZGVzOiBjaGVjay52YWx1ZSwgcG9zaXRpb246IGNoZWNrLnBvc2l0aW9uIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJ0b0xvd2VyQ2FzZVwiKSB7XG4gICAgICAgICAgICAgICAgaW5wdXQuZGF0YSA9IGlucHV0LmRhdGEudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwidG9VcHBlckNhc2VcIikge1xuICAgICAgICAgICAgICAgIGlucHV0LmRhdGEgPSBpbnB1dC5kYXRhLnRvVXBwZXJDYXNlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcInN0YXJ0c1dpdGhcIikge1xuICAgICAgICAgICAgICAgIGlmICghaW5wdXQuZGF0YS5zdGFydHNXaXRoKGNoZWNrLnZhbHVlKSkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9zdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWxpZGF0aW9uOiB7IHN0YXJ0c1dpdGg6IGNoZWNrLnZhbHVlIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJlbmRzV2l0aFwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFpbnB1dC5kYXRhLmVuZHNXaXRoKGNoZWNrLnZhbHVlKSkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9zdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWxpZGF0aW9uOiB7IGVuZHNXaXRoOiBjaGVjay52YWx1ZSB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwiZGF0ZXRpbWVcIikge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlZ2V4ID0gZGF0ZXRpbWVSZWdleChjaGVjayk7XG4gICAgICAgICAgICAgICAgaWYgKCFyZWdleC50ZXN0KGlucHV0LmRhdGEpKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3N0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkYXRpb246IFwiZGF0ZXRpbWVcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcImRhdGVcIikge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlZ2V4ID0gZGF0ZVJlZ2V4O1xuICAgICAgICAgICAgICAgIGlmICghcmVnZXgudGVzdChpbnB1dC5kYXRhKSkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9zdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWxpZGF0aW9uOiBcImRhdGVcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcInRpbWVcIikge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlZ2V4ID0gdGltZVJlZ2V4KGNoZWNrKTtcbiAgICAgICAgICAgICAgICBpZiAoIXJlZ2V4LnRlc3QoaW5wdXQuZGF0YSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfc3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbjogXCJ0aW1lXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJkdXJhdGlvblwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFkdXJhdGlvblJlZ2V4LnRlc3QoaW5wdXQuZGF0YSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbjogXCJkdXJhdGlvblwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfc3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwiaXBcIikge1xuICAgICAgICAgICAgICAgIGlmICghaXNWYWxpZElQKGlucHV0LmRhdGEsIGNoZWNrLnZlcnNpb24pKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkYXRpb246IFwiaXBcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3N0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcImp3dFwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFpc1ZhbGlkSldUKGlucHV0LmRhdGEsIGNoZWNrLmFsZykpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbjogXCJqd3RcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3N0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcImNpZHJcIikge1xuICAgICAgICAgICAgICAgIGlmICghaXNWYWxpZENpZHIoaW5wdXQuZGF0YSwgY2hlY2sudmVyc2lvbikpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbjogXCJjaWRyXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9zdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJiYXNlNjRcIikge1xuICAgICAgICAgICAgICAgIGlmICghYmFzZTY0UmVnZXgudGVzdChpbnB1dC5kYXRhKSkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWxpZGF0aW9uOiBcImJhc2U2NFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfc3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwiYmFzZTY0dXJsXCIpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWJhc2U2NHVybFJlZ2V4LnRlc3QoaW5wdXQuZGF0YSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbjogXCJiYXNlNjR1cmxcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3N0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB1dGlsLmFzc2VydE5ldmVyKGNoZWNrKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4geyBzdGF0dXM6IHN0YXR1cy52YWx1ZSwgdmFsdWU6IGlucHV0LmRhdGEgfTtcbiAgICB9XG4gICAgX3JlZ2V4KHJlZ2V4LCB2YWxpZGF0aW9uLCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlZmluZW1lbnQoKGRhdGEpID0+IHJlZ2V4LnRlc3QoZGF0YSksIHtcbiAgICAgICAgICAgIHZhbGlkYXRpb24sXG4gICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9zdHJpbmcsXG4gICAgICAgICAgICAuLi5lcnJvclV0aWwuZXJyVG9PYmoobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBfYWRkQ2hlY2soY2hlY2spIHtcbiAgICAgICAgcmV0dXJuIG5ldyBab2RTdHJpbmcoe1xuICAgICAgICAgICAgLi4udGhpcy5fZGVmLFxuICAgICAgICAgICAgY2hlY2tzOiBbLi4udGhpcy5fZGVmLmNoZWNrcywgY2hlY2tdLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgZW1haWwobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soeyBraW5kOiBcImVtYWlsXCIsIC4uLmVycm9yVXRpbC5lcnJUb09iaihtZXNzYWdlKSB9KTtcbiAgICB9XG4gICAgdXJsKG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHsga2luZDogXCJ1cmxcIiwgLi4uZXJyb3JVdGlsLmVyclRvT2JqKG1lc3NhZ2UpIH0pO1xuICAgIH1cbiAgICBlbW9qaShtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7IGtpbmQ6IFwiZW1vamlcIiwgLi4uZXJyb3JVdGlsLmVyclRvT2JqKG1lc3NhZ2UpIH0pO1xuICAgIH1cbiAgICB1dWlkKG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHsga2luZDogXCJ1dWlkXCIsIC4uLmVycm9yVXRpbC5lcnJUb09iaihtZXNzYWdlKSB9KTtcbiAgICB9XG4gICAgbmFub2lkKG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHsga2luZDogXCJuYW5vaWRcIiwgLi4uZXJyb3JVdGlsLmVyclRvT2JqKG1lc3NhZ2UpIH0pO1xuICAgIH1cbiAgICBjdWlkKG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHsga2luZDogXCJjdWlkXCIsIC4uLmVycm9yVXRpbC5lcnJUb09iaihtZXNzYWdlKSB9KTtcbiAgICB9XG4gICAgY3VpZDIobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soeyBraW5kOiBcImN1aWQyXCIsIC4uLmVycm9yVXRpbC5lcnJUb09iaihtZXNzYWdlKSB9KTtcbiAgICB9XG4gICAgdWxpZChtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7IGtpbmQ6IFwidWxpZFwiLCAuLi5lcnJvclV0aWwuZXJyVG9PYmoobWVzc2FnZSkgfSk7XG4gICAgfVxuICAgIGJhc2U2NChtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7IGtpbmQ6IFwiYmFzZTY0XCIsIC4uLmVycm9yVXRpbC5lcnJUb09iaihtZXNzYWdlKSB9KTtcbiAgICB9XG4gICAgYmFzZTY0dXJsKG1lc3NhZ2UpIHtcbiAgICAgICAgLy8gYmFzZTY0dXJsIGVuY29kaW5nIGlzIGEgbW9kaWZpY2F0aW9uIG9mIGJhc2U2NCB0aGF0IGNhbiBzYWZlbHkgYmUgdXNlZCBpbiBVUkxzIGFuZCBmaWxlbmFtZXNcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHtcbiAgICAgICAgICAgIGtpbmQ6IFwiYmFzZTY0dXJsXCIsXG4gICAgICAgICAgICAuLi5lcnJvclV0aWwuZXJyVG9PYmoobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBqd3Qob3B0aW9ucykge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soeyBraW5kOiBcImp3dFwiLCAuLi5lcnJvclV0aWwuZXJyVG9PYmoob3B0aW9ucykgfSk7XG4gICAgfVxuICAgIGlwKG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHsga2luZDogXCJpcFwiLCAuLi5lcnJvclV0aWwuZXJyVG9PYmoob3B0aW9ucykgfSk7XG4gICAgfVxuICAgIGNpZHIob3B0aW9ucykge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soeyBraW5kOiBcImNpZHJcIiwgLi4uZXJyb3JVdGlsLmVyclRvT2JqKG9wdGlvbnMpIH0pO1xuICAgIH1cbiAgICBkYXRldGltZShvcHRpb25zKSB7XG4gICAgICAgIGlmICh0eXBlb2Ygb3B0aW9ucyA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHtcbiAgICAgICAgICAgICAgICBraW5kOiBcImRhdGV0aW1lXCIsXG4gICAgICAgICAgICAgICAgcHJlY2lzaW9uOiBudWxsLFxuICAgICAgICAgICAgICAgIG9mZnNldDogZmFsc2UsXG4gICAgICAgICAgICAgICAgbG9jYWw6IGZhbHNlLFxuICAgICAgICAgICAgICAgIG1lc3NhZ2U6IG9wdGlvbnMsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJkYXRldGltZVwiLFxuICAgICAgICAgICAgcHJlY2lzaW9uOiB0eXBlb2Ygb3B0aW9ucz8ucHJlY2lzaW9uID09PSBcInVuZGVmaW5lZFwiID8gbnVsbCA6IG9wdGlvbnM/LnByZWNpc2lvbixcbiAgICAgICAgICAgIG9mZnNldDogb3B0aW9ucz8ub2Zmc2V0ID8/IGZhbHNlLFxuICAgICAgICAgICAgbG9jYWw6IG9wdGlvbnM/LmxvY2FsID8/IGZhbHNlLFxuICAgICAgICAgICAgLi4uZXJyb3JVdGlsLmVyclRvT2JqKG9wdGlvbnM/Lm1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgZGF0ZShtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7IGtpbmQ6IFwiZGF0ZVwiLCBtZXNzYWdlIH0pO1xuICAgIH1cbiAgICB0aW1lKG9wdGlvbnMpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBvcHRpb25zID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAgICAgIGtpbmQ6IFwidGltZVwiLFxuICAgICAgICAgICAgICAgIHByZWNpc2lvbjogbnVsbCxcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiBvcHRpb25zLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHtcbiAgICAgICAgICAgIGtpbmQ6IFwidGltZVwiLFxuICAgICAgICAgICAgcHJlY2lzaW9uOiB0eXBlb2Ygb3B0aW9ucz8ucHJlY2lzaW9uID09PSBcInVuZGVmaW5lZFwiID8gbnVsbCA6IG9wdGlvbnM/LnByZWNpc2lvbixcbiAgICAgICAgICAgIC4uLmVycm9yVXRpbC5lcnJUb09iaihvcHRpb25zPy5tZXNzYWdlKSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGR1cmF0aW9uKG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHsga2luZDogXCJkdXJhdGlvblwiLCAuLi5lcnJvclV0aWwuZXJyVG9PYmoobWVzc2FnZSkgfSk7XG4gICAgfVxuICAgIHJlZ2V4KHJlZ2V4LCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7XG4gICAgICAgICAgICBraW5kOiBcInJlZ2V4XCIsXG4gICAgICAgICAgICByZWdleDogcmVnZXgsXG4gICAgICAgICAgICAuLi5lcnJvclV0aWwuZXJyVG9PYmoobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBpbmNsdWRlcyh2YWx1ZSwgb3B0aW9ucykge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJpbmNsdWRlc1wiLFxuICAgICAgICAgICAgdmFsdWU6IHZhbHVlLFxuICAgICAgICAgICAgcG9zaXRpb246IG9wdGlvbnM/LnBvc2l0aW9uLFxuICAgICAgICAgICAgLi4uZXJyb3JVdGlsLmVyclRvT2JqKG9wdGlvbnM/Lm1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgc3RhcnRzV2l0aCh2YWx1ZSwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJzdGFydHNXaXRoXCIsXG4gICAgICAgICAgICB2YWx1ZTogdmFsdWUsXG4gICAgICAgICAgICAuLi5lcnJvclV0aWwuZXJyVG9PYmoobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBlbmRzV2l0aCh2YWx1ZSwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJlbmRzV2l0aFwiLFxuICAgICAgICAgICAgdmFsdWU6IHZhbHVlLFxuICAgICAgICAgICAgLi4uZXJyb3JVdGlsLmVyclRvT2JqKG1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgbWluKG1pbkxlbmd0aCwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJtaW5cIixcbiAgICAgICAgICAgIHZhbHVlOiBtaW5MZW5ndGgsXG4gICAgICAgICAgICAuLi5lcnJvclV0aWwuZXJyVG9PYmoobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBtYXgobWF4TGVuZ3RoLCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7XG4gICAgICAgICAgICBraW5kOiBcIm1heFwiLFxuICAgICAgICAgICAgdmFsdWU6IG1heExlbmd0aCxcbiAgICAgICAgICAgIC4uLmVycm9yVXRpbC5lcnJUb09iaihtZXNzYWdlKSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGxlbmd0aChsZW4sIG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHtcbiAgICAgICAgICAgIGtpbmQ6IFwibGVuZ3RoXCIsXG4gICAgICAgICAgICB2YWx1ZTogbGVuLFxuICAgICAgICAgICAgLi4uZXJyb3JVdGlsLmVyclRvT2JqKG1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRXF1aXZhbGVudCB0byBgLm1pbigxKWBcbiAgICAgKi9cbiAgICBub25lbXB0eShtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1pbigxLCBlcnJvclV0aWwuZXJyVG9PYmoobWVzc2FnZSkpO1xuICAgIH1cbiAgICB0cmltKCkge1xuICAgICAgICByZXR1cm4gbmV3IFpvZFN0cmluZyh7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICBjaGVja3M6IFsuLi50aGlzLl9kZWYuY2hlY2tzLCB7IGtpbmQ6IFwidHJpbVwiIH1dLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgdG9Mb3dlckNhc2UoKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kU3RyaW5nKHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIGNoZWNrczogWy4uLnRoaXMuX2RlZi5jaGVja3MsIHsga2luZDogXCJ0b0xvd2VyQ2FzZVwiIH1dLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgdG9VcHBlckNhc2UoKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kU3RyaW5nKHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIGNoZWNrczogWy4uLnRoaXMuX2RlZi5jaGVja3MsIHsga2luZDogXCJ0b1VwcGVyQ2FzZVwiIH1dLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgZ2V0IGlzRGF0ZXRpbWUoKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuX2RlZi5jaGVja3MuZmluZCgoY2gpID0+IGNoLmtpbmQgPT09IFwiZGF0ZXRpbWVcIik7XG4gICAgfVxuICAgIGdldCBpc0RhdGUoKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuX2RlZi5jaGVja3MuZmluZCgoY2gpID0+IGNoLmtpbmQgPT09IFwiZGF0ZVwiKTtcbiAgICB9XG4gICAgZ2V0IGlzVGltZSgpIHtcbiAgICAgICAgcmV0dXJuICEhdGhpcy5fZGVmLmNoZWNrcy5maW5kKChjaCkgPT4gY2gua2luZCA9PT0gXCJ0aW1lXCIpO1xuICAgIH1cbiAgICBnZXQgaXNEdXJhdGlvbigpIHtcbiAgICAgICAgcmV0dXJuICEhdGhpcy5fZGVmLmNoZWNrcy5maW5kKChjaCkgPT4gY2gua2luZCA9PT0gXCJkdXJhdGlvblwiKTtcbiAgICB9XG4gICAgZ2V0IGlzRW1haWwoKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuX2RlZi5jaGVja3MuZmluZCgoY2gpID0+IGNoLmtpbmQgPT09IFwiZW1haWxcIik7XG4gICAgfVxuICAgIGdldCBpc1VSTCgpIHtcbiAgICAgICAgcmV0dXJuICEhdGhpcy5fZGVmLmNoZWNrcy5maW5kKChjaCkgPT4gY2gua2luZCA9PT0gXCJ1cmxcIik7XG4gICAgfVxuICAgIGdldCBpc0Vtb2ppKCkge1xuICAgICAgICByZXR1cm4gISF0aGlzLl9kZWYuY2hlY2tzLmZpbmQoKGNoKSA9PiBjaC5raW5kID09PSBcImVtb2ppXCIpO1xuICAgIH1cbiAgICBnZXQgaXNVVUlEKCkge1xuICAgICAgICByZXR1cm4gISF0aGlzLl9kZWYuY2hlY2tzLmZpbmQoKGNoKSA9PiBjaC5raW5kID09PSBcInV1aWRcIik7XG4gICAgfVxuICAgIGdldCBpc05BTk9JRCgpIHtcbiAgICAgICAgcmV0dXJuICEhdGhpcy5fZGVmLmNoZWNrcy5maW5kKChjaCkgPT4gY2gua2luZCA9PT0gXCJuYW5vaWRcIik7XG4gICAgfVxuICAgIGdldCBpc0NVSUQoKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuX2RlZi5jaGVja3MuZmluZCgoY2gpID0+IGNoLmtpbmQgPT09IFwiY3VpZFwiKTtcbiAgICB9XG4gICAgZ2V0IGlzQ1VJRDIoKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuX2RlZi5jaGVja3MuZmluZCgoY2gpID0+IGNoLmtpbmQgPT09IFwiY3VpZDJcIik7XG4gICAgfVxuICAgIGdldCBpc1VMSUQoKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuX2RlZi5jaGVja3MuZmluZCgoY2gpID0+IGNoLmtpbmQgPT09IFwidWxpZFwiKTtcbiAgICB9XG4gICAgZ2V0IGlzSVAoKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuX2RlZi5jaGVja3MuZmluZCgoY2gpID0+IGNoLmtpbmQgPT09IFwiaXBcIik7XG4gICAgfVxuICAgIGdldCBpc0NJRFIoKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuX2RlZi5jaGVja3MuZmluZCgoY2gpID0+IGNoLmtpbmQgPT09IFwiY2lkclwiKTtcbiAgICB9XG4gICAgZ2V0IGlzQmFzZTY0KCkge1xuICAgICAgICByZXR1cm4gISF0aGlzLl9kZWYuY2hlY2tzLmZpbmQoKGNoKSA9PiBjaC5raW5kID09PSBcImJhc2U2NFwiKTtcbiAgICB9XG4gICAgZ2V0IGlzQmFzZTY0dXJsKCkge1xuICAgICAgICAvLyBiYXNlNjR1cmwgZW5jb2RpbmcgaXMgYSBtb2RpZmljYXRpb24gb2YgYmFzZTY0IHRoYXQgY2FuIHNhZmVseSBiZSB1c2VkIGluIFVSTHMgYW5kIGZpbGVuYW1lc1xuICAgICAgICByZXR1cm4gISF0aGlzLl9kZWYuY2hlY2tzLmZpbmQoKGNoKSA9PiBjaC5raW5kID09PSBcImJhc2U2NHVybFwiKTtcbiAgICB9XG4gICAgZ2V0IG1pbkxlbmd0aCgpIHtcbiAgICAgICAgbGV0IG1pbiA9IG51bGw7XG4gICAgICAgIGZvciAoY29uc3QgY2ggb2YgdGhpcy5fZGVmLmNoZWNrcykge1xuICAgICAgICAgICAgaWYgKGNoLmtpbmQgPT09IFwibWluXCIpIHtcbiAgICAgICAgICAgICAgICBpZiAobWluID09PSBudWxsIHx8IGNoLnZhbHVlID4gbWluKVxuICAgICAgICAgICAgICAgICAgICBtaW4gPSBjaC52YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbWluO1xuICAgIH1cbiAgICBnZXQgbWF4TGVuZ3RoKCkge1xuICAgICAgICBsZXQgbWF4ID0gbnVsbDtcbiAgICAgICAgZm9yIChjb25zdCBjaCBvZiB0aGlzLl9kZWYuY2hlY2tzKSB7XG4gICAgICAgICAgICBpZiAoY2gua2luZCA9PT0gXCJtYXhcIikge1xuICAgICAgICAgICAgICAgIGlmIChtYXggPT09IG51bGwgfHwgY2gudmFsdWUgPCBtYXgpXG4gICAgICAgICAgICAgICAgICAgIG1heCA9IGNoLnZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtYXg7XG4gICAgfVxufVxuWm9kU3RyaW5nLmNyZWF0ZSA9IChwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZFN0cmluZyh7XG4gICAgICAgIGNoZWNrczogW10sXG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kU3RyaW5nLFxuICAgICAgICBjb2VyY2U6IHBhcmFtcz8uY29lcmNlID8/IGZhbHNlLFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuLy8gaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvMzk2NjQ4NC93aHktZG9lcy1tb2R1bHVzLW9wZXJhdG9yLXJldHVybi1mcmFjdGlvbmFsLW51bWJlci1pbi1qYXZhc2NyaXB0LzMxNzExMDM0IzMxNzExMDM0XG5mdW5jdGlvbiBmbG9hdFNhZmVSZW1haW5kZXIodmFsLCBzdGVwKSB7XG4gICAgY29uc3QgdmFsRGVjQ291bnQgPSAodmFsLnRvU3RyaW5nKCkuc3BsaXQoXCIuXCIpWzFdIHx8IFwiXCIpLmxlbmd0aDtcbiAgICBjb25zdCBzdGVwRGVjQ291bnQgPSAoc3RlcC50b1N0cmluZygpLnNwbGl0KFwiLlwiKVsxXSB8fCBcIlwiKS5sZW5ndGg7XG4gICAgY29uc3QgZGVjQ291bnQgPSB2YWxEZWNDb3VudCA+IHN0ZXBEZWNDb3VudCA/IHZhbERlY0NvdW50IDogc3RlcERlY0NvdW50O1xuICAgIGNvbnN0IHZhbEludCA9IE51bWJlci5wYXJzZUludCh2YWwudG9GaXhlZChkZWNDb3VudCkucmVwbGFjZShcIi5cIiwgXCJcIikpO1xuICAgIGNvbnN0IHN0ZXBJbnQgPSBOdW1iZXIucGFyc2VJbnQoc3RlcC50b0ZpeGVkKGRlY0NvdW50KS5yZXBsYWNlKFwiLlwiLCBcIlwiKSk7XG4gICAgcmV0dXJuICh2YWxJbnQgJSBzdGVwSW50KSAvIDEwICoqIGRlY0NvdW50O1xufVxuZXhwb3J0IGNsYXNzIFpvZE51bWJlciBleHRlbmRzIFpvZFR5cGUge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlciguLi5hcmd1bWVudHMpO1xuICAgICAgICB0aGlzLm1pbiA9IHRoaXMuZ3RlO1xuICAgICAgICB0aGlzLm1heCA9IHRoaXMubHRlO1xuICAgICAgICB0aGlzLnN0ZXAgPSB0aGlzLm11bHRpcGxlT2Y7XG4gICAgfVxuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBpZiAodGhpcy5fZGVmLmNvZXJjZSkge1xuICAgICAgICAgICAgaW5wdXQuZGF0YSA9IE51bWJlcihpbnB1dC5kYXRhKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwYXJzZWRUeXBlID0gdGhpcy5fZ2V0VHlwZShpbnB1dCk7XG4gICAgICAgIGlmIChwYXJzZWRUeXBlICE9PSBab2RQYXJzZWRUeXBlLm51bWJlcikge1xuICAgICAgICAgICAgY29uc3QgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQpO1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogWm9kUGFyc2VkVHlwZS5udW1iZXIsXG4gICAgICAgICAgICAgICAgcmVjZWl2ZWQ6IGN0eC5wYXJzZWRUeXBlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICBsZXQgY3R4ID0gdW5kZWZpbmVkO1xuICAgICAgICBjb25zdCBzdGF0dXMgPSBuZXcgUGFyc2VTdGF0dXMoKTtcbiAgICAgICAgZm9yIChjb25zdCBjaGVjayBvZiB0aGlzLl9kZWYuY2hlY2tzKSB7XG4gICAgICAgICAgICBpZiAoY2hlY2sua2luZCA9PT0gXCJpbnRcIikge1xuICAgICAgICAgICAgICAgIGlmICghdXRpbC5pc0ludGVnZXIoaW5wdXQuZGF0YSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4cGVjdGVkOiBcImludGVnZXJcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlY2VpdmVkOiBcImZsb2F0XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJtaW5cIikge1xuICAgICAgICAgICAgICAgIGNvbnN0IHRvb1NtYWxsID0gY2hlY2suaW5jbHVzaXZlID8gaW5wdXQuZGF0YSA8IGNoZWNrLnZhbHVlIDogaW5wdXQuZGF0YSA8PSBjaGVjay52YWx1ZTtcbiAgICAgICAgICAgICAgICBpZiAodG9vU21hbGwpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLnRvb19zbWFsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1pbmltdW06IGNoZWNrLnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJudW1iZXJcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGluY2x1c2l2ZTogY2hlY2suaW5jbHVzaXZlLFxuICAgICAgICAgICAgICAgICAgICAgICAgZXhhY3Q6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwibWF4XCIpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0b29CaWcgPSBjaGVjay5pbmNsdXNpdmUgPyBpbnB1dC5kYXRhID4gY2hlY2sudmFsdWUgOiBpbnB1dC5kYXRhID49IGNoZWNrLnZhbHVlO1xuICAgICAgICAgICAgICAgIGlmICh0b29CaWcpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLnRvb19iaWcsXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXhpbXVtOiBjaGVjay52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwibnVtYmVyXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBpbmNsdXNpdmU6IGNoZWNrLmluY2x1c2l2ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4YWN0OiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcIm11bHRpcGxlT2ZcIikge1xuICAgICAgICAgICAgICAgIGlmIChmbG9hdFNhZmVSZW1haW5kZXIoaW5wdXQuZGF0YSwgY2hlY2sudmFsdWUpICE9PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5ub3RfbXVsdGlwbGVfb2YsXG4gICAgICAgICAgICAgICAgICAgICAgICBtdWx0aXBsZU9mOiBjaGVjay52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcImZpbml0ZVwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFOdW1iZXIuaXNGaW5pdGUoaW5wdXQuZGF0YSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLm5vdF9maW5pdGUsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdXRpbC5hc3NlcnROZXZlcihjaGVjayk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHsgc3RhdHVzOiBzdGF0dXMudmFsdWUsIHZhbHVlOiBpbnB1dC5kYXRhIH07XG4gICAgfVxuICAgIGd0ZSh2YWx1ZSwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5zZXRMaW1pdChcIm1pblwiLCB2YWx1ZSwgdHJ1ZSwgZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpKTtcbiAgICB9XG4gICAgZ3QodmFsdWUsIG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2V0TGltaXQoXCJtaW5cIiwgdmFsdWUsIGZhbHNlLCBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSkpO1xuICAgIH1cbiAgICBsdGUodmFsdWUsIG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2V0TGltaXQoXCJtYXhcIiwgdmFsdWUsIHRydWUsIGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSk7XG4gICAgfVxuICAgIGx0KHZhbHVlLCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNldExpbWl0KFwibWF4XCIsIHZhbHVlLCBmYWxzZSwgZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpKTtcbiAgICB9XG4gICAgc2V0TGltaXQoa2luZCwgdmFsdWUsIGluY2x1c2l2ZSwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gbmV3IFpvZE51bWJlcih7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICBjaGVja3M6IFtcbiAgICAgICAgICAgICAgICAuLi50aGlzLl9kZWYuY2hlY2tzLFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAga2luZCxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWUsXG4gICAgICAgICAgICAgICAgICAgIGluY2x1c2l2ZSxcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBdLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgX2FkZENoZWNrKGNoZWNrKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kTnVtYmVyKHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIGNoZWNrczogWy4uLnRoaXMuX2RlZi5jaGVja3MsIGNoZWNrXSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGludChtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7XG4gICAgICAgICAgICBraW5kOiBcImludFwiLFxuICAgICAgICAgICAgbWVzc2FnZTogZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgcG9zaXRpdmUobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJtaW5cIixcbiAgICAgICAgICAgIHZhbHVlOiAwLFxuICAgICAgICAgICAgaW5jbHVzaXZlOiBmYWxzZSxcbiAgICAgICAgICAgIG1lc3NhZ2U6IGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIG5lZ2F0aXZlKG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHtcbiAgICAgICAgICAgIGtpbmQ6IFwibWF4XCIsXG4gICAgICAgICAgICB2YWx1ZTogMCxcbiAgICAgICAgICAgIGluY2x1c2l2ZTogZmFsc2UsXG4gICAgICAgICAgICBtZXNzYWdlOiBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBub25wb3NpdGl2ZShtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7XG4gICAgICAgICAgICBraW5kOiBcIm1heFwiLFxuICAgICAgICAgICAgdmFsdWU6IDAsXG4gICAgICAgICAgICBpbmNsdXNpdmU6IHRydWUsXG4gICAgICAgICAgICBtZXNzYWdlOiBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBub25uZWdhdGl2ZShtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7XG4gICAgICAgICAgICBraW5kOiBcIm1pblwiLFxuICAgICAgICAgICAgdmFsdWU6IDAsXG4gICAgICAgICAgICBpbmNsdXNpdmU6IHRydWUsXG4gICAgICAgICAgICBtZXNzYWdlOiBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBtdWx0aXBsZU9mKHZhbHVlLCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7XG4gICAgICAgICAgICBraW5kOiBcIm11bHRpcGxlT2ZcIixcbiAgICAgICAgICAgIHZhbHVlOiB2YWx1ZSxcbiAgICAgICAgICAgIG1lc3NhZ2U6IGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGZpbml0ZShtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7XG4gICAgICAgICAgICBraW5kOiBcImZpbml0ZVwiLFxuICAgICAgICAgICAgbWVzc2FnZTogZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgc2FmZShtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7XG4gICAgICAgICAgICBraW5kOiBcIm1pblwiLFxuICAgICAgICAgICAgaW5jbHVzaXZlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IE51bWJlci5NSU5fU0FGRV9JTlRFR0VSLFxuICAgICAgICAgICAgbWVzc2FnZTogZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpLFxuICAgICAgICB9KS5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJtYXhcIixcbiAgICAgICAgICAgIGluY2x1c2l2ZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBOdW1iZXIuTUFYX1NBRkVfSU5URUdFUixcbiAgICAgICAgICAgIG1lc3NhZ2U6IGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGdldCBtaW5WYWx1ZSgpIHtcbiAgICAgICAgbGV0IG1pbiA9IG51bGw7XG4gICAgICAgIGZvciAoY29uc3QgY2ggb2YgdGhpcy5fZGVmLmNoZWNrcykge1xuICAgICAgICAgICAgaWYgKGNoLmtpbmQgPT09IFwibWluXCIpIHtcbiAgICAgICAgICAgICAgICBpZiAobWluID09PSBudWxsIHx8IGNoLnZhbHVlID4gbWluKVxuICAgICAgICAgICAgICAgICAgICBtaW4gPSBjaC52YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbWluO1xuICAgIH1cbiAgICBnZXQgbWF4VmFsdWUoKSB7XG4gICAgICAgIGxldCBtYXggPSBudWxsO1xuICAgICAgICBmb3IgKGNvbnN0IGNoIG9mIHRoaXMuX2RlZi5jaGVja3MpIHtcbiAgICAgICAgICAgIGlmIChjaC5raW5kID09PSBcIm1heFwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKG1heCA9PT0gbnVsbCB8fCBjaC52YWx1ZSA8IG1heClcbiAgICAgICAgICAgICAgICAgICAgbWF4ID0gY2gudmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1heDtcbiAgICB9XG4gICAgZ2V0IGlzSW50KCkge1xuICAgICAgICByZXR1cm4gISF0aGlzLl9kZWYuY2hlY2tzLmZpbmQoKGNoKSA9PiBjaC5raW5kID09PSBcImludFwiIHx8IChjaC5raW5kID09PSBcIm11bHRpcGxlT2ZcIiAmJiB1dGlsLmlzSW50ZWdlcihjaC52YWx1ZSkpKTtcbiAgICB9XG4gICAgZ2V0IGlzRmluaXRlKCkge1xuICAgICAgICBsZXQgbWF4ID0gbnVsbDtcbiAgICAgICAgbGV0IG1pbiA9IG51bGw7XG4gICAgICAgIGZvciAoY29uc3QgY2ggb2YgdGhpcy5fZGVmLmNoZWNrcykge1xuICAgICAgICAgICAgaWYgKGNoLmtpbmQgPT09IFwiZmluaXRlXCIgfHwgY2gua2luZCA9PT0gXCJpbnRcIiB8fCBjaC5raW5kID09PSBcIm11bHRpcGxlT2ZcIikge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2gua2luZCA9PT0gXCJtaW5cIikge1xuICAgICAgICAgICAgICAgIGlmIChtaW4gPT09IG51bGwgfHwgY2gudmFsdWUgPiBtaW4pXG4gICAgICAgICAgICAgICAgICAgIG1pbiA9IGNoLnZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2gua2luZCA9PT0gXCJtYXhcIikge1xuICAgICAgICAgICAgICAgIGlmIChtYXggPT09IG51bGwgfHwgY2gudmFsdWUgPCBtYXgpXG4gICAgICAgICAgICAgICAgICAgIG1heCA9IGNoLnZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBOdW1iZXIuaXNGaW5pdGUobWluKSAmJiBOdW1iZXIuaXNGaW5pdGUobWF4KTtcbiAgICB9XG59XG5ab2ROdW1iZXIuY3JlYXRlID0gKHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kTnVtYmVyKHtcbiAgICAgICAgY2hlY2tzOiBbXSxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2ROdW1iZXIsXG4gICAgICAgIGNvZXJjZTogcGFyYW1zPy5jb2VyY2UgfHwgZmFsc2UsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kQmlnSW50IGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7XG4gICAgICAgIHRoaXMubWluID0gdGhpcy5ndGU7XG4gICAgICAgIHRoaXMubWF4ID0gdGhpcy5sdGU7XG4gICAgfVxuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBpZiAodGhpcy5fZGVmLmNvZXJjZSkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBpbnB1dC5kYXRhID0gQmlnSW50KGlucHV0LmRhdGEpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2gge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9nZXRJbnZhbGlkSW5wdXQoaW5wdXQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHBhcnNlZFR5cGUgPSB0aGlzLl9nZXRUeXBlKGlucHV0KTtcbiAgICAgICAgaWYgKHBhcnNlZFR5cGUgIT09IFpvZFBhcnNlZFR5cGUuYmlnaW50KSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fZ2V0SW52YWxpZElucHV0KGlucHV0KTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgY3R4ID0gdW5kZWZpbmVkO1xuICAgICAgICBjb25zdCBzdGF0dXMgPSBuZXcgUGFyc2VTdGF0dXMoKTtcbiAgICAgICAgZm9yIChjb25zdCBjaGVjayBvZiB0aGlzLl9kZWYuY2hlY2tzKSB7XG4gICAgICAgICAgICBpZiAoY2hlY2sua2luZCA9PT0gXCJtaW5cIikge1xuICAgICAgICAgICAgICAgIGNvbnN0IHRvb1NtYWxsID0gY2hlY2suaW5jbHVzaXZlID8gaW5wdXQuZGF0YSA8IGNoZWNrLnZhbHVlIDogaW5wdXQuZGF0YSA8PSBjaGVjay52YWx1ZTtcbiAgICAgICAgICAgICAgICBpZiAodG9vU21hbGwpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLnRvb19zbWFsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwiYmlnaW50XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBtaW5pbXVtOiBjaGVjay52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGluY2x1c2l2ZTogY2hlY2suaW5jbHVzaXZlLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwibWF4XCIpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0b29CaWcgPSBjaGVjay5pbmNsdXNpdmUgPyBpbnB1dC5kYXRhID4gY2hlY2sudmFsdWUgOiBpbnB1dC5kYXRhID49IGNoZWNrLnZhbHVlO1xuICAgICAgICAgICAgICAgIGlmICh0b29CaWcpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLnRvb19iaWcsXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImJpZ2ludFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWF4aW11bTogY2hlY2sudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBpbmNsdXNpdmU6IGNoZWNrLmluY2x1c2l2ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcIm11bHRpcGxlT2ZcIikge1xuICAgICAgICAgICAgICAgIGlmIChpbnB1dC5kYXRhICUgY2hlY2sudmFsdWUgIT09IEJpZ0ludCgwKSkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUubm90X211bHRpcGxlX29mLFxuICAgICAgICAgICAgICAgICAgICAgICAgbXVsdGlwbGVPZjogY2hlY2sudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdXRpbC5hc3NlcnROZXZlcihjaGVjayk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHsgc3RhdHVzOiBzdGF0dXMudmFsdWUsIHZhbHVlOiBpbnB1dC5kYXRhIH07XG4gICAgfVxuICAgIF9nZXRJbnZhbGlkSW5wdXQoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQpO1xuICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3R5cGUsXG4gICAgICAgICAgICBleHBlY3RlZDogWm9kUGFyc2VkVHlwZS5iaWdpbnQsXG4gICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICB9XG4gICAgZ3RlKHZhbHVlLCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNldExpbWl0KFwibWluXCIsIHZhbHVlLCB0cnVlLCBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSkpO1xuICAgIH1cbiAgICBndCh2YWx1ZSwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5zZXRMaW1pdChcIm1pblwiLCB2YWx1ZSwgZmFsc2UsIGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSk7XG4gICAgfVxuICAgIGx0ZSh2YWx1ZSwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5zZXRMaW1pdChcIm1heFwiLCB2YWx1ZSwgdHJ1ZSwgZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpKTtcbiAgICB9XG4gICAgbHQodmFsdWUsIG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2V0TGltaXQoXCJtYXhcIiwgdmFsdWUsIGZhbHNlLCBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSkpO1xuICAgIH1cbiAgICBzZXRMaW1pdChraW5kLCB2YWx1ZSwgaW5jbHVzaXZlLCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kQmlnSW50KHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIGNoZWNrczogW1xuICAgICAgICAgICAgICAgIC4uLnRoaXMuX2RlZi5jaGVja3MsXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBraW5kLFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgaW5jbHVzaXZlLFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSksXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF0sXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBfYWRkQ2hlY2soY2hlY2spIHtcbiAgICAgICAgcmV0dXJuIG5ldyBab2RCaWdJbnQoe1xuICAgICAgICAgICAgLi4udGhpcy5fZGVmLFxuICAgICAgICAgICAgY2hlY2tzOiBbLi4udGhpcy5fZGVmLmNoZWNrcywgY2hlY2tdLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgcG9zaXRpdmUobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJtaW5cIixcbiAgICAgICAgICAgIHZhbHVlOiBCaWdJbnQoMCksXG4gICAgICAgICAgICBpbmNsdXNpdmU6IGZhbHNlLFxuICAgICAgICAgICAgbWVzc2FnZTogZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgbmVnYXRpdmUobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJtYXhcIixcbiAgICAgICAgICAgIHZhbHVlOiBCaWdJbnQoMCksXG4gICAgICAgICAgICBpbmNsdXNpdmU6IGZhbHNlLFxuICAgICAgICAgICAgbWVzc2FnZTogZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgbm9ucG9zaXRpdmUobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJtYXhcIixcbiAgICAgICAgICAgIHZhbHVlOiBCaWdJbnQoMCksXG4gICAgICAgICAgICBpbmNsdXNpdmU6IHRydWUsXG4gICAgICAgICAgICBtZXNzYWdlOiBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBub25uZWdhdGl2ZShtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7XG4gICAgICAgICAgICBraW5kOiBcIm1pblwiLFxuICAgICAgICAgICAgdmFsdWU6IEJpZ0ludCgwKSxcbiAgICAgICAgICAgIGluY2x1c2l2ZTogdHJ1ZSxcbiAgICAgICAgICAgIG1lc3NhZ2U6IGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIG11bHRpcGxlT2YodmFsdWUsIG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHtcbiAgICAgICAgICAgIGtpbmQ6IFwibXVsdGlwbGVPZlwiLFxuICAgICAgICAgICAgdmFsdWUsXG4gICAgICAgICAgICBtZXNzYWdlOiBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBnZXQgbWluVmFsdWUoKSB7XG4gICAgICAgIGxldCBtaW4gPSBudWxsO1xuICAgICAgICBmb3IgKGNvbnN0IGNoIG9mIHRoaXMuX2RlZi5jaGVja3MpIHtcbiAgICAgICAgICAgIGlmIChjaC5raW5kID09PSBcIm1pblwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKG1pbiA9PT0gbnVsbCB8fCBjaC52YWx1ZSA+IG1pbilcbiAgICAgICAgICAgICAgICAgICAgbWluID0gY2gudmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1pbjtcbiAgICB9XG4gICAgZ2V0IG1heFZhbHVlKCkge1xuICAgICAgICBsZXQgbWF4ID0gbnVsbDtcbiAgICAgICAgZm9yIChjb25zdCBjaCBvZiB0aGlzLl9kZWYuY2hlY2tzKSB7XG4gICAgICAgICAgICBpZiAoY2gua2luZCA9PT0gXCJtYXhcIikge1xuICAgICAgICAgICAgICAgIGlmIChtYXggPT09IG51bGwgfHwgY2gudmFsdWUgPCBtYXgpXG4gICAgICAgICAgICAgICAgICAgIG1heCA9IGNoLnZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtYXg7XG4gICAgfVxufVxuWm9kQmlnSW50LmNyZWF0ZSA9IChwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZEJpZ0ludCh7XG4gICAgICAgIGNoZWNrczogW10sXG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kQmlnSW50LFxuICAgICAgICBjb2VyY2U6IHBhcmFtcz8uY29lcmNlID8/IGZhbHNlLFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuZXhwb3J0IGNsYXNzIFpvZEJvb2xlYW4gZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgaWYgKHRoaXMuX2RlZi5jb2VyY2UpIHtcbiAgICAgICAgICAgIGlucHV0LmRhdGEgPSBCb29sZWFuKGlucHV0LmRhdGEpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHBhcnNlZFR5cGUgPSB0aGlzLl9nZXRUeXBlKGlucHV0KTtcbiAgICAgICAgaWYgKHBhcnNlZFR5cGUgIT09IFpvZFBhcnNlZFR5cGUuYm9vbGVhbikge1xuICAgICAgICAgICAgY29uc3QgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQpO1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogWm9kUGFyc2VkVHlwZS5ib29sZWFuLFxuICAgICAgICAgICAgICAgIHJlY2VpdmVkOiBjdHgucGFyc2VkVHlwZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIE9LKGlucHV0LmRhdGEpO1xuICAgIH1cbn1cblpvZEJvb2xlYW4uY3JlYXRlID0gKHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kQm9vbGVhbih7XG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kQm9vbGVhbixcbiAgICAgICAgY29lcmNlOiBwYXJhbXM/LmNvZXJjZSB8fCBmYWxzZSxcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcbmV4cG9ydCBjbGFzcyBab2REYXRlIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGlmICh0aGlzLl9kZWYuY29lcmNlKSB7XG4gICAgICAgICAgICBpbnB1dC5kYXRhID0gbmV3IERhdGUoaW5wdXQuZGF0YSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcGFyc2VkVHlwZSA9IHRoaXMuX2dldFR5cGUoaW5wdXQpO1xuICAgICAgICBpZiAocGFyc2VkVHlwZSAhPT0gWm9kUGFyc2VkVHlwZS5kYXRlKSB7XG4gICAgICAgICAgICBjb25zdCBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCk7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF90eXBlLFxuICAgICAgICAgICAgICAgIGV4cGVjdGVkOiBab2RQYXJzZWRUeXBlLmRhdGUsXG4gICAgICAgICAgICAgICAgcmVjZWl2ZWQ6IGN0eC5wYXJzZWRUeXBlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoTnVtYmVyLmlzTmFOKGlucHV0LmRhdGEuZ2V0VGltZSgpKSkge1xuICAgICAgICAgICAgY29uc3QgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQpO1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfZGF0ZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgc3RhdHVzID0gbmV3IFBhcnNlU3RhdHVzKCk7XG4gICAgICAgIGxldCBjdHggPSB1bmRlZmluZWQ7XG4gICAgICAgIGZvciAoY29uc3QgY2hlY2sgb2YgdGhpcy5fZGVmLmNoZWNrcykge1xuICAgICAgICAgICAgaWYgKGNoZWNrLmtpbmQgPT09IFwibWluXCIpIHtcbiAgICAgICAgICAgICAgICBpZiAoaW5wdXQuZGF0YS5nZXRUaW1lKCkgPCBjaGVjay52YWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUudG9vX3NtYWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGluY2x1c2l2ZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4YWN0OiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1pbmltdW06IGNoZWNrLnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJkYXRlXCIsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcIm1heFwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKGlucHV0LmRhdGEuZ2V0VGltZSgpID4gY2hlY2sudmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLnRvb19iaWcsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICAgICAgaW5jbHVzaXZlOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgZXhhY3Q6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWF4aW11bTogY2hlY2sudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImRhdGVcIixcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHV0aWwuYXNzZXJ0TmV2ZXIoY2hlY2spO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBzdGF0dXM6IHN0YXR1cy52YWx1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBuZXcgRGF0ZShpbnB1dC5kYXRhLmdldFRpbWUoKSksXG4gICAgICAgIH07XG4gICAgfVxuICAgIF9hZGRDaGVjayhjaGVjaykge1xuICAgICAgICByZXR1cm4gbmV3IFpvZERhdGUoe1xuICAgICAgICAgICAgLi4udGhpcy5fZGVmLFxuICAgICAgICAgICAgY2hlY2tzOiBbLi4udGhpcy5fZGVmLmNoZWNrcywgY2hlY2tdLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgbWluKG1pbkRhdGUsIG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHtcbiAgICAgICAgICAgIGtpbmQ6IFwibWluXCIsXG4gICAgICAgICAgICB2YWx1ZTogbWluRGF0ZS5nZXRUaW1lKCksXG4gICAgICAgICAgICBtZXNzYWdlOiBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBtYXgobWF4RGF0ZSwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJtYXhcIixcbiAgICAgICAgICAgIHZhbHVlOiBtYXhEYXRlLmdldFRpbWUoKSxcbiAgICAgICAgICAgIG1lc3NhZ2U6IGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGdldCBtaW5EYXRlKCkge1xuICAgICAgICBsZXQgbWluID0gbnVsbDtcbiAgICAgICAgZm9yIChjb25zdCBjaCBvZiB0aGlzLl9kZWYuY2hlY2tzKSB7XG4gICAgICAgICAgICBpZiAoY2gua2luZCA9PT0gXCJtaW5cIikge1xuICAgICAgICAgICAgICAgIGlmIChtaW4gPT09IG51bGwgfHwgY2gudmFsdWUgPiBtaW4pXG4gICAgICAgICAgICAgICAgICAgIG1pbiA9IGNoLnZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtaW4gIT0gbnVsbCA/IG5ldyBEYXRlKG1pbikgOiBudWxsO1xuICAgIH1cbiAgICBnZXQgbWF4RGF0ZSgpIHtcbiAgICAgICAgbGV0IG1heCA9IG51bGw7XG4gICAgICAgIGZvciAoY29uc3QgY2ggb2YgdGhpcy5fZGVmLmNoZWNrcykge1xuICAgICAgICAgICAgaWYgKGNoLmtpbmQgPT09IFwibWF4XCIpIHtcbiAgICAgICAgICAgICAgICBpZiAobWF4ID09PSBudWxsIHx8IGNoLnZhbHVlIDwgbWF4KVxuICAgICAgICAgICAgICAgICAgICBtYXggPSBjaC52YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbWF4ICE9IG51bGwgPyBuZXcgRGF0ZShtYXgpIDogbnVsbDtcbiAgICB9XG59XG5ab2REYXRlLmNyZWF0ZSA9IChwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZERhdGUoe1xuICAgICAgICBjaGVja3M6IFtdLFxuICAgICAgICBjb2VyY2U6IHBhcmFtcz8uY29lcmNlIHx8IGZhbHNlLFxuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZERhdGUsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kU3ltYm9sIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHBhcnNlZFR5cGUgPSB0aGlzLl9nZXRUeXBlKGlucHV0KTtcbiAgICAgICAgaWYgKHBhcnNlZFR5cGUgIT09IFpvZFBhcnNlZFR5cGUuc3ltYm9sKSB7XG4gICAgICAgICAgICBjb25zdCBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCk7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF90eXBlLFxuICAgICAgICAgICAgICAgIGV4cGVjdGVkOiBab2RQYXJzZWRUeXBlLnN5bWJvbCxcbiAgICAgICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBPSyhpbnB1dC5kYXRhKTtcbiAgICB9XG59XG5ab2RTeW1ib2wuY3JlYXRlID0gKHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kU3ltYm9sKHtcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RTeW1ib2wsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kVW5kZWZpbmVkIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHBhcnNlZFR5cGUgPSB0aGlzLl9nZXRUeXBlKGlucHV0KTtcbiAgICAgICAgaWYgKHBhcnNlZFR5cGUgIT09IFpvZFBhcnNlZFR5cGUudW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBjb25zdCBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCk7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF90eXBlLFxuICAgICAgICAgICAgICAgIGV4cGVjdGVkOiBab2RQYXJzZWRUeXBlLnVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBPSyhpbnB1dC5kYXRhKTtcbiAgICB9XG59XG5ab2RVbmRlZmluZWQuY3JlYXRlID0gKHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kVW5kZWZpbmVkKHtcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RVbmRlZmluZWQsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kTnVsbCBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBjb25zdCBwYXJzZWRUeXBlID0gdGhpcy5fZ2V0VHlwZShpbnB1dCk7XG4gICAgICAgIGlmIChwYXJzZWRUeXBlICE9PSBab2RQYXJzZWRUeXBlLm51bGwpIHtcbiAgICAgICAgICAgIGNvbnN0IGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0KTtcbiAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3R5cGUsXG4gICAgICAgICAgICAgICAgZXhwZWN0ZWQ6IFpvZFBhcnNlZFR5cGUubnVsbCxcbiAgICAgICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBPSyhpbnB1dC5kYXRhKTtcbiAgICB9XG59XG5ab2ROdWxsLmNyZWF0ZSA9IChwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZE51bGwoe1xuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZE51bGwsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kQW55IGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7XG4gICAgICAgIC8vIHRvIHByZXZlbnQgaW5zdGFuY2VzIG9mIG90aGVyIGNsYXNzZXMgZnJvbSBleHRlbmRpbmcgWm9kQW55LiB0aGlzIGNhdXNlcyBpc3N1ZXMgd2l0aCBjYXRjaGFsbCBpbiBab2RPYmplY3QuXG4gICAgICAgIHRoaXMuX2FueSA9IHRydWU7XG4gICAgfVxuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICByZXR1cm4gT0soaW5wdXQuZGF0YSk7XG4gICAgfVxufVxuWm9kQW55LmNyZWF0ZSA9IChwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZEFueSh7XG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kQW55LFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuZXhwb3J0IGNsYXNzIFpvZFVua25vd24gZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcbiAgICAgICAgLy8gcmVxdWlyZWRcbiAgICAgICAgdGhpcy5fdW5rbm93biA9IHRydWU7XG4gICAgfVxuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICByZXR1cm4gT0soaW5wdXQuZGF0YSk7XG4gICAgfVxufVxuWm9kVW5rbm93bi5jcmVhdGUgPSAocGFyYW1zKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBab2RVbmtub3duKHtcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RVbmtub3duLFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuZXhwb3J0IGNsYXNzIFpvZE5ldmVyIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0KTtcbiAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF90eXBlLFxuICAgICAgICAgICAgZXhwZWN0ZWQ6IFpvZFBhcnNlZFR5cGUubmV2ZXIsXG4gICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICB9XG59XG5ab2ROZXZlci5jcmVhdGUgPSAocGFyYW1zKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBab2ROZXZlcih7XG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kTmV2ZXIsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kVm9pZCBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBjb25zdCBwYXJzZWRUeXBlID0gdGhpcy5fZ2V0VHlwZShpbnB1dCk7XG4gICAgICAgIGlmIChwYXJzZWRUeXBlICE9PSBab2RQYXJzZWRUeXBlLnVuZGVmaW5lZCkge1xuICAgICAgICAgICAgY29uc3QgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQpO1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogWm9kUGFyc2VkVHlwZS52b2lkLFxuICAgICAgICAgICAgICAgIHJlY2VpdmVkOiBjdHgucGFyc2VkVHlwZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIE9LKGlucHV0LmRhdGEpO1xuICAgIH1cbn1cblpvZFZvaWQuY3JlYXRlID0gKHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kVm9pZCh7XG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kVm9pZCxcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcbmV4cG9ydCBjbGFzcyBab2RBcnJheSBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBjb25zdCB7IGN0eCwgc3RhdHVzIH0gPSB0aGlzLl9wcm9jZXNzSW5wdXRQYXJhbXMoaW5wdXQpO1xuICAgICAgICBjb25zdCBkZWYgPSB0aGlzLl9kZWY7XG4gICAgICAgIGlmIChjdHgucGFyc2VkVHlwZSAhPT0gWm9kUGFyc2VkVHlwZS5hcnJheSkge1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogWm9kUGFyc2VkVHlwZS5hcnJheSxcbiAgICAgICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIGlmIChkZWYuZXhhY3RMZW5ndGggIT09IG51bGwpIHtcbiAgICAgICAgICAgIGNvbnN0IHRvb0JpZyA9IGN0eC5kYXRhLmxlbmd0aCA+IGRlZi5leGFjdExlbmd0aC52YWx1ZTtcbiAgICAgICAgICAgIGNvbnN0IHRvb1NtYWxsID0gY3R4LmRhdGEubGVuZ3RoIDwgZGVmLmV4YWN0TGVuZ3RoLnZhbHVlO1xuICAgICAgICAgICAgaWYgKHRvb0JpZyB8fCB0b29TbWFsbCkge1xuICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICBjb2RlOiB0b29CaWcgPyBab2RJc3N1ZUNvZGUudG9vX2JpZyA6IFpvZElzc3VlQ29kZS50b29fc21hbGwsXG4gICAgICAgICAgICAgICAgICAgIG1pbmltdW06ICh0b29TbWFsbCA/IGRlZi5leGFjdExlbmd0aC52YWx1ZSA6IHVuZGVmaW5lZCksXG4gICAgICAgICAgICAgICAgICAgIG1heGltdW06ICh0b29CaWcgPyBkZWYuZXhhY3RMZW5ndGgudmFsdWUgOiB1bmRlZmluZWQpLFxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImFycmF5XCIsXG4gICAgICAgICAgICAgICAgICAgIGluY2x1c2l2ZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgZXhhY3Q6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGRlZi5leGFjdExlbmd0aC5tZXNzYWdlLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChkZWYubWluTGVuZ3RoICE9PSBudWxsKSB7XG4gICAgICAgICAgICBpZiAoY3R4LmRhdGEubGVuZ3RoIDwgZGVmLm1pbkxlbmd0aC52YWx1ZSkge1xuICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUudG9vX3NtYWxsLFxuICAgICAgICAgICAgICAgICAgICBtaW5pbXVtOiBkZWYubWluTGVuZ3RoLnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImFycmF5XCIsXG4gICAgICAgICAgICAgICAgICAgIGluY2x1c2l2ZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgZXhhY3Q6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBkZWYubWluTGVuZ3RoLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGRlZi5tYXhMZW5ndGggIT09IG51bGwpIHtcbiAgICAgICAgICAgIGlmIChjdHguZGF0YS5sZW5ndGggPiBkZWYubWF4TGVuZ3RoLnZhbHVlKSB7XG4gICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS50b29fYmlnLFxuICAgICAgICAgICAgICAgICAgICBtYXhpbXVtOiBkZWYubWF4TGVuZ3RoLnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImFycmF5XCIsXG4gICAgICAgICAgICAgICAgICAgIGluY2x1c2l2ZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgZXhhY3Q6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBkZWYubWF4TGVuZ3RoLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGN0eC5jb21tb24uYXN5bmMpIHtcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLmFsbChbLi4uY3R4LmRhdGFdLm1hcCgoaXRlbSwgaSkgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiBkZWYudHlwZS5fcGFyc2VBc3luYyhuZXcgUGFyc2VJbnB1dExhenlQYXRoKGN0eCwgaXRlbSwgY3R4LnBhdGgsIGkpKTtcbiAgICAgICAgICAgIH0pKS50aGVuKChyZXN1bHQpID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gUGFyc2VTdGF0dXMubWVyZ2VBcnJheShzdGF0dXMsIHJlc3VsdCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCByZXN1bHQgPSBbLi4uY3R4LmRhdGFdLm1hcCgoaXRlbSwgaSkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIGRlZi50eXBlLl9wYXJzZVN5bmMobmV3IFBhcnNlSW5wdXRMYXp5UGF0aChjdHgsIGl0ZW0sIGN0eC5wYXRoLCBpKSk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gUGFyc2VTdGF0dXMubWVyZ2VBcnJheShzdGF0dXMsIHJlc3VsdCk7XG4gICAgfVxuICAgIGdldCBlbGVtZW50KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLnR5cGU7XG4gICAgfVxuICAgIG1pbihtaW5MZW5ndGgsIG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBab2RBcnJheSh7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICBtaW5MZW5ndGg6IHsgdmFsdWU6IG1pbkxlbmd0aCwgbWVzc2FnZTogZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpIH0sXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBtYXgobWF4TGVuZ3RoLCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kQXJyYXkoe1xuICAgICAgICAgICAgLi4udGhpcy5fZGVmLFxuICAgICAgICAgICAgbWF4TGVuZ3RoOiB7IHZhbHVlOiBtYXhMZW5ndGgsIG1lc3NhZ2U6IGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSB9LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgbGVuZ3RoKGxlbiwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gbmV3IFpvZEFycmF5KHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIGV4YWN0TGVuZ3RoOiB7IHZhbHVlOiBsZW4sIG1lc3NhZ2U6IGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSB9LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgbm9uZW1wdHkobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5taW4oMSwgbWVzc2FnZSk7XG4gICAgfVxufVxuWm9kQXJyYXkuY3JlYXRlID0gKHNjaGVtYSwgcGFyYW1zKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBab2RBcnJheSh7XG4gICAgICAgIHR5cGU6IHNjaGVtYSxcbiAgICAgICAgbWluTGVuZ3RoOiBudWxsLFxuICAgICAgICBtYXhMZW5ndGg6IG51bGwsXG4gICAgICAgIGV4YWN0TGVuZ3RoOiBudWxsLFxuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZEFycmF5LFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuZnVuY3Rpb24gZGVlcFBhcnRpYWxpZnkoc2NoZW1hKSB7XG4gICAgaWYgKHNjaGVtYSBpbnN0YW5jZW9mIFpvZE9iamVjdCkge1xuICAgICAgICBjb25zdCBuZXdTaGFwZSA9IHt9O1xuICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBzY2hlbWEuc2hhcGUpIHtcbiAgICAgICAgICAgIGNvbnN0IGZpZWxkU2NoZW1hID0gc2NoZW1hLnNoYXBlW2tleV07XG4gICAgICAgICAgICBuZXdTaGFwZVtrZXldID0gWm9kT3B0aW9uYWwuY3JlYXRlKGRlZXBQYXJ0aWFsaWZ5KGZpZWxkU2NoZW1hKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBab2RPYmplY3Qoe1xuICAgICAgICAgICAgLi4uc2NoZW1hLl9kZWYsXG4gICAgICAgICAgICBzaGFwZTogKCkgPT4gbmV3U2hhcGUsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBlbHNlIGlmIChzY2hlbWEgaW5zdGFuY2VvZiBab2RBcnJheSkge1xuICAgICAgICByZXR1cm4gbmV3IFpvZEFycmF5KHtcbiAgICAgICAgICAgIC4uLnNjaGVtYS5fZGVmLFxuICAgICAgICAgICAgdHlwZTogZGVlcFBhcnRpYWxpZnkoc2NoZW1hLmVsZW1lbnQpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgZWxzZSBpZiAoc2NoZW1hIGluc3RhbmNlb2YgWm9kT3B0aW9uYWwpIHtcbiAgICAgICAgcmV0dXJuIFpvZE9wdGlvbmFsLmNyZWF0ZShkZWVwUGFydGlhbGlmeShzY2hlbWEudW53cmFwKCkpKTtcbiAgICB9XG4gICAgZWxzZSBpZiAoc2NoZW1hIGluc3RhbmNlb2YgWm9kTnVsbGFibGUpIHtcbiAgICAgICAgcmV0dXJuIFpvZE51bGxhYmxlLmNyZWF0ZShkZWVwUGFydGlhbGlmeShzY2hlbWEudW53cmFwKCkpKTtcbiAgICB9XG4gICAgZWxzZSBpZiAoc2NoZW1hIGluc3RhbmNlb2YgWm9kVHVwbGUpIHtcbiAgICAgICAgcmV0dXJuIFpvZFR1cGxlLmNyZWF0ZShzY2hlbWEuaXRlbXMubWFwKChpdGVtKSA9PiBkZWVwUGFydGlhbGlmeShpdGVtKSkpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHNjaGVtYTtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgWm9kT2JqZWN0IGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7XG4gICAgICAgIHRoaXMuX2NhY2hlZCA9IG51bGw7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAZGVwcmVjYXRlZCBJbiBtb3N0IGNhc2VzLCB0aGlzIGlzIG5vIGxvbmdlciBuZWVkZWQgLSB1bmtub3duIHByb3BlcnRpZXMgYXJlIG5vdyBzaWxlbnRseSBzdHJpcHBlZC5cbiAgICAgICAgICogSWYgeW91IHdhbnQgdG8gcGFzcyB0aHJvdWdoIHVua25vd24gcHJvcGVydGllcywgdXNlIGAucGFzc3Rocm91Z2goKWAgaW5zdGVhZC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMubm9uc3RyaWN0ID0gdGhpcy5wYXNzdGhyb3VnaDtcbiAgICAgICAgLy8gZXh0ZW5kPFxuICAgICAgICAvLyAgIEF1Z21lbnRhdGlvbiBleHRlbmRzIFpvZFJhd1NoYXBlLFxuICAgICAgICAvLyAgIE5ld091dHB1dCBleHRlbmRzIHV0aWwuZmxhdHRlbjx7XG4gICAgICAgIC8vICAgICBbayBpbiBrZXlvZiBBdWdtZW50YXRpb24gfCBrZXlvZiBPdXRwdXRdOiBrIGV4dGVuZHMga2V5b2YgQXVnbWVudGF0aW9uXG4gICAgICAgIC8vICAgICAgID8gQXVnbWVudGF0aW9uW2tdW1wiX291dHB1dFwiXVxuICAgICAgICAvLyAgICAgICA6IGsgZXh0ZW5kcyBrZXlvZiBPdXRwdXRcbiAgICAgICAgLy8gICAgICAgPyBPdXRwdXRba11cbiAgICAgICAgLy8gICAgICAgOiBuZXZlcjtcbiAgICAgICAgLy8gICB9PixcbiAgICAgICAgLy8gICBOZXdJbnB1dCBleHRlbmRzIHV0aWwuZmxhdHRlbjx7XG4gICAgICAgIC8vICAgICBbayBpbiBrZXlvZiBBdWdtZW50YXRpb24gfCBrZXlvZiBJbnB1dF06IGsgZXh0ZW5kcyBrZXlvZiBBdWdtZW50YXRpb25cbiAgICAgICAgLy8gICAgICAgPyBBdWdtZW50YXRpb25ba11bXCJfaW5wdXRcIl1cbiAgICAgICAgLy8gICAgICAgOiBrIGV4dGVuZHMga2V5b2YgSW5wdXRcbiAgICAgICAgLy8gICAgICAgPyBJbnB1dFtrXVxuICAgICAgICAvLyAgICAgICA6IG5ldmVyO1xuICAgICAgICAvLyAgIH0+XG4gICAgICAgIC8vID4oXG4gICAgICAgIC8vICAgYXVnbWVudGF0aW9uOiBBdWdtZW50YXRpb25cbiAgICAgICAgLy8gKTogWm9kT2JqZWN0PFxuICAgICAgICAvLyAgIGV4dGVuZFNoYXBlPFQsIEF1Z21lbnRhdGlvbj4sXG4gICAgICAgIC8vICAgVW5rbm93bktleXMsXG4gICAgICAgIC8vICAgQ2F0Y2hhbGwsXG4gICAgICAgIC8vICAgTmV3T3V0cHV0LFxuICAgICAgICAvLyAgIE5ld0lucHV0XG4gICAgICAgIC8vID4ge1xuICAgICAgICAvLyAgIHJldHVybiBuZXcgWm9kT2JqZWN0KHtcbiAgICAgICAgLy8gICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgLy8gICAgIHNoYXBlOiAoKSA9PiAoe1xuICAgICAgICAvLyAgICAgICAuLi50aGlzLl9kZWYuc2hhcGUoKSxcbiAgICAgICAgLy8gICAgICAgLi4uYXVnbWVudGF0aW9uLFxuICAgICAgICAvLyAgICAgfSksXG4gICAgICAgIC8vICAgfSkgYXMgYW55O1xuICAgICAgICAvLyB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAZGVwcmVjYXRlZCBVc2UgYC5leHRlbmRgIGluc3RlYWRcbiAgICAgICAgICogICovXG4gICAgICAgIHRoaXMuYXVnbWVudCA9IHRoaXMuZXh0ZW5kO1xuICAgIH1cbiAgICBfZ2V0Q2FjaGVkKCkge1xuICAgICAgICBpZiAodGhpcy5fY2FjaGVkICE9PSBudWxsKVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2NhY2hlZDtcbiAgICAgICAgY29uc3Qgc2hhcGUgPSB0aGlzLl9kZWYuc2hhcGUoKTtcbiAgICAgICAgY29uc3Qga2V5cyA9IHV0aWwub2JqZWN0S2V5cyhzaGFwZSk7XG4gICAgICAgIHRoaXMuX2NhY2hlZCA9IHsgc2hhcGUsIGtleXMgfTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NhY2hlZDtcbiAgICB9XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHBhcnNlZFR5cGUgPSB0aGlzLl9nZXRUeXBlKGlucHV0KTtcbiAgICAgICAgaWYgKHBhcnNlZFR5cGUgIT09IFpvZFBhcnNlZFR5cGUub2JqZWN0KSB7XG4gICAgICAgICAgICBjb25zdCBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCk7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF90eXBlLFxuICAgICAgICAgICAgICAgIGV4cGVjdGVkOiBab2RQYXJzZWRUeXBlLm9iamVjdCxcbiAgICAgICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHsgc3RhdHVzLCBjdHggfSA9IHRoaXMuX3Byb2Nlc3NJbnB1dFBhcmFtcyhpbnB1dCk7XG4gICAgICAgIGNvbnN0IHsgc2hhcGUsIGtleXM6IHNoYXBlS2V5cyB9ID0gdGhpcy5fZ2V0Q2FjaGVkKCk7XG4gICAgICAgIGNvbnN0IGV4dHJhS2V5cyA9IFtdO1xuICAgICAgICBpZiAoISh0aGlzLl9kZWYuY2F0Y2hhbGwgaW5zdGFuY2VvZiBab2ROZXZlciAmJiB0aGlzLl9kZWYudW5rbm93bktleXMgPT09IFwic3RyaXBcIikpIHtcbiAgICAgICAgICAgIGZvciAoY29uc3Qga2V5IGluIGN0eC5kYXRhKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFzaGFwZUtleXMuaW5jbHVkZXMoa2V5KSkge1xuICAgICAgICAgICAgICAgICAgICBleHRyYUtleXMucHVzaChrZXkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwYWlycyA9IFtdO1xuICAgICAgICBmb3IgKGNvbnN0IGtleSBvZiBzaGFwZUtleXMpIHtcbiAgICAgICAgICAgIGNvbnN0IGtleVZhbGlkYXRvciA9IHNoYXBlW2tleV07XG4gICAgICAgICAgICBjb25zdCB2YWx1ZSA9IGN0eC5kYXRhW2tleV07XG4gICAgICAgICAgICBwYWlycy5wdXNoKHtcbiAgICAgICAgICAgICAgICBrZXk6IHsgc3RhdHVzOiBcInZhbGlkXCIsIHZhbHVlOiBrZXkgfSxcbiAgICAgICAgICAgICAgICB2YWx1ZToga2V5VmFsaWRhdG9yLl9wYXJzZShuZXcgUGFyc2VJbnB1dExhenlQYXRoKGN0eCwgdmFsdWUsIGN0eC5wYXRoLCBrZXkpKSxcbiAgICAgICAgICAgICAgICBhbHdheXNTZXQ6IGtleSBpbiBjdHguZGF0YSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLl9kZWYuY2F0Y2hhbGwgaW5zdGFuY2VvZiBab2ROZXZlcikge1xuICAgICAgICAgICAgY29uc3QgdW5rbm93bktleXMgPSB0aGlzLl9kZWYudW5rbm93bktleXM7XG4gICAgICAgICAgICBpZiAodW5rbm93bktleXMgPT09IFwicGFzc3Rocm91Z2hcIikge1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3Qga2V5IG9mIGV4dHJhS2V5cykge1xuICAgICAgICAgICAgICAgICAgICBwYWlycy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleTogeyBzdGF0dXM6IFwidmFsaWRcIiwgdmFsdWU6IGtleSB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHsgc3RhdHVzOiBcInZhbGlkXCIsIHZhbHVlOiBjdHguZGF0YVtrZXldIH0sXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHVua25vd25LZXlzID09PSBcInN0cmljdFwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKGV4dHJhS2V5cy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLnVucmVjb2duaXplZF9rZXlzLFxuICAgICAgICAgICAgICAgICAgICAgICAga2V5czogZXh0cmFLZXlzLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodW5rbm93bktleXMgPT09IFwic3RyaXBcIikge1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnRlcm5hbCBab2RPYmplY3QgZXJyb3I6IGludmFsaWQgdW5rbm93bktleXMgdmFsdWUuYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAvLyBydW4gY2F0Y2hhbGwgdmFsaWRhdGlvblxuICAgICAgICAgICAgY29uc3QgY2F0Y2hhbGwgPSB0aGlzLl9kZWYuY2F0Y2hhbGw7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBvZiBleHRyYUtleXMpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB2YWx1ZSA9IGN0eC5kYXRhW2tleV07XG4gICAgICAgICAgICAgICAgcGFpcnMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgIGtleTogeyBzdGF0dXM6IFwidmFsaWRcIiwgdmFsdWU6IGtleSB9LFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogY2F0Y2hhbGwuX3BhcnNlKG5ldyBQYXJzZUlucHV0TGF6eVBhdGgoY3R4LCB2YWx1ZSwgY3R4LnBhdGgsIGtleSkgLy8sIGN0eC5jaGlsZChrZXkpLCB2YWx1ZSwgZ2V0UGFyc2VkVHlwZSh2YWx1ZSlcbiAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgYWx3YXlzU2V0OiBrZXkgaW4gY3R4LmRhdGEsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGN0eC5jb21tb24uYXN5bmMpIHtcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKVxuICAgICAgICAgICAgICAgIC50aGVuKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBzeW5jUGFpcnMgPSBbXTtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHBhaXIgb2YgcGFpcnMpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qga2V5ID0gYXdhaXQgcGFpci5rZXk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gYXdhaXQgcGFpci52YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgc3luY1BhaXJzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgICAga2V5LFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBhbHdheXNTZXQ6IHBhaXIuYWx3YXlzU2V0LFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHN5bmNQYWlycztcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLnRoZW4oKHN5bmNQYWlycykgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiBQYXJzZVN0YXR1cy5tZXJnZU9iamVjdFN5bmMoc3RhdHVzLCBzeW5jUGFpcnMpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gUGFyc2VTdGF0dXMubWVyZ2VPYmplY3RTeW5jKHN0YXR1cywgcGFpcnMpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldCBzaGFwZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi5zaGFwZSgpO1xuICAgIH1cbiAgICBzdHJpY3QobWVzc2FnZSkge1xuICAgICAgICBlcnJvclV0aWwuZXJyVG9PYmo7XG4gICAgICAgIHJldHVybiBuZXcgWm9kT2JqZWN0KHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIHVua25vd25LZXlzOiBcInN0cmljdFwiLFxuICAgICAgICAgICAgLi4uKG1lc3NhZ2UgIT09IHVuZGVmaW5lZFxuICAgICAgICAgICAgICAgID8ge1xuICAgICAgICAgICAgICAgICAgICBlcnJvck1hcDogKGlzc3VlLCBjdHgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGRlZmF1bHRFcnJvciA9IHRoaXMuX2RlZi5lcnJvck1hcD8uKGlzc3VlLCBjdHgpLm1lc3NhZ2UgPz8gY3R4LmRlZmF1bHRFcnJvcjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc3N1ZS5jb2RlID09PSBcInVucmVjb2duaXplZF9rZXlzXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogZXJyb3JVdGlsLmVyclRvT2JqKG1lc3NhZ2UpLm1lc3NhZ2UgPz8gZGVmYXVsdEVycm9yLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGRlZmF1bHRFcnJvcixcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIDoge30pLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgc3RyaXAoKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kT2JqZWN0KHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIHVua25vd25LZXlzOiBcInN0cmlwXCIsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBwYXNzdGhyb3VnaCgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBab2RPYmplY3Qoe1xuICAgICAgICAgICAgLi4udGhpcy5fZGVmLFxuICAgICAgICAgICAgdW5rbm93bktleXM6IFwicGFzc3Rocm91Z2hcIixcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8vIGNvbnN0IEF1Z21lbnRGYWN0b3J5ID1cbiAgICAvLyAgIDxEZWYgZXh0ZW5kcyBab2RPYmplY3REZWY+KGRlZjogRGVmKSA9PlxuICAgIC8vICAgPEF1Z21lbnRhdGlvbiBleHRlbmRzIFpvZFJhd1NoYXBlPihcbiAgICAvLyAgICAgYXVnbWVudGF0aW9uOiBBdWdtZW50YXRpb25cbiAgICAvLyAgICk6IFpvZE9iamVjdDxcbiAgICAvLyAgICAgZXh0ZW5kU2hhcGU8UmV0dXJuVHlwZTxEZWZbXCJzaGFwZVwiXT4sIEF1Z21lbnRhdGlvbj4sXG4gICAgLy8gICAgIERlZltcInVua25vd25LZXlzXCJdLFxuICAgIC8vICAgICBEZWZbXCJjYXRjaGFsbFwiXVxuICAgIC8vICAgPiA9PiB7XG4gICAgLy8gICAgIHJldHVybiBuZXcgWm9kT2JqZWN0KHtcbiAgICAvLyAgICAgICAuLi5kZWYsXG4gICAgLy8gICAgICAgc2hhcGU6ICgpID0+ICh7XG4gICAgLy8gICAgICAgICAuLi5kZWYuc2hhcGUoKSxcbiAgICAvLyAgICAgICAgIC4uLmF1Z21lbnRhdGlvbixcbiAgICAvLyAgICAgICB9KSxcbiAgICAvLyAgICAgfSkgYXMgYW55O1xuICAgIC8vICAgfTtcbiAgICBleHRlbmQoYXVnbWVudGF0aW9uKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kT2JqZWN0KHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIHNoYXBlOiAoKSA9PiAoe1xuICAgICAgICAgICAgICAgIC4uLnRoaXMuX2RlZi5zaGFwZSgpLFxuICAgICAgICAgICAgICAgIC4uLmF1Z21lbnRhdGlvbixcbiAgICAgICAgICAgIH0pLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUHJpb3IgdG8gem9kQDEuMC4xMiB0aGVyZSB3YXMgYSBidWcgaW4gdGhlXG4gICAgICogaW5mZXJyZWQgdHlwZSBvZiBtZXJnZWQgb2JqZWN0cy4gUGxlYXNlXG4gICAgICogdXBncmFkZSBpZiB5b3UgYXJlIGV4cGVyaWVuY2luZyBpc3N1ZXMuXG4gICAgICovXG4gICAgbWVyZ2UobWVyZ2luZykge1xuICAgICAgICBjb25zdCBtZXJnZWQgPSBuZXcgWm9kT2JqZWN0KHtcbiAgICAgICAgICAgIHVua25vd25LZXlzOiBtZXJnaW5nLl9kZWYudW5rbm93bktleXMsXG4gICAgICAgICAgICBjYXRjaGFsbDogbWVyZ2luZy5fZGVmLmNhdGNoYWxsLFxuICAgICAgICAgICAgc2hhcGU6ICgpID0+ICh7XG4gICAgICAgICAgICAgICAgLi4udGhpcy5fZGVmLnNoYXBlKCksXG4gICAgICAgICAgICAgICAgLi4ubWVyZ2luZy5fZGVmLnNoYXBlKCksXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kT2JqZWN0LFxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIG1lcmdlZDtcbiAgICB9XG4gICAgLy8gbWVyZ2U8XG4gICAgLy8gICBJbmNvbWluZyBleHRlbmRzIEFueVpvZE9iamVjdCxcbiAgICAvLyAgIEF1Z21lbnRhdGlvbiBleHRlbmRzIEluY29taW5nW1wic2hhcGVcIl0sXG4gICAgLy8gICBOZXdPdXRwdXQgZXh0ZW5kcyB7XG4gICAgLy8gICAgIFtrIGluIGtleW9mIEF1Z21lbnRhdGlvbiB8IGtleW9mIE91dHB1dF06IGsgZXh0ZW5kcyBrZXlvZiBBdWdtZW50YXRpb25cbiAgICAvLyAgICAgICA/IEF1Z21lbnRhdGlvbltrXVtcIl9vdXRwdXRcIl1cbiAgICAvLyAgICAgICA6IGsgZXh0ZW5kcyBrZXlvZiBPdXRwdXRcbiAgICAvLyAgICAgICA/IE91dHB1dFtrXVxuICAgIC8vICAgICAgIDogbmV2ZXI7XG4gICAgLy8gICB9LFxuICAgIC8vICAgTmV3SW5wdXQgZXh0ZW5kcyB7XG4gICAgLy8gICAgIFtrIGluIGtleW9mIEF1Z21lbnRhdGlvbiB8IGtleW9mIElucHV0XTogayBleHRlbmRzIGtleW9mIEF1Z21lbnRhdGlvblxuICAgIC8vICAgICAgID8gQXVnbWVudGF0aW9uW2tdW1wiX2lucHV0XCJdXG4gICAgLy8gICAgICAgOiBrIGV4dGVuZHMga2V5b2YgSW5wdXRcbiAgICAvLyAgICAgICA/IElucHV0W2tdXG4gICAgLy8gICAgICAgOiBuZXZlcjtcbiAgICAvLyAgIH1cbiAgICAvLyA+KFxuICAgIC8vICAgbWVyZ2luZzogSW5jb21pbmdcbiAgICAvLyApOiBab2RPYmplY3Q8XG4gICAgLy8gICBleHRlbmRTaGFwZTxULCBSZXR1cm5UeXBlPEluY29taW5nW1wiX2RlZlwiXVtcInNoYXBlXCJdPj4sXG4gICAgLy8gICBJbmNvbWluZ1tcIl9kZWZcIl1bXCJ1bmtub3duS2V5c1wiXSxcbiAgICAvLyAgIEluY29taW5nW1wiX2RlZlwiXVtcImNhdGNoYWxsXCJdLFxuICAgIC8vICAgTmV3T3V0cHV0LFxuICAgIC8vICAgTmV3SW5wdXRcbiAgICAvLyA+IHtcbiAgICAvLyAgIGNvbnN0IG1lcmdlZDogYW55ID0gbmV3IFpvZE9iamVjdCh7XG4gICAgLy8gICAgIHVua25vd25LZXlzOiBtZXJnaW5nLl9kZWYudW5rbm93bktleXMsXG4gICAgLy8gICAgIGNhdGNoYWxsOiBtZXJnaW5nLl9kZWYuY2F0Y2hhbGwsXG4gICAgLy8gICAgIHNoYXBlOiAoKSA9PlxuICAgIC8vICAgICAgIG9iamVjdFV0aWwubWVyZ2VTaGFwZXModGhpcy5fZGVmLnNoYXBlKCksIG1lcmdpbmcuX2RlZi5zaGFwZSgpKSxcbiAgICAvLyAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RPYmplY3QsXG4gICAgLy8gICB9KSBhcyBhbnk7XG4gICAgLy8gICByZXR1cm4gbWVyZ2VkO1xuICAgIC8vIH1cbiAgICBzZXRLZXkoa2V5LCBzY2hlbWEpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYXVnbWVudCh7IFtrZXldOiBzY2hlbWEgfSk7XG4gICAgfVxuICAgIC8vIG1lcmdlPEluY29taW5nIGV4dGVuZHMgQW55Wm9kT2JqZWN0PihcbiAgICAvLyAgIG1lcmdpbmc6IEluY29taW5nXG4gICAgLy8gKTogLy9ab2RPYmplY3Q8VCAmIEluY29taW5nW1wiX3NoYXBlXCJdLCBVbmtub3duS2V5cywgQ2F0Y2hhbGw+ID0gKG1lcmdpbmcpID0+IHtcbiAgICAvLyBab2RPYmplY3Q8XG4gICAgLy8gICBleHRlbmRTaGFwZTxULCBSZXR1cm5UeXBlPEluY29taW5nW1wiX2RlZlwiXVtcInNoYXBlXCJdPj4sXG4gICAgLy8gICBJbmNvbWluZ1tcIl9kZWZcIl1bXCJ1bmtub3duS2V5c1wiXSxcbiAgICAvLyAgIEluY29taW5nW1wiX2RlZlwiXVtcImNhdGNoYWxsXCJdXG4gICAgLy8gPiB7XG4gICAgLy8gICAvLyBjb25zdCBtZXJnZWRTaGFwZSA9IG9iamVjdFV0aWwubWVyZ2VTaGFwZXMoXG4gICAgLy8gICAvLyAgIHRoaXMuX2RlZi5zaGFwZSgpLFxuICAgIC8vICAgLy8gICBtZXJnaW5nLl9kZWYuc2hhcGUoKVxuICAgIC8vICAgLy8gKTtcbiAgICAvLyAgIGNvbnN0IG1lcmdlZDogYW55ID0gbmV3IFpvZE9iamVjdCh7XG4gICAgLy8gICAgIHVua25vd25LZXlzOiBtZXJnaW5nLl9kZWYudW5rbm93bktleXMsXG4gICAgLy8gICAgIGNhdGNoYWxsOiBtZXJnaW5nLl9kZWYuY2F0Y2hhbGwsXG4gICAgLy8gICAgIHNoYXBlOiAoKSA9PlxuICAgIC8vICAgICAgIG9iamVjdFV0aWwubWVyZ2VTaGFwZXModGhpcy5fZGVmLnNoYXBlKCksIG1lcmdpbmcuX2RlZi5zaGFwZSgpKSxcbiAgICAvLyAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RPYmplY3QsXG4gICAgLy8gICB9KSBhcyBhbnk7XG4gICAgLy8gICByZXR1cm4gbWVyZ2VkO1xuICAgIC8vIH1cbiAgICBjYXRjaGFsbChpbmRleCkge1xuICAgICAgICByZXR1cm4gbmV3IFpvZE9iamVjdCh7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICBjYXRjaGFsbDogaW5kZXgsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBwaWNrKG1hc2spIHtcbiAgICAgICAgY29uc3Qgc2hhcGUgPSB7fTtcbiAgICAgICAgZm9yIChjb25zdCBrZXkgb2YgdXRpbC5vYmplY3RLZXlzKG1hc2spKSB7XG4gICAgICAgICAgICBpZiAobWFza1trZXldICYmIHRoaXMuc2hhcGVba2V5XSkge1xuICAgICAgICAgICAgICAgIHNoYXBlW2tleV0gPSB0aGlzLnNoYXBlW2tleV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBab2RPYmplY3Qoe1xuICAgICAgICAgICAgLi4udGhpcy5fZGVmLFxuICAgICAgICAgICAgc2hhcGU6ICgpID0+IHNoYXBlLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgb21pdChtYXNrKSB7XG4gICAgICAgIGNvbnN0IHNoYXBlID0ge307XG4gICAgICAgIGZvciAoY29uc3Qga2V5IG9mIHV0aWwub2JqZWN0S2V5cyh0aGlzLnNoYXBlKSkge1xuICAgICAgICAgICAgaWYgKCFtYXNrW2tleV0pIHtcbiAgICAgICAgICAgICAgICBzaGFwZVtrZXldID0gdGhpcy5zaGFwZVtrZXldO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgWm9kT2JqZWN0KHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIHNoYXBlOiAoKSA9PiBzaGFwZSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBkZXByZWNhdGVkXG4gICAgICovXG4gICAgZGVlcFBhcnRpYWwoKSB7XG4gICAgICAgIHJldHVybiBkZWVwUGFydGlhbGlmeSh0aGlzKTtcbiAgICB9XG4gICAgcGFydGlhbChtYXNrKSB7XG4gICAgICAgIGNvbnN0IG5ld1NoYXBlID0ge307XG4gICAgICAgIGZvciAoY29uc3Qga2V5IG9mIHV0aWwub2JqZWN0S2V5cyh0aGlzLnNoYXBlKSkge1xuICAgICAgICAgICAgY29uc3QgZmllbGRTY2hlbWEgPSB0aGlzLnNoYXBlW2tleV07XG4gICAgICAgICAgICBpZiAobWFzayAmJiAhbWFza1trZXldKSB7XG4gICAgICAgICAgICAgICAgbmV3U2hhcGVba2V5XSA9IGZpZWxkU2NoZW1hO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgbmV3U2hhcGVba2V5XSA9IGZpZWxkU2NoZW1hLm9wdGlvbmFsKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBab2RPYmplY3Qoe1xuICAgICAgICAgICAgLi4udGhpcy5fZGVmLFxuICAgICAgICAgICAgc2hhcGU6ICgpID0+IG5ld1NoYXBlLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgcmVxdWlyZWQobWFzaykge1xuICAgICAgICBjb25zdCBuZXdTaGFwZSA9IHt9O1xuICAgICAgICBmb3IgKGNvbnN0IGtleSBvZiB1dGlsLm9iamVjdEtleXModGhpcy5zaGFwZSkpIHtcbiAgICAgICAgICAgIGlmIChtYXNrICYmICFtYXNrW2tleV0pIHtcbiAgICAgICAgICAgICAgICBuZXdTaGFwZVtrZXldID0gdGhpcy5zaGFwZVtrZXldO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZmllbGRTY2hlbWEgPSB0aGlzLnNoYXBlW2tleV07XG4gICAgICAgICAgICAgICAgbGV0IG5ld0ZpZWxkID0gZmllbGRTY2hlbWE7XG4gICAgICAgICAgICAgICAgd2hpbGUgKG5ld0ZpZWxkIGluc3RhbmNlb2YgWm9kT3B0aW9uYWwpIHtcbiAgICAgICAgICAgICAgICAgICAgbmV3RmllbGQgPSBuZXdGaWVsZC5fZGVmLmlubmVyVHlwZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgbmV3U2hhcGVba2V5XSA9IG5ld0ZpZWxkO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgWm9kT2JqZWN0KHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIHNoYXBlOiAoKSA9PiBuZXdTaGFwZSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGtleW9mKCkge1xuICAgICAgICByZXR1cm4gY3JlYXRlWm9kRW51bSh1dGlsLm9iamVjdEtleXModGhpcy5zaGFwZSkpO1xuICAgIH1cbn1cblpvZE9iamVjdC5jcmVhdGUgPSAoc2hhcGUsIHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kT2JqZWN0KHtcbiAgICAgICAgc2hhcGU6ICgpID0+IHNoYXBlLFxuICAgICAgICB1bmtub3duS2V5czogXCJzdHJpcFwiLFxuICAgICAgICBjYXRjaGFsbDogWm9kTmV2ZXIuY3JlYXRlKCksXG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kT2JqZWN0LFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuWm9kT2JqZWN0LnN0cmljdENyZWF0ZSA9IChzaGFwZSwgcGFyYW1zKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBab2RPYmplY3Qoe1xuICAgICAgICBzaGFwZTogKCkgPT4gc2hhcGUsXG4gICAgICAgIHVua25vd25LZXlzOiBcInN0cmljdFwiLFxuICAgICAgICBjYXRjaGFsbDogWm9kTmV2ZXIuY3JlYXRlKCksXG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kT2JqZWN0LFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuWm9kT2JqZWN0LmxhenljcmVhdGUgPSAoc2hhcGUsIHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kT2JqZWN0KHtcbiAgICAgICAgc2hhcGUsXG4gICAgICAgIHVua25vd25LZXlzOiBcInN0cmlwXCIsXG4gICAgICAgIGNhdGNoYWxsOiBab2ROZXZlci5jcmVhdGUoKSxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RPYmplY3QsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kVW5pb24gZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgeyBjdHggfSA9IHRoaXMuX3Byb2Nlc3NJbnB1dFBhcmFtcyhpbnB1dCk7XG4gICAgICAgIGNvbnN0IG9wdGlvbnMgPSB0aGlzLl9kZWYub3B0aW9ucztcbiAgICAgICAgZnVuY3Rpb24gaGFuZGxlUmVzdWx0cyhyZXN1bHRzKSB7XG4gICAgICAgICAgICAvLyByZXR1cm4gZmlyc3QgaXNzdWUtZnJlZSB2YWxpZGF0aW9uIGlmIGl0IGV4aXN0c1xuICAgICAgICAgICAgZm9yIChjb25zdCByZXN1bHQgb2YgcmVzdWx0cykge1xuICAgICAgICAgICAgICAgIGlmIChyZXN1bHQucmVzdWx0LnN0YXR1cyA9PT0gXCJ2YWxpZFwiKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQucmVzdWx0O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvciAoY29uc3QgcmVzdWx0IG9mIHJlc3VsdHMpIHtcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0LnJlc3VsdC5zdGF0dXMgPT09IFwiZGlydHlcIikge1xuICAgICAgICAgICAgICAgICAgICAvLyBhZGQgaXNzdWVzIGZyb20gZGlydHkgb3B0aW9uXG4gICAgICAgICAgICAgICAgICAgIGN0eC5jb21tb24uaXNzdWVzLnB1c2goLi4ucmVzdWx0LmN0eC5jb21tb24uaXNzdWVzKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdC5yZXN1bHQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gcmV0dXJuIGludmFsaWRcbiAgICAgICAgICAgIGNvbnN0IHVuaW9uRXJyb3JzID0gcmVzdWx0cy5tYXAoKHJlc3VsdCkgPT4gbmV3IFpvZEVycm9yKHJlc3VsdC5jdHguY29tbW9uLmlzc3VlcykpO1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdW5pb24sXG4gICAgICAgICAgICAgICAgdW5pb25FcnJvcnMsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjdHguY29tbW9uLmFzeW5jKSB7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwob3B0aW9ucy5tYXAoYXN5bmMgKG9wdGlvbikgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGNoaWxkQ3R4ID0ge1xuICAgICAgICAgICAgICAgICAgICAuLi5jdHgsXG4gICAgICAgICAgICAgICAgICAgIGNvbW1vbjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3R4LmNvbW1vbixcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzc3VlczogW10sXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHBhcmVudDogbnVsbCxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdDogYXdhaXQgb3B0aW9uLl9wYXJzZUFzeW5jKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IGN0eC5kYXRhLFxuICAgICAgICAgICAgICAgICAgICAgICAgcGF0aDogY3R4LnBhdGgsXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnQ6IGNoaWxkQ3R4LFxuICAgICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICAgICAgY3R4OiBjaGlsZEN0eCxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSkpLnRoZW4oaGFuZGxlUmVzdWx0cyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBsZXQgZGlydHkgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICBjb25zdCBpc3N1ZXMgPSBbXTtcbiAgICAgICAgICAgIGZvciAoY29uc3Qgb3B0aW9uIG9mIG9wdGlvbnMpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBjaGlsZEN0eCA9IHtcbiAgICAgICAgICAgICAgICAgICAgLi4uY3R4LFxuICAgICAgICAgICAgICAgICAgICBjb21tb246IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN0eC5jb21tb24sXG4gICAgICAgICAgICAgICAgICAgICAgICBpc3N1ZXM6IFtdLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBwYXJlbnQ6IG51bGwsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSBvcHRpb24uX3BhcnNlU3luYyh7XG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IGN0eC5kYXRhLFxuICAgICAgICAgICAgICAgICAgICBwYXRoOiBjdHgucGF0aCxcbiAgICAgICAgICAgICAgICAgICAgcGFyZW50OiBjaGlsZEN0eCxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0LnN0YXR1cyA9PT0gXCJ2YWxpZFwiKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHJlc3VsdC5zdGF0dXMgPT09IFwiZGlydHlcIiAmJiAhZGlydHkpIHtcbiAgICAgICAgICAgICAgICAgICAgZGlydHkgPSB7IHJlc3VsdCwgY3R4OiBjaGlsZEN0eCB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoY2hpbGRDdHguY29tbW9uLmlzc3Vlcy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgaXNzdWVzLnB1c2goY2hpbGRDdHguY29tbW9uLmlzc3Vlcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGRpcnR5KSB7XG4gICAgICAgICAgICAgICAgY3R4LmNvbW1vbi5pc3N1ZXMucHVzaCguLi5kaXJ0eS5jdHguY29tbW9uLmlzc3Vlcyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGRpcnR5LnJlc3VsdDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHVuaW9uRXJyb3JzID0gaXNzdWVzLm1hcCgoaXNzdWVzKSA9PiBuZXcgWm9kRXJyb3IoaXNzdWVzKSk7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF91bmlvbixcbiAgICAgICAgICAgICAgICB1bmlvbkVycm9ycyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0IG9wdGlvbnMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYub3B0aW9ucztcbiAgICB9XG59XG5ab2RVbmlvbi5jcmVhdGUgPSAodHlwZXMsIHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kVW5pb24oe1xuICAgICAgICBvcHRpb25zOiB0eXBlcyxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RVbmlvbixcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuLy8vLy8vLy8vLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vLy8vLy8vLy9cbi8vLy8vLy8vLy8gICAgICBab2REaXNjcmltaW5hdGVkVW5pb24gICAgICAvLy8vLy8vLy8vXG4vLy8vLy8vLy8vICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8vLy8vLy8vL1xuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5jb25zdCBnZXREaXNjcmltaW5hdG9yID0gKHR5cGUpID0+IHtcbiAgICBpZiAodHlwZSBpbnN0YW5jZW9mIFpvZExhenkpIHtcbiAgICAgICAgcmV0dXJuIGdldERpc2NyaW1pbmF0b3IodHlwZS5zY2hlbWEpO1xuICAgIH1cbiAgICBlbHNlIGlmICh0eXBlIGluc3RhbmNlb2YgWm9kRWZmZWN0cykge1xuICAgICAgICByZXR1cm4gZ2V0RGlzY3JpbWluYXRvcih0eXBlLmlubmVyVHlwZSgpKTtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZSBpbnN0YW5jZW9mIFpvZExpdGVyYWwpIHtcbiAgICAgICAgcmV0dXJuIFt0eXBlLnZhbHVlXTtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZSBpbnN0YW5jZW9mIFpvZEVudW0pIHtcbiAgICAgICAgcmV0dXJuIHR5cGUub3B0aW9ucztcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZSBpbnN0YW5jZW9mIFpvZE5hdGl2ZUVudW0pIHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGJhbi9iYW5cbiAgICAgICAgcmV0dXJuIHV0aWwub2JqZWN0VmFsdWVzKHR5cGUuZW51bSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGUgaW5zdGFuY2VvZiBab2REZWZhdWx0KSB7XG4gICAgICAgIHJldHVybiBnZXREaXNjcmltaW5hdG9yKHR5cGUuX2RlZi5pbm5lclR5cGUpO1xuICAgIH1cbiAgICBlbHNlIGlmICh0eXBlIGluc3RhbmNlb2YgWm9kVW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiBbdW5kZWZpbmVkXTtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZSBpbnN0YW5jZW9mIFpvZE51bGwpIHtcbiAgICAgICAgcmV0dXJuIFtudWxsXTtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZSBpbnN0YW5jZW9mIFpvZE9wdGlvbmFsKSB7XG4gICAgICAgIHJldHVybiBbdW5kZWZpbmVkLCAuLi5nZXREaXNjcmltaW5hdG9yKHR5cGUudW53cmFwKCkpXTtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZSBpbnN0YW5jZW9mIFpvZE51bGxhYmxlKSB7XG4gICAgICAgIHJldHVybiBbbnVsbCwgLi4uZ2V0RGlzY3JpbWluYXRvcih0eXBlLnVud3JhcCgpKV07XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGUgaW5zdGFuY2VvZiBab2RCcmFuZGVkKSB7XG4gICAgICAgIHJldHVybiBnZXREaXNjcmltaW5hdG9yKHR5cGUudW53cmFwKCkpO1xuICAgIH1cbiAgICBlbHNlIGlmICh0eXBlIGluc3RhbmNlb2YgWm9kUmVhZG9ubHkpIHtcbiAgICAgICAgcmV0dXJuIGdldERpc2NyaW1pbmF0b3IodHlwZS51bndyYXAoKSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGUgaW5zdGFuY2VvZiBab2RDYXRjaCkge1xuICAgICAgICByZXR1cm4gZ2V0RGlzY3JpbWluYXRvcih0eXBlLl9kZWYuaW5uZXJUeXBlKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiBbXTtcbiAgICB9XG59O1xuZXhwb3J0IGNsYXNzIFpvZERpc2NyaW1pbmF0ZWRVbmlvbiBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBjb25zdCB7IGN0eCB9ID0gdGhpcy5fcHJvY2Vzc0lucHV0UGFyYW1zKGlucHV0KTtcbiAgICAgICAgaWYgKGN0eC5wYXJzZWRUeXBlICE9PSBab2RQYXJzZWRUeXBlLm9iamVjdCkge1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogWm9kUGFyc2VkVHlwZS5vYmplY3QsXG4gICAgICAgICAgICAgICAgcmVjZWl2ZWQ6IGN0eC5wYXJzZWRUeXBlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBkaXNjcmltaW5hdG9yID0gdGhpcy5kaXNjcmltaW5hdG9yO1xuICAgICAgICBjb25zdCBkaXNjcmltaW5hdG9yVmFsdWUgPSBjdHguZGF0YVtkaXNjcmltaW5hdG9yXTtcbiAgICAgICAgY29uc3Qgb3B0aW9uID0gdGhpcy5vcHRpb25zTWFwLmdldChkaXNjcmltaW5hdG9yVmFsdWUpO1xuICAgICAgICBpZiAoIW9wdGlvbikge1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdW5pb25fZGlzY3JpbWluYXRvcixcbiAgICAgICAgICAgICAgICBvcHRpb25zOiBBcnJheS5mcm9tKHRoaXMub3B0aW9uc01hcC5rZXlzKCkpLFxuICAgICAgICAgICAgICAgIHBhdGg6IFtkaXNjcmltaW5hdG9yXSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGN0eC5jb21tb24uYXN5bmMpIHtcbiAgICAgICAgICAgIHJldHVybiBvcHRpb24uX3BhcnNlQXN5bmMoe1xuICAgICAgICAgICAgICAgIGRhdGE6IGN0eC5kYXRhLFxuICAgICAgICAgICAgICAgIHBhdGg6IGN0eC5wYXRoLFxuICAgICAgICAgICAgICAgIHBhcmVudDogY3R4LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gb3B0aW9uLl9wYXJzZVN5bmMoe1xuICAgICAgICAgICAgICAgIGRhdGE6IGN0eC5kYXRhLFxuICAgICAgICAgICAgICAgIHBhdGg6IGN0eC5wYXRoLFxuICAgICAgICAgICAgICAgIHBhcmVudDogY3R4LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0IGRpc2NyaW1pbmF0b3IoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYuZGlzY3JpbWluYXRvcjtcbiAgICB9XG4gICAgZ2V0IG9wdGlvbnMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYub3B0aW9ucztcbiAgICB9XG4gICAgZ2V0IG9wdGlvbnNNYXAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYub3B0aW9uc01hcDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIGNvbnN0cnVjdG9yIG9mIHRoZSBkaXNjcmltaW5hdGVkIHVuaW9uIHNjaGVtYS4gSXRzIGJlaGF2aW91ciBpcyB2ZXJ5IHNpbWlsYXIgdG8gdGhhdCBvZiB0aGUgbm9ybWFsIHoudW5pb24oKSBjb25zdHJ1Y3Rvci5cbiAgICAgKiBIb3dldmVyLCBpdCBvbmx5IGFsbG93cyBhIHVuaW9uIG9mIG9iamVjdHMsIGFsbCBvZiB3aGljaCBuZWVkIHRvIHNoYXJlIGEgZGlzY3JpbWluYXRvciBwcm9wZXJ0eS4gVGhpcyBwcm9wZXJ0eSBtdXN0XG4gICAgICogaGF2ZSBhIGRpZmZlcmVudCB2YWx1ZSBmb3IgZWFjaCBvYmplY3QgaW4gdGhlIHVuaW9uLlxuICAgICAqIEBwYXJhbSBkaXNjcmltaW5hdG9yIHRoZSBuYW1lIG9mIHRoZSBkaXNjcmltaW5hdG9yIHByb3BlcnR5XG4gICAgICogQHBhcmFtIHR5cGVzIGFuIGFycmF5IG9mIG9iamVjdCBzY2hlbWFzXG4gICAgICogQHBhcmFtIHBhcmFtc1xuICAgICAqL1xuICAgIHN0YXRpYyBjcmVhdGUoZGlzY3JpbWluYXRvciwgb3B0aW9ucywgcGFyYW1zKSB7XG4gICAgICAgIC8vIEdldCBhbGwgdGhlIHZhbGlkIGRpc2NyaW1pbmF0b3IgdmFsdWVzXG4gICAgICAgIGNvbnN0IG9wdGlvbnNNYXAgPSBuZXcgTWFwKCk7XG4gICAgICAgIC8vIHRyeSB7XG4gICAgICAgIGZvciAoY29uc3QgdHlwZSBvZiBvcHRpb25zKSB7XG4gICAgICAgICAgICBjb25zdCBkaXNjcmltaW5hdG9yVmFsdWVzID0gZ2V0RGlzY3JpbWluYXRvcih0eXBlLnNoYXBlW2Rpc2NyaW1pbmF0b3JdKTtcbiAgICAgICAgICAgIGlmICghZGlzY3JpbWluYXRvclZhbHVlcy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEEgZGlzY3JpbWluYXRvciB2YWx1ZSBmb3Iga2V5IFxcYCR7ZGlzY3JpbWluYXRvcn1cXGAgY291bGQgbm90IGJlIGV4dHJhY3RlZCBmcm9tIGFsbCBzY2hlbWEgb3B0aW9uc2ApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yIChjb25zdCB2YWx1ZSBvZiBkaXNjcmltaW5hdG9yVmFsdWVzKSB7XG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbnNNYXAuaGFzKHZhbHVlKSkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYERpc2NyaW1pbmF0b3IgcHJvcGVydHkgJHtTdHJpbmcoZGlzY3JpbWluYXRvcil9IGhhcyBkdXBsaWNhdGUgdmFsdWUgJHtTdHJpbmcodmFsdWUpfWApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBvcHRpb25zTWFwLnNldCh2YWx1ZSwgdHlwZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBab2REaXNjcmltaW5hdGVkVW5pb24oe1xuICAgICAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2REaXNjcmltaW5hdGVkVW5pb24sXG4gICAgICAgICAgICBkaXNjcmltaW5hdG9yLFxuICAgICAgICAgICAgb3B0aW9ucyxcbiAgICAgICAgICAgIG9wdGlvbnNNYXAsXG4gICAgICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgICAgIH0pO1xuICAgIH1cbn1cbmZ1bmN0aW9uIG1lcmdlVmFsdWVzKGEsIGIpIHtcbiAgICBjb25zdCBhVHlwZSA9IGdldFBhcnNlZFR5cGUoYSk7XG4gICAgY29uc3QgYlR5cGUgPSBnZXRQYXJzZWRUeXBlKGIpO1xuICAgIGlmIChhID09PSBiKSB7XG4gICAgICAgIHJldHVybiB7IHZhbGlkOiB0cnVlLCBkYXRhOiBhIH07XG4gICAgfVxuICAgIGVsc2UgaWYgKGFUeXBlID09PSBab2RQYXJzZWRUeXBlLm9iamVjdCAmJiBiVHlwZSA9PT0gWm9kUGFyc2VkVHlwZS5vYmplY3QpIHtcbiAgICAgICAgY29uc3QgYktleXMgPSB1dGlsLm9iamVjdEtleXMoYik7XG4gICAgICAgIGNvbnN0IHNoYXJlZEtleXMgPSB1dGlsLm9iamVjdEtleXMoYSkuZmlsdGVyKChrZXkpID0+IGJLZXlzLmluZGV4T2Yoa2V5KSAhPT0gLTEpO1xuICAgICAgICBjb25zdCBuZXdPYmogPSB7IC4uLmEsIC4uLmIgfTtcbiAgICAgICAgZm9yIChjb25zdCBrZXkgb2Ygc2hhcmVkS2V5cykge1xuICAgICAgICAgICAgY29uc3Qgc2hhcmVkVmFsdWUgPSBtZXJnZVZhbHVlcyhhW2tleV0sIGJba2V5XSk7XG4gICAgICAgICAgICBpZiAoIXNoYXJlZFZhbHVlLnZhbGlkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgdmFsaWQ6IGZhbHNlIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBuZXdPYmpba2V5XSA9IHNoYXJlZFZhbHVlLmRhdGE7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHsgdmFsaWQ6IHRydWUsIGRhdGE6IG5ld09iaiB9O1xuICAgIH1cbiAgICBlbHNlIGlmIChhVHlwZSA9PT0gWm9kUGFyc2VkVHlwZS5hcnJheSAmJiBiVHlwZSA9PT0gWm9kUGFyc2VkVHlwZS5hcnJheSkge1xuICAgICAgICBpZiAoYS5sZW5ndGggIT09IGIubGVuZ3RoKSB7XG4gICAgICAgICAgICByZXR1cm4geyB2YWxpZDogZmFsc2UgfTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBuZXdBcnJheSA9IFtdO1xuICAgICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgYS5sZW5ndGg7IGluZGV4KyspIHtcbiAgICAgICAgICAgIGNvbnN0IGl0ZW1BID0gYVtpbmRleF07XG4gICAgICAgICAgICBjb25zdCBpdGVtQiA9IGJbaW5kZXhdO1xuICAgICAgICAgICAgY29uc3Qgc2hhcmVkVmFsdWUgPSBtZXJnZVZhbHVlcyhpdGVtQSwgaXRlbUIpO1xuICAgICAgICAgICAgaWYgKCFzaGFyZWRWYWx1ZS52YWxpZCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB7IHZhbGlkOiBmYWxzZSB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbmV3QXJyYXkucHVzaChzaGFyZWRWYWx1ZS5kYXRhKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4geyB2YWxpZDogdHJ1ZSwgZGF0YTogbmV3QXJyYXkgfTtcbiAgICB9XG4gICAgZWxzZSBpZiAoYVR5cGUgPT09IFpvZFBhcnNlZFR5cGUuZGF0ZSAmJiBiVHlwZSA9PT0gWm9kUGFyc2VkVHlwZS5kYXRlICYmICthID09PSArYikge1xuICAgICAgICByZXR1cm4geyB2YWxpZDogdHJ1ZSwgZGF0YTogYSB9O1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHsgdmFsaWQ6IGZhbHNlIH07XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIFpvZEludGVyc2VjdGlvbiBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBjb25zdCB7IHN0YXR1cywgY3R4IH0gPSB0aGlzLl9wcm9jZXNzSW5wdXRQYXJhbXMoaW5wdXQpO1xuICAgICAgICBjb25zdCBoYW5kbGVQYXJzZWQgPSAocGFyc2VkTGVmdCwgcGFyc2VkUmlnaHQpID0+IHtcbiAgICAgICAgICAgIGlmIChpc0Fib3J0ZWQocGFyc2VkTGVmdCkgfHwgaXNBYm9ydGVkKHBhcnNlZFJpZ2h0KSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgbWVyZ2VkID0gbWVyZ2VWYWx1ZXMocGFyc2VkTGVmdC52YWx1ZSwgcGFyc2VkUmlnaHQudmFsdWUpO1xuICAgICAgICAgICAgaWYgKCFtZXJnZWQudmFsaWQpIHtcbiAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfaW50ZXJzZWN0aW9uX3R5cGVzLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGlzRGlydHkocGFyc2VkTGVmdCkgfHwgaXNEaXJ0eShwYXJzZWRSaWdodCkpIHtcbiAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB7IHN0YXR1czogc3RhdHVzLnZhbHVlLCB2YWx1ZTogbWVyZ2VkLmRhdGEgfTtcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKGN0eC5jb21tb24uYXN5bmMpIHtcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLmFsbChbXG4gICAgICAgICAgICAgICAgdGhpcy5fZGVmLmxlZnQuX3BhcnNlQXN5bmMoe1xuICAgICAgICAgICAgICAgICAgICBkYXRhOiBjdHguZGF0YSxcbiAgICAgICAgICAgICAgICAgICAgcGF0aDogY3R4LnBhdGgsXG4gICAgICAgICAgICAgICAgICAgIHBhcmVudDogY3R4LFxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgIHRoaXMuX2RlZi5yaWdodC5fcGFyc2VBc3luYyh7XG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IGN0eC5kYXRhLFxuICAgICAgICAgICAgICAgICAgICBwYXRoOiBjdHgucGF0aCxcbiAgICAgICAgICAgICAgICAgICAgcGFyZW50OiBjdHgsXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICBdKS50aGVuKChbbGVmdCwgcmlnaHRdKSA9PiBoYW5kbGVQYXJzZWQobGVmdCwgcmlnaHQpKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBoYW5kbGVQYXJzZWQodGhpcy5fZGVmLmxlZnQuX3BhcnNlU3luYyh7XG4gICAgICAgICAgICAgICAgZGF0YTogY3R4LmRhdGEsXG4gICAgICAgICAgICAgICAgcGF0aDogY3R4LnBhdGgsXG4gICAgICAgICAgICAgICAgcGFyZW50OiBjdHgsXG4gICAgICAgICAgICB9KSwgdGhpcy5fZGVmLnJpZ2h0Ll9wYXJzZVN5bmMoe1xuICAgICAgICAgICAgICAgIGRhdGE6IGN0eC5kYXRhLFxuICAgICAgICAgICAgICAgIHBhdGg6IGN0eC5wYXRoLFxuICAgICAgICAgICAgICAgIHBhcmVudDogY3R4LFxuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9XG4gICAgfVxufVxuWm9kSW50ZXJzZWN0aW9uLmNyZWF0ZSA9IChsZWZ0LCByaWdodCwgcGFyYW1zKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBab2RJbnRlcnNlY3Rpb24oe1xuICAgICAgICBsZWZ0OiBsZWZ0LFxuICAgICAgICByaWdodDogcmlnaHQsXG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kSW50ZXJzZWN0aW9uLFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuLy8gdHlwZSBab2RUdXBsZUl0ZW1zID0gW1pvZFR5cGVBbnksIC4uLlpvZFR5cGVBbnlbXV07XG5leHBvcnQgY2xhc3MgWm9kVHVwbGUgZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgeyBzdGF0dXMsIGN0eCB9ID0gdGhpcy5fcHJvY2Vzc0lucHV0UGFyYW1zKGlucHV0KTtcbiAgICAgICAgaWYgKGN0eC5wYXJzZWRUeXBlICE9PSBab2RQYXJzZWRUeXBlLmFycmF5KSB7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF90eXBlLFxuICAgICAgICAgICAgICAgIGV4cGVjdGVkOiBab2RQYXJzZWRUeXBlLmFycmF5LFxuICAgICAgICAgICAgICAgIHJlY2VpdmVkOiBjdHgucGFyc2VkVHlwZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGN0eC5kYXRhLmxlbmd0aCA8IHRoaXMuX2RlZi5pdGVtcy5sZW5ndGgpIHtcbiAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS50b29fc21hbGwsXG4gICAgICAgICAgICAgICAgbWluaW11bTogdGhpcy5fZGVmLml0ZW1zLmxlbmd0aCxcbiAgICAgICAgICAgICAgICBpbmNsdXNpdmU6IHRydWUsXG4gICAgICAgICAgICAgICAgZXhhY3Q6IGZhbHNlLFxuICAgICAgICAgICAgICAgIHR5cGU6IFwiYXJyYXlcIixcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcmVzdCA9IHRoaXMuX2RlZi5yZXN0O1xuICAgICAgICBpZiAoIXJlc3QgJiYgY3R4LmRhdGEubGVuZ3RoID4gdGhpcy5fZGVmLml0ZW1zLmxlbmd0aCkge1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLnRvb19iaWcsXG4gICAgICAgICAgICAgICAgbWF4aW11bTogdGhpcy5fZGVmLml0ZW1zLmxlbmd0aCxcbiAgICAgICAgICAgICAgICBpbmNsdXNpdmU6IHRydWUsXG4gICAgICAgICAgICAgICAgZXhhY3Q6IGZhbHNlLFxuICAgICAgICAgICAgICAgIHR5cGU6IFwiYXJyYXlcIixcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgaXRlbXMgPSBbLi4uY3R4LmRhdGFdXG4gICAgICAgICAgICAubWFwKChpdGVtLCBpdGVtSW5kZXgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHNjaGVtYSA9IHRoaXMuX2RlZi5pdGVtc1tpdGVtSW5kZXhdIHx8IHRoaXMuX2RlZi5yZXN0O1xuICAgICAgICAgICAgaWYgKCFzY2hlbWEpXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICByZXR1cm4gc2NoZW1hLl9wYXJzZShuZXcgUGFyc2VJbnB1dExhenlQYXRoKGN0eCwgaXRlbSwgY3R4LnBhdGgsIGl0ZW1JbmRleCkpO1xuICAgICAgICB9KVxuICAgICAgICAgICAgLmZpbHRlcigoeCkgPT4gISF4KTsgLy8gZmlsdGVyIG51bGxzXG4gICAgICAgIGlmIChjdHguY29tbW9uLmFzeW5jKSB7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwoaXRlbXMpLnRoZW4oKHJlc3VsdHMpID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gUGFyc2VTdGF0dXMubWVyZ2VBcnJheShzdGF0dXMsIHJlc3VsdHMpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gUGFyc2VTdGF0dXMubWVyZ2VBcnJheShzdGF0dXMsIGl0ZW1zKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXQgaXRlbXMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYuaXRlbXM7XG4gICAgfVxuICAgIHJlc3QocmVzdCkge1xuICAgICAgICByZXR1cm4gbmV3IFpvZFR1cGxlKHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIHJlc3QsXG4gICAgICAgIH0pO1xuICAgIH1cbn1cblpvZFR1cGxlLmNyZWF0ZSA9IChzY2hlbWFzLCBwYXJhbXMpID0+IHtcbiAgICBpZiAoIUFycmF5LmlzQXJyYXkoc2NoZW1hcykpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiWW91IG11c3QgcGFzcyBhbiBhcnJheSBvZiBzY2hlbWFzIHRvIHoudHVwbGUoWyAuLi4gXSlcIik7XG4gICAgfVxuICAgIHJldHVybiBuZXcgWm9kVHVwbGUoe1xuICAgICAgICBpdGVtczogc2NoZW1hcyxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RUdXBsZSxcbiAgICAgICAgcmVzdDogbnVsbCxcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcbmV4cG9ydCBjbGFzcyBab2RSZWNvcmQgZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBnZXQga2V5U2NoZW1hKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLmtleVR5cGU7XG4gICAgfVxuICAgIGdldCB2YWx1ZVNjaGVtYSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi52YWx1ZVR5cGU7XG4gICAgfVxuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBjb25zdCB7IHN0YXR1cywgY3R4IH0gPSB0aGlzLl9wcm9jZXNzSW5wdXRQYXJhbXMoaW5wdXQpO1xuICAgICAgICBpZiAoY3R4LnBhcnNlZFR5cGUgIT09IFpvZFBhcnNlZFR5cGUub2JqZWN0KSB7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF90eXBlLFxuICAgICAgICAgICAgICAgIGV4cGVjdGVkOiBab2RQYXJzZWRUeXBlLm9iamVjdCxcbiAgICAgICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHBhaXJzID0gW107XG4gICAgICAgIGNvbnN0IGtleVR5cGUgPSB0aGlzLl9kZWYua2V5VHlwZTtcbiAgICAgICAgY29uc3QgdmFsdWVUeXBlID0gdGhpcy5fZGVmLnZhbHVlVHlwZTtcbiAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gY3R4LmRhdGEpIHtcbiAgICAgICAgICAgIHBhaXJzLnB1c2goe1xuICAgICAgICAgICAgICAgIGtleToga2V5VHlwZS5fcGFyc2UobmV3IFBhcnNlSW5wdXRMYXp5UGF0aChjdHgsIGtleSwgY3R4LnBhdGgsIGtleSkpLFxuICAgICAgICAgICAgICAgIHZhbHVlOiB2YWx1ZVR5cGUuX3BhcnNlKG5ldyBQYXJzZUlucHV0TGF6eVBhdGgoY3R4LCBjdHguZGF0YVtrZXldLCBjdHgucGF0aCwga2V5KSksXG4gICAgICAgICAgICAgICAgYWx3YXlzU2V0OiBrZXkgaW4gY3R4LmRhdGEsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY3R4LmNvbW1vbi5hc3luYykge1xuICAgICAgICAgICAgcmV0dXJuIFBhcnNlU3RhdHVzLm1lcmdlT2JqZWN0QXN5bmMoc3RhdHVzLCBwYWlycyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gUGFyc2VTdGF0dXMubWVyZ2VPYmplY3RTeW5jKHN0YXR1cywgcGFpcnMpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldCBlbGVtZW50KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLnZhbHVlVHlwZTtcbiAgICB9XG4gICAgc3RhdGljIGNyZWF0ZShmaXJzdCwgc2Vjb25kLCB0aGlyZCkge1xuICAgICAgICBpZiAoc2Vjb25kIGluc3RhbmNlb2YgWm9kVHlwZSkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBab2RSZWNvcmQoe1xuICAgICAgICAgICAgICAgIGtleVR5cGU6IGZpcnN0LFxuICAgICAgICAgICAgICAgIHZhbHVlVHlwZTogc2Vjb25kLFxuICAgICAgICAgICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kUmVjb3JkLFxuICAgICAgICAgICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXModGhpcmQpLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBab2RSZWNvcmQoe1xuICAgICAgICAgICAga2V5VHlwZTogWm9kU3RyaW5nLmNyZWF0ZSgpLFxuICAgICAgICAgICAgdmFsdWVUeXBlOiBmaXJzdCxcbiAgICAgICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kUmVjb3JkLFxuICAgICAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhzZWNvbmQpLFxuICAgICAgICB9KTtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgWm9kTWFwIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgZ2V0IGtleVNjaGVtYSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi5rZXlUeXBlO1xuICAgIH1cbiAgICBnZXQgdmFsdWVTY2hlbWEoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYudmFsdWVUeXBlO1xuICAgIH1cbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgeyBzdGF0dXMsIGN0eCB9ID0gdGhpcy5fcHJvY2Vzc0lucHV0UGFyYW1zKGlucHV0KTtcbiAgICAgICAgaWYgKGN0eC5wYXJzZWRUeXBlICE9PSBab2RQYXJzZWRUeXBlLm1hcCkge1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogWm9kUGFyc2VkVHlwZS5tYXAsXG4gICAgICAgICAgICAgICAgcmVjZWl2ZWQ6IGN0eC5wYXJzZWRUeXBlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBrZXlUeXBlID0gdGhpcy5fZGVmLmtleVR5cGU7XG4gICAgICAgIGNvbnN0IHZhbHVlVHlwZSA9IHRoaXMuX2RlZi52YWx1ZVR5cGU7XG4gICAgICAgIGNvbnN0IHBhaXJzID0gWy4uLmN0eC5kYXRhLmVudHJpZXMoKV0ubWFwKChba2V5LCB2YWx1ZV0sIGluZGV4KSA9PiB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGtleToga2V5VHlwZS5fcGFyc2UobmV3IFBhcnNlSW5wdXRMYXp5UGF0aChjdHgsIGtleSwgY3R4LnBhdGgsIFtpbmRleCwgXCJrZXlcIl0pKSxcbiAgICAgICAgICAgICAgICB2YWx1ZTogdmFsdWVUeXBlLl9wYXJzZShuZXcgUGFyc2VJbnB1dExhenlQYXRoKGN0eCwgdmFsdWUsIGN0eC5wYXRoLCBbaW5kZXgsIFwidmFsdWVcIl0pKSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pO1xuICAgICAgICBpZiAoY3R4LmNvbW1vbi5hc3luYykge1xuICAgICAgICAgICAgY29uc3QgZmluYWxNYXAgPSBuZXcgTWFwKCk7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCkudGhlbihhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBwYWlyIG9mIHBhaXJzKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGtleSA9IGF3YWl0IHBhaXIua2V5O1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB2YWx1ZSA9IGF3YWl0IHBhaXIudmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIGlmIChrZXkuc3RhdHVzID09PSBcImFib3J0ZWRcIiB8fCB2YWx1ZS5zdGF0dXMgPT09IFwiYWJvcnRlZFwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoa2V5LnN0YXR1cyA9PT0gXCJkaXJ0eVwiIHx8IHZhbHVlLnN0YXR1cyA9PT0gXCJkaXJ0eVwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBmaW5hbE1hcC5zZXQoa2V5LnZhbHVlLCB2YWx1ZS52YWx1ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiB7IHN0YXR1czogc3RhdHVzLnZhbHVlLCB2YWx1ZTogZmluYWxNYXAgfTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgZmluYWxNYXAgPSBuZXcgTWFwKCk7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHBhaXIgb2YgcGFpcnMpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBrZXkgPSBwYWlyLmtleTtcbiAgICAgICAgICAgICAgICBjb25zdCB2YWx1ZSA9IHBhaXIudmFsdWU7XG4gICAgICAgICAgICAgICAgaWYgKGtleS5zdGF0dXMgPT09IFwiYWJvcnRlZFwiIHx8IHZhbHVlLnN0YXR1cyA9PT0gXCJhYm9ydGVkXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChrZXkuc3RhdHVzID09PSBcImRpcnR5XCIgfHwgdmFsdWUuc3RhdHVzID09PSBcImRpcnR5XCIpIHtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGZpbmFsTWFwLnNldChrZXkudmFsdWUsIHZhbHVlLnZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB7IHN0YXR1czogc3RhdHVzLnZhbHVlLCB2YWx1ZTogZmluYWxNYXAgfTtcbiAgICAgICAgfVxuICAgIH1cbn1cblpvZE1hcC5jcmVhdGUgPSAoa2V5VHlwZSwgdmFsdWVUeXBlLCBwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZE1hcCh7XG4gICAgICAgIHZhbHVlVHlwZSxcbiAgICAgICAga2V5VHlwZSxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RNYXAsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kU2V0IGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHsgc3RhdHVzLCBjdHggfSA9IHRoaXMuX3Byb2Nlc3NJbnB1dFBhcmFtcyhpbnB1dCk7XG4gICAgICAgIGlmIChjdHgucGFyc2VkVHlwZSAhPT0gWm9kUGFyc2VkVHlwZS5zZXQpIHtcbiAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3R5cGUsXG4gICAgICAgICAgICAgICAgZXhwZWN0ZWQ6IFpvZFBhcnNlZFR5cGUuc2V0LFxuICAgICAgICAgICAgICAgIHJlY2VpdmVkOiBjdHgucGFyc2VkVHlwZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZGVmID0gdGhpcy5fZGVmO1xuICAgICAgICBpZiAoZGVmLm1pblNpemUgIT09IG51bGwpIHtcbiAgICAgICAgICAgIGlmIChjdHguZGF0YS5zaXplIDwgZGVmLm1pblNpemUudmFsdWUpIHtcbiAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLnRvb19zbWFsbCxcbiAgICAgICAgICAgICAgICAgICAgbWluaW11bTogZGVmLm1pblNpemUudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IFwic2V0XCIsXG4gICAgICAgICAgICAgICAgICAgIGluY2x1c2l2ZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgZXhhY3Q6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBkZWYubWluU2l6ZS5tZXNzYWdlLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChkZWYubWF4U2l6ZSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaWYgKGN0eC5kYXRhLnNpemUgPiBkZWYubWF4U2l6ZS52YWx1ZSkge1xuICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUudG9vX2JpZyxcbiAgICAgICAgICAgICAgICAgICAgbWF4aW11bTogZGVmLm1heFNpemUudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IFwic2V0XCIsXG4gICAgICAgICAgICAgICAgICAgIGluY2x1c2l2ZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgZXhhY3Q6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBkZWYubWF4U2l6ZS5tZXNzYWdlLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHZhbHVlVHlwZSA9IHRoaXMuX2RlZi52YWx1ZVR5cGU7XG4gICAgICAgIGZ1bmN0aW9uIGZpbmFsaXplU2V0KGVsZW1lbnRzKSB7XG4gICAgICAgICAgICBjb25zdCBwYXJzZWRTZXQgPSBuZXcgU2V0KCk7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGVsZW1lbnQgb2YgZWxlbWVudHMpIHtcbiAgICAgICAgICAgICAgICBpZiAoZWxlbWVudC5zdGF0dXMgPT09IFwiYWJvcnRlZFwiKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgICAgICAgICBpZiAoZWxlbWVudC5zdGF0dXMgPT09IFwiZGlydHlcIilcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgcGFyc2VkU2V0LmFkZChlbGVtZW50LnZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB7IHN0YXR1czogc3RhdHVzLnZhbHVlLCB2YWx1ZTogcGFyc2VkU2V0IH07XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZWxlbWVudHMgPSBbLi4uY3R4LmRhdGEudmFsdWVzKCldLm1hcCgoaXRlbSwgaSkgPT4gdmFsdWVUeXBlLl9wYXJzZShuZXcgUGFyc2VJbnB1dExhenlQYXRoKGN0eCwgaXRlbSwgY3R4LnBhdGgsIGkpKSk7XG4gICAgICAgIGlmIChjdHguY29tbW9uLmFzeW5jKSB7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwoZWxlbWVudHMpLnRoZW4oKGVsZW1lbnRzKSA9PiBmaW5hbGl6ZVNldChlbGVtZW50cykpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIGZpbmFsaXplU2V0KGVsZW1lbnRzKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBtaW4obWluU2l6ZSwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gbmV3IFpvZFNldCh7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICBtaW5TaXplOiB7IHZhbHVlOiBtaW5TaXplLCBtZXNzYWdlOiBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSkgfSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIG1heChtYXhTaXplLCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kU2V0KHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIG1heFNpemU6IHsgdmFsdWU6IG1heFNpemUsIG1lc3NhZ2U6IGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSB9LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgc2l6ZShzaXplLCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1pbihzaXplLCBtZXNzYWdlKS5tYXgoc2l6ZSwgbWVzc2FnZSk7XG4gICAgfVxuICAgIG5vbmVtcHR5KG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubWluKDEsIG1lc3NhZ2UpO1xuICAgIH1cbn1cblpvZFNldC5jcmVhdGUgPSAodmFsdWVUeXBlLCBwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZFNldCh7XG4gICAgICAgIHZhbHVlVHlwZSxcbiAgICAgICAgbWluU2l6ZTogbnVsbCxcbiAgICAgICAgbWF4U2l6ZTogbnVsbCxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RTZXQsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kRnVuY3Rpb24gZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcbiAgICAgICAgdGhpcy52YWxpZGF0ZSA9IHRoaXMuaW1wbGVtZW50O1xuICAgIH1cbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgeyBjdHggfSA9IHRoaXMuX3Byb2Nlc3NJbnB1dFBhcmFtcyhpbnB1dCk7XG4gICAgICAgIGlmIChjdHgucGFyc2VkVHlwZSAhPT0gWm9kUGFyc2VkVHlwZS5mdW5jdGlvbikge1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogWm9kUGFyc2VkVHlwZS5mdW5jdGlvbixcbiAgICAgICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIGZ1bmN0aW9uIG1ha2VBcmdzSXNzdWUoYXJncywgZXJyb3IpIHtcbiAgICAgICAgICAgIHJldHVybiBtYWtlSXNzdWUoe1xuICAgICAgICAgICAgICAgIGRhdGE6IGFyZ3MsXG4gICAgICAgICAgICAgICAgcGF0aDogY3R4LnBhdGgsXG4gICAgICAgICAgICAgICAgZXJyb3JNYXBzOiBbY3R4LmNvbW1vbi5jb250ZXh0dWFsRXJyb3JNYXAsIGN0eC5zY2hlbWFFcnJvck1hcCwgZ2V0RXJyb3JNYXAoKSwgZGVmYXVsdEVycm9yTWFwXS5maWx0ZXIoKHgpID0+ICEheCksXG4gICAgICAgICAgICAgICAgaXNzdWVEYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX2FyZ3VtZW50cyxcbiAgICAgICAgICAgICAgICAgICAgYXJndW1lbnRzRXJyb3I6IGVycm9yLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBmdW5jdGlvbiBtYWtlUmV0dXJuc0lzc3VlKHJldHVybnMsIGVycm9yKSB7XG4gICAgICAgICAgICByZXR1cm4gbWFrZUlzc3VlKHtcbiAgICAgICAgICAgICAgICBkYXRhOiByZXR1cm5zLFxuICAgICAgICAgICAgICAgIHBhdGg6IGN0eC5wYXRoLFxuICAgICAgICAgICAgICAgIGVycm9yTWFwczogW2N0eC5jb21tb24uY29udGV4dHVhbEVycm9yTWFwLCBjdHguc2NoZW1hRXJyb3JNYXAsIGdldEVycm9yTWFwKCksIGRlZmF1bHRFcnJvck1hcF0uZmlsdGVyKCh4KSA9PiAhIXgpLFxuICAgICAgICAgICAgICAgIGlzc3VlRGF0YToge1xuICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9yZXR1cm5fdHlwZSxcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuVHlwZUVycm9yOiBlcnJvcixcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcGFyYW1zID0geyBlcnJvck1hcDogY3R4LmNvbW1vbi5jb250ZXh0dWFsRXJyb3JNYXAgfTtcbiAgICAgICAgY29uc3QgZm4gPSBjdHguZGF0YTtcbiAgICAgICAgaWYgKHRoaXMuX2RlZi5yZXR1cm5zIGluc3RhbmNlb2YgWm9kUHJvbWlzZSkge1xuICAgICAgICAgICAgLy8gV291bGQgbG92ZSBhIHdheSB0byBhdm9pZCBkaXNhYmxpbmcgdGhpcyBydWxlLCBidXQgd2UgbmVlZFxuICAgICAgICAgICAgLy8gYW4gYWxpYXMgKHVzaW5nIGFuIGFycm93IGZ1bmN0aW9uIHdhcyB3aGF0IGNhdXNlZCAyNjUxKS5cbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdGhpcy1hbGlhc1xuICAgICAgICAgICAgY29uc3QgbWUgPSB0aGlzO1xuICAgICAgICAgICAgcmV0dXJuIE9LKGFzeW5jIGZ1bmN0aW9uICguLi5hcmdzKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZXJyb3IgPSBuZXcgWm9kRXJyb3IoW10pO1xuICAgICAgICAgICAgICAgIGNvbnN0IHBhcnNlZEFyZ3MgPSBhd2FpdCBtZS5fZGVmLmFyZ3MucGFyc2VBc3luYyhhcmdzLCBwYXJhbXMpLmNhdGNoKChlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGVycm9yLmFkZElzc3VlKG1ha2VBcmdzSXNzdWUoYXJncywgZSkpO1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBSZWZsZWN0LmFwcGx5KGZuLCB0aGlzLCBwYXJzZWRBcmdzKTtcbiAgICAgICAgICAgICAgICBjb25zdCBwYXJzZWRSZXR1cm5zID0gYXdhaXQgbWUuX2RlZi5yZXR1cm5zLl9kZWYudHlwZVxuICAgICAgICAgICAgICAgICAgICAucGFyc2VBc3luYyhyZXN1bHQsIHBhcmFtcylcbiAgICAgICAgICAgICAgICAgICAgLmNhdGNoKChlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGVycm9yLmFkZElzc3VlKG1ha2VSZXR1cm5zSXNzdWUocmVzdWx0LCBlKSk7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybiBwYXJzZWRSZXR1cm5zO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAvLyBXb3VsZCBsb3ZlIGEgd2F5IHRvIGF2b2lkIGRpc2FibGluZyB0aGlzIHJ1bGUsIGJ1dCB3ZSBuZWVkXG4gICAgICAgICAgICAvLyBhbiBhbGlhcyAodXNpbmcgYW4gYXJyb3cgZnVuY3Rpb24gd2FzIHdoYXQgY2F1c2VkIDI2NTEpLlxuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby10aGlzLWFsaWFzXG4gICAgICAgICAgICBjb25zdCBtZSA9IHRoaXM7XG4gICAgICAgICAgICByZXR1cm4gT0soZnVuY3Rpb24gKC4uLmFyZ3MpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBwYXJzZWRBcmdzID0gbWUuX2RlZi5hcmdzLnNhZmVQYXJzZShhcmdzLCBwYXJhbXMpO1xuICAgICAgICAgICAgICAgIGlmICghcGFyc2VkQXJncy5zdWNjZXNzKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBab2RFcnJvcihbbWFrZUFyZ3NJc3N1ZShhcmdzLCBwYXJzZWRBcmdzLmVycm9yKV0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSBSZWZsZWN0LmFwcGx5KGZuLCB0aGlzLCBwYXJzZWRBcmdzLmRhdGEpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHBhcnNlZFJldHVybnMgPSBtZS5fZGVmLnJldHVybnMuc2FmZVBhcnNlKHJlc3VsdCwgcGFyYW1zKTtcbiAgICAgICAgICAgICAgICBpZiAoIXBhcnNlZFJldHVybnMuc3VjY2Vzcykge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgWm9kRXJyb3IoW21ha2VSZXR1cm5zSXNzdWUocmVzdWx0LCBwYXJzZWRSZXR1cm5zLmVycm9yKV0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gcGFyc2VkUmV0dXJucy5kYXRhO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcGFyYW1ldGVycygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi5hcmdzO1xuICAgIH1cbiAgICByZXR1cm5UeXBlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLnJldHVybnM7XG4gICAgfVxuICAgIGFyZ3MoLi4uaXRlbXMpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBab2RGdW5jdGlvbih7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICBhcmdzOiBab2RUdXBsZS5jcmVhdGUoaXRlbXMpLnJlc3QoWm9kVW5rbm93bi5jcmVhdGUoKSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm5zKHJldHVyblR5cGUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBab2RGdW5jdGlvbih7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICByZXR1cm5zOiByZXR1cm5UeXBlLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgaW1wbGVtZW50KGZ1bmMpIHtcbiAgICAgICAgY29uc3QgdmFsaWRhdGVkRnVuYyA9IHRoaXMucGFyc2UoZnVuYyk7XG4gICAgICAgIHJldHVybiB2YWxpZGF0ZWRGdW5jO1xuICAgIH1cbiAgICBzdHJpY3RJbXBsZW1lbnQoZnVuYykge1xuICAgICAgICBjb25zdCB2YWxpZGF0ZWRGdW5jID0gdGhpcy5wYXJzZShmdW5jKTtcbiAgICAgICAgcmV0dXJuIHZhbGlkYXRlZEZ1bmM7XG4gICAgfVxuICAgIHN0YXRpYyBjcmVhdGUoYXJncywgcmV0dXJucywgcGFyYW1zKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kRnVuY3Rpb24oe1xuICAgICAgICAgICAgYXJnczogKGFyZ3MgPyBhcmdzIDogWm9kVHVwbGUuY3JlYXRlKFtdKS5yZXN0KFpvZFVua25vd24uY3JlYXRlKCkpKSxcbiAgICAgICAgICAgIHJldHVybnM6IHJldHVybnMgfHwgWm9kVW5rbm93bi5jcmVhdGUoKSxcbiAgICAgICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kRnVuY3Rpb24sXG4gICAgICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgICAgIH0pO1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBab2RMYXp5IGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgZ2V0IHNjaGVtYSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi5nZXR0ZXIoKTtcbiAgICB9XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHsgY3R4IH0gPSB0aGlzLl9wcm9jZXNzSW5wdXRQYXJhbXMoaW5wdXQpO1xuICAgICAgICBjb25zdCBsYXp5U2NoZW1hID0gdGhpcy5fZGVmLmdldHRlcigpO1xuICAgICAgICByZXR1cm4gbGF6eVNjaGVtYS5fcGFyc2UoeyBkYXRhOiBjdHguZGF0YSwgcGF0aDogY3R4LnBhdGgsIHBhcmVudDogY3R4IH0pO1xuICAgIH1cbn1cblpvZExhenkuY3JlYXRlID0gKGdldHRlciwgcGFyYW1zKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBab2RMYXp5KHtcbiAgICAgICAgZ2V0dGVyOiBnZXR0ZXIsXG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kTGF6eSxcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcbmV4cG9ydCBjbGFzcyBab2RMaXRlcmFsIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGlmIChpbnB1dC5kYXRhICE9PSB0aGlzLl9kZWYudmFsdWUpIHtcbiAgICAgICAgICAgIGNvbnN0IGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0KTtcbiAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgIHJlY2VpdmVkOiBjdHguZGF0YSxcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9saXRlcmFsLFxuICAgICAgICAgICAgICAgIGV4cGVjdGVkOiB0aGlzLl9kZWYudmFsdWUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7IHN0YXR1czogXCJ2YWxpZFwiLCB2YWx1ZTogaW5wdXQuZGF0YSB9O1xuICAgIH1cbiAgICBnZXQgdmFsdWUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYudmFsdWU7XG4gICAgfVxufVxuWm9kTGl0ZXJhbC5jcmVhdGUgPSAodmFsdWUsIHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kTGl0ZXJhbCh7XG4gICAgICAgIHZhbHVlOiB2YWx1ZSxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RMaXRlcmFsLFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuZnVuY3Rpb24gY3JlYXRlWm9kRW51bSh2YWx1ZXMsIHBhcmFtcykge1xuICAgIHJldHVybiBuZXcgWm9kRW51bSh7XG4gICAgICAgIHZhbHVlcyxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RFbnVtLFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59XG5leHBvcnQgY2xhc3MgWm9kRW51bSBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBpZiAodHlwZW9mIGlucHV0LmRhdGEgIT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgIGNvbnN0IGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0KTtcbiAgICAgICAgICAgIGNvbnN0IGV4cGVjdGVkVmFsdWVzID0gdGhpcy5fZGVmLnZhbHVlcztcbiAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgIGV4cGVjdGVkOiB1dGlsLmpvaW5WYWx1ZXMoZXhwZWN0ZWRWYWx1ZXMpLFxuICAgICAgICAgICAgICAgIHJlY2VpdmVkOiBjdHgucGFyc2VkVHlwZSxcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF90eXBlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRoaXMuX2NhY2hlKSB7XG4gICAgICAgICAgICB0aGlzLl9jYWNoZSA9IG5ldyBTZXQodGhpcy5fZGVmLnZhbHVlcyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF0aGlzLl9jYWNoZS5oYXMoaW5wdXQuZGF0YSkpIHtcbiAgICAgICAgICAgIGNvbnN0IGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0KTtcbiAgICAgICAgICAgIGNvbnN0IGV4cGVjdGVkVmFsdWVzID0gdGhpcy5fZGVmLnZhbHVlcztcbiAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgIHJlY2VpdmVkOiBjdHguZGF0YSxcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9lbnVtX3ZhbHVlLFxuICAgICAgICAgICAgICAgIG9wdGlvbnM6IGV4cGVjdGVkVmFsdWVzLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gT0soaW5wdXQuZGF0YSk7XG4gICAgfVxuICAgIGdldCBvcHRpb25zKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLnZhbHVlcztcbiAgICB9XG4gICAgZ2V0IGVudW0oKSB7XG4gICAgICAgIGNvbnN0IGVudW1WYWx1ZXMgPSB7fTtcbiAgICAgICAgZm9yIChjb25zdCB2YWwgb2YgdGhpcy5fZGVmLnZhbHVlcykge1xuICAgICAgICAgICAgZW51bVZhbHVlc1t2YWxdID0gdmFsO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBlbnVtVmFsdWVzO1xuICAgIH1cbiAgICBnZXQgVmFsdWVzKCkge1xuICAgICAgICBjb25zdCBlbnVtVmFsdWVzID0ge307XG4gICAgICAgIGZvciAoY29uc3QgdmFsIG9mIHRoaXMuX2RlZi52YWx1ZXMpIHtcbiAgICAgICAgICAgIGVudW1WYWx1ZXNbdmFsXSA9IHZhbDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZW51bVZhbHVlcztcbiAgICB9XG4gICAgZ2V0IEVudW0oKSB7XG4gICAgICAgIGNvbnN0IGVudW1WYWx1ZXMgPSB7fTtcbiAgICAgICAgZm9yIChjb25zdCB2YWwgb2YgdGhpcy5fZGVmLnZhbHVlcykge1xuICAgICAgICAgICAgZW51bVZhbHVlc1t2YWxdID0gdmFsO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBlbnVtVmFsdWVzO1xuICAgIH1cbiAgICBleHRyYWN0KHZhbHVlcywgbmV3RGVmID0gdGhpcy5fZGVmKSB7XG4gICAgICAgIHJldHVybiBab2RFbnVtLmNyZWF0ZSh2YWx1ZXMsIHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIC4uLm5ld0RlZixcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGV4Y2x1ZGUodmFsdWVzLCBuZXdEZWYgPSB0aGlzLl9kZWYpIHtcbiAgICAgICAgcmV0dXJuIFpvZEVudW0uY3JlYXRlKHRoaXMub3B0aW9ucy5maWx0ZXIoKG9wdCkgPT4gIXZhbHVlcy5pbmNsdWRlcyhvcHQpKSwge1xuICAgICAgICAgICAgLi4udGhpcy5fZGVmLFxuICAgICAgICAgICAgLi4ubmV3RGVmLFxuICAgICAgICB9KTtcbiAgICB9XG59XG5ab2RFbnVtLmNyZWF0ZSA9IGNyZWF0ZVpvZEVudW07XG5leHBvcnQgY2xhc3MgWm9kTmF0aXZlRW51bSBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBjb25zdCBuYXRpdmVFbnVtVmFsdWVzID0gdXRpbC5nZXRWYWxpZEVudW1WYWx1ZXModGhpcy5fZGVmLnZhbHVlcyk7XG4gICAgICAgIGNvbnN0IGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0KTtcbiAgICAgICAgaWYgKGN0eC5wYXJzZWRUeXBlICE9PSBab2RQYXJzZWRUeXBlLnN0cmluZyAmJiBjdHgucGFyc2VkVHlwZSAhPT0gWm9kUGFyc2VkVHlwZS5udW1iZXIpIHtcbiAgICAgICAgICAgIGNvbnN0IGV4cGVjdGVkVmFsdWVzID0gdXRpbC5vYmplY3RWYWx1ZXMobmF0aXZlRW51bVZhbHVlcyk7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogdXRpbC5qb2luVmFsdWVzKGV4cGVjdGVkVmFsdWVzKSxcbiAgICAgICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF0aGlzLl9jYWNoZSkge1xuICAgICAgICAgICAgdGhpcy5fY2FjaGUgPSBuZXcgU2V0KHV0aWwuZ2V0VmFsaWRFbnVtVmFsdWVzKHRoaXMuX2RlZi52YWx1ZXMpKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRoaXMuX2NhY2hlLmhhcyhpbnB1dC5kYXRhKSkge1xuICAgICAgICAgICAgY29uc3QgZXhwZWN0ZWRWYWx1ZXMgPSB1dGlsLm9iamVjdFZhbHVlcyhuYXRpdmVFbnVtVmFsdWVzKTtcbiAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgIHJlY2VpdmVkOiBjdHguZGF0YSxcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9lbnVtX3ZhbHVlLFxuICAgICAgICAgICAgICAgIG9wdGlvbnM6IGV4cGVjdGVkVmFsdWVzLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gT0soaW5wdXQuZGF0YSk7XG4gICAgfVxuICAgIGdldCBlbnVtKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLnZhbHVlcztcbiAgICB9XG59XG5ab2ROYXRpdmVFbnVtLmNyZWF0ZSA9ICh2YWx1ZXMsIHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kTmF0aXZlRW51bSh7XG4gICAgICAgIHZhbHVlczogdmFsdWVzLFxuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZE5hdGl2ZUVudW0sXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kUHJvbWlzZSBleHRlbmRzIFpvZFR5cGUge1xuICAgIHVud3JhcCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi50eXBlO1xuICAgIH1cbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgeyBjdHggfSA9IHRoaXMuX3Byb2Nlc3NJbnB1dFBhcmFtcyhpbnB1dCk7XG4gICAgICAgIGlmIChjdHgucGFyc2VkVHlwZSAhPT0gWm9kUGFyc2VkVHlwZS5wcm9taXNlICYmIGN0eC5jb21tb24uYXN5bmMgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF90eXBlLFxuICAgICAgICAgICAgICAgIGV4cGVjdGVkOiBab2RQYXJzZWRUeXBlLnByb21pc2UsXG4gICAgICAgICAgICAgICAgcmVjZWl2ZWQ6IGN0eC5wYXJzZWRUeXBlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwcm9taXNpZmllZCA9IGN0eC5wYXJzZWRUeXBlID09PSBab2RQYXJzZWRUeXBlLnByb21pc2UgPyBjdHguZGF0YSA6IFByb21pc2UucmVzb2x2ZShjdHguZGF0YSk7XG4gICAgICAgIHJldHVybiBPSyhwcm9taXNpZmllZC50aGVuKChkYXRhKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fZGVmLnR5cGUucGFyc2VBc3luYyhkYXRhLCB7XG4gICAgICAgICAgICAgICAgcGF0aDogY3R4LnBhdGgsXG4gICAgICAgICAgICAgICAgZXJyb3JNYXA6IGN0eC5jb21tb24uY29udGV4dHVhbEVycm9yTWFwLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG59XG5ab2RQcm9taXNlLmNyZWF0ZSA9IChzY2hlbWEsIHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kUHJvbWlzZSh7XG4gICAgICAgIHR5cGU6IHNjaGVtYSxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RQcm9taXNlLFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuZXhwb3J0IGNsYXNzIFpvZEVmZmVjdHMgZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBpbm5lclR5cGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYuc2NoZW1hO1xuICAgIH1cbiAgICBzb3VyY2VUeXBlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLnNjaGVtYS5fZGVmLnR5cGVOYW1lID09PSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kRWZmZWN0c1xuICAgICAgICAgICAgPyB0aGlzLl9kZWYuc2NoZW1hLnNvdXJjZVR5cGUoKVxuICAgICAgICAgICAgOiB0aGlzLl9kZWYuc2NoZW1hO1xuICAgIH1cbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgeyBzdGF0dXMsIGN0eCB9ID0gdGhpcy5fcHJvY2Vzc0lucHV0UGFyYW1zKGlucHV0KTtcbiAgICAgICAgY29uc3QgZWZmZWN0ID0gdGhpcy5fZGVmLmVmZmVjdCB8fCBudWxsO1xuICAgICAgICBjb25zdCBjaGVja0N0eCA9IHtcbiAgICAgICAgICAgIGFkZElzc3VlOiAoYXJnKSA9PiB7XG4gICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCBhcmcpO1xuICAgICAgICAgICAgICAgIGlmIChhcmcuZmF0YWwpIHtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmFib3J0KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZ2V0IHBhdGgoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGN0eC5wYXRoO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgfTtcbiAgICAgICAgY2hlY2tDdHguYWRkSXNzdWUgPSBjaGVja0N0eC5hZGRJc3N1ZS5iaW5kKGNoZWNrQ3R4KTtcbiAgICAgICAgaWYgKGVmZmVjdC50eXBlID09PSBcInByZXByb2Nlc3NcIikge1xuICAgICAgICAgICAgY29uc3QgcHJvY2Vzc2VkID0gZWZmZWN0LnRyYW5zZm9ybShjdHguZGF0YSwgY2hlY2tDdHgpO1xuICAgICAgICAgICAgaWYgKGN0eC5jb21tb24uYXN5bmMpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHByb2Nlc3NlZCkudGhlbihhc3luYyAocHJvY2Vzc2VkKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChzdGF0dXMudmFsdWUgPT09IFwiYWJvcnRlZFwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMuX2RlZi5zY2hlbWEuX3BhcnNlQXN5bmMoe1xuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogcHJvY2Vzc2VkLFxuICAgICAgICAgICAgICAgICAgICAgICAgcGF0aDogY3R4LnBhdGgsXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnQ6IGN0eCxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQuc3RhdHVzID09PSBcImFib3J0ZWRcIilcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0LnN0YXR1cyA9PT0gXCJkaXJ0eVwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIERJUlRZKHJlc3VsdC52YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChzdGF0dXMudmFsdWUgPT09IFwiZGlydHlcIilcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBESVJUWShyZXN1bHQudmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKHN0YXR1cy52YWx1ZSA9PT0gXCJhYm9ydGVkXCIpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMuX2RlZi5zY2hlbWEuX3BhcnNlU3luYyh7XG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHByb2Nlc3NlZCxcbiAgICAgICAgICAgICAgICAgICAgcGF0aDogY3R4LnBhdGgsXG4gICAgICAgICAgICAgICAgICAgIHBhcmVudDogY3R4LFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGlmIChyZXN1bHQuc3RhdHVzID09PSBcImFib3J0ZWRcIilcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5zdGF0dXMgPT09IFwiZGlydHlcIilcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIERJUlRZKHJlc3VsdC52YWx1ZSk7XG4gICAgICAgICAgICAgICAgaWYgKHN0YXR1cy52YWx1ZSA9PT0gXCJkaXJ0eVwiKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gRElSVFkocmVzdWx0LnZhbHVlKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChlZmZlY3QudHlwZSA9PT0gXCJyZWZpbmVtZW50XCIpIHtcbiAgICAgICAgICAgIGNvbnN0IGV4ZWN1dGVSZWZpbmVtZW50ID0gKGFjYykgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGVmZmVjdC5yZWZpbmVtZW50KGFjYywgY2hlY2tDdHgpO1xuICAgICAgICAgICAgICAgIGlmIChjdHguY29tbW9uLmFzeW5jKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUocmVzdWx0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdCBpbnN0YW5jZW9mIFByb21pc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQXN5bmMgcmVmaW5lbWVudCBlbmNvdW50ZXJlZCBkdXJpbmcgc3luY2hyb25vdXMgcGFyc2Ugb3BlcmF0aW9uLiBVc2UgLnBhcnNlQXN5bmMgaW5zdGVhZC5cIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBhY2M7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgaWYgKGN0eC5jb21tb24uYXN5bmMgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgaW5uZXIgPSB0aGlzLl9kZWYuc2NoZW1hLl9wYXJzZVN5bmMoe1xuICAgICAgICAgICAgICAgICAgICBkYXRhOiBjdHguZGF0YSxcbiAgICAgICAgICAgICAgICAgICAgcGF0aDogY3R4LnBhdGgsXG4gICAgICAgICAgICAgICAgICAgIHBhcmVudDogY3R4LFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGlmIChpbm5lci5zdGF0dXMgPT09IFwiYWJvcnRlZFwiKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgICAgICAgICBpZiAoaW5uZXIuc3RhdHVzID09PSBcImRpcnR5XCIpXG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIC8vIHJldHVybiB2YWx1ZSBpcyBpZ25vcmVkXG4gICAgICAgICAgICAgICAgZXhlY3V0ZVJlZmluZW1lbnQoaW5uZXIudmFsdWUpO1xuICAgICAgICAgICAgICAgIHJldHVybiB7IHN0YXR1czogc3RhdHVzLnZhbHVlLCB2YWx1ZTogaW5uZXIudmFsdWUgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9kZWYuc2NoZW1hLl9wYXJzZUFzeW5jKHsgZGF0YTogY3R4LmRhdGEsIHBhdGg6IGN0eC5wYXRoLCBwYXJlbnQ6IGN0eCB9KS50aGVuKChpbm5lcikgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoaW5uZXIuc3RhdHVzID09PSBcImFib3J0ZWRcIilcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICAgICAgICAgICAgICBpZiAoaW5uZXIuc3RhdHVzID09PSBcImRpcnR5XCIpXG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGV4ZWN1dGVSZWZpbmVtZW50KGlubmVyLnZhbHVlKS50aGVuKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7IHN0YXR1czogc3RhdHVzLnZhbHVlLCB2YWx1ZTogaW5uZXIudmFsdWUgfTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGVmZmVjdC50eXBlID09PSBcInRyYW5zZm9ybVwiKSB7XG4gICAgICAgICAgICBpZiAoY3R4LmNvbW1vbi5hc3luYyA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBiYXNlID0gdGhpcy5fZGVmLnNjaGVtYS5fcGFyc2VTeW5jKHtcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogY3R4LmRhdGEsXG4gICAgICAgICAgICAgICAgICAgIHBhdGg6IGN0eC5wYXRoLFxuICAgICAgICAgICAgICAgICAgICBwYXJlbnQ6IGN0eCxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBpZiAoIWlzVmFsaWQoYmFzZSkpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGVmZmVjdC50cmFuc2Zvcm0oYmFzZS52YWx1ZSwgY2hlY2tDdHgpO1xuICAgICAgICAgICAgICAgIGlmIChyZXN1bHQgaW5zdGFuY2VvZiBQcm9taXNlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgQXN5bmNocm9ub3VzIHRyYW5zZm9ybSBlbmNvdW50ZXJlZCBkdXJpbmcgc3luY2hyb25vdXMgcGFyc2Ugb3BlcmF0aW9uLiBVc2UgLnBhcnNlQXN5bmMgaW5zdGVhZC5gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgc3RhdHVzOiBzdGF0dXMudmFsdWUsIHZhbHVlOiByZXN1bHQgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9kZWYuc2NoZW1hLl9wYXJzZUFzeW5jKHsgZGF0YTogY3R4LmRhdGEsIHBhdGg6IGN0eC5wYXRoLCBwYXJlbnQ6IGN0eCB9KS50aGVuKChiYXNlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghaXNWYWxpZChiYXNlKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKGVmZmVjdC50cmFuc2Zvcm0oYmFzZS52YWx1ZSwgY2hlY2tDdHgpKS50aGVuKChyZXN1bHQpID0+ICh7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IHN0YXR1cy52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiByZXN1bHQsXG4gICAgICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB1dGlsLmFzc2VydE5ldmVyKGVmZmVjdCk7XG4gICAgfVxufVxuWm9kRWZmZWN0cy5jcmVhdGUgPSAoc2NoZW1hLCBlZmZlY3QsIHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kRWZmZWN0cyh7XG4gICAgICAgIHNjaGVtYSxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RFZmZlY3RzLFxuICAgICAgICBlZmZlY3QsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5ab2RFZmZlY3RzLmNyZWF0ZVdpdGhQcmVwcm9jZXNzID0gKHByZXByb2Nlc3MsIHNjaGVtYSwgcGFyYW1zKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBab2RFZmZlY3RzKHtcbiAgICAgICAgc2NoZW1hLFxuICAgICAgICBlZmZlY3Q6IHsgdHlwZTogXCJwcmVwcm9jZXNzXCIsIHRyYW5zZm9ybTogcHJlcHJvY2VzcyB9LFxuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZEVmZmVjdHMsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgeyBab2RFZmZlY3RzIGFzIFpvZFRyYW5zZm9ybWVyIH07XG5leHBvcnQgY2xhc3MgWm9kT3B0aW9uYWwgZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgcGFyc2VkVHlwZSA9IHRoaXMuX2dldFR5cGUoaW5wdXQpO1xuICAgICAgICBpZiAocGFyc2VkVHlwZSA9PT0gWm9kUGFyc2VkVHlwZS51bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJldHVybiBPSyh1bmRlZmluZWQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYuaW5uZXJUeXBlLl9wYXJzZShpbnB1dCk7XG4gICAgfVxuICAgIHVud3JhcCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi5pbm5lclR5cGU7XG4gICAgfVxufVxuWm9kT3B0aW9uYWwuY3JlYXRlID0gKHR5cGUsIHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kT3B0aW9uYWwoe1xuICAgICAgICBpbm5lclR5cGU6IHR5cGUsXG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kT3B0aW9uYWwsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kTnVsbGFibGUgZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgcGFyc2VkVHlwZSA9IHRoaXMuX2dldFR5cGUoaW5wdXQpO1xuICAgICAgICBpZiAocGFyc2VkVHlwZSA9PT0gWm9kUGFyc2VkVHlwZS5udWxsKSB7XG4gICAgICAgICAgICByZXR1cm4gT0sobnVsbCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi5pbm5lclR5cGUuX3BhcnNlKGlucHV0KTtcbiAgICB9XG4gICAgdW53cmFwKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLmlubmVyVHlwZTtcbiAgICB9XG59XG5ab2ROdWxsYWJsZS5jcmVhdGUgPSAodHlwZSwgcGFyYW1zKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBab2ROdWxsYWJsZSh7XG4gICAgICAgIGlubmVyVHlwZTogdHlwZSxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2ROdWxsYWJsZSxcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcbmV4cG9ydCBjbGFzcyBab2REZWZhdWx0IGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHsgY3R4IH0gPSB0aGlzLl9wcm9jZXNzSW5wdXRQYXJhbXMoaW5wdXQpO1xuICAgICAgICBsZXQgZGF0YSA9IGN0eC5kYXRhO1xuICAgICAgICBpZiAoY3R4LnBhcnNlZFR5cGUgPT09IFpvZFBhcnNlZFR5cGUudW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBkYXRhID0gdGhpcy5fZGVmLmRlZmF1bHRWYWx1ZSgpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYuaW5uZXJUeXBlLl9wYXJzZSh7XG4gICAgICAgICAgICBkYXRhLFxuICAgICAgICAgICAgcGF0aDogY3R4LnBhdGgsXG4gICAgICAgICAgICBwYXJlbnQ6IGN0eCxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHJlbW92ZURlZmF1bHQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYuaW5uZXJUeXBlO1xuICAgIH1cbn1cblpvZERlZmF1bHQuY3JlYXRlID0gKHR5cGUsIHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kRGVmYXVsdCh7XG4gICAgICAgIGlubmVyVHlwZTogdHlwZSxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2REZWZhdWx0LFxuICAgICAgICBkZWZhdWx0VmFsdWU6IHR5cGVvZiBwYXJhbXMuZGVmYXVsdCA9PT0gXCJmdW5jdGlvblwiID8gcGFyYW1zLmRlZmF1bHQgOiAoKSA9PiBwYXJhbXMuZGVmYXVsdCxcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcbmV4cG9ydCBjbGFzcyBab2RDYXRjaCBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBjb25zdCB7IGN0eCB9ID0gdGhpcy5fcHJvY2Vzc0lucHV0UGFyYW1zKGlucHV0KTtcbiAgICAgICAgLy8gbmV3Q3R4IGlzIHVzZWQgdG8gbm90IGNvbGxlY3QgaXNzdWVzIGZyb20gaW5uZXIgdHlwZXMgaW4gY3R4XG4gICAgICAgIGNvbnN0IG5ld0N0eCA9IHtcbiAgICAgICAgICAgIC4uLmN0eCxcbiAgICAgICAgICAgIGNvbW1vbjoge1xuICAgICAgICAgICAgICAgIC4uLmN0eC5jb21tb24sXG4gICAgICAgICAgICAgICAgaXNzdWVzOiBbXSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMuX2RlZi5pbm5lclR5cGUuX3BhcnNlKHtcbiAgICAgICAgICAgIGRhdGE6IG5ld0N0eC5kYXRhLFxuICAgICAgICAgICAgcGF0aDogbmV3Q3R4LnBhdGgsXG4gICAgICAgICAgICBwYXJlbnQ6IHtcbiAgICAgICAgICAgICAgICAuLi5uZXdDdHgsXG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKGlzQXN5bmMocmVzdWx0KSkge1xuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdC50aGVuKChyZXN1bHQpID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IFwidmFsaWRcIixcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHJlc3VsdC5zdGF0dXMgPT09IFwidmFsaWRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgPyByZXN1bHQudmFsdWVcbiAgICAgICAgICAgICAgICAgICAgICAgIDogdGhpcy5fZGVmLmNhdGNoVmFsdWUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdldCBlcnJvcigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBab2RFcnJvcihuZXdDdHguY29tbW9uLmlzc3Vlcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnB1dDogbmV3Q3R4LmRhdGEsXG4gICAgICAgICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHN0YXR1czogXCJ2YWxpZFwiLFxuICAgICAgICAgICAgICAgIHZhbHVlOiByZXN1bHQuc3RhdHVzID09PSBcInZhbGlkXCJcbiAgICAgICAgICAgICAgICAgICAgPyByZXN1bHQudmFsdWVcbiAgICAgICAgICAgICAgICAgICAgOiB0aGlzLl9kZWYuY2F0Y2hWYWx1ZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICBnZXQgZXJyb3IoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBab2RFcnJvcihuZXdDdHguY29tbW9uLmlzc3Vlcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXQ6IG5ld0N0eC5kYXRhLFxuICAgICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmVtb3ZlQ2F0Y2goKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYuaW5uZXJUeXBlO1xuICAgIH1cbn1cblpvZENhdGNoLmNyZWF0ZSA9ICh0eXBlLCBwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZENhdGNoKHtcbiAgICAgICAgaW5uZXJUeXBlOiB0eXBlLFxuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZENhdGNoLFxuICAgICAgICBjYXRjaFZhbHVlOiB0eXBlb2YgcGFyYW1zLmNhdGNoID09PSBcImZ1bmN0aW9uXCIgPyBwYXJhbXMuY2F0Y2ggOiAoKSA9PiBwYXJhbXMuY2F0Y2gsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kTmFOIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHBhcnNlZFR5cGUgPSB0aGlzLl9nZXRUeXBlKGlucHV0KTtcbiAgICAgICAgaWYgKHBhcnNlZFR5cGUgIT09IFpvZFBhcnNlZFR5cGUubmFuKSB7XG4gICAgICAgICAgICBjb25zdCBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCk7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF90eXBlLFxuICAgICAgICAgICAgICAgIGV4cGVjdGVkOiBab2RQYXJzZWRUeXBlLm5hbixcbiAgICAgICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7IHN0YXR1czogXCJ2YWxpZFwiLCB2YWx1ZTogaW5wdXQuZGF0YSB9O1xuICAgIH1cbn1cblpvZE5hTi5jcmVhdGUgPSAocGFyYW1zKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBab2ROYU4oe1xuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZE5hTixcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcbmV4cG9ydCBjb25zdCBCUkFORCA9IFN5bWJvbChcInpvZF9icmFuZFwiKTtcbmV4cG9ydCBjbGFzcyBab2RCcmFuZGVkIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHsgY3R4IH0gPSB0aGlzLl9wcm9jZXNzSW5wdXRQYXJhbXMoaW5wdXQpO1xuICAgICAgICBjb25zdCBkYXRhID0gY3R4LmRhdGE7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYudHlwZS5fcGFyc2Uoe1xuICAgICAgICAgICAgZGF0YSxcbiAgICAgICAgICAgIHBhdGg6IGN0eC5wYXRoLFxuICAgICAgICAgICAgcGFyZW50OiBjdHgsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICB1bndyYXAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYudHlwZTtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgWm9kUGlwZWxpbmUgZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgeyBzdGF0dXMsIGN0eCB9ID0gdGhpcy5fcHJvY2Vzc0lucHV0UGFyYW1zKGlucHV0KTtcbiAgICAgICAgaWYgKGN0eC5jb21tb24uYXN5bmMpIHtcbiAgICAgICAgICAgIGNvbnN0IGhhbmRsZUFzeW5jID0gYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGluUmVzdWx0ID0gYXdhaXQgdGhpcy5fZGVmLmluLl9wYXJzZUFzeW5jKHtcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogY3R4LmRhdGEsXG4gICAgICAgICAgICAgICAgICAgIHBhdGg6IGN0eC5wYXRoLFxuICAgICAgICAgICAgICAgICAgICBwYXJlbnQ6IGN0eCxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBpZiAoaW5SZXN1bHQuc3RhdHVzID09PSBcImFib3J0ZWRcIilcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgICAgICAgICAgaWYgKGluUmVzdWx0LnN0YXR1cyA9PT0gXCJkaXJ0eVwiKSB7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gRElSVFkoaW5SZXN1bHQudmFsdWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi5vdXQuX3BhcnNlQXN5bmMoe1xuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogaW5SZXN1bHQudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXRoOiBjdHgucGF0aCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcmVudDogY3R4LFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgcmV0dXJuIGhhbmRsZUFzeW5jKCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBpblJlc3VsdCA9IHRoaXMuX2RlZi5pbi5fcGFyc2VTeW5jKHtcbiAgICAgICAgICAgICAgICBkYXRhOiBjdHguZGF0YSxcbiAgICAgICAgICAgICAgICBwYXRoOiBjdHgucGF0aCxcbiAgICAgICAgICAgICAgICBwYXJlbnQ6IGN0eCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKGluUmVzdWx0LnN0YXR1cyA9PT0gXCJhYm9ydGVkXCIpXG4gICAgICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgICAgICBpZiAoaW5SZXN1bHQuc3RhdHVzID09PSBcImRpcnR5XCIpIHtcbiAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IFwiZGlydHlcIixcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGluUmVzdWx0LnZhbHVlLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fZGVmLm91dC5fcGFyc2VTeW5jKHtcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogaW5SZXN1bHQudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgIHBhdGg6IGN0eC5wYXRoLFxuICAgICAgICAgICAgICAgICAgICBwYXJlbnQ6IGN0eCxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBzdGF0aWMgY3JlYXRlKGEsIGIpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBab2RQaXBlbGluZSh7XG4gICAgICAgICAgICBpbjogYSxcbiAgICAgICAgICAgIG91dDogYixcbiAgICAgICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kUGlwZWxpbmUsXG4gICAgICAgIH0pO1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBab2RSZWFkb25seSBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBjb25zdCByZXN1bHQgPSB0aGlzLl9kZWYuaW5uZXJUeXBlLl9wYXJzZShpbnB1dCk7XG4gICAgICAgIGNvbnN0IGZyZWV6ZSA9IChkYXRhKSA9PiB7XG4gICAgICAgICAgICBpZiAoaXNWYWxpZChkYXRhKSkge1xuICAgICAgICAgICAgICAgIGRhdGEudmFsdWUgPSBPYmplY3QuZnJlZXplKGRhdGEudmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGRhdGE7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBpc0FzeW5jKHJlc3VsdCkgPyByZXN1bHQudGhlbigoZGF0YSkgPT4gZnJlZXplKGRhdGEpKSA6IGZyZWV6ZShyZXN1bHQpO1xuICAgIH1cbiAgICB1bndyYXAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYuaW5uZXJUeXBlO1xuICAgIH1cbn1cblpvZFJlYWRvbmx5LmNyZWF0ZSA9ICh0eXBlLCBwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZFJlYWRvbmx5KHtcbiAgICAgICAgaW5uZXJUeXBlOiB0eXBlLFxuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZFJlYWRvbmx5LFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuLy8vLy8vLy8vLyAgICAgICAgICAgICAgICAgICAgLy8vLy8vLy8vL1xuLy8vLy8vLy8vLyAgICAgIHouY3VzdG9tICAgICAgLy8vLy8vLy8vL1xuLy8vLy8vLy8vLyAgICAgICAgICAgICAgICAgICAgLy8vLy8vLy8vL1xuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuZnVuY3Rpb24gY2xlYW5QYXJhbXMocGFyYW1zLCBkYXRhKSB7XG4gICAgY29uc3QgcCA9IHR5cGVvZiBwYXJhbXMgPT09IFwiZnVuY3Rpb25cIiA/IHBhcmFtcyhkYXRhKSA6IHR5cGVvZiBwYXJhbXMgPT09IFwic3RyaW5nXCIgPyB7IG1lc3NhZ2U6IHBhcmFtcyB9IDogcGFyYW1zO1xuICAgIGNvbnN0IHAyID0gdHlwZW9mIHAgPT09IFwic3RyaW5nXCIgPyB7IG1lc3NhZ2U6IHAgfSA6IHA7XG4gICAgcmV0dXJuIHAyO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGN1c3RvbShjaGVjaywgX3BhcmFtcyA9IHt9LCBcbi8qKlxuICogQGRlcHJlY2F0ZWRcbiAqXG4gKiBQYXNzIGBmYXRhbGAgaW50byB0aGUgcGFyYW1zIG9iamVjdCBpbnN0ZWFkOlxuICpcbiAqIGBgYHRzXG4gKiB6LnN0cmluZygpLmN1c3RvbSgodmFsKSA9PiB2YWwubGVuZ3RoID4gNSwgeyBmYXRhbDogZmFsc2UgfSlcbiAqIGBgYFxuICpcbiAqL1xuZmF0YWwpIHtcbiAgICBpZiAoY2hlY2spXG4gICAgICAgIHJldHVybiBab2RBbnkuY3JlYXRlKCkuc3VwZXJSZWZpbmUoKGRhdGEsIGN0eCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgciA9IGNoZWNrKGRhdGEpO1xuICAgICAgICAgICAgaWYgKHIgaW5zdGFuY2VvZiBQcm9taXNlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHIudGhlbigocikgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHBhcmFtcyA9IGNsZWFuUGFyYW1zKF9wYXJhbXMsIGRhdGEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgX2ZhdGFsID0gcGFyYW1zLmZhdGFsID8/IGZhdGFsID8/IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBjdHguYWRkSXNzdWUoeyBjb2RlOiBcImN1c3RvbVwiLCAuLi5wYXJhbXMsIGZhdGFsOiBfZmF0YWwgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghcikge1xuICAgICAgICAgICAgICAgIGNvbnN0IHBhcmFtcyA9IGNsZWFuUGFyYW1zKF9wYXJhbXMsIGRhdGEpO1xuICAgICAgICAgICAgICAgIGNvbnN0IF9mYXRhbCA9IHBhcmFtcy5mYXRhbCA/PyBmYXRhbCA/PyB0cnVlO1xuICAgICAgICAgICAgICAgIGN0eC5hZGRJc3N1ZSh7IGNvZGU6IFwiY3VzdG9tXCIsIC4uLnBhcmFtcywgZmF0YWw6IF9mYXRhbCB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfSk7XG4gICAgcmV0dXJuIFpvZEFueS5jcmVhdGUoKTtcbn1cbmV4cG9ydCB7IFpvZFR5cGUgYXMgU2NoZW1hLCBab2RUeXBlIGFzIFpvZFNjaGVtYSB9O1xuZXhwb3J0IGNvbnN0IGxhdGUgPSB7XG4gICAgb2JqZWN0OiBab2RPYmplY3QubGF6eWNyZWF0ZSxcbn07XG5leHBvcnQgdmFyIFpvZEZpcnN0UGFydHlUeXBlS2luZDtcbihmdW5jdGlvbiAoWm9kRmlyc3RQYXJ0eVR5cGVLaW5kKSB7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kU3RyaW5nXCJdID0gXCJab2RTdHJpbmdcIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2ROdW1iZXJcIl0gPSBcIlpvZE51bWJlclwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZE5hTlwiXSA9IFwiWm9kTmFOXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kQmlnSW50XCJdID0gXCJab2RCaWdJbnRcIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2RCb29sZWFuXCJdID0gXCJab2RCb29sZWFuXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kRGF0ZVwiXSA9IFwiWm9kRGF0ZVwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZFN5bWJvbFwiXSA9IFwiWm9kU3ltYm9sXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kVW5kZWZpbmVkXCJdID0gXCJab2RVbmRlZmluZWRcIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2ROdWxsXCJdID0gXCJab2ROdWxsXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kQW55XCJdID0gXCJab2RBbnlcIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2RVbmtub3duXCJdID0gXCJab2RVbmtub3duXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kTmV2ZXJcIl0gPSBcIlpvZE5ldmVyXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kVm9pZFwiXSA9IFwiWm9kVm9pZFwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZEFycmF5XCJdID0gXCJab2RBcnJheVwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZE9iamVjdFwiXSA9IFwiWm9kT2JqZWN0XCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kVW5pb25cIl0gPSBcIlpvZFVuaW9uXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kRGlzY3JpbWluYXRlZFVuaW9uXCJdID0gXCJab2REaXNjcmltaW5hdGVkVW5pb25cIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2RJbnRlcnNlY3Rpb25cIl0gPSBcIlpvZEludGVyc2VjdGlvblwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZFR1cGxlXCJdID0gXCJab2RUdXBsZVwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZFJlY29yZFwiXSA9IFwiWm9kUmVjb3JkXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kTWFwXCJdID0gXCJab2RNYXBcIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2RTZXRcIl0gPSBcIlpvZFNldFwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZEZ1bmN0aW9uXCJdID0gXCJab2RGdW5jdGlvblwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZExhenlcIl0gPSBcIlpvZExhenlcIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2RMaXRlcmFsXCJdID0gXCJab2RMaXRlcmFsXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kRW51bVwiXSA9IFwiWm9kRW51bVwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZEVmZmVjdHNcIl0gPSBcIlpvZEVmZmVjdHNcIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2ROYXRpdmVFbnVtXCJdID0gXCJab2ROYXRpdmVFbnVtXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kT3B0aW9uYWxcIl0gPSBcIlpvZE9wdGlvbmFsXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kTnVsbGFibGVcIl0gPSBcIlpvZE51bGxhYmxlXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kRGVmYXVsdFwiXSA9IFwiWm9kRGVmYXVsdFwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZENhdGNoXCJdID0gXCJab2RDYXRjaFwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZFByb21pc2VcIl0gPSBcIlpvZFByb21pc2VcIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2RCcmFuZGVkXCJdID0gXCJab2RCcmFuZGVkXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kUGlwZWxpbmVcIl0gPSBcIlpvZFBpcGVsaW5lXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kUmVhZG9ubHlcIl0gPSBcIlpvZFJlYWRvbmx5XCI7XG59KShab2RGaXJzdFBhcnR5VHlwZUtpbmQgfHwgKFpvZEZpcnN0UGFydHlUeXBlS2luZCA9IHt9KSk7XG4vLyByZXF1aXJlcyBUUyA0LjQrXG5jbGFzcyBDbGFzcyB7XG4gICAgY29uc3RydWN0b3IoLi4uXykgeyB9XG59XG5jb25zdCBpbnN0YW5jZU9mVHlwZSA9IChcbi8vIGNvbnN0IGluc3RhbmNlT2ZUeXBlID0gPFQgZXh0ZW5kcyBuZXcgKC4uLmFyZ3M6IGFueVtdKSA9PiBhbnk+KFxuY2xzLCBwYXJhbXMgPSB7XG4gICAgbWVzc2FnZTogYElucHV0IG5vdCBpbnN0YW5jZSBvZiAke2Nscy5uYW1lfWAsXG59KSA9PiBjdXN0b20oKGRhdGEpID0+IGRhdGEgaW5zdGFuY2VvZiBjbHMsIHBhcmFtcyk7XG5jb25zdCBzdHJpbmdUeXBlID0gWm9kU3RyaW5nLmNyZWF0ZTtcbmNvbnN0IG51bWJlclR5cGUgPSBab2ROdW1iZXIuY3JlYXRlO1xuY29uc3QgbmFuVHlwZSA9IFpvZE5hTi5jcmVhdGU7XG5jb25zdCBiaWdJbnRUeXBlID0gWm9kQmlnSW50LmNyZWF0ZTtcbmNvbnN0IGJvb2xlYW5UeXBlID0gWm9kQm9vbGVhbi5jcmVhdGU7XG5jb25zdCBkYXRlVHlwZSA9IFpvZERhdGUuY3JlYXRlO1xuY29uc3Qgc3ltYm9sVHlwZSA9IFpvZFN5bWJvbC5jcmVhdGU7XG5jb25zdCB1bmRlZmluZWRUeXBlID0gWm9kVW5kZWZpbmVkLmNyZWF0ZTtcbmNvbnN0IG51bGxUeXBlID0gWm9kTnVsbC5jcmVhdGU7XG5jb25zdCBhbnlUeXBlID0gWm9kQW55LmNyZWF0ZTtcbmNvbnN0IHVua25vd25UeXBlID0gWm9kVW5rbm93bi5jcmVhdGU7XG5jb25zdCBuZXZlclR5cGUgPSBab2ROZXZlci5jcmVhdGU7XG5jb25zdCB2b2lkVHlwZSA9IFpvZFZvaWQuY3JlYXRlO1xuY29uc3QgYXJyYXlUeXBlID0gWm9kQXJyYXkuY3JlYXRlO1xuY29uc3Qgb2JqZWN0VHlwZSA9IFpvZE9iamVjdC5jcmVhdGU7XG5jb25zdCBzdHJpY3RPYmplY3RUeXBlID0gWm9kT2JqZWN0LnN0cmljdENyZWF0ZTtcbmNvbnN0IHVuaW9uVHlwZSA9IFpvZFVuaW9uLmNyZWF0ZTtcbmNvbnN0IGRpc2NyaW1pbmF0ZWRVbmlvblR5cGUgPSBab2REaXNjcmltaW5hdGVkVW5pb24uY3JlYXRlO1xuY29uc3QgaW50ZXJzZWN0aW9uVHlwZSA9IFpvZEludGVyc2VjdGlvbi5jcmVhdGU7XG5jb25zdCB0dXBsZVR5cGUgPSBab2RUdXBsZS5jcmVhdGU7XG5jb25zdCByZWNvcmRUeXBlID0gWm9kUmVjb3JkLmNyZWF0ZTtcbmNvbnN0IG1hcFR5cGUgPSBab2RNYXAuY3JlYXRlO1xuY29uc3Qgc2V0VHlwZSA9IFpvZFNldC5jcmVhdGU7XG5jb25zdCBmdW5jdGlvblR5cGUgPSBab2RGdW5jdGlvbi5jcmVhdGU7XG5jb25zdCBsYXp5VHlwZSA9IFpvZExhenkuY3JlYXRlO1xuY29uc3QgbGl0ZXJhbFR5cGUgPSBab2RMaXRlcmFsLmNyZWF0ZTtcbmNvbnN0IGVudW1UeXBlID0gWm9kRW51bS5jcmVhdGU7XG5jb25zdCBuYXRpdmVFbnVtVHlwZSA9IFpvZE5hdGl2ZUVudW0uY3JlYXRlO1xuY29uc3QgcHJvbWlzZVR5cGUgPSBab2RQcm9taXNlLmNyZWF0ZTtcbmNvbnN0IGVmZmVjdHNUeXBlID0gWm9kRWZmZWN0cy5jcmVhdGU7XG5jb25zdCBvcHRpb25hbFR5cGUgPSBab2RPcHRpb25hbC5jcmVhdGU7XG5jb25zdCBudWxsYWJsZVR5cGUgPSBab2ROdWxsYWJsZS5jcmVhdGU7XG5jb25zdCBwcmVwcm9jZXNzVHlwZSA9IFpvZEVmZmVjdHMuY3JlYXRlV2l0aFByZXByb2Nlc3M7XG5jb25zdCBwaXBlbGluZVR5cGUgPSBab2RQaXBlbGluZS5jcmVhdGU7XG5jb25zdCBvc3RyaW5nID0gKCkgPT4gc3RyaW5nVHlwZSgpLm9wdGlvbmFsKCk7XG5jb25zdCBvbnVtYmVyID0gKCkgPT4gbnVtYmVyVHlwZSgpLm9wdGlvbmFsKCk7XG5jb25zdCBvYm9vbGVhbiA9ICgpID0+IGJvb2xlYW5UeXBlKCkub3B0aW9uYWwoKTtcbmV4cG9ydCBjb25zdCBjb2VyY2UgPSB7XG4gICAgc3RyaW5nOiAoKGFyZykgPT4gWm9kU3RyaW5nLmNyZWF0ZSh7IC4uLmFyZywgY29lcmNlOiB0cnVlIH0pKSxcbiAgICBudW1iZXI6ICgoYXJnKSA9PiBab2ROdW1iZXIuY3JlYXRlKHsgLi4uYXJnLCBjb2VyY2U6IHRydWUgfSkpLFxuICAgIGJvb2xlYW46ICgoYXJnKSA9PiBab2RCb29sZWFuLmNyZWF0ZSh7XG4gICAgICAgIC4uLmFyZyxcbiAgICAgICAgY29lcmNlOiB0cnVlLFxuICAgIH0pKSxcbiAgICBiaWdpbnQ6ICgoYXJnKSA9PiBab2RCaWdJbnQuY3JlYXRlKHsgLi4uYXJnLCBjb2VyY2U6IHRydWUgfSkpLFxuICAgIGRhdGU6ICgoYXJnKSA9PiBab2REYXRlLmNyZWF0ZSh7IC4uLmFyZywgY29lcmNlOiB0cnVlIH0pKSxcbn07XG5leHBvcnQgeyBhbnlUeXBlIGFzIGFueSwgYXJyYXlUeXBlIGFzIGFycmF5LCBiaWdJbnRUeXBlIGFzIGJpZ2ludCwgYm9vbGVhblR5cGUgYXMgYm9vbGVhbiwgZGF0ZVR5cGUgYXMgZGF0ZSwgZGlzY3JpbWluYXRlZFVuaW9uVHlwZSBhcyBkaXNjcmltaW5hdGVkVW5pb24sIGVmZmVjdHNUeXBlIGFzIGVmZmVjdCwgZW51bVR5cGUgYXMgZW51bSwgZnVuY3Rpb25UeXBlIGFzIGZ1bmN0aW9uLCBpbnN0YW5jZU9mVHlwZSBhcyBpbnN0YW5jZW9mLCBpbnRlcnNlY3Rpb25UeXBlIGFzIGludGVyc2VjdGlvbiwgbGF6eVR5cGUgYXMgbGF6eSwgbGl0ZXJhbFR5cGUgYXMgbGl0ZXJhbCwgbWFwVHlwZSBhcyBtYXAsIG5hblR5cGUgYXMgbmFuLCBuYXRpdmVFbnVtVHlwZSBhcyBuYXRpdmVFbnVtLCBuZXZlclR5cGUgYXMgbmV2ZXIsIG51bGxUeXBlIGFzIG51bGwsIG51bGxhYmxlVHlwZSBhcyBudWxsYWJsZSwgbnVtYmVyVHlwZSBhcyBudW1iZXIsIG9iamVjdFR5cGUgYXMgb2JqZWN0LCBvYm9vbGVhbiwgb251bWJlciwgb3B0aW9uYWxUeXBlIGFzIG9wdGlvbmFsLCBvc3RyaW5nLCBwaXBlbGluZVR5cGUgYXMgcGlwZWxpbmUsIHByZXByb2Nlc3NUeXBlIGFzIHByZXByb2Nlc3MsIHByb21pc2VUeXBlIGFzIHByb21pc2UsIHJlY29yZFR5cGUgYXMgcmVjb3JkLCBzZXRUeXBlIGFzIHNldCwgc3RyaWN0T2JqZWN0VHlwZSBhcyBzdHJpY3RPYmplY3QsIHN0cmluZ1R5cGUgYXMgc3RyaW5nLCBzeW1ib2xUeXBlIGFzIHN5bWJvbCwgZWZmZWN0c1R5cGUgYXMgdHJhbnNmb3JtZXIsIHR1cGxlVHlwZSBhcyB0dXBsZSwgdW5kZWZpbmVkVHlwZSBhcyB1bmRlZmluZWQsIHVuaW9uVHlwZSBhcyB1bmlvbiwgdW5rbm93blR5cGUgYXMgdW5rbm93biwgdm9pZFR5cGUgYXMgdm9pZCwgfTtcbmV4cG9ydCBjb25zdCBORVZFUiA9IElOVkFMSUQ7XG4iLCJleHBvcnQgZnVuY3Rpb24gcGFyc2VBbnlEZWYoKSB7XG4gICAgcmV0dXJuIHt9O1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YW55Lm1qcy5tYXAiLCJpbXBvcnQgeyBab2RGaXJzdFBhcnR5VHlwZUtpbmQgfSBmcm9tICd6b2QvdjMnO1xuaW1wb3J0IHsgc2V0UmVzcG9uc2VWYWx1ZUFuZEVycm9ycyB9IGZyb20gXCIuLi9lcnJvck1lc3NhZ2VzLm1qc1wiO1xuaW1wb3J0IHsgcGFyc2VEZWYgfSBmcm9tIFwiLi4vcGFyc2VEZWYubWpzXCI7XG5leHBvcnQgZnVuY3Rpb24gcGFyc2VBcnJheURlZihkZWYsIHJlZnMpIHtcbiAgICBjb25zdCByZXMgPSB7XG4gICAgICAgIHR5cGU6ICdhcnJheScsXG4gICAgfTtcbiAgICBpZiAoZGVmLnR5cGU/Ll9kZWY/LnR5cGVOYW1lICE9PSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kQW55KSB7XG4gICAgICAgIHJlcy5pdGVtcyA9IHBhcnNlRGVmKGRlZi50eXBlLl9kZWYsIHtcbiAgICAgICAgICAgIC4uLnJlZnMsXG4gICAgICAgICAgICBjdXJyZW50UGF0aDogWy4uLnJlZnMuY3VycmVudFBhdGgsICdpdGVtcyddLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgaWYgKGRlZi5taW5MZW5ndGgpIHtcbiAgICAgICAgc2V0UmVzcG9uc2VWYWx1ZUFuZEVycm9ycyhyZXMsICdtaW5JdGVtcycsIGRlZi5taW5MZW5ndGgudmFsdWUsIGRlZi5taW5MZW5ndGgubWVzc2FnZSwgcmVmcyk7XG4gICAgfVxuICAgIGlmIChkZWYubWF4TGVuZ3RoKSB7XG4gICAgICAgIHNldFJlc3BvbnNlVmFsdWVBbmRFcnJvcnMocmVzLCAnbWF4SXRlbXMnLCBkZWYubWF4TGVuZ3RoLnZhbHVlLCBkZWYubWF4TGVuZ3RoLm1lc3NhZ2UsIHJlZnMpO1xuICAgIH1cbiAgICBpZiAoZGVmLmV4YWN0TGVuZ3RoKSB7XG4gICAgICAgIHNldFJlc3BvbnNlVmFsdWVBbmRFcnJvcnMocmVzLCAnbWluSXRlbXMnLCBkZWYuZXhhY3RMZW5ndGgudmFsdWUsIGRlZi5leGFjdExlbmd0aC5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgc2V0UmVzcG9uc2VWYWx1ZUFuZEVycm9ycyhyZXMsICdtYXhJdGVtcycsIGRlZi5leGFjdExlbmd0aC52YWx1ZSwgZGVmLmV4YWN0TGVuZ3RoLm1lc3NhZ2UsIHJlZnMpO1xuICAgIH1cbiAgICByZXR1cm4gcmVzO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXJyYXkubWpzLm1hcCIsImltcG9ydCB7IHNldFJlc3BvbnNlVmFsdWVBbmRFcnJvcnMgfSBmcm9tIFwiLi4vZXJyb3JNZXNzYWdlcy5tanNcIjtcbmV4cG9ydCBmdW5jdGlvbiBwYXJzZUJpZ2ludERlZihkZWYsIHJlZnMpIHtcbiAgICBjb25zdCByZXMgPSB7XG4gICAgICAgIHR5cGU6ICdpbnRlZ2VyJyxcbiAgICAgICAgZm9ybWF0OiAnaW50NjQnLFxuICAgIH07XG4gICAgaWYgKCFkZWYuY2hlY2tzKVxuICAgICAgICByZXR1cm4gcmVzO1xuICAgIGZvciAoY29uc3QgY2hlY2sgb2YgZGVmLmNoZWNrcykge1xuICAgICAgICBzd2l0Y2ggKGNoZWNrLmtpbmQpIHtcbiAgICAgICAgICAgIGNhc2UgJ21pbic6XG4gICAgICAgICAgICAgICAgaWYgKHJlZnMudGFyZ2V0ID09PSAnanNvblNjaGVtYTcnKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjaGVjay5pbmNsdXNpdmUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldFJlc3BvbnNlVmFsdWVBbmRFcnJvcnMocmVzLCAnbWluaW11bScsIGNoZWNrLnZhbHVlLCBjaGVjay5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldFJlc3BvbnNlVmFsdWVBbmRFcnJvcnMocmVzLCAnZXhjbHVzaXZlTWluaW11bScsIGNoZWNrLnZhbHVlLCBjaGVjay5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFjaGVjay5pbmNsdXNpdmUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcy5leGNsdXNpdmVNaW5pbXVtID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBzZXRSZXNwb25zZVZhbHVlQW5kRXJyb3JzKHJlcywgJ21pbmltdW0nLCBjaGVjay52YWx1ZSwgY2hlY2subWVzc2FnZSwgcmVmcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnbWF4JzpcbiAgICAgICAgICAgICAgICBpZiAocmVmcy50YXJnZXQgPT09ICdqc29uU2NoZW1hNycpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNoZWNrLmluY2x1c2l2ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0UmVzcG9uc2VWYWx1ZUFuZEVycm9ycyhyZXMsICdtYXhpbXVtJywgY2hlY2sudmFsdWUsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0UmVzcG9uc2VWYWx1ZUFuZEVycm9ycyhyZXMsICdleGNsdXNpdmVNYXhpbXVtJywgY2hlY2sudmFsdWUsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWNoZWNrLmluY2x1c2l2ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzLmV4Y2x1c2l2ZU1heGltdW0gPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHNldFJlc3BvbnNlVmFsdWVBbmRFcnJvcnMocmVzLCAnbWF4aW11bScsIGNoZWNrLnZhbHVlLCBjaGVjay5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdtdWx0aXBsZU9mJzpcbiAgICAgICAgICAgICAgICBzZXRSZXNwb25zZVZhbHVlQW5kRXJyb3JzKHJlcywgJ211bHRpcGxlT2YnLCBjaGVjay52YWx1ZSwgY2hlY2subWVzc2FnZSwgcmVmcyk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHJlcztcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWJpZ2ludC5tanMubWFwIiwiZXhwb3J0IGZ1bmN0aW9uIHBhcnNlQm9vbGVhbkRlZigpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICB0eXBlOiAnYm9vbGVhbicsXG4gICAgfTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWJvb2xlYW4ubWpzLm1hcCIsImltcG9ydCB7IHBhcnNlRGVmIH0gZnJvbSBcIi4uL3BhcnNlRGVmLm1qc1wiO1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlQnJhbmRlZERlZihfZGVmLCByZWZzKSB7XG4gICAgcmV0dXJuIHBhcnNlRGVmKF9kZWYudHlwZS5fZGVmLCByZWZzKTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWJyYW5kZWQubWpzLm1hcCIsImltcG9ydCB7IHBhcnNlRGVmIH0gZnJvbSBcIi4uL3BhcnNlRGVmLm1qc1wiO1xuZXhwb3J0IGNvbnN0IHBhcnNlQ2F0Y2hEZWYgPSAoZGVmLCByZWZzKSA9PiB7XG4gICAgcmV0dXJuIHBhcnNlRGVmKGRlZi5pbm5lclR5cGUuX2RlZiwgcmVmcyk7XG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y2F0Y2gubWpzLm1hcCIsImltcG9ydCB7IHNldFJlc3BvbnNlVmFsdWVBbmRFcnJvcnMgfSBmcm9tIFwiLi4vZXJyb3JNZXNzYWdlcy5tanNcIjtcbmV4cG9ydCBmdW5jdGlvbiBwYXJzZURhdGVEZWYoZGVmLCByZWZzLCBvdmVycmlkZURhdGVTdHJhdGVneSkge1xuICAgIGNvbnN0IHN0cmF0ZWd5ID0gb3ZlcnJpZGVEYXRlU3RyYXRlZ3kgPz8gcmVmcy5kYXRlU3RyYXRlZ3k7XG4gICAgaWYgKEFycmF5LmlzQXJyYXkoc3RyYXRlZ3kpKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBhbnlPZjogc3RyYXRlZ3kubWFwKChpdGVtLCBpKSA9PiBwYXJzZURhdGVEZWYoZGVmLCByZWZzLCBpdGVtKSksXG4gICAgICAgIH07XG4gICAgfVxuICAgIHN3aXRjaCAoc3RyYXRlZ3kpIHtcbiAgICAgICAgY2FzZSAnc3RyaW5nJzpcbiAgICAgICAgY2FzZSAnZm9ybWF0OmRhdGUtdGltZSc6XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHR5cGU6ICdzdHJpbmcnLFxuICAgICAgICAgICAgICAgIGZvcm1hdDogJ2RhdGUtdGltZScsXG4gICAgICAgICAgICB9O1xuICAgICAgICBjYXNlICdmb3JtYXQ6ZGF0ZSc6XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHR5cGU6ICdzdHJpbmcnLFxuICAgICAgICAgICAgICAgIGZvcm1hdDogJ2RhdGUnLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgY2FzZSAnaW50ZWdlcic6XG4gICAgICAgICAgICByZXR1cm4gaW50ZWdlckRhdGVQYXJzZXIoZGVmLCByZWZzKTtcbiAgICB9XG59XG5jb25zdCBpbnRlZ2VyRGF0ZVBhcnNlciA9IChkZWYsIHJlZnMpID0+IHtcbiAgICBjb25zdCByZXMgPSB7XG4gICAgICAgIHR5cGU6ICdpbnRlZ2VyJyxcbiAgICAgICAgZm9ybWF0OiAndW5peC10aW1lJyxcbiAgICB9O1xuICAgIGlmIChyZWZzLnRhcmdldCA9PT0gJ29wZW5BcGkzJykge1xuICAgICAgICByZXR1cm4gcmVzO1xuICAgIH1cbiAgICBmb3IgKGNvbnN0IGNoZWNrIG9mIGRlZi5jaGVja3MpIHtcbiAgICAgICAgc3dpdGNoIChjaGVjay5raW5kKSB7XG4gICAgICAgICAgICBjYXNlICdtaW4nOlxuICAgICAgICAgICAgICAgIHNldFJlc3BvbnNlVmFsdWVBbmRFcnJvcnMocmVzLCAnbWluaW11bScsIGNoZWNrLnZhbHVlLCAvLyBUaGlzIGlzIGluIG1pbGxpc2Vjb25kc1xuICAgICAgICAgICAgICAgIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnbWF4JzpcbiAgICAgICAgICAgICAgICBzZXRSZXNwb25zZVZhbHVlQW5kRXJyb3JzKHJlcywgJ21heGltdW0nLCBjaGVjay52YWx1ZSwgLy8gVGhpcyBpcyBpbiBtaWxsaXNlY29uZHNcbiAgICAgICAgICAgICAgICBjaGVjay5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcmVzO1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGUubWpzLm1hcCIsImltcG9ydCB7IHBhcnNlRGVmIH0gZnJvbSBcIi4uL3BhcnNlRGVmLm1qc1wiO1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlRGVmYXVsdERlZihfZGVmLCByZWZzKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgLi4ucGFyc2VEZWYoX2RlZi5pbm5lclR5cGUuX2RlZiwgcmVmcyksXG4gICAgICAgIGRlZmF1bHQ6IF9kZWYuZGVmYXVsdFZhbHVlKCksXG4gICAgfTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRlZmF1bHQubWpzLm1hcCIsImltcG9ydCB7IHBhcnNlRGVmIH0gZnJvbSBcIi4uL3BhcnNlRGVmLm1qc1wiO1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlRWZmZWN0c0RlZihfZGVmLCByZWZzLCBmb3JjZVJlc29sdXRpb24pIHtcbiAgICByZXR1cm4gcmVmcy5lZmZlY3RTdHJhdGVneSA9PT0gJ2lucHV0JyA/IHBhcnNlRGVmKF9kZWYuc2NoZW1hLl9kZWYsIHJlZnMsIGZvcmNlUmVzb2x1dGlvbikgOiB7fTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWVmZmVjdHMubWpzLm1hcCIsImV4cG9ydCBmdW5jdGlvbiBwYXJzZUVudW1EZWYoZGVmKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogJ3N0cmluZycsXG4gICAgICAgIGVudW06IFsuLi5kZWYudmFsdWVzXSxcbiAgICB9O1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZW51bS5tanMubWFwIiwiaW1wb3J0IHsgcGFyc2VEZWYgfSBmcm9tIFwiLi4vcGFyc2VEZWYubWpzXCI7XG5jb25zdCBpc0pzb25TY2hlbWE3QWxsT2ZUeXBlID0gKHR5cGUpID0+IHtcbiAgICBpZiAoJ3R5cGUnIGluIHR5cGUgJiYgdHlwZS50eXBlID09PSAnc3RyaW5nJylcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIHJldHVybiAnYWxsT2YnIGluIHR5cGU7XG59O1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlSW50ZXJzZWN0aW9uRGVmKGRlZiwgcmVmcykge1xuICAgIGNvbnN0IGFsbE9mID0gW1xuICAgICAgICBwYXJzZURlZihkZWYubGVmdC5fZGVmLCB7XG4gICAgICAgICAgICAuLi5yZWZzLFxuICAgICAgICAgICAgY3VycmVudFBhdGg6IFsuLi5yZWZzLmN1cnJlbnRQYXRoLCAnYWxsT2YnLCAnMCddLFxuICAgICAgICB9KSxcbiAgICAgICAgcGFyc2VEZWYoZGVmLnJpZ2h0Ll9kZWYsIHtcbiAgICAgICAgICAgIC4uLnJlZnMsXG4gICAgICAgICAgICBjdXJyZW50UGF0aDogWy4uLnJlZnMuY3VycmVudFBhdGgsICdhbGxPZicsICcxJ10sXG4gICAgICAgIH0pLFxuICAgIF0uZmlsdGVyKCh4KSA9PiAhIXgpO1xuICAgIGxldCB1bmV2YWx1YXRlZFByb3BlcnRpZXMgPSByZWZzLnRhcmdldCA9PT0gJ2pzb25TY2hlbWEyMDE5LTA5JyA/IHsgdW5ldmFsdWF0ZWRQcm9wZXJ0aWVzOiBmYWxzZSB9IDogdW5kZWZpbmVkO1xuICAgIGNvbnN0IG1lcmdlZEFsbE9mID0gW107XG4gICAgLy8gSWYgZWl0aGVyIG9mIHRoZSBzY2hlbWFzIGlzIGFuIGFsbE9mLCBtZXJnZSB0aGVtIGludG8gYSBzaW5nbGUgYWxsT2ZcbiAgICBhbGxPZi5mb3JFYWNoKChzY2hlbWEpID0+IHtcbiAgICAgICAgaWYgKGlzSnNvblNjaGVtYTdBbGxPZlR5cGUoc2NoZW1hKSkge1xuICAgICAgICAgICAgbWVyZ2VkQWxsT2YucHVzaCguLi5zY2hlbWEuYWxsT2YpO1xuICAgICAgICAgICAgaWYgKHNjaGVtYS51bmV2YWx1YXRlZFByb3BlcnRpZXMgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIC8vIElmIG9uZSBvZiB0aGUgc2NoZW1hcyBoYXMgbm8gdW5ldmFsdWF0ZWRQcm9wZXJ0aWVzIHNldCxcbiAgICAgICAgICAgICAgICAvLyB0aGUgbWVyZ2VkIHNjaGVtYSBzaG91bGQgYWxzbyBoYXZlIG5vIHVuZXZhbHVhdGVkUHJvcGVydGllcyBzZXRcbiAgICAgICAgICAgICAgICB1bmV2YWx1YXRlZFByb3BlcnRpZXMgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBsZXQgbmVzdGVkU2NoZW1hID0gc2NoZW1hO1xuICAgICAgICAgICAgaWYgKCdhZGRpdGlvbmFsUHJvcGVydGllcycgaW4gc2NoZW1hICYmIHNjaGVtYS5hZGRpdGlvbmFsUHJvcGVydGllcyA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB7IGFkZGl0aW9uYWxQcm9wZXJ0aWVzLCAuLi5yZXN0IH0gPSBzY2hlbWE7XG4gICAgICAgICAgICAgICAgbmVzdGVkU2NoZW1hID0gcmVzdDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIEFzIHNvb24gYXMgb25lIG9mIHRoZSBzY2hlbWFzIGhhcyBhZGRpdGlvbmFsUHJvcGVydGllcyBzZXQgbm90IHRvIGZhbHNlLCB3ZSBhbGxvdyB1bmV2YWx1YXRlZFByb3BlcnRpZXNcbiAgICAgICAgICAgICAgICB1bmV2YWx1YXRlZFByb3BlcnRpZXMgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBtZXJnZWRBbGxPZi5wdXNoKG5lc3RlZFNjaGVtYSk7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gbWVyZ2VkQWxsT2YubGVuZ3RoID9cbiAgICAgICAge1xuICAgICAgICAgICAgYWxsT2Y6IG1lcmdlZEFsbE9mLFxuICAgICAgICAgICAgLi4udW5ldmFsdWF0ZWRQcm9wZXJ0aWVzLFxuICAgICAgICB9XG4gICAgICAgIDogdW5kZWZpbmVkO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW50ZXJzZWN0aW9uLm1qcy5tYXAiLCJleHBvcnQgZnVuY3Rpb24gcGFyc2VMaXRlcmFsRGVmKGRlZiwgcmVmcykge1xuICAgIGNvbnN0IHBhcnNlZFR5cGUgPSB0eXBlb2YgZGVmLnZhbHVlO1xuICAgIGlmIChwYXJzZWRUeXBlICE9PSAnYmlnaW50JyAmJlxuICAgICAgICBwYXJzZWRUeXBlICE9PSAnbnVtYmVyJyAmJlxuICAgICAgICBwYXJzZWRUeXBlICE9PSAnYm9vbGVhbicgJiZcbiAgICAgICAgcGFyc2VkVHlwZSAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHR5cGU6IEFycmF5LmlzQXJyYXkoZGVmLnZhbHVlKSA/ICdhcnJheScgOiAnb2JqZWN0JyxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgaWYgKHJlZnMudGFyZ2V0ID09PSAnb3BlbkFwaTMnKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB0eXBlOiBwYXJzZWRUeXBlID09PSAnYmlnaW50JyA/ICdpbnRlZ2VyJyA6IHBhcnNlZFR5cGUsXG4gICAgICAgICAgICBlbnVtOiBbZGVmLnZhbHVlXSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogcGFyc2VkVHlwZSA9PT0gJ2JpZ2ludCcgPyAnaW50ZWdlcicgOiBwYXJzZWRUeXBlLFxuICAgICAgICBjb25zdDogZGVmLnZhbHVlLFxuICAgIH07XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1saXRlcmFsLm1qcy5tYXAiLCJpbXBvcnQgeyBzZXRSZXNwb25zZVZhbHVlQW5kRXJyb3JzIH0gZnJvbSBcIi4uL2Vycm9yTWVzc2FnZXMubWpzXCI7XG5sZXQgZW1vamlSZWdleDtcbi8qKlxuICogR2VuZXJhdGVkIGZyb20gdGhlIHJlZ3VsYXIgZXhwcmVzc2lvbnMgZm91bmQgaGVyZSBhcyBvZiAyMDI0LTA1LTIyOlxuICogaHR0cHM6Ly9naXRodWIuY29tL2NvbGluaGFja3Mvem9kL2Jsb2IvbWFzdGVyL3NyYy90eXBlcy50cy5cbiAqXG4gKiBFeHByZXNzaW9ucyB3aXRoIC9pIGZsYWcgaGF2ZSBiZWVuIGNoYW5nZWQgYWNjb3JkaW5nbHkuXG4gKi9cbmV4cG9ydCBjb25zdCB6b2RQYXR0ZXJucyA9IHtcbiAgICAvKipcbiAgICAgKiBgY2Agd2FzIGNoYW5nZWQgdG8gYFtjQ11gIHRvIHJlcGxpY2F0ZSAvaSBmbGFnXG4gICAgICovXG4gICAgY3VpZDogL15bY0NdW15cXHMtXXs4LH0kLyxcbiAgICBjdWlkMjogL15bMC05YS16XSskLyxcbiAgICB1bGlkOiAvXlswLTlBLUhKS01OUC1UVi1aXXsyNn0kLyxcbiAgICAvKipcbiAgICAgKiBgYS16YCB3YXMgYWRkZWQgdG8gcmVwbGljYXRlIC9pIGZsYWdcbiAgICAgKi9cbiAgICBlbWFpbDogL14oPyFcXC4pKD8hLipcXC5cXC4pKFthLXpBLVowLTlfJytcXC1cXC5dKilbYS16QS1aMC05XystXUAoW2EtekEtWjAtOV1bYS16QS1aMC05XFwtXSpcXC4pK1thLXpBLVpdezIsfSQvLFxuICAgIC8qKlxuICAgICAqIENvbnN0cnVjdGVkIGEgdmFsaWQgVW5pY29kZSBSZWdFeHBcbiAgICAgKlxuICAgICAqIExhemlseSBpbnN0YW50aWF0ZSBzaW5jZSB0aGlzIHR5cGUgb2YgcmVnZXggaXNuJ3Qgc3VwcG9ydGVkXG4gICAgICogaW4gYWxsIGVudnMgKGUuZy4gUmVhY3QgTmF0aXZlKS5cbiAgICAgKlxuICAgICAqIFNlZTpcbiAgICAgKiBodHRwczovL2dpdGh1Yi5jb20vY29saW5oYWNrcy96b2QvaXNzdWVzLzI0MzNcbiAgICAgKiBGaXggaW4gWm9kOlxuICAgICAqIGh0dHBzOi8vZ2l0aHViLmNvbS9jb2xpbmhhY2tzL3pvZC9jb21taXQvOTM0MGZkNTFlNDg1NzZhNzVhZGM5MTliZmY2NWRiYzRhNWQ0Yzk5YlxuICAgICAqL1xuICAgIGVtb2ppOiAoKSA9PiB7XG4gICAgICAgIGlmIChlbW9qaVJlZ2V4ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGVtb2ppUmVnZXggPSBSZWdFeHAoJ14oXFxcXHB7RXh0ZW5kZWRfUGljdG9ncmFwaGljfXxcXFxccHtFbW9qaV9Db21wb25lbnR9KSskJywgJ3UnKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZW1vamlSZWdleDtcbiAgICB9LFxuICAgIC8qKlxuICAgICAqIFVudXNlZFxuICAgICAqL1xuICAgIHV1aWQ6IC9eWzAtOWEtZkEtRl17OH1cXGItWzAtOWEtZkEtRl17NH1cXGItWzAtOWEtZkEtRl17NH1cXGItWzAtOWEtZkEtRl17NH1cXGItWzAtOWEtZkEtRl17MTJ9JC8sXG4gICAgLyoqXG4gICAgICogVW51c2VkXG4gICAgICovXG4gICAgaXB2NDogL14oPzooPzoyNVswLTVdfDJbMC00XVswLTldfDFbMC05XVswLTldfFsxLTldWzAtOV18WzAtOV0pXFwuKXszfSg/OjI1WzAtNV18MlswLTRdWzAtOV18MVswLTldWzAtOV18WzEtOV1bMC05XXxbMC05XSkkLyxcbiAgICAvKipcbiAgICAgKiBVbnVzZWRcbiAgICAgKi9cbiAgICBpcHY2OiAvXigoW2EtZjAtOV17MSw0fTopezd9fDo6KFthLWYwLTldezEsNH06KXswLDZ9fChbYS1mMC05XXsxLDR9Oil7MX06KFthLWYwLTldezEsNH06KXswLDV9fChbYS1mMC05XXsxLDR9Oil7Mn06KFthLWYwLTldezEsNH06KXswLDR9fChbYS1mMC05XXsxLDR9Oil7M306KFthLWYwLTldezEsNH06KXswLDN9fChbYS1mMC05XXsxLDR9Oil7NH06KFthLWYwLTldezEsNH06KXswLDJ9fChbYS1mMC05XXsxLDR9Oil7NX06KFthLWYwLTldezEsNH06KXswLDF9KShbYS1mMC05XXsxLDR9fCgoKDI1WzAtNV0pfCgyWzAtNF1bMC05XSl8KDFbMC05XXsyfSl8KFswLTldezEsMn0pKVxcLil7M30oKDI1WzAtNV0pfCgyWzAtNF1bMC05XSl8KDFbMC05XXsyfSl8KFswLTldezEsMn0pKSkkLyxcbiAgICBiYXNlNjQ6IC9eKFswLTlhLXpBLVorL117NH0pKigoWzAtOWEtekEtWisvXXsyfT09KXwoWzAtOWEtekEtWisvXXszfT0pKT8kLyxcbiAgICBuYW5vaWQ6IC9eW2EtekEtWjAtOV8tXXsyMX0kLyxcbn07XG5leHBvcnQgZnVuY3Rpb24gcGFyc2VTdHJpbmdEZWYoZGVmLCByZWZzKSB7XG4gICAgY29uc3QgcmVzID0ge1xuICAgICAgICB0eXBlOiAnc3RyaW5nJyxcbiAgICB9O1xuICAgIGZ1bmN0aW9uIHByb2Nlc3NQYXR0ZXJuKHZhbHVlKSB7XG4gICAgICAgIHJldHVybiByZWZzLnBhdHRlcm5TdHJhdGVneSA9PT0gJ2VzY2FwZScgPyBlc2NhcGVOb25BbHBoYU51bWVyaWModmFsdWUpIDogdmFsdWU7XG4gICAgfVxuICAgIGlmIChkZWYuY2hlY2tzKSB7XG4gICAgICAgIGZvciAoY29uc3QgY2hlY2sgb2YgZGVmLmNoZWNrcykge1xuICAgICAgICAgICAgc3dpdGNoIChjaGVjay5raW5kKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAnbWluJzpcbiAgICAgICAgICAgICAgICAgICAgc2V0UmVzcG9uc2VWYWx1ZUFuZEVycm9ycyhyZXMsICdtaW5MZW5ndGgnLCB0eXBlb2YgcmVzLm1pbkxlbmd0aCA9PT0gJ251bWJlcicgPyBNYXRoLm1heChyZXMubWluTGVuZ3RoLCBjaGVjay52YWx1ZSkgOiBjaGVjay52YWx1ZSwgY2hlY2subWVzc2FnZSwgcmVmcyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ21heCc6XG4gICAgICAgICAgICAgICAgICAgIHNldFJlc3BvbnNlVmFsdWVBbmRFcnJvcnMocmVzLCAnbWF4TGVuZ3RoJywgdHlwZW9mIHJlcy5tYXhMZW5ndGggPT09ICdudW1iZXInID8gTWF0aC5taW4ocmVzLm1heExlbmd0aCwgY2hlY2sudmFsdWUpIDogY2hlY2sudmFsdWUsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdlbWFpbCc6XG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAocmVmcy5lbWFpbFN0cmF0ZWd5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdmb3JtYXQ6ZW1haWwnOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFkZEZvcm1hdChyZXMsICdlbWFpbCcsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnZm9ybWF0Omlkbi1lbWFpbCc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWRkRm9ybWF0KHJlcywgJ2lkbi1lbWFpbCcsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAncGF0dGVybjp6b2QnOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFkZFBhdHRlcm4ocmVzLCB6b2RQYXR0ZXJucy5lbWFpbCwgY2hlY2subWVzc2FnZSwgcmVmcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAndXJsJzpcbiAgICAgICAgICAgICAgICAgICAgYWRkRm9ybWF0KHJlcywgJ3VyaScsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICd1dWlkJzpcbiAgICAgICAgICAgICAgICAgICAgYWRkRm9ybWF0KHJlcywgJ3V1aWQnLCBjaGVjay5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAncmVnZXgnOlxuICAgICAgICAgICAgICAgICAgICBhZGRQYXR0ZXJuKHJlcywgY2hlY2sucmVnZXgsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdjdWlkJzpcbiAgICAgICAgICAgICAgICAgICAgYWRkUGF0dGVybihyZXMsIHpvZFBhdHRlcm5zLmN1aWQsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdjdWlkMic6XG4gICAgICAgICAgICAgICAgICAgIGFkZFBhdHRlcm4ocmVzLCB6b2RQYXR0ZXJucy5jdWlkMiwgY2hlY2subWVzc2FnZSwgcmVmcyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ3N0YXJ0c1dpdGgnOlxuICAgICAgICAgICAgICAgICAgICBhZGRQYXR0ZXJuKHJlcywgUmVnRXhwKGBeJHtwcm9jZXNzUGF0dGVybihjaGVjay52YWx1ZSl9YCksIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdlbmRzV2l0aCc6XG4gICAgICAgICAgICAgICAgICAgIGFkZFBhdHRlcm4ocmVzLCBSZWdFeHAoYCR7cHJvY2Vzc1BhdHRlcm4oY2hlY2sudmFsdWUpfSRgKSwgY2hlY2subWVzc2FnZSwgcmVmcyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2RhdGV0aW1lJzpcbiAgICAgICAgICAgICAgICAgICAgYWRkRm9ybWF0KHJlcywgJ2RhdGUtdGltZScsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdkYXRlJzpcbiAgICAgICAgICAgICAgICAgICAgYWRkRm9ybWF0KHJlcywgJ2RhdGUnLCBjaGVjay5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAndGltZSc6XG4gICAgICAgICAgICAgICAgICAgIGFkZEZvcm1hdChyZXMsICd0aW1lJywgY2hlY2subWVzc2FnZSwgcmVmcyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2R1cmF0aW9uJzpcbiAgICAgICAgICAgICAgICAgICAgYWRkRm9ybWF0KHJlcywgJ2R1cmF0aW9uJywgY2hlY2subWVzc2FnZSwgcmVmcyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2xlbmd0aCc6XG4gICAgICAgICAgICAgICAgICAgIHNldFJlc3BvbnNlVmFsdWVBbmRFcnJvcnMocmVzLCAnbWluTGVuZ3RoJywgdHlwZW9mIHJlcy5taW5MZW5ndGggPT09ICdudW1iZXInID8gTWF0aC5tYXgocmVzLm1pbkxlbmd0aCwgY2hlY2sudmFsdWUpIDogY2hlY2sudmFsdWUsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgICAgICBzZXRSZXNwb25zZVZhbHVlQW5kRXJyb3JzKHJlcywgJ21heExlbmd0aCcsIHR5cGVvZiByZXMubWF4TGVuZ3RoID09PSAnbnVtYmVyJyA/IE1hdGgubWluKHJlcy5tYXhMZW5ndGgsIGNoZWNrLnZhbHVlKSA6IGNoZWNrLnZhbHVlLCBjaGVjay5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnaW5jbHVkZXMnOiB7XG4gICAgICAgICAgICAgICAgICAgIGFkZFBhdHRlcm4ocmVzLCBSZWdFeHAocHJvY2Vzc1BhdHRlcm4oY2hlY2sudmFsdWUpKSwgY2hlY2subWVzc2FnZSwgcmVmcyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXNlICdpcCc6IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNoZWNrLnZlcnNpb24gIT09ICd2NicpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFkZEZvcm1hdChyZXMsICdpcHY0JywgY2hlY2subWVzc2FnZSwgcmVmcyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKGNoZWNrLnZlcnNpb24gIT09ICd2NCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFkZEZvcm1hdChyZXMsICdpcHY2JywgY2hlY2subWVzc2FnZSwgcmVmcyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhc2UgJ2Vtb2ppJzpcbiAgICAgICAgICAgICAgICAgICAgYWRkUGF0dGVybihyZXMsIHpvZFBhdHRlcm5zLmVtb2ppLCBjaGVjay5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAndWxpZCc6IHtcbiAgICAgICAgICAgICAgICAgICAgYWRkUGF0dGVybihyZXMsIHpvZFBhdHRlcm5zLnVsaWQsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2FzZSAnYmFzZTY0Jzoge1xuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKHJlZnMuYmFzZTY0U3RyYXRlZ3kpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ2Zvcm1hdDpiaW5hcnknOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWRkRm9ybWF0KHJlcywgJ2JpbmFyeScsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnY29udGVudEVuY29kaW5nOmJhc2U2NCc6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRSZXNwb25zZVZhbHVlQW5kRXJyb3JzKHJlcywgJ2NvbnRlbnRFbmNvZGluZycsICdiYXNlNjQnLCBjaGVjay5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ3BhdHRlcm46em9kJzoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFkZFBhdHRlcm4ocmVzLCB6b2RQYXR0ZXJucy5iYXNlNjQsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXNlICduYW5vaWQnOiB7XG4gICAgICAgICAgICAgICAgICAgIGFkZFBhdHRlcm4ocmVzLCB6b2RQYXR0ZXJucy5uYW5vaWQsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXNlICd0b0xvd2VyQ2FzZSc6XG4gICAgICAgICAgICAgICAgY2FzZSAndG9VcHBlckNhc2UnOlxuICAgICAgICAgICAgICAgIGNhc2UgJ3RyaW0nOlxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAoKF8pID0+IHsgfSkoY2hlY2spO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiByZXM7XG59XG5jb25zdCBlc2NhcGVOb25BbHBoYU51bWVyaWMgPSAodmFsdWUpID0+IEFycmF5LmZyb20odmFsdWUpXG4gICAgLm1hcCgoYykgPT4gKC9bYS16QS1aMC05XS8udGVzdChjKSA/IGMgOiBgXFxcXCR7Y31gKSlcbiAgICAuam9pbignJyk7XG5jb25zdCBhZGRGb3JtYXQgPSAoc2NoZW1hLCB2YWx1ZSwgbWVzc2FnZSwgcmVmcykgPT4ge1xuICAgIGlmIChzY2hlbWEuZm9ybWF0IHx8IHNjaGVtYS5hbnlPZj8uc29tZSgoeCkgPT4geC5mb3JtYXQpKSB7XG4gICAgICAgIGlmICghc2NoZW1hLmFueU9mKSB7XG4gICAgICAgICAgICBzY2hlbWEuYW55T2YgPSBbXTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc2NoZW1hLmZvcm1hdCkge1xuICAgICAgICAgICAgc2NoZW1hLmFueU9mLnB1c2goe1xuICAgICAgICAgICAgICAgIGZvcm1hdDogc2NoZW1hLmZvcm1hdCxcbiAgICAgICAgICAgICAgICAuLi4oc2NoZW1hLmVycm9yTWVzc2FnZSAmJlxuICAgICAgICAgICAgICAgICAgICByZWZzLmVycm9yTWVzc2FnZXMgJiYge1xuICAgICAgICAgICAgICAgICAgICBlcnJvck1lc3NhZ2U6IHsgZm9ybWF0OiBzY2hlbWEuZXJyb3JNZXNzYWdlLmZvcm1hdCB9LFxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBkZWxldGUgc2NoZW1hLmZvcm1hdDtcbiAgICAgICAgICAgIGlmIChzY2hlbWEuZXJyb3JNZXNzYWdlKSB7XG4gICAgICAgICAgICAgICAgZGVsZXRlIHNjaGVtYS5lcnJvck1lc3NhZ2UuZm9ybWF0O1xuICAgICAgICAgICAgICAgIGlmIChPYmplY3Qua2V5cyhzY2hlbWEuZXJyb3JNZXNzYWdlKS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHNjaGVtYS5lcnJvck1lc3NhZ2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHNjaGVtYS5hbnlPZi5wdXNoKHtcbiAgICAgICAgICAgIGZvcm1hdDogdmFsdWUsXG4gICAgICAgICAgICAuLi4obWVzc2FnZSAmJiByZWZzLmVycm9yTWVzc2FnZXMgJiYgeyBlcnJvck1lc3NhZ2U6IHsgZm9ybWF0OiBtZXNzYWdlIH0gfSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgc2V0UmVzcG9uc2VWYWx1ZUFuZEVycm9ycyhzY2hlbWEsICdmb3JtYXQnLCB2YWx1ZSwgbWVzc2FnZSwgcmVmcyk7XG4gICAgfVxufTtcbmNvbnN0IGFkZFBhdHRlcm4gPSAoc2NoZW1hLCByZWdleCwgbWVzc2FnZSwgcmVmcykgPT4ge1xuICAgIGlmIChzY2hlbWEucGF0dGVybiB8fCBzY2hlbWEuYWxsT2Y/LnNvbWUoKHgpID0+IHgucGF0dGVybikpIHtcbiAgICAgICAgaWYgKCFzY2hlbWEuYWxsT2YpIHtcbiAgICAgICAgICAgIHNjaGVtYS5hbGxPZiA9IFtdO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzY2hlbWEucGF0dGVybikge1xuICAgICAgICAgICAgc2NoZW1hLmFsbE9mLnB1c2goe1xuICAgICAgICAgICAgICAgIHBhdHRlcm46IHNjaGVtYS5wYXR0ZXJuLFxuICAgICAgICAgICAgICAgIC4uLihzY2hlbWEuZXJyb3JNZXNzYWdlICYmXG4gICAgICAgICAgICAgICAgICAgIHJlZnMuZXJyb3JNZXNzYWdlcyAmJiB7XG4gICAgICAgICAgICAgICAgICAgIGVycm9yTWVzc2FnZTogeyBwYXR0ZXJuOiBzY2hlbWEuZXJyb3JNZXNzYWdlLnBhdHRlcm4gfSxcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgZGVsZXRlIHNjaGVtYS5wYXR0ZXJuO1xuICAgICAgICAgICAgaWYgKHNjaGVtYS5lcnJvck1lc3NhZ2UpIHtcbiAgICAgICAgICAgICAgICBkZWxldGUgc2NoZW1hLmVycm9yTWVzc2FnZS5wYXR0ZXJuO1xuICAgICAgICAgICAgICAgIGlmIChPYmplY3Qua2V5cyhzY2hlbWEuZXJyb3JNZXNzYWdlKS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHNjaGVtYS5lcnJvck1lc3NhZ2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHNjaGVtYS5hbGxPZi5wdXNoKHtcbiAgICAgICAgICAgIHBhdHRlcm46IHByb2Nlc3NSZWdFeHAocmVnZXgsIHJlZnMpLFxuICAgICAgICAgICAgLi4uKG1lc3NhZ2UgJiYgcmVmcy5lcnJvck1lc3NhZ2VzICYmIHsgZXJyb3JNZXNzYWdlOiB7IHBhdHRlcm46IG1lc3NhZ2UgfSB9KSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBzZXRSZXNwb25zZVZhbHVlQW5kRXJyb3JzKHNjaGVtYSwgJ3BhdHRlcm4nLCBwcm9jZXNzUmVnRXhwKHJlZ2V4LCByZWZzKSwgbWVzc2FnZSwgcmVmcyk7XG4gICAgfVxufTtcbi8vIE11dGF0ZSB6LnN0cmluZy5yZWdleCgpIGluIGEgYmVzdCBhdHRlbXB0IHRvIGFjY29tbW9kYXRlIGZvciByZWdleCBmbGFncyB3aGVuIGFwcGx5UmVnZXhGbGFncyBpcyB0cnVlXG5jb25zdCBwcm9jZXNzUmVnRXhwID0gKHJlZ2V4T3JGdW5jdGlvbiwgcmVmcykgPT4ge1xuICAgIGNvbnN0IHJlZ2V4ID0gdHlwZW9mIHJlZ2V4T3JGdW5jdGlvbiA9PT0gJ2Z1bmN0aW9uJyA/IHJlZ2V4T3JGdW5jdGlvbigpIDogcmVnZXhPckZ1bmN0aW9uO1xuICAgIGlmICghcmVmcy5hcHBseVJlZ2V4RmxhZ3MgfHwgIXJlZ2V4LmZsYWdzKVxuICAgICAgICByZXR1cm4gcmVnZXguc291cmNlO1xuICAgIC8vIEN1cnJlbnRseSBoYW5kbGVkIGZsYWdzXG4gICAgY29uc3QgZmxhZ3MgPSB7XG4gICAgICAgIGk6IHJlZ2V4LmZsYWdzLmluY2x1ZGVzKCdpJyksIC8vIENhc2UtaW5zZW5zaXRpdmVcbiAgICAgICAgbTogcmVnZXguZmxhZ3MuaW5jbHVkZXMoJ20nKSwgLy8gYF5gIGFuZCBgJGAgbWF0Y2hlcyBhZGphY2VudCB0byBuZXdsaW5lIGNoYXJhY3RlcnNcbiAgICAgICAgczogcmVnZXguZmxhZ3MuaW5jbHVkZXMoJ3MnKSwgLy8gYC5gIG1hdGNoZXMgbmV3bGluZXNcbiAgICB9O1xuICAgIC8vIFRoZSBnZW5lcmFsIHByaW5jaXBsZSBoZXJlIGlzIHRvIHN0ZXAgdGhyb3VnaCBlYWNoIGNoYXJhY3Rlciwgb25lIGF0IGEgdGltZSwgYXBwbHlpbmcgbXV0YXRpb25zIGFzIGZsYWdzIHJlcXVpcmUuIFdlIGtlZXAgdHJhY2sgd2hlbiB0aGUgY3VycmVudCBjaGFyYWN0ZXIgaXMgZXNjYXBlZCwgYW5kIHdoZW4gaXQncyBpbnNpZGUgYSBncm91cCAvbGlrZSBbdGhpc10vIG9yIChhbHNvKSBhIHJhbmdlIGxpa2UgL1thLXpdLy4gVGhlIGZvbGxvd2luZyBpcyBmYWlybHkgYnJpdHRsZSBpbXBlcmF0aXZlIGNvZGU7IGVkaXQgYXQgeW91ciBwZXJpbCFcbiAgICBjb25zdCBzb3VyY2UgPSBmbGFncy5pID8gcmVnZXguc291cmNlLnRvTG93ZXJDYXNlKCkgOiByZWdleC5zb3VyY2U7XG4gICAgbGV0IHBhdHRlcm4gPSAnJztcbiAgICBsZXQgaXNFc2NhcGVkID0gZmFsc2U7XG4gICAgbGV0IGluQ2hhckdyb3VwID0gZmFsc2U7XG4gICAgbGV0IGluQ2hhclJhbmdlID0gZmFsc2U7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzb3VyY2UubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaWYgKGlzRXNjYXBlZCkge1xuICAgICAgICAgICAgcGF0dGVybiArPSBzb3VyY2VbaV07XG4gICAgICAgICAgICBpc0VzY2FwZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChmbGFncy5pKSB7XG4gICAgICAgICAgICBpZiAoaW5DaGFyR3JvdXApIHtcbiAgICAgICAgICAgICAgICBpZiAoc291cmNlW2ldLm1hdGNoKC9bYS16XS8pKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpbkNoYXJSYW5nZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcGF0dGVybiArPSBzb3VyY2VbaV07XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXR0ZXJuICs9IGAke3NvdXJjZVtpIC0gMl19LSR7c291cmNlW2ldfWAudG9VcHBlckNhc2UoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGluQ2hhclJhbmdlID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoc291cmNlW2kgKyAxXSA9PT0gJy0nICYmIHNvdXJjZVtpICsgMl0/Lm1hdGNoKC9bYS16XS8pKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXR0ZXJuICs9IHNvdXJjZVtpXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGluQ2hhclJhbmdlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhdHRlcm4gKz0gYCR7c291cmNlW2ldfSR7c291cmNlW2ldLnRvVXBwZXJDYXNlKCl9YDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChzb3VyY2VbaV0ubWF0Y2goL1thLXpdLykpIHtcbiAgICAgICAgICAgICAgICBwYXR0ZXJuICs9IGBbJHtzb3VyY2VbaV19JHtzb3VyY2VbaV0udG9VcHBlckNhc2UoKX1dYDtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoZmxhZ3MubSkge1xuICAgICAgICAgICAgaWYgKHNvdXJjZVtpXSA9PT0gJ14nKSB7XG4gICAgICAgICAgICAgICAgcGF0dGVybiArPSBgKF58KD88PVtcXHJcXG5dKSlgO1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoc291cmNlW2ldID09PSAnJCcpIHtcbiAgICAgICAgICAgICAgICBwYXR0ZXJuICs9IGAoJHwoPz1bXFxyXFxuXSkpYDtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoZmxhZ3MucyAmJiBzb3VyY2VbaV0gPT09ICcuJykge1xuICAgICAgICAgICAgcGF0dGVybiArPSBpbkNoYXJHcm91cCA/IGAke3NvdXJjZVtpXX1cXHJcXG5gIDogYFske3NvdXJjZVtpXX1cXHJcXG5dYDtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIHBhdHRlcm4gKz0gc291cmNlW2ldO1xuICAgICAgICBpZiAoc291cmNlW2ldID09PSAnXFxcXCcpIHtcbiAgICAgICAgICAgIGlzRXNjYXBlZCA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoaW5DaGFyR3JvdXAgJiYgc291cmNlW2ldID09PSAnXScpIHtcbiAgICAgICAgICAgIGluQ2hhckdyb3VwID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoIWluQ2hhckdyb3VwICYmIHNvdXJjZVtpXSA9PT0gJ1snKSB7XG4gICAgICAgICAgICBpbkNoYXJHcm91cCA9IHRydWU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgcmVnZXhUZXN0ID0gbmV3IFJlZ0V4cChwYXR0ZXJuKTtcbiAgICB9XG4gICAgY2F0Y2gge1xuICAgICAgICBjb25zb2xlLndhcm4oYENvdWxkIG5vdCBjb252ZXJ0IHJlZ2V4IHBhdHRlcm4gYXQgJHtyZWZzLmN1cnJlbnRQYXRoLmpvaW4oJy8nKX0gdG8gYSBmbGFnLWluZGVwZW5kZW50IGZvcm0hIEZhbGxpbmcgYmFjayB0byB0aGUgZmxhZy1pZ25vcmFudCBzb3VyY2VgKTtcbiAgICAgICAgcmV0dXJuIHJlZ2V4LnNvdXJjZTtcbiAgICB9XG4gICAgcmV0dXJuIHBhdHRlcm47XG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c3RyaW5nLm1qcy5tYXAiLCJpbXBvcnQgeyBab2RGaXJzdFBhcnR5VHlwZUtpbmQgfSBmcm9tICd6b2QvdjMnO1xuaW1wb3J0IHsgcGFyc2VEZWYgfSBmcm9tIFwiLi4vcGFyc2VEZWYubWpzXCI7XG5pbXBvcnQgeyBwYXJzZVN0cmluZ0RlZiB9IGZyb20gXCIuL3N0cmluZy5tanNcIjtcbmV4cG9ydCBmdW5jdGlvbiBwYXJzZVJlY29yZERlZihkZWYsIHJlZnMpIHtcbiAgICBpZiAocmVmcy50YXJnZXQgPT09ICdvcGVuQXBpMycgJiYgZGVmLmtleVR5cGU/Ll9kZWYudHlwZU5hbWUgPT09IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RFbnVtKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB0eXBlOiAnb2JqZWN0JyxcbiAgICAgICAgICAgIHJlcXVpcmVkOiBkZWYua2V5VHlwZS5fZGVmLnZhbHVlcyxcbiAgICAgICAgICAgIHByb3BlcnRpZXM6IGRlZi5rZXlUeXBlLl9kZWYudmFsdWVzLnJlZHVjZSgoYWNjLCBrZXkpID0+ICh7XG4gICAgICAgICAgICAgICAgLi4uYWNjLFxuICAgICAgICAgICAgICAgIFtrZXldOiBwYXJzZURlZihkZWYudmFsdWVUeXBlLl9kZWYsIHtcbiAgICAgICAgICAgICAgICAgICAgLi4ucmVmcyxcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudFBhdGg6IFsuLi5yZWZzLmN1cnJlbnRQYXRoLCAncHJvcGVydGllcycsIGtleV0sXG4gICAgICAgICAgICAgICAgfSkgPz8ge30sXG4gICAgICAgICAgICB9KSwge30pLFxuICAgICAgICAgICAgYWRkaXRpb25hbFByb3BlcnRpZXM6IGZhbHNlLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBjb25zdCBzY2hlbWEgPSB7XG4gICAgICAgIHR5cGU6ICdvYmplY3QnLFxuICAgICAgICBhZGRpdGlvbmFsUHJvcGVydGllczogcGFyc2VEZWYoZGVmLnZhbHVlVHlwZS5fZGVmLCB7XG4gICAgICAgICAgICAuLi5yZWZzLFxuICAgICAgICAgICAgY3VycmVudFBhdGg6IFsuLi5yZWZzLmN1cnJlbnRQYXRoLCAnYWRkaXRpb25hbFByb3BlcnRpZXMnXSxcbiAgICAgICAgfSkgPz8ge30sXG4gICAgfTtcbiAgICBpZiAocmVmcy50YXJnZXQgPT09ICdvcGVuQXBpMycpIHtcbiAgICAgICAgcmV0dXJuIHNjaGVtYTtcbiAgICB9XG4gICAgaWYgKGRlZi5rZXlUeXBlPy5fZGVmLnR5cGVOYW1lID09PSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kU3RyaW5nICYmIGRlZi5rZXlUeXBlLl9kZWYuY2hlY2tzPy5sZW5ndGgpIHtcbiAgICAgICAgY29uc3Qga2V5VHlwZSA9IE9iamVjdC5lbnRyaWVzKHBhcnNlU3RyaW5nRGVmKGRlZi5rZXlUeXBlLl9kZWYsIHJlZnMpKS5yZWR1Y2UoKGFjYywgW2tleSwgdmFsdWVdKSA9PiAoa2V5ID09PSAndHlwZScgPyBhY2MgOiB7IC4uLmFjYywgW2tleV06IHZhbHVlIH0pLCB7fSk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAuLi5zY2hlbWEsXG4gICAgICAgICAgICBwcm9wZXJ0eU5hbWVzOiBrZXlUeXBlLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBlbHNlIGlmIChkZWYua2V5VHlwZT8uX2RlZi50eXBlTmFtZSA9PT0gWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZEVudW0pIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIC4uLnNjaGVtYSxcbiAgICAgICAgICAgIHByb3BlcnR5TmFtZXM6IHtcbiAgICAgICAgICAgICAgICBlbnVtOiBkZWYua2V5VHlwZS5fZGVmLnZhbHVlcyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiBzY2hlbWE7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1yZWNvcmQubWpzLm1hcCIsImltcG9ydCB7IHBhcnNlRGVmIH0gZnJvbSBcIi4uL3BhcnNlRGVmLm1qc1wiO1xuaW1wb3J0IHsgcGFyc2VSZWNvcmREZWYgfSBmcm9tIFwiLi9yZWNvcmQubWpzXCI7XG5leHBvcnQgZnVuY3Rpb24gcGFyc2VNYXBEZWYoZGVmLCByZWZzKSB7XG4gICAgaWYgKHJlZnMubWFwU3RyYXRlZ3kgPT09ICdyZWNvcmQnKSB7XG4gICAgICAgIHJldHVybiBwYXJzZVJlY29yZERlZihkZWYsIHJlZnMpO1xuICAgIH1cbiAgICBjb25zdCBrZXlzID0gcGFyc2VEZWYoZGVmLmtleVR5cGUuX2RlZiwge1xuICAgICAgICAuLi5yZWZzLFxuICAgICAgICBjdXJyZW50UGF0aDogWy4uLnJlZnMuY3VycmVudFBhdGgsICdpdGVtcycsICdpdGVtcycsICcwJ10sXG4gICAgfSkgfHwge307XG4gICAgY29uc3QgdmFsdWVzID0gcGFyc2VEZWYoZGVmLnZhbHVlVHlwZS5fZGVmLCB7XG4gICAgICAgIC4uLnJlZnMsXG4gICAgICAgIGN1cnJlbnRQYXRoOiBbLi4ucmVmcy5jdXJyZW50UGF0aCwgJ2l0ZW1zJywgJ2l0ZW1zJywgJzEnXSxcbiAgICB9KSB8fCB7fTtcbiAgICByZXR1cm4ge1xuICAgICAgICB0eXBlOiAnYXJyYXknLFxuICAgICAgICBtYXhJdGVtczogMTI1LFxuICAgICAgICBpdGVtczoge1xuICAgICAgICAgICAgdHlwZTogJ2FycmF5JyxcbiAgICAgICAgICAgIGl0ZW1zOiBba2V5cywgdmFsdWVzXSxcbiAgICAgICAgICAgIG1pbkl0ZW1zOiAyLFxuICAgICAgICAgICAgbWF4SXRlbXM6IDIsXG4gICAgICAgIH0sXG4gICAgfTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW1hcC5tanMubWFwIiwiZXhwb3J0IGZ1bmN0aW9uIHBhcnNlTmF0aXZlRW51bURlZihkZWYpIHtcbiAgICBjb25zdCBvYmplY3QgPSBkZWYudmFsdWVzO1xuICAgIGNvbnN0IGFjdHVhbEtleXMgPSBPYmplY3Qua2V5cyhkZWYudmFsdWVzKS5maWx0ZXIoKGtleSkgPT4ge1xuICAgICAgICByZXR1cm4gdHlwZW9mIG9iamVjdFtvYmplY3Rba2V5XV0gIT09ICdudW1iZXInO1xuICAgIH0pO1xuICAgIGNvbnN0IGFjdHVhbFZhbHVlcyA9IGFjdHVhbEtleXMubWFwKChrZXkpID0+IG9iamVjdFtrZXldKTtcbiAgICBjb25zdCBwYXJzZWRUeXBlcyA9IEFycmF5LmZyb20obmV3IFNldChhY3R1YWxWYWx1ZXMubWFwKCh2YWx1ZXMpID0+IHR5cGVvZiB2YWx1ZXMpKSk7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogcGFyc2VkVHlwZXMubGVuZ3RoID09PSAxID9cbiAgICAgICAgICAgIHBhcnNlZFR5cGVzWzBdID09PSAnc3RyaW5nJyA/XG4gICAgICAgICAgICAgICAgJ3N0cmluZydcbiAgICAgICAgICAgICAgICA6ICdudW1iZXInXG4gICAgICAgICAgICA6IFsnc3RyaW5nJywgJ251bWJlciddLFxuICAgICAgICBlbnVtOiBhY3R1YWxWYWx1ZXMsXG4gICAgfTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW5hdGl2ZUVudW0ubWpzLm1hcCIsImV4cG9ydCBmdW5jdGlvbiBwYXJzZU5ldmVyRGVmKCkge1xuICAgIHJldHVybiB7XG4gICAgICAgIG5vdDoge30sXG4gICAgfTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW5ldmVyLm1qcy5tYXAiLCJleHBvcnQgZnVuY3Rpb24gcGFyc2VOdWxsRGVmKHJlZnMpIHtcbiAgICByZXR1cm4gcmVmcy50YXJnZXQgPT09ICdvcGVuQXBpMycgP1xuICAgICAgICB7XG4gICAgICAgICAgICBlbnVtOiBbJ251bGwnXSxcbiAgICAgICAgICAgIG51bGxhYmxlOiB0cnVlLFxuICAgICAgICB9XG4gICAgICAgIDoge1xuICAgICAgICAgICAgdHlwZTogJ251bGwnLFxuICAgICAgICB9O1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bnVsbC5tanMubWFwIiwiaW1wb3J0IHsgcGFyc2VEZWYgfSBmcm9tIFwiLi4vcGFyc2VEZWYubWpzXCI7XG5leHBvcnQgY29uc3QgcHJpbWl0aXZlTWFwcGluZ3MgPSB7XG4gICAgWm9kU3RyaW5nOiAnc3RyaW5nJyxcbiAgICBab2ROdW1iZXI6ICdudW1iZXInLFxuICAgIFpvZEJpZ0ludDogJ2ludGVnZXInLFxuICAgIFpvZEJvb2xlYW46ICdib29sZWFuJyxcbiAgICBab2ROdWxsOiAnbnVsbCcsXG59O1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlVW5pb25EZWYoZGVmLCByZWZzKSB7XG4gICAgaWYgKHJlZnMudGFyZ2V0ID09PSAnb3BlbkFwaTMnKVxuICAgICAgICByZXR1cm4gYXNBbnlPZihkZWYsIHJlZnMpO1xuICAgIGNvbnN0IG9wdGlvbnMgPSBkZWYub3B0aW9ucyBpbnN0YW5jZW9mIE1hcCA/IEFycmF5LmZyb20oZGVmLm9wdGlvbnMudmFsdWVzKCkpIDogZGVmLm9wdGlvbnM7XG4gICAgLy8gVGhpcyBibG9ja3MgdHJpZXMgdG8gbG9vayBhaGVhZCBhIGJpdCB0byBwcm9kdWNlIG5pY2VyIGxvb2tpbmcgc2NoZW1hcyB3aXRoIHR5cGUgYXJyYXkgaW5zdGVhZCBvZiBhbnlPZi5cbiAgICBpZiAob3B0aW9ucy5ldmVyeSgoeCkgPT4geC5fZGVmLnR5cGVOYW1lIGluIHByaW1pdGl2ZU1hcHBpbmdzICYmICgheC5fZGVmLmNoZWNrcyB8fCAheC5fZGVmLmNoZWNrcy5sZW5ndGgpKSkge1xuICAgICAgICAvLyBhbGwgdHlwZXMgaW4gdW5pb24gYXJlIHByaW1pdGl2ZSBhbmQgbGFjayBjaGVja3MsIHNvIG1pZ2h0IGFzIHdlbGwgc3F1YXNoIGludG8ge3R5cGU6IFsuLi5dfVxuICAgICAgICBjb25zdCB0eXBlcyA9IG9wdGlvbnMucmVkdWNlKCh0eXBlcywgeCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgdHlwZSA9IHByaW1pdGl2ZU1hcHBpbmdzW3guX2RlZi50eXBlTmFtZV07IC8vQ2FuIGJlIHNhZmVseSBjYXN0ZWQgZHVlIHRvIHJvdyA0M1xuICAgICAgICAgICAgcmV0dXJuIHR5cGUgJiYgIXR5cGVzLmluY2x1ZGVzKHR5cGUpID8gWy4uLnR5cGVzLCB0eXBlXSA6IHR5cGVzO1xuICAgICAgICB9LCBbXSk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB0eXBlOiB0eXBlcy5sZW5ndGggPiAxID8gdHlwZXMgOiB0eXBlc1swXSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgZWxzZSBpZiAob3B0aW9ucy5ldmVyeSgoeCkgPT4geC5fZGVmLnR5cGVOYW1lID09PSAnWm9kTGl0ZXJhbCcgJiYgIXguZGVzY3JpcHRpb24pKSB7XG4gICAgICAgIC8vIGFsbCBvcHRpb25zIGxpdGVyYWxzXG4gICAgICAgIGNvbnN0IHR5cGVzID0gb3B0aW9ucy5yZWR1Y2UoKGFjYywgeCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgdHlwZSA9IHR5cGVvZiB4Ll9kZWYudmFsdWU7XG4gICAgICAgICAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgICAgICAgICAgICBjYXNlICdzdHJpbmcnOlxuICAgICAgICAgICAgICAgIGNhc2UgJ251bWJlcic6XG4gICAgICAgICAgICAgICAgY2FzZSAnYm9vbGVhbic6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbLi4uYWNjLCB0eXBlXTtcbiAgICAgICAgICAgICAgICBjYXNlICdiaWdpbnQnOlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWy4uLmFjYywgJ2ludGVnZXInXTtcbiAgICAgICAgICAgICAgICBjYXNlICdvYmplY3QnOlxuICAgICAgICAgICAgICAgICAgICBpZiAoeC5fZGVmLnZhbHVlID09PSBudWxsKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsuLi5hY2MsICdudWxsJ107XG4gICAgICAgICAgICAgICAgY2FzZSAnc3ltYm9sJzpcbiAgICAgICAgICAgICAgICBjYXNlICd1bmRlZmluZWQnOlxuICAgICAgICAgICAgICAgIGNhc2UgJ2Z1bmN0aW9uJzpcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYWNjO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LCBbXSk7XG4gICAgICAgIGlmICh0eXBlcy5sZW5ndGggPT09IG9wdGlvbnMubGVuZ3RoKSB7XG4gICAgICAgICAgICAvLyBhbGwgdGhlIGxpdGVyYWxzIGFyZSBwcmltaXRpdmUsIGFzIGZhciBhcyBudWxsIGNhbiBiZSBjb25zaWRlcmVkIHByaW1pdGl2ZVxuICAgICAgICAgICAgY29uc3QgdW5pcXVlVHlwZXMgPSB0eXBlcy5maWx0ZXIoKHgsIGksIGEpID0+IGEuaW5kZXhPZih4KSA9PT0gaSk7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHR5cGU6IHVuaXF1ZVR5cGVzLmxlbmd0aCA+IDEgPyB1bmlxdWVUeXBlcyA6IHVuaXF1ZVR5cGVzWzBdLFxuICAgICAgICAgICAgICAgIGVudW06IG9wdGlvbnMucmVkdWNlKChhY2MsIHgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGFjYy5pbmNsdWRlcyh4Ll9kZWYudmFsdWUpID8gYWNjIDogWy4uLmFjYywgeC5fZGVmLnZhbHVlXTtcbiAgICAgICAgICAgICAgICB9LCBbXSksXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2UgaWYgKG9wdGlvbnMuZXZlcnkoKHgpID0+IHguX2RlZi50eXBlTmFtZSA9PT0gJ1pvZEVudW0nKSkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdHlwZTogJ3N0cmluZycsXG4gICAgICAgICAgICBlbnVtOiBvcHRpb25zLnJlZHVjZSgoYWNjLCB4KSA9PiBbLi4uYWNjLCAuLi54Ll9kZWYudmFsdWVzLmZpbHRlcigoeCkgPT4gIWFjYy5pbmNsdWRlcyh4KSldLCBbXSksXG4gICAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiBhc0FueU9mKGRlZiwgcmVmcyk7XG59XG5jb25zdCBhc0FueU9mID0gKGRlZiwgcmVmcykgPT4ge1xuICAgIGNvbnN0IGFueU9mID0gKGRlZi5vcHRpb25zIGluc3RhbmNlb2YgTWFwID8gQXJyYXkuZnJvbShkZWYub3B0aW9ucy52YWx1ZXMoKSkgOiBkZWYub3B0aW9ucylcbiAgICAgICAgLm1hcCgoeCwgaSkgPT4gcGFyc2VEZWYoeC5fZGVmLCB7XG4gICAgICAgIC4uLnJlZnMsXG4gICAgICAgIGN1cnJlbnRQYXRoOiBbLi4ucmVmcy5jdXJyZW50UGF0aCwgJ2FueU9mJywgYCR7aX1gXSxcbiAgICB9KSlcbiAgICAgICAgLmZpbHRlcigoeCkgPT4gISF4ICYmICghcmVmcy5zdHJpY3RVbmlvbnMgfHwgKHR5cGVvZiB4ID09PSAnb2JqZWN0JyAmJiBPYmplY3Qua2V5cyh4KS5sZW5ndGggPiAwKSkpO1xuICAgIHJldHVybiBhbnlPZi5sZW5ndGggPyB7IGFueU9mIH0gOiB1bmRlZmluZWQ7XG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dW5pb24ubWpzLm1hcCIsImltcG9ydCB7IHBhcnNlRGVmIH0gZnJvbSBcIi4uL3BhcnNlRGVmLm1qc1wiO1xuaW1wb3J0IHsgcHJpbWl0aXZlTWFwcGluZ3MgfSBmcm9tIFwiLi91bmlvbi5tanNcIjtcbmV4cG9ydCBmdW5jdGlvbiBwYXJzZU51bGxhYmxlRGVmKGRlZiwgcmVmcykge1xuICAgIGlmIChbJ1pvZFN0cmluZycsICdab2ROdW1iZXInLCAnWm9kQmlnSW50JywgJ1pvZEJvb2xlYW4nLCAnWm9kTnVsbCddLmluY2x1ZGVzKGRlZi5pbm5lclR5cGUuX2RlZi50eXBlTmFtZSkgJiZcbiAgICAgICAgKCFkZWYuaW5uZXJUeXBlLl9kZWYuY2hlY2tzIHx8ICFkZWYuaW5uZXJUeXBlLl9kZWYuY2hlY2tzLmxlbmd0aCkpIHtcbiAgICAgICAgaWYgKHJlZnMudGFyZ2V0ID09PSAnb3BlbkFwaTMnIHx8IHJlZnMubnVsbGFibGVTdHJhdGVneSA9PT0gJ3Byb3BlcnR5Jykge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICB0eXBlOiBwcmltaXRpdmVNYXBwaW5nc1tkZWYuaW5uZXJUeXBlLl9kZWYudHlwZU5hbWVdLFxuICAgICAgICAgICAgICAgIG51bGxhYmxlOiB0cnVlLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdHlwZTogW3ByaW1pdGl2ZU1hcHBpbmdzW2RlZi5pbm5lclR5cGUuX2RlZi50eXBlTmFtZV0sICdudWxsJ10sXG4gICAgICAgIH07XG4gICAgfVxuICAgIGlmIChyZWZzLnRhcmdldCA9PT0gJ29wZW5BcGkzJykge1xuICAgICAgICBjb25zdCBiYXNlID0gcGFyc2VEZWYoZGVmLmlubmVyVHlwZS5fZGVmLCB7XG4gICAgICAgICAgICAuLi5yZWZzLFxuICAgICAgICAgICAgY3VycmVudFBhdGg6IFsuLi5yZWZzLmN1cnJlbnRQYXRoXSxcbiAgICAgICAgfSk7XG4gICAgICAgIGlmIChiYXNlICYmICckcmVmJyBpbiBiYXNlKVxuICAgICAgICAgICAgcmV0dXJuIHsgYWxsT2Y6IFtiYXNlXSwgbnVsbGFibGU6IHRydWUgfTtcbiAgICAgICAgcmV0dXJuIGJhc2UgJiYgeyAuLi5iYXNlLCBudWxsYWJsZTogdHJ1ZSB9O1xuICAgIH1cbiAgICBjb25zdCBiYXNlID0gcGFyc2VEZWYoZGVmLmlubmVyVHlwZS5fZGVmLCB7XG4gICAgICAgIC4uLnJlZnMsXG4gICAgICAgIGN1cnJlbnRQYXRoOiBbLi4ucmVmcy5jdXJyZW50UGF0aCwgJ2FueU9mJywgJzAnXSxcbiAgICB9KTtcbiAgICByZXR1cm4gYmFzZSAmJiB7IGFueU9mOiBbYmFzZSwgeyB0eXBlOiAnbnVsbCcgfV0gfTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW51bGxhYmxlLm1qcy5tYXAiLCJpbXBvcnQgeyBhZGRFcnJvck1lc3NhZ2UsIHNldFJlc3BvbnNlVmFsdWVBbmRFcnJvcnMgfSBmcm9tIFwiLi4vZXJyb3JNZXNzYWdlcy5tanNcIjtcbmV4cG9ydCBmdW5jdGlvbiBwYXJzZU51bWJlckRlZihkZWYsIHJlZnMpIHtcbiAgICBjb25zdCByZXMgPSB7XG4gICAgICAgIHR5cGU6ICdudW1iZXInLFxuICAgIH07XG4gICAgaWYgKCFkZWYuY2hlY2tzKVxuICAgICAgICByZXR1cm4gcmVzO1xuICAgIGZvciAoY29uc3QgY2hlY2sgb2YgZGVmLmNoZWNrcykge1xuICAgICAgICBzd2l0Y2ggKGNoZWNrLmtpbmQpIHtcbiAgICAgICAgICAgIGNhc2UgJ2ludCc6XG4gICAgICAgICAgICAgICAgcmVzLnR5cGUgPSAnaW50ZWdlcic7XG4gICAgICAgICAgICAgICAgYWRkRXJyb3JNZXNzYWdlKHJlcywgJ3R5cGUnLCBjaGVjay5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ21pbic6XG4gICAgICAgICAgICAgICAgaWYgKHJlZnMudGFyZ2V0ID09PSAnanNvblNjaGVtYTcnKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjaGVjay5pbmNsdXNpdmUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldFJlc3BvbnNlVmFsdWVBbmRFcnJvcnMocmVzLCAnbWluaW11bScsIGNoZWNrLnZhbHVlLCBjaGVjay5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldFJlc3BvbnNlVmFsdWVBbmRFcnJvcnMocmVzLCAnZXhjbHVzaXZlTWluaW11bScsIGNoZWNrLnZhbHVlLCBjaGVjay5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFjaGVjay5pbmNsdXNpdmUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcy5leGNsdXNpdmVNaW5pbXVtID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBzZXRSZXNwb25zZVZhbHVlQW5kRXJyb3JzKHJlcywgJ21pbmltdW0nLCBjaGVjay52YWx1ZSwgY2hlY2subWVzc2FnZSwgcmVmcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnbWF4JzpcbiAgICAgICAgICAgICAgICBpZiAocmVmcy50YXJnZXQgPT09ICdqc29uU2NoZW1hNycpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNoZWNrLmluY2x1c2l2ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0UmVzcG9uc2VWYWx1ZUFuZEVycm9ycyhyZXMsICdtYXhpbXVtJywgY2hlY2sudmFsdWUsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0UmVzcG9uc2VWYWx1ZUFuZEVycm9ycyhyZXMsICdleGNsdXNpdmVNYXhpbXVtJywgY2hlY2sudmFsdWUsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWNoZWNrLmluY2x1c2l2ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzLmV4Y2x1c2l2ZU1heGltdW0gPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHNldFJlc3BvbnNlVmFsdWVBbmRFcnJvcnMocmVzLCAnbWF4aW11bScsIGNoZWNrLnZhbHVlLCBjaGVjay5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdtdWx0aXBsZU9mJzpcbiAgICAgICAgICAgICAgICBzZXRSZXNwb25zZVZhbHVlQW5kRXJyb3JzKHJlcywgJ211bHRpcGxlT2YnLCBjaGVjay52YWx1ZSwgY2hlY2subWVzc2FnZSwgcmVmcyk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHJlcztcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW51bWJlci5tanMubWFwIiwiaW1wb3J0IHsgcGFyc2VEZWYgfSBmcm9tIFwiLi4vcGFyc2VEZWYubWpzXCI7XG5mdW5jdGlvbiBkZWNpZGVBZGRpdGlvbmFsUHJvcGVydGllcyhkZWYsIHJlZnMpIHtcbiAgICBpZiAocmVmcy5yZW1vdmVBZGRpdGlvbmFsU3RyYXRlZ3kgPT09ICdzdHJpY3QnKSB7XG4gICAgICAgIHJldHVybiBkZWYuY2F0Y2hhbGwuX2RlZi50eXBlTmFtZSA9PT0gJ1pvZE5ldmVyJyA/XG4gICAgICAgICAgICBkZWYudW5rbm93bktleXMgIT09ICdzdHJpY3QnXG4gICAgICAgICAgICA6IHBhcnNlRGVmKGRlZi5jYXRjaGFsbC5fZGVmLCB7XG4gICAgICAgICAgICAgICAgLi4ucmVmcyxcbiAgICAgICAgICAgICAgICBjdXJyZW50UGF0aDogWy4uLnJlZnMuY3VycmVudFBhdGgsICdhZGRpdGlvbmFsUHJvcGVydGllcyddLFxuICAgICAgICAgICAgfSkgPz8gdHJ1ZTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiBkZWYuY2F0Y2hhbGwuX2RlZi50eXBlTmFtZSA9PT0gJ1pvZE5ldmVyJyA/XG4gICAgICAgICAgICBkZWYudW5rbm93bktleXMgPT09ICdwYXNzdGhyb3VnaCdcbiAgICAgICAgICAgIDogcGFyc2VEZWYoZGVmLmNhdGNoYWxsLl9kZWYsIHtcbiAgICAgICAgICAgICAgICAuLi5yZWZzLFxuICAgICAgICAgICAgICAgIGN1cnJlbnRQYXRoOiBbLi4ucmVmcy5jdXJyZW50UGF0aCwgJ2FkZGl0aW9uYWxQcm9wZXJ0aWVzJ10sXG4gICAgICAgICAgICB9KSA/PyB0cnVlO1xuICAgIH1cbn1cbmV4cG9ydCBmdW5jdGlvbiBwYXJzZU9iamVjdERlZihkZWYsIHJlZnMpIHtcbiAgICBjb25zdCByZXN1bHQgPSB7XG4gICAgICAgIHR5cGU6ICdvYmplY3QnLFxuICAgICAgICAuLi5PYmplY3QuZW50cmllcyhkZWYuc2hhcGUoKSkucmVkdWNlKChhY2MsIFtwcm9wTmFtZSwgcHJvcERlZl0pID0+IHtcbiAgICAgICAgICAgIGlmIChwcm9wRGVmID09PSB1bmRlZmluZWQgfHwgcHJvcERlZi5fZGVmID09PSB1bmRlZmluZWQpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGFjYztcbiAgICAgICAgICAgIGNvbnN0IHByb3BlcnR5UGF0aCA9IFsuLi5yZWZzLmN1cnJlbnRQYXRoLCAncHJvcGVydGllcycsIHByb3BOYW1lXTtcbiAgICAgICAgICAgIGNvbnN0IHBhcnNlZERlZiA9IHBhcnNlRGVmKHByb3BEZWYuX2RlZiwge1xuICAgICAgICAgICAgICAgIC4uLnJlZnMsXG4gICAgICAgICAgICAgICAgY3VycmVudFBhdGg6IHByb3BlcnR5UGF0aCxcbiAgICAgICAgICAgICAgICBwcm9wZXJ0eVBhdGgsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmIChwYXJzZWREZWYgPT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgICAgICByZXR1cm4gYWNjO1xuICAgICAgICAgICAgaWYgKHJlZnMub3BlbmFpU3RyaWN0TW9kZSAmJlxuICAgICAgICAgICAgICAgIHByb3BEZWYuaXNPcHRpb25hbCgpICYmXG4gICAgICAgICAgICAgICAgIXByb3BEZWYuaXNOdWxsYWJsZSgpICYmXG4gICAgICAgICAgICAgICAgdHlwZW9mIHByb3BEZWYuX2RlZj8uZGVmYXVsdFZhbHVlID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgWm9kIGZpZWxkIGF0IFxcYCR7cHJvcGVydHlQYXRoLmpvaW4oJy8nKX1cXGAgdXNlcyBcXGAub3B0aW9uYWwoKVxcYCB3aXRob3V0IFxcYC5udWxsYWJsZSgpXFxgIHdoaWNoIGlzIG5vdCBzdXBwb3J0ZWQgYnkgdGhlIEFQSS4gU2VlOiBodHRwczovL3BsYXRmb3JtLm9wZW5haS5jb20vZG9jcy9ndWlkZXMvc3RydWN0dXJlZC1vdXRwdXRzP2FwaS1tb2RlPXJlc3BvbnNlcyNhbGwtZmllbGRzLW11c3QtYmUtcmVxdWlyZWRgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgcHJvcGVydGllczoge1xuICAgICAgICAgICAgICAgICAgICAuLi5hY2MucHJvcGVydGllcyxcbiAgICAgICAgICAgICAgICAgICAgW3Byb3BOYW1lXTogcGFyc2VkRGVmLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgcmVxdWlyZWQ6IHByb3BEZWYuaXNPcHRpb25hbCgpICYmICFyZWZzLm9wZW5haVN0cmljdE1vZGUgPyBhY2MucmVxdWlyZWQgOiBbLi4uYWNjLnJlcXVpcmVkLCBwcm9wTmFtZV0sXG4gICAgICAgICAgICB9O1xuICAgICAgICB9LCB7IHByb3BlcnRpZXM6IHt9LCByZXF1aXJlZDogW10gfSksXG4gICAgICAgIGFkZGl0aW9uYWxQcm9wZXJ0aWVzOiBkZWNpZGVBZGRpdGlvbmFsUHJvcGVydGllcyhkZWYsIHJlZnMpLFxuICAgIH07XG4gICAgaWYgKCFyZXN1bHQucmVxdWlyZWQubGVuZ3RoKVxuICAgICAgICBkZWxldGUgcmVzdWx0LnJlcXVpcmVkO1xuICAgIHJldHVybiByZXN1bHQ7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1vYmplY3QubWpzLm1hcCIsImltcG9ydCB7IHBhcnNlRGVmIH0gZnJvbSBcIi4uL3BhcnNlRGVmLm1qc1wiO1xuZXhwb3J0IGNvbnN0IHBhcnNlT3B0aW9uYWxEZWYgPSAoZGVmLCByZWZzKSA9PiB7XG4gICAgaWYgKHJlZnMucHJvcGVydHlQYXRoICYmXG4gICAgICAgIHJlZnMuY3VycmVudFBhdGguc2xpY2UoMCwgcmVmcy5wcm9wZXJ0eVBhdGgubGVuZ3RoKS50b1N0cmluZygpID09PSByZWZzLnByb3BlcnR5UGF0aC50b1N0cmluZygpKSB7XG4gICAgICAgIHJldHVybiBwYXJzZURlZihkZWYuaW5uZXJUeXBlLl9kZWYsIHsgLi4ucmVmcywgY3VycmVudFBhdGg6IHJlZnMuY3VycmVudFBhdGggfSk7XG4gICAgfVxuICAgIGNvbnN0IGlubmVyU2NoZW1hID0gcGFyc2VEZWYoZGVmLmlubmVyVHlwZS5fZGVmLCB7XG4gICAgICAgIC4uLnJlZnMsXG4gICAgICAgIGN1cnJlbnRQYXRoOiBbLi4ucmVmcy5jdXJyZW50UGF0aCwgJ2FueU9mJywgJzEnXSxcbiAgICB9KTtcbiAgICByZXR1cm4gaW5uZXJTY2hlbWEgP1xuICAgICAgICB7XG4gICAgICAgICAgICBhbnlPZjogW1xuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbm90OiB7fSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGlubmVyU2NoZW1hLFxuICAgICAgICAgICAgXSxcbiAgICAgICAgfVxuICAgICAgICA6IHt9O1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW9wdGlvbmFsLm1qcy5tYXAiLCJpbXBvcnQgeyBwYXJzZURlZiB9IGZyb20gXCIuLi9wYXJzZURlZi5tanNcIjtcbmV4cG9ydCBjb25zdCBwYXJzZVBpcGVsaW5lRGVmID0gKGRlZiwgcmVmcykgPT4ge1xuICAgIGlmIChyZWZzLnBpcGVTdHJhdGVneSA9PT0gJ2lucHV0Jykge1xuICAgICAgICByZXR1cm4gcGFyc2VEZWYoZGVmLmluLl9kZWYsIHJlZnMpO1xuICAgIH1cbiAgICBlbHNlIGlmIChyZWZzLnBpcGVTdHJhdGVneSA9PT0gJ291dHB1dCcpIHtcbiAgICAgICAgcmV0dXJuIHBhcnNlRGVmKGRlZi5vdXQuX2RlZiwgcmVmcyk7XG4gICAgfVxuICAgIGNvbnN0IGEgPSBwYXJzZURlZihkZWYuaW4uX2RlZiwge1xuICAgICAgICAuLi5yZWZzLFxuICAgICAgICBjdXJyZW50UGF0aDogWy4uLnJlZnMuY3VycmVudFBhdGgsICdhbGxPZicsICcwJ10sXG4gICAgfSk7XG4gICAgY29uc3QgYiA9IHBhcnNlRGVmKGRlZi5vdXQuX2RlZiwge1xuICAgICAgICAuLi5yZWZzLFxuICAgICAgICBjdXJyZW50UGF0aDogWy4uLnJlZnMuY3VycmVudFBhdGgsICdhbGxPZicsIGEgPyAnMScgOiAnMCddLFxuICAgIH0pO1xuICAgIHJldHVybiB7XG4gICAgICAgIGFsbE9mOiBbYSwgYl0uZmlsdGVyKCh4KSA9PiB4ICE9PSB1bmRlZmluZWQpLFxuICAgIH07XG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cGlwZWxpbmUubWpzLm1hcCIsImltcG9ydCB7IHBhcnNlRGVmIH0gZnJvbSBcIi4uL3BhcnNlRGVmLm1qc1wiO1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlUHJvbWlzZURlZihkZWYsIHJlZnMpIHtcbiAgICByZXR1cm4gcGFyc2VEZWYoZGVmLnR5cGUuX2RlZiwgcmVmcyk7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1wcm9taXNlLm1qcy5tYXAiLCJpbXBvcnQgeyBzZXRSZXNwb25zZVZhbHVlQW5kRXJyb3JzIH0gZnJvbSBcIi4uL2Vycm9yTWVzc2FnZXMubWpzXCI7XG5pbXBvcnQgeyBwYXJzZURlZiB9IGZyb20gXCIuLi9wYXJzZURlZi5tanNcIjtcbmV4cG9ydCBmdW5jdGlvbiBwYXJzZVNldERlZihkZWYsIHJlZnMpIHtcbiAgICBjb25zdCBpdGVtcyA9IHBhcnNlRGVmKGRlZi52YWx1ZVR5cGUuX2RlZiwge1xuICAgICAgICAuLi5yZWZzLFxuICAgICAgICBjdXJyZW50UGF0aDogWy4uLnJlZnMuY3VycmVudFBhdGgsICdpdGVtcyddLFxuICAgIH0pO1xuICAgIGNvbnN0IHNjaGVtYSA9IHtcbiAgICAgICAgdHlwZTogJ2FycmF5JyxcbiAgICAgICAgdW5pcXVlSXRlbXM6IHRydWUsXG4gICAgICAgIGl0ZW1zLFxuICAgIH07XG4gICAgaWYgKGRlZi5taW5TaXplKSB7XG4gICAgICAgIHNldFJlc3BvbnNlVmFsdWVBbmRFcnJvcnMoc2NoZW1hLCAnbWluSXRlbXMnLCBkZWYubWluU2l6ZS52YWx1ZSwgZGVmLm1pblNpemUubWVzc2FnZSwgcmVmcyk7XG4gICAgfVxuICAgIGlmIChkZWYubWF4U2l6ZSkge1xuICAgICAgICBzZXRSZXNwb25zZVZhbHVlQW5kRXJyb3JzKHNjaGVtYSwgJ21heEl0ZW1zJywgZGVmLm1heFNpemUudmFsdWUsIGRlZi5tYXhTaXplLm1lc3NhZ2UsIHJlZnMpO1xuICAgIH1cbiAgICByZXR1cm4gc2NoZW1hO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c2V0Lm1qcy5tYXAiLCJpbXBvcnQgeyBwYXJzZURlZiB9IGZyb20gXCIuLi9wYXJzZURlZi5tanNcIjtcbmV4cG9ydCBmdW5jdGlvbiBwYXJzZVR1cGxlRGVmKGRlZiwgcmVmcykge1xuICAgIGlmIChkZWYucmVzdCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdHlwZTogJ2FycmF5JyxcbiAgICAgICAgICAgIG1pbkl0ZW1zOiBkZWYuaXRlbXMubGVuZ3RoLFxuICAgICAgICAgICAgaXRlbXM6IGRlZi5pdGVtc1xuICAgICAgICAgICAgICAgIC5tYXAoKHgsIGkpID0+IHBhcnNlRGVmKHguX2RlZiwge1xuICAgICAgICAgICAgICAgIC4uLnJlZnMsXG4gICAgICAgICAgICAgICAgY3VycmVudFBhdGg6IFsuLi5yZWZzLmN1cnJlbnRQYXRoLCAnaXRlbXMnLCBgJHtpfWBdLFxuICAgICAgICAgICAgfSkpXG4gICAgICAgICAgICAgICAgLnJlZHVjZSgoYWNjLCB4KSA9PiAoeCA9PT0gdW5kZWZpbmVkID8gYWNjIDogWy4uLmFjYywgeF0pLCBbXSksXG4gICAgICAgICAgICBhZGRpdGlvbmFsSXRlbXM6IHBhcnNlRGVmKGRlZi5yZXN0Ll9kZWYsIHtcbiAgICAgICAgICAgICAgICAuLi5yZWZzLFxuICAgICAgICAgICAgICAgIGN1cnJlbnRQYXRoOiBbLi4ucmVmcy5jdXJyZW50UGF0aCwgJ2FkZGl0aW9uYWxJdGVtcyddLFxuICAgICAgICAgICAgfSksXG4gICAgICAgIH07XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdHlwZTogJ2FycmF5JyxcbiAgICAgICAgICAgIG1pbkl0ZW1zOiBkZWYuaXRlbXMubGVuZ3RoLFxuICAgICAgICAgICAgbWF4SXRlbXM6IGRlZi5pdGVtcy5sZW5ndGgsXG4gICAgICAgICAgICBpdGVtczogZGVmLml0ZW1zXG4gICAgICAgICAgICAgICAgLm1hcCgoeCwgaSkgPT4gcGFyc2VEZWYoeC5fZGVmLCB7XG4gICAgICAgICAgICAgICAgLi4ucmVmcyxcbiAgICAgICAgICAgICAgICBjdXJyZW50UGF0aDogWy4uLnJlZnMuY3VycmVudFBhdGgsICdpdGVtcycsIGAke2l9YF0sXG4gICAgICAgICAgICB9KSlcbiAgICAgICAgICAgICAgICAucmVkdWNlKChhY2MsIHgpID0+ICh4ID09PSB1bmRlZmluZWQgPyBhY2MgOiBbLi4uYWNjLCB4XSksIFtdKSxcbiAgICAgICAgfTtcbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD10dXBsZS5tanMubWFwIiwiZXhwb3J0IGZ1bmN0aW9uIHBhcnNlVW5kZWZpbmVkRGVmKCkge1xuICAgIHJldHVybiB7XG4gICAgICAgIG5vdDoge30sXG4gICAgfTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXVuZGVmaW5lZC5tanMubWFwIiwiZXhwb3J0IGZ1bmN0aW9uIHBhcnNlVW5rbm93bkRlZigpIHtcbiAgICByZXR1cm4ge307XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD11bmtub3duLm1qcy5tYXAiLCJpbXBvcnQgeyBwYXJzZURlZiB9IGZyb20gXCIuLi9wYXJzZURlZi5tanNcIjtcbmV4cG9ydCBjb25zdCBwYXJzZVJlYWRvbmx5RGVmID0gKGRlZiwgcmVmcykgPT4ge1xuICAgIHJldHVybiBwYXJzZURlZihkZWYuaW5uZXJUeXBlLl9kZWYsIHJlZnMpO1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXJlYWRvbmx5Lm1qcy5tYXAiLCJpbXBvcnQgeyBab2RGaXJzdFBhcnR5VHlwZUtpbmQgfSBmcm9tICd6b2QvdjMnO1xuaW1wb3J0IHsgcGFyc2VBbnlEZWYgfSBmcm9tIFwiLi9wYXJzZXJzL2FueS5tanNcIjtcbmltcG9ydCB7IHBhcnNlQXJyYXlEZWYgfSBmcm9tIFwiLi9wYXJzZXJzL2FycmF5Lm1qc1wiO1xuaW1wb3J0IHsgcGFyc2VCaWdpbnREZWYgfSBmcm9tIFwiLi9wYXJzZXJzL2JpZ2ludC5tanNcIjtcbmltcG9ydCB7IHBhcnNlQm9vbGVhbkRlZiB9IGZyb20gXCIuL3BhcnNlcnMvYm9vbGVhbi5tanNcIjtcbmltcG9ydCB7IHBhcnNlQnJhbmRlZERlZiB9IGZyb20gXCIuL3BhcnNlcnMvYnJhbmRlZC5tanNcIjtcbmltcG9ydCB7IHBhcnNlQ2F0Y2hEZWYgfSBmcm9tIFwiLi9wYXJzZXJzL2NhdGNoLm1qc1wiO1xuaW1wb3J0IHsgcGFyc2VEYXRlRGVmIH0gZnJvbSBcIi4vcGFyc2Vycy9kYXRlLm1qc1wiO1xuaW1wb3J0IHsgcGFyc2VEZWZhdWx0RGVmIH0gZnJvbSBcIi4vcGFyc2Vycy9kZWZhdWx0Lm1qc1wiO1xuaW1wb3J0IHsgcGFyc2VFZmZlY3RzRGVmIH0gZnJvbSBcIi4vcGFyc2Vycy9lZmZlY3RzLm1qc1wiO1xuaW1wb3J0IHsgcGFyc2VFbnVtRGVmIH0gZnJvbSBcIi4vcGFyc2Vycy9lbnVtLm1qc1wiO1xuaW1wb3J0IHsgcGFyc2VJbnRlcnNlY3Rpb25EZWYgfSBmcm9tIFwiLi9wYXJzZXJzL2ludGVyc2VjdGlvbi5tanNcIjtcbmltcG9ydCB7IHBhcnNlTGl0ZXJhbERlZiB9IGZyb20gXCIuL3BhcnNlcnMvbGl0ZXJhbC5tanNcIjtcbmltcG9ydCB7IHBhcnNlTWFwRGVmIH0gZnJvbSBcIi4vcGFyc2Vycy9tYXAubWpzXCI7XG5pbXBvcnQgeyBwYXJzZU5hdGl2ZUVudW1EZWYgfSBmcm9tIFwiLi9wYXJzZXJzL25hdGl2ZUVudW0ubWpzXCI7XG5pbXBvcnQgeyBwYXJzZU5ldmVyRGVmIH0gZnJvbSBcIi4vcGFyc2Vycy9uZXZlci5tanNcIjtcbmltcG9ydCB7IHBhcnNlTnVsbERlZiB9IGZyb20gXCIuL3BhcnNlcnMvbnVsbC5tanNcIjtcbmltcG9ydCB7IHBhcnNlTnVsbGFibGVEZWYgfSBmcm9tIFwiLi9wYXJzZXJzL251bGxhYmxlLm1qc1wiO1xuaW1wb3J0IHsgcGFyc2VOdW1iZXJEZWYgfSBmcm9tIFwiLi9wYXJzZXJzL251bWJlci5tanNcIjtcbmltcG9ydCB7IHBhcnNlT2JqZWN0RGVmIH0gZnJvbSBcIi4vcGFyc2Vycy9vYmplY3QubWpzXCI7XG5pbXBvcnQgeyBwYXJzZU9wdGlvbmFsRGVmIH0gZnJvbSBcIi4vcGFyc2Vycy9vcHRpb25hbC5tanNcIjtcbmltcG9ydCB7IHBhcnNlUGlwZWxpbmVEZWYgfSBmcm9tIFwiLi9wYXJzZXJzL3BpcGVsaW5lLm1qc1wiO1xuaW1wb3J0IHsgcGFyc2VQcm9taXNlRGVmIH0gZnJvbSBcIi4vcGFyc2Vycy9wcm9taXNlLm1qc1wiO1xuaW1wb3J0IHsgcGFyc2VSZWNvcmREZWYgfSBmcm9tIFwiLi9wYXJzZXJzL3JlY29yZC5tanNcIjtcbmltcG9ydCB7IHBhcnNlU2V0RGVmIH0gZnJvbSBcIi4vcGFyc2Vycy9zZXQubWpzXCI7XG5pbXBvcnQgeyBwYXJzZVN0cmluZ0RlZiB9IGZyb20gXCIuL3BhcnNlcnMvc3RyaW5nLm1qc1wiO1xuaW1wb3J0IHsgcGFyc2VUdXBsZURlZiB9IGZyb20gXCIuL3BhcnNlcnMvdHVwbGUubWpzXCI7XG5pbXBvcnQgeyBwYXJzZVVuZGVmaW5lZERlZiB9IGZyb20gXCIuL3BhcnNlcnMvdW5kZWZpbmVkLm1qc1wiO1xuaW1wb3J0IHsgcGFyc2VVbmlvbkRlZiB9IGZyb20gXCIuL3BhcnNlcnMvdW5pb24ubWpzXCI7XG5pbXBvcnQgeyBwYXJzZVVua25vd25EZWYgfSBmcm9tIFwiLi9wYXJzZXJzL3Vua25vd24ubWpzXCI7XG5pbXBvcnQgeyBwYXJzZVJlYWRvbmx5RGVmIH0gZnJvbSBcIi4vcGFyc2Vycy9yZWFkb25seS5tanNcIjtcbmltcG9ydCB7IGlnbm9yZU92ZXJyaWRlIH0gZnJvbSBcIi4vT3B0aW9ucy5tanNcIjtcbmV4cG9ydCBmdW5jdGlvbiBwYXJzZURlZihkZWYsIHJlZnMsIGZvcmNlUmVzb2x1dGlvbiA9IGZhbHNlKSB7XG4gICAgY29uc3Qgc2Vlbkl0ZW0gPSByZWZzLnNlZW4uZ2V0KGRlZik7XG4gICAgaWYgKHJlZnMub3ZlcnJpZGUpIHtcbiAgICAgICAgY29uc3Qgb3ZlcnJpZGVSZXN1bHQgPSByZWZzLm92ZXJyaWRlPy4oZGVmLCByZWZzLCBzZWVuSXRlbSwgZm9yY2VSZXNvbHV0aW9uKTtcbiAgICAgICAgaWYgKG92ZXJyaWRlUmVzdWx0ICE9PSBpZ25vcmVPdmVycmlkZSkge1xuICAgICAgICAgICAgcmV0dXJuIG92ZXJyaWRlUmVzdWx0O1xuICAgICAgICB9XG4gICAgfVxuICAgIGlmIChzZWVuSXRlbSAmJiAhZm9yY2VSZXNvbHV0aW9uKSB7XG4gICAgICAgIGNvbnN0IHNlZW5TY2hlbWEgPSBnZXQkcmVmKHNlZW5JdGVtLCByZWZzKTtcbiAgICAgICAgaWYgKHNlZW5TY2hlbWEgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaWYgKCckcmVmJyBpbiBzZWVuU2NoZW1hKSB7XG4gICAgICAgICAgICAgICAgcmVmcy5zZWVuUmVmcy5hZGQoc2VlblNjaGVtYS4kcmVmKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBzZWVuU2NoZW1hO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNvbnN0IG5ld0l0ZW0gPSB7IGRlZiwgcGF0aDogcmVmcy5jdXJyZW50UGF0aCwganNvblNjaGVtYTogdW5kZWZpbmVkIH07XG4gICAgcmVmcy5zZWVuLnNldChkZWYsIG5ld0l0ZW0pO1xuICAgIGNvbnN0IGpzb25TY2hlbWEgPSBzZWxlY3RQYXJzZXIoZGVmLCBkZWYudHlwZU5hbWUsIHJlZnMsIGZvcmNlUmVzb2x1dGlvbik7XG4gICAgaWYgKGpzb25TY2hlbWEpIHtcbiAgICAgICAgYWRkTWV0YShkZWYsIHJlZnMsIGpzb25TY2hlbWEpO1xuICAgIH1cbiAgICBuZXdJdGVtLmpzb25TY2hlbWEgPSBqc29uU2NoZW1hO1xuICAgIHJldHVybiBqc29uU2NoZW1hO1xufVxuY29uc3QgZ2V0JHJlZiA9IChpdGVtLCByZWZzKSA9PiB7XG4gICAgc3dpdGNoIChyZWZzLiRyZWZTdHJhdGVneSkge1xuICAgICAgICBjYXNlICdyb290JzpcbiAgICAgICAgICAgIHJldHVybiB7ICRyZWY6IGl0ZW0ucGF0aC5qb2luKCcvJykgfTtcbiAgICAgICAgLy8gdGhpcyBjYXNlIGlzIG5lZWRlZCBhcyBPcGVuQUkgc3RyaWN0IG1vZGUgZG9lc24ndCBzdXBwb3J0IHRvcC1sZXZlbCBgJHJlZmBzLCBpLmUuXG4gICAgICAgIC8vIHRoZSB0b3AtbGV2ZWwgc2NoZW1hICptdXN0KiBiZSBge1widHlwZVwiOiBcIm9iamVjdFwiLCBcInByb3BlcnRpZXNcIjogey4uLn19YCBidXQgaWYgd2UgZXZlclxuICAgICAgICAvLyBuZWVkIHRvIGRlZmluZSBhIGAkcmVmYCwgcmVsYXRpdmUgYCRyZWZgcyBhcmVuJ3Qgc3VwcG9ydGVkLCBzbyB3ZSBuZWVkIHRvIGV4dHJhY3RcbiAgICAgICAgLy8gdGhlIHNjaGVtYSB0byBgIy9kZWZpbml0aW9ucy9gIGFuZCByZWZlcmVuY2UgdGhhdC5cbiAgICAgICAgLy9cbiAgICAgICAgLy8gZS5nLiBpZiB3ZSBuZWVkIHRvIHJlZmVyZW5jZSBhIHNjaGVtYSBhdFxuICAgICAgICAvLyBgW1wiI1wiLFwiZGVmaW5pdGlvbnNcIixcImNvbnRhY3RQZXJzb25cIixcInByb3BlcnRpZXNcIixcInBlcnNvbjFcIixcInByb3BlcnRpZXNcIixcIm5hbWVcIl1gXG4gICAgICAgIC8vIHRoZW4gd2UnbGwgZXh0cmFjdCBpdCBvdXQgdG8gYGNvbnRhY3RQZXJzb25fcHJvcGVydGllc19wZXJzb24xX3Byb3BlcnRpZXNfbmFtZWBcbiAgICAgICAgY2FzZSAnZXh0cmFjdC10by1yb290JzpcbiAgICAgICAgICAgIGNvbnN0IG5hbWUgPSBpdGVtLnBhdGguc2xpY2UocmVmcy5iYXNlUGF0aC5sZW5ndGggKyAxKS5qb2luKCdfJyk7XG4gICAgICAgICAgICAvLyB3ZSBkb24ndCBuZWVkIHRvIGV4dHJhY3QgdGhlIHJvb3Qgc2NoZW1hIGluIHRoaXMgY2FzZSwgYXMgaXQncyBhbHJlYWR5XG4gICAgICAgICAgICAvLyBiZWVuIGFkZGVkIHRvIHRoZSBkZWZpbml0aW9uc1xuICAgICAgICAgICAgaWYgKG5hbWUgIT09IHJlZnMubmFtZSAmJiByZWZzLm5hbWVTdHJhdGVneSA9PT0gJ2R1cGxpY2F0ZS1yZWYnKSB7XG4gICAgICAgICAgICAgICAgcmVmcy5kZWZpbml0aW9uc1tuYW1lXSA9IGl0ZW0uZGVmO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHsgJHJlZjogWy4uLnJlZnMuYmFzZVBhdGgsIHJlZnMuZGVmaW5pdGlvblBhdGgsIG5hbWVdLmpvaW4oJy8nKSB9O1xuICAgICAgICBjYXNlICdyZWxhdGl2ZSc6XG4gICAgICAgICAgICByZXR1cm4geyAkcmVmOiBnZXRSZWxhdGl2ZVBhdGgocmVmcy5jdXJyZW50UGF0aCwgaXRlbS5wYXRoKSB9O1xuICAgICAgICBjYXNlICdub25lJzpcbiAgICAgICAgY2FzZSAnc2Vlbic6IHtcbiAgICAgICAgICAgIGlmIChpdGVtLnBhdGgubGVuZ3RoIDwgcmVmcy5jdXJyZW50UGF0aC5sZW5ndGggJiZcbiAgICAgICAgICAgICAgICBpdGVtLnBhdGguZXZlcnkoKHZhbHVlLCBpbmRleCkgPT4gcmVmcy5jdXJyZW50UGF0aFtpbmRleF0gPT09IHZhbHVlKSkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihgUmVjdXJzaXZlIHJlZmVyZW5jZSBkZXRlY3RlZCBhdCAke3JlZnMuY3VycmVudFBhdGguam9pbignLycpfSEgRGVmYXVsdGluZyB0byBhbnlgKTtcbiAgICAgICAgICAgICAgICByZXR1cm4ge307XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcmVmcy4kcmVmU3RyYXRlZ3kgPT09ICdzZWVuJyA/IHt9IDogdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgfVxufTtcbmNvbnN0IGdldFJlbGF0aXZlUGF0aCA9IChwYXRoQSwgcGF0aEIpID0+IHtcbiAgICBsZXQgaSA9IDA7XG4gICAgZm9yICg7IGkgPCBwYXRoQS5sZW5ndGggJiYgaSA8IHBhdGhCLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGlmIChwYXRoQVtpXSAhPT0gcGF0aEJbaV0pXG4gICAgICAgICAgICBicmVhaztcbiAgICB9XG4gICAgcmV0dXJuIFsocGF0aEEubGVuZ3RoIC0gaSkudG9TdHJpbmcoKSwgLi4ucGF0aEIuc2xpY2UoaSldLmpvaW4oJy8nKTtcbn07XG5jb25zdCBzZWxlY3RQYXJzZXIgPSAoZGVmLCB0eXBlTmFtZSwgcmVmcywgZm9yY2VSZXNvbHV0aW9uKSA9PiB7XG4gICAgc3dpdGNoICh0eXBlTmFtZSkge1xuICAgICAgICBjYXNlIFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RTdHJpbmc6XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VTdHJpbmdEZWYoZGVmLCByZWZzKTtcbiAgICAgICAgY2FzZSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kTnVtYmVyOlxuICAgICAgICAgICAgcmV0dXJuIHBhcnNlTnVtYmVyRGVmKGRlZiwgcmVmcyk7XG4gICAgICAgIGNhc2UgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZE9iamVjdDpcbiAgICAgICAgICAgIHJldHVybiBwYXJzZU9iamVjdERlZihkZWYsIHJlZnMpO1xuICAgICAgICBjYXNlIFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RCaWdJbnQ6XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VCaWdpbnREZWYoZGVmLCByZWZzKTtcbiAgICAgICAgY2FzZSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kQm9vbGVhbjpcbiAgICAgICAgICAgIHJldHVybiBwYXJzZUJvb2xlYW5EZWYoKTtcbiAgICAgICAgY2FzZSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kRGF0ZTpcbiAgICAgICAgICAgIHJldHVybiBwYXJzZURhdGVEZWYoZGVmLCByZWZzKTtcbiAgICAgICAgY2FzZSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kVW5kZWZpbmVkOlxuICAgICAgICAgICAgcmV0dXJuIHBhcnNlVW5kZWZpbmVkRGVmKCk7XG4gICAgICAgIGNhc2UgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZE51bGw6XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VOdWxsRGVmKHJlZnMpO1xuICAgICAgICBjYXNlIFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RBcnJheTpcbiAgICAgICAgICAgIHJldHVybiBwYXJzZUFycmF5RGVmKGRlZiwgcmVmcyk7XG4gICAgICAgIGNhc2UgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZFVuaW9uOlxuICAgICAgICBjYXNlIFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2REaXNjcmltaW5hdGVkVW5pb246XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VVbmlvbkRlZihkZWYsIHJlZnMpO1xuICAgICAgICBjYXNlIFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RJbnRlcnNlY3Rpb246XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VJbnRlcnNlY3Rpb25EZWYoZGVmLCByZWZzKTtcbiAgICAgICAgY2FzZSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kVHVwbGU6XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VUdXBsZURlZihkZWYsIHJlZnMpO1xuICAgICAgICBjYXNlIFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RSZWNvcmQ6XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VSZWNvcmREZWYoZGVmLCByZWZzKTtcbiAgICAgICAgY2FzZSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kTGl0ZXJhbDpcbiAgICAgICAgICAgIHJldHVybiBwYXJzZUxpdGVyYWxEZWYoZGVmLCByZWZzKTtcbiAgICAgICAgY2FzZSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kRW51bTpcbiAgICAgICAgICAgIHJldHVybiBwYXJzZUVudW1EZWYoZGVmKTtcbiAgICAgICAgY2FzZSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kTmF0aXZlRW51bTpcbiAgICAgICAgICAgIHJldHVybiBwYXJzZU5hdGl2ZUVudW1EZWYoZGVmKTtcbiAgICAgICAgY2FzZSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kTnVsbGFibGU6XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VOdWxsYWJsZURlZihkZWYsIHJlZnMpO1xuICAgICAgICBjYXNlIFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RPcHRpb25hbDpcbiAgICAgICAgICAgIHJldHVybiBwYXJzZU9wdGlvbmFsRGVmKGRlZiwgcmVmcyk7XG4gICAgICAgIGNhc2UgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZE1hcDpcbiAgICAgICAgICAgIHJldHVybiBwYXJzZU1hcERlZihkZWYsIHJlZnMpO1xuICAgICAgICBjYXNlIFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RTZXQ6XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VTZXREZWYoZGVmLCByZWZzKTtcbiAgICAgICAgY2FzZSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kTGF6eTpcbiAgICAgICAgICAgIHJldHVybiBwYXJzZURlZihkZWYuZ2V0dGVyKCkuX2RlZiwgcmVmcyk7XG4gICAgICAgIGNhc2UgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZFByb21pc2U6XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VQcm9taXNlRGVmKGRlZiwgcmVmcyk7XG4gICAgICAgIGNhc2UgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZE5hTjpcbiAgICAgICAgY2FzZSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kTmV2ZXI6XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VOZXZlckRlZigpO1xuICAgICAgICBjYXNlIFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RFZmZlY3RzOlxuICAgICAgICAgICAgcmV0dXJuIHBhcnNlRWZmZWN0c0RlZihkZWYsIHJlZnMsIGZvcmNlUmVzb2x1dGlvbik7XG4gICAgICAgIGNhc2UgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZEFueTpcbiAgICAgICAgICAgIHJldHVybiBwYXJzZUFueURlZigpO1xuICAgICAgICBjYXNlIFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RVbmtub3duOlxuICAgICAgICAgICAgcmV0dXJuIHBhcnNlVW5rbm93bkRlZigpO1xuICAgICAgICBjYXNlIFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2REZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuIHBhcnNlRGVmYXVsdERlZihkZWYsIHJlZnMpO1xuICAgICAgICBjYXNlIFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RCcmFuZGVkOlxuICAgICAgICAgICAgcmV0dXJuIHBhcnNlQnJhbmRlZERlZihkZWYsIHJlZnMpO1xuICAgICAgICBjYXNlIFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RSZWFkb25seTpcbiAgICAgICAgICAgIHJldHVybiBwYXJzZVJlYWRvbmx5RGVmKGRlZiwgcmVmcyk7XG4gICAgICAgIGNhc2UgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZENhdGNoOlxuICAgICAgICAgICAgcmV0dXJuIHBhcnNlQ2F0Y2hEZWYoZGVmLCByZWZzKTtcbiAgICAgICAgY2FzZSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kUGlwZWxpbmU6XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VQaXBlbGluZURlZihkZWYsIHJlZnMpO1xuICAgICAgICBjYXNlIFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RGdW5jdGlvbjpcbiAgICAgICAgY2FzZSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kVm9pZDpcbiAgICAgICAgY2FzZSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kU3ltYm9sOlxuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiAoKF8pID0+IHVuZGVmaW5lZCkodHlwZU5hbWUpO1xuICAgIH1cbn07XG5jb25zdCBhZGRNZXRhID0gKGRlZiwgcmVmcywganNvblNjaGVtYSkgPT4ge1xuICAgIGlmIChkZWYuZGVzY3JpcHRpb24pIHtcbiAgICAgICAganNvblNjaGVtYS5kZXNjcmlwdGlvbiA9IGRlZi5kZXNjcmlwdGlvbjtcbiAgICAgICAgaWYgKHJlZnMubWFya2Rvd25EZXNjcmlwdGlvbikge1xuICAgICAgICAgICAganNvblNjaGVtYS5tYXJrZG93bkRlc2NyaXB0aW9uID0gZGVmLmRlc2NyaXB0aW9uO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBqc29uU2NoZW1hO1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBhcnNlRGVmLm1qcy5tYXAiLCJpbXBvcnQgeyBwYXJzZURlZiB9IGZyb20gXCIuL3BhcnNlRGVmLm1qc1wiO1xuaW1wb3J0IHsgZ2V0UmVmcyB9IGZyb20gXCIuL1JlZnMubWpzXCI7XG5pbXBvcnQgeyB6b2REZWYsIGlzRW1wdHlPYmogfSBmcm9tIFwiLi91dGlsLm1qc1wiO1xuY29uc3Qgem9kVG9Kc29uU2NoZW1hID0gKHNjaGVtYSwgb3B0aW9ucykgPT4ge1xuICAgIGNvbnN0IHJlZnMgPSBnZXRSZWZzKG9wdGlvbnMpO1xuICAgIGNvbnN0IG5hbWUgPSB0eXBlb2Ygb3B0aW9ucyA9PT0gJ3N0cmluZycgPyBvcHRpb25zXG4gICAgICAgIDogb3B0aW9ucz8ubmFtZVN0cmF0ZWd5ID09PSAndGl0bGUnID8gdW5kZWZpbmVkXG4gICAgICAgICAgICA6IG9wdGlvbnM/Lm5hbWU7XG4gICAgY29uc3QgbWFpbiA9IHBhcnNlRGVmKHNjaGVtYS5fZGVmLCBuYW1lID09PSB1bmRlZmluZWQgPyByZWZzIDogKHtcbiAgICAgICAgLi4ucmVmcyxcbiAgICAgICAgY3VycmVudFBhdGg6IFsuLi5yZWZzLmJhc2VQYXRoLCByZWZzLmRlZmluaXRpb25QYXRoLCBuYW1lXSxcbiAgICB9KSwgZmFsc2UpID8/IHt9O1xuICAgIGNvbnN0IHRpdGxlID0gdHlwZW9mIG9wdGlvbnMgPT09ICdvYmplY3QnICYmIG9wdGlvbnMubmFtZSAhPT0gdW5kZWZpbmVkICYmIG9wdGlvbnMubmFtZVN0cmF0ZWd5ID09PSAndGl0bGUnID9cbiAgICAgICAgb3B0aW9ucy5uYW1lXG4gICAgICAgIDogdW5kZWZpbmVkO1xuICAgIGlmICh0aXRsZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIG1haW4udGl0bGUgPSB0aXRsZTtcbiAgICB9XG4gICAgY29uc3QgZGVmaW5pdGlvbnMgPSAoKCkgPT4ge1xuICAgICAgICBpZiAoaXNFbXB0eU9iaihyZWZzLmRlZmluaXRpb25zKSkge1xuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBkZWZpbml0aW9ucyA9IHt9O1xuICAgICAgICBjb25zdCBwcm9jZXNzZWREZWZpbml0aW9ucyA9IG5ldyBTZXQoKTtcbiAgICAgICAgLy8gdGhlIGNhbGwgdG8gYHBhcnNlRGVmKClgIGhlcmUgbWlnaHQgaXRzZWxmIGFkZCBtb3JlIGVudHJpZXMgdG8gYC5kZWZpbml0aW9uc2BcbiAgICAgICAgLy8gc28gd2UgbmVlZCB0byBjb250aW51YWxseSBldmFsdWF0ZSBkZWZpbml0aW9ucyB1bnRpbCB3ZSd2ZSByZXNvbHZlZCBhbGwgb2YgdGhlbVxuICAgICAgICAvL1xuICAgICAgICAvLyB3ZSBoYXZlIGEgZ2VuZXJvdXMgaXRlcmF0aW9uIGxpbWl0IGhlcmUgdG8gYXZvaWQgYmxvd2luZyB1cCB0aGUgc3RhY2sgaWYgdGhlcmVcbiAgICAgICAgLy8gYXJlIGFueSBidWdzIHRoYXQgd291bGQgb3RoZXJ3aXNlIHJlc3VsdCBpbiB1cyBpdGVyYXRpbmcgaW5kZWZpbml0ZWx5XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgNTAwOyBpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IG5ld0RlZmluaXRpb25zID0gT2JqZWN0LmVudHJpZXMocmVmcy5kZWZpbml0aW9ucykuZmlsdGVyKChba2V5XSkgPT4gIXByb2Nlc3NlZERlZmluaXRpb25zLmhhcyhrZXkpKTtcbiAgICAgICAgICAgIGlmIChuZXdEZWZpbml0aW9ucy5sZW5ndGggPT09IDApXG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IFtrZXksIHNjaGVtYV0gb2YgbmV3RGVmaW5pdGlvbnMpIHtcbiAgICAgICAgICAgICAgICBkZWZpbml0aW9uc1trZXldID1cbiAgICAgICAgICAgICAgICAgICAgcGFyc2VEZWYoem9kRGVmKHNjaGVtYSksIHsgLi4ucmVmcywgY3VycmVudFBhdGg6IFsuLi5yZWZzLmJhc2VQYXRoLCByZWZzLmRlZmluaXRpb25QYXRoLCBrZXldIH0sIHRydWUpID8/IHt9O1xuICAgICAgICAgICAgICAgIHByb2Nlc3NlZERlZmluaXRpb25zLmFkZChrZXkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBkZWZpbml0aW9ucztcbiAgICB9KSgpO1xuICAgIGNvbnN0IGNvbWJpbmVkID0gbmFtZSA9PT0gdW5kZWZpbmVkID9cbiAgICAgICAgZGVmaW5pdGlvbnMgP1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIC4uLm1haW4sXG4gICAgICAgICAgICAgICAgW3JlZnMuZGVmaW5pdGlvblBhdGhdOiBkZWZpbml0aW9ucyxcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIDogbWFpblxuICAgICAgICA6IHJlZnMubmFtZVN0cmF0ZWd5ID09PSAnZHVwbGljYXRlLXJlZicgP1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIC4uLm1haW4sXG4gICAgICAgICAgICAgICAgLi4uKGRlZmluaXRpb25zIHx8IHJlZnMuc2VlblJlZnMuc2l6ZSA/XG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIFtyZWZzLmRlZmluaXRpb25QYXRoXToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmRlZmluaXRpb25zLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIG9ubHkgYWN0dWFsbHkgZHVwbGljYXRlIHRoZSBzY2hlbWEgZGVmaW5pdGlvbiBpZiBpdCB3YXMgZXZlciByZWZlcmVuY2VkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gb3RoZXJ3aXNlIHRoZSBkdXBsaWNhdGlvbiBpcyBjb21wbGV0ZWx5IHBvaW50bGVzc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLihyZWZzLnNlZW5SZWZzLnNpemUgPyB7IFtuYW1lXTogbWFpbiB9IDogdW5kZWZpbmVkKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgOiB1bmRlZmluZWQpLFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgOiB7XG4gICAgICAgICAgICAgICAgJHJlZjogWy4uLihyZWZzLiRyZWZTdHJhdGVneSA9PT0gJ3JlbGF0aXZlJyA/IFtdIDogcmVmcy5iYXNlUGF0aCksIHJlZnMuZGVmaW5pdGlvblBhdGgsIG5hbWVdLmpvaW4oJy8nKSxcbiAgICAgICAgICAgICAgICBbcmVmcy5kZWZpbml0aW9uUGF0aF06IHtcbiAgICAgICAgICAgICAgICAgICAgLi4uZGVmaW5pdGlvbnMsXG4gICAgICAgICAgICAgICAgICAgIFtuYW1lXTogbWFpbixcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfTtcbiAgICBpZiAocmVmcy50YXJnZXQgPT09ICdqc29uU2NoZW1hNycpIHtcbiAgICAgICAgY29tYmluZWQuJHNjaGVtYSA9ICdodHRwOi8vanNvbi1zY2hlbWEub3JnL2RyYWZ0LTA3L3NjaGVtYSMnO1xuICAgIH1cbiAgICBlbHNlIGlmIChyZWZzLnRhcmdldCA9PT0gJ2pzb25TY2hlbWEyMDE5LTA5Jykge1xuICAgICAgICBjb21iaW5lZC4kc2NoZW1hID0gJ2h0dHBzOi8vanNvbi1zY2hlbWEub3JnL2RyYWZ0LzIwMTktMDkvc2NoZW1hIyc7XG4gICAgfVxuICAgIHJldHVybiBjb21iaW5lZDtcbn07XG5leHBvcnQgeyB6b2RUb0pzb25TY2hlbWEgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXpvZFRvSnNvblNjaGVtYS5tanMubWFwIiwiaW1wb3J0IHsgT3BlbkFJRXJyb3IgfSBmcm9tIFwiLi4vZXJyb3IubWpzXCI7XG5pbXBvcnQgeyBpc0F1dG9QYXJzYWJsZVJlc3BvbnNlRm9ybWF0IH0gZnJvbSBcIi4uL2xpYi9wYXJzZXIubWpzXCI7XG5leHBvcnQgZnVuY3Rpb24gbWF5YmVQYXJzZVJlc3BvbnNlKHJlc3BvbnNlLCBwYXJhbXMpIHtcbiAgICBpZiAoIXBhcmFtcyB8fCAhaGFzQXV0b1BhcnNlYWJsZUlucHV0KHBhcmFtcykpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIC4uLnJlc3BvbnNlLFxuICAgICAgICAgICAgb3V0cHV0X3BhcnNlZDogbnVsbCxcbiAgICAgICAgICAgIG91dHB1dDogcmVzcG9uc2Uub3V0cHV0Lm1hcCgoaXRlbSkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChpdGVtLnR5cGUgPT09ICdmdW5jdGlvbl9jYWxsJykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgLi4uaXRlbSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlZF9hcmd1bWVudHM6IG51bGwsXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChpdGVtLnR5cGUgPT09ICdtZXNzYWdlJykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgLi4uaXRlbSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6IGl0ZW0uY29udGVudC5tYXAoKGNvbnRlbnQpID0+ICh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY29udGVudCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJzZWQ6IG51bGwsXG4gICAgICAgICAgICAgICAgICAgICAgICB9KSksXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gaXRlbTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIHBhcnNlUmVzcG9uc2UocmVzcG9uc2UsIHBhcmFtcyk7XG59XG5leHBvcnQgZnVuY3Rpb24gcGFyc2VSZXNwb25zZShyZXNwb25zZSwgcGFyYW1zKSB7XG4gICAgY29uc3Qgb3V0cHV0ID0gcmVzcG9uc2Uub3V0cHV0Lm1hcCgoaXRlbSkgPT4ge1xuICAgICAgICBpZiAoaXRlbS50eXBlID09PSAnZnVuY3Rpb25fY2FsbCcpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgLi4uaXRlbSxcbiAgICAgICAgICAgICAgICBwYXJzZWRfYXJndW1lbnRzOiBwYXJzZVRvb2xDYWxsKHBhcmFtcywgaXRlbSksXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIGlmIChpdGVtLnR5cGUgPT09ICdtZXNzYWdlJykge1xuICAgICAgICAgICAgY29uc3QgY29udGVudCA9IGl0ZW0uY29udGVudC5tYXAoKGNvbnRlbnQpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoY29udGVudC50eXBlID09PSAnb3V0cHV0X3RleHQnKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAuLi5jb250ZW50LFxuICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VkOiBwYXJzZVRleHRGb3JtYXQocGFyYW1zLCBjb250ZW50LnRleHQpLFxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gY29udGVudDtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAuLi5pdGVtLFxuICAgICAgICAgICAgICAgIGNvbnRlbnQsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBpdGVtO1xuICAgIH0pO1xuICAgIGNvbnN0IHBhcnNlZCA9IE9iamVjdC5hc3NpZ24oe30sIHJlc3BvbnNlLCB7IG91dHB1dCB9KTtcbiAgICBpZiAoIU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IocmVzcG9uc2UsICdvdXRwdXRfdGV4dCcpKSB7XG4gICAgICAgIGFkZE91dHB1dFRleHQocGFyc2VkKTtcbiAgICB9XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHBhcnNlZCwgJ291dHB1dF9wYXJzZWQnLCB7XG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGdldCgpIHtcbiAgICAgICAgICAgIGZvciAoY29uc3Qgb3V0cHV0IG9mIHBhcnNlZC5vdXRwdXQpIHtcbiAgICAgICAgICAgICAgICBpZiAob3V0cHV0LnR5cGUgIT09ICdtZXNzYWdlJykge1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBjb250ZW50IG9mIG91dHB1dC5jb250ZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjb250ZW50LnR5cGUgPT09ICdvdXRwdXRfdGV4dCcgJiYgY29udGVudC5wYXJzZWQgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjb250ZW50LnBhcnNlZDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9LFxuICAgIH0pO1xuICAgIHJldHVybiBwYXJzZWQ7XG59XG5mdW5jdGlvbiBwYXJzZVRleHRGb3JtYXQocGFyYW1zLCBjb250ZW50KSB7XG4gICAgaWYgKHBhcmFtcy50ZXh0Py5mb3JtYXQ/LnR5cGUgIT09ICdqc29uX3NjaGVtYScpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIGlmICgnJHBhcnNlUmF3JyBpbiBwYXJhbXMudGV4dD8uZm9ybWF0KSB7XG4gICAgICAgIGNvbnN0IHRleHRfZm9ybWF0ID0gcGFyYW1zLnRleHQ/LmZvcm1hdDtcbiAgICAgICAgcmV0dXJuIHRleHRfZm9ybWF0LiRwYXJzZVJhdyhjb250ZW50KTtcbiAgICB9XG4gICAgcmV0dXJuIEpTT04ucGFyc2UoY29udGVudCk7XG59XG5leHBvcnQgZnVuY3Rpb24gaGFzQXV0b1BhcnNlYWJsZUlucHV0KHBhcmFtcykge1xuICAgIGlmIChpc0F1dG9QYXJzYWJsZVJlc3BvbnNlRm9ybWF0KHBhcmFtcy50ZXh0Py5mb3JtYXQpKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG59XG5leHBvcnQgZnVuY3Rpb24gbWFrZVBhcnNlYWJsZVJlc3BvbnNlVG9vbCh0b29sLCB7IHBhcnNlciwgY2FsbGJhY2ssIH0pIHtcbiAgICBjb25zdCBvYmogPSB7IC4uLnRvb2wgfTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydGllcyhvYmosIHtcbiAgICAgICAgJGJyYW5kOiB7XG4gICAgICAgICAgICB2YWx1ZTogJ2F1dG8tcGFyc2VhYmxlLXRvb2wnLFxuICAgICAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIH0sXG4gICAgICAgICRwYXJzZVJhdzoge1xuICAgICAgICAgICAgdmFsdWU6IHBhcnNlcixcbiAgICAgICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICB9LFxuICAgICAgICAkY2FsbGJhY2s6IHtcbiAgICAgICAgICAgIHZhbHVlOiBjYWxsYmFjayxcbiAgICAgICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICB9LFxuICAgIH0pO1xuICAgIHJldHVybiBvYmo7XG59XG5leHBvcnQgZnVuY3Rpb24gaXNBdXRvUGFyc2FibGVUb29sKHRvb2wpIHtcbiAgICByZXR1cm4gdG9vbD8uWyckYnJhbmQnXSA9PT0gJ2F1dG8tcGFyc2VhYmxlLXRvb2wnO1xufVxuZnVuY3Rpb24gZ2V0SW5wdXRUb29sQnlOYW1lKGlucHV0X3Rvb2xzLCBuYW1lKSB7XG4gICAgcmV0dXJuIGlucHV0X3Rvb2xzLmZpbmQoKHRvb2wpID0+IHRvb2wudHlwZSA9PT0gJ2Z1bmN0aW9uJyAmJiB0b29sLm5hbWUgPT09IG5hbWUpO1xufVxuZnVuY3Rpb24gcGFyc2VUb29sQ2FsbChwYXJhbXMsIHRvb2xDYWxsKSB7XG4gICAgY29uc3QgaW5wdXRUb29sID0gZ2V0SW5wdXRUb29sQnlOYW1lKHBhcmFtcy50b29scyA/PyBbXSwgdG9vbENhbGwubmFtZSk7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgLi4udG9vbENhbGwsXG4gICAgICAgIC4uLnRvb2xDYWxsLFxuICAgICAgICBwYXJzZWRfYXJndW1lbnRzOiBpc0F1dG9QYXJzYWJsZVRvb2woaW5wdXRUb29sKSA/IGlucHV0VG9vbC4kcGFyc2VSYXcodG9vbENhbGwuYXJndW1lbnRzKVxuICAgICAgICAgICAgOiBpbnB1dFRvb2w/LnN0cmljdCA/IEpTT04ucGFyc2UodG9vbENhbGwuYXJndW1lbnRzKVxuICAgICAgICAgICAgICAgIDogbnVsbCxcbiAgICB9O1xufVxuZXhwb3J0IGZ1bmN0aW9uIHNob3VsZFBhcnNlVG9vbENhbGwocGFyYW1zLCB0b29sQ2FsbCkge1xuICAgIGlmICghcGFyYW1zKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgY29uc3QgaW5wdXRUb29sID0gZ2V0SW5wdXRUb29sQnlOYW1lKHBhcmFtcy50b29scyA/PyBbXSwgdG9vbENhbGwubmFtZSk7XG4gICAgcmV0dXJuIGlzQXV0b1BhcnNhYmxlVG9vbChpbnB1dFRvb2wpIHx8IGlucHV0VG9vbD8uc3RyaWN0IHx8IGZhbHNlO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHZhbGlkYXRlSW5wdXRUb29scyh0b29scykge1xuICAgIGZvciAoY29uc3QgdG9vbCBvZiB0b29scyA/PyBbXSkge1xuICAgICAgICBpZiAodG9vbC50eXBlICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgT3BlbkFJRXJyb3IoYEN1cnJlbnRseSBvbmx5IFxcYGZ1bmN0aW9uXFxgIHRvb2wgdHlwZXMgc3VwcG9ydCBhdXRvLXBhcnNpbmc7IFJlY2VpdmVkIFxcYCR7dG9vbC50eXBlfVxcYGApO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0b29sLmZ1bmN0aW9uLnN0cmljdCAhPT0gdHJ1ZSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IE9wZW5BSUVycm9yKGBUaGUgXFxgJHt0b29sLmZ1bmN0aW9uLm5hbWV9XFxgIHRvb2wgaXMgbm90IG1hcmtlZCB3aXRoIFxcYHN0cmljdDogdHJ1ZVxcYC4gT25seSBzdHJpY3QgZnVuY3Rpb24gdG9vbHMgY2FuIGJlIGF1dG8tcGFyc2VkYCk7XG4gICAgICAgIH1cbiAgICB9XG59XG5leHBvcnQgZnVuY3Rpb24gYWRkT3V0cHV0VGV4dChyc3ApIHtcbiAgICBjb25zdCB0ZXh0cyA9IFtdO1xuICAgIGZvciAoY29uc3Qgb3V0cHV0IG9mIHJzcC5vdXRwdXQpIHtcbiAgICAgICAgaWYgKG91dHB1dC50eXBlICE9PSAnbWVzc2FnZScpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGZvciAoY29uc3QgY29udGVudCBvZiBvdXRwdXQuY29udGVudCkge1xuICAgICAgICAgICAgaWYgKGNvbnRlbnQudHlwZSA9PT0gJ291dHB1dF90ZXh0Jykge1xuICAgICAgICAgICAgICAgIHRleHRzLnB1c2goY29udGVudC50ZXh0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICByc3Aub3V0cHV0X3RleHQgPSB0ZXh0cy5qb2luKCcnKTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVJlc3BvbnNlc1BhcnNlci5tanMubWFwIiwiZXhwb3J0IGZ1bmN0aW9uIHRvU3RyaWN0SnNvblNjaGVtYShzY2hlbWEpIHtcbiAgICBpZiAoc2NoZW1hLnR5cGUgIT09ICdvYmplY3QnKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgUm9vdCBzY2hlbWEgbXVzdCBoYXZlIHR5cGU6ICdvYmplY3QnIGJ1dCBnb3QgdHlwZTogJHtzY2hlbWEudHlwZSA/IGAnJHtzY2hlbWEudHlwZX0nYCA6ICd1bmRlZmluZWQnfWApO1xuICAgIH1cbiAgICBjb25zdCBzY2hlbWFDb3B5ID0gc3RydWN0dXJlZENsb25lKHNjaGVtYSk7XG4gICAgcmV0dXJuIGVuc3VyZVN0cmljdEpzb25TY2hlbWEoc2NoZW1hQ29weSwgW10sIHNjaGVtYUNvcHkpO1xufVxuZnVuY3Rpb24gaXNOdWxsYWJsZShzY2hlbWEpIHtcbiAgICBpZiAodHlwZW9mIHNjaGVtYSA9PT0gJ2Jvb2xlYW4nKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgaWYgKHNjaGVtYS50eXBlID09PSAnbnVsbCcpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGZvciAoY29uc3Qgb25lT2ZWYXJpYW50IG9mIHNjaGVtYS5vbmVPZiA/PyBbXSkge1xuICAgICAgICBpZiAoaXNOdWxsYWJsZShvbmVPZlZhcmlhbnQpKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBmb3IgKGNvbnN0IGFsbE9mVmFyaWFudCBvZiBzY2hlbWEuYW55T2YgPz8gW10pIHtcbiAgICAgICAgaWYgKGlzTnVsbGFibGUoYWxsT2ZWYXJpYW50KSkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xufVxuLyoqXG4gKiBNdXRhdGVzIHRoZSBnaXZlbiBKU09OIHNjaGVtYSB0byBlbnN1cmUgaXQgY29uZm9ybXMgdG8gdGhlIGBzdHJpY3RgIHN0YW5kYXJkXG4gKiB0aGF0IHRoZSBBUEkgZXhwZWN0cy5cbiAqL1xuZnVuY3Rpb24gZW5zdXJlU3RyaWN0SnNvblNjaGVtYShqc29uU2NoZW1hLCBwYXRoLCByb290KSB7XG4gICAgaWYgKHR5cGVvZiBqc29uU2NoZW1hID09PSAnYm9vbGVhbicpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihgRXhwZWN0ZWQgb2JqZWN0IHNjaGVtYSBidXQgZ290IGJvb2xlYW47IHBhdGg9JHtwYXRoLmpvaW4oJy8nKX1gKTtcbiAgICB9XG4gICAgaWYgKCFpc09iamVjdChqc29uU2NoZW1hKSkge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKGBFeHBlY3RlZCAke0pTT04uc3RyaW5naWZ5KGpzb25TY2hlbWEpfSB0byBiZSBhbiBvYmplY3Q7IHBhdGg9JHtwYXRoLmpvaW4oJy8nKX1gKTtcbiAgICB9XG4gICAgLy8gSGFuZGxlICRkZWZzIChub24tc3RhbmRhcmQgYnV0IHNvbWV0aW1lcyB1c2VkKVxuICAgIGNvbnN0IGRlZnMgPSBqc29uU2NoZW1hLiRkZWZzO1xuICAgIGlmIChpc09iamVjdChkZWZzKSkge1xuICAgICAgICBmb3IgKGNvbnN0IFtkZWZOYW1lLCBkZWZTY2hlbWFdIG9mIE9iamVjdC5lbnRyaWVzKGRlZnMpKSB7XG4gICAgICAgICAgICBlbnN1cmVTdHJpY3RKc29uU2NoZW1hKGRlZlNjaGVtYSwgWy4uLnBhdGgsICckZGVmcycsIGRlZk5hbWVdLCByb290KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvLyBIYW5kbGUgZGVmaW5pdGlvbnMgKGRyYWZ0LTA0IHN0eWxlLCBkZXByZWNhdGVkIGluIGRyYWZ0LTA3IGJ1dCBzdGlsbCB1c2VkKVxuICAgIGNvbnN0IGRlZmluaXRpb25zID0ganNvblNjaGVtYS5kZWZpbml0aW9ucztcbiAgICBpZiAoaXNPYmplY3QoZGVmaW5pdGlvbnMpKSB7XG4gICAgICAgIGZvciAoY29uc3QgW2RlZmluaXRpb25OYW1lLCBkZWZpbml0aW9uU2NoZW1hXSBvZiBPYmplY3QuZW50cmllcyhkZWZpbml0aW9ucykpIHtcbiAgICAgICAgICAgIGVuc3VyZVN0cmljdEpzb25TY2hlbWEoZGVmaW5pdGlvblNjaGVtYSwgWy4uLnBhdGgsICdkZWZpbml0aW9ucycsIGRlZmluaXRpb25OYW1lXSwgcm9vdCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLy8gQWRkIGFkZGl0aW9uYWxQcm9wZXJ0aWVzOiBmYWxzZSB0byBvYmplY3QgdHlwZXNcbiAgICBjb25zdCB0eXAgPSBqc29uU2NoZW1hLnR5cGU7XG4gICAgaWYgKHR5cCA9PT0gJ29iamVjdCcgJiYgISgnYWRkaXRpb25hbFByb3BlcnRpZXMnIGluIGpzb25TY2hlbWEpKSB7XG4gICAgICAgIGpzb25TY2hlbWEuYWRkaXRpb25hbFByb3BlcnRpZXMgPSBmYWxzZTtcbiAgICB9XG4gICAgY29uc3QgcmVxdWlyZWQgPSBqc29uU2NoZW1hLnJlcXVpcmVkID8/IFtdO1xuICAgIC8vIEhhbmRsZSBvYmplY3QgcHJvcGVydGllc1xuICAgIGNvbnN0IHByb3BlcnRpZXMgPSBqc29uU2NoZW1hLnByb3BlcnRpZXM7XG4gICAgaWYgKGlzT2JqZWN0KHByb3BlcnRpZXMpKSB7XG4gICAgICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKHByb3BlcnRpZXMpKSB7XG4gICAgICAgICAgICBpZiAoIWlzTnVsbGFibGUodmFsdWUpICYmICFyZXF1aXJlZC5pbmNsdWRlcyhrZXkpKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBab2QgZmllbGQgYXQgXFxgJHtbLi4ucGF0aCwgJ3Byb3BlcnRpZXMnLCBrZXldLmpvaW4oJy8nKX1cXGAgdXNlcyBcXGAub3B0aW9uYWwoKVxcYCB3aXRob3V0IFxcYC5udWxsYWJsZSgpXFxgIHdoaWNoIGlzIG5vdCBzdXBwb3J0ZWQgYnkgdGhlIEFQSS4gU2VlOiBodHRwczovL3BsYXRmb3JtLm9wZW5haS5jb20vZG9jcy9ndWlkZXMvc3RydWN0dXJlZC1vdXRwdXRzP2FwaS1tb2RlPXJlc3BvbnNlcyNhbGwtZmllbGRzLW11c3QtYmUtcmVxdWlyZWRgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBqc29uU2NoZW1hLnJlcXVpcmVkID0gT2JqZWN0LmtleXMocHJvcGVydGllcyk7XG4gICAgICAgIGpzb25TY2hlbWEucHJvcGVydGllcyA9IE9iamVjdC5mcm9tRW50cmllcyhPYmplY3QuZW50cmllcyhwcm9wZXJ0aWVzKS5tYXAoKFtrZXksIHByb3BTY2hlbWFdKSA9PiBbXG4gICAgICAgICAgICBrZXksXG4gICAgICAgICAgICBlbnN1cmVTdHJpY3RKc29uU2NoZW1hKHByb3BTY2hlbWEsIFsuLi5wYXRoLCAncHJvcGVydGllcycsIGtleV0sIHJvb3QpLFxuICAgICAgICBdKSk7XG4gICAgfVxuICAgIC8vIEhhbmRsZSBhcnJheXNcbiAgICBjb25zdCBpdGVtcyA9IGpzb25TY2hlbWEuaXRlbXM7XG4gICAgaWYgKGlzT2JqZWN0KGl0ZW1zKSkge1xuICAgICAgICBqc29uU2NoZW1hLml0ZW1zID0gZW5zdXJlU3RyaWN0SnNvblNjaGVtYShpdGVtcywgWy4uLnBhdGgsICdpdGVtcyddLCByb290KTtcbiAgICB9XG4gICAgLy8gSGFuZGxlIHVuaW9ucyAoYW55T2YpXG4gICAgY29uc3QgYW55T2YgPSBqc29uU2NoZW1hLmFueU9mO1xuICAgIGlmIChBcnJheS5pc0FycmF5KGFueU9mKSkge1xuICAgICAgICBqc29uU2NoZW1hLmFueU9mID0gYW55T2YubWFwKCh2YXJpYW50LCBpKSA9PiBlbnN1cmVTdHJpY3RKc29uU2NoZW1hKHZhcmlhbnQsIFsuLi5wYXRoLCAnYW55T2YnLCBTdHJpbmcoaSldLCByb290KSk7XG4gICAgfVxuICAgIC8vIEhhbmRsZSBpbnRlcnNlY3Rpb25zIChhbGxPZilcbiAgICBjb25zdCBhbGxPZiA9IGpzb25TY2hlbWEuYWxsT2Y7XG4gICAgaWYgKEFycmF5LmlzQXJyYXkoYWxsT2YpKSB7XG4gICAgICAgIGlmIChhbGxPZi5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICAgIGNvbnN0IHJlc29sdmVkID0gZW5zdXJlU3RyaWN0SnNvblNjaGVtYShhbGxPZlswXSwgWy4uLnBhdGgsICdhbGxPZicsICcwJ10sIHJvb3QpO1xuICAgICAgICAgICAgT2JqZWN0LmFzc2lnbihqc29uU2NoZW1hLCByZXNvbHZlZCk7XG4gICAgICAgICAgICBkZWxldGUganNvblNjaGVtYS5hbGxPZjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGpzb25TY2hlbWEuYWxsT2YgPSBhbGxPZi5tYXAoKGVudHJ5LCBpKSA9PiBlbnN1cmVTdHJpY3RKc29uU2NoZW1hKGVudHJ5LCBbLi4ucGF0aCwgJ2FsbE9mJywgU3RyaW5nKGkpXSwgcm9vdCkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8vIFN0cmlwIGBudWxsYCBkZWZhdWx0cyBhcyB0aGVyZSdzIG5vIG1lYW5pbmdmdWwgZGlzdGluY3Rpb25cbiAgICBpZiAoanNvblNjaGVtYS5kZWZhdWx0ID09PSBudWxsKSB7XG4gICAgICAgIGRlbGV0ZSBqc29uU2NoZW1hLmRlZmF1bHQ7XG4gICAgfVxuICAgIC8vIEhhbmRsZSAkcmVmIHdpdGggYWRkaXRpb25hbCBwcm9wZXJ0aWVzXG4gICAgY29uc3QgcmVmID0ganNvblNjaGVtYS4kcmVmO1xuICAgIGlmIChyZWYgJiYgaGFzTW9yZVRoYW5OS2V5cyhqc29uU2NoZW1hLCAxKSkge1xuICAgICAgICBpZiAodHlwZW9mIHJlZiAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoYFJlY2VpdmVkIG5vbi1zdHJpbmcgJHJlZiAtICR7cmVmfTsgcGF0aD0ke3BhdGguam9pbignLycpfWApO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHJlc29sdmVkID0gcmVzb2x2ZVJlZihyb290LCByZWYpO1xuICAgICAgICBpZiAodHlwZW9mIHJlc29sdmVkID09PSAnYm9vbGVhbicpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgRXhwZWN0ZWQgXFxgJHJlZjogJHtyZWZ9XFxgIHRvIHJlc29sdmUgdG8gYW4gb2JqZWN0IHNjaGVtYSBidXQgZ290IGJvb2xlYW5gKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWlzT2JqZWN0KHJlc29sdmVkKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBFeHBlY3RlZCBcXGAkcmVmOiAke3JlZn1cXGAgdG8gcmVzb2x2ZSB0byBhbiBvYmplY3QgYnV0IGdvdCAke0pTT04uc3RyaW5naWZ5KHJlc29sdmVkKX1gKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBQcm9wZXJ0aWVzIGZyb20gdGhlIGpzb24gc2NoZW1hIHRha2UgcHJpb3JpdHkgb3ZlciB0aGUgb25lcyBvbiB0aGUgYCRyZWZgXG4gICAgICAgIE9iamVjdC5hc3NpZ24oanNvblNjaGVtYSwgeyAuLi5yZXNvbHZlZCwgLi4uanNvblNjaGVtYSB9KTtcbiAgICAgICAgZGVsZXRlIGpzb25TY2hlbWEuJHJlZjtcbiAgICAgICAgLy8gU2luY2UgdGhlIHNjaGVtYSBleHBhbmRlZCBmcm9tIGAkcmVmYCBtaWdodCBub3QgaGF2ZSBgYWRkaXRpb25hbFByb3BlcnRpZXM6IGZhbHNlYCBhcHBsaWVkLFxuICAgICAgICAvLyB3ZSBjYWxsIGBlbnN1cmVTdHJpY3RKc29uU2NoZW1hYCBhZ2FpbiB0byBmaXggdGhlIGlubGluZWQgc2NoZW1hIGFuZCBlbnN1cmUgaXQncyB2YWxpZC5cbiAgICAgICAgcmV0dXJuIGVuc3VyZVN0cmljdEpzb25TY2hlbWEoanNvblNjaGVtYSwgcGF0aCwgcm9vdCk7XG4gICAgfVxuICAgIHJldHVybiBqc29uU2NoZW1hO1xufVxuZnVuY3Rpb24gcmVzb2x2ZVJlZihyb290LCByZWYpIHtcbiAgICBpZiAoIXJlZi5zdGFydHNXaXRoKCcjLycpKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgVW5leHBlY3RlZCAkcmVmIGZvcm1hdCAke0pTT04uc3RyaW5naWZ5KHJlZil9OyBEb2VzIG5vdCBzdGFydCB3aXRoICMvYCk7XG4gICAgfVxuICAgIGNvbnN0IHBhdGhQYXJ0cyA9IHJlZi5zbGljZSgyKS5zcGxpdCgnLycpO1xuICAgIGxldCByZXNvbHZlZCA9IHJvb3Q7XG4gICAgZm9yIChjb25zdCBrZXkgb2YgcGF0aFBhcnRzKSB7XG4gICAgICAgIGlmICghaXNPYmplY3QocmVzb2x2ZWQpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYGVuY291bnRlcmVkIG5vbi1vYmplY3QgZW50cnkgd2hpbGUgcmVzb2x2aW5nICR7cmVmfSAtICR7SlNPTi5zdHJpbmdpZnkocmVzb2x2ZWQpfWApO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHZhbHVlID0gcmVzb2x2ZWRba2V5XTtcbiAgICAgICAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgS2V5ICR7a2V5fSBub3QgZm91bmQgd2hpbGUgcmVzb2x2aW5nICR7cmVmfWApO1xuICAgICAgICB9XG4gICAgICAgIHJlc29sdmVkID0gdmFsdWU7XG4gICAgfVxuICAgIHJldHVybiByZXNvbHZlZDtcbn1cbmZ1bmN0aW9uIGlzT2JqZWN0KG9iaikge1xuICAgIHJldHVybiB0eXBlb2Ygb2JqID09PSAnb2JqZWN0JyAmJiBvYmogIT09IG51bGwgJiYgIUFycmF5LmlzQXJyYXkob2JqKTtcbn1cbmZ1bmN0aW9uIGhhc01vcmVUaGFuTktleXMob2JqLCBuKSB7XG4gICAgbGV0IGkgPSAwO1xuICAgIGZvciAoY29uc3QgXyBpbiBvYmopIHtcbiAgICAgICAgaSsrO1xuICAgICAgICBpZiAoaSA+IG4pIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXRyYW5zZm9ybS5tanMubWFwIiwiaW1wb3J0ICogYXMgejQgZnJvbSAnem9kL3Y0JztcbmltcG9ydCB7IG1ha2VQYXJzZWFibGVSZXNwb25zZUZvcm1hdCwgbWFrZVBhcnNlYWJsZVRleHRGb3JtYXQsIG1ha2VQYXJzZWFibGVUb29sLCB9IGZyb20gXCIuLi9saWIvcGFyc2VyLm1qc1wiO1xuaW1wb3J0IHsgem9kVG9Kc29uU2NoZW1hIGFzIF96b2RUb0pzb25TY2hlbWEgfSBmcm9tIFwiLi4vX3ZlbmRvci96b2QtdG8tanNvbi1zY2hlbWEvaW5kZXgubWpzXCI7XG5pbXBvcnQgeyBtYWtlUGFyc2VhYmxlUmVzcG9uc2VUb29sIH0gZnJvbSBcIi4uL2xpYi9SZXNwb25zZXNQYXJzZXIubWpzXCI7XG5pbXBvcnQgeyB0b1N0cmljdEpzb25TY2hlbWEgfSBmcm9tIFwiLi4vbGliL3RyYW5zZm9ybS5tanNcIjtcbmZ1bmN0aW9uIHpvZFYzVG9Kc29uU2NoZW1hKHNjaGVtYSwgb3B0aW9ucykge1xuICAgIHJldHVybiBfem9kVG9Kc29uU2NoZW1hKHNjaGVtYSwge1xuICAgICAgICBvcGVuYWlTdHJpY3RNb2RlOiB0cnVlLFxuICAgICAgICBuYW1lOiBvcHRpb25zLm5hbWUsXG4gICAgICAgIG5hbWVTdHJhdGVneTogJ2R1cGxpY2F0ZS1yZWYnLFxuICAgICAgICAkcmVmU3RyYXRlZ3k6ICdleHRyYWN0LXRvLXJvb3QnLFxuICAgICAgICBudWxsYWJsZVN0cmF0ZWd5OiAncHJvcGVydHknLFxuICAgIH0pO1xufVxuZnVuY3Rpb24gem9kVjRUb0pzb25TY2hlbWEoc2NoZW1hKSB7XG4gICAgcmV0dXJuIHRvU3RyaWN0SnNvblNjaGVtYSh6NC50b0pTT05TY2hlbWEoc2NoZW1hLCB7XG4gICAgICAgIHRhcmdldDogJ2RyYWZ0LTcnLFxuICAgIH0pKTtcbn1cbmZ1bmN0aW9uIGlzWm9kVjQoem9kT2JqZWN0KSB7XG4gICAgcmV0dXJuICdfem9kJyBpbiB6b2RPYmplY3Q7XG59XG4vKipcbiAqIENyZWF0ZXMgYSBjaGF0IGNvbXBsZXRpb24gYEpTT05TY2hlbWFgIHJlc3BvbnNlIGZvcm1hdCBvYmplY3QgZnJvbVxuICogdGhlIGdpdmVuIFpvZCBzY2hlbWEuXG4gKlxuICogSWYgdGhpcyBpcyBwYXNzZWQgdG8gdGhlIGAucGFyc2UoKWAsIGAuc3RyZWFtKClgIG9yIGAucnVuVG9vbHMoKWBcbiAqIGNoYXQgY29tcGxldGlvbiBtZXRob2RzIHRoZW4gdGhlIHJlc3BvbnNlIG1lc3NhZ2Ugd2lsbCBjb250YWluIGFcbiAqIGAucGFyc2VkYCBwcm9wZXJ0eSB0aGF0IGlzIHRoZSByZXN1bHQgb2YgcGFyc2luZyB0aGUgY29udGVudCB3aXRoXG4gKiB0aGUgZ2l2ZW4gWm9kIG9iamVjdC5cbiAqXG4gKiBgYGB0c1xuICogY29uc3QgY29tcGxldGlvbiA9IGF3YWl0IGNsaWVudC5jaGF0LmNvbXBsZXRpb25zLnBhcnNlKHtcbiAqICAgIG1vZGVsOiAnZ3B0LTRvLTIwMjQtMDgtMDYnLFxuICogICAgbWVzc2FnZXM6IFtcbiAqICAgICAgeyByb2xlOiAnc3lzdGVtJywgY29udGVudDogJ1lvdSBhcmUgYSBoZWxwZnVsIG1hdGggdHV0b3IuJyB9LFxuICogICAgICB7IHJvbGU6ICd1c2VyJywgY29udGVudDogJ3NvbHZlIDh4ICsgMzEgPSAyJyB9LFxuICogICAgXSxcbiAqICAgIHJlc3BvbnNlX2Zvcm1hdDogem9kUmVzcG9uc2VGb3JtYXQoXG4gKiAgICAgIHoub2JqZWN0KHtcbiAqICAgICAgICBzdGVwczogei5hcnJheSh6Lm9iamVjdCh7XG4gKiAgICAgICAgICBleHBsYW5hdGlvbjogei5zdHJpbmcoKSxcbiAqICAgICAgICAgIGFuc3dlcjogei5zdHJpbmcoKSxcbiAqICAgICAgICB9KSksXG4gKiAgICAgICAgZmluYWxfYW5zd2VyOiB6LnN0cmluZygpLFxuICogICAgICB9KSxcbiAqICAgICAgJ21hdGhfYW5zd2VyJyxcbiAqICAgICksXG4gKiAgfSk7XG4gKiAgY29uc3QgbWVzc2FnZSA9IGNvbXBsZXRpb24uY2hvaWNlc1swXT8ubWVzc2FnZTtcbiAqICBpZiAobWVzc2FnZT8ucGFyc2VkKSB7XG4gKiAgICBjb25zb2xlLmxvZyhtZXNzYWdlLnBhcnNlZCk7XG4gKiAgICBjb25zb2xlLmxvZyhtZXNzYWdlLnBhcnNlZC5maW5hbF9hbnN3ZXIpO1xuICogfVxuICogYGBgXG4gKlxuICogVGhpcyBjYW4gYmUgcGFzc2VkIGRpcmVjdGx5IHRvIHRoZSBgLmNyZWF0ZSgpYCBtZXRob2QgYnV0IHdpbGwgbm90XG4gKiByZXN1bHQgaW4gYW55IGF1dG9tYXRpYyBwYXJzaW5nLCB5b3UnbGwgaGF2ZSB0byBwYXJzZSB0aGUgcmVzcG9uc2UgeW91cnNlbGYuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB6b2RSZXNwb25zZUZvcm1hdCh6b2RPYmplY3QsIG5hbWUsIHByb3BzKSB7XG4gICAgcmV0dXJuIG1ha2VQYXJzZWFibGVSZXNwb25zZUZvcm1hdCh7XG4gICAgICAgIHR5cGU6ICdqc29uX3NjaGVtYScsXG4gICAgICAgIGpzb25fc2NoZW1hOiB7XG4gICAgICAgICAgICAuLi5wcm9wcyxcbiAgICAgICAgICAgIG5hbWUsXG4gICAgICAgICAgICBzdHJpY3Q6IHRydWUsXG4gICAgICAgICAgICBzY2hlbWE6IGlzWm9kVjQoem9kT2JqZWN0KSA/IHpvZFY0VG9Kc29uU2NoZW1hKHpvZE9iamVjdCkgOiB6b2RWM1RvSnNvblNjaGVtYSh6b2RPYmplY3QsIHsgbmFtZSB9KSxcbiAgICAgICAgfSxcbiAgICB9LCAoY29udGVudCkgPT4gem9kT2JqZWN0LnBhcnNlKEpTT04ucGFyc2UoY29udGVudCkpKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiB6b2RUZXh0Rm9ybWF0KHpvZE9iamVjdCwgbmFtZSwgcHJvcHMpIHtcbiAgICByZXR1cm4gbWFrZVBhcnNlYWJsZVRleHRGb3JtYXQoe1xuICAgICAgICB0eXBlOiAnanNvbl9zY2hlbWEnLFxuICAgICAgICAuLi5wcm9wcyxcbiAgICAgICAgbmFtZSxcbiAgICAgICAgc3RyaWN0OiB0cnVlLFxuICAgICAgICBzY2hlbWE6IGlzWm9kVjQoem9kT2JqZWN0KSA/IHpvZFY0VG9Kc29uU2NoZW1hKHpvZE9iamVjdCkgOiB6b2RWM1RvSnNvblNjaGVtYSh6b2RPYmplY3QsIHsgbmFtZSB9KSxcbiAgICB9LCAoY29udGVudCkgPT4gem9kT2JqZWN0LnBhcnNlKEpTT04ucGFyc2UoY29udGVudCkpKTtcbn1cbi8qKlxuICogQ3JlYXRlcyBhIGNoYXQgY29tcGxldGlvbiBgZnVuY3Rpb25gIHRvb2wgdGhhdCBjYW4gYmUgaW52b2tlZFxuICogYXV0b21hdGljYWxseSBieSB0aGUgY2hhdCBjb21wbGV0aW9uIGAucnVuVG9vbHMoKWAgbWV0aG9kIG9yIGF1dG9tYXRpY2FsbHlcbiAqIHBhcnNlZCBieSBgLnBhcnNlKClgIC8gYC5zdHJlYW0oKWAuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB6b2RGdW5jdGlvbihvcHRpb25zKSB7XG4gICAgLy8gQHRzLWV4cGVjdC1lcnJvciBUT0RPXG4gICAgcmV0dXJuIG1ha2VQYXJzZWFibGVUb29sKHtcbiAgICAgICAgdHlwZTogJ2Z1bmN0aW9uJyxcbiAgICAgICAgZnVuY3Rpb246IHtcbiAgICAgICAgICAgIG5hbWU6IG9wdGlvbnMubmFtZSxcbiAgICAgICAgICAgIHBhcmFtZXRlcnM6IGlzWm9kVjQob3B0aW9ucy5wYXJhbWV0ZXJzKSA/XG4gICAgICAgICAgICAgICAgem9kVjRUb0pzb25TY2hlbWEob3B0aW9ucy5wYXJhbWV0ZXJzKVxuICAgICAgICAgICAgICAgIDogem9kVjNUb0pzb25TY2hlbWEob3B0aW9ucy5wYXJhbWV0ZXJzLCB7IG5hbWU6IG9wdGlvbnMubmFtZSB9KSxcbiAgICAgICAgICAgIHN0cmljdDogdHJ1ZSxcbiAgICAgICAgICAgIC4uLihvcHRpb25zLmRlc2NyaXB0aW9uID8geyBkZXNjcmlwdGlvbjogb3B0aW9ucy5kZXNjcmlwdGlvbiB9IDogdW5kZWZpbmVkKSxcbiAgICAgICAgfSxcbiAgICB9LCB7XG4gICAgICAgIGNhbGxiYWNrOiBvcHRpb25zLmZ1bmN0aW9uLFxuICAgICAgICBwYXJzZXI6IChhcmdzKSA9PiBvcHRpb25zLnBhcmFtZXRlcnMucGFyc2UoSlNPTi5wYXJzZShhcmdzKSksXG4gICAgfSk7XG59XG5leHBvcnQgZnVuY3Rpb24gem9kUmVzcG9uc2VzRnVuY3Rpb24ob3B0aW9ucykge1xuICAgIHJldHVybiBtYWtlUGFyc2VhYmxlUmVzcG9uc2VUb29sKHtcbiAgICAgICAgdHlwZTogJ2Z1bmN0aW9uJyxcbiAgICAgICAgbmFtZTogb3B0aW9ucy5uYW1lLFxuICAgICAgICBwYXJhbWV0ZXJzOiBpc1pvZFY0KG9wdGlvbnMucGFyYW1ldGVycykgP1xuICAgICAgICAgICAgem9kVjRUb0pzb25TY2hlbWEob3B0aW9ucy5wYXJhbWV0ZXJzKVxuICAgICAgICAgICAgOiB6b2RWM1RvSnNvblNjaGVtYShvcHRpb25zLnBhcmFtZXRlcnMsIHsgbmFtZTogb3B0aW9ucy5uYW1lIH0pLFxuICAgICAgICBzdHJpY3Q6IHRydWUsXG4gICAgICAgIC4uLihvcHRpb25zLmRlc2NyaXB0aW9uID8geyBkZXNjcmlwdGlvbjogb3B0aW9ucy5kZXNjcmlwdGlvbiB9IDogdW5kZWZpbmVkKSxcbiAgICB9LCB7XG4gICAgICAgIGNhbGxiYWNrOiBvcHRpb25zLmZ1bmN0aW9uLFxuICAgICAgICBwYXJzZXI6IChhcmdzKSA9PiBvcHRpb25zLnBhcmFtZXRlcnMucGFyc2UoSlNPTi5wYXJzZShhcmdzKSksXG4gICAgfSk7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD16b2QubWpzLm1hcCIsIi8qKlxuICogQmFzZSBjbGFzcyBmb3IgYWxsIGVycm9ycyB0aHJvd24gYnkgdGhlIGxpYnJhcnkuXG4gKi9cbmV4cG9ydCBjbGFzcyBBZ2VudHNFcnJvciBleHRlbmRzIEVycm9yIHtcbiAgICBzdGF0ZTtcbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlLCBzdGF0ZSkge1xuICAgICAgICBzdXBlcihtZXNzYWdlKTtcbiAgICAgICAgdGhpcy5zdGF0ZSA9IHN0YXRlO1xuICAgIH1cbn1cbi8qKlxuICogU3lzdGVtIGVycm9yIHRocm93biB3aGVuIHRoZSBsaWJyYXJ5IGVuY291bnRlcnMgYW4gZXJyb3IgdGhhdCBpcyBub3QgY2F1c2VkIGJ5IHRoZSB1c2VyJ3NcbiAqIG1pc2NvbmZpZ3VyYXRpb24uXG4gKi9cbmV4cG9ydCBjbGFzcyBTeXN0ZW1FcnJvciBleHRlbmRzIEFnZW50c0Vycm9yIHtcbn1cbi8qKlxuICogRXJyb3IgdGhyb3duIHdoZW4gdGhlIG1heGltdW0gbnVtYmVyIG9mIHR1cm5zIGlzIGV4Y2VlZGVkLlxuICovXG5leHBvcnQgY2xhc3MgTWF4VHVybnNFeGNlZWRlZEVycm9yIGV4dGVuZHMgQWdlbnRzRXJyb3Ige1xufVxuLyoqXG4gKiBFcnJvciB0aHJvd24gd2hlbiBhIG1vZGVsIGJlaGF2aW9yIGlzIHVuZXhwZWN0ZWQuXG4gKi9cbmV4cG9ydCBjbGFzcyBNb2RlbEJlaGF2aW9yRXJyb3IgZXh0ZW5kcyBBZ2VudHNFcnJvciB7XG59XG4vKipcbiAqIEVycm9yIHRocm93biB3aGVuIHRoZSBlcnJvciBpcyBjYXVzZWQgYnkgdGhlIGxpYnJhcnkgdXNlcidzIG1pc2NvbmZpZ3VyYXRpb24uXG4gKi9cbmV4cG9ydCBjbGFzcyBVc2VyRXJyb3IgZXh0ZW5kcyBBZ2VudHNFcnJvciB7XG59XG4vKipcbiAqIEVycm9yIHRocm93biB3aGVuIGEgZ3VhcmRyYWlsIGV4ZWN1dGlvbiBmYWlscy5cbiAqL1xuZXhwb3J0IGNsYXNzIEd1YXJkcmFpbEV4ZWN1dGlvbkVycm9yIGV4dGVuZHMgQWdlbnRzRXJyb3Ige1xuICAgIGVycm9yO1xuICAgIGNvbnN0cnVjdG9yKG1lc3NhZ2UsIGVycm9yLCBzdGF0ZSkge1xuICAgICAgICBzdXBlcihtZXNzYWdlLCBzdGF0ZSk7XG4gICAgICAgIHRoaXMuZXJyb3IgPSBlcnJvcjtcbiAgICB9XG59XG4vKipcbiAqIEVycm9yIHRocm93biB3aGVuIGEgdG9vbCBjYWxsIGZhaWxzLlxuICovXG5leHBvcnQgY2xhc3MgVG9vbENhbGxFcnJvciBleHRlbmRzIEFnZW50c0Vycm9yIHtcbiAgICBlcnJvcjtcbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlLCBlcnJvciwgc3RhdGUpIHtcbiAgICAgICAgc3VwZXIobWVzc2FnZSwgc3RhdGUpO1xuICAgICAgICB0aGlzLmVycm9yID0gZXJyb3I7XG4gICAgfVxufVxuLyoqXG4gKiBFcnJvciB0aHJvd24gd2hlbiBhbiBpbnB1dCBndWFyZHJhaWwgdHJpcHdpcmUgaXMgdHJpZ2dlcmVkLlxuICovXG5leHBvcnQgY2xhc3MgSW5wdXRHdWFyZHJhaWxUcmlwd2lyZVRyaWdnZXJlZCBleHRlbmRzIEFnZW50c0Vycm9yIHtcbiAgICByZXN1bHQ7XG4gICAgY29uc3RydWN0b3IobWVzc2FnZSwgcmVzdWx0LCBzdGF0ZSkge1xuICAgICAgICBzdXBlcihtZXNzYWdlLCBzdGF0ZSk7XG4gICAgICAgIHRoaXMucmVzdWx0ID0gcmVzdWx0O1xuICAgIH1cbn1cbi8qKlxuICogRXJyb3IgdGhyb3duIHdoZW4gYW4gb3V0cHV0IGd1YXJkcmFpbCB0cmlwd2lyZSBpcyB0cmlnZ2VyZWQuXG4gKi9cbmV4cG9ydCBjbGFzcyBPdXRwdXRHdWFyZHJhaWxUcmlwd2lyZVRyaWdnZXJlZCBleHRlbmRzIEFnZW50c0Vycm9yIHtcbiAgICByZXN1bHQ7XG4gICAgY29uc3RydWN0b3IobWVzc2FnZSwgcmVzdWx0LCBzdGF0ZSkge1xuICAgICAgICBzdXBlcihtZXNzYWdlLCBzdGF0ZSk7XG4gICAgICAgIHRoaXMucmVzdWx0ID0gcmVzdWx0O1xuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWVycm9ycy5tanMubWFwIiwiZXhwb3J0IGZ1bmN0aW9uIGFzWm9kVHlwZShzY2hlbWEpIHtcbiAgICByZXR1cm4gc2NoZW1hO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHJlYWRab2REZWZpbml0aW9uKGlucHV0KSB7XG4gICAgaWYgKHR5cGVvZiBpbnB1dCAhPT0gJ29iamVjdCcgfHwgaW5wdXQgPT09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG4gICAgY29uc3QgY2FuZGlkYXRlID0gaW5wdXQ7XG4gICAgcmV0dXJuIGNhbmRpZGF0ZS5fem9kPy5kZWYgfHwgY2FuZGlkYXRlLl9kZWYgfHwgY2FuZGlkYXRlLmRlZjtcbn1cbmV4cG9ydCBmdW5jdGlvbiByZWFkWm9kVHlwZShpbnB1dCkge1xuICAgIGNvbnN0IGRlZiA9IHJlYWRab2REZWZpbml0aW9uKGlucHV0KTtcbiAgICBpZiAoIWRlZikge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgICBjb25zdCByYXdUeXBlID0gKHR5cGVvZiBkZWYudHlwZU5hbWUgPT09ICdzdHJpbmcnICYmIGRlZi50eXBlTmFtZSkgfHxcbiAgICAgICAgKHR5cGVvZiBkZWYudHlwZSA9PT0gJ3N0cmluZycgJiYgZGVmLnR5cGUpO1xuICAgIGlmICh0eXBlb2YgcmF3VHlwZSAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG4gICAgY29uc3QgbG93ZXIgPSByYXdUeXBlLnRvTG93ZXJDYXNlKCk7XG4gICAgcmV0dXJuIGxvd2VyLnN0YXJ0c1dpdGgoJ3pvZCcpID8gbG93ZXIuc2xpY2UoMykgOiBsb3dlcjtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXpvZENvbXBhdC5tanMubWFwIiwiaW1wb3J0IHsgcmVhZFpvZERlZmluaXRpb24sIHJlYWRab2RUeXBlIH0gZnJvbSBcIi4vem9kQ29tcGF0Lm1qc1wiO1xuLyoqXG4gKiBWZXJpZmllcyB0aGF0IGFuIGlucHV0IGlzIGEgWm9kT2JqZWN0IHdpdGhvdXQgbmVlZGluZyB0byBoYXZlIFpvZCBhdCBydW50aW1lIHNpbmNlIGl0J3MgYW5cbiAqIG9wdGlvbmFsIGRlcGVuZGVuY3kuXG4gKiBAcGFyYW0gaW5wdXRcbiAqIEByZXR1cm5zXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc1pvZE9iamVjdChpbnB1dCkge1xuICAgIGNvbnN0IGRlZmluaXRpb24gPSByZWFkWm9kRGVmaW5pdGlvbihpbnB1dCk7XG4gICAgaWYgKCFkZWZpbml0aW9uKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgY29uc3QgdHlwZSA9IHJlYWRab2RUeXBlKGlucHV0KTtcbiAgICByZXR1cm4gdHlwZSA9PT0gJ29iamVjdCc7XG59XG4vKipcbiAqIFZlcmlmaWVzIHRoYXQgYW4gaW5wdXQgaXMgYW4gb2JqZWN0IHdpdGggYW4gYGlucHV0YCBwcm9wZXJ0eS5cbiAqIEBwYXJhbSBpbnB1dFxuICogQHJldHVybnNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzQWdlbnRUb29sSW5wdXQoaW5wdXQpIHtcbiAgICByZXR1cm4gKHR5cGVvZiBpbnB1dCA9PT0gJ29iamVjdCcgJiZcbiAgICAgICAgaW5wdXQgIT09IG51bGwgJiZcbiAgICAgICAgJ2lucHV0JyBpbiBpbnB1dCAmJlxuICAgICAgICB0eXBlb2YgaW5wdXQuaW5wdXQgPT09ICdzdHJpbmcnKTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXR5cGVHdWFyZHMubWpzLm1hcCIsImltcG9ydCB7IHJlYWRab2REZWZpbml0aW9uLCByZWFkWm9kVHlwZSB9IGZyb20gXCIuL3pvZENvbXBhdC5tanNcIjtcbmNvbnN0IEpTT05fU0NIRU1BX0RSQUZUXzA3ID0gJ2h0dHA6Ly9qc29uLXNjaGVtYS5vcmcvZHJhZnQtMDcvc2NoZW1hIyc7XG5jb25zdCBPUFRJT05BTF9XUkFQUEVSUyA9IG5ldyBTZXQoWydvcHRpb25hbCddKTtcbmNvbnN0IERFQ09SQVRPUl9XUkFQUEVSUyA9IG5ldyBTZXQoW1xuICAgICdicmFuZCcsXG4gICAgJ2JyYW5kZWQnLFxuICAgICdjYXRjaCcsXG4gICAgJ2RlZmF1bHQnLFxuICAgICdlZmZlY3RzJyxcbiAgICAncGlwZWxpbmUnLFxuICAgICdwaXBlJyxcbiAgICAncHJlZmF1bHQnLFxuICAgICdyZWFkb25seScsXG4gICAgJ3JlZmluZW1lbnQnLFxuICAgICd0cmFuc2Zvcm0nLFxuXSk7XG4vLyBQcmltaXRpdmUgbGVhZiBub2RlcyBtYXAgMToxIHRvIEpTT04gU2NoZW1hIHR5cGVzOyBldmVyeXRoaW5nIGVsc2UgaXMgaGFuZGxlZFxuLy8gYnkgdGhlIHNwZWNpYWxpc2VkIGJ1aWxkZXJzIGZ1cnRoZXIgZG93bi5cbmNvbnN0IFNJTVBMRV9UWVBFX01BUFBJTkcgPSB7XG4gICAgc3RyaW5nOiB7IHR5cGU6ICdzdHJpbmcnIH0sXG4gICAgbnVtYmVyOiB7IHR5cGU6ICdudW1iZXInIH0sXG4gICAgYmlnaW50OiB7IHR5cGU6ICdpbnRlZ2VyJyB9LFxuICAgIGJvb2xlYW46IHsgdHlwZTogJ2Jvb2xlYW4nIH0sXG4gICAgZGF0ZTogeyB0eXBlOiAnc3RyaW5nJywgZm9ybWF0OiAnZGF0ZS10aW1lJyB9LFxufTtcbmV4cG9ydCBmdW5jdGlvbiBoYXNKc29uU2NoZW1hT2JqZWN0U2hhcGUodmFsdWUpIHtcbiAgICByZXR1cm4gKHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiZcbiAgICAgICAgdmFsdWUgIT09IG51bGwgJiZcbiAgICAgICAgdmFsdWUudHlwZSA9PT0gJ29iamVjdCcgJiZcbiAgICAgICAgJ3Byb3BlcnRpZXMnIGluIHZhbHVlICYmXG4gICAgICAgICdhZGRpdGlvbmFsUHJvcGVydGllcycgaW4gdmFsdWUpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHpvZEpzb25TY2hlbWFDb21wYXQoaW5wdXQpIHtcbiAgICAvLyBBdHRlbXB0IHRvIGJ1aWxkIGFuIG9iamVjdCBzY2hlbWEgZnJvbSBab2QncyBpbnRlcm5hbCBzaGFwZS4gSWYgd2UgY2Fubm90XG4gICAgLy8gdW5kZXJzdGFuZCB0aGUgc3RydWN0dXJlIHdlIHJldHVybiB1bmRlZmluZWQsIGxldHRpbmcgY2FsbGVycyByYWlzZSBhXG4gICAgLy8gZGVzY3JpcHRpdmUgZXJyb3IgaW5zdGVhZCBvZiBlbWl0dGluZyBhbiBpbnZhbGlkIHNjaGVtYS5cbiAgICBjb25zdCBzY2hlbWEgPSBidWlsZE9iamVjdFNjaGVtYShpbnB1dCk7XG4gICAgaWYgKCFzY2hlbWEpIHtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG4gICAgaWYgKCFBcnJheS5pc0FycmF5KHNjaGVtYS5yZXF1aXJlZCkpIHtcbiAgICAgICAgc2NoZW1hLnJlcXVpcmVkID0gW107XG4gICAgfVxuICAgIGlmICh0eXBlb2Ygc2NoZW1hLmFkZGl0aW9uYWxQcm9wZXJ0aWVzID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICBzY2hlbWEuYWRkaXRpb25hbFByb3BlcnRpZXMgPSBmYWxzZTtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBzY2hlbWEuJHNjaGVtYSAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgc2NoZW1hLiRzY2hlbWEgPSBKU09OX1NDSEVNQV9EUkFGVF8wNztcbiAgICB9XG4gICAgcmV0dXJuIHNjaGVtYTtcbn1cbmZ1bmN0aW9uIGJ1aWxkT2JqZWN0U2NoZW1hKHZhbHVlKSB7XG4gICAgY29uc3Qgc2hhcGUgPSByZWFkU2hhcGUodmFsdWUpO1xuICAgIGlmICghc2hhcGUpIHtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG4gICAgY29uc3QgcHJvcGVydGllcyA9IHt9O1xuICAgIGNvbnN0IHJlcXVpcmVkID0gW107XG4gICAgZm9yIChjb25zdCBba2V5LCBmaWVsZF0gb2YgT2JqZWN0LmVudHJpZXMoc2hhcGUpKSB7XG4gICAgICAgIGNvbnN0IHsgc2NoZW1hLCBvcHRpb25hbCB9ID0gY29udmVydFByb3BlcnR5KGZpZWxkKTtcbiAgICAgICAgaWYgKCFzY2hlbWEpIHtcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICAgICAgcHJvcGVydGllc1trZXldID0gc2NoZW1hO1xuICAgICAgICBpZiAoIW9wdGlvbmFsKSB7XG4gICAgICAgICAgICByZXF1aXJlZC5wdXNoKGtleSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHsgdHlwZTogJ29iamVjdCcsIHByb3BlcnRpZXMsIHJlcXVpcmVkLCBhZGRpdGlvbmFsUHJvcGVydGllczogZmFsc2UgfTtcbn1cbmZ1bmN0aW9uIGNvbnZlcnRQcm9wZXJ0eSh2YWx1ZSkge1xuICAgIC8vIFJlbW92ZSB3cmFwcGVyIGRlY29yYXRvcnMgKGJyYW5kLCB0cmFuc2Zvcm0sIGV0Yy4pIGJlZm9yZSBhdHRlbXB0aW5nIHRvXG4gICAgLy8gY2xhc3NpZnkgdGhlIG5vZGUsIHRyYWNraW5nIHdoZXRoZXIgd2UgY3Jvc3NlZCBhbiBgb3B0aW9uYWxgIGJvdW5kYXJ5IHNvIHdlXG4gICAgLy8gY2FuIHBvcHVsYXRlIHRoZSBgcmVxdWlyZWRgIGFycmF5IGxhdGVyLlxuICAgIGxldCBjdXJyZW50ID0gdW53cmFwRGVjb3JhdG9ycyh2YWx1ZSk7XG4gICAgbGV0IG9wdGlvbmFsID0gZmFsc2U7XG4gICAgd2hpbGUgKE9QVElPTkFMX1dSQVBQRVJTLmhhcyhyZWFkWm9kVHlwZShjdXJyZW50KSA/PyAnJykpIHtcbiAgICAgICAgb3B0aW9uYWwgPSB0cnVlO1xuICAgICAgICBjb25zdCBkZWYgPSByZWFkWm9kRGVmaW5pdGlvbihjdXJyZW50KTtcbiAgICAgICAgY29uc3QgbmV4dCA9IHVud3JhcERlY29yYXRvcnMoZGVmPy5pbm5lclR5cGUpO1xuICAgICAgICBpZiAoIW5leHQgfHwgbmV4dCA9PT0gY3VycmVudCkge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgY3VycmVudCA9IG5leHQ7XG4gICAgfVxuICAgIHJldHVybiB7IHNjaGVtYTogY29udmVydFNjaGVtYShjdXJyZW50KSwgb3B0aW9uYWwgfTtcbn1cbmZ1bmN0aW9uIGNvbnZlcnRTY2hlbWEodmFsdWUpIHtcbiAgICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgICBjb25zdCB1bndyYXBwZWQgPSB1bndyYXBEZWNvcmF0b3JzKHZhbHVlKTtcbiAgICBjb25zdCB0eXBlID0gcmVhZFpvZFR5cGUodW53cmFwcGVkKTtcbiAgICBjb25zdCBkZWYgPSByZWFkWm9kRGVmaW5pdGlvbih1bndyYXBwZWQpO1xuICAgIGlmICghdHlwZSkge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgICBpZiAodHlwZSBpbiBTSU1QTEVfVFlQRV9NQVBQSU5HKSB7XG4gICAgICAgIHJldHVybiBTSU1QTEVfVFlQRV9NQVBQSU5HW3R5cGVdO1xuICAgIH1cbiAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgICAgY2FzZSAnb2JqZWN0JzpcbiAgICAgICAgICAgIHJldHVybiBidWlsZE9iamVjdFNjaGVtYSh1bndyYXBwZWQpO1xuICAgICAgICBjYXNlICdhcnJheSc6XG4gICAgICAgICAgICByZXR1cm4gYnVpbGRBcnJheVNjaGVtYShkZWYpO1xuICAgICAgICBjYXNlICd0dXBsZSc6XG4gICAgICAgICAgICByZXR1cm4gYnVpbGRUdXBsZVNjaGVtYShkZWYpO1xuICAgICAgICBjYXNlICd1bmlvbic6XG4gICAgICAgICAgICByZXR1cm4gYnVpbGRVbmlvblNjaGVtYShkZWYpO1xuICAgICAgICBjYXNlICdpbnRlcnNlY3Rpb24nOlxuICAgICAgICAgICAgcmV0dXJuIGJ1aWxkSW50ZXJzZWN0aW9uU2NoZW1hKGRlZik7XG4gICAgICAgIGNhc2UgJ2xpdGVyYWwnOlxuICAgICAgICAgICAgcmV0dXJuIGJ1aWxkTGl0ZXJhbChkZWYpO1xuICAgICAgICBjYXNlICdlbnVtJzpcbiAgICAgICAgY2FzZSAnbmF0aXZlZW51bSc6XG4gICAgICAgICAgICByZXR1cm4gYnVpbGRFbnVtKGRlZik7XG4gICAgICAgIGNhc2UgJ3JlY29yZCc6XG4gICAgICAgICAgICByZXR1cm4gYnVpbGRSZWNvcmRTY2hlbWEoZGVmKTtcbiAgICAgICAgY2FzZSAnbWFwJzpcbiAgICAgICAgICAgIHJldHVybiBidWlsZE1hcFNjaGVtYShkZWYpO1xuICAgICAgICBjYXNlICdzZXQnOlxuICAgICAgICAgICAgcmV0dXJuIGJ1aWxkU2V0U2NoZW1hKGRlZik7XG4gICAgICAgIGNhc2UgJ251bGxhYmxlJzpcbiAgICAgICAgICAgIHJldHVybiBidWlsZE51bGxhYmxlU2NoZW1hKGRlZik7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbn1cbi8vIC0tLSBKU09OIFNjaGVtYSBidWlsZGVycyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5mdW5jdGlvbiBidWlsZEFycmF5U2NoZW1hKGRlZikge1xuICAgIGNvbnN0IGl0ZW1zID0gY29udmVydFNjaGVtYShleHRyYWN0Rmlyc3QoZGVmLCAnZWxlbWVudCcsICdpdGVtcycsICd0eXBlJykpO1xuICAgIHJldHVybiBpdGVtcyA/IHsgdHlwZTogJ2FycmF5JywgaXRlbXMgfSA6IHVuZGVmaW5lZDtcbn1cbmZ1bmN0aW9uIGJ1aWxkVHVwbGVTY2hlbWEoZGVmKSB7XG4gICAgY29uc3QgaXRlbXMgPSBjb2VyY2VBcnJheShkZWY/Lml0ZW1zKVxuICAgICAgICAubWFwKChpdGVtKSA9PiBjb252ZXJ0U2NoZW1hKGl0ZW0pKVxuICAgICAgICAuZmlsdGVyKEJvb2xlYW4pO1xuICAgIGlmICghaXRlbXMubGVuZ3RoKSB7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGNvbnN0IHNjaGVtYSA9IHtcbiAgICAgICAgdHlwZTogJ2FycmF5JyxcbiAgICAgICAgaXRlbXMsXG4gICAgICAgIG1pbkl0ZW1zOiBpdGVtcy5sZW5ndGgsXG4gICAgfTtcbiAgICBpZiAoIWRlZj8ucmVzdCkge1xuICAgICAgICBzY2hlbWEubWF4SXRlbXMgPSBpdGVtcy5sZW5ndGg7XG4gICAgfVxuICAgIHJldHVybiBzY2hlbWE7XG59XG5mdW5jdGlvbiBidWlsZFVuaW9uU2NoZW1hKGRlZikge1xuICAgIGNvbnN0IG9wdGlvbnMgPSBjb2VyY2VBcnJheShkZWY/Lm9wdGlvbnMgPz8gZGVmPy5zY2hlbWFzKVxuICAgICAgICAubWFwKChvcHRpb24pID0+IGNvbnZlcnRTY2hlbWEob3B0aW9uKSlcbiAgICAgICAgLmZpbHRlcihCb29sZWFuKTtcbiAgICByZXR1cm4gb3B0aW9ucy5sZW5ndGggPyB7IGFueU9mOiBvcHRpb25zIH0gOiB1bmRlZmluZWQ7XG59XG5mdW5jdGlvbiBidWlsZEludGVyc2VjdGlvblNjaGVtYShkZWYpIHtcbiAgICBjb25zdCBsZWZ0ID0gY29udmVydFNjaGVtYShkZWY/LmxlZnQpO1xuICAgIGNvbnN0IHJpZ2h0ID0gY29udmVydFNjaGVtYShkZWY/LnJpZ2h0KTtcbiAgICByZXR1cm4gbGVmdCAmJiByaWdodCA/IHsgYWxsT2Y6IFtsZWZ0LCByaWdodF0gfSA6IHVuZGVmaW5lZDtcbn1cbmZ1bmN0aW9uIGJ1aWxkUmVjb3JkU2NoZW1hKGRlZikge1xuICAgIGNvbnN0IHZhbHVlU2NoZW1hID0gY29udmVydFNjaGVtYShkZWY/LnZhbHVlVHlwZSA/PyBkZWY/LnZhbHVlcyk7XG4gICAgcmV0dXJuIHZhbHVlU2NoZW1hXG4gICAgICAgID8geyB0eXBlOiAnb2JqZWN0JywgYWRkaXRpb25hbFByb3BlcnRpZXM6IHZhbHVlU2NoZW1hIH1cbiAgICAgICAgOiB1bmRlZmluZWQ7XG59XG5mdW5jdGlvbiBidWlsZE1hcFNjaGVtYShkZWYpIHtcbiAgICBjb25zdCB2YWx1ZVNjaGVtYSA9IGNvbnZlcnRTY2hlbWEoZGVmPy52YWx1ZVR5cGUgPz8gZGVmPy52YWx1ZXMpO1xuICAgIHJldHVybiB2YWx1ZVNjaGVtYSA/IHsgdHlwZTogJ2FycmF5JywgaXRlbXM6IHZhbHVlU2NoZW1hIH0gOiB1bmRlZmluZWQ7XG59XG5mdW5jdGlvbiBidWlsZFNldFNjaGVtYShkZWYpIHtcbiAgICBjb25zdCB2YWx1ZVNjaGVtYSA9IGNvbnZlcnRTY2hlbWEoZGVmPy52YWx1ZVR5cGUpO1xuICAgIHJldHVybiB2YWx1ZVNjaGVtYVxuICAgICAgICA/IHsgdHlwZTogJ2FycmF5JywgaXRlbXM6IHZhbHVlU2NoZW1hLCB1bmlxdWVJdGVtczogdHJ1ZSB9XG4gICAgICAgIDogdW5kZWZpbmVkO1xufVxuZnVuY3Rpb24gYnVpbGROdWxsYWJsZVNjaGVtYShkZWYpIHtcbiAgICBjb25zdCBpbm5lciA9IGNvbnZlcnRTY2hlbWEoZGVmPy5pbm5lclR5cGUgPz8gZGVmPy50eXBlKTtcbiAgICByZXR1cm4gaW5uZXIgPyB7IGFueU9mOiBbaW5uZXIsIHsgdHlwZTogJ251bGwnIH1dIH0gOiB1bmRlZmluZWQ7XG59XG5mdW5jdGlvbiB1bndyYXBEZWNvcmF0b3JzKHZhbHVlKSB7XG4gICAgbGV0IGN1cnJlbnQgPSB2YWx1ZTtcbiAgICB3aGlsZSAoREVDT1JBVE9SX1dSQVBQRVJTLmhhcyhyZWFkWm9kVHlwZShjdXJyZW50KSA/PyAnJykpIHtcbiAgICAgICAgY29uc3QgZGVmID0gcmVhZFpvZERlZmluaXRpb24oY3VycmVudCk7XG4gICAgICAgIGNvbnN0IG5leHQgPSBkZWY/LmlubmVyVHlwZSA/P1xuICAgICAgICAgICAgZGVmPy5zY2hlbWEgPz9cbiAgICAgICAgICAgIGRlZj8uYmFzZSA/P1xuICAgICAgICAgICAgZGVmPy50eXBlID8/XG4gICAgICAgICAgICBkZWY/LndyYXBwZWQgPz9cbiAgICAgICAgICAgIGRlZj8udW5kZXJseWluZztcbiAgICAgICAgaWYgKCFuZXh0IHx8IG5leHQgPT09IGN1cnJlbnQpIHtcbiAgICAgICAgICAgIHJldHVybiBjdXJyZW50O1xuICAgICAgICB9XG4gICAgICAgIGN1cnJlbnQgPSBuZXh0O1xuICAgIH1cbiAgICByZXR1cm4gY3VycmVudDtcbn1cbmZ1bmN0aW9uIGV4dHJhY3RGaXJzdChkZWYsIC4uLmtleXMpIHtcbiAgICBpZiAoIWRlZikge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgICBmb3IgKGNvbnN0IGtleSBvZiBrZXlzKSB7XG4gICAgICAgIGlmIChrZXkgaW4gZGVmICYmIGRlZltrZXldICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJldHVybiBkZWZba2V5XTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdW5kZWZpbmVkO1xufVxuZnVuY3Rpb24gY29lcmNlQXJyYXkodmFsdWUpIHtcbiAgICBpZiAoQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHtcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cbiAgICByZXR1cm4gdmFsdWUgPT09IHVuZGVmaW5lZCA/IFtdIDogW3ZhbHVlXTtcbn1cbmZ1bmN0aW9uIGJ1aWxkTGl0ZXJhbChkZWYpIHtcbiAgICBpZiAoIWRlZikge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgICBjb25zdCBsaXRlcmFsID0gZXh0cmFjdEZpcnN0KGRlZiwgJ3ZhbHVlJywgJ2xpdGVyYWwnKTtcbiAgICBpZiAobGl0ZXJhbCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICAgIGNvbnN0OiBsaXRlcmFsLFxuICAgICAgICB0eXBlOiBsaXRlcmFsID09PSBudWxsID8gJ251bGwnIDogdHlwZW9mIGxpdGVyYWwsXG4gICAgfTtcbn1cbmZ1bmN0aW9uIGJ1aWxkRW51bShkZWYpIHtcbiAgICBpZiAoIWRlZikge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgICBpZiAoQXJyYXkuaXNBcnJheShkZWYudmFsdWVzKSkge1xuICAgICAgICByZXR1cm4geyBlbnVtOiBkZWYudmFsdWVzIH07XG4gICAgfVxuICAgIGlmIChBcnJheS5pc0FycmF5KGRlZi5vcHRpb25zKSkge1xuICAgICAgICByZXR1cm4geyBlbnVtOiBkZWYub3B0aW9ucyB9O1xuICAgIH1cbiAgICBpZiAoZGVmLnZhbHVlcyAmJiB0eXBlb2YgZGVmLnZhbHVlcyA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgcmV0dXJuIHsgZW51bTogT2JqZWN0LnZhbHVlcyhkZWYudmFsdWVzKSB9O1xuICAgIH1cbiAgICBpZiAoZGVmLmVudW0gJiYgdHlwZW9mIGRlZi5lbnVtID09PSAnb2JqZWN0Jykge1xuICAgICAgICByZXR1cm4geyBlbnVtOiBPYmplY3QudmFsdWVzKGRlZi5lbnVtKSB9O1xuICAgIH1cbiAgICByZXR1cm4gdW5kZWZpbmVkO1xufVxuZnVuY3Rpb24gcmVhZFNoYXBlKGlucHV0KSB7XG4gICAgaWYgKHR5cGVvZiBpbnB1dCAhPT0gJ29iamVjdCcgfHwgaW5wdXQgPT09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG4gICAgY29uc3QgY2FuZGlkYXRlID0gaW5wdXQ7XG4gICAgaWYgKGNhbmRpZGF0ZS5zaGFwZSAmJiB0eXBlb2YgY2FuZGlkYXRlLnNoYXBlID09PSAnb2JqZWN0Jykge1xuICAgICAgICByZXR1cm4gY2FuZGlkYXRlLnNoYXBlO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIGNhbmRpZGF0ZS5zaGFwZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmV0dXJuIGNhbmRpZGF0ZS5zaGFwZSgpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChfZXJyb3IpIHtcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY29uc3QgZGVmID0gcmVhZFpvZERlZmluaXRpb24oY2FuZGlkYXRlKTtcbiAgICBjb25zdCBzaGFwZSA9IGRlZj8uc2hhcGU7XG4gICAgaWYgKHNoYXBlICYmIHR5cGVvZiBzaGFwZSA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgcmV0dXJuIHNoYXBlO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIHNoYXBlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXR1cm4gc2hhcGUoKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoX2Vycm9yKSB7XG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiB1bmRlZmluZWQ7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD16b2RKc29uU2NoZW1hQ29tcGF0Lm1qcy5tYXAiLCJpbXBvcnQgeyB6b2RSZXNwb25zZXNGdW5jdGlvbiwgem9kVGV4dEZvcm1hdCB9IGZyb20gJ29wZW5haS9oZWxwZXJzL3pvZCc7XG5pbXBvcnQgeyBVc2VyRXJyb3IgfSBmcm9tIFwiLi4vZXJyb3JzLm1qc1wiO1xuaW1wb3J0IHsgaXNab2RPYmplY3QgfSBmcm9tIFwiLi90eXBlR3VhcmRzLm1qc1wiO1xuaW1wb3J0IHsgem9kSnNvblNjaGVtYUNvbXBhdCwgaGFzSnNvblNjaGVtYU9iamVjdFNoYXBlLCB9IGZyb20gXCIuL3pvZEpzb25TY2hlbWFDb21wYXQubWpzXCI7XG5pbXBvcnQgeyBhc1pvZFR5cGUgfSBmcm9tIFwiLi96b2RDb21wYXQubWpzXCI7XG5jb25zdCB6b2RSZXNwb25zZXNGdW5jdGlvbkNvbXBhdCA9IHpvZFJlc3BvbnNlc0Z1bmN0aW9uO1xuLy8gVGhlIGAuc2NoZW1hYCBwYXlsb2FkIGlzIGFsbCB3ZSBuZWVkLCBzbyBhIGxpZ2h0d2VpZ2h0IHNpZ25hdHVyZSBrZWVwcyB0aGUgY29tcGlsZXIgaGFwcHkuXG5jb25zdCB6b2RUZXh0Rm9ybWF0Q29tcGF0ID0gem9kVGV4dEZvcm1hdDtcbi8vIG9wZW5haS9oZWxwZXJzL3pvZCBjYW5ub3QgZW1pdCBzdHJpY3Qgc2NoZW1hcyBmb3IgZXZlcnkgWm9kIHJ1bnRpbWVcbi8vIChub3RhYmx5IFpvZCB2NCksIHNvIHdlIGRlbGVnYXRlIHRvIGEgc21hbGwgbG9jYWwgY29udmVydGVyIGxpdmluZyBpblxuLy8gem9kSnNvblNjaGVtYUNvbXBhdC50cyB3aGVuZXZlciBpdHMgb3V0cHV0IGlzIG1pc3NpbmcgdGhlIHJlcXVpcmVkIEpTT04gU2NoZW1hIGJpdHMuXG5mdW5jdGlvbiBidWlsZEpzb25TY2hlbWFGcm9tWm9kKGlucHV0VHlwZSkge1xuICAgIHJldHVybiB6b2RKc29uU2NoZW1hQ29tcGF0KGlucHV0VHlwZSk7XG59XG4vKipcbiAqIENvbnZlcnQgYSBzdHJpbmcgdG8gYSBmdW5jdGlvbiB0b29sIG5hbWUgYnkgcmVwbGFjaW5nIHNwYWNlcyB3aXRoIHVuZGVyc2NvcmVzIGFuZFxuICogbm9uLWFscGhhbnVtZXJpYyBjaGFyYWN0ZXJzIHdpdGggdW5kZXJzY29yZXMuXG4gKiBAcGFyYW0gbmFtZSAtIFRoZSBuYW1lIG9mIHRoZSB0b29sLlxuICogQHJldHVybnMgVGhlIGZ1bmN0aW9uIHRvb2wgbmFtZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHRvRnVuY3Rpb25Ub29sTmFtZShuYW1lKSB7XG4gICAgLy8gUmVwbGFjZSBzcGFjZXMgd2l0aCB1bmRlcnNjb3Jlc1xuICAgIG5hbWUgPSBuYW1lLnJlcGxhY2UoL1xccy9nLCAnXycpO1xuICAgIC8vIFJlcGxhY2Ugbm9uLWFscGhhbnVtZXJpYyBjaGFyYWN0ZXJzIHdpdGggdW5kZXJzY29yZXNcbiAgICBuYW1lID0gbmFtZS5yZXBsYWNlKC9bXmEtekEtWjAtOV0vZywgJ18nKTtcbiAgICAvLyBFbnN1cmUgdGhlIG5hbWUgaXMgbm90IGVtcHR5XG4gICAgaWYgKG5hbWUubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignVG9vbCBuYW1lIGNhbm5vdCBiZSBlbXB0eScpO1xuICAgIH1cbiAgICByZXR1cm4gbmFtZTtcbn1cbi8qKlxuICogR2V0IHRoZSBzY2hlbWEgYW5kIHBhcnNlciBmcm9tIGFuIGlucHV0IHR5cGUuIElmIHRoZSBpbnB1dCB0eXBlIGlzIGEgWm9kT2JqZWN0LCB3ZSB3aWxsIGNvbnZlcnRcbiAqIGl0IGludG8gYSBKU09OIFNjaGVtYSBhbmQgdXNlIFpvZCBhcyBwYXJzZXIuIElmIHRoZSBpbnB1dCB0eXBlIGlzIGEgSlNPTiBzY2hlbWEsIHdlIHVzZSB0aGVcbiAqIEpTT04ucGFyc2UgZnVuY3Rpb24gdG8gZ2V0IHRoZSBwYXJzZXIuXG4gKiBAcGFyYW0gaW5wdXRUeXBlIC0gVGhlIGlucHV0IHR5cGUgdG8gZ2V0IHRoZSBzY2hlbWEgYW5kIHBhcnNlciBmcm9tLlxuICogQHBhcmFtIG5hbWUgLSBUaGUgbmFtZSBvZiB0aGUgdG9vbC5cbiAqIEByZXR1cm5zIFRoZSBzY2hlbWEgYW5kIHBhcnNlci5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFNjaGVtYUFuZFBhcnNlckZyb21JbnB1dFR5cGUoaW5wdXRUeXBlLCBuYW1lKSB7XG4gICAgY29uc3QgcGFyc2VyID0gKGlucHV0KSA9PiBKU09OLnBhcnNlKGlucHV0KTtcbiAgICBpZiAoaXNab2RPYmplY3QoaW5wdXRUeXBlKSkge1xuICAgICAgICBjb25zdCB1c2VGYWxsYmFjayA9IChvcmlnaW5hbEVycm9yKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBmYWxsYmFja1NjaGVtYSA9IGJ1aWxkSnNvblNjaGVtYUZyb21ab2QoaW5wdXRUeXBlKTtcbiAgICAgICAgICAgIGlmIChmYWxsYmFja1NjaGVtYSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIHNjaGVtYTogZmFsbGJhY2tTY2hlbWEsXG4gICAgICAgICAgICAgICAgICAgIHBhcnNlcjogKHJhd0lucHV0KSA9PiBpbnB1dFR5cGUucGFyc2UoSlNPTi5wYXJzZShyYXdJbnB1dCkpLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSBvcmlnaW5hbEVycm9yIGluc3RhbmNlb2YgRXJyb3JcbiAgICAgICAgICAgICAgICA/IGAgVXBzdHJlYW0gaGVscGVyIGVycm9yOiAke29yaWdpbmFsRXJyb3IubWVzc2FnZX1gXG4gICAgICAgICAgICAgICAgOiAnJztcbiAgICAgICAgICAgIHRocm93IG5ldyBVc2VyRXJyb3IoYFVuYWJsZSB0byBjb252ZXJ0IHRoZSBwcm92aWRlZCBab2Qgc2NoZW1hIHRvIEpTT04gU2NoZW1hLiBFbnN1cmUgdGhhdCB0aGUgXFxgem9kXFxgIHBhY2thZ2UgaXMgYXZhaWxhYmxlIGF0IHJ1bnRpbWUgb3IgcHJvdmlkZSBhIEpTT04gc2NoZW1hIG9iamVjdCBpbnN0ZWFkLiR7ZXJyb3JNZXNzYWdlfWApO1xuICAgICAgICB9O1xuICAgICAgICBsZXQgZm9ybWF0dGVkRnVuY3Rpb247XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBmb3JtYXR0ZWRGdW5jdGlvbiA9IHpvZFJlc3BvbnNlc0Z1bmN0aW9uQ29tcGF0KHtcbiAgICAgICAgICAgICAgICBuYW1lLFxuICAgICAgICAgICAgICAgIHBhcmFtZXRlcnM6IGFzWm9kVHlwZShpbnB1dFR5cGUpLFxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uOiAoKSA9PiB7IH0sIC8vIGVtcHR5IGZ1bmN0aW9uIGhlcmUgdG8gc2F0aXNmeSB0aGUgT3BlbkFJIGhlbHBlclxuICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAnJyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgcmV0dXJuIHVzZUZhbGxiYWNrKGVycm9yKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaGFzSnNvblNjaGVtYU9iamVjdFNoYXBlKGZvcm1hdHRlZEZ1bmN0aW9uLnBhcmFtZXRlcnMpKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHNjaGVtYTogZm9ybWF0dGVkRnVuY3Rpb24ucGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICBwYXJzZXI6IGZvcm1hdHRlZEZ1bmN0aW9uLiRwYXJzZVJhdyxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHVzZUZhbGxiYWNrKCk7XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGVvZiBpbnB1dFR5cGUgPT09ICdvYmplY3QnICYmIGlucHV0VHlwZSAhPT0gbnVsbCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgc2NoZW1hOiBpbnB1dFR5cGUsXG4gICAgICAgICAgICBwYXJzZXIsXG4gICAgICAgIH07XG4gICAgfVxuICAgIHRocm93IG5ldyBVc2VyRXJyb3IoJ0lucHV0IHR5cGUgaXMgbm90IGEgWm9kT2JqZWN0IG9yIGEgdmFsaWQgSlNPTiBzY2hlbWEnKTtcbn1cbi8qKlxuICogQ29udmVydHMgdGhlIGFnZW50IG91dHB1dCB0eXBlIHByb3ZpZGVkIHRvIGEgc2VyaWFsaXphYmxlIHZlcnNpb25cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNvbnZlcnRBZ2VudE91dHB1dFR5cGVUb1NlcmlhbGl6YWJsZShvdXRwdXRUeXBlKSB7XG4gICAgaWYgKG91dHB1dFR5cGUgPT09ICd0ZXh0Jykge1xuICAgICAgICByZXR1cm4gJ3RleHQnO1xuICAgIH1cbiAgICBpZiAoaXNab2RPYmplY3Qob3V0cHV0VHlwZSkpIHtcbiAgICAgICAgY29uc3QgdXNlRmFsbGJhY2sgPSAoZXhpc3RpbmcsIG9yaWdpbmFsRXJyb3IpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGZhbGxiYWNrU2NoZW1hID0gYnVpbGRKc29uU2NoZW1hRnJvbVpvZChvdXRwdXRUeXBlKTtcbiAgICAgICAgICAgIGlmIChmYWxsYmFja1NjaGVtYSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IGV4aXN0aW5nPy50eXBlID8/ICdqc29uX3NjaGVtYScsXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IGV4aXN0aW5nPy5uYW1lID8/ICdvdXRwdXQnLFxuICAgICAgICAgICAgICAgICAgICBzdHJpY3Q6IGV4aXN0aW5nPy5zdHJpY3QgPz8gZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIHNjaGVtYTogZmFsbGJhY2tTY2hlbWEsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IG9yaWdpbmFsRXJyb3IgaW5zdGFuY2VvZiBFcnJvclxuICAgICAgICAgICAgICAgID8gYCBVcHN0cmVhbSBoZWxwZXIgZXJyb3I6ICR7b3JpZ2luYWxFcnJvci5tZXNzYWdlfWBcbiAgICAgICAgICAgICAgICA6ICcnO1xuICAgICAgICAgICAgdGhyb3cgbmV3IFVzZXJFcnJvcihgVW5hYmxlIHRvIGNvbnZlcnQgdGhlIHByb3ZpZGVkIFpvZCBzY2hlbWEgdG8gSlNPTiBTY2hlbWEuIEVuc3VyZSB0aGF0IHRoZSBcXGB6b2RcXGAgcGFja2FnZSBpcyBhdmFpbGFibGUgYXQgcnVudGltZSBvciBwcm92aWRlIGEgSlNPTiBzY2hlbWEgb2JqZWN0IGluc3RlYWQuJHtlcnJvck1lc3NhZ2V9YCk7XG4gICAgICAgIH07XG4gICAgICAgIGxldCBvdXRwdXQ7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBvdXRwdXQgPSB6b2RUZXh0Rm9ybWF0Q29tcGF0KGFzWm9kVHlwZShvdXRwdXRUeXBlKSwgJ291dHB1dCcpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgcmV0dXJuIHVzZUZhbGxiYWNrKHVuZGVmaW5lZCwgZXJyb3IpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChoYXNKc29uU2NoZW1hT2JqZWN0U2hhcGUob3V0cHV0LnNjaGVtYSkpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgdHlwZTogb3V0cHV0LnR5cGUsXG4gICAgICAgICAgICAgICAgbmFtZTogb3V0cHV0Lm5hbWUsXG4gICAgICAgICAgICAgICAgc3RyaWN0OiBvdXRwdXQuc3RyaWN0IHx8IGZhbHNlLFxuICAgICAgICAgICAgICAgIHNjaGVtYTogb3V0cHV0LnNjaGVtYSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHVzZUZhbGxiYWNrKG91dHB1dCk7XG4gICAgfVxuICAgIHJldHVybiBvdXRwdXRUeXBlO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dG9vbHMubWpzLm1hcCIsIi8qKlxuICogSGVscGVycy5cbiAqL1xuXG52YXIgcyA9IDEwMDA7XG52YXIgbSA9IHMgKiA2MDtcbnZhciBoID0gbSAqIDYwO1xudmFyIGQgPSBoICogMjQ7XG52YXIgdyA9IGQgKiA3O1xudmFyIHkgPSBkICogMzY1LjI1O1xuXG4vKipcbiAqIFBhcnNlIG9yIGZvcm1hdCB0aGUgZ2l2ZW4gYHZhbGAuXG4gKlxuICogT3B0aW9uczpcbiAqXG4gKiAgLSBgbG9uZ2AgdmVyYm9zZSBmb3JtYXR0aW5nIFtmYWxzZV1cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ3xOdW1iZXJ9IHZhbFxuICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXVxuICogQHRocm93cyB7RXJyb3J9IHRocm93IGFuIGVycm9yIGlmIHZhbCBpcyBub3QgYSBub24tZW1wdHkgc3RyaW5nIG9yIGEgbnVtYmVyXG4gKiBAcmV0dXJuIHtTdHJpbmd8TnVtYmVyfVxuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uICh2YWwsIG9wdGlvbnMpIHtcbiAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG4gIHZhciB0eXBlID0gdHlwZW9mIHZhbDtcbiAgaWYgKHR5cGUgPT09ICdzdHJpbmcnICYmIHZhbC5sZW5ndGggPiAwKSB7XG4gICAgcmV0dXJuIHBhcnNlKHZhbCk7XG4gIH0gZWxzZSBpZiAodHlwZSA9PT0gJ251bWJlcicgJiYgaXNGaW5pdGUodmFsKSkge1xuICAgIHJldHVybiBvcHRpb25zLmxvbmcgPyBmbXRMb25nKHZhbCkgOiBmbXRTaG9ydCh2YWwpO1xuICB9XG4gIHRocm93IG5ldyBFcnJvcihcbiAgICAndmFsIGlzIG5vdCBhIG5vbi1lbXB0eSBzdHJpbmcgb3IgYSB2YWxpZCBudW1iZXIuIHZhbD0nICtcbiAgICAgIEpTT04uc3RyaW5naWZ5KHZhbClcbiAgKTtcbn07XG5cbi8qKlxuICogUGFyc2UgdGhlIGdpdmVuIGBzdHJgIGFuZCByZXR1cm4gbWlsbGlzZWNvbmRzLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBzdHJcbiAqIEByZXR1cm4ge051bWJlcn1cbiAqIEBhcGkgcHJpdmF0ZVxuICovXG5cbmZ1bmN0aW9uIHBhcnNlKHN0cikge1xuICBzdHIgPSBTdHJpbmcoc3RyKTtcbiAgaWYgKHN0ci5sZW5ndGggPiAxMDApIHtcbiAgICByZXR1cm47XG4gIH1cbiAgdmFyIG1hdGNoID0gL14oLT8oPzpcXGQrKT9cXC4/XFxkKykgKihtaWxsaXNlY29uZHM/fG1zZWNzP3xtc3xzZWNvbmRzP3xzZWNzP3xzfG1pbnV0ZXM/fG1pbnM/fG18aG91cnM/fGhycz98aHxkYXlzP3xkfHdlZWtzP3x3fHllYXJzP3x5cnM/fHkpPyQvaS5leGVjKFxuICAgIHN0clxuICApO1xuICBpZiAoIW1hdGNoKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIHZhciBuID0gcGFyc2VGbG9hdChtYXRjaFsxXSk7XG4gIHZhciB0eXBlID0gKG1hdGNoWzJdIHx8ICdtcycpLnRvTG93ZXJDYXNlKCk7XG4gIHN3aXRjaCAodHlwZSkge1xuICAgIGNhc2UgJ3llYXJzJzpcbiAgICBjYXNlICd5ZWFyJzpcbiAgICBjYXNlICd5cnMnOlxuICAgIGNhc2UgJ3lyJzpcbiAgICBjYXNlICd5JzpcbiAgICAgIHJldHVybiBuICogeTtcbiAgICBjYXNlICd3ZWVrcyc6XG4gICAgY2FzZSAnd2Vlayc6XG4gICAgY2FzZSAndyc6XG4gICAgICByZXR1cm4gbiAqIHc7XG4gICAgY2FzZSAnZGF5cyc6XG4gICAgY2FzZSAnZGF5JzpcbiAgICBjYXNlICdkJzpcbiAgICAgIHJldHVybiBuICogZDtcbiAgICBjYXNlICdob3Vycyc6XG4gICAgY2FzZSAnaG91cic6XG4gICAgY2FzZSAnaHJzJzpcbiAgICBjYXNlICdocic6XG4gICAgY2FzZSAnaCc6XG4gICAgICByZXR1cm4gbiAqIGg7XG4gICAgY2FzZSAnbWludXRlcyc6XG4gICAgY2FzZSAnbWludXRlJzpcbiAgICBjYXNlICdtaW5zJzpcbiAgICBjYXNlICdtaW4nOlxuICAgIGNhc2UgJ20nOlxuICAgICAgcmV0dXJuIG4gKiBtO1xuICAgIGNhc2UgJ3NlY29uZHMnOlxuICAgIGNhc2UgJ3NlY29uZCc6XG4gICAgY2FzZSAnc2Vjcyc6XG4gICAgY2FzZSAnc2VjJzpcbiAgICBjYXNlICdzJzpcbiAgICAgIHJldHVybiBuICogcztcbiAgICBjYXNlICdtaWxsaXNlY29uZHMnOlxuICAgIGNhc2UgJ21pbGxpc2Vjb25kJzpcbiAgICBjYXNlICdtc2Vjcyc6XG4gICAgY2FzZSAnbXNlYyc6XG4gICAgY2FzZSAnbXMnOlxuICAgICAgcmV0dXJuIG47XG4gICAgZGVmYXVsdDpcbiAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH1cbn1cblxuLyoqXG4gKiBTaG9ydCBmb3JtYXQgZm9yIGBtc2AuXG4gKlxuICogQHBhcmFtIHtOdW1iZXJ9IG1zXG4gKiBAcmV0dXJuIHtTdHJpbmd9XG4gKiBAYXBpIHByaXZhdGVcbiAqL1xuXG5mdW5jdGlvbiBmbXRTaG9ydChtcykge1xuICB2YXIgbXNBYnMgPSBNYXRoLmFicyhtcyk7XG4gIGlmIChtc0FicyA+PSBkKSB7XG4gICAgcmV0dXJuIE1hdGgucm91bmQobXMgLyBkKSArICdkJztcbiAgfVxuICBpZiAobXNBYnMgPj0gaCkge1xuICAgIHJldHVybiBNYXRoLnJvdW5kKG1zIC8gaCkgKyAnaCc7XG4gIH1cbiAgaWYgKG1zQWJzID49IG0pIHtcbiAgICByZXR1cm4gTWF0aC5yb3VuZChtcyAvIG0pICsgJ20nO1xuICB9XG4gIGlmIChtc0FicyA+PSBzKSB7XG4gICAgcmV0dXJuIE1hdGgucm91bmQobXMgLyBzKSArICdzJztcbiAgfVxuICByZXR1cm4gbXMgKyAnbXMnO1xufVxuXG4vKipcbiAqIExvbmcgZm9ybWF0IGZvciBgbXNgLlxuICpcbiAqIEBwYXJhbSB7TnVtYmVyfSBtc1xuICogQHJldHVybiB7U3RyaW5nfVxuICogQGFwaSBwcml2YXRlXG4gKi9cblxuZnVuY3Rpb24gZm10TG9uZyhtcykge1xuICB2YXIgbXNBYnMgPSBNYXRoLmFicyhtcyk7XG4gIGlmIChtc0FicyA+PSBkKSB7XG4gICAgcmV0dXJuIHBsdXJhbChtcywgbXNBYnMsIGQsICdkYXknKTtcbiAgfVxuICBpZiAobXNBYnMgPj0gaCkge1xuICAgIHJldHVybiBwbHVyYWwobXMsIG1zQWJzLCBoLCAnaG91cicpO1xuICB9XG4gIGlmIChtc0FicyA+PSBtKSB7XG4gICAgcmV0dXJuIHBsdXJhbChtcywgbXNBYnMsIG0sICdtaW51dGUnKTtcbiAgfVxuICBpZiAobXNBYnMgPj0gcykge1xuICAgIHJldHVybiBwbHVyYWwobXMsIG1zQWJzLCBzLCAnc2Vjb25kJyk7XG4gIH1cbiAgcmV0dXJuIG1zICsgJyBtcyc7XG59XG5cbi8qKlxuICogUGx1cmFsaXphdGlvbiBoZWxwZXIuXG4gKi9cblxuZnVuY3Rpb24gcGx1cmFsKG1zLCBtc0FicywgbiwgbmFtZSkge1xuICB2YXIgaXNQbHVyYWwgPSBtc0FicyA+PSBuICogMS41O1xuICByZXR1cm4gTWF0aC5yb3VuZChtcyAvIG4pICsgJyAnICsgbmFtZSArIChpc1BsdXJhbCA/ICdzJyA6ICcnKTtcbn1cbiIsIlxuLyoqXG4gKiBUaGlzIGlzIHRoZSBjb21tb24gbG9naWMgZm9yIGJvdGggdGhlIE5vZGUuanMgYW5kIHdlYiBicm93c2VyXG4gKiBpbXBsZW1lbnRhdGlvbnMgb2YgYGRlYnVnKClgLlxuICovXG5cbmZ1bmN0aW9uIHNldHVwKGVudikge1xuXHRjcmVhdGVEZWJ1Zy5kZWJ1ZyA9IGNyZWF0ZURlYnVnO1xuXHRjcmVhdGVEZWJ1Zy5kZWZhdWx0ID0gY3JlYXRlRGVidWc7XG5cdGNyZWF0ZURlYnVnLmNvZXJjZSA9IGNvZXJjZTtcblx0Y3JlYXRlRGVidWcuZGlzYWJsZSA9IGRpc2FibGU7XG5cdGNyZWF0ZURlYnVnLmVuYWJsZSA9IGVuYWJsZTtcblx0Y3JlYXRlRGVidWcuZW5hYmxlZCA9IGVuYWJsZWQ7XG5cdGNyZWF0ZURlYnVnLmh1bWFuaXplID0gcmVxdWlyZSgnbXMnKTtcblx0Y3JlYXRlRGVidWcuZGVzdHJveSA9IGRlc3Ryb3k7XG5cblx0T2JqZWN0LmtleXMoZW52KS5mb3JFYWNoKGtleSA9PiB7XG5cdFx0Y3JlYXRlRGVidWdba2V5XSA9IGVudltrZXldO1xuXHR9KTtcblxuXHQvKipcblx0KiBUaGUgY3VycmVudGx5IGFjdGl2ZSBkZWJ1ZyBtb2RlIG5hbWVzLCBhbmQgbmFtZXMgdG8gc2tpcC5cblx0Ki9cblxuXHRjcmVhdGVEZWJ1Zy5uYW1lcyA9IFtdO1xuXHRjcmVhdGVEZWJ1Zy5za2lwcyA9IFtdO1xuXG5cdC8qKlxuXHQqIE1hcCBvZiBzcGVjaWFsIFwiJW5cIiBoYW5kbGluZyBmdW5jdGlvbnMsIGZvciB0aGUgZGVidWcgXCJmb3JtYXRcIiBhcmd1bWVudC5cblx0KlxuXHQqIFZhbGlkIGtleSBuYW1lcyBhcmUgYSBzaW5nbGUsIGxvd2VyIG9yIHVwcGVyLWNhc2UgbGV0dGVyLCBpLmUuIFwiblwiIGFuZCBcIk5cIi5cblx0Ki9cblx0Y3JlYXRlRGVidWcuZm9ybWF0dGVycyA9IHt9O1xuXG5cdC8qKlxuXHQqIFNlbGVjdHMgYSBjb2xvciBmb3IgYSBkZWJ1ZyBuYW1lc3BhY2Vcblx0KiBAcGFyYW0ge1N0cmluZ30gbmFtZXNwYWNlIFRoZSBuYW1lc3BhY2Ugc3RyaW5nIGZvciB0aGUgZGVidWcgaW5zdGFuY2UgdG8gYmUgY29sb3JlZFxuXHQqIEByZXR1cm4ge051bWJlcnxTdHJpbmd9IEFuIEFOU0kgY29sb3IgY29kZSBmb3IgdGhlIGdpdmVuIG5hbWVzcGFjZVxuXHQqIEBhcGkgcHJpdmF0ZVxuXHQqL1xuXHRmdW5jdGlvbiBzZWxlY3RDb2xvcihuYW1lc3BhY2UpIHtcblx0XHRsZXQgaGFzaCA9IDA7XG5cblx0XHRmb3IgKGxldCBpID0gMDsgaSA8IG5hbWVzcGFjZS5sZW5ndGg7IGkrKykge1xuXHRcdFx0aGFzaCA9ICgoaGFzaCA8PCA1KSAtIGhhc2gpICsgbmFtZXNwYWNlLmNoYXJDb2RlQXQoaSk7XG5cdFx0XHRoYXNoIHw9IDA7IC8vIENvbnZlcnQgdG8gMzJiaXQgaW50ZWdlclxuXHRcdH1cblxuXHRcdHJldHVybiBjcmVhdGVEZWJ1Zy5jb2xvcnNbTWF0aC5hYnMoaGFzaCkgJSBjcmVhdGVEZWJ1Zy5jb2xvcnMubGVuZ3RoXTtcblx0fVxuXHRjcmVhdGVEZWJ1Zy5zZWxlY3RDb2xvciA9IHNlbGVjdENvbG9yO1xuXG5cdC8qKlxuXHQqIENyZWF0ZSBhIGRlYnVnZ2VyIHdpdGggdGhlIGdpdmVuIGBuYW1lc3BhY2VgLlxuXHQqXG5cdCogQHBhcmFtIHtTdHJpbmd9IG5hbWVzcGFjZVxuXHQqIEByZXR1cm4ge0Z1bmN0aW9ufVxuXHQqIEBhcGkgcHVibGljXG5cdCovXG5cdGZ1bmN0aW9uIGNyZWF0ZURlYnVnKG5hbWVzcGFjZSkge1xuXHRcdGxldCBwcmV2VGltZTtcblx0XHRsZXQgZW5hYmxlT3ZlcnJpZGUgPSBudWxsO1xuXHRcdGxldCBuYW1lc3BhY2VzQ2FjaGU7XG5cdFx0bGV0IGVuYWJsZWRDYWNoZTtcblxuXHRcdGZ1bmN0aW9uIGRlYnVnKC4uLmFyZ3MpIHtcblx0XHRcdC8vIERpc2FibGVkP1xuXHRcdFx0aWYgKCFkZWJ1Zy5lbmFibGVkKSB7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblxuXHRcdFx0Y29uc3Qgc2VsZiA9IGRlYnVnO1xuXG5cdFx0XHQvLyBTZXQgYGRpZmZgIHRpbWVzdGFtcFxuXHRcdFx0Y29uc3QgY3VyciA9IE51bWJlcihuZXcgRGF0ZSgpKTtcblx0XHRcdGNvbnN0IG1zID0gY3VyciAtIChwcmV2VGltZSB8fCBjdXJyKTtcblx0XHRcdHNlbGYuZGlmZiA9IG1zO1xuXHRcdFx0c2VsZi5wcmV2ID0gcHJldlRpbWU7XG5cdFx0XHRzZWxmLmN1cnIgPSBjdXJyO1xuXHRcdFx0cHJldlRpbWUgPSBjdXJyO1xuXG5cdFx0XHRhcmdzWzBdID0gY3JlYXRlRGVidWcuY29lcmNlKGFyZ3NbMF0pO1xuXG5cdFx0XHRpZiAodHlwZW9mIGFyZ3NbMF0gIT09ICdzdHJpbmcnKSB7XG5cdFx0XHRcdC8vIEFueXRoaW5nIGVsc2UgbGV0J3MgaW5zcGVjdCB3aXRoICVPXG5cdFx0XHRcdGFyZ3MudW5zaGlmdCgnJU8nKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gQXBwbHkgYW55IGBmb3JtYXR0ZXJzYCB0cmFuc2Zvcm1hdGlvbnNcblx0XHRcdGxldCBpbmRleCA9IDA7XG5cdFx0XHRhcmdzWzBdID0gYXJnc1swXS5yZXBsYWNlKC8lKFthLXpBLVolXSkvZywgKG1hdGNoLCBmb3JtYXQpID0+IHtcblx0XHRcdFx0Ly8gSWYgd2UgZW5jb3VudGVyIGFuIGVzY2FwZWQgJSB0aGVuIGRvbid0IGluY3JlYXNlIHRoZSBhcnJheSBpbmRleFxuXHRcdFx0XHRpZiAobWF0Y2ggPT09ICclJScpIHtcblx0XHRcdFx0XHRyZXR1cm4gJyUnO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGluZGV4Kys7XG5cdFx0XHRcdGNvbnN0IGZvcm1hdHRlciA9IGNyZWF0ZURlYnVnLmZvcm1hdHRlcnNbZm9ybWF0XTtcblx0XHRcdFx0aWYgKHR5cGVvZiBmb3JtYXR0ZXIgPT09ICdmdW5jdGlvbicpIHtcblx0XHRcdFx0XHRjb25zdCB2YWwgPSBhcmdzW2luZGV4XTtcblx0XHRcdFx0XHRtYXRjaCA9IGZvcm1hdHRlci5jYWxsKHNlbGYsIHZhbCk7XG5cblx0XHRcdFx0XHQvLyBOb3cgd2UgbmVlZCB0byByZW1vdmUgYGFyZ3NbaW5kZXhdYCBzaW5jZSBpdCdzIGlubGluZWQgaW4gdGhlIGBmb3JtYXRgXG5cdFx0XHRcdFx0YXJncy5zcGxpY2UoaW5kZXgsIDEpO1xuXHRcdFx0XHRcdGluZGV4LS07XG5cdFx0XHRcdH1cblx0XHRcdFx0cmV0dXJuIG1hdGNoO1xuXHRcdFx0fSk7XG5cblx0XHRcdC8vIEFwcGx5IGVudi1zcGVjaWZpYyBmb3JtYXR0aW5nIChjb2xvcnMsIGV0Yy4pXG5cdFx0XHRjcmVhdGVEZWJ1Zy5mb3JtYXRBcmdzLmNhbGwoc2VsZiwgYXJncyk7XG5cblx0XHRcdGNvbnN0IGxvZ0ZuID0gc2VsZi5sb2cgfHwgY3JlYXRlRGVidWcubG9nO1xuXHRcdFx0bG9nRm4uYXBwbHkoc2VsZiwgYXJncyk7XG5cdFx0fVxuXG5cdFx0ZGVidWcubmFtZXNwYWNlID0gbmFtZXNwYWNlO1xuXHRcdGRlYnVnLnVzZUNvbG9ycyA9IGNyZWF0ZURlYnVnLnVzZUNvbG9ycygpO1xuXHRcdGRlYnVnLmNvbG9yID0gY3JlYXRlRGVidWcuc2VsZWN0Q29sb3IobmFtZXNwYWNlKTtcblx0XHRkZWJ1Zy5leHRlbmQgPSBleHRlbmQ7XG5cdFx0ZGVidWcuZGVzdHJveSA9IGNyZWF0ZURlYnVnLmRlc3Ryb3k7IC8vIFhYWCBUZW1wb3JhcnkuIFdpbGwgYmUgcmVtb3ZlZCBpbiB0aGUgbmV4dCBtYWpvciByZWxlYXNlLlxuXG5cdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGRlYnVnLCAnZW5hYmxlZCcsIHtcblx0XHRcdGVudW1lcmFibGU6IHRydWUsXG5cdFx0XHRjb25maWd1cmFibGU6IGZhbHNlLFxuXHRcdFx0Z2V0OiAoKSA9PiB7XG5cdFx0XHRcdGlmIChlbmFibGVPdmVycmlkZSAhPT0gbnVsbCkge1xuXHRcdFx0XHRcdHJldHVybiBlbmFibGVPdmVycmlkZTtcblx0XHRcdFx0fVxuXHRcdFx0XHRpZiAobmFtZXNwYWNlc0NhY2hlICE9PSBjcmVhdGVEZWJ1Zy5uYW1lc3BhY2VzKSB7XG5cdFx0XHRcdFx0bmFtZXNwYWNlc0NhY2hlID0gY3JlYXRlRGVidWcubmFtZXNwYWNlcztcblx0XHRcdFx0XHRlbmFibGVkQ2FjaGUgPSBjcmVhdGVEZWJ1Zy5lbmFibGVkKG5hbWVzcGFjZSk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRyZXR1cm4gZW5hYmxlZENhY2hlO1xuXHRcdFx0fSxcblx0XHRcdHNldDogdiA9PiB7XG5cdFx0XHRcdGVuYWJsZU92ZXJyaWRlID0gdjtcblx0XHRcdH1cblx0XHR9KTtcblxuXHRcdC8vIEVudi1zcGVjaWZpYyBpbml0aWFsaXphdGlvbiBsb2dpYyBmb3IgZGVidWcgaW5zdGFuY2VzXG5cdFx0aWYgKHR5cGVvZiBjcmVhdGVEZWJ1Zy5pbml0ID09PSAnZnVuY3Rpb24nKSB7XG5cdFx0XHRjcmVhdGVEZWJ1Zy5pbml0KGRlYnVnKTtcblx0XHR9XG5cblx0XHRyZXR1cm4gZGVidWc7XG5cdH1cblxuXHRmdW5jdGlvbiBleHRlbmQobmFtZXNwYWNlLCBkZWxpbWl0ZXIpIHtcblx0XHRjb25zdCBuZXdEZWJ1ZyA9IGNyZWF0ZURlYnVnKHRoaXMubmFtZXNwYWNlICsgKHR5cGVvZiBkZWxpbWl0ZXIgPT09ICd1bmRlZmluZWQnID8gJzonIDogZGVsaW1pdGVyKSArIG5hbWVzcGFjZSk7XG5cdFx0bmV3RGVidWcubG9nID0gdGhpcy5sb2c7XG5cdFx0cmV0dXJuIG5ld0RlYnVnO1xuXHR9XG5cblx0LyoqXG5cdCogRW5hYmxlcyBhIGRlYnVnIG1vZGUgYnkgbmFtZXNwYWNlcy4gVGhpcyBjYW4gaW5jbHVkZSBtb2Rlc1xuXHQqIHNlcGFyYXRlZCBieSBhIGNvbG9uIGFuZCB3aWxkY2FyZHMuXG5cdCpcblx0KiBAcGFyYW0ge1N0cmluZ30gbmFtZXNwYWNlc1xuXHQqIEBhcGkgcHVibGljXG5cdCovXG5cdGZ1bmN0aW9uIGVuYWJsZShuYW1lc3BhY2VzKSB7XG5cdFx0Y3JlYXRlRGVidWcuc2F2ZShuYW1lc3BhY2VzKTtcblx0XHRjcmVhdGVEZWJ1Zy5uYW1lc3BhY2VzID0gbmFtZXNwYWNlcztcblxuXHRcdGNyZWF0ZURlYnVnLm5hbWVzID0gW107XG5cdFx0Y3JlYXRlRGVidWcuc2tpcHMgPSBbXTtcblxuXHRcdGNvbnN0IHNwbGl0ID0gKHR5cGVvZiBuYW1lc3BhY2VzID09PSAnc3RyaW5nJyA/IG5hbWVzcGFjZXMgOiAnJylcblx0XHRcdC50cmltKClcblx0XHRcdC5yZXBsYWNlKC9cXHMrL2csICcsJylcblx0XHRcdC5zcGxpdCgnLCcpXG5cdFx0XHQuZmlsdGVyKEJvb2xlYW4pO1xuXG5cdFx0Zm9yIChjb25zdCBucyBvZiBzcGxpdCkge1xuXHRcdFx0aWYgKG5zWzBdID09PSAnLScpIHtcblx0XHRcdFx0Y3JlYXRlRGVidWcuc2tpcHMucHVzaChucy5zbGljZSgxKSk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRjcmVhdGVEZWJ1Zy5uYW1lcy5wdXNoKG5zKTtcblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHQvKipcblx0ICogQ2hlY2tzIGlmIHRoZSBnaXZlbiBzdHJpbmcgbWF0Y2hlcyBhIG5hbWVzcGFjZSB0ZW1wbGF0ZSwgaG9ub3Jpbmdcblx0ICogYXN0ZXJpc2tzIGFzIHdpbGRjYXJkcy5cblx0ICpcblx0ICogQHBhcmFtIHtTdHJpbmd9IHNlYXJjaFxuXHQgKiBAcGFyYW0ge1N0cmluZ30gdGVtcGxhdGVcblx0ICogQHJldHVybiB7Qm9vbGVhbn1cblx0ICovXG5cdGZ1bmN0aW9uIG1hdGNoZXNUZW1wbGF0ZShzZWFyY2gsIHRlbXBsYXRlKSB7XG5cdFx0bGV0IHNlYXJjaEluZGV4ID0gMDtcblx0XHRsZXQgdGVtcGxhdGVJbmRleCA9IDA7XG5cdFx0bGV0IHN0YXJJbmRleCA9IC0xO1xuXHRcdGxldCBtYXRjaEluZGV4ID0gMDtcblxuXHRcdHdoaWxlIChzZWFyY2hJbmRleCA8IHNlYXJjaC5sZW5ndGgpIHtcblx0XHRcdGlmICh0ZW1wbGF0ZUluZGV4IDwgdGVtcGxhdGUubGVuZ3RoICYmICh0ZW1wbGF0ZVt0ZW1wbGF0ZUluZGV4XSA9PT0gc2VhcmNoW3NlYXJjaEluZGV4XSB8fCB0ZW1wbGF0ZVt0ZW1wbGF0ZUluZGV4XSA9PT0gJyonKSkge1xuXHRcdFx0XHQvLyBNYXRjaCBjaGFyYWN0ZXIgb3IgcHJvY2VlZCB3aXRoIHdpbGRjYXJkXG5cdFx0XHRcdGlmICh0ZW1wbGF0ZVt0ZW1wbGF0ZUluZGV4XSA9PT0gJyonKSB7XG5cdFx0XHRcdFx0c3RhckluZGV4ID0gdGVtcGxhdGVJbmRleDtcblx0XHRcdFx0XHRtYXRjaEluZGV4ID0gc2VhcmNoSW5kZXg7XG5cdFx0XHRcdFx0dGVtcGxhdGVJbmRleCsrOyAvLyBTa2lwIHRoZSAnKidcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRzZWFyY2hJbmRleCsrO1xuXHRcdFx0XHRcdHRlbXBsYXRlSW5kZXgrKztcblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIGlmIChzdGFySW5kZXggIT09IC0xKSB7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tbmVnYXRlZC1jb25kaXRpb25cblx0XHRcdFx0Ly8gQmFja3RyYWNrIHRvIHRoZSBsYXN0ICcqJyBhbmQgdHJ5IHRvIG1hdGNoIG1vcmUgY2hhcmFjdGVyc1xuXHRcdFx0XHR0ZW1wbGF0ZUluZGV4ID0gc3RhckluZGV4ICsgMTtcblx0XHRcdFx0bWF0Y2hJbmRleCsrO1xuXHRcdFx0XHRzZWFyY2hJbmRleCA9IG1hdGNoSW5kZXg7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRyZXR1cm4gZmFsc2U7IC8vIE5vIG1hdGNoXG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gSGFuZGxlIHRyYWlsaW5nICcqJyBpbiB0ZW1wbGF0ZVxuXHRcdHdoaWxlICh0ZW1wbGF0ZUluZGV4IDwgdGVtcGxhdGUubGVuZ3RoICYmIHRlbXBsYXRlW3RlbXBsYXRlSW5kZXhdID09PSAnKicpIHtcblx0XHRcdHRlbXBsYXRlSW5kZXgrKztcblx0XHR9XG5cblx0XHRyZXR1cm4gdGVtcGxhdGVJbmRleCA9PT0gdGVtcGxhdGUubGVuZ3RoO1xuXHR9XG5cblx0LyoqXG5cdCogRGlzYWJsZSBkZWJ1ZyBvdXRwdXQuXG5cdCpcblx0KiBAcmV0dXJuIHtTdHJpbmd9IG5hbWVzcGFjZXNcblx0KiBAYXBpIHB1YmxpY1xuXHQqL1xuXHRmdW5jdGlvbiBkaXNhYmxlKCkge1xuXHRcdGNvbnN0IG5hbWVzcGFjZXMgPSBbXG5cdFx0XHQuLi5jcmVhdGVEZWJ1Zy5uYW1lcyxcblx0XHRcdC4uLmNyZWF0ZURlYnVnLnNraXBzLm1hcChuYW1lc3BhY2UgPT4gJy0nICsgbmFtZXNwYWNlKVxuXHRcdF0uam9pbignLCcpO1xuXHRcdGNyZWF0ZURlYnVnLmVuYWJsZSgnJyk7XG5cdFx0cmV0dXJuIG5hbWVzcGFjZXM7XG5cdH1cblxuXHQvKipcblx0KiBSZXR1cm5zIHRydWUgaWYgdGhlIGdpdmVuIG1vZGUgbmFtZSBpcyBlbmFibGVkLCBmYWxzZSBvdGhlcndpc2UuXG5cdCpcblx0KiBAcGFyYW0ge1N0cmluZ30gbmFtZVxuXHQqIEByZXR1cm4ge0Jvb2xlYW59XG5cdCogQGFwaSBwdWJsaWNcblx0Ki9cblx0ZnVuY3Rpb24gZW5hYmxlZChuYW1lKSB7XG5cdFx0Zm9yIChjb25zdCBza2lwIG9mIGNyZWF0ZURlYnVnLnNraXBzKSB7XG5cdFx0XHRpZiAobWF0Y2hlc1RlbXBsYXRlKG5hbWUsIHNraXApKSB7XG5cdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRmb3IgKGNvbnN0IG5zIG9mIGNyZWF0ZURlYnVnLm5hbWVzKSB7XG5cdFx0XHRpZiAobWF0Y2hlc1RlbXBsYXRlKG5hbWUsIG5zKSkge1xuXHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4gZmFsc2U7XG5cdH1cblxuXHQvKipcblx0KiBDb2VyY2UgYHZhbGAuXG5cdCpcblx0KiBAcGFyYW0ge01peGVkfSB2YWxcblx0KiBAcmV0dXJuIHtNaXhlZH1cblx0KiBAYXBpIHByaXZhdGVcblx0Ki9cblx0ZnVuY3Rpb24gY29lcmNlKHZhbCkge1xuXHRcdGlmICh2YWwgaW5zdGFuY2VvZiBFcnJvcikge1xuXHRcdFx0cmV0dXJuIHZhbC5zdGFjayB8fCB2YWwubWVzc2FnZTtcblx0XHR9XG5cdFx0cmV0dXJuIHZhbDtcblx0fVxuXG5cdC8qKlxuXHQqIFhYWCBETyBOT1QgVVNFLiBUaGlzIGlzIGEgdGVtcG9yYXJ5IHN0dWIgZnVuY3Rpb24uXG5cdCogWFhYIEl0IFdJTEwgYmUgcmVtb3ZlZCBpbiB0aGUgbmV4dCBtYWpvciByZWxlYXNlLlxuXHQqL1xuXHRmdW5jdGlvbiBkZXN0cm95KCkge1xuXHRcdGNvbnNvbGUud2FybignSW5zdGFuY2UgbWV0aG9kIGBkZWJ1Zy5kZXN0cm95KClgIGlzIGRlcHJlY2F0ZWQgYW5kIG5vIGxvbmdlciBkb2VzIGFueXRoaW5nLiBJdCB3aWxsIGJlIHJlbW92ZWQgaW4gdGhlIG5leHQgbWFqb3IgdmVyc2lvbiBvZiBgZGVidWdgLicpO1xuXHR9XG5cblx0Y3JlYXRlRGVidWcuZW5hYmxlKGNyZWF0ZURlYnVnLmxvYWQoKSk7XG5cblx0cmV0dXJuIGNyZWF0ZURlYnVnO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHNldHVwO1xuIiwiLyogZXNsaW50LWVudiBicm93c2VyICovXG5cbi8qKlxuICogVGhpcyBpcyB0aGUgd2ViIGJyb3dzZXIgaW1wbGVtZW50YXRpb24gb2YgYGRlYnVnKClgLlxuICovXG5cbmV4cG9ydHMuZm9ybWF0QXJncyA9IGZvcm1hdEFyZ3M7XG5leHBvcnRzLnNhdmUgPSBzYXZlO1xuZXhwb3J0cy5sb2FkID0gbG9hZDtcbmV4cG9ydHMudXNlQ29sb3JzID0gdXNlQ29sb3JzO1xuZXhwb3J0cy5zdG9yYWdlID0gbG9jYWxzdG9yYWdlKCk7XG5leHBvcnRzLmRlc3Ryb3kgPSAoKCkgPT4ge1xuXHRsZXQgd2FybmVkID0gZmFsc2U7XG5cblx0cmV0dXJuICgpID0+IHtcblx0XHRpZiAoIXdhcm5lZCkge1xuXHRcdFx0d2FybmVkID0gdHJ1ZTtcblx0XHRcdGNvbnNvbGUud2FybignSW5zdGFuY2UgbWV0aG9kIGBkZWJ1Zy5kZXN0cm95KClgIGlzIGRlcHJlY2F0ZWQgYW5kIG5vIGxvbmdlciBkb2VzIGFueXRoaW5nLiBJdCB3aWxsIGJlIHJlbW92ZWQgaW4gdGhlIG5leHQgbWFqb3IgdmVyc2lvbiBvZiBgZGVidWdgLicpO1xuXHRcdH1cblx0fTtcbn0pKCk7XG5cbi8qKlxuICogQ29sb3JzLlxuICovXG5cbmV4cG9ydHMuY29sb3JzID0gW1xuXHQnIzAwMDBDQycsXG5cdCcjMDAwMEZGJyxcblx0JyMwMDMzQ0MnLFxuXHQnIzAwMzNGRicsXG5cdCcjMDA2NkNDJyxcblx0JyMwMDY2RkYnLFxuXHQnIzAwOTlDQycsXG5cdCcjMDA5OUZGJyxcblx0JyMwMENDMDAnLFxuXHQnIzAwQ0MzMycsXG5cdCcjMDBDQzY2Jyxcblx0JyMwMENDOTknLFxuXHQnIzAwQ0NDQycsXG5cdCcjMDBDQ0ZGJyxcblx0JyMzMzAwQ0MnLFxuXHQnIzMzMDBGRicsXG5cdCcjMzMzM0NDJyxcblx0JyMzMzMzRkYnLFxuXHQnIzMzNjZDQycsXG5cdCcjMzM2NkZGJyxcblx0JyMzMzk5Q0MnLFxuXHQnIzMzOTlGRicsXG5cdCcjMzNDQzAwJyxcblx0JyMzM0NDMzMnLFxuXHQnIzMzQ0M2NicsXG5cdCcjMzNDQzk5Jyxcblx0JyMzM0NDQ0MnLFxuXHQnIzMzQ0NGRicsXG5cdCcjNjYwMENDJyxcblx0JyM2NjAwRkYnLFxuXHQnIzY2MzNDQycsXG5cdCcjNjYzM0ZGJyxcblx0JyM2NkNDMDAnLFxuXHQnIzY2Q0MzMycsXG5cdCcjOTkwMENDJyxcblx0JyM5OTAwRkYnLFxuXHQnIzk5MzNDQycsXG5cdCcjOTkzM0ZGJyxcblx0JyM5OUNDMDAnLFxuXHQnIzk5Q0MzMycsXG5cdCcjQ0MwMDAwJyxcblx0JyNDQzAwMzMnLFxuXHQnI0NDMDA2NicsXG5cdCcjQ0MwMDk5Jyxcblx0JyNDQzAwQ0MnLFxuXHQnI0NDMDBGRicsXG5cdCcjQ0MzMzAwJyxcblx0JyNDQzMzMzMnLFxuXHQnI0NDMzM2NicsXG5cdCcjQ0MzMzk5Jyxcblx0JyNDQzMzQ0MnLFxuXHQnI0NDMzNGRicsXG5cdCcjQ0M2NjAwJyxcblx0JyNDQzY2MzMnLFxuXHQnI0NDOTkwMCcsXG5cdCcjQ0M5OTMzJyxcblx0JyNDQ0NDMDAnLFxuXHQnI0NDQ0MzMycsXG5cdCcjRkYwMDAwJyxcblx0JyNGRjAwMzMnLFxuXHQnI0ZGMDA2NicsXG5cdCcjRkYwMDk5Jyxcblx0JyNGRjAwQ0MnLFxuXHQnI0ZGMDBGRicsXG5cdCcjRkYzMzAwJyxcblx0JyNGRjMzMzMnLFxuXHQnI0ZGMzM2NicsXG5cdCcjRkYzMzk5Jyxcblx0JyNGRjMzQ0MnLFxuXHQnI0ZGMzNGRicsXG5cdCcjRkY2NjAwJyxcblx0JyNGRjY2MzMnLFxuXHQnI0ZGOTkwMCcsXG5cdCcjRkY5OTMzJyxcblx0JyNGRkNDMDAnLFxuXHQnI0ZGQ0MzMydcbl07XG5cbi8qKlxuICogQ3VycmVudGx5IG9ubHkgV2ViS2l0LWJhc2VkIFdlYiBJbnNwZWN0b3JzLCBGaXJlZm94ID49IHYzMSxcbiAqIGFuZCB0aGUgRmlyZWJ1ZyBleHRlbnNpb24gKGFueSBGaXJlZm94IHZlcnNpb24pIGFyZSBrbm93blxuICogdG8gc3VwcG9ydCBcIiVjXCIgQ1NTIGN1c3RvbWl6YXRpb25zLlxuICpcbiAqIFRPRE86IGFkZCBhIGBsb2NhbFN0b3JhZ2VgIHZhcmlhYmxlIHRvIGV4cGxpY2l0bHkgZW5hYmxlL2Rpc2FibGUgY29sb3JzXG4gKi9cblxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGNvbXBsZXhpdHlcbmZ1bmN0aW9uIHVzZUNvbG9ycygpIHtcblx0Ly8gTkI6IEluIGFuIEVsZWN0cm9uIHByZWxvYWQgc2NyaXB0LCBkb2N1bWVudCB3aWxsIGJlIGRlZmluZWQgYnV0IG5vdCBmdWxseVxuXHQvLyBpbml0aWFsaXplZC4gU2luY2Ugd2Uga25vdyB3ZSdyZSBpbiBDaHJvbWUsIHdlJ2xsIGp1c3QgZGV0ZWN0IHRoaXMgY2FzZVxuXHQvLyBleHBsaWNpdGx5XG5cdGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB3aW5kb3cucHJvY2VzcyAmJiAod2luZG93LnByb2Nlc3MudHlwZSA9PT0gJ3JlbmRlcmVyJyB8fCB3aW5kb3cucHJvY2Vzcy5fX253anMpKSB7XG5cdFx0cmV0dXJuIHRydWU7XG5cdH1cblxuXHQvLyBJbnRlcm5ldCBFeHBsb3JlciBhbmQgRWRnZSBkbyBub3Qgc3VwcG9ydCBjb2xvcnMuXG5cdGlmICh0eXBlb2YgbmF2aWdhdG9yICE9PSAndW5kZWZpbmVkJyAmJiBuYXZpZ2F0b3IudXNlckFnZW50ICYmIG5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKS5tYXRjaCgvKGVkZ2V8dHJpZGVudClcXC8oXFxkKykvKSkge1xuXHRcdHJldHVybiBmYWxzZTtcblx0fVxuXG5cdGxldCBtO1xuXG5cdC8vIElzIHdlYmtpdD8gaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL2EvMTY0NTk2MDYvMzc2NzczXG5cdC8vIGRvY3VtZW50IGlzIHVuZGVmaW5lZCBpbiByZWFjdC1uYXRpdmU6IGh0dHBzOi8vZ2l0aHViLmNvbS9mYWNlYm9vay9yZWFjdC1uYXRpdmUvcHVsbC8xNjMyXG5cdC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1yZXR1cm4tYXNzaWduXG5cdHJldHVybiAodHlwZW9mIGRvY3VtZW50ICE9PSAndW5kZWZpbmVkJyAmJiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQgJiYgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnN0eWxlICYmIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zdHlsZS5XZWJraXRBcHBlYXJhbmNlKSB8fFxuXHRcdC8vIElzIGZpcmVidWc/IGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9hLzM5ODEyMC8zNzY3NzNcblx0XHQodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgd2luZG93LmNvbnNvbGUgJiYgKHdpbmRvdy5jb25zb2xlLmZpcmVidWcgfHwgKHdpbmRvdy5jb25zb2xlLmV4Y2VwdGlvbiAmJiB3aW5kb3cuY29uc29sZS50YWJsZSkpKSB8fFxuXHRcdC8vIElzIGZpcmVmb3ggPj0gdjMxP1xuXHRcdC8vIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvVG9vbHMvV2ViX0NvbnNvbGUjU3R5bGluZ19tZXNzYWdlc1xuXHRcdCh0eXBlb2YgbmF2aWdhdG9yICE9PSAndW5kZWZpbmVkJyAmJiBuYXZpZ2F0b3IudXNlckFnZW50ICYmIChtID0gbmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpLm1hdGNoKC9maXJlZm94XFwvKFxcZCspLykpICYmIHBhcnNlSW50KG1bMV0sIDEwKSA+PSAzMSkgfHxcblx0XHQvLyBEb3VibGUgY2hlY2sgd2Via2l0IGluIHVzZXJBZ2VudCBqdXN0IGluIGNhc2Ugd2UgYXJlIGluIGEgd29ya2VyXG5cdFx0KHR5cGVvZiBuYXZpZ2F0b3IgIT09ICd1bmRlZmluZWQnICYmIG5hdmlnYXRvci51c2VyQWdlbnQgJiYgbmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpLm1hdGNoKC9hcHBsZXdlYmtpdFxcLyhcXGQrKS8pKTtcbn1cblxuLyoqXG4gKiBDb2xvcml6ZSBsb2cgYXJndW1lbnRzIGlmIGVuYWJsZWQuXG4gKlxuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5mdW5jdGlvbiBmb3JtYXRBcmdzKGFyZ3MpIHtcblx0YXJnc1swXSA9ICh0aGlzLnVzZUNvbG9ycyA/ICclYycgOiAnJykgK1xuXHRcdHRoaXMubmFtZXNwYWNlICtcblx0XHQodGhpcy51c2VDb2xvcnMgPyAnICVjJyA6ICcgJykgK1xuXHRcdGFyZ3NbMF0gK1xuXHRcdCh0aGlzLnVzZUNvbG9ycyA/ICclYyAnIDogJyAnKSArXG5cdFx0JysnICsgbW9kdWxlLmV4cG9ydHMuaHVtYW5pemUodGhpcy5kaWZmKTtcblxuXHRpZiAoIXRoaXMudXNlQ29sb3JzKSB7XG5cdFx0cmV0dXJuO1xuXHR9XG5cblx0Y29uc3QgYyA9ICdjb2xvcjogJyArIHRoaXMuY29sb3I7XG5cdGFyZ3Muc3BsaWNlKDEsIDAsIGMsICdjb2xvcjogaW5oZXJpdCcpO1xuXG5cdC8vIFRoZSBmaW5hbCBcIiVjXCIgaXMgc29tZXdoYXQgdHJpY2t5LCBiZWNhdXNlIHRoZXJlIGNvdWxkIGJlIG90aGVyXG5cdC8vIGFyZ3VtZW50cyBwYXNzZWQgZWl0aGVyIGJlZm9yZSBvciBhZnRlciB0aGUgJWMsIHNvIHdlIG5lZWQgdG9cblx0Ly8gZmlndXJlIG91dCB0aGUgY29ycmVjdCBpbmRleCB0byBpbnNlcnQgdGhlIENTUyBpbnRvXG5cdGxldCBpbmRleCA9IDA7XG5cdGxldCBsYXN0QyA9IDA7XG5cdGFyZ3NbMF0ucmVwbGFjZSgvJVthLXpBLVolXS9nLCBtYXRjaCA9PiB7XG5cdFx0aWYgKG1hdGNoID09PSAnJSUnKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXHRcdGluZGV4Kys7XG5cdFx0aWYgKG1hdGNoID09PSAnJWMnKSB7XG5cdFx0XHQvLyBXZSBvbmx5IGFyZSBpbnRlcmVzdGVkIGluIHRoZSAqbGFzdCogJWNcblx0XHRcdC8vICh0aGUgdXNlciBtYXkgaGF2ZSBwcm92aWRlZCB0aGVpciBvd24pXG5cdFx0XHRsYXN0QyA9IGluZGV4O1xuXHRcdH1cblx0fSk7XG5cblx0YXJncy5zcGxpY2UobGFzdEMsIDAsIGMpO1xufVxuXG4vKipcbiAqIEludm9rZXMgYGNvbnNvbGUuZGVidWcoKWAgd2hlbiBhdmFpbGFibGUuXG4gKiBOby1vcCB3aGVuIGBjb25zb2xlLmRlYnVnYCBpcyBub3QgYSBcImZ1bmN0aW9uXCIuXG4gKiBJZiBgY29uc29sZS5kZWJ1Z2AgaXMgbm90IGF2YWlsYWJsZSwgZmFsbHMgYmFja1xuICogdG8gYGNvbnNvbGUubG9nYC5cbiAqXG4gKiBAYXBpIHB1YmxpY1xuICovXG5leHBvcnRzLmxvZyA9IGNvbnNvbGUuZGVidWcgfHwgY29uc29sZS5sb2cgfHwgKCgpID0+IHt9KTtcblxuLyoqXG4gKiBTYXZlIGBuYW1lc3BhY2VzYC5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gbmFtZXNwYWNlc1xuICogQGFwaSBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIHNhdmUobmFtZXNwYWNlcykge1xuXHR0cnkge1xuXHRcdGlmIChuYW1lc3BhY2VzKSB7XG5cdFx0XHRleHBvcnRzLnN0b3JhZ2Uuc2V0SXRlbSgnZGVidWcnLCBuYW1lc3BhY2VzKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0ZXhwb3J0cy5zdG9yYWdlLnJlbW92ZUl0ZW0oJ2RlYnVnJyk7XG5cdFx0fVxuXHR9IGNhdGNoIChlcnJvcikge1xuXHRcdC8vIFN3YWxsb3dcblx0XHQvLyBYWFggKEBRaXgtKSBzaG91bGQgd2UgYmUgbG9nZ2luZyB0aGVzZT9cblx0fVxufVxuXG4vKipcbiAqIExvYWQgYG5hbWVzcGFjZXNgLlxuICpcbiAqIEByZXR1cm4ge1N0cmluZ30gcmV0dXJucyB0aGUgcHJldmlvdXNseSBwZXJzaXN0ZWQgZGVidWcgbW9kZXNcbiAqIEBhcGkgcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBsb2FkKCkge1xuXHRsZXQgcjtcblx0dHJ5IHtcblx0XHRyID0gZXhwb3J0cy5zdG9yYWdlLmdldEl0ZW0oJ2RlYnVnJykgfHwgZXhwb3J0cy5zdG9yYWdlLmdldEl0ZW0oJ0RFQlVHJykgO1xuXHR9IGNhdGNoIChlcnJvcikge1xuXHRcdC8vIFN3YWxsb3dcblx0XHQvLyBYWFggKEBRaXgtKSBzaG91bGQgd2UgYmUgbG9nZ2luZyB0aGVzZT9cblx0fVxuXG5cdC8vIElmIGRlYnVnIGlzbid0IHNldCBpbiBMUywgYW5kIHdlJ3JlIGluIEVsZWN0cm9uLCB0cnkgdG8gbG9hZCAkREVCVUdcblx0aWYgKCFyICYmIHR5cGVvZiBwcm9jZXNzICE9PSAndW5kZWZpbmVkJyAmJiAnZW52JyBpbiBwcm9jZXNzKSB7XG5cdFx0ciA9IHByb2Nlc3MuZW52LkRFQlVHO1xuXHR9XG5cblx0cmV0dXJuIHI7XG59XG5cbi8qKlxuICogTG9jYWxzdG9yYWdlIGF0dGVtcHRzIHRvIHJldHVybiB0aGUgbG9jYWxzdG9yYWdlLlxuICpcbiAqIFRoaXMgaXMgbmVjZXNzYXJ5IGJlY2F1c2Ugc2FmYXJpIHRocm93c1xuICogd2hlbiBhIHVzZXIgZGlzYWJsZXMgY29va2llcy9sb2NhbHN0b3JhZ2VcbiAqIGFuZCB5b3UgYXR0ZW1wdCB0byBhY2Nlc3MgaXQuXG4gKlxuICogQHJldHVybiB7TG9jYWxTdG9yYWdlfVxuICogQGFwaSBwcml2YXRlXG4gKi9cblxuZnVuY3Rpb24gbG9jYWxzdG9yYWdlKCkge1xuXHR0cnkge1xuXHRcdC8vIFRWTUxLaXQgKEFwcGxlIFRWIEpTIFJ1bnRpbWUpIGRvZXMgbm90IGhhdmUgYSB3aW5kb3cgb2JqZWN0LCBqdXN0IGxvY2FsU3RvcmFnZSBpbiB0aGUgZ2xvYmFsIGNvbnRleHRcblx0XHQvLyBUaGUgQnJvd3NlciBhbHNvIGhhcyBsb2NhbFN0b3JhZ2UgaW4gdGhlIGdsb2JhbCBjb250ZXh0LlxuXHRcdHJldHVybiBsb2NhbFN0b3JhZ2U7XG5cdH0gY2F0Y2ggKGVycm9yKSB7XG5cdFx0Ly8gU3dhbGxvd1xuXHRcdC8vIFhYWCAoQFFpeC0pIHNob3VsZCB3ZSBiZSBsb2dnaW5nIHRoZXNlP1xuXHR9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZSgnLi9jb21tb24nKShleHBvcnRzKTtcblxuY29uc3Qge2Zvcm1hdHRlcnN9ID0gbW9kdWxlLmV4cG9ydHM7XG5cbi8qKlxuICogTWFwICVqIHRvIGBKU09OLnN0cmluZ2lmeSgpYCwgc2luY2Ugbm8gV2ViIEluc3BlY3RvcnMgZG8gdGhhdCBieSBkZWZhdWx0LlxuICovXG5cbmZvcm1hdHRlcnMuaiA9IGZ1bmN0aW9uICh2KSB7XG5cdHRyeSB7XG5cdFx0cmV0dXJuIEpTT04uc3RyaW5naWZ5KHYpO1xuXHR9IGNhdGNoIChlcnJvcikge1xuXHRcdHJldHVybiAnW1VuZXhwZWN0ZWRKU09OUGFyc2VFcnJvcl06ICcgKyBlcnJvci5tZXNzYWdlO1xuXHR9XG59O1xuIiwiaW1wb3J0IHsgbG9hZEVudiBhcyBfbG9hZEVudiwgaXNCcm93c2VyRW52aXJvbm1lbnQsIH0gZnJvbSAnQG9wZW5haS9hZ2VudHMtY29yZS9fc2hpbXMnO1xuLyoqXG4gKiBMb2FkcyBlbnZpcm9ubWVudCB2YXJpYWJsZXMgZnJvbSB0aGUgcHJvY2VzcyBlbnZpcm9ubWVudC5cbiAqXG4gKiBAcmV0dXJucyBBbiBvYmplY3QgY29udGFpbmluZyB0aGUgZW52aXJvbm1lbnQgdmFyaWFibGVzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gbG9hZEVudigpIHtcbiAgICByZXR1cm4gX2xvYWRFbnYoKTtcbn1cbi8qKlxuICogQ2hlY2tzIGlmIGEgZmxhZyBpcyBlbmFibGVkIGluIHRoZSBlbnZpcm9ubWVudC5cbiAqXG4gKiBAcGFyYW0gZmxhZ05hbWUgLSBUaGUgbmFtZSBvZiB0aGUgZmxhZyB0byBjaGVjay5cbiAqIEByZXR1cm5zIGB0cnVlYCBpZiB0aGUgZmxhZyBpcyBlbmFibGVkLCBgZmFsc2VgIG90aGVyd2lzZS5cbiAqL1xuZnVuY3Rpb24gaXNFbmFibGVkKGZsYWdOYW1lKSB7XG4gICAgY29uc3QgZW52ID0gbG9hZEVudigpO1xuICAgIHJldHVybiAodHlwZW9mIGVudiAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICAgICAgKGVudltmbGFnTmFtZV0gPT09ICd0cnVlJyB8fCBlbnZbZmxhZ05hbWVdID09PSAnMScpKTtcbn1cbi8qKlxuICogR2xvYmFsIGNvbmZpZ3VyYXRpb24gZm9yIHRyYWNpbmcuXG4gKi9cbmV4cG9ydCBjb25zdCB0cmFjaW5nID0ge1xuICAgIGdldCBkaXNhYmxlZCgpIHtcbiAgICAgICAgaWYgKGlzQnJvd3NlckVudmlyb25tZW50KCkpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGxvYWRFbnYoKS5OT0RFX0VOViA9PT0gJ3Rlc3QnKSB7XG4gICAgICAgICAgICAvLyBkaXNhYmxpbmcgYnkgZGVmYXVsdCBpbiB0ZXN0c1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGlzRW5hYmxlZCgnT1BFTkFJX0FHRU5UU19ESVNBQkxFX1RSQUNJTkcnKTtcbiAgICB9LFxufTtcbi8qKlxuICogR2xvYmFsIGNvbmZpZ3VyYXRpb24gZm9yIGxvZ2dpbmcuXG4gKi9cbmV4cG9ydCBjb25zdCBsb2dnaW5nID0ge1xuICAgIGdldCBkb250TG9nTW9kZWxEYXRhKCkge1xuICAgICAgICByZXR1cm4gaXNFbmFibGVkKCdPUEVOQUlfQUdFTlRTX0RPTlRfTE9HX01PREVMX0RBVEEnKTtcbiAgICB9LFxuICAgIGdldCBkb250TG9nVG9vbERhdGEoKSB7XG4gICAgICAgIHJldHVybiBpc0VuYWJsZWQoJ09QRU5BSV9BR0VOVFNfRE9OVF9MT0dfVE9PTF9EQVRBJyk7XG4gICAgfSxcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jb25maWcubWpzLm1hcCIsImltcG9ydCBkZWJ1ZyBmcm9tICdkZWJ1Zyc7XG5pbXBvcnQgeyBsb2dnaW5nIH0gZnJvbSBcIi4vY29uZmlnLm1qc1wiO1xuLyoqXG4gKiBCeSBkZWZhdWx0IHdlIGRvbid0IGxvZyBMTE0gaW5wdXRzL291dHB1dHMsIHRvIHByZXZlbnQgZXhwb3Npbmcgc2Vuc2l0aXZlIGRhdGEuIFNldCB0aGlzIGZsYWdcbiAqIHRvIGVuYWJsZSBsb2dnaW5nIHRoZW0uXG4gKi9cbmNvbnN0IGRvbnRMb2dNb2RlbERhdGEgPSBsb2dnaW5nLmRvbnRMb2dNb2RlbERhdGE7XG4vKipcbiAqIEJ5IGRlZmF1bHQgd2UgZG9uJ3QgbG9nIHRvb2wgaW5wdXRzL291dHB1dHMsIHRvIHByZXZlbnQgZXhwb3Npbmcgc2Vuc2l0aXZlIGRhdGEuIFNldCB0aGlzIGZsYWdcbiAqIHRvIGVuYWJsZSBsb2dnaW5nIHRoZW0uXG4gKi9cbmNvbnN0IGRvbnRMb2dUb29sRGF0YSA9IGxvZ2dpbmcuZG9udExvZ1Rvb2xEYXRhO1xuLyoqXG4gKiBHZXQgYSBsb2dnZXIgZm9yIGEgZ2l2ZW4gcGFja2FnZS5cbiAqXG4gKiBAcGFyYW0gbmFtZXNwYWNlIC0gdGhlIG5hbWVzcGFjZSB0byB1c2UgZm9yIHRoZSBsb2dnZXIuXG4gKiBAcmV0dXJucyBBIGxvZ2dlciBvYmplY3Qgd2l0aCBgZGVidWdgIGFuZCBgZXJyb3JgIG1ldGhvZHMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRMb2dnZXIobmFtZXNwYWNlID0gJ29wZW5haS1hZ2VudHMnKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgbmFtZXNwYWNlLFxuICAgICAgICBkZWJ1ZzogZGVidWcobmFtZXNwYWNlKSxcbiAgICAgICAgZXJyb3I6IGNvbnNvbGUuZXJyb3IsXG4gICAgICAgIHdhcm46IGNvbnNvbGUud2FybixcbiAgICAgICAgZG9udExvZ01vZGVsRGF0YSxcbiAgICAgICAgZG9udExvZ1Rvb2xEYXRhLFxuICAgIH07XG59XG5leHBvcnQgY29uc3QgbG9nZ2VyID0gZ2V0TG9nZ2VyKCdvcGVuYWktYWdlbnRzOmNvcmUnKTtcbmV4cG9ydCBkZWZhdWx0IGxvZ2dlcjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWxvZ2dlci5tanMubWFwIiwiY29uc3QgQllURV9QUkVWSUVXX0xJTUlUID0gMjA7XG5leHBvcnQgZnVuY3Rpb24gdG9TbWFydFN0cmluZyh2YWx1ZSkge1xuICAgIC8vIFByb2R1Y2UgYSBodW1hbi1mcmllbmRseSBzdHJpbmcgcmVwcmVzZW50YXRpb24gd2hpbGUgcHJlc2VydmluZyBlbm91Z2ggZGV0YWlsIGZvciBkZWJ1Z2dpbmcgd29ya2Zsb3dzLlxuICAgIGlmICh2YWx1ZSA9PT0gbnVsbCB8fCB2YWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiBTdHJpbmcodmFsdWUpO1xuICAgIH1cbiAgICBpZiAoaXNBcnJheUJ1ZmZlckxpa2UodmFsdWUpKSB7XG4gICAgICAgIHJldHVybiBmb3JtYXRCeXRlQXJyYXkobmV3IFVpbnQ4QXJyYXkodmFsdWUpKTtcbiAgICB9XG4gICAgaWYgKGlzQXJyYXlCdWZmZXJWaWV3KHZhbHVlKSkge1xuICAgICAgICBjb25zdCB2aWV3ID0gdmFsdWU7XG4gICAgICAgIHJldHVybiBmb3JtYXRCeXRlQXJyYXkobmV3IFVpbnQ4QXJyYXkodmlldy5idWZmZXIsIHZpZXcuYnl0ZU9mZnNldCwgdmlldy5ieXRlTGVuZ3RoKSk7XG4gICAgfVxuICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeSh2YWx1ZSwgc21hcnRTdHJpbmdSZXBsYWNlcik7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKF9lKSB7XG4gICAgICAgICAgICByZXR1cm4gJ1tvYmplY3Qgd2l0aCBjaXJjdWxhciByZWZlcmVuY2VzXSc7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIFN0cmluZyh2YWx1ZSk7XG59XG5leHBvcnQgZnVuY3Rpb24gaXNBcnJheUJ1ZmZlckxpa2UodmFsdWUpIHtcbiAgICAvLyBEZXRlY3QgcmF3IEFycmF5QnVmZmVyLWJhY2tlZCBwYXlsb2FkcyBzbyBjYWxsZXJzIGNhbiBnZW5lcmF0ZSBmdWxsIHByZXZpZXdzIHJhdGhlciB0aGFuIHRydW5jYXRlZCBoYXNoZXMuXG4gICAgaWYgKHZhbHVlIGluc3RhbmNlb2YgQXJyYXlCdWZmZXIpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGNvbnN0IHNoYXJlZEFycmF5QnVmZmVyQ3RvciA9IGdsb2JhbFRoaXMuU2hhcmVkQXJyYXlCdWZmZXI7XG4gICAgcmV0dXJuIEJvb2xlYW4oc2hhcmVkQXJyYXlCdWZmZXJDdG9yICYmIHZhbHVlIGluc3RhbmNlb2Ygc2hhcmVkQXJyYXlCdWZmZXJDdG9yKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBpc0FycmF5QnVmZmVyVmlldyh2YWx1ZSkge1xuICAgIC8vIFRyZWF0IHR5cGVkIGFycmF5IHZpZXdzIGFzIGJpbmFyeSBkYXRhIGZvciBjb25zaXN0ZW50IHNlcmlhbGl6YXRpb24uXG4gICAgcmV0dXJuIHR5cGVvZiBBcnJheUJ1ZmZlciAhPT0gJ3VuZGVmaW5lZCcgJiYgQXJyYXlCdWZmZXIuaXNWaWV3KHZhbHVlKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBpc1NlcmlhbGl6ZWRCdWZmZXJTbmFwc2hvdCh2YWx1ZSkge1xuICAgIC8vIFN1cHBvcnQgc2VyaWFsaXplZCBCdWZmZXIgc25hcHNob3RzIChlLmcuLCBmcm9tIEpTT04ucGFyc2UpIGVtaXR0ZWQgYnkgc29tZSB0b29sIG91dHB1dHMuXG4gICAgcmV0dXJuICh0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmXG4gICAgICAgIHZhbHVlICE9PSBudWxsICYmXG4gICAgICAgIHZhbHVlLnR5cGUgPT09ICdCdWZmZXInICYmXG4gICAgICAgIEFycmF5LmlzQXJyYXkodmFsdWUuZGF0YSkpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGlzTm9kZUJ1ZmZlcih2YWx1ZSkge1xuICAgIC8vIERldGVjdCBydW50aW1lIEJ1ZmZlcnMgd2l0aG91dCBpbXBvcnRpbmcgbm9kZS1zcGVjaWZpYyBzaGltcywgaGFuZGxpbmcgYnJvd3NlciBidWlsZHMgZ3JhY2VmdWxseS5cbiAgICBjb25zdCBidWZmZXJDdG9yID0gZ2xvYmFsVGhpcy5CdWZmZXI7XG4gICAgcmV0dXJuIEJvb2xlYW4oYnVmZmVyQ3RvciAmJlxuICAgICAgICB0eXBlb2YgYnVmZmVyQ3Rvci5pc0J1ZmZlciA9PT0gJ2Z1bmN0aW9uJyAmJlxuICAgICAgICBidWZmZXJDdG9yLmlzQnVmZmVyKHZhbHVlKSk7XG59XG5mdW5jdGlvbiBmb3JtYXRCeXRlQXJyYXkoYnl0ZXMpIHtcbiAgICBpZiAoYnl0ZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHJldHVybiAnW2J5dGUgYXJyYXkgKDAgYnl0ZXMpXSc7XG4gICAgfVxuICAgIGNvbnN0IHByZXZpZXdMZW5ndGggPSBNYXRoLm1pbihieXRlcy5sZW5ndGgsIEJZVEVfUFJFVklFV19MSU1JVCk7XG4gICAgY29uc3QgcHJldmlld1BhcnRzID0gW107XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwcmV2aWV3TGVuZ3RoOyBpKyspIHtcbiAgICAgICAgcHJldmlld1BhcnRzLnB1c2goZm9ybWF0Qnl0ZShieXRlc1tpXSkpO1xuICAgIH1cbiAgICBjb25zdCBlbGxpcHNpcyA9IGJ5dGVzLmxlbmd0aCA+IEJZVEVfUFJFVklFV19MSU1JVCA/ICcg4oCmJyA6ICcnO1xuICAgIGNvbnN0IHByZXZpZXcgPSBwcmV2aWV3UGFydHMuam9pbignICcpO1xuICAgIHJldHVybiBgW2J5dGUgYXJyYXkgJHtwcmV2aWV3fSR7ZWxsaXBzaXN9ICgke2J5dGVzLmxlbmd0aH0gYnl0ZXMpXWA7XG59XG5mdW5jdGlvbiBmb3JtYXRCeXRlKGJ5dGUpIHtcbiAgICByZXR1cm4gYDB4JHtieXRlLnRvU3RyaW5nKDE2KS5wYWRTdGFydCgyLCAnMCcpfWA7XG59XG5mdW5jdGlvbiBzbWFydFN0cmluZ1JlcGxhY2VyKF9rZXksIG5lc3RlZFZhbHVlKSB7XG4gICAgaWYgKGlzQXJyYXlCdWZmZXJMaWtlKG5lc3RlZFZhbHVlKSkge1xuICAgICAgICByZXR1cm4gZm9ybWF0Qnl0ZUFycmF5KG5ldyBVaW50OEFycmF5KG5lc3RlZFZhbHVlKSk7XG4gICAgfVxuICAgIGlmIChpc0FycmF5QnVmZmVyVmlldyhuZXN0ZWRWYWx1ZSkpIHtcbiAgICAgICAgY29uc3QgdmlldyA9IG5lc3RlZFZhbHVlO1xuICAgICAgICByZXR1cm4gZm9ybWF0Qnl0ZUFycmF5KG5ldyBVaW50OEFycmF5KHZpZXcuYnVmZmVyLCB2aWV3LmJ5dGVPZmZzZXQsIHZpZXcuYnl0ZUxlbmd0aCkpO1xuICAgIH1cbiAgICBpZiAoaXNTZXJpYWxpemVkQnVmZmVyU25hcHNob3QobmVzdGVkVmFsdWUpKSB7XG4gICAgICAgIHJldHVybiBmb3JtYXRCeXRlQXJyYXkoVWludDhBcnJheS5mcm9tKG5lc3RlZFZhbHVlLmRhdGEpKTtcbiAgICB9XG4gICAgcmV0dXJuIG5lc3RlZFZhbHVlO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c21hcnRTdHJpbmcubWpzLm1hcCIsImltcG9ydCB7IHNhZmVFeGVjdXRlIH0gZnJvbSBcIi4vdXRpbHMvc2FmZUV4ZWN1dGUubWpzXCI7XG5pbXBvcnQgeyB0b0Z1bmN0aW9uVG9vbE5hbWUgfSBmcm9tIFwiLi91dGlscy90b29scy5tanNcIjtcbmltcG9ydCB7IGdldFNjaGVtYUFuZFBhcnNlckZyb21JbnB1dFR5cGUgfSBmcm9tIFwiLi91dGlscy90b29scy5tanNcIjtcbmltcG9ydCB7IGlzWm9kT2JqZWN0IH0gZnJvbSBcIi4vdXRpbHMvdHlwZUd1YXJkcy5tanNcIjtcbmltcG9ydCB7IE1vZGVsQmVoYXZpb3JFcnJvciwgVXNlckVycm9yIH0gZnJvbSBcIi4vZXJyb3JzLm1qc1wiO1xuaW1wb3J0IGxvZ2dlciBmcm9tIFwiLi9sb2dnZXIubWpzXCI7XG5pbXBvcnQgeyBnZXRDdXJyZW50U3BhbiB9IGZyb20gXCIuL3RyYWNpbmcvaW5kZXgubWpzXCI7XG5pbXBvcnQgeyB0b1NtYXJ0U3RyaW5nIH0gZnJvbSBcIi4vdXRpbHMvc21hcnRTdHJpbmcubWpzXCI7XG5mdW5jdGlvbiBpc0NvbXB1dGVyUHJvdmlkZXIoY2FuZGlkYXRlKSB7XG4gICAgcmV0dXJuICghIWNhbmRpZGF0ZSAmJlxuICAgICAgICB0eXBlb2YgY2FuZGlkYXRlID09PSAnb2JqZWN0JyAmJlxuICAgICAgICB0eXBlb2YgY2FuZGlkYXRlLmNyZWF0ZSA9PT0gJ2Z1bmN0aW9uJyk7XG59XG4vKipcbiAqIEV4cG9zZXMgYSBjb21wdXRlciB0byB0aGUgYWdlbnQgYXMgYSB0b29sIHRvIGJlIGNhbGxlZC5cbiAqXG4gKiBAcGFyYW0gb3B0aW9ucyBBZGRpdGlvbmFsIGNvbmZpZ3VyYXRpb24gZm9yIHRoZSBjb21wdXRlciB0b29sIGxpa2Ugc3BlY2lmeWluZyB0aGUgbG9jYXRpb24gb2YgeW91ciBhZ2VudFxuICogQHJldHVybnMgYSBjb21wdXRlciB0b29sIGRlZmluaXRpb25cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNvbXB1dGVyVG9vbChvcHRpb25zKSB7XG4gICAgaWYgKCFvcHRpb25zLmNvbXB1dGVyKSB7XG4gICAgICAgIHRocm93IG5ldyBVc2VyRXJyb3IoJ2NvbXB1dGVyVG9vbCByZXF1aXJlcyBhIGNvbXB1dGVyIGluc3RhbmNlIG9yIGFuIGluaXRpYWxpemVyIGZ1bmN0aW9uLicpO1xuICAgIH1cbiAgICBjb25zdCB0b29sID0ge1xuICAgICAgICB0eXBlOiAnY29tcHV0ZXInLFxuICAgICAgICBuYW1lOiBvcHRpb25zLm5hbWUgPz8gJ2NvbXB1dGVyX3VzZV9wcmV2aWV3JyxcbiAgICAgICAgY29tcHV0ZXI6IG9wdGlvbnMuY29tcHV0ZXIsXG4gICAgfTtcbiAgICBpZiAodHlwZW9mIG9wdGlvbnMuY29tcHV0ZXIgPT09ICdmdW5jdGlvbicgfHxcbiAgICAgICAgaXNDb21wdXRlclByb3ZpZGVyKG9wdGlvbnMuY29tcHV0ZXIpKSB7XG4gICAgICAgIGNvbXB1dGVySW5pdGlhbGl6ZXJNYXAuc2V0KHRvb2wsIG9wdGlvbnMuY29tcHV0ZXIpO1xuICAgIH1cbiAgICByZXR1cm4gdG9vbDtcbn1cbi8vIEtlZXBzIHBlci10b29sIGNhY2hlIG9mIGNvbXB1dGVyIGluc3RhbmNlcyBrZXllZCBieSBSdW5Db250ZXh0IHNvIGVhY2ggcnVuIGdldHMgaXRzIG93biBpbnN0YW5jZS5cbmNvbnN0IGNvbXB1dGVyQ2FjaGUgPSBuZXcgV2Vha01hcCgpO1xuLy8gVHJhY2tzIHRoZSBpbml0aWFsaXplciBzbyB3ZSBkbyBub3Qgb3ZlcndyaXRlIHRoZSBjYWxsYWJsZSBvbiB0aGUgdG9vbCB3aGVuIHdlIG1lbW9pemUgdGhlIHJlc29sdmVkIGluc3RhbmNlLlxuY29uc3QgY29tcHV0ZXJJbml0aWFsaXplck1hcCA9IG5ldyBXZWFrTWFwKCk7XG4vLyBBbGxvd3MgY2xlYW51cCByb3V0aW5lcyB0byBmaW5kIGFsbCByZXNvbHZlZCBjb21wdXRlciBpbnN0YW5jZXMgZm9yIGEgZ2l2ZW4gcnVuIGNvbnRleHQuXG5jb25zdCBjb21wdXRlcnNCeVJ1bkNvbnRleHQgPSBuZXcgV2Vha01hcCgpO1xuZnVuY3Rpb24gZ2V0Q29tcHV0ZXJJbml0aWFsaXplcih0b29sKSB7XG4gICAgY29uc3QgaW5pdGlhbGl6ZXIgPSBjb21wdXRlckluaXRpYWxpemVyTWFwLmdldCh0b29sKTtcbiAgICBpZiAoaW5pdGlhbGl6ZXIpIHtcbiAgICAgICAgcmV0dXJuIGluaXRpYWxpemVyO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIHRvb2wuY29tcHV0ZXIgPT09ICdmdW5jdGlvbicgfHxcbiAgICAgICAgaXNDb21wdXRlclByb3ZpZGVyKHRvb2wuY29tcHV0ZXIpKSB7XG4gICAgICAgIHJldHVybiB0b29sLmNvbXB1dGVyO1xuICAgIH1cbiAgICByZXR1cm4gdW5kZWZpbmVkO1xufVxuZnVuY3Rpb24gdHJhY2tSZXNvbHZlZENvbXB1dGVyKHRvb2wsIHJ1bkNvbnRleHQsIHJlc29sdmVkKSB7XG4gICAgbGV0IHJlc29sdmVkQnlSdW4gPSBjb21wdXRlcnNCeVJ1bkNvbnRleHQuZ2V0KHJ1bkNvbnRleHQpO1xuICAgIGlmICghcmVzb2x2ZWRCeVJ1bikge1xuICAgICAgICByZXNvbHZlZEJ5UnVuID0gbmV3IE1hcCgpO1xuICAgICAgICBjb21wdXRlcnNCeVJ1bkNvbnRleHQuc2V0KHJ1bkNvbnRleHQsIHJlc29sdmVkQnlSdW4pO1xuICAgIH1cbiAgICByZXNvbHZlZEJ5UnVuLnNldCh0b29sLCByZXNvbHZlZCk7XG59XG4vKipcbiAqIFJldHVybnMgYSBjb21wdXRlciBpbnN0YW5jZSBmb3IgdGhlIHByb3ZpZGVkIHJ1biBjb250ZXh0LiBDYWNoZXMgcGVyIHJ1biB0byBhdm9pZCBzaGFyaW5nIGFjcm9zcyBydW5zLlxuICogQGludGVybmFsXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiByZXNvbHZlQ29tcHV0ZXIoYXJncykge1xuICAgIGNvbnN0IHsgdG9vbCwgcnVuQ29udGV4dCB9ID0gYXJncztcbiAgICAvLyBDYWNoZSBpbnN0YW5jZXMgcGVyIFJ1bkNvbnRleHQgc28gYSBzaW5nbGUgQ29tcHV0ZXIgaXMgbm90IHNoYXJlZCBhY3Jvc3Mgc2ltdWx0YW5lb3VzIHJ1bnMuXG4gICAgY29uc3QgdG9vbEtleSA9IHRvb2w7XG4gICAgbGV0IHBlckNvbnRleHQgPSBjb21wdXRlckNhY2hlLmdldCh0b29sS2V5KTtcbiAgICBpZiAoIXBlckNvbnRleHQpIHtcbiAgICAgICAgcGVyQ29udGV4dCA9IG5ldyBXZWFrTWFwKCk7XG4gICAgICAgIGNvbXB1dGVyQ2FjaGUuc2V0KHRvb2xLZXksIHBlckNvbnRleHQpO1xuICAgIH1cbiAgICBjb25zdCBjYWNoZWQgPSBwZXJDb250ZXh0LmdldChydW5Db250ZXh0KTtcbiAgICBpZiAoY2FjaGVkKSB7XG4gICAgICAgIHRyYWNrUmVzb2x2ZWRDb21wdXRlcih0b29sLCBydW5Db250ZXh0LCBjYWNoZWQpO1xuICAgICAgICByZXR1cm4gY2FjaGVkLmNvbXB1dGVyO1xuICAgIH1cbiAgICBjb25zdCBpbml0aWFsaXplckNvbmZpZyA9IGdldENvbXB1dGVySW5pdGlhbGl6ZXIodG9vbCk7XG4gICAgY29uc3QgbGlmZWN5Y2xlID0gaW5pdGlhbGl6ZXJDb25maWcgJiYgaXNDb21wdXRlclByb3ZpZGVyKGluaXRpYWxpemVyQ29uZmlnKVxuICAgICAgICA/IGluaXRpYWxpemVyQ29uZmlnXG4gICAgICAgIDogaXNDb21wdXRlclByb3ZpZGVyKHRvb2wuY29tcHV0ZXIpXG4gICAgICAgICAgICA/IHRvb2wuY29tcHV0ZXJcbiAgICAgICAgICAgIDogdW5kZWZpbmVkO1xuICAgIGNvbnN0IGluaXRpYWxpemVyID0gdHlwZW9mIGluaXRpYWxpemVyQ29uZmlnID09PSAnZnVuY3Rpb24nXG4gICAgICAgID8gaW5pdGlhbGl6ZXJDb25maWdcbiAgICAgICAgOiAobGlmZWN5Y2xlPy5jcmVhdGUgPz9cbiAgICAgICAgICAgICh0eXBlb2YgdG9vbC5jb21wdXRlciA9PT0gJ2Z1bmN0aW9uJ1xuICAgICAgICAgICAgICAgID8gdG9vbC5jb21wdXRlclxuICAgICAgICAgICAgICAgIDogdW5kZWZpbmVkKSk7XG4gICAgY29uc3QgZGlzcG9zZXIgPSBsaWZlY3ljbGU/LmRpc3Bvc2U7XG4gICAgY29uc3QgY29tcHV0ZXIgPSBpbml0aWFsaXplciAmJiB0eXBlb2YgaW5pdGlhbGl6ZXIgPT09ICdmdW5jdGlvbidcbiAgICAgICAgPyBhd2FpdCBpbml0aWFsaXplcih7IHJ1bkNvbnRleHQgfSlcbiAgICAgICAgOiB0b29sLmNvbXB1dGVyO1xuICAgIGlmICghY29tcHV0ZXIpIHtcbiAgICAgICAgdGhyb3cgbmV3IFVzZXJFcnJvcignVGhlIGNvbXB1dGVyIHRvb2wgZGlkIG5vdCBwcm92aWRlIGEgY29tcHV0ZXIgaW5zdGFuY2UuJyk7XG4gICAgfVxuICAgIGNvbnN0IHJlc29sdmVkID0ge1xuICAgICAgICBjb21wdXRlcixcbiAgICAgICAgZGlzcG9zZTogZGlzcG9zZXIsXG4gICAgfTtcbiAgICBwZXJDb250ZXh0LnNldChydW5Db250ZXh0LCByZXNvbHZlZCk7XG4gICAgdHJhY2tSZXNvbHZlZENvbXB1dGVyKHRvb2wsIHJ1bkNvbnRleHQsIHJlc29sdmVkKTtcbiAgICB0b29sLmNvbXB1dGVyID0gY29tcHV0ZXI7XG4gICAgcmV0dXJuIGNvbXB1dGVyO1xufVxuLyoqXG4gKiBEaXNwb3NlcyBhbnkgY29tcHV0ZXIgaW5zdGFuY2VzIGNyZWF0ZWQgZm9yIHRoZSBwcm92aWRlZCBydW4gY29udGV4dC5cbiAqIEBpbnRlcm5hbFxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZGlzcG9zZVJlc29sdmVkQ29tcHV0ZXJzKHsgcnVuQ29udGV4dCwgfSkge1xuICAgIGNvbnN0IHJlc29sdmVkQnlSdW4gPSBjb21wdXRlcnNCeVJ1bkNvbnRleHQuZ2V0KHJ1bkNvbnRleHQpO1xuICAgIGlmICghcmVzb2x2ZWRCeVJ1bikge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbXB1dGVyc0J5UnVuQ29udGV4dC5kZWxldGUocnVuQ29udGV4dCk7XG4gICAgY29uc3QgZGlzcG9zZXJzID0gW107XG4gICAgZm9yIChjb25zdCBbdG9vbCwgcmVzb2x2ZWRdIG9mIHJlc29sdmVkQnlSdW4uZW50cmllcygpKSB7XG4gICAgICAgIGNvbnN0IHBlckNvbnRleHQgPSBjb21wdXRlckNhY2hlLmdldCh0b29sKTtcbiAgICAgICAgcGVyQ29udGV4dD8uZGVsZXRlKHJ1bkNvbnRleHQpO1xuICAgICAgICBjb25zdCBzdG9yZWRJbml0aWFsaXplciA9IGdldENvbXB1dGVySW5pdGlhbGl6ZXIodG9vbCk7XG4gICAgICAgIGlmIChzdG9yZWRJbml0aWFsaXplcikge1xuICAgICAgICAgICAgdG9vbC5jb21wdXRlciA9IHN0b3JlZEluaXRpYWxpemVyO1xuICAgICAgICB9XG4gICAgICAgIGlmIChyZXNvbHZlZC5kaXNwb3NlKSB7XG4gICAgICAgICAgICBkaXNwb3NlcnMucHVzaChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgYXdhaXQgcmVzb2x2ZWQuZGlzcG9zZT8uKHsgcnVuQ29udGV4dCwgY29tcHV0ZXI6IHJlc29sdmVkLmNvbXB1dGVyIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZm9yIChjb25zdCBkaXNwb3NlIG9mIGRpc3Bvc2Vycykge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgYXdhaXQgZGlzcG9zZSgpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgbG9nZ2VyLndhcm4oYEZhaWxlZCB0byBkaXNwb3NlIGNvbXB1dGVyIGZvciBydW4gY29udGV4dDogJHtlcnJvcn1gKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbmV4cG9ydCBmdW5jdGlvbiBzaGVsbFRvb2wob3B0aW9ucykge1xuICAgIGNvbnN0IG5lZWRzQXBwcm92YWwgPSB0eXBlb2Ygb3B0aW9ucy5uZWVkc0FwcHJvdmFsID09PSAnZnVuY3Rpb24nXG4gICAgICAgID8gb3B0aW9ucy5uZWVkc0FwcHJvdmFsXG4gICAgICAgIDogYXN5bmMgKCkgPT4gdHlwZW9mIG9wdGlvbnMubmVlZHNBcHByb3ZhbCA9PT0gJ2Jvb2xlYW4nXG4gICAgICAgICAgICA/IG9wdGlvbnMubmVlZHNBcHByb3ZhbFxuICAgICAgICAgICAgOiBmYWxzZTtcbiAgICByZXR1cm4ge1xuICAgICAgICB0eXBlOiAnc2hlbGwnLFxuICAgICAgICBuYW1lOiBvcHRpb25zLm5hbWUgPz8gJ3NoZWxsJyxcbiAgICAgICAgc2hlbGw6IG9wdGlvbnMuc2hlbGwsXG4gICAgICAgIG5lZWRzQXBwcm92YWwsXG4gICAgICAgIG9uQXBwcm92YWw6IG9wdGlvbnMub25BcHByb3ZhbCxcbiAgICB9O1xufVxuZXhwb3J0IGZ1bmN0aW9uIGFwcGx5UGF0Y2hUb29sKG9wdGlvbnMpIHtcbiAgICBjb25zdCBuZWVkc0FwcHJvdmFsID0gdHlwZW9mIG9wdGlvbnMubmVlZHNBcHByb3ZhbCA9PT0gJ2Z1bmN0aW9uJ1xuICAgICAgICA/IG9wdGlvbnMubmVlZHNBcHByb3ZhbFxuICAgICAgICA6IGFzeW5jICgpID0+IHR5cGVvZiBvcHRpb25zLm5lZWRzQXBwcm92YWwgPT09ICdib29sZWFuJ1xuICAgICAgICAgICAgPyBvcHRpb25zLm5lZWRzQXBwcm92YWxcbiAgICAgICAgICAgIDogZmFsc2U7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogJ2FwcGx5X3BhdGNoJyxcbiAgICAgICAgbmFtZTogb3B0aW9ucy5uYW1lID8/ICdhcHBseV9wYXRjaCcsXG4gICAgICAgIGVkaXRvcjogb3B0aW9ucy5lZGl0b3IsXG4gICAgICAgIG5lZWRzQXBwcm92YWwsXG4gICAgICAgIG9uQXBwcm92YWw6IG9wdGlvbnMub25BcHByb3ZhbCxcbiAgICB9O1xufVxuLyoqXG4gKiBDcmVhdGVzIGEgaG9zdGVkIE1DUCB0b29sIGRlZmluaXRpb24uXG4gKlxuICogQHBhcmFtIG9wdGlvbnMgLSBDb25maWd1cmF0aW9uIGZvciB0aGUgaG9zdGVkIE1DUCB0b29sLCBpbmNsdWRpbmcgc2VydmVyIGNvbm5lY3Rpb24gZGV0YWlsc1xuICogYW5kIGFwcHJvdmFsIHJlcXVpcmVtZW50cy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGhvc3RlZE1jcFRvb2wob3B0aW9ucykge1xuICAgIGlmICgnc2VydmVyVXJsJyBpbiBvcHRpb25zKSB7XG4gICAgICAgIC8vIHRoZSBNQ1Agc2VydmVycyBjb21hcHRpYmxlIHdpdGggdGhlIHNwZWNpZmljYXRpb25cbiAgICAgICAgY29uc3QgcHJvdmlkZXJEYXRhID0gdHlwZW9mIG9wdGlvbnMucmVxdWlyZUFwcHJvdmFsID09PSAndW5kZWZpbmVkJyB8fFxuICAgICAgICAgICAgb3B0aW9ucy5yZXF1aXJlQXBwcm92YWwgPT09ICduZXZlcidcbiAgICAgICAgICAgID8ge1xuICAgICAgICAgICAgICAgIHR5cGU6ICdtY3AnLFxuICAgICAgICAgICAgICAgIHNlcnZlcl9sYWJlbDogb3B0aW9ucy5zZXJ2ZXJMYWJlbCxcbiAgICAgICAgICAgICAgICBzZXJ2ZXJfdXJsOiBvcHRpb25zLnNlcnZlclVybCxcbiAgICAgICAgICAgICAgICBhdXRob3JpemF0aW9uOiBvcHRpb25zLmF1dGhvcml6YXRpb24sXG4gICAgICAgICAgICAgICAgcmVxdWlyZV9hcHByb3ZhbDogJ25ldmVyJyxcbiAgICAgICAgICAgICAgICBhbGxvd2VkX3Rvb2xzOiB0b01jcEFsbG93ZWRUb29sc0ZpbHRlcihvcHRpb25zLmFsbG93ZWRUb29scyksXG4gICAgICAgICAgICAgICAgaGVhZGVyczogb3B0aW9ucy5oZWFkZXJzLFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgOiB7XG4gICAgICAgICAgICAgICAgdHlwZTogJ21jcCcsXG4gICAgICAgICAgICAgICAgc2VydmVyX2xhYmVsOiBvcHRpb25zLnNlcnZlckxhYmVsLFxuICAgICAgICAgICAgICAgIHNlcnZlcl91cmw6IG9wdGlvbnMuc2VydmVyVXJsLFxuICAgICAgICAgICAgICAgIGF1dGhvcml6YXRpb246IG9wdGlvbnMuYXV0aG9yaXphdGlvbixcbiAgICAgICAgICAgICAgICBhbGxvd2VkX3Rvb2xzOiB0b01jcEFsbG93ZWRUb29sc0ZpbHRlcihvcHRpb25zLmFsbG93ZWRUb29scyksXG4gICAgICAgICAgICAgICAgaGVhZGVyczogb3B0aW9ucy5oZWFkZXJzLFxuICAgICAgICAgICAgICAgIHJlcXVpcmVfYXBwcm92YWw6IHR5cGVvZiBvcHRpb25zLnJlcXVpcmVBcHByb3ZhbCA9PT0gJ3N0cmluZydcbiAgICAgICAgICAgICAgICAgICAgPyAnYWx3YXlzJ1xuICAgICAgICAgICAgICAgICAgICA6IGJ1aWxkUmVxdWlyZUFwcHJvdmFsKG9wdGlvbnMucmVxdWlyZUFwcHJvdmFsKSxcbiAgICAgICAgICAgICAgICBvbl9hcHByb3ZhbDogb3B0aW9ucy5vbkFwcHJvdmFsLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHR5cGU6ICdob3N0ZWRfdG9vbCcsXG4gICAgICAgICAgICBuYW1lOiAnaG9zdGVkX21jcCcsXG4gICAgICAgICAgICBwcm92aWRlckRhdGEsXG4gICAgICAgIH07XG4gICAgfVxuICAgIGVsc2UgaWYgKCdjb25uZWN0b3JJZCcgaW4gb3B0aW9ucykge1xuICAgICAgICAvLyBPcGVuQUkncyBjb25uZWN0b3JzXG4gICAgICAgIGNvbnN0IHByb3ZpZGVyRGF0YSA9IHR5cGVvZiBvcHRpb25zLnJlcXVpcmVBcHByb3ZhbCA9PT0gJ3VuZGVmaW5lZCcgfHxcbiAgICAgICAgICAgIG9wdGlvbnMucmVxdWlyZUFwcHJvdmFsID09PSAnbmV2ZXInXG4gICAgICAgICAgICA/IHtcbiAgICAgICAgICAgICAgICB0eXBlOiAnbWNwJyxcbiAgICAgICAgICAgICAgICBzZXJ2ZXJfbGFiZWw6IG9wdGlvbnMuc2VydmVyTGFiZWwsXG4gICAgICAgICAgICAgICAgY29ubmVjdG9yX2lkOiBvcHRpb25zLmNvbm5lY3RvcklkLFxuICAgICAgICAgICAgICAgIGF1dGhvcml6YXRpb246IG9wdGlvbnMuYXV0aG9yaXphdGlvbixcbiAgICAgICAgICAgICAgICByZXF1aXJlX2FwcHJvdmFsOiAnbmV2ZXInLFxuICAgICAgICAgICAgICAgIGFsbG93ZWRfdG9vbHM6IHRvTWNwQWxsb3dlZFRvb2xzRmlsdGVyKG9wdGlvbnMuYWxsb3dlZFRvb2xzKSxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBvcHRpb25zLmhlYWRlcnMsXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICA6IHtcbiAgICAgICAgICAgICAgICB0eXBlOiAnbWNwJyxcbiAgICAgICAgICAgICAgICBzZXJ2ZXJfbGFiZWw6IG9wdGlvbnMuc2VydmVyTGFiZWwsXG4gICAgICAgICAgICAgICAgY29ubmVjdG9yX2lkOiBvcHRpb25zLmNvbm5lY3RvcklkLFxuICAgICAgICAgICAgICAgIGF1dGhvcml6YXRpb246IG9wdGlvbnMuYXV0aG9yaXphdGlvbixcbiAgICAgICAgICAgICAgICBhbGxvd2VkX3Rvb2xzOiB0b01jcEFsbG93ZWRUb29sc0ZpbHRlcihvcHRpb25zLmFsbG93ZWRUb29scyksXG4gICAgICAgICAgICAgICAgaGVhZGVyczogb3B0aW9ucy5oZWFkZXJzLFxuICAgICAgICAgICAgICAgIHJlcXVpcmVfYXBwcm92YWw6IHR5cGVvZiBvcHRpb25zLnJlcXVpcmVBcHByb3ZhbCA9PT0gJ3N0cmluZydcbiAgICAgICAgICAgICAgICAgICAgPyAnYWx3YXlzJ1xuICAgICAgICAgICAgICAgICAgICA6IGJ1aWxkUmVxdWlyZUFwcHJvdmFsKG9wdGlvbnMucmVxdWlyZUFwcHJvdmFsKSxcbiAgICAgICAgICAgICAgICBvbl9hcHByb3ZhbDogb3B0aW9ucy5vbkFwcHJvdmFsLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHR5cGU6ICdob3N0ZWRfdG9vbCcsXG4gICAgICAgICAgICBuYW1lOiAnaG9zdGVkX21jcCcsXG4gICAgICAgICAgICBwcm92aWRlckRhdGEsXG4gICAgICAgIH07XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICAvLyB0aGUgTUNQIHNlcnZlcnMgY29tYXB0aWJsZSB3aXRoIHRoZSBzcGVjaWZpY2F0aW9uXG4gICAgICAgIGNvbnN0IHByb3ZpZGVyRGF0YSA9IHR5cGVvZiBvcHRpb25zLnJlcXVpcmVBcHByb3ZhbCA9PT0gJ3VuZGVmaW5lZCcgfHxcbiAgICAgICAgICAgIG9wdGlvbnMucmVxdWlyZUFwcHJvdmFsID09PSAnbmV2ZXInXG4gICAgICAgICAgICA/IHtcbiAgICAgICAgICAgICAgICB0eXBlOiAnbWNwJyxcbiAgICAgICAgICAgICAgICBzZXJ2ZXJfbGFiZWw6IG9wdGlvbnMuc2VydmVyTGFiZWwsXG4gICAgICAgICAgICAgICAgcmVxdWlyZV9hcHByb3ZhbDogJ25ldmVyJyxcbiAgICAgICAgICAgICAgICBhbGxvd2VkX3Rvb2xzOiB0b01jcEFsbG93ZWRUb29sc0ZpbHRlcihvcHRpb25zLmFsbG93ZWRUb29scyksXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICA6IHtcbiAgICAgICAgICAgICAgICB0eXBlOiAnbWNwJyxcbiAgICAgICAgICAgICAgICBzZXJ2ZXJfbGFiZWw6IG9wdGlvbnMuc2VydmVyTGFiZWwsXG4gICAgICAgICAgICAgICAgYWxsb3dlZF90b29sczogdG9NY3BBbGxvd2VkVG9vbHNGaWx0ZXIob3B0aW9ucy5hbGxvd2VkVG9vbHMpLFxuICAgICAgICAgICAgICAgIHJlcXVpcmVfYXBwcm92YWw6IHR5cGVvZiBvcHRpb25zLnJlcXVpcmVBcHByb3ZhbCA9PT0gJ3N0cmluZydcbiAgICAgICAgICAgICAgICAgICAgPyAnYWx3YXlzJ1xuICAgICAgICAgICAgICAgICAgICA6IGJ1aWxkUmVxdWlyZUFwcHJvdmFsKG9wdGlvbnMucmVxdWlyZUFwcHJvdmFsKSxcbiAgICAgICAgICAgICAgICBvbl9hcHByb3ZhbDogb3B0aW9ucy5vbkFwcHJvdmFsLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHR5cGU6ICdob3N0ZWRfdG9vbCcsXG4gICAgICAgICAgICBuYW1lOiAnaG9zdGVkX21jcCcsXG4gICAgICAgICAgICBwcm92aWRlckRhdGEsXG4gICAgICAgIH07XG4gICAgfVxufVxuLyoqXG4gKiBUaGUgZGVmYXVsdCBmdW5jdGlvbiB0byBpbnZva2Ugd2hlbiBhbiBlcnJvciBvY2N1cnMgd2hpbGUgcnVubmluZyB0aGUgdG9vbC5cbiAqXG4gKiBBbHdheXMgcmV0dXJucyBgQW4gZXJyb3Igb2NjdXJyZWQgd2hpbGUgcnVubmluZyB0aGUgdG9vbC4gUGxlYXNlIHRyeSBhZ2Fpbi4gRXJyb3I6IDxlcnJvciBkZXRhaWxzPmBcbiAqXG4gKiBAcGFyYW0gY29udGV4dCBBbiBpbnN0YW5jZSBvZiB0aGUgY3VycmVudCBSdW5Db250ZXh0XG4gKiBAcGFyYW0gZXJyb3IgVGhlIGVycm9yIHRoYXQgb2NjdXJyZWRcbiAqL1xuZnVuY3Rpb24gZGVmYXVsdFRvb2xFcnJvckZ1bmN0aW9uKGNvbnRleHQsIGVycm9yKSB7XG4gICAgY29uc3QgZGV0YWlscyA9IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci50b1N0cmluZygpIDogU3RyaW5nKGVycm9yKTtcbiAgICByZXR1cm4gYEFuIGVycm9yIG9jY3VycmVkIHdoaWxlIHJ1bm5pbmcgdGhlIHRvb2wuIFBsZWFzZSB0cnkgYWdhaW4uIEVycm9yOiAke2RldGFpbHN9YDtcbn1cbi8qKlxuICogRXhwb3NlcyBhIGZ1bmN0aW9uIHRvIHRoZSBhZ2VudCBhcyBhIHRvb2wgdG8gYmUgY2FsbGVkXG4gKlxuICogQHBhcmFtIG9wdGlvbnMgVGhlIG9wdGlvbnMgZm9yIHRoZSB0b29sXG4gKiBAcmV0dXJucyBBIG5ldyB0b29sXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB0b29sKG9wdGlvbnMpIHtcbiAgICBjb25zdCBuYW1lID0gb3B0aW9ucy5uYW1lXG4gICAgICAgID8gdG9GdW5jdGlvblRvb2xOYW1lKG9wdGlvbnMubmFtZSlcbiAgICAgICAgOiB0b0Z1bmN0aW9uVG9vbE5hbWUob3B0aW9ucy5leGVjdXRlLm5hbWUpO1xuICAgIGNvbnN0IHRvb2xFcnJvckZ1bmN0aW9uID0gdHlwZW9mIG9wdGlvbnMuZXJyb3JGdW5jdGlvbiA9PT0gJ3VuZGVmaW5lZCdcbiAgICAgICAgPyBkZWZhdWx0VG9vbEVycm9yRnVuY3Rpb25cbiAgICAgICAgOiBvcHRpb25zLmVycm9yRnVuY3Rpb247XG4gICAgaWYgKCFuYW1lKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignVG9vbCBuYW1lIGNhbm5vdCBiZSBlbXB0eS4gRWl0aGVyIG5hbWUgeW91ciBmdW5jdGlvbiBvciBwcm92aWRlIGEgbmFtZSBpbiB0aGUgb3B0aW9ucy4nKTtcbiAgICB9XG4gICAgY29uc3Qgc3RyaWN0TW9kZSA9IG9wdGlvbnMuc3RyaWN0ID8/IHRydWU7XG4gICAgaWYgKCFzdHJpY3RNb2RlICYmIGlzWm9kT2JqZWN0KG9wdGlvbnMucGFyYW1ldGVycykpIHtcbiAgICAgICAgdGhyb3cgbmV3IFVzZXJFcnJvcignU3RyaWN0IG1vZGUgaXMgcmVxdWlyZWQgZm9yIFpvZCBwYXJhbWV0ZXJzJyk7XG4gICAgfVxuICAgIGNvbnN0IHsgcGFyc2VyLCBzY2hlbWE6IHBhcmFtZXRlcnMgfSA9IGdldFNjaGVtYUFuZFBhcnNlckZyb21JbnB1dFR5cGUob3B0aW9ucy5wYXJhbWV0ZXJzLCBuYW1lKTtcbiAgICBhc3luYyBmdW5jdGlvbiBfaW52b2tlKHJ1bkNvbnRleHQsIGlucHV0LCBkZXRhaWxzKSB7XG4gICAgICAgIGNvbnN0IFtlcnJvciwgcGFyc2VkXSA9IGF3YWl0IHNhZmVFeGVjdXRlKCgpID0+IHBhcnNlcihpbnB1dCkpO1xuICAgICAgICBpZiAoZXJyb3IgIT09IG51bGwpIHtcbiAgICAgICAgICAgIGlmIChsb2dnZXIuZG9udExvZ1Rvb2xEYXRhKSB7XG4gICAgICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKGBJbnZhbGlkIEpTT04gaW5wdXQgZm9yIHRvb2wgJHtuYW1lfWApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKGBJbnZhbGlkIEpTT04gaW5wdXQgZm9yIHRvb2wgJHtuYW1lfTogJHtpbnB1dH1gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRocm93IG5ldyBNb2RlbEJlaGF2aW9yRXJyb3IoJ0ludmFsaWQgSlNPTiBpbnB1dCBmb3IgdG9vbCcpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChsb2dnZXIuZG9udExvZ1Rvb2xEYXRhKSB7XG4gICAgICAgICAgICBsb2dnZXIuZGVidWcoYEludm9raW5nIHRvb2wgJHtuYW1lfWApO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKGBJbnZva2luZyB0b29sICR7bmFtZX0gd2l0aCBpbnB1dCAke2lucHV0fWApO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IG9wdGlvbnMuZXhlY3V0ZShwYXJzZWQsIHJ1bkNvbnRleHQsIGRldGFpbHMpO1xuICAgICAgICBjb25zdCBzdHJpbmdSZXN1bHQgPSB0b1NtYXJ0U3RyaW5nKHJlc3VsdCk7XG4gICAgICAgIGlmIChsb2dnZXIuZG9udExvZ1Rvb2xEYXRhKSB7XG4gICAgICAgICAgICBsb2dnZXIuZGVidWcoYFRvb2wgJHtuYW1lfSBjb21wbGV0ZWRgKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZyhgVG9vbCAke25hbWV9IHJldHVybmVkOiAke3N0cmluZ1Jlc3VsdH1gKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbiAgICBhc3luYyBmdW5jdGlvbiBpbnZva2UocnVuQ29udGV4dCwgaW5wdXQsIGRldGFpbHMpIHtcbiAgICAgICAgcmV0dXJuIF9pbnZva2UocnVuQ29udGV4dCwgaW5wdXQsIGRldGFpbHMpLmNhdGNoKChlcnJvcikgPT4ge1xuICAgICAgICAgICAgaWYgKHRvb2xFcnJvckZ1bmN0aW9uKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgY3VycmVudFNwYW4gPSBnZXRDdXJyZW50U3BhbigpO1xuICAgICAgICAgICAgICAgIGN1cnJlbnRTcGFuPy5zZXRFcnJvcih7XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdFcnJvciBydW5uaW5nIHRvb2wgKG5vbi1mYXRhbCknLFxuICAgICAgICAgICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0b29sX25hbWU6IG5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJvcjogZXJyb3IudG9TdHJpbmcoKSxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdG9vbEVycm9yRnVuY3Rpb24ocnVuQ29udGV4dCwgZXJyb3IpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBjb25zdCBuZWVkc0FwcHJvdmFsID0gdHlwZW9mIG9wdGlvbnMubmVlZHNBcHByb3ZhbCA9PT0gJ2Z1bmN0aW9uJ1xuICAgICAgICA/IG9wdGlvbnMubmVlZHNBcHByb3ZhbFxuICAgICAgICA6IGFzeW5jICgpID0+IHR5cGVvZiBvcHRpb25zLm5lZWRzQXBwcm92YWwgPT09ICdib29sZWFuJ1xuICAgICAgICAgICAgPyBvcHRpb25zLm5lZWRzQXBwcm92YWxcbiAgICAgICAgICAgIDogZmFsc2U7XG4gICAgY29uc3QgaXNFbmFibGVkID0gdHlwZW9mIG9wdGlvbnMuaXNFbmFibGVkID09PSAnZnVuY3Rpb24nXG4gICAgICAgID8gYXN5bmMgKHJ1bkNvbnRleHQsIGFnZW50KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBwcmVkaWNhdGUgPSBvcHRpb25zLmlzRW5hYmxlZDtcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHByZWRpY2F0ZSh7IHJ1bkNvbnRleHQsIGFnZW50IH0pO1xuICAgICAgICAgICAgcmV0dXJuIEJvb2xlYW4ocmVzdWx0KTtcbiAgICAgICAgfVxuICAgICAgICA6IGFzeW5jICgpID0+IHR5cGVvZiBvcHRpb25zLmlzRW5hYmxlZCA9PT0gJ2Jvb2xlYW4nID8gb3B0aW9ucy5pc0VuYWJsZWQgOiB0cnVlO1xuICAgIHJldHVybiB7XG4gICAgICAgIHR5cGU6ICdmdW5jdGlvbicsXG4gICAgICAgIG5hbWUsXG4gICAgICAgIGRlc2NyaXB0aW9uOiBvcHRpb25zLmRlc2NyaXB0aW9uLFxuICAgICAgICBwYXJhbWV0ZXJzLFxuICAgICAgICBzdHJpY3Q6IHN0cmljdE1vZGUsXG4gICAgICAgIGludm9rZSxcbiAgICAgICAgbmVlZHNBcHByb3ZhbCxcbiAgICAgICAgaXNFbmFibGVkLFxuICAgIH07XG59XG5mdW5jdGlvbiBidWlsZFJlcXVpcmVBcHByb3ZhbChyZXF1aXJlQXBwcm92YWwpIHtcbiAgICBjb25zdCByZXN1bHQgPSB7fTtcbiAgICBpZiAocmVxdWlyZUFwcHJvdmFsLmFsd2F5cykge1xuICAgICAgICByZXN1bHQuYWx3YXlzID0geyB0b29sX25hbWVzOiByZXF1aXJlQXBwcm92YWwuYWx3YXlzLnRvb2xOYW1lcyB9O1xuICAgIH1cbiAgICBpZiAocmVxdWlyZUFwcHJvdmFsLm5ldmVyKSB7XG4gICAgICAgIHJlc3VsdC5uZXZlciA9IHsgdG9vbF9uYW1lczogcmVxdWlyZUFwcHJvdmFsLm5ldmVyLnRvb2xOYW1lcyB9O1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xufVxuZnVuY3Rpb24gdG9NY3BBbGxvd2VkVG9vbHNGaWx0ZXIoYWxsb3dlZFRvb2xzKSB7XG4gICAgaWYgKHR5cGVvZiBhbGxvd2VkVG9vbHMgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGlmIChBcnJheS5pc0FycmF5KGFsbG93ZWRUb29scykpIHtcbiAgICAgICAgcmV0dXJuIHsgdG9vbF9uYW1lczogYWxsb3dlZFRvb2xzIH07XG4gICAgfVxuICAgIHJldHVybiB7IHRvb2xfbmFtZXM6IGFsbG93ZWRUb29scz8udG9vbE5hbWVzID8/IFtdIH07XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD10b29sLm1qcy5tYXAiLCJpbXBvcnQgeyB0b29sIH0gZnJvbSBcIi4vdG9vbC5tanNcIjtcbmltcG9ydCB7IFVzZXJFcnJvciB9IGZyb20gXCIuL2Vycm9ycy5tanNcIjtcbmltcG9ydCB7IE1DUFNlcnZlclN0ZGlvIGFzIFVuZGVybHlpbmdNQ1BTZXJ2ZXJTdGRpbywgTUNQU2VydmVyU3RyZWFtYWJsZUh0dHAgYXMgVW5kZXJseWluZ01DUFNlcnZlclN0cmVhbWFibGVIdHRwLCBNQ1BTZXJ2ZXJTU0UgYXMgVW5kZXJseWluZ01DUFNlcnZlclNTRSwgfSBmcm9tICdAb3BlbmFpL2FnZW50cy1jb3JlL19zaGltcyc7XG5pbXBvcnQgeyBnZXRDdXJyZW50U3BhbiwgZ2V0Q3VycmVudFRyYWNlLCB3aXRoTUNQTGlzdFRvb2xzU3BhbiwgfSBmcm9tIFwiLi90cmFjaW5nL2luZGV4Lm1qc1wiO1xuaW1wb3J0IHsgbG9nZ2VyIGFzIGdsb2JhbExvZ2dlciwgZ2V0TG9nZ2VyIH0gZnJvbSBcIi4vbG9nZ2VyLm1qc1wiO1xuaW1wb3J0IGRlYnVnIGZyb20gJ2RlYnVnJztcbmltcG9ydCB7IHogfSBmcm9tICd6b2QnO1xuZXhwb3J0IGNvbnN0IERFRkFVTFRfU1RESU9fTUNQX0NMSUVOVF9MT0dHRVJfTkFNRSA9ICdvcGVuYWktYWdlbnRzOnN0ZGlvLW1jcC1jbGllbnQnO1xuZXhwb3J0IGNvbnN0IERFRkFVTFRfU1RSRUFNQUJMRV9IVFRQX01DUF9DTElFTlRfTE9HR0VSX05BTUUgPSAnb3BlbmFpLWFnZW50czpzdHJlYW1hYmxlLWh0dHAtbWNwLWNsaWVudCc7XG5leHBvcnQgY29uc3QgREVGQVVMVF9TU0VfTUNQX0NMSUVOVF9MT0dHRVJfTkFNRSA9ICdvcGVuYWktYWdlbnRzOnNzZS1tY3AtY2xpZW50JztcbmV4cG9ydCBjbGFzcyBCYXNlTUNQU2VydmVyU3RkaW8ge1xuICAgIGNhY2hlVG9vbHNMaXN0O1xuICAgIF9jYWNoZWRUb29scyA9IHVuZGVmaW5lZDtcbiAgICB0b29sRmlsdGVyO1xuICAgIGxvZ2dlcjtcbiAgICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XG4gICAgICAgIHRoaXMubG9nZ2VyID1cbiAgICAgICAgICAgIG9wdGlvbnMubG9nZ2VyID8/IGdldExvZ2dlcihERUZBVUxUX1NURElPX01DUF9DTElFTlRfTE9HR0VSX05BTUUpO1xuICAgICAgICB0aGlzLmNhY2hlVG9vbHNMaXN0ID0gb3B0aW9ucy5jYWNoZVRvb2xzTGlzdCA/PyBmYWxzZTtcbiAgICAgICAgdGhpcy50b29sRmlsdGVyID0gb3B0aW9ucy50b29sRmlsdGVyO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBMb2dzIGEgZGVidWcgbWVzc2FnZSB3aGVuIGRlYnVnIGxvZ2dpbmcgaXMgZW5hYmxlZC5cbiAgICAgKiBAcGFyYW0gYnVpbGRNZXNzYWdlIEEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIHRoZSBtZXNzYWdlIHRvIGxvZy5cbiAgICAgKi9cbiAgICBkZWJ1Z0xvZyhidWlsZE1lc3NhZ2UpIHtcbiAgICAgICAgaWYgKGRlYnVnLmVuYWJsZWQodGhpcy5sb2dnZXIubmFtZXNwYWNlKSkge1xuICAgICAgICAgICAgLy8gb25seSB3aGVuIHRoaXMgaXMgdHJ1ZSwgdGhlIGZ1bmN0aW9uIHRvIGJ1aWxkIHRoZSBzdHJpbmcgaXMgY2FsbGVkXG4gICAgICAgICAgICB0aGlzLmxvZ2dlci5kZWJ1ZyhidWlsZE1lc3NhZ2UoKSk7XG4gICAgICAgIH1cbiAgICB9XG59XG5leHBvcnQgY2xhc3MgQmFzZU1DUFNlcnZlclN0cmVhbWFibGVIdHRwIHtcbiAgICBjYWNoZVRvb2xzTGlzdDtcbiAgICBfY2FjaGVkVG9vbHMgPSB1bmRlZmluZWQ7XG4gICAgdG9vbEZpbHRlcjtcbiAgICBsb2dnZXI7XG4gICAgY29uc3RydWN0b3Iob3B0aW9ucykge1xuICAgICAgICB0aGlzLmxvZ2dlciA9XG4gICAgICAgICAgICBvcHRpb25zLmxvZ2dlciA/P1xuICAgICAgICAgICAgICAgIGdldExvZ2dlcihERUZBVUxUX1NUUkVBTUFCTEVfSFRUUF9NQ1BfQ0xJRU5UX0xPR0dFUl9OQU1FKTtcbiAgICAgICAgdGhpcy5jYWNoZVRvb2xzTGlzdCA9IG9wdGlvbnMuY2FjaGVUb29sc0xpc3QgPz8gZmFsc2U7XG4gICAgICAgIHRoaXMudG9vbEZpbHRlciA9IG9wdGlvbnMudG9vbEZpbHRlcjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTG9ncyBhIGRlYnVnIG1lc3NhZ2Ugd2hlbiBkZWJ1ZyBsb2dnaW5nIGlzIGVuYWJsZWQuXG4gICAgICogQHBhcmFtIGJ1aWxkTWVzc2FnZSBBIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyB0aGUgbWVzc2FnZSB0byBsb2cuXG4gICAgICovXG4gICAgZGVidWdMb2coYnVpbGRNZXNzYWdlKSB7XG4gICAgICAgIGlmIChkZWJ1Zy5lbmFibGVkKHRoaXMubG9nZ2VyLm5hbWVzcGFjZSkpIHtcbiAgICAgICAgICAgIC8vIG9ubHkgd2hlbiB0aGlzIGlzIHRydWUsIHRoZSBmdW5jdGlvbiB0byBidWlsZCB0aGUgc3RyaW5nIGlzIGNhbGxlZFxuICAgICAgICAgICAgdGhpcy5sb2dnZXIuZGVidWcoYnVpbGRNZXNzYWdlKCkpO1xuICAgICAgICB9XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIEJhc2VNQ1BTZXJ2ZXJTU0Uge1xuICAgIGNhY2hlVG9vbHNMaXN0O1xuICAgIF9jYWNoZWRUb29scyA9IHVuZGVmaW5lZDtcbiAgICB0b29sRmlsdGVyO1xuICAgIGxvZ2dlcjtcbiAgICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XG4gICAgICAgIHRoaXMubG9nZ2VyID1cbiAgICAgICAgICAgIG9wdGlvbnMubG9nZ2VyID8/IGdldExvZ2dlcihERUZBVUxUX1NTRV9NQ1BfQ0xJRU5UX0xPR0dFUl9OQU1FKTtcbiAgICAgICAgdGhpcy5jYWNoZVRvb2xzTGlzdCA9IG9wdGlvbnMuY2FjaGVUb29sc0xpc3QgPz8gZmFsc2U7XG4gICAgICAgIHRoaXMudG9vbEZpbHRlciA9IG9wdGlvbnMudG9vbEZpbHRlcjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTG9ncyBhIGRlYnVnIG1lc3NhZ2Ugd2hlbiBkZWJ1ZyBsb2dnaW5nIGlzIGVuYWJsZWQuXG4gICAgICogQHBhcmFtIGJ1aWxkTWVzc2FnZSBBIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyB0aGUgbWVzc2FnZSB0byBsb2cuXG4gICAgICovXG4gICAgZGVidWdMb2coYnVpbGRNZXNzYWdlKSB7XG4gICAgICAgIGlmIChkZWJ1Zy5lbmFibGVkKHRoaXMubG9nZ2VyLm5hbWVzcGFjZSkpIHtcbiAgICAgICAgICAgIC8vIG9ubHkgd2hlbiB0aGlzIGlzIHRydWUsIHRoZSBmdW5jdGlvbiB0byBidWlsZCB0aGUgc3RyaW5nIGlzIGNhbGxlZFxuICAgICAgICAgICAgdGhpcy5sb2dnZXIuZGVidWcoYnVpbGRNZXNzYWdlKCkpO1xuICAgICAgICB9XG4gICAgfVxufVxuLyoqXG4gKiBNaW5pbXVtIE1DUCB0b29sIGRhdGEgZGVmaW5pdGlvbi5cbiAqIFRoaXMgdHlwZSBkZWZpbml0aW9uIGRvZXMgbm90IGludGVuZCB0byBjb3ZlciBhbGwgcG9zc2libGUgcHJvcGVydGllcy5cbiAqIEl0IHN1cHBvcnRzIHRoZSBwcm9wZXJ0aWVzIHRoYXQgYXJlIHVzZWQgaW4gdGhpcyBTREsuXG4gKi9cbmV4cG9ydCBjb25zdCBNQ1BUb29sID0gei5vYmplY3Qoe1xuICAgIG5hbWU6IHouc3RyaW5nKCksXG4gICAgZGVzY3JpcHRpb246IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICBpbnB1dFNjaGVtYTogei5vYmplY3Qoe1xuICAgICAgICB0eXBlOiB6LmxpdGVyYWwoJ29iamVjdCcpLFxuICAgICAgICBwcm9wZXJ0aWVzOiB6LnJlY29yZCh6LnN0cmluZygpLCB6LmFueSgpKSxcbiAgICAgICAgcmVxdWlyZWQ6IHouYXJyYXkoei5zdHJpbmcoKSksXG4gICAgICAgIGFkZGl0aW9uYWxQcm9wZXJ0aWVzOiB6LmJvb2xlYW4oKSxcbiAgICB9KSxcbn0pO1xuLyoqXG4gKiBQdWJsaWMgaW50ZXJmYWNlIG9mIGFuIE1DUCBzZXJ2ZXIgdGhhdCBwcm92aWRlcyB0b29scy5cbiAqIFlvdSBjYW4gdXNlIHRoaXMgY2xhc3MgdG8gcGFzcyBNQ1Agc2VydmVyIHNldHRpbmdzIHRvIHlvdXIgYWdlbnQuXG4gKi9cbmV4cG9ydCBjbGFzcyBNQ1BTZXJ2ZXJTdGRpbyBleHRlbmRzIEJhc2VNQ1BTZXJ2ZXJTdGRpbyB7XG4gICAgdW5kZXJseWluZztcbiAgICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XG4gICAgICAgIHN1cGVyKG9wdGlvbnMpO1xuICAgICAgICB0aGlzLnVuZGVybHlpbmcgPSBuZXcgVW5kZXJseWluZ01DUFNlcnZlclN0ZGlvKG9wdGlvbnMpO1xuICAgIH1cbiAgICBnZXQgbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudW5kZXJseWluZy5uYW1lO1xuICAgIH1cbiAgICBjb25uZWN0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy51bmRlcmx5aW5nLmNvbm5lY3QoKTtcbiAgICB9XG4gICAgY2xvc2UoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnVuZGVybHlpbmcuY2xvc2UoKTtcbiAgICB9XG4gICAgYXN5bmMgbGlzdFRvb2xzKCkge1xuICAgICAgICBpZiAodGhpcy5jYWNoZVRvb2xzTGlzdCAmJiB0aGlzLl9jYWNoZWRUb29scykge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2NhY2hlZFRvb2xzO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHRvb2xzID0gYXdhaXQgdGhpcy51bmRlcmx5aW5nLmxpc3RUb29scygpO1xuICAgICAgICBpZiAodGhpcy5jYWNoZVRvb2xzTGlzdCkge1xuICAgICAgICAgICAgdGhpcy5fY2FjaGVkVG9vbHMgPSB0b29scztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdG9vbHM7XG4gICAgfVxuICAgIGNhbGxUb29sKHRvb2xOYW1lLCBhcmdzKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnVuZGVybHlpbmcuY2FsbFRvb2wodG9vbE5hbWUsIGFyZ3MpO1xuICAgIH1cbiAgICBpbnZhbGlkYXRlVG9vbHNDYWNoZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudW5kZXJseWluZy5pbnZhbGlkYXRlVG9vbHNDYWNoZSgpO1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBNQ1BTZXJ2ZXJTdHJlYW1hYmxlSHR0cCBleHRlbmRzIEJhc2VNQ1BTZXJ2ZXJTdHJlYW1hYmxlSHR0cCB7XG4gICAgdW5kZXJseWluZztcbiAgICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XG4gICAgICAgIHN1cGVyKG9wdGlvbnMpO1xuICAgICAgICB0aGlzLnVuZGVybHlpbmcgPSBuZXcgVW5kZXJseWluZ01DUFNlcnZlclN0cmVhbWFibGVIdHRwKG9wdGlvbnMpO1xuICAgIH1cbiAgICBnZXQgbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudW5kZXJseWluZy5uYW1lO1xuICAgIH1cbiAgICBjb25uZWN0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy51bmRlcmx5aW5nLmNvbm5lY3QoKTtcbiAgICB9XG4gICAgY2xvc2UoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnVuZGVybHlpbmcuY2xvc2UoKTtcbiAgICB9XG4gICAgYXN5bmMgbGlzdFRvb2xzKCkge1xuICAgICAgICBpZiAodGhpcy5jYWNoZVRvb2xzTGlzdCAmJiB0aGlzLl9jYWNoZWRUb29scykge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2NhY2hlZFRvb2xzO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHRvb2xzID0gYXdhaXQgdGhpcy51bmRlcmx5aW5nLmxpc3RUb29scygpO1xuICAgICAgICBpZiAodGhpcy5jYWNoZVRvb2xzTGlzdCkge1xuICAgICAgICAgICAgdGhpcy5fY2FjaGVkVG9vbHMgPSB0b29scztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdG9vbHM7XG4gICAgfVxuICAgIGNhbGxUb29sKHRvb2xOYW1lLCBhcmdzKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnVuZGVybHlpbmcuY2FsbFRvb2wodG9vbE5hbWUsIGFyZ3MpO1xuICAgIH1cbiAgICBpbnZhbGlkYXRlVG9vbHNDYWNoZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudW5kZXJseWluZy5pbnZhbGlkYXRlVG9vbHNDYWNoZSgpO1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBNQ1BTZXJ2ZXJTU0UgZXh0ZW5kcyBCYXNlTUNQU2VydmVyU1NFIHtcbiAgICB1bmRlcmx5aW5nO1xuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcbiAgICAgICAgc3VwZXIob3B0aW9ucyk7XG4gICAgICAgIHRoaXMudW5kZXJseWluZyA9IG5ldyBVbmRlcmx5aW5nTUNQU2VydmVyU1NFKG9wdGlvbnMpO1xuICAgIH1cbiAgICBnZXQgbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudW5kZXJseWluZy5uYW1lO1xuICAgIH1cbiAgICBjb25uZWN0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy51bmRlcmx5aW5nLmNvbm5lY3QoKTtcbiAgICB9XG4gICAgY2xvc2UoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnVuZGVybHlpbmcuY2xvc2UoKTtcbiAgICB9XG4gICAgYXN5bmMgbGlzdFRvb2xzKCkge1xuICAgICAgICBpZiAodGhpcy5jYWNoZVRvb2xzTGlzdCAmJiB0aGlzLl9jYWNoZWRUb29scykge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2NhY2hlZFRvb2xzO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHRvb2xzID0gYXdhaXQgdGhpcy51bmRlcmx5aW5nLmxpc3RUb29scygpO1xuICAgICAgICBpZiAodGhpcy5jYWNoZVRvb2xzTGlzdCkge1xuICAgICAgICAgICAgdGhpcy5fY2FjaGVkVG9vbHMgPSB0b29scztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdG9vbHM7XG4gICAgfVxuICAgIGNhbGxUb29sKHRvb2xOYW1lLCBhcmdzKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnVuZGVybHlpbmcuY2FsbFRvb2wodG9vbE5hbWUsIGFyZ3MpO1xuICAgIH1cbiAgICBpbnZhbGlkYXRlVG9vbHNDYWNoZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudW5kZXJseWluZy5pbnZhbGlkYXRlVG9vbHNDYWNoZSgpO1xuICAgIH1cbn1cbi8qKlxuICogRmV0Y2hlcyBhbmQgZmxhdHRlbnMgYWxsIHRvb2xzIGZyb20gbXVsdGlwbGUgTUNQIHNlcnZlcnMuXG4gKiBMb2dzIGFuZCBza2lwcyBhbnkgc2VydmVycyB0aGF0IGZhaWwgdG8gcmVzcG9uZC5cbiAqL1xuY29uc3QgX2NhY2hlZFRvb2xzID0ge307XG5jb25zdCBfY2FjaGVkVG9vbEtleXNCeVNlcnZlciA9IHt9O1xuLyoqXG4gKiBSZW1vdmUgY2FjaGVkIHRvb2xzIGZvciB0aGUgZ2l2ZW4gc2VydmVyIHNvIHRoZSBuZXh0IGxvb2t1cCBmZXRjaGVzIGZyZXNoIGRhdGEuXG4gKlxuICogQHBhcmFtIHNlcnZlck5hbWUgLSBOYW1lIG9mIHRoZSBNQ1Agc2VydmVyIHdob3NlIGNhY2hlIHNob3VsZCBiZSBjbGVhcmVkLlxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gaW52YWxpZGF0ZVNlcnZlclRvb2xzQ2FjaGUoc2VydmVyTmFtZSkge1xuICAgIGNvbnN0IGNhY2hlZEtleXMgPSBfY2FjaGVkVG9vbEtleXNCeVNlcnZlcltzZXJ2ZXJOYW1lXTtcbiAgICBpZiAoY2FjaGVkS2V5cykge1xuICAgICAgICBmb3IgKGNvbnN0IGNhY2hlS2V5IG9mIGNhY2hlZEtleXMpIHtcbiAgICAgICAgICAgIGRlbGV0ZSBfY2FjaGVkVG9vbHNbY2FjaGVLZXldO1xuICAgICAgICB9XG4gICAgICAgIGRlbGV0ZSBfY2FjaGVkVG9vbEtleXNCeVNlcnZlcltzZXJ2ZXJOYW1lXTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBkZWxldGUgX2NhY2hlZFRvb2xzW3NlcnZlck5hbWVdO1xuICAgIGZvciAoY29uc3QgY2FjaGVLZXkgb2YgT2JqZWN0LmtleXMoX2NhY2hlZFRvb2xzKSkge1xuICAgICAgICBpZiAoY2FjaGVLZXkuc3RhcnRzV2l0aChgJHtzZXJ2ZXJOYW1lfTpgKSkge1xuICAgICAgICAgICAgZGVsZXRlIF9jYWNoZWRUb29sc1tjYWNoZUtleV07XG4gICAgICAgIH1cbiAgICB9XG59XG4vKipcbiAqIERlZmF1bHQgY2FjaGUga2V5IGdlbmVyYXRvciBmb3IgTUNQIHRvb2xzLlxuICogVXNlcyBzZXJ2ZXIgbmFtZSwgb3Igc2VydmVyK2FnZW50IGlmIHVzaW5nIGNhbGxhYmxlIGZpbHRlci5cbiAqL1xuZXhwb3J0IGNvbnN0IGRlZmF1bHRNQ1BUb29sQ2FjaGVLZXkgPSAoeyBzZXJ2ZXIsIGFnZW50LCB9KSA9PiB7XG4gICAgaWYgKHNlcnZlci50b29sRmlsdGVyICYmIHR5cGVvZiBzZXJ2ZXIudG9vbEZpbHRlciA9PT0gJ2Z1bmN0aW9uJyAmJiBhZ2VudCkge1xuICAgICAgICByZXR1cm4gYCR7c2VydmVyLm5hbWV9OiR7YWdlbnQubmFtZX1gO1xuICAgIH1cbiAgICByZXR1cm4gc2VydmVyLm5hbWU7XG59O1xuLyoqXG4gKiBGZXRjaGVzIGFsbCBmdW5jdGlvbiB0b29scyBmcm9tIGEgc2luZ2xlIE1DUCBzZXJ2ZXIuXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIGdldEZ1bmN0aW9uVG9vbHNGcm9tU2VydmVyKHsgc2VydmVyLCBjb252ZXJ0U2NoZW1hc1RvU3RyaWN0LCBydW5Db250ZXh0LCBhZ2VudCwgZ2VuZXJhdGVNQ1BUb29sQ2FjaGVLZXksIH0pIHtcbiAgICBjb25zdCBjYWNoZUtleSA9IChnZW5lcmF0ZU1DUFRvb2xDYWNoZUtleSB8fCBkZWZhdWx0TUNQVG9vbENhY2hlS2V5KSh7XG4gICAgICAgIHNlcnZlcixcbiAgICAgICAgYWdlbnQsXG4gICAgICAgIHJ1bkNvbnRleHQsXG4gICAgfSk7XG4gICAgLy8gVXNlIGNhY2hlIGtleSBnZW5lcmF0b3IgaW5qZWN0ZWQgZnJvbSB0aGUgb3V0c2lkZSwgb3IgdGhlIGRlZmF1bHQgaWYgYWJzZW50LlxuICAgIGlmIChzZXJ2ZXIuY2FjaGVUb29sc0xpc3QgJiYgX2NhY2hlZFRvb2xzW2NhY2hlS2V5XSkge1xuICAgICAgICByZXR1cm4gX2NhY2hlZFRvb2xzW2NhY2hlS2V5XS5tYXAoKHQpID0+IG1jcFRvRnVuY3Rpb25Ub29sKHQsIHNlcnZlciwgY29udmVydFNjaGVtYXNUb1N0cmljdCkpO1xuICAgIH1cbiAgICBjb25zdCBsaXN0VG9vbHNGb3JTZXJ2ZXIgPSBhc3luYyAoc3BhbikgPT4ge1xuICAgICAgICBjb25zdCBmZXRjaGVkTWNwVG9vbHMgPSBhd2FpdCBzZXJ2ZXIubGlzdFRvb2xzKCk7XG4gICAgICAgIGxldCBtY3BUb29scyA9IGZldGNoZWRNY3BUb29scztcbiAgICAgICAgaWYgKHJ1bkNvbnRleHQgJiYgYWdlbnQpIHtcbiAgICAgICAgICAgIGNvbnN0IGNvbnRleHQgPSB7IHJ1bkNvbnRleHQsIGFnZW50LCBzZXJ2ZXJOYW1lOiBzZXJ2ZXIubmFtZSB9O1xuICAgICAgICAgICAgY29uc3QgZmlsdGVyZWRUb29scyA9IFtdO1xuICAgICAgICAgICAgZm9yIChjb25zdCB0b29sIG9mIGZldGNoZWRNY3BUb29scykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGZpbHRlciA9IHNlcnZlci50b29sRmlsdGVyO1xuICAgICAgICAgICAgICAgIGlmIChmaWx0ZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBmaWx0ZXIgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGZpbHRlcmVkID0gYXdhaXQgZmlsdGVyKGNvbnRleHQsIHRvb2wpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFmaWx0ZXJlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdsb2JhbExvZ2dlci5kZWJ1ZyhgTUNQIFRvb2wgKHNlcnZlcjogJHtzZXJ2ZXIubmFtZX0sIHRvb2w6ICR7dG9vbC5uYW1lfSkgaXMgYmxvY2tlZCBieSB0aGUgY2FsbGFibGUgZmlsdGVyLmApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYWxsb3dlZFRvb2xOYW1lcyA9IGZpbHRlci5hbGxvd2VkVG9vbE5hbWVzID8/IFtdO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYmxvY2tlZFRvb2xOYW1lcyA9IGZpbHRlci5ibG9ja2VkVG9vbE5hbWVzID8/IFtdO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGFsbG93ZWRUb29sTmFtZXMubGVuZ3RoID4gMCB8fCBibG9ja2VkVG9vbE5hbWVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBhbGxvd2VkID0gYWxsb3dlZFRvb2xOYW1lcy5sZW5ndGggPiAwXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gYWxsb3dlZFRvb2xOYW1lcy5pbmNsdWRlcyh0b29sLm5hbWUpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBibG9ja2VkID0gYmxvY2tlZFRvb2xOYW1lcy5sZW5ndGggPiAwXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gYmxvY2tlZFRvb2xOYW1lcy5pbmNsdWRlcyh0b29sLm5hbWUpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFhbGxvd2VkIHx8IGJsb2NrZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGJsb2NrZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdsb2JhbExvZ2dlci5kZWJ1ZyhgTUNQIFRvb2wgKHNlcnZlcjogJHtzZXJ2ZXIubmFtZX0sIHRvb2w6ICR7dG9vbC5uYW1lfSkgaXMgYmxvY2tlZCBieSB0aGUgc3RhdGljIGZpbHRlci5gKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICghYWxsb3dlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2xvYmFsTG9nZ2VyLmRlYnVnKGBNQ1AgVG9vbCAoc2VydmVyOiAke3NlcnZlci5uYW1lfSwgdG9vbDogJHt0b29sLm5hbWV9KSBpcyBub3QgYWxsb3dlZCBieSB0aGUgc3RhdGljIGZpbHRlci5gKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZmlsdGVyZWRUb29scy5wdXNoKHRvb2wpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbWNwVG9vbHMgPSBmaWx0ZXJlZFRvb2xzO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzcGFuKSB7XG4gICAgICAgICAgICBzcGFuLnNwYW5EYXRhLnJlc3VsdCA9IG1jcFRvb2xzLm1hcCgodCkgPT4gdC5uYW1lKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB0b29scyA9IG1jcFRvb2xzLm1hcCgodCkgPT4gbWNwVG9GdW5jdGlvblRvb2wodCwgc2VydmVyLCBjb252ZXJ0U2NoZW1hc1RvU3RyaWN0KSk7XG4gICAgICAgIC8vIENhY2hlIHN0b3JlXG4gICAgICAgIGlmIChzZXJ2ZXIuY2FjaGVUb29sc0xpc3QpIHtcbiAgICAgICAgICAgIF9jYWNoZWRUb29sc1tjYWNoZUtleV0gPSBtY3BUb29scztcbiAgICAgICAgICAgIGlmICghX2NhY2hlZFRvb2xLZXlzQnlTZXJ2ZXJbc2VydmVyLm5hbWVdKSB7XG4gICAgICAgICAgICAgICAgX2NhY2hlZFRvb2xLZXlzQnlTZXJ2ZXJbc2VydmVyLm5hbWVdID0gbmV3IFNldCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgX2NhY2hlZFRvb2xLZXlzQnlTZXJ2ZXJbc2VydmVyLm5hbWVdLmFkZChjYWNoZUtleSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRvb2xzO1xuICAgIH07XG4gICAgaWYgKCFnZXRDdXJyZW50VHJhY2UoKSkge1xuICAgICAgICByZXR1cm4gbGlzdFRvb2xzRm9yU2VydmVyKCk7XG4gICAgfVxuICAgIHJldHVybiB3aXRoTUNQTGlzdFRvb2xzU3BhbihsaXN0VG9vbHNGb3JTZXJ2ZXIsIHtcbiAgICAgICAgZGF0YTogeyBzZXJ2ZXI6IHNlcnZlci5uYW1lIH0sXG4gICAgfSk7XG59XG4vKipcbiAqIFJldHVybnMgYWxsIE1DUCB0b29scyBmcm9tIHRoZSBwcm92aWRlZCBzZXJ2ZXJzLCB1c2luZyB0aGUgZnVuY3Rpb24gdG9vbCBjb252ZXJzaW9uLlxuICogSWYgcnVuQ29udGV4dCBhbmQgYWdlbnQgYXJlIHByb3ZpZGVkLCBjYWxsYWJsZSB0b29sIGZpbHRlcnMgd2lsbCBiZSBhcHBsaWVkLlxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0QWxsTWNwVG9vbHMobWNwU2VydmVyc09yT3B0cywgcnVuQ29udGV4dCwgYWdlbnQsIGNvbnZlcnRTY2hlbWFzVG9TdHJpY3QgPSBmYWxzZSkge1xuICAgIGNvbnN0IG9wdHMgPSBBcnJheS5pc0FycmF5KG1jcFNlcnZlcnNPck9wdHMpXG4gICAgICAgID8ge1xuICAgICAgICAgICAgbWNwU2VydmVyczogbWNwU2VydmVyc09yT3B0cyxcbiAgICAgICAgICAgIHJ1bkNvbnRleHQsXG4gICAgICAgICAgICBhZ2VudCxcbiAgICAgICAgICAgIGNvbnZlcnRTY2hlbWFzVG9TdHJpY3QsXG4gICAgICAgIH1cbiAgICAgICAgOiBtY3BTZXJ2ZXJzT3JPcHRzO1xuICAgIGNvbnN0IHsgbWNwU2VydmVycywgY29udmVydFNjaGVtYXNUb1N0cmljdDogY29udmVydFNjaGVtYXNUb1N0cmljdEZyb21PcHRzID0gZmFsc2UsIHJ1bkNvbnRleHQ6IHJ1bkNvbnRleHRGcm9tT3B0cywgYWdlbnQ6IGFnZW50RnJvbU9wdHMsIGdlbmVyYXRlTUNQVG9vbENhY2hlS2V5LCB9ID0gb3B0cztcbiAgICBjb25zdCBhbGxUb29scyA9IFtdO1xuICAgIGNvbnN0IHRvb2xOYW1lcyA9IG5ldyBTZXQoKTtcbiAgICBmb3IgKGNvbnN0IHNlcnZlciBvZiBtY3BTZXJ2ZXJzKSB7XG4gICAgICAgIGNvbnN0IHNlcnZlclRvb2xzID0gYXdhaXQgZ2V0RnVuY3Rpb25Ub29sc0Zyb21TZXJ2ZXIoe1xuICAgICAgICAgICAgc2VydmVyLFxuICAgICAgICAgICAgY29udmVydFNjaGVtYXNUb1N0cmljdDogY29udmVydFNjaGVtYXNUb1N0cmljdEZyb21PcHRzLFxuICAgICAgICAgICAgcnVuQ29udGV4dDogcnVuQ29udGV4dEZyb21PcHRzLFxuICAgICAgICAgICAgYWdlbnQ6IGFnZW50RnJvbU9wdHMsXG4gICAgICAgICAgICBnZW5lcmF0ZU1DUFRvb2xDYWNoZUtleSxcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IHNlcnZlclRvb2xOYW1lcyA9IG5ldyBTZXQoc2VydmVyVG9vbHMubWFwKCh0KSA9PiB0Lm5hbWUpKTtcbiAgICAgICAgY29uc3QgaW50ZXJzZWN0aW9uID0gWy4uLnNlcnZlclRvb2xOYW1lc10uZmlsdGVyKChuKSA9PiB0b29sTmFtZXMuaGFzKG4pKTtcbiAgICAgICAgaWYgKGludGVyc2VjdGlvbi5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVXNlckVycm9yKGBEdXBsaWNhdGUgdG9vbCBuYW1lcyBmb3VuZCBhY3Jvc3MgTUNQIHNlcnZlcnM6ICR7aW50ZXJzZWN0aW9uLmpvaW4oJywgJyl9YCk7XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChjb25zdCB0IG9mIHNlcnZlclRvb2xzKSB7XG4gICAgICAgICAgICB0b29sTmFtZXMuYWRkKHQubmFtZSk7XG4gICAgICAgICAgICBhbGxUb29scy5wdXNoKHQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBhbGxUb29scztcbn1cbi8qKlxuICogQ29udmVydHMgYW4gTUNQIHRvb2wgZGVmaW5pdGlvbiB0byBhIGZ1bmN0aW9uIHRvb2wgZm9yIHRoZSBBZ2VudHMgU0RLLlxuICovXG5leHBvcnQgZnVuY3Rpb24gbWNwVG9GdW5jdGlvblRvb2wobWNwVG9vbCwgc2VydmVyLCBjb252ZXJ0U2NoZW1hc1RvU3RyaWN0KSB7XG4gICAgYXN5bmMgZnVuY3Rpb24gaW52b2tlKGlucHV0LCBfY29udGV4dCkge1xuICAgICAgICBsZXQgYXJncyA9IHt9O1xuICAgICAgICBpZiAodHlwZW9mIGlucHV0ID09PSAnc3RyaW5nJyAmJiBpbnB1dCkge1xuICAgICAgICAgICAgYXJncyA9IEpTT04ucGFyc2UoaW5wdXQpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHR5cGVvZiBpbnB1dCA9PT0gJ29iamVjdCcgJiYgaW5wdXQgIT0gbnVsbCkge1xuICAgICAgICAgICAgYXJncyA9IGlucHV0O1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGN1cnJlbnRTcGFuID0gZ2V0Q3VycmVudFNwYW4oKTtcbiAgICAgICAgaWYgKGN1cnJlbnRTcGFuKSB7XG4gICAgICAgICAgICBjdXJyZW50U3Bhbi5zcGFuRGF0YVsnbWNwX2RhdGEnXSA9IHsgc2VydmVyOiBzZXJ2ZXIubmFtZSB9O1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGNvbnRlbnQgPSBhd2FpdCBzZXJ2ZXIuY2FsbFRvb2wobWNwVG9vbC5uYW1lLCBhcmdzKTtcbiAgICAgICAgcmV0dXJuIGNvbnRlbnQubGVuZ3RoID09PSAxID8gY29udGVudFswXSA6IGNvbnRlbnQ7XG4gICAgfVxuICAgIGNvbnN0IHNjaGVtYSA9IHtcbiAgICAgICAgLi4ubWNwVG9vbC5pbnB1dFNjaGVtYSxcbiAgICAgICAgdHlwZTogbWNwVG9vbC5pbnB1dFNjaGVtYT8udHlwZSA/PyAnb2JqZWN0JyxcbiAgICAgICAgcHJvcGVydGllczogbWNwVG9vbC5pbnB1dFNjaGVtYT8ucHJvcGVydGllcyA/PyB7fSxcbiAgICAgICAgcmVxdWlyZWQ6IG1jcFRvb2wuaW5wdXRTY2hlbWE/LnJlcXVpcmVkID8/IFtdLFxuICAgICAgICBhZGRpdGlvbmFsUHJvcGVydGllczogbWNwVG9vbC5pbnB1dFNjaGVtYT8uYWRkaXRpb25hbFByb3BlcnRpZXMgPz8gZmFsc2UsXG4gICAgfTtcbiAgICBpZiAoY29udmVydFNjaGVtYXNUb1N0cmljdCB8fCBzY2hlbWEuYWRkaXRpb25hbFByb3BlcnRpZXMgPT09IHRydWUpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHN0cmljdFNjaGVtYSA9IGVuc3VyZVN0cmljdEpzb25TY2hlbWEoc2NoZW1hKTtcbiAgICAgICAgICAgIHJldHVybiB0b29sKHtcbiAgICAgICAgICAgICAgICBuYW1lOiBtY3BUb29sLm5hbWUsXG4gICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IG1jcFRvb2wuZGVzY3JpcHRpb24gfHwgJycsXG4gICAgICAgICAgICAgICAgcGFyYW1ldGVyczogc3RyaWN0U2NoZW1hLFxuICAgICAgICAgICAgICAgIHN0cmljdDogdHJ1ZSxcbiAgICAgICAgICAgICAgICBleGVjdXRlOiBpbnZva2UsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgZ2xvYmFsTG9nZ2VyLndhcm4oYEVycm9yIGNvbnZlcnRpbmcgTUNQIHNjaGVtYSB0byBzdHJpY3QgbW9kZTogJHtlfWApO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNvbnN0IG5vblN0cmljdFNjaGVtYSA9IHtcbiAgICAgICAgLi4uc2NoZW1hLFxuICAgICAgICBhZGRpdGlvbmFsUHJvcGVydGllczogdHJ1ZSxcbiAgICB9O1xuICAgIHJldHVybiB0b29sKHtcbiAgICAgICAgbmFtZTogbWNwVG9vbC5uYW1lLFxuICAgICAgICBkZXNjcmlwdGlvbjogbWNwVG9vbC5kZXNjcmlwdGlvbiB8fCAnJyxcbiAgICAgICAgcGFyYW1ldGVyczogbm9uU3RyaWN0U2NoZW1hLFxuICAgICAgICBzdHJpY3Q6IGZhbHNlLFxuICAgICAgICBleGVjdXRlOiBpbnZva2UsXG4gICAgfSk7XG59XG4vKipcbiAqIEVuc3VyZXMgdGhlIGdpdmVuIEpTT04gc2NoZW1hIGlzIHN0cmljdCAobm8gYWRkaXRpb25hbCBwcm9wZXJ0aWVzLCByZXF1aXJlZCBmaWVsZHMgc2V0KS5cbiAqL1xuZnVuY3Rpb24gZW5zdXJlU3RyaWN0SnNvblNjaGVtYShzY2hlbWEpIHtcbiAgICBjb25zdCBvdXQgPSB7XG4gICAgICAgIC4uLnNjaGVtYSxcbiAgICAgICAgYWRkaXRpb25hbFByb3BlcnRpZXM6IGZhbHNlLFxuICAgIH07XG4gICAgaWYgKCFvdXQucmVxdWlyZWQpXG4gICAgICAgIG91dC5yZXF1aXJlZCA9IFtdO1xuICAgIHJldHVybiBvdXQ7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1tY3AubWpzLm1hcCIsIi8vLyA8cmVmZXJlbmNlIGxpYj1cImRvbVwiIC8+XG4vLyBVc2UgZnVuY3Rpb24gaW5zdGVhZCBvZiBleHBvcnRpbmcgdGhlIHZhbHVlIHRvIHByZXZlbnRcbi8vIGNpcmN1bGFyIGRlcGVuZGVuY3kgcmVzb2x1dGlvbiBpc3N1ZXMgY2F1c2VkIGJ5IG90aGVyIGV4cG9ydHMgaW4gJ0BvcGVuYWkvYWdlbnRzLWNvcmUvX3NoaW1zJ1xuZXhwb3J0IGZ1bmN0aW9uIGxvYWRFbnYoKSB7XG4gICAgcmV0dXJuIHt9O1xufVxuZXhwb3J0IGNsYXNzIEJyb3dzZXJFdmVudEVtaXR0ZXIge1xuICAgICN0YXJnZXQgPSBuZXcgRXZlbnRUYXJnZXQoKTtcbiAgICAjbGlzdGVuZXJXcmFwcGVycyA9IG5ldyBNYXAoKTtcbiAgICBvbih0eXBlLCBsaXN0ZW5lcikge1xuICAgICAgICBjb25zdCBldmVudFR5cGUgPSB0eXBlO1xuICAgICAgICBsZXQgbGlzdGVuZXJzRm9yVHlwZSA9IHRoaXMuI2xpc3RlbmVyV3JhcHBlcnMuZ2V0KGV2ZW50VHlwZSk7XG4gICAgICAgIGlmICghbGlzdGVuZXJzRm9yVHlwZSkge1xuICAgICAgICAgICAgbGlzdGVuZXJzRm9yVHlwZSA9IG5ldyBNYXAoKTtcbiAgICAgICAgICAgIHRoaXMuI2xpc3RlbmVyV3JhcHBlcnMuc2V0KGV2ZW50VHlwZSwgbGlzdGVuZXJzRm9yVHlwZSk7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IHdyYXBwZXJzID0gbGlzdGVuZXJzRm9yVHlwZS5nZXQobGlzdGVuZXIpO1xuICAgICAgICBpZiAoIXdyYXBwZXJzKSB7XG4gICAgICAgICAgICB3cmFwcGVycyA9IG5ldyBTZXQoKTtcbiAgICAgICAgICAgIGxpc3RlbmVyc0ZvclR5cGUuc2V0KGxpc3RlbmVyLCB3cmFwcGVycyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgd3JhcHBlciA9ICgoZXZlbnQpID0+IGxpc3RlbmVyKC4uLihldmVudC5kZXRhaWwgPz8gW10pKSk7XG4gICAgICAgIHdyYXBwZXJzLmFkZCh3cmFwcGVyKTtcbiAgICAgICAgdGhpcy4jdGFyZ2V0LmFkZEV2ZW50TGlzdGVuZXIoZXZlbnRUeXBlLCB3cmFwcGVyKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIG9mZih0eXBlLCBsaXN0ZW5lcikge1xuICAgICAgICBjb25zdCBldmVudFR5cGUgPSB0eXBlO1xuICAgICAgICBjb25zdCBsaXN0ZW5lcnNGb3JUeXBlID0gdGhpcy4jbGlzdGVuZXJXcmFwcGVycy5nZXQoZXZlbnRUeXBlKTtcbiAgICAgICAgY29uc3Qgd3JhcHBlcnMgPSBsaXN0ZW5lcnNGb3JUeXBlPy5nZXQobGlzdGVuZXIpO1xuICAgICAgICBpZiAod3JhcHBlcnM/LnNpemUpIHtcbiAgICAgICAgICAgIGZvciAoY29uc3Qgd3JhcHBlciBvZiB3cmFwcGVycykge1xuICAgICAgICAgICAgICAgIHRoaXMuI3RhcmdldC5yZW1vdmVFdmVudExpc3RlbmVyKGV2ZW50VHlwZSwgd3JhcHBlcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsaXN0ZW5lcnNGb3JUeXBlPy5kZWxldGUobGlzdGVuZXIpO1xuICAgICAgICAgICAgaWYgKGxpc3RlbmVyc0ZvclR5cGU/LnNpemUgPT09IDApIHtcbiAgICAgICAgICAgICAgICB0aGlzLiNsaXN0ZW5lcldyYXBwZXJzLmRlbGV0ZShldmVudFR5cGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICBlbWl0KHR5cGUsIC4uLmFyZ3MpIHtcbiAgICAgICAgY29uc3QgZXZlbnQgPSBuZXcgQ3VzdG9tRXZlbnQodHlwZSwgeyBkZXRhaWw6IGFyZ3MgfSk7XG4gICAgICAgIHJldHVybiB0aGlzLiN0YXJnZXQuZGlzcGF0Y2hFdmVudChldmVudCk7XG4gICAgfVxuICAgIG9uY2UodHlwZSwgbGlzdGVuZXIpIHtcbiAgICAgICAgY29uc3QgaGFuZGxlciA9ICguLi5hcmdzKSA9PiB7XG4gICAgICAgICAgICB0aGlzLm9mZih0eXBlLCBoYW5kbGVyKTtcbiAgICAgICAgICAgIGxpc3RlbmVyKC4uLmFyZ3MpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLm9uKHR5cGUsIGhhbmRsZXIpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG59XG5leHBvcnQgeyBCcm93c2VyRXZlbnRFbWl0dGVyIGFzIFJ1bnRpbWVFdmVudEVtaXR0ZXIgfTtcbmV4cG9ydCBjb25zdCByYW5kb21VVUlEID0gKCkgPT4ge1xuICAgIGlmICh0eXBlb2YgY3J5cHRvICE9PSAndW5kZWZpbmVkJyAmJiBjcnlwdG8ucmFuZG9tVVVJRCkge1xuICAgICAgICByZXR1cm4gY3J5cHRvLnJhbmRvbVVVSUQoKTtcbiAgICB9XG4gICAgcmV0dXJuICd4eHh4eHh4eC14eHh4LTR4eHgteXh4eC14eHh4eHh4eHh4eHgnLnJlcGxhY2UoL1t4eV0vZywgZnVuY3Rpb24gKGMpIHtcbiAgICAgICAgY29uc3QgciA9IChNYXRoLnJhbmRvbSgpICogMTYpIHwgMDtcbiAgICAgICAgY29uc3QgdiA9IGMgPT09ICd4JyA/IHIgOiAociAmIDB4MykgfCAweDg7XG4gICAgICAgIHJldHVybiB2LnRvU3RyaW5nKDE2KTtcbiAgICB9KTtcbn07XG5leHBvcnQgY29uc3QgUmVhZGFibGUgPSBjbGFzcyBSZWFkYWJsZSB7XG4gICAgY29uc3RydWN0b3IoKSB7IH1cbiAgICBwaXBlVG8oX2Rlc3RpbmF0aW9uLCBfb3B0aW9ucykgeyB9XG4gICAgcGlwZVRocm91Z2goX3RyYW5zZm9ybSwgX29wdGlvbnMpIHsgfVxufTtcbmV4cG9ydCBjb25zdCBSZWFkYWJsZVN0cmVhbSA9IGdsb2JhbFRoaXMuUmVhZGFibGVTdHJlYW07XG5leHBvcnQgY29uc3QgUmVhZGFibGVTdHJlYW1Db250cm9sbGVyID0gZ2xvYmFsVGhpcy5SZWFkYWJsZVN0cmVhbURlZmF1bHRDb250cm9sbGVyO1xuZXhwb3J0IGNvbnN0IFRyYW5zZm9ybVN0cmVhbSA9IGdsb2JhbFRoaXMuVHJhbnNmb3JtU3RyZWFtO1xuZXhwb3J0IGNsYXNzIEFzeW5jTG9jYWxTdG9yYWdlIHtcbiAgICBjb250ZXh0ID0gbnVsbDtcbiAgICBjb25zdHJ1Y3RvcigpIHsgfVxuICAgIHJ1bihjb250ZXh0LCBmbikge1xuICAgICAgICB0aGlzLmNvbnRleHQgPSBjb250ZXh0O1xuICAgICAgICByZXR1cm4gZm4oKTtcbiAgICB9XG4gICAgZ2V0U3RvcmUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbnRleHQ7XG4gICAgfVxuICAgIGVudGVyV2l0aChjb250ZXh0KSB7XG4gICAgICAgIHRoaXMuY29udGV4dCA9IGNvbnRleHQ7XG4gICAgfVxufVxuZXhwb3J0IGZ1bmN0aW9uIGlzQnJvd3NlckVudmlyb25tZW50KCkge1xuICAgIHJldHVybiB0cnVlO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGlzVHJhY2luZ0xvb3BSdW5uaW5nQnlEZWZhdWx0KCkge1xuICAgIHJldHVybiBmYWxzZTtcbn1cbmV4cG9ydCB7IE1DUFNlcnZlclN0ZGlvLCBNQ1BTZXJ2ZXJTdHJlYW1hYmxlSHR0cCwgTUNQU2VydmVyU1NFLCB9IGZyb20gXCIuL21jcC1zZXJ2ZXIvYnJvd3Nlci5tanNcIjtcbmNsYXNzIEJyb3dzZXJUaW1lciB7XG4gICAgY29uc3RydWN0b3IoKSB7IH1cbiAgICBzZXRUaW1lb3V0KGNhbGxiYWNrLCBtcykge1xuICAgICAgICBjb25zdCB0aW1lb3V0ID0gc2V0VGltZW91dChjYWxsYmFjaywgbXMpO1xuICAgICAgICB0aW1lb3V0LnJlZiA9XG4gICAgICAgICAgICB0eXBlb2YgdGltZW91dC5yZWYgPT09ICdmdW5jdGlvbicgPyB0aW1lb3V0LnJlZiA6ICgpID0+IHRpbWVvdXQ7XG4gICAgICAgIHRpbWVvdXQudW5yZWYgPVxuICAgICAgICAgICAgdHlwZW9mIHRpbWVvdXQudW5yZWYgPT09ICdmdW5jdGlvbicgPyB0aW1lb3V0LnVucmVmIDogKCkgPT4gdGltZW91dDtcbiAgICAgICAgdGltZW91dC5oYXNSZWYgPVxuICAgICAgICAgICAgdHlwZW9mIHRpbWVvdXQuaGFzUmVmID09PSAnZnVuY3Rpb24nID8gdGltZW91dC5oYXNSZWYgOiAoKSA9PiB0cnVlO1xuICAgICAgICB0aW1lb3V0LnJlZnJlc2ggPVxuICAgICAgICAgICAgdHlwZW9mIHRpbWVvdXQucmVmcmVzaCA9PT0gJ2Z1bmN0aW9uJyA/IHRpbWVvdXQucmVmcmVzaCA6ICgpID0+IHRpbWVvdXQ7XG4gICAgICAgIHJldHVybiB0aW1lb3V0O1xuICAgIH1cbiAgICBjbGVhclRpbWVvdXQodGltZW91dElkKSB7XG4gICAgICAgIHdpbmRvdy5jbGVhclRpbWVvdXQodGltZW91dElkKTtcbiAgICB9XG59XG5jb25zdCB0aW1lciA9IG5ldyBCcm93c2VyVGltZXIoKTtcbmV4cG9ydCB7IHRpbWVyIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1zaGltcy1icm93c2VyLm1qcy5tYXAiLCJpbXBvcnQgeyBSdW50aW1lRXZlbnRFbWl0dGVyLCB9IGZyb20gJ0BvcGVuYWkvYWdlbnRzLWNvcmUvX3NoaW1zJztcbmV4cG9ydCBjbGFzcyBFdmVudEVtaXR0ZXJEZWxlZ2F0ZSB7XG4gICAgb24odHlwZSwgbGlzdGVuZXIpIHtcbiAgICAgICAgdGhpcy5ldmVudEVtaXR0ZXIub24odHlwZSwgbGlzdGVuZXIpO1xuICAgICAgICByZXR1cm4gdGhpcy5ldmVudEVtaXR0ZXI7XG4gICAgfVxuICAgIG9mZih0eXBlLCBsaXN0ZW5lcikge1xuICAgICAgICB0aGlzLmV2ZW50RW1pdHRlci5vZmYodHlwZSwgbGlzdGVuZXIpO1xuICAgICAgICByZXR1cm4gdGhpcy5ldmVudEVtaXR0ZXI7XG4gICAgfVxuICAgIGVtaXQodHlwZSwgLi4uYXJncykge1xuICAgICAgICByZXR1cm4gdGhpcy5ldmVudEVtaXR0ZXIuZW1pdCh0eXBlLCAuLi5hcmdzKTtcbiAgICB9XG4gICAgb25jZSh0eXBlLCBsaXN0ZW5lcikge1xuICAgICAgICB0aGlzLmV2ZW50RW1pdHRlci5vbmNlKHR5cGUsIGxpc3RlbmVyKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZXZlbnRFbWl0dGVyO1xuICAgIH1cbn1cbi8qKlxuICogRXZlbnQgZW1pdHRlciB0aGF0IGV2ZXJ5IEFnZW50IGluc3RhbmNlIGluaGVyaXRzIGZyb20gYW5kIHRoYXQgZW1pdHMgZXZlbnRzIGZvciB0aGUgbGlmZWN5Y2xlXG4gKiBvZiB0aGUgYWdlbnQuXG4gKi9cbmV4cG9ydCBjbGFzcyBBZ2VudEhvb2tzIGV4dGVuZHMgRXZlbnRFbWl0dGVyRGVsZWdhdGUge1xuICAgIGV2ZW50RW1pdHRlciA9IG5ldyBSdW50aW1lRXZlbnRFbWl0dGVyKCk7XG59XG4vKipcbiAqIEV2ZW50IGVtaXR0ZXIgdGhhdCBldmVyeSBSdW5uZXIgaW5zdGFuY2UgaW5oZXJpdHMgZnJvbSBhbmQgdGhhdCBlbWl0cyBldmVudHMgZm9yIHRoZSBsaWZlY3ljbGVcbiAqIG9mIHRoZSBvdmVyYWxsIHJ1bi5cbiAqL1xuZXhwb3J0IGNsYXNzIFJ1bkhvb2tzIGV4dGVuZHMgRXZlbnRFbWl0dGVyRGVsZWdhdGUge1xuICAgIGV2ZW50RW1pdHRlciA9IG5ldyBSdW50aW1lRXZlbnRFbWl0dGVyKCk7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1saWZlY3ljbGUubWpzLm1hcCIsImltcG9ydCB7IGxvYWRFbnYgfSBmcm9tIFwiLi9jb25maWcubWpzXCI7XG5leHBvcnQgY29uc3QgT1BFTkFJX0RFRkFVTFRfTU9ERUxfRU5WX1ZBUklBQkxFX05BTUUgPSAnT1BFTkFJX0RFRkFVTFRfTU9ERUwnO1xuLyoqXG4gKiBSZXR1cm5zIFRydWUgaWYgdGhlIG1vZGVsIG5hbWUgaXMgYSBHUFQtNSBtb2RlbCBhbmQgcmVhc29uaW5nIHNldHRpbmdzIGFyZSByZXF1aXJlZC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdwdDVSZWFzb25pbmdTZXR0aW5nc1JlcXVpcmVkKG1vZGVsTmFtZSkge1xuICAgIGlmIChtb2RlbE5hbWUuc3RhcnRzV2l0aCgnZ3B0LTUtY2hhdCcpKSB7XG4gICAgICAgIC8vIGdwdC01LWNoYXQtbGF0ZXN0IGRvZXMgbm90IHJlcXVpcmUgcmVhc29uaW5nIHNldHRpbmdzXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgLy8gbWF0Y2hlcyBhbnkgb2YgZ3B0LTUgbW9kZWxzXG4gICAgcmV0dXJuIG1vZGVsTmFtZS5zdGFydHNXaXRoKCdncHQtNScpO1xufVxuLyoqXG4gKiBSZXR1cm5zIFRydWUgaWYgdGhlIGRlZmF1bHQgbW9kZWwgaXMgYSBHUFQtNSBtb2RlbC5cbiAqIFRoaXMgaXMgdXNlZCB0byBkZXRlcm1pbmUgaWYgdGhlIGRlZmF1bHQgbW9kZWwgc2V0dGluZ3MgYXJlIGNvbXBhdGlibGUgd2l0aCBHUFQtNSBtb2RlbHMuXG4gKiBJZiB0aGUgZGVmYXVsdCBtb2RlbCBpcyBub3QgYSBHUFQtNSBtb2RlbCwgdGhlIG1vZGVsIHNldHRpbmdzIGFyZSBjb21wYXRpYmxlIHdpdGggb3RoZXIgbW9kZWxzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNHcHQ1RGVmYXVsdCgpIHtcbiAgICByZXR1cm4gZ3B0NVJlYXNvbmluZ1NldHRpbmdzUmVxdWlyZWQoZ2V0RGVmYXVsdE1vZGVsKCkpO1xufVxuLyoqXG4gKiBSZXR1cm5zIHRoZSBkZWZhdWx0IG1vZGVsIG5hbWUuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXREZWZhdWx0TW9kZWwoKSB7XG4gICAgY29uc3QgZW52ID0gbG9hZEVudigpO1xuICAgIHJldHVybiAoZW52W09QRU5BSV9ERUZBVUxUX01PREVMX0VOVl9WQVJJQUJMRV9OQU1FXT8udG9Mb3dlckNhc2UoKSA/PyAnZ3B0LTQuMScpO1xufVxuLyoqXG4gKiBSZXR1cm5zIHRoZSBkZWZhdWx0IG1vZGVsIHNldHRpbmdzLlxuICogSWYgdGhlIGRlZmF1bHQgbW9kZWwgaXMgYSBHUFQtNSBtb2RlbCwgcmV0dXJucyB0aGUgR1BULTUgZGVmYXVsdCBtb2RlbCBzZXR0aW5ncy5cbiAqIE90aGVyd2lzZSwgcmV0dXJucyB0aGUgbGVnYWN5IGRlZmF1bHQgbW9kZWwgc2V0dGluZ3MuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXREZWZhdWx0TW9kZWxTZXR0aW5ncyhtb2RlbCkge1xuICAgIGNvbnN0IF9tb2RlbCA9IG1vZGVsID8/IGdldERlZmF1bHRNb2RlbCgpO1xuICAgIGlmIChncHQ1UmVhc29uaW5nU2V0dGluZ3NSZXF1aXJlZChfbW9kZWwpKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAvLyBXZSBjaG9zZSBcImxvd1wiIGluc3RlYWQgb2YgXCJtaW5pbWFsXCIgYmVjYXVzZSBzb21lIG9mIHRoZSBidWlsdC1pbiB0b29sc1xuICAgICAgICAgICAgLy8gKGUuZy4sIGZpbGUgc2VhcmNoLCBpbWFnZSBnZW5lcmF0aW9uLCBldGMuKSBkbyBub3Qgc3VwcG9ydCBcIm1pbmltYWxcIlxuICAgICAgICAgICAgLy8gSWYgeW91IHdhbnQgdG8gdXNlIFwibWluaW1hbFwiIHJlYXNvbmluZyBlZmZvcnQsIHlvdSBjYW4gcGFzcyB5b3VyIG93biBtb2RlbCBzZXR0aW5nc1xuICAgICAgICAgICAgcmVhc29uaW5nOiB7IGVmZm9ydDogJ2xvdycgfSxcbiAgICAgICAgICAgIHRleHQ6IHsgdmVyYm9zaXR5OiAnbG93JyB9LFxuICAgICAgICB9O1xuICAgIH1cbiAgICByZXR1cm4ge307XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1kZWZhdWx0TW9kZWwubWpzLm1hcCIsImltcG9ydCB7IE1vZGVsQmVoYXZpb3JFcnJvciwgVXNlckVycm9yIH0gZnJvbSBcIi4vZXJyb3JzLm1qc1wiO1xuaW1wb3J0IHsgdG9GdW5jdGlvblRvb2xOYW1lIH0gZnJvbSBcIi4vdXRpbHMvdG9vbHMubWpzXCI7XG5pbXBvcnQgeyBnZXRTY2hlbWFBbmRQYXJzZXJGcm9tSW5wdXRUeXBlIH0gZnJvbSBcIi4vdXRpbHMvdG9vbHMubWpzXCI7XG5pbXBvcnQgeyBhZGRFcnJvclRvQ3VycmVudFNwYW4gfSBmcm9tIFwiLi90cmFjaW5nL2NvbnRleHQubWpzXCI7XG5pbXBvcnQgbG9nZ2VyIGZyb20gXCIuL2xvZ2dlci5tanNcIjtcbi8qKlxuICogR2VuZXJhdGVzIHRoZSBtZXNzYWdlIHRoYXQgd2lsbCBiZSBnaXZlbiBhcyB0b29sIG91dHB1dCB0byB0aGUgbW9kZWwgdGhhdCByZXF1ZXN0ZWQgdGhlIGhhbmRvZmYuXG4gKlxuICogQHBhcmFtIGFnZW50IFRoZSBhZ2VudCB0byB0cmFuc2ZlciB0b1xuICogQHJldHVybnMgVGhlIG1lc3NhZ2UgdGhhdCB3aWxsIGJlIGdpdmVuIGFzIHRvb2wgb3V0cHV0IHRvIHRoZSBtb2RlbCB0aGF0IHJlcXVlc3RlZCB0aGUgaGFuZG9mZlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0VHJhbnNmZXJNZXNzYWdlKGFnZW50KSB7XG4gICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHsgYXNzaXN0YW50OiBhZ2VudC5uYW1lIH0pO1xufVxuLyoqXG4gKiBUaGUgZGVmYXVsdCBuYW1lIG9mIHRoZSB0b29sIHRoYXQgcmVwcmVzZW50cyB0aGUgaGFuZG9mZi5cbiAqXG4gKiBAcGFyYW0gYWdlbnQgVGhlIGFnZW50IHRvIHRyYW5zZmVyIHRvXG4gKiBAcmV0dXJucyBUaGUgbmFtZSBvZiB0aGUgdG9vbCB0aGF0IHJlcHJlc2VudHMgdGhlIGhhbmRvZmZcbiAqL1xuZnVuY3Rpb24gZGVmYXVsdEhhbmRvZmZUb29sTmFtZShhZ2VudCkge1xuICAgIHJldHVybiBgdHJhbnNmZXJfdG9fJHt0b0Z1bmN0aW9uVG9vbE5hbWUoYWdlbnQubmFtZSl9YDtcbn1cbi8qKlxuICogR2VuZXJhdGVzIHRoZSBkZXNjcmlwdGlvbiBvZiB0aGUgdG9vbCB0aGF0IHJlcHJlc2VudHMgdGhlIGhhbmRvZmYuXG4gKlxuICogQHBhcmFtIGFnZW50IFRoZSBhZ2VudCB0byB0cmFuc2ZlciB0b1xuICogQHJldHVybnMgVGhlIGRlc2NyaXB0aW9uIG9mIHRoZSB0b29sIHRoYXQgcmVwcmVzZW50cyB0aGUgaGFuZG9mZlxuICovXG5mdW5jdGlvbiBkZWZhdWx0SGFuZG9mZlRvb2xEZXNjcmlwdGlvbihhZ2VudCkge1xuICAgIHJldHVybiBgSGFuZG9mZiB0byB0aGUgJHthZ2VudC5uYW1lfSBhZ2VudCB0byBoYW5kbGUgdGhlIHJlcXVlc3QuICR7YWdlbnQuaGFuZG9mZkRlc2NyaXB0aW9uID8/ICcnfWA7XG59XG5leHBvcnQgY2xhc3MgSGFuZG9mZiB7XG4gICAgLyoqXG4gICAgICogVGhlIG5hbWUgb2YgdGhlIHRvb2wgdGhhdCByZXByZXNlbnRzIHRoZSBoYW5kb2ZmLlxuICAgICAqL1xuICAgIHRvb2xOYW1lO1xuICAgIC8qKlxuICAgICAqIFRoZSBkZXNjcmlwdGlvbiBvZiB0aGUgdG9vbCB0aGF0IHJlcHJlc2VudHMgdGhlIGhhbmRvZmYuXG4gICAgICovXG4gICAgdG9vbERlc2NyaXB0aW9uO1xuICAgIC8qKlxuICAgICAqIFRoZSBKU09OIHNjaGVtYSBmb3IgdGhlIGhhbmRvZmYgaW5wdXQuIENhbiBiZSBlbXB0eSBpZiB0aGUgaGFuZG9mZiBkb2VzIG5vdCB0YWtlIGFuIGlucHV0XG4gICAgICovXG4gICAgaW5wdXRKc29uU2NoZW1hID0ge1xuICAgICAgICB0eXBlOiAnb2JqZWN0JyxcbiAgICAgICAgcHJvcGVydGllczoge30sXG4gICAgICAgIHJlcXVpcmVkOiBbXSxcbiAgICAgICAgYWRkaXRpb25hbFByb3BlcnRpZXM6IGZhbHNlLFxuICAgIH07XG4gICAgLyoqXG4gICAgICogV2hldGhlciB0aGUgaW5wdXQgSlNPTiBzY2hlbWEgaXMgaW4gc3RyaWN0IG1vZGUuIFdlICoqc3Ryb25nbHkqKiByZWNvbW1lbmQgc2V0dGluZyB0aGlzIHRvXG4gICAgICogdHJ1ZSwgYXMgaXQgaW5jcmVhc2VzIHRoZSBsaWtlbGlob29kIG9mIGNvcnJlY3QgSlNPTiBpbnB1dC5cbiAgICAgKi9cbiAgICBzdHJpY3RKc29uU2NoZW1hID0gdHJ1ZTtcbiAgICAvKipcbiAgICAgKiBUaGUgZnVuY3Rpb24gdGhhdCBpbnZva2VzIHRoZSBoYW5kb2ZmLiBUaGUgcGFyYW1ldGVycyBwYXNzZWQgYXJlOlxuICAgICAqIDEuIFRoZSBoYW5kb2ZmIHJ1biBjb250ZXh0XG4gICAgICogMi4gVGhlIGFyZ3VtZW50cyBmcm9tIHRoZSBMTE0sIGFzIGEgSlNPTiBzdHJpbmcuIEVtcHR5IHN0cmluZyBpZiBpbnB1dEpzb25TY2hlbWEgaXMgZW1wdHkuXG4gICAgICpcbiAgICAgKiBNdXN0IHJldHVybiBhbiBhZ2VudFxuICAgICAqL1xuICAgIG9uSW52b2tlSGFuZG9mZjtcbiAgICAvKipcbiAgICAgKiBUaGUgbmFtZSBvZiB0aGUgYWdlbnQgdGhhdCBpcyBiZWluZyBoYW5kZWQgb2ZmIHRvLlxuICAgICAqL1xuICAgIGFnZW50TmFtZTtcbiAgICAvKipcbiAgICAgKiBBIGZ1bmN0aW9uIHRoYXQgZmlsdGVycyB0aGUgaW5wdXRzIHRoYXQgYXJlIHBhc3NlZCB0byB0aGUgbmV4dCBhZ2VudC4gQnkgZGVmYXVsdCwgdGhlIG5ldyBhZ2VudFxuICAgICAqIHNlZXMgdGhlIGVudGlyZSBjb252ZXJzYXRpb24gaGlzdG9yeS4gSW4gc29tZSBjYXNlcywgeW91IG1heSB3YW50IHRvIGZpbHRlciBpbnB1dHMgZS5nLiB0b1xuICAgICAqIHJlbW92ZSBvbGRlciBpbnB1dHMsIG9yIHJlbW92ZSB0b29scyBmcm9tIGV4aXN0aW5nIGlucHV0cy5cbiAgICAgKlxuICAgICAqIFRoZSBmdW5jdGlvbiB3aWxsIHJlY2VpdmUgdGhlIGVudGlyZSBjb252ZXJzYXRpb24gaGlzc3Rvcnkgc28gZmFyLCBpbmNsdWRpbmcgdGhlIGlucHV0IGl0ZW1cbiAgICAgKiB0aGF0IHRyaWdnZXJlZCB0aGUgaGFuZG9mZiBhbmQgYSB0b29sIGNhbGwgb3V0cHV0IGl0ZW0gcmVwcmVzZW50aW5nIHRoZSBoYW5kb2ZmIHRvb2wncyBvdXRwdXQuXG4gICAgICpcbiAgICAgKiBZb3UgYXJlIGZyZWUgdG8gbW9kaWZ5IHRoZSBpbnB1dCBoaXN0b3J5IG9yIG5ldyBpdGVtcyBhcyB5b3Ugc2VlIGZpdC4gVGhlIG5leHQgYWdlbnQgdGhhdCBydW5zXG4gICAgICogd2lsbCByZWNlaXZlIGBoYW5kb2ZmSW5wdXREYXRhLmFsbEl0ZW1zXG4gICAgICovXG4gICAgaW5wdXRGaWx0ZXI7XG4gICAgLyoqXG4gICAgICogVGhlIGFnZW50IHRoYXQgaXMgYmVpbmcgaGFuZGVkIG9mZiB0by5cbiAgICAgKi9cbiAgICBhZ2VudDtcbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgZnVuY3Rpb24gdG9vbCBkZWZpbml0aW9uIHRoYXQgY2FuIGJlIHVzZWQgdG8gaW52b2tlIHRoZSBoYW5kb2ZmLlxuICAgICAqL1xuICAgIGdldEhhbmRvZmZBc0Z1bmN0aW9uVG9vbCgpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHR5cGU6ICdmdW5jdGlvbicsXG4gICAgICAgICAgICBuYW1lOiB0aGlzLnRvb2xOYW1lLFxuICAgICAgICAgICAgZGVzY3JpcHRpb246IHRoaXMudG9vbERlc2NyaXB0aW9uLFxuICAgICAgICAgICAgcGFyYW1ldGVyczogdGhpcy5pbnB1dEpzb25TY2hlbWEsXG4gICAgICAgICAgICBzdHJpY3Q6IHRoaXMuc3RyaWN0SnNvblNjaGVtYSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgaXNFbmFibGVkID0gYXN5bmMgKCkgPT4gdHJ1ZTtcbiAgICBjb25zdHJ1Y3RvcihhZ2VudCwgb25JbnZva2VIYW5kb2ZmKSB7XG4gICAgICAgIHRoaXMuYWdlbnROYW1lID0gYWdlbnQubmFtZTtcbiAgICAgICAgdGhpcy5vbkludm9rZUhhbmRvZmYgPSBvbkludm9rZUhhbmRvZmY7XG4gICAgICAgIHRoaXMudG9vbE5hbWUgPSBkZWZhdWx0SGFuZG9mZlRvb2xOYW1lKGFnZW50KTtcbiAgICAgICAgdGhpcy50b29sRGVzY3JpcHRpb24gPSBkZWZhdWx0SGFuZG9mZlRvb2xEZXNjcmlwdGlvbihhZ2VudCk7XG4gICAgICAgIHRoaXMuYWdlbnQgPSBhZ2VudDtcbiAgICB9XG59XG4vKipcbiAqIENyZWF0ZXMgYSBoYW5kb2ZmIGZyb20gYW4gYWdlbnQuIEhhbmRvZmZzIGFyZSBhdXRvbWF0aWNhbGx5IGNyZWF0ZWQgd2hlbiB5b3UgcGFzcyBhbiBhZ2VudFxuICogaW50byB0aGUgYGhhbmRvZmZzYCBvcHRpb24gb2YgdGhlIGBBZ2VudGAgY29uc3RydWN0b3IuIEFsdGVybmF0aXZlbHksIHlvdSBjYW4gdXNlIHRoaXMgZnVuY3Rpb25cbiAqIHRvIGNyZWF0ZSBhIGhhbmRvZmYgbWFudWFsbHksIGdpdmluZyB5b3UgbW9yZSBjb250cm9sIG92ZXIgY29uZmlndXJhdGlvbi5cbiAqXG4gKiBAdGVtcGxhdGUgVENvbnRleHQgVGhlIGNvbnRleHQgb2YgdGhlIGhhbmRvZmZcbiAqIEB0ZW1wbGF0ZSBUT3V0cHV0IFRoZSBvdXRwdXQgdHlwZSBvZiB0aGUgaGFuZG9mZlxuICogQHRlbXBsYXRlIFRJbnB1dFR5cGUgVGhlIGlucHV0IHR5cGUgb2YgdGhlIGhhbmRvZmZcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGhhbmRvZmYoYWdlbnQsIGNvbmZpZyA9IHt9KSB7XG4gICAgbGV0IHBhcnNlciA9IHVuZGVmaW5lZDtcbiAgICBjb25zdCBoYXNPbkhhbmRvZmYgPSAhIWNvbmZpZy5vbkhhbmRvZmY7XG4gICAgY29uc3QgaGFzSW5wdXRUeXBlID0gISFjb25maWcuaW5wdXRUeXBlO1xuICAgIGNvbnN0IGhhc0JvdGhPck5laXRoZXJIYW5kb2ZmQW5kSW5wdXRUeXBlID0gaGFzT25IYW5kb2ZmID09PSBoYXNJbnB1dFR5cGU7XG4gICAgaWYgKCFoYXNCb3RoT3JOZWl0aGVySGFuZG9mZkFuZElucHV0VHlwZSkge1xuICAgICAgICB0aHJvdyBuZXcgVXNlckVycm9yKCdZb3UgbXVzdCBwcm92aWRlIGVpdGhlciBib3RoIGBvbkhhbmRvZmZgIGFuZCBgaW5wdXRUeXBlYCBvciBuZWl0aGVyLicpO1xuICAgIH1cbiAgICBhc3luYyBmdW5jdGlvbiBvbkludm9rZUhhbmRvZmYoY29udGV4dCwgaW5wdXRKc29uU3RyaW5nKSB7XG4gICAgICAgIGlmIChwYXJzZXIpIHtcbiAgICAgICAgICAgIGlmICghaW5wdXRKc29uU3RyaW5nKSB7XG4gICAgICAgICAgICAgICAgYWRkRXJyb3JUb0N1cnJlbnRTcGFuKHtcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogYEhhbmRvZmYgZnVuY3Rpb24gZXhwZWN0ZWQgbm9uIGVtcHR5IGlucHV0IGJ1dCBnb3Q6ICR7aW5wdXRKc29uU3RyaW5nfWAsXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRldGFpbHM6IGBpbnB1dCBpcyBlbXB0eWAsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IE1vZGVsQmVoYXZpb3JFcnJvcignSGFuZG9mZiBmdW5jdGlvbiBleHBlY3RlZCBub24gZW1wdHkgaW5wdXQnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgLy8gdmVyaWZ5IHRoYXQgaXQncyB2YWxpZCBpbnB1dCBidXQgd2UgZG9uJ3QgY2FyZSBhYm91dCB0aGUgcmVzdWx0XG4gICAgICAgICAgICAgICAgY29uc3QgcGFyc2VkID0gYXdhaXQgcGFyc2VyKGlucHV0SnNvblN0cmluZyk7XG4gICAgICAgICAgICAgICAgaWYgKGNvbmZpZy5vbkhhbmRvZmYpIHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgY29uZmlnLm9uSGFuZG9mZihjb250ZXh0LCBwYXJzZWQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgIGFkZEVycm9yVG9DdXJyZW50U3Bhbih7XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGBJbnZhbGlkIEpTT04gcHJvdmlkZWRgLFxuICAgICAgICAgICAgICAgICAgICBkYXRhOiB7fSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBpZiAoIWxvZ2dlci5kb250TG9nVG9vbERhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgbG9nZ2VyLmVycm9yKGBJbnZhbGlkIEpTT04gd2hlbiBwYXJzaW5nOiAke2lucHV0SnNvblN0cmluZ30uIEVycm9yOiAke2Vycm9yfWApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTW9kZWxCZWhhdmlvckVycm9yKCdJbnZhbGlkIEpTT04gcHJvdmlkZWQnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGF3YWl0IGNvbmZpZy5vbkhhbmRvZmY/Lihjb250ZXh0KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYWdlbnQ7XG4gICAgfVxuICAgIGNvbnN0IGhhbmRvZmYgPSBuZXcgSGFuZG9mZihhZ2VudCwgb25JbnZva2VIYW5kb2ZmKTtcbiAgICBpZiAodHlwZW9mIGNvbmZpZy5pc0VuYWJsZWQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgY29uc3QgcHJlZGljYXRlID0gY29uZmlnLmlzRW5hYmxlZDtcbiAgICAgICAgaGFuZG9mZi5pc0VuYWJsZWQgPSBhc3luYyAoeyBydW5Db250ZXh0LCBhZ2VudCB9KSA9PiB7XG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBwcmVkaWNhdGUoeyBydW5Db250ZXh0LCBhZ2VudCB9KTtcbiAgICAgICAgICAgIHJldHVybiBCb29sZWFuKHJlc3VsdCk7XG4gICAgICAgIH07XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGVvZiBjb25maWcuaXNFbmFibGVkID09PSAnYm9vbGVhbicpIHtcbiAgICAgICAgaGFuZG9mZi5pc0VuYWJsZWQgPSBhc3luYyAoKSA9PiBjb25maWcuaXNFbmFibGVkO1xuICAgIH1cbiAgICBpZiAoY29uZmlnLmlucHV0VHlwZSkge1xuICAgICAgICBjb25zdCByZXN1bHQgPSBnZXRTY2hlbWFBbmRQYXJzZXJGcm9tSW5wdXRUeXBlKGNvbmZpZy5pbnB1dFR5cGUsIGhhbmRvZmYudG9vbE5hbWUpO1xuICAgICAgICBoYW5kb2ZmLmlucHV0SnNvblNjaGVtYSA9IHJlc3VsdC5zY2hlbWE7XG4gICAgICAgIGhhbmRvZmYuc3RyaWN0SnNvblNjaGVtYSA9IHRydWU7XG4gICAgICAgIHBhcnNlciA9IHJlc3VsdC5wYXJzZXI7XG4gICAgfVxuICAgIGlmIChjb25maWcudG9vbE5hbWVPdmVycmlkZSkge1xuICAgICAgICBoYW5kb2ZmLnRvb2xOYW1lID0gY29uZmlnLnRvb2xOYW1lT3ZlcnJpZGU7XG4gICAgfVxuICAgIGlmIChjb25maWcudG9vbERlc2NyaXB0aW9uT3ZlcnJpZGUpIHtcbiAgICAgICAgaGFuZG9mZi50b29sRGVzY3JpcHRpb24gPSBjb25maWcudG9vbERlc2NyaXB0aW9uT3ZlcnJpZGU7XG4gICAgfVxuICAgIGlmIChjb25maWcuaW5wdXRGaWx0ZXIpIHtcbiAgICAgICAgaGFuZG9mZi5pbnB1dEZpbHRlciA9IGNvbmZpZy5pbnB1dEZpbHRlcjtcbiAgICB9XG4gICAgcmV0dXJuIGhhbmRvZmY7XG59XG4vKipcbiAqIFJldHVybnMgYSBoYW5kb2ZmIGZvciB0aGUgZ2l2ZW4gYWdlbnQuIElmIHRoZSBhZ2VudCBpcyBhbHJlYWR5IHdyYXBwZWQgaW50byBhIGhhbmRvZmYsXG4gKiBpdCB3aWxsIGJlIHJldHVybmVkIGFzIGlzLiBPdGhlcndpc2UsIGEgbmV3IGhhbmRvZmYgaW5zdGFuY2Ugd2lsbCBiZSBjcmVhdGVkLlxuICpcbiAqIEB0ZW1wbGF0ZSBUQ29udGV4dCBUaGUgY29udGV4dCBvZiB0aGUgaGFuZG9mZlxuICogQHRlbXBsYXRlIFRPdXRwdXQgVGhlIG91dHB1dCB0eXBlIG9mIHRoZSBoYW5kb2ZmXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRIYW5kb2ZmKGFnZW50KSB7XG4gICAgaWYgKGFnZW50IGluc3RhbmNlb2YgSGFuZG9mZikge1xuICAgICAgICByZXR1cm4gYWdlbnQ7XG4gICAgfVxuICAgIHJldHVybiBoYW5kb2ZmKGFnZW50KTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWhhbmRvZmYubWpzLm1hcCIsIi8qKlxuICogR2V0IHRoZSBsYXN0IHRleHQgZnJvbSB0aGUgb3V0cHV0IG1lc3NhZ2UuXG4gKiBAcGFyYW0gb3V0cHV0TWVzc2FnZVxuICogQHJldHVybnNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldExhc3RUZXh0RnJvbU91dHB1dE1lc3NhZ2Uob3V0cHV0TWVzc2FnZSkge1xuICAgIGlmIChvdXRwdXRNZXNzYWdlLnR5cGUgIT09ICdtZXNzYWdlJykge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgICBpZiAob3V0cHV0TWVzc2FnZS5yb2xlICE9PSAnYXNzaXN0YW50Jykge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgICBjb25zdCBsYXN0SXRlbSA9IG91dHB1dE1lc3NhZ2UuY29udGVudFtvdXRwdXRNZXNzYWdlLmNvbnRlbnQubGVuZ3RoIC0gMV07XG4gICAgaWYgKGxhc3RJdGVtLnR5cGUgIT09ICdvdXRwdXRfdGV4dCcpIHtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG4gICAgcmV0dXJuIGxhc3RJdGVtLnRleHQ7XG59XG4vKipcbiAqIEdldCB0aGUgbGFzdCB0ZXh0IGZyb20gdGhlIG91dHB1dCBtZXNzYWdlLlxuICogQHBhcmFtIG91dHB1dFxuICogQHJldHVybnNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldE91dHB1dFRleHQob3V0cHV0KSB7XG4gICAgaWYgKG91dHB1dC5vdXRwdXQubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHJldHVybiAnJztcbiAgICB9XG4gICAgcmV0dXJuIChnZXRMYXN0VGV4dEZyb21PdXRwdXRNZXNzYWdlKG91dHB1dC5vdXRwdXRbb3V0cHV0Lm91dHB1dC5sZW5ndGggLSAxXSkgfHwgJycpO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bWVzc2FnZXMubWpzLm1hcCIsImltcG9ydCB7IHogfSBmcm9tICd6b2QnO1xuaW1wb3J0IHsgQWdlbnRIb29rcyB9IGZyb20gXCIuL2xpZmVjeWNsZS5tanNcIjtcbmltcG9ydCB7IGdldEFsbE1jcFRvb2xzIH0gZnJvbSBcIi4vbWNwLm1qc1wiO1xuaW1wb3J0IHsgZ2V0RGVmYXVsdE1vZGVsU2V0dGluZ3MsIGdwdDVSZWFzb25pbmdTZXR0aW5nc1JlcXVpcmVkLCBpc0dwdDVEZWZhdWx0LCB9IGZyb20gXCIuL2RlZmF1bHRNb2RlbC5tanNcIjtcbmltcG9ydCB7IHRvb2wsIH0gZnJvbSBcIi4vdG9vbC5tanNcIjtcbmltcG9ydCB7IGdldEhhbmRvZmYgfSBmcm9tIFwiLi9oYW5kb2ZmLm1qc1wiO1xuaW1wb3J0IHsgUnVubmVyIH0gZnJvbSBcIi4vcnVuLm1qc1wiO1xuaW1wb3J0IHsgdG9GdW5jdGlvblRvb2xOYW1lIH0gZnJvbSBcIi4vdXRpbHMvdG9vbHMubWpzXCI7XG5pbXBvcnQgeyBnZXRPdXRwdXRUZXh0IH0gZnJvbSBcIi4vdXRpbHMvbWVzc2FnZXMubWpzXCI7XG5pbXBvcnQgeyBpc0FnZW50VG9vbElucHV0IH0gZnJvbSBcIi4vdXRpbHMvdHlwZUd1YXJkcy5tanNcIjtcbmltcG9ydCB7IGlzWm9kT2JqZWN0IH0gZnJvbSBcIi4vdXRpbHMvdHlwZUd1YXJkcy5tanNcIjtcbmltcG9ydCB7IE1vZGVsQmVoYXZpb3JFcnJvciwgVXNlckVycm9yIH0gZnJvbSBcIi4vZXJyb3JzLm1qc1wiO1xuaW1wb3J0IGxvZ2dlciBmcm9tIFwiLi9sb2dnZXIubWpzXCI7XG4vLyBQZXItcHJvY2VzcywgZXBoZW1lcmFsIG1hcCBsaW5raW5nIGEgZnVuY3Rpb24gdG9vbCBjYWxsIHRvIGl0cyBuZXN0ZWRcbi8vIEFnZW50IHJ1biByZXN1bHQgd2l0aGluIHRoZSBzYW1lIHJ1bjsgZW50cnkgaXMgcmVtb3ZlZCBhZnRlciBjb25zdW1wdGlvbi5cbmNvbnN0IGFnZW50VG9vbFJ1blJlc3VsdHMgPSBuZXcgV2Vha01hcCgpO1xuZXhwb3J0IGZ1bmN0aW9uIHNhdmVBZ2VudFRvb2xSdW5SZXN1bHQodG9vbENhbGwsIHJ1blJlc3VsdCkge1xuICAgIGlmICh0b29sQ2FsbCkge1xuICAgICAgICBhZ2VudFRvb2xSdW5SZXN1bHRzLnNldCh0b29sQ2FsbCwgcnVuUmVzdWx0KTtcbiAgICB9XG59XG5leHBvcnQgZnVuY3Rpb24gY29uc3VtZUFnZW50VG9vbFJ1blJlc3VsdCh0b29sQ2FsbCkge1xuICAgIGNvbnN0IHJ1blJlc3VsdCA9IGFnZW50VG9vbFJ1blJlc3VsdHMuZ2V0KHRvb2xDYWxsKTtcbiAgICBpZiAocnVuUmVzdWx0KSB7XG4gICAgICAgIGFnZW50VG9vbFJ1blJlc3VsdHMuZGVsZXRlKHRvb2xDYWxsKTtcbiAgICB9XG4gICAgcmV0dXJuIHJ1blJlc3VsdDtcbn1cbi8vIFRoZSBwYXJhbWV0ZXIgdHlwZSBmbyBuZWVkQXBwcm92YWwgZnVuY3Rpb24gZm9yIHRoZSB0b29sIGNyZWF0ZWQgYnkgQWdlbnQuYXNUb29sKCkgbWV0aG9kXG5jb25zdCBBZ2VudEFzVG9vbE5lZWRBcHByb3ZhbFNjaGFtZSA9IHoub2JqZWN0KHsgaW5wdXQ6IHouc3RyaW5nKCkgfSk7XG4vKipcbiAqIFRoZSBjbGFzcyByZXByZXNlbnRpbmcgYW4gQUkgYWdlbnQgY29uZmlndXJlZCB3aXRoIGluc3RydWN0aW9ucywgdG9vbHMsIGd1YXJkcmFpbHMsIGhhbmRvZmZzIGFuZCBtb3JlLlxuICpcbiAqIFdlIHN0cm9uZ2x5IHJlY29tbWVuZCBwYXNzaW5nIGBpbnN0cnVjdGlvbnNgLCB3aGljaCBpcyB0aGUgXCJzeXN0ZW0gcHJvbXB0XCIgZm9yIHRoZSBhZ2VudC4gSW5cbiAqIGFkZGl0aW9uLCB5b3UgY2FuIHBhc3MgYGhhbmRvZmZEZXNjcmlwdGlvbmAsIHdoaWNoIGlzIGEgaHVtYW4tcmVhZGFibGUgZGVzY3JpcHRpb24gb2YgdGhlXG4gKiBhZ2VudCwgdXNlZCB3aGVuIHRoZSBhZ2VudCBpcyB1c2VkIGluc2lkZSB0b29scy9oYW5kb2Zmcy5cbiAqXG4gKiBBZ2VudHMgYXJlIGdlbmVyaWMgb24gdGhlIGNvbnRleHQgdHlwZS4gVGhlIGNvbnRleHQgaXMgYSAobXV0YWJsZSkgb2JqZWN0IHlvdSBjcmVhdGUuIEl0IGlzXG4gKiBwYXNzZWQgdG8gdG9vbCBmdW5jdGlvbnMsIGhhbmRvZmZzLCBndWFyZHJhaWxzLCBldGMuXG4gKi9cbmV4cG9ydCBjbGFzcyBBZ2VudCBleHRlbmRzIEFnZW50SG9va3Mge1xuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhbiBBZ2VudCB3aXRoIGhhbmRvZmZzIGFuZCBhdXRvbWF0aWNhbGx5IGluZmVyIHRoZSB1bmlvbiB0eXBlIGZvciBUT3V0cHV0IGZyb20gdGhlIGhhbmRvZmYgYWdlbnRzJyBvdXRwdXQgdHlwZXMuXG4gICAgICovXG4gICAgc3RhdGljIGNyZWF0ZShjb25maWcpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBBZ2VudCh7XG4gICAgICAgICAgICAuLi5jb25maWcsXG4gICAgICAgICAgICBoYW5kb2ZmczogY29uZmlnLmhhbmRvZmZzLFxuICAgICAgICAgICAgb3V0cHV0VHlwZTogY29uZmlnLm91dHB1dFR5cGUsXG4gICAgICAgICAgICBoYW5kb2ZmT3V0cHV0VHlwZVdhcm5pbmdFbmFibGVkOiBmYWxzZSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHN0YXRpYyBERUZBVUxUX01PREVMX1BMQUNFSE9MREVSID0gJyc7XG4gICAgbmFtZTtcbiAgICBpbnN0cnVjdGlvbnM7XG4gICAgcHJvbXB0O1xuICAgIGhhbmRvZmZEZXNjcmlwdGlvbjtcbiAgICBoYW5kb2ZmcztcbiAgICBtb2RlbDtcbiAgICBtb2RlbFNldHRpbmdzO1xuICAgIHRvb2xzO1xuICAgIG1jcFNlcnZlcnM7XG4gICAgaW5wdXRHdWFyZHJhaWxzO1xuICAgIG91dHB1dEd1YXJkcmFpbHM7XG4gICAgb3V0cHV0VHlwZSA9ICd0ZXh0JztcbiAgICB0b29sVXNlQmVoYXZpb3I7XG4gICAgcmVzZXRUb29sQ2hvaWNlO1xuICAgIF90b29sc0V4cGxpY2l0bHlDb25maWd1cmVkO1xuICAgIGNvbnN0cnVjdG9yKGNvbmZpZykge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICBpZiAodHlwZW9mIGNvbmZpZy5uYW1lICE9PSAnc3RyaW5nJyB8fCBjb25maWcubmFtZS50cmltKCkgPT09ICcnKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVXNlckVycm9yKCdBZ2VudCBtdXN0IGhhdmUgYSBuYW1lLicpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMubmFtZSA9IGNvbmZpZy5uYW1lO1xuICAgICAgICB0aGlzLmluc3RydWN0aW9ucyA9IGNvbmZpZy5pbnN0cnVjdGlvbnMgPz8gQWdlbnQuREVGQVVMVF9NT0RFTF9QTEFDRUhPTERFUjtcbiAgICAgICAgdGhpcy5wcm9tcHQgPSBjb25maWcucHJvbXB0O1xuICAgICAgICB0aGlzLmhhbmRvZmZEZXNjcmlwdGlvbiA9IGNvbmZpZy5oYW5kb2ZmRGVzY3JpcHRpb24gPz8gJyc7XG4gICAgICAgIHRoaXMuaGFuZG9mZnMgPSBjb25maWcuaGFuZG9mZnMgPz8gW107XG4gICAgICAgIHRoaXMubW9kZWwgPSBjb25maWcubW9kZWwgPz8gJyc7XG4gICAgICAgIHRoaXMubW9kZWxTZXR0aW5ncyA9IGNvbmZpZy5tb2RlbFNldHRpbmdzID8/IGdldERlZmF1bHRNb2RlbFNldHRpbmdzKCk7XG4gICAgICAgIHRoaXMudG9vbHMgPSBjb25maWcudG9vbHMgPz8gW107XG4gICAgICAgIHRoaXMuX3Rvb2xzRXhwbGljaXRseUNvbmZpZ3VyZWQgPSBjb25maWcudG9vbHMgIT09IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5tY3BTZXJ2ZXJzID0gY29uZmlnLm1jcFNlcnZlcnMgPz8gW107XG4gICAgICAgIHRoaXMuaW5wdXRHdWFyZHJhaWxzID0gY29uZmlnLmlucHV0R3VhcmRyYWlscyA/PyBbXTtcbiAgICAgICAgdGhpcy5vdXRwdXRHdWFyZHJhaWxzID0gY29uZmlnLm91dHB1dEd1YXJkcmFpbHMgPz8gW107XG4gICAgICAgIGlmIChjb25maWcub3V0cHV0VHlwZSkge1xuICAgICAgICAgICAgdGhpcy5vdXRwdXRUeXBlID0gY29uZmlnLm91dHB1dFR5cGU7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy50b29sVXNlQmVoYXZpb3IgPSBjb25maWcudG9vbFVzZUJlaGF2aW9yID8/ICdydW5fbGxtX2FnYWluJztcbiAgICAgICAgdGhpcy5yZXNldFRvb2xDaG9pY2UgPSBjb25maWcucmVzZXRUb29sQ2hvaWNlID8/IHRydWU7XG4gICAgICAgIGlmIChcbiAgICAgICAgLy8gVGhlIHVzZXIgc2V0cyBhIG5vbi1kZWZhdWx0IG1vZGVsXG4gICAgICAgIGNvbmZpZy5tb2RlbCAhPT0gdW5kZWZpbmVkICYmXG4gICAgICAgICAgICAvLyBUaGUgZGVmYXVsdCBtb2RlbCBpcyBncHQtNVxuICAgICAgICAgICAgaXNHcHQ1RGVmYXVsdCgpICYmXG4gICAgICAgICAgICAvLyBIb3dldmVyLCB0aGUgc3BlY2lmaWVkIG1vZGVsIGlzIG5vdCBhIGdwdC01IG1vZGVsXG4gICAgICAgICAgICAodHlwZW9mIGNvbmZpZy5tb2RlbCAhPT0gJ3N0cmluZycgfHxcbiAgICAgICAgICAgICAgICAhZ3B0NVJlYXNvbmluZ1NldHRpbmdzUmVxdWlyZWQoY29uZmlnLm1vZGVsKSkgJiZcbiAgICAgICAgICAgIC8vIFRoZSBtb2RlbCBzZXR0aW5ncyBhcmUgbm90IGN1c3RvbWl6ZWQgZm9yIHRoZSBzcGVjaWZpZWQgbW9kZWxcbiAgICAgICAgICAgIGNvbmZpZy5tb2RlbFNldHRpbmdzID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIC8vIEluIHRoaXMgc2NlbmFyaW8sIHdlIHNob3VsZCB1c2UgYSBnZW5lcmljIG1vZGVsIHNldHRpbmdzXG4gICAgICAgICAgICAvLyBiZWNhdXNlIG5vbi1ncHQtNSBtb2RlbHMgYXJlIG5vdCBjb21wYXRpYmxlIHdpdGggdGhlIGRlZmF1bHQgZ3B0LTUgbW9kZWwgc2V0dGluZ3MuXG4gICAgICAgICAgICAvLyBUaGlzIGlzIGEgYmVzdC1lZmZvcnQgYXR0ZW1wdCB0byBtYWtlIHRoZSBhZ2VudCB3b3JrIHdpdGggbm9uLWdwdC01IG1vZGVscy5cbiAgICAgICAgICAgIHRoaXMubW9kZWxTZXR0aW5ncyA9IHt9O1xuICAgICAgICB9XG4gICAgICAgIC8vIC0tLSBSdW50aW1lIHdhcm5pbmcgZm9yIGhhbmRvZmYgb3V0cHV0IHR5cGUgY29tcGF0aWJpbGl0eSAtLS1cbiAgICAgICAgaWYgKGNvbmZpZy5oYW5kb2ZmT3V0cHV0VHlwZVdhcm5pbmdFbmFibGVkID09PSB1bmRlZmluZWQgfHxcbiAgICAgICAgICAgIGNvbmZpZy5oYW5kb2ZmT3V0cHV0VHlwZVdhcm5pbmdFbmFibGVkKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5oYW5kb2ZmcyAmJiB0aGlzLm91dHB1dFR5cGUpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBvdXRwdXRUeXBlcyA9IG5ldyBTZXQoW0pTT04uc3RyaW5naWZ5KHRoaXMub3V0cHV0VHlwZSldKTtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGggb2YgdGhpcy5oYW5kb2Zmcykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoJ291dHB1dFR5cGUnIGluIGggJiYgaC5vdXRwdXRUeXBlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBvdXRwdXRUeXBlcy5hZGQoSlNPTi5zdHJpbmdpZnkoaC5vdXRwdXRUeXBlKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoJ2FnZW50JyBpbiBoICYmIGguYWdlbnQub3V0cHV0VHlwZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgb3V0cHV0VHlwZXMuYWRkKEpTT04uc3RyaW5naWZ5KGguYWdlbnQub3V0cHV0VHlwZSkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChvdXRwdXRUeXBlcy5zaXplID4gMSkge1xuICAgICAgICAgICAgICAgICAgICBsb2dnZXIud2FybihgW0FnZW50XSBXYXJuaW5nOiBIYW5kb2ZmIGFnZW50cyBoYXZlIGRpZmZlcmVudCBvdXRwdXQgdHlwZXM6ICR7QXJyYXkuZnJvbShvdXRwdXRUeXBlcykuam9pbignLCAnKX0uIFlvdSBjYW4gbWFrZSBpdCB0eXBlLXNhZmUgYnkgdXNpbmcgQWdlbnQuY3JlYXRlKHsgLi4uIH0pIG1ldGhvZCBpbnN0ZWFkLmApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBPdXRwdXQgc2NoZW1hIG5hbWUuXG4gICAgICovXG4gICAgZ2V0IG91dHB1dFNjaGVtYU5hbWUoKSB7XG4gICAgICAgIGlmICh0aGlzLm91dHB1dFR5cGUgPT09ICd0ZXh0Jykge1xuICAgICAgICAgICAgcmV0dXJuICd0ZXh0JztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChpc1pvZE9iamVjdCh0aGlzLm91dHB1dFR5cGUpKSB7XG4gICAgICAgICAgICByZXR1cm4gJ1pvZE91dHB1dCc7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodHlwZW9mIHRoaXMub3V0cHV0VHlwZSA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm91dHB1dFR5cGUubmFtZTtcbiAgICAgICAgfVxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFVua25vd24gb3V0cHV0IHR5cGU6ICR7dGhpcy5vdXRwdXRUeXBlfWApO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBNYWtlcyBhIGNvcHkgb2YgdGhlIGFnZW50LCB3aXRoIHRoZSBnaXZlbiBhcmd1bWVudHMgY2hhbmdlZC4gRm9yIGV4YW1wbGUsIHlvdSBjb3VsZCBkbzpcbiAgICAgKlxuICAgICAqIGBgYFxuICAgICAqIGNvbnN0IG5ld0FnZW50ID0gYWdlbnQuY2xvbmUoeyBpbnN0cnVjdGlvbnM6ICdOZXcgaW5zdHJ1Y3Rpb25zJyB9KVxuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogQHBhcmFtIGNvbmZpZyAtIEEgcGFydGlhbCBjb25maWd1cmF0aW9uIHRvIGNoYW5nZS5cbiAgICAgKiBAcmV0dXJucyBBIG5ldyBhZ2VudCB3aXRoIHRoZSBnaXZlbiBjaGFuZ2VzLlxuICAgICAqL1xuICAgIGNsb25lKGNvbmZpZykge1xuICAgICAgICByZXR1cm4gbmV3IEFnZW50KHtcbiAgICAgICAgICAgIC4uLnRoaXMsXG4gICAgICAgICAgICAuLi5jb25maWcsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUcmFuc2Zvcm0gdGhpcyBhZ2VudCBpbnRvIGEgdG9vbCwgY2FsbGFibGUgYnkgb3RoZXIgYWdlbnRzLlxuICAgICAqXG4gICAgICogVGhpcyBpcyBkaWZmZXJlbnQgZnJvbSBoYW5kb2ZmcyBpbiB0d28gd2F5czpcbiAgICAgKiAxLiBJbiBoYW5kb2ZmcywgdGhlIG5ldyBhZ2VudCByZWNlaXZlcyB0aGUgY29udmVyc2F0aW9uIGhpc3RvcnkuIEluIHRoaXMgdG9vbCwgdGhlIG5ldyBhZ2VudFxuICAgICAqICAgIHJlY2VpdmVzIGdlbmVyYXRlZCBpbnB1dC5cbiAgICAgKiAyLiBJbiBoYW5kb2ZmcywgdGhlIG5ldyBhZ2VudCB0YWtlcyBvdmVyIHRoZSBjb252ZXJzYXRpb24uIEluIHRoaXMgdG9vbCwgdGhlIG5ldyBhZ2VudCBpc1xuICAgICAqICAgIGNhbGxlZCBhcyBhIHRvb2wsIGFuZCB0aGUgY29udmVyc2F0aW9uIGlzIGNvbnRpbnVlZCBieSB0aGUgb3JpZ2luYWwgYWdlbnQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gb3B0aW9ucyAtIE9wdGlvbnMgZm9yIHRoZSB0b29sLlxuICAgICAqIEByZXR1cm5zIEEgdG9vbCB0aGF0IHJ1bnMgdGhlIGFnZW50IGFuZCByZXR1cm5zIHRoZSBvdXRwdXQgdGV4dC5cbiAgICAgKi9cbiAgICBhc1Rvb2wob3B0aW9ucykge1xuICAgICAgICBjb25zdCB7IHRvb2xOYW1lLCB0b29sRGVzY3JpcHRpb24sIGN1c3RvbU91dHB1dEV4dHJhY3RvciwgbmVlZHNBcHByb3ZhbCwgcnVuQ29uZmlnLCBydW5PcHRpb25zLCBpc0VuYWJsZWQsIG9uU3RyZWFtLCB9ID0gb3B0aW9ucztcbiAgICAgICAgLy8gRXZlbnQgaGFuZGxlcnMgYXJlIHNjb3BlZCB0byB0aGlzIGFnZW50IHRvb2wgaW5zdGFuY2UgYW5kIGFyZSBub3Qgc2hhcmVkOyB3ZSBvbmx5IHN1cHBvcnQgcmVnaXN0cmF0aW9uIChubyByZW1vdmFsKSB0byBrZWVwIHRoZSBBUEkgc3VyZmFjZSBzbWFsbC5cbiAgICAgICAgY29uc3QgZXZlbnRIYW5kbGVycyA9IG5ldyBNYXAoKTtcbiAgICAgICAgY29uc3QgZW1pdEV2ZW50ID0gYXN5bmMgKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICAvLyBXZSBpbnRlbnRpb25hbGx5IGtlZXAgb25seSBhZGQgc2VtYW50aWNzIChubyBvZmYpIHRvIHJlZHVjZSBzdXJmYWNlIGFyZWE7IGhhbmRsZXJzIGFyZSBzY29wZWQgdG8gdGhpcyBhZ2VudCB0b29sIGluc3RhbmNlLlxuICAgICAgICAgICAgY29uc3Qgc3BlY2lmaWMgPSBldmVudEhhbmRsZXJzLmdldChldmVudC5ldmVudC50eXBlKTtcbiAgICAgICAgICAgIGNvbnN0IHdpbGRjYXJkID0gZXZlbnRIYW5kbGVycy5nZXQoJyonKTtcbiAgICAgICAgICAgIGNvbnN0IGNhbmRpZGF0ZXMgPSBbXG4gICAgICAgICAgICAgICAgLi4uKG9uU3RyZWFtID8gW29uU3RyZWFtXSA6IFtdKSxcbiAgICAgICAgICAgICAgICAuLi4oc3BlY2lmaWMgPyBBcnJheS5mcm9tKHNwZWNpZmljKSA6IFtdKSxcbiAgICAgICAgICAgICAgICAuLi4od2lsZGNhcmQgPyBBcnJheS5mcm9tKHdpbGRjYXJkKSA6IFtdKSxcbiAgICAgICAgICAgIF07XG4gICAgICAgICAgICAvLyBSdW4gYWxsIGhhbmRsZXJzIGluIHBhcmFsbGVsIHNvIGEgc2xvdyBvblN0cmVhbSBjYWxsYmFjayBkb2VzIG5vdCBibG9jayBvbiguLi4pIGhhbmRsZXJzIChhbmQgdmljZSB2ZXJzYSkuXG4gICAgICAgICAgICBhd2FpdCBQcm9taXNlLmFsbFNldHRsZWQoY2FuZGlkYXRlcy5tYXAoKGhhbmRsZXIpID0+IFByb21pc2UucmVzb2x2ZSgpLnRoZW4oKCkgPT4gaGFuZGxlcihldmVudCkpKSk7XG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IGJhc2VUb29sID0gdG9vbCh7XG4gICAgICAgICAgICBuYW1lOiB0b29sTmFtZSA/PyB0b0Z1bmN0aW9uVG9vbE5hbWUodGhpcy5uYW1lKSxcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiB0b29sRGVzY3JpcHRpb24gPz8gJycsXG4gICAgICAgICAgICBwYXJhbWV0ZXJzOiBBZ2VudEFzVG9vbE5lZWRBcHByb3ZhbFNjaGFtZSxcbiAgICAgICAgICAgIHN0cmljdDogdHJ1ZSxcbiAgICAgICAgICAgIG5lZWRzQXBwcm92YWwsXG4gICAgICAgICAgICBpc0VuYWJsZWQsXG4gICAgICAgICAgICBleGVjdXRlOiBhc3luYyAoZGF0YSwgY29udGV4dCwgZGV0YWlscykgPT4ge1xuICAgICAgICAgICAgICAgIGlmICghaXNBZ2VudFRvb2xJbnB1dChkYXRhKSkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTW9kZWxCZWhhdmlvckVycm9yKCdBZ2VudCB0b29sIGNhbGxlZCB3aXRoIGludmFsaWQgaW5wdXQnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3QgcnVubmVyID0gbmV3IFJ1bm5lcihydW5Db25maWcgPz8ge30pO1xuICAgICAgICAgICAgICAgIC8vIE9ubHkgZmxpcCB0byBzdHJlYW1pbmcgbW9kZSB3aGVuIGEgaGFuZGxlciBpcyBwcm92aWRlZCB0byBhdm9pZCBleHRyYSBvdmVyaGVhZCBmb3IgY2FsbGVycyB0aGF0IGRvIG5vdCBuZWVkIGV2ZW50cy5cbiAgICAgICAgICAgICAgICAvLyBGbGlwIHRvIHN0cmVhbWluZyBpZiBlaXRoZXIgYSBsZWdhY3kgb25TdHJlYW0gY2FsbGJhY2sgb3IgZXZlbnQgaGFuZGxlcnMgYXJlIHJlZ2lzdGVyZWQ7IG90aGVyd2lzZSBzdGF5IG9uIHRoZSBub24tc3RyZWFtIHBhdGggdG8gYXZvaWQgZXh0cmEgb3ZlcmhlYWQuXG4gICAgICAgICAgICAgICAgY29uc3Qgc2hvdWxkU3RyZWFtID0gdHlwZW9mIG9uU3RyZWFtID09PSAnZnVuY3Rpb24nIHx8IGV2ZW50SGFuZGxlcnMuc2l6ZSA+IDA7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gc2hvdWxkU3RyZWFtXG4gICAgICAgICAgICAgICAgICAgID8gYXdhaXQgcnVubmVyLnJ1bih0aGlzLCBkYXRhLmlucHV0LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250ZXh0LFxuICAgICAgICAgICAgICAgICAgICAgICAgLi4uKHJ1bk9wdGlvbnMgPz8ge30pLFxuICAgICAgICAgICAgICAgICAgICAgICAgc3RyZWFtOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICA6IGF3YWl0IHJ1bm5lci5ydW4odGhpcywgZGF0YS5pbnB1dCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGV4dCxcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLihydW5PcHRpb25zID8/IHt9KSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgY29uc3Qgc3RyZWFtUGF5bG9hZCA9IHtcbiAgICAgICAgICAgICAgICAgICAgYWdlbnQ6IHRoaXMsXG4gICAgICAgICAgICAgICAgICAgIHRvb2xDYWxsOiBkZXRhaWxzPy50b29sQ2FsbCxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGlmIChzaG91bGRTdHJlYW0pIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gQ2FzdCB0aHJvdWdoIHVua25vd246IHRoZSBhc3luYyBpdGVyYXRvciBzaGFwZSBtYXRjaGVzIGFuZCB3ZSB3YW50IHRvIGRyYWluIHRoZSBzdHJlYW0gZm9yIHNpZGUgZWZmZWN0cyB3aGlsZSBrZWVwaW5nIHRoZSBwdWJsaWMgQVBJIHN0YWJsZS5cbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3RyZWFtUmVzdWx0ID0gcmVzdWx0O1xuICAgICAgICAgICAgICAgICAgICAvLyBEcmFpbiB0aGUgc3RyZWFtIHRvIGRlbGl2ZXIgZXZlcnkgZXZlbnQgdG8gcmVnaXN0ZXJlZCBoYW5kbGVyczsgZW5zdXJlIGNvbXBsZXRpb24gYXdhaXRlZCBzbyB0aGUgbmVzdGVkIHJ1biBmaW5pc2hlcyBiZWZvcmUgcmV0dXJuaW5nLlxuICAgICAgICAgICAgICAgICAgICBmb3IgYXdhaXQgKGNvbnN0IGV2ZW50IG9mIHN0cmVhbVJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgZW1pdEV2ZW50KHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBldmVudCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5zdHJlYW1QYXlsb2FkLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgc3RyZWFtUmVzdWx0LmNvbXBsZXRlZDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3QgY29tcGxldGVkUmVzdWx0ID0gcmVzdWx0O1xuICAgICAgICAgICAgICAgIGNvbnN0IHVzZXNTdG9wQXRUb29sTmFtZXMgPSB0eXBlb2YgdGhpcy50b29sVXNlQmVoYXZpb3IgPT09ICdvYmplY3QnICYmXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudG9vbFVzZUJlaGF2aW9yICE9PSBudWxsICYmXG4gICAgICAgICAgICAgICAgICAgICdzdG9wQXRUb29sTmFtZXMnIGluIHRoaXMudG9vbFVzZUJlaGF2aW9yO1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgY3VzdG9tT3V0cHV0RXh0cmFjdG9yICE9PSAnZnVuY3Rpb24nICYmXG4gICAgICAgICAgICAgICAgICAgIHVzZXNTdG9wQXRUb29sTmFtZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKGBZb3UncmUgcGFzc2luZyB0aGUgYWdlbnQgKG5hbWU6ICR7dGhpcy5uYW1lfSkgd2l0aCB0b29sVXNlQmVoYXZpb3Iuc3RvcEF0VG9vbE5hbWVzIGNvbmZpZ3VyZWQgYXMgYSB0b29sIHRvIGEgZGlmZmVyZW50IGFnZW50OyB0aGlzIG1heSBub3Qgd29yayBhcyB5b3UgZXhwZWN0LiBZb3UgbWF5IHdhbnQgdG8gaGF2ZSBhIHdyYXBwZXIgZnVuY3Rpb24gdG9vbCB0byBjb25zaXN0ZW50bHkgcmV0dXJuIHRoZSBmaW5hbCBvdXRwdXQuYCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IG91dHB1dFRleHQgPSB0eXBlb2YgY3VzdG9tT3V0cHV0RXh0cmFjdG9yID09PSAnZnVuY3Rpb24nXG4gICAgICAgICAgICAgICAgICAgID8gYXdhaXQgY3VzdG9tT3V0cHV0RXh0cmFjdG9yKGNvbXBsZXRlZFJlc3VsdClcbiAgICAgICAgICAgICAgICAgICAgOiBnZXRPdXRwdXRUZXh0KGNvbXBsZXRlZFJlc3VsdC5yYXdSZXNwb25zZXNbY29tcGxldGVkUmVzdWx0LnJhd1Jlc3BvbnNlcy5sZW5ndGggLSAxXSk7XG4gICAgICAgICAgICAgICAgaWYgKGRldGFpbHM/LnRvb2xDYWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIHNhdmVBZ2VudFRvb2xSdW5SZXN1bHQoZGV0YWlscy50b29sQ2FsbCwgY29tcGxldGVkUmVzdWx0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIG91dHB1dFRleHQ7XG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgYWdlbnRUb29sID0ge1xuICAgICAgICAgICAgLi4uYmFzZVRvb2wsXG4gICAgICAgICAgICBvbjogKG5hbWUsIGhhbmRsZXIpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBzZXQgPSBldmVudEhhbmRsZXJzLmdldChuYW1lKSA/PyBuZXcgU2V0KCk7XG4gICAgICAgICAgICAgICAgc2V0LmFkZChoYW5kbGVyKTtcbiAgICAgICAgICAgICAgICBldmVudEhhbmRsZXJzLnNldChuYW1lLCBzZXQpO1xuICAgICAgICAgICAgICAgIHJldHVybiBhZ2VudFRvb2w7XG4gICAgICAgICAgICB9LFxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gYWdlbnRUb29sO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBzeXN0ZW0gcHJvbXB0IGZvciB0aGUgYWdlbnQuXG4gICAgICpcbiAgICAgKiBJZiB0aGUgYWdlbnQgaGFzIGEgZnVuY3Rpb24gYXMgaXRzIGluc3RydWN0aW9ucywgdGhpcyBmdW5jdGlvbiB3aWxsIGJlIGNhbGxlZCB3aXRoIHRoZVxuICAgICAqIHJ1bkNvbnRleHQgYW5kIHRoZSBhZ2VudCBpbnN0YW5jZS5cbiAgICAgKi9cbiAgICBhc3luYyBnZXRTeXN0ZW1Qcm9tcHQocnVuQ29udGV4dCkge1xuICAgICAgICBpZiAodHlwZW9mIHRoaXMuaW5zdHJ1Y3Rpb25zID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5pbnN0cnVjdGlvbnMocnVuQ29udGV4dCwgdGhpcyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuaW5zdHJ1Y3Rpb25zO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBwcm9tcHQgdGVtcGxhdGUgZm9yIHRoZSBhZ2VudCwgaWYgZGVmaW5lZC5cbiAgICAgKlxuICAgICAqIElmIHRoZSBhZ2VudCBoYXMgYSBmdW5jdGlvbiBhcyBpdHMgcHJvbXB0LCB0aGlzIGZ1bmN0aW9uIHdpbGwgYmUgY2FsbGVkIHdpdGggdGhlXG4gICAgICogcnVuQ29udGV4dCBhbmQgdGhlIGFnZW50IGluc3RhbmNlLlxuICAgICAqL1xuICAgIGFzeW5jIGdldFByb21wdChydW5Db250ZXh0KSB7XG4gICAgICAgIGlmICh0eXBlb2YgdGhpcy5wcm9tcHQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIHJldHVybiBhd2FpdCB0aGlzLnByb21wdChydW5Db250ZXh0LCB0aGlzKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5wcm9tcHQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEZldGNoZXMgdGhlIGF2YWlsYWJsZSB0b29scyBmcm9tIHRoZSBNQ1Agc2VydmVycy5cbiAgICAgKiBAcmV0dXJucyB0aGUgTUNQIHBvd2VyZWQgdG9vbHNcbiAgICAgKi9cbiAgICBhc3luYyBnZXRNY3BUb29scyhydW5Db250ZXh0KSB7XG4gICAgICAgIGlmICh0aGlzLm1jcFNlcnZlcnMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgcmV0dXJuIGdldEFsbE1jcFRvb2xzKHtcbiAgICAgICAgICAgICAgICBtY3BTZXJ2ZXJzOiB0aGlzLm1jcFNlcnZlcnMsXG4gICAgICAgICAgICAgICAgcnVuQ29udGV4dCxcbiAgICAgICAgICAgICAgICBhZ2VudDogdGhpcyxcbiAgICAgICAgICAgICAgICBjb252ZXJ0U2NoZW1hc1RvU3RyaWN0OiBmYWxzZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBbXTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQUxsIGFnZW50IHRvb2xzLCBpbmNsdWRpbmcgdGhlIE1DUGwgYW5kIGZ1bmN0aW9uIHRvb2xzLlxuICAgICAqXG4gICAgICogQHJldHVybnMgYWxsIGNvbmZpZ3VyZWQgdG9vbHNcbiAgICAgKi9cbiAgICBhc3luYyBnZXRBbGxUb29scyhydW5Db250ZXh0KSB7XG4gICAgICAgIGNvbnN0IG1jcFRvb2xzID0gYXdhaXQgdGhpcy5nZXRNY3BUb29scyhydW5Db250ZXh0KTtcbiAgICAgICAgY29uc3QgZW5hYmxlZFRvb2xzID0gW107XG4gICAgICAgIGZvciAoY29uc3QgY2FuZGlkYXRlIG9mIHRoaXMudG9vbHMpIHtcbiAgICAgICAgICAgIGlmIChjYW5kaWRhdGUudHlwZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgIGNvbnN0IG1heWJlSXNFbmFibGVkID0gY2FuZGlkYXRlLmlzRW5hYmxlZDtcbiAgICAgICAgICAgICAgICBjb25zdCBlbmFibGVkID0gdHlwZW9mIG1heWJlSXNFbmFibGVkID09PSAnZnVuY3Rpb24nXG4gICAgICAgICAgICAgICAgICAgID8gYXdhaXQgbWF5YmVJc0VuYWJsZWQocnVuQ29udGV4dCwgdGhpcylcbiAgICAgICAgICAgICAgICAgICAgOiB0eXBlb2YgbWF5YmVJc0VuYWJsZWQgPT09ICdib29sZWFuJ1xuICAgICAgICAgICAgICAgICAgICAgICAgPyBtYXliZUlzRW5hYmxlZFxuICAgICAgICAgICAgICAgICAgICAgICAgOiB0cnVlO1xuICAgICAgICAgICAgICAgIGlmICghZW5hYmxlZCkge1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbmFibGVkVG9vbHMucHVzaChjYW5kaWRhdGUpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBbLi4ubWNwVG9vbHMsIC4uLmVuYWJsZWRUb29sc107XG4gICAgfVxuICAgIGhhc0V4cGxpY2l0VG9vbENvbmZpZygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3Rvb2xzRXhwbGljaXRseUNvbmZpZ3VyZWQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIGhhbmRvZmZzIHRoYXQgc2hvdWxkIGJlIGV4cG9zZWQgdG8gdGhlIG1vZGVsIGZvciB0aGUgY3VycmVudCBydW4uXG4gICAgICpcbiAgICAgKiBIYW5kb2ZmcyB0aGF0IHByb3ZpZGUgYW4gYGlzRW5hYmxlZGAgZnVuY3Rpb24gcmV0dXJuaW5nIGBmYWxzZWAgYXJlIG9taXR0ZWQuXG4gICAgICovXG4gICAgYXN5bmMgZ2V0RW5hYmxlZEhhbmRvZmZzKHJ1bkNvbnRleHQpIHtcbiAgICAgICAgY29uc3QgaGFuZG9mZnMgPSB0aGlzLmhhbmRvZmZzPy5tYXAoKGgpID0+IGdldEhhbmRvZmYoaCkpID8/IFtdO1xuICAgICAgICBjb25zdCBlbmFibGVkID0gW107XG4gICAgICAgIGZvciAoY29uc3QgaGFuZG9mZiBvZiBoYW5kb2Zmcykge1xuICAgICAgICAgICAgaWYgKGF3YWl0IGhhbmRvZmYuaXNFbmFibGVkKHsgcnVuQ29udGV4dCwgYWdlbnQ6IHRoaXMgfSkpIHtcbiAgICAgICAgICAgICAgICBlbmFibGVkLnB1c2goaGFuZG9mZik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGVuYWJsZWQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFByb2Nlc3NlcyB0aGUgZmluYWwgb3V0cHV0IG9mIHRoZSBhZ2VudC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBvdXRwdXQgLSBUaGUgb3V0cHV0IG9mIHRoZSBhZ2VudC5cbiAgICAgKiBAcmV0dXJucyBUaGUgcGFyc2VkIG91dC5cbiAgICAgKi9cbiAgICBwcm9jZXNzRmluYWxPdXRwdXQob3V0cHV0KSB7XG4gICAgICAgIGlmICh0aGlzLm91dHB1dFR5cGUgPT09ICd0ZXh0Jykge1xuICAgICAgICAgICAgcmV0dXJuIG91dHB1dDtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIHRoaXMub3V0cHV0VHlwZSA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgIGNvbnN0IHBhcnNlZCA9IEpTT04ucGFyc2Uob3V0cHV0KTtcbiAgICAgICAgICAgIGlmIChpc1pvZE9iamVjdCh0aGlzLm91dHB1dFR5cGUpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMub3V0cHV0VHlwZS5wYXJzZShwYXJzZWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHBhcnNlZDtcbiAgICAgICAgfVxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFVua25vd24gb3V0cHV0IHR5cGU6ICR7dGhpcy5vdXRwdXRUeXBlfWApO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgSlNPTiByZXByZXNlbnRhdGlvbiBvZiB0aGUgYWdlbnQsIHdoaWNoIGlzIHNlcmlhbGl6YWJsZS5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIEEgSlNPTiBvYmplY3QgY29udGFpbmluZyB0aGUgYWdlbnQncyBuYW1lLlxuICAgICAqL1xuICAgIHRvSlNPTigpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG5hbWU6IHRoaXMubmFtZSxcbiAgICAgICAgfTtcbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1hZ2VudC5tanMubWFwIiwiLyoqXG4gKiBEZWZpbmVzIGFuIGlucHV0IGd1YXJkcmFpbCBkZWZpbml0aW9uLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZGVmaW5lSW5wdXRHdWFyZHJhaWwoeyBuYW1lLCBleGVjdXRlLCBydW5JblBhcmFsbGVsID0gdHJ1ZSwgfSkge1xuICAgIHJldHVybiB7XG4gICAgICAgIHR5cGU6ICdpbnB1dCcsXG4gICAgICAgIG5hbWUsXG4gICAgICAgIHJ1bkluUGFyYWxsZWwsXG4gICAgICAgIGd1YXJkcmFpbEZ1bmN0aW9uOiBleGVjdXRlLFxuICAgICAgICBhc3luYyBydW4oYXJncykge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBndWFyZHJhaWw6IHsgdHlwZTogJ2lucHV0JywgbmFtZSB9LFxuICAgICAgICAgICAgICAgIG91dHB1dDogYXdhaXQgZXhlY3V0ZShhcmdzKSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0sXG4gICAgfTtcbn1cbi8qKlxuICogQ3JlYXRlcyBhbiBvdXRwdXQgZ3VhcmRyYWlsIGRlZmluaXRpb24uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkZWZpbmVPdXRwdXRHdWFyZHJhaWwoeyBuYW1lLCBleGVjdXRlLCB9KSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogJ291dHB1dCcsXG4gICAgICAgIG5hbWUsXG4gICAgICAgIGd1YXJkcmFpbEZ1bmN0aW9uOiBleGVjdXRlLFxuICAgICAgICBhc3luYyBydW4oYXJncykge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBndWFyZHJhaWw6IHsgdHlwZTogJ291dHB1dCcsIG5hbWUgfSxcbiAgICAgICAgICAgICAgICBhZ2VudDogYXJncy5hZ2VudCxcbiAgICAgICAgICAgICAgICBhZ2VudE91dHB1dDogYXJncy5hZ2VudE91dHB1dCxcbiAgICAgICAgICAgICAgICBvdXRwdXQ6IGF3YWl0IGV4ZWN1dGUoYXJncyksXG4gICAgICAgICAgICB9O1xuICAgICAgICB9LFxuICAgIH07XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1ndWFyZHJhaWwubWpzLm1hcCIsImxldCBERUZBVUxUX1BST1ZJREVSO1xuLyoqXG4gKiBTZXQgdGhlIG1vZGVsIHByb3ZpZGVyIHVzZWQgd2hlbiBubyBleHBsaWNpdCBwcm92aWRlciBpcyBzdXBwbGllZC5cbiAqXG4gKiBAcGFyYW0gcHJvdmlkZXIgLSBUaGUgcHJvdmlkZXIgdG8gdXNlIGJ5IGRlZmF1bHQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzZXREZWZhdWx0TW9kZWxQcm92aWRlcihwcm92aWRlcikge1xuICAgIERFRkFVTFRfUFJPVklERVIgPSBwcm92aWRlcjtcbn1cbi8qKlxuICogUmV0dXJucyB0aGUgZGVmYXVsdCBtb2RlbCBwcm92aWRlci5cbiAqXG4gKiBAcmV0dXJucyBUaGUgZGVmYXVsdCBtb2RlbCBwcm92aWRlci5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldERlZmF1bHRNb2RlbFByb3ZpZGVyKCkge1xuICAgIGlmICh0eXBlb2YgREVGQVVMVF9QUk9WSURFUiA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdObyBkZWZhdWx0IG1vZGVsIHByb3ZpZGVyIHNldC4gTWFrZSBzdXJlIHRvIHNldCBhIHByb3ZpZGVyIHVzaW5nIHNldERlZmF1bHRNb2RlbFByb3ZpZGVyIGJlZm9yZSBjYWxsaW5nIGdldERlZmF1bHRNb2RlbFByb3ZpZGVyIG9yIHBhc3MgYW4gZXhwbGljaXQgcHJvdmlkZXIuJyk7XG4gICAgfVxuICAgIHJldHVybiBERUZBVUxUX1BST1ZJREVSO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cHJvdmlkZXJzLm1qcy5tYXAiLCJpbXBvcnQgeyB6IH0gZnJvbSAnem9kJztcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIFNoYXJlZCBiYXNlIHR5cGVzXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vKipcbiAqIEV2ZXJ5IGl0ZW0gaW4gdGhlIHByb3RvY29sIHByb3ZpZGVzIGEgYHByb3ZpZGVyRGF0YWAgZmllbGQgdG8gYWNjb21tb2RhdGUgY3VzdG9tIGZ1bmN0aW9uYWxpdHlcbiAqIG9yIG5ldyBmaWVsZHNcbiAqL1xuZXhwb3J0IGNvbnN0IFNoYXJlZEJhc2UgPSB6Lm9iamVjdCh7XG4gICAgLyoqXG4gICAgICogQWRkaXRpb25hbCBvcHRpb25hbCBwcm92aWRlciBzcGVjaWZpYyBkYXRhLiBVc2VkIGZvciBjdXN0b20gZnVuY3Rpb25hbGl0eSBvciBtb2RlbCBwcm92aWRlclxuICAgICAqIHNwZWNpZmljIGZpZWxkcy5cbiAgICAgKi9cbiAgICBwcm92aWRlckRhdGE6IHoucmVjb3JkKHouc3RyaW5nKCksIHouYW55KCkpLm9wdGlvbmFsKCksXG59KTtcbi8qKlxuICogRXZlcnkgaXRlbSBoYXMgYSBzaGFyZWQgb2Ygc2hhcmVkIGl0ZW0gZGF0YSBpbmNsdWRpbmcgYW4gb3B0aW9uYWwgSUQuXG4gKi9cbmV4cG9ydCBjb25zdCBJdGVtQmFzZSA9IFNoYXJlZEJhc2UuZXh0ZW5kKHtcbiAgICAvKipcbiAgICAgKiBBbiBJRCB0byBpZGVudGlmeSB0aGUgaXRlbS4gVGhpcyBpcyBvcHRpb25hbCBieSBkZWZhdWx0LiBJZiBhIG1vZGVsIHByb3ZpZGVyIGFic29sdXRlbHlcbiAgICAgKiByZXF1aXJlcyB0aGlzIGZpZWxkLCBpdCB3aWxsIGJlIHZhbGlkYXRlZCBvbiB0aGUgbW9kZWwgbGV2ZWwuXG4gICAgICovXG4gICAgaWQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbn0pO1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gQ29udGVudCB0eXBlc1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuZXhwb3J0IGNvbnN0IFJlZnVzYWwgPSBTaGFyZWRCYXNlLmV4dGVuZCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdyZWZ1c2FsJyksXG4gICAgLyoqXG4gICAgICogVGhlIHJlZnVzYWwgZXhwbGFuYXRpb24gZnJvbSB0aGUgbW9kZWwuXG4gICAgICovXG4gICAgcmVmdXNhbDogei5zdHJpbmcoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IE91dHB1dFRleHQgPSBTaGFyZWRCYXNlLmV4dGVuZCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdvdXRwdXRfdGV4dCcpLFxuICAgIC8qKlxuICAgICAqIFRoZSB0ZXh0IG91dHB1dCBmcm9tIHRoZSBtb2RlbC5cbiAgICAgKi9cbiAgICB0ZXh0OiB6LnN0cmluZygpLFxufSk7XG5leHBvcnQgY29uc3QgSW5wdXRUZXh0ID0gU2hhcmVkQmFzZS5leHRlbmQoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnaW5wdXRfdGV4dCcpLFxuICAgIC8qKlxuICAgICAqIEEgdGV4dCBpbnB1dCBmb3IgZXhhbXBsZSBhIG1lc3NhZ2UgZnJvbSBhIHVzZXJcbiAgICAgKi9cbiAgICB0ZXh0OiB6LnN0cmluZygpLFxufSk7XG5leHBvcnQgY29uc3QgUmVhc29uaW5nVGV4dCA9IFNoYXJlZEJhc2UuZXh0ZW5kKHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ3JlYXNvbmluZ190ZXh0JyksXG4gICAgLyoqXG4gICAgICogQSB0ZXh0IGlucHV0IGZvciBleGFtcGxlIGEgbWVzc2FnZSBmcm9tIGEgdXNlclxuICAgICAqL1xuICAgIHRleHQ6IHouc3RyaW5nKCksXG59KTtcbmV4cG9ydCBjb25zdCBJbnB1dEltYWdlID0gU2hhcmVkQmFzZS5leHRlbmQoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnaW5wdXRfaW1hZ2UnKSxcbiAgICAvKipcbiAgICAgKiBUaGUgaW1hZ2UgaW5wdXQgdG8gdGhlIG1vZGVsLiBDb3VsZCBiZSBwcm92aWRlZCBpbmxpbmUgKGBpbWFnZWApLCBhcyBhIFVSTCwgb3IgYnkgcmVmZXJlbmNlIHRvIGFcbiAgICAgKiBwcmV2aW91c2x5IHVwbG9hZGVkIE9wZW5BSSBmaWxlLlxuICAgICAqL1xuICAgIGltYWdlOiB6XG4gICAgICAgIC8vIDEuIGltYWdlIGRhdGFcbiAgICAgICAgLnN0cmluZygpXG4gICAgICAgIC8vIDIuZmlsZSBJRCBmb3IgdGhlIGltYWdlXG4gICAgICAgIC5vcih6Lm9iamVjdCh7IGlkOiB6LnN0cmluZygpLmRlc2NyaWJlKCdPcGVuQUkgZmlsZSBJRCcpIH0pKVxuICAgICAgICAuZGVzY3JpYmUoJ0VpdGhlciBiYXNlNjQgZW5jb2RlZCBpbWFnZSBkYXRhLCBhIGRhdGEgVVJMLCBvciBhbiBvYmplY3Qgd2l0aCBhIGZpbGUgSUQuJylcbiAgICAgICAgLm9wdGlvbmFsKCksXG4gICAgLyoqXG4gICAgICogQ29udHJvbHMgdGhlIGxldmVsIG9mIGRldGFpbCByZXF1ZXN0ZWQgZm9yIGltYWdlIHVuZGVyc3RhbmRpbmcgdGFza3MuXG4gICAgICogRnV0dXJlIG1vZGVscyBtYXkgYWRkIG5ldyB2YWx1ZXMsIHRoZXJlZm9yZSB0aGlzIGFjY2VwdHMgYW55IHN0cmluZy5cbiAgICAgKi9cbiAgICBkZXRhaWw6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IElucHV0RmlsZSA9IFNoYXJlZEJhc2UuZXh0ZW5kKHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ2lucHV0X2ZpbGUnKSxcbiAgICAvKipcbiAgICAgKiBUaGUgZmlsZSBpbnB1dCB0byB0aGUgbW9kZWwuIENvdWxkIGJlIHJhdyBkYXRhLCBhIFVSTCwgb3IgYW4gT3BlbkFJIGZpbGUgSUQuXG4gICAgICovXG4gICAgZmlsZTogelxuICAgICAgICAvLyAxLiBmaWxlIGRhdGFcbiAgICAgICAgLnN0cmluZygpXG4gICAgICAgIC5kZXNjcmliZSgnRWl0aGVyIGJhc2U2NCBlbmNvZGVkIGZpbGUgZGF0YSBvciBhIHB1YmxpY2x5IGFjY2Vzc2libGUgZmlsZSBVUkwnKVxuICAgICAgICAvLyAyLiBmaWxlIElEXG4gICAgICAgIC5vcih6Lm9iamVjdCh7IGlkOiB6LnN0cmluZygpLmRlc2NyaWJlKCdPcGVuQUkgZmlsZSBJRCcpIH0pKVxuICAgICAgICAvLyAzLiBwdWJsaWNseSBhY2Nlc3NpYmxlIGZpbGUgVVJMXG4gICAgICAgIC5vcih6Lm9iamVjdCh7IHVybDogei5zdHJpbmcoKS5kZXNjcmliZSgnUHVibGljbHkgYWNjZXNzaWJsZSBmaWxlIFVSTCcpIH0pKVxuICAgICAgICAuZGVzY3JpYmUoJ0NvbnRlbnRzIG9mIHRoZSBmaWxlIG9yIGFuIG9iamVjdCB3aXRoIGEgZmlsZSBJRC4nKVxuICAgICAgICAub3B0aW9uYWwoKSxcbiAgICAvKipcbiAgICAgKiBPcHRpb25hbCBmaWxlbmFtZSBtZXRhZGF0YSB3aGVuIHVwbG9hZGluZyBmaWxlIGRhdGEgaW5saW5lLlxuICAgICAqL1xuICAgIGZpbGVuYW1lOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG59KTtcbmV4cG9ydCBjb25zdCBBdWRpb0NvbnRlbnQgPSBTaGFyZWRCYXNlLmV4dGVuZCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdhdWRpbycpLFxuICAgIC8qKlxuICAgICAqIFRoZSBhdWRpbyBpbnB1dCB0byB0aGUgbW9kZWwuIENvdWxkIGJlIGJhc2U2NCBlbmNvZGVkIGF1ZGlvIGRhdGEgb3IgYW4gb2JqZWN0IHdpdGggYSBmaWxlIElELlxuICAgICAqL1xuICAgIGF1ZGlvOiB6XG4gICAgICAgIC5zdHJpbmcoKVxuICAgICAgICAub3Ioei5vYmplY3Qoe1xuICAgICAgICBpZDogei5zdHJpbmcoKSxcbiAgICB9KSlcbiAgICAgICAgLmRlc2NyaWJlKCdCYXNlNjQgZW5jb2RlZCBhdWRpbyBkYXRhIG9yIGZpbGUgaWQnKSxcbiAgICAvKipcbiAgICAgKiBUaGUgZm9ybWF0IG9mIHRoZSBhdWRpby5cbiAgICAgKi9cbiAgICBmb3JtYXQ6IHouc3RyaW5nKCkubnVsbGFibGUoKS5vcHRpb25hbCgpLFxuICAgIC8qKlxuICAgICAqIFRoZSB0cmFuc2NyaXB0IG9mIHRoZSBhdWRpby5cbiAgICAgKi9cbiAgICB0cmFuc2NyaXB0OiB6LnN0cmluZygpLm51bGxhYmxlKCkub3B0aW9uYWwoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IEltYWdlQ29udGVudCA9IFNoYXJlZEJhc2UuZXh0ZW5kKHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ2ltYWdlJyksXG4gICAgLyoqXG4gICAgICogVGhlIGltYWdlIGlucHV0IHRvIHRoZSBtb2RlbC4gQ291bGQgYmUgYmFzZTY0IGVuY29kZWQgaW1hZ2UgZGF0YSBvciBhbiBvYmplY3Qgd2l0aCBhIGZpbGUgSUQuXG4gICAgICovXG4gICAgaW1hZ2U6IHouc3RyaW5nKCkuZGVzY3JpYmUoJ0Jhc2U2NCBlbmNvZGVkIGltYWdlIGRhdGEnKSxcbn0pO1xuZXhwb3J0IGNvbnN0IFRvb2xPdXRwdXRUZXh0ID0gU2hhcmVkQmFzZS5leHRlbmQoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgndGV4dCcpLFxuICAgIC8qKlxuICAgICAqIFRoZSB0ZXh0IG91dHB1dCBmcm9tIHRoZSBtb2RlbC5cbiAgICAgKi9cbiAgICB0ZXh0OiB6LnN0cmluZygpLFxufSk7XG5jb25zdCBJbWFnZURhdGFPYmplY3RTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgZGF0YTogelxuICAgICAgICAudW5pb24oW3ouc3RyaW5nKCksIHouaW5zdGFuY2VvZihVaW50OEFycmF5KV0pXG4gICAgICAgIC5kZXNjcmliZSgnQmFzZTY0IGltYWdlIGRhdGEsIG9yIHJhdyBieXRlcyB0aGF0IHdpbGwgYmUgYmFzZTY0IGVuY29kZWQgYXV0b21hdGljYWxseS4nKSxcbiAgICBtZWRpYVR5cGU6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbn0pO1xuY29uc3QgSW1hZ2VVcmxPYmplY3RTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdXJsOiB6XG4gICAgICAgIC5zdHJpbmcoKVxuICAgICAgICAuZGVzY3JpYmUoJ1B1YmxpY2x5IGFjY2Vzc2libGUgVVJMIHBvaW50aW5nIHRvIHRoZSBpbWFnZSBjb250ZW50JyksXG59KTtcbmNvbnN0IEltYWdlRmlsZUlkT2JqZWN0U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIGZpbGVJZDogelxuICAgICAgICAuc3RyaW5nKClcbiAgICAgICAgLmRlc2NyaWJlKCdPcGVuQUkgZmlsZSBJRCByZWZlcmVuY2luZyB1cGxvYWRlZCBpbWFnZSBjb250ZW50JyksXG59KTtcbmNvbnN0IEltYWdlT2JqZWN0U2NoZW1hID0gelxuICAgIC51bmlvbihbSW1hZ2VEYXRhT2JqZWN0U2NoZW1hLCBJbWFnZVVybE9iamVjdFNjaGVtYSwgSW1hZ2VGaWxlSWRPYmplY3RTY2hlbWFdKVxuICAgIC5kZXNjcmliZSgnSW5saW5lIGltYWdlIGRhdGEgb3IgcmVmZXJlbmNlcyB0byB1cGxvYWRlZCBjb250ZW50LicpO1xuY29uc3QgRmlsZURhdGFPYmplY3RTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgZGF0YTogelxuICAgICAgICAudW5pb24oW3ouc3RyaW5nKCksIHouaW5zdGFuY2VvZihVaW50OEFycmF5KV0pXG4gICAgICAgIC5kZXNjcmliZSgnQmFzZTY0IGVuY29kZWQgZmlsZSBkYXRhLCBvciByYXcgYnl0ZXMgdGhhdCB3aWxsIGJlIGVuY29kZWQgYXV0b21hdGljYWxseS4nKSxcbiAgICBtZWRpYVR5cGU6IHpcbiAgICAgICAgLnN0cmluZygpXG4gICAgICAgIC5kZXNjcmliZSgnSUFOQSBtZWRpYSB0eXBlIGRlc2NyaWJpbmcgdGhlIGZpbGUgY29udGVudHMnKSxcbiAgICBmaWxlbmFtZTogei5zdHJpbmcoKS5kZXNjcmliZSgnRmlsZW5hbWUgYXNzb2NpYXRlZCB3aXRoIHRoZSBpbmxpbmUgZGF0YScpLFxufSk7XG5jb25zdCBGaWxlVXJsT2JqZWN0U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHVybDogei5zdHJpbmcoKS5kZXNjcmliZSgnUHVibGljbHkgYWNjZXNzaWJsZSBVUkwgZm9yIHRoZSBmaWxlIGNvbnRlbnQnKSxcbiAgICBmaWxlbmFtZTogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxufSk7XG5jb25zdCBGaWxlSWRPYmplY3RTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgaWQ6IHouc3RyaW5nKCkuZGVzY3JpYmUoJ09wZW5BSSBmaWxlIElEIHJlZmVyZW5jaW5nIHVwbG9hZGVkIGNvbnRlbnQnKSxcbiAgICBmaWxlbmFtZTogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxufSk7XG5jb25zdCBGaWxlUmVmZXJlbmNlU2NoZW1hID0gelxuICAgIC51bmlvbihbXG4gICAgei5zdHJpbmcoKS5kZXNjcmliZSgnRXhpc3RpbmcgZGF0YSBVUkwgb3IgYmFzZTY0IHN0cmluZycpLFxuICAgIEZpbGVEYXRhT2JqZWN0U2NoZW1hLFxuICAgIEZpbGVVcmxPYmplY3RTY2hlbWEsXG4gICAgRmlsZUlkT2JqZWN0U2NoZW1hLFxuXSlcbiAgICAuZGVzY3JpYmUoJ0lubGluZSBkYXRhICh3aXRoIG1ldGFkYXRhKSBvciByZWZlcmVuY2VzIHBvaW50aW5nIHRvIGZpbGUgY29udGVudHMuJyk7XG5jb25zdCB6U3RyaW5nV2l0aEhpbnRzID0gKC4uLl9oaW50cykgPT4gei5zdHJpbmcoKTtcbmV4cG9ydCBjb25zdCBUb29sT3V0cHV0SW1hZ2UgPSBTaGFyZWRCYXNlLmV4dGVuZCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdpbWFnZScpLFxuICAgIC8qKlxuICAgICAqIElubGluZSBpbWFnZSBjb250ZW50IG9yIGEgcmVmZXJlbmNlIHRvIGFuIHVwbG9hZGVkIGZpbGUuIEFjY2VwdHMgYSBVUkwvZGF0YSBVUkwgc3RyaW5nIG9yIGFuXG4gICAgICogb2JqZWN0IGRlc2NyaWJpbmcgdGhlIGRhdGEvdXJsL2ZpbGVJZCBzb3VyY2UuXG4gICAgICovXG4gICAgaW1hZ2U6IHouc3RyaW5nKCkub3IoSW1hZ2VPYmplY3RTY2hlbWEpLm9wdGlvbmFsKCksXG4gICAgLyoqXG4gICAgICogQ29udHJvbHMgdGhlIHJlcXVlc3RlZCBsZXZlbCBvZiBkZXRhaWwgZm9yIHZpc2lvbiBtb2RlbHMuXG4gICAgICogVXNlIGEgc3RyaW5nIHRvIGF2b2lkIGNvbnN0cmFpbmluZyBmdXR1cmUgbW9kZWwgY2FwYWJpbGl0aWVzLlxuICAgICAqL1xuICAgIGRldGFpbDogelN0cmluZ1dpdGhIaW50cygnbG93JywgJ2hpZ2gnLCAnYXV0bycpLm9wdGlvbmFsKCksXG59KTtcbmV4cG9ydCBjb25zdCBUb29sT3V0cHV0RmlsZUNvbnRlbnQgPSBTaGFyZWRCYXNlLmV4dGVuZCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdmaWxlJyksXG4gICAgLyoqXG4gICAgICogRmlsZSBvdXRwdXQgcmVmZXJlbmNlLiBQcm92aWRlIGVpdGhlciBhIHN0cmluZyAoZGF0YSBVUkwgLyBiYXNlNjQpLCBhIGRhdGEgb2JqZWN0IChyZXF1aXJlc1xuICAgICAqIG1lZGlhVHlwZSArIGZpbGVuYW1lKSwgb3IgYW4gb2JqZWN0IHBvaW50aW5nIHRvIGFuIHVwbG9hZGVkIGZpbGUvVVJMLlxuICAgICAqL1xuICAgIGZpbGU6IEZpbGVSZWZlcmVuY2VTY2hlbWEsXG59KTtcbmV4cG9ydCBjb25zdCBDb21wdXRlclRvb2xPdXRwdXQgPSBTaGFyZWRCYXNlLmV4dGVuZCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdjb21wdXRlcl9zY3JlZW5zaG90JyksXG4gICAgLyoqXG4gICAgICogQSBiYXNlNjQgZW5jb2RlZCBpbWFnZSBkYXRhIG9yIGEgVVJMIHJlcHJlc2VudGluZyB0aGUgc2NyZWVuc2hvdC5cbiAgICAgKi9cbiAgICBkYXRhOiB6LnN0cmluZygpLmRlc2NyaWJlKCdCYXNlNjQgZW5jb2RlZCBpbWFnZSBkYXRhIG9yIFVSTCcpLFxufSk7XG5leHBvcnQgY29uc3QgY29tcHV0ZXJBY3Rpb25zID0gei5kaXNjcmltaW5hdGVkVW5pb24oJ3R5cGUnLCBbXG4gICAgei5vYmplY3QoeyB0eXBlOiB6LmxpdGVyYWwoJ3NjcmVlbnNob3QnKSB9KSxcbiAgICB6Lm9iamVjdCh7XG4gICAgICAgIHR5cGU6IHoubGl0ZXJhbCgnY2xpY2snKSxcbiAgICAgICAgeDogei5udW1iZXIoKSxcbiAgICAgICAgeTogei5udW1iZXIoKSxcbiAgICAgICAgYnV0dG9uOiB6LmVudW0oWydsZWZ0JywgJ3JpZ2h0JywgJ3doZWVsJywgJ2JhY2snLCAnZm9yd2FyZCddKSxcbiAgICB9KSxcbiAgICB6Lm9iamVjdCh7XG4gICAgICAgIHR5cGU6IHoubGl0ZXJhbCgnZG91YmxlX2NsaWNrJyksXG4gICAgICAgIHg6IHoubnVtYmVyKCksXG4gICAgICAgIHk6IHoubnVtYmVyKCksXG4gICAgfSksXG4gICAgei5vYmplY3Qoe1xuICAgICAgICB0eXBlOiB6LmxpdGVyYWwoJ3Njcm9sbCcpLFxuICAgICAgICB4OiB6Lm51bWJlcigpLFxuICAgICAgICB5OiB6Lm51bWJlcigpLFxuICAgICAgICBzY3JvbGxfeDogei5udW1iZXIoKSxcbiAgICAgICAgc2Nyb2xsX3k6IHoubnVtYmVyKCksXG4gICAgfSksXG4gICAgei5vYmplY3Qoe1xuICAgICAgICB0eXBlOiB6LmxpdGVyYWwoJ3R5cGUnKSxcbiAgICAgICAgdGV4dDogei5zdHJpbmcoKSxcbiAgICB9KSxcbiAgICB6Lm9iamVjdCh7IHR5cGU6IHoubGl0ZXJhbCgnd2FpdCcpIH0pLFxuICAgIHoub2JqZWN0KHtcbiAgICAgICAgdHlwZTogei5saXRlcmFsKCdtb3ZlJyksXG4gICAgICAgIHg6IHoubnVtYmVyKCksXG4gICAgICAgIHk6IHoubnVtYmVyKCksXG4gICAgfSksXG4gICAgei5vYmplY3Qoe1xuICAgICAgICB0eXBlOiB6LmxpdGVyYWwoJ2tleXByZXNzJyksXG4gICAgICAgIGtleXM6IHouYXJyYXkoei5zdHJpbmcoKSksXG4gICAgfSksXG4gICAgei5vYmplY3Qoe1xuICAgICAgICB0eXBlOiB6LmxpdGVyYWwoJ2RyYWcnKSxcbiAgICAgICAgcGF0aDogei5hcnJheSh6Lm9iamVjdCh7IHg6IHoubnVtYmVyKCksIHk6IHoubnVtYmVyKCkgfSkpLFxuICAgIH0pLFxuXSk7XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBNZXNzYWdlIHR5cGVzXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5leHBvcnQgY29uc3QgQXNzaXN0YW50Q29udGVudCA9IHouZGlzY3JpbWluYXRlZFVuaW9uKCd0eXBlJywgW1xuICAgIE91dHB1dFRleHQsXG4gICAgUmVmdXNhbCxcbiAgICBBdWRpb0NvbnRlbnQsXG4gICAgSW1hZ2VDb250ZW50LFxuXSk7XG5jb25zdCBNZXNzYWdlQmFzZSA9IEl0ZW1CYXNlLmV4dGVuZCh7XG4gICAgLyoqXG4gICAgICogQW55IGl0ZW0gd2l0aG91dCBhIHR5cGUgaXMgdHJlYXRlZCBhcyBhIG1lc3NhZ2VcbiAgICAgKi9cbiAgICB0eXBlOiB6LmxpdGVyYWwoJ21lc3NhZ2UnKS5vcHRpb25hbCgpLFxufSk7XG5leHBvcnQgY29uc3QgQXNzaXN0YW50TWVzc2FnZUl0ZW0gPSBNZXNzYWdlQmFzZS5leHRlbmQoe1xuICAgIC8qKlxuICAgICAqIFJlcHJlc2VudGluZyBhIG1lc3NhZ2UgZnJvbSB0aGUgYXNzaXN0YW50IChpLmUuIHRoZSBtb2RlbClcbiAgICAgKi9cbiAgICByb2xlOiB6LmxpdGVyYWwoJ2Fzc2lzdGFudCcpLFxuICAgIC8qKlxuICAgICAqIFRoZSBzdGF0dXMgb2YgdGhlIG1lc3NhZ2UuXG4gICAgICovXG4gICAgc3RhdHVzOiB6LmVudW0oWydpbl9wcm9ncmVzcycsICdjb21wbGV0ZWQnLCAnaW5jb21wbGV0ZSddKSxcbiAgICAvKipcbiAgICAgKiBUaGUgY29udGVudCBvZiB0aGUgbWVzc2FnZS5cbiAgICAgKi9cbiAgICBjb250ZW50OiB6LmFycmF5KEFzc2lzdGFudENvbnRlbnQpLFxufSk7XG5leHBvcnQgY29uc3QgVXNlckNvbnRlbnQgPSB6LmRpc2NyaW1pbmF0ZWRVbmlvbigndHlwZScsIFtcbiAgICBJbnB1dFRleHQsXG4gICAgSW5wdXRJbWFnZSxcbiAgICBJbnB1dEZpbGUsXG4gICAgQXVkaW9Db250ZW50LFxuXSk7XG5leHBvcnQgY29uc3QgVXNlck1lc3NhZ2VJdGVtID0gTWVzc2FnZUJhc2UuZXh0ZW5kKHtcbiAgICAvLyB0eXBlOiB6LmxpdGVyYWwoJ21lc3NhZ2UnKSxcbiAgICAvKipcbiAgICAgKiBSZXByZXNlbnRpbmcgYSBtZXNzYWdlIGZyb20gdGhlIHVzZXJcbiAgICAgKi9cbiAgICByb2xlOiB6LmxpdGVyYWwoJ3VzZXInKSxcbiAgICAvKipcbiAgICAgKiBUaGUgY29udGVudCBvZiB0aGUgbWVzc2FnZS5cbiAgICAgKi9cbiAgICBjb250ZW50OiB6LmFycmF5KFVzZXJDb250ZW50KS5vcih6LnN0cmluZygpKSxcbn0pO1xuY29uc3QgU3lzdGVtTWVzc2FnZUl0ZW0gPSBNZXNzYWdlQmFzZS5leHRlbmQoe1xuICAgIC8vIHR5cGU6IHoubGl0ZXJhbCgnbWVzc2FnZScpLFxuICAgIC8qKlxuICAgICAqIFJlcHJlc2VudGluZyBhIHN5c3RlbSBtZXNzYWdlIHRvIHRoZSB1c2VyXG4gICAgICovXG4gICAgcm9sZTogei5saXRlcmFsKCdzeXN0ZW0nKSxcbiAgICAvKipcbiAgICAgKiBUaGUgY29udGVudCBvZiB0aGUgbWVzc2FnZS5cbiAgICAgKi9cbiAgICBjb250ZW50OiB6LnN0cmluZygpLFxufSk7XG5leHBvcnQgY29uc3QgTWVzc2FnZUl0ZW0gPSB6LmRpc2NyaW1pbmF0ZWRVbmlvbigncm9sZScsIFtcbiAgICBTeXN0ZW1NZXNzYWdlSXRlbSxcbiAgICBBc3Npc3RhbnRNZXNzYWdlSXRlbSxcbiAgICBVc2VyTWVzc2FnZUl0ZW0sXG5dKTtcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIFRvb2wgY2FsbCB0eXBlc1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuZXhwb3J0IGNvbnN0IEhvc3RlZFRvb2xDYWxsSXRlbSA9IEl0ZW1CYXNlLmV4dGVuZCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdob3N0ZWRfdG9vbF9jYWxsJyksXG4gICAgLyoqXG4gICAgICogVGhlIG5hbWUgb2YgdGhlIGhvc3RlZCB0b29sLiBGb3IgZXhhbXBsZSBgd2ViX3NlYXJjaF9jYWxsYCBvciBgZmlsZV9zZWFyY2hfY2FsbGBcbiAgICAgKi9cbiAgICBuYW1lOiB6LnN0cmluZygpLmRlc2NyaWJlKCdUaGUgbmFtZSBvZiB0aGUgaG9zdGVkIHRvb2wnKSxcbiAgICAvKipcbiAgICAgKiBUaGUgYXJndW1lbnRzIG9mIHRoZSBob3N0ZWQgdG9vbCBjYWxsLlxuICAgICAqL1xuICAgIGFyZ3VtZW50czogelxuICAgICAgICAuc3RyaW5nKClcbiAgICAgICAgLmRlc2NyaWJlKCdUaGUgYXJndW1lbnRzIG9mIHRoZSBob3N0ZWQgdG9vbCBjYWxsJylcbiAgICAgICAgLm9wdGlvbmFsKCksXG4gICAgLyoqXG4gICAgICogVGhlIHN0YXR1cyBvZiB0aGUgdG9vbCBjYWxsLlxuICAgICAqL1xuICAgIHN0YXR1czogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgIC8qKlxuICAgICAqIFRoZSBwcmltYXJ5IG91dHB1dCBvZiB0aGUgdG9vbCBjYWxsLiBBZGRpdGlvbmFsIG91dHB1dCBtaWdodCBiZSBpbiB0aGUgYHByb3ZpZGVyRGF0YWAgZmllbGQuXG4gICAgICovXG4gICAgb3V0cHV0OiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG59KTtcbmV4cG9ydCBjb25zdCBGdW5jdGlvbkNhbGxJdGVtID0gSXRlbUJhc2UuZXh0ZW5kKHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ2Z1bmN0aW9uX2NhbGwnKSxcbiAgICAvKipcbiAgICAgKiBUaGUgSUQgb2YgdGhlIHRvb2wgY2FsbC4gUmVxdWlyZWQgdG8gbWF0Y2ggdXAgdGhlIHJlc3BlY3RpdmUgdG9vbCBjYWxsIHJlc3VsdC5cbiAgICAgKi9cbiAgICBjYWxsSWQ6IHouc3RyaW5nKCkuZGVzY3JpYmUoJ1RoZSBJRCBvZiB0aGUgdG9vbCBjYWxsJyksXG4gICAgLyoqXG4gICAgICogVGhlIG5hbWUgb2YgdGhlIGZ1bmN0aW9uLlxuICAgICAqL1xuICAgIG5hbWU6IHouc3RyaW5nKCkuZGVzY3JpYmUoJ1RoZSBuYW1lIG9mIHRoZSBmdW5jdGlvbicpLFxuICAgIC8qKlxuICAgICAqIFRoZSBzdGF0dXMgb2YgdGhlIGZ1bmN0aW9uIGNhbGwuXG4gICAgICovXG4gICAgc3RhdHVzOiB6LmVudW0oWydpbl9wcm9ncmVzcycsICdjb21wbGV0ZWQnLCAnaW5jb21wbGV0ZSddKS5vcHRpb25hbCgpLFxuICAgIC8qKlxuICAgICAqIFRoZSBhcmd1bWVudHMgb2YgdGhlIGZ1bmN0aW9uIGNhbGwuXG4gICAgICovXG4gICAgYXJndW1lbnRzOiB6LnN0cmluZygpLFxufSk7XG5leHBvcnQgY29uc3QgVG9vbENhbGxPdXRwdXRDb250ZW50ID0gei5kaXNjcmltaW5hdGVkVW5pb24oJ3R5cGUnLCBbXG4gICAgVG9vbE91dHB1dFRleHQsXG4gICAgVG9vbE91dHB1dEltYWdlLFxuICAgIFRvb2xPdXRwdXRGaWxlQ29udGVudCxcbl0pO1xuZXhwb3J0IGNvbnN0IFRvb2xDYWxsU3RydWN0dXJlZE91dHB1dCA9IHouZGlzY3JpbWluYXRlZFVuaW9uKCd0eXBlJywgW1xuICAgIElucHV0VGV4dCxcbiAgICBJbnB1dEltYWdlLFxuICAgIElucHV0RmlsZSxcbl0pO1xuZXhwb3J0IGNvbnN0IEZ1bmN0aW9uQ2FsbFJlc3VsdEl0ZW0gPSBJdGVtQmFzZS5leHRlbmQoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnZnVuY3Rpb25fY2FsbF9yZXN1bHQnKSxcbiAgICAvKipcbiAgICAgKiBUaGUgbmFtZSBvZiB0aGUgdG9vbCB0aGF0IHdhcyBjYWxsZWRcbiAgICAgKi9cbiAgICBuYW1lOiB6LnN0cmluZygpLmRlc2NyaWJlKCdUaGUgbmFtZSBvZiB0aGUgdG9vbCcpLFxuICAgIC8qKlxuICAgICAqIFRoZSBJRCBvZiB0aGUgdG9vbCBjYWxsLiBSZXF1aXJlZCB0byBtYXRjaCB1cCB0aGUgcmVzcGVjdGl2ZSB0b29sIGNhbGwgcmVzdWx0LlxuICAgICAqL1xuICAgIGNhbGxJZDogei5zdHJpbmcoKS5kZXNjcmliZSgnVGhlIElEIG9mIHRoZSB0b29sIGNhbGwnKSxcbiAgICAvKipcbiAgICAgKiBUaGUgc3RhdHVzIG9mIHRoZSB0b29sIGNhbGwuXG4gICAgICovXG4gICAgc3RhdHVzOiB6LmVudW0oWydpbl9wcm9ncmVzcycsICdjb21wbGV0ZWQnLCAnaW5jb21wbGV0ZSddKSxcbiAgICAvKipcbiAgICAgKiBUaGUgb3V0cHV0IG9mIHRoZSB0b29sIGNhbGwuXG4gICAgICovXG4gICAgb3V0cHV0OiB6XG4gICAgICAgIC51bmlvbihbXG4gICAgICAgIHouc3RyaW5nKCksXG4gICAgICAgIFRvb2xDYWxsT3V0cHV0Q29udGVudCxcbiAgICAgICAgei5hcnJheShUb29sQ2FsbFN0cnVjdHVyZWRPdXRwdXQpLFxuICAgIF0pXG4gICAgICAgIC5kZXNjcmliZSgnT3V0cHV0IHJldHVybmVkIGJ5IHRoZSB0b29sIGNhbGwuIFN1cHBvcnRzIHBsYWluIHN0cmluZ3MsIGxlZ2FjeSBUb29sT3V0cHV0IGl0ZW1zLCBvciBzdHJ1Y3R1cmVkIGlucHV0XyogaXRlbXMuJyksXG59KTtcbmV4cG9ydCBjb25zdCBDb21wdXRlclVzZUNhbGxJdGVtID0gSXRlbUJhc2UuZXh0ZW5kKHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ2NvbXB1dGVyX2NhbGwnKSxcbiAgICAvKipcbiAgICAgKiBUaGUgSUQgb2YgdGhlIGNvbXB1dGVyIGNhbGwuIFJlcXVpcmVkIHRvIG1hdGNoIHVwIHRoZSByZXNwZWN0aXZlIGNvbXB1dGVyIGNhbGwgcmVzdWx0LlxuICAgICAqL1xuICAgIGNhbGxJZDogei5zdHJpbmcoKS5kZXNjcmliZSgnVGhlIElEIG9mIHRoZSBjb21wdXRlciBjYWxsJyksXG4gICAgLyoqXG4gICAgICogVGhlIHN0YXR1cyBvZiB0aGUgY29tcHV0ZXIgY2FsbC5cbiAgICAgKi9cbiAgICBzdGF0dXM6IHouZW51bShbJ2luX3Byb2dyZXNzJywgJ2NvbXBsZXRlZCcsICdpbmNvbXBsZXRlJ10pLFxuICAgIC8qKlxuICAgICAqIFRoZSBhY3Rpb24gdG8gYmUgcGVyZm9ybWVkIGJ5IHRoZSBjb21wdXRlci5cbiAgICAgKi9cbiAgICBhY3Rpb246IGNvbXB1dGVyQWN0aW9ucyxcbn0pO1xuZXhwb3J0IGNvbnN0IENvbXB1dGVyQ2FsbFJlc3VsdEl0ZW0gPSBJdGVtQmFzZS5leHRlbmQoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnY29tcHV0ZXJfY2FsbF9yZXN1bHQnKSxcbiAgICAvKipcbiAgICAgKiBUaGUgSUQgb2YgdGhlIGNvbXB1dGVyIGNhbGwuIFJlcXVpcmVkIHRvIG1hdGNoIHVwIHRoZSByZXNwZWN0aXZlIGNvbXB1dGVyIGNhbGwgcmVzdWx0LlxuICAgICAqL1xuICAgIGNhbGxJZDogei5zdHJpbmcoKS5kZXNjcmliZSgnVGhlIElEIG9mIHRoZSBjb21wdXRlciBjYWxsJyksXG4gICAgLyoqXG4gICAgICogVGhlIG91dHB1dCBvZiB0aGUgY29tcHV0ZXIgY2FsbC5cbiAgICAgKi9cbiAgICBvdXRwdXQ6IENvbXB1dGVyVG9vbE91dHB1dCxcbn0pO1xuZXhwb3J0IGNvbnN0IFNoZWxsQWN0aW9uID0gei5vYmplY3Qoe1xuICAgIGNvbW1hbmRzOiB6LmFycmF5KHouc3RyaW5nKCkpLFxuICAgIHRpbWVvdXRNczogei5udW1iZXIoKS5pbnQoKS5taW4oMCkub3B0aW9uYWwoKSxcbiAgICBtYXhPdXRwdXRMZW5ndGg6IHoubnVtYmVyKCkuaW50KCkubWluKDApLm9wdGlvbmFsKCksXG59KTtcbmV4cG9ydCBjb25zdCBTaGVsbENhbGxJdGVtID0gSXRlbUJhc2UuZXh0ZW5kKHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ3NoZWxsX2NhbGwnKSxcbiAgICBjYWxsSWQ6IHouc3RyaW5nKCksXG4gICAgc3RhdHVzOiB6LmVudW0oWydpbl9wcm9ncmVzcycsICdjb21wbGV0ZWQnLCAnaW5jb21wbGV0ZSddKS5vcHRpb25hbCgpLFxuICAgIGFjdGlvbjogU2hlbGxBY3Rpb24sXG59KTtcbmV4cG9ydCBjb25zdCBTaGVsbENhbGxPdXRjb21lID0gei5kaXNjcmltaW5hdGVkVW5pb24oJ3R5cGUnLCBbXG4gICAgei5vYmplY3QoeyB0eXBlOiB6LmxpdGVyYWwoJ3RpbWVvdXQnKSB9KSxcbiAgICB6Lm9iamVjdCh7XG4gICAgICAgIHR5cGU6IHoubGl0ZXJhbCgnZXhpdCcpLFxuICAgICAgICBleGl0Q29kZTogei5udW1iZXIoKS5pbnQoKS5udWxsYWJsZSgpLFxuICAgIH0pLFxuXSk7XG5leHBvcnQgY29uc3QgU2hlbGxDYWxsT3V0cHV0Q29udGVudCA9IHpcbiAgICAub2JqZWN0KHtcbiAgICBzdGRvdXQ6IHouc3RyaW5nKCksXG4gICAgc3RkZXJyOiB6LnN0cmluZygpLFxuICAgIG91dGNvbWU6IFNoZWxsQ2FsbE91dGNvbWUsXG59KVxuICAgIC5wYXNzdGhyb3VnaCgpO1xuZXhwb3J0IGNvbnN0IFNoZWxsQ2FsbFJlc3VsdEl0ZW0gPSBJdGVtQmFzZS5leHRlbmQoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnc2hlbGxfY2FsbF9vdXRwdXQnKSxcbiAgICBjYWxsSWQ6IHouc3RyaW5nKCksXG4gICAgbWF4T3V0cHV0TGVuZ3RoOiB6Lm51bWJlcigpLm9wdGlvbmFsKCksXG4gICAgb3V0cHV0OiB6LmFycmF5KFNoZWxsQ2FsbE91dHB1dENvbnRlbnQpLFxufSk7XG5leHBvcnQgY29uc3QgQXBwbHlQYXRjaE9wZXJhdGlvbkNyZWF0ZUZpbGUgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdjcmVhdGVfZmlsZScpLFxuICAgIHBhdGg6IHouc3RyaW5nKCksXG4gICAgZGlmZjogei5zdHJpbmcoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IEFwcGx5UGF0Y2hPcGVyYXRpb25VcGRhdGVGaWxlID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgndXBkYXRlX2ZpbGUnKSxcbiAgICBwYXRoOiB6LnN0cmluZygpLFxuICAgIGRpZmY6IHouc3RyaW5nKCksXG59KTtcbmV4cG9ydCBjb25zdCBBcHBseVBhdGNoT3BlcmF0aW9uRGVsZXRlRmlsZSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ2RlbGV0ZV9maWxlJyksXG4gICAgcGF0aDogei5zdHJpbmcoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IEFwcGx5UGF0Y2hPcGVyYXRpb24gPSB6LmRpc2NyaW1pbmF0ZWRVbmlvbigndHlwZScsIFtcbiAgICBBcHBseVBhdGNoT3BlcmF0aW9uQ3JlYXRlRmlsZSxcbiAgICBBcHBseVBhdGNoT3BlcmF0aW9uVXBkYXRlRmlsZSxcbiAgICBBcHBseVBhdGNoT3BlcmF0aW9uRGVsZXRlRmlsZSxcbl0pO1xuZXhwb3J0IGNvbnN0IEFwcGx5UGF0Y2hDYWxsSXRlbSA9IEl0ZW1CYXNlLmV4dGVuZCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdhcHBseV9wYXRjaF9jYWxsJyksXG4gICAgY2FsbElkOiB6LnN0cmluZygpLFxuICAgIHN0YXR1czogei5lbnVtKFsnaW5fcHJvZ3Jlc3MnLCAnY29tcGxldGVkJ10pLFxuICAgIG9wZXJhdGlvbjogQXBwbHlQYXRjaE9wZXJhdGlvbixcbn0pO1xuZXhwb3J0IGNvbnN0IEFwcGx5UGF0Y2hDYWxsUmVzdWx0SXRlbSA9IEl0ZW1CYXNlLmV4dGVuZCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdhcHBseV9wYXRjaF9jYWxsX291dHB1dCcpLFxuICAgIGNhbGxJZDogei5zdHJpbmcoKSxcbiAgICBzdGF0dXM6IHouZW51bShbJ2NvbXBsZXRlZCcsICdmYWlsZWQnXSksXG4gICAgb3V0cHV0OiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG59KTtcbmV4cG9ydCBjb25zdCBUb29sQ2FsbEl0ZW0gPSB6LmRpc2NyaW1pbmF0ZWRVbmlvbigndHlwZScsIFtcbiAgICBDb21wdXRlclVzZUNhbGxJdGVtLFxuICAgIFNoZWxsQ2FsbEl0ZW0sXG4gICAgQXBwbHlQYXRjaENhbGxJdGVtLFxuICAgIEZ1bmN0aW9uQ2FsbEl0ZW0sXG4gICAgSG9zdGVkVG9vbENhbGxJdGVtLFxuXSk7XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBTcGVjaWFsIGl0ZW0gdHlwZXNcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbmV4cG9ydCBjb25zdCBSZWFzb25pbmdJdGVtID0gU2hhcmVkQmFzZS5leHRlbmQoe1xuICAgIGlkOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgdHlwZTogei5saXRlcmFsKCdyZWFzb25pbmcnKSxcbiAgICAvKipcbiAgICAgKiBUaGUgdXNlciBmYWNpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhlIHJlYXNvbmluZy4gQWRkaXRpb25hbCBpbmZvcm1hdGlvbiBtaWdodCBiZSBpbiB0aGUgYHByb3ZpZGVyRGF0YWAgZmllbGQuXG4gICAgICovXG4gICAgY29udGVudDogei5hcnJheShJbnB1dFRleHQpLFxuICAgIC8qKlxuICAgICAqIFRoZSByYXcgcmVhc29uaW5nIHRleHQgZnJvbSB0aGUgbW9kZWwuXG4gICAgICovXG4gICAgcmF3Q29udGVudDogei5hcnJheShSZWFzb25pbmdUZXh0KS5vcHRpb25hbCgpLFxufSk7XG5leHBvcnQgY29uc3QgQ29tcGFjdGlvbkl0ZW0gPSBJdGVtQmFzZS5leHRlbmQoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnY29tcGFjdGlvbicpLFxuICAgIC8qKlxuICAgICAqIEVuY3J5cHRlZCBwYXlsb2FkIHJldHVybmVkIGJ5IHRoZSBjb21wYWN0aW9uIGVuZHBvaW50LlxuICAgICAqL1xuICAgIGVuY3J5cHRlZF9jb250ZW50OiB6LnN0cmluZygpLFxuICAgIC8qKlxuICAgICAqIElkZW50aWZpZXIgZm9yIHRoZSBjb21wYWN0aW9uIGl0ZW0uXG4gICAgICovXG4gICAgaWQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICAvKipcbiAgICAgKiBJZGVudGlmaWVyIGZvciB0aGUgZ2VuZXJhdG9yIG9mIHRoaXMgY29tcGFjdGlvbiBpdGVtLlxuICAgICAqL1xuICAgIGNyZWF0ZWRfYnk6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbn0pO1xuLyoqXG4gKiBUaGlzIGlzIGEgY2F0Y2ggYWxsIGZvciBpdGVtcyB0aGF0IGFyZSBub3QgcGFydCBvZiB0aGUgcHJvdG9jb2wuXG4gKlxuICogRm9yIGV4YW1wbGUsIGEgbW9kZWwgbWlnaHQgcmV0dXJuIGFuIGl0ZW0gdGhhdCBpcyBub3QgcGFydCBvZiB0aGUgcHJvdG9jb2wgdXNpbmcgdGhpcyB0eXBlLlxuICpcbiAqIEluIHRoYXQgY2FzZSBldmVyeXRoaW5nIHJldHVybmVkIGZyb20gdGhlIG1vZGVsIHNob3VsZCBiZSBwYXNzZWQgaW4gdGhlIGBwcm92aWRlckRhdGFgIGZpZWxkLlxuICpcbiAqIFRoaXMgZW5hYmxlcyBuZXcgZmVhdHVyZXMgdG8gYmUgYWRkZWQgdG8gYmUgYWRkZWQgYnkgYSBtb2RlbCBwcm92aWRlciB3aXRob3V0IGJyZWFraW5nIHRoZSBwcm90b2NvbC5cbiAqL1xuZXhwb3J0IGNvbnN0IFVua25vd25JdGVtID0gSXRlbUJhc2UuZXh0ZW5kKHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ3Vua25vd24nKSxcbn0pO1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gSm9pbmVkIGl0ZW0gdHlwZXNcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbmV4cG9ydCBjb25zdCBPdXRwdXRNb2RlbEl0ZW0gPSB6LmRpc2NyaW1pbmF0ZWRVbmlvbigndHlwZScsIFtcbiAgICBBc3Npc3RhbnRNZXNzYWdlSXRlbSxcbiAgICBIb3N0ZWRUb29sQ2FsbEl0ZW0sXG4gICAgRnVuY3Rpb25DYWxsSXRlbSxcbiAgICBDb21wdXRlclVzZUNhbGxJdGVtLFxuICAgIFNoZWxsQ2FsbEl0ZW0sXG4gICAgQXBwbHlQYXRjaENhbGxJdGVtLFxuICAgIEZ1bmN0aW9uQ2FsbFJlc3VsdEl0ZW0sXG4gICAgU2hlbGxDYWxsUmVzdWx0SXRlbSxcbiAgICBBcHBseVBhdGNoQ2FsbFJlc3VsdEl0ZW0sXG4gICAgUmVhc29uaW5nSXRlbSxcbiAgICBDb21wYWN0aW9uSXRlbSxcbiAgICBVbmtub3duSXRlbSxcbl0pO1xuZXhwb3J0IGNvbnN0IE1vZGVsSXRlbSA9IHoudW5pb24oW1xuICAgIFVzZXJNZXNzYWdlSXRlbSxcbiAgICBBc3Npc3RhbnRNZXNzYWdlSXRlbSxcbiAgICBTeXN0ZW1NZXNzYWdlSXRlbSxcbiAgICBIb3N0ZWRUb29sQ2FsbEl0ZW0sXG4gICAgRnVuY3Rpb25DYWxsSXRlbSxcbiAgICBDb21wdXRlclVzZUNhbGxJdGVtLFxuICAgIFNoZWxsQ2FsbEl0ZW0sXG4gICAgQXBwbHlQYXRjaENhbGxJdGVtLFxuICAgIEZ1bmN0aW9uQ2FsbFJlc3VsdEl0ZW0sXG4gICAgQ29tcHV0ZXJDYWxsUmVzdWx0SXRlbSxcbiAgICBTaGVsbENhbGxSZXN1bHRJdGVtLFxuICAgIEFwcGx5UGF0Y2hDYWxsUmVzdWx0SXRlbSxcbiAgICBSZWFzb25pbmdJdGVtLFxuICAgIENvbXBhY3Rpb25JdGVtLFxuICAgIFVua25vd25JdGVtLFxuXSk7XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBNZXRhIGRhdGEgdHlwZXNcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbmV4cG9ydCBjb25zdCBSZXF1ZXN0VXNhZ2VEYXRhID0gei5vYmplY3Qoe1xuICAgIGlucHV0VG9rZW5zOiB6Lm51bWJlcigpLFxuICAgIG91dHB1dFRva2Vuczogei5udW1iZXIoKSxcbiAgICB0b3RhbFRva2Vuczogei5udW1iZXIoKSxcbiAgICBpbnB1dFRva2Vuc0RldGFpbHM6IHoucmVjb3JkKHouc3RyaW5nKCksIHoubnVtYmVyKCkpLm9wdGlvbmFsKCksXG4gICAgb3V0cHV0VG9rZW5zRGV0YWlsczogei5yZWNvcmQoei5zdHJpbmcoKSwgei5udW1iZXIoKSkub3B0aW9uYWwoKSxcbiAgICBlbmRwb2ludDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxufSk7XG5leHBvcnQgY29uc3QgVXNhZ2VEYXRhID0gei5vYmplY3Qoe1xuICAgIHJlcXVlc3RzOiB6Lm51bWJlcigpLm9wdGlvbmFsKCksXG4gICAgaW5wdXRUb2tlbnM6IHoubnVtYmVyKCksXG4gICAgb3V0cHV0VG9rZW5zOiB6Lm51bWJlcigpLFxuICAgIHRvdGFsVG9rZW5zOiB6Lm51bWJlcigpLFxuICAgIGlucHV0VG9rZW5zRGV0YWlsczogelxuICAgICAgICAudW5pb24oW1xuICAgICAgICB6LnJlY29yZCh6LnN0cmluZygpLCB6Lm51bWJlcigpKSxcbiAgICAgICAgei5hcnJheSh6LnJlY29yZCh6LnN0cmluZygpLCB6Lm51bWJlcigpKSksXG4gICAgXSlcbiAgICAgICAgLm9wdGlvbmFsKCksXG4gICAgb3V0cHV0VG9rZW5zRGV0YWlsczogelxuICAgICAgICAudW5pb24oW1xuICAgICAgICB6LnJlY29yZCh6LnN0cmluZygpLCB6Lm51bWJlcigpKSxcbiAgICAgICAgei5hcnJheSh6LnJlY29yZCh6LnN0cmluZygpLCB6Lm51bWJlcigpKSksXG4gICAgXSlcbiAgICAgICAgLm9wdGlvbmFsKCksXG4gICAgcmVxdWVzdFVzYWdlRW50cmllczogei5hcnJheShSZXF1ZXN0VXNhZ2VEYXRhKS5vcHRpb25hbCgpLFxufSk7XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBTdHJlYW0gZXZlbnQgdHlwZXNcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8qKlxuICogRXZlbnQgcmV0dXJuZWQgYnkgdGhlIG1vZGVsIHdoZW4gbmV3IG91dHB1dCB0ZXh0IGlzIGF2YWlsYWJsZSB0byBzdHJlYW0gdG8gdGhlIHVzZXIuXG4gKi9cbmV4cG9ydCBjb25zdCBTdHJlYW1FdmVudFRleHRTdHJlYW0gPSBTaGFyZWRCYXNlLmV4dGVuZCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdvdXRwdXRfdGV4dF9kZWx0YScpLFxuICAgIC8qKlxuICAgICAqIFRoZSBkZWx0YSB0ZXh0IHRoYXQgd2FzIHN0cmVhbWVkIGJ5IHRoZSBtb2RlbHRvIHRoZSB1c2VyLlxuICAgICAqL1xuICAgIGRlbHRhOiB6LnN0cmluZygpLFxufSk7XG4vKipcbiAqIEV2ZW50IHJldHVybmVkIGJ5IHRoZSBtb2RlbCB3aGVuIGEgbmV3IHJlc3BvbnNlIGlzIHN0YXJ0ZWQuXG4gKi9cbmV4cG9ydCBjb25zdCBTdHJlYW1FdmVudFJlc3BvbnNlU3RhcnRlZCA9IFNoYXJlZEJhc2UuZXh0ZW5kKHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ3Jlc3BvbnNlX3N0YXJ0ZWQnKSxcbn0pO1xuLyoqXG4gKiBFdmVudCByZXR1cm5lZCBieSB0aGUgbW9kZWwgd2hlbiBhIHJlc3BvbnNlIGlzIGNvbXBsZXRlZC5cbiAqL1xuZXhwb3J0IGNvbnN0IFN0cmVhbUV2ZW50UmVzcG9uc2VDb21wbGV0ZWQgPSBTaGFyZWRCYXNlLmV4dGVuZCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdyZXNwb25zZV9kb25lJyksXG4gICAgLyoqXG4gICAgICogVGhlIHJlc3BvbnNlIGZyb20gdGhlIG1vZGVsLlxuICAgICAqL1xuICAgIHJlc3BvbnNlOiBTaGFyZWRCYXNlLmV4dGVuZCh7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgSUQgb2YgdGhlIHJlc3BvbnNlLlxuICAgICAgICAgKi9cbiAgICAgICAgaWQ6IHouc3RyaW5nKCksXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgdXNhZ2UgZGF0YSBmb3IgdGhlIHJlc3BvbnNlLlxuICAgICAgICAgKi9cbiAgICAgICAgdXNhZ2U6IFVzYWdlRGF0YSxcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBvdXRwdXQgZnJvbSB0aGUgbW9kZWwuXG4gICAgICAgICAqL1xuICAgICAgICBvdXRwdXQ6IHouYXJyYXkoT3V0cHV0TW9kZWxJdGVtKSxcbiAgICB9KSxcbn0pO1xuLyoqXG4gKiBFdmVudCByZXR1cm5lZCBmb3IgZXZlcnkgaXRlbSB0aGF0IGdldHMgc3RyZWFtZWQgdG8gdGhlIG1vZGVsLiBVc2VkIHRvIGV4cG9zZSB0aGUgcmF3IGV2ZW50c1xuICogZnJvbSB0aGUgbW9kZWwuXG4gKi9cbmV4cG9ydCBjb25zdCBTdHJlYW1FdmVudEdlbmVyaWNJdGVtID0gU2hhcmVkQmFzZS5leHRlbmQoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnbW9kZWwnKSxcbiAgICBldmVudDogei5hbnkoKS5kZXNjcmliZSgnVGhlIGV2ZW50IGZyb20gdGhlIG1vZGVsJyksXG59KTtcbmV4cG9ydCBjb25zdCBTdHJlYW1FdmVudCA9IHouZGlzY3JpbWluYXRlZFVuaW9uKCd0eXBlJywgW1xuICAgIFN0cmVhbUV2ZW50VGV4dFN0cmVhbSxcbiAgICBTdHJlYW1FdmVudFJlc3BvbnNlQ29tcGxldGVkLFxuICAgIFN0cmVhbUV2ZW50UmVzcG9uc2VTdGFydGVkLFxuICAgIFN0cmVhbUV2ZW50R2VuZXJpY0l0ZW0sXG5dKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXByb3RvY29sLm1qcy5tYXAiLCJpbXBvcnQgeyBSZXF1ZXN0VXNhZ2VEYXRhLCBVc2FnZURhdGEgfSBmcm9tIFwiLi90eXBlcy9wcm90b2NvbC5tanNcIjtcbi8qKlxuICogVXNhZ2UgZGV0YWlscyBmb3IgYSBzaW5nbGUgQVBJIHJlcXVlc3QuXG4gKi9cbmV4cG9ydCBjbGFzcyBSZXF1ZXN0VXNhZ2Uge1xuICAgIC8qKlxuICAgICAqIFRoZSBudW1iZXIgb2YgaW5wdXQgdG9rZW5zIHVzZWQgZm9yIHRoaXMgcmVxdWVzdC5cbiAgICAgKi9cbiAgICBpbnB1dFRva2VucztcbiAgICAvKipcbiAgICAgKiBUaGUgbnVtYmVyIG9mIG91dHB1dCB0b2tlbnMgdXNlZCBmb3IgdGhpcyByZXF1ZXN0LlxuICAgICAqL1xuICAgIG91dHB1dFRva2VucztcbiAgICAvKipcbiAgICAgKiBUaGUgdG90YWwgbnVtYmVyIG9mIHRva2VucyBzZW50IGFuZCByZWNlaXZlZCBmb3IgdGhpcyByZXF1ZXN0LlxuICAgICAqL1xuICAgIHRvdGFsVG9rZW5zO1xuICAgIC8qKlxuICAgICAqIERldGFpbHMgYWJvdXQgdGhlIGlucHV0IHRva2VucyB1c2VkIGZvciB0aGlzIHJlcXVlc3QuXG4gICAgICovXG4gICAgaW5wdXRUb2tlbnNEZXRhaWxzO1xuICAgIC8qKlxuICAgICAqIERldGFpbHMgYWJvdXQgdGhlIG91dHB1dCB0b2tlbnMgdXNlZCBmb3IgdGhpcyByZXF1ZXN0LlxuICAgICAqL1xuICAgIG91dHB1dFRva2Vuc0RldGFpbHM7XG4gICAgLyoqXG4gICAgICogVGhlIGVuZHBvaW50IHRoYXQgcHJvZHVjZWQgdGhpcyB1c2FnZSBlbnRyeSAoZS5nLiwgcmVzcG9uc2VzLmNyZWF0ZSwgcmVzcG9uc2VzLmNvbXBhY3QpLlxuICAgICAqL1xuICAgIGVuZHBvaW50O1xuICAgIGNvbnN0cnVjdG9yKGlucHV0KSB7XG4gICAgICAgIHRoaXMuaW5wdXRUb2tlbnMgPSBpbnB1dD8uaW5wdXRUb2tlbnMgPz8gaW5wdXQ/LmlucHV0X3Rva2VucyA/PyAwO1xuICAgICAgICB0aGlzLm91dHB1dFRva2VucyA9IGlucHV0Py5vdXRwdXRUb2tlbnMgPz8gaW5wdXQ/Lm91dHB1dF90b2tlbnMgPz8gMDtcbiAgICAgICAgdGhpcy50b3RhbFRva2VucyA9XG4gICAgICAgICAgICBpbnB1dD8udG90YWxUb2tlbnMgPz9cbiAgICAgICAgICAgICAgICBpbnB1dD8udG90YWxfdG9rZW5zID8/XG4gICAgICAgICAgICAgICAgdGhpcy5pbnB1dFRva2VucyArIHRoaXMub3V0cHV0VG9rZW5zO1xuICAgICAgICBjb25zdCBpbnB1dFRva2Vuc0RldGFpbHMgPSBpbnB1dD8uaW5wdXRUb2tlbnNEZXRhaWxzID8/IGlucHV0Py5pbnB1dF90b2tlbnNfZGV0YWlscztcbiAgICAgICAgdGhpcy5pbnB1dFRva2Vuc0RldGFpbHMgPSBpbnB1dFRva2Vuc0RldGFpbHNcbiAgICAgICAgICAgID8gaW5wdXRUb2tlbnNEZXRhaWxzXG4gICAgICAgICAgICA6IHt9O1xuICAgICAgICBjb25zdCBvdXRwdXRUb2tlbnNEZXRhaWxzID0gaW5wdXQ/Lm91dHB1dFRva2Vuc0RldGFpbHMgPz8gaW5wdXQ/Lm91dHB1dF90b2tlbnNfZGV0YWlscztcbiAgICAgICAgdGhpcy5vdXRwdXRUb2tlbnNEZXRhaWxzID0gb3V0cHV0VG9rZW5zRGV0YWlsc1xuICAgICAgICAgICAgPyBvdXRwdXRUb2tlbnNEZXRhaWxzXG4gICAgICAgICAgICA6IHt9O1xuICAgICAgICBpZiAodHlwZW9mIGlucHV0Py5lbmRwb2ludCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIHRoaXMuZW5kcG9pbnQgPSBpbnB1dC5lbmRwb2ludDtcbiAgICAgICAgfVxuICAgIH1cbn1cbi8qKlxuICogVHJhY2tzIHRva2VuIHVzYWdlIGFuZCByZXF1ZXN0IGNvdW50cyBmb3IgYW4gYWdlbnQgcnVuLlxuICovXG5leHBvcnQgY2xhc3MgVXNhZ2Uge1xuICAgIC8qKlxuICAgICAqIFRoZSBudW1iZXIgb2YgcmVxdWVzdHMgbWFkZSB0byB0aGUgTExNIEFQSS5cbiAgICAgKi9cbiAgICByZXF1ZXN0cztcbiAgICAvKipcbiAgICAgKiBUaGUgbnVtYmVyIG9mIGlucHV0IHRva2VucyB1c2VkIGFjcm9zcyBhbGwgcmVxdWVzdHMuXG4gICAgICovXG4gICAgaW5wdXRUb2tlbnM7XG4gICAgLyoqXG4gICAgICogVGhlIG51bWJlciBvZiBvdXRwdXQgdG9rZW5zIHVzZWQgYWNyb3NzIGFsbCByZXF1ZXN0cy5cbiAgICAgKi9cbiAgICBvdXRwdXRUb2tlbnM7XG4gICAgLyoqXG4gICAgICogVGhlIHRvdGFsIG51bWJlciBvZiB0b2tlbnMgc2VudCBhbmQgcmVjZWl2ZWQsIGFjcm9zcyBhbGwgcmVxdWVzdHMuXG4gICAgICovXG4gICAgdG90YWxUb2tlbnM7XG4gICAgLyoqXG4gICAgICogRGV0YWlscyBhYm91dCB0aGUgaW5wdXQgdG9rZW5zIHVzZWQgYWNyb3NzIGFsbCByZXF1ZXN0cy5cbiAgICAgKi9cbiAgICBpbnB1dFRva2Vuc0RldGFpbHMgPSBbXTtcbiAgICAvKipcbiAgICAgKiBEZXRhaWxzIGFib3V0IHRoZSBvdXRwdXQgdG9rZW5zIHVzZWQgYWNyb3NzIGFsbCByZXF1ZXN0cy5cbiAgICAgKi9cbiAgICBvdXRwdXRUb2tlbnNEZXRhaWxzID0gW107XG4gICAgLyoqXG4gICAgICogTGlzdCBvZiBwZXItcmVxdWVzdCB1c2FnZSBlbnRyaWVzIGZvciBkZXRhaWxlZCBjb3N0IGNhbGN1bGF0aW9ucy5cbiAgICAgKi9cbiAgICByZXF1ZXN0VXNhZ2VFbnRyaWVzO1xuICAgIGNvbnN0cnVjdG9yKGlucHV0KSB7XG4gICAgICAgIGlmICh0eXBlb2YgaW5wdXQgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICB0aGlzLnJlcXVlc3RzID0gMDtcbiAgICAgICAgICAgIHRoaXMuaW5wdXRUb2tlbnMgPSAwO1xuICAgICAgICAgICAgdGhpcy5vdXRwdXRUb2tlbnMgPSAwO1xuICAgICAgICAgICAgdGhpcy50b3RhbFRva2VucyA9IDA7XG4gICAgICAgICAgICB0aGlzLmlucHV0VG9rZW5zRGV0YWlscyA9IFtdO1xuICAgICAgICAgICAgdGhpcy5vdXRwdXRUb2tlbnNEZXRhaWxzID0gW107XG4gICAgICAgICAgICB0aGlzLnJlcXVlc3RVc2FnZUVudHJpZXMgPSB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnJlcXVlc3RzID0gaW5wdXQ/LnJlcXVlc3RzID8/IDE7XG4gICAgICAgICAgICB0aGlzLmlucHV0VG9rZW5zID0gaW5wdXQ/LmlucHV0VG9rZW5zID8/IGlucHV0Py5pbnB1dF90b2tlbnMgPz8gMDtcbiAgICAgICAgICAgIHRoaXMub3V0cHV0VG9rZW5zID0gaW5wdXQ/Lm91dHB1dFRva2VucyA/PyBpbnB1dD8ub3V0cHV0X3Rva2VucyA/PyAwO1xuICAgICAgICAgICAgdGhpcy50b3RhbFRva2VucyA9XG4gICAgICAgICAgICAgICAgaW5wdXQ/LnRvdGFsVG9rZW5zID8/XG4gICAgICAgICAgICAgICAgICAgIGlucHV0Py50b3RhbF90b2tlbnMgPz9cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pbnB1dFRva2VucyArIHRoaXMub3V0cHV0VG9rZW5zO1xuICAgICAgICAgICAgY29uc3QgaW5wdXRUb2tlbnNEZXRhaWxzID0gaW5wdXQ/LmlucHV0VG9rZW5zRGV0YWlscyA/PyBpbnB1dD8uaW5wdXRfdG9rZW5zX2RldGFpbHM7XG4gICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShpbnB1dFRva2Vuc0RldGFpbHMpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5pbnB1dFRva2Vuc0RldGFpbHMgPSBpbnB1dFRva2Vuc0RldGFpbHM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLmlucHV0VG9rZW5zRGV0YWlscyA9IGlucHV0VG9rZW5zRGV0YWlsc1xuICAgICAgICAgICAgICAgICAgICA/IFtpbnB1dFRva2Vuc0RldGFpbHNdXG4gICAgICAgICAgICAgICAgICAgIDogW107XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBvdXRwdXRUb2tlbnNEZXRhaWxzID0gaW5wdXQ/Lm91dHB1dFRva2Vuc0RldGFpbHMgPz8gaW5wdXQ/Lm91dHB1dF90b2tlbnNfZGV0YWlscztcbiAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KG91dHB1dFRva2Vuc0RldGFpbHMpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5vdXRwdXRUb2tlbnNEZXRhaWxzID0gb3V0cHV0VG9rZW5zRGV0YWlscztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMub3V0cHV0VG9rZW5zRGV0YWlscyA9IG91dHB1dFRva2Vuc0RldGFpbHNcbiAgICAgICAgICAgICAgICAgICAgPyBbb3V0cHV0VG9rZW5zRGV0YWlsc11cbiAgICAgICAgICAgICAgICAgICAgOiBbXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHJlcXVlc3RVc2FnZUVudHJpZXMgPSBpbnB1dD8ucmVxdWVzdFVzYWdlRW50cmllcyA/PyBpbnB1dD8ucmVxdWVzdF91c2FnZV9lbnRyaWVzO1xuICAgICAgICAgICAgY29uc3Qgbm9ybWFsaXplZFJlcXVlc3RVc2FnZUVudHJpZXMgPSBBcnJheS5pc0FycmF5KHJlcXVlc3RVc2FnZUVudHJpZXMpXG4gICAgICAgICAgICAgICAgPyByZXF1ZXN0VXNhZ2VFbnRyaWVzLm1hcCgoZW50cnkpID0+IGVudHJ5IGluc3RhbmNlb2YgUmVxdWVzdFVzYWdlID8gZW50cnkgOiBuZXcgUmVxdWVzdFVzYWdlKGVudHJ5KSlcbiAgICAgICAgICAgICAgICA6IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIHRoaXMucmVxdWVzdFVzYWdlRW50cmllcyA9XG4gICAgICAgICAgICAgICAgbm9ybWFsaXplZFJlcXVlc3RVc2FnZUVudHJpZXMgJiZcbiAgICAgICAgICAgICAgICAgICAgbm9ybWFsaXplZFJlcXVlc3RVc2FnZUVudHJpZXMubGVuZ3RoID4gMFxuICAgICAgICAgICAgICAgICAgICA/IG5vcm1hbGl6ZWRSZXF1ZXN0VXNhZ2VFbnRyaWVzXG4gICAgICAgICAgICAgICAgICAgIDogdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFkZChuZXdVc2FnZSkge1xuICAgICAgICB0aGlzLnJlcXVlc3RzICs9IG5ld1VzYWdlLnJlcXVlc3RzID8/IDA7XG4gICAgICAgIHRoaXMuaW5wdXRUb2tlbnMgKz0gbmV3VXNhZ2UuaW5wdXRUb2tlbnMgPz8gMDtcbiAgICAgICAgdGhpcy5vdXRwdXRUb2tlbnMgKz0gbmV3VXNhZ2Uub3V0cHV0VG9rZW5zID8/IDA7XG4gICAgICAgIHRoaXMudG90YWxUb2tlbnMgKz0gbmV3VXNhZ2UudG90YWxUb2tlbnMgPz8gMDtcbiAgICAgICAgaWYgKG5ld1VzYWdlLmlucHV0VG9rZW5zRGV0YWlscykge1xuICAgICAgICAgICAgLy8gVGhlIHR5cGUgZG9lcyBub3QgYWxsb3cgdW5kZWZpbmVkLCBidXQgaXQgY291bGQgaGFwcGVuIHJ1bnRpbWVcbiAgICAgICAgICAgIHRoaXMuaW5wdXRUb2tlbnNEZXRhaWxzLnB1c2goLi4ubmV3VXNhZ2UuaW5wdXRUb2tlbnNEZXRhaWxzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobmV3VXNhZ2Uub3V0cHV0VG9rZW5zRGV0YWlscykge1xuICAgICAgICAgICAgLy8gVGhlIHR5cGUgZG9lcyBub3QgYWxsb3cgdW5kZWZpbmVkLCBidXQgaXQgY291bGQgaGFwcGVuIHJ1bnRpbWVcbiAgICAgICAgICAgIHRoaXMub3V0cHV0VG9rZW5zRGV0YWlscy5wdXNoKC4uLm5ld1VzYWdlLm91dHB1dFRva2Vuc0RldGFpbHMpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KG5ld1VzYWdlLnJlcXVlc3RVc2FnZUVudHJpZXMpICYmXG4gICAgICAgICAgICBuZXdVc2FnZS5yZXF1ZXN0VXNhZ2VFbnRyaWVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHRoaXMucmVxdWVzdFVzYWdlRW50cmllcyA/Pz0gW107XG4gICAgICAgICAgICB0aGlzLnJlcXVlc3RVc2FnZUVudHJpZXMucHVzaCguLi5uZXdVc2FnZS5yZXF1ZXN0VXNhZ2VFbnRyaWVzLm1hcCgoZW50cnkpID0+IGVudHJ5IGluc3RhbmNlb2YgUmVxdWVzdFVzYWdlID8gZW50cnkgOiBuZXcgUmVxdWVzdFVzYWdlKGVudHJ5KSkpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKG5ld1VzYWdlLnJlcXVlc3RzID09PSAxICYmIG5ld1VzYWdlLnRvdGFsVG9rZW5zID4gMCkge1xuICAgICAgICAgICAgdGhpcy5yZXF1ZXN0VXNhZ2VFbnRyaWVzID8/PSBbXTtcbiAgICAgICAgICAgIHRoaXMucmVxdWVzdFVzYWdlRW50cmllcy5wdXNoKG5ldyBSZXF1ZXN0VXNhZ2Uoe1xuICAgICAgICAgICAgICAgIGlucHV0VG9rZW5zOiBuZXdVc2FnZS5pbnB1dFRva2VucyxcbiAgICAgICAgICAgICAgICBvdXRwdXRUb2tlbnM6IG5ld1VzYWdlLm91dHB1dFRva2VucyxcbiAgICAgICAgICAgICAgICB0b3RhbFRva2VuczogbmV3VXNhZ2UudG90YWxUb2tlbnMsXG4gICAgICAgICAgICAgICAgaW5wdXRUb2tlbnNEZXRhaWxzOiBuZXdVc2FnZS5pbnB1dFRva2Vuc0RldGFpbHM/LlswXSxcbiAgICAgICAgICAgICAgICBvdXRwdXRUb2tlbnNEZXRhaWxzOiBuZXdVc2FnZS5vdXRwdXRUb2tlbnNEZXRhaWxzPy5bMF0sXG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH1cbiAgICB9XG59XG5leHBvcnQgeyBSZXF1ZXN0VXNhZ2VEYXRhLCBVc2FnZURhdGEgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXVzYWdlLm1qcy5tYXAiLCJpbXBvcnQgbG9nZ2VyIGZyb20gXCIuL2xvZ2dlci5tanNcIjtcbmltcG9ydCB7IFVzYWdlIH0gZnJvbSBcIi4vdXNhZ2UubWpzXCI7XG4vKipcbiAqIEEgY29udGV4dCBvYmplY3QgdGhhdCBpcyBwYXNzZWQgdG8gdGhlIGBSdW5uZXIucnVuKClgIG1ldGhvZC5cbiAqL1xuZXhwb3J0IGNsYXNzIFJ1bkNvbnRleHQge1xuICAgIC8qKlxuICAgICAqIFRoZSBjb250ZXh0IG9iamVjdCB5b3UgcGFzc2VkIHRvIHRoZSBgUnVubmVyLnJ1bigpYCBtZXRob2QuXG4gICAgICovXG4gICAgY29udGV4dDtcbiAgICAvKipcbiAgICAgKiBUaGUgdXNhZ2Ugb2YgdGhlIGFnZW50IHJ1biBzbyBmYXIuIEZvciBzdHJlYW1lZCByZXNwb25zZXMsIHRoZSB1c2FnZSB3aWxsIGJlIHVwZGF0ZWQgaW4gcmVhbC10aW1lXG4gICAgICovXG4gICAgdXNhZ2U7XG4gICAgLyoqXG4gICAgICogQSBtYXAgb2YgdG9vbCBuYW1lcyB0byB3aGV0aGVyIHRoZXkgaGF2ZSBiZWVuIGFwcHJvdmVkLlxuICAgICAqL1xuICAgICNhcHByb3ZhbHM7XG4gICAgY29uc3RydWN0b3IoY29udGV4dCA9IHt9KSB7XG4gICAgICAgIHRoaXMuY29udGV4dCA9IGNvbnRleHQ7XG4gICAgICAgIHRoaXMudXNhZ2UgPSBuZXcgVXNhZ2UoKTtcbiAgICAgICAgdGhpcy4jYXBwcm92YWxzID0gbmV3IE1hcCgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZWJ1aWxkIHRoZSBhcHByb3ZhbHMgbWFwIGZyb20gYSBzZXJpYWxpemVkIHN0YXRlLlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqXG4gICAgICogQHBhcmFtIGFwcHJvdmFscyAtIFRoZSBhcHByb3ZhbHMgbWFwIHRvIHJlYnVpbGQuXG4gICAgICovXG4gICAgX3JlYnVpbGRBcHByb3ZhbHMoYXBwcm92YWxzKSB7XG4gICAgICAgIHRoaXMuI2FwcHJvdmFscyA9IG5ldyBNYXAoT2JqZWN0LmVudHJpZXMoYXBwcm92YWxzKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENoZWNrIGlmIGEgdG9vbCBjYWxsIGhhcyBiZWVuIGFwcHJvdmVkLlxuICAgICAqXG4gICAgICogQHBhcmFtIGFwcHJvdmFsIC0gRGV0YWlscyBhYm91dCB0aGUgdG9vbCBjYWxsIGJlaW5nIGV2YWx1YXRlZC5cbiAgICAgKiBAcmV0dXJucyBgdHJ1ZWAgaWYgdGhlIHRvb2wgY2FsbCBoYXMgYmVlbiBhcHByb3ZlZCwgYGZhbHNlYCBpZiBibG9ja2VkIGFuZCBgdW5kZWZpbmVkYCBpZiBub3QgeWV0IGFwcHJvdmVkIG9yIHJlamVjdGVkLlxuICAgICAqL1xuICAgIGlzVG9vbEFwcHJvdmVkKGFwcHJvdmFsKSB7XG4gICAgICAgIGNvbnN0IHsgdG9vbE5hbWUsIGNhbGxJZCB9ID0gYXBwcm92YWw7XG4gICAgICAgIGNvbnN0IGFwcHJvdmFsRW50cnkgPSB0aGlzLiNhcHByb3ZhbHMuZ2V0KHRvb2xOYW1lKTtcbiAgICAgICAgaWYgKGFwcHJvdmFsRW50cnk/LmFwcHJvdmVkID09PSB0cnVlICYmIGFwcHJvdmFsRW50cnkucmVqZWN0ZWQgPT09IHRydWUpIHtcbiAgICAgICAgICAgIGxvZ2dlci53YXJuKCdUb29sIGlzIHBlcm1hbmVudGx5IGFwcHJvdmVkIGFuZCByZWplY3RlZCBhdCB0aGUgc2FtZSB0aW1lLiBBcHByb3ZhbCB0YWtlcyBwcmVjZWRlbmNlJyk7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoYXBwcm92YWxFbnRyeT8uYXBwcm92ZWQgPT09IHRydWUpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChhcHByb3ZhbEVudHJ5Py5yZWplY3RlZCA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGluZGl2aWR1YWxDYWxsQXBwcm92YWwgPSBBcnJheS5pc0FycmF5KGFwcHJvdmFsRW50cnk/LmFwcHJvdmVkKVxuICAgICAgICAgICAgPyBhcHByb3ZhbEVudHJ5LmFwcHJvdmVkLmluY2x1ZGVzKGNhbGxJZClcbiAgICAgICAgICAgIDogZmFsc2U7XG4gICAgICAgIGNvbnN0IGluZGl2aWR1YWxDYWxsUmVqZWN0aW9uID0gQXJyYXkuaXNBcnJheShhcHByb3ZhbEVudHJ5Py5yZWplY3RlZClcbiAgICAgICAgICAgID8gYXBwcm92YWxFbnRyeS5yZWplY3RlZC5pbmNsdWRlcyhjYWxsSWQpXG4gICAgICAgICAgICA6IGZhbHNlO1xuICAgICAgICBpZiAoaW5kaXZpZHVhbENhbGxBcHByb3ZhbCAmJiBpbmRpdmlkdWFsQ2FsbFJlamVjdGlvbikge1xuICAgICAgICAgICAgbG9nZ2VyLndhcm4oYFRvb2wgY2FsbCAke2NhbGxJZH0gaXMgYm90aCBhcHByb3ZlZCBhbmQgcmVqZWN0ZWQgYXQgdGhlIHNhbWUgdGltZS4gQXBwcm92YWwgdGFrZXMgcHJlY2VkZW5jZWApO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGluZGl2aWR1YWxDYWxsQXBwcm92YWwpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpbmRpdmlkdWFsQ2FsbFJlamVjdGlvbikge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFwcHJvdmUgYSB0b29sIGNhbGwuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gYXBwcm92YWxJdGVtIC0gVGhlIHRvb2wgYXBwcm92YWwgaXRlbSB0byBhcHByb3ZlLlxuICAgICAqIEBwYXJhbSBvcHRpb25zIC0gQWRkaXRpb25hbCBhcHByb3ZhbCBiZWhhdmlvciBvcHRpb25zLlxuICAgICAqL1xuICAgIGFwcHJvdmVUb29sKGFwcHJvdmFsSXRlbSwgeyBhbHdheXNBcHByb3ZlID0gZmFsc2UgfSA9IHt9KSB7XG4gICAgICAgIGNvbnN0IHRvb2xOYW1lID0gYXBwcm92YWxJdGVtLnRvb2xOYW1lID8/IGFwcHJvdmFsSXRlbS5yYXdJdGVtLm5hbWU7XG4gICAgICAgIGlmIChhbHdheXNBcHByb3ZlKSB7XG4gICAgICAgICAgICB0aGlzLiNhcHByb3ZhbHMuc2V0KHRvb2xOYW1lLCB7XG4gICAgICAgICAgICAgICAgYXBwcm92ZWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgcmVqZWN0ZWQ6IFtdLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgYXBwcm92YWxFbnRyeSA9IHRoaXMuI2FwcHJvdmFscy5nZXQodG9vbE5hbWUpID8/IHtcbiAgICAgICAgICAgIGFwcHJvdmVkOiBbXSxcbiAgICAgICAgICAgIHJlamVjdGVkOiBbXSxcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoYXBwcm92YWxFbnRyeS5hcHByb3ZlZCkpIHtcbiAgICAgICAgICAgIC8vIGZ1bmN0aW9uIHRvb2wgaGFzIGNhbGxfaWQsIGhvc3RlZCB0b29sIGNhbGwgaGFzIGlkXG4gICAgICAgICAgICBjb25zdCBjYWxsSWQgPSAnY2FsbElkJyBpbiBhcHByb3ZhbEl0ZW0ucmF3SXRlbVxuICAgICAgICAgICAgICAgID8gYXBwcm92YWxJdGVtLnJhd0l0ZW0uY2FsbElkIC8vIGZ1bmN0aW9uIHRvb2xzXG4gICAgICAgICAgICAgICAgOiBhcHByb3ZhbEl0ZW0ucmF3SXRlbS5pZDsgLy8gaG9zdGVkIHRvb2xzXG4gICAgICAgICAgICBhcHByb3ZhbEVudHJ5LmFwcHJvdmVkLnB1c2goY2FsbElkKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLiNhcHByb3ZhbHMuc2V0KHRvb2xOYW1lLCBhcHByb3ZhbEVudHJ5KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVqZWN0IGEgdG9vbCBjYWxsLlxuICAgICAqXG4gICAgICogQHBhcmFtIGFwcHJvdmFsSXRlbSAtIFRoZSB0b29sIGFwcHJvdmFsIGl0ZW0gdG8gcmVqZWN0LlxuICAgICAqL1xuICAgIHJlamVjdFRvb2woYXBwcm92YWxJdGVtLCB7IGFsd2F5c1JlamVjdCA9IGZhbHNlIH0gPSB7fSkge1xuICAgICAgICBjb25zdCB0b29sTmFtZSA9IGFwcHJvdmFsSXRlbS50b29sTmFtZSA/PyBhcHByb3ZhbEl0ZW0ucmF3SXRlbS5uYW1lO1xuICAgICAgICBpZiAoYWx3YXlzUmVqZWN0KSB7XG4gICAgICAgICAgICB0aGlzLiNhcHByb3ZhbHMuc2V0KHRvb2xOYW1lLCB7XG4gICAgICAgICAgICAgICAgYXBwcm92ZWQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgIHJlamVjdGVkOiB0cnVlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgYXBwcm92YWxFbnRyeSA9IHRoaXMuI2FwcHJvdmFscy5nZXQodG9vbE5hbWUpID8/IHtcbiAgICAgICAgICAgIGFwcHJvdmVkOiBbXSxcbiAgICAgICAgICAgIHJlamVjdGVkOiBbXSxcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoYXBwcm92YWxFbnRyeS5yZWplY3RlZCkpIHtcbiAgICAgICAgICAgIC8vIGZ1bmN0aW9uIHRvb2wgaGFzIGNhbGxfaWQsIGhvc3RlZCB0b29sIGNhbGwgaGFzIGlkXG4gICAgICAgICAgICBjb25zdCBjYWxsSWQgPSAnY2FsbElkJyBpbiBhcHByb3ZhbEl0ZW0ucmF3SXRlbVxuICAgICAgICAgICAgICAgID8gYXBwcm92YWxJdGVtLnJhd0l0ZW0uY2FsbElkIC8vIGZ1bmN0aW9uIHRvb2xzXG4gICAgICAgICAgICAgICAgOiBhcHByb3ZhbEl0ZW0ucmF3SXRlbS5pZDsgLy8gaG9zdGVkIHRvb2xzXG4gICAgICAgICAgICBhcHByb3ZhbEVudHJ5LnJlamVjdGVkLnB1c2goY2FsbElkKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLiNhcHByb3ZhbHMuc2V0KHRvb2xOYW1lLCBhcHByb3ZhbEVudHJ5KTtcbiAgICB9XG4gICAgdG9KU09OKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgY29udGV4dDogdGhpcy5jb250ZXh0LFxuICAgICAgICAgICAgdXNhZ2U6IHRoaXMudXNhZ2UsXG4gICAgICAgICAgICBhcHByb3ZhbHM6IE9iamVjdC5mcm9tRW50cmllcyh0aGlzLiNhcHByb3ZhbHMuZW50cmllcygpKSxcbiAgICAgICAgfTtcbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1ydW5Db250ZXh0Lm1qcy5tYXAiLCJpbXBvcnQgeyBVc2VyRXJyb3IgfSBmcm9tIFwiLi4vZXJyb3JzLm1qc1wiO1xuZnVuY3Rpb24gaXNDb21wdXRlckluc3RhbmNlKHZhbHVlKSB7XG4gICAgcmV0dXJuICghIXZhbHVlICYmXG4gICAgICAgIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiZcbiAgICAgICAgJ2Vudmlyb25tZW50JyBpbiB2YWx1ZSAmJlxuICAgICAgICAnZGltZW5zaW9ucycgaW4gdmFsdWUpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHNlcmlhbGl6ZVRvb2wodG9vbCkge1xuICAgIGlmICh0b29sLnR5cGUgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHR5cGU6ICdmdW5jdGlvbicsXG4gICAgICAgICAgICBuYW1lOiB0b29sLm5hbWUsXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogdG9vbC5kZXNjcmlwdGlvbixcbiAgICAgICAgICAgIHBhcmFtZXRlcnM6IHRvb2wucGFyYW1ldGVycyxcbiAgICAgICAgICAgIHN0cmljdDogdG9vbC5zdHJpY3QsXG4gICAgICAgIH07XG4gICAgfVxuICAgIGlmICh0b29sLnR5cGUgPT09ICdjb21wdXRlcicpIHtcbiAgICAgICAgLy8gV2hlbiBhIGNvbXB1dGVyIGlzIGNyZWF0ZWQgbGF6aWx5IHZpYSBhbiBpbml0aWFsaXplciwgc2VyaWFsaXplVG9vbCBjYW4gYmUgY2FsbGVkIGJlZm9yZSBpbml0aWFsaXphdGlvbiAoZS5nLiwgbWFudWFsIHNlcmlhbGl6ZSB3aXRob3V0IHJ1bm5pbmcgdGhlIGFnZW50KS5cbiAgICAgICAgaWYgKCFpc0NvbXB1dGVySW5zdGFuY2UodG9vbC5jb21wdXRlcikpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBVc2VyRXJyb3IoJ0NvbXB1dGVyIHRvb2wgaXMgbm90IGluaXRpYWxpemVkIGZvciBzZXJpYWxpemF0aW9uLiBDYWxsIHJlc29sdmVDb21wdXRlcih7IHRvb2wsIHJ1bkNvbnRleHQgfSkgZmlyc3QgKGZvciBleGFtcGxlLCB3aGVuIGJ1aWxkaW5nIGEgbW9kZWwgcGF5bG9hZCBvdXRzaWRlIFJ1bm5lci5ydW4pLicpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB0eXBlOiAnY29tcHV0ZXInLFxuICAgICAgICAgICAgbmFtZTogdG9vbC5uYW1lLFxuICAgICAgICAgICAgZW52aXJvbm1lbnQ6IHRvb2wuY29tcHV0ZXIuZW52aXJvbm1lbnQsXG4gICAgICAgICAgICBkaW1lbnNpb25zOiB0b29sLmNvbXB1dGVyLmRpbWVuc2lvbnMsXG4gICAgICAgIH07XG4gICAgfVxuICAgIGlmICh0b29sLnR5cGUgPT09ICdzaGVsbCcpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHR5cGU6ICdzaGVsbCcsXG4gICAgICAgICAgICBuYW1lOiB0b29sLm5hbWUsXG4gICAgICAgIH07XG4gICAgfVxuICAgIGlmICh0b29sLnR5cGUgPT09ICdhcHBseV9wYXRjaCcpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHR5cGU6ICdhcHBseV9wYXRjaCcsXG4gICAgICAgICAgICBuYW1lOiB0b29sLm5hbWUsXG4gICAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICAgIHR5cGU6ICdob3N0ZWRfdG9vbCcsXG4gICAgICAgIG5hbWU6IHRvb2wubmFtZSxcbiAgICAgICAgcHJvdmlkZXJEYXRhOiB0b29sLnByb3ZpZGVyRGF0YSxcbiAgICB9O1xufVxuZXhwb3J0IGZ1bmN0aW9uIHNlcmlhbGl6ZUhhbmRvZmYoaCkge1xuICAgIHJldHVybiB7XG4gICAgICAgIHRvb2xOYW1lOiBoLnRvb2xOYW1lLFxuICAgICAgICB0b29sRGVzY3JpcHRpb246IGgudG9vbERlc2NyaXB0aW9uLFxuICAgICAgICBpbnB1dEpzb25TY2hlbWE6IGguaW5wdXRKc29uU2NoZW1hLFxuICAgICAgICBzdHJpY3RKc29uU2NoZW1hOiBoLnN0cmljdEpzb25TY2hlbWEsXG4gICAgfTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXNlcmlhbGl6ZS5tanMubWFwIiwiaW1wb3J0IHsgdG9TbWFydFN0cmluZyB9IGZyb20gXCIuL3V0aWxzL3NtYXJ0U3RyaW5nLm1qc1wiO1xuZXhwb3J0IGNsYXNzIFJ1bkl0ZW1CYXNlIHtcbiAgICB0eXBlID0gJ2Jhc2VfaXRlbSc7XG4gICAgcmF3SXRlbTtcbiAgICB0b0pTT04oKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB0eXBlOiB0aGlzLnR5cGUsXG4gICAgICAgICAgICByYXdJdGVtOiB0aGlzLnJhd0l0ZW0sXG4gICAgICAgIH07XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIFJ1bk1lc3NhZ2VPdXRwdXRJdGVtIGV4dGVuZHMgUnVuSXRlbUJhc2Uge1xuICAgIHJhd0l0ZW07XG4gICAgYWdlbnQ7XG4gICAgdHlwZSA9ICdtZXNzYWdlX291dHB1dF9pdGVtJztcbiAgICBjb25zdHJ1Y3RvcihyYXdJdGVtLCBhZ2VudCkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLnJhd0l0ZW0gPSByYXdJdGVtO1xuICAgICAgICB0aGlzLmFnZW50ID0gYWdlbnQ7XG4gICAgfVxuICAgIHRvSlNPTigpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIC4uLnN1cGVyLnRvSlNPTigpLFxuICAgICAgICAgICAgYWdlbnQ6IHRoaXMuYWdlbnQudG9KU09OKCksXG4gICAgICAgIH07XG4gICAgfVxuICAgIGdldCBjb250ZW50KCkge1xuICAgICAgICBsZXQgY29udGVudCA9ICcnO1xuICAgICAgICBmb3IgKGNvbnN0IHBhcnQgb2YgdGhpcy5yYXdJdGVtLmNvbnRlbnQpIHtcbiAgICAgICAgICAgIGlmIChwYXJ0LnR5cGUgPT09ICdvdXRwdXRfdGV4dCcpIHtcbiAgICAgICAgICAgICAgICBjb250ZW50ICs9IHBhcnQudGV4dDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY29udGVudDtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgUnVuVG9vbENhbGxJdGVtIGV4dGVuZHMgUnVuSXRlbUJhc2Uge1xuICAgIHJhd0l0ZW07XG4gICAgYWdlbnQ7XG4gICAgdHlwZSA9ICd0b29sX2NhbGxfaXRlbSc7XG4gICAgY29uc3RydWN0b3IocmF3SXRlbSwgYWdlbnQpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5yYXdJdGVtID0gcmF3SXRlbTtcbiAgICAgICAgdGhpcy5hZ2VudCA9IGFnZW50O1xuICAgIH1cbiAgICB0b0pTT04oKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAuLi5zdXBlci50b0pTT04oKSxcbiAgICAgICAgICAgIGFnZW50OiB0aGlzLmFnZW50LnRvSlNPTigpLFxuICAgICAgICB9O1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBSdW5Ub29sQ2FsbE91dHB1dEl0ZW0gZXh0ZW5kcyBSdW5JdGVtQmFzZSB7XG4gICAgcmF3SXRlbTtcbiAgICBhZ2VudDtcbiAgICBvdXRwdXQ7XG4gICAgdHlwZSA9ICd0b29sX2NhbGxfb3V0cHV0X2l0ZW0nO1xuICAgIGNvbnN0cnVjdG9yKHJhd0l0ZW0sIGFnZW50LCBvdXRwdXQpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5yYXdJdGVtID0gcmF3SXRlbTtcbiAgICAgICAgdGhpcy5hZ2VudCA9IGFnZW50O1xuICAgICAgICB0aGlzLm91dHB1dCA9IG91dHB1dDtcbiAgICB9XG4gICAgdG9KU09OKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgLi4uc3VwZXIudG9KU09OKCksXG4gICAgICAgICAgICBhZ2VudDogdGhpcy5hZ2VudC50b0pTT04oKSxcbiAgICAgICAgICAgIG91dHB1dDogdG9TbWFydFN0cmluZyh0aGlzLm91dHB1dCksXG4gICAgICAgIH07XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIFJ1blJlYXNvbmluZ0l0ZW0gZXh0ZW5kcyBSdW5JdGVtQmFzZSB7XG4gICAgcmF3SXRlbTtcbiAgICBhZ2VudDtcbiAgICB0eXBlID0gJ3JlYXNvbmluZ19pdGVtJztcbiAgICBjb25zdHJ1Y3RvcihyYXdJdGVtLCBhZ2VudCkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLnJhd0l0ZW0gPSByYXdJdGVtO1xuICAgICAgICB0aGlzLmFnZW50ID0gYWdlbnQ7XG4gICAgfVxuICAgIHRvSlNPTigpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIC4uLnN1cGVyLnRvSlNPTigpLFxuICAgICAgICAgICAgYWdlbnQ6IHRoaXMuYWdlbnQudG9KU09OKCksXG4gICAgICAgIH07XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIFJ1bkhhbmRvZmZDYWxsSXRlbSBleHRlbmRzIFJ1bkl0ZW1CYXNlIHtcbiAgICByYXdJdGVtO1xuICAgIGFnZW50O1xuICAgIHR5cGUgPSAnaGFuZG9mZl9jYWxsX2l0ZW0nO1xuICAgIGNvbnN0cnVjdG9yKHJhd0l0ZW0sIGFnZW50KSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMucmF3SXRlbSA9IHJhd0l0ZW07XG4gICAgICAgIHRoaXMuYWdlbnQgPSBhZ2VudDtcbiAgICB9XG4gICAgdG9KU09OKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgLi4uc3VwZXIudG9KU09OKCksXG4gICAgICAgICAgICBhZ2VudDogdGhpcy5hZ2VudC50b0pTT04oKSxcbiAgICAgICAgfTtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgUnVuSGFuZG9mZk91dHB1dEl0ZW0gZXh0ZW5kcyBSdW5JdGVtQmFzZSB7XG4gICAgcmF3SXRlbTtcbiAgICBzb3VyY2VBZ2VudDtcbiAgICB0YXJnZXRBZ2VudDtcbiAgICB0eXBlID0gJ2hhbmRvZmZfb3V0cHV0X2l0ZW0nO1xuICAgIGNvbnN0cnVjdG9yKHJhd0l0ZW0sIHNvdXJjZUFnZW50LCB0YXJnZXRBZ2VudCkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLnJhd0l0ZW0gPSByYXdJdGVtO1xuICAgICAgICB0aGlzLnNvdXJjZUFnZW50ID0gc291cmNlQWdlbnQ7XG4gICAgICAgIHRoaXMudGFyZ2V0QWdlbnQgPSB0YXJnZXRBZ2VudDtcbiAgICB9XG4gICAgdG9KU09OKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgLi4uc3VwZXIudG9KU09OKCksXG4gICAgICAgICAgICBzb3VyY2VBZ2VudDogdGhpcy5zb3VyY2VBZ2VudC50b0pTT04oKSxcbiAgICAgICAgICAgIHRhcmdldEFnZW50OiB0aGlzLnRhcmdldEFnZW50LnRvSlNPTigpLFxuICAgICAgICB9O1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBSdW5Ub29sQXBwcm92YWxJdGVtIGV4dGVuZHMgUnVuSXRlbUJhc2Uge1xuICAgIHJhd0l0ZW07XG4gICAgYWdlbnQ7XG4gICAgdG9vbE5hbWU7XG4gICAgdHlwZSA9ICd0b29sX2FwcHJvdmFsX2l0ZW0nO1xuICAgIGNvbnN0cnVjdG9yKHJhd0l0ZW0sIGFnZW50LCBcbiAgICAvKipcbiAgICAgKiBFeHBsaWNpdCB0b29sIG5hbWUgdG8gdXNlIGZvciBhcHByb3ZhbCB0cmFja2luZyB3aGVuIG5vdCBwcmVzZW50IG9uIHRoZSByYXcgaXRlbS5cbiAgICAgKi9cbiAgICB0b29sTmFtZSkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLnJhd0l0ZW0gPSByYXdJdGVtO1xuICAgICAgICB0aGlzLmFnZW50ID0gYWdlbnQ7XG4gICAgICAgIHRoaXMudG9vbE5hbWUgPSB0b29sTmFtZTtcbiAgICAgICAgdGhpcy50b29sTmFtZSA9IHRvb2xOYW1lID8/IHJhd0l0ZW0ubmFtZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgdG9vbCBuYW1lIGlmIGF2YWlsYWJsZSBvbiB0aGUgcmF3IGl0ZW0gb3IgcHJvdmlkZWQgZXhwbGljaXRseS5cbiAgICAgKiBLZXB0IGZvciBiYWNrd2FyZHMgY29tcGF0aWJpbGl0eSB3aXRoIGNvZGUgdGhhdCBwcmV2aW91c2x5IHJlbGllZCBvbiBgcmF3SXRlbS5uYW1lYC5cbiAgICAgKi9cbiAgICBnZXQgbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudG9vbE5hbWUgPz8gdGhpcy5yYXdJdGVtLm5hbWU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIGFyZ3VtZW50cyBpZiB0aGUgcmF3IGl0ZW0gaGFzIGFuIGFyZ3VtZW50cyBwcm9wZXJ0eSBvdGhlcndpc2UgdGhpcyB3aWxsIGJlIHVuZGVmaW5lZC5cbiAgICAgKi9cbiAgICBnZXQgYXJndW1lbnRzKCkge1xuICAgICAgICByZXR1cm4gJ2FyZ3VtZW50cycgaW4gdGhpcy5yYXdJdGVtID8gdGhpcy5yYXdJdGVtLmFyZ3VtZW50cyA6IHVuZGVmaW5lZDtcbiAgICB9XG4gICAgdG9KU09OKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgLi4uc3VwZXIudG9KU09OKCksXG4gICAgICAgICAgICBhZ2VudDogdGhpcy5hZ2VudC50b0pTT04oKSxcbiAgICAgICAgICAgIHRvb2xOYW1lOiB0aGlzLnRvb2xOYW1lLFxuICAgICAgICB9O1xuICAgIH1cbn1cbi8qKlxuICogRXh0cmFjdCBhbGwgdGV4dCBvdXRwdXQgZnJvbSBhIGxpc3Qgb2YgcnVuIGl0ZW1zIGJ5IGNvbmNhdGVuYXRpbmcgdGhlIGNvbnRlbnQgb2YgYWxsXG4gKiBtZXNzYWdlIG91dHB1dCBpdGVtcy5cbiAqXG4gKiBAcGFyYW0gaXRlbXMgLSBUaGUgbGlzdCBvZiBydW4gaXRlbXMgdG8gZXh0cmFjdCB0ZXh0IGZyb20uXG4gKiBAcmV0dXJucyBBIHN0cmluZyBvZiBhbGwgdGhlIHRleHQgb3V0cHV0IGZyb20gdGhlIHJ1biBpdGVtcy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGV4dHJhY3RBbGxUZXh0T3V0cHV0KGl0ZW1zKSB7XG4gICAgcmV0dXJuIGl0ZW1zXG4gICAgICAgIC5maWx0ZXIoKGl0ZW0pID0+IGl0ZW0udHlwZSA9PT0gJ21lc3NhZ2Vfb3V0cHV0X2l0ZW0nKVxuICAgICAgICAubWFwKChpdGVtKSA9PiBpdGVtLmNvbnRlbnQpXG4gICAgICAgIC5qb2luKCcnKTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWl0ZW1zLm1qcy5tYXAiLCJpbXBvcnQgeyByZXNldEN1cnJlbnRTcGFuLCBzZXRDdXJyZW50U3Bhbiwgd2l0aE5ld1NwYW5Db250ZXh0LCB9IGZyb20gXCIuL2NvbnRleHQubWpzXCI7XG5pbXBvcnQgeyBnZXRHbG9iYWxUcmFjZVByb3ZpZGVyIH0gZnJvbSBcIi4vcHJvdmlkZXIubWpzXCI7XG5mdW5jdGlvbiBfd2l0aFNwYW5GYWN0b3J5KGNyZWF0ZVNwYW4pIHtcbiAgICByZXR1cm4gYXN5bmMgKGZuLCAuLi5hcmdzKSA9PiB7XG4gICAgICAgIC8vIENyZWF0aW5nIGEgbmV3IHNwYW4gY29udGV4dCB0byBtYWtlIHN1cmUgdGhhdCB0aGUgcHJldmlvdXMgc3BhbiBpcyBjb3JyZWN0bHkgcmVzZXRcbiAgICAgICAgcmV0dXJuIHdpdGhOZXdTcGFuQ29udGV4dChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBzcGFuID0gY3JlYXRlU3BhbiguLi5hcmdzKTtcbiAgICAgICAgICAgIHNldEN1cnJlbnRTcGFuKHNwYW4pO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBzcGFuLnN0YXJ0KCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGF3YWl0IGZuKHNwYW4pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgc3Bhbi5zZXRFcnJvcih7XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IGVycm9yLmRhdGEsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmaW5hbGx5IHtcbiAgICAgICAgICAgICAgICBzcGFuLmVuZCgpO1xuICAgICAgICAgICAgICAgIHJlc2V0Q3VycmVudFNwYW4oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfTtcbn1cbi8qKlxuICogQ3JlYXRlIGEgbmV3IHJlc3BvbnNlIHNwYW4uIFRoZSBzcGFuIHdpbGwgbm90IGJlIHN0YXJ0ZWQgYXV0b21hdGljYWxseSwgeW91IHNob3VsZCBlaXRoZXJcbiAqIHVzZSBgd2l0aFJlc3BvbnNlU3BhbigpYCBvciBjYWxsIGBzcGFuLnN0YXJ0KClgIGFuZCBgc3Bhbi5lbmQoKWAgbWFudWFsbHkuXG4gKlxuICogVGhpcyBzcGFuIGNhcHR1cmVzIHRoZSBkZXRhaWxzIG9mIGEgbW9kZWwgcmVzcG9uc2UsIHByaW1hcmlseSB0aGUgcmVzcG9uc2UgaWRlbnRpZmllci5cbiAqIElmIHlvdSBuZWVkIHRvIGNhcHR1cmUgZGV0YWlsZWQgZ2VuZXJhdGlvbiBpbmZvcm1hdGlvbiBzdWNoIGFzIGlucHV0L291dHB1dCBtZXNzYWdlcyxcbiAqIG1vZGVsIGNvbmZpZ3VyYXRpb24sIG9yIHVzYWdlIGRhdGEsIHVzZSBgY3JlYXRlR2VuZXJhdGlvblNwYW4oKWAgaW5zdGVhZC5cbiAqXG4gKiBAcGFyYW0gb3B0aW9ucyAtIE9wdGlvbmFsIHNwYW4gY3JlYXRpb24gb3B0aW9ucywgaW5jbHVkaW5nIHNwYW4gZGF0YSBhbmQgaWRlbnRpZmllcnMuXG4gKiBAcGFyYW0gcGFyZW50IC0gVGhlIHBhcmVudCBzcGFuIG9yIHRyYWNlLiBJZiBub3QgcHJvdmlkZWQsIHRoZSBjdXJyZW50IHRyYWNlL3NwYW4gd2lsbCBiZSB1c2VkXG4gKiBhdXRvbWF0aWNhbGx5LlxuICpcbiAqIEByZXR1cm5zIFRoZSBuZXdseSBjcmVhdGVkIHJlc3BvbnNlIHNwYW4uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVSZXNwb25zZVNwYW4ob3B0aW9ucywgcGFyZW50KSB7XG4gICAgb3B0aW9ucyA9IHt9O1xuICAgIHJldHVybiBnZXRHbG9iYWxUcmFjZVByb3ZpZGVyKCkuY3JlYXRlU3Bhbih7XG4gICAgICAgIC4uLm9wdGlvbnMsXG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgIHR5cGU6ICdyZXNwb25zZScsXG4gICAgICAgICAgICAuLi5vcHRpb25zLmRhdGEsXG4gICAgICAgIH0sXG4gICAgfSwgcGFyZW50KTtcbn1cbi8qKlxuICogQ3JlYXRlIGEgbmV3IHJlc3BvbnNlIHNwYW4gYW5kIGF1dG9tYXRpY2FsbHkgc3RhcnQgYW5kIGVuZCBpdC5cbiAqXG4gKiBUaGlzIHNwYW4gY2FwdHVyZXMgdGhlIGRldGFpbHMgb2YgYSBtb2RlbCByZXNwb25zZSwgcHJpbWFyaWx5IHRoZSByZXNwb25zZSBpZGVudGlmaWVyLlxuICogSWYgeW91IG5lZWQgdG8gY2FwdHVyZSBkZXRhaWxlZCBnZW5lcmF0aW9uIGluZm9ybWF0aW9uIHN1Y2ggYXMgaW5wdXQvb3V0cHV0IG1lc3NhZ2VzLFxuICogbW9kZWwgY29uZmlndXJhdGlvbiwgb3IgdXNhZ2UgZGF0YSwgdXNlIGBnZW5lcmF0aW9uU3BhbigpYCBpbnN0ZWFkLlxuICovXG5leHBvcnQgY29uc3Qgd2l0aFJlc3BvbnNlU3BhbiA9IF93aXRoU3BhbkZhY3RvcnkoY3JlYXRlUmVzcG9uc2VTcGFuKTtcbi8qKlxuICogQ3JlYXRlIGEgbmV3IGFnZW50IHNwYW4uIFRoZSBzcGFuIHdpbGwgbm90IGJlIHN0YXJ0ZWQgYXV0b21hdGljYWxseSwgeW91IHNob3VsZCBlaXRoZXJcbiAqIHVzZSBgd2l0aEFnZW50U3BhbigpYCBvciBjYWxsIGBzcGFuLnN0YXJ0KClgIGFuZCBgc3Bhbi5lbmQoKWAgbWFudWFsbHkuXG4gKlxuICogQHBhcmFtIG9wdGlvbnMgLSBPcHRpb25hbCBzcGFuIGNyZWF0aW9uIG9wdGlvbnMsIGluY2x1ZGluZyBzcGFuIGRhdGEgYW5kIGlkZW50aWZpZXJzLlxuICogQHBhcmFtIHBhcmVudCAtIFRoZSBwYXJlbnQgc3BhbiBvciB0cmFjZS4gSWYgbm90IHByb3ZpZGVkLCB0aGUgY3VycmVudCB0cmFjZS9zcGFuIHdpbGwgYmUgdXNlZFxuICogYXV0b21hdGljYWxseS5cbiAqXG4gKiBAcmV0dXJucyBUaGUgbmV3bHkgY3JlYXRlZCBhZ2VudCBzcGFuLlxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlQWdlbnRTcGFuKG9wdGlvbnMsIHBhcmVudCkge1xuICAgIHJldHVybiBnZXRHbG9iYWxUcmFjZVByb3ZpZGVyKCkuY3JlYXRlU3Bhbih7XG4gICAgICAgIC4uLm9wdGlvbnMsXG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgIHR5cGU6ICdhZ2VudCcsXG4gICAgICAgICAgICBuYW1lOiBvcHRpb25zPy5kYXRhPy5uYW1lID8/ICdBZ2VudCcsXG4gICAgICAgICAgICAuLi5vcHRpb25zPy5kYXRhLFxuICAgICAgICB9LFxuICAgIH0sIHBhcmVudCk7XG59XG4vKipcbiAqIENyZWF0ZSBhIG5ldyBhZ2VudCBzcGFuIGFuZCBhdXRvbWF0aWNhbGx5IHN0YXJ0IGFuZCBlbmQgaXQuXG4gKi9cbmV4cG9ydCBjb25zdCB3aXRoQWdlbnRTcGFuID0gX3dpdGhTcGFuRmFjdG9yeShjcmVhdGVBZ2VudFNwYW4pO1xuLyoqXG4gKiBDcmVhdGUgYSBuZXcgZnVuY3Rpb24gc3Bhbi4gVGhlIHNwYW4gd2lsbCBub3QgYmUgc3RhcnRlZCBhdXRvbWF0aWNhbGx5LCB5b3Ugc2hvdWxkIGVpdGhlclxuICogdXNlIGB3aXRoRnVuY3Rpb25TcGFuKClgIG9yIGNhbGwgYHNwYW4uc3RhcnQoKWAgYW5kIGBzcGFuLmVuZCgpYCBtYW51YWxseS5cbiAqXG4gKiBAcGFyYW0gb3B0aW9ucyAtIE9wdGlvbmFsIHNwYW4gY3JlYXRpb24gb3B0aW9ucywgaW5jbHVkaW5nIHNwYW4gZGF0YSBhbmQgaWRlbnRpZmllcnMuXG4gKiBAcGFyYW0gcGFyZW50IC0gVGhlIHBhcmVudCBzcGFuIG9yIHRyYWNlLiBJZiBub3QgcHJvdmlkZWQsIHRoZSBjdXJyZW50IHRyYWNlL3NwYW4gd2lsbCBiZSB1c2VkXG4gKiBhdXRvbWF0aWNhbGx5LlxuICpcbiAqIEByZXR1cm5zIFRoZSBuZXdseSBjcmVhdGVkIGZ1bmN0aW9uIHNwYW4uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVGdW5jdGlvblNwYW4ob3B0aW9ucywgcGFyZW50KSB7XG4gICAgcmV0dXJuIGdldEdsb2JhbFRyYWNlUHJvdmlkZXIoKS5jcmVhdGVTcGFuKHtcbiAgICAgICAgLi4ub3B0aW9ucyxcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgdHlwZTogJ2Z1bmN0aW9uJyxcbiAgICAgICAgICAgIGlucHV0OiBvcHRpb25zPy5kYXRhPy5pbnB1dCA/PyAnJyxcbiAgICAgICAgICAgIG91dHB1dDogb3B0aW9ucz8uZGF0YT8ub3V0cHV0ID8/ICcnLFxuICAgICAgICAgICAgLi4ub3B0aW9ucz8uZGF0YSxcbiAgICAgICAgfSxcbiAgICB9LCBwYXJlbnQpO1xufVxuLyoqXG4gKiBDcmVhdGUgYSBuZXcgZnVuY3Rpb24gc3BhbiBhbmQgYXV0b21hdGljYWxseSBzdGFydCBhbmQgZW5kIGl0LlxuICovXG5leHBvcnQgY29uc3Qgd2l0aEZ1bmN0aW9uU3BhbiA9IF93aXRoU3BhbkZhY3RvcnkoY3JlYXRlRnVuY3Rpb25TcGFuKTtcbi8qKlxuICogQ3JlYXRlIGEgbmV3IGhhbmRvZmYgc3Bhbi4gVGhlIHNwYW4gd2lsbCBub3QgYmUgc3RhcnRlZCBhdXRvbWF0aWNhbGx5LCB5b3Ugc2hvdWxkIGVpdGhlclxuICogdXNlIGB3aXRoSGFuZG9mZlNwYW4oKWAgb3IgY2FsbCBgc3Bhbi5zdGFydCgpYCBhbmQgYHNwYW4uZW5kKClgIG1hbnVhbGx5LlxuICpcbiAqIEBwYXJhbSBvcHRpb25zIC0gT3B0aW9uYWwgc3BhbiBjcmVhdGlvbiBvcHRpb25zLCBpbmNsdWRpbmcgc3BhbiBkYXRhIGFuZCBpZGVudGlmaWVycy5cbiAqIEBwYXJhbSBwYXJlbnQgLSBUaGUgcGFyZW50IHNwYW4gb3IgdHJhY2UuIElmIG5vdCBwcm92aWRlZCwgdGhlIGN1cnJlbnQgdHJhY2Uvc3BhbiB3aWxsIGJlIHVzZWRcbiAqIGF1dG9tYXRpY2FsbHkuXG4gKlxuICogQHJldHVybnMgVGhlIG5ld2x5IGNyZWF0ZWQgaGFuZG9mZiBzcGFuLlxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlSGFuZG9mZlNwYW4ob3B0aW9ucywgcGFyZW50KSB7XG4gICAgcmV0dXJuIGdldEdsb2JhbFRyYWNlUHJvdmlkZXIoKS5jcmVhdGVTcGFuKHtcbiAgICAgICAgLi4ub3B0aW9ucyxcbiAgICAgICAgZGF0YTogeyB0eXBlOiAnaGFuZG9mZicsIC4uLm9wdGlvbnM/LmRhdGEgfSxcbiAgICB9LCBwYXJlbnQpO1xufVxuLyoqXG4gKiBDcmVhdGUgYSBuZXcgaGFuZG9mZiBzcGFuIGFuZCBhdXRvbWF0aWNhbGx5IHN0YXJ0IGFuZCBlbmQgaXQuXG4gKi9cbmV4cG9ydCBjb25zdCB3aXRoSGFuZG9mZlNwYW4gPSBfd2l0aFNwYW5GYWN0b3J5KGNyZWF0ZUhhbmRvZmZTcGFuKTtcbi8qKlxuICogQ3JlYXRlIGEgbmV3IGdlbmVyYXRpb24gc3Bhbi4gVGhlIHNwYW4gd2lsbCBub3QgYmUgc3RhcnRlZCBhdXRvbWF0aWNhbGx5LCB5b3Ugc2hvdWxkIGVpdGhlclxuICogdXNlIGB3aXRoR2VuZXJhdGlvblNwYW4oKWAgb3IgY2FsbCBgc3Bhbi5zdGFydCgpYCBhbmQgYHNwYW4uZW5kKClgIG1hbnVhbGx5LlxuICpcbiAqIFRoaXMgc3BhbiBjYXB0dXJlcyB0aGUgZGV0YWlscyBvZiBhIG1vZGVsIGdlbmVyYXRpb24sIGluY2x1ZGluZyBpbnB1dC9vdXRwdXQgbWVzc2FnZVxuICogc2VxdWVuY2VzLCBtb2RlbCBpbmZvcm1hdGlvbiwgYW5kIHVzYWdlIGRhdGEuIElmIHlvdSBvbmx5IG5lZWQgdG8gY2FwdHVyZSBhIG1vZGVsIHJlc3BvbnNlXG4gKiBpZGVudGlmaWVyLCBjb25zaWRlciB1c2luZyBgY3JlYXRlUmVzcG9uc2VTcGFuKClgIGluc3RlYWQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVHZW5lcmF0aW9uU3BhbihvcHRpb25zLCBwYXJlbnQpIHtcbiAgICByZXR1cm4gZ2V0R2xvYmFsVHJhY2VQcm92aWRlcigpLmNyZWF0ZVNwYW4oe1xuICAgICAgICAuLi5vcHRpb25zLFxuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICB0eXBlOiAnZ2VuZXJhdGlvbicsXG4gICAgICAgICAgICAuLi5vcHRpb25zPy5kYXRhLFxuICAgICAgICB9LFxuICAgIH0sIHBhcmVudCk7XG59XG4vKiogQXV0b21hdGljYWxseSBjcmVhdGUgYSBnZW5lcmF0aW9uIHNwYW4sIHJ1biBmbiBhbmQgY2xvc2UgdGhlIHNwYW4gKi9cbmV4cG9ydCBjb25zdCB3aXRoR2VuZXJhdGlvblNwYW4gPSBfd2l0aFNwYW5GYWN0b3J5KGNyZWF0ZUdlbmVyYXRpb25TcGFuKTtcbi8qKlxuICogQ3JlYXRlIGEgbmV3IGN1c3RvbSBzcGFuLiBUaGUgc3BhbiB3aWxsIG5vdCBiZSBzdGFydGVkIGF1dG9tYXRpY2FsbHksIHlvdSBzaG91bGQgZWl0aGVyIHVzZVxuICogYHdpdGhDdXN0b21TcGFuKClgIG9yIGNhbGwgYHNwYW4uc3RhcnQoKWAgYW5kIGBzcGFuLmVuZCgpYCBtYW51YWxseS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUN1c3RvbVNwYW4ob3B0aW9ucywgcGFyZW50KSB7XG4gICAgcmV0dXJuIGdldEdsb2JhbFRyYWNlUHJvdmlkZXIoKS5jcmVhdGVTcGFuKHtcbiAgICAgICAgLi4ub3B0aW9ucyxcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgdHlwZTogJ2N1c3RvbScsXG4gICAgICAgICAgICBkYXRhOiB7fSxcbiAgICAgICAgICAgIC4uLm9wdGlvbnM/LmRhdGEsXG4gICAgICAgIH0sXG4gICAgfSwgcGFyZW50KTtcbn1cbmV4cG9ydCBjb25zdCB3aXRoQ3VzdG9tU3BhbiA9IF93aXRoU3BhbkZhY3RvcnkoY3JlYXRlQ3VzdG9tU3Bhbik7XG4vKipcbiAqIENyZWF0ZSBhIG5ldyBndWFyZHJhaWwgc3Bhbi4gVGhlIHNwYW4gd2lsbCBub3QgYmUgc3RhcnRlZCBhdXRvbWF0aWNhbGx5LCB5b3Ugc2hvdWxkIGVpdGhlciB1c2VcbiAqIGB3aXRoR3VhcmRyYWlsU3BhbigpYCBvciBjYWxsIGBzcGFuLnN0YXJ0KClgIGFuZCBgc3Bhbi5lbmQoKWAgbWFudWFsbHkuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVHdWFyZHJhaWxTcGFuKG9wdGlvbnMsIHBhcmVudCkge1xuICAgIHJldHVybiBnZXRHbG9iYWxUcmFjZVByb3ZpZGVyKCkuY3JlYXRlU3Bhbih7XG4gICAgICAgIC4uLm9wdGlvbnMsXG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgIHR5cGU6ICdndWFyZHJhaWwnLFxuICAgICAgICAgICAgdHJpZ2dlcmVkOiBmYWxzZSxcbiAgICAgICAgICAgIC4uLm9wdGlvbnM/LmRhdGEsXG4gICAgICAgIH0sXG4gICAgfSwgcGFyZW50KTtcbn1cbmV4cG9ydCBjb25zdCB3aXRoR3VhcmRyYWlsU3BhbiA9IF93aXRoU3BhbkZhY3RvcnkoY3JlYXRlR3VhcmRyYWlsU3Bhbik7XG4vKipcbiAqIENyZWF0ZSBhIG5ldyB0cmFuc2NyaXB0aW9uIHNwYW4uIFRoZSBzcGFuIHdpbGwgbm90IGJlIHN0YXJ0ZWQgYXV0b21hdGljYWxseS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVRyYW5zY3JpcHRpb25TcGFuKG9wdGlvbnMsIHBhcmVudCkge1xuICAgIHJldHVybiBnZXRHbG9iYWxUcmFjZVByb3ZpZGVyKCkuY3JlYXRlU3Bhbih7XG4gICAgICAgIC4uLm9wdGlvbnMsXG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgIHR5cGU6ICd0cmFuc2NyaXB0aW9uJyxcbiAgICAgICAgICAgIC4uLm9wdGlvbnMuZGF0YSxcbiAgICAgICAgfSxcbiAgICB9LCBwYXJlbnQpO1xufVxuZXhwb3J0IGNvbnN0IHdpdGhUcmFuc2NyaXB0aW9uU3BhbiA9IF93aXRoU3BhbkZhY3RvcnkoY3JlYXRlVHJhbnNjcmlwdGlvblNwYW4pO1xuLyoqXG4gKiBDcmVhdGUgYSBuZXcgc3BlZWNoIHNwYW4uIFRoZSBzcGFuIHdpbGwgbm90IGJlIHN0YXJ0ZWQgYXV0b21hdGljYWxseS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVNwZWVjaFNwYW4ob3B0aW9ucywgcGFyZW50KSB7XG4gICAgcmV0dXJuIGdldEdsb2JhbFRyYWNlUHJvdmlkZXIoKS5jcmVhdGVTcGFuKHtcbiAgICAgICAgLi4ub3B0aW9ucyxcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgdHlwZTogJ3NwZWVjaCcsXG4gICAgICAgICAgICAuLi5vcHRpb25zLmRhdGEsXG4gICAgICAgIH0sXG4gICAgfSwgcGFyZW50KTtcbn1cbmV4cG9ydCBjb25zdCB3aXRoU3BlZWNoU3BhbiA9IF93aXRoU3BhbkZhY3RvcnkoY3JlYXRlU3BlZWNoU3Bhbik7XG4vKipcbiAqIENyZWF0ZSBhIG5ldyBzcGVlY2ggZ3JvdXAgc3Bhbi4gVGhlIHNwYW4gd2lsbCBub3QgYmUgc3RhcnRlZCBhdXRvbWF0aWNhbGx5LlxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlU3BlZWNoR3JvdXBTcGFuKG9wdGlvbnMsIHBhcmVudCkge1xuICAgIHJldHVybiBnZXRHbG9iYWxUcmFjZVByb3ZpZGVyKCkuY3JlYXRlU3Bhbih7XG4gICAgICAgIC4uLm9wdGlvbnMsXG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgIHR5cGU6ICdzcGVlY2hfZ3JvdXAnLFxuICAgICAgICAgICAgLi4ub3B0aW9ucz8uZGF0YSxcbiAgICAgICAgfSxcbiAgICB9LCBwYXJlbnQpO1xufVxuZXhwb3J0IGNvbnN0IHdpdGhTcGVlY2hHcm91cFNwYW4gPSBfd2l0aFNwYW5GYWN0b3J5KGNyZWF0ZVNwZWVjaEdyb3VwU3Bhbik7XG4vKipcbiAqIENyZWF0ZSBhIG5ldyBNQ1AgbGlzdCB0b29scyBzcGFuLiBUaGUgc3BhbiB3aWxsIG5vdCBiZSBzdGFydGVkIGF1dG9tYXRpY2FsbHkuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVNQ1BMaXN0VG9vbHNTcGFuKG9wdGlvbnMsIHBhcmVudCkge1xuICAgIHJldHVybiBnZXRHbG9iYWxUcmFjZVByb3ZpZGVyKCkuY3JlYXRlU3Bhbih7XG4gICAgICAgIC4uLm9wdGlvbnMsXG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgIHR5cGU6ICdtY3BfdG9vbHMnLFxuICAgICAgICAgICAgLi4ub3B0aW9ucz8uZGF0YSxcbiAgICAgICAgfSxcbiAgICB9LCBwYXJlbnQpO1xufVxuZXhwb3J0IGNvbnN0IHdpdGhNQ1BMaXN0VG9vbHNTcGFuID0gX3dpdGhTcGFuRmFjdG9yeShjcmVhdGVNQ1BMaXN0VG9vbHNTcGFuKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNyZWF0ZVNwYW5zLm1qcy5tYXAiLCIvKipcbiAqIEVuY29kZSBhIFVpbnQ4QXJyYXkgaW50byBhIGJhc2U2NCBzdHJpbmcgaW4gYm90aCBOb2RlIGFuZCBicm93c2VyIGVudmlyb25tZW50cy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGVuY29kZVVpbnQ4QXJyYXlUb0Jhc2U2NChkYXRhKSB7XG4gICAgaWYgKGRhdGEubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHJldHVybiAnJztcbiAgICB9XG4gICAgY29uc3QgZ2xvYmFsQnVmZmVyID0gdHlwZW9mIGdsb2JhbFRoaXMgIT09ICd1bmRlZmluZWQnICYmIGdsb2JhbFRoaXMuQnVmZmVyXG4gICAgICAgID8gZ2xvYmFsVGhpcy5CdWZmZXJcbiAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgaWYgKGdsb2JhbEJ1ZmZlcikge1xuICAgICAgICByZXR1cm4gZ2xvYmFsQnVmZmVyLmZyb20oZGF0YSkudG9TdHJpbmcoJ2Jhc2U2NCcpO1xuICAgIH1cbiAgICBsZXQgYmluYXJ5ID0gJyc7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBkYXRhLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICAgIGJpbmFyeSArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGRhdGFbaV0pO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIGdsb2JhbFRoaXMuYnRvYSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICByZXR1cm4gZ2xvYmFsVGhpcy5idG9hKGJpbmFyeSk7XG4gICAgfVxuICAgIGNvbnN0IGNoYXJzID0gJ0FCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5Ky89JztcbiAgICBsZXQgcmVzdWx0ID0gJyc7XG4gICAgbGV0IGkgPSAwO1xuICAgIHdoaWxlIChpIDwgYmluYXJ5Lmxlbmd0aCkge1xuICAgICAgICBjb25zdCBjMSA9IGJpbmFyeS5jaGFyQ29kZUF0KGkrKyk7XG4gICAgICAgIGNvbnN0IGMyID0gYmluYXJ5LmNoYXJDb2RlQXQoaSsrKTtcbiAgICAgICAgY29uc3QgYzMgPSBiaW5hcnkuY2hhckNvZGVBdChpKyspO1xuICAgICAgICBjb25zdCBlbmMxID0gYzEgPj4gMjtcbiAgICAgICAgY29uc3QgZW5jMiA9ICgoYzEgJiAweDMpIDw8IDQpIHwgKGMyID4+IDQpO1xuICAgICAgICBjb25zdCBlbmMzID0gaXNOYU4oYzIpID8gNjQgOiAoKGMyICYgMHhmKSA8PCAyKSB8IChjMyA+PiA2KTtcbiAgICAgICAgY29uc3QgZW5jNCA9IGlzTmFOKGMzKSA/IDY0IDogYzMgJiAweDNmO1xuICAgICAgICByZXN1bHQgKz1cbiAgICAgICAgICAgIGNoYXJzLmNoYXJBdChlbmMxKSArXG4gICAgICAgICAgICAgICAgY2hhcnMuY2hhckF0KGVuYzIpICtcbiAgICAgICAgICAgICAgICBjaGFycy5jaGFyQXQoZW5jMykgK1xuICAgICAgICAgICAgICAgIGNoYXJzLmNoYXJBdChlbmM0KTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWJhc2U2NC5tanMubWFwIiwiLyoqXG4gKiBTdHJlYW1pbmcgZXZlbnQgZnJvbSB0aGUgTExNLiBUaGVzZSBhcmUgYHJhd2AgZXZlbnRzLCBpLmUuIHRoZXkgYXJlIGRpcmVjdGx5IHBhc3NlZCB0aHJvdWdoIGZyb21cbiAqIHRoZSBMTE0uXG4gKi9cbmV4cG9ydCBjbGFzcyBSdW5SYXdNb2RlbFN0cmVhbUV2ZW50IHtcbiAgICBkYXRhO1xuICAgIC8qKlxuICAgICAqIFRoZSB0eXBlIG9mIHRoZSBldmVudC5cbiAgICAgKi9cbiAgICB0eXBlID0gJ3Jhd19tb2RlbF9zdHJlYW1fZXZlbnQnO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSBkYXRhIFRoZSByYXcgcmVzcG9uc2VzIHN0cmVhbSBldmVudHMgZnJvbSB0aGUgTExNLlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKGRhdGEpIHtcbiAgICAgICAgdGhpcy5kYXRhID0gZGF0YTtcbiAgICB9XG59XG4vKipcbiAqIFN0cmVhbWluZyBldmVudHMgdGhhdCB3cmFwIGEgYFJ1bkl0ZW1gLiBBcyB0aGUgYWdlbnQgcHJvY2Vzc2VzIHRoZSBMTE0gcmVzcG9uc2UsIGl0IHdpbGwgZ2VuZXJhdGVcbiAqIHRoZXNlIGV2ZW50cyBmcm9tIG5ldyBtZXNzYWdlcywgdG9vbCBjYWxscywgdG9vbCBvdXRwdXRzLCBoYW5kb2ZmcywgZXRjLlxuICovXG5leHBvcnQgY2xhc3MgUnVuSXRlbVN0cmVhbUV2ZW50IHtcbiAgICBuYW1lO1xuICAgIGl0ZW07XG4gICAgdHlwZSA9ICdydW5faXRlbV9zdHJlYW1fZXZlbnQnO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSBuYW1lIFRoZSBuYW1lIG9mIHRoZSBldmVudC5cbiAgICAgKiBAcGFyYW0gaXRlbSBUaGUgaXRlbSB0aGF0IHdhcyBjcmVhdGVkLlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKG5hbWUsIGl0ZW0pIHtcbiAgICAgICAgdGhpcy5uYW1lID0gbmFtZTtcbiAgICAgICAgdGhpcy5pdGVtID0gaXRlbTtcbiAgICB9XG59XG4vKipcbiAqIEV2ZW50IHRoYXQgbm90aWZpZXMgdGhhdCB0aGVyZSBpcyBhIG5ldyBhZ2VudCBydW5uaW5nLlxuICovXG5leHBvcnQgY2xhc3MgUnVuQWdlbnRVcGRhdGVkU3RyZWFtRXZlbnQge1xuICAgIGFnZW50O1xuICAgIHR5cGUgPSAnYWdlbnRfdXBkYXRlZF9zdHJlYW1fZXZlbnQnO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSBhZ2VudCBUaGUgbmV3IGFnZW50XG4gICAgICovXG4gICAgY29uc3RydWN0b3IoYWdlbnQpIHtcbiAgICAgICAgdGhpcy5hZ2VudCA9IGFnZW50O1xuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWV2ZW50cy5tanMubWFwIiwiZXhwb3J0IGZ1bmN0aW9uIGlzT3BlbkFJUmVzcG9uc2VzQ29tcGFjdGlvbkF3YXJlU2Vzc2lvbihzZXNzaW9uKSB7XG4gICAgcmV0dXJuICghIXNlc3Npb24gJiZcbiAgICAgICAgdHlwZW9mIHNlc3Npb24ucnVuQ29tcGFjdGlvbiA9PT1cbiAgICAgICAgICAgICdmdW5jdGlvbicpO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c2Vzc2lvbi5tanMubWFwIiwiaW1wb3J0IHsgY29uc3VtZUFnZW50VG9vbFJ1blJlc3VsdCwgfSBmcm9tIFwiLi9hZ2VudC5tanNcIjtcbmltcG9ydCB7IE1vZGVsQmVoYXZpb3JFcnJvciwgVG9vbENhbGxFcnJvciwgVXNlckVycm9yIH0gZnJvbSBcIi4vZXJyb3JzLm1qc1wiO1xuaW1wb3J0IHsgZ2V0VHJhbnNmZXJNZXNzYWdlIH0gZnJvbSBcIi4vaGFuZG9mZi5tanNcIjtcbmltcG9ydCB7IFJ1bkhhbmRvZmZDYWxsSXRlbSwgUnVuSGFuZG9mZk91dHB1dEl0ZW0sIFJ1bk1lc3NhZ2VPdXRwdXRJdGVtLCBSdW5SZWFzb25pbmdJdGVtLCBSdW5Ub29sQXBwcm92YWxJdGVtLCBSdW5Ub29sQ2FsbEl0ZW0sIFJ1blRvb2xDYWxsT3V0cHV0SXRlbSwgfSBmcm9tIFwiLi9pdGVtcy5tanNcIjtcbmltcG9ydCBsb2dnZXIgZnJvbSBcIi4vbG9nZ2VyLm1qc1wiO1xuaW1wb3J0IHsgcmVzb2x2ZUNvbXB1dGVyLCB9IGZyb20gXCIuL3Rvb2wubWpzXCI7XG5pbXBvcnQgeyBnZXRMYXN0VGV4dEZyb21PdXRwdXRNZXNzYWdlIH0gZnJvbSBcIi4vdXRpbHMvbWVzc2FnZXMubWpzXCI7XG5pbXBvcnQgeyB3aXRoRnVuY3Rpb25TcGFuLCB3aXRoSGFuZG9mZlNwYW4gfSBmcm9tIFwiLi90cmFjaW5nL2NyZWF0ZVNwYW5zLm1qc1wiO1xuaW1wb3J0IHsgZ2V0U2NoZW1hQW5kUGFyc2VyRnJvbUlucHV0VHlwZSB9IGZyb20gXCIuL3V0aWxzL3Rvb2xzLm1qc1wiO1xuaW1wb3J0IHsgZW5jb2RlVWludDhBcnJheVRvQmFzZTY0IH0gZnJvbSBcIi4vdXRpbHMvYmFzZTY0Lm1qc1wiO1xuaW1wb3J0IHsgaXNBcnJheUJ1ZmZlclZpZXcsIGlzTm9kZUJ1ZmZlciwgaXNTZXJpYWxpemVkQnVmZmVyU25hcHNob3QsIHRvU21hcnRTdHJpbmcsIH0gZnJvbSBcIi4vdXRpbHMvc21hcnRTdHJpbmcubWpzXCI7XG5pbXBvcnQgeyBzYWZlRXhlY3V0ZSB9IGZyb20gXCIuL3V0aWxzL3NhZmVFeGVjdXRlLm1qc1wiO1xuaW1wb3J0IHsgYWRkRXJyb3JUb0N1cnJlbnRTcGFuIH0gZnJvbSBcIi4vdHJhY2luZy9jb250ZXh0Lm1qc1wiO1xuaW1wb3J0IHsgUnVuSXRlbVN0cmVhbUV2ZW50IH0gZnJvbSBcIi4vZXZlbnRzLm1qc1wiO1xuaW1wb3J0IHsgeiB9IGZyb20gJ3pvZCc7XG5pbXBvcnQgeyBpc1pvZE9iamVjdCB9IGZyb20gXCIuL3V0aWxzL2luZGV4Lm1qc1wiO1xuaW1wb3J0IHsgaXNPcGVuQUlSZXNwb25zZXNDb21wYWN0aW9uQXdhcmVTZXNzaW9uLCB9IGZyb20gXCIuL21lbW9yeS9zZXNzaW9uLm1qc1wiO1xuaW1wb3J0IHsgVXNhZ2UgfSBmcm9tIFwiLi91c2FnZS5tanNcIjtcbmZ1bmN0aW9uIGlzQXBwcm92YWxJdGVtTGlrZSh2YWx1ZSkge1xuICAgIGlmICghdmFsdWUgfHwgdHlwZW9mIHZhbHVlICE9PSAnb2JqZWN0Jykge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGlmICghKCdyYXdJdGVtJyBpbiB2YWx1ZSkpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBjb25zdCByYXdJdGVtID0gdmFsdWUucmF3SXRlbTtcbiAgICBpZiAoIXJhd0l0ZW0gfHwgdHlwZW9mIHJhd0l0ZW0gIT09ICdvYmplY3QnKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgY29uc3QgaXRlbVR5cGUgPSByYXdJdGVtLnR5cGU7XG4gICAgcmV0dXJuIGl0ZW1UeXBlID09PSAnZnVuY3Rpb25fY2FsbCcgfHwgaXRlbVR5cGUgPT09ICdob3N0ZWRfdG9vbF9jYWxsJztcbn1cbmZ1bmN0aW9uIGdldEFwcHJvdmFsSWRlbnRpdHkoYXBwcm92YWwpIHtcbiAgICBjb25zdCByYXdJdGVtID0gYXBwcm92YWwucmF3SXRlbTtcbiAgICBpZiAoIXJhd0l0ZW0pIHtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG4gICAgaWYgKHJhd0l0ZW0udHlwZSA9PT0gJ2Z1bmN0aW9uX2NhbGwnICYmIHJhd0l0ZW0uY2FsbElkKSB7XG4gICAgICAgIHJldHVybiBgZnVuY3Rpb25fY2FsbDoke3Jhd0l0ZW0uY2FsbElkfWA7XG4gICAgfVxuICAgIGlmICgnY2FsbElkJyBpbiByYXdJdGVtICYmIHJhd0l0ZW0uY2FsbElkKSB7XG4gICAgICAgIHJldHVybiBgJHtyYXdJdGVtLnR5cGV9OiR7cmF3SXRlbS5jYWxsSWR9YDtcbiAgICB9XG4gICAgY29uc3QgaWQgPSAnaWQnIGluIHJhd0l0ZW0gPyByYXdJdGVtLmlkIDogdW5kZWZpbmVkO1xuICAgIGlmIChpZCkge1xuICAgICAgICByZXR1cm4gYCR7cmF3SXRlbS50eXBlfToke2lkfWA7XG4gICAgfVxuICAgIGNvbnN0IHByb3ZpZGVyRGF0YSA9IHR5cGVvZiByYXdJdGVtLnByb3ZpZGVyRGF0YSA9PT0gJ29iamVjdCcgJiYgcmF3SXRlbS5wcm92aWRlckRhdGFcbiAgICAgICAgPyByYXdJdGVtLnByb3ZpZGVyRGF0YVxuICAgICAgICA6IHVuZGVmaW5lZDtcbiAgICBpZiAocHJvdmlkZXJEYXRhPy5pZCkge1xuICAgICAgICByZXR1cm4gYCR7cmF3SXRlbS50eXBlfTpwcm92aWRlcjoke3Byb3ZpZGVyRGF0YS5pZH1gO1xuICAgIH1cbiAgICBjb25zdCBhZ2VudE5hbWUgPSAnYWdlbnQnIGluIGFwcHJvdmFsICYmIGFwcHJvdmFsLmFnZW50ID8gYXBwcm92YWwuYWdlbnQubmFtZSA6ICcnO1xuICAgIHRyeSB7XG4gICAgICAgIHJldHVybiBgJHthZ2VudE5hbWV9OiR7cmF3SXRlbS50eXBlfToke0pTT04uc3RyaW5naWZ5KHJhd0l0ZW0pfWA7XG4gICAgfVxuICAgIGNhdGNoIHtcbiAgICAgICAgcmV0dXJuIGAke2FnZW50TmFtZX06JHtyYXdJdGVtLnR5cGV9YDtcbiAgICB9XG59XG5mdW5jdGlvbiBmb3JtYXRGaW5hbE91dHB1dFR5cGVFcnJvcihlcnJvcikge1xuICAgIC8vIFN1cmZhY2Ugc3RydWN0dXJlZCBvdXRwdXQgdmFsaWRhdGlvbiBoaW50cyB3aXRob3V0IGVjaG9pbmcgcG90ZW50aWFsbHkgbGFyZ2Ugb3Igc2Vuc2l0aXZlIHBheWxvYWRzLlxuICAgIHRyeSB7XG4gICAgICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIHouWm9kRXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnN0IGlzc3VlID0gZXJyb3IuaXNzdWVzWzBdO1xuICAgICAgICAgICAgaWYgKGlzc3VlKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgaXNzdWVQYXRoUGFydHMgPSBBcnJheS5pc0FycmF5KGlzc3VlLnBhdGgpID8gaXNzdWUucGF0aCA6IFtdO1xuICAgICAgICAgICAgICAgIGNvbnN0IGlzc3VlUGF0aCA9IGlzc3VlUGF0aFBhcnRzLmxlbmd0aCA+IDBcbiAgICAgICAgICAgICAgICAgICAgPyBpc3N1ZVBhdGhQYXJ0cy5tYXAoKHBhcnQpID0+IFN0cmluZyhwYXJ0KSkuam9pbignLicpXG4gICAgICAgICAgICAgICAgICAgIDogJyhyb290KSc7XG4gICAgICAgICAgICAgICAgY29uc3QgbWVzc2FnZSA9IHRydW5jYXRlRm9yRGV2ZWxvcGVyKGlzc3VlLm1lc3NhZ2UgPz8gJycpO1xuICAgICAgICAgICAgICAgIHJldHVybiBgSW52YWxpZCBvdXRwdXQgdHlwZTogZmluYWwgYXNzaXN0YW50IG91dHB1dCBmYWlsZWQgc2NoZW1hIHZhbGlkYXRpb24gYXQgXCIke2lzc3VlUGF0aH1cIiAoJHttZXNzYWdlfSkuYDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiAnSW52YWxpZCBvdXRwdXQgdHlwZTogZmluYWwgYXNzaXN0YW50IG91dHB1dCBmYWlsZWQgc2NoZW1hIHZhbGlkYXRpb24uJztcbiAgICAgICAgfVxuICAgICAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBFcnJvciAmJiBlcnJvci5tZXNzYWdlKSB7XG4gICAgICAgICAgICByZXR1cm4gYEludmFsaWQgb3V0cHV0IHR5cGU6ICR7dHJ1bmNhdGVGb3JEZXZlbG9wZXIoZXJyb3IubWVzc2FnZSl9YDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjYXRjaCB7XG4gICAgICAgIC8vIFN3YWxsb3cgZm9ybWF0dGluZyBlcnJvcnMgc28gd2UgY2FuIHJldHVybiBhIGdlbmVyaWMgbWVzc2FnZSBiZWxvdy5cbiAgICB9XG4gICAgcmV0dXJuICdJbnZhbGlkIG91dHB1dCB0eXBlOiBmaW5hbCBhc3Npc3RhbnQgb3V0cHV0IGRpZCBub3QgbWF0Y2ggdGhlIGV4cGVjdGVkIHNjaGVtYS4nO1xufVxuZnVuY3Rpb24gdHJ1bmNhdGVGb3JEZXZlbG9wZXIobWVzc2FnZSwgbWF4TGVuZ3RoID0gMTYwKSB7XG4gICAgY29uc3QgdHJpbW1lZCA9IG1lc3NhZ2UudHJpbSgpO1xuICAgIGlmICghdHJpbW1lZCkge1xuICAgICAgICByZXR1cm4gJ1NjaGVtYSB2YWxpZGF0aW9uIGZhaWxlZC4nO1xuICAgIH1cbiAgICBpZiAodHJpbW1lZC5sZW5ndGggPD0gbWF4TGVuZ3RoKSB7XG4gICAgICAgIHJldHVybiB0cmltbWVkO1xuICAgIH1cbiAgICByZXR1cm4gYCR7dHJpbW1lZC5zbGljZSgwLCBtYXhMZW5ndGggLSAzKX0uLi5gO1xufVxuLyoqXG4gKiBAaW50ZXJuYWxcbiAqIFdhbGtzIGEgcmF3IG1vZGVsIHJlc3BvbnNlIGFuZCBjbGFzc2lmaWVzIGVhY2ggaXRlbSBzbyB0aGUgcnVubmVyIGNhbiBzY2hlZHVsZSBmb2xsb3ctdXAgd29yay5cbiAqIFJldHVybnMgYm90aCB0aGUgc2VyaWFsaXphYmxlIFJ1bkl0ZW1zIChmb3IgaGlzdG9yeS9zdHJlYW1pbmcpIGFuZCB0aGUgYWN0aW9uYWJsZSB0b29sIG1ldGFkYXRhLlxuICovXG5leHBvcnQgZnVuY3Rpb24gcHJvY2Vzc01vZGVsUmVzcG9uc2UobW9kZWxSZXNwb25zZSwgYWdlbnQsIHRvb2xzLCBoYW5kb2Zmcykge1xuICAgIGNvbnN0IGl0ZW1zID0gW107XG4gICAgY29uc3QgcnVuSGFuZG9mZnMgPSBbXTtcbiAgICBjb25zdCBydW5GdW5jdGlvbnMgPSBbXTtcbiAgICBjb25zdCBydW5Db21wdXRlckFjdGlvbnMgPSBbXTtcbiAgICBjb25zdCBydW5TaGVsbEFjdGlvbnMgPSBbXTtcbiAgICBjb25zdCBydW5BcHBseVBhdGNoQWN0aW9ucyA9IFtdO1xuICAgIGNvbnN0IHJ1bk1DUEFwcHJvdmFsUmVxdWVzdHMgPSBbXTtcbiAgICBjb25zdCB0b29sc1VzZWQgPSBbXTtcbiAgICBjb25zdCBoYW5kb2ZmTWFwID0gbmV3IE1hcChoYW5kb2Zmcy5tYXAoKGgpID0+IFtoLnRvb2xOYW1lLCBoXSkpO1xuICAgIC8vIFJlc29sdmUgdG9vbHMgdXBmcm9udCBzbyB3ZSBjYW4gbG9vayB1cCB0aGUgY29uY3JldGUgaGFuZGxlciBpbiBPKDEpIHdoaWxlIGl0ZXJhdGluZyBvdXRwdXRzLlxuICAgIGNvbnN0IGZ1bmN0aW9uTWFwID0gbmV3IE1hcCh0b29scy5maWx0ZXIoKHQpID0+IHQudHlwZSA9PT0gJ2Z1bmN0aW9uJykubWFwKCh0KSA9PiBbdC5uYW1lLCB0XSkpO1xuICAgIGNvbnN0IGNvbXB1dGVyVG9vbCA9IHRvb2xzLmZpbmQoKHQpID0+IHQudHlwZSA9PT0gJ2NvbXB1dGVyJyk7XG4gICAgY29uc3Qgc2hlbGxUb29sID0gdG9vbHMuZmluZCgodCkgPT4gdC50eXBlID09PSAnc2hlbGwnKTtcbiAgICBjb25zdCBhcHBseVBhdGNoVG9vbCA9IHRvb2xzLmZpbmQoKHQpID0+IHQudHlwZSA9PT0gJ2FwcGx5X3BhdGNoJyk7XG4gICAgY29uc3QgbWNwVG9vbE1hcCA9IG5ldyBNYXAodG9vbHNcbiAgICAgICAgLmZpbHRlcigodCkgPT4gdC50eXBlID09PSAnaG9zdGVkX3Rvb2wnICYmIHQucHJvdmlkZXJEYXRhPy50eXBlID09PSAnbWNwJylcbiAgICAgICAgLm1hcCgodCkgPT4gdClcbiAgICAgICAgLm1hcCgodCkgPT4gW3QucHJvdmlkZXJEYXRhLnNlcnZlcl9sYWJlbCwgdF0pKTtcbiAgICBmb3IgKGNvbnN0IG91dHB1dCBvZiBtb2RlbFJlc3BvbnNlLm91dHB1dCkge1xuICAgICAgICBpZiAob3V0cHV0LnR5cGUgPT09ICdtZXNzYWdlJykge1xuICAgICAgICAgICAgaWYgKG91dHB1dC5yb2xlID09PSAnYXNzaXN0YW50Jykge1xuICAgICAgICAgICAgICAgIGl0ZW1zLnB1c2gobmV3IFJ1bk1lc3NhZ2VPdXRwdXRJdGVtKG91dHB1dCwgYWdlbnQpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChvdXRwdXQudHlwZSA9PT0gJ2hvc3RlZF90b29sX2NhbGwnKSB7XG4gICAgICAgICAgICBpdGVtcy5wdXNoKG5ldyBSdW5Ub29sQ2FsbEl0ZW0ob3V0cHV0LCBhZ2VudCkpO1xuICAgICAgICAgICAgY29uc3QgdG9vbE5hbWUgPSBvdXRwdXQubmFtZTtcbiAgICAgICAgICAgIHRvb2xzVXNlZC5wdXNoKHRvb2xOYW1lKTtcbiAgICAgICAgICAgIGlmIChvdXRwdXQucHJvdmlkZXJEYXRhPy50eXBlID09PSAnbWNwX2FwcHJvdmFsX3JlcXVlc3QnIHx8XG4gICAgICAgICAgICAgICAgb3V0cHV0Lm5hbWUgPT09ICdtY3BfYXBwcm92YWxfcmVxdWVzdCcpIHtcbiAgICAgICAgICAgICAgICAvLyBIb3N0ZWQgcmVtb3RlIE1DUCBzZXJ2ZXIncyBhcHByb3ZhbCBwcm9jZXNzXG4gICAgICAgICAgICAgICAgY29uc3QgcHJvdmlkZXJEYXRhID0gb3V0cHV0LnByb3ZpZGVyRGF0YTtcbiAgICAgICAgICAgICAgICBjb25zdCBtY3BTZXJ2ZXJMYWJlbCA9IHByb3ZpZGVyRGF0YS5zZXJ2ZXJfbGFiZWw7XG4gICAgICAgICAgICAgICAgY29uc3QgbWNwU2VydmVyVG9vbCA9IG1jcFRvb2xNYXAuZ2V0KG1jcFNlcnZlckxhYmVsKTtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG1jcFNlcnZlclRvb2wgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBgTUNQIHNlcnZlciAoJHttY3BTZXJ2ZXJMYWJlbH0pIG5vdCBmb3VuZCBpbiBBZ2VudCAoJHthZ2VudC5uYW1lfSlgO1xuICAgICAgICAgICAgICAgICAgICBhZGRFcnJvclRvQ3VycmVudFNwYW4oe1xuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IHsgbWNwX3NlcnZlcl9sYWJlbDogbWNwU2VydmVyTGFiZWwgfSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBNb2RlbEJlaGF2aW9yRXJyb3IobWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIERvIHRoaXMgYXBwcm92YWwgbGF0ZXI6XG4gICAgICAgICAgICAgICAgLy8gV2Ugc3VwcG9ydCBib3RoIG9uQXBwcm92YWwgY2FsbGJhY2sgKGxpa2UgdGhlIFB5dGhvbiBTREsgZG9lcykgYW5kIEhJVEwgcGF0dGVybnMuXG4gICAgICAgICAgICAgICAgY29uc3QgYXBwcm92YWxJdGVtID0gbmV3IFJ1blRvb2xBcHByb3ZhbEl0ZW0oe1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiAnaG9zdGVkX3Rvb2xfY2FsbCcsXG4gICAgICAgICAgICAgICAgICAgIC8vIFdlIG11c3QgdXNlIHRoaXMgbmFtZSB0byBhbGlnbiB3aXRoIHRoZSBuYW1lIHNlbnQgZnJvbSB0aGUgc2VydmVyc1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiBwcm92aWRlckRhdGEubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgaWQ6IHByb3ZpZGVyRGF0YS5pZCxcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiAnaW5fcHJvZ3Jlc3MnLFxuICAgICAgICAgICAgICAgICAgICBwcm92aWRlckRhdGEsXG4gICAgICAgICAgICAgICAgfSwgYWdlbnQpO1xuICAgICAgICAgICAgICAgIHJ1bk1DUEFwcHJvdmFsUmVxdWVzdHMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgIHJlcXVlc3RJdGVtOiBhcHByb3ZhbEl0ZW0sXG4gICAgICAgICAgICAgICAgICAgIG1jcFRvb2w6IG1jcFNlcnZlclRvb2wsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgaWYgKCFtY3BTZXJ2ZXJUb29sLnByb3ZpZGVyRGF0YS5vbl9hcHByb3ZhbCkge1xuICAgICAgICAgICAgICAgICAgICAvLyBXaGVuIG9uQXBwcm92YWwgZnVuY3Rpb24gZXhpc3RzLCBpdCBjb25maXJtcyB0aGUgYXBwcm92YWwgcmlnaHQgYWZ0ZXIgdGhpcy5cbiAgICAgICAgICAgICAgICAgICAgLy8gVGh1cywgdGhpcyBhcHByb3ZhbCBpdGVtIG11c3QgYmUgYXBwZW5kZWQgb25seSBmb3IgdGhlIG5leHQgdHVybiBpbnRlcnJ1cHRpb24gcGF0dGVybnMuXG4gICAgICAgICAgICAgICAgICAgIGl0ZW1zLnB1c2goYXBwcm92YWxJdGVtKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAob3V0cHV0LnR5cGUgPT09ICdyZWFzb25pbmcnKSB7XG4gICAgICAgICAgICBpdGVtcy5wdXNoKG5ldyBSdW5SZWFzb25pbmdJdGVtKG91dHB1dCwgYWdlbnQpKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChvdXRwdXQudHlwZSA9PT0gJ2NvbXB1dGVyX2NhbGwnKSB7XG4gICAgICAgICAgICBpdGVtcy5wdXNoKG5ldyBSdW5Ub29sQ2FsbEl0ZW0ob3V0cHV0LCBhZ2VudCkpO1xuICAgICAgICAgICAgdG9vbHNVc2VkLnB1c2goJ2NvbXB1dGVyX3VzZScpO1xuICAgICAgICAgICAgaWYgKCFjb21wdXRlclRvb2wpIHtcbiAgICAgICAgICAgICAgICBhZGRFcnJvclRvQ3VycmVudFNwYW4oe1xuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnTW9kZWwgcHJvZHVjZWQgY29tcHV0ZXIgYWN0aW9uIHdpdGhvdXQgYSBjb21wdXRlciB0b29sLicsXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFnZW50X25hbWU6IGFnZW50Lm5hbWUsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IE1vZGVsQmVoYXZpb3JFcnJvcignTW9kZWwgcHJvZHVjZWQgY29tcHV0ZXIgYWN0aW9uIHdpdGhvdXQgYSBjb21wdXRlciB0b29sLicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcnVuQ29tcHV0ZXJBY3Rpb25zLnB1c2goe1xuICAgICAgICAgICAgICAgIHRvb2xDYWxsOiBvdXRwdXQsXG4gICAgICAgICAgICAgICAgY29tcHV0ZXI6IGNvbXB1dGVyVG9vbCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKG91dHB1dC50eXBlID09PSAnc2hlbGxfY2FsbCcpIHtcbiAgICAgICAgICAgIGl0ZW1zLnB1c2gobmV3IFJ1blRvb2xDYWxsSXRlbShvdXRwdXQsIGFnZW50KSk7XG4gICAgICAgICAgICB0b29sc1VzZWQucHVzaCgnc2hlbGwnKTtcbiAgICAgICAgICAgIGlmICghc2hlbGxUb29sKSB7XG4gICAgICAgICAgICAgICAgYWRkRXJyb3JUb0N1cnJlbnRTcGFuKHtcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ01vZGVsIHByb2R1Y2VkIHNoZWxsIGFjdGlvbiB3aXRob3V0IGEgc2hlbGwgdG9vbC4nLFxuICAgICAgICAgICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhZ2VudF9uYW1lOiBhZ2VudC5uYW1lLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBNb2RlbEJlaGF2aW9yRXJyb3IoJ01vZGVsIHByb2R1Y2VkIHNoZWxsIGFjdGlvbiB3aXRob3V0IGEgc2hlbGwgdG9vbC4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJ1blNoZWxsQWN0aW9ucy5wdXNoKHtcbiAgICAgICAgICAgICAgICB0b29sQ2FsbDogb3V0cHV0LFxuICAgICAgICAgICAgICAgIHNoZWxsOiBzaGVsbFRvb2wsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChvdXRwdXQudHlwZSA9PT0gJ2FwcGx5X3BhdGNoX2NhbGwnKSB7XG4gICAgICAgICAgICBpdGVtcy5wdXNoKG5ldyBSdW5Ub29sQ2FsbEl0ZW0ob3V0cHV0LCBhZ2VudCkpO1xuICAgICAgICAgICAgdG9vbHNVc2VkLnB1c2goJ2FwcGx5X3BhdGNoJyk7XG4gICAgICAgICAgICBpZiAoIWFwcGx5UGF0Y2hUb29sKSB7XG4gICAgICAgICAgICAgICAgYWRkRXJyb3JUb0N1cnJlbnRTcGFuKHtcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ01vZGVsIHByb2R1Y2VkIGFwcGx5X3BhdGNoIGFjdGlvbiB3aXRob3V0IGFuIGFwcGx5X3BhdGNoIHRvb2wuJyxcbiAgICAgICAgICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgICAgICAgICAgYWdlbnRfbmFtZTogYWdlbnQubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTW9kZWxCZWhhdmlvckVycm9yKCdNb2RlbCBwcm9kdWNlZCBhcHBseV9wYXRjaCBhY3Rpb24gd2l0aG91dCBhbiBhcHBseV9wYXRjaCB0b29sLicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcnVuQXBwbHlQYXRjaEFjdGlvbnMucHVzaCh7XG4gICAgICAgICAgICAgICAgdG9vbENhbGw6IG91dHB1dCxcbiAgICAgICAgICAgICAgICBhcHBseVBhdGNoOiBhcHBseVBhdGNoVG9vbCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGlmIChvdXRwdXQudHlwZSAhPT0gJ2Z1bmN0aW9uX2NhbGwnKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICB0b29sc1VzZWQucHVzaChvdXRwdXQubmFtZSk7XG4gICAgICAgIGNvbnN0IGhhbmRvZmYgPSBoYW5kb2ZmTWFwLmdldChvdXRwdXQubmFtZSk7XG4gICAgICAgIGlmIChoYW5kb2ZmKSB7XG4gICAgICAgICAgICBpdGVtcy5wdXNoKG5ldyBSdW5IYW5kb2ZmQ2FsbEl0ZW0ob3V0cHV0LCBhZ2VudCkpO1xuICAgICAgICAgICAgcnVuSGFuZG9mZnMucHVzaCh7XG4gICAgICAgICAgICAgICAgdG9vbENhbGw6IG91dHB1dCxcbiAgICAgICAgICAgICAgICBoYW5kb2ZmOiBoYW5kb2ZmLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBmdW5jdGlvblRvb2wgPSBmdW5jdGlvbk1hcC5nZXQob3V0cHV0Lm5hbWUpO1xuICAgICAgICAgICAgaWYgKCFmdW5jdGlvblRvb2wpIHtcbiAgICAgICAgICAgICAgICBhZGRFcnJvclRvQ3VycmVudFNwYW4oe1xuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBgVG9vbCAke291dHB1dC5uYW1lfSBub3QgZm91bmQgaW4gYWdlbnQgJHthZ2VudC5uYW1lfS5gLFxuICAgICAgICAgICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0b29sX25hbWU6IG91dHB1dC5uYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgYWdlbnRfbmFtZTogYWdlbnQubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTW9kZWxCZWhhdmlvckVycm9yKGBUb29sICR7b3V0cHV0Lm5hbWV9IG5vdCBmb3VuZCBpbiBhZ2VudCAke2FnZW50Lm5hbWV9LmApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaXRlbXMucHVzaChuZXcgUnVuVG9vbENhbGxJdGVtKG91dHB1dCwgYWdlbnQpKTtcbiAgICAgICAgICAgIHJ1bkZ1bmN0aW9ucy5wdXNoKHtcbiAgICAgICAgICAgICAgICB0b29sQ2FsbDogb3V0cHV0LFxuICAgICAgICAgICAgICAgIHRvb2w6IGZ1bmN0aW9uVG9vbCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICAgIG5ld0l0ZW1zOiBpdGVtcyxcbiAgICAgICAgaGFuZG9mZnM6IHJ1bkhhbmRvZmZzLFxuICAgICAgICBmdW5jdGlvbnM6IHJ1bkZ1bmN0aW9ucyxcbiAgICAgICAgY29tcHV0ZXJBY3Rpb25zOiBydW5Db21wdXRlckFjdGlvbnMsXG4gICAgICAgIHNoZWxsQWN0aW9uczogcnVuU2hlbGxBY3Rpb25zLFxuICAgICAgICBhcHBseVBhdGNoQWN0aW9uczogcnVuQXBwbHlQYXRjaEFjdGlvbnMsXG4gICAgICAgIG1jcEFwcHJvdmFsUmVxdWVzdHM6IHJ1bk1DUEFwcHJvdmFsUmVxdWVzdHMsXG4gICAgICAgIHRvb2xzVXNlZDogdG9vbHNVc2VkLFxuICAgICAgICBoYXNUb29sc09yQXBwcm92YWxzVG9SdW4oKSB7XG4gICAgICAgICAgICByZXR1cm4gKHJ1bkhhbmRvZmZzLmxlbmd0aCA+IDAgfHxcbiAgICAgICAgICAgICAgICBydW5GdW5jdGlvbnMubGVuZ3RoID4gMCB8fFxuICAgICAgICAgICAgICAgIHJ1bk1DUEFwcHJvdmFsUmVxdWVzdHMubGVuZ3RoID4gMCB8fFxuICAgICAgICAgICAgICAgIHJ1bkNvbXB1dGVyQWN0aW9ucy5sZW5ndGggPiAwIHx8XG4gICAgICAgICAgICAgICAgcnVuU2hlbGxBY3Rpb25zLmxlbmd0aCA+IDAgfHxcbiAgICAgICAgICAgICAgICBydW5BcHBseVBhdGNoQWN0aW9ucy5sZW5ndGggPiAwKTtcbiAgICAgICAgfSxcbiAgICB9O1xufVxuZXhwb3J0IGNvbnN0IG5leHRTdGVwU2NoZW1hID0gei5kaXNjcmltaW5hdGVkVW5pb24oJ3R5cGUnLCBbXG4gICAgei5vYmplY3Qoe1xuICAgICAgICB0eXBlOiB6LmxpdGVyYWwoJ25leHRfc3RlcF9oYW5kb2ZmJyksXG4gICAgICAgIG5ld0FnZW50OiB6LmFueSgpLFxuICAgIH0pLFxuICAgIHoub2JqZWN0KHtcbiAgICAgICAgdHlwZTogei5saXRlcmFsKCduZXh0X3N0ZXBfZmluYWxfb3V0cHV0JyksXG4gICAgICAgIG91dHB1dDogei5zdHJpbmcoKSxcbiAgICB9KSxcbiAgICB6Lm9iamVjdCh7XG4gICAgICAgIHR5cGU6IHoubGl0ZXJhbCgnbmV4dF9zdGVwX3J1bl9hZ2FpbicpLFxuICAgIH0pLFxuICAgIHoub2JqZWN0KHtcbiAgICAgICAgdHlwZTogei5saXRlcmFsKCduZXh0X3N0ZXBfaW50ZXJydXB0aW9uJyksXG4gICAgICAgIGRhdGE6IHoucmVjb3JkKHouc3RyaW5nKCksIHouYW55KCkpLFxuICAgIH0pLFxuXSk7XG4vKipcbiAqIEludGVybmFsIGNvbnZlbmllbmNlIHdyYXBwZXIgdGhhdCBncm91cHMgdGhlIG91dGNvbWUgb2YgYSBzaW5nbGUgYWdlbnQgdHVybi4gSXQgbGV0cyB0aGUgY2FsbGVyXG4gKiB1cGRhdGUgdGhlIFJ1blN0YXRlIGluIG9uZSBzaG90IGFuZCBkZWNpZGUgd2hpY2ggc3RlcCB0byBleGVjdXRlIG5leHQuXG4gKi9cbmNsYXNzIFNpbmdsZVN0ZXBSZXN1bHQge1xuICAgIG9yaWdpbmFsSW5wdXQ7XG4gICAgbW9kZWxSZXNwb25zZTtcbiAgICBwcmVTdGVwSXRlbXM7XG4gICAgbmV3U3RlcEl0ZW1zO1xuICAgIG5leHRTdGVwO1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKlxuICAgICAqIFRoZSBpbnB1dCBpdGVtcyAoaS5lLiwgdGhlIGl0ZW1zIGJlZm9yZSBydW4oKSB3YXMgY2FsbGVkKS4gTWF5IGJlIG11dGF0ZWQgYnkgaGFuZG9mZiBpbnB1dCBmaWx0ZXJzLlxuICAgICAqL1xuICAgIG9yaWdpbmFsSW5wdXQsIFxuICAgIC8qKlxuICAgICAqIFRoZSBtb2RlbCByZXNwb25zZSBmb3IgdGhlIGN1cnJlbnQgc3RlcFxuICAgICAqL1xuICAgIG1vZGVsUmVzcG9uc2UsIFxuICAgIC8qKlxuICAgICAqIFRoZSBpdGVtcyBiZWZvcmUgdGhlIGN1cnJlbnQgc3RlcCB3YXMgZXhlY3V0ZWRcbiAgICAgKi9cbiAgICBwcmVTdGVwSXRlbXMsIFxuICAgIC8qKlxuICAgICAqIFRoZSBpdGVtcyBhZnRlciB0aGUgY3VycmVudCBzdGVwIHdhcyBleGVjdXRlZFxuICAgICAqL1xuICAgIG5ld1N0ZXBJdGVtcywgXG4gICAgLyoqXG4gICAgICogVGhlIG5leHQgc3RlcCB0byBleGVjdXRlXG4gICAgICovXG4gICAgbmV4dFN0ZXApIHtcbiAgICAgICAgdGhpcy5vcmlnaW5hbElucHV0ID0gb3JpZ2luYWxJbnB1dDtcbiAgICAgICAgdGhpcy5tb2RlbFJlc3BvbnNlID0gbW9kZWxSZXNwb25zZTtcbiAgICAgICAgdGhpcy5wcmVTdGVwSXRlbXMgPSBwcmVTdGVwSXRlbXM7XG4gICAgICAgIHRoaXMubmV3U3RlcEl0ZW1zID0gbmV3U3RlcEl0ZW1zO1xuICAgICAgICB0aGlzLm5leHRTdGVwID0gbmV4dFN0ZXA7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBpdGVtcyBnZW5lcmF0ZWQgZHVyaW5nIHRoZSBhZ2VudCBydW4gKGkuZS4gZXZlcnl0aGluZyBnZW5lcmF0ZWQgYWZ0ZXIgb3JpZ2luYWxJbnB1dClcbiAgICAgKi9cbiAgICBnZXQgZ2VuZXJhdGVkSXRlbXMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByZVN0ZXBJdGVtcy5jb25jYXQodGhpcy5uZXdTdGVwSXRlbXMpO1xuICAgIH1cbn1cbi8qKlxuICogQGludGVybmFsXG4gKiBSZXNldHMgdGhlIHRvb2wgY2hvaWNlIHdoZW4gdGhlIGFnZW50IGlzIGNvbmZpZ3VyZWQgdG8gcHJlZmVyIGEgZnJlc2ggdG9vbCBzZWxlY3Rpb24gYWZ0ZXJcbiAqIGFueSB0b29sIHVzYWdlLiBUaGlzIHByZXZlbnRzIHRoZSBwcm92aWRlciBmcm9tIHJldXNpbmcgc3RhbGUgdG9vbCBoaW50cyBhY3Jvc3MgdHVybnMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBtYXliZVJlc2V0VG9vbENob2ljZShhZ2VudCwgdG9vbFVzZVRyYWNrZXIsIG1vZGVsU2V0dGluZ3MpIHtcbiAgICBpZiAoYWdlbnQucmVzZXRUb29sQ2hvaWNlICYmIHRvb2xVc2VUcmFja2VyLmhhc1VzZWRUb29scyhhZ2VudCkpIHtcbiAgICAgICAgcmV0dXJuIHsgLi4ubW9kZWxTZXR0aW5ncywgdG9vbENob2ljZTogdW5kZWZpbmVkIH07XG4gICAgfVxuICAgIHJldHVybiBtb2RlbFNldHRpbmdzO1xufVxuLyoqXG4gKiBAaW50ZXJuYWxcbiAqIENvbnRpbnVlcyBhIHR1cm4gdGhhdCB3YXMgcHJldmlvdXNseSBpbnRlcnJ1cHRlZCB3YWl0aW5nIGZvciB0b29sIGFwcHJvdmFsLiBFeGVjdXRlcyB0aGUgbm93XG4gKiBhcHByb3ZlZCB0b29scyBhbmQgcmV0dXJucyB0aGUgcmVzdWx0aW5nIHN0ZXAgdHJhbnNpdGlvbi5cbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHJlc29sdmVJbnRlcnJ1cHRlZFR1cm4oYWdlbnQsIG9yaWdpbmFsSW5wdXQsIG9yaWdpbmFsUHJlU3RlcEl0ZW1zLCBuZXdSZXNwb25zZSwgcHJvY2Vzc2VkUmVzcG9uc2UsIHJ1bm5lciwgc3RhdGUpIHtcbiAgICAvLyBjYWxsX2lkcyBmb3IgZnVuY3Rpb24gdG9vbHNcbiAgICBjb25zdCBmdW5jdGlvbkNhbGxJZHMgPSBvcmlnaW5hbFByZVN0ZXBJdGVtc1xuICAgICAgICAuZmlsdGVyKChpdGVtKSA9PiBpdGVtIGluc3RhbmNlb2YgUnVuVG9vbEFwcHJvdmFsSXRlbSAmJlxuICAgICAgICAnY2FsbElkJyBpbiBpdGVtLnJhd0l0ZW0gJiZcbiAgICAgICAgaXRlbS5yYXdJdGVtLnR5cGUgPT09ICdmdW5jdGlvbl9jYWxsJylcbiAgICAgICAgLm1hcCgoaXRlbSkgPT4gaXRlbS5yYXdJdGVtLmNhbGxJZCk7XG4gICAgLy8gV2UgYWxyZWFkeSBwZXJzaXN0ZWQgdGhlIHR1cm4gb25jZSB3aGVuIHRoZSBhcHByb3ZhbCBpbnRlcnJ1cHQgd2FzIHJhaXNlZCwgc28gdGhlXG4gICAgLy8gY291bnRlciByZWZsZWN0cyB0aGUgYXBwcm92YWwgaXRlbXMgYXMgXCJmbHVzaGVkXCIuIFdoZW4gd2UgcmVzdW1lIHRoZSBzYW1lIHR1cm4gd2UgbmVlZFxuICAgIC8vIHRvIHJld2luZCBpdCBzbyB0aGUgZXZlbnR1YWwgdG9vbCBvdXRwdXQgZm9yIHRoaXMgY2FsbCBpcyBzdGlsbCB3cml0dGVuIHRvIHRoZSBzZXNzaW9uLlxuICAgIGNvbnN0IHBlbmRpbmdBcHByb3ZhbEl0ZW1zID0gc3RhdGVcbiAgICAgICAgLmdldEludGVycnVwdGlvbnMoKVxuICAgICAgICAuZmlsdGVyKGlzQXBwcm92YWxJdGVtTGlrZSk7XG4gICAgaWYgKHBlbmRpbmdBcHByb3ZhbEl0ZW1zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgY29uc3QgcGVuZGluZ0FwcHJvdmFsSWRlbnRpdGllcyA9IG5ldyBTZXQoKTtcbiAgICAgICAgZm9yIChjb25zdCBhcHByb3ZhbCBvZiBwZW5kaW5nQXBwcm92YWxJdGVtcykge1xuICAgICAgICAgICAgY29uc3QgaWRlbnRpdHkgPSBnZXRBcHByb3ZhbElkZW50aXR5KGFwcHJvdmFsKTtcbiAgICAgICAgICAgIGlmIChpZGVudGl0eSkge1xuICAgICAgICAgICAgICAgIHBlbmRpbmdBcHByb3ZhbElkZW50aXRpZXMuYWRkKGlkZW50aXR5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAocGVuZGluZ0FwcHJvdmFsSWRlbnRpdGllcy5zaXplID4gMCkge1xuICAgICAgICAgICAgbGV0IHJld2luZENvdW50ID0gMDtcbiAgICAgICAgICAgIGZvciAobGV0IGluZGV4ID0gb3JpZ2luYWxQcmVTdGVwSXRlbXMubGVuZ3RoIC0gMTsgaW5kZXggPj0gMDsgaW5kZXgtLSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGl0ZW0gPSBvcmlnaW5hbFByZVN0ZXBJdGVtc1tpbmRleF07XG4gICAgICAgICAgICAgICAgaWYgKCEoaXRlbSBpbnN0YW5jZW9mIFJ1blRvb2xBcHByb3ZhbEl0ZW0pKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCBpZGVudGl0eSA9IGdldEFwcHJvdmFsSWRlbnRpdHkoaXRlbSk7XG4gICAgICAgICAgICAgICAgaWYgKCFpZGVudGl0eSkge1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKCFwZW5kaW5nQXBwcm92YWxJZGVudGl0aWVzLmhhcyhpZGVudGl0eSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJld2luZENvdW50Kys7XG4gICAgICAgICAgICAgICAgcGVuZGluZ0FwcHJvdmFsSWRlbnRpdGllcy5kZWxldGUoaWRlbnRpdHkpO1xuICAgICAgICAgICAgICAgIGlmIChwZW5kaW5nQXBwcm92YWxJZGVudGl0aWVzLnNpemUgPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gUGVyc2lzdGluZyB0aGUgYXBwcm92YWwgcmVxdWVzdCBhbHJlYWR5IGFkdmFuY2VkIHRoZSBjb3VudGVyIG9uY2UsIHNvIHVuZG8gdGhlIGluY3JlbWVudFxuICAgICAgICAgICAgLy8gdG8gbWFrZSBzdXJlIHdlIHdyaXRlIHRoZSBmaW5hbCB0b29sIG91dHB1dCBiYWNrIHRvIHRoZSBzZXNzaW9uIHdoZW4gdGhlIHR1cm4gcmVzdW1lcy5cbiAgICAgICAgICAgIGlmIChyZXdpbmRDb3VudCA+IDApIHtcbiAgICAgICAgICAgICAgICBzdGF0ZS5fY3VycmVudFR1cm5QZXJzaXN0ZWRJdGVtQ291bnQgPSBNYXRoLm1heCgwLCBzdGF0ZS5fY3VycmVudFR1cm5QZXJzaXN0ZWRJdGVtQ291bnQgLSByZXdpbmRDb3VudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgLy8gUnVuIGZ1bmN0aW9uIHRvb2xzIHRoYXQgcmVxdWlyZSBhcHByb3ZhbCBhZnRlciB0aGV5IGdldCB0aGVpciBhcHByb3ZhbCByZXN1bHRzXG4gICAgY29uc3QgZnVuY3Rpb25Ub29sUnVucyA9IHByb2Nlc3NlZFJlc3BvbnNlLmZ1bmN0aW9ucy5maWx0ZXIoKHJ1bikgPT4ge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb25DYWxsSWRzLmluY2x1ZGVzKHJ1bi50b29sQ2FsbC5jYWxsSWQpO1xuICAgIH0pO1xuICAgIGNvbnN0IGZ1bmN0aW9uUmVzdWx0cyA9IGF3YWl0IGV4ZWN1dGVGdW5jdGlvblRvb2xDYWxscyhhZ2VudCwgZnVuY3Rpb25Ub29sUnVucywgcnVubmVyLCBzdGF0ZSk7XG4gICAgLy8gVGhlcmUgaXMgbm8gYnVpbHQtaW4gSElUTCBhcHByb3ZhbCBzdXJmYWNlIGZvciBjb21wdXRlciB0b29scyB0b2RheSwgc28gZXZlcnkgcGVuZGluZyBhY3Rpb25cbiAgICAvLyBpcyBleGVjdXRlZCBpbW1lZGlhdGVseSB3aGVuIHRoZSB0dXJuIHJlc3VtZXMuXG4gICAgY29uc3QgY29tcHV0ZXJSZXN1bHRzID0gcHJvY2Vzc2VkUmVzcG9uc2UuY29tcHV0ZXJBY3Rpb25zLmxlbmd0aCA+IDBcbiAgICAgICAgPyBhd2FpdCBleGVjdXRlQ29tcHV0ZXJBY3Rpb25zKGFnZW50LCBwcm9jZXNzZWRSZXNwb25zZS5jb21wdXRlckFjdGlvbnMsIHJ1bm5lciwgc3RhdGUuX2NvbnRleHQpXG4gICAgICAgIDogW107XG4gICAgLy8gV2hlbiByZXN1bWluZyB3ZSByZWNlaXZlIHRoZSBvcmlnaW5hbCBSdW5JdGVtIHJlZmVyZW5jZXM7IHN1cHByZXNzIGR1cGxpY2F0ZXMgc28gaGlzdG9yeSBhbmQgc3RyZWFtaW5nIGRvIG5vdCBkb3VibGUtZW1pdCB0aGUgc2FtZSBpdGVtcy5cbiAgICBjb25zdCBvcmlnaW5hbFByZVN0ZXBJdGVtU2V0ID0gbmV3IFNldChvcmlnaW5hbFByZVN0ZXBJdGVtcyk7XG4gICAgY29uc3QgbmV3SXRlbXMgPSBbXTtcbiAgICBjb25zdCBuZXdJdGVtc1NldCA9IG5ldyBTZXQoKTtcbiAgICBjb25zdCBhcHBlbmRJZk5ldyA9IChpdGVtKSA9PiB7XG4gICAgICAgIGlmIChvcmlnaW5hbFByZVN0ZXBJdGVtU2V0LmhhcyhpdGVtKSB8fCBuZXdJdGVtc1NldC5oYXMoaXRlbSkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBuZXdJdGVtcy5wdXNoKGl0ZW0pO1xuICAgICAgICBuZXdJdGVtc1NldC5hZGQoaXRlbSk7XG4gICAgfTtcbiAgICBmb3IgKGNvbnN0IHJlc3VsdCBvZiBmdW5jdGlvblJlc3VsdHMpIHtcbiAgICAgICAgYXBwZW5kSWZOZXcocmVzdWx0LnJ1bkl0ZW0pO1xuICAgIH1cbiAgICBmb3IgKGNvbnN0IHJlc3VsdCBvZiBjb21wdXRlclJlc3VsdHMpIHtcbiAgICAgICAgYXBwZW5kSWZOZXcocmVzdWx0KTtcbiAgICB9XG4gICAgLy8gUnVuIE1DUCB0b29scyB0aGF0IHJlcXVpcmUgYXBwcm92YWwgYWZ0ZXIgdGhleSBnZXQgdGhlaXIgYXBwcm92YWwgcmVzdWx0c1xuICAgIGNvbnN0IG1jcEFwcHJvdmFsUnVucyA9IHByb2Nlc3NlZFJlc3BvbnNlLm1jcEFwcHJvdmFsUmVxdWVzdHMuZmlsdGVyKChydW4pID0+IHtcbiAgICAgICAgcmV0dXJuIChydW4ucmVxdWVzdEl0ZW0udHlwZSA9PT0gJ3Rvb2xfYXBwcm92YWxfaXRlbScgJiZcbiAgICAgICAgICAgIHJ1bi5yZXF1ZXN0SXRlbS5yYXdJdGVtLnR5cGUgPT09ICdob3N0ZWRfdG9vbF9jYWxsJyAmJlxuICAgICAgICAgICAgcnVuLnJlcXVlc3RJdGVtLnJhd0l0ZW0ucHJvdmlkZXJEYXRhPy50eXBlID09PSAnbWNwX2FwcHJvdmFsX3JlcXVlc3QnKTtcbiAgICB9KTtcbiAgICAvLyBIb3N0ZWQgTUNQIGFwcHJvdmFscyBtYXkgc3RpbGwgYmUgd2FpdGluZyBvbiBhIGh1bWFuIGRlY2lzaW9uIHdoZW4gdGhlIHR1cm4gcmVzdW1lcy5cbiAgICBjb25zdCBwZW5kaW5nSG9zdGVkTUNQQXBwcm92YWxzID0gbmV3IFNldCgpO1xuICAgIGNvbnN0IHBlbmRpbmdIb3N0ZWRNQ1BBcHByb3ZhbElkcyA9IG5ldyBTZXQoKTtcbiAgICAvLyBLZWVwIHRyYWNrIG9mIGFwcHJvdmFscyB3ZSBzdGlsbCBuZWVkIHRvIHN1cmZhY2UgbmV4dCB0dXJuIHNvIEhJVEwgZmxvd3MgY2FuIHJlc3VtZSBjbGVhbmx5LlxuICAgIGZvciAoY29uc3QgcnVuIG9mIG1jcEFwcHJvdmFsUnVucykge1xuICAgICAgICAvLyB0aGUgYXBwcm92YWxfcmVxdWVzdF9pZCBcIm1jcHJfMTIzLi4uXCJcbiAgICAgICAgY29uc3QgcmF3SXRlbSA9IHJ1bi5yZXF1ZXN0SXRlbS5yYXdJdGVtO1xuICAgICAgICBpZiAocmF3SXRlbS50eXBlICE9PSAnaG9zdGVkX3Rvb2xfY2FsbCcpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGFwcHJvdmFsUmVxdWVzdElkID0gcmF3SXRlbS5pZDtcbiAgICAgICAgY29uc3QgYXBwcm92ZWQgPSBzdGF0ZS5fY29udGV4dC5pc1Rvb2xBcHByb3ZlZCh7XG4gICAgICAgICAgICAvLyBTaW5jZSB0aGlzIGl0ZW0gbmFtZSBtdXN0IGJlIHRoZSBzYW1lIHdpdGggdGhlIG9uZSBzZW50IGZyb20gUmVzcG9uc2VzIEFQSSBzZXJ2ZXJcbiAgICAgICAgICAgIHRvb2xOYW1lOiByYXdJdGVtLm5hbWUsXG4gICAgICAgICAgICBjYWxsSWQ6IGFwcHJvdmFsUmVxdWVzdElkLFxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKHR5cGVvZiBhcHByb3ZlZCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIGNvbnN0IHByb3ZpZGVyRGF0YSA9IHtcbiAgICAgICAgICAgICAgICBhcHByb3ZlOiBhcHByb3ZlZCxcbiAgICAgICAgICAgICAgICBhcHByb3ZhbF9yZXF1ZXN0X2lkOiBhcHByb3ZhbFJlcXVlc3RJZCxcbiAgICAgICAgICAgICAgICByZWFzb246IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICAvLyBUZWxsIFJlc3BvbnNlcyBBUEkgc2VydmVyIHRoZSBhcHByb3ZhbCByZXN1bHQgaW4gdGhlIG5leHQgdHVyblxuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2VJdGVtID0gbmV3IFJ1blRvb2xDYWxsSXRlbSh7XG4gICAgICAgICAgICAgICAgdHlwZTogJ2hvc3RlZF90b29sX2NhbGwnLFxuICAgICAgICAgICAgICAgIG5hbWU6ICdtY3BfYXBwcm92YWxfcmVzcG9uc2UnLFxuICAgICAgICAgICAgICAgIHByb3ZpZGVyRGF0YSxcbiAgICAgICAgICAgIH0sIGFnZW50KTtcbiAgICAgICAgICAgIGFwcGVuZElmTmV3KHJlc3BvbnNlSXRlbSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBwZW5kaW5nSG9zdGVkTUNQQXBwcm92YWxzLmFkZChydW4ucmVxdWVzdEl0ZW0pO1xuICAgICAgICAgICAgcGVuZGluZ0hvc3RlZE1DUEFwcHJvdmFsSWRzLmFkZChhcHByb3ZhbFJlcXVlc3RJZCk7XG4gICAgICAgICAgICBmdW5jdGlvblJlc3VsdHMucHVzaCh7XG4gICAgICAgICAgICAgICAgdHlwZTogJ2hvc3RlZF9tY3BfdG9vbF9hcHByb3ZhbCcsXG4gICAgICAgICAgICAgICAgdG9vbDogcnVuLm1jcFRvb2wsXG4gICAgICAgICAgICAgICAgcnVuSXRlbTogcnVuLnJlcXVlc3RJdGVtLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBhcHBlbmRJZk5ldyhydW4ucmVxdWVzdEl0ZW0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8vIFNlcnZlci1tYW5hZ2VkIGNvbnZlcnNhdGlvbnMgcmVseSBvbiBwcmVTdGVwSXRlbXMgdG8gcmUtc3VyZmFjZSBwZW5kaW5nIGFwcHJvdmFscy5cbiAgICAvLyBLZWVwIHVucmVzb2x2ZWQgaG9zdGVkIE1DUCBhcHByb3ZhbHMgaW4gcGxhY2Ugc28gSElUTCBmbG93cyBzdGlsbCBoYXZlIHNvbWV0aGluZyB0byBhcHByb3ZlIG5leHQgdHVybi5cbiAgICAvLyBEcm9wIHJlc29sdmVkIGFwcHJvdmFsIHBsYWNlaG9sZGVycyBzbyB0aGV5IGFyZSBub3QgcmVwbGF5ZWQgb24gdGhlIG5leHQgdHVybiwgYnV0IGtlZXBcbiAgICAvLyBwZW5kaW5nIGFwcHJvdmFscyBpbiBwbGFjZSB0byBzaWduYWwgdGhlIG91dHN0YW5kaW5nIHdvcmsgdG8gdGhlIFVJIGFuZCBzZXNzaW9uIHN0b3JlLlxuICAgIGNvbnN0IHByZVN0ZXBJdGVtcyA9IG9yaWdpbmFsUHJlU3RlcEl0ZW1zLmZpbHRlcigoaXRlbSkgPT4ge1xuICAgICAgICBpZiAoIShpdGVtIGluc3RhbmNlb2YgUnVuVG9vbEFwcHJvdmFsSXRlbSkpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpdGVtLnJhd0l0ZW0udHlwZSA9PT0gJ2hvc3RlZF90b29sX2NhbGwnICYmXG4gICAgICAgICAgICBpdGVtLnJhd0l0ZW0ucHJvdmlkZXJEYXRhPy50eXBlID09PSAnbWNwX2FwcHJvdmFsX3JlcXVlc3QnKSB7XG4gICAgICAgICAgICBpZiAocGVuZGluZ0hvc3RlZE1DUEFwcHJvdmFscy5oYXMoaXRlbSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGFwcHJvdmFsUmVxdWVzdElkID0gaXRlbS5yYXdJdGVtLmlkO1xuICAgICAgICAgICAgaWYgKGFwcHJvdmFsUmVxdWVzdElkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHBlbmRpbmdIb3N0ZWRNQ1BBcHByb3ZhbElkcy5oYXMoYXBwcm92YWxSZXF1ZXN0SWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9KTtcbiAgICBjb25zdCBjb21wbGV0ZWRTdGVwID0gYXdhaXQgbWF5YmVDb21wbGV0ZVR1cm5Gcm9tVG9vbFJlc3VsdHMoe1xuICAgICAgICBhZ2VudCxcbiAgICAgICAgcnVubmVyLFxuICAgICAgICBzdGF0ZSxcbiAgICAgICAgZnVuY3Rpb25SZXN1bHRzLFxuICAgICAgICBvcmlnaW5hbElucHV0LFxuICAgICAgICBuZXdSZXNwb25zZSxcbiAgICAgICAgcHJlU3RlcEl0ZW1zLFxuICAgICAgICBuZXdJdGVtcyxcbiAgICB9KTtcbiAgICBpZiAoY29tcGxldGVkU3RlcCkge1xuICAgICAgICByZXR1cm4gY29tcGxldGVkU3RlcDtcbiAgICB9XG4gICAgLy8gd2Ugb25seSByYW4gbmV3IHRvb2xzIGFuZCBzaWRlIGVmZmVjdHMuIFdlIG5lZWQgdG8gcnVuIHRoZSByZXN0IG9mIHRoZSBhZ2VudFxuICAgIHJldHVybiBuZXcgU2luZ2xlU3RlcFJlc3VsdChvcmlnaW5hbElucHV0LCBuZXdSZXNwb25zZSwgcHJlU3RlcEl0ZW1zLCBuZXdJdGVtcywgeyB0eXBlOiAnbmV4dF9zdGVwX3J1bl9hZ2FpbicgfSk7XG59XG4vKipcbiAqIEBpbnRlcm5hbFxuICogRXhlY3V0ZXMgZXZlcnkgZm9sbG93LXVwIGFjdGlvbiB0aGUgbW9kZWwgcmVxdWVzdGVkIChmdW5jdGlvbiB0b29scywgY29tcHV0ZXIgYWN0aW9ucywgTUNQIGZsb3dzKSxcbiAqIGFwcGVuZHMgdGhlaXIgb3V0cHV0cyB0byB0aGUgcnVuIGhpc3RvcnksIGFuZCBkZXRlcm1pbmVzIHRoZSBuZXh0IHN0ZXAgZm9yIHRoZSBhZ2VudCBsb29wLlxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcmVzb2x2ZVR1cm5BZnRlck1vZGVsUmVzcG9uc2UoYWdlbnQsIG9yaWdpbmFsSW5wdXQsIG9yaWdpbmFsUHJlU3RlcEl0ZW1zLCBuZXdSZXNwb25zZSwgcHJvY2Vzc2VkUmVzcG9uc2UsIHJ1bm5lciwgc3RhdGUpIHtcbiAgICAvLyBSZXVzZSB0aGUgc2FtZSBhcnJheSByZWZlcmVuY2Ugc28gd2UgY2FuIGNvbXBhcmUgb2JqZWN0IGlkZW50aXR5IHdoZW4gZGVjaWRpbmcgd2hldGhlciB0b1xuICAgIC8vIGFwcGVuZCBuZXcgaXRlbXMsIGVuc3VyaW5nIHdlIG5ldmVyIGRvdWJsZS1zdHJlYW0gZXhpc3RpbmcgUnVuSXRlbXMuXG4gICAgY29uc3QgcHJlU3RlcEl0ZW1zID0gb3JpZ2luYWxQcmVTdGVwSXRlbXM7XG4gICAgY29uc3Qgc2Vlbkl0ZW1zID0gbmV3IFNldChvcmlnaW5hbFByZVN0ZXBJdGVtcyk7XG4gICAgY29uc3QgbmV3SXRlbXMgPSBbXTtcbiAgICBjb25zdCBhcHBlbmRJZk5ldyA9IChpdGVtKSA9PiB7XG4gICAgICAgIGlmIChzZWVuSXRlbXMuaGFzKGl0ZW0pKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgbmV3SXRlbXMucHVzaChpdGVtKTtcbiAgICAgICAgc2Vlbkl0ZW1zLmFkZChpdGVtKTtcbiAgICB9O1xuICAgIGZvciAoY29uc3QgaXRlbSBvZiBwcm9jZXNzZWRSZXNwb25zZS5uZXdJdGVtcykge1xuICAgICAgICBhcHBlbmRJZk5ldyhpdGVtKTtcbiAgICB9XG4gICAgLy8gUnVuIGZ1bmN0aW9uIHRvb2xzIGFuZCBjb21wdXRlciBhY3Rpb25zIGluIHBhcmFsbGVsOyBuZWl0aGVyIGRlcGVuZHMgb24gdGhlIG90aGVyJ3Mgc2lkZSBlZmZlY3RzLlxuICAgIGNvbnN0IFtmdW5jdGlvblJlc3VsdHMsIGNvbXB1dGVyUmVzdWx0cywgc2hlbGxSZXN1bHRzLCBhcHBseVBhdGNoUmVzdWx0c10gPSBhd2FpdCBQcm9taXNlLmFsbChbXG4gICAgICAgIGV4ZWN1dGVGdW5jdGlvblRvb2xDYWxscyhhZ2VudCwgcHJvY2Vzc2VkUmVzcG9uc2UuZnVuY3Rpb25zLCBydW5uZXIsIHN0YXRlKSxcbiAgICAgICAgZXhlY3V0ZUNvbXB1dGVyQWN0aW9ucyhhZ2VudCwgcHJvY2Vzc2VkUmVzcG9uc2UuY29tcHV0ZXJBY3Rpb25zLCBydW5uZXIsIHN0YXRlLl9jb250ZXh0KSxcbiAgICAgICAgZXhlY3V0ZVNoZWxsQWN0aW9ucyhhZ2VudCwgcHJvY2Vzc2VkUmVzcG9uc2Uuc2hlbGxBY3Rpb25zLCBydW5uZXIsIHN0YXRlLl9jb250ZXh0KSxcbiAgICAgICAgZXhlY3V0ZUFwcGx5UGF0Y2hPcGVyYXRpb25zKGFnZW50LCBwcm9jZXNzZWRSZXNwb25zZS5hcHBseVBhdGNoQWN0aW9ucywgcnVubmVyLCBzdGF0ZS5fY29udGV4dCksXG4gICAgXSk7XG4gICAgZm9yIChjb25zdCByZXN1bHQgb2YgZnVuY3Rpb25SZXN1bHRzKSB7XG4gICAgICAgIGFwcGVuZElmTmV3KHJlc3VsdC5ydW5JdGVtKTtcbiAgICB9XG4gICAgZm9yIChjb25zdCBpdGVtIG9mIGNvbXB1dGVyUmVzdWx0cykge1xuICAgICAgICBhcHBlbmRJZk5ldyhpdGVtKTtcbiAgICB9XG4gICAgZm9yIChjb25zdCBpdGVtIG9mIHNoZWxsUmVzdWx0cykge1xuICAgICAgICBhcHBlbmRJZk5ldyhpdGVtKTtcbiAgICB9XG4gICAgZm9yIChjb25zdCBpdGVtIG9mIGFwcGx5UGF0Y2hSZXN1bHRzKSB7XG4gICAgICAgIGFwcGVuZElmTmV3KGl0ZW0pO1xuICAgIH1cbiAgICAvLyBydW4gaG9zdGVkIE1DUCBhcHByb3ZhbCByZXF1ZXN0c1xuICAgIGlmIChwcm9jZXNzZWRSZXNwb25zZS5tY3BBcHByb3ZhbFJlcXVlc3RzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgZm9yIChjb25zdCBhcHByb3ZhbFJlcXVlc3Qgb2YgcHJvY2Vzc2VkUmVzcG9uc2UubWNwQXBwcm92YWxSZXF1ZXN0cykge1xuICAgICAgICAgICAgY29uc3QgdG9vbERhdGEgPSBhcHByb3ZhbFJlcXVlc3QubWNwVG9vbFxuICAgICAgICAgICAgICAgIC5wcm92aWRlckRhdGE7XG4gICAgICAgICAgICBjb25zdCByZXF1ZXN0RGF0YSA9IGFwcHJvdmFsUmVxdWVzdC5yZXF1ZXN0SXRlbS5yYXdJdGVtXG4gICAgICAgICAgICAgICAgLnByb3ZpZGVyRGF0YTtcbiAgICAgICAgICAgIGlmICh0b29sRGF0YS5vbl9hcHByb3ZhbCkge1xuICAgICAgICAgICAgICAgIC8vIHN5bmNocm9ub3VzbHkgaGFuZGxlIHRoZSBhcHByb3ZhbCBwcm9jZXNzIGhlcmVcbiAgICAgICAgICAgICAgICBjb25zdCBhcHByb3ZhbFJlc3VsdCA9IGF3YWl0IHRvb2xEYXRhLm9uX2FwcHJvdmFsKHN0YXRlLl9jb250ZXh0LCBhcHByb3ZhbFJlcXVlc3QucmVxdWVzdEl0ZW0pO1xuICAgICAgICAgICAgICAgIGNvbnN0IGFwcHJvdmFsUmVzcG9uc2VEYXRhID0ge1xuICAgICAgICAgICAgICAgICAgICBhcHByb3ZlOiBhcHByb3ZhbFJlc3VsdC5hcHByb3ZlLFxuICAgICAgICAgICAgICAgICAgICBhcHByb3ZhbF9yZXF1ZXN0X2lkOiByZXF1ZXN0RGF0YS5pZCxcbiAgICAgICAgICAgICAgICAgICAgcmVhc29uOiBhcHByb3ZhbFJlc3VsdC5yZWFzb24sXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBuZXdJdGVtcy5wdXNoKG5ldyBSdW5Ub29sQ2FsbEl0ZW0oe1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiAnaG9zdGVkX3Rvb2xfY2FsbCcsXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6ICdtY3BfYXBwcm92YWxfcmVzcG9uc2UnLFxuICAgICAgICAgICAgICAgICAgICBwcm92aWRlckRhdGE6IGFwcHJvdmFsUmVzcG9uc2VEYXRhLFxuICAgICAgICAgICAgICAgIH0sIGFnZW50KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyByZWNlaXZlIGEgdXNlcidzIGFwcHJvdmFsIG9uIHRoZSBuZXh0IHR1cm5cbiAgICAgICAgICAgICAgICBuZXdJdGVtcy5wdXNoKGFwcHJvdmFsUmVxdWVzdC5yZXF1ZXN0SXRlbSk7XG4gICAgICAgICAgICAgICAgY29uc3QgYXBwcm92YWxJdGVtID0ge1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiAnaG9zdGVkX21jcF90b29sX2FwcHJvdmFsJyxcbiAgICAgICAgICAgICAgICAgICAgdG9vbDogYXBwcm92YWxSZXF1ZXN0Lm1jcFRvb2wsXG4gICAgICAgICAgICAgICAgICAgIHJ1bkl0ZW06IG5ldyBSdW5Ub29sQXBwcm92YWxJdGVtKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdob3N0ZWRfdG9vbF9jYWxsJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IHJlcXVlc3REYXRhLm5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBpZDogcmVxdWVzdERhdGEuaWQsXG4gICAgICAgICAgICAgICAgICAgICAgICBhcmd1bWVudHM6IHJlcXVlc3REYXRhLmFyZ3VtZW50cyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXR1czogJ2luX3Byb2dyZXNzJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb3ZpZGVyRGF0YTogcmVxdWVzdERhdGEsXG4gICAgICAgICAgICAgICAgICAgIH0sIGFnZW50KSxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGZ1bmN0aW9uUmVzdWx0cy5wdXNoKGFwcHJvdmFsSXRlbSk7XG4gICAgICAgICAgICAgICAgLy8gbmV3SXRlbXMucHVzaChhcHByb3ZhbEl0ZW0ucnVuSXRlbSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgLy8gcHJvY2VzcyBoYW5kb2Zmc1xuICAgIGlmIChwcm9jZXNzZWRSZXNwb25zZS5oYW5kb2Zmcy5sZW5ndGggPiAwKSB7XG4gICAgICAgIHJldHVybiBhd2FpdCBleGVjdXRlSGFuZG9mZkNhbGxzKGFnZW50LCBvcmlnaW5hbElucHV0LCBwcmVTdGVwSXRlbXMsIG5ld0l0ZW1zLCBuZXdSZXNwb25zZSwgcHJvY2Vzc2VkUmVzcG9uc2UuaGFuZG9mZnMsIHJ1bm5lciwgc3RhdGUuX2NvbnRleHQpO1xuICAgIH1cbiAgICBjb25zdCBjb21wbGV0ZWRTdGVwID0gYXdhaXQgbWF5YmVDb21wbGV0ZVR1cm5Gcm9tVG9vbFJlc3VsdHMoe1xuICAgICAgICBhZ2VudCxcbiAgICAgICAgcnVubmVyLFxuICAgICAgICBzdGF0ZSxcbiAgICAgICAgZnVuY3Rpb25SZXN1bHRzLFxuICAgICAgICBvcmlnaW5hbElucHV0LFxuICAgICAgICBuZXdSZXNwb25zZSxcbiAgICAgICAgcHJlU3RlcEl0ZW1zLFxuICAgICAgICBuZXdJdGVtcyxcbiAgICB9KTtcbiAgICBpZiAoY29tcGxldGVkU3RlcCkge1xuICAgICAgICByZXR1cm4gY29tcGxldGVkU3RlcDtcbiAgICB9XG4gICAgLy8gSWYgdGhlIG1vZGVsIGlzc3VlZCBhbnkgdG9vbCBjYWxscyBvciBoYW5kb2ZmcyBpbiB0aGlzIHR1cm4sXG4gICAgLy8gd2UgbXVzdCBOT1QgdHJlYXQgYW55IGFzc2lzdGFudCBtZXNzYWdlIGluIHRoZSBzYW1lIHR1cm4gYXMgdGhlIGZpbmFsIG91dHB1dC5cbiAgICAvLyBXZSBzaG91bGQgcnVuIHRoZSBsb29wIGFnYWluIHNvIHRoZSBtb2RlbCBjYW4gc2VlIHRoZSB0b29sIHJlc3VsdHMgYW5kIHJlc3BvbmQuXG4gICAgY29uc3QgaGFkVG9vbENhbGxzT3JBY3Rpb25zID0gKHByb2Nlc3NlZFJlc3BvbnNlLmZ1bmN0aW9ucz8ubGVuZ3RoID8/IDApID4gMCB8fFxuICAgICAgICAocHJvY2Vzc2VkUmVzcG9uc2UuY29tcHV0ZXJBY3Rpb25zPy5sZW5ndGggPz8gMCkgPiAwIHx8XG4gICAgICAgIChwcm9jZXNzZWRSZXNwb25zZS5zaGVsbEFjdGlvbnM/Lmxlbmd0aCA/PyAwKSA+IDAgfHxcbiAgICAgICAgKHByb2Nlc3NlZFJlc3BvbnNlLmFwcGx5UGF0Y2hBY3Rpb25zPy5sZW5ndGggPz8gMCkgPiAwIHx8XG4gICAgICAgIChwcm9jZXNzZWRSZXNwb25zZS5tY3BBcHByb3ZhbFJlcXVlc3RzPy5sZW5ndGggPz8gMCkgPiAwIHx8XG4gICAgICAgIChwcm9jZXNzZWRSZXNwb25zZS5oYW5kb2Zmcz8ubGVuZ3RoID8/IDApID4gMDtcbiAgICBpZiAoaGFkVG9vbENhbGxzT3JBY3Rpb25zKSB7XG4gICAgICAgIHJldHVybiBuZXcgU2luZ2xlU3RlcFJlc3VsdChvcmlnaW5hbElucHV0LCBuZXdSZXNwb25zZSwgcHJlU3RlcEl0ZW1zLCBuZXdJdGVtcywgeyB0eXBlOiAnbmV4dF9zdGVwX3J1bl9hZ2FpbicgfSk7XG4gICAgfVxuICAgIC8vIE5vIHRvb2wgY2FsbHMvYWN0aW9ucyBpbiB0aGlzIHR1cm47IHNhZmUgdG8gY29uc2lkZXIgYSBwbGFpbiBhc3Npc3RhbnQgbWVzc2FnZSBhcyBmaW5hbC5cbiAgICBjb25zdCBtZXNzYWdlSXRlbXMgPSBuZXdJdGVtcy5maWx0ZXIoKGl0ZW0pID0+IGl0ZW0gaW5zdGFuY2VvZiBSdW5NZXNzYWdlT3V0cHV0SXRlbSk7XG4gICAgLy8gd2Ugd2lsbCB1c2UgdGhlIGxhc3QgY29udGVudCBvdXRwdXQgYXMgdGhlIGZpbmFsIG91dHB1dFxuICAgIGNvbnN0IHBvdGVudGlhbEZpbmFsT3V0cHV0ID0gbWVzc2FnZUl0ZW1zLmxlbmd0aCA+IDBcbiAgICAgICAgPyBnZXRMYXN0VGV4dEZyb21PdXRwdXRNZXNzYWdlKG1lc3NhZ2VJdGVtc1ttZXNzYWdlSXRlbXMubGVuZ3RoIC0gMV0ucmF3SXRlbSlcbiAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgLy8gaWYgdGhlcmUgaXMgbm8gb3V0cHV0IHdlIGp1c3QgcnVuIGFnYWluXG4gICAgaWYgKHR5cGVvZiBwb3RlbnRpYWxGaW5hbE91dHB1dCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBTaW5nbGVTdGVwUmVzdWx0KG9yaWdpbmFsSW5wdXQsIG5ld1Jlc3BvbnNlLCBwcmVTdGVwSXRlbXMsIG5ld0l0ZW1zLCB7IHR5cGU6ICduZXh0X3N0ZXBfcnVuX2FnYWluJyB9KTtcbiAgICB9XG4gICAgLy8gS2VlcCBsb29waW5nIGlmIGFueSB0b29sIG91dHB1dCBwbGFjZWhvbGRlcnMgc3RpbGwgcmVxdWlyZSBhbiBhcHByb3ZhbCBmb2xsb3ctdXAuXG4gICAgY29uc3QgaGFzUGVuZGluZ1Rvb2xzT3JBcHByb3ZhbHMgPSBmdW5jdGlvblJlc3VsdHMuc29tZSgocmVzdWx0KSA9PiByZXN1bHQucnVuSXRlbSBpbnN0YW5jZW9mIFJ1blRvb2xBcHByb3ZhbEl0ZW0pO1xuICAgIGlmICghaGFzUGVuZGluZ1Rvb2xzT3JBcHByb3ZhbHMpIHtcbiAgICAgICAgaWYgKGFnZW50Lm91dHB1dFR5cGUgPT09ICd0ZXh0Jykge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBTaW5nbGVTdGVwUmVzdWx0KG9yaWdpbmFsSW5wdXQsIG5ld1Jlc3BvbnNlLCBwcmVTdGVwSXRlbXMsIG5ld0l0ZW1zLCB7XG4gICAgICAgICAgICAgICAgdHlwZTogJ25leHRfc3RlcF9maW5hbF9vdXRwdXQnLFxuICAgICAgICAgICAgICAgIG91dHB1dDogcG90ZW50aWFsRmluYWxPdXRwdXQsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoYWdlbnQub3V0cHV0VHlwZSAhPT0gJ3RleHQnICYmIHBvdGVudGlhbEZpbmFsT3V0cHV0KSB7XG4gICAgICAgICAgICAvLyBTdHJ1Y3R1cmVkIG91dHB1dCBzY2hlbWEgPT4gYWx3YXlzIGxlYWRzIHRvIGEgZmluYWwgb3V0cHV0IGlmIHdlIGhhdmUgdGV4dC5cbiAgICAgICAgICAgIGNvbnN0IHsgcGFyc2VyIH0gPSBnZXRTY2hlbWFBbmRQYXJzZXJGcm9tSW5wdXRUeXBlKGFnZW50Lm91dHB1dFR5cGUsICdmaW5hbF9vdXRwdXQnKTtcbiAgICAgICAgICAgIGNvbnN0IFtlcnJvcl0gPSBhd2FpdCBzYWZlRXhlY3V0ZSgoKSA9PiBwYXJzZXIocG90ZW50aWFsRmluYWxPdXRwdXQpKTtcbiAgICAgICAgICAgIGlmIChlcnJvcikge1xuICAgICAgICAgICAgICAgIGNvbnN0IG91dHB1dEVycm9yTWVzc2FnZSA9IGZvcm1hdEZpbmFsT3V0cHV0VHlwZUVycm9yKGVycm9yKTtcbiAgICAgICAgICAgICAgICBhZGRFcnJvclRvQ3VycmVudFNwYW4oe1xuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBvdXRwdXRFcnJvck1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yOiBTdHJpbmcoZXJyb3IpLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBNb2RlbEJlaGF2aW9yRXJyb3Iob3V0cHV0RXJyb3JNZXNzYWdlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBuZXcgU2luZ2xlU3RlcFJlc3VsdChvcmlnaW5hbElucHV0LCBuZXdSZXNwb25zZSwgcHJlU3RlcEl0ZW1zLCBuZXdJdGVtcywgeyB0eXBlOiAnbmV4dF9zdGVwX2ZpbmFsX291dHB1dCcsIG91dHB1dDogcG90ZW50aWFsRmluYWxPdXRwdXQgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG5ldyBTaW5nbGVTdGVwUmVzdWx0KG9yaWdpbmFsSW5wdXQsIG5ld1Jlc3BvbnNlLCBwcmVTdGVwSXRlbXMsIG5ld0l0ZW1zLCB7IHR5cGU6ICduZXh0X3N0ZXBfcnVuX2FnYWluJyB9KTtcbn1cbi8vIENvbnNvbGlkYXRlcyB0aGUgbG9naWMgdGhhdCBkZXRlcm1pbmVzIHdoZXRoZXIgdG9vbCByZXN1bHRzIHlpZWxkZWQgYSBmaW5hbCBhbnN3ZXIsXG4vLyB0cmlnZ2VyZWQgYW4gaW50ZXJydXB0aW9uLCBvciByZXF1aXJlIHRoZSBhZ2VudCBsb29wIHRvIGNvbnRpbnVlIHJ1bm5pbmcuXG5hc3luYyBmdW5jdGlvbiBtYXliZUNvbXBsZXRlVHVybkZyb21Ub29sUmVzdWx0cyh7IGFnZW50LCBydW5uZXIsIHN0YXRlLCBmdW5jdGlvblJlc3VsdHMsIG9yaWdpbmFsSW5wdXQsIG5ld1Jlc3BvbnNlLCBwcmVTdGVwSXRlbXMsIG5ld0l0ZW1zLCB9KSB7XG4gICAgY29uc3QgdG9vbE91dGNvbWUgPSBhd2FpdCBjaGVja0ZvckZpbmFsT3V0cHV0RnJvbVRvb2xzKGFnZW50LCBmdW5jdGlvblJlc3VsdHMsIHN0YXRlKTtcbiAgICBpZiAodG9vbE91dGNvbWUuaXNGaW5hbE91dHB1dCkge1xuICAgICAgICBydW5uZXIuZW1pdCgnYWdlbnRfZW5kJywgc3RhdGUuX2NvbnRleHQsIGFnZW50LCB0b29sT3V0Y29tZS5maW5hbE91dHB1dCk7XG4gICAgICAgIGFnZW50LmVtaXQoJ2FnZW50X2VuZCcsIHN0YXRlLl9jb250ZXh0LCB0b29sT3V0Y29tZS5maW5hbE91dHB1dCk7XG4gICAgICAgIHJldHVybiBuZXcgU2luZ2xlU3RlcFJlc3VsdChvcmlnaW5hbElucHV0LCBuZXdSZXNwb25zZSwgcHJlU3RlcEl0ZW1zLCBuZXdJdGVtcywge1xuICAgICAgICAgICAgdHlwZTogJ25leHRfc3RlcF9maW5hbF9vdXRwdXQnLFxuICAgICAgICAgICAgb3V0cHV0OiB0b29sT3V0Y29tZS5maW5hbE91dHB1dCxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGlmICh0b29sT3V0Y29tZS5pc0ludGVycnVwdGVkKSB7XG4gICAgICAgIHJldHVybiBuZXcgU2luZ2xlU3RlcFJlc3VsdChvcmlnaW5hbElucHV0LCBuZXdSZXNwb25zZSwgcHJlU3RlcEl0ZW1zLCBuZXdJdGVtcywge1xuICAgICAgICAgICAgdHlwZTogJ25leHRfc3RlcF9pbnRlcnJ1cHRpb24nLFxuICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgIGludGVycnVwdGlvbnM6IHRvb2xPdXRjb21lLmludGVycnVwdGlvbnMsXG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG59XG4vKipcbiAqIEBpbnRlcm5hbFxuICogTm9ybWFsaXplcyB0b29sIG91dHB1dHMgb25jZSBzbyBkb3duc3RyZWFtIGNvZGUgd29ya3Mgd2l0aCBmdWxseSBzdHJ1Y3R1cmVkIHByb3RvY29sIGl0ZW1zLlxuICogRG9pbmcgdGhpcyBoZXJlIGtlZXBzIEFQSSBzdXJmYWNlIHN0YWJsZSBldmVuIHdoZW4gcHJvdmlkZXJzIGFkZCBuZXcgc2hhcGVzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0VG9vbENhbGxPdXRwdXRJdGVtKHRvb2xDYWxsLCBvdXRwdXQpIHtcbiAgICBjb25zdCBtYXliZVN0cnVjdHVyZWRPdXRwdXRzID0gbm9ybWFsaXplU3RydWN0dXJlZFRvb2xPdXRwdXRzKG91dHB1dCk7XG4gICAgaWYgKG1heWJlU3RydWN0dXJlZE91dHB1dHMpIHtcbiAgICAgICAgY29uc3Qgc3RydWN0dXJlZEl0ZW1zID0gbWF5YmVTdHJ1Y3R1cmVkT3V0cHV0cy5tYXAoY29udmVydFN0cnVjdHVyZWRUb29sT3V0cHV0VG9JbnB1dEl0ZW0pO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdHlwZTogJ2Z1bmN0aW9uX2NhbGxfcmVzdWx0JyxcbiAgICAgICAgICAgIG5hbWU6IHRvb2xDYWxsLm5hbWUsXG4gICAgICAgICAgICBjYWxsSWQ6IHRvb2xDYWxsLmNhbGxJZCxcbiAgICAgICAgICAgIHN0YXR1czogJ2NvbXBsZXRlZCcsXG4gICAgICAgICAgICBvdXRwdXQ6IHN0cnVjdHVyZWRJdGVtcyxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogJ2Z1bmN0aW9uX2NhbGxfcmVzdWx0JyxcbiAgICAgICAgbmFtZTogdG9vbENhbGwubmFtZSxcbiAgICAgICAgY2FsbElkOiB0b29sQ2FsbC5jYWxsSWQsXG4gICAgICAgIHN0YXR1czogJ2NvbXBsZXRlZCcsXG4gICAgICAgIG91dHB1dDoge1xuICAgICAgICAgICAgdHlwZTogJ3RleHQnLFxuICAgICAgICAgICAgdGV4dDogdG9TbWFydFN0cmluZyhvdXRwdXQpLFxuICAgICAgICB9LFxuICAgIH07XG59XG5mdW5jdGlvbiBub3JtYWxpemVGaWxlVmFsdWUodmFsdWUpIHtcbiAgICBjb25zdCBkaXJlY3RGaWxlID0gdmFsdWUuZmlsZTtcbiAgICBpZiAodHlwZW9mIGRpcmVjdEZpbGUgPT09ICdzdHJpbmcnICYmIGRpcmVjdEZpbGUubGVuZ3RoID4gMCkge1xuICAgICAgICByZXR1cm4gZGlyZWN0RmlsZTtcbiAgICB9XG4gICAgY29uc3Qgbm9ybWFsaXplZE9iamVjdCA9IG5vcm1hbGl6ZUZpbGVPYmplY3RDYW5kaWRhdGUoZGlyZWN0RmlsZSk7XG4gICAgaWYgKG5vcm1hbGl6ZWRPYmplY3QpIHtcbiAgICAgICAgcmV0dXJuIG5vcm1hbGl6ZWRPYmplY3Q7XG4gICAgfVxuICAgIGNvbnN0IGxlZ2FjeVZhbHVlID0gbm9ybWFsaXplTGVnYWN5RmlsZVZhbHVlKHZhbHVlKTtcbiAgICBpZiAobGVnYWN5VmFsdWUpIHtcbiAgICAgICAgcmV0dXJuIGxlZ2FjeVZhbHVlO1xuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbn1cbmZ1bmN0aW9uIG5vcm1hbGl6ZUZpbGVPYmplY3RDYW5kaWRhdGUodmFsdWUpIHtcbiAgICBpZiAoIWlzUmVjb3JkKHZhbHVlKSkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgaWYgKCdkYXRhJyBpbiB2YWx1ZSAmJiB2YWx1ZS5kYXRhICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgY29uc3QgZGF0YVZhbHVlID0gdmFsdWUuZGF0YTtcbiAgICAgICAgY29uc3QgaGFzU3RyaW5nRGF0YSA9IHR5cGVvZiBkYXRhVmFsdWUgPT09ICdzdHJpbmcnICYmIGRhdGFWYWx1ZS5sZW5ndGggPiAwO1xuICAgICAgICBjb25zdCBoYXNCaW5hcnlEYXRhID0gZGF0YVZhbHVlIGluc3RhbmNlb2YgVWludDhBcnJheSAmJiBkYXRhVmFsdWUubGVuZ3RoID4gMDtcbiAgICAgICAgaWYgKCFoYXNTdHJpbmdEYXRhICYmICFoYXNCaW5hcnlEYXRhKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWlzTm9uRW1wdHlTdHJpbmcodmFsdWUubWVkaWFUeXBlKSB8fFxuICAgICAgICAgICAgIWlzTm9uRW1wdHlTdHJpbmcodmFsdWUuZmlsZW5hbWUpKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgZGF0YTogdHlwZW9mIGRhdGFWYWx1ZSA9PT0gJ3N0cmluZycgPyBkYXRhVmFsdWUgOiBuZXcgVWludDhBcnJheShkYXRhVmFsdWUpLFxuICAgICAgICAgICAgbWVkaWFUeXBlOiB2YWx1ZS5tZWRpYVR5cGUsXG4gICAgICAgICAgICBmaWxlbmFtZTogdmFsdWUuZmlsZW5hbWUsXG4gICAgICAgIH07XG4gICAgfVxuICAgIGlmIChpc05vbkVtcHR5U3RyaW5nKHZhbHVlLnVybCkpIHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0geyB1cmw6IHZhbHVlLnVybCB9O1xuICAgICAgICBpZiAoaXNOb25FbXB0eVN0cmluZyh2YWx1ZS5maWxlbmFtZSkpIHtcbiAgICAgICAgICAgIHJlc3VsdC5maWxlbmFtZSA9IHZhbHVlLmZpbGVuYW1lO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuICAgIGNvbnN0IHJlZmVyZW5jZWRJZCA9IChpc05vbkVtcHR5U3RyaW5nKHZhbHVlLmlkKSAmJiB2YWx1ZS5pZCkgfHxcbiAgICAgICAgKGlzTm9uRW1wdHlTdHJpbmcodmFsdWUuZmlsZUlkKSAmJiB2YWx1ZS5maWxlSWQpO1xuICAgIGlmIChyZWZlcmVuY2VkSWQpIHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0geyBpZDogcmVmZXJlbmNlZElkIH07XG4gICAgICAgIGlmIChpc05vbkVtcHR5U3RyaW5nKHZhbHVlLmZpbGVuYW1lKSkge1xuICAgICAgICAgICAgcmVzdWx0LmZpbGVuYW1lID0gdmFsdWUuZmlsZW5hbWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG59XG5mdW5jdGlvbiBub3JtYWxpemVMZWdhY3lGaWxlVmFsdWUodmFsdWUpIHtcbiAgICBjb25zdCBmaWxlbmFtZSA9IHR5cGVvZiB2YWx1ZS5maWxlbmFtZSA9PT0gJ3N0cmluZycgJiYgdmFsdWUuZmlsZW5hbWUubGVuZ3RoID4gMFxuICAgICAgICA/IHZhbHVlLmZpbGVuYW1lXG4gICAgICAgIDogdW5kZWZpbmVkO1xuICAgIGNvbnN0IG1lZGlhVHlwZSA9IHR5cGVvZiB2YWx1ZS5tZWRpYVR5cGUgPT09ICdzdHJpbmcnICYmIHZhbHVlLm1lZGlhVHlwZS5sZW5ndGggPiAwXG4gICAgICAgID8gdmFsdWUubWVkaWFUeXBlXG4gICAgICAgIDogdW5kZWZpbmVkO1xuICAgIGlmICh0eXBlb2YgdmFsdWUuZmlsZURhdGEgPT09ICdzdHJpbmcnICYmIHZhbHVlLmZpbGVEYXRhLmxlbmd0aCA+IDApIHtcbiAgICAgICAgaWYgKCFtZWRpYVR5cGUgfHwgIWZpbGVuYW1lKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4geyBkYXRhOiB2YWx1ZS5maWxlRGF0YSwgbWVkaWFUeXBlLCBmaWxlbmFtZSB9O1xuICAgIH1cbiAgICBpZiAodmFsdWUuZmlsZURhdGEgaW5zdGFuY2VvZiBVaW50OEFycmF5ICYmIHZhbHVlLmZpbGVEYXRhLmxlbmd0aCA+IDApIHtcbiAgICAgICAgaWYgKCFtZWRpYVR5cGUgfHwgIWZpbGVuYW1lKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4geyBkYXRhOiBuZXcgVWludDhBcnJheSh2YWx1ZS5maWxlRGF0YSksIG1lZGlhVHlwZSwgZmlsZW5hbWUgfTtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiB2YWx1ZS5maWxlVXJsID09PSAnc3RyaW5nJyAmJiB2YWx1ZS5maWxlVXJsLmxlbmd0aCA+IDApIHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0geyB1cmw6IHZhbHVlLmZpbGVVcmwgfTtcbiAgICAgICAgaWYgKGZpbGVuYW1lKSB7XG4gICAgICAgICAgICByZXN1bHQuZmlsZW5hbWUgPSBmaWxlbmFtZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbiAgICBpZiAodHlwZW9mIHZhbHVlLmZpbGVJZCA9PT0gJ3N0cmluZycgJiYgdmFsdWUuZmlsZUlkLmxlbmd0aCA+IDApIHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0geyBpZDogdmFsdWUuZmlsZUlkIH07XG4gICAgICAgIGlmIChmaWxlbmFtZSkge1xuICAgICAgICAgICAgcmVzdWx0LmZpbGVuYW1lID0gZmlsZW5hbWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG59XG5mdW5jdGlvbiBpc1JlY29yZCh2YWx1ZSkge1xuICAgIHJldHVybiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICE9PSBudWxsO1xufVxuZnVuY3Rpb24gaXNOb25FbXB0eVN0cmluZyh2YWx1ZSkge1xuICAgIHJldHVybiB0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnICYmIHZhbHVlLmxlbmd0aCA+IDA7XG59XG5mdW5jdGlvbiB0b0lubGluZUltYWdlU3RyaW5nKGRhdGEsIG1lZGlhVHlwZSkge1xuICAgIGlmICh0eXBlb2YgZGF0YSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgaWYgKG1lZGlhVHlwZSAmJiAhZGF0YS5zdGFydHNXaXRoKCdkYXRhOicpKSB7XG4gICAgICAgICAgICByZXR1cm4gYXNEYXRhVXJsKGRhdGEsIG1lZGlhVHlwZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGRhdGE7XG4gICAgfVxuICAgIGNvbnN0IGJhc2U2NCA9IGVuY29kZVVpbnQ4QXJyYXlUb0Jhc2U2NChkYXRhKTtcbiAgICByZXR1cm4gYXNEYXRhVXJsKGJhc2U2NCwgbWVkaWFUeXBlKTtcbn1cbmZ1bmN0aW9uIGFzRGF0YVVybChiYXNlNjQsIG1lZGlhVHlwZSkge1xuICAgIHJldHVybiBtZWRpYVR5cGUgPyBgZGF0YToke21lZGlhVHlwZX07YmFzZTY0LCR7YmFzZTY0fWAgOiBiYXNlNjQ7XG59XG4vKipcbiAqIEBpbnRlcm5hbFxuICogUnVucyBldmVyeSBmdW5jdGlvbiB0b29sIGNhbGwgcmVxdWVzdGVkIGJ5IHRoZSBtb2RlbCBhbmQgcmV0dXJucyB0aGVpciBvdXRwdXRzIGFsb25nc2lkZVxuICogdGhlIGBSdW5JdGVtYCBpbnN0YW5jZXMgdGhhdCBzaG91bGQgYmUgYXBwZW5kZWQgdG8gaGlzdG9yeS5cbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGV4ZWN1dGVGdW5jdGlvblRvb2xDYWxscyhhZ2VudCwgdG9vbFJ1bnMsIHJ1bm5lciwgc3RhdGUpIHtcbiAgICBhc3luYyBmdW5jdGlvbiBydW5TaW5nbGVUb29sKHRvb2xSdW4pIHtcbiAgICAgICAgbGV0IHBhcnNlZEFyZ3MgPSB0b29sUnVuLnRvb2xDYWxsLmFyZ3VtZW50cztcbiAgICAgICAgaWYgKHRvb2xSdW4udG9vbC5wYXJhbWV0ZXJzKSB7XG4gICAgICAgICAgICBpZiAoaXNab2RPYmplY3QodG9vbFJ1bi50b29sLnBhcmFtZXRlcnMpKSB7XG4gICAgICAgICAgICAgICAgcGFyc2VkQXJncyA9IHRvb2xSdW4udG9vbC5wYXJhbWV0ZXJzLnBhcnNlKHBhcnNlZEFyZ3MpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcGFyc2VkQXJncyA9IEpTT04ucGFyc2UocGFyc2VkQXJncyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gU29tZSB0b29scyByZXF1aXJlIGEgaHVtYW4gb3IgcG9saWN5IGNoZWNrIGJlZm9yZSBleGVjdXRpb247IGRlZmVyIHVudGlsIGFwcHJvdmFsIGlzIHJlY29yZGVkLlxuICAgICAgICBjb25zdCBuZWVkc0FwcHJvdmFsID0gYXdhaXQgdG9vbFJ1bi50b29sLm5lZWRzQXBwcm92YWwoc3RhdGUuX2NvbnRleHQsIHBhcnNlZEFyZ3MsIHRvb2xSdW4udG9vbENhbGwuY2FsbElkKTtcbiAgICAgICAgaWYgKG5lZWRzQXBwcm92YWwpIHtcbiAgICAgICAgICAgIGNvbnN0IGFwcHJvdmFsID0gc3RhdGUuX2NvbnRleHQuaXNUb29sQXBwcm92ZWQoe1xuICAgICAgICAgICAgICAgIHRvb2xOYW1lOiB0b29sUnVuLnRvb2wubmFtZSxcbiAgICAgICAgICAgICAgICBjYWxsSWQ6IHRvb2xSdW4udG9vbENhbGwuY2FsbElkLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAoYXBwcm92YWwgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgLy8gcmVqZWN0ZWRcbiAgICAgICAgICAgICAgICByZXR1cm4gd2l0aEZ1bmN0aW9uU3Bhbihhc3luYyAoc3BhbikgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCByZXNwb25zZSA9ICdUb29sIGV4ZWN1dGlvbiB3YXMgbm90IGFwcHJvdmVkLic7XG4gICAgICAgICAgICAgICAgICAgIHNwYW4uc2V0RXJyb3Ioe1xuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogcmVzcG9uc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9vbF9uYW1lOiB0b29sUnVuLnRvb2wubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnJvcjogYFRvb2wgZXhlY3V0aW9uIGZvciAke3Rvb2xSdW4udG9vbENhbGwuY2FsbElkfSB3YXMgbWFudWFsbHkgcmVqZWN0ZWQgYnkgdXNlci5gLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHNwYW4uc3BhbkRhdGEub3V0cHV0ID0gcmVzcG9uc2U7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnZnVuY3Rpb25fb3V0cHV0JyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvb2w6IHRvb2xSdW4udG9vbCxcbiAgICAgICAgICAgICAgICAgICAgICAgIG91dHB1dDogcmVzcG9uc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBydW5JdGVtOiBuZXcgUnVuVG9vbENhbGxPdXRwdXRJdGVtKGdldFRvb2xDYWxsT3V0cHV0SXRlbSh0b29sUnVuLnRvb2xDYWxsLCByZXNwb25zZSksIGFnZW50LCByZXNwb25zZSksXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiB0b29sUnVuLnRvb2wubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChhcHByb3ZhbCAhPT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgIC8vIHRoaXMgYXBwcm92YWwgcHJvY2VzcyBuZWVkcyB0byBiZSBkb25lIGluIHRoZSBuZXh0IHR1cm5cbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiAnZnVuY3Rpb25fYXBwcm92YWwnLFxuICAgICAgICAgICAgICAgICAgICB0b29sOiB0b29sUnVuLnRvb2wsXG4gICAgICAgICAgICAgICAgICAgIHJ1bkl0ZW06IG5ldyBSdW5Ub29sQXBwcm92YWxJdGVtKHRvb2xSdW4udG9vbENhbGwsIGFnZW50KSxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB3aXRoRnVuY3Rpb25TcGFuKGFzeW5jIChzcGFuKSA9PiB7XG4gICAgICAgICAgICBpZiAocnVubmVyLmNvbmZpZy50cmFjZUluY2x1ZGVTZW5zaXRpdmVEYXRhKSB7XG4gICAgICAgICAgICAgICAgc3Bhbi5zcGFuRGF0YS5pbnB1dCA9IHRvb2xSdW4udG9vbENhbGwuYXJndW1lbnRzO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBydW5uZXIuZW1pdCgnYWdlbnRfdG9vbF9zdGFydCcsIHN0YXRlLl9jb250ZXh0LCBhZ2VudCwgdG9vbFJ1bi50b29sLCB7XG4gICAgICAgICAgICAgICAgICAgIHRvb2xDYWxsOiB0b29sUnVuLnRvb2xDYWxsLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGFnZW50LmVtaXQoJ2FnZW50X3Rvb2xfc3RhcnQnLCBzdGF0ZS5fY29udGV4dCwgdG9vbFJ1bi50b29sLCB7XG4gICAgICAgICAgICAgICAgICAgIHRvb2xDYWxsOiB0b29sUnVuLnRvb2xDYWxsLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGNvbnN0IHRvb2xPdXRwdXQgPSBhd2FpdCB0b29sUnVuLnRvb2wuaW52b2tlKHN0YXRlLl9jb250ZXh0LCB0b29sUnVuLnRvb2xDYWxsLmFyZ3VtZW50cywgeyB0b29sQ2FsbDogdG9vbFJ1bi50b29sQ2FsbCB9KTtcbiAgICAgICAgICAgICAgICAvLyBVc2Ugc3RyaW5nIGRhdGEgZm9yIHRyYWNpbmcgYW5kIGV2ZW50IGVtaXR0ZXJcbiAgICAgICAgICAgICAgICBjb25zdCBzdHJpbmdSZXN1bHQgPSB0b1NtYXJ0U3RyaW5nKHRvb2xPdXRwdXQpO1xuICAgICAgICAgICAgICAgIHJ1bm5lci5lbWl0KCdhZ2VudF90b29sX2VuZCcsIHN0YXRlLl9jb250ZXh0LCBhZ2VudCwgdG9vbFJ1bi50b29sLCBzdHJpbmdSZXN1bHQsIHsgdG9vbENhbGw6IHRvb2xSdW4udG9vbENhbGwgfSk7XG4gICAgICAgICAgICAgICAgYWdlbnQuZW1pdCgnYWdlbnRfdG9vbF9lbmQnLCBzdGF0ZS5fY29udGV4dCwgdG9vbFJ1bi50b29sLCBzdHJpbmdSZXN1bHQsIHsgdG9vbENhbGw6IHRvb2xSdW4udG9vbENhbGwgfSk7XG4gICAgICAgICAgICAgICAgaWYgKHJ1bm5lci5jb25maWcudHJhY2VJbmNsdWRlU2Vuc2l0aXZlRGF0YSkge1xuICAgICAgICAgICAgICAgICAgICBzcGFuLnNwYW5EYXRhLm91dHB1dCA9IHN0cmluZ1Jlc3VsdDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3QgZnVuY3Rpb25SZXN1bHQgPSB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdmdW5jdGlvbl9vdXRwdXQnLFxuICAgICAgICAgICAgICAgICAgICB0b29sOiB0b29sUnVuLnRvb2wsXG4gICAgICAgICAgICAgICAgICAgIG91dHB1dDogdG9vbE91dHB1dCxcbiAgICAgICAgICAgICAgICAgICAgcnVuSXRlbTogbmV3IFJ1blRvb2xDYWxsT3V0cHV0SXRlbShnZXRUb29sQ2FsbE91dHB1dEl0ZW0odG9vbFJ1bi50b29sQ2FsbCwgdG9vbE91dHB1dCksIGFnZW50LCB0b29sT3V0cHV0KSxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGNvbnN0IG5lc3RlZFJ1blJlc3VsdCA9IGNvbnN1bWVBZ2VudFRvb2xSdW5SZXN1bHQodG9vbFJ1bi50b29sQ2FsbCk7XG4gICAgICAgICAgICAgICAgaWYgKG5lc3RlZFJ1blJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICBmdW5jdGlvblJlc3VsdC5hZ2VudFJ1blJlc3VsdCA9IG5lc3RlZFJ1blJlc3VsdDtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbmVzdGVkSW50ZXJydXB0aW9ucyA9IG5lc3RlZFJ1blJlc3VsdC5pbnRlcnJ1cHRpb25zO1xuICAgICAgICAgICAgICAgICAgICBpZiAobmVzdGVkSW50ZXJydXB0aW9ucy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvblJlc3VsdC5pbnRlcnJ1cHRpb25zID0gbmVzdGVkSW50ZXJydXB0aW9ucztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb25SZXN1bHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBzcGFuLnNldEVycm9yKHtcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ0Vycm9yIHJ1bm5pbmcgdG9vbCcsXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvb2xfbmFtZTogdG9vbFJ1bi50b29sLm5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJvcjogU3RyaW5nKGVycm9yKSxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAvLyBFbWl0IGFnZW50X3Rvb2xfZW5kIGV2ZW4gb24gZXJyb3IgdG8gbWFpbnRhaW4gY29uc2lzdGVudCBldmVudCBsaWZlY3ljbGVcbiAgICAgICAgICAgICAgICBjb25zdCBlcnJvclJlc3VsdCA9IFN0cmluZyhlcnJvcik7XG4gICAgICAgICAgICAgICAgcnVubmVyLmVtaXQoJ2FnZW50X3Rvb2xfZW5kJywgc3RhdGUuX2NvbnRleHQsIGFnZW50LCB0b29sUnVuLnRvb2wsIGVycm9yUmVzdWx0LCB7XG4gICAgICAgICAgICAgICAgICAgIHRvb2xDYWxsOiB0b29sUnVuLnRvb2xDYWxsLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGFnZW50LmVtaXQoJ2FnZW50X3Rvb2xfZW5kJywgc3RhdGUuX2NvbnRleHQsIHRvb2xSdW4udG9vbCwgZXJyb3JSZXN1bHQsIHtcbiAgICAgICAgICAgICAgICAgICAgdG9vbENhbGw6IHRvb2xSdW4udG9vbENhbGwsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICBuYW1lOiB0b29sUnVuLnRvb2wubmFtZSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgICBjb25zdCByZXN1bHRzID0gYXdhaXQgUHJvbWlzZS5hbGwodG9vbFJ1bnMubWFwKHJ1blNpbmdsZVRvb2wpKTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdHM7XG4gICAgfVxuICAgIGNhdGNoIChlKSB7XG4gICAgICAgIHRocm93IG5ldyBUb29sQ2FsbEVycm9yKGBGYWlsZWQgdG8gcnVuIGZ1bmN0aW9uIHRvb2xzOiAke2V9YCwgZSwgc3RhdGUpO1xuICAgIH1cbn1cbi8qKlxuICogQGludGVybmFsXG4gKi9cbi8vIEludGVybmFsIGhlbHBlcjogZGlzcGF0Y2ggYSBjb21wdXRlciBhY3Rpb24gYW5kIHJldHVybiBhIHNjcmVlbnNob3QgKHN5bmMvYXN5bmMpXG5hc3luYyBmdW5jdGlvbiBfcnVuQ29tcHV0ZXJBY3Rpb25BbmRTY3JlZW5zaG90KGNvbXB1dGVyLCB0b29sQ2FsbCkge1xuICAgIGNvbnN0IGFjdGlvbiA9IHRvb2xDYWxsLmFjdGlvbjtcbiAgICBsZXQgc2NyZWVuc2hvdDtcbiAgICAvLyBEaXNwYXRjaCBiYXNlZCBvbiBhY3Rpb24gdHlwZSBzdHJpbmcgKGFzc3VtZSBhY3Rpb24udHlwZSBleGlzdHMpXG4gICAgc3dpdGNoIChhY3Rpb24udHlwZSkge1xuICAgICAgICBjYXNlICdjbGljayc6XG4gICAgICAgICAgICBhd2FpdCBjb21wdXRlci5jbGljayhhY3Rpb24ueCwgYWN0aW9uLnksIGFjdGlvbi5idXR0b24pO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ2RvdWJsZV9jbGljayc6XG4gICAgICAgICAgICBhd2FpdCBjb21wdXRlci5kb3VibGVDbGljayhhY3Rpb24ueCwgYWN0aW9uLnkpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ2RyYWcnOlxuICAgICAgICAgICAgYXdhaXQgY29tcHV0ZXIuZHJhZyhhY3Rpb24ucGF0aC5tYXAoKHApID0+IFtwLngsIHAueV0pKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdrZXlwcmVzcyc6XG4gICAgICAgICAgICBhd2FpdCBjb21wdXRlci5rZXlwcmVzcyhhY3Rpb24ua2V5cyk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnbW92ZSc6XG4gICAgICAgICAgICBhd2FpdCBjb21wdXRlci5tb3ZlKGFjdGlvbi54LCBhY3Rpb24ueSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnc2NyZWVuc2hvdCc6XG4gICAgICAgICAgICBzY3JlZW5zaG90ID0gYXdhaXQgY29tcHV0ZXIuc2NyZWVuc2hvdCgpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ3Njcm9sbCc6XG4gICAgICAgICAgICBhd2FpdCBjb21wdXRlci5zY3JvbGwoYWN0aW9uLngsIGFjdGlvbi55LCBhY3Rpb24uc2Nyb2xsX3gsIGFjdGlvbi5zY3JvbGxfeSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAndHlwZSc6XG4gICAgICAgICAgICBhd2FpdCBjb21wdXRlci50eXBlKGFjdGlvbi50ZXh0KTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICd3YWl0JzpcbiAgICAgICAgICAgIGF3YWl0IGNvbXB1dGVyLndhaXQoKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgYWN0aW9uOyAvLyBlbnN1cmVzIHRoYXQgd2UgaGFuZGxlIGV2ZXJ5IGFjdGlvbiB3ZSBrbm93IG9mXG4gICAgICAgICAgICAvLyBVbmtub3duIGFjdGlvbiwganVzdCB0YWtlIHNjcmVlbnNob3RcbiAgICAgICAgICAgIGJyZWFrO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIHNjcmVlbnNob3QgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHJldHVybiBzY3JlZW5zaG90O1xuICAgIH1cbiAgICAvLyBBbHdheXMgcmV0dXJuIHNjcmVlbnNob3QgYXMgYmFzZTY0IHN0cmluZ1xuICAgIGlmICh0eXBlb2YgY29tcHV0ZXIuc2NyZWVuc2hvdCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICBzY3JlZW5zaG90ID0gYXdhaXQgY29tcHV0ZXIuc2NyZWVuc2hvdCgpO1xuICAgICAgICBpZiAodHlwZW9mIHNjcmVlbnNob3QgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICByZXR1cm4gc2NyZWVuc2hvdDtcbiAgICAgICAgfVxuICAgIH1cbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0NvbXB1dGVyIGRvZXMgbm90IGltcGxlbWVudCBzY3JlZW5zaG90KCknKTtcbn1cbmZ1bmN0aW9uIHRvRXJyb3JNZXNzYWdlKGVycm9yKSB7XG4gICAgaWYgKGVycm9yIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgICAgcmV0dXJuIGVycm9yLm1lc3NhZ2UgfHwgZXJyb3IudG9TdHJpbmcoKTtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KGVycm9yKTtcbiAgICB9XG4gICAgY2F0Y2gge1xuICAgICAgICByZXR1cm4gU3RyaW5nKGVycm9yKTtcbiAgICB9XG59XG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZXhlY3V0ZVNoZWxsQWN0aW9ucyhhZ2VudCwgYWN0aW9ucywgcnVubmVyLCBydW5Db250ZXh0LCBjdXN0b21Mb2dnZXIgPSB1bmRlZmluZWQpIHtcbiAgICBjb25zdCBfbG9nZ2VyID0gY3VzdG9tTG9nZ2VyID8/IGxvZ2dlcjtcbiAgICBjb25zdCByZXN1bHRzID0gW107XG4gICAgZm9yIChjb25zdCBhY3Rpb24gb2YgYWN0aW9ucykge1xuICAgICAgICBjb25zdCBzaGVsbFRvb2wgPSBhY3Rpb24uc2hlbGw7XG4gICAgICAgIGNvbnN0IHRvb2xDYWxsID0gYWN0aW9uLnRvb2xDYWxsO1xuICAgICAgICBjb25zdCBhcHByb3ZhbEl0ZW0gPSBuZXcgUnVuVG9vbEFwcHJvdmFsSXRlbSh0b29sQ2FsbCwgYWdlbnQsIHNoZWxsVG9vbC5uYW1lKTtcbiAgICAgICAgY29uc3QgcmVxdWlyZXNBcHByb3ZhbCA9IGF3YWl0IHNoZWxsVG9vbC5uZWVkc0FwcHJvdmFsKHJ1bkNvbnRleHQsIHRvb2xDYWxsLmFjdGlvbiwgdG9vbENhbGwuY2FsbElkKTtcbiAgICAgICAgaWYgKHJlcXVpcmVzQXBwcm92YWwpIHtcbiAgICAgICAgICAgIGlmIChzaGVsbFRvb2wub25BcHByb3ZhbCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGRlY2lzaW9uID0gYXdhaXQgc2hlbGxUb29sLm9uQXBwcm92YWwocnVuQ29udGV4dCwgYXBwcm92YWxJdGVtKTtcbiAgICAgICAgICAgICAgICBpZiAoZGVjaXNpb24uYXBwcm92ZSA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgICBydW5Db250ZXh0LmFwcHJvdmVUb29sKGFwcHJvdmFsSXRlbSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGRlY2lzaW9uLmFwcHJvdmUgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJ1bkNvbnRleHQucmVqZWN0VG9vbChhcHByb3ZhbEl0ZW0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGFwcHJvdmFsID0gcnVuQ29udGV4dC5pc1Rvb2xBcHByb3ZlZCh7XG4gICAgICAgICAgICAgICAgdG9vbE5hbWU6IHNoZWxsVG9vbC5uYW1lLFxuICAgICAgICAgICAgICAgIGNhbGxJZDogdG9vbENhbGwuY2FsbElkLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAoYXBwcm92YWwgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSAnVG9vbCBleGVjdXRpb24gd2FzIG5vdCBhcHByb3ZlZC4nO1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlamVjdGlvbk91dHB1dCA9IHtcbiAgICAgICAgICAgICAgICAgICAgc3Rkb3V0OiAnJyxcbiAgICAgICAgICAgICAgICAgICAgc3RkZXJyOiByZXNwb25zZSxcbiAgICAgICAgICAgICAgICAgICAgb3V0Y29tZTogeyB0eXBlOiAnZXhpdCcsIGV4aXRDb2RlOiBudWxsIH0sXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICByZXN1bHRzLnB1c2gobmV3IFJ1blRvb2xDYWxsT3V0cHV0SXRlbSh7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdzaGVsbF9jYWxsX291dHB1dCcsXG4gICAgICAgICAgICAgICAgICAgIGNhbGxJZDogdG9vbENhbGwuY2FsbElkLFxuICAgICAgICAgICAgICAgICAgICBvdXRwdXQ6IFtyZWplY3Rpb25PdXRwdXRdLFxuICAgICAgICAgICAgICAgIH0sIGFnZW50LCByZXNwb25zZSkpO1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGFwcHJvdmFsICE9PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0cy5wdXNoKGFwcHJvdmFsSXRlbSk7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcnVubmVyLmVtaXQoJ2FnZW50X3Rvb2xfc3RhcnQnLCBydW5Db250ZXh0LCBhZ2VudCwgc2hlbGxUb29sLCB7XG4gICAgICAgICAgICB0b29sQ2FsbCxcbiAgICAgICAgfSk7XG4gICAgICAgIGlmICh0eXBlb2YgYWdlbnQuZW1pdCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgYWdlbnQuZW1pdCgnYWdlbnRfdG9vbF9zdGFydCcsIHJ1bkNvbnRleHQsIHNoZWxsVG9vbCwgeyB0b29sQ2FsbCB9KTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgc2hlbGxPdXRwdXRzO1xuICAgICAgICBjb25zdCBwcm92aWRlck1ldGEgPSB7fTtcbiAgICAgICAgbGV0IG1heE91dHB1dExlbmd0aDtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHNoZWxsUmVzdWx0ID0gYXdhaXQgc2hlbGxUb29sLnNoZWxsLnJ1bih0b29sQ2FsbC5hY3Rpb24pO1xuICAgICAgICAgICAgc2hlbGxPdXRwdXRzID0gc2hlbGxSZXN1bHQub3V0cHV0ID8/IFtdO1xuICAgICAgICAgICAgaWYgKHNoZWxsUmVzdWx0LnByb3ZpZGVyRGF0YSkge1xuICAgICAgICAgICAgICAgIE9iamVjdC5hc3NpZ24ocHJvdmlkZXJNZXRhLCBzaGVsbFJlc3VsdC5wcm92aWRlckRhdGEpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHR5cGVvZiBzaGVsbFJlc3VsdC5tYXhPdXRwdXRMZW5ndGggPT09ICdudW1iZXInKSB7XG4gICAgICAgICAgICAgICAgbWF4T3V0cHV0TGVuZ3RoID0gc2hlbGxSZXN1bHQubWF4T3V0cHV0TGVuZ3RoO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgIGNvbnN0IGVycm9yVGV4dCA9IHRvRXJyb3JNZXNzYWdlKGVycik7XG4gICAgICAgICAgICBzaGVsbE91dHB1dHMgPSBbXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBzdGRvdXQ6ICcnLFxuICAgICAgICAgICAgICAgICAgICBzdGRlcnI6IGVycm9yVGV4dCxcbiAgICAgICAgICAgICAgICAgICAgb3V0Y29tZTogeyB0eXBlOiAnZXhpdCcsIGV4aXRDb2RlOiBudWxsIH0sXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF07XG4gICAgICAgICAgICBfbG9nZ2VyLmVycm9yKCdGYWlsZWQgdG8gZXhlY3V0ZSBzaGVsbCBhY3Rpb246JywgZXJyKTtcbiAgICAgICAgfVxuICAgICAgICBzaGVsbE91dHB1dHMgPSBzaGVsbE91dHB1dHMgPz8gW107XG4gICAgICAgIHJ1bm5lci5lbWl0KCdhZ2VudF90b29sX2VuZCcsIHJ1bkNvbnRleHQsIGFnZW50LCBzaGVsbFRvb2wsIEpTT04uc3RyaW5naWZ5KHNoZWxsT3V0cHV0cyksIHtcbiAgICAgICAgICAgIHRvb2xDYWxsLFxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKHR5cGVvZiBhZ2VudC5lbWl0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBhZ2VudC5lbWl0KCdhZ2VudF90b29sX2VuZCcsIHJ1bkNvbnRleHQsIHNoZWxsVG9vbCwgSlNPTi5zdHJpbmdpZnkoc2hlbGxPdXRwdXRzKSwge1xuICAgICAgICAgICAgICAgIHRvb2xDYWxsLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcmF3SXRlbSA9IHtcbiAgICAgICAgICAgIHR5cGU6ICdzaGVsbF9jYWxsX291dHB1dCcsXG4gICAgICAgICAgICBjYWxsSWQ6IHRvb2xDYWxsLmNhbGxJZCxcbiAgICAgICAgICAgIG91dHB1dDogc2hlbGxPdXRwdXRzID8/IFtdLFxuICAgICAgICB9O1xuICAgICAgICBpZiAodHlwZW9mIG1heE91dHB1dExlbmd0aCA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgICAgIHJhd0l0ZW0ubWF4T3V0cHV0TGVuZ3RoID0gbWF4T3V0cHV0TGVuZ3RoO1xuICAgICAgICB9XG4gICAgICAgIGlmIChPYmplY3Qua2V5cyhwcm92aWRlck1ldGEpLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHJhd0l0ZW0ucHJvdmlkZXJEYXRhID0gcHJvdmlkZXJNZXRhO1xuICAgICAgICB9XG4gICAgICAgIHJlc3VsdHMucHVzaChuZXcgUnVuVG9vbENhbGxPdXRwdXRJdGVtKHJhd0l0ZW0sIGFnZW50LCByYXdJdGVtLm91dHB1dCkpO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0cztcbn1cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBleGVjdXRlQXBwbHlQYXRjaE9wZXJhdGlvbnMoYWdlbnQsIGFjdGlvbnMsIHJ1bm5lciwgcnVuQ29udGV4dCwgY3VzdG9tTG9nZ2VyID0gdW5kZWZpbmVkKSB7XG4gICAgY29uc3QgX2xvZ2dlciA9IGN1c3RvbUxvZ2dlciA/PyBsb2dnZXI7XG4gICAgY29uc3QgcmVzdWx0cyA9IFtdO1xuICAgIGZvciAoY29uc3QgYWN0aW9uIG9mIGFjdGlvbnMpIHtcbiAgICAgICAgY29uc3QgYXBwbHlQYXRjaFRvb2wgPSBhY3Rpb24uYXBwbHlQYXRjaDtcbiAgICAgICAgY29uc3QgdG9vbENhbGwgPSBhY3Rpb24udG9vbENhbGw7XG4gICAgICAgIGNvbnN0IGFwcHJvdmFsSXRlbSA9IG5ldyBSdW5Ub29sQXBwcm92YWxJdGVtKHRvb2xDYWxsLCBhZ2VudCwgYXBwbHlQYXRjaFRvb2wubmFtZSk7XG4gICAgICAgIGNvbnN0IHJlcXVpcmVzQXBwcm92YWwgPSBhd2FpdCBhcHBseVBhdGNoVG9vbC5uZWVkc0FwcHJvdmFsKHJ1bkNvbnRleHQsIHRvb2xDYWxsLm9wZXJhdGlvbiwgdG9vbENhbGwuY2FsbElkKTtcbiAgICAgICAgaWYgKHJlcXVpcmVzQXBwcm92YWwpIHtcbiAgICAgICAgICAgIGlmIChhcHBseVBhdGNoVG9vbC5vbkFwcHJvdmFsKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZGVjaXNpb24gPSBhd2FpdCBhcHBseVBhdGNoVG9vbC5vbkFwcHJvdmFsKHJ1bkNvbnRleHQsIGFwcHJvdmFsSXRlbSk7XG4gICAgICAgICAgICAgICAgaWYgKGRlY2lzaW9uLmFwcHJvdmUgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgcnVuQ29udGV4dC5hcHByb3ZlVG9vbChhcHByb3ZhbEl0ZW0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChkZWNpc2lvbi5hcHByb3ZlID09PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgICAgICBydW5Db250ZXh0LnJlamVjdFRvb2woYXBwcm92YWxJdGVtKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBhcHByb3ZhbCA9IHJ1bkNvbnRleHQuaXNUb29sQXBwcm92ZWQoe1xuICAgICAgICAgICAgICAgIHRvb2xOYW1lOiBhcHBseVBhdGNoVG9vbC5uYW1lLFxuICAgICAgICAgICAgICAgIGNhbGxJZDogdG9vbENhbGwuY2FsbElkLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAoYXBwcm92YWwgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSAnVG9vbCBleGVjdXRpb24gd2FzIG5vdCBhcHByb3ZlZC4nO1xuICAgICAgICAgICAgICAgIHJlc3VsdHMucHVzaChuZXcgUnVuVG9vbENhbGxPdXRwdXRJdGVtKHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2FwcGx5X3BhdGNoX2NhbGxfb3V0cHV0JyxcbiAgICAgICAgICAgICAgICAgICAgY2FsbElkOiB0b29sQ2FsbC5jYWxsSWQsXG4gICAgICAgICAgICAgICAgICAgIHN0YXR1czogJ2ZhaWxlZCcsXG4gICAgICAgICAgICAgICAgICAgIG91dHB1dDogcmVzcG9uc2UsXG4gICAgICAgICAgICAgICAgfSwgYWdlbnQsIHJlc3BvbnNlKSk7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoYXBwcm92YWwgIT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICByZXN1bHRzLnB1c2goYXBwcm92YWxJdGVtKTtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBydW5uZXIuZW1pdCgnYWdlbnRfdG9vbF9zdGFydCcsIHJ1bkNvbnRleHQsIGFnZW50LCBhcHBseVBhdGNoVG9vbCwge1xuICAgICAgICAgICAgdG9vbENhbGwsXG4gICAgICAgIH0pO1xuICAgICAgICBpZiAodHlwZW9mIGFnZW50LmVtaXQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIGFnZW50LmVtaXQoJ2FnZW50X3Rvb2xfc3RhcnQnLCBydW5Db250ZXh0LCBhcHBseVBhdGNoVG9vbCwge1xuICAgICAgICAgICAgICAgIHRvb2xDYWxsLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IHN0YXR1cyA9ICdjb21wbGV0ZWQnO1xuICAgICAgICBsZXQgb3V0cHV0ID0gJyc7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBsZXQgcmVzdWx0O1xuICAgICAgICAgICAgc3dpdGNoICh0b29sQ2FsbC5vcGVyYXRpb24udHlwZSkge1xuICAgICAgICAgICAgICAgIGNhc2UgJ2NyZWF0ZV9maWxlJzpcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gYXdhaXQgYXBwbHlQYXRjaFRvb2wuZWRpdG9yLmNyZWF0ZUZpbGUodG9vbENhbGwub3BlcmF0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAndXBkYXRlX2ZpbGUnOlxuICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBhd2FpdCBhcHBseVBhdGNoVG9vbC5lZGl0b3IudXBkYXRlRmlsZSh0b29sQ2FsbC5vcGVyYXRpb24pO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdkZWxldGVfZmlsZSc6XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IGF3YWl0IGFwcGx5UGF0Y2hUb29sLmVkaXRvci5kZWxldGVGaWxlKHRvb2xDYWxsLm9wZXJhdGlvbik7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignVW5zdXBwb3J0ZWQgYXBwbHlfcGF0Y2ggb3BlcmF0aW9uJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocmVzdWx0ICYmIHR5cGVvZiByZXN1bHQuc3RhdHVzID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgIHN0YXR1cyA9IHJlc3VsdC5zdGF0dXM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocmVzdWx0ICYmIHR5cGVvZiByZXN1bHQub3V0cHV0ID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgIG91dHB1dCA9IHJlc3VsdC5vdXRwdXQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgc3RhdHVzID0gJ2ZhaWxlZCc7XG4gICAgICAgICAgICBvdXRwdXQgPSB0b0Vycm9yTWVzc2FnZShlcnIpO1xuICAgICAgICAgICAgX2xvZ2dlci5lcnJvcignRmFpbGVkIHRvIGV4ZWN1dGUgYXBwbHlfcGF0Y2ggb3BlcmF0aW9uOicsIGVycik7XG4gICAgICAgIH1cbiAgICAgICAgcnVubmVyLmVtaXQoJ2FnZW50X3Rvb2xfZW5kJywgcnVuQ29udGV4dCwgYWdlbnQsIGFwcGx5UGF0Y2hUb29sLCBvdXRwdXQsIHtcbiAgICAgICAgICAgIHRvb2xDYWxsLFxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKHR5cGVvZiBhZ2VudC5lbWl0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBhZ2VudC5lbWl0KCdhZ2VudF90b29sX2VuZCcsIHJ1bkNvbnRleHQsIGFwcGx5UGF0Y2hUb29sLCBvdXRwdXQsIHtcbiAgICAgICAgICAgICAgICB0b29sQ2FsbCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHJhd0l0ZW0gPSB7XG4gICAgICAgICAgICB0eXBlOiAnYXBwbHlfcGF0Y2hfY2FsbF9vdXRwdXQnLFxuICAgICAgICAgICAgY2FsbElkOiB0b29sQ2FsbC5jYWxsSWQsXG4gICAgICAgICAgICBzdGF0dXMsXG4gICAgICAgIH07XG4gICAgICAgIGlmIChvdXRwdXQpIHtcbiAgICAgICAgICAgIHJhd0l0ZW0ub3V0cHV0ID0gb3V0cHV0O1xuICAgICAgICB9XG4gICAgICAgIHJlc3VsdHMucHVzaChuZXcgUnVuVG9vbENhbGxPdXRwdXRJdGVtKHJhd0l0ZW0sIGFnZW50LCBvdXRwdXQpKTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdHM7XG59XG4vKipcbiAqIEBpbnRlcm5hbFxuICogRXhlY3V0ZXMgYW55IGNvbXB1dGVyLXVzZSBhY3Rpb25zIGVtaXR0ZWQgYnkgdGhlIG1vZGVsIGFuZCByZXR1cm5zIHRoZSByZXN1bHRpbmcgaXRlbXMgc28gdGhlXG4gKiBydW4gaGlzdG9yeSByZWZsZWN0cyB0aGUgY29tcHV0ZXIgc2Vzc2lvbi5cbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGV4ZWN1dGVDb21wdXRlckFjdGlvbnMoYWdlbnQsIGFjdGlvbnMsIHJ1bm5lciwgcnVuQ29udGV4dCwgY3VzdG9tTG9nZ2VyID0gdW5kZWZpbmVkKSB7XG4gICAgY29uc3QgX2xvZ2dlciA9IGN1c3RvbUxvZ2dlciA/PyBsb2dnZXI7XG4gICAgY29uc3QgcmVzdWx0cyA9IFtdO1xuICAgIGZvciAoY29uc3QgYWN0aW9uIG9mIGFjdGlvbnMpIHtcbiAgICAgICAgY29uc3QgdG9vbENhbGwgPSBhY3Rpb24udG9vbENhbGw7XG4gICAgICAgIC8vIEhvb2tzOiBvbl90b29sX3N0YXJ0IChnbG9iYWwgKyBhZ2VudClcbiAgICAgICAgcnVubmVyLmVtaXQoJ2FnZW50X3Rvb2xfc3RhcnQnLCBydW5Db250ZXh0LCBhZ2VudCwgYWN0aW9uLmNvbXB1dGVyLCB7XG4gICAgICAgICAgICB0b29sQ2FsbCxcbiAgICAgICAgfSk7XG4gICAgICAgIGlmICh0eXBlb2YgYWdlbnQuZW1pdCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgYWdlbnQuZW1pdCgnYWdlbnRfdG9vbF9zdGFydCcsIHJ1bkNvbnRleHQsIGFjdGlvbi5jb21wdXRlciwgeyB0b29sQ2FsbCB9KTtcbiAgICAgICAgfVxuICAgICAgICAvLyBSdW4gdGhlIGFjdGlvbiBhbmQgZ2V0IHNjcmVlbnNob3RcbiAgICAgICAgbGV0IG91dHB1dDtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IGNvbXB1dGVyID0gYXdhaXQgcmVzb2x2ZUNvbXB1dGVyKHtcbiAgICAgICAgICAgICAgICB0b29sOiBhY3Rpb24uY29tcHV0ZXIsXG4gICAgICAgICAgICAgICAgcnVuQ29udGV4dCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgb3V0cHV0ID0gYXdhaXQgX3J1bkNvbXB1dGVyQWN0aW9uQW5kU2NyZWVuc2hvdChjb21wdXRlciwgdG9vbENhbGwpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgIF9sb2dnZXIuZXJyb3IoJ0ZhaWxlZCB0byBleGVjdXRlIGNvbXB1dGVyIGFjdGlvbjonLCBlcnIpO1xuICAgICAgICAgICAgb3V0cHV0ID0gJyc7XG4gICAgICAgIH1cbiAgICAgICAgLy8gSG9va3M6IG9uX3Rvb2xfZW5kIChnbG9iYWwgKyBhZ2VudClcbiAgICAgICAgcnVubmVyLmVtaXQoJ2FnZW50X3Rvb2xfZW5kJywgcnVuQ29udGV4dCwgYWdlbnQsIGFjdGlvbi5jb21wdXRlciwgb3V0cHV0LCB7XG4gICAgICAgICAgICB0b29sQ2FsbCxcbiAgICAgICAgfSk7XG4gICAgICAgIGlmICh0eXBlb2YgYWdlbnQuZW1pdCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgYWdlbnQuZW1pdCgnYWdlbnRfdG9vbF9lbmQnLCBydW5Db250ZXh0LCBhY3Rpb24uY29tcHV0ZXIsIG91dHB1dCwge1xuICAgICAgICAgICAgICAgIHRvb2xDYWxsLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gUmV0dXJuIHRoZSBzY3JlZW5zaG90IGFzIGEgZGF0YSBVUkwgd2hlbiBhdmFpbGFibGU7IGZhbGwgYmFjayB0byBhbiBlbXB0eSBzdHJpbmcgb24gZmFpbHVyZXMuXG4gICAgICAgIGNvbnN0IGltYWdlVXJsID0gb3V0cHV0ID8gYGRhdGE6aW1hZ2UvcG5nO2Jhc2U2NCwke291dHB1dH1gIDogJyc7XG4gICAgICAgIGNvbnN0IHJhd0l0ZW0gPSB7XG4gICAgICAgICAgICB0eXBlOiAnY29tcHV0ZXJfY2FsbF9yZXN1bHQnLFxuICAgICAgICAgICAgY2FsbElkOiB0b29sQ2FsbC5jYWxsSWQsXG4gICAgICAgICAgICBvdXRwdXQ6IHsgdHlwZTogJ2NvbXB1dGVyX3NjcmVlbnNob3QnLCBkYXRhOiBpbWFnZVVybCB9LFxuICAgICAgICB9O1xuICAgICAgICByZXN1bHRzLnB1c2gobmV3IFJ1blRvb2xDYWxsT3V0cHV0SXRlbShyYXdJdGVtLCBhZ2VudCwgaW1hZ2VVcmwpKTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdHM7XG59XG4vKipcbiAqIEBpbnRlcm5hbFxuICogRHJpdmVzIGhhbmRvZmYgY2FsbHMgYnkgaW52b2tpbmcgdGhlIGRvd25zdHJlYW0gYWdlbnQgYW5kIGNhcHR1cmluZyBhbnkgZ2VuZXJhdGVkIGl0ZW1zIHNvXG4gKiB0aGUgY3VycmVudCBhZ2VudCBjYW4gY29udGludWUgd2l0aCB0aGUgbmV3IGNvbnRleHQuXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBleGVjdXRlSGFuZG9mZkNhbGxzKGFnZW50LCBvcmlnaW5hbElucHV0LCBwcmVTdGVwSXRlbXMsIG5ld1N0ZXBJdGVtcywgbmV3UmVzcG9uc2UsIHJ1bkhhbmRvZmZzLCBydW5uZXIsIHJ1bkNvbnRleHQpIHtcbiAgICBuZXdTdGVwSXRlbXMgPSBbLi4ubmV3U3RlcEl0ZW1zXTtcbiAgICBpZiAocnVuSGFuZG9mZnMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIGxvZ2dlci53YXJuKCdJbmNvcnJlY3RseSBjYWxsZWQgZXhlY3V0ZUhhbmRvZmZDYWxscyB3aXRoIG5vIGhhbmRvZmZzLiBUaGlzIHNob3VsZCBub3QgaGFwcGVuLiBNb3Zpbmcgb24uJyk7XG4gICAgICAgIHJldHVybiBuZXcgU2luZ2xlU3RlcFJlc3VsdChvcmlnaW5hbElucHV0LCBuZXdSZXNwb25zZSwgcHJlU3RlcEl0ZW1zLCBuZXdTdGVwSXRlbXMsIHsgdHlwZTogJ25leHRfc3RlcF9ydW5fYWdhaW4nIH0pO1xuICAgIH1cbiAgICBpZiAocnVuSGFuZG9mZnMubGVuZ3RoID4gMSkge1xuICAgICAgICAvLyBtdWx0aXBsZSBoYW5kb2Zmcy4gSWdub3JpbmcgYWxsIGJ1dCB0aGUgZmlyc3Qgb25lIGJ5IGFkZGluZyByZWplY3QgcmVzcG9uc2VzIGZvciB0aG9zZVxuICAgICAgICBjb25zdCBvdXRwdXRNZXNzYWdlID0gJ011bHRpcGxlIGhhbmRvZmZzIGRldGVjdGVkLCBpZ25vcmluZyB0aGlzIG9uZS4nO1xuICAgICAgICBmb3IgKGxldCBpID0gMTsgaSA8IHJ1bkhhbmRvZmZzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBuZXdTdGVwSXRlbXMucHVzaChuZXcgUnVuVG9vbENhbGxPdXRwdXRJdGVtKGdldFRvb2xDYWxsT3V0cHV0SXRlbShydW5IYW5kb2Zmc1tpXS50b29sQ2FsbCwgb3V0cHV0TWVzc2FnZSksIGFnZW50LCBvdXRwdXRNZXNzYWdlKSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY29uc3QgYWN0dWFsSGFuZG9mZiA9IHJ1bkhhbmRvZmZzWzBdO1xuICAgIHJldHVybiB3aXRoSGFuZG9mZlNwYW4oYXN5bmMgKGhhbmRvZmZTcGFuKSA9PiB7XG4gICAgICAgIGNvbnN0IGhhbmRvZmYgPSBhY3R1YWxIYW5kb2ZmLmhhbmRvZmY7XG4gICAgICAgIGNvbnN0IG5ld0FnZW50ID0gYXdhaXQgaGFuZG9mZi5vbkludm9rZUhhbmRvZmYocnVuQ29udGV4dCwgYWN0dWFsSGFuZG9mZi50b29sQ2FsbC5hcmd1bWVudHMpO1xuICAgICAgICBoYW5kb2ZmU3Bhbi5zcGFuRGF0YS50b19hZ2VudCA9IG5ld0FnZW50Lm5hbWU7XG4gICAgICAgIGlmIChydW5IYW5kb2Zmcy5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICBjb25zdCByZXF1ZXN0ZWRBZ2VudHMgPSBydW5IYW5kb2Zmcy5tYXAoKGgpID0+IGguaGFuZG9mZi5hZ2VudE5hbWUpO1xuICAgICAgICAgICAgaGFuZG9mZlNwYW4uc2V0RXJyb3Ioe1xuICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdNdWx0aXBsZSBoYW5kb2ZmcyByZXF1ZXN0ZWQnLFxuICAgICAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgcmVxdWVzdGVkX2FnZW50czogcmVxdWVzdGVkQWdlbnRzLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBuZXdTdGVwSXRlbXMucHVzaChuZXcgUnVuSGFuZG9mZk91dHB1dEl0ZW0oZ2V0VG9vbENhbGxPdXRwdXRJdGVtKGFjdHVhbEhhbmRvZmYudG9vbENhbGwsIGdldFRyYW5zZmVyTWVzc2FnZShuZXdBZ2VudCkpLCBhZ2VudCwgbmV3QWdlbnQpKTtcbiAgICAgICAgcnVubmVyLmVtaXQoJ2FnZW50X2hhbmRvZmYnLCBydW5Db250ZXh0LCBhZ2VudCwgbmV3QWdlbnQpO1xuICAgICAgICBhZ2VudC5lbWl0KCdhZ2VudF9oYW5kb2ZmJywgcnVuQ29udGV4dCwgbmV3QWdlbnQpO1xuICAgICAgICBjb25zdCBpbnB1dEZpbHRlciA9IGhhbmRvZmYuaW5wdXRGaWx0ZXIgPz8gcnVubmVyLmNvbmZpZy5oYW5kb2ZmSW5wdXRGaWx0ZXI7XG4gICAgICAgIGlmIChpbnB1dEZpbHRlcikge1xuICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKCdGaWx0ZXJpbmcgaW5wdXRzIGZvciBoYW5kb2ZmJyk7XG4gICAgICAgICAgICBpZiAodHlwZW9mIGlucHV0RmlsdGVyICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgaGFuZG9mZlNwYW4uc2V0RXJyb3Ioe1xuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnSW52YWxpZCBpbnB1dCBmaWx0ZXInLFxuICAgICAgICAgICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZXRhaWxzOiAnbm90IGNhbGxhYmxlJyxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGhhbmRvZmZJbnB1dERhdGEgPSB7XG4gICAgICAgICAgICAgICAgaW5wdXRIaXN0b3J5OiBBcnJheS5pc0FycmF5KG9yaWdpbmFsSW5wdXQpXG4gICAgICAgICAgICAgICAgICAgID8gWy4uLm9yaWdpbmFsSW5wdXRdXG4gICAgICAgICAgICAgICAgICAgIDogb3JpZ2luYWxJbnB1dCxcbiAgICAgICAgICAgICAgICBwcmVIYW5kb2ZmSXRlbXM6IFsuLi5wcmVTdGVwSXRlbXNdLFxuICAgICAgICAgICAgICAgIG5ld0l0ZW1zOiBbLi4ubmV3U3RlcEl0ZW1zXSxcbiAgICAgICAgICAgICAgICBydW5Db250ZXh0LFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNvbnN0IGZpbHRlcmVkID0gaW5wdXRGaWx0ZXIoaGFuZG9mZklucHV0RGF0YSk7XG4gICAgICAgICAgICBvcmlnaW5hbElucHV0ID0gZmlsdGVyZWQuaW5wdXRIaXN0b3J5O1xuICAgICAgICAgICAgcHJlU3RlcEl0ZW1zID0gZmlsdGVyZWQucHJlSGFuZG9mZkl0ZW1zO1xuICAgICAgICAgICAgbmV3U3RlcEl0ZW1zID0gZmlsdGVyZWQubmV3SXRlbXM7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBTaW5nbGVTdGVwUmVzdWx0KG9yaWdpbmFsSW5wdXQsIG5ld1Jlc3BvbnNlLCBwcmVTdGVwSXRlbXMsIG5ld1N0ZXBJdGVtcywgeyB0eXBlOiAnbmV4dF9zdGVwX2hhbmRvZmYnLCBuZXdBZ2VudCB9KTtcbiAgICB9LCB7XG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgIGZyb21fYWdlbnQ6IGFnZW50Lm5hbWUsXG4gICAgICAgIH0sXG4gICAgfSk7XG59XG5jb25zdCBOT1RfRklOQUxfT1VUUFVUID0ge1xuICAgIGlzRmluYWxPdXRwdXQ6IGZhbHNlLFxuICAgIGlzSW50ZXJydXB0ZWQ6IHVuZGVmaW5lZCxcbn07XG4vKipcbiAqIEBpbnRlcm5hbFxuICogRGV0ZXJtaW5lcyB3aGV0aGVyIHRvb2wgZXhlY3V0aW9ucyBwcm9kdWNlZCBhIGZpbmFsIGFnZW50IG91dHB1dCwgdHJpZ2dlcmVkIGFuIGludGVycnVwdGlvbixcbiAqIG9yIHdoZXRoZXIgdGhlIGFnZW50IGxvb3Agc2hvdWxkIGNvbnRpbnVlIGNvbGxlY3RpbmcgbW9yZSByZXNwb25zZXMuXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjaGVja0ZvckZpbmFsT3V0cHV0RnJvbVRvb2xzKGFnZW50LCB0b29sUmVzdWx0cywgc3RhdGUpIHtcbiAgICBpZiAodG9vbFJlc3VsdHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHJldHVybiBOT1RfRklOQUxfT1VUUFVUO1xuICAgIH1cbiAgICBjb25zdCBpbnRlcnJ1cHRpb25zID0gW107XG4gICAgZm9yIChjb25zdCByZXN1bHQgb2YgdG9vbFJlc3VsdHMpIHtcbiAgICAgICAgaWYgKHJlc3VsdC5ydW5JdGVtIGluc3RhbmNlb2YgUnVuVG9vbEFwcHJvdmFsSXRlbSkge1xuICAgICAgICAgICAgaW50ZXJydXB0aW9ucy5wdXNoKHJlc3VsdC5ydW5JdGVtKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocmVzdWx0LnR5cGUgPT09ICdmdW5jdGlvbl9vdXRwdXQnKSB7XG4gICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShyZXN1bHQuaW50ZXJydXB0aW9ucykpIHtcbiAgICAgICAgICAgICAgICBpbnRlcnJ1cHRpb25zLnB1c2goLi4ucmVzdWx0LmludGVycnVwdGlvbnMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAocmVzdWx0LmFnZW50UnVuUmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbmVzdGVkSW50ZXJydXB0aW9ucyA9IHJlc3VsdC5hZ2VudFJ1blJlc3VsdC5pbnRlcnJ1cHRpb25zO1xuICAgICAgICAgICAgICAgIGlmIChuZXN0ZWRJbnRlcnJ1cHRpb25zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgaW50ZXJydXB0aW9ucy5wdXNoKC4uLm5lc3RlZEludGVycnVwdGlvbnMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAoaW50ZXJydXB0aW9ucy5sZW5ndGggPiAwKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBpc0ZpbmFsT3V0cHV0OiBmYWxzZSxcbiAgICAgICAgICAgIGlzSW50ZXJydXB0ZWQ6IHRydWUsXG4gICAgICAgICAgICBpbnRlcnJ1cHRpb25zLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBpZiAoYWdlbnQudG9vbFVzZUJlaGF2aW9yID09PSAncnVuX2xsbV9hZ2FpbicpIHtcbiAgICAgICAgcmV0dXJuIE5PVF9GSU5BTF9PVVRQVVQ7XG4gICAgfVxuICAgIGNvbnN0IGZpcnN0VG9vbFJlc3VsdCA9IHRvb2xSZXN1bHRzWzBdO1xuICAgIGlmIChhZ2VudC50b29sVXNlQmVoYXZpb3IgPT09ICdzdG9wX29uX2ZpcnN0X3Rvb2wnKSB7XG4gICAgICAgIGlmIChmaXJzdFRvb2xSZXN1bHQ/LnR5cGUgPT09ICdmdW5jdGlvbl9vdXRwdXQnKSB7XG4gICAgICAgICAgICBjb25zdCBzdHJpbmdPdXRwdXQgPSB0b1NtYXJ0U3RyaW5nKGZpcnN0VG9vbFJlc3VsdC5vdXRwdXQpO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBpc0ZpbmFsT3V0cHV0OiB0cnVlLFxuICAgICAgICAgICAgICAgIGlzSW50ZXJydXB0ZWQ6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICBmaW5hbE91dHB1dDogc3RyaW5nT3V0cHV0LFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gTk9UX0ZJTkFMX09VVFBVVDtcbiAgICB9XG4gICAgY29uc3QgdG9vbFVzZUJlaGF2aW9yID0gYWdlbnQudG9vbFVzZUJlaGF2aW9yO1xuICAgIGlmICh0eXBlb2YgdG9vbFVzZUJlaGF2aW9yID09PSAnb2JqZWN0Jykge1xuICAgICAgICBjb25zdCBzdG9wcGluZ1Rvb2wgPSB0b29sUmVzdWx0cy5maW5kKChyKSA9PiB0b29sVXNlQmVoYXZpb3Iuc3RvcEF0VG9vbE5hbWVzLmluY2x1ZGVzKHIudG9vbC5uYW1lKSk7XG4gICAgICAgIGlmIChzdG9wcGluZ1Rvb2w/LnR5cGUgPT09ICdmdW5jdGlvbl9vdXRwdXQnKSB7XG4gICAgICAgICAgICBjb25zdCBzdHJpbmdPdXRwdXQgPSB0b1NtYXJ0U3RyaW5nKHN0b3BwaW5nVG9vbC5vdXRwdXQpO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBpc0ZpbmFsT3V0cHV0OiB0cnVlLFxuICAgICAgICAgICAgICAgIGlzSW50ZXJydXB0ZWQ6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICBmaW5hbE91dHB1dDogc3RyaW5nT3V0cHV0LFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gTk9UX0ZJTkFMX09VVFBVVDtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiB0b29sVXNlQmVoYXZpb3IgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgcmV0dXJuIHRvb2xVc2VCZWhhdmlvcihzdGF0ZS5fY29udGV4dCwgdG9vbFJlc3VsdHMpO1xuICAgIH1cbiAgICB0aHJvdyBuZXcgVXNlckVycm9yKGBJbnZhbGlkIHRvb2xVc2VCZWhhdmlvcjogJHt0b29sVXNlQmVoYXZpb3J9YCwgc3RhdGUpO1xufVxuZnVuY3Rpb24gZ2V0UnVuSXRlbVN0cmVhbUV2ZW50TmFtZShpdGVtKSB7XG4gICAgaWYgKGl0ZW0gaW5zdGFuY2VvZiBSdW5NZXNzYWdlT3V0cHV0SXRlbSkge1xuICAgICAgICByZXR1cm4gJ21lc3NhZ2Vfb3V0cHV0X2NyZWF0ZWQnO1xuICAgIH1cbiAgICBpZiAoaXRlbSBpbnN0YW5jZW9mIFJ1bkhhbmRvZmZDYWxsSXRlbSkge1xuICAgICAgICByZXR1cm4gJ2hhbmRvZmZfcmVxdWVzdGVkJztcbiAgICB9XG4gICAgaWYgKGl0ZW0gaW5zdGFuY2VvZiBSdW5IYW5kb2ZmT3V0cHV0SXRlbSkge1xuICAgICAgICByZXR1cm4gJ2hhbmRvZmZfb2NjdXJyZWQnO1xuICAgIH1cbiAgICBpZiAoaXRlbSBpbnN0YW5jZW9mIFJ1blRvb2xDYWxsSXRlbSkge1xuICAgICAgICByZXR1cm4gJ3Rvb2xfY2FsbGVkJztcbiAgICB9XG4gICAgaWYgKGl0ZW0gaW5zdGFuY2VvZiBSdW5Ub29sQ2FsbE91dHB1dEl0ZW0pIHtcbiAgICAgICAgcmV0dXJuICd0b29sX291dHB1dCc7XG4gICAgfVxuICAgIGlmIChpdGVtIGluc3RhbmNlb2YgUnVuUmVhc29uaW5nSXRlbSkge1xuICAgICAgICByZXR1cm4gJ3JlYXNvbmluZ19pdGVtX2NyZWF0ZWQnO1xuICAgIH1cbiAgICBpZiAoaXRlbSBpbnN0YW5jZW9mIFJ1blRvb2xBcHByb3ZhbEl0ZW0pIHtcbiAgICAgICAgcmV0dXJuICd0b29sX2FwcHJvdmFsX3JlcXVlc3RlZCc7XG4gICAgfVxuICAgIHJldHVybiB1bmRlZmluZWQ7XG59XG5mdW5jdGlvbiBlbnF1ZXVlUnVuSXRlbVN0cmVhbUV2ZW50KHJlc3VsdCwgaXRlbSkge1xuICAgIGNvbnN0IGl0ZW1OYW1lID0gZ2V0UnVuSXRlbVN0cmVhbUV2ZW50TmFtZShpdGVtKTtcbiAgICBpZiAoIWl0ZW1OYW1lKSB7XG4gICAgICAgIGxvZ2dlci53YXJuKCdVbmtub3duIGl0ZW0gdHlwZTogJywgaXRlbSk7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgcmVzdWx0Ll9hZGRJdGVtKG5ldyBSdW5JdGVtU3RyZWFtRXZlbnQoaXRlbU5hbWUsIGl0ZW0pKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBzdHJlYW1TdGVwSXRlbXNUb1J1blJlc3VsdChyZXN1bHQsIGl0ZW1zKSB7XG4gICAgLy8gUHJlc2VydmUgdGhlIG9yZGVyIGluIHdoaWNoIGl0ZW1zIHdlcmUgZ2VuZXJhdGVkIGJ5IGVucXVldWVpbmcgZWFjaCBvbmVcbiAgICAvLyBpbW1lZGlhdGVseSBvbiB0aGUgc3RyZWFtZWQgcmVzdWx0LlxuICAgIGZvciAoY29uc3QgaXRlbSBvZiBpdGVtcykge1xuICAgICAgICBlbnF1ZXVlUnVuSXRlbVN0cmVhbUV2ZW50KHJlc3VsdCwgaXRlbSk7XG4gICAgfVxufVxuZXhwb3J0IGZ1bmN0aW9uIGFkZFN0ZXBUb1J1blJlc3VsdChyZXN1bHQsIHN0ZXAsIG9wdGlvbnMpIHtcbiAgICAvLyBza2lwSXRlbXMgY29udGFpbnMgcnVuIGl0ZW1zIHRoYXQgd2VyZSBhbHJlYWR5IHN0cmVhbWVkIHNvIHdlIGF2b2lkXG4gICAgLy8gZW5xdWV1ZWluZyBkdXBsaWNhdGUgZXZlbnRzIGZvciB0aGUgc2FtZSBpbnN0YW5jZS5cbiAgICBjb25zdCBza2lwcGVkSXRlbXMgPSBvcHRpb25zPy5za2lwSXRlbXM7XG4gICAgZm9yIChjb25zdCBpdGVtIG9mIHN0ZXAubmV3U3RlcEl0ZW1zKSB7XG4gICAgICAgIGlmIChza2lwcGVkSXRlbXM/LmhhcyhpdGVtKSkge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgZW5xdWV1ZVJ1bkl0ZW1TdHJlYW1FdmVudChyZXN1bHQsIGl0ZW0pO1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBBZ2VudFRvb2xVc2VUcmFja2VyIHtcbiAgICAjYWdlbnRUb1Rvb2xzID0gbmV3IE1hcCgpO1xuICAgIGFkZFRvb2xVc2UoYWdlbnQsIHRvb2xOYW1lcykge1xuICAgICAgICB0aGlzLiNhZ2VudFRvVG9vbHMuc2V0KGFnZW50LCB0b29sTmFtZXMpO1xuICAgIH1cbiAgICBoYXNVc2VkVG9vbHMoYWdlbnQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuI2FnZW50VG9Ub29scy5oYXMoYWdlbnQpO1xuICAgIH1cbiAgICB0b0pTT04oKSB7XG4gICAgICAgIHJldHVybiBPYmplY3QuZnJvbUVudHJpZXMoQXJyYXkuZnJvbSh0aGlzLiNhZ2VudFRvVG9vbHMuZW50cmllcygpKS5tYXAoKFthZ2VudCwgdG9vbE5hbWVzXSkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIFthZ2VudC5uYW1lLCB0b29sTmFtZXNdO1xuICAgICAgICB9KSk7XG4gICAgfVxufVxuLyoqXG4gKiBAaW50ZXJuYWxcbiAqIENvbnZlcnQgYSB1c2VyLXByb3ZpZGVkIGlucHV0IGludG8gYSBsaXN0IG9mIGlucHV0IGl0ZW1zLlxuICovXG5leHBvcnQgZnVuY3Rpb24gdG9JbnB1dEl0ZW1MaXN0KGlucHV0KSB7XG4gICAgaWYgKHR5cGVvZiBpbnB1dCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB0eXBlOiAnbWVzc2FnZScsXG4gICAgICAgICAgICAgICAgcm9sZTogJ3VzZXInLFxuICAgICAgICAgICAgICAgIGNvbnRlbnQ6IGlucHV0LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgXTtcbiAgICB9XG4gICAgcmV0dXJuIFsuLi5pbnB1dF07XG59XG4vKipcbiAqIEBpbnRlcm5hbFxuICogRXh0cmFjdCBtb2RlbCBvdXRwdXQgaXRlbXMgZnJvbSBydW4gaXRlbXMsIGV4Y2x1ZGluZyB0b29sIGFwcHJvdmFsIGl0ZW1zLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZXh0cmFjdE91dHB1dEl0ZW1zRnJvbVJ1bkl0ZW1zKGl0ZW1zKSB7XG4gICAgcmV0dXJuIGl0ZW1zXG4gICAgICAgIC5maWx0ZXIoKGl0ZW0pID0+IGl0ZW0udHlwZSAhPT0gJ3Rvb2xfYXBwcm92YWxfaXRlbScpXG4gICAgICAgIC5tYXAoKGl0ZW0pID0+IGl0ZW0ucmF3SXRlbSk7XG59XG5mdW5jdGlvbiBub3JtYWxpemVJdGVtc0ZvclNlc3Npb25QZXJzaXN0ZW5jZShpdGVtcykge1xuICAgIC8vIFBlcnNpc3RlZCBzZXNzaW9ucyBtdXN0IGF2b2lkIHJhdyBiaW5hcnkgc28gd2UgY29udmVydCBldmVyeSBpdGVtIGludG8gYSBKU09OLXNhZmUgc2hhcGUgYmVmb3JlIHdyaXRpbmcgdG8gc3RvcmFnZS5cbiAgICByZXR1cm4gaXRlbXMubWFwKChpdGVtKSA9PiBzYW5pdGl6ZVZhbHVlRm9yU2Vzc2lvbihzdHJpcFRyYW5zaWVudENhbGxJZHMoaXRlbSkpKTtcbn1cbmZ1bmN0aW9uIHNhbml0aXplVmFsdWVGb3JTZXNzaW9uKHZhbHVlLCBjb250ZXh0ID0ge30pIHtcbiAgICBpZiAodmFsdWUgPT09IG51bGwgfHwgdmFsdWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgfVxuICAgIC8vIENvbnZlcnQgc3VwcG9ydGVkIGJpbmFyeSBwYXlsb2FkcyBpbnRvIEFycmF5QnVmZmVyIHZpZXdzIGJlZm9yZSBzZXJpYWxpemF0aW9uLlxuICAgIGNvbnN0IGJpbmFyeSA9IHRvVWludDhBcnJheUlmQmluYXJ5KHZhbHVlKTtcbiAgICBpZiAoYmluYXJ5KSB7XG4gICAgICAgIHJldHVybiB0b0RhdGFVcmxGcm9tQnl0ZXMoYmluYXJ5LCBjb250ZXh0Lm1lZGlhVHlwZSk7XG4gICAgfVxuICAgIGlmIChBcnJheS5pc0FycmF5KHZhbHVlKSkge1xuICAgICAgICByZXR1cm4gdmFsdWUubWFwKChlbnRyeSkgPT4gc2FuaXRpemVWYWx1ZUZvclNlc3Npb24oZW50cnksIGNvbnRleHQpKTtcbiAgICB9XG4gICAgaWYgKCFpc1BsYWluT2JqZWN0KHZhbHVlKSkge1xuICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgfVxuICAgIGNvbnN0IHJlY29yZCA9IHZhbHVlO1xuICAgIGNvbnN0IHJlc3VsdCA9IHt9O1xuICAgIGNvbnN0IG1lZGlhVHlwZSA9IHR5cGVvZiByZWNvcmQubWVkaWFUeXBlID09PSAnc3RyaW5nJyAmJiByZWNvcmQubWVkaWFUeXBlLmxlbmd0aCA+IDBcbiAgICAgICAgPyByZWNvcmQubWVkaWFUeXBlXG4gICAgICAgIDogY29udGV4dC5tZWRpYVR5cGU7XG4gICAgZm9yIChjb25zdCBba2V5LCBlbnRyeV0gb2YgT2JqZWN0LmVudHJpZXMocmVjb3JkKSkge1xuICAgICAgICAvLyBQcm9wYWdhdGUgZXhwbGljaXQgbWVkaWEgdHlwZSBvbmx5IHdoZW4gd2Fsa2luZyBpbnRvIGJpbmFyeSBwYXlsb2FkIGNvbnRhaW5lcnMuXG4gICAgICAgIGNvbnN0IG5leHRDb250ZXh0ID0ga2V5ID09PSAnZGF0YScgfHwga2V5ID09PSAnZmlsZURhdGEnID8geyBtZWRpYVR5cGUgfSA6IGNvbnRleHQ7XG4gICAgICAgIHJlc3VsdFtrZXldID0gc2FuaXRpemVWYWx1ZUZvclNlc3Npb24oZW50cnksIG5leHRDb250ZXh0KTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbn1cbmZ1bmN0aW9uIHRvVWludDhBcnJheUlmQmluYXJ5KHZhbHVlKSB7XG4gICAgLy8gTm9ybWFsaXplIHRoZSBkaXZlcnNlIGJpbmFyeSBjb250YWluZXJzIHdlIG1heSByZWNlaXZlIGludG8gYSBzaGFyZWQgVWludDhBcnJheSB2aWV3LlxuICAgIGlmICh2YWx1ZSBpbnN0YW5jZW9mIEFycmF5QnVmZmVyKSB7XG4gICAgICAgIHJldHVybiBuZXcgVWludDhBcnJheSh2YWx1ZSk7XG4gICAgfVxuICAgIGlmIChpc0FycmF5QnVmZmVyVmlldyh2YWx1ZSkpIHtcbiAgICAgICAgY29uc3QgdmlldyA9IHZhbHVlO1xuICAgICAgICByZXR1cm4gbmV3IFVpbnQ4QXJyYXkodmlldy5idWZmZXIsIHZpZXcuYnl0ZU9mZnNldCwgdmlldy5ieXRlTGVuZ3RoKTtcbiAgICB9XG4gICAgaWYgKGlzTm9kZUJ1ZmZlcih2YWx1ZSkpIHtcbiAgICAgICAgY29uc3QgdmlldyA9IHZhbHVlO1xuICAgICAgICByZXR1cm4gbmV3IFVpbnQ4QXJyYXkodmlldy5idWZmZXIsIHZpZXcuYnl0ZU9mZnNldCwgdmlldy5ieXRlTGVuZ3RoKTtcbiAgICB9XG4gICAgaWYgKGlzU2VyaWFsaXplZEJ1ZmZlclNuYXBzaG90KHZhbHVlKSkge1xuICAgICAgICBjb25zdCBzbmFwc2hvdCA9IHZhbHVlO1xuICAgICAgICByZXR1cm4gVWludDhBcnJheS5mcm9tKHNuYXBzaG90LmRhdGEpO1xuICAgIH1cbiAgICByZXR1cm4gdW5kZWZpbmVkO1xufVxuZnVuY3Rpb24gdG9EYXRhVXJsRnJvbUJ5dGVzKGJ5dGVzLCBtZWRpYVR5cGUpIHtcbiAgICAvLyBDb252ZXJ0IGJpbmFyeSBwYXlsb2FkcyBpbnRvIGEgZHVyYWJsZSBkYXRhIFVSTCBzbyBzZXNzaW9uIGZpbGVzIHJlbWFpbiBzZWxmLWNvbnRhaW5lZC5cbiAgICBjb25zdCBiYXNlNjQgPSBlbmNvZGVVaW50OEFycmF5VG9CYXNlNjQoYnl0ZXMpO1xuICAgIC8vIE5vdGUgdGhhdCBPcGVuQUkgUmVzcG9uc2VzIEFQSSBuZXZlciBhY2NlcHRzIGFwcGxpY2F0aW9uL29jdGV0LXN0cmVhbSBhcyBhIG1lZGlhIHR5cGUsXG4gICAgLy8gc28gd2UgZmFsbCBiYWNrIHRvIHRleHQvcGxhaW47IHRoYXQgc2FpZCwgdG9vbHMgYXJlIHN1cHBvc2VkIHRvIHJldHVybiBhIHZhbGlkIG1lZGlhIHR5cGUgd2hlbiB0aGlzIHV0aWxpdHkgaXMgdXNlZC5cbiAgICBjb25zdCB0eXBlID0gbWVkaWFUeXBlICYmICFtZWRpYVR5cGUuc3RhcnRzV2l0aCgnZGF0YTonKSA/IG1lZGlhVHlwZSA6ICd0ZXh0L3BsYWluJztcbiAgICByZXR1cm4gYGRhdGE6JHt0eXBlfTtiYXNlNjQsJHtiYXNlNjR9YDtcbn1cbmZ1bmN0aW9uIGlzUGxhaW5PYmplY3QodmFsdWUpIHtcbiAgICBpZiAodHlwZW9mIHZhbHVlICE9PSAnb2JqZWN0JyB8fCB2YWx1ZSA9PT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGNvbnN0IHByb3RvID0gT2JqZWN0LmdldFByb3RvdHlwZU9mKHZhbHVlKTtcbiAgICByZXR1cm4gcHJvdG8gPT09IE9iamVjdC5wcm90b3R5cGUgfHwgcHJvdG8gPT09IG51bGw7XG59XG5mdW5jdGlvbiBzdHJpcFRyYW5zaWVudENhbGxJZHModmFsdWUpIHtcbiAgICBpZiAodmFsdWUgPT09IG51bGwgfHwgdmFsdWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgfVxuICAgIGlmIChBcnJheS5pc0FycmF5KHZhbHVlKSkge1xuICAgICAgICByZXR1cm4gdmFsdWUubWFwKChlbnRyeSkgPT4gc3RyaXBUcmFuc2llbnRDYWxsSWRzKGVudHJ5KSk7XG4gICAgfVxuICAgIGlmICghaXNQbGFpbk9iamVjdCh2YWx1ZSkpIHtcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cbiAgICBjb25zdCByZWNvcmQgPSB2YWx1ZTtcbiAgICBjb25zdCByZXN1bHQgPSB7fTtcbiAgICBjb25zdCBpc1Byb3RvY29sSXRlbSA9IHR5cGVvZiByZWNvcmQudHlwZSA9PT0gJ3N0cmluZycgJiYgcmVjb3JkLnR5cGUubGVuZ3RoID4gMDtcbiAgICBjb25zdCBzaG91bGRTdHJpcElkID0gaXNQcm90b2NvbEl0ZW0gJiYgc2hvdWxkU3RyaXBJZEZvclR5cGUocmVjb3JkLnR5cGUpO1xuICAgIGZvciAoY29uc3QgW2tleSwgZW50cnldIG9mIE9iamVjdC5lbnRyaWVzKHJlY29yZCkpIHtcbiAgICAgICAgaWYgKHNob3VsZFN0cmlwSWQgJiYga2V5ID09PSAnaWQnKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICByZXN1bHRba2V5XSA9IHN0cmlwVHJhbnNpZW50Q2FsbElkcyhlbnRyeSk7XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG59XG5mdW5jdGlvbiBzaG91bGRTdHJpcElkRm9yVHlwZSh0eXBlKSB7XG4gICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICAgIGNhc2UgJ2Z1bmN0aW9uX2NhbGwnOlxuICAgICAgICBjYXNlICdmdW5jdGlvbl9jYWxsX3Jlc3VsdCc6XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG59XG5hc3luYyBmdW5jdGlvbiBydW5Db21wYWN0aW9uT25TZXNzaW9uKHNlc3Npb24sIHJlc3BvbnNlSWQsIHN0YXRlKSB7XG4gICAgaWYgKCFpc09wZW5BSVJlc3BvbnNlc0NvbXBhY3Rpb25Bd2FyZVNlc3Npb24oc2Vzc2lvbikpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICAvLyBDYWxsZWQgYWZ0ZXIgYSBjb21wbGV0ZWQgdHVybiBpcyBwZXJzaXN0ZWQgc28gY29tcGFjdGlvbiBjYW4gY29uc2lkZXIgdGhlIGxhdGVzdCBzdG9yZWQgc3RhdGUuXG4gICAgY29uc3QgY29tcGFjdGlvblJlc3VsdCA9IGF3YWl0IHNlc3Npb24ucnVuQ29tcGFjdGlvbih0eXBlb2YgcmVzcG9uc2VJZCA9PT0gJ3VuZGVmaW5lZCcgPyB1bmRlZmluZWQgOiB7IHJlc3BvbnNlSWQgfSk7XG4gICAgaWYgKCFjb21wYWN0aW9uUmVzdWx0KSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgdXNhZ2UgPSBjb21wYWN0aW9uUmVzdWx0LnVzYWdlO1xuICAgIHN0YXRlLl9jb250ZXh0LnVzYWdlLmFkZChuZXcgVXNhZ2Uoe1xuICAgICAgICByZXF1ZXN0czogMSxcbiAgICAgICAgaW5wdXRUb2tlbnM6IHVzYWdlLmlucHV0VG9rZW5zLFxuICAgICAgICBvdXRwdXRUb2tlbnM6IHVzYWdlLm91dHB1dFRva2VucyxcbiAgICAgICAgdG90YWxUb2tlbnM6IHVzYWdlLnRvdGFsVG9rZW5zLFxuICAgICAgICBpbnB1dFRva2Vuc0RldGFpbHM6IHVzYWdlLmlucHV0VG9rZW5zRGV0YWlscyxcbiAgICAgICAgb3V0cHV0VG9rZW5zRGV0YWlsczogdXNhZ2Uub3V0cHV0VG9rZW5zRGV0YWlscyxcbiAgICAgICAgcmVxdWVzdFVzYWdlRW50cmllczogW3VzYWdlXSxcbiAgICB9KSk7XG59XG4vKipcbiAqIEBpbnRlcm5hbFxuICogUGVyc2lzdCBmdWxsIHR1cm4gKGlucHV0ICsgb3V0cHV0cykgZm9yIG5vbi1zdHJlYW1pbmcgcnVucy5cbiAqL1xuLy8gUGVyc2lzdHMgdGhlIGNvbWJpbmF0aW9uIG9mIHVzZXIgaW5wdXRzIChwb3NzaWJseSBmaWx0ZXJlZCkgYW5kIG1vZGVsIG91dHB1dHMgZm9yIGEgY29tcGxldGVkIHR1cm4uXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gc2F2ZVRvU2Vzc2lvbihzZXNzaW9uLCBzZXNzaW9uSW5wdXRJdGVtcywgcmVzdWx0KSB7XG4gICAgaWYgKCFzZXNzaW9uKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgaW5wdXRJdGVtcyA9IHNlc3Npb25JbnB1dEl0ZW1zID8/IFtdO1xuICAgIGNvbnN0IHN0YXRlID0gcmVzdWx0LnN0YXRlO1xuICAgIGNvbnN0IGFscmVhZHlQZXJzaXN0ZWQgPSBzdGF0ZS5fY3VycmVudFR1cm5QZXJzaXN0ZWRJdGVtQ291bnQgPz8gMDtcbiAgICAvLyBQZXJzaXN0IG9ubHkgdGhlIHBvcnRpb24gb2YgX2dlbmVyYXRlZEl0ZW1zIHRoYXQgaGFzIG5vdCB5ZXQgYmVlbiBzdG9yZWQgZm9yIHRoaXMgdHVybi5cbiAgICBjb25zdCBuZXdSdW5JdGVtcyA9IHJlc3VsdC5uZXdJdGVtcy5zbGljZShhbHJlYWR5UGVyc2lzdGVkKTtcbiAgICBpZiAocHJvY2Vzcy5lbnYuT1BFTkFJX0FHRU5UU19fREVCVUdfU0FWRV9TRVNTSU9OKSB7XG4gICAgICAgIGNvbnNvbGUuZGVidWcoJ3NhdmVUb1Nlc3Npb246bmV3UnVuSXRlbXMnLCBuZXdSdW5JdGVtcy5tYXAoKGl0ZW0pID0+IGl0ZW0udHlwZSkpO1xuICAgIH1cbiAgICBjb25zdCBvdXRwdXRJdGVtcyA9IGV4dHJhY3RPdXRwdXRJdGVtc0Zyb21SdW5JdGVtcyhuZXdSdW5JdGVtcyk7XG4gICAgY29uc3QgaXRlbXNUb1NhdmUgPSBbLi4uaW5wdXRJdGVtcywgLi4ub3V0cHV0SXRlbXNdO1xuICAgIGlmIChpdGVtc1RvU2F2ZS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgc3RhdGUuX2N1cnJlbnRUdXJuUGVyc2lzdGVkSXRlbUNvdW50ID1cbiAgICAgICAgICAgIGFscmVhZHlQZXJzaXN0ZWQgKyBuZXdSdW5JdGVtcy5sZW5ndGg7XG4gICAgICAgIGF3YWl0IHJ1bkNvbXBhY3Rpb25PblNlc3Npb24oc2Vzc2lvbiwgcmVzdWx0Lmxhc3RSZXNwb25zZUlkLCBzdGF0ZSk7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3Qgc2FuaXRpemVkSXRlbXMgPSBub3JtYWxpemVJdGVtc0ZvclNlc3Npb25QZXJzaXN0ZW5jZShpdGVtc1RvU2F2ZSk7XG4gICAgYXdhaXQgc2Vzc2lvbi5hZGRJdGVtcyhzYW5pdGl6ZWRJdGVtcyk7XG4gICAgYXdhaXQgcnVuQ29tcGFjdGlvbk9uU2Vzc2lvbihzZXNzaW9uLCByZXN1bHQubGFzdFJlc3BvbnNlSWQsIHN0YXRlKTtcbiAgICBzdGF0ZS5fY3VycmVudFR1cm5QZXJzaXN0ZWRJdGVtQ291bnQgPSBhbHJlYWR5UGVyc2lzdGVkICsgbmV3UnVuSXRlbXMubGVuZ3RoO1xufVxuLyoqXG4gKiBAaW50ZXJuYWxcbiAqIFBlcnNpc3Qgb25seSB0aGUgdXNlciBpbnB1dCBmb3Igc3RyZWFtaW5nIHJ1bnMgYXQgc3RhcnQuXG4gKi9cbi8vIEZvciBzdHJlYW1pbmcgcnVucyB3ZSBwZXJzaXN0IHVzZXIgaW5wdXQgYXMgc29vbiBhcyBpdCBpcyBzZW50IHNvIHJlY29ubmVjdGlvbnMgY2FuIHJlc3VtZS5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBzYXZlU3RyZWFtSW5wdXRUb1Nlc3Npb24oc2Vzc2lvbiwgc2Vzc2lvbklucHV0SXRlbXMpIHtcbiAgICBpZiAoIXNlc3Npb24pIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAoIXNlc3Npb25JbnB1dEl0ZW1zIHx8IHNlc3Npb25JbnB1dEl0ZW1zLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IHNhbml0aXplZElucHV0ID0gbm9ybWFsaXplSXRlbXNGb3JTZXNzaW9uUGVyc2lzdGVuY2Uoc2Vzc2lvbklucHV0SXRlbXMpO1xuICAgIGF3YWl0IHNlc3Npb24uYWRkSXRlbXMoc2FuaXRpemVkSW5wdXQpO1xufVxuLyoqXG4gKiBAaW50ZXJuYWxcbiAqIFBlcnNpc3Qgb25seSB0aGUgbW9kZWwgb3V0cHV0cyBmb3Igc3RyZWFtaW5nIHJ1bnMgYXQgdGhlIGVuZCBvZiBhIHR1cm4uXG4gKi9cbi8vIENvbXBsZW1lbnRzIHNhdmVTdHJlYW1JbnB1dFRvU2Vzc2lvbiBieSByZWNvcmRpbmcgdGhlIHN0cmVhbWluZyBvdXRwdXRzIGF0IHRoZSBlbmQgb2YgdGhlIHR1cm4uXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gc2F2ZVN0cmVhbVJlc3VsdFRvU2Vzc2lvbihzZXNzaW9uLCByZXN1bHQpIHtcbiAgICBpZiAoIXNlc3Npb24pIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBzdGF0ZSA9IHJlc3VsdC5zdGF0ZTtcbiAgICBjb25zdCBhbHJlYWR5UGVyc2lzdGVkID0gc3RhdGUuX2N1cnJlbnRUdXJuUGVyc2lzdGVkSXRlbUNvdW50ID8/IDA7XG4gICAgY29uc3QgbmV3UnVuSXRlbXMgPSByZXN1bHQubmV3SXRlbXMuc2xpY2UoYWxyZWFkeVBlcnNpc3RlZCk7XG4gICAgY29uc3QgaXRlbXNUb1NhdmUgPSBleHRyYWN0T3V0cHV0SXRlbXNGcm9tUnVuSXRlbXMobmV3UnVuSXRlbXMpO1xuICAgIGlmIChpdGVtc1RvU2F2ZS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgc3RhdGUuX2N1cnJlbnRUdXJuUGVyc2lzdGVkSXRlbUNvdW50ID1cbiAgICAgICAgICAgIGFscmVhZHlQZXJzaXN0ZWQgKyBuZXdSdW5JdGVtcy5sZW5ndGg7XG4gICAgICAgIGF3YWl0IHJ1bkNvbXBhY3Rpb25PblNlc3Npb24oc2Vzc2lvbiwgcmVzdWx0Lmxhc3RSZXNwb25zZUlkLCBzdGF0ZSk7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3Qgc2FuaXRpemVkSXRlbXMgPSBub3JtYWxpemVJdGVtc0ZvclNlc3Npb25QZXJzaXN0ZW5jZShpdGVtc1RvU2F2ZSk7XG4gICAgYXdhaXQgc2Vzc2lvbi5hZGRJdGVtcyhzYW5pdGl6ZWRJdGVtcyk7XG4gICAgYXdhaXQgcnVuQ29tcGFjdGlvbk9uU2Vzc2lvbihzZXNzaW9uLCByZXN1bHQubGFzdFJlc3BvbnNlSWQsIHN0YXRlKTtcbiAgICBzdGF0ZS5fY3VycmVudFR1cm5QZXJzaXN0ZWRJdGVtQ291bnQgPSBhbHJlYWR5UGVyc2lzdGVkICsgbmV3UnVuSXRlbXMubGVuZ3RoO1xufVxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHByZXBhcmVJbnB1dEl0ZW1zV2l0aFNlc3Npb24oaW5wdXQsIHNlc3Npb24sIHNlc3Npb25JbnB1dENhbGxiYWNrLCBvcHRpb25zKSB7XG4gICAgaWYgKCFzZXNzaW9uKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBwcmVwYXJlZElucHV0OiBpbnB1dCxcbiAgICAgICAgICAgIHNlc3Npb25JdGVtczogdW5kZWZpbmVkLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBjb25zdCBpbmNsdWRlSGlzdG9yeUluUHJlcGFyZWRJbnB1dCA9IG9wdGlvbnM/LmluY2x1ZGVIaXN0b3J5SW5QcmVwYXJlZElucHV0ID8/IHRydWU7XG4gICAgY29uc3QgcHJlc2VydmVEcm9wcGVkTmV3SXRlbXMgPSBvcHRpb25zPy5wcmVzZXJ2ZURyb3BwZWROZXdJdGVtcyA/PyBmYWxzZTtcbiAgICBjb25zdCBoaXN0b3J5ID0gYXdhaXQgc2Vzc2lvbi5nZXRJdGVtcygpO1xuICAgIGNvbnN0IG5ld0lucHV0SXRlbXMgPSBBcnJheS5pc0FycmF5KGlucHV0KVxuICAgICAgICA/IFsuLi5pbnB1dF1cbiAgICAgICAgOiB0b0lucHV0SXRlbUxpc3QoaW5wdXQpO1xuICAgIGlmICghc2Vzc2lvbklucHV0Q2FsbGJhY2spIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHByZXBhcmVkSW5wdXQ6IGluY2x1ZGVIaXN0b3J5SW5QcmVwYXJlZElucHV0XG4gICAgICAgICAgICAgICAgPyBbLi4uaGlzdG9yeSwgLi4ubmV3SW5wdXRJdGVtc11cbiAgICAgICAgICAgICAgICA6IG5ld0lucHV0SXRlbXMsXG4gICAgICAgICAgICBzZXNzaW9uSXRlbXM6IG5ld0lucHV0SXRlbXMsXG4gICAgICAgIH07XG4gICAgfVxuICAgIC8vIENhcHR1cmUgc25hcHNob3RzIGJlZm9yZSBpbnZva2luZyB0aGUgY2FsbGJhY2sgc28gd2UgY2FuIHJlYXNvbiBhYm91dCB0aGUgb3JpZ2luYWwgc3RhdGUgZXZlblxuICAgIC8vIGlmIHRoZSBjYWxsYmFjayBtdXRhdGVzIHRoZSBoaXN0b3J5IGFycmF5IGluLXBsYWNlLlxuICAgIGNvbnN0IGhpc3RvcnlTbmFwc2hvdCA9IGhpc3Rvcnkuc2xpY2UoKTtcbiAgICBjb25zdCBuZXdJbnB1dFNuYXBzaG90ID0gbmV3SW5wdXRJdGVtcy5zbGljZSgpO1xuICAgIC8vIERlbGVnYXRlIGhpc3RvcnkgcmVjb25jaWxpYXRpb24gdG8gdGhlIHVzZXItc3VwcGxpZWQgY2FsbGJhY2suIEl0IG11c3QgcmV0dXJuIGEgY29uY3JldGUgbGlzdFxuICAgIC8vIHRvIGtlZXAgZG93bnN0cmVhbSBtb2RlbCByZXF1ZXN0cyB3ZWxsLXR5cGVkLlxuICAgIGNvbnN0IGNvbWJpbmVkID0gYXdhaXQgc2Vzc2lvbklucHV0Q2FsbGJhY2soaGlzdG9yeSwgbmV3SW5wdXRJdGVtcyk7XG4gICAgaWYgKCFBcnJheS5pc0FycmF5KGNvbWJpbmVkKSkge1xuICAgICAgICB0aHJvdyBuZXcgVXNlckVycm9yKCdTZXNzaW9uIGlucHV0IGNhbGxiYWNrIG11c3QgcmV0dXJuIGFuIGFycmF5IG9mIEFnZW50SW5wdXRJdGVtIG9iamVjdHMuJyk7XG4gICAgfVxuICAgIGNvbnN0IGhpc3RvcnlDb3VudHMgPSBidWlsZEl0ZW1GcmVxdWVuY3lNYXAoaGlzdG9yeVNuYXBzaG90KTtcbiAgICBjb25zdCBuZXdJbnB1dENvdW50cyA9IGJ1aWxkSXRlbUZyZXF1ZW5jeU1hcChuZXdJbnB1dFNuYXBzaG90KTtcbiAgICBjb25zdCBoaXN0b3J5UmVmcyA9IGJ1aWxkSXRlbVJlZmVyZW5jZU1hcChoaXN0b3J5U25hcHNob3QpO1xuICAgIGNvbnN0IG5ld0lucHV0UmVmcyA9IGJ1aWxkSXRlbVJlZmVyZW5jZU1hcChuZXdJbnB1dFNuYXBzaG90KTtcbiAgICBjb25zdCBhcHBlbmRlZCA9IFtdO1xuICAgIGZvciAoY29uc3QgaXRlbSBvZiBjb21iaW5lZCkge1xuICAgICAgICBjb25zdCBrZXkgPSBzZXNzaW9uSXRlbUtleShpdGVtKTtcbiAgICAgICAgaWYgKGNvbnN1bWVSZWZlcmVuY2UobmV3SW5wdXRSZWZzLCBrZXksIGl0ZW0pKSB7XG4gICAgICAgICAgICBkZWNyZW1lbnRDb3VudChuZXdJbnB1dENvdW50cywga2V5KTtcbiAgICAgICAgICAgIGFwcGVuZGVkLnB1c2goaXRlbSk7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICAvLyBQcmlvcml0aXplIGV4YWN0IGhpc3RvcnkgbWF0Y2hlcyBiZWZvcmUgcGF5bG9hZC1iYXNlZCBjb3VudHMgc28gY2FsbGJhY2tzIHRoYXQgc3VyZmFjZVxuICAgICAgICAvLyBoaXN0b3J5IGFoZWFkIG9mIGlkZW50aWNhbCBuZXcgaW5wdXRzIGtlZXAgcHJldmlvdXNseSBwZXJzaXN0ZWQgaXRlbXMgb3V0IG9mIHRoZSBuZXcgcXVldWUuXG4gICAgICAgIGlmIChjb25zdW1lUmVmZXJlbmNlKGhpc3RvcnlSZWZzLCBrZXksIGl0ZW0pKSB7XG4gICAgICAgICAgICBkZWNyZW1lbnRDb3VudChoaXN0b3J5Q291bnRzLCBrZXkpO1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgaGlzdG9yeVJlbWFpbmluZyA9IGhpc3RvcnlDb3VudHMuZ2V0KGtleSkgPz8gMDtcbiAgICAgICAgaWYgKGhpc3RvcnlSZW1haW5pbmcgPiAwKSB7XG4gICAgICAgICAgICBoaXN0b3J5Q291bnRzLnNldChrZXksIGhpc3RvcnlSZW1haW5pbmcgLSAxKTtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG5ld1JlbWFpbmluZyA9IG5ld0lucHV0Q291bnRzLmdldChrZXkpID8/IDA7XG4gICAgICAgIGlmIChuZXdSZW1haW5pbmcgPiAwKSB7XG4gICAgICAgICAgICBuZXdJbnB1dENvdW50cy5zZXQoa2V5LCBuZXdSZW1haW5pbmcgLSAxKTtcbiAgICAgICAgICAgIGFwcGVuZGVkLnB1c2goaXRlbSk7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBhcHBlbmRlZC5wdXNoKGl0ZW0pO1xuICAgIH1cbiAgICAvLyBQcmVzZXJ2ZSByZWRhY3RlZCBpbnB1dHMgZm9yIG1vZGVsIGRlbGl2ZXJ5IHdoZW4gcmVxdWVzdGVkIChlLmcuIHNlcnZlci1tYW5hZ2VkIGhpc3RvcmllcykuXG4gICAgY29uc3QgcHJlcGFyZWRJdGVtcyA9IGluY2x1ZGVIaXN0b3J5SW5QcmVwYXJlZElucHV0XG4gICAgICAgID8gY29tYmluZWRcbiAgICAgICAgOiBhcHBlbmRlZC5sZW5ndGggPiAwXG4gICAgICAgICAgICA/IGFwcGVuZGVkXG4gICAgICAgICAgICA6IHByZXNlcnZlRHJvcHBlZE5ld0l0ZW1zXG4gICAgICAgICAgICAgICAgPyBuZXdJbnB1dFNuYXBzaG90XG4gICAgICAgICAgICAgICAgOiBbXTtcbiAgICByZXR1cm4ge1xuICAgICAgICBwcmVwYXJlZElucHV0OiBwcmVwYXJlZEl0ZW1zLFxuICAgICAgICAvLyBSZXNwZWN0IGNhbGxiYWNrcyB0aGF0IGludGVudGlvbmFsbHkgZHJvcCB0aGUgbGF0ZXN0IGlucHV0cyAoZS5nLiB0byByZWRhY3Qgc2Vuc2l0aXZlXG4gICAgICAgIC8vIHZhbHVlcykgYnkgcGVyc2lzdGluZyBvbmx5IHRoZSBpdGVtcyB0aGV5IGtlcHQgaW4gdGhlIGNvbWJpbmVkIGFycmF5LlxuICAgICAgICBzZXNzaW9uSXRlbXM6IGFwcGVuZGVkLFxuICAgIH07XG59XG4vKipcbiAqIEFjY2VwdHMgd2hhdGV2ZXIgdGhlIHRvb2wgcmV0dXJuZWQgYW5kIGF0dGVtcHRzIHRvIGNvZXJjZSBpdCBpbnRvIHRoZSBzdHJ1Y3R1cmVkIHByb3RvY29sXG4gKiBzaGFwZXMgd2UgZXhwb3NlIHRvIGRvd25zdHJlYW0gbW9kZWwgYWRhcHRlcnMgKGlucHV0X3RleHQvaW5wdXRfaW1hZ2UvaW5wdXRfZmlsZSkuIFRvb2xzIGFyZVxuICogYWxsb3dlZCB0byByZXR1cm4gZWl0aGVyIGEgc2luZ2xlIHN0cnVjdHVyZWQgb2JqZWN0IG9yIGFuIGFycmF5IG9mIHRoZW07IGFueXRoaW5nIGVsc2UgZmFsbHNcbiAqIGJhY2sgdG8gdGhlIGxlZ2FjeSBzdHJpbmcgcGlwZWxpbmUuXG4gKi9cbmZ1bmN0aW9uIG5vcm1hbGl6ZVN0cnVjdHVyZWRUb29sT3V0cHV0cyhvdXRwdXQpIHtcbiAgICBpZiAoQXJyYXkuaXNBcnJheShvdXRwdXQpKSB7XG4gICAgICAgIGNvbnN0IHN0cnVjdHVyZWQgPSBbXTtcbiAgICAgICAgZm9yIChjb25zdCBpdGVtIG9mIG91dHB1dCkge1xuICAgICAgICAgICAgY29uc3Qgbm9ybWFsaXplZCA9IG5vcm1hbGl6ZVN0cnVjdHVyZWRUb29sT3V0cHV0KGl0ZW0pO1xuICAgICAgICAgICAgaWYgKCFub3JtYWxpemVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzdHJ1Y3R1cmVkLnB1c2gobm9ybWFsaXplZCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHN0cnVjdHVyZWQ7XG4gICAgfVxuICAgIGNvbnN0IG5vcm1hbGl6ZWQgPSBub3JtYWxpemVTdHJ1Y3R1cmVkVG9vbE91dHB1dChvdXRwdXQpO1xuICAgIHJldHVybiBub3JtYWxpemVkID8gW25vcm1hbGl6ZWRdIDogbnVsbDtcbn1cbi8qKlxuICogQmVzdC1lZmZvcnQgbm9ybWFsaXphdGlvbiBvZiBhIHNpbmdsZSB0b29sIG91dHB1dCBpdGVtLiBJZiB0aGUgb2JqZWN0IGFscmVhZHkgbWF0Y2hlcyB0aGVcbiAqIHByb3RvY29sIHNoYXBlIHdlIHNpbXBseSBjYXN0IGl0OyBvdGhlcndpc2Ugd2UgY29weSB0aGUgcmVjb2duaXNlZCBmaWVsZHMgaW50byB0aGUgY2Fub25pY2FsXG4gKiBzdHJ1Y3R1cmUuIFJldHVybmluZyBudWxsIGxldHMgdGhlIGNhbGxlciBrbm93IHdlIHNob3VsZCByZXZlcnQgdG8gcGxhaW4tc3RyaW5nIGhhbmRsaW5nLlxuICovXG5mdW5jdGlvbiBub3JtYWxpemVTdHJ1Y3R1cmVkVG9vbE91dHB1dCh2YWx1ZSkge1xuICAgIGlmICghaXNSZWNvcmQodmFsdWUpKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBjb25zdCB0eXBlID0gdmFsdWUudHlwZTtcbiAgICBpZiAodHlwZSA9PT0gJ3RleHQnICYmIHR5cGVvZiB2YWx1ZS50ZXh0ID09PSAnc3RyaW5nJykge1xuICAgICAgICBjb25zdCBvdXRwdXQgPSB7IHR5cGU6ICd0ZXh0JywgdGV4dDogdmFsdWUudGV4dCB9O1xuICAgICAgICBpZiAoaXNSZWNvcmQodmFsdWUucHJvdmlkZXJEYXRhKSkge1xuICAgICAgICAgICAgb3V0cHV0LnByb3ZpZGVyRGF0YSA9IHZhbHVlLnByb3ZpZGVyRGF0YTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb3V0cHV0O1xuICAgIH1cbiAgICBpZiAodHlwZSA9PT0gJ2ltYWdlJykge1xuICAgICAgICBjb25zdCBvdXRwdXQgPSB7IHR5cGU6ICdpbWFnZScgfTtcbiAgICAgICAgbGV0IGltYWdlU3RyaW5nO1xuICAgICAgICBsZXQgaW1hZ2VGaWxlSWQ7XG4gICAgICAgIGNvbnN0IGZhbGxiYWNrSW1hZ2VNZWRpYVR5cGUgPSBpc05vbkVtcHR5U3RyaW5nKHZhbHVlLm1lZGlhVHlwZSlcbiAgICAgICAgICAgID8gdmFsdWUubWVkaWFUeXBlXG4gICAgICAgICAgICA6IHVuZGVmaW5lZDtcbiAgICAgICAgY29uc3QgaW1hZ2VGaWVsZCA9IHZhbHVlLmltYWdlO1xuICAgICAgICBpZiAodHlwZW9mIGltYWdlRmllbGQgPT09ICdzdHJpbmcnICYmIGltYWdlRmllbGQubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgaW1hZ2VTdHJpbmcgPSBpbWFnZUZpZWxkO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGlzUmVjb3JkKGltYWdlRmllbGQpKSB7XG4gICAgICAgICAgICBjb25zdCBpbWFnZU9iaiA9IGltYWdlRmllbGQ7XG4gICAgICAgICAgICBjb25zdCBpbmxpbmVNZWRpYVR5cGUgPSBpc05vbkVtcHR5U3RyaW5nKGltYWdlT2JqLm1lZGlhVHlwZSlcbiAgICAgICAgICAgICAgICA/IGltYWdlT2JqLm1lZGlhVHlwZVxuICAgICAgICAgICAgICAgIDogZmFsbGJhY2tJbWFnZU1lZGlhVHlwZTtcbiAgICAgICAgICAgIGlmIChpc05vbkVtcHR5U3RyaW5nKGltYWdlT2JqLnVybCkpIHtcbiAgICAgICAgICAgICAgICBpbWFnZVN0cmluZyA9IGltYWdlT2JqLnVybDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGlzTm9uRW1wdHlTdHJpbmcoaW1hZ2VPYmouZGF0YSkpIHtcbiAgICAgICAgICAgICAgICBpbWFnZVN0cmluZyA9IHRvSW5saW5lSW1hZ2VTdHJpbmcoaW1hZ2VPYmouZGF0YSwgaW5saW5lTWVkaWFUeXBlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGltYWdlT2JqLmRhdGEgaW5zdGFuY2VvZiBVaW50OEFycmF5ICYmXG4gICAgICAgICAgICAgICAgaW1hZ2VPYmouZGF0YS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgaW1hZ2VTdHJpbmcgPSB0b0lubGluZUltYWdlU3RyaW5nKGltYWdlT2JqLmRhdGEsIGlubGluZU1lZGlhVHlwZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIWltYWdlU3RyaW5nKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgY2FuZGlkYXRlSWQgPSAoaXNOb25FbXB0eVN0cmluZyhpbWFnZU9iai5maWxlSWQpICYmIGltYWdlT2JqLmZpbGVJZCkgfHxcbiAgICAgICAgICAgICAgICAgICAgKGlzTm9uRW1wdHlTdHJpbmcoaW1hZ2VPYmouaWQpICYmIGltYWdlT2JqLmlkKSB8fFxuICAgICAgICAgICAgICAgICAgICB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgaWYgKGNhbmRpZGF0ZUlkKSB7XG4gICAgICAgICAgICAgICAgICAgIGltYWdlRmlsZUlkID0gY2FuZGlkYXRlSWQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICghaW1hZ2VTdHJpbmcgJiZcbiAgICAgICAgICAgIHR5cGVvZiB2YWx1ZS5pbWFnZVVybCA9PT0gJ3N0cmluZycgJiZcbiAgICAgICAgICAgIHZhbHVlLmltYWdlVXJsLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGltYWdlU3RyaW5nID0gdmFsdWUuaW1hZ2VVcmw7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFpbWFnZUZpbGVJZCAmJlxuICAgICAgICAgICAgdHlwZW9mIHZhbHVlLmZpbGVJZCA9PT0gJ3N0cmluZycgJiZcbiAgICAgICAgICAgIHZhbHVlLmZpbGVJZC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBpbWFnZUZpbGVJZCA9IHZhbHVlLmZpbGVJZDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWltYWdlU3RyaW5nICYmXG4gICAgICAgICAgICB0eXBlb2YgdmFsdWUuZGF0YSA9PT0gJ3N0cmluZycgJiZcbiAgICAgICAgICAgIHZhbHVlLmRhdGEubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgaW1hZ2VTdHJpbmcgPSBmYWxsYmFja0ltYWdlTWVkaWFUeXBlXG4gICAgICAgICAgICAgICAgPyB0b0lubGluZUltYWdlU3RyaW5nKHZhbHVlLmRhdGEsIGZhbGxiYWNrSW1hZ2VNZWRpYVR5cGUpXG4gICAgICAgICAgICAgICAgOiB2YWx1ZS5kYXRhO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKCFpbWFnZVN0cmluZyAmJlxuICAgICAgICAgICAgdmFsdWUuZGF0YSBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkgJiZcbiAgICAgICAgICAgIHZhbHVlLmRhdGEubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgaW1hZ2VTdHJpbmcgPSB0b0lubGluZUltYWdlU3RyaW5nKHZhbHVlLmRhdGEsIGZhbGxiYWNrSW1hZ2VNZWRpYVR5cGUpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlb2YgdmFsdWUuZGV0YWlsID09PSAnc3RyaW5nJyAmJiB2YWx1ZS5kZXRhaWwubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgb3V0cHV0LmRldGFpbCA9IHZhbHVlLmRldGFpbDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaW1hZ2VTdHJpbmcpIHtcbiAgICAgICAgICAgIG91dHB1dC5pbWFnZSA9IGltYWdlU3RyaW5nO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGltYWdlRmlsZUlkKSB7XG4gICAgICAgICAgICBvdXRwdXQuaW1hZ2UgPSB7IGZpbGVJZDogaW1hZ2VGaWxlSWQgfTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpc1JlY29yZCh2YWx1ZS5wcm92aWRlckRhdGEpKSB7XG4gICAgICAgICAgICBvdXRwdXQucHJvdmlkZXJEYXRhID0gdmFsdWUucHJvdmlkZXJEYXRhO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvdXRwdXQ7XG4gICAgfVxuICAgIGlmICh0eXBlID09PSAnZmlsZScpIHtcbiAgICAgICAgY29uc3QgZmlsZVZhbHVlID0gbm9ybWFsaXplRmlsZVZhbHVlKHZhbHVlKTtcbiAgICAgICAgaWYgKCFmaWxlVmFsdWUpIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG91dHB1dCA9IHsgdHlwZTogJ2ZpbGUnLCBmaWxlOiBmaWxlVmFsdWUgfTtcbiAgICAgICAgaWYgKGlzUmVjb3JkKHZhbHVlLnByb3ZpZGVyRGF0YSkpIHtcbiAgICAgICAgICAgIG91dHB1dC5wcm92aWRlckRhdGEgPSB2YWx1ZS5wcm92aWRlckRhdGE7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG91dHB1dDtcbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG59XG4vKipcbiAqIFRyYW5zbGF0ZXMgdGhlIG5vcm1hbGl6ZWQgdG9vbCBvdXRwdXQgaW50byB0aGUgcHJvdG9jb2wgYGlucHV0XypgIGl0ZW1zLiBUaGlzIGlzIHRoZSBsYXN0IGhvcFxuICogYmVmb3JlIHdlIGhhbmQgdGhlIGRhdGEgdG8gbW9kZWwtc3BlY2lmaWMgYWRhcHRlcnMsIHNvIHdlIGdlbmVyYXRlIHRoZSBleGFjdCBzY2hlbWEgZXhwZWN0ZWQgYnlcbiAqIHRoZSBwcm90b2NvbCBkZWZpbml0aW9ucy5cbiAqL1xuZnVuY3Rpb24gY29udmVydFN0cnVjdHVyZWRUb29sT3V0cHV0VG9JbnB1dEl0ZW0ob3V0cHV0KSB7XG4gICAgaWYgKG91dHB1dC50eXBlID09PSAndGV4dCcpIHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0ge1xuICAgICAgICAgICAgdHlwZTogJ2lucHV0X3RleHQnLFxuICAgICAgICAgICAgdGV4dDogb3V0cHV0LnRleHQsXG4gICAgICAgIH07XG4gICAgICAgIGlmIChvdXRwdXQucHJvdmlkZXJEYXRhKSB7XG4gICAgICAgICAgICByZXN1bHQucHJvdmlkZXJEYXRhID0gb3V0cHV0LnByb3ZpZGVyRGF0YTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbiAgICBpZiAob3V0cHV0LnR5cGUgPT09ICdpbWFnZScpIHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0geyB0eXBlOiAnaW5wdXRfaW1hZ2UnIH07XG4gICAgICAgIGlmICh0eXBlb2Ygb3V0cHV0LmRldGFpbCA9PT0gJ3N0cmluZycgJiYgb3V0cHV0LmRldGFpbC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICByZXN1bHQuZGV0YWlsID0gb3V0cHV0LmRldGFpbDtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIG91dHB1dC5pbWFnZSA9PT0gJ3N0cmluZycgJiYgb3V0cHV0LmltYWdlLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHJlc3VsdC5pbWFnZSA9IG91dHB1dC5pbWFnZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChpc1JlY29yZChvdXRwdXQuaW1hZ2UpKSB7XG4gICAgICAgICAgICBjb25zdCBpbWFnZU9iaiA9IG91dHB1dC5pbWFnZTtcbiAgICAgICAgICAgIGNvbnN0IGlubGluZU1lZGlhVHlwZSA9IGlzTm9uRW1wdHlTdHJpbmcoaW1hZ2VPYmoubWVkaWFUeXBlKVxuICAgICAgICAgICAgICAgID8gaW1hZ2VPYmoubWVkaWFUeXBlXG4gICAgICAgICAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgICAgICAgICBpZiAoaXNOb25FbXB0eVN0cmluZyhpbWFnZU9iai51cmwpKSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0LmltYWdlID0gaW1hZ2VPYmoudXJsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoaXNOb25FbXB0eVN0cmluZyhpbWFnZU9iai5kYXRhKSkge1xuICAgICAgICAgICAgICAgIHJlc3VsdC5pbWFnZSA9XG4gICAgICAgICAgICAgICAgICAgIGlubGluZU1lZGlhVHlwZSAmJiAhaW1hZ2VPYmouZGF0YS5zdGFydHNXaXRoKCdkYXRhOicpXG4gICAgICAgICAgICAgICAgICAgICAgICA/IGFzRGF0YVVybChpbWFnZU9iai5kYXRhLCBpbmxpbmVNZWRpYVR5cGUpXG4gICAgICAgICAgICAgICAgICAgICAgICA6IGltYWdlT2JqLmRhdGE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChpbWFnZU9iai5kYXRhIGluc3RhbmNlb2YgVWludDhBcnJheSAmJlxuICAgICAgICAgICAgICAgIGltYWdlT2JqLmRhdGEubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGJhc2U2NCA9IGVuY29kZVVpbnQ4QXJyYXlUb0Jhc2U2NChpbWFnZU9iai5kYXRhKTtcbiAgICAgICAgICAgICAgICByZXN1bHQuaW1hZ2UgPSBhc0RhdGFVcmwoYmFzZTY0LCBpbmxpbmVNZWRpYVR5cGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVmZXJlbmNlZElkID0gKGlzTm9uRW1wdHlTdHJpbmcoaW1hZ2VPYmouZmlsZUlkKSAmJiBpbWFnZU9iai5maWxlSWQpIHx8XG4gICAgICAgICAgICAgICAgICAgIChpc05vbkVtcHR5U3RyaW5nKGltYWdlT2JqLmlkKSAmJiBpbWFnZU9iai5pZCkgfHxcbiAgICAgICAgICAgICAgICAgICAgdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgIGlmIChyZWZlcmVuY2VkSWQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LmltYWdlID0geyBpZDogcmVmZXJlbmNlZElkIH07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChvdXRwdXQucHJvdmlkZXJEYXRhKSB7XG4gICAgICAgICAgICByZXN1bHQucHJvdmlkZXJEYXRhID0gb3V0cHV0LnByb3ZpZGVyRGF0YTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbiAgICBpZiAob3V0cHV0LnR5cGUgPT09ICdmaWxlJykge1xuICAgICAgICBjb25zdCByZXN1bHQgPSB7IHR5cGU6ICdpbnB1dF9maWxlJyB9O1xuICAgICAgICBjb25zdCBmaWxlVmFsdWUgPSBvdXRwdXQuZmlsZTtcbiAgICAgICAgaWYgKHR5cGVvZiBmaWxlVmFsdWUgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICByZXN1bHQuZmlsZSA9IGZpbGVWYWx1ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChmaWxlVmFsdWUgJiYgdHlwZW9mIGZpbGVWYWx1ZSA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgIGNvbnN0IHJlY29yZCA9IGZpbGVWYWx1ZTtcbiAgICAgICAgICAgIGlmICgnZGF0YScgaW4gcmVjb3JkICYmIHJlY29yZC5kYXRhKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbWVkaWFUeXBlID0gcmVjb3JkLm1lZGlhVHlwZSA/PyAndGV4dC9wbGFpbic7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiByZWNvcmQuZGF0YSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LmZpbGUgPSBhc0RhdGFVcmwocmVjb3JkLmRhdGEsIG1lZGlhVHlwZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBiYXNlNjQgPSBlbmNvZGVVaW50OEFycmF5VG9CYXNlNjQocmVjb3JkLmRhdGEpO1xuICAgICAgICAgICAgICAgICAgICByZXN1bHQuZmlsZSA9IGFzRGF0YVVybChiYXNlNjQsIG1lZGlhVHlwZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodHlwZW9mIHJlY29yZC51cmwgPT09ICdzdHJpbmcnICYmIHJlY29yZC51cmwubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIHJlc3VsdC5maWxlID0geyB1cmw6IHJlY29yZC51cmwgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlZmVyZW5jZWRJZCA9ICh0eXBlb2YgcmVjb3JkLmlkID09PSAnc3RyaW5nJyAmJlxuICAgICAgICAgICAgICAgICAgICByZWNvcmQuaWQubGVuZ3RoID4gMCAmJlxuICAgICAgICAgICAgICAgICAgICByZWNvcmQuaWQpIHx8XG4gICAgICAgICAgICAgICAgICAgICh0eXBlb2YgcmVjb3JkLmZpbGVJZCA9PT0gJ3N0cmluZycgJiYgcmVjb3JkLmZpbGVJZC5sZW5ndGggPiAwXG4gICAgICAgICAgICAgICAgICAgICAgICA/IHJlY29yZC5maWxlSWRcbiAgICAgICAgICAgICAgICAgICAgICAgIDogdW5kZWZpbmVkKTtcbiAgICAgICAgICAgICAgICBpZiAocmVmZXJlbmNlZElkKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdC5maWxlID0geyBpZDogcmVmZXJlbmNlZElkIH07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHR5cGVvZiByZWNvcmQuZmlsZW5hbWUgPT09ICdzdHJpbmcnICYmIHJlY29yZC5maWxlbmFtZS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0LmZpbGVuYW1lID0gcmVjb3JkLmZpbGVuYW1lO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChvdXRwdXQucHJvdmlkZXJEYXRhKSB7XG4gICAgICAgICAgICByZXN1bHQucHJvdmlkZXJEYXRhID0gb3V0cHV0LnByb3ZpZGVyRGF0YTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbiAgICBjb25zdCBleGhhdXN0aXZlQ2hlY2sgPSBvdXRwdXQ7XG4gICAgcmV0dXJuIGV4aGF1c3RpdmVDaGVjaztcbn1cbmZ1bmN0aW9uIGJ1aWxkSXRlbUZyZXF1ZW5jeU1hcChpdGVtcykge1xuICAgIGNvbnN0IGNvdW50cyA9IG5ldyBNYXAoKTtcbiAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgaXRlbXMpIHtcbiAgICAgICAgY29uc3Qga2V5ID0gc2Vzc2lvbkl0ZW1LZXkoaXRlbSk7XG4gICAgICAgIGNvdW50cy5zZXQoa2V5LCAoY291bnRzLmdldChrZXkpID8/IDApICsgMSk7XG4gICAgfVxuICAgIHJldHVybiBjb3VudHM7XG59XG5mdW5jdGlvbiBidWlsZEl0ZW1SZWZlcmVuY2VNYXAoaXRlbXMpIHtcbiAgICBjb25zdCByZWZzID0gbmV3IE1hcCgpO1xuICAgIGZvciAoY29uc3QgaXRlbSBvZiBpdGVtcykge1xuICAgICAgICBjb25zdCBrZXkgPSBzZXNzaW9uSXRlbUtleShpdGVtKTtcbiAgICAgICAgY29uc3QgbGlzdCA9IHJlZnMuZ2V0KGtleSk7XG4gICAgICAgIGlmIChsaXN0KSB7XG4gICAgICAgICAgICBsaXN0LnB1c2goaXRlbSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZWZzLnNldChrZXksIFtpdGVtXSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHJlZnM7XG59XG5mdW5jdGlvbiBjb25zdW1lUmVmZXJlbmNlKHJlZnMsIGtleSwgdGFyZ2V0KSB7XG4gICAgY29uc3QgY2FuZGlkYXRlcyA9IHJlZnMuZ2V0KGtleSk7XG4gICAgaWYgKCFjYW5kaWRhdGVzIHx8IGNhbmRpZGF0ZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgY29uc3QgaW5kZXggPSBjYW5kaWRhdGVzLmZpbmRJbmRleCgoY2FuZGlkYXRlKSA9PiBjYW5kaWRhdGUgPT09IHRhcmdldCk7XG4gICAgaWYgKGluZGV4ID09PSAtMSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGNhbmRpZGF0ZXMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICBpZiAoY2FuZGlkYXRlcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgcmVmcy5kZWxldGUoa2V5KTtcbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG59XG5mdW5jdGlvbiBkZWNyZW1lbnRDb3VudChtYXAsIGtleSkge1xuICAgIGNvbnN0IHJlbWFpbmluZyA9IChtYXAuZ2V0KGtleSkgPz8gMCkgLSAxO1xuICAgIGlmIChyZW1haW5pbmcgPD0gMCkge1xuICAgICAgICBtYXAuZGVsZXRlKGtleSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBtYXAuc2V0KGtleSwgcmVtYWluaW5nKTtcbiAgICB9XG59XG5mdW5jdGlvbiBzZXNzaW9uSXRlbUtleShpdGVtKSB7XG4gICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KGl0ZW0sIHNlc3Npb25TZXJpYWxpemF0aW9uUmVwbGFjZXIpO1xufVxuZnVuY3Rpb24gc2Vzc2lvblNlcmlhbGl6YXRpb25SZXBsYWNlcihfa2V5LCB2YWx1ZSkge1xuICAgIGlmICh2YWx1ZSBpbnN0YW5jZW9mIEFycmF5QnVmZmVyKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBfX3R5cGU6ICdBcnJheUJ1ZmZlcicsXG4gICAgICAgICAgICBkYXRhOiBlbmNvZGVVaW50OEFycmF5VG9CYXNlNjQobmV3IFVpbnQ4QXJyYXkodmFsdWUpKSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgaWYgKGlzQXJyYXlCdWZmZXJWaWV3KHZhbHVlKSkge1xuICAgICAgICBjb25zdCB2aWV3ID0gdmFsdWU7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBfX3R5cGU6IHZpZXcuY29uc3RydWN0b3IubmFtZSxcbiAgICAgICAgICAgIGRhdGE6IGVuY29kZVVpbnQ4QXJyYXlUb0Jhc2U2NChuZXcgVWludDhBcnJheSh2aWV3LmJ1ZmZlciwgdmlldy5ieXRlT2Zmc2V0LCB2aWV3LmJ5dGVMZW5ndGgpKSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgaWYgKGlzTm9kZUJ1ZmZlcih2YWx1ZSkpIHtcbiAgICAgICAgY29uc3QgdmlldyA9IHZhbHVlO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgX190eXBlOiAnQnVmZmVyJyxcbiAgICAgICAgICAgIGRhdGE6IGVuY29kZVVpbnQ4QXJyYXlUb0Jhc2U2NChuZXcgVWludDhBcnJheSh2aWV3LmJ1ZmZlciwgdmlldy5ieXRlT2Zmc2V0LCB2aWV3LmJ5dGVMZW5ndGgpKSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgaWYgKGlzU2VyaWFsaXplZEJ1ZmZlclNuYXBzaG90KHZhbHVlKSkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgX190eXBlOiAnQnVmZmVyJyxcbiAgICAgICAgICAgIGRhdGE6IGVuY29kZVVpbnQ4QXJyYXlUb0Jhc2U2NChVaW50OEFycmF5LmZyb20odmFsdWUuZGF0YSkpLFxuICAgICAgICB9O1xuICAgIH1cbiAgICByZXR1cm4gdmFsdWU7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1ydW5JbXBsZW1lbnRhdGlvbi5tanMubWFwIiwiaW1wb3J0IHsgeiB9IGZyb20gJ3pvZCc7XG5pbXBvcnQgeyBBZ2VudCB9IGZyb20gXCIuL2FnZW50Lm1qc1wiO1xuaW1wb3J0IHsgUnVuTWVzc2FnZU91dHB1dEl0ZW0sIFJ1blRvb2xBcHByb3ZhbEl0ZW0sIFJ1blRvb2xDYWxsSXRlbSwgUnVuVG9vbENhbGxPdXRwdXRJdGVtLCBSdW5SZWFzb25pbmdJdGVtLCBSdW5IYW5kb2ZmQ2FsbEl0ZW0sIFJ1bkhhbmRvZmZPdXRwdXRJdGVtLCB9IGZyb20gXCIuL2l0ZW1zLm1qc1wiO1xuaW1wb3J0IHsgUnVuQ29udGV4dCB9IGZyb20gXCIuL3J1bkNvbnRleHQubWpzXCI7XG5pbXBvcnQgeyBnZXRUdXJuSW5wdXQgfSBmcm9tIFwiLi9ydW4ubWpzXCI7XG5pbXBvcnQgeyBBZ2VudFRvb2xVc2VUcmFja2VyLCBuZXh0U3RlcFNjaGVtYSwgfSBmcm9tIFwiLi9ydW5JbXBsZW1lbnRhdGlvbi5tanNcIjtcbmltcG9ydCB7IFN5c3RlbUVycm9yLCBVc2VyRXJyb3IgfSBmcm9tIFwiLi9lcnJvcnMubWpzXCI7XG5pbXBvcnQgeyBnZXRHbG9iYWxUcmFjZVByb3ZpZGVyIH0gZnJvbSBcIi4vdHJhY2luZy9wcm92aWRlci5tanNcIjtcbmltcG9ydCB7IFVzYWdlIH0gZnJvbSBcIi4vdXNhZ2UubWpzXCI7XG5pbXBvcnQgeyBnZXRDdXJyZW50VHJhY2UgfSBmcm9tIFwiLi90cmFjaW5nL2luZGV4Lm1qc1wiO1xuaW1wb3J0IGxvZ2dlciBmcm9tIFwiLi9sb2dnZXIubWpzXCI7XG5pbXBvcnQgeyBoYW5kb2ZmIH0gZnJvbSBcIi4vaGFuZG9mZi5tanNcIjtcbmltcG9ydCAqIGFzIHByb3RvY29sIGZyb20gXCIuL3R5cGVzL3Byb3RvY29sLm1qc1wiO1xuaW1wb3J0IHsgc2FmZUV4ZWN1dGUgfSBmcm9tIFwiLi91dGlscy9zYWZlRXhlY3V0ZS5tanNcIjtcbi8qKlxuICogVGhlIHNjaGVtYSB2ZXJzaW9uIG9mIHRoZSBzZXJpYWxpemVkIHJ1biBzdGF0ZS4gVGhpcyBpcyB1c2VkIHRvIGVuc3VyZSB0aGF0IHRoZSBzZXJpYWxpemVkXG4gKiBydW4gc3RhdGUgaXMgY29tcGF0aWJsZSB3aXRoIHRoZSBjdXJyZW50IHZlcnNpb24gb2YgdGhlIFNESy5cbiAqIElmIGFueXRoaW5nIGluIHRoaXMgc2NoZW1hIGNoYW5nZXMsIHRoZSB2ZXJzaW9uIHdpbGwgaGF2ZSB0byBiZSBpbmNyZW1lbnRlZC5cbiAqL1xuZXhwb3J0IGNvbnN0IENVUlJFTlRfU0NIRU1BX1ZFUlNJT04gPSAnMS4wJztcbmNvbnN0ICRzY2hlbWFWZXJzaW9uID0gei5saXRlcmFsKENVUlJFTlRfU0NIRU1BX1ZFUlNJT04pO1xuY29uc3Qgc2VyaWFsaXplZEFnZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIG5hbWU6IHouc3RyaW5nKCksXG59KTtcbmNvbnN0IHNlcmlhbGl6ZWRTcGFuQmFzZSA9IHoub2JqZWN0KHtcbiAgICBvYmplY3Q6IHoubGl0ZXJhbCgndHJhY2Uuc3BhbicpLFxuICAgIGlkOiB6LnN0cmluZygpLFxuICAgIHRyYWNlX2lkOiB6LnN0cmluZygpLFxuICAgIHBhcmVudF9pZDogei5zdHJpbmcoKS5udWxsYWJsZSgpLFxuICAgIHN0YXJ0ZWRfYXQ6IHouc3RyaW5nKCkubnVsbGFibGUoKSxcbiAgICBlbmRlZF9hdDogei5zdHJpbmcoKS5udWxsYWJsZSgpLFxuICAgIGVycm9yOiB6XG4gICAgICAgIC5vYmplY3Qoe1xuICAgICAgICBtZXNzYWdlOiB6LnN0cmluZygpLFxuICAgICAgICBkYXRhOiB6LnJlY29yZCh6LnN0cmluZygpLCB6LmFueSgpKS5vcHRpb25hbCgpLFxuICAgIH0pXG4gICAgICAgIC5udWxsYWJsZSgpLFxuICAgIHNwYW5fZGF0YTogei5yZWNvcmQoei5zdHJpbmcoKSwgei5hbnkoKSksXG59KTtcbmNvbnN0IFNlcmlhbGl6ZWRTcGFuID0gc2VyaWFsaXplZFNwYW5CYXNlLmV4dGVuZCh7XG4gICAgcHJldmlvdXNfc3Bhbjogei5sYXp5KCgpID0+IFNlcmlhbGl6ZWRTcGFuKS5vcHRpb25hbCgpLFxufSk7XG5jb25zdCByZXF1ZXN0VXNhZ2VTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgaW5wdXRUb2tlbnM6IHoubnVtYmVyKCksXG4gICAgb3V0cHV0VG9rZW5zOiB6Lm51bWJlcigpLFxuICAgIHRvdGFsVG9rZW5zOiB6Lm51bWJlcigpLFxuICAgIGlucHV0VG9rZW5zRGV0YWlsczogei5yZWNvcmQoei5zdHJpbmcoKSwgei5udW1iZXIoKSkub3B0aW9uYWwoKSxcbiAgICBvdXRwdXRUb2tlbnNEZXRhaWxzOiB6LnJlY29yZCh6LnN0cmluZygpLCB6Lm51bWJlcigpKS5vcHRpb25hbCgpLFxuICAgIGVuZHBvaW50OiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG59KTtcbmNvbnN0IHVzYWdlU2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHJlcXVlc3RzOiB6Lm51bWJlcigpLFxuICAgIGlucHV0VG9rZW5zOiB6Lm51bWJlcigpLFxuICAgIG91dHB1dFRva2Vuczogei5udW1iZXIoKSxcbiAgICB0b3RhbFRva2Vuczogei5udW1iZXIoKSxcbiAgICBpbnB1dFRva2Vuc0RldGFpbHM6IHouYXJyYXkoei5yZWNvcmQoei5zdHJpbmcoKSwgei5udW1iZXIoKSkpLm9wdGlvbmFsKCksXG4gICAgb3V0cHV0VG9rZW5zRGV0YWlsczogei5hcnJheSh6LnJlY29yZCh6LnN0cmluZygpLCB6Lm51bWJlcigpKSkub3B0aW9uYWwoKSxcbiAgICByZXF1ZXN0VXNhZ2VFbnRyaWVzOiB6LmFycmF5KHJlcXVlc3RVc2FnZVNjaGVtYSkub3B0aW9uYWwoKSxcbn0pO1xuY29uc3QgbW9kZWxSZXNwb25zZVNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB1c2FnZTogdXNhZ2VTY2hlbWEsXG4gICAgb3V0cHV0OiB6LmFycmF5KHByb3RvY29sLk91dHB1dE1vZGVsSXRlbSksXG4gICAgcmVzcG9uc2VJZDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgIHByb3ZpZGVyRGF0YTogei5yZWNvcmQoei5zdHJpbmcoKSwgei5hbnkoKSkub3B0aW9uYWwoKSxcbn0pO1xuY29uc3QgaXRlbVNjaGVtYSA9IHouZGlzY3JpbWluYXRlZFVuaW9uKCd0eXBlJywgW1xuICAgIHoub2JqZWN0KHtcbiAgICAgICAgdHlwZTogei5saXRlcmFsKCdtZXNzYWdlX291dHB1dF9pdGVtJyksXG4gICAgICAgIHJhd0l0ZW06IHByb3RvY29sLkFzc2lzdGFudE1lc3NhZ2VJdGVtLFxuICAgICAgICBhZ2VudDogc2VyaWFsaXplZEFnZW50U2NoZW1hLFxuICAgIH0pLFxuICAgIHoub2JqZWN0KHtcbiAgICAgICAgdHlwZTogei5saXRlcmFsKCd0b29sX2NhbGxfaXRlbScpLFxuICAgICAgICByYXdJdGVtOiBwcm90b2NvbC5Ub29sQ2FsbEl0ZW0ub3IocHJvdG9jb2wuSG9zdGVkVG9vbENhbGxJdGVtKSxcbiAgICAgICAgYWdlbnQ6IHNlcmlhbGl6ZWRBZ2VudFNjaGVtYSxcbiAgICB9KSxcbiAgICB6Lm9iamVjdCh7XG4gICAgICAgIHR5cGU6IHoubGl0ZXJhbCgndG9vbF9jYWxsX291dHB1dF9pdGVtJyksXG4gICAgICAgIHJhd0l0ZW06IHByb3RvY29sLkZ1bmN0aW9uQ2FsbFJlc3VsdEl0ZW0sXG4gICAgICAgIGFnZW50OiBzZXJpYWxpemVkQWdlbnRTY2hlbWEsXG4gICAgICAgIG91dHB1dDogei5zdHJpbmcoKSxcbiAgICB9KSxcbiAgICB6Lm9iamVjdCh7XG4gICAgICAgIHR5cGU6IHoubGl0ZXJhbCgncmVhc29uaW5nX2l0ZW0nKSxcbiAgICAgICAgcmF3SXRlbTogcHJvdG9jb2wuUmVhc29uaW5nSXRlbSxcbiAgICAgICAgYWdlbnQ6IHNlcmlhbGl6ZWRBZ2VudFNjaGVtYSxcbiAgICB9KSxcbiAgICB6Lm9iamVjdCh7XG4gICAgICAgIHR5cGU6IHoubGl0ZXJhbCgnaGFuZG9mZl9jYWxsX2l0ZW0nKSxcbiAgICAgICAgcmF3SXRlbTogcHJvdG9jb2wuRnVuY3Rpb25DYWxsSXRlbSxcbiAgICAgICAgYWdlbnQ6IHNlcmlhbGl6ZWRBZ2VudFNjaGVtYSxcbiAgICB9KSxcbiAgICB6Lm9iamVjdCh7XG4gICAgICAgIHR5cGU6IHoubGl0ZXJhbCgnaGFuZG9mZl9vdXRwdXRfaXRlbScpLFxuICAgICAgICByYXdJdGVtOiBwcm90b2NvbC5GdW5jdGlvbkNhbGxSZXN1bHRJdGVtLFxuICAgICAgICBzb3VyY2VBZ2VudDogc2VyaWFsaXplZEFnZW50U2NoZW1hLFxuICAgICAgICB0YXJnZXRBZ2VudDogc2VyaWFsaXplZEFnZW50U2NoZW1hLFxuICAgIH0pLFxuICAgIHoub2JqZWN0KHtcbiAgICAgICAgdHlwZTogei5saXRlcmFsKCd0b29sX2FwcHJvdmFsX2l0ZW0nKSxcbiAgICAgICAgcmF3SXRlbTogcHJvdG9jb2wuRnVuY3Rpb25DYWxsSXRlbS5vcihwcm90b2NvbC5Ib3N0ZWRUb29sQ2FsbEl0ZW0pXG4gICAgICAgICAgICAub3IocHJvdG9jb2wuU2hlbGxDYWxsSXRlbSlcbiAgICAgICAgICAgIC5vcihwcm90b2NvbC5BcHBseVBhdGNoQ2FsbEl0ZW0pLFxuICAgICAgICBhZ2VudDogc2VyaWFsaXplZEFnZW50U2NoZW1hLFxuICAgICAgICB0b29sTmFtZTogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgIH0pLFxuXSk7XG5jb25zdCBzZXJpYWxpemVkVHJhY2VTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgb2JqZWN0OiB6LmxpdGVyYWwoJ3RyYWNlJyksXG4gICAgaWQ6IHouc3RyaW5nKCksXG4gICAgd29ya2Zsb3dfbmFtZTogei5zdHJpbmcoKSxcbiAgICBncm91cF9pZDogei5zdHJpbmcoKS5udWxsYWJsZSgpLFxuICAgIG1ldGFkYXRhOiB6LnJlY29yZCh6LnN0cmluZygpLCB6LmFueSgpKSxcbn0pO1xuY29uc3Qgc2VyaWFsaXplZFByb2Nlc3NlZFJlc3BvbnNlU2NoZW1hID0gei5vYmplY3Qoe1xuICAgIG5ld0l0ZW1zOiB6LmFycmF5KGl0ZW1TY2hlbWEpLFxuICAgIHRvb2xzVXNlZDogei5hcnJheSh6LnN0cmluZygpKSxcbiAgICBoYW5kb2Zmczogei5hcnJheSh6Lm9iamVjdCh7XG4gICAgICAgIHRvb2xDYWxsOiB6LmFueSgpLFxuICAgICAgICBoYW5kb2ZmOiB6LmFueSgpLFxuICAgIH0pKSxcbiAgICBmdW5jdGlvbnM6IHouYXJyYXkoei5vYmplY3Qoe1xuICAgICAgICB0b29sQ2FsbDogei5hbnkoKSxcbiAgICAgICAgdG9vbDogei5hbnkoKSxcbiAgICB9KSksXG4gICAgY29tcHV0ZXJBY3Rpb25zOiB6LmFycmF5KHoub2JqZWN0KHtcbiAgICAgICAgdG9vbENhbGw6IHouYW55KCksXG4gICAgICAgIGNvbXB1dGVyOiB6LmFueSgpLFxuICAgIH0pKSxcbiAgICBzaGVsbEFjdGlvbnM6IHpcbiAgICAgICAgLmFycmF5KHoub2JqZWN0KHtcbiAgICAgICAgdG9vbENhbGw6IHouYW55KCksXG4gICAgICAgIHNoZWxsOiB6LmFueSgpLFxuICAgIH0pKVxuICAgICAgICAub3B0aW9uYWwoKSxcbiAgICBhcHBseVBhdGNoQWN0aW9uczogelxuICAgICAgICAuYXJyYXkoei5vYmplY3Qoe1xuICAgICAgICB0b29sQ2FsbDogei5hbnkoKSxcbiAgICAgICAgYXBwbHlQYXRjaDogei5hbnkoKSxcbiAgICB9KSlcbiAgICAgICAgLm9wdGlvbmFsKCksXG4gICAgbWNwQXBwcm92YWxSZXF1ZXN0czogelxuICAgICAgICAuYXJyYXkoei5vYmplY3Qoe1xuICAgICAgICByZXF1ZXN0SXRlbTogei5vYmplY3Qoe1xuICAgICAgICAgICAgLy8gcHJvdG9jb2wuSG9zdGVkVG9vbENhbGxJdGVtXG4gICAgICAgICAgICByYXdJdGVtOiB6Lm9iamVjdCh7XG4gICAgICAgICAgICAgICAgdHlwZTogei5saXRlcmFsKCdob3N0ZWRfdG9vbF9jYWxsJyksXG4gICAgICAgICAgICAgICAgbmFtZTogei5zdHJpbmcoKSxcbiAgICAgICAgICAgICAgICBhcmd1bWVudHM6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICAgICAgICAgICAgICBzdGF0dXM6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICAgICAgICAgICAgICBvdXRwdXQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICAgICAgICAgICAgICAvLyB0aGlzIGFsd2F5cyBleGlzdHMgYnV0IG1hcmtlZCBhcyBvcHRpb25hbCBmb3IgZWFybHkgdmVyc2lvbiBjb21wYXRpYmlsaXR5OyB3aGVuIHJlbGVhc2luZyAxLjAsIHdlIGNhbiByZW1vdmUgdGhlIG51bGxhYmxlIGFuZCBvcHRpb25hbFxuICAgICAgICAgICAgICAgIHByb3ZpZGVyRGF0YTogei5yZWNvcmQoei5zdHJpbmcoKSwgei5hbnkoKSkubnVsbGFibGUoKS5vcHRpb25hbCgpLFxuICAgICAgICAgICAgfSksXG4gICAgICAgIH0pLFxuICAgICAgICAvLyBIb3N0ZWRNQ1BUb29sXG4gICAgICAgIG1jcFRvb2w6IHoub2JqZWN0KHtcbiAgICAgICAgICAgIHR5cGU6IHoubGl0ZXJhbCgnaG9zdGVkX3Rvb2wnKSxcbiAgICAgICAgICAgIG5hbWU6IHoubGl0ZXJhbCgnaG9zdGVkX21jcCcpLFxuICAgICAgICAgICAgcHJvdmlkZXJEYXRhOiB6LnJlY29yZCh6LnN0cmluZygpLCB6LmFueSgpKSxcbiAgICAgICAgfSksXG4gICAgfSkpXG4gICAgICAgIC5vcHRpb25hbCgpLFxufSk7XG5jb25zdCBndWFyZHJhaWxGdW5jdGlvbk91dHB1dFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0cmlwd2lyZVRyaWdnZXJlZDogei5ib29sZWFuKCksXG4gICAgb3V0cHV0SW5mbzogei5hbnkoKSxcbn0pO1xuY29uc3QgaW5wdXRHdWFyZHJhaWxSZXN1bHRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgZ3VhcmRyYWlsOiB6Lm9iamVjdCh7XG4gICAgICAgIHR5cGU6IHoubGl0ZXJhbCgnaW5wdXQnKSxcbiAgICAgICAgbmFtZTogei5zdHJpbmcoKSxcbiAgICB9KSxcbiAgICBvdXRwdXQ6IGd1YXJkcmFpbEZ1bmN0aW9uT3V0cHV0U2NoZW1hLFxufSk7XG5jb25zdCBvdXRwdXRHdWFyZHJhaWxSZXN1bHRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgZ3VhcmRyYWlsOiB6Lm9iamVjdCh7XG4gICAgICAgIHR5cGU6IHoubGl0ZXJhbCgnb3V0cHV0JyksXG4gICAgICAgIG5hbWU6IHouc3RyaW5nKCksXG4gICAgfSksXG4gICAgYWdlbnRPdXRwdXQ6IHouYW55KCksXG4gICAgYWdlbnQ6IHNlcmlhbGl6ZWRBZ2VudFNjaGVtYSxcbiAgICBvdXRwdXQ6IGd1YXJkcmFpbEZ1bmN0aW9uT3V0cHV0U2NoZW1hLFxufSk7XG5leHBvcnQgY29uc3QgU2VyaWFsaXplZFJ1blN0YXRlID0gei5vYmplY3Qoe1xuICAgICRzY2hlbWFWZXJzaW9uLFxuICAgIGN1cnJlbnRUdXJuOiB6Lm51bWJlcigpLFxuICAgIGN1cnJlbnRBZ2VudDogc2VyaWFsaXplZEFnZW50U2NoZW1hLFxuICAgIG9yaWdpbmFsSW5wdXQ6IHouc3RyaW5nKCkub3Ioei5hcnJheShwcm90b2NvbC5Nb2RlbEl0ZW0pKSxcbiAgICBtb2RlbFJlc3BvbnNlczogei5hcnJheShtb2RlbFJlc3BvbnNlU2NoZW1hKSxcbiAgICBjb250ZXh0OiB6Lm9iamVjdCh7XG4gICAgICAgIHVzYWdlOiB1c2FnZVNjaGVtYSxcbiAgICAgICAgYXBwcm92YWxzOiB6LnJlY29yZCh6LnN0cmluZygpLCB6Lm9iamVjdCh7XG4gICAgICAgICAgICBhcHByb3ZlZDogei5hcnJheSh6LnN0cmluZygpKS5vcih6LmJvb2xlYW4oKSksXG4gICAgICAgICAgICByZWplY3RlZDogei5hcnJheSh6LnN0cmluZygpKS5vcih6LmJvb2xlYW4oKSksXG4gICAgICAgIH0pKSxcbiAgICAgICAgY29udGV4dDogei5yZWNvcmQoei5zdHJpbmcoKSwgei5hbnkoKSksXG4gICAgfSksXG4gICAgdG9vbFVzZVRyYWNrZXI6IHoucmVjb3JkKHouc3RyaW5nKCksIHouYXJyYXkoei5zdHJpbmcoKSkpLFxuICAgIG1heFR1cm5zOiB6Lm51bWJlcigpLFxuICAgIGN1cnJlbnRBZ2VudFNwYW46IFNlcmlhbGl6ZWRTcGFuLm51bGxhYmxlKCkub3B0aW9uYWwoKSxcbiAgICBub0FjdGl2ZUFnZW50UnVuOiB6LmJvb2xlYW4oKSxcbiAgICBpbnB1dEd1YXJkcmFpbFJlc3VsdHM6IHouYXJyYXkoaW5wdXRHdWFyZHJhaWxSZXN1bHRTY2hlbWEpLFxuICAgIG91dHB1dEd1YXJkcmFpbFJlc3VsdHM6IHouYXJyYXkob3V0cHV0R3VhcmRyYWlsUmVzdWx0U2NoZW1hKSxcbiAgICBjdXJyZW50U3RlcDogbmV4dFN0ZXBTY2hlbWEub3B0aW9uYWwoKSxcbiAgICBsYXN0TW9kZWxSZXNwb25zZTogbW9kZWxSZXNwb25zZVNjaGVtYS5vcHRpb25hbCgpLFxuICAgIGdlbmVyYXRlZEl0ZW1zOiB6LmFycmF5KGl0ZW1TY2hlbWEpLFxuICAgIGxhc3RQcm9jZXNzZWRSZXNwb25zZTogc2VyaWFsaXplZFByb2Nlc3NlZFJlc3BvbnNlU2NoZW1hLm9wdGlvbmFsKCksXG4gICAgY3VycmVudFR1cm5QZXJzaXN0ZWRJdGVtQ291bnQ6IHoubnVtYmVyKCkuaW50KCkubWluKDApLm9wdGlvbmFsKCksXG4gICAgdHJhY2U6IHNlcmlhbGl6ZWRUcmFjZVNjaGVtYS5udWxsYWJsZSgpLFxufSk7XG4vKipcbiAqIFNlcmlhbGl6YWJsZSBzbmFwc2hvdCBvZiBhbiBhZ2VudCdzIHJ1biwgaW5jbHVkaW5nIGNvbnRleHQsIHVzYWdlIGFuZCB0cmFjZS5cbiAqIFdoaWxlIHRoaXMgY2xhc3MgaGFzIHB1YmxpY2x5IHdyaXRhYmxlIHByb3BlcnRpZXMgKHByZWZpeGVkIHdpdGggYF9gKSwgdGhleSBhcmUgbm90IG1lYW50IHRvIGJlXG4gKiB1c2VkIGRpcmVjdGx5LiBUbyByZWFkIHRoZXNlIHByb3BlcnRpZXMsIHVzZSB0aGUgYFJ1blJlc3VsdGAgaW5zdGVhZC5cbiAqXG4gKiBNYW5pcHVsYXRpb24gb2YgdGhlIHN0YXRlIGRpcmVjdGx5IGNhbiBsZWFkIHRvIHVuZXhwZWN0ZWQgYmVoYXZpb3IgYW5kIHNob3VsZCBiZSBhdm9pZGVkLlxuICogSW5zdGVhZCwgdXNlIHRoZSBgYXBwcm92ZWAgYW5kIGByZWplY3RgIG1ldGhvZHMgdG8gaW50ZXJhY3Qgd2l0aCB0aGUgc3RhdGUuXG4gKi9cbmV4cG9ydCBjbGFzcyBSdW5TdGF0ZSB7XG4gICAgLyoqXG4gICAgICogQ3VycmVudCB0dXJuIG51bWJlciBpbiB0aGUgY29udmVyc2F0aW9uLlxuICAgICAqL1xuICAgIF9jdXJyZW50VHVybiA9IDA7XG4gICAgLyoqXG4gICAgICogVGhlIGFnZW50IGN1cnJlbnRseSBoYW5kbGluZyB0aGUgY29udmVyc2F0aW9uLlxuICAgICAqL1xuICAgIF9jdXJyZW50QWdlbnQ7XG4gICAgLyoqXG4gICAgICogT3JpZ2luYWwgdXNlciBpbnB1dCBwcmlvciB0byBhbnkgcHJvY2Vzc2luZy5cbiAgICAgKi9cbiAgICBfb3JpZ2luYWxJbnB1dDtcbiAgICAvKipcbiAgICAgKiBSZXNwb25zZXMgZnJvbSB0aGUgbW9kZWwgc28gZmFyLlxuICAgICAqL1xuICAgIF9tb2RlbFJlc3BvbnNlcztcbiAgICAvKipcbiAgICAgKiBBY3RpdmUgdHJhY2luZyBzcGFuIGZvciB0aGUgY3VycmVudCBhZ2VudCBpZiB0cmFjaW5nIGlzIGVuYWJsZWQuXG4gICAgICovXG4gICAgX2N1cnJlbnRBZ2VudFNwYW47XG4gICAgLyoqXG4gICAgICogUnVuIGNvbnRleHQgdHJhY2tpbmcgYXBwcm92YWxzLCB1c2FnZSwgYW5kIG90aGVyIG1ldGFkYXRhLlxuICAgICAqL1xuICAgIF9jb250ZXh0O1xuICAgIC8qKlxuICAgICAqIFRoZSB1c2FnZSBhZ2dyZWdhdGVkIGZvciB0aGlzIHJ1bi4gVGhpcyBpbmNsdWRlcyBwZXItcmVxdWVzdCBicmVha2Rvd25zIHdoZW4gYXZhaWxhYmxlLlxuICAgICAqL1xuICAgIGdldCB1c2FnZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NvbnRleHQudXNhZ2U7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRyYWNrcyB3aGF0IHRvb2xzIGVhY2ggYWdlbnQgaGFzIHVzZWQuXG4gICAgICovXG4gICAgX3Rvb2xVc2VUcmFja2VyO1xuICAgIC8qKlxuICAgICAqIEl0ZW1zIGdlbmVyYXRlZCBieSB0aGUgYWdlbnQgZHVyaW5nIHRoZSBydW4uXG4gICAgICovXG4gICAgX2dlbmVyYXRlZEl0ZW1zO1xuICAgIC8qKlxuICAgICAqIE51bWJlciBvZiBgX2dlbmVyYXRlZEl0ZW1zYCBhbHJlYWR5IGZsdXNoZWQgdG8gc2Vzc2lvbiBzdG9yYWdlIGZvciB0aGUgY3VycmVudCB0dXJuLlxuICAgICAqXG4gICAgICogUGVyc2lzdGluZyB0aGUgZW50aXJlIHR1cm4gb24gZXZlcnkgc2F2ZSB3b3VsZCBkdXBsaWNhdGUgcmVzcG9uc2VzIGFuZCB0b29sIG91dHB1dHMuXG4gICAgICogSW5zdGVhZCwgYHNhdmVUb1Nlc3Npb25gIGFwcGVuZHMgb25seSB0aGUgZGVsdGEgc2luY2UgdGhlIHByZXZpb3VzIHdyaXRlLiBUaGlzIGNvdW50ZXJcbiAgICAgKiB0cmFja3MgaG93IG1hbnkgZ2VuZXJhdGVkIHJ1biBpdGVtcyBmcm9tICp0aGlzIHR1cm4qIHdlcmUgYWxyZWFkeSB3cml0dGVuIHNvIHRoZSBuZXh0XG4gICAgICogc2F2ZSBjYW4gc2xpY2Ugb2ZmIG9ubHkgdGhlIG5ldyBlbnRyaWVzLiBXaGVuIGEgdHVybiBpcyBpbnRlcnJ1cHRlZCAoZS5nLiwgYXdhaXRpbmcgdG9vbFxuICAgICAqIGFwcHJvdmFsKSBhbmQgbGF0ZXIgcmVzdW1lZCwgd2UgcmV3aW5kIHRoZSBjb3VudGVyIGJlZm9yZSBjb250aW51aW5nIHNvIHRoZSBwZW5kaW5nIHRvb2xcbiAgICAgKiBvdXRwdXQgc3RpbGwgZ2V0cyBzdG9yZWQuXG4gICAgICovXG4gICAgX2N1cnJlbnRUdXJuUGVyc2lzdGVkSXRlbUNvdW50O1xuICAgIC8qKlxuICAgICAqIE1heGltdW0gYWxsb3dlZCB0dXJucyBiZWZvcmUgZm9yY2luZyB0ZXJtaW5hdGlvbi5cbiAgICAgKi9cbiAgICBfbWF4VHVybnM7XG4gICAgLyoqXG4gICAgICogV2hldGhlciB0aGUgcnVuIGhhcyBhbiBhY3RpdmUgYWdlbnQgc3RlcCBpbiBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBfbm9BY3RpdmVBZ2VudFJ1biA9IHRydWU7XG4gICAgLyoqXG4gICAgICogTGFzdCBtb2RlbCByZXNwb25zZSBmb3IgdGhlIHByZXZpb3VzIHR1cm4uXG4gICAgICovXG4gICAgX2xhc3RUdXJuUmVzcG9uc2U7XG4gICAgLyoqXG4gICAgICogUmVzdWx0cyBmcm9tIGlucHV0IGd1YXJkcmFpbHMgYXBwbGllZCB0byB0aGUgcnVuLlxuICAgICAqL1xuICAgIF9pbnB1dEd1YXJkcmFpbFJlc3VsdHM7XG4gICAgLyoqXG4gICAgICogUmVzdWx0cyBmcm9tIG91dHB1dCBndWFyZHJhaWxzIGFwcGxpZWQgdG8gdGhlIHJ1bi5cbiAgICAgKi9cbiAgICBfb3V0cHV0R3VhcmRyYWlsUmVzdWx0cztcbiAgICAvKipcbiAgICAgKiBOZXh0IHN0ZXAgY29tcHV0ZWQgZm9yIHRoZSBhZ2VudCB0byB0YWtlLlxuICAgICAqL1xuICAgIF9jdXJyZW50U3RlcCA9IHVuZGVmaW5lZDtcbiAgICAvKipcbiAgICAgKiBQYXJzZWQgbW9kZWwgcmVzcG9uc2UgYWZ0ZXIgYXBwbHlpbmcgZ3VhcmRyYWlscyBhbmQgdG9vbHMuXG4gICAgICovXG4gICAgX2xhc3RQcm9jZXNzZWRSZXNwb25zZSA9IHVuZGVmaW5lZDtcbiAgICAvKipcbiAgICAgKiBUcmFjZSBhc3NvY2lhdGVkIHdpdGggdGhpcyBydW4gaWYgdHJhY2luZyBpcyBlbmFibGVkLlxuICAgICAqL1xuICAgIF90cmFjZSA9IG51bGw7XG4gICAgY29uc3RydWN0b3IoY29udGV4dCwgb3JpZ2luYWxJbnB1dCwgc3RhcnRpbmdBZ2VudCwgbWF4VHVybnMpIHtcbiAgICAgICAgdGhpcy5fY29udGV4dCA9IGNvbnRleHQ7XG4gICAgICAgIHRoaXMuX29yaWdpbmFsSW5wdXQgPSBzdHJ1Y3R1cmVkQ2xvbmUob3JpZ2luYWxJbnB1dCk7XG4gICAgICAgIHRoaXMuX21vZGVsUmVzcG9uc2VzID0gW107XG4gICAgICAgIHRoaXMuX2N1cnJlbnRBZ2VudFNwYW4gPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMuX2N1cnJlbnRBZ2VudCA9IHN0YXJ0aW5nQWdlbnQ7XG4gICAgICAgIHRoaXMuX3Rvb2xVc2VUcmFja2VyID0gbmV3IEFnZW50VG9vbFVzZVRyYWNrZXIoKTtcbiAgICAgICAgdGhpcy5fZ2VuZXJhdGVkSXRlbXMgPSBbXTtcbiAgICAgICAgdGhpcy5fY3VycmVudFR1cm5QZXJzaXN0ZWRJdGVtQ291bnQgPSAwO1xuICAgICAgICB0aGlzLl9tYXhUdXJucyA9IG1heFR1cm5zO1xuICAgICAgICB0aGlzLl9pbnB1dEd1YXJkcmFpbFJlc3VsdHMgPSBbXTtcbiAgICAgICAgdGhpcy5fb3V0cHV0R3VhcmRyYWlsUmVzdWx0cyA9IFtdO1xuICAgICAgICB0aGlzLl90cmFjZSA9IGdldEN1cnJlbnRUcmFjZSgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgaGlzdG9yeSBvZiB0aGUgYWdlbnQgcnVuLiBUaGlzIGluY2x1ZGVzIHRoZSBpbnB1dCBpdGVtcyBhbmQgdGhlIG5ldyBpdGVtcyBnZW5lcmF0ZWQgZHVyaW5nIHRoZSBydW4uXG4gICAgICpcbiAgICAgKiBUaGlzIGNhbiBiZSB1c2VkIGFzIGlucHV0cyBmb3IgdGhlIG5leHQgYWdlbnQgcnVuLlxuICAgICAqL1xuICAgIGdldCBoaXN0b3J5KCkge1xuICAgICAgICByZXR1cm4gZ2V0VHVybklucHV0KHRoaXMuX29yaWdpbmFsSW5wdXQsIHRoaXMuX2dlbmVyYXRlZEl0ZW1zKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhbGwgaW50ZXJydXB0aW9ucyBpZiB0aGUgY3VycmVudCBzdGVwIGlzIGFuIGludGVycnVwdGlvbiBvdGhlcndpc2UgcmV0dXJucyBhbiBlbXB0eSBhcnJheS5cbiAgICAgKi9cbiAgICBnZXRJbnRlcnJ1cHRpb25zKCkge1xuICAgICAgICBpZiAodGhpcy5fY3VycmVudFN0ZXA/LnR5cGUgIT09ICduZXh0X3N0ZXBfaW50ZXJydXB0aW9uJykge1xuICAgICAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLl9jdXJyZW50U3RlcC5kYXRhLmludGVycnVwdGlvbnM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFwcHJvdmVzIGEgdG9vbCBjYWxsIHJlcXVlc3RlZCBieSB0aGUgYWdlbnQgdGhyb3VnaCBhbiBpbnRlcnJ1cHRpb24gYW5kIGFwcHJvdmFsIGl0ZW0gcmVxdWVzdC5cbiAgICAgKlxuICAgICAqIFRvIGFwcHJvdmUgdGhlIHJlcXVlc3QgdXNlIHRoaXMgbWV0aG9kIGFuZCB0aGVuIHJ1biB0aGUgYWdlbnQgYWdhaW4gd2l0aCB0aGUgc2FtZSBzdGF0ZSBvYmplY3RcbiAgICAgKiB0byBjb250aW51ZSB0aGUgZXhlY3V0aW9uLlxuICAgICAqXG4gICAgICogQnkgZGVmYXVsdCBpdCB3aWxsIG9ubHkgYXBwcm92ZSB0aGUgY3VycmVudCB0b29sIGNhbGwuIFRvIGFsbG93IHRoZSB0b29sIHRvIGJlIHVzZWQgbXVsdGlwbGVcbiAgICAgKiB0aW1lcyB0aHJvdWdob3V0IHRoZSBydW4sIHNldCB0aGUgYGFsd2F5c0FwcHJvdmVgIG9wdGlvbiB0byBgdHJ1ZWAuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gYXBwcm92YWxJdGVtIC0gVGhlIHRvb2wgY2FsbCBhcHByb3ZhbCBpdGVtIHRvIGFwcHJvdmUuXG4gICAgICogQHBhcmFtIG9wdGlvbnMgLSBPcHRpb25zIGZvciB0aGUgYXBwcm92YWwuXG4gICAgICovXG4gICAgYXBwcm92ZShhcHByb3ZhbEl0ZW0sIG9wdGlvbnMgPSB7IGFsd2F5c0FwcHJvdmU6IGZhbHNlIH0pIHtcbiAgICAgICAgdGhpcy5fY29udGV4dC5hcHByb3ZlVG9vbChhcHByb3ZhbEl0ZW0sIG9wdGlvbnMpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZWplY3RzIGEgdG9vbCBjYWxsIHJlcXVlc3RlZCBieSB0aGUgYWdlbnQgdGhyb3VnaCBhbiBpbnRlcnJ1cHRpb24gYW5kIGFwcHJvdmFsIGl0ZW0gcmVxdWVzdC5cbiAgICAgKlxuICAgICAqIFRvIHJlamVjdCB0aGUgcmVxdWVzdCB1c2UgdGhpcyBtZXRob2QgYW5kIHRoZW4gcnVuIHRoZSBhZ2VudCBhZ2FpbiB3aXRoIHRoZSBzYW1lIHN0YXRlIG9iamVjdFxuICAgICAqIHRvIGNvbnRpbnVlIHRoZSBleGVjdXRpb24uXG4gICAgICpcbiAgICAgKiBCeSBkZWZhdWx0IGl0IHdpbGwgb25seSByZWplY3QgdGhlIGN1cnJlbnQgdG9vbCBjYWxsLiBUbyBhbGxvdyB0aGUgdG9vbCB0byBiZSB1c2VkIG11bHRpcGxlXG4gICAgICogdGltZXMgdGhyb3VnaG91dCB0aGUgcnVuLCBzZXQgdGhlIGBhbHdheXNSZWplY3RgIG9wdGlvbiB0byBgdHJ1ZWAuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gYXBwcm92YWxJdGVtIC0gVGhlIHRvb2wgY2FsbCBhcHByb3ZhbCBpdGVtIHRvIHJlamVjdC5cbiAgICAgKiBAcGFyYW0gb3B0aW9ucyAtIE9wdGlvbnMgZm9yIHRoZSByZWplY3Rpb24uXG4gICAgICovXG4gICAgcmVqZWN0KGFwcHJvdmFsSXRlbSwgb3B0aW9ucyA9IHsgYWx3YXlzUmVqZWN0OiBmYWxzZSB9KSB7XG4gICAgICAgIHRoaXMuX2NvbnRleHQucmVqZWN0VG9vbChhcHByb3ZhbEl0ZW0sIG9wdGlvbnMpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXJpYWxpemVzIHRoZSBydW4gc3RhdGUgdG8gYSBKU09OIG9iamVjdC5cbiAgICAgKlxuICAgICAqIFRoaXMgbWV0aG9kIGlzIHVzZWQgdG8gc2VyaWFsaXplIHRoZSBydW4gc3RhdGUgdG8gYSBKU09OIG9iamVjdCB0aGF0IGNhbiBiZSB1c2VkIHRvXG4gICAgICogcmVzdW1lIHRoZSBydW4gbGF0ZXIuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBUaGUgc2VyaWFsaXplZCBydW4gc3RhdGUuXG4gICAgICovXG4gICAgdG9KU09OKCkge1xuICAgICAgICBjb25zdCBvdXRwdXQgPSB7XG4gICAgICAgICAgICAkc2NoZW1hVmVyc2lvbjogQ1VSUkVOVF9TQ0hFTUFfVkVSU0lPTixcbiAgICAgICAgICAgIGN1cnJlbnRUdXJuOiB0aGlzLl9jdXJyZW50VHVybixcbiAgICAgICAgICAgIGN1cnJlbnRBZ2VudDoge1xuICAgICAgICAgICAgICAgIG5hbWU6IHRoaXMuX2N1cnJlbnRBZ2VudC5uYW1lLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG9yaWdpbmFsSW5wdXQ6IHRoaXMuX29yaWdpbmFsSW5wdXQsXG4gICAgICAgICAgICBtb2RlbFJlc3BvbnNlczogdGhpcy5fbW9kZWxSZXNwb25zZXMubWFwKChyZXNwb25zZSkgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIHVzYWdlOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXF1ZXN0czogcmVzcG9uc2UudXNhZ2UucmVxdWVzdHMsXG4gICAgICAgICAgICAgICAgICAgICAgICBpbnB1dFRva2VuczogcmVzcG9uc2UudXNhZ2UuaW5wdXRUb2tlbnMsXG4gICAgICAgICAgICAgICAgICAgICAgICBvdXRwdXRUb2tlbnM6IHJlc3BvbnNlLnVzYWdlLm91dHB1dFRva2VucyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvdGFsVG9rZW5zOiByZXNwb25zZS51c2FnZS50b3RhbFRva2VucyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0VG9rZW5zRGV0YWlsczogcmVzcG9uc2UudXNhZ2UuaW5wdXRUb2tlbnNEZXRhaWxzLFxuICAgICAgICAgICAgICAgICAgICAgICAgb3V0cHV0VG9rZW5zRGV0YWlsczogcmVzcG9uc2UudXNhZ2Uub3V0cHV0VG9rZW5zRGV0YWlscyxcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLihyZXNwb25zZS51c2FnZS5yZXF1ZXN0VXNhZ2VFbnRyaWVzICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UudXNhZ2UucmVxdWVzdFVzYWdlRW50cmllcy5sZW5ndGggPiAwXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPyB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVlc3RVc2FnZUVudHJpZXM6IHJlc3BvbnNlLnVzYWdlLnJlcXVlc3RVc2FnZUVudHJpZXMubWFwKChlbnRyeSkgPT4gKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0VG9rZW5zOiBlbnRyeS5pbnB1dFRva2VucyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG91dHB1dFRva2VuczogZW50cnkub3V0cHV0VG9rZW5zLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG90YWxUb2tlbnM6IGVudHJ5LnRvdGFsVG9rZW5zLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXRUb2tlbnNEZXRhaWxzOiBlbnRyeS5pbnB1dFRva2Vuc0RldGFpbHMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvdXRwdXRUb2tlbnNEZXRhaWxzOiBlbnRyeS5vdXRwdXRUb2tlbnNEZXRhaWxzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uKGVudHJ5LmVuZHBvaW50ID8geyBlbmRwb2ludDogZW50cnkuZW5kcG9pbnQgfSA6IHt9KSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IHt9KSxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgb3V0cHV0OiByZXNwb25zZS5vdXRwdXQsXG4gICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlSWQ6IHJlc3BvbnNlLnJlc3BvbnNlSWQsXG4gICAgICAgICAgICAgICAgICAgIHByb3ZpZGVyRGF0YTogcmVzcG9uc2UucHJvdmlkZXJEYXRhLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIGNvbnRleHQ6IHRoaXMuX2NvbnRleHQudG9KU09OKCksXG4gICAgICAgICAgICB0b29sVXNlVHJhY2tlcjogdGhpcy5fdG9vbFVzZVRyYWNrZXIudG9KU09OKCksXG4gICAgICAgICAgICBtYXhUdXJuczogdGhpcy5fbWF4VHVybnMsXG4gICAgICAgICAgICBjdXJyZW50QWdlbnRTcGFuOiB0aGlzLl9jdXJyZW50QWdlbnRTcGFuPy50b0pTT04oKSxcbiAgICAgICAgICAgIG5vQWN0aXZlQWdlbnRSdW46IHRoaXMuX25vQWN0aXZlQWdlbnRSdW4sXG4gICAgICAgICAgICBpbnB1dEd1YXJkcmFpbFJlc3VsdHM6IHRoaXMuX2lucHV0R3VhcmRyYWlsUmVzdWx0cyxcbiAgICAgICAgICAgIG91dHB1dEd1YXJkcmFpbFJlc3VsdHM6IHRoaXMuX291dHB1dEd1YXJkcmFpbFJlc3VsdHMubWFwKChyKSA9PiAoe1xuICAgICAgICAgICAgICAgIC4uLnIsXG4gICAgICAgICAgICAgICAgYWdlbnQ6IHIuYWdlbnQudG9KU09OKCksXG4gICAgICAgICAgICB9KSksXG4gICAgICAgICAgICBjdXJyZW50U3RlcDogdGhpcy5fY3VycmVudFN0ZXAsXG4gICAgICAgICAgICBsYXN0TW9kZWxSZXNwb25zZTogdGhpcy5fbGFzdFR1cm5SZXNwb25zZSxcbiAgICAgICAgICAgIGdlbmVyYXRlZEl0ZW1zOiB0aGlzLl9nZW5lcmF0ZWRJdGVtcy5tYXAoKGl0ZW0pID0+IGl0ZW0udG9KU09OKCkpLFxuICAgICAgICAgICAgY3VycmVudFR1cm5QZXJzaXN0ZWRJdGVtQ291bnQ6IHRoaXMuX2N1cnJlbnRUdXJuUGVyc2lzdGVkSXRlbUNvdW50LFxuICAgICAgICAgICAgbGFzdFByb2Nlc3NlZFJlc3BvbnNlOiB0aGlzLl9sYXN0UHJvY2Vzc2VkUmVzcG9uc2UsXG4gICAgICAgICAgICB0cmFjZTogdGhpcy5fdHJhY2UgPyB0aGlzLl90cmFjZS50b0pTT04oKSA6IG51bGwsXG4gICAgICAgIH07XG4gICAgICAgIC8vIHBhcnNpbmcgdGhlIHNjaGVtYSB0byBlbnN1cmUgdGhlIG91dHB1dCBpcyB2YWxpZCBmb3IgcmVwYXJzaW5nXG4gICAgICAgIGNvbnN0IHBhcnNlZCA9IFNlcmlhbGl6ZWRSdW5TdGF0ZS5zYWZlUGFyc2Uob3V0cHV0KTtcbiAgICAgICAgaWYgKCFwYXJzZWQuc3VjY2Vzcykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFN5c3RlbUVycm9yKGBGYWlsZWQgdG8gc2VyaWFsaXplIHJ1biBzdGF0ZS4gJHtwYXJzZWQuZXJyb3IubWVzc2FnZX1gKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcGFyc2VkLmRhdGE7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNlcmlhbGl6ZXMgdGhlIHJ1biBzdGF0ZSB0byBhIHN0cmluZy5cbiAgICAgKlxuICAgICAqIFRoaXMgbWV0aG9kIGlzIHVzZWQgdG8gc2VyaWFsaXplIHRoZSBydW4gc3RhdGUgdG8gYSBzdHJpbmcgdGhhdCBjYW4gYmUgdXNlZCB0b1xuICAgICAqIHJlc3VtZSB0aGUgcnVuIGxhdGVyLlxuICAgICAqXG4gICAgICogQHJldHVybnMgVGhlIHNlcmlhbGl6ZWQgcnVuIHN0YXRlLlxuICAgICAqL1xuICAgIHRvU3RyaW5nKCkge1xuICAgICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkodGhpcy50b0pTT04oKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIERlc2VyaWFsaXplcyBhIHJ1biBzdGF0ZSBmcm9tIGEgc3RyaW5nLlxuICAgICAqXG4gICAgICogVGhpcyBtZXRob2QgaXMgdXNlZCB0byBkZXNlcmlhbGl6ZSBhIHJ1biBzdGF0ZSBmcm9tIGEgc3RyaW5nIHRoYXQgd2FzIHNlcmlhbGl6ZWQgdXNpbmcgdGhlXG4gICAgICogYHRvU3RyaW5nYCBtZXRob2QuXG4gICAgICovXG4gICAgc3RhdGljIGFzeW5jIGZyb21TdHJpbmcoaW5pdGlhbEFnZW50LCBzdHIpIHtcbiAgICAgICAgY29uc3QgW3BhcnNpbmdFcnJvciwganNvblJlc3VsdF0gPSBhd2FpdCBzYWZlRXhlY3V0ZSgoKSA9PiBKU09OLnBhcnNlKHN0cikpO1xuICAgICAgICBpZiAocGFyc2luZ0Vycm9yKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVXNlckVycm9yKGBGYWlsZWQgdG8gcGFyc2UgcnVuIHN0YXRlLiAke3BhcnNpbmdFcnJvciBpbnN0YW5jZW9mIEVycm9yID8gcGFyc2luZ0Vycm9yLm1lc3NhZ2UgOiBTdHJpbmcocGFyc2luZ0Vycm9yKX1gKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBjdXJyZW50U2NoZW1hVmVyc2lvbiA9IGpzb25SZXN1bHQuJHNjaGVtYVZlcnNpb247XG4gICAgICAgIGlmICghY3VycmVudFNjaGVtYVZlcnNpb24pIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBVc2VyRXJyb3IoJ1J1biBzdGF0ZSBpcyBtaXNzaW5nIHNjaGVtYSB2ZXJzaW9uJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGN1cnJlbnRTY2hlbWFWZXJzaW9uICE9PSBDVVJSRU5UX1NDSEVNQV9WRVJTSU9OKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVXNlckVycm9yKGBSdW4gc3RhdGUgc2NoZW1hIHZlcnNpb24gJHtjdXJyZW50U2NoZW1hVmVyc2lvbn0gaXMgbm90IHN1cHBvcnRlZC4gUGxlYXNlIHVzZSB2ZXJzaW9uICR7Q1VSUkVOVF9TQ0hFTUFfVkVSU0lPTn1gKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBzdGF0ZUpzb24gPSBTZXJpYWxpemVkUnVuU3RhdGUucGFyc2UoSlNPTi5wYXJzZShzdHIpKTtcbiAgICAgICAgY29uc3QgYWdlbnRNYXAgPSBidWlsZEFnZW50TWFwKGluaXRpYWxBZ2VudCk7XG4gICAgICAgIC8vXG4gICAgICAgIC8vIFJlYnVpbGQgdGhlIGNvbnRleHRcbiAgICAgICAgLy9cbiAgICAgICAgY29uc3QgY29udGV4dCA9IG5ldyBSdW5Db250ZXh0KHN0YXRlSnNvbi5jb250ZXh0LmNvbnRleHQpO1xuICAgICAgICBjb250ZXh0Ll9yZWJ1aWxkQXBwcm92YWxzKHN0YXRlSnNvbi5jb250ZXh0LmFwcHJvdmFscyk7XG4gICAgICAgIC8vXG4gICAgICAgIC8vIEZpbmQgdGhlIGN1cnJlbnQgYWdlbnQgZnJvbSB0aGUgaW5pdGlhbCBhZ2VudFxuICAgICAgICAvL1xuICAgICAgICBjb25zdCBjdXJyZW50QWdlbnQgPSBhZ2VudE1hcC5nZXQoc3RhdGVKc29uLmN1cnJlbnRBZ2VudC5uYW1lKTtcbiAgICAgICAgaWYgKCFjdXJyZW50QWdlbnQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBVc2VyRXJyb3IoYEFnZW50ICR7c3RhdGVKc29uLmN1cnJlbnRBZ2VudC5uYW1lfSBub3QgZm91bmRgKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBzdGF0ZSA9IG5ldyBSdW5TdGF0ZShjb250ZXh0LCAnJywgY3VycmVudEFnZW50LCBzdGF0ZUpzb24ubWF4VHVybnMpO1xuICAgICAgICBzdGF0ZS5fY3VycmVudFR1cm4gPSBzdGF0ZUpzb24uY3VycmVudFR1cm47XG4gICAgICAgIC8vIHJlYnVpbGQgdG9vbCB1c2UgdHJhY2tlclxuICAgICAgICBzdGF0ZS5fdG9vbFVzZVRyYWNrZXIgPSBuZXcgQWdlbnRUb29sVXNlVHJhY2tlcigpO1xuICAgICAgICBmb3IgKGNvbnN0IFthZ2VudE5hbWUsIHRvb2xOYW1lc10gb2YgT2JqZWN0LmVudHJpZXMoc3RhdGVKc29uLnRvb2xVc2VUcmFja2VyKSkge1xuICAgICAgICAgICAgc3RhdGUuX3Rvb2xVc2VUcmFja2VyLmFkZFRvb2xVc2UoYWdlbnRNYXAuZ2V0KGFnZW50TmFtZSksIHRvb2xOYW1lcyk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gcmVidWlsZCBjdXJyZW50IGFnZW50IHNwYW5cbiAgICAgICAgaWYgKHN0YXRlSnNvbi5jdXJyZW50QWdlbnRTcGFuKSB7XG4gICAgICAgICAgICBpZiAoIXN0YXRlSnNvbi50cmFjZSkge1xuICAgICAgICAgICAgICAgIGxvZ2dlci53YXJuKCdUcmFjZSBpcyBub3Qgc2V0LCBza2lwcGluZyB0cmFjaW5nIHNldHVwJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCB0cmFjZSA9IGdldEdsb2JhbFRyYWNlUHJvdmlkZXIoKS5jcmVhdGVUcmFjZSh7XG4gICAgICAgICAgICAgICAgdHJhY2VJZDogc3RhdGVKc29uLnRyYWNlPy5pZCxcbiAgICAgICAgICAgICAgICBuYW1lOiBzdGF0ZUpzb24udHJhY2U/LndvcmtmbG93X25hbWUsXG4gICAgICAgICAgICAgICAgZ3JvdXBJZDogc3RhdGVKc29uLnRyYWNlPy5ncm91cF9pZCA/PyB1bmRlZmluZWQsXG4gICAgICAgICAgICAgICAgbWV0YWRhdGE6IHN0YXRlSnNvbi50cmFjZT8ubWV0YWRhdGEsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHN0YXRlLl9jdXJyZW50QWdlbnRTcGFuID0gZGVzZXJpYWxpemVTcGFuKHRyYWNlLCBzdGF0ZUpzb24uY3VycmVudEFnZW50U3Bhbik7XG4gICAgICAgICAgICBzdGF0ZS5fdHJhY2UgPSB0cmFjZTtcbiAgICAgICAgfVxuICAgICAgICBzdGF0ZS5fbm9BY3RpdmVBZ2VudFJ1biA9IHN0YXRlSnNvbi5ub0FjdGl2ZUFnZW50UnVuO1xuICAgICAgICBzdGF0ZS5faW5wdXRHdWFyZHJhaWxSZXN1bHRzID1cbiAgICAgICAgICAgIHN0YXRlSnNvbi5pbnB1dEd1YXJkcmFpbFJlc3VsdHM7XG4gICAgICAgIHN0YXRlLl9vdXRwdXRHdWFyZHJhaWxSZXN1bHRzID0gc3RhdGVKc29uLm91dHB1dEd1YXJkcmFpbFJlc3VsdHMubWFwKChyKSA9PiAoe1xuICAgICAgICAgICAgLi4ucixcbiAgICAgICAgICAgIGFnZW50OiBhZ2VudE1hcC5nZXQoci5hZ2VudC5uYW1lKSxcbiAgICAgICAgfSkpO1xuICAgICAgICBzdGF0ZS5fY3VycmVudFN0ZXAgPSBzdGF0ZUpzb24uY3VycmVudFN0ZXA7XG4gICAgICAgIHN0YXRlLl9vcmlnaW5hbElucHV0ID0gc3RhdGVKc29uLm9yaWdpbmFsSW5wdXQ7XG4gICAgICAgIHN0YXRlLl9tb2RlbFJlc3BvbnNlcyA9IHN0YXRlSnNvbi5tb2RlbFJlc3BvbnNlcy5tYXAoZGVzZXJpYWxpemVNb2RlbFJlc3BvbnNlKTtcbiAgICAgICAgc3RhdGUuX2xhc3RUdXJuUmVzcG9uc2UgPSBzdGF0ZUpzb24ubGFzdE1vZGVsUmVzcG9uc2VcbiAgICAgICAgICAgID8gZGVzZXJpYWxpemVNb2RlbFJlc3BvbnNlKHN0YXRlSnNvbi5sYXN0TW9kZWxSZXNwb25zZSlcbiAgICAgICAgICAgIDogdW5kZWZpbmVkO1xuICAgICAgICBzdGF0ZS5fZ2VuZXJhdGVkSXRlbXMgPSBzdGF0ZUpzb24uZ2VuZXJhdGVkSXRlbXMubWFwKChpdGVtKSA9PiBkZXNlcmlhbGl6ZUl0ZW0oaXRlbSwgYWdlbnRNYXApKTtcbiAgICAgICAgc3RhdGUuX2N1cnJlbnRUdXJuUGVyc2lzdGVkSXRlbUNvdW50ID1cbiAgICAgICAgICAgIHN0YXRlSnNvbi5jdXJyZW50VHVyblBlcnNpc3RlZEl0ZW1Db3VudCA/PyAwO1xuICAgICAgICBzdGF0ZS5fbGFzdFByb2Nlc3NlZFJlc3BvbnNlID0gc3RhdGVKc29uLmxhc3RQcm9jZXNzZWRSZXNwb25zZVxuICAgICAgICAgICAgPyBhd2FpdCBkZXNlcmlhbGl6ZVByb2Nlc3NlZFJlc3BvbnNlKGFnZW50TWFwLCBzdGF0ZS5fY3VycmVudEFnZW50LCBzdGF0ZS5fY29udGV4dCwgc3RhdGVKc29uLmxhc3RQcm9jZXNzZWRSZXNwb25zZSlcbiAgICAgICAgICAgIDogdW5kZWZpbmVkO1xuICAgICAgICBpZiAoc3RhdGVKc29uLmN1cnJlbnRTdGVwPy50eXBlID09PSAnbmV4dF9zdGVwX2hhbmRvZmYnKSB7XG4gICAgICAgICAgICBzdGF0ZS5fY3VycmVudFN0ZXAgPSB7XG4gICAgICAgICAgICAgICAgdHlwZTogJ25leHRfc3RlcF9oYW5kb2ZmJyxcbiAgICAgICAgICAgICAgICBuZXdBZ2VudDogYWdlbnRNYXAuZ2V0KHN0YXRlSnNvbi5jdXJyZW50U3RlcC5uZXdBZ2VudC5uYW1lKSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHN0YXRlO1xuICAgIH1cbn1cbi8qKlxuICogQGludGVybmFsXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBidWlsZEFnZW50TWFwKGluaXRpYWxBZ2VudCkge1xuICAgIGNvbnN0IG1hcCA9IG5ldyBNYXAoKTtcbiAgICBjb25zdCBxdWV1ZSA9IFtpbml0aWFsQWdlbnRdO1xuICAgIHdoaWxlIChxdWV1ZS5sZW5ndGggPiAwKSB7XG4gICAgICAgIGNvbnN0IGN1cnJlbnRBZ2VudCA9IHF1ZXVlLnNoaWZ0KCk7XG4gICAgICAgIGlmIChtYXAuaGFzKGN1cnJlbnRBZ2VudC5uYW1lKSkge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgbWFwLnNldChjdXJyZW50QWdlbnQubmFtZSwgY3VycmVudEFnZW50KTtcbiAgICAgICAgZm9yIChjb25zdCBoYW5kb2ZmIG9mIGN1cnJlbnRBZ2VudC5oYW5kb2Zmcykge1xuICAgICAgICAgICAgaWYgKGhhbmRvZmYgaW5zdGFuY2VvZiBBZ2VudCkge1xuICAgICAgICAgICAgICAgIGlmICghbWFwLmhhcyhoYW5kb2ZmLm5hbWUpKSB7XG4gICAgICAgICAgICAgICAgICAgIHF1ZXVlLnB1c2goaGFuZG9mZik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoaGFuZG9mZi5hZ2VudCkge1xuICAgICAgICAgICAgICAgIGlmICghbWFwLmhhcyhoYW5kb2ZmLmFnZW50Lm5hbWUpKSB7XG4gICAgICAgICAgICAgICAgICAgIHF1ZXVlLnB1c2goaGFuZG9mZi5hZ2VudCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBtYXA7XG59XG4vKipcbiAqIEBpbnRlcm5hbFxuICovXG5leHBvcnQgZnVuY3Rpb24gZGVzZXJpYWxpemVTcGFuKHRyYWNlLCBzZXJpYWxpemVkU3Bhbikge1xuICAgIGNvbnN0IHNwYW5EYXRhID0gc2VyaWFsaXplZFNwYW4uc3Bhbl9kYXRhO1xuICAgIGNvbnN0IHByZXZpb3VzU3BhbiA9IHNlcmlhbGl6ZWRTcGFuLnByZXZpb3VzX3NwYW5cbiAgICAgICAgPyBkZXNlcmlhbGl6ZVNwYW4odHJhY2UsIHNlcmlhbGl6ZWRTcGFuLnByZXZpb3VzX3NwYW4pXG4gICAgICAgIDogdW5kZWZpbmVkO1xuICAgIGNvbnN0IHNwYW4gPSBnZXRHbG9iYWxUcmFjZVByb3ZpZGVyKCkuY3JlYXRlU3Bhbih7XG4gICAgICAgIHNwYW5JZDogc2VyaWFsaXplZFNwYW4uaWQsXG4gICAgICAgIHRyYWNlSWQ6IHNlcmlhbGl6ZWRTcGFuLnRyYWNlX2lkLFxuICAgICAgICBwYXJlbnRJZDogc2VyaWFsaXplZFNwYW4ucGFyZW50X2lkID8/IHVuZGVmaW5lZCxcbiAgICAgICAgc3RhcnRlZEF0OiBzZXJpYWxpemVkU3Bhbi5zdGFydGVkX2F0ID8/IHVuZGVmaW5lZCxcbiAgICAgICAgZW5kZWRBdDogc2VyaWFsaXplZFNwYW4uZW5kZWRfYXQgPz8gdW5kZWZpbmVkLFxuICAgICAgICBkYXRhOiBzcGFuRGF0YSxcbiAgICB9LCB0cmFjZSk7XG4gICAgc3Bhbi5wcmV2aW91c1NwYW4gPSBwcmV2aW91c1NwYW47XG4gICAgcmV0dXJuIHNwYW47XG59XG4vKipcbiAqIEBpbnRlcm5hbFxuICovXG5leHBvcnQgZnVuY3Rpb24gZGVzZXJpYWxpemVNb2RlbFJlc3BvbnNlKHNlcmlhbGl6ZWRNb2RlbFJlc3BvbnNlKSB7XG4gICAgY29uc3QgdXNhZ2UgPSBuZXcgVXNhZ2Uoc2VyaWFsaXplZE1vZGVsUmVzcG9uc2UudXNhZ2UpO1xuICAgIHJldHVybiB7XG4gICAgICAgIHVzYWdlLFxuICAgICAgICBvdXRwdXQ6IHNlcmlhbGl6ZWRNb2RlbFJlc3BvbnNlLm91dHB1dC5tYXAoKGl0ZW0pID0+IHByb3RvY29sLk91dHB1dE1vZGVsSXRlbS5wYXJzZShpdGVtKSksXG4gICAgICAgIHJlc3BvbnNlSWQ6IHNlcmlhbGl6ZWRNb2RlbFJlc3BvbnNlLnJlc3BvbnNlSWQsXG4gICAgICAgIHByb3ZpZGVyRGF0YTogc2VyaWFsaXplZE1vZGVsUmVzcG9uc2UucHJvdmlkZXJEYXRhLFxuICAgIH07XG59XG4vKipcbiAqIEBpbnRlcm5hbFxuICovXG5leHBvcnQgZnVuY3Rpb24gZGVzZXJpYWxpemVJdGVtKHNlcmlhbGl6ZWRJdGVtLCBhZ2VudE1hcCkge1xuICAgIHN3aXRjaCAoc2VyaWFsaXplZEl0ZW0udHlwZSkge1xuICAgICAgICBjYXNlICdtZXNzYWdlX291dHB1dF9pdGVtJzpcbiAgICAgICAgICAgIHJldHVybiBuZXcgUnVuTWVzc2FnZU91dHB1dEl0ZW0oc2VyaWFsaXplZEl0ZW0ucmF3SXRlbSwgYWdlbnRNYXAuZ2V0KHNlcmlhbGl6ZWRJdGVtLmFnZW50Lm5hbWUpKTtcbiAgICAgICAgY2FzZSAndG9vbF9jYWxsX2l0ZW0nOlxuICAgICAgICAgICAgcmV0dXJuIG5ldyBSdW5Ub29sQ2FsbEl0ZW0oc2VyaWFsaXplZEl0ZW0ucmF3SXRlbSwgYWdlbnRNYXAuZ2V0KHNlcmlhbGl6ZWRJdGVtLmFnZW50Lm5hbWUpKTtcbiAgICAgICAgY2FzZSAndG9vbF9jYWxsX291dHB1dF9pdGVtJzpcbiAgICAgICAgICAgIHJldHVybiBuZXcgUnVuVG9vbENhbGxPdXRwdXRJdGVtKHNlcmlhbGl6ZWRJdGVtLnJhd0l0ZW0sIGFnZW50TWFwLmdldChzZXJpYWxpemVkSXRlbS5hZ2VudC5uYW1lKSwgc2VyaWFsaXplZEl0ZW0ub3V0cHV0KTtcbiAgICAgICAgY2FzZSAncmVhc29uaW5nX2l0ZW0nOlxuICAgICAgICAgICAgcmV0dXJuIG5ldyBSdW5SZWFzb25pbmdJdGVtKHNlcmlhbGl6ZWRJdGVtLnJhd0l0ZW0sIGFnZW50TWFwLmdldChzZXJpYWxpemVkSXRlbS5hZ2VudC5uYW1lKSk7XG4gICAgICAgIGNhc2UgJ2hhbmRvZmZfY2FsbF9pdGVtJzpcbiAgICAgICAgICAgIHJldHVybiBuZXcgUnVuSGFuZG9mZkNhbGxJdGVtKHNlcmlhbGl6ZWRJdGVtLnJhd0l0ZW0sIGFnZW50TWFwLmdldChzZXJpYWxpemVkSXRlbS5hZ2VudC5uYW1lKSk7XG4gICAgICAgIGNhc2UgJ2hhbmRvZmZfb3V0cHV0X2l0ZW0nOlxuICAgICAgICAgICAgcmV0dXJuIG5ldyBSdW5IYW5kb2ZmT3V0cHV0SXRlbShzZXJpYWxpemVkSXRlbS5yYXdJdGVtLCBhZ2VudE1hcC5nZXQoc2VyaWFsaXplZEl0ZW0uc291cmNlQWdlbnQubmFtZSksIGFnZW50TWFwLmdldChzZXJpYWxpemVkSXRlbS50YXJnZXRBZ2VudC5uYW1lKSk7XG4gICAgICAgIGNhc2UgJ3Rvb2xfYXBwcm92YWxfaXRlbSc6XG4gICAgICAgICAgICByZXR1cm4gbmV3IFJ1blRvb2xBcHByb3ZhbEl0ZW0oc2VyaWFsaXplZEl0ZW0ucmF3SXRlbSwgYWdlbnRNYXAuZ2V0KHNlcmlhbGl6ZWRJdGVtLmFnZW50Lm5hbWUpLCBzZXJpYWxpemVkSXRlbS50b29sTmFtZSk7XG4gICAgfVxufVxuLyoqXG4gKiBAaW50ZXJuYWxcbiAqL1xuYXN5bmMgZnVuY3Rpb24gZGVzZXJpYWxpemVQcm9jZXNzZWRSZXNwb25zZShhZ2VudE1hcCwgY3VycmVudEFnZW50LCBjb250ZXh0LCBzZXJpYWxpemVkUHJvY2Vzc2VkUmVzcG9uc2UpIHtcbiAgICBjb25zdCBhbGxUb29scyA9IGF3YWl0IGN1cnJlbnRBZ2VudC5nZXRBbGxUb29scyhjb250ZXh0KTtcbiAgICBjb25zdCB0b29scyA9IG5ldyBNYXAoYWxsVG9vbHNcbiAgICAgICAgLmZpbHRlcigodG9vbCkgPT4gdG9vbC50eXBlID09PSAnZnVuY3Rpb24nKVxuICAgICAgICAubWFwKCh0b29sKSA9PiBbdG9vbC5uYW1lLCB0b29sXSkpO1xuICAgIGNvbnN0IGNvbXB1dGVyVG9vbHMgPSBuZXcgTWFwKGFsbFRvb2xzXG4gICAgICAgIC5maWx0ZXIoKHRvb2wpID0+IHRvb2wudHlwZSA9PT0gJ2NvbXB1dGVyJylcbiAgICAgICAgLm1hcCgodG9vbCkgPT4gW3Rvb2wubmFtZSwgdG9vbF0pKTtcbiAgICBjb25zdCBzaGVsbFRvb2xzID0gbmV3IE1hcChhbGxUb29sc1xuICAgICAgICAuZmlsdGVyKCh0b29sKSA9PiB0b29sLnR5cGUgPT09ICdzaGVsbCcpXG4gICAgICAgIC5tYXAoKHRvb2wpID0+IFt0b29sLm5hbWUsIHRvb2xdKSk7XG4gICAgY29uc3QgYXBwbHlQYXRjaFRvb2xzID0gbmV3IE1hcChhbGxUb29sc1xuICAgICAgICAuZmlsdGVyKCh0b29sKSA9PiB0b29sLnR5cGUgPT09ICdhcHBseV9wYXRjaCcpXG4gICAgICAgIC5tYXAoKHRvb2wpID0+IFt0b29sLm5hbWUsIHRvb2xdKSk7XG4gICAgY29uc3QgaGFuZG9mZnMgPSBuZXcgTWFwKGN1cnJlbnRBZ2VudC5oYW5kb2Zmcy5tYXAoKGVudHJ5KSA9PiB7XG4gICAgICAgIGlmIChlbnRyeSBpbnN0YW5jZW9mIEFnZW50KSB7XG4gICAgICAgICAgICByZXR1cm4gW2VudHJ5Lm5hbWUsIGhhbmRvZmYoZW50cnkpXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gW2VudHJ5LnRvb2xOYW1lLCBlbnRyeV07XG4gICAgfSkpO1xuICAgIGNvbnN0IHJlc3VsdCA9IHtcbiAgICAgICAgbmV3SXRlbXM6IHNlcmlhbGl6ZWRQcm9jZXNzZWRSZXNwb25zZS5uZXdJdGVtcy5tYXAoKGl0ZW0pID0+IGRlc2VyaWFsaXplSXRlbShpdGVtLCBhZ2VudE1hcCkpLFxuICAgICAgICB0b29sc1VzZWQ6IHNlcmlhbGl6ZWRQcm9jZXNzZWRSZXNwb25zZS50b29sc1VzZWQsXG4gICAgICAgIGhhbmRvZmZzOiBzZXJpYWxpemVkUHJvY2Vzc2VkUmVzcG9uc2UuaGFuZG9mZnMubWFwKChoYW5kb2ZmKSA9PiB7XG4gICAgICAgICAgICBpZiAoIWhhbmRvZmZzLmhhcyhoYW5kb2ZmLmhhbmRvZmYudG9vbE5hbWUpKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFVzZXJFcnJvcihgSGFuZG9mZiAke2hhbmRvZmYuaGFuZG9mZi50b29sTmFtZX0gbm90IGZvdW5kYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHRvb2xDYWxsOiBoYW5kb2ZmLnRvb2xDYWxsLFxuICAgICAgICAgICAgICAgIGhhbmRvZmY6IGhhbmRvZmZzLmdldChoYW5kb2ZmLmhhbmRvZmYudG9vbE5hbWUpLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSksXG4gICAgICAgIGZ1bmN0aW9uczogYXdhaXQgUHJvbWlzZS5hbGwoc2VyaWFsaXplZFByb2Nlc3NlZFJlc3BvbnNlLmZ1bmN0aW9ucy5tYXAoYXN5bmMgKGZ1bmN0aW9uQ2FsbCkgPT4ge1xuICAgICAgICAgICAgaWYgKCF0b29scy5oYXMoZnVuY3Rpb25DYWxsLnRvb2wubmFtZSkpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVXNlckVycm9yKGBUb29sICR7ZnVuY3Rpb25DYWxsLnRvb2wubmFtZX0gbm90IGZvdW5kYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHRvb2xDYWxsOiBmdW5jdGlvbkNhbGwudG9vbENhbGwsXG4gICAgICAgICAgICAgICAgdG9vbDogdG9vbHMuZ2V0KGZ1bmN0aW9uQ2FsbC50b29sLm5hbWUpLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSkpLFxuICAgICAgICBjb21wdXRlckFjdGlvbnM6IHNlcmlhbGl6ZWRQcm9jZXNzZWRSZXNwb25zZS5jb21wdXRlckFjdGlvbnMubWFwKChjb21wdXRlckFjdGlvbikgPT4ge1xuICAgICAgICAgICAgY29uc3QgdG9vbE5hbWUgPSBjb21wdXRlckFjdGlvbi5jb21wdXRlci5uYW1lO1xuICAgICAgICAgICAgaWYgKCFjb21wdXRlclRvb2xzLmhhcyh0b29sTmFtZSkpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVXNlckVycm9yKGBDb21wdXRlciB0b29sICR7dG9vbE5hbWV9IG5vdCBmb3VuZGApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICB0b29sQ2FsbDogY29tcHV0ZXJBY3Rpb24udG9vbENhbGwsXG4gICAgICAgICAgICAgICAgY29tcHV0ZXI6IGNvbXB1dGVyVG9vbHMuZ2V0KHRvb2xOYW1lKSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pLFxuICAgICAgICBzaGVsbEFjdGlvbnM6IChzZXJpYWxpemVkUHJvY2Vzc2VkUmVzcG9uc2Uuc2hlbGxBY3Rpb25zID8/IFtdKS5tYXAoKHNoZWxsQWN0aW9uKSA9PiB7XG4gICAgICAgICAgICBjb25zdCB0b29sTmFtZSA9IHNoZWxsQWN0aW9uLnNoZWxsLm5hbWU7XG4gICAgICAgICAgICBpZiAoIXNoZWxsVG9vbHMuaGFzKHRvb2xOYW1lKSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBVc2VyRXJyb3IoYFNoZWxsIHRvb2wgJHt0b29sTmFtZX0gbm90IGZvdW5kYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHRvb2xDYWxsOiBzaGVsbEFjdGlvbi50b29sQ2FsbCxcbiAgICAgICAgICAgICAgICBzaGVsbDogc2hlbGxUb29scy5nZXQodG9vbE5hbWUpLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSksXG4gICAgICAgIGFwcGx5UGF0Y2hBY3Rpb25zOiAoc2VyaWFsaXplZFByb2Nlc3NlZFJlc3BvbnNlLmFwcGx5UGF0Y2hBY3Rpb25zID8/IFtdKS5tYXAoKGFwcGx5UGF0Y2hBY3Rpb24pID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHRvb2xOYW1lID0gYXBwbHlQYXRjaEFjdGlvbi5hcHBseVBhdGNoLm5hbWU7XG4gICAgICAgICAgICBpZiAoIWFwcGx5UGF0Y2hUb29scy5oYXModG9vbE5hbWUpKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFVzZXJFcnJvcihgQXBwbHkgcGF0Y2ggdG9vbCAke3Rvb2xOYW1lfSBub3QgZm91bmRgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgdG9vbENhbGw6IGFwcGx5UGF0Y2hBY3Rpb24udG9vbENhbGwsXG4gICAgICAgICAgICAgICAgYXBwbHlQYXRjaDogYXBwbHlQYXRjaFRvb2xzLmdldCh0b29sTmFtZSksXG4gICAgICAgICAgICB9O1xuICAgICAgICB9KSxcbiAgICAgICAgbWNwQXBwcm92YWxSZXF1ZXN0czogKHNlcmlhbGl6ZWRQcm9jZXNzZWRSZXNwb25zZS5tY3BBcHByb3ZhbFJlcXVlc3RzID8/IFtdKS5tYXAoKGFwcHJvdmFsUmVxdWVzdCkgPT4gKHtcbiAgICAgICAgICAgIHJlcXVlc3RJdGVtOiBuZXcgUnVuVG9vbEFwcHJvdmFsSXRlbShhcHByb3ZhbFJlcXVlc3QucmVxdWVzdEl0ZW1cbiAgICAgICAgICAgICAgICAucmF3SXRlbSwgY3VycmVudEFnZW50KSxcbiAgICAgICAgICAgIG1jcFRvb2w6IGFwcHJvdmFsUmVxdWVzdC5tY3BUb29sLFxuICAgICAgICB9KSksXG4gICAgfTtcbiAgICByZXR1cm4ge1xuICAgICAgICAuLi5yZXN1bHQsXG4gICAgICAgIGhhc1Rvb2xzT3JBcHByb3ZhbHNUb1J1bigpIHtcbiAgICAgICAgICAgIHJldHVybiAocmVzdWx0LmhhbmRvZmZzLmxlbmd0aCA+IDAgfHxcbiAgICAgICAgICAgICAgICByZXN1bHQuZnVuY3Rpb25zLmxlbmd0aCA+IDAgfHxcbiAgICAgICAgICAgICAgICByZXN1bHQubWNwQXBwcm92YWxSZXF1ZXN0cy5sZW5ndGggPiAwIHx8XG4gICAgICAgICAgICAgICAgcmVzdWx0LmNvbXB1dGVyQWN0aW9ucy5sZW5ndGggPiAwIHx8XG4gICAgICAgICAgICAgICAgcmVzdWx0LnNoZWxsQWN0aW9ucy5sZW5ndGggPiAwIHx8XG4gICAgICAgICAgICAgICAgcmVzdWx0LmFwcGx5UGF0Y2hBY3Rpb25zLmxlbmd0aCA+IDApO1xuICAgICAgICB9LFxuICAgIH07XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1ydW5TdGF0ZS5tanMubWFwIiwiaW1wb3J0IHsgQWdlbnQgfSBmcm9tIFwiLi9hZ2VudC5tanNcIjtcbmltcG9ydCB7IGRlZmluZUlucHV0R3VhcmRyYWlsLCBkZWZpbmVPdXRwdXRHdWFyZHJhaWwsIH0gZnJvbSBcIi4vZ3VhcmRyYWlsLm1qc1wiO1xuaW1wb3J0IHsgZ2V0RGVmYXVsdE1vZGVsUHJvdmlkZXIgfSBmcm9tIFwiLi9wcm92aWRlcnMubWpzXCI7XG5pbXBvcnQgeyBSdW5Db250ZXh0IH0gZnJvbSBcIi4vcnVuQ29udGV4dC5tanNcIjtcbmltcG9ydCB7IFJ1blJlc3VsdCwgU3RyZWFtZWRSdW5SZXN1bHQgfSBmcm9tIFwiLi9yZXN1bHQubWpzXCI7XG5pbXBvcnQgeyBSdW5Ib29rcyB9IGZyb20gXCIuL2xpZmVjeWNsZS5tanNcIjtcbmltcG9ydCBsb2dnZXIgZnJvbSBcIi4vbG9nZ2VyLm1qc1wiO1xuaW1wb3J0IHsgc2VyaWFsaXplVG9vbCwgc2VyaWFsaXplSGFuZG9mZiB9IGZyb20gXCIuL3V0aWxzL3NlcmlhbGl6ZS5tanNcIjtcbmltcG9ydCB7IEd1YXJkcmFpbEV4ZWN1dGlvbkVycm9yLCBJbnB1dEd1YXJkcmFpbFRyaXB3aXJlVHJpZ2dlcmVkLCBNYXhUdXJuc0V4Y2VlZGVkRXJyb3IsIE1vZGVsQmVoYXZpb3JFcnJvciwgT3V0cHV0R3VhcmRyYWlsVHJpcHdpcmVUcmlnZ2VyZWQsIFVzZXJFcnJvciwgfSBmcm9tIFwiLi9lcnJvcnMubWpzXCI7XG5pbXBvcnQgeyBhZGRTdGVwVG9SdW5SZXN1bHQsIHJlc29sdmVJbnRlcnJ1cHRlZFR1cm4sIHJlc29sdmVUdXJuQWZ0ZXJNb2RlbFJlc3BvbnNlLCBtYXliZVJlc2V0VG9vbENob2ljZSwgcHJvY2Vzc01vZGVsUmVzcG9uc2UsIHN0cmVhbVN0ZXBJdGVtc1RvUnVuUmVzdWx0LCBzYXZlU3RyZWFtSW5wdXRUb1Nlc3Npb24sIHNhdmVTdHJlYW1SZXN1bHRUb1Nlc3Npb24sIHNhdmVUb1Nlc3Npb24sIHByZXBhcmVJbnB1dEl0ZW1zV2l0aFNlc3Npb24sIH0gZnJvbSBcIi4vcnVuSW1wbGVtZW50YXRpb24ubWpzXCI7XG5pbXBvcnQgeyByZXNvbHZlQ29tcHV0ZXIsIGRpc3Bvc2VSZXNvbHZlZENvbXB1dGVycywgfSBmcm9tIFwiLi90b29sLm1qc1wiO1xuaW1wb3J0IHsgZ2V0T3JDcmVhdGVUcmFjZSwgYWRkRXJyb3JUb0N1cnJlbnRTcGFuLCByZXNldEN1cnJlbnRTcGFuLCBzZXRDdXJyZW50U3Bhbiwgd2l0aE5ld1NwYW5Db250ZXh0LCB3aXRoVHJhY2UsIH0gZnJvbSBcIi4vdHJhY2luZy9jb250ZXh0Lm1qc1wiO1xuaW1wb3J0IHsgY3JlYXRlQWdlbnRTcGFuLCB3aXRoR3VhcmRyYWlsU3BhbiB9IGZyb20gXCIuL3RyYWNpbmcvaW5kZXgubWpzXCI7XG5pbXBvcnQgeyBVc2FnZSB9IGZyb20gXCIuL3VzYWdlLm1qc1wiO1xuaW1wb3J0IHsgUnVuQWdlbnRVcGRhdGVkU3RyZWFtRXZlbnQsIFJ1blJhd01vZGVsU3RyZWFtRXZlbnQgfSBmcm9tIFwiLi9ldmVudHMubWpzXCI7XG5pbXBvcnQgeyBSdW5TdGF0ZSB9IGZyb20gXCIuL3J1blN0YXRlLm1qc1wiO1xuaW1wb3J0IHsgU3RyZWFtRXZlbnRSZXNwb25zZUNvbXBsZXRlZCB9IGZyb20gXCIuL3R5cGVzL3Byb3RvY29sLm1qc1wiO1xuaW1wb3J0IHsgY29udmVydEFnZW50T3V0cHV0VHlwZVRvU2VyaWFsaXphYmxlIH0gZnJvbSBcIi4vdXRpbHMvdG9vbHMubWpzXCI7XG5pbXBvcnQgeyBncHQ1UmVhc29uaW5nU2V0dGluZ3NSZXF1aXJlZCwgaXNHcHQ1RGVmYXVsdCB9IGZyb20gXCIuL2RlZmF1bHRNb2RlbC5tanNcIjtcbmltcG9ydCB7IGVuY29kZVVpbnQ4QXJyYXlUb0Jhc2U2NCB9IGZyb20gXCIuL3V0aWxzL2Jhc2U2NC5tanNcIjtcbmltcG9ydCB7IGlzQXJyYXlCdWZmZXJWaWV3LCBpc05vZGVCdWZmZXIsIGlzU2VyaWFsaXplZEJ1ZmZlclNuYXBzaG90LCB9IGZyb20gXCIuL3V0aWxzL3NtYXJ0U3RyaW5nLm1qc1wiO1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHJ1bihhZ2VudCwgaW5wdXQsIG9wdGlvbnMpIHtcbiAgICBjb25zdCBydW5uZXIgPSBnZXREZWZhdWx0UnVubmVyKCk7XG4gICAgaWYgKG9wdGlvbnM/LnN0cmVhbSkge1xuICAgICAgICByZXR1cm4gYXdhaXQgcnVubmVyLnJ1bihhZ2VudCwgaW5wdXQsIG9wdGlvbnMpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGF3YWl0IHJ1bm5lci5ydW4oYWdlbnQsIGlucHV0LCBvcHRpb25zKTtcbiAgICB9XG59XG4vKipcbiAqIE9yY2hlc3RyYXRlcyBhZ2VudCBleGVjdXRpb24sIGluY2x1ZGluZyBndWFyZHJhaWxzLCB0b29sIGNhbGxzLCBzZXNzaW9uIHBlcnNpc3RlbmNlLCBhbmRcbiAqIHRyYWNpbmcuIFJldXNlIGEgYFJ1bm5lcmAgaW5zdGFuY2Ugd2hlbiB5b3Ugd2FudCBjb25zaXN0ZW50IGNvbmZpZ3VyYXRpb24gYWNyb3NzIG11bHRpcGxlIHJ1bnMuXG4gKi9cbmV4cG9ydCBjbGFzcyBSdW5uZXIgZXh0ZW5kcyBSdW5Ib29rcyB7XG4gICAgY29uZmlnO1xuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBydW5uZXIgd2l0aCBvcHRpb25hbCBkZWZhdWx0cyB0aGF0IGFwcGx5IHRvIGV2ZXJ5IHN1YnNlcXVlbnQgcnVuIGludm9jYXRpb24uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gY29uZmlnIC0gT3ZlcnJpZGVzIGZvciBtb2RlbHMsIGd1YXJkcmFpbHMsIHRyYWNpbmcsIG9yIHNlc3Npb24gYmVoYXZpb3IuXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoY29uZmlnID0ge30pIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5jb25maWcgPSB7XG4gICAgICAgICAgICBtb2RlbFByb3ZpZGVyOiBjb25maWcubW9kZWxQcm92aWRlciA/PyBnZXREZWZhdWx0TW9kZWxQcm92aWRlcigpLFxuICAgICAgICAgICAgbW9kZWw6IGNvbmZpZy5tb2RlbCxcbiAgICAgICAgICAgIG1vZGVsU2V0dGluZ3M6IGNvbmZpZy5tb2RlbFNldHRpbmdzLFxuICAgICAgICAgICAgaGFuZG9mZklucHV0RmlsdGVyOiBjb25maWcuaGFuZG9mZklucHV0RmlsdGVyLFxuICAgICAgICAgICAgaW5wdXRHdWFyZHJhaWxzOiBjb25maWcuaW5wdXRHdWFyZHJhaWxzLFxuICAgICAgICAgICAgb3V0cHV0R3VhcmRyYWlsczogY29uZmlnLm91dHB1dEd1YXJkcmFpbHMsXG4gICAgICAgICAgICB0cmFjaW5nRGlzYWJsZWQ6IGNvbmZpZy50cmFjaW5nRGlzYWJsZWQgPz8gZmFsc2UsXG4gICAgICAgICAgICB0cmFjZUluY2x1ZGVTZW5zaXRpdmVEYXRhOiBjb25maWcudHJhY2VJbmNsdWRlU2Vuc2l0aXZlRGF0YSA/PyB0cnVlLFxuICAgICAgICAgICAgd29ya2Zsb3dOYW1lOiBjb25maWcud29ya2Zsb3dOYW1lID8/ICdBZ2VudCB3b3JrZmxvdycsXG4gICAgICAgICAgICB0cmFjZUlkOiBjb25maWcudHJhY2VJZCxcbiAgICAgICAgICAgIGdyb3VwSWQ6IGNvbmZpZy5ncm91cElkLFxuICAgICAgICAgICAgdHJhY2VNZXRhZGF0YTogY29uZmlnLnRyYWNlTWV0YWRhdGEsXG4gICAgICAgICAgICBzZXNzaW9uSW5wdXRDYWxsYmFjazogY29uZmlnLnNlc3Npb25JbnB1dENhbGxiYWNrLFxuICAgICAgICAgICAgY2FsbE1vZGVsSW5wdXRGaWx0ZXI6IGNvbmZpZy5jYWxsTW9kZWxJbnB1dEZpbHRlcixcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5pbnB1dEd1YXJkcmFpbERlZnMgPSAoY29uZmlnLmlucHV0R3VhcmRyYWlscyA/PyBbXSkubWFwKGRlZmluZUlucHV0R3VhcmRyYWlsKTtcbiAgICAgICAgdGhpcy5vdXRwdXRHdWFyZHJhaWxEZWZzID0gKGNvbmZpZy5vdXRwdXRHdWFyZHJhaWxzID8/IFtdKS5tYXAoZGVmaW5lT3V0cHV0R3VhcmRyYWlsKTtcbiAgICB9XG4gICAgYXN5bmMgcnVuKGFnZW50LCBpbnB1dCwgb3B0aW9ucyA9IHtcbiAgICAgICAgc3RyZWFtOiBmYWxzZSxcbiAgICAgICAgY29udGV4dDogdW5kZWZpbmVkLFxuICAgIH0pIHtcbiAgICAgICAgY29uc3QgcmVzb2x2ZWRPcHRpb25zID0gb3B0aW9ucyA/PyB7IHN0cmVhbTogZmFsc2UsIGNvbnRleHQ6IHVuZGVmaW5lZCB9O1xuICAgICAgICAvLyBQZXItcnVuIG9wdGlvbnMgdGFrZSBwcmVjZWRlbmNlIG92ZXIgcnVubmVyIGRlZmF1bHRzIGZvciBzZXNzaW9uIG1lbW9yeSBiZWhhdmlvci5cbiAgICAgICAgY29uc3Qgc2Vzc2lvbklucHV0Q2FsbGJhY2sgPSByZXNvbHZlZE9wdGlvbnMuc2Vzc2lvbklucHV0Q2FsbGJhY2sgPz8gdGhpcy5jb25maWcuc2Vzc2lvbklucHV0Q2FsbGJhY2s7XG4gICAgICAgIC8vIExpa2V3aXNlIGFsbG93IGNhbGxlcnMgdG8gb3ZlcnJpZGUgY2FsbE1vZGVsSW5wdXRGaWx0ZXIgb24gaW5kaXZpZHVhbCBydW5zLlxuICAgICAgICBjb25zdCBjYWxsTW9kZWxJbnB1dEZpbHRlciA9IHJlc29sdmVkT3B0aW9ucy5jYWxsTW9kZWxJbnB1dEZpbHRlciA/PyB0aGlzLmNvbmZpZy5jYWxsTW9kZWxJbnB1dEZpbHRlcjtcbiAgICAgICAgY29uc3QgaGFzQ2FsbE1vZGVsSW5wdXRGaWx0ZXIgPSBCb29sZWFuKGNhbGxNb2RlbElucHV0RmlsdGVyKTtcbiAgICAgICAgY29uc3QgZWZmZWN0aXZlT3B0aW9ucyA9IHtcbiAgICAgICAgICAgIC4uLnJlc29sdmVkT3B0aW9ucyxcbiAgICAgICAgICAgIHNlc3Npb25JbnB1dENhbGxiYWNrLFxuICAgICAgICAgICAgY2FsbE1vZGVsSW5wdXRGaWx0ZXIsXG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IHNlcnZlck1hbmFnZXNDb252ZXJzYXRpb24gPSBCb29sZWFuKGVmZmVjdGl2ZU9wdGlvbnMuY29udmVyc2F0aW9uSWQpIHx8XG4gICAgICAgICAgICBCb29sZWFuKGVmZmVjdGl2ZU9wdGlvbnMucHJldmlvdXNSZXNwb25zZUlkKTtcbiAgICAgICAgLy8gV2hlbiB0aGUgc2VydmVyIHRyYWNrcyBjb252ZXJzYXRpb24gaGlzdG9yeSB3ZSBkZWZlciB0byBpdCBmb3IgcHJldmlvdXMgdHVybnMgc28gbG9jYWwgc2Vzc2lvblxuICAgICAgICAvLyBwZXJzaXN0ZW5jZSBjYW4gZm9jdXMgc29sZWx5IG9uIHRoZSBuZXcgZGVsdGEgYmVpbmcgZ2VuZXJhdGVkIGluIHRoaXMgcHJvY2Vzcy5cbiAgICAgICAgY29uc3Qgc2Vzc2lvbiA9IGVmZmVjdGl2ZU9wdGlvbnMuc2Vzc2lvbjtcbiAgICAgICAgY29uc3QgcmVzdW1pbmdGcm9tU3RhdGUgPSBpbnB1dCBpbnN0YW5jZW9mIFJ1blN0YXRlO1xuICAgICAgICBsZXQgc2Vzc2lvbklucHV0T3JpZ2luYWxTbmFwc2hvdCA9IHNlc3Npb24gJiYgcmVzdW1pbmdGcm9tU3RhdGUgPyBbXSA6IHVuZGVmaW5lZDtcbiAgICAgICAgbGV0IHNlc3Npb25JbnB1dEZpbHRlcmVkU25hcHNob3QgPSB1bmRlZmluZWQ7XG4gICAgICAgIC8vIFRyYWNrcyByZW1haW5pbmcgcGVyc2lzdGVuY2Ugc2xvdHMgcGVyIEFnZW50SW5wdXRJdGVtIGtleSBzbyByZXN1bWVkIHNlc3Npb25zIG9ubHkgd3JpdGUgZWFjaCBvcmlnaW5hbCBvY2N1cnJlbmNlIG9uY2UuXG4gICAgICAgIGxldCBzZXNzaW9uSW5wdXRQZW5kaW5nV3JpdGVDb3VudHMgPSBzZXNzaW9uICYmIHJlc3VtaW5nRnJvbVN0YXRlID8gbmV3IE1hcCgpIDogdW5kZWZpbmVkO1xuICAgICAgICAvLyBLZWVwcyB0cmFjayBvZiB3aGljaCBpbnB1dHMgc2hvdWxkIGJlIHdyaXR0ZW4gYmFjayB0byBzZXNzaW9uIG1lbW9yeS4gYHNvdXJjZUl0ZW1zYCByZWZsZWN0c1xuICAgICAgICAvLyB0aGUgb3JpZ2luYWwgb2JqZWN0cyAoc28gd2UgY2FuIHJlc3BlY3QgcmVzdW1lIGNvdW50cykgd2hpbGUgYGZpbHRlcmVkSXRlbXNgLCB3aGVuIHByZXNlbnQsXG4gICAgICAgIC8vIGNvbnRhaW5zIHRoZSBmaWx0ZXJlZC9yZWRhY3RlZCBjbG9uZXMgdGhhdCBtdXN0IGJlIHBlcnNpc3RlZCBmb3IgaGlzdG9yeS5cbiAgICAgICAgLy8gVGhlIGhlbHBlciByZWNvbmNpbGVzIHRoZSBmaWx0ZXJlZCBjb3BpZXMgcHJvZHVjZWQgYnkgY2FsbE1vZGVsSW5wdXRGaWx0ZXIgd2l0aCB0aGVpciBvcmlnaW5hbFxuICAgICAgICAvLyBjb3VudGVycGFydHMgc28gcmVzdW1lLWZyb20tc3RhdGUgYm9va2tlZXBpbmcgc3RheXMgY29uc2lzdGVudCBhbmQgZHVwbGljYXRlIHJlZmVyZW5jZXMgb25seVxuICAgICAgICAvLyBjb25zdW1lIGEgc2luZ2xlIHBlcnNpc3RlbmNlIHNsb3QuXG4gICAgICAgIGNvbnN0IHJlY29yZFNlc3Npb25JdGVtc0ZvclBlcnNpc3RlbmNlID0gKHNvdXJjZUl0ZW1zLCBmaWx0ZXJlZEl0ZW1zKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBwZW5kaW5nV3JpdGVDb3VudHMgPSBzZXNzaW9uSW5wdXRQZW5kaW5nV3JpdGVDb3VudHM7XG4gICAgICAgICAgICBpZiAoZmlsdGVyZWRJdGVtcyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFwZW5kaW5nV3JpdGVDb3VudHMpIHtcbiAgICAgICAgICAgICAgICAgICAgc2Vzc2lvbklucHV0RmlsdGVyZWRTbmFwc2hvdCA9IGZpbHRlcmVkSXRlbXMubWFwKChpdGVtKSA9PiBzdHJ1Y3R1cmVkQ2xvbmUoaXRlbSkpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IHBlcnNpc3RhYmxlSXRlbXMgPSBbXTtcbiAgICAgICAgICAgICAgICBjb25zdCBzb3VyY2VPY2N1cnJlbmNlQ291bnRzID0gbmV3IFdlYWtNYXAoKTtcbiAgICAgICAgICAgICAgICAvLyBUcmFjayBob3cgbWFueSB0aW1lcyBlYWNoIG9yaWdpbmFsIG9iamVjdCBhcHBlYXJzIHNvIGR1cGxpY2F0ZSByZWZlcmVuY2VzIG9ubHkgY29uc3VtZSBvbmUgcGVyc2lzdGVuY2Ugc2xvdC5cbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHNvdXJjZSBvZiBzb3VyY2VJdGVtcykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXNvdXJjZSB8fCB0eXBlb2Ygc291cmNlICE9PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV4dENvdW50ID0gKHNvdXJjZU9jY3VycmVuY2VDb3VudHMuZ2V0KHNvdXJjZSkgPz8gMCkgKyAxO1xuICAgICAgICAgICAgICAgICAgICBzb3VyY2VPY2N1cnJlbmNlQ291bnRzLnNldChzb3VyY2UsIG5leHRDb3VudCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIExldCBmaWx0ZXJlZCBpdGVtcyB3aXRob3V0IGEgb25lLXRvLW9uZSBzb3VyY2UgbWF0Y2ggY2xhaW0gYW55IHJlbWFpbmluZyBwZXJzaXN0ZW5jZSBjb3VudC5cbiAgICAgICAgICAgICAgICBjb25zdCBjb25zdW1lQW55UGVuZGluZ1dyaXRlU2xvdCA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBba2V5LCByZW1haW5pbmddIG9mIHBlbmRpbmdXcml0ZUNvdW50cykge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlbWFpbmluZyA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZW5kaW5nV3JpdGVDb3VudHMuc2V0KGtleSwgcmVtYWluaW5nIC0gMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBmaWx0ZXJlZEl0ZW1zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGZpbHRlcmVkSXRlbSA9IGZpbHRlcmVkSXRlbXNbaV07XG4gICAgICAgICAgICAgICAgICAgIGlmICghZmlsdGVyZWRJdGVtKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBsZXQgYWxsb2NhdGVkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHNvdXJjZSA9IHNvdXJjZUl0ZW1zW2ldO1xuICAgICAgICAgICAgICAgICAgICBpZiAoc291cmNlICYmIHR5cGVvZiBzb3VyY2UgPT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBwZW5kaW5nT2NjdXJyZW5jZXMgPSAoc291cmNlT2NjdXJyZW5jZUNvdW50cy5nZXQoc291cmNlKSA/PyAwKSAtIDE7XG4gICAgICAgICAgICAgICAgICAgICAgICBzb3VyY2VPY2N1cnJlbmNlQ291bnRzLnNldChzb3VyY2UsIHBlbmRpbmdPY2N1cnJlbmNlcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocGVuZGluZ09jY3VycmVuY2VzID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc291cmNlS2V5ID0gZ2V0QWdlbnRJbnB1dEl0ZW1LZXkoc291cmNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlbWFpbmluZyA9IHBlbmRpbmdXcml0ZUNvdW50cy5nZXQoc291cmNlS2V5KSA/PyAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlbWFpbmluZyA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZW5kaW5nV3JpdGVDb3VudHMuc2V0KHNvdXJjZUtleSwgcmVtYWluaW5nIC0gMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGVyc2lzdGFibGVJdGVtcy5wdXNoKHN0cnVjdHVyZWRDbG9uZShmaWx0ZXJlZEl0ZW0pKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGxvY2F0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGZpbHRlcmVkS2V5ID0gZ2V0QWdlbnRJbnB1dEl0ZW1LZXkoZmlsdGVyZWRJdGVtKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZmlsdGVyZWRSZW1haW5pbmcgPSBwZW5kaW5nV3JpdGVDb3VudHMuZ2V0KGZpbHRlcmVkS2V5KSA/PyAwO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZmlsdGVyZWRSZW1haW5pbmcgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwZW5kaW5nV3JpdGVDb3VudHMuc2V0KGZpbHRlcmVkS2V5LCBmaWx0ZXJlZFJlbWFpbmluZyAtIDEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcGVyc2lzdGFibGVJdGVtcy5wdXNoKHN0cnVjdHVyZWRDbG9uZShmaWx0ZXJlZEl0ZW0pKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFsbG9jYXRlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoIXNvdXJjZSAmJiBjb25zdW1lQW55UGVuZGluZ1dyaXRlU2xvdCgpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwZXJzaXN0YWJsZUl0ZW1zLnB1c2goc3RydWN0dXJlZENsb25lKGZpbHRlcmVkSXRlbSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYWxsb2NhdGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoIWFsbG9jYXRlZCAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgIXNvdXJjZSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgc2Vzc2lvbklucHV0RmlsdGVyZWRTbmFwc2hvdCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBQcmVzZXJ2ZSBhdCBsZWFzdCBvbmUgY29weSBzbyBsYXRlciBwZXJzaXN0ZW5jZSByZXNvbHZlcyBldmVuIHdoZW4gbm8gY291bnRlcnMgcmVtYWluLlxuICAgICAgICAgICAgICAgICAgICAgICAgcGVyc2lzdGFibGVJdGVtcy5wdXNoKHN0cnVjdHVyZWRDbG9uZShmaWx0ZXJlZEl0ZW0pKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAocGVyc2lzdGFibGVJdGVtcy5sZW5ndGggPiAwIHx8XG4gICAgICAgICAgICAgICAgICAgIHNlc3Npb25JbnB1dEZpbHRlcmVkU25hcHNob3QgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICBzZXNzaW9uSW5wdXRGaWx0ZXJlZFNuYXBzaG90ID0gcGVyc2lzdGFibGVJdGVtcztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgZmlsdGVyZWQgPSBbXTtcbiAgICAgICAgICAgIGlmICghcGVuZGluZ1dyaXRlQ291bnRzKSB7XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBpdGVtIG9mIHNvdXJjZUl0ZW1zKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghaXRlbSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZmlsdGVyZWQucHVzaChzdHJ1Y3R1cmVkQ2xvbmUoaXRlbSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgaXRlbSBvZiBzb3VyY2VJdGVtcykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWl0ZW0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGtleSA9IGdldEFnZW50SW5wdXRJdGVtS2V5KGl0ZW0pO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCByZW1haW5pbmcgPSBwZW5kaW5nV3JpdGVDb3VudHMuZ2V0KGtleSkgPz8gMDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlbWFpbmluZyA8PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBwZW5kaW5nV3JpdGVDb3VudHMuc2V0KGtleSwgcmVtYWluaW5nIC0gMSk7XG4gICAgICAgICAgICAgICAgICAgIGZpbHRlcmVkLnB1c2goc3RydWN0dXJlZENsb25lKGl0ZW0pKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZmlsdGVyZWQubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIHNlc3Npb25JbnB1dEZpbHRlcmVkU25hcHNob3QgPSBmaWx0ZXJlZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHNlc3Npb25JbnB1dEZpbHRlcmVkU25hcHNob3QgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHNlc3Npb25JbnB1dEZpbHRlcmVkU25hcHNob3QgPSBbXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgLy8gRGV0ZXJtaW5lIHdoaWNoIGl0ZW1zIHNob3VsZCBiZSBjb21taXR0ZWQgdG8gc2Vzc2lvbiBtZW1vcnkgZm9yIHRoaXMgdHVybi5cbiAgICAgICAgLy8gRmlsdGVycyB0YWtlIHByZWNlZGVuY2UgYmVjYXVzZSB0aGV5IHJlZmxlY3QgdGhlIGV4YWN0IHBheWxvYWQgZGVsaXZlcmVkIHRvIHRoZSBtb2RlbC5cbiAgICAgICAgY29uc3QgcmVzb2x2ZVNlc3Npb25JdGVtc0ZvclBlcnNpc3RlbmNlID0gKCkgPT4ge1xuICAgICAgICAgICAgaWYgKHNlc3Npb25JbnB1dEZpbHRlcmVkU25hcHNob3QgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBzZXNzaW9uSW5wdXRGaWx0ZXJlZFNuYXBzaG90O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGhhc0NhbGxNb2RlbElucHV0RmlsdGVyKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBzZXNzaW9uSW5wdXRPcmlnaW5hbFNuYXBzaG90O1xuICAgICAgICB9O1xuICAgICAgICBsZXQgcHJlcGFyZWRJbnB1dCA9IGlucHV0O1xuICAgICAgICBpZiAoIShwcmVwYXJlZElucHV0IGluc3RhbmNlb2YgUnVuU3RhdGUpKSB7XG4gICAgICAgICAgICBpZiAoc2Vzc2lvbiAmJiBBcnJheS5pc0FycmF5KHByZXBhcmVkSW5wdXQpICYmICFzZXNzaW9uSW5wdXRDYWxsYmFjaykge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBVc2VyRXJyb3IoJ1J1bkNvbmZpZy5zZXNzaW9uSW5wdXRDYWxsYmFjayBtdXN0IGJlIHByb3ZpZGVkIHdoZW4gdXNpbmcgc2Vzc2lvbiBoaXN0b3J5IHdpdGggbGlzdCBpbnB1dHMuJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBwcmVwYXJlZCA9IGF3YWl0IHByZXBhcmVJbnB1dEl0ZW1zV2l0aFNlc3Npb24ocHJlcGFyZWRJbnB1dCwgc2Vzc2lvbiwgc2Vzc2lvbklucHV0Q2FsbGJhY2ssIHtcbiAgICAgICAgICAgICAgICAvLyBXaGVuIHRoZSBzZXJ2ZXIgdHJhY2tzIGNvbnZlcnNhdGlvbiBzdGF0ZSB3ZSBvbmx5IHNlbmQgdGhlIG5ldyB0dXJuIGlucHV0cztcbiAgICAgICAgICAgICAgICAvLyBwcmV2aW91cyBtZXNzYWdlcyBhcmUgcmVjb3ZlcmVkIHZpYSBjb252ZXJzYXRpb25JZC9wcmV2aW91c1Jlc3BvbnNlSWQuXG4gICAgICAgICAgICAgICAgaW5jbHVkZUhpc3RvcnlJblByZXBhcmVkSW5wdXQ6ICFzZXJ2ZXJNYW5hZ2VzQ29udmVyc2F0aW9uLFxuICAgICAgICAgICAgICAgIHByZXNlcnZlRHJvcHBlZE5ld0l0ZW1zOiBzZXJ2ZXJNYW5hZ2VzQ29udmVyc2F0aW9uLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAoc2VydmVyTWFuYWdlc0NvbnZlcnNhdGlvbiAmJiBzZXNzaW9uKSB7XG4gICAgICAgICAgICAgICAgLy8gV2hlbiB0aGUgc2VydmVyIG1hbmFnZXMgbWVtb3J5IHdlIG9ubHkgcGVyc2lzdCB0aGUgbmV3IHR1cm4gaW5wdXRzIGxvY2FsbHkgc28gdGhlXG4gICAgICAgICAgICAgICAgLy8gY29udmVyc2F0aW9uIHNlcnZpY2Ugc3RheXMgdGhlIHNpbmdsZSBzb3VyY2Ugb2YgdHJ1dGggZm9yIHByaW9yIGV4Y2hhbmdlcy5cbiAgICAgICAgICAgICAgICBjb25zdCBzZXNzaW9uSXRlbXMgPSBwcmVwYXJlZC5zZXNzaW9uSXRlbXM7XG4gICAgICAgICAgICAgICAgaWYgKHNlc3Npb25JdGVtcyAmJiBzZXNzaW9uSXRlbXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICBwcmVwYXJlZElucHV0ID0gc2Vzc2lvbkl0ZW1zO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcHJlcGFyZWRJbnB1dCA9IHByZXBhcmVkLnByZXBhcmVkSW5wdXQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcHJlcGFyZWRJbnB1dCA9IHByZXBhcmVkLnByZXBhcmVkSW5wdXQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoc2Vzc2lvbikge1xuICAgICAgICAgICAgICAgIGNvbnN0IGl0ZW1zID0gcHJlcGFyZWQuc2Vzc2lvbkl0ZW1zID8/IFtdO1xuICAgICAgICAgICAgICAgIC8vIENsb25lIHRoZSBpdGVtcyB0aGF0IHdpbGwgYmUgcGVyc2lzdGVkIHNvIGxhdGVyIG11dGF0aW9ucyAoZmlsdGVycywgaG9va3MpIGNhbm5vdCBkZXN5bmMgaGlzdG9yeS5cbiAgICAgICAgICAgICAgICBzZXNzaW9uSW5wdXRPcmlnaW5hbFNuYXBzaG90ID0gaXRlbXMubWFwKChpdGVtKSA9PiBzdHJ1Y3R1cmVkQ2xvbmUoaXRlbSkpO1xuICAgICAgICAgICAgICAgIC8vIFJlc2V0IHBlbmRpbmcgY291bnRzIHNvIGVhY2ggcHJlcGFyZWQgaXRlbSByZXNlcnZlcyBleGFjdGx5IG9uZSB3cml0ZSBzbG90IHVudGlsIGZpbHRlcnMgcmVzb2x2ZSBtYXRjaGVzLlxuICAgICAgICAgICAgICAgIHNlc3Npb25JbnB1dFBlbmRpbmdXcml0ZUNvdW50cyA9IG5ldyBNYXAoKTtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgaXRlbXMpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qga2V5ID0gZ2V0QWdlbnRJbnB1dEl0ZW1LZXkoaXRlbSk7XG4gICAgICAgICAgICAgICAgICAgIHNlc3Npb25JbnB1dFBlbmRpbmdXcml0ZUNvdW50cy5zZXQoa2V5LCAoc2Vzc2lvbklucHV0UGVuZGluZ1dyaXRlQ291bnRzLmdldChrZXkpID8/IDApICsgMSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIFN0cmVhbWluZyBydW5zIHBlcnNpc3QgdGhlIGlucHV0IGFzeW5jaHJvbm91c2x5LCBzbyB0cmFjayBhIG9uZS1zaG90IGhlbHBlclxuICAgICAgICAvLyB0aGF0IGNhbiBiZSBhd2FpdGVkIGZyb20gbXVsdGlwbGUgYnJhbmNoZXMgd2l0aG91dCBkb3VibGUtd3JpdGluZy5cbiAgICAgICAgbGV0IGVuc3VyZVN0cmVhbUlucHV0UGVyc2lzdGVkO1xuICAgICAgICAvLyBTZXNzaW9ucyByZW1haW4gdXNhYmxlIGFsb25nc2lkZSBzZXJ2ZXItbWFuYWdlZCBjb252ZXJzYXRpb25zIChlLmcuLCBPcGVuQUlDb252ZXJzYXRpb25zU2Vzc2lvbilcbiAgICAgICAgLy8gc28gY2FsbGVycyBjYW4gcmV1c2UgY2FsbGJhY2tzLCByZXN1bWUtZnJvbS1zdGF0ZSBsb2dpYywgYW5kIG90aGVyIGhlbHBlcnMgd2l0aG91dCBkdXBsaWNhdGluZ1xuICAgICAgICAvLyByZW1vdGUgaGlzdG9yeSwgc28gcGVyc2lzdGVuY2UgaXMgZ2F0ZWQgb24gc2VydmVyTWFuYWdlc0NvbnZlcnNhdGlvbi5cbiAgICAgICAgaWYgKHNlc3Npb24gJiYgIXNlcnZlck1hbmFnZXNDb252ZXJzYXRpb24pIHtcbiAgICAgICAgICAgIGxldCBwZXJzaXN0ZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIGVuc3VyZVN0cmVhbUlucHV0UGVyc2lzdGVkID0gYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChwZXJzaXN0ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCBpdGVtc1RvUGVyc2lzdCA9IHJlc29sdmVTZXNzaW9uSXRlbXNGb3JQZXJzaXN0ZW5jZSgpO1xuICAgICAgICAgICAgICAgIGlmICghaXRlbXNUb1BlcnNpc3QgfHwgaXRlbXNUb1BlcnNpc3QubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcGVyc2lzdGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBhd2FpdCBzYXZlU3RyZWFtSW5wdXRUb1Nlc3Npb24oc2Vzc2lvbiwgaXRlbXNUb1BlcnNpc3QpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBleGVjdXRlUnVuID0gYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgaWYgKGVmZmVjdGl2ZU9wdGlvbnMuc3RyZWFtKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgc3RyZWFtUmVzdWx0ID0gYXdhaXQgdGhpcy4jcnVuSW5kaXZpZHVhbFN0cmVhbShhZ2VudCwgcHJlcGFyZWRJbnB1dCwgZWZmZWN0aXZlT3B0aW9ucywgZW5zdXJlU3RyZWFtSW5wdXRQZXJzaXN0ZWQsIHJlY29yZFNlc3Npb25JdGVtc0ZvclBlcnNpc3RlbmNlKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gc3RyZWFtUmVzdWx0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgcnVuUmVzdWx0ID0gYXdhaXQgdGhpcy4jcnVuSW5kaXZpZHVhbE5vblN0cmVhbShhZ2VudCwgcHJlcGFyZWRJbnB1dCwgZWZmZWN0aXZlT3B0aW9ucywgcmVjb3JkU2Vzc2lvbkl0ZW1zRm9yUGVyc2lzdGVuY2UpO1xuICAgICAgICAgICAgLy8gU2VlIG5vdGUgYWJvdmU6IGFsbG93IHNlc3Npb25zIHRvIHJ1biBmb3IgY2FsbGJhY2tzL3N0YXRlIGJ1dCBza2lwIHdyaXRlcyB3aGVuIHRoZSBzZXJ2ZXJcbiAgICAgICAgICAgIC8vIGlzIHRoZSBzb3VyY2Ugb2YgdHJ1dGggZm9yIHRyYW5zY3JpcHQgaGlzdG9yeS5cbiAgICAgICAgICAgIGlmIChzZXNzaW9uICYmICFzZXJ2ZXJNYW5hZ2VzQ29udmVyc2F0aW9uKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgc2F2ZVRvU2Vzc2lvbihzZXNzaW9uLCByZXNvbHZlU2Vzc2lvbkl0ZW1zRm9yUGVyc2lzdGVuY2UoKSwgcnVuUmVzdWx0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBydW5SZXN1bHQ7XG4gICAgICAgIH07XG4gICAgICAgIGlmIChwcmVwYXJlZElucHV0IGluc3RhbmNlb2YgUnVuU3RhdGUgJiYgcHJlcGFyZWRJbnB1dC5fdHJhY2UpIHtcbiAgICAgICAgICAgIHJldHVybiB3aXRoVHJhY2UocHJlcGFyZWRJbnB1dC5fdHJhY2UsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAocHJlcGFyZWRJbnB1dC5fY3VycmVudEFnZW50U3Bhbikge1xuICAgICAgICAgICAgICAgICAgICBzZXRDdXJyZW50U3BhbihwcmVwYXJlZElucHV0Ll9jdXJyZW50QWdlbnRTcGFuKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIGV4ZWN1dGVSdW4oKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBnZXRPckNyZWF0ZVRyYWNlKGFzeW5jICgpID0+IGV4ZWN1dGVSdW4oKSwge1xuICAgICAgICAgICAgdHJhY2VJZDogdGhpcy5jb25maWcudHJhY2VJZCxcbiAgICAgICAgICAgIG5hbWU6IHRoaXMuY29uZmlnLndvcmtmbG93TmFtZSxcbiAgICAgICAgICAgIGdyb3VwSWQ6IHRoaXMuY29uZmlnLmdyb3VwSWQsXG4gICAgICAgICAgICBtZXRhZGF0YTogdGhpcy5jb25maWcudHJhY2VNZXRhZGF0YSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgLy8gIEludGVybmFsc1xuICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgaW5wdXRHdWFyZHJhaWxEZWZzO1xuICAgIG91dHB1dEd1YXJkcmFpbERlZnM7XG4gICAgI2dldElucHV0R3VhcmRyYWlsRGVmaW5pdGlvbnMoc3RhdGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaW5wdXRHdWFyZHJhaWxEZWZzLmNvbmNhdChzdGF0ZS5fY3VycmVudEFnZW50LmlucHV0R3VhcmRyYWlscy5tYXAoZGVmaW5lSW5wdXRHdWFyZHJhaWwpKTtcbiAgICB9XG4gICAgI3NwbGl0SW5wdXRHdWFyZHJhaWxzKHN0YXRlKSB7XG4gICAgICAgIGNvbnN0IGd1YXJkcmFpbHMgPSB0aGlzLiNnZXRJbnB1dEd1YXJkcmFpbERlZmluaXRpb25zKHN0YXRlKTtcbiAgICAgICAgY29uc3QgYmxvY2tpbmcgPSBbXTtcbiAgICAgICAgY29uc3QgcGFyYWxsZWwgPSBbXTtcbiAgICAgICAgZm9yIChjb25zdCBndWFyZHJhaWwgb2YgZ3VhcmRyYWlscykge1xuICAgICAgICAgICAgaWYgKGd1YXJkcmFpbC5ydW5JblBhcmFsbGVsID09PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgIGJsb2NraW5nLnB1c2goZ3VhcmRyYWlsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHBhcmFsbGVsLnB1c2goZ3VhcmRyYWlsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4geyBibG9ja2luZywgcGFyYWxsZWwgfTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGludGVybmFsXG4gICAgICogUmVzb2x2ZXMgdGhlIGVmZmVjdGl2ZSBtb2RlbCBvbmNlIHNvIGJvdGggcnVuIGxvb3BzIG9iZXkgdGhlIHNhbWUgcHJlY2VkZW5jZSBydWxlcy5cbiAgICAgKi9cbiAgICBhc3luYyAjcmVzb2x2ZU1vZGVsRm9yQWdlbnQoYWdlbnQpIHtcbiAgICAgICAgY29uc3QgZXhwbGljdGx5TW9kZWxTZXQgPSAoYWdlbnQubW9kZWwgIT09IHVuZGVmaW5lZCAmJlxuICAgICAgICAgICAgYWdlbnQubW9kZWwgIT09IEFnZW50LkRFRkFVTFRfTU9ERUxfUExBQ0VIT0xERVIpIHx8XG4gICAgICAgICAgICAodGhpcy5jb25maWcubW9kZWwgIT09IHVuZGVmaW5lZCAmJlxuICAgICAgICAgICAgICAgIHRoaXMuY29uZmlnLm1vZGVsICE9PSBBZ2VudC5ERUZBVUxUX01PREVMX1BMQUNFSE9MREVSKTtcbiAgICAgICAgbGV0IHJlc29sdmVkTW9kZWwgPSBzZWxlY3RNb2RlbChhZ2VudC5tb2RlbCwgdGhpcy5jb25maWcubW9kZWwpO1xuICAgICAgICBpZiAodHlwZW9mIHJlc29sdmVkTW9kZWwgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICByZXNvbHZlZE1vZGVsID0gYXdhaXQgdGhpcy5jb25maWcubW9kZWxQcm92aWRlci5nZXRNb2RlbChyZXNvbHZlZE1vZGVsKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4geyBtb2RlbDogcmVzb2x2ZWRNb2RlbCwgZXhwbGljdGx5TW9kZWxTZXQgfTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgYXN5bmMgI3J1bkluZGl2aWR1YWxOb25TdHJlYW0oc3RhcnRpbmdBZ2VudCwgaW5wdXQsIG9wdGlvbnMsIFxuICAgIC8vIHNlc3Npb25JbnB1dFVwZGF0ZSBsZXRzIHRoZSBjYWxsZXIgYWRqdXN0IHF1ZXVlZCBzZXNzaW9uIGl0ZW1zIGFmdGVyIGZpbHRlcnMgcnVuIHNvIHdlXG4gICAgLy8gcGVyc2lzdCBleGFjdGx5IHdoYXQgd2Ugc2VuZCB0byB0aGUgbW9kZWwgKGUuZy4sIGFmdGVyIHJlZGFjdGlvbnMgb3IgdHJ1bmNhdGlvbikuXG4gICAgc2Vzc2lvbklucHV0VXBkYXRlKSB7XG4gICAgICAgIHJldHVybiB3aXRoTmV3U3BhbkNvbnRleHQoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgLy8gaWYgd2UgaGF2ZSBhIHNhdmVkIHN0YXRlIHdlIHVzZSB0aGF0IG9uZSwgb3RoZXJ3aXNlIHdlIGNyZWF0ZSBhIG5ldyBvbmVcbiAgICAgICAgICAgIGNvbnN0IGlzUmVzdW1lZFN0YXRlID0gaW5wdXQgaW5zdGFuY2VvZiBSdW5TdGF0ZTtcbiAgICAgICAgICAgIGNvbnN0IHN0YXRlID0gaXNSZXN1bWVkU3RhdGVcbiAgICAgICAgICAgICAgICA/IGlucHV0XG4gICAgICAgICAgICAgICAgOiBuZXcgUnVuU3RhdGUob3B0aW9ucy5jb250ZXh0IGluc3RhbmNlb2YgUnVuQ29udGV4dFxuICAgICAgICAgICAgICAgICAgICA/IG9wdGlvbnMuY29udGV4dFxuICAgICAgICAgICAgICAgICAgICA6IG5ldyBSdW5Db250ZXh0KG9wdGlvbnMuY29udGV4dCksIGlucHV0LCBzdGFydGluZ0FnZW50LCBvcHRpb25zLm1heFR1cm5zID8/IERFRkFVTFRfTUFYX1RVUk5TKTtcbiAgICAgICAgICAgIGNvbnN0IHNlcnZlckNvbnZlcnNhdGlvblRyYWNrZXIgPSBvcHRpb25zLmNvbnZlcnNhdGlvbklkIHx8IG9wdGlvbnMucHJldmlvdXNSZXNwb25zZUlkXG4gICAgICAgICAgICAgICAgPyBuZXcgU2VydmVyQ29udmVyc2F0aW9uVHJhY2tlcih7XG4gICAgICAgICAgICAgICAgICAgIGNvbnZlcnNhdGlvbklkOiBvcHRpb25zLmNvbnZlcnNhdGlvbklkLFxuICAgICAgICAgICAgICAgICAgICBwcmV2aW91c1Jlc3BvbnNlSWQ6IG9wdGlvbnMucHJldmlvdXNSZXNwb25zZUlkLFxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgICAgICAgICBpZiAoc2VydmVyQ29udmVyc2F0aW9uVHJhY2tlciAmJiBpc1Jlc3VtZWRTdGF0ZSkge1xuICAgICAgICAgICAgICAgIHNlcnZlckNvbnZlcnNhdGlvblRyYWNrZXIucHJpbWVGcm9tU3RhdGUoe1xuICAgICAgICAgICAgICAgICAgICBvcmlnaW5hbElucHV0OiBzdGF0ZS5fb3JpZ2luYWxJbnB1dCxcbiAgICAgICAgICAgICAgICAgICAgZ2VuZXJhdGVkSXRlbXM6IHN0YXRlLl9nZW5lcmF0ZWRJdGVtcyxcbiAgICAgICAgICAgICAgICAgICAgbW9kZWxSZXNwb25zZXM6IHN0YXRlLl9tb2RlbFJlc3BvbnNlcyxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCBjb250aW51aW5nSW50ZXJydXB0ZWRUdXJuID0gZmFsc2U7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHdoaWxlICh0cnVlKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGlmIHdlIGRvbid0IGhhdmUgYSBjdXJyZW50IHN0ZXAsIHdlIHRyZWF0IHRoaXMgYXMgYSBuZXcgcnVuXG4gICAgICAgICAgICAgICAgICAgIHN0YXRlLl9jdXJyZW50U3RlcCA9IHN0YXRlLl9jdXJyZW50U3RlcCA/PyB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnbmV4dF9zdGVwX3J1bl9hZ2FpbicsXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIGlmIChzdGF0ZS5fY3VycmVudFN0ZXAudHlwZSA9PT0gJ25leHRfc3RlcF9pbnRlcnJ1cHRpb24nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsb2dnZXIuZGVidWcoJ0NvbnRpbnVpbmcgZnJvbSBpbnRlcnJ1cHRpb24nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghc3RhdGUuX2xhc3RUdXJuUmVzcG9uc2UgfHwgIXN0YXRlLl9sYXN0UHJvY2Vzc2VkUmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVXNlckVycm9yKCdObyBtb2RlbCByZXNwb25zZSBmb3VuZCBpbiBwcmV2aW91cyBzdGF0ZScsIHN0YXRlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHR1cm5SZXN1bHQgPSBhd2FpdCByZXNvbHZlSW50ZXJydXB0ZWRUdXJuKHN0YXRlLl9jdXJyZW50QWdlbnQsIHN0YXRlLl9vcmlnaW5hbElucHV0LCBzdGF0ZS5fZ2VuZXJhdGVkSXRlbXMsIHN0YXRlLl9sYXN0VHVyblJlc3BvbnNlLCBzdGF0ZS5fbGFzdFByb2Nlc3NlZFJlc3BvbnNlLCB0aGlzLCBzdGF0ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZS5fdG9vbFVzZVRyYWNrZXIuYWRkVG9vbFVzZShzdGF0ZS5fY3VycmVudEFnZW50LCBzdGF0ZS5fbGFzdFByb2Nlc3NlZFJlc3BvbnNlLnRvb2xzVXNlZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZS5fb3JpZ2luYWxJbnB1dCA9IHR1cm5SZXN1bHQub3JpZ2luYWxJbnB1dDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlLl9nZW5lcmF0ZWRJdGVtcyA9IHR1cm5SZXN1bHQuZ2VuZXJhdGVkSXRlbXM7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBEb24ndCByZXNldCBjb3VudGVyIGhlcmUgLSByZXNvbHZlSW50ZXJydXB0ZWRUdXJuIGFscmVhZHkgYWRqdXN0ZWQgaXQgdmlhIHJld2luZCBsb2dpY1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGhlIGNvdW50ZXIgd2lsbCBiZSByZXNldCB3aGVuIF9jdXJyZW50VHVybiBpcyBpbmNyZW1lbnRlZCAoc3RhcnRpbmcgYSBuZXcgdHVybilcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0dXJuUmVzdWx0Lm5leHRTdGVwLnR5cGUgPT09ICduZXh0X3N0ZXBfaW50ZXJydXB0aW9uJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHdlIGFyZSBzdGlsbCBpbiBhbiBpbnRlcnJ1cHRpb24sIHNvIHdlIG5lZWQgdG8gYXZvaWQgYW4gaW5maW5pdGUgbG9vcFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlLl9jdXJyZW50U3RlcCA9IHR1cm5SZXN1bHQubmV4dFN0ZXA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBSdW5SZXN1bHQoc3RhdGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gSWYgY29udGludWluZyBmcm9tIGludGVycnVwdGlvbiB3aXRoIG5leHRfc3RlcF9ydW5fYWdhaW4sIHNldCBzdGVwIHRvIHVuZGVmaW5lZFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gc28gdGhlIGxvb3AgdHJlYXRzIGl0IGFzIGEgbmV3IHN0ZXAgd2l0aG91dCBpbmNyZW1lbnRpbmcgdGhlIHR1cm4uXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBUaGUgY291bnRlciBoYXMgYWxyZWFkeSBiZWVuIGFkanVzdGVkIGJ5IHJlc29sdmVJbnRlcnJ1cHRlZFR1cm4ncyByZXdpbmQgbG9naWMuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodHVyblJlc3VsdC5uZXh0U3RlcC50eXBlID09PSAnbmV4dF9zdGVwX3J1bl9hZ2FpbicpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51aW5nSW50ZXJydXB0ZWRUdXJuID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZS5fY3VycmVudFN0ZXAgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51aW5nSW50ZXJydXB0ZWRUdXJuID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZS5fY3VycmVudFN0ZXAgPSB0dXJuUmVzdWx0Lm5leHRTdGVwO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChzdGF0ZS5fY3VycmVudFN0ZXAudHlwZSA9PT0gJ25leHRfc3RlcF9ydW5fYWdhaW4nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBhcnRpZmFjdHMgPSBhd2FpdCBwcmVwYXJlQWdlbnRBcnRpZmFjdHMoc3RhdGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaXNSZXN1bWluZ0Zyb21JbnRlcnJ1cHRpb24gPSBpc1Jlc3VtZWRTdGF0ZSAmJiBjb250aW51aW5nSW50ZXJydXB0ZWRUdXJuO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWluZ0ludGVycnVwdGVkVHVybiA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gRG8gbm90IGFkdmFuY2UgdGhlIHR1cm4gd2hlbiByZXN1bWluZyBmcm9tIGFuIGludGVycnVwdGlvbjsgdGhlIG5leHQgbW9kZWwgY2FsbCBpc1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gc3RpbGwgcGFydCBvZiB0aGUgc2FtZSBsb2dpY2FsIHR1cm4uXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWlzUmVzdW1pbmdGcm9tSW50ZXJydXB0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUuX2N1cnJlbnRUdXJuKys7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUuX2N1cnJlbnRUdXJuUGVyc2lzdGVkSXRlbUNvdW50ID0gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzdGF0ZS5fY3VycmVudFR1cm4gPiBzdGF0ZS5fbWF4VHVybnMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZS5fY3VycmVudEFnZW50U3Bhbj8uc2V0RXJyb3Ioe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnTWF4IHR1cm5zIGV4Y2VlZGVkJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogeyBtYXhfdHVybnM6IHN0YXRlLl9tYXhUdXJucyB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBNYXhUdXJuc0V4Y2VlZGVkRXJyb3IoYE1heCB0dXJucyAoJHtzdGF0ZS5fbWF4VHVybnN9KSBleGNlZWRlZGAsIHN0YXRlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZyhgUnVubmluZyBhZ2VudCAke3N0YXRlLl9jdXJyZW50QWdlbnQubmFtZX0gKHR1cm4gJHtzdGF0ZS5fY3VycmVudFR1cm59KWApO1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHBhcmFsbGVsR3VhcmRyYWlsUHJvbWlzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIE9ubHkgcnVuIGlucHV0IGd1YXJkcmFpbHMgb24gdGhlIGZpcnN0IHR1cm4gb2YgYSBuZXcgcnVuLlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHN0YXRlLl9jdXJyZW50VHVybiA9PT0gMSAmJiAhaXNSZXN1bWluZ0Zyb21JbnRlcnJ1cHRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBndWFyZHJhaWxzID0gdGhpcy4jc3BsaXRJbnB1dEd1YXJkcmFpbHMoc3RhdGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChndWFyZHJhaWxzLmJsb2NraW5nLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy4jcnVuSW5wdXRHdWFyZHJhaWxzKHN0YXRlLCBndWFyZHJhaWxzLmJsb2NraW5nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGd1YXJkcmFpbHMucGFyYWxsZWwubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJhbGxlbEd1YXJkcmFpbFByb21pc2UgPSB0aGlzLiNydW5JbnB1dEd1YXJkcmFpbHMoc3RhdGUsIGd1YXJkcmFpbHMucGFyYWxsZWwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJhbGxlbEd1YXJkcmFpbFByb21pc2UuY2F0Y2goKCkgPT4geyB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0dXJuSW5wdXQgPSBzZXJ2ZXJDb252ZXJzYXRpb25UcmFja2VyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBzZXJ2ZXJDb252ZXJzYXRpb25UcmFja2VyLnByZXBhcmVJbnB1dChzdGF0ZS5fb3JpZ2luYWxJbnB1dCwgc3RhdGUuX2dlbmVyYXRlZEl0ZW1zKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogZ2V0VHVybklucHV0KHN0YXRlLl9vcmlnaW5hbElucHV0LCBzdGF0ZS5fZ2VuZXJhdGVkSXRlbXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHN0YXRlLl9ub0FjdGl2ZUFnZW50UnVuKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUuX2N1cnJlbnRBZ2VudC5lbWl0KCdhZ2VudF9zdGFydCcsIHN0YXRlLl9jb250ZXh0LCBzdGF0ZS5fY3VycmVudEFnZW50LCB0dXJuSW5wdXQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgnYWdlbnRfc3RhcnQnLCBzdGF0ZS5fY29udGV4dCwgc3RhdGUuX2N1cnJlbnRBZ2VudCwgdHVybklucHV0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHByZXBhcmVkQ2FsbCA9IGF3YWl0IHRoaXMuI3ByZXBhcmVNb2RlbENhbGwoc3RhdGUsIG9wdGlvbnMsIGFydGlmYWN0cywgdHVybklucHV0LCBzZXJ2ZXJDb252ZXJzYXRpb25UcmFja2VyLCBzZXNzaW9uSW5wdXRVcGRhdGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUuX2xhc3RUdXJuUmVzcG9uc2UgPSBhd2FpdCBwcmVwYXJlZENhbGwubW9kZWwuZ2V0UmVzcG9uc2Uoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN5c3RlbUluc3RydWN0aW9uczogcHJlcGFyZWRDYWxsLm1vZGVsSW5wdXQuaW5zdHJ1Y3Rpb25zLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb21wdDogcHJlcGFyZWRDYWxsLnByb21wdCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBFeHBsaWNpdCBhZ2VudC9ydW4gY29uZmlnIG1vZGVscyBzaG91bGQgdGFrZSBwcmVjZWRlbmNlIG92ZXIgcHJvbXB0IGRlZmF1bHRzLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLihwcmVwYXJlZENhbGwuZXhwbGljdGx5TW9kZWxTZXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyB7IG92ZXJyaWRlUHJvbXB0TW9kZWw6IHRydWUgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IHt9KSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnB1dDogcHJlcGFyZWRDYWxsLm1vZGVsSW5wdXQuaW5wdXQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJldmlvdXNSZXNwb25zZUlkOiBwcmVwYXJlZENhbGwucHJldmlvdXNSZXNwb25zZUlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnZlcnNhdGlvbklkOiBwcmVwYXJlZENhbGwuY29udmVyc2F0aW9uSWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbW9kZWxTZXR0aW5nczogcHJlcGFyZWRDYWxsLm1vZGVsU2V0dGluZ3MsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9vbHM6IHByZXBhcmVkQ2FsbC5zZXJpYWxpemVkVG9vbHMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9vbHNFeHBsaWNpdGx5UHJvdmlkZWQ6IHByZXBhcmVkQ2FsbC50b29sc0V4cGxpY2l0bHlQcm92aWRlZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvdXRwdXRUeXBlOiBjb252ZXJ0QWdlbnRPdXRwdXRUeXBlVG9TZXJpYWxpemFibGUoc3RhdGUuX2N1cnJlbnRBZ2VudC5vdXRwdXRUeXBlKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYW5kb2ZmczogcHJlcGFyZWRDYWxsLnNlcmlhbGl6ZWRIYW5kb2ZmcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cmFjaW5nOiBnZXRUcmFjaW5nKHRoaXMuY29uZmlnLnRyYWNpbmdEaXNhYmxlZCwgdGhpcy5jb25maWcudHJhY2VJbmNsdWRlU2Vuc2l0aXZlRGF0YSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2lnbmFsOiBvcHRpb25zLnNpZ25hbCxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUuX21vZGVsUmVzcG9uc2VzLnB1c2goc3RhdGUuX2xhc3RUdXJuUmVzcG9uc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUuX2NvbnRleHQudXNhZ2UuYWRkKHN0YXRlLl9sYXN0VHVyblJlc3BvbnNlLnVzYWdlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlLl9ub0FjdGl2ZUFnZW50UnVuID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBBZnRlciBlYWNoIHR1cm4gcmVjb3JkIHRoZSBpdGVtcyBlY2hvZWQgYnkgdGhlIHNlcnZlciBzbyBmdXR1cmUgcmVxdWVzdHMgb25seVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gaW5jbHVkZSB0aGUgaW5jcmVtZW50YWwgaW5wdXRzIHRoYXQgaGF2ZSBub3QgeWV0IGJlZW4gYWNrbm93bGVkZ2VkLlxuICAgICAgICAgICAgICAgICAgICAgICAgc2VydmVyQ29udmVyc2F0aW9uVHJhY2tlcj8udHJhY2tTZXJ2ZXJJdGVtcyhzdGF0ZS5fbGFzdFR1cm5SZXNwb25zZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBwcm9jZXNzZWRSZXNwb25zZSA9IHByb2Nlc3NNb2RlbFJlc3BvbnNlKHN0YXRlLl9sYXN0VHVyblJlc3BvbnNlLCBzdGF0ZS5fY3VycmVudEFnZW50LCBwcmVwYXJlZENhbGwudG9vbHMsIHByZXBhcmVkQ2FsbC5oYW5kb2Zmcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZS5fbGFzdFByb2Nlc3NlZFJlc3BvbnNlID0gcHJvY2Vzc2VkUmVzcG9uc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0dXJuUmVzdWx0ID0gYXdhaXQgcmVzb2x2ZVR1cm5BZnRlck1vZGVsUmVzcG9uc2Uoc3RhdGUuX2N1cnJlbnRBZ2VudCwgc3RhdGUuX29yaWdpbmFsSW5wdXQsIHN0YXRlLl9nZW5lcmF0ZWRJdGVtcywgc3RhdGUuX2xhc3RUdXJuUmVzcG9uc2UsIHN0YXRlLl9sYXN0UHJvY2Vzc2VkUmVzcG9uc2UsIHRoaXMsIHN0YXRlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlLl90b29sVXNlVHJhY2tlci5hZGRUb29sVXNlKHN0YXRlLl9jdXJyZW50QWdlbnQsIHN0YXRlLl9sYXN0UHJvY2Vzc2VkUmVzcG9uc2UudG9vbHNVc2VkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlLl9vcmlnaW5hbElucHV0ID0gdHVyblJlc3VsdC5vcmlnaW5hbElucHV0O1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUuX2dlbmVyYXRlZEl0ZW1zID0gdHVyblJlc3VsdC5nZW5lcmF0ZWRJdGVtcztcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0dXJuUmVzdWx0Lm5leHRTdGVwLnR5cGUgPT09ICduZXh0X3N0ZXBfcnVuX2FnYWluJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlLl9jdXJyZW50VHVyblBlcnNpc3RlZEl0ZW1Db3VudCA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZS5fY3VycmVudFN0ZXAgPSB0dXJuUmVzdWx0Lm5leHRTdGVwO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBhcmFsbGVsR3VhcmRyYWlsUHJvbWlzZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHBhcmFsbGVsR3VhcmRyYWlsUHJvbWlzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoc3RhdGUuX2N1cnJlbnRTdGVwICYmXG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZS5fY3VycmVudFN0ZXAudHlwZSA9PT0gJ25leHRfc3RlcF9maW5hbF9vdXRwdXQnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLiNydW5PdXRwdXRHdWFyZHJhaWxzKHN0YXRlLCBzdGF0ZS5fY3VycmVudFN0ZXAub3V0cHV0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgnYWdlbnRfZW5kJywgc3RhdGUuX2NvbnRleHQsIHN0YXRlLl9jdXJyZW50QWdlbnQsIHN0YXRlLl9jdXJyZW50U3RlcC5vdXRwdXQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUuX2N1cnJlbnRBZ2VudC5lbWl0KCdhZ2VudF9lbmQnLCBzdGF0ZS5fY29udGV4dCwgc3RhdGUuX2N1cnJlbnRTdGVwLm91dHB1dCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFJ1blJlc3VsdChzdGF0ZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoc3RhdGUuX2N1cnJlbnRTdGVwICYmXG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZS5fY3VycmVudFN0ZXAudHlwZSA9PT0gJ25leHRfc3RlcF9oYW5kb2ZmJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUuX2N1cnJlbnRBZ2VudCA9IHN0YXRlLl9jdXJyZW50U3RlcC5uZXdBZ2VudDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzdGF0ZS5fY3VycmVudEFnZW50U3Bhbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlLl9jdXJyZW50QWdlbnRTcGFuLmVuZCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc2V0Q3VycmVudFNwYW4oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZS5fY3VycmVudEFnZW50U3BhbiA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlLl9ub0FjdGl2ZUFnZW50UnVuID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHdlJ3ZlIHByb2Nlc3NlZCB0aGUgaGFuZG9mZiwgc28gd2UgbmVlZCB0byBydW4gdGhlIGxvb3AgYWdhaW5cbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlLl9jdXJyZW50U3RlcCA9IHsgdHlwZTogJ25leHRfc3RlcF9ydW5fYWdhaW4nIH07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoc3RhdGUuX2N1cnJlbnRTdGVwICYmXG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZS5fY3VycmVudFN0ZXAudHlwZSA9PT0gJ25leHRfc3RlcF9pbnRlcnJ1cHRpb24nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBpbnRlcnJ1cHRlZC4gRG9uJ3QgcnVuIGFueSBndWFyZHJhaWxzXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFJ1blJlc3VsdChzdGF0ZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsb2dnZXIuZGVidWcoJ1J1bm5pbmcgbmV4dCBsb29wJyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgaWYgKHN0YXRlLl9jdXJyZW50QWdlbnRTcGFuKSB7XG4gICAgICAgICAgICAgICAgICAgIHN0YXRlLl9jdXJyZW50QWdlbnRTcGFuLnNldEVycm9yKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdFcnJvciBpbiBhZ2VudCBydW4nLFxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogeyBlcnJvcjogU3RyaW5nKGVycikgfSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRocm93IGVycjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZpbmFsbHkge1xuICAgICAgICAgICAgICAgIGlmIChzdGF0ZS5fY3VycmVudFN0ZXA/LnR5cGUgIT09ICduZXh0X3N0ZXBfaW50ZXJydXB0aW9uJykge1xuICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgZGlzcG9zZVJlc29sdmVkQ29tcHV0ZXJzKHsgcnVuQ29udGV4dDogc3RhdGUuX2NvbnRleHQgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsb2dnZXIud2FybihgRmFpbGVkIHRvIGRpc3Bvc2UgY29tcHV0ZXJzIGFmdGVyIHJ1bjogJHtlcnJvcn1gKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoc3RhdGUuX2N1cnJlbnRBZ2VudFNwYW4pIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHN0YXRlLl9jdXJyZW50U3RlcD8udHlwZSAhPT0gJ25leHRfc3RlcF9pbnRlcnJ1cHRpb24nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBkb24ndCBlbmQgdGhlIHNwYW4gaWYgdGhlIHJ1biB3YXMgaW50ZXJydXB0ZWRcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlLl9jdXJyZW50QWdlbnRTcGFuLmVuZCgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJlc2V0Q3VycmVudFNwYW4oKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBhc3luYyAjcnVuU3RyZWFtTG9vcChyZXN1bHQsIG9wdGlvbnMsIGlzUmVzdW1lZFN0YXRlLCBlbnN1cmVTdHJlYW1JbnB1dFBlcnNpc3RlZCwgc2Vzc2lvbklucHV0VXBkYXRlKSB7XG4gICAgICAgIGNvbnN0IHNlcnZlck1hbmFnZXNDb252ZXJzYXRpb24gPSBCb29sZWFuKG9wdGlvbnMuY29udmVyc2F0aW9uSWQpIHx8IEJvb2xlYW4ob3B0aW9ucy5wcmV2aW91c1Jlc3BvbnNlSWQpO1xuICAgICAgICBjb25zdCBzZXJ2ZXJDb252ZXJzYXRpb25UcmFja2VyID0gc2VydmVyTWFuYWdlc0NvbnZlcnNhdGlvblxuICAgICAgICAgICAgPyBuZXcgU2VydmVyQ29udmVyc2F0aW9uVHJhY2tlcih7XG4gICAgICAgICAgICAgICAgY29udmVyc2F0aW9uSWQ6IG9wdGlvbnMuY29udmVyc2F0aW9uSWQsXG4gICAgICAgICAgICAgICAgcHJldmlvdXNSZXNwb25zZUlkOiBvcHRpb25zLnByZXZpb3VzUmVzcG9uc2VJZCxcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICA6IHVuZGVmaW5lZDtcbiAgICAgICAgbGV0IGhhbmRlZElucHV0VG9Nb2RlbCA9IGZhbHNlO1xuICAgICAgICBsZXQgc3RyZWFtSW5wdXRQZXJzaXN0ZWQgPSBmYWxzZTtcbiAgICAgICAgY29uc3QgcGVyc2lzdFN0cmVhbUlucHV0SWZOZWVkZWQgPSBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBpZiAoc3RyZWFtSW5wdXRQZXJzaXN0ZWQgfHwgIWVuc3VyZVN0cmVhbUlucHV0UGVyc2lzdGVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gQm90aCBzdWNjZXNzIGFuZCBlcnJvciBwYXRocyBjYWxsIHRoaXMgaGVscGVyLCBzbyBndWFyZCBhZ2FpbnN0IG11bHRpcGxlIHdyaXRlcy5cbiAgICAgICAgICAgIGF3YWl0IGVuc3VyZVN0cmVhbUlucHV0UGVyc2lzdGVkKCk7XG4gICAgICAgICAgICBzdHJlYW1JbnB1dFBlcnNpc3RlZCA9IHRydWU7XG4gICAgICAgIH07XG4gICAgICAgIGlmIChzZXJ2ZXJDb252ZXJzYXRpb25UcmFja2VyICYmIGlzUmVzdW1lZFN0YXRlKSB7XG4gICAgICAgICAgICBzZXJ2ZXJDb252ZXJzYXRpb25UcmFja2VyLnByaW1lRnJvbVN0YXRlKHtcbiAgICAgICAgICAgICAgICBvcmlnaW5hbElucHV0OiByZXN1bHQuc3RhdGUuX29yaWdpbmFsSW5wdXQsXG4gICAgICAgICAgICAgICAgZ2VuZXJhdGVkSXRlbXM6IHJlc3VsdC5zdGF0ZS5fZ2VuZXJhdGVkSXRlbXMsXG4gICAgICAgICAgICAgICAgbW9kZWxSZXNwb25zZXM6IHJlc3VsdC5zdGF0ZS5fbW9kZWxSZXNwb25zZXMsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgY29udGludWluZ0ludGVycnVwdGVkVHVybiA9IGZhbHNlO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgd2hpbGUgKHRydWUpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBjdXJyZW50QWdlbnQgPSByZXN1bHQuc3RhdGUuX2N1cnJlbnRBZ2VudDtcbiAgICAgICAgICAgICAgICByZXN1bHQuc3RhdGUuX2N1cnJlbnRTdGVwID0gcmVzdWx0LnN0YXRlLl9jdXJyZW50U3RlcCA/PyB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICduZXh0X3N0ZXBfcnVuX2FnYWluJyxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGlmIChyZXN1bHQuc3RhdGUuX2N1cnJlbnRTdGVwLnR5cGUgPT09ICduZXh0X3N0ZXBfaW50ZXJydXB0aW9uJykge1xuICAgICAgICAgICAgICAgICAgICBsb2dnZXIuZGVidWcoJ0NvbnRpbnVpbmcgZnJvbSBpbnRlcnJ1cHRpb24nKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFyZXN1bHQuc3RhdGUuX2xhc3RUdXJuUmVzcG9uc2UgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICFyZXN1bHQuc3RhdGUuX2xhc3RQcm9jZXNzZWRSZXNwb25zZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IFVzZXJFcnJvcignTm8gbW9kZWwgcmVzcG9uc2UgZm91bmQgaW4gcHJldmlvdXMgc3RhdGUnLCByZXN1bHQuc3RhdGUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHR1cm5SZXN1bHQgPSBhd2FpdCByZXNvbHZlSW50ZXJydXB0ZWRUdXJuKHJlc3VsdC5zdGF0ZS5fY3VycmVudEFnZW50LCByZXN1bHQuc3RhdGUuX29yaWdpbmFsSW5wdXQsIHJlc3VsdC5zdGF0ZS5fZ2VuZXJhdGVkSXRlbXMsIHJlc3VsdC5zdGF0ZS5fbGFzdFR1cm5SZXNwb25zZSwgcmVzdWx0LnN0YXRlLl9sYXN0UHJvY2Vzc2VkUmVzcG9uc2UsIHRoaXMsIHJlc3VsdC5zdGF0ZSk7XG4gICAgICAgICAgICAgICAgICAgIGFkZFN0ZXBUb1J1blJlc3VsdChyZXN1bHQsIHR1cm5SZXN1bHQpO1xuICAgICAgICAgICAgICAgICAgICByZXN1bHQuc3RhdGUuX3Rvb2xVc2VUcmFja2VyLmFkZFRvb2xVc2UocmVzdWx0LnN0YXRlLl9jdXJyZW50QWdlbnQsIHJlc3VsdC5zdGF0ZS5fbGFzdFByb2Nlc3NlZFJlc3BvbnNlLnRvb2xzVXNlZCk7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdC5zdGF0ZS5fb3JpZ2luYWxJbnB1dCA9IHR1cm5SZXN1bHQub3JpZ2luYWxJbnB1dDtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnN0YXRlLl9nZW5lcmF0ZWRJdGVtcyA9IHR1cm5SZXN1bHQuZ2VuZXJhdGVkSXRlbXM7XG4gICAgICAgICAgICAgICAgICAgIC8vIERvbid0IHJlc2V0IGNvdW50ZXIgaGVyZSAtIHJlc29sdmVJbnRlcnJ1cHRlZFR1cm4gYWxyZWFkeSBhZGp1c3RlZCBpdCB2aWEgcmV3aW5kIGxvZ2ljXG4gICAgICAgICAgICAgICAgICAgIC8vIFRoZSBjb3VudGVyIHdpbGwgYmUgcmVzZXQgd2hlbiBfY3VycmVudFR1cm4gaXMgaW5jcmVtZW50ZWQgKHN0YXJ0aW5nIGEgbmV3IHR1cm4pXG4gICAgICAgICAgICAgICAgICAgIGlmICh0dXJuUmVzdWx0Lm5leHRTdGVwLnR5cGUgPT09ICduZXh0X3N0ZXBfaW50ZXJydXB0aW9uJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gd2UgYXJlIHN0aWxsIGluIGFuIGludGVycnVwdGlvbiwgc28gd2UgbmVlZCB0byBhdm9pZCBhbiBpbmZpbml0ZSBsb29wXG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQuc3RhdGUuX2N1cnJlbnRTdGVwID0gdHVyblJlc3VsdC5uZXh0U3RlcDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAvLyBJZiBjb250aW51aW5nIGZyb20gaW50ZXJydXB0aW9uIHdpdGggbmV4dF9zdGVwX3J1bl9hZ2Fpbiwgc2V0IHN0ZXAgdG8gdW5kZWZpbmVkXG4gICAgICAgICAgICAgICAgICAgIC8vIHNvIHRoZSBsb29wIHRyZWF0cyBpdCBhcyBhIG5ldyBzdGVwIHdpdGhvdXQgaW5jcmVtZW50aW5nIHRoZSB0dXJuLlxuICAgICAgICAgICAgICAgICAgICAvLyBUaGUgY291bnRlciBoYXMgYWxyZWFkeSBiZWVuIGFkanVzdGVkIGJ5IHJlc29sdmVJbnRlcnJ1cHRlZFR1cm4ncyByZXdpbmQgbG9naWMuXG4gICAgICAgICAgICAgICAgICAgIGlmICh0dXJuUmVzdWx0Lm5leHRTdGVwLnR5cGUgPT09ICduZXh0X3N0ZXBfcnVuX2FnYWluJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWluZ0ludGVycnVwdGVkVHVybiA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQuc3RhdGUuX2N1cnJlbnRTdGVwID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY29udGludWluZ0ludGVycnVwdGVkVHVybiA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICByZXN1bHQuc3RhdGUuX2N1cnJlbnRTdGVwID0gdHVyblJlc3VsdC5uZXh0U3RlcDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5zdGF0ZS5fY3VycmVudFN0ZXAudHlwZSA9PT0gJ25leHRfc3RlcF9ydW5fYWdhaW4nKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGFydGlmYWN0cyA9IGF3YWl0IHByZXBhcmVBZ2VudEFydGlmYWN0cyhyZXN1bHQuc3RhdGUpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBpc1Jlc3VtaW5nRnJvbUludGVycnVwdGlvbiA9IGlzUmVzdW1lZFN0YXRlICYmIGNvbnRpbnVpbmdJbnRlcnJ1cHRlZFR1cm47XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVpbmdJbnRlcnJ1cHRlZFR1cm4gPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgLy8gRG8gbm90IGFkdmFuY2UgdGhlIHR1cm4gd2hlbiByZXN1bWluZyBmcm9tIGFuIGludGVycnVwdGlvbjsgdGhlIG5leHQgbW9kZWwgY2FsbCBpc1xuICAgICAgICAgICAgICAgICAgICAvLyBzdGlsbCBwYXJ0IG9mIHRoZSBzYW1lIGxvZ2ljYWwgdHVybi5cbiAgICAgICAgICAgICAgICAgICAgaWYgKCFpc1Jlc3VtaW5nRnJvbUludGVycnVwdGlvbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnN0YXRlLl9jdXJyZW50VHVybisrO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnN0YXRlLl9jdXJyZW50VHVyblBlcnNpc3RlZEl0ZW1Db3VudCA9IDA7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5zdGF0ZS5fY3VycmVudFR1cm4gPiByZXN1bHQuc3RhdGUuX21heFR1cm5zKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQuc3RhdGUuX2N1cnJlbnRBZ2VudFNwYW4/LnNldEVycm9yKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnTWF4IHR1cm5zIGV4Y2VlZGVkJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiB7IG1heF90dXJuczogcmVzdWx0LnN0YXRlLl9tYXhUdXJucyB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTWF4VHVybnNFeGNlZWRlZEVycm9yKGBNYXggdHVybnMgKCR7cmVzdWx0LnN0YXRlLl9tYXhUdXJuc30pIGV4Y2VlZGVkYCwgcmVzdWx0LnN0YXRlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBsb2dnZXIuZGVidWcoYFJ1bm5pbmcgYWdlbnQgJHtjdXJyZW50QWdlbnQubmFtZX0gKHR1cm4gJHtyZXN1bHQuc3RhdGUuX2N1cnJlbnRUdXJufSlgKTtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGd1YXJkcmFpbEVycm9yO1xuICAgICAgICAgICAgICAgICAgICBsZXQgcGFyYWxsZWxHdWFyZHJhaWxQcm9taXNlO1xuICAgICAgICAgICAgICAgICAgICAvLyBPbmx5IHJ1biBpbnB1dCBndWFyZHJhaWxzIG9uIHRoZSBmaXJzdCB0dXJuIG9mIGEgbmV3IHJ1bi5cbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5zdGF0ZS5fY3VycmVudFR1cm4gPT09IDEgJiYgIWlzUmVzdW1pbmdGcm9tSW50ZXJydXB0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBndWFyZHJhaWxzID0gdGhpcy4jc3BsaXRJbnB1dEd1YXJkcmFpbHMocmVzdWx0LnN0YXRlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChndWFyZHJhaWxzLmJsb2NraW5nLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLiNydW5JbnB1dEd1YXJkcmFpbHMocmVzdWx0LnN0YXRlLCBndWFyZHJhaWxzLmJsb2NraW5nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChndWFyZHJhaWxzLnBhcmFsbGVsLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBwcm9taXNlID0gdGhpcy4jcnVuSW5wdXRHdWFyZHJhaWxzKHJlc3VsdC5zdGF0ZSwgZ3VhcmRyYWlscy5wYXJhbGxlbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyYWxsZWxHdWFyZHJhaWxQcm9taXNlID0gcHJvbWlzZS5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGd1YXJkcmFpbEVycm9yID0gZXJyO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gW107XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdHVybklucHV0ID0gc2VydmVyQ29udmVyc2F0aW9uVHJhY2tlclxuICAgICAgICAgICAgICAgICAgICAgICAgPyBzZXJ2ZXJDb252ZXJzYXRpb25UcmFja2VyLnByZXBhcmVJbnB1dChyZXN1bHQuaW5wdXQsIHJlc3VsdC5uZXdJdGVtcylcbiAgICAgICAgICAgICAgICAgICAgICAgIDogZ2V0VHVybklucHV0KHJlc3VsdC5pbnB1dCwgcmVzdWx0Lm5ld0l0ZW1zKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5zdGF0ZS5fbm9BY3RpdmVBZ2VudFJ1bikge1xuICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudEFnZW50LmVtaXQoJ2FnZW50X3N0YXJ0JywgcmVzdWx0LnN0YXRlLl9jb250ZXh0LCBjdXJyZW50QWdlbnQsIHR1cm5JbnB1dCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ2FnZW50X3N0YXJ0JywgcmVzdWx0LnN0YXRlLl9jb250ZXh0LCBjdXJyZW50QWdlbnQsIHR1cm5JbnB1dCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgbGV0IGZpbmFsUmVzcG9uc2UgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHByZXBhcmVkQ2FsbCA9IGF3YWl0IHRoaXMuI3ByZXBhcmVNb2RlbENhbGwocmVzdWx0LnN0YXRlLCBvcHRpb25zLCBhcnRpZmFjdHMsIHR1cm5JbnB1dCwgc2VydmVyQ29udmVyc2F0aW9uVHJhY2tlciwgc2Vzc2lvbklucHV0VXBkYXRlKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGd1YXJkcmFpbEVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBndWFyZHJhaWxFcnJvcjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBoYW5kZWRJbnB1dFRvTW9kZWwgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCBwZXJzaXN0U3RyZWFtSW5wdXRJZk5lZWRlZCgpO1xuICAgICAgICAgICAgICAgICAgICBmb3IgYXdhaXQgKGNvbnN0IGV2ZW50IG9mIHByZXBhcmVkQ2FsbC5tb2RlbC5nZXRTdHJlYW1lZFJlc3BvbnNlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN5c3RlbUluc3RydWN0aW9uczogcHJlcGFyZWRDYWxsLm1vZGVsSW5wdXQuaW5zdHJ1Y3Rpb25zLFxuICAgICAgICAgICAgICAgICAgICAgICAgcHJvbXB0OiBwcmVwYXJlZENhbGwucHJvbXB0LFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gU3RyZWFtaW5nIHJlcXVlc3RzIHNob3VsZCBhbHNvIGhvbm9yIGV4cGxpY2l0bHkgY2hvc2VuIG1vZGVscy5cbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLihwcmVwYXJlZENhbGwuZXhwbGljdGx5TW9kZWxTZXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IHsgb3ZlcnJpZGVQcm9tcHRNb2RlbDogdHJ1ZSB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgOiB7fSksXG4gICAgICAgICAgICAgICAgICAgICAgICBpbnB1dDogcHJlcGFyZWRDYWxsLm1vZGVsSW5wdXQuaW5wdXQsXG4gICAgICAgICAgICAgICAgICAgICAgICBwcmV2aW91c1Jlc3BvbnNlSWQ6IHByZXBhcmVkQ2FsbC5wcmV2aW91c1Jlc3BvbnNlSWQsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb252ZXJzYXRpb25JZDogcHJlcGFyZWRDYWxsLmNvbnZlcnNhdGlvbklkLFxuICAgICAgICAgICAgICAgICAgICAgICAgbW9kZWxTZXR0aW5nczogcHJlcGFyZWRDYWxsLm1vZGVsU2V0dGluZ3MsXG4gICAgICAgICAgICAgICAgICAgICAgICB0b29sczogcHJlcGFyZWRDYWxsLnNlcmlhbGl6ZWRUb29scyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvb2xzRXhwbGljaXRseVByb3ZpZGVkOiBwcmVwYXJlZENhbGwudG9vbHNFeHBsaWNpdGx5UHJvdmlkZWQsXG4gICAgICAgICAgICAgICAgICAgICAgICBoYW5kb2ZmczogcHJlcGFyZWRDYWxsLnNlcmlhbGl6ZWRIYW5kb2ZmcyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG91dHB1dFR5cGU6IGNvbnZlcnRBZ2VudE91dHB1dFR5cGVUb1NlcmlhbGl6YWJsZShjdXJyZW50QWdlbnQub3V0cHV0VHlwZSksXG4gICAgICAgICAgICAgICAgICAgICAgICB0cmFjaW5nOiBnZXRUcmFjaW5nKHRoaXMuY29uZmlnLnRyYWNpbmdEaXNhYmxlZCwgdGhpcy5jb25maWcudHJhY2VJbmNsdWRlU2Vuc2l0aXZlRGF0YSksXG4gICAgICAgICAgICAgICAgICAgICAgICBzaWduYWw6IG9wdGlvbnMuc2lnbmFsLFxuICAgICAgICAgICAgICAgICAgICB9KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGd1YXJkcmFpbEVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgZ3VhcmRyYWlsRXJyb3I7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXZlbnQudHlwZSA9PT0gJ3Jlc3BvbnNlX2RvbmUnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcGFyc2VkID0gU3RyZWFtRXZlbnRSZXNwb25zZUNvbXBsZXRlZC5wYXJzZShldmVudCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmluYWxSZXNwb25zZSA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNhZ2U6IG5ldyBVc2FnZShwYXJzZWQucmVzcG9uc2UudXNhZ2UpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvdXRwdXQ6IHBhcnNlZC5yZXNwb25zZS5vdXRwdXQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlSWQ6IHBhcnNlZC5yZXNwb25zZS5pZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC5zdGF0ZS5fY29udGV4dC51c2FnZS5hZGQoZmluYWxSZXNwb25zZS51c2FnZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0LmNhbmNlbGxlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFdoZW4gdGhlIHVzZXIncyBjb2RlIGV4aXRzIGEgbG9vcCB0byBjb25zdW1lIHRoZSBzdHJlYW0sIHdlIG5lZWQgdG8gYnJlYWtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB0aGlzIGxvb3AgdG8gcHJldmVudCBpbnRlcm5hbCBmYWxzZSBlcnJvcnMgYW5kIHVubmVjZXNzYXJ5IHByb2Nlc3NpbmdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQuX2FkZEl0ZW0obmV3IFJ1blJhd01vZGVsU3RyZWFtRXZlbnQoZXZlbnQpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAocGFyYWxsZWxHdWFyZHJhaWxQcm9taXNlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBwYXJhbGxlbEd1YXJkcmFpbFByb21pc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZ3VhcmRyYWlsRXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBndWFyZHJhaWxFcnJvcjtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXN1bHQuc3RhdGUuX25vQWN0aXZlQWdlbnRSdW4gPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFmaW5hbFJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTW9kZWxCZWhhdmlvckVycm9yKCdNb2RlbCBkaWQgbm90IHByb2R1Y2UgYSBmaW5hbCByZXNwb25zZSEnLCByZXN1bHQuc3RhdGUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdC5zdGF0ZS5fbGFzdFR1cm5SZXNwb25zZSA9IGZpbmFsUmVzcG9uc2U7XG4gICAgICAgICAgICAgICAgICAgIC8vIEtlZXAgdGhlIHRyYWNrZXIgaW4gc3luYyB3aXRoIHRoZSBzdHJlYW1lZCByZXNwb25zZSBzbyByZWNvbm5lY3Rpb25zIHJlbWFpbiBhY2N1cmF0ZS5cbiAgICAgICAgICAgICAgICAgICAgc2VydmVyQ29udmVyc2F0aW9uVHJhY2tlcj8udHJhY2tTZXJ2ZXJJdGVtcyhmaW5hbFJlc3BvbnNlKTtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnN0YXRlLl9tb2RlbFJlc3BvbnNlcy5wdXNoKHJlc3VsdC5zdGF0ZS5fbGFzdFR1cm5SZXNwb25zZSk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHByb2Nlc3NlZFJlc3BvbnNlID0gcHJvY2Vzc01vZGVsUmVzcG9uc2UocmVzdWx0LnN0YXRlLl9sYXN0VHVyblJlc3BvbnNlLCBjdXJyZW50QWdlbnQsIHByZXBhcmVkQ2FsbC50b29scywgcHJlcGFyZWRDYWxsLmhhbmRvZmZzKTtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnN0YXRlLl9sYXN0UHJvY2Vzc2VkUmVzcG9uc2UgPSBwcm9jZXNzZWRSZXNwb25zZTtcbiAgICAgICAgICAgICAgICAgICAgLy8gUmVjb3JkIHRoZSBpdGVtcyBlbWl0dGVkIGRpcmVjdGx5IGZyb20gdGhlIG1vZGVsIHJlc3BvbnNlIHNvIHdlIGRvIG5vdFxuICAgICAgICAgICAgICAgICAgICAvLyBzdHJlYW0gdGhlbSBhZ2FpbiBhZnRlciB0b29scyBhbmQgb3RoZXIgc2lkZSBlZmZlY3RzIGZpbmlzaC5cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcHJlVG9vbEl0ZW1zID0gbmV3IFNldChwcm9jZXNzZWRSZXNwb25zZS5uZXdJdGVtcyk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChwcmVUb29sSXRlbXMuc2l6ZSA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0cmVhbVN0ZXBJdGVtc1RvUnVuUmVzdWx0KHJlc3VsdCwgcHJvY2Vzc2VkUmVzcG9uc2UubmV3SXRlbXMpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHR1cm5SZXN1bHQgPSBhd2FpdCByZXNvbHZlVHVybkFmdGVyTW9kZWxSZXNwb25zZShjdXJyZW50QWdlbnQsIHJlc3VsdC5zdGF0ZS5fb3JpZ2luYWxJbnB1dCwgcmVzdWx0LnN0YXRlLl9nZW5lcmF0ZWRJdGVtcywgcmVzdWx0LnN0YXRlLl9sYXN0VHVyblJlc3BvbnNlLCByZXN1bHQuc3RhdGUuX2xhc3RQcm9jZXNzZWRSZXNwb25zZSwgdGhpcywgcmVzdWx0LnN0YXRlKTtcbiAgICAgICAgICAgICAgICAgICAgYWRkU3RlcFRvUnVuUmVzdWx0KHJlc3VsdCwgdHVyblJlc3VsdCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2tpcEl0ZW1zOiBwcmVUb29sSXRlbXMsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICByZXN1bHQuc3RhdGUuX3Rvb2xVc2VUcmFja2VyLmFkZFRvb2xVc2UoY3VycmVudEFnZW50LCBwcm9jZXNzZWRSZXNwb25zZS50b29sc1VzZWQpO1xuICAgICAgICAgICAgICAgICAgICByZXN1bHQuc3RhdGUuX29yaWdpbmFsSW5wdXQgPSB0dXJuUmVzdWx0Lm9yaWdpbmFsSW5wdXQ7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdC5zdGF0ZS5fZ2VuZXJhdGVkSXRlbXMgPSB0dXJuUmVzdWx0LmdlbmVyYXRlZEl0ZW1zO1xuICAgICAgICAgICAgICAgICAgICBpZiAodHVyblJlc3VsdC5uZXh0U3RlcC50eXBlID09PSAnbmV4dF9zdGVwX3J1bl9hZ2FpbicpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC5zdGF0ZS5fY3VycmVudFR1cm5QZXJzaXN0ZWRJdGVtQ291bnQgPSAwO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdC5zdGF0ZS5fY3VycmVudFN0ZXAgPSB0dXJuUmVzdWx0Lm5leHRTdGVwO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0LnN0YXRlLl9jdXJyZW50U3RlcC50eXBlID09PSAnbmV4dF9zdGVwX2ZpbmFsX291dHB1dCcpIHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy4jcnVuT3V0cHV0R3VhcmRyYWlscyhyZXN1bHQuc3RhdGUsIHJlc3VsdC5zdGF0ZS5fY3VycmVudFN0ZXAub3V0cHV0KTtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgcGVyc2lzdFN0cmVhbUlucHV0SWZOZWVkZWQoKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gR3VhcmRyYWlscyBtdXN0IHN1Y2NlZWQgYmVmb3JlIHBlcnNpc3Rpbmcgc2Vzc2lvbiBtZW1vcnkgdG8gYXZvaWQgc3RvcmluZyBibG9ja2VkIG91dHB1dHMuXG4gICAgICAgICAgICAgICAgICAgIGlmICghc2VydmVyTWFuYWdlc0NvbnZlcnNhdGlvbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgc2F2ZVN0cmVhbVJlc3VsdFRvU2Vzc2lvbihvcHRpb25zLnNlc3Npb24sIHJlc3VsdCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5lbWl0KCdhZ2VudF9lbmQnLCByZXN1bHQuc3RhdGUuX2NvbnRleHQsIGN1cnJlbnRBZ2VudCwgcmVzdWx0LnN0YXRlLl9jdXJyZW50U3RlcC5vdXRwdXQpO1xuICAgICAgICAgICAgICAgICAgICBjdXJyZW50QWdlbnQuZW1pdCgnYWdlbnRfZW5kJywgcmVzdWx0LnN0YXRlLl9jb250ZXh0LCByZXN1bHQuc3RhdGUuX2N1cnJlbnRTdGVwLm91dHB1dCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAocmVzdWx0LnN0YXRlLl9jdXJyZW50U3RlcC50eXBlID09PSAnbmV4dF9zdGVwX2ludGVycnVwdGlvbicpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gd2UgYXJlIGRvbmUgZm9yIG5vdy4gRG9uJ3QgcnVuIGFueSBvdXRwdXQgZ3VhcmRyYWlsc1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCBwZXJzaXN0U3RyZWFtSW5wdXRJZk5lZWRlZCgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXNlcnZlck1hbmFnZXNDb252ZXJzYXRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHNhdmVTdHJlYW1SZXN1bHRUb1Nlc3Npb24ob3B0aW9ucy5zZXNzaW9uLCByZXN1bHQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAocmVzdWx0LnN0YXRlLl9jdXJyZW50U3RlcC50eXBlID09PSAnbmV4dF9zdGVwX2hhbmRvZmYnKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdC5zdGF0ZS5fY3VycmVudEFnZW50ID0gcmVzdWx0LnN0YXRlLl9jdXJyZW50U3RlcFxuICAgICAgICAgICAgICAgICAgICAgICAgPy5uZXdBZ2VudDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5zdGF0ZS5fY3VycmVudEFnZW50U3Bhbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnN0YXRlLl9jdXJyZW50QWdlbnRTcGFuLmVuZCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzZXRDdXJyZW50U3BhbigpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdC5zdGF0ZS5fY3VycmVudEFnZW50U3BhbiA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0Ll9hZGRJdGVtKG5ldyBSdW5BZ2VudFVwZGF0ZWRTdHJlYW1FdmVudChyZXN1bHQuc3RhdGUuX2N1cnJlbnRBZ2VudCkpO1xuICAgICAgICAgICAgICAgICAgICByZXN1bHQuc3RhdGUuX25vQWN0aXZlQWdlbnRSdW4gPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAvLyB3ZSd2ZSBwcm9jZXNzZWQgdGhlIGhhbmRvZmYsIHNvIHdlIG5lZWQgdG8gcnVuIHRoZSBsb29wIGFnYWluXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdC5zdGF0ZS5fY3VycmVudFN0ZXAgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnbmV4dF9zdGVwX3J1bl9hZ2FpbicsXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBsb2dnZXIuZGVidWcoJ1J1bm5pbmcgbmV4dCBsb29wJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgaWYgKGhhbmRlZElucHV0VG9Nb2RlbCAmJiAhc3RyZWFtSW5wdXRQZXJzaXN0ZWQpIHtcbiAgICAgICAgICAgICAgICBhd2FpdCBwZXJzaXN0U3RyZWFtSW5wdXRJZk5lZWRlZCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHJlc3VsdC5zdGF0ZS5fY3VycmVudEFnZW50U3Bhbikge1xuICAgICAgICAgICAgICAgIHJlc3VsdC5zdGF0ZS5fY3VycmVudEFnZW50U3Bhbi5zZXRFcnJvcih7XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdFcnJvciBpbiBhZ2VudCBydW4nLFxuICAgICAgICAgICAgICAgICAgICBkYXRhOiB7IGVycm9yOiBTdHJpbmcoZXJyb3IpIH0sXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgfVxuICAgICAgICBmaW5hbGx5IHtcbiAgICAgICAgICAgIGlmIChyZXN1bHQuc3RhdGUuX2N1cnJlbnRTdGVwPy50eXBlICE9PSAnbmV4dF9zdGVwX2ludGVycnVwdGlvbicpIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCBkaXNwb3NlUmVzb2x2ZWRDb21wdXRlcnMoeyBydW5Db250ZXh0OiByZXN1bHQuc3RhdGUuX2NvbnRleHQgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICBsb2dnZXIud2FybihgRmFpbGVkIHRvIGRpc3Bvc2UgY29tcHV0ZXJzIGFmdGVyIHJ1bjogJHtlcnJvcn1gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocmVzdWx0LnN0YXRlLl9jdXJyZW50QWdlbnRTcGFuKSB7XG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5zdGF0ZS5fY3VycmVudFN0ZXA/LnR5cGUgIT09ICduZXh0X3N0ZXBfaW50ZXJydXB0aW9uJykge1xuICAgICAgICAgICAgICAgICAgICByZXN1bHQuc3RhdGUuX2N1cnJlbnRBZ2VudFNwYW4uZW5kKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJlc2V0Q3VycmVudFNwYW4oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBhc3luYyAjcnVuSW5kaXZpZHVhbFN0cmVhbShhZ2VudCwgaW5wdXQsIG9wdGlvbnMsIGVuc3VyZVN0cmVhbUlucHV0UGVyc2lzdGVkLCBzZXNzaW9uSW5wdXRVcGRhdGUpIHtcbiAgICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgPz8ge307XG4gICAgICAgIHJldHVybiB3aXRoTmV3U3BhbkNvbnRleHQoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgLy8gSW5pdGlhbGl6ZSBvciByZXVzZSBleGlzdGluZyBzdGF0ZVxuICAgICAgICAgICAgY29uc3QgaXNSZXN1bWVkU3RhdGUgPSBpbnB1dCBpbnN0YW5jZW9mIFJ1blN0YXRlO1xuICAgICAgICAgICAgY29uc3Qgc3RhdGUgPSBpc1Jlc3VtZWRTdGF0ZVxuICAgICAgICAgICAgICAgID8gaW5wdXRcbiAgICAgICAgICAgICAgICA6IG5ldyBSdW5TdGF0ZShvcHRpb25zLmNvbnRleHQgaW5zdGFuY2VvZiBSdW5Db250ZXh0XG4gICAgICAgICAgICAgICAgICAgID8gb3B0aW9ucy5jb250ZXh0XG4gICAgICAgICAgICAgICAgICAgIDogbmV3IFJ1bkNvbnRleHQob3B0aW9ucy5jb250ZXh0KSwgaW5wdXQsIGFnZW50LCBvcHRpb25zLm1heFR1cm5zID8/IERFRkFVTFRfTUFYX1RVUk5TKTtcbiAgICAgICAgICAgIC8vIEluaXRpYWxpemUgdGhlIHN0cmVhbWVkIHJlc3VsdCB3aXRoIGV4aXN0aW5nIHN0YXRlXG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBuZXcgU3RyZWFtZWRSdW5SZXN1bHQoe1xuICAgICAgICAgICAgICAgIHNpZ25hbDogb3B0aW9ucy5zaWduYWwsXG4gICAgICAgICAgICAgICAgc3RhdGUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIC8vIFNldHVwIGRlZmF1bHRzXG4gICAgICAgICAgICByZXN1bHQubWF4VHVybnMgPSBvcHRpb25zLm1heFR1cm5zID8/IHN0YXRlLl9tYXhUdXJucztcbiAgICAgICAgICAgIC8vIENvbnRpbnVlIHRoZSBzdHJlYW0gbG9vcCB3aXRob3V0IGJsb2NraW5nXG4gICAgICAgICAgICBjb25zdCBzdHJlYW1Mb29wUHJvbWlzZSA9IHRoaXMuI3J1blN0cmVhbUxvb3AocmVzdWx0LCBvcHRpb25zLCBpc1Jlc3VtZWRTdGF0ZSwgZW5zdXJlU3RyZWFtSW5wdXRQZXJzaXN0ZWQsIHNlc3Npb25JbnB1dFVwZGF0ZSkudGhlbigoKSA9PiB7XG4gICAgICAgICAgICAgICAgcmVzdWx0Ll9kb25lKCk7XG4gICAgICAgICAgICB9LCAoZXJyKSA9PiB7XG4gICAgICAgICAgICAgICAgcmVzdWx0Ll9yYWlzZUVycm9yKGVycik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIC8vIEF0dGFjaCB0aGUgc3RyZWFtIGxvb3AgcHJvbWlzZSBzbyB0cmFjZSBlbmQgd2FpdHMgZm9yIHRoZSBsb29wIHRvIGNvbXBsZXRlXG4gICAgICAgICAgICByZXN1bHQuX3NldFN0cmVhbUxvb3BQcm9taXNlKHN0cmVhbUxvb3BQcm9taXNlKTtcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBhc3luYyAjcnVuSW5wdXRHdWFyZHJhaWxzKHN0YXRlLCBndWFyZHJhaWxzT3ZlcnJpZGUpIHtcbiAgICAgICAgY29uc3QgZ3VhcmRyYWlscyA9IGd1YXJkcmFpbHNPdmVycmlkZSA/PyB0aGlzLiNnZXRJbnB1dEd1YXJkcmFpbERlZmluaXRpb25zKHN0YXRlKTtcbiAgICAgICAgaWYgKGd1YXJkcmFpbHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgY29uc3QgZ3VhcmRyYWlsQXJncyA9IHtcbiAgICAgICAgICAgICAgICBhZ2VudDogc3RhdGUuX2N1cnJlbnRBZ2VudCxcbiAgICAgICAgICAgICAgICBpbnB1dDogc3RhdGUuX29yaWdpbmFsSW5wdXQsXG4gICAgICAgICAgICAgICAgY29udGV4dDogc3RhdGUuX2NvbnRleHQsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHRzID0gYXdhaXQgUHJvbWlzZS5hbGwoZ3VhcmRyYWlscy5tYXAoYXN5bmMgKGd1YXJkcmFpbCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gd2l0aEd1YXJkcmFpbFNwYW4oYXN5bmMgKHNwYW4pID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGd1YXJkcmFpbC5ydW4oZ3VhcmRyYWlsQXJncyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzcGFuLnNwYW5EYXRhLnRyaWdnZXJlZCA9IHJlc3VsdC5vdXRwdXQudHJpcHdpcmVUcmlnZ2VyZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICAgICAgICAgICAgICB9LCB7IGRhdGE6IHsgbmFtZTogZ3VhcmRyYWlsLm5hbWUgfSB9LCBzdGF0ZS5fY3VycmVudEFnZW50U3Bhbik7XG4gICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgICAgIHN0YXRlLl9pbnB1dEd1YXJkcmFpbFJlc3VsdHMucHVzaCguLi5yZXN1bHRzKTtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHJlc3VsdCBvZiByZXN1bHRzKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQub3V0cHV0LnRyaXB3aXJlVHJpZ2dlcmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3RhdGUuX2N1cnJlbnRBZ2VudFNwYW4pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZS5fY3VycmVudEFnZW50U3Bhbi5zZXRFcnJvcih7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdHdWFyZHJhaWwgdHJpcHdpcmUgdHJpZ2dlcmVkJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogeyBndWFyZHJhaWw6IHJlc3VsdC5ndWFyZHJhaWwubmFtZSB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IElucHV0R3VhcmRyYWlsVHJpcHdpcmVUcmlnZ2VyZWQoYElucHV0IGd1YXJkcmFpbCB0cmlnZ2VyZWQ6ICR7SlNPTi5zdHJpbmdpZnkocmVzdWx0Lm91dHB1dC5vdXRwdXRJbmZvKX1gLCByZXN1bHQsIHN0YXRlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0cztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgaWYgKGUgaW5zdGFuY2VvZiBJbnB1dEd1YXJkcmFpbFRyaXB3aXJlVHJpZ2dlcmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IGU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIHJvbGwgYmFjayB0aGUgY3VycmVudCB0dXJuIHRvIGVuYWJsZSByZXJ1bnNcbiAgICAgICAgICAgICAgICBzdGF0ZS5fY3VycmVudFR1cm4tLTtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgR3VhcmRyYWlsRXhlY3V0aW9uRXJyb3IoYElucHV0IGd1YXJkcmFpbCBmYWlsZWQgdG8gY29tcGxldGU6ICR7ZX1gLCBlLCBzdGF0ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFtdO1xuICAgIH1cbiAgICBhc3luYyAjcnVuT3V0cHV0R3VhcmRyYWlscyhzdGF0ZSwgb3V0cHV0KSB7XG4gICAgICAgIGNvbnN0IGd1YXJkcmFpbHMgPSB0aGlzLm91dHB1dEd1YXJkcmFpbERlZnMuY29uY2F0KHN0YXRlLl9jdXJyZW50QWdlbnQub3V0cHV0R3VhcmRyYWlscy5tYXAoZGVmaW5lT3V0cHV0R3VhcmRyYWlsKSk7XG4gICAgICAgIGlmIChndWFyZHJhaWxzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGNvbnN0IGFnZW50T3V0cHV0ID0gc3RhdGUuX2N1cnJlbnRBZ2VudC5wcm9jZXNzRmluYWxPdXRwdXQob3V0cHV0KTtcbiAgICAgICAgICAgIGNvbnN0IHJ1bk91dHB1dCA9IGdldFR1cm5JbnB1dChbXSwgc3RhdGUuX2dlbmVyYXRlZEl0ZW1zKTtcbiAgICAgICAgICAgIGNvbnN0IGd1YXJkcmFpbEFyZ3MgPSB7XG4gICAgICAgICAgICAgICAgYWdlbnQ6IHN0YXRlLl9jdXJyZW50QWdlbnQsXG4gICAgICAgICAgICAgICAgYWdlbnRPdXRwdXQsXG4gICAgICAgICAgICAgICAgY29udGV4dDogc3RhdGUuX2NvbnRleHQsXG4gICAgICAgICAgICAgICAgZGV0YWlsczoge1xuICAgICAgICAgICAgICAgICAgICBtb2RlbFJlc3BvbnNlOiBzdGF0ZS5fbGFzdFR1cm5SZXNwb25zZSxcbiAgICAgICAgICAgICAgICAgICAgb3V0cHV0OiBydW5PdXRwdXQsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdHMgPSBhd2FpdCBQcm9taXNlLmFsbChndWFyZHJhaWxzLm1hcChhc3luYyAoZ3VhcmRyYWlsKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB3aXRoR3VhcmRyYWlsU3Bhbihhc3luYyAoc3BhbikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZ3VhcmRyYWlsLnJ1bihndWFyZHJhaWxBcmdzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNwYW4uc3BhbkRhdGEudHJpZ2dlcmVkID0gcmVzdWx0Lm91dHB1dC50cmlwd2lyZVRyaWdnZXJlZDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgICAgICAgICAgICAgIH0sIHsgZGF0YTogeyBuYW1lOiBndWFyZHJhaWwubmFtZSB9IH0sIHN0YXRlLl9jdXJyZW50QWdlbnRTcGFuKTtcbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCByZXN1bHQgb2YgcmVzdWx0cykge1xuICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0Lm91dHB1dC50cmlwd2lyZVRyaWdnZXJlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHN0YXRlLl9jdXJyZW50QWdlbnRTcGFuKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUuX2N1cnJlbnRBZ2VudFNwYW4uc2V0RXJyb3Ioe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnR3VhcmRyYWlsIHRyaXB3aXJlIHRyaWdnZXJlZCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IHsgZ3VhcmRyYWlsOiByZXN1bHQuZ3VhcmRyYWlsLm5hbWUgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBPdXRwdXRHdWFyZHJhaWxUcmlwd2lyZVRyaWdnZXJlZChgT3V0cHV0IGd1YXJkcmFpbCB0cmlnZ2VyZWQ6ICR7SlNPTi5zdHJpbmdpZnkocmVzdWx0Lm91dHB1dC5vdXRwdXRJbmZvKX1gLCByZXN1bHQsIHN0YXRlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgaWYgKGUgaW5zdGFuY2VvZiBPdXRwdXRHdWFyZHJhaWxUcmlwd2lyZVRyaWdnZXJlZCkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgR3VhcmRyYWlsRXhlY3V0aW9uRXJyb3IoYE91dHB1dCBndWFyZHJhaWwgZmFpbGVkIHRvIGNvbXBsZXRlOiAke2V9YCwgZSwgc3RhdGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqIEFwcGxpZXMgY2FsbC1sZXZlbCBmaWx0ZXJzIGFuZCBtZXJnZXMgc2Vzc2lvbiB1cGRhdGVzIHNvIHRoZSBtb2RlbCByZXF1ZXN0IG1pcnJvcnMgZXhhY3RseVxuICAgICAqIHdoYXQgd2UgcGVyc2lzdGVkIGZvciBoaXN0b3J5LlxuICAgICAqL1xuICAgIGFzeW5jICNwcmVwYXJlTW9kZWxDYWxsKHN0YXRlLCBvcHRpb25zLCBhcnRpZmFjdHMsIHR1cm5JbnB1dCwgc2VydmVyQ29udmVyc2F0aW9uVHJhY2tlciwgc2Vzc2lvbklucHV0VXBkYXRlKSB7XG4gICAgICAgIGNvbnN0IHsgbW9kZWwsIGV4cGxpY3RseU1vZGVsU2V0IH0gPSBhd2FpdCB0aGlzLiNyZXNvbHZlTW9kZWxGb3JBZ2VudChzdGF0ZS5fY3VycmVudEFnZW50KTtcbiAgICAgICAgbGV0IG1vZGVsU2V0dGluZ3MgPSB7XG4gICAgICAgICAgICAuLi50aGlzLmNvbmZpZy5tb2RlbFNldHRpbmdzLFxuICAgICAgICAgICAgLi4uc3RhdGUuX2N1cnJlbnRBZ2VudC5tb2RlbFNldHRpbmdzLFxuICAgICAgICB9O1xuICAgICAgICBtb2RlbFNldHRpbmdzID0gYWRqdXN0TW9kZWxTZXR0aW5nc0Zvck5vbkdQVDVSdW5uZXJNb2RlbChleHBsaWN0bHlNb2RlbFNldCwgc3RhdGUuX2N1cnJlbnRBZ2VudC5tb2RlbFNldHRpbmdzLCBtb2RlbCwgbW9kZWxTZXR0aW5ncyk7XG4gICAgICAgIG1vZGVsU2V0dGluZ3MgPSBtYXliZVJlc2V0VG9vbENob2ljZShzdGF0ZS5fY3VycmVudEFnZW50LCBzdGF0ZS5fdG9vbFVzZVRyYWNrZXIsIG1vZGVsU2V0dGluZ3MpO1xuICAgICAgICBjb25zdCBzeXN0ZW1JbnN0cnVjdGlvbnMgPSBhd2FpdCBzdGF0ZS5fY3VycmVudEFnZW50LmdldFN5c3RlbVByb21wdChzdGF0ZS5fY29udGV4dCk7XG4gICAgICAgIGNvbnN0IHByb21wdCA9IGF3YWl0IHN0YXRlLl9jdXJyZW50QWdlbnQuZ2V0UHJvbXB0KHN0YXRlLl9jb250ZXh0KTtcbiAgICAgICAgY29uc3QgeyBtb2RlbElucHV0LCBzb3VyY2VJdGVtcywgcGVyc2lzdGVkSXRlbXMsIGZpbHRlckFwcGxpZWQgfSA9IGF3YWl0IGFwcGx5Q2FsbE1vZGVsSW5wdXRGaWx0ZXIoc3RhdGUuX2N1cnJlbnRBZ2VudCwgb3B0aW9ucy5jYWxsTW9kZWxJbnB1dEZpbHRlciwgc3RhdGUuX2NvbnRleHQsIHR1cm5JbnB1dCwgc3lzdGVtSW5zdHJ1Y3Rpb25zKTtcbiAgICAgICAgLy8gSW5mb3JtIHRoZSB0cmFja2VyIHdoaWNoIGV4YWN0IG9yaWdpbmFsIG9iamVjdHMgbWFkZSBpdCB0byB0aGUgcHJvdmlkZXIgc28gZnV0dXJlIHR1cm5zXG4gICAgICAgIC8vIG9ubHkgc2VuZCB0aGUgZGVsdGEgdGhhdCBoYXMgbm90IHlldCBiZWVuIGFja25vd2xlZGdlZCBieSB0aGUgc2VydmVyLlxuICAgICAgICBzZXJ2ZXJDb252ZXJzYXRpb25UcmFja2VyPy5tYXJrSW5wdXRBc1NlbnQoc291cmNlSXRlbXMpO1xuICAgICAgICAvLyBQcm92aWRlIGZpbHRlcmVkIGNsb25lcyB3aGVuZXZlciBmaWx0ZXJzIHJ1biBzbyBzZXNzaW9uIGhpc3RvcnkgbWlycm9ycyB0aGUgbW9kZWwgcGF5bG9hZC5cbiAgICAgICAgLy8gUmV0dXJuaW5nIGFuIGVtcHR5IGFycmF5IGlzIGludGVudGlvbmFsOiBpdCB0ZWxscyB0aGUgc2Vzc2lvbiBsYXllciB0byBwZXJzaXN0IFwibm90aGluZ1wiXG4gICAgICAgIC8vIGluc3RlYWQgb2YgZmFsbGluZyBiYWNrIHRvIHRoZSB1bmZpbHRlcmVkIG9yaWdpbmFscyB3aGVuIHRoZSBmaWx0ZXIgcmVkYWN0cyBldmVyeXRoaW5nLlxuICAgICAgICBzZXNzaW9uSW5wdXRVcGRhdGU/Lihzb3VyY2VJdGVtcywgZmlsdGVyQXBwbGllZCA/IHBlcnNpc3RlZEl0ZW1zIDogdW5kZWZpbmVkKTtcbiAgICAgICAgY29uc3QgcHJldmlvdXNSZXNwb25zZUlkID0gc2VydmVyQ29udmVyc2F0aW9uVHJhY2tlcj8ucHJldmlvdXNSZXNwb25zZUlkID8/XG4gICAgICAgICAgICBvcHRpb25zLnByZXZpb3VzUmVzcG9uc2VJZDtcbiAgICAgICAgY29uc3QgY29udmVyc2F0aW9uSWQgPSBzZXJ2ZXJDb252ZXJzYXRpb25UcmFja2VyPy5jb252ZXJzYXRpb25JZCA/PyBvcHRpb25zLmNvbnZlcnNhdGlvbklkO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgLi4uYXJ0aWZhY3RzLFxuICAgICAgICAgICAgbW9kZWwsXG4gICAgICAgICAgICBleHBsaWN0bHlNb2RlbFNldCxcbiAgICAgICAgICAgIG1vZGVsU2V0dGluZ3MsXG4gICAgICAgICAgICBtb2RlbElucHV0LFxuICAgICAgICAgICAgcHJvbXB0LFxuICAgICAgICAgICAgcHJldmlvdXNSZXNwb25zZUlkLFxuICAgICAgICAgICAgY29udmVyc2F0aW9uSWQsXG4gICAgICAgIH07XG4gICAgfVxufVxuLyoqXG4gKiBDb25zdHJ1Y3RzIHRoZSBtb2RlbCBpbnB1dCBhcnJheSBmb3IgdGhlIGN1cnJlbnQgdHVybiBieSBjb21iaW5pbmcgdGhlIG9yaWdpbmFsIHR1cm4gaW5wdXQgd2l0aFxuICogYW55IG5ldyBydW4gaXRlbXMgKGV4Y2x1ZGluZyB0b29sIGFwcHJvdmFsIHBsYWNlaG9sZGVycykuIFRoaXMgaGVscHMgZW5zdXJlIHRoYXQgcmVwZWF0ZWQgY2FsbHNcbiAqIHRvIHRoZSBSZXNwb25zZXMgQVBJIG9ubHkgc2VuZCBuZXdseSBnZW5lcmF0ZWQgY29udGVudC5cbiAqXG4gKiBTZWU6IGh0dHBzOi8vcGxhdGZvcm0ub3BlbmFpLmNvbS9kb2NzL2d1aWRlcy9jb252ZXJzYXRpb24tc3RhdGU/YXBpLW1vZGU9cmVzcG9uc2VzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0VHVybklucHV0KG9yaWdpbmFsSW5wdXQsIGdlbmVyYXRlZEl0ZW1zKSB7XG4gICAgY29uc3QgcmF3SXRlbXMgPSBnZW5lcmF0ZWRJdGVtc1xuICAgICAgICAuZmlsdGVyKChpdGVtKSA9PiBpdGVtLnR5cGUgIT09ICd0b29sX2FwcHJvdmFsX2l0ZW0nKSAvLyBkb24ndCBpbmNsdWRlIGFwcHJvdmFsIGl0ZW1zIHRvIGF2b2lkIGRvdWJsZSBmdW5jdGlvbiBjYWxsc1xuICAgICAgICAubWFwKChpdGVtKSA9PiBpdGVtLnJhd0l0ZW0pO1xuICAgIHJldHVybiBbLi4udG9BZ2VudElucHV0TGlzdChvcmlnaW5hbElucHV0KSwgLi4ucmF3SXRlbXNdO1xufVxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vICBJbnRlcm5hbCBoZWxwZXJzXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuY29uc3QgREVGQVVMVF9NQVhfVFVSTlMgPSAxMDtcbmxldCBfZGVmYXVsdFJ1bm5lciA9IHVuZGVmaW5lZDtcbmZ1bmN0aW9uIGdldERlZmF1bHRSdW5uZXIoKSB7XG4gICAgaWYgKF9kZWZhdWx0UnVubmVyKSB7XG4gICAgICAgIHJldHVybiBfZGVmYXVsdFJ1bm5lcjtcbiAgICB9XG4gICAgX2RlZmF1bHRSdW5uZXIgPSBuZXcgUnVubmVyKCk7XG4gICAgcmV0dXJuIF9kZWZhdWx0UnVubmVyO1xufVxuLyoqXG4gKiBSZXNvbHZlcyB0aGUgZWZmZWN0aXZlIG1vZGVsIGZvciB0aGUgbmV4dCB0dXJuIGJ5IGdpdmluZyBwcmVjZWRlbmNlIHRvIHRoZSBhZ2VudC1zcGVjaWZpY1xuICogY29uZmlndXJhdGlvbiB3aGVuIHByZXNlbnQsIG90aGVyd2lzZSBmYWxsaW5nIGJhY2sgdG8gdGhlIHJ1bm5lci1sZXZlbCBkZWZhdWx0LlxuICovXG5leHBvcnQgZnVuY3Rpb24gc2VsZWN0TW9kZWwoYWdlbnRNb2RlbCwgcnVuQ29uZmlnTW9kZWwpIHtcbiAgICAvLyBXaGVuIGluaXRpYWxpemluZyBhbiBhZ2VudCB3aXRob3V0IG1vZGVsIG5hbWUsIHRoZSBtb2RlbCBwcm9wZXJ0eSBpcyBzZXQgdG8gYW4gZW1wdHkgc3RyaW5nLiBTbyxcbiAgICAvLyAqIGFnZW50TW9kZWwgPT09IEFnZW50LkRFRkFVTFRfTU9ERUxfUExBQ0VIT0xERVIgJiBydW5Db25maWdNb2RlbCBleGlzdHMsIHJ1bkNvbmZpZ01vZGVsIHdpbGwgYmUgdXNlZFxuICAgIC8vICogYWdlbnRNb2RlbCBpcyBzZXQsIHRoZSBhZ2VudE1vZGVsIHdpbGwgYmUgdXNlZCBvdmVyIHJ1bkNvbmZpZ01vZGVsXG4gICAgaWYgKCh0eXBlb2YgYWdlbnRNb2RlbCA9PT0gJ3N0cmluZycgJiZcbiAgICAgICAgYWdlbnRNb2RlbCAhPT0gQWdlbnQuREVGQVVMVF9NT0RFTF9QTEFDRUhPTERFUikgfHxcbiAgICAgICAgYWdlbnRNb2RlbCAvLyBhbnkgdHJ1dGh5IHZhbHVlXG4gICAgKSB7XG4gICAgICAgIHJldHVybiBhZ2VudE1vZGVsO1xuICAgIH1cbiAgICByZXR1cm4gcnVuQ29uZmlnTW9kZWwgPz8gYWdlbnRNb2RlbCA/PyBBZ2VudC5ERUZBVUxUX01PREVMX1BMQUNFSE9MREVSO1xufVxuLyoqXG4gKiBOb3JtYWxpemVzIHRyYWNpbmcgY29uZmlndXJhdGlvbiBpbnRvIHRoZSBmb3JtYXQgZXhwZWN0ZWQgYnkgbW9kZWwgcHJvdmlkZXJzLlxuICogUmV0dXJucyBgZmFsc2VgIHRvIGRpc2FibGUgdHJhY2luZywgYHRydWVgIHRvIGluY2x1ZGUgZnVsbCBwYXlsb2FkIGRhdGEsIG9yXG4gKiBgJ2VuYWJsZWRfd2l0aG91dF9kYXRhJ2AgdG8gb21pdCBzZW5zaXRpdmUgY29udGVudCB3aGlsZSBzdGlsbCBlbWl0dGluZyBzcGFucy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFRyYWNpbmcodHJhY2luZ0Rpc2FibGVkLCB0cmFjZUluY2x1ZGVTZW5zaXRpdmVEYXRhKSB7XG4gICAgaWYgKHRyYWNpbmdEaXNhYmxlZCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGlmICh0cmFjZUluY2x1ZGVTZW5zaXRpdmVEYXRhKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gJ2VuYWJsZWRfd2l0aG91dF9kYXRhJztcbn1cbi8qKlxuICogQGludGVybmFsXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIGFwcGx5Q2FsbE1vZGVsSW5wdXRGaWx0ZXIoYWdlbnQsIGNhbGxNb2RlbElucHV0RmlsdGVyLCBjb250ZXh0LCBpbnB1dEl0ZW1zLCBzeXN0ZW1JbnN0cnVjdGlvbnMpIHtcbiAgICBjb25zdCBjbG9uZUlucHV0SXRlbXMgPSAoaXRlbXMsIG1hcCkgPT4gaXRlbXMubWFwKChpdGVtKSA9PiB7XG4gICAgICAgIGNvbnN0IGNsb25lZCA9IHN0cnVjdHVyZWRDbG9uZShpdGVtKTtcbiAgICAgICAgaWYgKG1hcCAmJiBjbG9uZWQgJiYgdHlwZW9mIGNsb25lZCA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgIG1hcC5zZXQoY2xvbmVkLCBpdGVtKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY2xvbmVkO1xuICAgIH0pO1xuICAgIC8vIFJlY29yZCB0aGUgcmVsYXRpb25zaGlwIGJldHdlZW4gdGhlIGNsb25lZCBhcnJheSBwYXNzZWQgdG8gZmlsdGVycyBhbmQgdGhlIG9yaWdpbmFsIGlucHV0cy5cbiAgICBjb25zdCBjbG9uZU1hcCA9IG5ldyBXZWFrTWFwKCk7XG4gICAgY29uc3Qgb3JpZ2luYWxQb29sID0gYnVpbGRBZ2VudElucHV0UG9vbChpbnB1dEl0ZW1zKTtcbiAgICBjb25zdCBmYWxsYmFja09yaWdpbmFscyA9IFtdO1xuICAgIC8vIFRyYWNrIGFueSBvcmlnaW5hbCBvYmplY3QgaW5wdXRzIHNvIGZpbHRlcmVkIHJlcGxhY2VtZW50cyBjYW4gc3RpbGwgbWFyayB0aGVtIGFzIGRlbGl2ZXJlZC5cbiAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgaW5wdXRJdGVtcykge1xuICAgICAgICBpZiAoaXRlbSAmJiB0eXBlb2YgaXRlbSA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgIGZhbGxiYWNrT3JpZ2luYWxzLnB1c2goaXRlbSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY29uc3QgcmVtb3ZlRnJvbUZhbGxiYWNrID0gKGNhbmRpZGF0ZSkgPT4ge1xuICAgICAgICBpZiAoIWNhbmRpZGF0ZSB8fCB0eXBlb2YgY2FuZGlkYXRlICE9PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGluZGV4ID0gZmFsbGJhY2tPcmlnaW5hbHMuZmluZEluZGV4KChvcmlnaW5hbCkgPT4gb3JpZ2luYWwgPT09IGNhbmRpZGF0ZSk7XG4gICAgICAgIGlmIChpbmRleCAhPT0gLTEpIHtcbiAgICAgICAgICAgIGZhbGxiYWNrT3JpZ2luYWxzLnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIGNvbnN0IHRha2VGYWxsYmFja09yaWdpbmFsID0gKCkgPT4ge1xuICAgICAgICBjb25zdCBuZXh0ID0gZmFsbGJhY2tPcmlnaW5hbHMuc2hpZnQoKTtcbiAgICAgICAgaWYgKG5leHQpIHtcbiAgICAgICAgICAgIHJlbW92ZUFnZW50SW5wdXRGcm9tUG9vbChvcmlnaW5hbFBvb2wsIG5leHQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXh0O1xuICAgIH07XG4gICAgLy8gQWx3YXlzIGNyZWF0ZSBhIGRlZXAgY29weSBzbyBkb3duc3RyZWFtIG11dGF0aW9ucyBpbnNpZGUgZmlsdGVycyBjYW5ub3QgYWZmZWN0XG4gICAgLy8gdGhlIGNhY2hlZCB0dXJuIHN0YXRlLlxuICAgIGNvbnN0IGNsb25lZEJhc2VJbnB1dCA9IGNsb25lSW5wdXRJdGVtcyhpbnB1dEl0ZW1zLCBjbG9uZU1hcCk7XG4gICAgY29uc3QgYmFzZSA9IHtcbiAgICAgICAgaW5wdXQ6IGNsb25lZEJhc2VJbnB1dCxcbiAgICAgICAgaW5zdHJ1Y3Rpb25zOiBzeXN0ZW1JbnN0cnVjdGlvbnMsXG4gICAgfTtcbiAgICBpZiAoIWNhbGxNb2RlbElucHV0RmlsdGVyKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBtb2RlbElucHV0OiBiYXNlLFxuICAgICAgICAgICAgc291cmNlSXRlbXM6IFsuLi5pbnB1dEl0ZW1zXSxcbiAgICAgICAgICAgIHBlcnNpc3RlZEl0ZW1zOiBbXSxcbiAgICAgICAgICAgIGZpbHRlckFwcGxpZWQ6IGZhbHNlLFxuICAgICAgICB9O1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjYWxsTW9kZWxJbnB1dEZpbHRlcih7XG4gICAgICAgICAgICBtb2RlbERhdGE6IGJhc2UsXG4gICAgICAgICAgICBhZ2VudCxcbiAgICAgICAgICAgIGNvbnRleHQ6IGNvbnRleHQuY29udGV4dCxcbiAgICAgICAgfSk7XG4gICAgICAgIGlmICghcmVzdWx0IHx8ICFBcnJheS5pc0FycmF5KHJlc3VsdC5pbnB1dCkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBVc2VyRXJyb3IoJ2NhbGxNb2RlbElucHV0RmlsdGVyIG11c3QgcmV0dXJuIGEgTW9kZWxJbnB1dERhdGEgb2JqZWN0IHdpdGggYW4gaW5wdXQgYXJyYXkuJyk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gUHJlc2VydmUgYSBwb2ludGVyIHRvIHRoZSBvcmlnaW5hbCBvYmplY3QgYmFja2luZyBlYWNoIGZpbHRlcmVkIGNsb25lIHNvIGRvd25zdHJlYW1cbiAgICAgICAgLy8gdHJhY2tlcnMgY2FuIGtlZXAgdGhlaXIgYm9va2tlZXBpbmcgY29uc2lzdGVudCBldmVuIGFmdGVyIHJlZGFjdGlvbi5cbiAgICAgICAgY29uc3Qgc291cmNlSXRlbXMgPSByZXN1bHQuaW5wdXQubWFwKChpdGVtKSA9PiB7XG4gICAgICAgICAgICBpZiAoIWl0ZW0gfHwgdHlwZW9mIGl0ZW0gIT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IG9yaWdpbmFsID0gY2xvbmVNYXAuZ2V0KGl0ZW0pO1xuICAgICAgICAgICAgaWYgKG9yaWdpbmFsKSB7XG4gICAgICAgICAgICAgICAgcmVtb3ZlRnJvbUZhbGxiYWNrKG9yaWdpbmFsKTtcbiAgICAgICAgICAgICAgICByZW1vdmVBZ2VudElucHV0RnJvbVBvb2wob3JpZ2luYWxQb29sLCBvcmlnaW5hbCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG9yaWdpbmFsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3Qga2V5ID0gZ2V0QWdlbnRJbnB1dEl0ZW1LZXkoaXRlbSk7XG4gICAgICAgICAgICBjb25zdCBtYXRjaGVkQnlDb250ZW50ID0gdGFrZUFnZW50SW5wdXRGcm9tUG9vbChvcmlnaW5hbFBvb2wsIGtleSk7XG4gICAgICAgICAgICBpZiAobWF0Y2hlZEJ5Q29udGVudCkge1xuICAgICAgICAgICAgICAgIHJlbW92ZUZyb21GYWxsYmFjayhtYXRjaGVkQnlDb250ZW50KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gbWF0Y2hlZEJ5Q29udGVudDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGZhbGxiYWNrID0gdGFrZUZhbGxiYWNrT3JpZ2luYWwoKTtcbiAgICAgICAgICAgIGlmIChmYWxsYmFjaykge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxsYmFjaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCBjbG9uZWRGaWx0ZXJlZElucHV0ID0gY2xvbmVJbnB1dEl0ZW1zKHJlc3VsdC5pbnB1dCk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBtb2RlbElucHV0OiB7XG4gICAgICAgICAgICAgICAgaW5wdXQ6IGNsb25lZEZpbHRlcmVkSW5wdXQsXG4gICAgICAgICAgICAgICAgaW5zdHJ1Y3Rpb25zOiB0eXBlb2YgcmVzdWx0Lmluc3RydWN0aW9ucyA9PT0gJ3VuZGVmaW5lZCdcbiAgICAgICAgICAgICAgICAgICAgPyBzeXN0ZW1JbnN0cnVjdGlvbnNcbiAgICAgICAgICAgICAgICAgICAgOiByZXN1bHQuaW5zdHJ1Y3Rpb25zLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHNvdXJjZUl0ZW1zLFxuICAgICAgICAgICAgcGVyc2lzdGVkSXRlbXM6IGNsb25lZEZpbHRlcmVkSW5wdXQubWFwKChpdGVtKSA9PiBzdHJ1Y3R1cmVkQ2xvbmUoaXRlbSkpLFxuICAgICAgICAgICAgZmlsdGVyQXBwbGllZDogdHJ1ZSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGFkZEVycm9yVG9DdXJyZW50U3Bhbih7XG4gICAgICAgICAgICBtZXNzYWdlOiAnRXJyb3IgaW4gY2FsbE1vZGVsSW5wdXRGaWx0ZXInLFxuICAgICAgICAgICAgZGF0YTogeyBlcnJvcjogU3RyaW5nKGVycm9yKSB9LFxuICAgICAgICB9KTtcbiAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxufVxuLy8gVHJhY2tzIHdoaWNoIGl0ZW1zIGhhdmUgYWxyZWFkeSBiZWVuIHNlbnQgdG8gb3IgcmVjZWl2ZWQgZnJvbSB0aGUgUmVzcG9uc2VzIEFQSSB3aGVuIHRoZSBjYWxsZXJcbi8vIHN1cHBsaWVzIGBjb252ZXJzYXRpb25JZGAvYHByZXZpb3VzUmVzcG9uc2VJZGAuIFRoaXMgZW5zdXJlcyB3ZSBvbmx5IHNlbmQgdGhlIGRlbHRhIGVhY2ggdHVybi5cbmNsYXNzIFNlcnZlckNvbnZlcnNhdGlvblRyYWNrZXIge1xuICAgIC8vIENvbnZlcnNhdGlvbiBJRDpcbiAgICAvLyAtIGh0dHBzOi8vcGxhdGZvcm0ub3BlbmFpLmNvbS9kb2NzL2d1aWRlcy9jb252ZXJzYXRpb24tc3RhdGU/YXBpLW1vZGU9cmVzcG9uc2VzI3VzaW5nLXRoZS1jb252ZXJzYXRpb25zLWFwaVxuICAgIC8vIC0gaHR0cHM6Ly9wbGF0Zm9ybS5vcGVuYWkuY29tL2RvY3MvYXBpLXJlZmVyZW5jZS9jb252ZXJzYXRpb25zL2NyZWF0ZVxuICAgIGNvbnZlcnNhdGlvbklkO1xuICAgIC8vIFByZXZpb3VzIFJlc3BvbnNlIElEOlxuICAgIC8vIGh0dHBzOi8vcGxhdGZvcm0ub3BlbmFpLmNvbS9kb2NzL2d1aWRlcy9jb252ZXJzYXRpb24tc3RhdGU/YXBpLW1vZGU9cmVzcG9uc2VzI3Bhc3NpbmctY29udGV4dC1mcm9tLXRoZS1wcmV2aW91cy1yZXNwb25zZVxuICAgIHByZXZpb3VzUmVzcG9uc2VJZDtcbiAgICAvLyBVc2luZyB0aGlzIGZsYWcgYmVjYXVzZSBXZWFrU2V0IGRvZXMgbm90IHByb3ZpZGUgYSB3YXkgdG8gY2hlY2sgaXRzIHNpemVcbiAgICBzZW50SW5pdGlhbElucHV0ID0gZmFsc2U7XG4gICAgLy8gVGhlIGl0ZW1zIGFscmVhZHkgc2VudCB0byB0aGUgbW9kZWw7IHVzaW5nIFdlYWtTZXQgZm9yIG1lbW9yeSBlZmZpY2llbmN5XG4gICAgc2VudEl0ZW1zID0gbmV3IFdlYWtTZXQoKTtcbiAgICAvLyBUaGUgaXRlbXMgcmVjZWl2ZWQgZnJvbSB0aGUgc2VydmVyOyB1c2luZyBXZWFrU2V0IGZvciBtZW1vcnkgZWZmaWNpZW5jeVxuICAgIHNlcnZlckl0ZW1zID0gbmV3IFdlYWtTZXQoKTtcbiAgICAvLyBUcmFjayBpbml0aWFsIGlucHV0IGl0ZW1zIHRoYXQgaGF2ZSBub3QgeWV0IGJlZW4gc2VudCBzbyB0aGV5IGNhbiBiZSByZXRyaWVkIG9uIGxhdGVyIHR1cm5zLlxuICAgIHJlbWFpbmluZ0luaXRpYWxJbnB1dCA9IG51bGw7XG4gICAgY29uc3RydWN0b3IoeyBjb252ZXJzYXRpb25JZCwgcHJldmlvdXNSZXNwb25zZUlkLCB9KSB7XG4gICAgICAgIHRoaXMuY29udmVyc2F0aW9uSWQgPSBjb252ZXJzYXRpb25JZCA/PyB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMucHJldmlvdXNSZXNwb25zZUlkID0gcHJldmlvdXNSZXNwb25zZUlkID8/IHVuZGVmaW5lZDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUHJlLXBvcHVsYXRlcyB0cmFja2VyIGNhY2hlcyBmcm9tIGFuIGV4aXN0aW5nIFJ1blN0YXRlIHdoZW4gcmVzdW1pbmcgc2VydmVyLW1hbmFnZWQgcnVucy5cbiAgICAgKi9cbiAgICBwcmltZUZyb21TdGF0ZSh7IG9yaWdpbmFsSW5wdXQsIGdlbmVyYXRlZEl0ZW1zLCBtb2RlbFJlc3BvbnNlcywgfSkge1xuICAgICAgICBpZiAodGhpcy5zZW50SW5pdGlhbElucHV0KSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChjb25zdCBpdGVtIG9mIHRvQWdlbnRJbnB1dExpc3Qob3JpZ2luYWxJbnB1dCkpIHtcbiAgICAgICAgICAgIGlmIChpdGVtICYmIHR5cGVvZiBpdGVtID09PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgICAgIHRoaXMuc2VudEl0ZW1zLmFkZChpdGVtKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLnNlbnRJbml0aWFsSW5wdXQgPSB0cnVlO1xuICAgICAgICB0aGlzLnJlbWFpbmluZ0luaXRpYWxJbnB1dCA9IG51bGw7XG4gICAgICAgIGNvbnN0IGxhdGVzdFJlc3BvbnNlID0gbW9kZWxSZXNwb25zZXNbbW9kZWxSZXNwb25zZXMubGVuZ3RoIC0gMV07XG4gICAgICAgIGZvciAoY29uc3QgcmVzcG9uc2Ugb2YgbW9kZWxSZXNwb25zZXMpIHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgaXRlbSBvZiByZXNwb25zZS5vdXRwdXQpIHtcbiAgICAgICAgICAgICAgICBpZiAoaXRlbSAmJiB0eXBlb2YgaXRlbSA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXJ2ZXJJdGVtcy5hZGQoaXRlbSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICghdGhpcy5jb252ZXJzYXRpb25JZCAmJiBsYXRlc3RSZXNwb25zZT8ucmVzcG9uc2VJZCkge1xuICAgICAgICAgICAgdGhpcy5wcmV2aW91c1Jlc3BvbnNlSWQgPSBsYXRlc3RSZXNwb25zZS5yZXNwb25zZUlkO1xuICAgICAgICB9XG4gICAgICAgIGZvciAoY29uc3QgaXRlbSBvZiBnZW5lcmF0ZWRJdGVtcykge1xuICAgICAgICAgICAgY29uc3QgcmF3SXRlbSA9IGl0ZW0ucmF3SXRlbTtcbiAgICAgICAgICAgIGlmICghcmF3SXRlbSB8fCB0eXBlb2YgcmF3SXRlbSAhPT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLnNlcnZlckl0ZW1zLmhhcyhyYXdJdGVtKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2VudEl0ZW1zLmFkZChyYXdJdGVtKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZWNvcmRzIHRoZSByYXcgaXRlbXMgcmV0dXJuZWQgYnkgdGhlIHNlcnZlciBzbyBmdXR1cmUgZGVsdGEgY2FsY3VsYXRpb25zIHNraXAgdGhlbS5cbiAgICAgKiBBbHNvIGNhcHR1cmVzIHRoZSBsYXRlc3QgcmVzcG9uc2UgaWRlbnRpZmllciB0byBjaGFpbiBmb2xsb3ctdXAgY2FsbHMgd2hlbiBwb3NzaWJsZS5cbiAgICAgKi9cbiAgICB0cmFja1NlcnZlckl0ZW1zKG1vZGVsUmVzcG9uc2UpIHtcbiAgICAgICAgaWYgKCFtb2RlbFJlc3BvbnNlKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChjb25zdCBpdGVtIG9mIG1vZGVsUmVzcG9uc2Uub3V0cHV0KSB7XG4gICAgICAgICAgICBpZiAoaXRlbSAmJiB0eXBlb2YgaXRlbSA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNlcnZlckl0ZW1zLmFkZChpdGVtKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRoaXMuY29udmVyc2F0aW9uSWQgJiYgbW9kZWxSZXNwb25zZS5yZXNwb25zZUlkKSB7XG4gICAgICAgICAgICB0aGlzLnByZXZpb3VzUmVzcG9uc2VJZCA9IG1vZGVsUmVzcG9uc2UucmVzcG9uc2VJZDtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBtaW5pbXVtIHNldCBvZiBpdGVtcyB0aGF0IHN0aWxsIG5lZWQgdG8gYmUgZGVsaXZlcmVkIHRvIHRoZSBzZXJ2ZXIgZm9yIHRoZVxuICAgICAqIGN1cnJlbnQgdHVybi4gVGhpcyBpbmNsdWRlcyB0aGUgb3JpZ2luYWwgdHVybiBpbnB1dHMgKHVudGlsIGFja25vd2xlZGdlZCkgcGx1cyBhbnlcbiAgICAgKiBuZXdseSBnZW5lcmF0ZWQgaXRlbXMgdGhhdCBoYXZlIG5vdCB5ZXQgYmVlbiBlY2hvZWQgYmFjayBieSB0aGUgQVBJLlxuICAgICAqL1xuICAgIHByZXBhcmVJbnB1dChvcmlnaW5hbElucHV0LCBnZW5lcmF0ZWRJdGVtcykge1xuICAgICAgICBjb25zdCBpbnB1dEl0ZW1zID0gW107XG4gICAgICAgIGlmICghdGhpcy5zZW50SW5pdGlhbElucHV0KSB7XG4gICAgICAgICAgICBjb25zdCBpbml0aWFsSXRlbXMgPSB0b0FnZW50SW5wdXRMaXN0KG9yaWdpbmFsSW5wdXQpO1xuICAgICAgICAgICAgLy8gUHJlc2VydmUgdGhlIGZ1bGwgaW5pdGlhbCBwYXlsb2FkIHNvIGEgZmlsdGVyIGNhbiBkcm9wIGl0ZW1zIHdpdGhvdXQgbG9zaW5nIHRoZWlyIG9yaWdpbmFscy5cbiAgICAgICAgICAgIGlucHV0SXRlbXMucHVzaCguLi5pbml0aWFsSXRlbXMpO1xuICAgICAgICAgICAgdGhpcy5yZW1haW5pbmdJbml0aWFsSW5wdXQgPSBpbml0aWFsSXRlbXMuZmlsdGVyKChpdGVtKSA9PiBCb29sZWFuKGl0ZW0pICYmIHR5cGVvZiBpdGVtID09PSAnb2JqZWN0Jyk7XG4gICAgICAgICAgICB0aGlzLnNlbnRJbml0aWFsSW5wdXQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRoaXMucmVtYWluaW5nSW5pdGlhbElucHV0ICYmXG4gICAgICAgICAgICB0aGlzLnJlbWFpbmluZ0luaXRpYWxJbnB1dC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAvLyBSZS1xdWV1ZSBwcmlvciBpbml0aWFsIGl0ZW1zIHVudGlsIHRoZSB0cmFja2VyIGNvbmZpcm1zIHRoZXkgd2VyZSBkZWxpdmVyZWQgdG8gdGhlIEFQSS5cbiAgICAgICAgICAgIGlucHV0SXRlbXMucHVzaCguLi50aGlzLnJlbWFpbmluZ0luaXRpYWxJbnB1dCk7XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChjb25zdCBpdGVtIG9mIGdlbmVyYXRlZEl0ZW1zKSB7XG4gICAgICAgICAgICBpZiAoaXRlbS50eXBlID09PSAndG9vbF9hcHByb3ZhbF9pdGVtJykge1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgcmF3SXRlbSA9IGl0ZW0ucmF3SXRlbTtcbiAgICAgICAgICAgIGlmICghcmF3SXRlbSB8fCB0eXBlb2YgcmF3SXRlbSAhPT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLnNlbnRJdGVtcy5oYXMocmF3SXRlbSkgfHwgdGhpcy5zZXJ2ZXJJdGVtcy5oYXMocmF3SXRlbSkpIHtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlucHV0SXRlbXMucHVzaChyYXdJdGVtKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaW5wdXRJdGVtcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogTWFya3MgdGhlIHByb3ZpZGVkIG9yaWdpbmFscyBhcyBkZWxpdmVyZWQgc28gZnV0dXJlIHR1cm5zIGRvIG5vdCByZXNlbmQgdGhlbSBhbmQgYW55XG4gICAgICogcGVuZGluZyBpbml0aWFsIGlucHV0cyBjYW4gYmUgZHJvcHBlZCBvbmNlIHRoZSBzZXJ2ZXIgYWNrbm93bGVkZ2VzIHJlY2VpcHQuXG4gICAgICovXG4gICAgbWFya0lucHV0QXNTZW50KGl0ZW1zKSB7XG4gICAgICAgIGlmICghaXRlbXMubGVuZ3RoKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZGVsaXZlcmVkID0gbmV3IFNldCgpO1xuICAgICAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgaXRlbXMpIHtcbiAgICAgICAgICAgIGlmICghaXRlbSB8fCB0eXBlb2YgaXRlbSAhPT0gJ29iamVjdCcgfHwgZGVsaXZlcmVkLmhhcyhpdGVtKSkge1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gU29tZSBpbnB1dHMgbWF5IGJlIHJlcGVhdGVkIGluIHRoZSBmaWx0ZXJlZCBsaXN0OyBvbmx5IG1hcmsgdW5pcXVlIG9yaWdpbmFscyBvbmNlLlxuICAgICAgICAgICAgZGVsaXZlcmVkLmFkZChpdGVtKTtcbiAgICAgICAgICAgIHRoaXMuc2VudEl0ZW1zLmFkZChpdGVtKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRoaXMucmVtYWluaW5nSW5pdGlhbElucHV0IHx8XG4gICAgICAgICAgICB0aGlzLnJlbWFpbmluZ0luaXRpYWxJbnB1dC5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnJlbWFpbmluZ0luaXRpYWxJbnB1dCA9IHRoaXMucmVtYWluaW5nSW5pdGlhbElucHV0LmZpbHRlcigoaXRlbSkgPT4gIWRlbGl2ZXJlZC5oYXMoaXRlbSkpO1xuICAgICAgICBpZiAodGhpcy5yZW1haW5pbmdJbml0aWFsSW5wdXQubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICB0aGlzLnJlbWFpbmluZ0luaXRpYWxJbnB1dCA9IG51bGw7XG4gICAgICAgIH1cbiAgICB9XG59XG4vKipcbiAqIFdoZW4gdGhlIGRlZmF1bHQgbW9kZWwgaXMgYSBHUFQtNSB2YXJpYW50LCBhZ2VudHMgbWF5IGNhcnJ5IEdQVC01LXNwZWNpZmljIHByb3ZpZGVyRGF0YVxuICogKGUuZy4sIHJlYXNvbmluZyBlZmZvcnQsIHRleHQgdmVyYm9zaXR5KS4gSWYgYSBydW4gcmVzb2x2ZXMgdG8gYSBub24tR1BULTUgbW9kZWwgYW5kIHRoZVxuICogYWdlbnQgcmVsaWVkIG9uIHRoZSBkZWZhdWx0IG1vZGVsIChpLmUuLCBubyBleHBsaWNpdCBtb2RlbCBzZXQpLCB0aGVzZSBHUFQtNS1vbmx5IHNldHRpbmdzXG4gKiBhcmUgaW5jb21wYXRpYmxlIGFuZCBzaG91bGQgYmUgc3RyaXBwZWQgdG8gYXZvaWQgcnVudGltZSBlcnJvcnMuXG4gKi9cbmZ1bmN0aW9uIGFkanVzdE1vZGVsU2V0dGluZ3NGb3JOb25HUFQ1UnVubmVyTW9kZWwoZXhwbGljdGx5TW9kZWxTZXQsIGFnZW50TW9kZWxTZXR0aW5ncywgcnVubmVyTW9kZWwsIG1vZGVsU2V0dGluZ3MpIHtcbiAgICBpZiAoXG4gICAgLy8gZ3B0LTUgaXMgZW5hYmxlZCBmb3IgdGhlIGRlZmF1bHQgbW9kZWwgZm9yIGFnZW50c1xuICAgIGlzR3B0NURlZmF1bHQoKSAmJlxuICAgICAgICAvLyBleHBsaWNpdGx5IHNldCBtb2RlbCBmb3IgdGhlIGFnZW50XG4gICAgICAgIGV4cGxpY3RseU1vZGVsU2V0ICYmXG4gICAgICAgIC8vIHRoaXMgcnVubmVyIHVzZXMgYSBub24tZ3B0LTUgbW9kZWxcbiAgICAgICAgKHR5cGVvZiBydW5uZXJNb2RlbCAhPT0gJ3N0cmluZycgfHxcbiAgICAgICAgICAgICFncHQ1UmVhc29uaW5nU2V0dGluZ3NSZXF1aXJlZChydW5uZXJNb2RlbCkpICYmXG4gICAgICAgIChhZ2VudE1vZGVsU2V0dGluZ3MucHJvdmlkZXJEYXRhPy5yZWFzb25pbmcgfHxcbiAgICAgICAgICAgIGFnZW50TW9kZWxTZXR0aW5ncy5wcm92aWRlckRhdGE/LnRleHQ/LnZlcmJvc2l0eSB8fFxuICAgICAgICAgICAgYWdlbnRNb2RlbFNldHRpbmdzLnByb3ZpZGVyRGF0YT8ucmVhc29uaW5nX2VmZm9ydCkpIHtcbiAgICAgICAgY29uc3QgY29waWVkTW9kZWxTZXR0aW5ncyA9IHsgLi4ubW9kZWxTZXR0aW5ncyB9O1xuICAgICAgICAvLyB0aGUgaW5jb21wYXRpYmxlIHBhcmFtZXRlcnMgc2hvdWxkIGJlIHJlbW92ZWQgdG8gYXZvaWQgcnVudGltZSBlcnJvcnNcbiAgICAgICAgZGVsZXRlIGNvcGllZE1vZGVsU2V0dGluZ3MucHJvdmlkZXJEYXRhPy5yZWFzb25pbmc7XG4gICAgICAgIGRlbGV0ZSBjb3BpZWRNb2RlbFNldHRpbmdzLnByb3ZpZGVyRGF0YT8udGV4dD8udmVyYm9zaXR5O1xuICAgICAgICBkZWxldGUgY29waWVkTW9kZWxTZXR0aW5ncy5wcm92aWRlckRhdGE/LnJlYXNvbmluZ19lZmZvcnQ7XG4gICAgICAgIGlmIChjb3BpZWRNb2RlbFNldHRpbmdzLnJlYXNvbmluZykge1xuICAgICAgICAgICAgZGVsZXRlIGNvcGllZE1vZGVsU2V0dGluZ3MucmVhc29uaW5nLmVmZm9ydDtcbiAgICAgICAgICAgIGRlbGV0ZSBjb3BpZWRNb2RlbFNldHRpbmdzLnJlYXNvbmluZy5zdW1tYXJ5O1xuICAgICAgICB9XG4gICAgICAgIGlmIChjb3BpZWRNb2RlbFNldHRpbmdzLnRleHQpIHtcbiAgICAgICAgICAgIGRlbGV0ZSBjb3BpZWRNb2RlbFNldHRpbmdzLnRleHQudmVyYm9zaXR5O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjb3BpZWRNb2RlbFNldHRpbmdzO1xuICAgIH1cbiAgICByZXR1cm4gbW9kZWxTZXR0aW5ncztcbn1cbi8qKlxuICogQGludGVybmFsXG4gKiBDb2xsZWN0cyB0b29scy9oYW5kb2ZmcyBlYXJseSBzbyB3ZSBjYW4gYW5ub3RhdGUgc3BhbnMgYmVmb3JlIG1vZGVsIGV4ZWN1dGlvbiBiZWdpbnMuXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIHByZXBhcmVBZ2VudEFydGlmYWN0cyhzdGF0ZSkge1xuICAgIGNvbnN0IGhhbmRvZmZzID0gYXdhaXQgc3RhdGUuX2N1cnJlbnRBZ2VudC5nZXRFbmFibGVkSGFuZG9mZnMoc3RhdGUuX2NvbnRleHQpO1xuICAgIGNvbnN0IHRvb2xzID0gYXdhaXQgc3RhdGUuX2N1cnJlbnRBZ2VudC5nZXRBbGxUb29scyhzdGF0ZS5fY29udGV4dCk7XG4gICAgY29uc3QgY29tcHV0ZXJUb29scyA9IHRvb2xzLmZpbHRlcigodG9vbCkgPT4gdG9vbC50eXBlID09PSAnY29tcHV0ZXInKTtcbiAgICBpZiAoY29tcHV0ZXJUb29scy5sZW5ndGggPiAwKSB7XG4gICAgICAgIGF3YWl0IFByb21pc2UuYWxsKGNvbXB1dGVyVG9vbHMubWFwKGFzeW5jICh0b29sKSA9PiB7XG4gICAgICAgICAgICBhd2FpdCByZXNvbHZlQ29tcHV0ZXIoeyB0b29sLCBydW5Db250ZXh0OiBzdGF0ZS5fY29udGV4dCB9KTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBpZiAoIXN0YXRlLl9jdXJyZW50QWdlbnRTcGFuKSB7XG4gICAgICAgIGNvbnN0IGhhbmRvZmZOYW1lcyA9IGhhbmRvZmZzLm1hcCgoaCkgPT4gaC5hZ2VudE5hbWUpO1xuICAgICAgICBzdGF0ZS5fY3VycmVudEFnZW50U3BhbiA9IGNyZWF0ZUFnZW50U3Bhbih7XG4gICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgbmFtZTogc3RhdGUuX2N1cnJlbnRBZ2VudC5uYW1lLFxuICAgICAgICAgICAgICAgIGhhbmRvZmZzOiBoYW5kb2ZmTmFtZXMsXG4gICAgICAgICAgICAgICAgdG9vbHM6IHRvb2xzLm1hcCgodCkgPT4gdC5uYW1lKSxcbiAgICAgICAgICAgICAgICBvdXRwdXRfdHlwZTogc3RhdGUuX2N1cnJlbnRBZ2VudC5vdXRwdXRTY2hlbWFOYW1lLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgICAgIHN0YXRlLl9jdXJyZW50QWdlbnRTcGFuLnN0YXJ0KCk7XG4gICAgICAgIHNldEN1cnJlbnRTcGFuKHN0YXRlLl9jdXJyZW50QWdlbnRTcGFuKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHN0YXRlLl9jdXJyZW50QWdlbnRTcGFuLnNwYW5EYXRhLnRvb2xzID0gdG9vbHMubWFwKCh0KSA9PiB0Lm5hbWUpO1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgICBoYW5kb2ZmcyxcbiAgICAgICAgdG9vbHMsXG4gICAgICAgIHNlcmlhbGl6ZWRIYW5kb2ZmczogaGFuZG9mZnMubWFwKChoYW5kb2ZmKSA9PiBzZXJpYWxpemVIYW5kb2ZmKGhhbmRvZmYpKSxcbiAgICAgICAgc2VyaWFsaXplZFRvb2xzOiB0b29scy5tYXAoKHRvb2wpID0+IHNlcmlhbGl6ZVRvb2wodG9vbCkpLFxuICAgICAgICB0b29sc0V4cGxpY2l0bHlQcm92aWRlZDogc3RhdGUuX2N1cnJlbnRBZ2VudC5oYXNFeHBsaWNpdFRvb2xDb25maWcoKSxcbiAgICB9O1xufVxuZnVuY3Rpb24gZ2V0QWdlbnRJbnB1dEl0ZW1LZXkoaXRlbSkge1xuICAgIC8vIERlZXAgc2VyaWFsaXphdGlvbiBrZWVwcyBiaW5hcnkgaW5wdXRzIGNvbXBhcmFibGUgYWZ0ZXIgZmlsdGVycyBjbG9uZSB0aGVtLlxuICAgIHJldHVybiBKU09OLnN0cmluZ2lmeShpdGVtLCBhZ2VudElucHV0U2VyaWFsaXphdGlvblJlcGxhY2VyKTtcbn1cbmZ1bmN0aW9uIGJ1aWxkQWdlbnRJbnB1dFBvb2woaXRlbXMpIHtcbiAgICAvLyBUcmFjayBldmVyeSBvcmlnaW5hbCBvYmplY3Qgc28gZmlsdGVycyBjYW4gc2FmZWx5IHJldHVybiBjbG9uZWQgY29waWVzLlxuICAgIGNvbnN0IHBvb2wgPSBuZXcgTWFwKCk7XG4gICAgZm9yIChjb25zdCBpdGVtIG9mIGl0ZW1zKSB7XG4gICAgICAgIGNvbnN0IGtleSA9IGdldEFnZW50SW5wdXRJdGVtS2V5KGl0ZW0pO1xuICAgICAgICBjb25zdCBleGlzdGluZyA9IHBvb2wuZ2V0KGtleSk7XG4gICAgICAgIGlmIChleGlzdGluZykge1xuICAgICAgICAgICAgZXhpc3RpbmcucHVzaChpdGVtKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHBvb2wuc2V0KGtleSwgW2l0ZW1dKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcG9vbDtcbn1cbmZ1bmN0aW9uIHRha2VBZ2VudElucHV0RnJvbVBvb2wocG9vbCwga2V5KSB7XG4gICAgLy8gUHJlZmVyIHJldXNpbmcgdGhlIGVhcmxpZXN0IHVudG91Y2hlZCBvcmlnaW5hbCB0byBrZWVwIG9yZGVyaW5nIHN0YWJsZS5cbiAgICBjb25zdCBjYW5kaWRhdGVzID0gcG9vbC5nZXQoa2V5KTtcbiAgICBpZiAoIWNhbmRpZGF0ZXMgfHwgY2FuZGlkYXRlcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG4gICAgY29uc3QgW2ZpcnN0XSA9IGNhbmRpZGF0ZXM7XG4gICAgY2FuZGlkYXRlcy5zaGlmdCgpO1xuICAgIGlmIChjYW5kaWRhdGVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICBwb29sLmRlbGV0ZShrZXkpO1xuICAgIH1cbiAgICByZXR1cm4gZmlyc3Q7XG59XG5mdW5jdGlvbiByZW1vdmVBZ2VudElucHV0RnJvbVBvb2wocG9vbCwgaXRlbSkge1xuICAgIC8vIFJlbW92ZSBleGFjdGx5IHRoZSBtYXRjaGVkIGluc3RhbmNlIHNvIGR1cGxpY2F0ZSBwYXlsb2FkcyByZW1haW4gYXZhaWxhYmxlLlxuICAgIGNvbnN0IGtleSA9IGdldEFnZW50SW5wdXRJdGVtS2V5KGl0ZW0pO1xuICAgIGNvbnN0IGNhbmRpZGF0ZXMgPSBwb29sLmdldChrZXkpO1xuICAgIGlmICghY2FuZGlkYXRlcyB8fCBjYW5kaWRhdGVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IGluZGV4ID0gY2FuZGlkYXRlcy5maW5kSW5kZXgoKGNhbmRpZGF0ZSkgPT4gY2FuZGlkYXRlID09PSBpdGVtKTtcbiAgICBpZiAoaW5kZXggPT09IC0xKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY2FuZGlkYXRlcy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgIGlmIChjYW5kaWRhdGVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICBwb29sLmRlbGV0ZShrZXkpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGFnZW50SW5wdXRTZXJpYWxpemF0aW9uUmVwbGFjZXIoX2tleSwgdmFsdWUpIHtcbiAgICAvLyBNaXJyb3IgcnVuSW1wbGVtZW50YXRpb24gc2VyaWFsaXphdGlvbiBzbyBidWZmZXIgc25hcHNob3RzIHJvdW5kLXRyaXAuXG4gICAgaWYgKHZhbHVlIGluc3RhbmNlb2YgQXJyYXlCdWZmZXIpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIF9fdHlwZTogJ0FycmF5QnVmZmVyJyxcbiAgICAgICAgICAgIGRhdGE6IGVuY29kZVVpbnQ4QXJyYXlUb0Jhc2U2NChuZXcgVWludDhBcnJheSh2YWx1ZSkpLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBpZiAoaXNBcnJheUJ1ZmZlclZpZXcodmFsdWUpKSB7XG4gICAgICAgIGNvbnN0IHZpZXcgPSB2YWx1ZTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIF9fdHlwZTogdmlldy5jb25zdHJ1Y3Rvci5uYW1lLFxuICAgICAgICAgICAgZGF0YTogZW5jb2RlVWludDhBcnJheVRvQmFzZTY0KG5ldyBVaW50OEFycmF5KHZpZXcuYnVmZmVyLCB2aWV3LmJ5dGVPZmZzZXQsIHZpZXcuYnl0ZUxlbmd0aCkpLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBpZiAoaXNOb2RlQnVmZmVyKHZhbHVlKSkge1xuICAgICAgICBjb25zdCB2aWV3ID0gdmFsdWU7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBfX3R5cGU6ICdCdWZmZXInLFxuICAgICAgICAgICAgZGF0YTogZW5jb2RlVWludDhBcnJheVRvQmFzZTY0KG5ldyBVaW50OEFycmF5KHZpZXcuYnVmZmVyLCB2aWV3LmJ5dGVPZmZzZXQsIHZpZXcuYnl0ZUxlbmd0aCkpLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBpZiAoaXNTZXJpYWxpemVkQnVmZmVyU25hcHNob3QodmFsdWUpKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBfX3R5cGU6ICdCdWZmZXInLFxuICAgICAgICAgICAgZGF0YTogZW5jb2RlVWludDhBcnJheVRvQmFzZTY0KFVpbnQ4QXJyYXkuZnJvbSh2YWx1ZS5kYXRhKSksXG4gICAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiB2YWx1ZTtcbn1cbi8vIE5vcm1hbGl6ZXMgdXNlci1wcm92aWRlZCBpbnB1dCBpbnRvIHRoZSBzdHJ1Y3R1cmUgdGhlIG1vZGVsIGV4cGVjdHMuIFN0cmluZ3MgYmVjb21lIHVzZXIgbWVzc2FnZXMsXG4vLyBhcnJheXMgYXJlIGtlcHQgYXMtaXMgc28gZG93bnN0cmVhbSBsb29wcyBjYW4gdHJlYXQgYm90aCBzY2VuYXJpb3MgdW5pZm9ybWx5LlxuZnVuY3Rpb24gdG9BZ2VudElucHV0TGlzdChvcmlnaW5hbElucHV0KSB7XG4gICAgLy8gQWxsb3cgY2FsbGVycyB0byBwYXNzIHBsYWluIHN0cmluZ3Mgd2hpbGUgcHJlc2VydmluZyBvcmlnaW5hbCBpdGVtIG9yZGVyLlxuICAgIGlmICh0eXBlb2Ygb3JpZ2luYWxJbnB1dCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgcmV0dXJuIFt7IHR5cGU6ICdtZXNzYWdlJywgcm9sZTogJ3VzZXInLCBjb250ZW50OiBvcmlnaW5hbElucHV0IH1dO1xuICAgIH1cbiAgICByZXR1cm4gWy4uLm9yaWdpbmFsSW5wdXRdO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cnVuLm1qcy5tYXAiLCJpbXBvcnQgeyBSZWFkYWJsZVN0cmVhbSBhcyBfUmVhZGFibGVTdHJlYW0sIFRyYW5zZm9ybVN0cmVhbSwgUmVhZGFibGUsIH0gZnJvbSAnQG9wZW5haS9hZ2VudHMtY29yZS9fc2hpbXMnO1xuaW1wb3J0IHsgZ2V0VHVybklucHV0IH0gZnJvbSBcIi4vcnVuLm1qc1wiO1xuaW1wb3J0IGxvZ2dlciBmcm9tIFwiLi9sb2dnZXIubWpzXCI7XG5pbXBvcnQgeyBTdHJlYW1FdmVudFRleHRTdHJlYW0gfSBmcm9tIFwiLi90eXBlcy9wcm90b2NvbC5tanNcIjtcbmNsYXNzIFJ1blJlc3VsdEJhc2Uge1xuICAgIHN0YXRlO1xuICAgIGNvbnN0cnVjdG9yKHN0YXRlKSB7XG4gICAgICAgIHRoaXMuc3RhdGUgPSBzdGF0ZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIGhpc3Rvcnkgb2YgdGhlIGFnZW50IHJ1bi4gVGhpcyBpbmNsdWRlcyB0aGUgaW5wdXQgaXRlbXMgYW5kIHRoZSBuZXcgaXRlbXMgZ2VuZXJhdGVkIGR1cmluZ1xuICAgICAqIHRoZSBhZ2VudCBydW4uXG4gICAgICpcbiAgICAgKiBUaGlzIGNhbiBiZSB1c2VkIGFzIGlucHV0cyBmb3IgdGhlIG5leHQgYWdlbnQgcnVuLlxuICAgICAqL1xuICAgIGdldCBoaXN0b3J5KCkge1xuICAgICAgICByZXR1cm4gZ2V0VHVybklucHV0KHRoaXMuaW5wdXQsIHRoaXMubmV3SXRlbXMpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgbmV3IGl0ZW1zIGdlbmVyYXRlZCBkdXJpbmcgdGhlIGFnZW50IHJ1bi4gVGhlc2UgaW5jbHVkZSB0aGluZ3MgbGlrZSBuZXcgbWVzc2FnZXMsIHRvb2xcbiAgICAgKiBjYWxscyBhbmQgdGhlaXIgb3V0cHV0cywgZXRjLlxuICAgICAqXG4gICAgICogSXQgZG9lcyBub3QgaW5jbHVkZSBpbmZvcm1hdGlvbiBhYm91dCB0aGUgYWdlbnRzIGFuZCBpbnN0ZWFkIHJlcHJlc2VudHMgdGhlIG1vZGVsIGRhdGEuXG4gICAgICpcbiAgICAgKiBGb3IgdGhlIG91dHB1dCBpbmNsdWRpbmcgdGhlIGFnZW50cywgdXNlIHRoZSBgbmV3SXRlbXNgIHByb3BlcnR5LlxuICAgICAqL1xuICAgIGdldCBvdXRwdXQoKSB7XG4gICAgICAgIHJldHVybiBnZXRUdXJuSW5wdXQoW10sIHRoaXMubmV3SXRlbXMpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBIGNvcHkgb2YgdGhlIG9yaWdpbmFsIGlucHV0IGl0ZW1zLlxuICAgICAqL1xuICAgIGdldCBpbnB1dCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3RhdGUuX29yaWdpbmFsSW5wdXQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBydW4gaXRlbXMgZ2VuZXJhdGVkIGR1cmluZyB0aGUgYWdlbnQgcnVuLiBUaGlzIGFzc29jaWF0ZXMgdGhlIG1vZGVsIGRhdGEgd2l0aCB0aGUgYWdlbnRzLlxuICAgICAqXG4gICAgICogRm9yIHRoZSBtb2RlbCBkYXRhIHRoYXQgY2FuIGJlIHVzZWQgYXMgaW5wdXRzIGZvciB0aGUgbmV4dCBhZ2VudCBydW4sIHVzZSB0aGUgYG91dHB1dGAgcHJvcGVydHkuXG4gICAgICovXG4gICAgZ2V0IG5ld0l0ZW1zKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zdGF0ZS5fZ2VuZXJhdGVkSXRlbXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSByYXcgTExNIHJlc3BvbnNlcyBnZW5lcmF0ZWQgYnkgdGhlIG1vZGVsIGR1cmluZyB0aGUgYWdlbnQgcnVuLlxuICAgICAqL1xuICAgIGdldCByYXdSZXNwb25zZXMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnN0YXRlLl9tb2RlbFJlc3BvbnNlcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIGxhc3QgcmVzcG9uc2UgSUQgZ2VuZXJhdGVkIGJ5IHRoZSBtb2RlbCBkdXJpbmcgdGhlIGFnZW50IHJ1bi5cbiAgICAgKi9cbiAgICBnZXQgbGFzdFJlc3BvbnNlSWQoKSB7XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlcyA9IHRoaXMucmF3UmVzcG9uc2VzO1xuICAgICAgICByZXR1cm4gcmVzcG9uc2VzICYmIHJlc3BvbnNlcy5sZW5ndGggPiAwXG4gICAgICAgICAgICA/IHJlc3BvbnNlc1tyZXNwb25zZXMubGVuZ3RoIC0gMV0ucmVzcG9uc2VJZFxuICAgICAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBsYXN0IGFnZW50IHRoYXQgd2FzIHJ1blxuICAgICAqL1xuICAgIGdldCBsYXN0QWdlbnQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnN0YXRlLl9jdXJyZW50QWdlbnQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEd1YXJkcmFpbCByZXN1bHRzIGZvciB0aGUgaW5wdXQgbWVzc2FnZXMuXG4gICAgICovXG4gICAgZ2V0IGlucHV0R3VhcmRyYWlsUmVzdWx0cygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3RhdGUuX2lucHV0R3VhcmRyYWlsUmVzdWx0cztcbiAgICB9XG4gICAgLyoqXG4gICAgICogR3VhcmRyYWlsIHJlc3VsdHMgZm9yIHRoZSBmaW5hbCBvdXRwdXQgb2YgdGhlIGFnZW50LlxuICAgICAqL1xuICAgIGdldCBvdXRwdXRHdWFyZHJhaWxSZXN1bHRzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zdGF0ZS5fb3V0cHV0R3VhcmRyYWlsUmVzdWx0cztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQW55IGludGVycnVwdGlvbnMgdGhhdCBvY2N1cnJlZCBkdXJpbmcgdGhlIGFnZW50IHJ1biBmb3IgZXhhbXBsZSBmb3IgdG9vbCBhcHByb3ZhbHMuXG4gICAgICovXG4gICAgZ2V0IGludGVycnVwdGlvbnMoKSB7XG4gICAgICAgIGlmICh0aGlzLnN0YXRlLl9jdXJyZW50U3RlcD8udHlwZSA9PT0gJ25leHRfc3RlcF9pbnRlcnJ1cHRpb24nKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zdGF0ZS5fY3VycmVudFN0ZXAuZGF0YS5pbnRlcnJ1cHRpb25zO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBbXTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIGZpbmFsIG91dHB1dCBvZiB0aGUgYWdlbnQuIElmIHRoZSBvdXRwdXQgdHlwZSB3YXMgc2V0IHRvIGFueXRoaW5nIG90aGVyIHRoYW4gYHRleHRgLFxuICAgICAqIHRoaXMgd2lsbCBiZSBwYXJzZWQgZWl0aGVyIGFzIEpTT04gb3IgdXNpbmcgdGhlIFpvZCBzY2hlbWEgeW91IHByb3ZpZGVkLlxuICAgICAqL1xuICAgIGdldCBmaW5hbE91dHB1dCgpIHtcbiAgICAgICAgaWYgKHRoaXMuc3RhdGUuX2N1cnJlbnRTdGVwPy50eXBlID09PSAnbmV4dF9zdGVwX2ZpbmFsX291dHB1dCcpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnN0YXRlLl9jdXJyZW50QWdlbnQucHJvY2Vzc0ZpbmFsT3V0cHV0KHRoaXMuc3RhdGUuX2N1cnJlbnRTdGVwLm91dHB1dCk7XG4gICAgICAgIH1cbiAgICAgICAgbG9nZ2VyLndhcm4oJ0FjY2Vzc2VkIGZpbmFsT3V0cHV0IGJlZm9yZSBhZ2VudCBydW4gaXMgY29tcGxldGVkLicpO1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbn1cbi8qKlxuICogVGhlIHJlc3VsdCBvZiBhbiBhZ2VudCBydW4uXG4gKi9cbmV4cG9ydCBjbGFzcyBSdW5SZXN1bHQgZXh0ZW5kcyBSdW5SZXN1bHRCYXNlIHtcbiAgICBjb25zdHJ1Y3RvcihzdGF0ZSkge1xuICAgICAgICBzdXBlcihzdGF0ZSk7XG4gICAgfVxufVxuLyoqXG4gKiBUaGUgcmVzdWx0IG9mIGFuIGFnZW50IHJ1biBpbiBzdHJlYW1pbmcgbW9kZS5cbiAqL1xuZXhwb3J0IGNsYXNzIFN0cmVhbWVkUnVuUmVzdWx0IGV4dGVuZHMgUnVuUmVzdWx0QmFzZSB7XG4gICAgLyoqXG4gICAgICogVGhlIGN1cnJlbnQgYWdlbnQgdGhhdCBpcyBydW5uaW5nXG4gICAgICovXG4gICAgZ2V0IGN1cnJlbnRBZ2VudCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubGFzdEFnZW50O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgY3VycmVudCB0dXJuIG51bWJlclxuICAgICAqL1xuICAgIGN1cnJlbnRUdXJuID0gMDtcbiAgICAvKipcbiAgICAgKiBUaGUgbWF4aW11bSBudW1iZXIgb2YgdHVybnMgdGhhdCBjYW4gYmUgcnVuXG4gICAgICovXG4gICAgbWF4VHVybnM7XG4gICAgI2Vycm9yID0gbnVsbDtcbiAgICAjc2lnbmFsO1xuICAgICNyZWFkYWJsZUNvbnRyb2xsZXI7XG4gICAgI3JlYWRhYmxlU3RyZWFtO1xuICAgICNjb21wbGV0ZWRQcm9taXNlO1xuICAgICNjb21wbGV0ZWRQcm9taXNlUmVzb2x2ZTtcbiAgICAjY29tcGxldGVkUHJvbWlzZVJlamVjdDtcbiAgICAjY2FuY2VsbGVkID0gZmFsc2U7XG4gICAgI3N0cmVhbUxvb3BQcm9taXNlO1xuICAgIGNvbnN0cnVjdG9yKHJlc3VsdCA9IHt9KSB7XG4gICAgICAgIHN1cGVyKHJlc3VsdC5zdGF0ZSk7XG4gICAgICAgIHRoaXMuI3NpZ25hbCA9IHJlc3VsdC5zaWduYWw7XG4gICAgICAgIHRoaXMuI3JlYWRhYmxlU3RyZWFtID0gbmV3IF9SZWFkYWJsZVN0cmVhbSh7XG4gICAgICAgICAgICBzdGFydDogKGNvbnRyb2xsZXIpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLiNyZWFkYWJsZUNvbnRyb2xsZXIgPSBjb250cm9sbGVyO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGNhbmNlbDogKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuI2NhbmNlbGxlZCA9IHRydWU7XG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy4jY29tcGxldGVkUHJvbWlzZSA9IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgIHRoaXMuI2NvbXBsZXRlZFByb21pc2VSZXNvbHZlID0gcmVzb2x2ZTtcbiAgICAgICAgICAgIHRoaXMuI2NvbXBsZXRlZFByb21pc2VSZWplY3QgPSByZWplY3Q7XG4gICAgICAgIH0pO1xuICAgICAgICBpZiAodGhpcy4jc2lnbmFsKSB7XG4gICAgICAgICAgICBjb25zdCBoYW5kbGVBYm9ydCA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy4jY2FuY2VsbGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy4jY2FuY2VsbGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBjb25zdCBjb250cm9sbGVyID0gdGhpcy4jcmVhZGFibGVDb250cm9sbGVyO1xuICAgICAgICAgICAgICAgIHRoaXMuI3JlYWRhYmxlQ29udHJvbGxlciA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy4jcmVhZGFibGVTdHJlYW0ubG9ja2VkKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjb250cm9sbGVyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZXIuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2dnZXIuZGVidWcoYEZhaWxlZCB0byBjbG9zZSByZWFkYWJsZSBzdHJlYW0gb24gYWJvcnQ6ICR7ZXJyfWApO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB2b2lkIHRoaXMuI3JlYWRhYmxlU3RyZWFtXG4gICAgICAgICAgICAgICAgICAgICAgICAuY2FuY2VsKHRoaXMuI3NpZ25hbD8ucmVhc29uKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZyhgRmFpbGVkIHRvIGNhbmNlbCByZWFkYWJsZSBzdHJlYW0gb24gYWJvcnQ6ICR7ZXJyfWApO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy4jY29tcGxldGVkUHJvbWlzZVJlc29sdmU/LigpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGlmICh0aGlzLiNzaWduYWwuYWJvcnRlZCkge1xuICAgICAgICAgICAgICAgIGhhbmRsZUFib3J0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLiNzaWduYWwuYWRkRXZlbnRMaXN0ZW5lcignYWJvcnQnLCBoYW5kbGVBYm9ydCwgeyBvbmNlOiB0cnVlIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqIEFkZHMgYW4gaXRlbSB0byB0aGUgc3RyZWFtIG9mIG91dHB1dCBpdGVtc1xuICAgICAqL1xuICAgIF9hZGRJdGVtKGl0ZW0pIHtcbiAgICAgICAgaWYgKCF0aGlzLmNhbmNlbGxlZCkge1xuICAgICAgICAgICAgdGhpcy4jcmVhZGFibGVDb250cm9sbGVyPy5lbnF1ZXVlKGl0ZW0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqIEluZGljYXRlcyB0aGF0IHRoZSBzdHJlYW0gaGFzIGJlZW4gY29tcGxldGVkXG4gICAgICovXG4gICAgX2RvbmUoKSB7XG4gICAgICAgIGlmICghdGhpcy5jYW5jZWxsZWQgJiYgdGhpcy4jcmVhZGFibGVDb250cm9sbGVyKSB7XG4gICAgICAgICAgICB0aGlzLiNyZWFkYWJsZUNvbnRyb2xsZXIuY2xvc2UoKTtcbiAgICAgICAgICAgIHRoaXMuI3JlYWRhYmxlQ29udHJvbGxlciA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIHRoaXMuI2NvbXBsZXRlZFByb21pc2VSZXNvbHZlPy4oKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKiBIYW5kbGVzIGFuIGVycm9yIGluIHRoZSBzdHJlYW0gbG9vcC5cbiAgICAgKi9cbiAgICBfcmFpc2VFcnJvcihlcnIpIHtcbiAgICAgICAgaWYgKCF0aGlzLmNhbmNlbGxlZCAmJiB0aGlzLiNyZWFkYWJsZUNvbnRyb2xsZXIpIHtcbiAgICAgICAgICAgIHRoaXMuI3JlYWRhYmxlQ29udHJvbGxlci5lcnJvcihlcnIpO1xuICAgICAgICAgICAgdGhpcy4jcmVhZGFibGVDb250cm9sbGVyID0gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuI2Vycm9yID0gZXJyO1xuICAgICAgICB0aGlzLiNjb21wbGV0ZWRQcm9taXNlUmVqZWN0Py4oZXJyKTtcbiAgICAgICAgdGhpcy4jY29tcGxldGVkUHJvbWlzZS5jYXRjaCgoZSkgPT4ge1xuICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKGBSZXN1bHRlZCBpbiBhbiBlcnJvcjogJHtlfWApO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0cnVlIGlmIHRoZSBzdHJlYW0gaGFzIGJlZW4gY2FuY2VsbGVkLlxuICAgICAqL1xuICAgIGdldCBjYW5jZWxsZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiNjYW5jZWxsZWQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIHVuZGVybHlpbmcgcmVhZGFibGUgc3RyZWFtLlxuICAgICAqIEByZXR1cm5zIEEgcmVhZGFibGUgc3RyZWFtIG9mIHRoZSBhZ2VudCBydW4uXG4gICAgICovXG4gICAgdG9TdHJlYW0oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiNyZWFkYWJsZVN0cmVhbTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQXdhaXQgdGhpcyBwcm9taXNlIHRvIGVuc3VyZSB0aGF0IHRoZSBzdHJlYW0gaGFzIGJlZW4gY29tcGxldGVkIGlmIHlvdSBhcmUgbm90IGNvbnN1bWluZyB0aGVcbiAgICAgKiBzdHJlYW0gZGlyZWN0bHkuXG4gICAgICovXG4gICAgZ2V0IGNvbXBsZXRlZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuI2NvbXBsZXRlZFByb21pc2U7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEVycm9yIHRocm93biBkdXJpbmcgdGhlIHJ1biwgaWYgYW55LlxuICAgICAqL1xuICAgIGdldCBlcnJvcigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuI2Vycm9yO1xuICAgIH1cbiAgICB0b1RleHRTdHJlYW0ob3B0aW9ucyA9IHt9KSB7XG4gICAgICAgIGNvbnN0IHN0cmVhbSA9IHRoaXMuI3JlYWRhYmxlU3RyZWFtLnBpcGVUaHJvdWdoKG5ldyBUcmFuc2Zvcm1TdHJlYW0oe1xuICAgICAgICAgICAgdHJhbnNmb3JtKGV2ZW50LCBjb250cm9sbGVyKSB7XG4gICAgICAgICAgICAgICAgaWYgKGV2ZW50LnR5cGUgPT09ICdyYXdfbW9kZWxfc3RyZWFtX2V2ZW50JyAmJlxuICAgICAgICAgICAgICAgICAgICBldmVudC5kYXRhLnR5cGUgPT09ICdvdXRwdXRfdGV4dF9kZWx0YScpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaXRlbSA9IFN0cmVhbUV2ZW50VGV4dFN0cmVhbS5wYXJzZShldmVudC5kYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgY29udHJvbGxlci5lbnF1ZXVlKGl0ZW0uZGVsdGEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pKTtcbiAgICAgICAgaWYgKG9wdGlvbnMuY29tcGF0aWJsZVdpdGhOb2RlU3RyZWFtcykge1xuICAgICAgICAgICAgcmV0dXJuIFJlYWRhYmxlLmZyb21XZWIoc3RyZWFtKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc3RyZWFtO1xuICAgIH1cbiAgICBbU3ltYm9sLmFzeW5jSXRlcmF0b3JdKCkge1xuICAgICAgICByZXR1cm4gdGhpcy4jcmVhZGFibGVTdHJlYW1bU3ltYm9sLmFzeW5jSXRlcmF0b3JdKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqIFNldHMgdGhlIHN0cmVhbSBsb29wIHByb21pc2UgdGhhdCBjb21wbGV0ZXMgd2hlbiB0aGUgaW50ZXJuYWwgc3RyZWFtIGxvb3AgZmluaXNoZXMuXG4gICAgICogVGhpcyBpcyB1c2VkIHRvIGRlZmVyIHRyYWNlIGVuZCB1bnRpbCBhbGwgYWdlbnQgd29yayBpcyBjb21wbGV0ZS5cbiAgICAgKi9cbiAgICBfc2V0U3RyZWFtTG9vcFByb21pc2UocHJvbWlzZSkge1xuICAgICAgICB0aGlzLiNzdHJlYW1Mb29wUHJvbWlzZSA9IHByb21pc2U7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqIFJldHVybnMgYSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgd2hlbiB0aGUgc3RyZWFtIGxvb3AgY29tcGxldGVzLlxuICAgICAqIFRoaXMgaXMgdXNlZCBieSB0aGUgdHJhY2luZyBzeXN0ZW0gdG8gd2FpdCBmb3IgYWxsIGFnZW50IHdvcmsgYmVmb3JlIGVuZGluZyB0aGUgdHJhY2UuXG4gICAgICovXG4gICAgX2dldFN0cmVhbUxvb3BQcm9taXNlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy4jc3RyZWFtTG9vcFByb21pc2U7XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cmVzdWx0Lm1qcy5tYXAiLCJpbXBvcnQgeyBBc3luY0xvY2FsU3RvcmFnZSB9IGZyb20gJ0BvcGVuYWkvYWdlbnRzLWNvcmUvX3NoaW1zJztcbmltcG9ydCB7IGdldEdsb2JhbFRyYWNlUHJvdmlkZXIgfSBmcm9tIFwiLi9wcm92aWRlci5tanNcIjtcbmltcG9ydCB7IFN0cmVhbWVkUnVuUmVzdWx0IH0gZnJvbSBcIi4uL3Jlc3VsdC5tanNcIjtcbmxldCBfY29udGV4dEFzeW5jTG9jYWxTdG9yYWdlO1xuZnVuY3Rpb24gZ2V0Q29udGV4dEFzeW5jTG9jYWxTdG9yYWdlKCkge1xuICAgIF9jb250ZXh0QXN5bmNMb2NhbFN0b3JhZ2UgPz89IG5ldyBBc3luY0xvY2FsU3RvcmFnZSgpO1xuICAgIHJldHVybiBfY29udGV4dEFzeW5jTG9jYWxTdG9yYWdlO1xufVxuLyoqXG4gKiBUaGlzIGZ1bmN0aW9uIHdpbGwgZ2V0IHRoZSBjdXJyZW50IHRyYWNlIGZyb20gdGhlIGV4ZWN1dGlvbiBjb250ZXh0LlxuICpcbiAqIEByZXR1cm5zIFRoZSBjdXJyZW50IHRyYWNlIG9yIG51bGwgaWYgdGhlcmUgaXMgbm8gdHJhY2UuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRDdXJyZW50VHJhY2UoKSB7XG4gICAgY29uc3QgY3VycmVudFRyYWNlID0gZ2V0Q29udGV4dEFzeW5jTG9jYWxTdG9yYWdlKCkuZ2V0U3RvcmUoKTtcbiAgICBpZiAoY3VycmVudFRyYWNlPy50cmFjZSkge1xuICAgICAgICByZXR1cm4gY3VycmVudFRyYWNlLnRyYWNlO1xuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbn1cbi8qKlxuICogVGhpcyBmdW5jdGlvbiB3aWxsIGdldCB0aGUgY3VycmVudCBzcGFuIGZyb20gdGhlIGV4ZWN1dGlvbiBjb250ZXh0LlxuICpcbiAqIEByZXR1cm5zIFRoZSBjdXJyZW50IHNwYW4gb3IgbnVsbCBpZiB0aGVyZSBpcyBubyBzcGFuLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0Q3VycmVudFNwYW4oKSB7XG4gICAgY29uc3QgY3VycmVudFNwYW4gPSBnZXRDb250ZXh0QXN5bmNMb2NhbFN0b3JhZ2UoKS5nZXRTdG9yZSgpO1xuICAgIGlmIChjdXJyZW50U3Bhbj8uc3Bhbikge1xuICAgICAgICByZXR1cm4gY3VycmVudFNwYW4uc3BhbjtcbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG59XG4vKipcbiAqIFRoaXMgaXMgYW4gQXN5bmNMb2NhbFN0b3JhZ2UgaW5zdGFuY2UgdGhhdCBzdG9yZXMgdGhlIGN1cnJlbnQgdHJhY2UuXG4gKiBJdCB3aWxsIGF1dG9tYXRpY2FsbHkgaGFuZGxlIHRoZSBleGVjdXRpb24gY29udGV4dCBvZiBkaWZmZXJlbnQgZXZlbnQgbG9vcCBleGVjdXRpb25zLlxuICpcbiAqIFRoZSBmdW5jdGlvbnMgYmVsb3cgc2hvdWxkIGJlIHRoZSBvbmx5IHdheSB0aGF0IHRoaXMgY29udGV4dCBnZXRzIGludGVyZmFjZWQgd2l0aC5cbiAqL1xuZnVuY3Rpb24gX3dyYXBGdW5jdGlvbldpdGhUcmFjZUxpZmVjeWNsZShmbikge1xuICAgIHJldHVybiBhc3luYyAoKSA9PiB7XG4gICAgICAgIGNvbnN0IHRyYWNlID0gZ2V0Q3VycmVudFRyYWNlKCk7XG4gICAgICAgIGlmICghdHJhY2UpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignTm8gdHJhY2UgZm91bmQnKTtcbiAgICAgICAgfVxuICAgICAgICBhd2FpdCB0cmFjZS5zdGFydCgpO1xuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBmbih0cmFjZSk7XG4gICAgICAgIC8vIElmIHJlc3VsdCBpcyBhIFN0cmVhbWVkUnVuUmVzdWx0LCBkZWZlciB0cmFjZSBlbmQgdW50aWwgc3RyZWFtIGxvb3AgY29tcGxldGVzXG4gICAgICAgIGlmIChyZXN1bHQgaW5zdGFuY2VvZiBTdHJlYW1lZFJ1blJlc3VsdCkge1xuICAgICAgICAgICAgY29uc3Qgc3RyZWFtTG9vcFByb21pc2UgPSByZXN1bHQuX2dldFN0cmVhbUxvb3BQcm9taXNlKCk7XG4gICAgICAgICAgICBpZiAoc3RyZWFtTG9vcFByb21pc2UpIHtcbiAgICAgICAgICAgICAgICBzdHJlYW1Mb29wUHJvbWlzZS5maW5hbGx5KCgpID0+IHRyYWNlLmVuZCgpKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIEZvciBub24tc3RyZWFtaW5nIHJlc3VsdHMsIGVuZCB0cmFjZSBzeW5jaHJvbm91c2x5XG4gICAgICAgIGF3YWl0IHRyYWNlLmVuZCgpO1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH07XG59XG4vKipcbiAqIFRoaXMgZnVuY3Rpb24gd2lsbCBjcmVhdGUgYSBuZXcgdHJhY2UgYW5kIGFzc2lnbiBpdCB0byB0aGUgZXhlY3V0aW9uIGNvbnRleHQgb2YgdGhlIGZ1bmN0aW9uXG4gKiBwYXNzZWQgdG8gaXQuXG4gKlxuICogQHBhcmFtIGZuIC0gVGhlIGZ1bmN0aW9uIHRvIHJ1biBhbmQgYXNzaWduIHRoZSB0cmFjZSBjb250ZXh0IHRvLlxuICogQHBhcmFtIG9wdGlvbnMgLSBPcHRpb25zIGZvciB0aGUgY3JlYXRpb24gb2YgdGhlIHRyYWNlXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB3aXRoVHJhY2UodHJhY2UsIGZuLCBvcHRpb25zID0ge30pIHtcbiAgICBjb25zdCBuZXdUcmFjZSA9IHR5cGVvZiB0cmFjZSA9PT0gJ3N0cmluZydcbiAgICAgICAgPyBnZXRHbG9iYWxUcmFjZVByb3ZpZGVyKCkuY3JlYXRlVHJhY2Uoe1xuICAgICAgICAgICAgLi4ub3B0aW9ucyxcbiAgICAgICAgICAgIG5hbWU6IHRyYWNlLFxuICAgICAgICB9KVxuICAgICAgICA6IHRyYWNlO1xuICAgIHJldHVybiBnZXRDb250ZXh0QXN5bmNMb2NhbFN0b3JhZ2UoKS5ydW4oeyB0cmFjZTogbmV3VHJhY2UgfSwgX3dyYXBGdW5jdGlvbldpdGhUcmFjZUxpZmVjeWNsZShmbikpO1xufVxuLyoqXG4gKiBUaGlzIGZ1bmN0aW9uIHdpbGwgY2hlY2sgaWYgdGhlcmUgaXMgYW4gZXhpc3RpbmcgYWN0aXZlIHRyYWNlIGluIHRoZSBleGVjdXRpb24gY29udGV4dC4gSWYgdGhlcmVcbiAqIGlzLCBpdCB3aWxsIHJ1biB0aGUgZ2l2ZW4gZnVuY3Rpb24gd2l0aCB0aGUgZXhpc3RpbmcgdHJhY2UuIElmIHRoZXJlIGlzIG5vIHRyYWNlLCBpdCB3aWxsIGNyZWF0ZVxuICogYSBuZXcgb25lIGFuZCBhc3NpZ24gaXQgdG8gdGhlIGV4ZWN1dGlvbiBjb250ZXh0IG9mIHRoZSBmdW5jdGlvbi5cbiAqXG4gKiBAcGFyYW0gZm4gLSBUaGUgZnp1bmN0aW9uIHRvIHJ1biBhbmQgYXNzaWduIHRoZSB0cmFjZSBjb250ZXh0IHRvLlxuICogQHBhcmFtIG9wdGlvbnMgLSBPcHRpb25zIGZvciB0aGUgY3JlYXRpb24gb2YgdGhlIHRyYWNlXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRPckNyZWF0ZVRyYWNlKGZuLCBvcHRpb25zID0ge30pIHtcbiAgICBjb25zdCBjdXJyZW50VHJhY2UgPSBnZXRDdXJyZW50VHJhY2UoKTtcbiAgICBpZiAoY3VycmVudFRyYWNlKSB7XG4gICAgICAgIC8vIGlmIHRoaXMgZXhlY3V0aW9uIGNvbnRleHQgYWxyZWFkeSBoYXMgYSB0cmFjZSBpbnN0YW5jZSBpbiBpdCB3ZSBqdXN0IGNvbnRpbnVlXG4gICAgICAgIHJldHVybiBhd2FpdCBmbigpO1xuICAgIH1cbiAgICBjb25zdCBuZXdUcmFjZSA9IGdldEdsb2JhbFRyYWNlUHJvdmlkZXIoKS5jcmVhdGVUcmFjZShvcHRpb25zKTtcbiAgICByZXR1cm4gZ2V0Q29udGV4dEFzeW5jTG9jYWxTdG9yYWdlKCkucnVuKHsgdHJhY2U6IG5ld1RyYWNlIH0sIF93cmFwRnVuY3Rpb25XaXRoVHJhY2VMaWZlY3ljbGUoZm4pKTtcbn1cbi8qKlxuICogVGhpcyBmdW5jdGlvbiB3aWxsIHNldCB0aGUgY3VycmVudCBzcGFuIGluIHRoZSBleGVjdXRpb24gY29udGV4dC5cbiAqXG4gKiBAcGFyYW0gc3BhbiAtIFRoZSBzcGFuIHRvIHNldCBhcyB0aGUgY3VycmVudCBzcGFuLlxuICovXG5leHBvcnQgZnVuY3Rpb24gc2V0Q3VycmVudFNwYW4oc3Bhbikge1xuICAgIGNvbnN0IGNvbnRleHQgPSBnZXRDb250ZXh0QXN5bmNMb2NhbFN0b3JhZ2UoKS5nZXRTdG9yZSgpO1xuICAgIGlmICghY29udGV4dCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vIGV4aXN0aW5nIHRyYWNlIGZvdW5kJyk7XG4gICAgfVxuICAgIGlmIChjb250ZXh0LnNwYW4pIHtcbiAgICAgICAgY29udGV4dC5zcGFuLnByZXZpb3VzU3BhbiA9IGNvbnRleHQucHJldmlvdXNTcGFuO1xuICAgICAgICBjb250ZXh0LnByZXZpb3VzU3BhbiA9IGNvbnRleHQuc3BhbjtcbiAgICB9XG4gICAgc3Bhbi5wcmV2aW91c1NwYW4gPSBjb250ZXh0LnNwYW4gPz8gY29udGV4dC5wcmV2aW91c1NwYW47XG4gICAgY29udGV4dC5zcGFuID0gc3BhbjtcbiAgICBnZXRDb250ZXh0QXN5bmNMb2NhbFN0b3JhZ2UoKS5lbnRlcldpdGgoY29udGV4dCk7XG59XG5leHBvcnQgZnVuY3Rpb24gcmVzZXRDdXJyZW50U3BhbigpIHtcbiAgICBjb25zdCBjb250ZXh0ID0gZ2V0Q29udGV4dEFzeW5jTG9jYWxTdG9yYWdlKCkuZ2V0U3RvcmUoKTtcbiAgICBpZiAoY29udGV4dCkge1xuICAgICAgICBjb250ZXh0LnNwYW4gPSBjb250ZXh0LnByZXZpb3VzU3BhbjtcbiAgICAgICAgY29udGV4dC5wcmV2aW91c1NwYW4gPSBjb250ZXh0LnByZXZpb3VzU3Bhbj8ucHJldmlvdXNTcGFuO1xuICAgICAgICBnZXRDb250ZXh0QXN5bmNMb2NhbFN0b3JhZ2UoKS5lbnRlcldpdGgoY29udGV4dCk7XG4gICAgfVxufVxuLyoqXG4gKiBUaGlzIGZ1bmN0aW9uIHdpbGwgYWRkIGFuIGVycm9yIHRvIHRoZSBjdXJyZW50IHNwYW4uXG4gKlxuICogQHBhcmFtIHNwYW5FcnJvciAtIFRoZSBlcnJvciB0byBhZGQgdG8gdGhlIGN1cnJlbnQgc3Bhbi5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFkZEVycm9yVG9DdXJyZW50U3BhbihzcGFuRXJyb3IpIHtcbiAgICBjb25zdCBjdXJyZW50U3BhbiA9IGdldEN1cnJlbnRTcGFuKCk7XG4gICAgaWYgKGN1cnJlbnRTcGFuKSB7XG4gICAgICAgIGN1cnJlbnRTcGFuLnNldEVycm9yKHNwYW5FcnJvcik7XG4gICAgfVxufVxuLyoqXG4gKiBUaGlzIGZ1bmN0aW9uIHdpbGwgY2xvbmUgdGhlIGN1cnJlbnQgY29udGV4dCBieSBjcmVhdGluZyBuZXcgaW5zdGFuY2VzIG9mIHRoZSB0cmFjZSwgc3BhbiwgYW5kXG4gKiBwcmV2aW91cyBzcGFuLlxuICpcbiAqIEBwYXJhbSBjb250ZXh0IC0gVGhlIGNvbnRleHQgdG8gY2xvbmUuXG4gKiBAcmV0dXJucyBBIGNsb25lIG9mIHRoZSBjb250ZXh0LlxuICovXG5leHBvcnQgZnVuY3Rpb24gY2xvbmVDdXJyZW50Q29udGV4dChjb250ZXh0KSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgdHJhY2U6IGNvbnRleHQudHJhY2U/LmNsb25lKCksXG4gICAgICAgIHNwYW46IGNvbnRleHQuc3Bhbj8uY2xvbmUoKSxcbiAgICAgICAgcHJldmlvdXNTcGFuOiBjb250ZXh0LnByZXZpb3VzU3Bhbj8uY2xvbmUoKSxcbiAgICB9O1xufVxuLyoqXG4gKiBUaGlzIGZ1bmN0aW9uIHdpbGwgcnVuIHRoZSBnaXZlbiBmdW5jdGlvbiB3aXRoIGEgbmV3IHNwYW4gY29udGV4dC5cbiAqXG4gKiBAcGFyYW0gZm4gLSBUaGUgZnVuY3Rpb24gdG8gcnVuIHdpdGggdGhlIG5ldyBzcGFuIGNvbnRleHQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB3aXRoTmV3U3BhbkNvbnRleHQoZm4pIHtcbiAgICBjb25zdCBjdXJyZW50Q29udGV4dCA9IGdldENvbnRleHRBc3luY0xvY2FsU3RvcmFnZSgpLmdldFN0b3JlKCk7XG4gICAgaWYgKCFjdXJyZW50Q29udGV4dCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vIGV4aXN0aW5nIHRyYWNlIGZvdW5kJyk7XG4gICAgfVxuICAgIGNvbnN0IGNvcHlPZkNvbnRleHQgPSBjbG9uZUN1cnJlbnRDb250ZXh0KGN1cnJlbnRDb250ZXh0KTtcbiAgICByZXR1cm4gZ2V0Q29udGV4dEFzeW5jTG9jYWxTdG9yYWdlKCkucnVuKGNvcHlPZkNvbnRleHQsIGZuKTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNvbnRleHQubWpzLm1hcCIsImltcG9ydCBsb2dnZXIgZnJvbSBcIi4uL2xvZ2dlci5tanNcIjtcbmltcG9ydCB7IHRpbWVyIGFzIF90aW1lciwgaXNUcmFjaW5nTG9vcFJ1bm5pbmdCeURlZmF1bHQsIH0gZnJvbSAnQG9wZW5haS9hZ2VudHMtY29yZS9fc2hpbXMnO1xuaW1wb3J0IHsgdHJhY2luZyB9IGZyb20gXCIuLi9jb25maWcubWpzXCI7XG4vKipcbiAqIFByaW50cyB0aGUgdHJhY2VzIGFuZCBzcGFucyB0byB0aGUgY29uc29sZVxuICovXG5leHBvcnQgY2xhc3MgQ29uc29sZVNwYW5FeHBvcnRlciB7XG4gICAgYXN5bmMgZXhwb3J0KGl0ZW1zKSB7XG4gICAgICAgIGlmICh0cmFjaW5nLmRpc2FibGVkKSB7XG4gICAgICAgICAgICBsb2dnZXIuZGVidWcoJ1RyYWNpbmcgaXMgZGlzYWJsZWQuIFNraXBwaW5nIGV4cG9ydCcpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGZvciAoY29uc3QgaXRlbSBvZiBpdGVtcykge1xuICAgICAgICAgICAgaWYgKGl0ZW0udHlwZSA9PT0gJ3RyYWNlJykge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBbRXhwb3J0ZXJdIEV4cG9ydCB0cmFjZSB0cmFjZUlkPSR7aXRlbS50cmFjZUlkfSBuYW1lPSR7aXRlbS5uYW1lfSR7aXRlbS5ncm91cElkID8gYCBncm91cElkPSR7aXRlbS5ncm91cElkfWAgOiAnJ31gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBbRXhwb3J0ZXJdIEV4cG9ydCBzcGFuOiAke0pTT04uc3RyaW5naWZ5KGl0ZW0pfWApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIEJhdGNoVHJhY2VQcm9jZXNzb3Ige1xuICAgICNtYXhRdWV1ZVNpemU7XG4gICAgI21heEJhdGNoU2l6ZTtcbiAgICAjc2NoZWR1bGVEZWxheTtcbiAgICAjZXhwb3J0VHJpZ2dlclNpemU7XG4gICAgI2V4cG9ydGVyO1xuICAgICNidWZmZXIgPSBbXTtcbiAgICAjdGltZXI7XG4gICAgI3RpbWVvdXQgPSBudWxsO1xuICAgICNleHBvcnRJblByb2dyZXNzID0gZmFsc2U7XG4gICAgI3RpbWVvdXRBYm9ydENvbnRyb2xsZXIgPSBudWxsO1xuICAgIGNvbnN0cnVjdG9yKGV4cG9ydGVyLCB7IG1heFF1ZXVlU2l6ZSA9IDEwMDAsIG1heEJhdGNoU2l6ZSA9IDEwMCwgc2NoZWR1bGVEZWxheSA9IDUwMDAsIC8vIDUgc2Vjb25kc1xuICAgIGV4cG9ydFRyaWdnZXJSYXRpbyA9IDAuOCwgfSA9IHt9KSB7XG4gICAgICAgIHRoaXMuI21heFF1ZXVlU2l6ZSA9IG1heFF1ZXVlU2l6ZTtcbiAgICAgICAgdGhpcy4jbWF4QmF0Y2hTaXplID0gbWF4QmF0Y2hTaXplO1xuICAgICAgICB0aGlzLiNzY2hlZHVsZURlbGF5ID0gc2NoZWR1bGVEZWxheTtcbiAgICAgICAgdGhpcy4jZXhwb3J0VHJpZ2dlclNpemUgPSBtYXhRdWV1ZVNpemUgKiBleHBvcnRUcmlnZ2VyUmF0aW87XG4gICAgICAgIHRoaXMuI2V4cG9ydGVyID0gZXhwb3J0ZXI7XG4gICAgICAgIHRoaXMuI3RpbWVyID0gX3RpbWVyO1xuICAgICAgICBpZiAoaXNUcmFjaW5nTG9vcFJ1bm5pbmdCeURlZmF1bHQoKSkge1xuICAgICAgICAgICAgdGhpcy5zdGFydCgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKCdBdXRvbWF0aWMgdHJhY2UgZXhwb3J0IGxvb3AgaXMgbm90IHN1cHBvcnRlZCBpbiB0aGlzIGVudmlyb25tZW50LiBZb3UgbmVlZCB0byBtYW51YWxseSBjYWxsIGBnZXRHbG9iYWxUcmFjZVByb3ZpZGVyKCkuZm9yY2VGbHVzaCgpYCB0byBleHBvcnQgdHJhY2VzLicpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0YXJ0KCkge1xuICAgICAgICB0aGlzLiN0aW1lb3V0QWJvcnRDb250cm9sbGVyID0gbmV3IEFib3J0Q29udHJvbGxlcigpO1xuICAgICAgICB0aGlzLiNydW5FeHBvcnRMb29wKCk7XG4gICAgfVxuICAgIGFzeW5jICNzYWZlQWRkSXRlbShpdGVtKSB7XG4gICAgICAgIGlmICh0aGlzLiNidWZmZXIubGVuZ3RoICsgMSA+IHRoaXMuI21heFF1ZXVlU2l6ZSkge1xuICAgICAgICAgICAgbG9nZ2VyLmVycm9yKCdEcm9wcGluZyB0cmFjZSBiZWNhdXNlIGJ1ZmZlciBpcyBmdWxsJyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgLy8gYWRkIHRoZSBpdGVtIHRvIHRoZSBidWZmZXJcbiAgICAgICAgdGhpcy4jYnVmZmVyLnB1c2goaXRlbSk7XG4gICAgICAgIGlmICh0aGlzLiNidWZmZXIubGVuZ3RoID4gdGhpcy4jZXhwb3J0VHJpZ2dlclNpemUpIHtcbiAgICAgICAgICAgIC8vIHN0YXJ0IGV4cG9ydGluZyBpbW1lZGlhdGVseVxuICAgICAgICAgICAgYXdhaXQgdGhpcy4jZXhwb3J0QmF0Y2hlcygpO1xuICAgICAgICB9XG4gICAgfVxuICAgICNydW5FeHBvcnRMb29wKCkge1xuICAgICAgICB0aGlzLiN0aW1lb3V0ID0gdGhpcy4jdGltZXIuc2V0VGltZW91dChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAvLyBzY2hlZHVsZWQgZXhwb3J0XG4gICAgICAgICAgICBhd2FpdCB0aGlzLiNleHBvcnRCYXRjaGVzKCk7XG4gICAgICAgICAgICB0aGlzLiNydW5FeHBvcnRMb29wKCk7XG4gICAgICAgIH0sIHRoaXMuI3NjaGVkdWxlRGVsYXkpO1xuICAgICAgICAvLyBXZSBzZXQgdGhpcyBzbyB0aGF0IE5vZGUgbm8gbG9uZ2VyIGNvbnNpZGVycyB0aGlzIHBhcnQgb2YgdGhlIGV2ZW50IGxvb3AgYW5kIGtlZXBzIHRoZVxuICAgICAgICAvLyBwcm9jZXNzIGFsaXZlIHVudGlsIHRoZSB0aW1lciBpcyBkb25lLlxuICAgICAgICBpZiAodHlwZW9mIHRoaXMuI3RpbWVvdXQudW5yZWYgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIHRoaXMuI3RpbWVvdXQudW5yZWYoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyAjZXhwb3J0QmF0Y2hlcyhmb3JjZSA9IGZhbHNlKSB7XG4gICAgICAgIGlmICh0aGlzLiNidWZmZXIubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgbG9nZ2VyLmRlYnVnKGBFeHBvcnRpbmcgYmF0Y2hlcy4gRm9yY2U6ICR7Zm9yY2V9LiBCdWZmZXIgc2l6ZTogJHt0aGlzLiNidWZmZXIubGVuZ3RofWApO1xuICAgICAgICBpZiAoZm9yY2UgfHwgdGhpcy4jYnVmZmVyLmxlbmd0aCA8IHRoaXMuI21heEJhdGNoU2l6ZSkge1xuICAgICAgICAgICAgY29uc3QgdG9FeHBvcnQgPSBbLi4udGhpcy4jYnVmZmVyXTtcbiAgICAgICAgICAgIHRoaXMuI2J1ZmZlciA9IFtdO1xuICAgICAgICAgICAgdGhpcy4jZXhwb3J0SW5Qcm9ncmVzcyA9IHRydWU7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLiNleHBvcnRlci5leHBvcnQodG9FeHBvcnQpO1xuICAgICAgICAgICAgdGhpcy4jZXhwb3J0SW5Qcm9ncmVzcyA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRoaXMuI2J1ZmZlci5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBjb25zdCBiYXRjaCA9IHRoaXMuI2J1ZmZlci5zcGxpY2UoMCwgdGhpcy4jbWF4QmF0Y2hTaXplKTtcbiAgICAgICAgICAgIHRoaXMuI2V4cG9ydEluUHJvZ3Jlc3MgPSB0cnVlO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy4jZXhwb3J0ZXIuZXhwb3J0KGJhdGNoKTtcbiAgICAgICAgICAgIHRoaXMuI2V4cG9ydEluUHJvZ3Jlc3MgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyBvblRyYWNlU3RhcnQodHJhY2UpIHtcbiAgICAgICAgYXdhaXQgdGhpcy4jc2FmZUFkZEl0ZW0odHJhY2UpO1xuICAgIH1cbiAgICBhc3luYyBvblRyYWNlRW5kKF90cmFjZSkge1xuICAgICAgICAvLyBXZSBkb24ndCBzZW5kIHRyYWNlcyBvbiBlbmQgYmVjYXVzZSB3ZSBhbHJlYWR5IHNlbmQgdGhlbSBvbiBzdGFydFxuICAgIH1cbiAgICBhc3luYyBvblNwYW5TdGFydChfc3Bhbikge1xuICAgICAgICAvLyBXZSBkb24ndCBzZW5kIHNwYW5zIG9uIHN0YXJ0IGJlY2F1c2Ugd2Ugc2VuZCB0aGVtIGF0IHRoZSBlbmRcbiAgICB9XG4gICAgYXN5bmMgb25TcGFuRW5kKHNwYW4pIHtcbiAgICAgICAgYXdhaXQgdGhpcy4jc2FmZUFkZEl0ZW0oc3Bhbik7XG4gICAgfVxuICAgIGFzeW5jIHNodXRkb3duKHRpbWVvdXQpIHtcbiAgICAgICAgaWYgKHRpbWVvdXQpIHtcbiAgICAgICAgICAgIHRoaXMuI3RpbWVyLnNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgIC8vIGZvcmNlIHNodXRkb3duIHRoZSBIVFRQIHJlcXVlc3RcbiAgICAgICAgICAgICAgICB0aGlzLiN0aW1lb3V0QWJvcnRDb250cm9sbGVyPy5hYm9ydCgpO1xuICAgICAgICAgICAgfSwgdGltZW91dCk7XG4gICAgICAgIH1cbiAgICAgICAgbG9nZ2VyLmRlYnVnKCdTaHV0dGluZyBkb3duIGdyYWNlZnVsbHknKTtcbiAgICAgICAgd2hpbGUgKHRoaXMuI2J1ZmZlci5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBsb2dnZXIuZGVidWcoYFdhaXRpbmcgZm9yIGJ1ZmZlciB0byBlbXB0eS4gSXRlbXMgbGVmdDogJHt0aGlzLiNidWZmZXIubGVuZ3RofWApO1xuICAgICAgICAgICAgaWYgKCF0aGlzLiNleHBvcnRJblByb2dyZXNzKSB7XG4gICAgICAgICAgICAgICAgLy8gbm8gY3VycmVudCBleHBvcnQgaW4gcHJvZ3Jlc3MuIEZvcmNpbmcgYWxsIGl0ZW1zIHRvIGJlIGV4cG9ydGVkXG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy4jZXhwb3J0QmF0Y2hlcyh0cnVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLiN0aW1lb3V0QWJvcnRDb250cm9sbGVyPy5zaWduYWwuYWJvcnRlZCkge1xuICAgICAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZygnVGltZW91dCByZWFjaGVkLCBmb3JjZSBmbHVzaGluZycpO1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuI2V4cG9ydEJhdGNoZXModHJ1ZSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyB1c2luZyBzZXRUaW1lb3V0IHRvIGFkZCB0byB0aGUgZXZlbnQgbG9vcCBhbmQga2VlcCB0aGlzIGFsaXZlIHVudGlsIGRvbmVcbiAgICAgICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB0aGlzLiN0aW1lci5zZXRUaW1lb3V0KHJlc29sdmUsIDUwMCkpO1xuICAgICAgICB9XG4gICAgICAgIGxvZ2dlci5kZWJ1ZygnQnVmZmVyIGVtcHR5LiBFeGl0aW5nJyk7XG4gICAgICAgIGlmICh0aGlzLiN0aW1lciAmJiB0aGlzLiN0aW1lb3V0KSB7XG4gICAgICAgICAgICAvLyBtYWtpbmcgc3VyZSB0aGVyZSBhcmUgbm8gbW9yZSByZXF1ZXN0c1xuICAgICAgICAgICAgdGhpcy4jdGltZXIuY2xlYXJUaW1lb3V0KHRoaXMuI3RpbWVvdXQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jIGZvcmNlRmx1c2goKSB7XG4gICAgICAgIGlmICh0aGlzLiNidWZmZXIubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy4jZXhwb3J0QmF0Y2hlcyh0cnVlKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBNdWx0aVRyYWNpbmdQcm9jZXNzb3Ige1xuICAgICNwcm9jZXNzb3JzID0gW107XG4gICAgc3RhcnQoKSB7XG4gICAgICAgIGZvciAoY29uc3QgcHJvY2Vzc29yIG9mIHRoaXMuI3Byb2Nlc3NvcnMpIHtcbiAgICAgICAgICAgIGlmIChwcm9jZXNzb3Iuc3RhcnQpIHtcbiAgICAgICAgICAgICAgICBwcm9jZXNzb3Iuc3RhcnQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBhZGRUcmFjZVByb2Nlc3Nvcihwcm9jZXNzb3IpIHtcbiAgICAgICAgdGhpcy4jcHJvY2Vzc29ycy5wdXNoKHByb2Nlc3Nvcik7XG4gICAgfVxuICAgIHNldFByb2Nlc3NvcnMocHJvY2Vzc29ycykge1xuICAgICAgICBsb2dnZXIuZGVidWcoJ1NodXR0aW5nIGRvd24gb2xkIHByb2Nlc3NvcnMnKTtcbiAgICAgICAgZm9yIChjb25zdCBwcm9jZXNzb3Igb2YgdGhpcy4jcHJvY2Vzc29ycykge1xuICAgICAgICAgICAgcHJvY2Vzc29yLnNodXRkb3duKCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy4jcHJvY2Vzc29ycyA9IHByb2Nlc3NvcnM7XG4gICAgfVxuICAgIGFzeW5jIG9uVHJhY2VTdGFydCh0cmFjZSkge1xuICAgICAgICBmb3IgKGNvbnN0IHByb2Nlc3NvciBvZiB0aGlzLiNwcm9jZXNzb3JzKSB7XG4gICAgICAgICAgICBhd2FpdCBwcm9jZXNzb3Iub25UcmFjZVN0YXJ0KHRyYWNlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyBvblRyYWNlRW5kKHRyYWNlKSB7XG4gICAgICAgIGZvciAoY29uc3QgcHJvY2Vzc29yIG9mIHRoaXMuI3Byb2Nlc3NvcnMpIHtcbiAgICAgICAgICAgIGF3YWl0IHByb2Nlc3Nvci5vblRyYWNlRW5kKHRyYWNlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyBvblNwYW5TdGFydChzcGFuKSB7XG4gICAgICAgIGZvciAoY29uc3QgcHJvY2Vzc29yIG9mIHRoaXMuI3Byb2Nlc3NvcnMpIHtcbiAgICAgICAgICAgIGF3YWl0IHByb2Nlc3Nvci5vblNwYW5TdGFydChzcGFuKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyBvblNwYW5FbmQoc3Bhbikge1xuICAgICAgICBmb3IgKGNvbnN0IHByb2Nlc3NvciBvZiB0aGlzLiNwcm9jZXNzb3JzKSB7XG4gICAgICAgICAgICBhd2FpdCBwcm9jZXNzb3Iub25TcGFuRW5kKHNwYW4pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jIHNodXRkb3duKHRpbWVvdXQpIHtcbiAgICAgICAgZm9yIChjb25zdCBwcm9jZXNzb3Igb2YgdGhpcy4jcHJvY2Vzc29ycykge1xuICAgICAgICAgICAgYXdhaXQgcHJvY2Vzc29yLnNodXRkb3duKHRpbWVvdXQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jIGZvcmNlRmx1c2goKSB7XG4gICAgICAgIGZvciAoY29uc3QgcHJvY2Vzc29yIG9mIHRoaXMuI3Byb2Nlc3NvcnMpIHtcbiAgICAgICAgICAgIGF3YWl0IHByb2Nlc3Nvci5mb3JjZUZsdXNoKCk7XG4gICAgICAgIH1cbiAgICB9XG59XG5sZXQgX2RlZmF1bHRFeHBvcnRlciA9IG51bGw7XG5sZXQgX2RlZmF1bHRQcm9jZXNzb3IgPSBudWxsO1xuZXhwb3J0IGZ1bmN0aW9uIGRlZmF1bHRFeHBvcnRlcigpIHtcbiAgICBpZiAoIV9kZWZhdWx0RXhwb3J0ZXIpIHtcbiAgICAgICAgX2RlZmF1bHRFeHBvcnRlciA9IG5ldyBDb25zb2xlU3BhbkV4cG9ydGVyKCk7XG4gICAgfVxuICAgIHJldHVybiBfZGVmYXVsdEV4cG9ydGVyO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGRlZmF1bHRQcm9jZXNzb3IoKSB7XG4gICAgaWYgKCFfZGVmYXVsdFByb2Nlc3Nvcikge1xuICAgICAgICBfZGVmYXVsdFByb2Nlc3NvciA9IG5ldyBCYXRjaFRyYWNlUHJvY2Vzc29yKGRlZmF1bHRFeHBvcnRlcigpKTtcbiAgICB9XG4gICAgcmV0dXJuIF9kZWZhdWx0UHJvY2Vzc29yO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cHJvY2Vzc29yLm1qcy5tYXAiLCJpbXBvcnQgeyByYW5kb21VVUlEIH0gZnJvbSAnQG9wZW5haS9hZ2VudHMtY29yZS9fc2hpbXMnO1xuLyoqXG4gKiBHZW5lcmF0ZSBhbiBJU08gODYwMSB0aW1lc3RhbXAgb2YgdGhlIGN1cnJlbnQgdGltZS5cbiAqIEByZXR1cm5zIEFuIElTTyA4NjAxIHRpbWVzdGFtcC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHRpbWVJc28oKSB7XG4gICAgcmV0dXJuIG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKTtcbn1cbi8qKlxuICogR2VuZXJhdGUgYSB0cmFjZSBJRCBieSBjcmVhdGluZyBhIHJhbmRvbSBVVUlEIHY0IGFuZCByZW1vdmluZyB0aGUgZGFzaGVzLiBUaGlzIGlzIHRoZSBlcXVpdmFsZW50XG4gKiBvZiBgdXVpZDQoKS5oZXhgIGluIFB5dGhvbiBhbmQgcHJlZml4aW5nIGl0IHdpdGggYHRyYWNlX2AuXG4gKiBAcmV0dXJucyBBIHRyYWNlIElELlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2VuZXJhdGVUcmFjZUlkKCkge1xuICAgIHJldHVybiBgdHJhY2VfJHtyYW5kb21VVUlEKCkucmVwbGFjZSgvLS9nLCAnJyl9YDtcbn1cbi8qKlxuICogR2VuZXJhdGUgYSBzcGFuIElEIGJ5IGNyZWF0aW5nIGEgcmFuZG9tIFVVSUQgdjQgYW5kIHJlbW92aW5nIHRoZSBkYXNoZXMuIFRoaXMgaXMgdGhlIGVxdWl2YWxlbnRcbiAqIG9mIGB1dWlkNCgpLmhleGAgaW4gUHl0aG9uIGFuZCBwcmVmaXhpbmcgaXQgd2l0aCBgc3Bhbl9gLlxuICogQHJldHVybnMgQSBzcGFuIElELlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2VuZXJhdGVTcGFuSWQoKSB7XG4gICAgcmV0dXJuIGBzcGFuXyR7cmFuZG9tVVVJRCgpLnJlcGxhY2UoLy0vZywgJycpLnNsaWNlKDAsIDI0KX1gO1xufVxuLyoqXG4gKiBHZW5lcmF0ZSBhIGdyb3VwIElEIGJ5IGNyZWF0aW5nIGEgcmFuZG9tIFVVSUQgdjQgYW5kIHJlbW92aW5nIHRoZSBkYXNoZXMuIFRoaXMgaXMgdGhlIGVxdWl2YWxlbnRcbiAqIG9mIGB1dWlkNCgpLmhleGAgaW4gUHl0aG9uIGFuZCBwcmVmaXhpbmcgaXQgd2l0aCBgZ3JvdXBfYC5cbiAqIEByZXR1cm5zIEEgZ3JvdXAgSUQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZW5lcmF0ZUdyb3VwSWQoKSB7XG4gICAgcmV0dXJuIGBncm91cF8ke3JhbmRvbVVVSUQoKS5yZXBsYWNlKC8tL2csICcnKS5zbGljZSgwLCAyNCl9YDtcbn1cbi8qKlxuICogUmVtb3ZlIGZpZWxkcyB0aGF0IHN0YXJ0IHdpdGggYW4gdW5kZXJzY29yZSBmcm9tIGFuIG9iamVjdC5cbiAqIEBwYXJhbSBvYmogLSBUaGUgb2JqZWN0IHRvIHJlbW92ZSBwcml2YXRlIGZpZWxkcyBmcm9tLlxuICogQHJldHVybnMgQSBuZXcgb2JqZWN0IHdpdGggcHJpdmF0ZSBmaWVsZHMgcmVtb3ZlZC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJlbW92ZVByaXZhdGVGaWVsZHMob2JqKSB7XG4gICAgcmV0dXJuIE9iamVjdC5mcm9tRW50cmllcyhPYmplY3QuZW50cmllcyhvYmopLmZpbHRlcigoW2tleV0pID0+ICFrZXkuc3RhcnRzV2l0aCgnXycpKSk7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD11dGlscy5tanMubWFwIiwiaW1wb3J0IGxvZ2dlciBmcm9tIFwiLi4vbG9nZ2VyLm1qc1wiO1xuaW1wb3J0IHsgZ2VuZXJhdGVTcGFuSWQsIHJlbW92ZVByaXZhdGVGaWVsZHMsIHRpbWVJc28gfSBmcm9tIFwiLi91dGlscy5tanNcIjtcbmV4cG9ydCBjbGFzcyBTcGFuIHtcbiAgICB0eXBlID0gJ3RyYWNlLnNwYW4nO1xuICAgICNkYXRhO1xuICAgICN0cmFjZUlkO1xuICAgICNzcGFuSWQ7XG4gICAgI3BhcmVudElkO1xuICAgICNwcm9jZXNzb3I7XG4gICAgI3N0YXJ0ZWRBdDtcbiAgICAjZW5kZWRBdDtcbiAgICAjZXJyb3I7XG4gICAgI3ByZXZpb3VzU3BhbjtcbiAgICBjb25zdHJ1Y3RvcihvcHRpb25zLCBwcm9jZXNzb3IpIHtcbiAgICAgICAgdGhpcy4jdHJhY2VJZCA9IG9wdGlvbnMudHJhY2VJZDtcbiAgICAgICAgdGhpcy4jc3BhbklkID0gb3B0aW9ucy5zcGFuSWQgPz8gZ2VuZXJhdGVTcGFuSWQoKTtcbiAgICAgICAgdGhpcy4jZGF0YSA9IG9wdGlvbnMuZGF0YTtcbiAgICAgICAgdGhpcy4jcHJvY2Vzc29yID0gcHJvY2Vzc29yO1xuICAgICAgICB0aGlzLiNwYXJlbnRJZCA9IG9wdGlvbnMucGFyZW50SWQgPz8gbnVsbDtcbiAgICAgICAgdGhpcy4jZXJyb3IgPSBvcHRpb25zLmVycm9yID8/IG51bGw7XG4gICAgICAgIHRoaXMuI3N0YXJ0ZWRBdCA9IG9wdGlvbnMuc3RhcnRlZEF0ID8/IG51bGw7XG4gICAgICAgIHRoaXMuI2VuZGVkQXQgPSBvcHRpb25zLmVuZGVkQXQgPz8gbnVsbDtcbiAgICB9XG4gICAgZ2V0IHRyYWNlSWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiN0cmFjZUlkO1xuICAgIH1cbiAgICBnZXQgc3BhbkRhdGEoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiNkYXRhO1xuICAgIH1cbiAgICBnZXQgc3BhbklkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy4jc3BhbklkO1xuICAgIH1cbiAgICBnZXQgcGFyZW50SWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiNwYXJlbnRJZDtcbiAgICB9XG4gICAgZ2V0IHByZXZpb3VzU3BhbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuI3ByZXZpb3VzU3BhbjtcbiAgICB9XG4gICAgc2V0IHByZXZpb3VzU3BhbihzcGFuKSB7XG4gICAgICAgIHRoaXMuI3ByZXZpb3VzU3BhbiA9IHNwYW47XG4gICAgfVxuICAgIHN0YXJ0KCkge1xuICAgICAgICBpZiAodGhpcy4jc3RhcnRlZEF0KSB7XG4gICAgICAgICAgICBsb2dnZXIud2FybignU3BhbiBhbHJlYWR5IHN0YXJ0ZWQnKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLiNzdGFydGVkQXQgPSB0aW1lSXNvKCk7XG4gICAgICAgIHRoaXMuI3Byb2Nlc3Nvci5vblNwYW5TdGFydCh0aGlzKTtcbiAgICB9XG4gICAgZW5kKCkge1xuICAgICAgICBpZiAodGhpcy4jZW5kZWRBdCkge1xuICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKCdTcGFuIGFscmVhZHkgZmluaXNoZWQnLCB0aGlzLnNwYW5EYXRhKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLiNlbmRlZEF0ID0gdGltZUlzbygpO1xuICAgICAgICB0aGlzLiNwcm9jZXNzb3Iub25TcGFuRW5kKHRoaXMpO1xuICAgIH1cbiAgICBzZXRFcnJvcihlcnJvcikge1xuICAgICAgICB0aGlzLiNlcnJvciA9IGVycm9yO1xuICAgIH1cbiAgICBnZXQgZXJyb3IoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiNlcnJvcjtcbiAgICB9XG4gICAgZ2V0IHN0YXJ0ZWRBdCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuI3N0YXJ0ZWRBdDtcbiAgICB9XG4gICAgZ2V0IGVuZGVkQXQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiNlbmRlZEF0O1xuICAgIH1cbiAgICBjbG9uZSgpIHtcbiAgICAgICAgY29uc3Qgc3BhbiA9IG5ldyBTcGFuKHtcbiAgICAgICAgICAgIHRyYWNlSWQ6IHRoaXMudHJhY2VJZCxcbiAgICAgICAgICAgIHNwYW5JZDogdGhpcy5zcGFuSWQsXG4gICAgICAgICAgICBwYXJlbnRJZDogdGhpcy5wYXJlbnRJZCA/PyB1bmRlZmluZWQsXG4gICAgICAgICAgICBkYXRhOiB0aGlzLnNwYW5EYXRhLFxuICAgICAgICAgICAgc3RhcnRlZEF0OiB0aGlzLiNzdGFydGVkQXQgPz8gdW5kZWZpbmVkLFxuICAgICAgICAgICAgZW5kZWRBdDogdGhpcy4jZW5kZWRBdCA/PyB1bmRlZmluZWQsXG4gICAgICAgICAgICBlcnJvcjogdGhpcy4jZXJyb3IgPz8gdW5kZWZpbmVkLFxuICAgICAgICB9LCB0aGlzLiNwcm9jZXNzb3IpO1xuICAgICAgICBzcGFuLnByZXZpb3VzU3BhbiA9IHRoaXMucHJldmlvdXNTcGFuPy5jbG9uZSgpO1xuICAgICAgICByZXR1cm4gc3BhbjtcbiAgICB9XG4gICAgdG9KU09OKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgb2JqZWN0OiB0aGlzLnR5cGUsXG4gICAgICAgICAgICBpZDogdGhpcy5zcGFuSWQsXG4gICAgICAgICAgICB0cmFjZV9pZDogdGhpcy50cmFjZUlkLFxuICAgICAgICAgICAgcGFyZW50X2lkOiB0aGlzLnBhcmVudElkLFxuICAgICAgICAgICAgc3RhcnRlZF9hdDogdGhpcy5zdGFydGVkQXQsXG4gICAgICAgICAgICBlbmRlZF9hdDogdGhpcy5lbmRlZEF0LFxuICAgICAgICAgICAgc3Bhbl9kYXRhOiByZW1vdmVQcml2YXRlRmllbGRzKHRoaXMuc3BhbkRhdGEpLFxuICAgICAgICAgICAgZXJyb3I6IHRoaXMuZXJyb3IsXG4gICAgICAgIH07XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIE5vb3BTcGFuIGV4dGVuZHMgU3BhbiB7XG4gICAgY29uc3RydWN0b3IoZGF0YSwgcHJvY2Vzc29yKSB7XG4gICAgICAgIHN1cGVyKHsgdHJhY2VJZDogJ25vLW9wJywgc3BhbklkOiAnbm8tb3AnLCBkYXRhIH0sIHByb2Nlc3Nvcik7XG4gICAgfVxuICAgIHN0YXJ0KCkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGVuZCgpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBzZXRFcnJvcigpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0b0pTT04oKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXNwYW5zLm1qcy5tYXAiLCJpbXBvcnQgeyBkZWZhdWx0UHJvY2Vzc29yIH0gZnJvbSBcIi4vcHJvY2Vzc29yLm1qc1wiO1xuaW1wb3J0IHsgZ2VuZXJhdGVUcmFjZUlkIH0gZnJvbSBcIi4vdXRpbHMubWpzXCI7XG5leHBvcnQgY2xhc3MgVHJhY2Uge1xuICAgIHR5cGUgPSAndHJhY2UnO1xuICAgIHRyYWNlSWQ7XG4gICAgbmFtZTtcbiAgICBncm91cElkID0gbnVsbDtcbiAgICBtZXRhZGF0YTtcbiAgICAjcHJvY2Vzc29yO1xuICAgICNzdGFydGVkO1xuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMsIHByb2Nlc3Nvcikge1xuICAgICAgICB0aGlzLnRyYWNlSWQgPSBvcHRpb25zLnRyYWNlSWQgPz8gZ2VuZXJhdGVUcmFjZUlkKCk7XG4gICAgICAgIHRoaXMubmFtZSA9IG9wdGlvbnMubmFtZSA/PyAnQWdlbnQgd29ya2Zsb3cnO1xuICAgICAgICB0aGlzLmdyb3VwSWQgPSBvcHRpb25zLmdyb3VwSWQgPz8gbnVsbDtcbiAgICAgICAgdGhpcy5tZXRhZGF0YSA9IG9wdGlvbnMubWV0YWRhdGEgPz8ge307XG4gICAgICAgIHRoaXMuI3Byb2Nlc3NvciA9IHByb2Nlc3NvciA/PyBkZWZhdWx0UHJvY2Vzc29yKCk7XG4gICAgICAgIHRoaXMuI3N0YXJ0ZWQgPSBvcHRpb25zLnN0YXJ0ZWQgPz8gZmFsc2U7XG4gICAgfVxuICAgIGFzeW5jIHN0YXJ0KCkge1xuICAgICAgICBpZiAodGhpcy4jc3RhcnRlZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuI3N0YXJ0ZWQgPSB0cnVlO1xuICAgICAgICBhd2FpdCB0aGlzLiNwcm9jZXNzb3Iub25UcmFjZVN0YXJ0KHRoaXMpO1xuICAgIH1cbiAgICBhc3luYyBlbmQoKSB7XG4gICAgICAgIGlmICghdGhpcy4jc3RhcnRlZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuI3N0YXJ0ZWQgPSBmYWxzZTtcbiAgICAgICAgYXdhaXQgdGhpcy4jcHJvY2Vzc29yLm9uVHJhY2VFbmQodGhpcyk7XG4gICAgfVxuICAgIGNsb25lKCkge1xuICAgICAgICByZXR1cm4gbmV3IFRyYWNlKHtcbiAgICAgICAgICAgIHRyYWNlSWQ6IHRoaXMudHJhY2VJZCxcbiAgICAgICAgICAgIG5hbWU6IHRoaXMubmFtZSxcbiAgICAgICAgICAgIGdyb3VwSWQ6IHRoaXMuZ3JvdXBJZCA/PyB1bmRlZmluZWQsXG4gICAgICAgICAgICBtZXRhZGF0YTogdGhpcy5tZXRhZGF0YSxcbiAgICAgICAgICAgIHN0YXJ0ZWQ6IHRoaXMuI3N0YXJ0ZWQsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICB0b0pTT04oKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBvYmplY3Q6IHRoaXMudHlwZSxcbiAgICAgICAgICAgIGlkOiB0aGlzLnRyYWNlSWQsXG4gICAgICAgICAgICB3b3JrZmxvd19uYW1lOiB0aGlzLm5hbWUsXG4gICAgICAgICAgICBncm91cF9pZDogdGhpcy5ncm91cElkLFxuICAgICAgICAgICAgbWV0YWRhdGE6IHRoaXMubWV0YWRhdGEsXG4gICAgICAgIH07XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIE5vb3BUcmFjZSBleHRlbmRzIFRyYWNlIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoe30pO1xuICAgIH1cbiAgICBhc3luYyBzdGFydCgpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBhc3luYyBlbmQoKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdG9KU09OKCkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD10cmFjZXMubWpzLm1hcCIsImltcG9ydCB7IGdldEN1cnJlbnRTcGFuLCBnZXRDdXJyZW50VHJhY2UgfSBmcm9tIFwiLi9jb250ZXh0Lm1qc1wiO1xuaW1wb3J0IHsgdHJhY2luZyB9IGZyb20gXCIuLi9jb25maWcubWpzXCI7XG5pbXBvcnQgbG9nZ2VyIGZyb20gXCIuLi9sb2dnZXIubWpzXCI7XG5pbXBvcnQgeyBNdWx0aVRyYWNpbmdQcm9jZXNzb3IgfSBmcm9tIFwiLi9wcm9jZXNzb3IubWpzXCI7XG5pbXBvcnQgeyBOb29wU3BhbiwgU3BhbiB9IGZyb20gXCIuL3NwYW5zLm1qc1wiO1xuaW1wb3J0IHsgTm9vcFRyYWNlLCBUcmFjZSB9IGZyb20gXCIuL3RyYWNlcy5tanNcIjtcbmltcG9ydCB7IGdlbmVyYXRlVHJhY2VJZCB9IGZyb20gXCIuL3V0aWxzLm1qc1wiO1xuZXhwb3J0IGNsYXNzIFRyYWNlUHJvdmlkZXIge1xuICAgICNtdWx0aVByb2Nlc3NvcjtcbiAgICAjZGlzYWJsZWQ7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuI211bHRpUHJvY2Vzc29yID0gbmV3IE11bHRpVHJhY2luZ1Byb2Nlc3NvcigpO1xuICAgICAgICB0aGlzLiNkaXNhYmxlZCA9IHRyYWNpbmcuZGlzYWJsZWQ7XG4gICAgICAgIHRoaXMuI2FkZENsZWFudXBMaXN0ZW5lcnMoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQWRkIGEgcHJvY2Vzc29yIHRvIHRoZSBsaXN0IG9mIHByb2Nlc3NvcnMuIEVhY2ggcHJvY2Vzc29yIHdpbGwgcmVjZWl2ZSBhbGwgdHJhY2VzL3NwYW5zLlxuICAgICAqXG4gICAgICogQHBhcmFtIHByb2Nlc3NvciAtIFRoZSBwcm9jZXNzb3IgdG8gYWRkLlxuICAgICAqL1xuICAgIHJlZ2lzdGVyUHJvY2Vzc29yKHByb2Nlc3Nvcikge1xuICAgICAgICB0aGlzLiNtdWx0aVByb2Nlc3Nvci5hZGRUcmFjZVByb2Nlc3Nvcihwcm9jZXNzb3IpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXQgdGhlIGxpc3Qgb2YgcHJvY2Vzc29ycy4gVGhpcyB3aWxsIHJlcGxhY2UgYW55IGV4aXN0aW5nIHByb2Nlc3NvcnMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gcHJvY2Vzc29ycyAtIFRoZSBsaXN0IG9mIHByb2Nlc3NvcnMgdG8gc2V0LlxuICAgICAqL1xuICAgIHNldFByb2Nlc3NvcnMocHJvY2Vzc29ycykge1xuICAgICAgICB0aGlzLiNtdWx0aVByb2Nlc3Nvci5zZXRQcm9jZXNzb3JzKHByb2Nlc3NvcnMpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGN1cnJlbnQgdHJhY2UuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBUaGUgY3VycmVudCB0cmFjZS5cbiAgICAgKi9cbiAgICBnZXRDdXJyZW50VHJhY2UoKSB7XG4gICAgICAgIHJldHVybiBnZXRDdXJyZW50VHJhY2UoKTtcbiAgICB9XG4gICAgZ2V0Q3VycmVudFNwYW4oKSB7XG4gICAgICAgIHJldHVybiBnZXRDdXJyZW50U3BhbigpO1xuICAgIH1cbiAgICBzZXREaXNhYmxlZChkaXNhYmxlZCkge1xuICAgICAgICB0aGlzLiNkaXNhYmxlZCA9IGRpc2FibGVkO1xuICAgIH1cbiAgICBzdGFydEV4cG9ydExvb3AoKSB7XG4gICAgICAgIHRoaXMuI211bHRpUHJvY2Vzc29yLnN0YXJ0KCk7XG4gICAgfVxuICAgIGNyZWF0ZVRyYWNlKHRyYWNlT3B0aW9ucykge1xuICAgICAgICBpZiAodGhpcy4jZGlzYWJsZWQpIHtcbiAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZygnVHJhY2luZyBpcyBkaXNhYmxlZCwgTm90IGNyZWF0aW5nIHRyYWNlICVvJywgdHJhY2VPcHRpb25zKTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgTm9vcFRyYWNlKCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgdHJhY2VJZCA9IHRyYWNlT3B0aW9ucy50cmFjZUlkID8/IGdlbmVyYXRlVHJhY2VJZCgpO1xuICAgICAgICBjb25zdCBuYW1lID0gdHJhY2VPcHRpb25zLm5hbWUgPz8gJ0FnZW50IHdvcmtmbG93JztcbiAgICAgICAgbG9nZ2VyLmRlYnVnKCdDcmVhdGluZyB0cmFjZSAlcyB3aXRoIG5hbWUgJXMnLCB0cmFjZUlkLCBuYW1lKTtcbiAgICAgICAgcmV0dXJuIG5ldyBUcmFjZSh7IC4uLnRyYWNlT3B0aW9ucywgbmFtZSwgdHJhY2VJZCB9LCB0aGlzLiNtdWx0aVByb2Nlc3Nvcik7XG4gICAgfVxuICAgIGNyZWF0ZVNwYW4oc3Bhbk9wdGlvbnMsIHBhcmVudCkge1xuICAgICAgICBpZiAodGhpcy4jZGlzYWJsZWQgfHwgc3Bhbk9wdGlvbnMuZGlzYWJsZWQpIHtcbiAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZygnVHJhY2luZyBpcyBkaXNhYmxlZCwgTm90IGNyZWF0aW5nIHNwYW4gJW8nLCBzcGFuT3B0aW9ucyk7XG4gICAgICAgICAgICByZXR1cm4gbmV3IE5vb3BTcGFuKHNwYW5PcHRpb25zLmRhdGEsIHRoaXMuI211bHRpUHJvY2Vzc29yKTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgcGFyZW50SWQ7XG4gICAgICAgIGxldCB0cmFjZUlkO1xuICAgICAgICBpZiAoIXBhcmVudCkge1xuICAgICAgICAgICAgY29uc3QgY3VycmVudFRyYWNlID0gZ2V0Q3VycmVudFRyYWNlKCk7XG4gICAgICAgICAgICBjb25zdCBjdXJyZW50U3BhbiA9IGdldEN1cnJlbnRTcGFuKCk7XG4gICAgICAgICAgICBpZiAoIWN1cnJlbnRUcmFjZSkge1xuICAgICAgICAgICAgICAgIGxvZ2dlci5lcnJvcignTm8gYWN0aXZlIHRyYWNlLiBNYWtlIHN1cmUgdG8gc3RhcnQgYSB0cmFjZSB3aXRoIGB3aXRoVHJhY2UoKWAgZmlyc3QuIFJldHVybmluZyBOb29wU3Bhbi4nKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IE5vb3BTcGFuKHNwYW5PcHRpb25zLmRhdGEsIHRoaXMuI211bHRpUHJvY2Vzc29yKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChjdXJyZW50U3BhbiBpbnN0YW5jZW9mIE5vb3BTcGFuIHx8XG4gICAgICAgICAgICAgICAgY3VycmVudFRyYWNlIGluc3RhbmNlb2YgTm9vcFRyYWNlKSB7XG4gICAgICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKGBQYXJlbnQgJHtjdXJyZW50U3Bhbn0gb3IgJHtjdXJyZW50VHJhY2V9IGlzIG5vLW9wLCByZXR1cm5pbmcgTm9vcFNwYW5gKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IE5vb3BTcGFuKHNwYW5PcHRpb25zLmRhdGEsIHRoaXMuI211bHRpUHJvY2Vzc29yKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRyYWNlSWQgPSBjdXJyZW50VHJhY2UudHJhY2VJZDtcbiAgICAgICAgICAgIGlmIChjdXJyZW50U3Bhbikge1xuICAgICAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZygnVXNpbmcgcGFyZW50IHNwYW4gJXMnLCBjdXJyZW50U3Bhbi5zcGFuSWQpO1xuICAgICAgICAgICAgICAgIHBhcmVudElkID0gY3VycmVudFNwYW4uc3BhbklkO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKCdObyBwYXJlbnQgc3BhbiwgdXNpbmcgY3VycmVudCB0cmFjZSAlcycsIGN1cnJlbnRUcmFjZS50cmFjZUlkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChwYXJlbnQgaW5zdGFuY2VvZiBUcmFjZSkge1xuICAgICAgICAgICAgaWYgKHBhcmVudCBpbnN0YW5jZW9mIE5vb3BUcmFjZSkge1xuICAgICAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZygnUGFyZW50IHRyYWNlIGlzIG5vLW9wLCByZXR1cm5pbmcgTm9vcFNwYW4nKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IE5vb3BTcGFuKHNwYW5PcHRpb25zLmRhdGEsIHRoaXMuI211bHRpUHJvY2Vzc29yKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRyYWNlSWQgPSBwYXJlbnQudHJhY2VJZDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChwYXJlbnQgaW5zdGFuY2VvZiBTcGFuKSB7XG4gICAgICAgICAgICBpZiAocGFyZW50IGluc3RhbmNlb2YgTm9vcFNwYW4pIHtcbiAgICAgICAgICAgICAgICBsb2dnZXIuZGVidWcoJ1BhcmVudCBzcGFuIGlzIG5vLW9wLCByZXR1cm5pbmcgTm9vcFNwYW4nKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IE5vb3BTcGFuKHNwYW5PcHRpb25zLmRhdGEsIHRoaXMuI211bHRpUHJvY2Vzc29yKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHBhcmVudElkID0gcGFyZW50LnNwYW5JZDtcbiAgICAgICAgICAgIHRyYWNlSWQgPSBwYXJlbnQudHJhY2VJZDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRyYWNlSWQpIHtcbiAgICAgICAgICAgIGxvZ2dlci5lcnJvcignTm8gdHJhY2VJZCBmb3VuZC4gTWFrZSBzdXJlIHRvIHN0YXJ0IGEgdHJhY2Ugd2l0aCBgd2l0aFRyYWNlKClgIGZpcnN0LiBSZXR1cm5pbmcgTm9vcFNwYW4uJyk7XG4gICAgICAgICAgICByZXR1cm4gbmV3IE5vb3BTcGFuKHNwYW5PcHRpb25zLmRhdGEsIHRoaXMuI211bHRpUHJvY2Vzc29yKTtcbiAgICAgICAgfVxuICAgICAgICBsb2dnZXIuZGVidWcoYENyZWF0aW5nIHNwYW4gJHtKU09OLnN0cmluZ2lmeShzcGFuT3B0aW9ucy5kYXRhKX0gd2l0aCBpZCAke3NwYW5PcHRpb25zLnNwYW5JZCA/PyB0cmFjZUlkfWApO1xuICAgICAgICByZXR1cm4gbmV3IFNwYW4oe1xuICAgICAgICAgICAgLi4uc3Bhbk9wdGlvbnMsXG4gICAgICAgICAgICB0cmFjZUlkLFxuICAgICAgICAgICAgcGFyZW50SWQsXG4gICAgICAgIH0sIHRoaXMuI211bHRpUHJvY2Vzc29yKTtcbiAgICB9XG4gICAgYXN5bmMgc2h1dGRvd24odGltZW91dCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKCdTaHV0dGluZyBkb3duIHRyYWNpbmcgcHJvdmlkZXInKTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuI211bHRpUHJvY2Vzc29yLnNodXRkb3duKHRpbWVvdXQpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgbG9nZ2VyLmVycm9yKCdFcnJvciBzaHV0dGluZyBkb3duIHRyYWNpbmcgcHJvdmlkZXIgJW8nLCBlcnJvcik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqIEFkZHMgbGlzdGVuZXJzIHRvIGBwcm9jZXNzYCB0byBlbnN1cmUgYHNodXRkb3duYCBvY2N1cnMgYmVmb3JlIGV4aXQuICovXG4gICAgI2FkZENsZWFudXBMaXN0ZW5lcnMoKSB7XG4gICAgICAgIGlmICh0eXBlb2YgcHJvY2VzcyAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIHByb2Nlc3Mub24gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIC8vIGhhbmRsaW5nIE5vZGUuanMgcHJvY2VzcyB0ZXJtaW5hdGlvblxuICAgICAgICAgICAgY29uc3QgY2xlYW51cCA9IGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCB0aW1lb3V0ID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybignQ2xlYW51cCB0aW1lb3V0LCBmb3JjaW5nIGV4aXQnKTtcbiAgICAgICAgICAgICAgICAgICAgcHJvY2Vzcy5leGl0KDEpO1xuICAgICAgICAgICAgICAgIH0sIDUwMDApO1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuc2h1dGRvd24oKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZmluYWxseSB7XG4gICAgICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgLy8gSGFuZGxlIG5vcm1hbCB0ZXJtaW5hdGlvblxuICAgICAgICAgICAgcHJvY2Vzcy5vbignYmVmb3JlRXhpdCcsIGNsZWFudXApO1xuICAgICAgICAgICAgLy8gSGFuZGxlIENUUkwrQyAoU0lHSU5UKVxuICAgICAgICAgICAgcHJvY2Vzcy5vbignU0lHSU5UJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGF3YWl0IGNsZWFudXAoKTtcbiAgICAgICAgICAgICAgICBpZiAoIWhhc090aGVyTGlzdGVuZXJzRm9yU2lnbmFscygnU0lHSU5UJykpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gT25seSB3aGVuIHRoZXJlIGFyZSBubyBvdGhlciBsaXN0ZW5lcnMsIGV4aXQgdGhlIHByb2Nlc3Mgb24gdGhpcyBTREsgc2lkZVxuICAgICAgICAgICAgICAgICAgICBwcm9jZXNzLmV4aXQoMTMwKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIC8vIEhhbmRsZSB0ZXJtaW5hdGlvbiAoU0lHVEVSTSlcbiAgICAgICAgICAgIHByb2Nlc3Mub24oJ1NJR1RFUk0nLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgYXdhaXQgY2xlYW51cCgpO1xuICAgICAgICAgICAgICAgIGlmICghaGFzT3RoZXJMaXN0ZW5lcnNGb3JTaWduYWxzKCdTSUdURVJNJykpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gT25seSB3aGVuIHRoZXJlIGFyZSBubyBvdGhlciBsaXN0ZW5lcnMsIGV4aXQgdGhlIHByb2Nlc3Mgb24gdGhpcyBTREsgc2lkZVxuICAgICAgICAgICAgICAgICAgICBwcm9jZXNzLmV4aXQoMCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBwcm9jZXNzLm9uKCd1bmhhbmRsZWRSZWplY3Rpb24nLCBhc3luYyAocmVhc29uLCBwcm9taXNlKSA9PiB7XG4gICAgICAgICAgICAgICAgbG9nZ2VyLmVycm9yKCdVbmhhbmRsZWQgcmVqZWN0aW9uJywgcmVhc29uLCBwcm9taXNlKTtcbiAgICAgICAgICAgICAgICBhd2FpdCBjbGVhbnVwKCk7XG4gICAgICAgICAgICAgICAgaWYgKCFoYXNPdGhlckxpc3RlbmVyc0ZvckV2ZW50cygndW5oYW5kbGVkUmVqZWN0aW9uJykpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gT25seSB3aGVuIHRoZXJlIGFyZSBubyBvdGhlciBsaXN0ZW5lcnMsIGV4aXQgdGhlIHByb2Nlc3Mgb24gdGhpcyBTREsgc2lkZVxuICAgICAgICAgICAgICAgICAgICBwcm9jZXNzLmV4aXQoMSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXN5bmMgZm9yY2VGbHVzaCgpIHtcbiAgICAgICAgYXdhaXQgdGhpcy4jbXVsdGlQcm9jZXNzb3IuZm9yY2VGbHVzaCgpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGhhc090aGVyTGlzdGVuZXJzRm9yU2lnbmFscyhldmVudCkge1xuICAgIHJldHVybiBwcm9jZXNzLmxpc3RlbmVycyhldmVudCkubGVuZ3RoID4gMTtcbn1cbmZ1bmN0aW9uIGhhc090aGVyTGlzdGVuZXJzRm9yRXZlbnRzKGV2ZW50KSB7XG4gICAgcmV0dXJuIHByb2Nlc3MubGlzdGVuZXJzKGV2ZW50KS5sZW5ndGggPiAxO1xufVxubGV0IEdMT0JBTF9UUkFDRV9QUk9WSURFUiA9IHVuZGVmaW5lZDtcbmV4cG9ydCBmdW5jdGlvbiBnZXRHbG9iYWxUcmFjZVByb3ZpZGVyKCkge1xuICAgIGlmICghR0xPQkFMX1RSQUNFX1BST1ZJREVSKSB7XG4gICAgICAgIEdMT0JBTF9UUkFDRV9QUk9WSURFUiA9IG5ldyBUcmFjZVByb3ZpZGVyKCk7XG4gICAgfVxuICAgIHJldHVybiBHTE9CQUxfVFJBQ0VfUFJPVklERVI7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1wcm92aWRlci5tanMubWFwIiwiaW1wb3J0IHsgZ2V0R2xvYmFsVHJhY2VQcm92aWRlciB9IGZyb20gXCIuL3Byb3ZpZGVyLm1qc1wiO1xuZXhwb3J0IHsgZ2V0Q3VycmVudFNwYW4sIGdldEN1cnJlbnRUcmFjZSwgZ2V0T3JDcmVhdGVUcmFjZSwgcmVzZXRDdXJyZW50U3Bhbiwgc2V0Q3VycmVudFNwYW4sIHdpdGhUcmFjZSwgfSBmcm9tIFwiLi9jb250ZXh0Lm1qc1wiO1xuZXhwb3J0ICogZnJvbSBcIi4vY3JlYXRlU3BhbnMubWpzXCI7XG5leHBvcnQgeyBCYXRjaFRyYWNlUHJvY2Vzc29yLCBDb25zb2xlU3BhbkV4cG9ydGVyLCB9IGZyb20gXCIuL3Byb2Nlc3Nvci5tanNcIjtcbmV4cG9ydCB7IE5vb3BTcGFuLCBTcGFuIH0gZnJvbSBcIi4vc3BhbnMubWpzXCI7XG5leHBvcnQgeyBOb29wVHJhY2UsIFRyYWNlIH0gZnJvbSBcIi4vdHJhY2VzLm1qc1wiO1xuZXhwb3J0IHsgZ2VuZXJhdGVHcm91cElkLCBnZW5lcmF0ZVNwYW5JZCwgZ2VuZXJhdGVUcmFjZUlkIH0gZnJvbSBcIi4vdXRpbHMubWpzXCI7XG4vKipcbiAqIEFkZCBhIHByb2Nlc3NvciB0byB0aGUgbGlzdCBvZiBwcm9jZXNzb3JzLiBFYWNoIHByb2Nlc3NvciB3aWxsIHJlY2VpdmUgYWxsIHRyYWNlcy9zcGFucy5cbiAqXG4gKiBAcGFyYW0gcHJvY2Vzc29yIC0gVGhlIHByb2Nlc3NvciB0byBhZGQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhZGRUcmFjZVByb2Nlc3Nvcihwcm9jZXNzb3IpIHtcbiAgICBnZXRHbG9iYWxUcmFjZVByb3ZpZGVyKCkucmVnaXN0ZXJQcm9jZXNzb3IocHJvY2Vzc29yKTtcbn1cbi8qKlxuICogU2V0IHRoZSBsaXN0IG9mIHByb2Nlc3NvcnMuIFRoaXMgd2lsbCByZXBsYWNlIGFueSBleGlzdGluZyBwcm9jZXNzb3JzLlxuICpcbiAqIEBwYXJhbSBwcm9jZXNzb3JzIC0gVGhlIGxpc3Qgb2YgcHJvY2Vzc29ycyB0byBzZXQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzZXRUcmFjZVByb2Nlc3NvcnMocHJvY2Vzc29ycykge1xuICAgIGdldEdsb2JhbFRyYWNlUHJvdmlkZXIoKS5zZXRQcm9jZXNzb3JzKHByb2Nlc3NvcnMpO1xufVxuLyoqXG4gKiBTZXQgdGhlIGRpc2FibGVkIHN0YXRlIG9mIHRoZSB0cmFjaW5nIHByb3ZpZGVyLlxuICpcbiAqIEBwYXJhbSBkaXNhYmxlZCAtIFdoZXRoZXIgdG8gZGlzYWJsZSB0cmFjaW5nLlxuICovXG5leHBvcnQgZnVuY3Rpb24gc2V0VHJhY2luZ0Rpc2FibGVkKGRpc2FibGVkKSB7XG4gICAgZ2V0R2xvYmFsVHJhY2VQcm92aWRlcigpLnNldERpc2FibGVkKGRpc2FibGVkKTtcbn1cbi8qKlxuICogU3RhcnQgdGhlIHRyYWNlIGV4cG9ydCBsb29wLlxuICovXG5leHBvcnQgZnVuY3Rpb24gc3RhcnRUcmFjZUV4cG9ydExvb3AoKSB7XG4gICAgZ2V0R2xvYmFsVHJhY2VQcm92aWRlcigpLnN0YXJ0RXhwb3J0TG9vcCgpO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXgubWpzLm1hcCIsImltcG9ydCB7IGFkZFRyYWNlUHJvY2Vzc29yIH0gZnJvbSBcIi4vdHJhY2luZy9pbmRleC5tanNcIjtcbmltcG9ydCB7IGRlZmF1bHRQcm9jZXNzb3IgfSBmcm9tIFwiLi90cmFjaW5nL3Byb2Nlc3Nvci5tanNcIjtcbmV4cG9ydCB7IFJ1bnRpbWVFdmVudEVtaXR0ZXIgfSBmcm9tICdAb3BlbmFpL2FnZW50cy1jb3JlL19zaGltcyc7XG5leHBvcnQgeyBBZ2VudCwgfSBmcm9tIFwiLi9hZ2VudC5tanNcIjtcbmV4cG9ydCB7IEFnZW50c0Vycm9yLCBHdWFyZHJhaWxFeGVjdXRpb25FcnJvciwgSW5wdXRHdWFyZHJhaWxUcmlwd2lyZVRyaWdnZXJlZCwgTWF4VHVybnNFeGNlZWRlZEVycm9yLCBNb2RlbEJlaGF2aW9yRXJyb3IsIE91dHB1dEd1YXJkcmFpbFRyaXB3aXJlVHJpZ2dlcmVkLCBUb29sQ2FsbEVycm9yLCBVc2VyRXJyb3IsIFN5c3RlbUVycm9yLCB9IGZyb20gXCIuL2Vycm9ycy5tanNcIjtcbmV4cG9ydCB7IFJ1bkFnZW50VXBkYXRlZFN0cmVhbUV2ZW50LCBSdW5SYXdNb2RlbFN0cmVhbUV2ZW50LCBSdW5JdGVtU3RyZWFtRXZlbnQsIH0gZnJvbSBcIi4vZXZlbnRzLm1qc1wiO1xuZXhwb3J0IHsgZGVmaW5lT3V0cHV0R3VhcmRyYWlsLCB9IGZyb20gXCIuL2d1YXJkcmFpbC5tanNcIjtcbmV4cG9ydCB7IGdldEhhbmRvZmYsIGdldFRyYW5zZmVyTWVzc2FnZSwgSGFuZG9mZiwgaGFuZG9mZiwgfSBmcm9tIFwiLi9oYW5kb2ZmLm1qc1wiO1xuZXhwb3J0IHsgYXNzaXN0YW50LCBzeXN0ZW0sIHVzZXIgfSBmcm9tIFwiLi9oZWxwZXJzL21lc3NhZ2UubWpzXCI7XG5leHBvcnQgeyBleHRyYWN0QWxsVGV4dE91dHB1dCwgUnVuSGFuZG9mZkNhbGxJdGVtLCBSdW5IYW5kb2ZmT3V0cHV0SXRlbSwgUnVuTWVzc2FnZU91dHB1dEl0ZW0sIFJ1blJlYXNvbmluZ0l0ZW0sIFJ1blRvb2xBcHByb3ZhbEl0ZW0sIFJ1blRvb2xDYWxsSXRlbSwgUnVuVG9vbENhbGxPdXRwdXRJdGVtLCB9IGZyb20gXCIuL2l0ZW1zLm1qc1wiO1xuZXhwb3J0IHsgQWdlbnRIb29rcyB9IGZyb20gXCIuL2xpZmVjeWNsZS5tanNcIjtcbmV4cG9ydCB7IGdldExvZ2dlciB9IGZyb20gXCIuL2xvZ2dlci5tanNcIjtcbmV4cG9ydCB7IGFwcGx5RGlmZiB9IGZyb20gXCIuL3V0aWxzL2FwcGx5RGlmZi5tanNcIjtcbmV4cG9ydCB7IGdldEFsbE1jcFRvb2xzLCBpbnZhbGlkYXRlU2VydmVyVG9vbHNDYWNoZSwgbWNwVG9GdW5jdGlvblRvb2wsIE1DUFNlcnZlclN0ZGlvLCBNQ1BTZXJ2ZXJTdHJlYW1hYmxlSHR0cCwgTUNQU2VydmVyU1NFLCB9IGZyb20gXCIuL21jcC5tanNcIjtcbmV4cG9ydCB7IGNyZWF0ZU1DUFRvb2xTdGF0aWNGaWx0ZXIsIH0gZnJvbSBcIi4vbWNwVXRpbC5tanNcIjtcbmV4cG9ydCB7IE9QRU5BSV9ERUZBVUxUX01PREVMX0VOVl9WQVJJQUJMRV9OQU1FLCBncHQ1UmVhc29uaW5nU2V0dGluZ3NSZXF1aXJlZCwgZ2V0RGVmYXVsdE1vZGVsLCBnZXREZWZhdWx0TW9kZWxTZXR0aW5ncywgaXNHcHQ1RGVmYXVsdCwgfSBmcm9tIFwiLi9kZWZhdWx0TW9kZWwubWpzXCI7XG5leHBvcnQgeyBzZXREZWZhdWx0TW9kZWxQcm92aWRlciB9IGZyb20gXCIuL3Byb3ZpZGVycy5tanNcIjtcbmV4cG9ydCB7IFJ1blJlc3VsdCwgU3RyZWFtZWRSdW5SZXN1bHQgfSBmcm9tIFwiLi9yZXN1bHQubWpzXCI7XG5leHBvcnQgeyBydW4sIFJ1bm5lciwgfSBmcm9tIFwiLi9ydW4ubWpzXCI7XG5leHBvcnQgeyBSdW5Db250ZXh0IH0gZnJvbSBcIi4vcnVuQ29udGV4dC5tanNcIjtcbmV4cG9ydCB7IFJ1blN0YXRlIH0gZnJvbSBcIi4vcnVuU3RhdGUubWpzXCI7XG5leHBvcnQgeyBjb21wdXRlclRvb2wsIHNoZWxsVG9vbCwgYXBwbHlQYXRjaFRvb2wsIGhvc3RlZE1jcFRvb2wsIHRvb2wsIH0gZnJvbSBcIi4vdG9vbC5tanNcIjtcbmV4cG9ydCAqIGZyb20gXCIuL3RyYWNpbmcvaW5kZXgubWpzXCI7XG5leHBvcnQgeyBnZXRHbG9iYWxUcmFjZVByb3ZpZGVyLCBUcmFjZVByb3ZpZGVyIH0gZnJvbSBcIi4vdHJhY2luZy9wcm92aWRlci5tanNcIjtcbmV4cG9ydCB7IFJlcXVlc3RVc2FnZSwgVXNhZ2UgfSBmcm9tIFwiLi91c2FnZS5tanNcIjtcbmV4cG9ydCB7IGlzT3BlbkFJUmVzcG9uc2VzQ29tcGFjdGlvbkF3YXJlU2Vzc2lvbiB9IGZyb20gXCIuL21lbW9yeS9zZXNzaW9uLm1qc1wiO1xuZXhwb3J0IHsgTWVtb3J5U2Vzc2lvbiB9IGZyb20gXCIuL21lbW9yeS9tZW1vcnlTZXNzaW9uLm1qc1wiO1xuZXhwb3J0ICogYXMgcHJvdG9jb2wgZnJvbSBcIi4vdHlwZXMvcHJvdG9jb2wubWpzXCI7XG4vKipcbiAqIEFkZCB0aGUgZGVmYXVsdCBwcm9jZXNzb3IsIHdoaWNoIGV4cG9ydHMgdHJhY2VzIGFuZCBzcGFucyB0byB0aGUgYmFja2VuZCBpbiBiYXRjaGVzLiBZb3UgY2FuXG4gKiBjaGFuZ2UgdGhlIGRlZmF1bHQgYmVoYXZpb3IgYnkgZWl0aGVyOlxuICogMS4gY2FsbGluZyBhZGRUcmFjZVByb2Nlc3Nvciwgd2hpY2ggYWRkcyBhZGRpdGlvbmFsIHByb2Nlc3NvcnMsIG9yXG4gKiAyLiBjYWxsaW5nIHNldFRyYWNlUHJvY2Vzc29ycywgd2hpY2ggc2V0cyB0aGUgcHJvY2Vzc29ycyBhbmQgZGlzY2FyZHMgdGhlIGRlZmF1bHQgb25lXG4gKi9cbmFkZFRyYWNlUHJvY2Vzc29yKGRlZmF1bHRQcm9jZXNzb3IoKSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5tanMubWFwIiwiaW1wb3J0IE1FVEFEQVRBIGZyb20gXCIuL21ldGFkYXRhLm1qc1wiO1xuaW1wb3J0IHsgUnVuVG9vbEFwcHJvdmFsSXRlbSB9IGZyb20gJ0BvcGVuYWkvYWdlbnRzLWNvcmUnO1xuLyoqXG4gKiBDb252ZXJ0cyBhIGJhc2U2NCBzdHJpbmcgdG8gYW4gQXJyYXlCdWZmZXJcbiAqIEBwYXJhbSB7c3RyaW5nfSBiYXNlNjRcbiAqIEByZXR1cm5zIHtBcnJheUJ1ZmZlcn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGJhc2U2NFRvQXJyYXlCdWZmZXIoYmFzZTY0KSB7XG4gICAgY29uc3QgYmluYXJ5U3RyaW5nID0gYXRvYihiYXNlNjQpO1xuICAgIGNvbnN0IGxlbiA9IGJpbmFyeVN0cmluZy5sZW5ndGg7XG4gICAgY29uc3QgYnl0ZXMgPSBuZXcgVWludDhBcnJheShsZW4pO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgYnl0ZXNbaV0gPSBiaW5hcnlTdHJpbmcuY2hhckNvZGVBdChpKTtcbiAgICB9XG4gICAgcmV0dXJuIGJ5dGVzLmJ1ZmZlcjtcbn1cbi8qKlxuICogQ29udmVydHMgYW4gQXJyYXlCdWZmZXIgdG8gYSBiYXNlNjQgc3RyaW5nXG4gKiBAcGFyYW0ge0FycmF5QnVmZmVyfSBhcnJheUJ1ZmZlclxuICogQHJldHVybnMge3N0cmluZ31cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFycmF5QnVmZmVyVG9CYXNlNjQoYXJyYXlCdWZmZXIpIHtcbiAgICBjb25zdCBiaW5hcnlTdHJpbmcgPSBTdHJpbmcuZnJvbUNoYXJDb2RlKC4uLm5ldyBVaW50OEFycmF5KGFycmF5QnVmZmVyKSk7XG4gICAgcmV0dXJuIGJ0b2EoYmluYXJ5U3RyaW5nKTtcbn1cbi8qKlxuICogR2V0IHRoZSBsYXN0IHRleHQgZnJvbSBhbiBhdWRpbyBvdXRwdXQgbWVzc2FnZVxuICogQHBhcmFtIGl0ZW1cbiAqIEByZXR1cm5zXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRMYXN0VGV4dEZyb21BdWRpb091dHB1dE1lc3NhZ2UoaXRlbSkge1xuICAgIGlmICh0eXBlb2YgaXRlbSA9PT0gJ3VuZGVmaW5lZCcgfHxcbiAgICAgICAgaXRlbSA9PT0gbnVsbCB8fFxuICAgICAgICB0eXBlb2YgaXRlbSAhPT0gJ29iamVjdCcgfHxcbiAgICAgICAgISgndHlwZScgaW4gaXRlbSkgfHxcbiAgICAgICAgdHlwZW9mIGl0ZW0udHlwZSAhPT0gJ3N0cmluZycgfHxcbiAgICAgICAgIWl0ZW0udHlwZSkge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgICBpZiAoaXRlbS50eXBlICE9PSAnbWVzc2FnZScpIHtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG4gICAgaWYgKCEoJ2NvbnRlbnQnIGluIGl0ZW0pIHx8XG4gICAgICAgICFBcnJheS5pc0FycmF5KGl0ZW0uY29udGVudCkgfHxcbiAgICAgICAgaXRlbS5jb250ZW50Lmxlbmd0aCA8IDEpIHtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG4gICAgY29uc3QgbGFzdENvbnRlbnRJdGVtID0gaXRlbS5jb250ZW50W2l0ZW0uY29udGVudC5sZW5ndGggLSAxXTtcbiAgICBpZiAoISgndHlwZScgaW4gbGFzdENvbnRlbnRJdGVtKSB8fFxuICAgICAgICB0eXBlb2YgbGFzdENvbnRlbnRJdGVtLnR5cGUgIT09ICdzdHJpbmcnKSB7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGlmIChsYXN0Q29udGVudEl0ZW0udHlwZSA9PT0gJ291dHB1dF90ZXh0Jykge1xuICAgICAgICByZXR1cm4gdHlwZW9mIGxhc3RDb250ZW50SXRlbS50ZXh0ID09PSAnc3RyaW5nJ1xuICAgICAgICAgICAgPyBsYXN0Q29udGVudEl0ZW0udGV4dFxuICAgICAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGlmIChsYXN0Q29udGVudEl0ZW0udHlwZSA9PT0gJ291dHB1dF9hdWRpbycpIHtcbiAgICAgICAgcmV0dXJuIHR5cGVvZiBsYXN0Q29udGVudEl0ZW0udHJhbnNjcmlwdCA9PT0gJ3N0cmluZydcbiAgICAgICAgICAgID8gbGFzdENvbnRlbnRJdGVtLnRyYW5zY3JpcHRcbiAgICAgICAgICAgIDogdW5kZWZpbmVkO1xuICAgIH1cbiAgICByZXR1cm4gdW5kZWZpbmVkO1xufVxuLyoqXG4gKiBDb21wYXJlIHR3byBjb252ZXJzYXRpb24gaGlzdG9yaWVzIHRvIGRldGVybWluZSB0aGUgcmVtb3ZhbHMsIGFkZGl0aW9ucywgYW5kIHVwZGF0ZXMuXG4gKiBAcGFyYW0gb2xkSGlzdG9yeSAtIFRoZSBvbGQgaGlzdG9yeS5cbiAqIEBwYXJhbSBuZXdIaXN0b3J5IC0gVGhlIG5ldyBoaXN0b3J5LlxuICogQHJldHVybnMgQSBkaWZmIG9mIHRoZSB0d28gaGlzdG9yaWVzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZGlmZlJlYWx0aW1lSGlzdG9yeShvbGRIaXN0b3J5LCBuZXdIaXN0b3J5KSB7XG4gICAgY29uc3QgcmVtb3ZhbHMgPSBvbGRIaXN0b3J5LmZpbHRlcigoaXRlbSkgPT4gIW5ld0hpc3Rvcnkuc29tZSgobmV3SXRlbSkgPT4gbmV3SXRlbS5pdGVtSWQgPT09IGl0ZW0uaXRlbUlkKSk7XG4gICAgY29uc3QgYWRkaXRpb25zID0gbmV3SGlzdG9yeS5maWx0ZXIoKGl0ZW0pID0+ICFvbGRIaXN0b3J5LnNvbWUoKG9sZEl0ZW0pID0+IG9sZEl0ZW0uaXRlbUlkID09PSBpdGVtLml0ZW1JZCkpO1xuICAgIGNvbnN0IHVwZGF0ZXMgPSBuZXdIaXN0b3J5LmZpbHRlcigoaXRlbSkgPT4gb2xkSGlzdG9yeS5zb21lKChvbGRJdGVtKSA9PiBvbGRJdGVtLml0ZW1JZCA9PT0gaXRlbS5pdGVtSWQgJiZcbiAgICAgICAgSlNPTi5zdHJpbmdpZnkob2xkSXRlbSkgIT09IEpTT04uc3RyaW5naWZ5KGl0ZW0pKSk7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgcmVtb3ZhbHMsXG4gICAgICAgIGFkZGl0aW9ucyxcbiAgICAgICAgdXBkYXRlcyxcbiAgICB9O1xufVxuLyoqXG4gKiBDaGVjayBpZiB0aGUgYnJvd3NlciBzdXBwb3J0cyBXZWJSVEMuXG4gKiBAcmV0dXJucyBUcnVlIGlmIFdlYlJUQyBpcyBzdXBwb3J0ZWQsIGZhbHNlIG90aGVyd2lzZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGhhc1dlYlJUQ1N1cHBvcnQoKSB7XG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgcmV0dXJuIHR5cGVvZiB3aW5kb3dbJ1JUQ1BlZXJDb25uZWN0aW9uJ10gIT09ICd1bmRlZmluZWQnO1xufVxuLyoqXG4gKiBSZW1vdmVzIHRoZSBhdWRpbyBkYXRhIGZyb20gYWxsIGNvbnRlbnQgaW4gYSBtZXNzYWdlIGJ5IHNldHRpbmcgaXQgdG8gbnVsbC5cbiAqIEBwYXJhbSBpdGVtXG4gKiBAcmV0dXJuc1xuICovXG5leHBvcnQgZnVuY3Rpb24gcmVtb3ZlQXVkaW9Gcm9tQ29udGVudChpdGVtKSB7XG4gICAgaWYgKGl0ZW0ucm9sZSA9PT0gJ3N5c3RlbScpIHtcbiAgICAgICAgcmV0dXJuIGl0ZW07XG4gICAgfVxuICAgIGlmIChpdGVtLnJvbGUgPT09ICdhc3Npc3RhbnQnKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAuLi5pdGVtLFxuICAgICAgICAgICAgY29udGVudDogaXRlbS5jb250ZW50Lm1hcCgoZW50cnkpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoZW50cnkudHlwZSA9PT0gJ291dHB1dF9hdWRpbycpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLmVudHJ5LFxuICAgICAgICAgICAgICAgICAgICAgICAgYXVkaW86IG51bGwsXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBlbnRyeTtcbiAgICAgICAgICAgIH0pLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBpZiAoaXRlbS5yb2xlID09PSAndXNlcicpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIC4uLml0ZW0sXG4gICAgICAgICAgICBjb250ZW50OiBpdGVtLmNvbnRlbnQubWFwKChlbnRyeSkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChlbnRyeS50eXBlID09PSAnaW5wdXRfYXVkaW8nKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAuLi5lbnRyeSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGF1ZGlvOiBudWxsLFxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gZW50cnk7XG4gICAgICAgICAgICB9KSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIGl0ZW07XG59XG4vLyBSZWFsdGltZSBjYW4gcmVzZW5kIHRydW5jYXRlZCBhc3Npc3RhbnQgaXRlbXMgd2l0aG91dCB0cmFuc2NyaXB0cyBhZnRlciBhblxuLy8gaW50ZXJydXB0L3JldHJpZXZlIGN5Y2xlLiBUaGlzIGhlbHBlciBtZXJnZXMgdGhvc2UgdXBkYXRlcyB3aXRoIHRoZSBsYXRlc3Rcbi8vIGtub3duIHRyYW5zY3JpcHQgc28gVUlzIHJldGFpbiB0aGUgcG9ydGlvbiBvZiB0aGUgbWVzc2FnZSB0aGUgdXNlciBhbHJlYWR5XG4vLyBoZWFyZC5cbmZ1bmN0aW9uIHByZXNlcnZlQXNzaXN0YW50QXVkaW9UcmFuc2NyaXB0cyhleGlzdGluZywgaW5jb21pbmcpIHtcbiAgICBpZiAoZXhpc3Rpbmcucm9sZSAhPT0gJ2Fzc2lzdGFudCcgfHwgaW5jb21pbmcucm9sZSAhPT0gJ2Fzc2lzdGFudCcpIHtcbiAgICAgICAgcmV0dXJuIGluY29taW5nO1xuICAgIH1cbiAgICBjb25zdCBtZXJnZWRDb250ZW50ID0gaW5jb21pbmcuY29udGVudC5tYXAoKGVudHJ5LCBpbmRleCkgPT4ge1xuICAgICAgICBpZiAoZW50cnkudHlwZSAhPT0gJ291dHB1dF9hdWRpbycpIHtcbiAgICAgICAgICAgIHJldHVybiBlbnRyeTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB0cmFuc2NyaXB0TWlzc2luZyA9IHR5cGVvZiBlbnRyeS50cmFuc2NyaXB0ICE9PSAnc3RyaW5nJyB8fCBlbnRyeS50cmFuc2NyaXB0Lmxlbmd0aCA9PT0gMDtcbiAgICAgICAgaWYgKCF0cmFuc2NyaXB0TWlzc2luZykge1xuICAgICAgICAgICAgcmV0dXJuIGVudHJ5O1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHByZXZpb3VzRW50cnkgPSBleGlzdGluZy5jb250ZW50W2luZGV4XTtcbiAgICAgICAgaWYgKHByZXZpb3VzRW50cnkgJiZcbiAgICAgICAgICAgIHByZXZpb3VzRW50cnkudHlwZSA9PT0gJ291dHB1dF9hdWRpbycgJiZcbiAgICAgICAgICAgIHR5cGVvZiBwcmV2aW91c0VudHJ5LnRyYW5zY3JpcHQgPT09ICdzdHJpbmcnICYmXG4gICAgICAgICAgICBwcmV2aW91c0VudHJ5LnRyYW5zY3JpcHQubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAuLi5lbnRyeSxcbiAgICAgICAgICAgICAgICB0cmFuc2NyaXB0OiBwcmV2aW91c0VudHJ5LnRyYW5zY3JpcHQsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBlbnRyeTtcbiAgICB9KTtcbiAgICByZXR1cm4ge1xuICAgICAgICAuLi5pbmNvbWluZyxcbiAgICAgICAgY29udGVudDogbWVyZ2VkQ29udGVudCxcbiAgICB9O1xufVxuLyoqXG4gKiBVcGRhdGVzIHRoZSByZWFsdGltZSBoaXN0b3J5IGFycmF5IGJhc2VkIG9uIHRoZSBpbmNvbWluZyBldmVudCBhbmQgb3B0aW9ucy5cbiAqIEBwYXJhbSBoaXN0b3J5IC0gVGhlIGN1cnJlbnQgaGlzdG9yeSBhcnJheS5cbiAqIEBwYXJhbSBldmVudCAtIFRoZSBldmVudCB0byBwcm9jZXNzIChSZWFsdGltZUl0ZW0pLlxuICogQHBhcmFtIHNob3VsZEluY2x1ZGVBdWRpb0RhdGEgLSBXaGV0aGVyIHRvIGluY2x1ZGUgYXVkaW8gZGF0YSBpbiBtZXNzYWdlIGl0ZW1zLlxuICogQHJldHVybnMgVGhlIHVwZGF0ZWQgaGlzdG9yeSBhcnJheS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHVwZGF0ZVJlYWx0aW1lSGlzdG9yeShoaXN0b3J5LCBldmVudCwgc2hvdWxkSW5jbHVkZUF1ZGlvRGF0YSkge1xuICAgIC8vIE1lcmdlIHRyYW5zY3JpcHQgaW50byBwbGFjZWhvbGRlciBpbnB1dF9hdWRpbyBtZXNzYWdlXG4gICAgaWYgKGV2ZW50LnR5cGUgPT09ICdjb252ZXJzYXRpb24uaXRlbS5pbnB1dF9hdWRpb190cmFuc2NyaXB0aW9uLmNvbXBsZXRlZCcpIHtcbiAgICAgICAgcmV0dXJuIGhpc3RvcnkubWFwKChpdGVtKSA9PiB7XG4gICAgICAgICAgICBpZiAoaXRlbS5pdGVtSWQgPT09IGV2ZW50Lml0ZW1faWQgJiZcbiAgICAgICAgICAgICAgICBpdGVtLnR5cGUgPT09ICdtZXNzYWdlJyAmJlxuICAgICAgICAgICAgICAgICdyb2xlJyBpbiBpdGVtICYmXG4gICAgICAgICAgICAgICAgaXRlbS5yb2xlID09PSAndXNlcicpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB1cGRhdGVkQ29udGVudCA9IGl0ZW0uY29udGVudC5tYXAoKGVudHJ5KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChlbnRyeS50eXBlID09PSAnaW5wdXRfYXVkaW8nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmVudHJ5LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zY3JpcHQ6IGV2ZW50LnRyYW5zY3JpcHQsXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBlbnRyeTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAuLi5pdGVtLFxuICAgICAgICAgICAgICAgICAgICBjb250ZW50OiB1cGRhdGVkQ29udGVudCxcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiAnY29tcGxldGVkJyxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGl0ZW07XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBjb25zdCBuZXdFdmVudCA9ICFzaG91bGRJbmNsdWRlQXVkaW9EYXRhICYmIGV2ZW50LnR5cGUgPT09ICdtZXNzYWdlJ1xuICAgICAgICA/IHJlbW92ZUF1ZGlvRnJvbUNvbnRlbnQoZXZlbnQpXG4gICAgICAgIDogZXZlbnQ7XG4gICAgY29uc3QgZXhpc3RpbmdJbmRleCA9IGhpc3RvcnkuZmluZEluZGV4KChpdGVtKSA9PiBpdGVtLml0ZW1JZCA9PT0gZXZlbnQuaXRlbUlkKTtcbiAgICBpZiAoZXhpc3RpbmdJbmRleCAhPT0gLTEpIHtcbiAgICAgICAgY29uc3QgZXhpc3RpbmdJdGVtID0gaGlzdG9yeVtleGlzdGluZ0luZGV4XTtcbiAgICAgICAgY29uc3QgbWVyZ2VkRXZlbnQgPSBuZXdFdmVudC50eXBlID09PSAnbWVzc2FnZScgJiYgZXhpc3RpbmdJdGVtLnR5cGUgPT09ICdtZXNzYWdlJ1xuICAgICAgICAgICAgPyBwcmVzZXJ2ZUFzc2lzdGFudEF1ZGlvVHJhbnNjcmlwdHMoZXhpc3RpbmdJdGVtLCBuZXdFdmVudClcbiAgICAgICAgICAgIDogbmV3RXZlbnQ7XG4gICAgICAgIC8vIFVwZGF0ZSBleGlzdGluZyBpdGVtXG4gICAgICAgIHJldHVybiBoaXN0b3J5Lm1hcCgoaXRlbSwgaWR4KSA9PiB7XG4gICAgICAgICAgICBpZiAoaWR4ID09PSBleGlzdGluZ0luZGV4KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG1lcmdlZEV2ZW50O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFzaG91bGRJbmNsdWRlQXVkaW9EYXRhICYmIGl0ZW0udHlwZSA9PT0gJ21lc3NhZ2UnKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlbW92ZUF1ZGlvRnJvbUNvbnRlbnQoaXRlbSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gaXRlbTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKGV2ZW50LnByZXZpb3VzSXRlbUlkKSB7XG4gICAgICAgIC8vIEluc2VydCBhZnRlciBwcmV2aW91c0l0ZW1JZCBpZiBmb3VuZCwgZWxzZSBhdCBlbmRcbiAgICAgICAgY29uc3QgcHJldkluZGV4ID0gaGlzdG9yeS5maW5kSW5kZXgoKGl0ZW0pID0+IGl0ZW0uaXRlbUlkID09PSBldmVudC5wcmV2aW91c0l0ZW1JZCk7XG4gICAgICAgIGlmIChwcmV2SW5kZXggIT09IC0xKSB7XG4gICAgICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgICAgIC4uLmhpc3Rvcnkuc2xpY2UoMCwgcHJldkluZGV4ICsgMSksXG4gICAgICAgICAgICAgICAgbmV3RXZlbnQsXG4gICAgICAgICAgICAgICAgLi4uaGlzdG9yeS5zbGljZShwcmV2SW5kZXggKyAxKSxcbiAgICAgICAgICAgIF07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gWy4uLmhpc3RvcnksIG5ld0V2ZW50XTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIFsuLi5oaXN0b3J5LCBuZXdFdmVudF07XG4gICAgfVxufVxuLyoqXG4gKiBUaGUgaGVhZGVycyB0byB1c2UgZm9yIHRoZSBSZWFsdGltZSBBUEkuXG4gKi9cbmV4cG9ydCBjb25zdCBIRUFERVJTID0ge1xuICAgICdVc2VyLUFnZW50JzogYEFnZW50cy9KYXZhU2NyaXB0ICR7TUVUQURBVEEudmVyc2lvbn1gLFxuICAgICdYLU9wZW5BSS1BZ2VudHMtU0RLJzogYG9wZW5haS1hZ2VudHMtc2RrLiR7TUVUQURBVEEudmVyc2lvbn1gLFxufTtcbi8qKlxuICogQnJvd3NlciB3ZWJzb2NrZXQgaGVhZGVyXG4gKi9cbmV4cG9ydCBjb25zdCBXRUJTT0NLRVRfTUVUQSA9IGBvcGVuYWktYWdlbnRzLXNkay4ke01FVEFEQVRBLnZlcnNpb259YDtcbmV4cG9ydCBmdW5jdGlvbiByZWFsdGltZUFwcHJvdmFsSXRlbVRvQXBwcm92YWxJdGVtKGFnZW50LCBpdGVtKSB7XG4gICAgY29uc3QgeyBuYW1lLCBhcmd1bWVudHM6IGFyZ3MsIC4uLnJlc3QgfSA9IGl0ZW07XG4gICAgcmV0dXJuIG5ldyBSdW5Ub29sQXBwcm92YWxJdGVtKHtcbiAgICAgICAgdHlwZTogJ2hvc3RlZF90b29sX2NhbGwnLFxuICAgICAgICBuYW1lLFxuICAgICAgICBhcmd1bWVudHM6IEpTT04uc3RyaW5naWZ5KGFyZ3MpLFxuICAgICAgICBzdGF0dXM6ICdpbl9wcm9ncmVzcycsXG4gICAgICAgIHByb3ZpZGVyRGF0YToge1xuICAgICAgICAgICAgLi4ucmVzdCxcbiAgICAgICAgfSxcbiAgICB9LCBhZ2VudCk7XG59XG5leHBvcnQgZnVuY3Rpb24gYXBwcm92YWxJdGVtVG9SZWFsdGltZUFwcHJvdmFsSXRlbShpdGVtKSB7XG4gICAgaWYgKGl0ZW0ucmF3SXRlbS50eXBlICE9PSAnZnVuY3Rpb25fY2FsbCcgJiZcbiAgICAgICAgaXRlbS5yYXdJdGVtLnR5cGUgIT09ICdob3N0ZWRfdG9vbF9jYWxsJykge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgYXBwcm92YWwgaXRlbSB0eXBlIGZvciBSZWFsdGltZSBNQ1AgYXBwcm92YWwgcmVxdWVzdCcpO1xuICAgIH1cbiAgICBjb25zdCB7IG5hbWUsIGFyZ3VtZW50czogYXJncywgcHJvdmlkZXJEYXRhIH0gPSBpdGVtLnJhd0l0ZW07XG4gICAgY29uc3QgeyBpdGVtSWQsIHNlcnZlckxhYmVsLCAuLi5yZXN0IH0gPSBwcm92aWRlckRhdGEgPz8ge307XG4gICAgaWYgKCFpdGVtSWQgfHwgIXNlcnZlckxhYmVsKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBhcHByb3ZhbCBpdGVtIGZvciBSZWFsdGltZSBNQ1AgYXBwcm92YWwgcmVxdWVzdCcpO1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgICB0eXBlOiAnbWNwX2FwcHJvdmFsX3JlcXVlc3QnLFxuICAgICAgICBpdGVtSWQsXG4gICAgICAgIHNlcnZlckxhYmVsLFxuICAgICAgICAuLi5yZXN0LFxuICAgICAgICBuYW1lLFxuICAgICAgICBhcmd1bWVudHM6IGFyZ3MgPyBKU09OLnBhcnNlKGFyZ3MpIDoge30sXG4gICAgICAgIGFwcHJvdmVkOiBudWxsLFxuICAgIH07XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD11dGlscy5tanMubWFwIiwiaW1wb3J0IHsgQWdlbnQsIH0gZnJvbSAnQG9wZW5haS9hZ2VudHMtY29yZSc7XG4vKipcbiAqIEEgc3BlY2lhbGl6ZWQgYWdlbnQgaW5zdGFuY2UgdGhhdCBpcyBtZWFudCB0byBiZSB1c2VkIHdpdGhpbiBhIGBSZWFsdGltZVNlc3Npb25gIHRvIGJ1aWxkXG4gKiB2b2ljZSBhZ2VudHMuIER1ZSB0byB0aGUgbmF0dXJlIG9mIHRoaXMgYWdlbnQsIHNvbWUgY29uZmlndXJhdGlvbiBvcHRpb25zIGFyZSBub3Qgc3VwcG9ydGVkXG4gKiB0aGF0IGFyZSBzdXBwb3J0ZWQgYnkgcmVndWxhciBgQWdlbnRgIGluc3RhbmNlcy4gRm9yIGV4YW1wbGU6XG4gKiAtIGBtb2RlbGAgY2hvaWNlIGlzIG5vdCBzdXBwb3J0ZWQgYXMgYWxsIFJlYWx0aW1lQWdlbnRzIHdpbGwgYmUgaGFuZGxlZCBieSB0aGUgc2FtZSBtb2RlbCB3aXRoaW5cbiAqICAgYSBgUmVhbHRpbWVTZXNzaW9uYFxuICogLSBgbW9kZWxTZXR0aW5nc2AgaXMgbm90IHN1cHBvcnRlZCBhcyBhbGwgUmVhbHRpbWVBZ2VudHMgd2lsbCBiZSBoYW5kbGVkIGJ5IHRoZSBzYW1lIG1vZGVsIHdpdGhpblxuICogICBhIGBSZWFsdGltZVNlc3Npb25gXG4gKiAtIGBvdXRwdXRUeXBlYCBpcyBub3Qgc3VwcG9ydGVkIGFzIFJlYWx0aW1lQWdlbnRzIGRvIG5vdCBzdXBwb3J0IHN0cnVjdHVyZWQgb3V0cHV0c1xuICogLSBgdG9vbFVzZUJlaGF2aW9yYCBpcyBub3Qgc3VwcG9ydGVkIGFzIGFsbCBSZWFsdGltZUFnZW50cyB3aWxsIGJlIGhhbmRsZWQgYnkgdGhlIHNhbWUgbW9kZWwgd2l0aGluXG4gKiAgIGEgYFJlYWx0aW1lU2Vzc2lvbmBcbiAqIC0gYHZvaWNlYCBjYW4gYmUgY29uZmlndXJlZCBvbiBhbiBgQWdlbnRgIGxldmVsIGhvd2V2ZXIgaXQgY2Fubm90IGJlIGNoYW5nZWQgYWZ0ZXIgdGhlIGZpcnN0XG4gKiAgICBhZ2VudCB3aXRoaW4gYSBgUmVhbHRpbWVTZXNzaW9uYCBzcG9rZVxuICpcbiAqIEBleGFtcGxlXG4gKiBgYGB0c1xuICogY29uc3QgYWdlbnQgPSBuZXcgUmVhbHRpbWVBZ2VudCh7XG4gKiAgIG5hbWU6ICdteS1hZ2VudCcsXG4gKiAgIGluc3RydWN0aW9uczogJ1lvdSBhcmUgYSBoZWxwZnVsIGFzc2lzdGFudCB0aGF0IGNhbiBhbnN3ZXIgcXVlc3Rpb25zIGFuZCBoZWxwIHdpdGggdGFza3MuJyxcbiAqIH0pXG4gKlxuICogY29uc3Qgc2Vzc2lvbiA9IG5ldyBSZWFsdGltZVNlc3Npb24oYWdlbnQpO1xuICogYGBgXG4gKi9cbmV4cG9ydCBjbGFzcyBSZWFsdGltZUFnZW50IGV4dGVuZHMgQWdlbnQge1xuICAgIC8qKlxuICAgICAqIFRoZSB2b2ljZSBpbnRlbmRlZCB0byBiZSB1c2VkIGJ5IHRoZSBhZ2VudC4gSWYgYW5vdGhlciBhZ2VudCBhbHJlYWR5IHNwb2tlIGR1cmluZyB0aGVcbiAgICAgKiBSZWFsdGltZVNlc3Npb24sIGNoYW5naW5nIHRoZSB2b2ljZSBkdXJpbmcgYSBoYW5kb2ZmIHdpbGwgZmFpbC5cbiAgICAgKi9cbiAgICB2b2ljZTtcbiAgICBjb25zdHJ1Y3Rvcihjb25maWcpIHtcbiAgICAgICAgc3VwZXIoY29uZmlnKTtcbiAgICAgICAgdGhpcy52b2ljZSA9IGNvbmZpZy52b2ljZTtcbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1yZWFsdGltZUFnZW50Lm1qcy5tYXAiLCJpbXBvcnQgeyBkZWZpbmVPdXRwdXRHdWFyZHJhaWwsIH0gZnJvbSAnQG9wZW5haS9hZ2VudHMtY29yZSc7XG5leHBvcnQgZnVuY3Rpb24gZ2V0UmVhbHRpbWVHdWFyZHJhaWxTZXR0aW5ncyhzZXR0aW5ncykge1xuICAgIHJldHVybiB7XG4gICAgICAgIGRlYm91bmNlVGV4dExlbmd0aDogc2V0dGluZ3MuZGVib3VuY2VUZXh0TGVuZ3RoID8/IDEwMCxcbiAgICB9O1xufVxuZXhwb3J0IGZ1bmN0aW9uIGRlZmluZVJlYWx0aW1lT3V0cHV0R3VhcmRyYWlsKHsgcG9saWN5SGludDogcG9saWN5SGludElucHV0LCAuLi5vcHRpb25zIH0pIHtcbiAgICBjb25zdCBiYXNlR3VhcmRyYWlsID0gZGVmaW5lT3V0cHV0R3VhcmRyYWlsKG9wdGlvbnMpO1xuICAgIGNvbnN0IHBvbGljeUhpbnQgPSBwb2xpY3lIaW50SW5wdXQgPz8gYmFzZUd1YXJkcmFpbC5uYW1lO1xuICAgIHJldHVybiB7XG4gICAgICAgIC4uLmJhc2VHdWFyZHJhaWwsXG4gICAgICAgIHBvbGljeUhpbnQsXG4gICAgICAgIHJ1bjogYXN5bmMgKGFyZ3MpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGJhc2VHdWFyZHJhaWwucnVuKGFyZ3MpO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAuLi5yZXN1bHQsXG4gICAgICAgICAgICAgICAgZ3VhcmRyYWlsOiB7IC4uLnJlc3VsdC5ndWFyZHJhaWwsIHBvbGljeUhpbnQgfSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0sXG4gICAgfTtcbn1cbi8qKlxuICogR2VuZXJhdGVzIGEgbWVzc2FnZSB0aGF0IGluZm9ybXMgdGhlIG1vZGVsIGFib3V0IHdoeSB0aGUgZ3VhcmRyYWlsIHdhcyB0cmlnZ2VyZWQgYW5kIHRvXG4gKiBjb3JyZWN0IHRoZSBiZWhhdmlvci5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFJlYWx0aW1lR3VhcmRyYWlsRmVlZGJhY2tNZXNzYWdlKHJlc3VsdCkge1xuICAgIHJldHVybiBgXG7imqDvuI8gWW91ciBsYXN0IGFuc3dlciB3YXMgYmxvY2tlZC4gXG5GYWlsZWQgR3VhcmRyYWlsIFJlYXNvbjogJHtyZXN1bHQuZ3VhcmRyYWlsLnBvbGljeUhpbnR9LiBcbkZhaWx1cmUgRGV0YWlsczogJHtKU09OLnN0cmluZ2lmeShyZXN1bHQub3V0cHV0Lm91dHB1dEluZm8gPz8ge30pfS4gXG5QbGVhc2UgcmVzcG9uZCBhZ2FpbiBmb2xsb3dpbmcgcG9saWN5LiBBcG9sb2dpemUgZm9yIG5vdCBiZWluZyBhYmxlIHRvIGFuc3dlciB0aGUgcXVlc3Rpb24gKHdoaWxlIGF2b2lkaW5nIHRoZSBzcGVjaWZpYyByZWFzb24pIGFuZCBkaXZlcnQgZGlzY3Vzc2lvbiBiYWNrIHRvIGFuIGFwcHJvdmVkIHRvcGljIGltbWVkaWF0ZWx5IGFuZCBub3QgaW52aXRlIG1vcmUgZGlzY3Vzc2lvbi5cbmAudHJpbSgpO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Z3VhcmRyYWlsLm1qcy5tYXAiLCJmdW5jdGlvbiBpc0RlZmluZWQoa2V5LCBvYmplY3QpIHtcbiAgICAvLyBAdHMtZXhwZWN0LWVycm9yIGZ1ZGdpbmcgd2l0aCB0eXBlcyBoZXJlIGZvciB0aGUgaW5kZXggdHlwZXNcbiAgICByZXR1cm4ga2V5IGluIG9iamVjdCAmJiB0eXBlb2Ygb2JqZWN0W2tleV0gIT09ICd1bmRlZmluZWQnO1xufVxuZnVuY3Rpb24gaXNEZXByZWNhdGVkQ29uZmlnKGNvbmZpZykge1xuICAgIHJldHVybiAoaXNEZWZpbmVkKCdtb2RhbGl0aWVzJywgY29uZmlnKSB8fFxuICAgICAgICBpc0RlZmluZWQoJ2lucHV0QXVkaW9Gb3JtYXQnLCBjb25maWcpIHx8XG4gICAgICAgIGlzRGVmaW5lZCgnb3V0cHV0QXVkaW9Gb3JtYXQnLCBjb25maWcpIHx8XG4gICAgICAgIGlzRGVmaW5lZCgnaW5wdXRBdWRpb1RyYW5zY3JpcHRpb24nLCBjb25maWcpIHx8XG4gICAgICAgIGlzRGVmaW5lZCgndHVybkRldGVjdGlvbicsIGNvbmZpZykgfHxcbiAgICAgICAgaXNEZWZpbmVkKCdpbnB1dEF1ZGlvTm9pc2VSZWR1Y3Rpb24nLCBjb25maWcpIHx8XG4gICAgICAgIGlzRGVmaW5lZCgnc3BlZWQnLCBjb25maWcpKTtcbn1cbi8qKlxuICogQ29udmVydCBhbnkgZ2l2ZW4gY29uZmlnIChvbGQgb3IgbmV3KSB0byB0aGUgbmV3IEdBIGNvbmZpZyBzaGFwZS5cbiAqIElmIGEgbmV3IGNvbmZpZyBpcyBwcm92aWRlZCwgaXQgd2lsbCBiZSByZXR1cm5lZCBhcy1pcyAobm9ybWFsaXplZCBzaGFsbG93bHkpLlxuICovXG5leHBvcnQgZnVuY3Rpb24gdG9OZXdTZXNzaW9uQ29uZmlnKGNvbmZpZykge1xuICAgIGlmICghaXNEZXByZWNhdGVkQ29uZmlnKGNvbmZpZykpIHtcbiAgICAgICAgY29uc3QgaW5wdXRDb25maWcgPSBjb25maWcuYXVkaW8/LmlucHV0XG4gICAgICAgICAgICA/IHtcbiAgICAgICAgICAgICAgICBmb3JtYXQ6IG5vcm1hbGl6ZUF1ZGlvRm9ybWF0KGNvbmZpZy5hdWRpby5pbnB1dC5mb3JtYXQpLFxuICAgICAgICAgICAgICAgIG5vaXNlUmVkdWN0aW9uOiBjb25maWcuYXVkaW8uaW5wdXQubm9pc2VSZWR1Y3Rpb24gPz8gbnVsbCxcbiAgICAgICAgICAgICAgICB0cmFuc2NyaXB0aW9uOiBjb25maWcuYXVkaW8uaW5wdXQudHJhbnNjcmlwdGlvbixcbiAgICAgICAgICAgICAgICB0dXJuRGV0ZWN0aW9uOiBjb25maWcuYXVkaW8uaW5wdXQudHVybkRldGVjdGlvbixcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIDogdW5kZWZpbmVkO1xuICAgICAgICBjb25zdCByZXF1ZXN0ZWRPdXRwdXRWb2ljZSA9IGNvbmZpZy5hdWRpbz8ub3V0cHV0Py52b2ljZSA/PyBjb25maWcudm9pY2U7XG4gICAgICAgIGNvbnN0IG91dHB1dENvbmZpZyA9IGNvbmZpZy5hdWRpbz8ub3V0cHV0IHx8IHR5cGVvZiByZXF1ZXN0ZWRPdXRwdXRWb2ljZSAhPT0gJ3VuZGVmaW5lZCdcbiAgICAgICAgICAgID8ge1xuICAgICAgICAgICAgICAgIGZvcm1hdDogbm9ybWFsaXplQXVkaW9Gb3JtYXQoY29uZmlnLmF1ZGlvPy5vdXRwdXQ/LmZvcm1hdCksXG4gICAgICAgICAgICAgICAgdm9pY2U6IHJlcXVlc3RlZE91dHB1dFZvaWNlLFxuICAgICAgICAgICAgICAgIHNwZWVkOiBjb25maWcuYXVkaW8/Lm91dHB1dD8uc3BlZWQsXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICA6IHVuZGVmaW5lZDtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG1vZGVsOiBjb25maWcubW9kZWwsXG4gICAgICAgICAgICBpbnN0cnVjdGlvbnM6IGNvbmZpZy5pbnN0cnVjdGlvbnMsXG4gICAgICAgICAgICB0b29sQ2hvaWNlOiBjb25maWcudG9vbENob2ljZSxcbiAgICAgICAgICAgIHRvb2xzOiBjb25maWcudG9vbHMsXG4gICAgICAgICAgICB0cmFjaW5nOiBjb25maWcudHJhY2luZyxcbiAgICAgICAgICAgIHByb3ZpZGVyRGF0YTogY29uZmlnLnByb3ZpZGVyRGF0YSxcbiAgICAgICAgICAgIHByb21wdDogY29uZmlnLnByb21wdCxcbiAgICAgICAgICAgIG91dHB1dE1vZGFsaXRpZXM6IGNvbmZpZy5vdXRwdXRNb2RhbGl0aWVzLFxuICAgICAgICAgICAgYXVkaW86IGlucHV0Q29uZmlnIHx8IG91dHB1dENvbmZpZ1xuICAgICAgICAgICAgICAgID8ge1xuICAgICAgICAgICAgICAgICAgICBpbnB1dDogaW5wdXRDb25maWcsXG4gICAgICAgICAgICAgICAgICAgIG91dHB1dDogb3V0cHV0Q29uZmlnLFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICA6IHVuZGVmaW5lZCxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgICAgbW9kZWw6IGNvbmZpZy5tb2RlbCxcbiAgICAgICAgaW5zdHJ1Y3Rpb25zOiBjb25maWcuaW5zdHJ1Y3Rpb25zLFxuICAgICAgICB0b29sQ2hvaWNlOiBjb25maWcudG9vbENob2ljZSxcbiAgICAgICAgdG9vbHM6IGNvbmZpZy50b29scyxcbiAgICAgICAgdHJhY2luZzogY29uZmlnLnRyYWNpbmcsXG4gICAgICAgIHByb3ZpZGVyRGF0YTogY29uZmlnLnByb3ZpZGVyRGF0YSxcbiAgICAgICAgcHJvbXB0OiBjb25maWcucHJvbXB0LFxuICAgICAgICBvdXRwdXRNb2RhbGl0aWVzOiBjb25maWcubW9kYWxpdGllcyxcbiAgICAgICAgYXVkaW86IHtcbiAgICAgICAgICAgIGlucHV0OiB7XG4gICAgICAgICAgICAgICAgZm9ybWF0OiBub3JtYWxpemVBdWRpb0Zvcm1hdChjb25maWcuaW5wdXRBdWRpb0Zvcm1hdCksXG4gICAgICAgICAgICAgICAgbm9pc2VSZWR1Y3Rpb246IGNvbmZpZy5pbnB1dEF1ZGlvTm9pc2VSZWR1Y3Rpb24gPz8gbnVsbCxcbiAgICAgICAgICAgICAgICB0cmFuc2NyaXB0aW9uOiBjb25maWcuaW5wdXRBdWRpb1RyYW5zY3JpcHRpb24sXG4gICAgICAgICAgICAgICAgdHVybkRldGVjdGlvbjogY29uZmlnLnR1cm5EZXRlY3Rpb24sXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgb3V0cHV0OiB7XG4gICAgICAgICAgICAgICAgZm9ybWF0OiBub3JtYWxpemVBdWRpb0Zvcm1hdChjb25maWcub3V0cHV0QXVkaW9Gb3JtYXQpLFxuICAgICAgICAgICAgICAgIHZvaWNlOiBjb25maWcudm9pY2UsXG4gICAgICAgICAgICAgICAgc3BlZWQ6IGNvbmZpZy5zcGVlZCxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgfTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBub3JtYWxpemVBdWRpb0Zvcm1hdChmb3JtYXQpIHtcbiAgICBpZiAoIWZvcm1hdClcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICBpZiAodHlwZW9mIGZvcm1hdCA9PT0gJ29iamVjdCcpXG4gICAgICAgIHJldHVybiBmb3JtYXQ7XG4gICAgY29uc3QgZiA9IFN0cmluZyhmb3JtYXQpO1xuICAgIGlmIChmID09PSAncGNtMTYnKVxuICAgICAgICByZXR1cm4geyB0eXBlOiAnYXVkaW8vcGNtJywgcmF0ZTogMjQwMDAgfTtcbiAgICBpZiAoZiA9PT0gJ2c3MTFfdWxhdycpXG4gICAgICAgIHJldHVybiB7IHR5cGU6ICdhdWRpby9wY211JyB9O1xuICAgIGlmIChmID09PSAnZzcxMV9hbGF3JylcbiAgICAgICAgcmV0dXJuIHsgdHlwZTogJ2F1ZGlvL3BjbWEnIH07XG4gICAgLy8gRGVmYXVsdCBmYWxsYmFjazogYXNzdW1lIDI0a0h6IFBDTSBpZiB1bmtub3duIHN0cmluZ1xuICAgIHJldHVybiB7IHR5cGU6ICdhdWRpby9wY20nLCByYXRlOiAyNDAwMCB9O1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y2xpZW50TWVzc2FnZXMubWpzLm1hcCIsImltcG9ydCB7IHogfSBmcm9tICd6b2QnO1xuZXhwb3J0IGNvbnN0IGJhc2VJdGVtU2NoZW1hID0gei5vYmplY3Qoe1xuICAgIGl0ZW1JZDogei5zdHJpbmcoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IHJlYWx0aW1lTWVzc2FnZUl0ZW1TY2hlbWEgPSB6LmRpc2NyaW1pbmF0ZWRVbmlvbigncm9sZScsIFtcbiAgICB6Lm9iamVjdCh7XG4gICAgICAgIGl0ZW1JZDogei5zdHJpbmcoKSxcbiAgICAgICAgcHJldmlvdXNJdGVtSWQ6IHouc3RyaW5nKCkubnVsbGFibGUoKS5vcHRpb25hbCgpLFxuICAgICAgICB0eXBlOiB6LmxpdGVyYWwoJ21lc3NhZ2UnKSxcbiAgICAgICAgcm9sZTogei5saXRlcmFsKCdzeXN0ZW0nKSxcbiAgICAgICAgY29udGVudDogei5hcnJheSh6Lm9iamVjdCh7IHR5cGU6IHoubGl0ZXJhbCgnaW5wdXRfdGV4dCcpLCB0ZXh0OiB6LnN0cmluZygpIH0pKSxcbiAgICB9KSxcbiAgICB6Lm9iamVjdCh7XG4gICAgICAgIGl0ZW1JZDogei5zdHJpbmcoKSxcbiAgICAgICAgcHJldmlvdXNJdGVtSWQ6IHouc3RyaW5nKCkubnVsbGFibGUoKS5vcHRpb25hbCgpLFxuICAgICAgICB0eXBlOiB6LmxpdGVyYWwoJ21lc3NhZ2UnKSxcbiAgICAgICAgcm9sZTogei5saXRlcmFsKCd1c2VyJyksXG4gICAgICAgIHN0YXR1czogei5lbnVtKFsnaW5fcHJvZ3Jlc3MnLCAnY29tcGxldGVkJ10pLFxuICAgICAgICBjb250ZW50OiB6LmFycmF5KHoub2JqZWN0KHsgdHlwZTogei5saXRlcmFsKCdpbnB1dF90ZXh0JyksIHRleHQ6IHouc3RyaW5nKCkgfSkub3Ioei5vYmplY3Qoe1xuICAgICAgICAgICAgdHlwZTogei5saXRlcmFsKCdpbnB1dF9hdWRpbycpLFxuICAgICAgICAgICAgYXVkaW86IHouc3RyaW5nKCkubnVsbGFibGUoKS5vcHRpb25hbCgpLFxuICAgICAgICAgICAgdHJhbnNjcmlwdDogei5zdHJpbmcoKS5udWxsYWJsZSgpLFxuICAgICAgICB9KSkpLFxuICAgIH0pLFxuICAgIHoub2JqZWN0KHtcbiAgICAgICAgaXRlbUlkOiB6LnN0cmluZygpLFxuICAgICAgICBwcmV2aW91c0l0ZW1JZDogei5zdHJpbmcoKS5udWxsYWJsZSgpLm9wdGlvbmFsKCksXG4gICAgICAgIHR5cGU6IHoubGl0ZXJhbCgnbWVzc2FnZScpLFxuICAgICAgICByb2xlOiB6LmxpdGVyYWwoJ2Fzc2lzdGFudCcpLFxuICAgICAgICBzdGF0dXM6IHouZW51bShbJ2luX3Byb2dyZXNzJywgJ2NvbXBsZXRlZCcsICdpbmNvbXBsZXRlJ10pLFxuICAgICAgICBjb250ZW50OiB6LmFycmF5KHoub2JqZWN0KHsgdHlwZTogei5saXRlcmFsKCdvdXRwdXRfdGV4dCcpLCB0ZXh0OiB6LnN0cmluZygpIH0pLm9yKHoub2JqZWN0KHtcbiAgICAgICAgICAgIHR5cGU6IHoubGl0ZXJhbCgnb3V0cHV0X2F1ZGlvJyksXG4gICAgICAgICAgICBhdWRpbzogei5zdHJpbmcoKS5udWxsYWJsZSgpLm9wdGlvbmFsKCksXG4gICAgICAgICAgICB0cmFuc2NyaXB0OiB6LnN0cmluZygpLm51bGxhYmxlKCkub3B0aW9uYWwoKSxcbiAgICAgICAgfSkpKSxcbiAgICB9KSxcbl0pO1xuZXhwb3J0IGNvbnN0IHJlYWx0aW1lVG9vbENhbGxJdGVtID0gei5vYmplY3Qoe1xuICAgIGl0ZW1JZDogei5zdHJpbmcoKSxcbiAgICBwcmV2aW91c0l0ZW1JZDogei5zdHJpbmcoKS5udWxsYWJsZSgpLm9wdGlvbmFsKCksXG4gICAgdHlwZTogei5saXRlcmFsKCdmdW5jdGlvbl9jYWxsJyksXG4gICAgc3RhdHVzOiB6LmVudW0oWydpbl9wcm9ncmVzcycsICdjb21wbGV0ZWQnLCAnaW5jb21wbGV0ZSddKSxcbiAgICBhcmd1bWVudHM6IHouc3RyaW5nKCksXG4gICAgbmFtZTogei5zdHJpbmcoKSxcbiAgICBvdXRwdXQ6IHouc3RyaW5nKCkubnVsbGFibGUoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IHJlYWx0aW1lTWNwQ2FsbEl0ZW0gPSB6Lm9iamVjdCh7XG4gICAgaXRlbUlkOiB6LnN0cmluZygpLFxuICAgIHByZXZpb3VzSXRlbUlkOiB6LnN0cmluZygpLm51bGxhYmxlKCkub3B0aW9uYWwoKSxcbiAgICB0eXBlOiB6LmVudW0oWydtY3BfY2FsbCcsICdtY3BfdG9vbF9jYWxsJ10pLFxuICAgIHN0YXR1czogei5lbnVtKFsnaW5fcHJvZ3Jlc3MnLCAnY29tcGxldGVkJywgJ2luY29tcGxldGUnXSksXG4gICAgYXJndW1lbnRzOiB6LnN0cmluZygpLFxuICAgIG5hbWU6IHouc3RyaW5nKCksXG4gICAgb3V0cHV0OiB6LnN0cmluZygpLm51bGxhYmxlKCksXG59KTtcbmV4cG9ydCBjb25zdCByZWFsdGltZU1jcENhbGxBcHByb3ZhbFJlcXVlc3RJdGVtID0gei5vYmplY3Qoe1xuICAgIGl0ZW1JZDogei5zdHJpbmcoKSxcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ21jcF9hcHByb3ZhbF9yZXF1ZXN0JyksXG4gICAgc2VydmVyTGFiZWw6IHouc3RyaW5nKCksXG4gICAgbmFtZTogei5zdHJpbmcoKSxcbiAgICBhcmd1bWVudHM6IHoucmVjb3JkKHouc3RyaW5nKCksIHouYW55KCkpLFxuICAgIGFwcHJvdmVkOiB6LmJvb2xlYW4oKS5vcHRpb25hbCgpLm51bGxhYmxlKCksXG59KTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWl0ZW1zLm1qcy5tYXAiLCJpbXBvcnQgeyBnZXRMb2dnZXIgfSBmcm9tICdAb3BlbmFpL2FnZW50cy1jb3JlJztcbmNvbnN0IGxvZ2dlciA9IGdldExvZ2dlcignb3BlbmFpLWFnZW50czpyZWFsdGltZScpO1xuZXhwb3J0IGRlZmF1bHQgbG9nZ2VyO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bG9nZ2VyLm1qcy5tYXAiLCJpbXBvcnQgeyB6IH0gZnJvbSAnem9kJztcbi8vIEV2ZW50IHNjaGVtYXMgbWlycm9yaW5nIHRoZSBzdHJ1Y3R1cmVzIGRlZmluZWQgaW4gdGhlIE9wZW5BSSBTREsgdHlwaW5ncy5cbi8vIE1vc3QgZmllbGRzIGZyb20gdGhlIGludGVyZmFjZXMgaW4gYHJlYWx0aW1lLmQudHNgIGFyZSBjYXB0dXJlZCBoZXJlIHRvXG4vLyBwcm92aWRlIGJldHRlciBydW50aW1lIHZhbGlkYXRpb24gd2hlbiBwYXJzaW5nIGV2ZW50cyBmcm9tIHRoZSBzZXJ2ZXIuXG5leHBvcnQgY29uc3QgcmVhbHRpbWVSZXNwb25zZSA9IHoub2JqZWN0KHtcbiAgICBpZDogei5zdHJpbmcoKS5vcHRpb25hbCgpLm51bGxhYmxlKCksXG4gICAgY29udmVyc2F0aW9uX2lkOiB6LnN0cmluZygpLm9wdGlvbmFsKCkubnVsbGFibGUoKSxcbiAgICBtYXhfb3V0cHV0X3Rva2Vuczogei5udW1iZXIoKS5vcih6LmxpdGVyYWwoJ2luZicpKS5vcHRpb25hbCgpLm51bGxhYmxlKCksXG4gICAgbWV0YWRhdGE6IHoucmVjb3JkKHouc3RyaW5nKCksIHouYW55KCkpLm9wdGlvbmFsKCkubnVsbGFibGUoKSxcbiAgICAvLyBHQSByZW5hbWU6IG1vZGFsaXRpZXMgLT4gb3V0cHV0X21vZGFsaXRpZXNcbiAgICBvdXRwdXRfbW9kYWxpdGllczogei5hcnJheSh6LnN0cmluZygpKS5vcHRpb25hbCgpLm51bGxhYmxlKCksXG4gICAgb2JqZWN0OiB6LmxpdGVyYWwoJ3JlYWx0aW1lLnJlc3BvbnNlJykub3B0aW9uYWwoKS5udWxsYWJsZSgpLFxuICAgIG91dHB1dDogei5hcnJheSh6LmFueSgpKS5vcHRpb25hbCgpLm51bGxhYmxlKCksXG4gICAgLy8gR0EgZ3JvdXBpbmc6IGF1ZGlvLm91dHB1dC57Zm9ybWF0LHZvaWNlfVxuICAgIGF1ZGlvOiB6XG4gICAgICAgIC5vYmplY3Qoe1xuICAgICAgICBvdXRwdXQ6IHpcbiAgICAgICAgICAgIC5vYmplY3Qoe1xuICAgICAgICAgICAgZm9ybWF0OiB6LmFueSgpLm9wdGlvbmFsKCkubnVsbGFibGUoKSxcbiAgICAgICAgICAgIHZvaWNlOiB6LnN0cmluZygpLm9wdGlvbmFsKCkubnVsbGFibGUoKSxcbiAgICAgICAgfSlcbiAgICAgICAgICAgIC5vcHRpb25hbCgpXG4gICAgICAgICAgICAubnVsbGFibGUoKSxcbiAgICB9KVxuICAgICAgICAub3B0aW9uYWwoKVxuICAgICAgICAubnVsbGFibGUoKSxcbiAgICBzdGF0dXM6IHpcbiAgICAgICAgLmVudW0oWydjb21wbGV0ZWQnLCAnaW5jb21wbGV0ZScsICdmYWlsZWQnLCAnY2FuY2VsbGVkJywgJ2luX3Byb2dyZXNzJ10pXG4gICAgICAgIC5vcHRpb25hbCgpXG4gICAgICAgIC5udWxsYWJsZSgpLFxuICAgIHN0YXR1c19kZXRhaWxzOiB6LnJlY29yZCh6LnN0cmluZygpLCB6LmFueSgpKS5vcHRpb25hbCgpLm51bGxhYmxlKCksXG4gICAgdXNhZ2U6IHpcbiAgICAgICAgLm9iamVjdCh7XG4gICAgICAgIGlucHV0X3Rva2Vuczogei5udW1iZXIoKS5vcHRpb25hbCgpLFxuICAgICAgICBpbnB1dF90b2tlbl9kZXRhaWxzOiB6LnJlY29yZCh6LnN0cmluZygpLCB6LmFueSgpKS5vcHRpb25hbCgpLm51bGxhYmxlKCksXG4gICAgICAgIG91dHB1dF90b2tlbnM6IHoubnVtYmVyKCkub3B0aW9uYWwoKSxcbiAgICAgICAgb3V0cHV0X3Rva2VuX2RldGFpbHM6IHoucmVjb3JkKHouc3RyaW5nKCksIHouYW55KCkpLm9wdGlvbmFsKCkubnVsbGFibGUoKSxcbiAgICB9KVxuICAgICAgICAub3B0aW9uYWwoKVxuICAgICAgICAubnVsbGFibGUoKSxcbn0pO1xuLy8gQmFzaWMgY29udGVudCBzY2hlbWEgdXNlZCBieSBDb252ZXJzYXRpb25JdGVtLlxuZXhwb3J0IGNvbnN0IGNvbnZlcnNhdGlvbkl0ZW1Db250ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIGlkOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgYXVkaW86IHouc3RyaW5nKCkubnVsbGFibGUoKS5vcHRpb25hbCgpLFxuICAgIHRleHQ6IHouc3RyaW5nKCkubnVsbGFibGUoKS5vcHRpb25hbCgpLFxuICAgIHRyYW5zY3JpcHQ6IHouc3RyaW5nKCkubnVsbGFibGUoKS5vcHRpb25hbCgpLFxuICAgIHR5cGU6IHoudW5pb24oW1xuICAgICAgICB6LmxpdGVyYWwoJ2lucHV0X3RleHQnKSxcbiAgICAgICAgei5saXRlcmFsKCdpbnB1dF9hdWRpbycpLFxuICAgICAgICB6LmxpdGVyYWwoJ2l0ZW1fcmVmZXJlbmNlJyksXG4gICAgICAgIHoubGl0ZXJhbCgnb3V0cHV0X3RleHQnKSxcbiAgICAgICAgei5saXRlcmFsKCdvdXRwdXRfYXVkaW8nKSxcbiAgICBdKSxcbn0pO1xuZXhwb3J0IGNvbnN0IGNvbnZlcnNhdGlvbkl0ZW1TY2hlbWEgPSB6XG4gICAgLm9iamVjdCh7XG4gICAgaWQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICBhcmd1bWVudHM6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICBjYWxsX2lkOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgY29udGVudDogei5hcnJheShjb252ZXJzYXRpb25JdGVtQ29udGVudFNjaGVtYSkub3B0aW9uYWwoKSxcbiAgICBuYW1lOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgb3V0cHV0OiB6LnN0cmluZygpLm51bGxhYmxlKCkub3B0aW9uYWwoKSxcbiAgICByb2xlOiB6LmVudW0oWyd1c2VyJywgJ2Fzc2lzdGFudCcsICdzeXN0ZW0nXSkub3B0aW9uYWwoKSxcbiAgICBzdGF0dXM6IHouZW51bShbJ2NvbXBsZXRlZCcsICdpbmNvbXBsZXRlJywgJ2luX3Byb2dyZXNzJ10pLm9wdGlvbmFsKCksXG4gICAgdHlwZTogelxuICAgICAgICAuZW51bShbXG4gICAgICAgICdtZXNzYWdlJyxcbiAgICAgICAgJ2Z1bmN0aW9uX2NhbGwnLFxuICAgICAgICAnZnVuY3Rpb25fY2FsbF9vdXRwdXQnLFxuICAgICAgICAnbWNwX2xpc3RfdG9vbHMnLFxuICAgICAgICAnbWNwX3Rvb2xfY2FsbCcsXG4gICAgICAgICdtY3BfY2FsbCcsXG4gICAgICAgICdtY3BfYXBwcm92YWxfcmVxdWVzdCcsXG4gICAgICAgICdtY3BfYXBwcm92YWxfcmVzcG9uc2UnLFxuICAgIF0pXG4gICAgICAgIC5vcHRpb25hbCgpLFxuICAgIGFwcHJvdmFsX3JlcXVlc3RfaWQ6IHouc3RyaW5nKCkubnVsbGFibGUoKS5vcHRpb25hbCgpLFxuICAgIGFwcHJvdmU6IHouYm9vbGVhbigpLm51bGxhYmxlKCkub3B0aW9uYWwoKSxcbiAgICByZWFzb246IHouc3RyaW5nKCkubnVsbGFibGUoKS5vcHRpb25hbCgpLFxuICAgIHNlcnZlcl9sYWJlbDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgIGVycm9yOiB6LmFueSgpLm51bGxhYmxlKCkub3B0aW9uYWwoKSxcbiAgICB0b29sczogelxuICAgICAgICAuYXJyYXkoelxuICAgICAgICAub2JqZWN0KHtcbiAgICAgICAgbmFtZTogei5zdHJpbmcoKSxcbiAgICAgICAgZGVzY3JpcHRpb246IHouc3RyaW5nKCksXG4gICAgICAgIGlucHV0X3NjaGVtYTogei5yZWNvcmQoei5hbnkoKSkub3B0aW9uYWwoKSxcbiAgICB9KVxuICAgICAgICAucGFzc3Rocm91Z2goKSlcbiAgICAgICAgLm9wdGlvbmFsKCksXG59KVxuICAgIC5wYXNzdGhyb3VnaCgpO1xuZXhwb3J0IGNvbnN0IGNvbnZlcnNhdGlvbkNyZWF0ZWRFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ2NvbnZlcnNhdGlvbi5jcmVhdGVkJyksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCksXG4gICAgY29udmVyc2F0aW9uOiB6Lm9iamVjdCh7XG4gICAgICAgIGlkOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgICAgIG9iamVjdDogei5saXRlcmFsKCdyZWFsdGltZS5jb252ZXJzYXRpb24nKS5vcHRpb25hbCgpLFxuICAgIH0pLFxufSk7XG4vLyBHQSByZW5hbWU6IGNvbnZlcnNhdGlvbi5pdGVtLmNyZWF0ZWQgLT4gY29udmVyc2F0aW9uLml0ZW0uYWRkZWRcbmV4cG9ydCBjb25zdCBjb252ZXJzYXRpb25JdGVtQWRkZWRFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ2NvbnZlcnNhdGlvbi5pdGVtLmFkZGVkJyksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCksXG4gICAgaXRlbTogY29udmVyc2F0aW9uSXRlbVNjaGVtYSxcbiAgICBwcmV2aW91c19pdGVtX2lkOiB6LnN0cmluZygpLm51bGxhYmxlKCkub3B0aW9uYWwoKSxcbn0pO1xuLy8gR0EgYWRkaXRpb246IGNvbnZlcnNhdGlvbi5pdGVtLmRvbmVcbmV4cG9ydCBjb25zdCBjb252ZXJzYXRpb25JdGVtRG9uZUV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnY29udmVyc2F0aW9uLml0ZW0uZG9uZScpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLFxuICAgIGl0ZW06IGNvbnZlcnNhdGlvbkl0ZW1TY2hlbWEsXG4gICAgcHJldmlvdXNfaXRlbV9pZDogei5zdHJpbmcoKS5udWxsYWJsZSgpLm9wdGlvbmFsKCksXG59KTtcbmV4cG9ydCBjb25zdCBjb252ZXJzYXRpb25JdGVtRGVsZXRlZEV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnY29udmVyc2F0aW9uLml0ZW0uZGVsZXRlZCcpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLFxuICAgIGl0ZW1faWQ6IHouc3RyaW5nKCksXG59KTtcbmV4cG9ydCBjb25zdCBjb252ZXJzYXRpb25JdGVtSW5wdXRBdWRpb1RyYW5zY3JpcHRpb25Db21wbGV0ZWRFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ2NvbnZlcnNhdGlvbi5pdGVtLmlucHV0X2F1ZGlvX3RyYW5zY3JpcHRpb24uY29tcGxldGVkJyksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCksXG4gICAgaXRlbV9pZDogei5zdHJpbmcoKSxcbiAgICBjb250ZW50X2luZGV4OiB6Lm51bWJlcigpLFxuICAgIHRyYW5zY3JpcHQ6IHouc3RyaW5nKCksXG4gICAgbG9ncHJvYnM6IHouYXJyYXkoei5hbnkoKSkubnVsbGFibGUoKS5vcHRpb25hbCgpLFxuICAgIHVzYWdlOiB6XG4gICAgICAgIC5vYmplY3Qoe1xuICAgICAgICB0eXBlOiB6LmxpdGVyYWwoJ3Rva2VucycpLFxuICAgICAgICB0b3RhbF90b2tlbnM6IHoubnVtYmVyKCksXG4gICAgICAgIGlucHV0X3Rva2Vuczogei5udW1iZXIoKSxcbiAgICAgICAgaW5wdXRfdG9rZW5fZGV0YWlsczogei5vYmplY3Qoe1xuICAgICAgICAgICAgdGV4dF90b2tlbnM6IHoubnVtYmVyKCksXG4gICAgICAgICAgICBhdWRpb190b2tlbnM6IHoubnVtYmVyKCksXG4gICAgICAgIH0pLFxuICAgICAgICBvdXRwdXRfdG9rZW5zOiB6Lm51bWJlcigpLFxuICAgIH0pXG4gICAgICAgIC5vcHRpb25hbCgpLFxufSk7XG5leHBvcnQgY29uc3QgY29udmVyc2F0aW9uSXRlbUlucHV0QXVkaW9UcmFuc2NyaXB0aW9uRGVsdGFFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ2NvbnZlcnNhdGlvbi5pdGVtLmlucHV0X2F1ZGlvX3RyYW5zY3JpcHRpb24uZGVsdGEnKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKSxcbiAgICBpdGVtX2lkOiB6LnN0cmluZygpLFxuICAgIGNvbnRlbnRfaW5kZXg6IHoubnVtYmVyKCkub3B0aW9uYWwoKSxcbiAgICBkZWx0YTogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgIGxvZ3Byb2JzOiB6LmFycmF5KHouYW55KCkpLm51bGxhYmxlKCkub3B0aW9uYWwoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IGNvbnZlcnNhdGlvbkl0ZW1JbnB1dEF1ZGlvVHJhbnNjcmlwdGlvbkZhaWxlZEV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnY29udmVyc2F0aW9uLml0ZW0uaW5wdXRfYXVkaW9fdHJhbnNjcmlwdGlvbi5mYWlsZWQnKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKSxcbiAgICBpdGVtX2lkOiB6LnN0cmluZygpLFxuICAgIGNvbnRlbnRfaW5kZXg6IHoubnVtYmVyKCksXG4gICAgZXJyb3I6IHoub2JqZWN0KHtcbiAgICAgICAgY29kZTogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgICAgICBtZXNzYWdlOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgICAgIHBhcmFtOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgICAgIHR5cGU6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICB9KSxcbn0pO1xuZXhwb3J0IGNvbnN0IGNvbnZlcnNhdGlvbkl0ZW1SZXRyaWV2ZWRFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ2NvbnZlcnNhdGlvbi5pdGVtLnJldHJpZXZlZCcpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLFxuICAgIGl0ZW06IGNvbnZlcnNhdGlvbkl0ZW1TY2hlbWEsXG59KTtcbmV4cG9ydCBjb25zdCBjb252ZXJzYXRpb25JdGVtVHJ1bmNhdGVkRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdjb252ZXJzYXRpb24uaXRlbS50cnVuY2F0ZWQnKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKSxcbiAgICBpdGVtX2lkOiB6LnN0cmluZygpLFxuICAgIGF1ZGlvX2VuZF9tczogei5udW1iZXIoKSxcbiAgICBjb250ZW50X2luZGV4OiB6Lm51bWJlcigpLFxufSk7XG5leHBvcnQgY29uc3QgY29udmVyc2F0aW9uSXRlbUNyZWF0ZUV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnY29udmVyc2F0aW9uLml0ZW0uY3JlYXRlJyksXG4gICAgaXRlbTogY29udmVyc2F0aW9uSXRlbVNjaGVtYSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgIHByZXZpb3VzX2l0ZW1faWQ6IHouc3RyaW5nKCkubnVsbGFibGUoKS5vcHRpb25hbCgpLFxufSk7XG5leHBvcnQgY29uc3QgY29udmVyc2F0aW9uSXRlbURlbGV0ZUV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnY29udmVyc2F0aW9uLml0ZW0uZGVsZXRlJyksXG4gICAgaXRlbV9pZDogei5zdHJpbmcoKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxufSk7XG5leHBvcnQgY29uc3QgY29udmVyc2F0aW9uSXRlbVJldHJpZXZlRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdjb252ZXJzYXRpb24uaXRlbS5yZXRyaWV2ZScpLFxuICAgIGl0ZW1faWQ6IHouc3RyaW5nKCksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IGNvbnZlcnNhdGlvbkl0ZW1UcnVuY2F0ZUV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnY29udmVyc2F0aW9uLml0ZW0udHJ1bmNhdGUnKSxcbiAgICBpdGVtX2lkOiB6LnN0cmluZygpLFxuICAgIGF1ZGlvX2VuZF9tczogei5udW1iZXIoKSxcbiAgICBjb250ZW50X2luZGV4OiB6Lm51bWJlcigpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG59KTtcbmV4cG9ydCBjb25zdCBlcnJvckV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnZXJyb3InKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgIGVycm9yOiB6LmFueSgpLm9wdGlvbmFsKCksXG59KTtcbmV4cG9ydCBjb25zdCBpbnB1dEF1ZGlvQnVmZmVyQ2xlYXJlZEV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnaW5wdXRfYXVkaW9fYnVmZmVyLmNsZWFyZWQnKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IGlucHV0QXVkaW9CdWZmZXJBcHBlbmRFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ2lucHV0X2F1ZGlvX2J1ZmZlci5hcHBlbmQnKSxcbiAgICBhdWRpbzogei5zdHJpbmcoKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxufSk7XG5leHBvcnQgY29uc3QgaW5wdXRBdWRpb0J1ZmZlckNsZWFyRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdpbnB1dF9hdWRpb19idWZmZXIuY2xlYXInKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxufSk7XG5leHBvcnQgY29uc3QgaW5wdXRBdWRpb0J1ZmZlckNvbW1pdEV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnaW5wdXRfYXVkaW9fYnVmZmVyLmNvbW1pdCcpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG59KTtcbmV4cG9ydCBjb25zdCBpbnB1dEF1ZGlvQnVmZmVyQ29tbWl0dGVkRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdpbnB1dF9hdWRpb19idWZmZXIuY29tbWl0dGVkJyksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCksXG4gICAgaXRlbV9pZDogei5zdHJpbmcoKSxcbiAgICBwcmV2aW91c19pdGVtX2lkOiB6LnN0cmluZygpLm51bGxhYmxlKCkub3B0aW9uYWwoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IGlucHV0QXVkaW9CdWZmZXJTcGVlY2hTdGFydGVkRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdpbnB1dF9hdWRpb19idWZmZXIuc3BlZWNoX3N0YXJ0ZWQnKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKSxcbiAgICBpdGVtX2lkOiB6LnN0cmluZygpLFxuICAgIGF1ZGlvX3N0YXJ0X21zOiB6Lm51bWJlcigpLFxufSk7XG5leHBvcnQgY29uc3QgaW5wdXRBdWRpb0J1ZmZlclNwZWVjaFN0b3BwZWRFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ2lucHV0X2F1ZGlvX2J1ZmZlci5zcGVlY2hfc3RvcHBlZCcpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLFxuICAgIGl0ZW1faWQ6IHouc3RyaW5nKCksXG4gICAgYXVkaW9fZW5kX21zOiB6Lm51bWJlcigpLFxufSk7XG5leHBvcnQgY29uc3Qgb3V0cHV0QXVkaW9CdWZmZXJTdGFydGVkRXZlbnRTY2hlbWEgPSB6XG4gICAgLm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdvdXRwdXRfYXVkaW9fYnVmZmVyLnN0YXJ0ZWQnKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKSxcbn0pXG4gICAgLnBhc3N0aHJvdWdoKCk7XG5leHBvcnQgY29uc3Qgb3V0cHV0QXVkaW9CdWZmZXJTdG9wcGVkRXZlbnRTY2hlbWEgPSB6XG4gICAgLm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdvdXRwdXRfYXVkaW9fYnVmZmVyLnN0b3BwZWQnKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKSxcbn0pXG4gICAgLnBhc3N0aHJvdWdoKCk7XG5leHBvcnQgY29uc3Qgb3V0cHV0QXVkaW9CdWZmZXJDbGVhcmVkRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdvdXRwdXRfYXVkaW9fYnVmZmVyLmNsZWFyZWQnKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IHJhdGVMaW1pdHNVcGRhdGVkRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdyYXRlX2xpbWl0cy51cGRhdGVkJyksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCksXG4gICAgcmF0ZV9saW1pdHM6IHouYXJyYXkoei5vYmplY3Qoe1xuICAgICAgICBsaW1pdDogei5udW1iZXIoKS5vcHRpb25hbCgpLFxuICAgICAgICBuYW1lOiB6LmVudW0oWydyZXF1ZXN0cycsICd0b2tlbnMnXSkub3B0aW9uYWwoKSxcbiAgICAgICAgcmVtYWluaW5nOiB6Lm51bWJlcigpLm9wdGlvbmFsKCksXG4gICAgICAgIHJlc2V0X3NlY29uZHM6IHoubnVtYmVyKCkub3B0aW9uYWwoKSxcbiAgICB9KSksXG59KTtcbmV4cG9ydCBjb25zdCByZXNwb25zZUF1ZGlvRGVsdGFFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ3Jlc3BvbnNlLm91dHB1dF9hdWRpby5kZWx0YScpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLFxuICAgIGl0ZW1faWQ6IHouc3RyaW5nKCksXG4gICAgY29udGVudF9pbmRleDogei5udW1iZXIoKSxcbiAgICBkZWx0YTogei5zdHJpbmcoKSxcbiAgICBvdXRwdXRfaW5kZXg6IHoubnVtYmVyKCksXG4gICAgcmVzcG9uc2VfaWQ6IHouc3RyaW5nKCksXG59KTtcbmV4cG9ydCBjb25zdCByZXNwb25zZUF1ZGlvRG9uZUV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgncmVzcG9uc2Uub3V0cHV0X2F1ZGlvLmRvbmUnKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKSxcbiAgICBpdGVtX2lkOiB6LnN0cmluZygpLFxuICAgIGNvbnRlbnRfaW5kZXg6IHoubnVtYmVyKCksXG4gICAgb3V0cHV0X2luZGV4OiB6Lm51bWJlcigpLFxuICAgIHJlc3BvbnNlX2lkOiB6LnN0cmluZygpLFxufSk7XG5leHBvcnQgY29uc3QgcmVzcG9uc2VBdWRpb1RyYW5zY3JpcHREZWx0YUV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgncmVzcG9uc2Uub3V0cHV0X2F1ZGlvX3RyYW5zY3JpcHQuZGVsdGEnKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKSxcbiAgICBpdGVtX2lkOiB6LnN0cmluZygpLFxuICAgIGNvbnRlbnRfaW5kZXg6IHoubnVtYmVyKCksXG4gICAgZGVsdGE6IHouc3RyaW5nKCksXG4gICAgb3V0cHV0X2luZGV4OiB6Lm51bWJlcigpLFxuICAgIHJlc3BvbnNlX2lkOiB6LnN0cmluZygpLFxufSk7XG5leHBvcnQgY29uc3QgcmVzcG9uc2VBdWRpb1RyYW5zY3JpcHREb25lRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgLy8gIEdBIG1heSBpbnRyb2R1Y2UgcmVzcG9uc2Uub3V0cHV0X2F1ZGlvX3RyYW5zY3JpcHQuZG9uZVxuICAgIHR5cGU6IHoubGl0ZXJhbCgncmVzcG9uc2Uub3V0cHV0X2F1ZGlvX3RyYW5zY3JpcHQuZG9uZScpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLFxuICAgIGl0ZW1faWQ6IHouc3RyaW5nKCksXG4gICAgY29udGVudF9pbmRleDogei5udW1iZXIoKSxcbiAgICB0cmFuc2NyaXB0OiB6LnN0cmluZygpLFxuICAgIG91dHB1dF9pbmRleDogei5udW1iZXIoKSxcbiAgICByZXNwb25zZV9pZDogei5zdHJpbmcoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IHJlc3BvbnNlQ29udGVudFBhcnRBZGRlZEV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgncmVzcG9uc2UuY29udGVudF9wYXJ0LmFkZGVkJyksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCksXG4gICAgaXRlbV9pZDogei5zdHJpbmcoKSxcbiAgICBjb250ZW50X2luZGV4OiB6Lm51bWJlcigpLFxuICAgIG91dHB1dF9pbmRleDogei5udW1iZXIoKSxcbiAgICByZXNwb25zZV9pZDogei5zdHJpbmcoKSxcbiAgICBwYXJ0OiB6Lm9iamVjdCh7XG4gICAgICAgIGF1ZGlvOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgICAgIHRleHQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICAgICAgdHJhbnNjcmlwdDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgICAgICB0eXBlOiB6LmVudW0oWyd0ZXh0JywgJ2F1ZGlvJ10pLm9wdGlvbmFsKCksXG4gICAgfSksXG59KTtcbmV4cG9ydCBjb25zdCByZXNwb25zZUNvbnRlbnRQYXJ0RG9uZUV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgncmVzcG9uc2UuY29udGVudF9wYXJ0LmRvbmUnKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKSxcbiAgICBpdGVtX2lkOiB6LnN0cmluZygpLFxuICAgIGNvbnRlbnRfaW5kZXg6IHoubnVtYmVyKCksXG4gICAgb3V0cHV0X2luZGV4OiB6Lm51bWJlcigpLFxuICAgIHJlc3BvbnNlX2lkOiB6LnN0cmluZygpLFxuICAgIHBhcnQ6IHoub2JqZWN0KHtcbiAgICAgICAgYXVkaW86IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICAgICAgdGV4dDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgICAgICB0cmFuc2NyaXB0OiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgICAgIHR5cGU6IHouZW51bShbJ3RleHQnLCAnYXVkaW8nXSkub3B0aW9uYWwoKSxcbiAgICB9KSxcbn0pO1xuZXhwb3J0IGNvbnN0IHJlc3BvbnNlQ3JlYXRlZEV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgncmVzcG9uc2UuY3JlYXRlZCcpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLFxuICAgIHJlc3BvbnNlOiByZWFsdGltZVJlc3BvbnNlLFxufSk7XG5leHBvcnQgY29uc3QgcmVzcG9uc2VEb25lRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdyZXNwb25zZS5kb25lJyksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCksXG4gICAgcmVzcG9uc2U6IHJlYWx0aW1lUmVzcG9uc2UsXG59KTtcbmV4cG9ydCBjb25zdCByZXNwb25zZUZ1bmN0aW9uQ2FsbEFyZ3VtZW50c0RlbHRhRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdyZXNwb25zZS5mdW5jdGlvbl9jYWxsX2FyZ3VtZW50cy5kZWx0YScpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLFxuICAgIGl0ZW1faWQ6IHouc3RyaW5nKCksXG4gICAgY2FsbF9pZDogei5zdHJpbmcoKSxcbiAgICBkZWx0YTogei5zdHJpbmcoKSxcbiAgICBvdXRwdXRfaW5kZXg6IHoubnVtYmVyKCksXG4gICAgcmVzcG9uc2VfaWQ6IHouc3RyaW5nKCksXG59KTtcbmV4cG9ydCBjb25zdCByZXNwb25zZUZ1bmN0aW9uQ2FsbEFyZ3VtZW50c0RvbmVFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ3Jlc3BvbnNlLmZ1bmN0aW9uX2NhbGxfYXJndW1lbnRzLmRvbmUnKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKSxcbiAgICBpdGVtX2lkOiB6LnN0cmluZygpLFxuICAgIGNhbGxfaWQ6IHouc3RyaW5nKCksXG4gICAgYXJndW1lbnRzOiB6LnN0cmluZygpLFxuICAgIG91dHB1dF9pbmRleDogei5udW1iZXIoKSxcbiAgICByZXNwb25zZV9pZDogei5zdHJpbmcoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IHJlc3BvbnNlT3V0cHV0SXRlbUFkZGVkRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdyZXNwb25zZS5vdXRwdXRfaXRlbS5hZGRlZCcpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLFxuICAgIGl0ZW06IGNvbnZlcnNhdGlvbkl0ZW1TY2hlbWEsXG4gICAgb3V0cHV0X2luZGV4OiB6Lm51bWJlcigpLFxuICAgIHJlc3BvbnNlX2lkOiB6LnN0cmluZygpLFxufSk7XG5leHBvcnQgY29uc3QgcmVzcG9uc2VPdXRwdXRJdGVtRG9uZUV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgncmVzcG9uc2Uub3V0cHV0X2l0ZW0uZG9uZScpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLFxuICAgIGl0ZW06IGNvbnZlcnNhdGlvbkl0ZW1TY2hlbWEsXG4gICAgb3V0cHV0X2luZGV4OiB6Lm51bWJlcigpLFxuICAgIHJlc3BvbnNlX2lkOiB6LnN0cmluZygpLFxufSk7XG5leHBvcnQgY29uc3QgcmVzcG9uc2VUZXh0RGVsdGFFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ3Jlc3BvbnNlLm91dHB1dF90ZXh0LmRlbHRhJyksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCksXG4gICAgaXRlbV9pZDogei5zdHJpbmcoKSxcbiAgICBjb250ZW50X2luZGV4OiB6Lm51bWJlcigpLFxuICAgIGRlbHRhOiB6LnN0cmluZygpLFxuICAgIG91dHB1dF9pbmRleDogei5udW1iZXIoKSxcbiAgICByZXNwb25zZV9pZDogei5zdHJpbmcoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IHJlc3BvbnNlVGV4dERvbmVFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICAvLyBObyByZW5hbWUgc3BlY2lmaWVkIGZvciBkb25lOyBrZWVwIHJlc3BvbnNlLnRleHQuZG9uZVxuICAgIHR5cGU6IHoubGl0ZXJhbCgncmVzcG9uc2Uub3V0cHV0X3RleHQuZG9uZScpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLFxuICAgIGl0ZW1faWQ6IHouc3RyaW5nKCksXG4gICAgY29udGVudF9pbmRleDogei5udW1iZXIoKSxcbiAgICB0ZXh0OiB6LnN0cmluZygpLFxuICAgIG91dHB1dF9pbmRleDogei5udW1iZXIoKSxcbiAgICByZXNwb25zZV9pZDogei5zdHJpbmcoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IHNlc3Npb25DcmVhdGVkRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdzZXNzaW9uLmNyZWF0ZWQnKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKSxcbiAgICBzZXNzaW9uOiB6LmFueSgpLFxufSk7XG5leHBvcnQgY29uc3Qgc2Vzc2lvblVwZGF0ZWRFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ3Nlc3Npb24udXBkYXRlZCcpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLFxuICAgIHNlc3Npb246IHouYW55KCksXG59KTtcbmV4cG9ydCBjb25zdCByZXNwb25zZUNhbmNlbEV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgncmVzcG9uc2UuY2FuY2VsJyksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICByZXNwb25zZV9pZDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxufSk7XG5leHBvcnQgY29uc3QgcmVzcG9uc2VDcmVhdGVFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ3Jlc3BvbnNlLmNyZWF0ZScpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgcmVzcG9uc2U6IHouYW55KCkub3B0aW9uYWwoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IHNlc3Npb25VcGRhdGVFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ3Nlc3Npb24udXBkYXRlJyksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICBzZXNzaW9uOiB6LmFueSgpLFxufSk7XG5leHBvcnQgY29uc3QgbWNwTGlzdFRvb2xzSW5Qcm9ncmVzc0V2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnbWNwX2xpc3RfdG9vbHMuaW5fcHJvZ3Jlc3MnKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgIGl0ZW1faWQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IG1jcExpc3RUb29sc0NvbXBsZXRlZEV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnbWNwX2xpc3RfdG9vbHMuY29tcGxldGVkJyksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICBpdGVtX2lkOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG59KTtcbmV4cG9ydCBjb25zdCByZXNwb25zZU1jcENhbGxBcmd1bWVudHNEZWx0YUV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgncmVzcG9uc2UubWNwX2NhbGxfYXJndW1lbnRzLmRlbHRhJyksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCksXG4gICAgcmVzcG9uc2VfaWQ6IHouc3RyaW5nKCksXG4gICAgaXRlbV9pZDogei5zdHJpbmcoKSxcbiAgICBvdXRwdXRfaW5kZXg6IHoubnVtYmVyKCksXG4gICAgZGVsdGE6IHouc3RyaW5nKCksXG4gICAgb2JmdXNjYXRpb246IHouc3RyaW5nKCksXG59KTtcbmV4cG9ydCBjb25zdCByZXNwb25zZU1jcENhbGxBcmd1bWVudHNEb25lRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdyZXNwb25zZS5tY3BfY2FsbF9hcmd1bWVudHMuZG9uZScpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLFxuICAgIHJlc3BvbnNlX2lkOiB6LnN0cmluZygpLFxuICAgIGl0ZW1faWQ6IHouc3RyaW5nKCksXG4gICAgb3V0cHV0X2luZGV4OiB6Lm51bWJlcigpLFxuICAgIGFyZ3VtZW50czogei5zdHJpbmcoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IHJlc3BvbnNlTWNwQ2FsbEluUHJvZ3Jlc3NFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ3Jlc3BvbnNlLm1jcF9jYWxsLmluX3Byb2dyZXNzJyksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCksXG4gICAgb3V0cHV0X2luZGV4OiB6Lm51bWJlcigpLFxuICAgIGl0ZW1faWQ6IHouc3RyaW5nKCksXG59KTtcbmV4cG9ydCBjb25zdCByZXNwb25zZU1jcENhbGxDb21wbGV0ZWRFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ3Jlc3BvbnNlLm1jcF9jYWxsLmNvbXBsZXRlZCcpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLFxuICAgIG91dHB1dF9pbmRleDogei5udW1iZXIoKSxcbiAgICBpdGVtX2lkOiB6LnN0cmluZygpLFxufSk7XG5leHBvcnQgY29uc3QgbWNwTGlzdFRvb2xzRmFpbGVkRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdtY3BfbGlzdF90b29scy5mYWlsZWQnKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgIGl0ZW1faWQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbn0pO1xuLyoqXG4gKiBUaGlzIHNjaGVtYSBpcyB1c2VkIGlmIGFuIGV2ZW50IGlzIHVua25vd24gdG8gdGhlIGNsaWVudC4gVGhlIFJlYWx0aW1lIEFQSSBtaWdodCBpbnRyb2R1Y2VcbiAqIG5ldyBldmVudHMgYXQgc29tZSBwb2ludCBhbmQgd2Ugc2hvdWxkIGhhbmRsZSB0aGVtIGdyYWNlZnVsbHkgYnkgdHJlYXRpbmcgdGhlbSBhcyBnZW5lcmljIGV2ZW50c1xuICogb25seSByZXF1aXJpbmcgYSB0eXBlIGFuZCBhbiBvcHRpb25hbCBldmVudF9pZC5cbiAqL1xuZXhwb3J0IGNvbnN0IGdlbmVyaWNFdmVudFNjaGVtYSA9IHpcbiAgICAub2JqZWN0KHtcbiAgICB0eXBlOiB6LnN0cmluZygpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLm9wdGlvbmFsKCkubnVsbGFibGUoKSxcbn0pXG4gICAgLnBhc3N0aHJvdWdoKCk7XG5leHBvcnQgY29uc3QgcmVhbHRpbWVTZXJ2ZXJFdmVudFNjaGVtYSA9IHouZGlzY3JpbWluYXRlZFVuaW9uKCd0eXBlJywgW1xuICAgIGNvbnZlcnNhdGlvbkNyZWF0ZWRFdmVudFNjaGVtYSxcbiAgICBjb252ZXJzYXRpb25JdGVtQWRkZWRFdmVudFNjaGVtYSxcbiAgICBjb252ZXJzYXRpb25JdGVtRG9uZUV2ZW50U2NoZW1hLFxuICAgIGNvbnZlcnNhdGlvbkl0ZW1EZWxldGVkRXZlbnRTY2hlbWEsXG4gICAgY29udmVyc2F0aW9uSXRlbUlucHV0QXVkaW9UcmFuc2NyaXB0aW9uQ29tcGxldGVkRXZlbnRTY2hlbWEsXG4gICAgY29udmVyc2F0aW9uSXRlbUlucHV0QXVkaW9UcmFuc2NyaXB0aW9uRGVsdGFFdmVudFNjaGVtYSxcbiAgICBjb252ZXJzYXRpb25JdGVtSW5wdXRBdWRpb1RyYW5zY3JpcHRpb25GYWlsZWRFdmVudFNjaGVtYSxcbiAgICBjb252ZXJzYXRpb25JdGVtUmV0cmlldmVkRXZlbnRTY2hlbWEsXG4gICAgY29udmVyc2F0aW9uSXRlbVRydW5jYXRlZEV2ZW50U2NoZW1hLFxuICAgIGVycm9yRXZlbnRTY2hlbWEsXG4gICAgaW5wdXRBdWRpb0J1ZmZlckNsZWFyZWRFdmVudFNjaGVtYSxcbiAgICBpbnB1dEF1ZGlvQnVmZmVyQ29tbWl0dGVkRXZlbnRTY2hlbWEsXG4gICAgaW5wdXRBdWRpb0J1ZmZlclNwZWVjaFN0YXJ0ZWRFdmVudFNjaGVtYSxcbiAgICBpbnB1dEF1ZGlvQnVmZmVyU3BlZWNoU3RvcHBlZEV2ZW50U2NoZW1hLFxuICAgIG91dHB1dEF1ZGlvQnVmZmVyU3RhcnRlZEV2ZW50U2NoZW1hLFxuICAgIG91dHB1dEF1ZGlvQnVmZmVyU3RvcHBlZEV2ZW50U2NoZW1hLFxuICAgIG91dHB1dEF1ZGlvQnVmZmVyQ2xlYXJlZEV2ZW50U2NoZW1hLFxuICAgIHJhdGVMaW1pdHNVcGRhdGVkRXZlbnRTY2hlbWEsXG4gICAgcmVzcG9uc2VBdWRpb0RlbHRhRXZlbnRTY2hlbWEsXG4gICAgcmVzcG9uc2VBdWRpb0RvbmVFdmVudFNjaGVtYSxcbiAgICByZXNwb25zZUF1ZGlvVHJhbnNjcmlwdERlbHRhRXZlbnRTY2hlbWEsXG4gICAgcmVzcG9uc2VBdWRpb1RyYW5zY3JpcHREb25lRXZlbnRTY2hlbWEsXG4gICAgcmVzcG9uc2VDb250ZW50UGFydEFkZGVkRXZlbnRTY2hlbWEsXG4gICAgcmVzcG9uc2VDb250ZW50UGFydERvbmVFdmVudFNjaGVtYSxcbiAgICByZXNwb25zZUNyZWF0ZWRFdmVudFNjaGVtYSxcbiAgICByZXNwb25zZURvbmVFdmVudFNjaGVtYSxcbiAgICByZXNwb25zZUZ1bmN0aW9uQ2FsbEFyZ3VtZW50c0RlbHRhRXZlbnRTY2hlbWEsXG4gICAgcmVzcG9uc2VGdW5jdGlvbkNhbGxBcmd1bWVudHNEb25lRXZlbnRTY2hlbWEsXG4gICAgcmVzcG9uc2VPdXRwdXRJdGVtQWRkZWRFdmVudFNjaGVtYSxcbiAgICByZXNwb25zZU91dHB1dEl0ZW1Eb25lRXZlbnRTY2hlbWEsXG4gICAgcmVzcG9uc2VUZXh0RGVsdGFFdmVudFNjaGVtYSxcbiAgICByZXNwb25zZVRleHREb25lRXZlbnRTY2hlbWEsXG4gICAgc2Vzc2lvbkNyZWF0ZWRFdmVudFNjaGVtYSxcbiAgICBzZXNzaW9uVXBkYXRlZEV2ZW50U2NoZW1hLFxuICAgIG1jcExpc3RUb29sc0luUHJvZ3Jlc3NFdmVudFNjaGVtYSxcbiAgICBtY3BMaXN0VG9vbHNDb21wbGV0ZWRFdmVudFNjaGVtYSxcbiAgICBtY3BMaXN0VG9vbHNGYWlsZWRFdmVudFNjaGVtYSxcbiAgICByZXNwb25zZU1jcENhbGxBcmd1bWVudHNEZWx0YUV2ZW50U2NoZW1hLFxuICAgIHJlc3BvbnNlTWNwQ2FsbEFyZ3VtZW50c0RvbmVFdmVudFNjaGVtYSxcbiAgICByZXNwb25zZU1jcENhbGxJblByb2dyZXNzRXZlbnRTY2hlbWEsXG4gICAgcmVzcG9uc2VNY3BDYWxsQ29tcGxldGVkRXZlbnRTY2hlbWEsXG5dKTtcbmV4cG9ydCBjb25zdCByZWFsdGltZUNsaWVudEV2ZW50U2NoZW1hID0gei5kaXNjcmltaW5hdGVkVW5pb24oJ3R5cGUnLCBbXG4gICAgY29udmVyc2F0aW9uSXRlbUNyZWF0ZUV2ZW50U2NoZW1hLFxuICAgIGNvbnZlcnNhdGlvbkl0ZW1EZWxldGVFdmVudFNjaGVtYSxcbiAgICBjb252ZXJzYXRpb25JdGVtUmV0cmlldmVFdmVudFNjaGVtYSxcbiAgICBjb252ZXJzYXRpb25JdGVtVHJ1bmNhdGVFdmVudFNjaGVtYSxcbiAgICBpbnB1dEF1ZGlvQnVmZmVyQXBwZW5kRXZlbnRTY2hlbWEsXG4gICAgaW5wdXRBdWRpb0J1ZmZlckNsZWFyRXZlbnRTY2hlbWEsXG4gICAgaW5wdXRBdWRpb0J1ZmZlckNvbW1pdEV2ZW50U2NoZW1hLFxuICAgIHJlc3BvbnNlQ2FuY2VsRXZlbnRTY2hlbWEsXG4gICAgcmVzcG9uc2VDcmVhdGVFdmVudFNjaGVtYSxcbiAgICBzZXNzaW9uVXBkYXRlRXZlbnRTY2hlbWEsXG5dKTtcbi8qKlxuICogUGFyc2VzIGEgcmVhbHRpbWUgZXZlbnQgZnJvbSB0aGUgc2VydmVyLiBJZiB0aGUgZXZlbnQgaXMgdW5rbm93biB0byB0aGUgY2xpZW50LCBpdCB3aWxsIGJlIHRyZWF0ZWQgYXMgYSBnZW5lcmljIGV2ZW50LlxuICogQHBhcmFtIGV2ZW50IC0gVGhlIGV2ZW50IHRvIHBhcnNlLlxuICogQHJldHVybnMgVGhlIHBhcnNlZCBldmVudCBvciBudWxsIGlmIHRoZSBldmVudCBpcyB1bmtub3duIHRvIHRoZSBjbGllbnQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBwYXJzZVJlYWx0aW1lRXZlbnQoZXZlbnQpIHtcbiAgICBjb25zdCByYXcgPSBKU09OLnBhcnNlKGV2ZW50LmRhdGEudG9TdHJpbmcoKSk7XG4gICAgY29uc3QgcGFyc2VkID0gcmVhbHRpbWVTZXJ2ZXJFdmVudFNjaGVtYS5zYWZlUGFyc2UocmF3KTtcbiAgICBpZiAoIXBhcnNlZC5zdWNjZXNzKSB7XG4gICAgICAgIGNvbnN0IGdlbmVyaWNQYXJzZWQgPSBnZW5lcmljRXZlbnRTY2hlbWEuc2FmZVBhcnNlKHJhdyk7XG4gICAgICAgIGlmIChnZW5lcmljUGFyc2VkLnN1Y2Nlc3MpIHtcbiAgICAgICAgICAgIHJldHVybiB7IGRhdGE6IGdlbmVyaWNQYXJzZWQuZGF0YSwgaXNHZW5lcmljOiB0cnVlIH07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHsgZGF0YTogbnVsbCwgaXNHZW5lcmljOiB0cnVlIH07XG4gICAgfVxuICAgIHJldHVybiB7IGRhdGE6IHBhcnNlZC5kYXRhLCBpc0dlbmVyaWM6IGZhbHNlIH07XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1vcGVuYWlSZWFsdGltZUV2ZW50cy5tanMubWFwIiwiaW1wb3J0IHsgUnVudGltZUV2ZW50RW1pdHRlciwgVXNhZ2UgfSBmcm9tICdAb3BlbmFpL2FnZW50cy1jb3JlJztcbmltcG9ydCB7IHRvTmV3U2Vzc2lvbkNvbmZpZywgfSBmcm9tIFwiLi9jbGllbnRNZXNzYWdlcy5tanNcIjtcbmltcG9ydCB7IHJlYWx0aW1lTWNwQ2FsbEFwcHJvdmFsUmVxdWVzdEl0ZW0sIHJlYWx0aW1lTWNwQ2FsbEl0ZW0sIHJlYWx0aW1lTWVzc2FnZUl0ZW1TY2hlbWEsIHJlYWx0aW1lVG9vbENhbGxJdGVtLCB9IGZyb20gXCIuL2l0ZW1zLm1qc1wiO1xuaW1wb3J0IGxvZ2dlciBmcm9tIFwiLi9sb2dnZXIubWpzXCI7XG5pbXBvcnQgeyBwYXJzZVJlYWx0aW1lRXZlbnQsIHJlc3BvbnNlRG9uZUV2ZW50U2NoZW1hLCB9IGZyb20gXCIuL29wZW5haVJlYWx0aW1lRXZlbnRzLm1qc1wiO1xuaW1wb3J0IHsgYXJyYXlCdWZmZXJUb0Jhc2U2NCwgZGlmZlJlYWx0aW1lSGlzdG9yeSB9IGZyb20gXCIuL3V0aWxzLm1qc1wiO1xuaW1wb3J0IHsgRXZlbnRFbWl0dGVyRGVsZWdhdGUgfSBmcm9tICdAb3BlbmFpL2FnZW50cy1jb3JlL3V0aWxzJztcbi8qKlxuICogVGhlIGRlZmF1bHQgbW9kZWwgdGhhdCBpcyB1c2VkIGR1cmluZyB0aGUgY29ubmVjdGlvbiBpZiBubyBtb2RlbCBpcyBwcm92aWRlZC5cbiAqL1xuZXhwb3J0IGNvbnN0IERFRkFVTFRfT1BFTkFJX1JFQUxUSU1FX01PREVMID0gJ2dwdC1yZWFsdGltZSc7XG4vKipcbiAqIFRoZSBkZWZhdWx0IHNlc3Npb24gY29uZmlnIHRoYXQgZ2V0cyBzZW5kIG92ZXIgZHVyaW5nIHNlc3Npb24gY29ubmVjdGlvbiB1bmxlc3Mgb3ZlcnJpZGRlblxuICogYnkgdGhlIHVzZXIuXG4gKi9cbmV4cG9ydCBjb25zdCBERUZBVUxUX09QRU5BSV9SRUFMVElNRV9TRVNTSU9OX0NPTkZJRyA9IHtcbiAgICBvdXRwdXRNb2RhbGl0aWVzOiBbJ2F1ZGlvJ10sXG4gICAgYXVkaW86IHtcbiAgICAgICAgaW5wdXQ6IHtcbiAgICAgICAgICAgIGZvcm1hdDogeyB0eXBlOiAnYXVkaW8vcGNtJywgcmF0ZTogMjQwMDAgfSxcbiAgICAgICAgICAgIHRyYW5zY3JpcHRpb246IHsgbW9kZWw6ICdncHQtNG8tbWluaS10cmFuc2NyaWJlJyB9LFxuICAgICAgICAgICAgdHVybkRldGVjdGlvbjogeyB0eXBlOiAnc2VtYW50aWNfdmFkJyB9LFxuICAgICAgICAgICAgbm9pc2VSZWR1Y3Rpb246IG51bGwsXG4gICAgICAgIH0sXG4gICAgICAgIG91dHB1dDoge1xuICAgICAgICAgICAgZm9ybWF0OiB7IHR5cGU6ICdhdWRpby9wY20nLCByYXRlOiAyNDAwMCB9LFxuICAgICAgICAgICAgc3BlZWQ6IDEsXG4gICAgICAgIH0sXG4gICAgfSxcbn07XG5leHBvcnQgY2xhc3MgT3BlbkFJUmVhbHRpbWVCYXNlIGV4dGVuZHMgRXZlbnRFbWl0dGVyRGVsZWdhdGUge1xuICAgICNtb2RlbDtcbiAgICAjYXBpS2V5O1xuICAgICN0cmFjaW5nQ29uZmlnID0gbnVsbDtcbiAgICAjcmF3U2Vzc2lvbkNvbmZpZyA9IG51bGw7XG4gICAgZXZlbnRFbWl0dGVyID0gbmV3IFJ1bnRpbWVFdmVudEVtaXR0ZXIoKTtcbiAgICBjb25zdHJ1Y3RvcihvcHRpb25zID0ge30pIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy4jbW9kZWwgPSBvcHRpb25zLm1vZGVsID8/IERFRkFVTFRfT1BFTkFJX1JFQUxUSU1FX01PREVMO1xuICAgICAgICB0aGlzLiNhcGlLZXkgPSBvcHRpb25zLmFwaUtleTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIGN1cnJlbnQgbW9kZWwgdGhhdCBpcyBiZWluZyB1c2VkIGJ5IHRoZSB0cmFuc3BvcnQgbGF5ZXIuXG4gICAgICovXG4gICAgZ2V0IGN1cnJlbnRNb2RlbCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuI21vZGVsO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgY3VycmVudCBtb2RlbCB0aGF0IGlzIGJlaW5nIHVzZWQgYnkgdGhlIHRyYW5zcG9ydCBsYXllci5cbiAgICAgKiAqKk5vdGUqKjogVGhlIG1vZGVsIGNhbm5vdCBiZSBjaGFuZ2VkIG1pZCBjb252ZXJzYXRpb24uXG4gICAgICovXG4gICAgc2V0IGN1cnJlbnRNb2RlbChtb2RlbCkge1xuICAgICAgICB0aGlzLiNtb2RlbCA9IG1vZGVsO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBIb29rIGZvciBzdWJjbGFzc2VzIHRvIGNsZWFuIHVwIHRyYW5zcG9ydC1zcGVjaWZpYyBzdGF0ZSB3aGVuIGF1ZGlvXG4gICAgICogcGxheWJhY2sgZmluaXNoZXMuIERlZmF1bHRzIHRvIGEgbm8tb3AuXG4gICAgICovXG4gICAgX2FmdGVyQXVkaW9Eb25lRXZlbnQoKSB7XG4gICAgICAgIC8vIEludGVudGlvbmFsbHkgZW1wdHkuXG4gICAgfVxuICAgIGdldCBfcmF3U2Vzc2lvbkNvbmZpZygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuI3Jhd1Nlc3Npb25Db25maWcgPz8gbnVsbDtcbiAgICB9XG4gICAgYXN5bmMgX2dldEFwaUtleShvcHRpb25zKSB7XG4gICAgICAgIGNvbnN0IGFwaUtleSA9IG9wdGlvbnMuYXBpS2V5ID8/IHRoaXMuI2FwaUtleTtcbiAgICAgICAgaWYgKHR5cGVvZiBhcGlLZXkgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIHJldHVybiBhd2FpdCBhcGlLZXkoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYXBpS2V5O1xuICAgIH1cbiAgICBfb25NZXNzYWdlKGV2ZW50KSB7XG4gICAgICAgIGNvbnN0IHsgZGF0YTogcGFyc2VkLCBpc0dlbmVyaWMgfSA9IHBhcnNlUmVhbHRpbWVFdmVudChldmVudCk7XG4gICAgICAgIGlmIChwYXJzZWQgPT09IG51bGwpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmVtaXQoJyonLCBwYXJzZWQpO1xuICAgICAgICBpZiAoaXNHZW5lcmljKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBhcnNlZC50eXBlID09PSAnZXJyb3InKSB7XG4gICAgICAgICAgICB0aGlzLmVtaXQoJ2Vycm9yJywgeyB0eXBlOiAnZXJyb3InLCBlcnJvcjogcGFyc2VkIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5lbWl0KHBhcnNlZC50eXBlLCBwYXJzZWQpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwYXJzZWQudHlwZSA9PT0gJ3Jlc3BvbnNlLmNyZWF0ZWQnKSB7XG4gICAgICAgICAgICB0aGlzLmVtaXQoJ3R1cm5fc3RhcnRlZCcsIHtcbiAgICAgICAgICAgICAgICB0eXBlOiAncmVzcG9uc2Vfc3RhcnRlZCcsXG4gICAgICAgICAgICAgICAgcHJvdmlkZXJEYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgIC4uLnBhcnNlZCxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBhcnNlZC50eXBlID09PSAnc2Vzc2lvbi51cGRhdGVkJykge1xuICAgICAgICAgICAgdGhpcy4jcmF3U2Vzc2lvbkNvbmZpZyA9IHBhcnNlZC5zZXNzaW9uO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwYXJzZWQudHlwZSA9PT0gJ3Jlc3BvbnNlLmRvbmUnKSB7XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHJlc3BvbnNlRG9uZUV2ZW50U2NoZW1hLnNhZmVQYXJzZShwYXJzZWQpO1xuICAgICAgICAgICAgaWYgKCFyZXNwb25zZS5zdWNjZXNzKSB7XG4gICAgICAgICAgICAgICAgbG9nZ2VyLmVycm9yKCdFcnJvciBwYXJzaW5nIHJlc3BvbnNlIGRvbmUgZXZlbnQnLCByZXNwb25zZS5lcnJvcik7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgaW5wdXRUb2tlbnMgPSByZXNwb25zZS5kYXRhLnJlc3BvbnNlLnVzYWdlPy5pbnB1dF90b2tlbnMgPz8gMDtcbiAgICAgICAgICAgIGNvbnN0IG91dHB1dFRva2VucyA9IHJlc3BvbnNlLmRhdGEucmVzcG9uc2UudXNhZ2U/Lm91dHB1dF90b2tlbnMgPz8gMDtcbiAgICAgICAgICAgIGNvbnN0IHRvdGFsVG9rZW5zID0gaW5wdXRUb2tlbnMgKyBvdXRwdXRUb2tlbnM7XG4gICAgICAgICAgICBjb25zdCB1c2FnZSA9IG5ldyBVc2FnZSh7XG4gICAgICAgICAgICAgICAgaW5wdXRUb2tlbnMsXG4gICAgICAgICAgICAgICAgaW5wdXRUb2tlbnNEZXRhaWxzOiByZXNwb25zZS5kYXRhLnJlc3BvbnNlLnVzYWdlPy5pbnB1dF90b2tlbl9kZXRhaWxzID8/IHt9LFxuICAgICAgICAgICAgICAgIG91dHB1dFRva2VucyxcbiAgICAgICAgICAgICAgICBvdXRwdXRUb2tlbnNEZXRhaWxzOiByZXNwb25zZS5kYXRhLnJlc3BvbnNlLnVzYWdlPy5vdXRwdXRfdG9rZW5fZGV0YWlscyA/PyB7fSxcbiAgICAgICAgICAgICAgICB0b3RhbFRva2VucyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5lbWl0KCd1c2FnZV91cGRhdGUnLCB1c2FnZSk7XG4gICAgICAgICAgICB0aGlzLmVtaXQoJ3R1cm5fZG9uZScsIHtcbiAgICAgICAgICAgICAgICB0eXBlOiAncmVzcG9uc2VfZG9uZScsXG4gICAgICAgICAgICAgICAgcmVzcG9uc2U6IHtcbiAgICAgICAgICAgICAgICAgICAgaWQ6IHJlc3BvbnNlLmRhdGEucmVzcG9uc2UuaWQgPz8gJycsXG4gICAgICAgICAgICAgICAgICAgIG91dHB1dDogcmVzcG9uc2UuZGF0YS5yZXNwb25zZS5vdXRwdXQgPz8gW10sXG4gICAgICAgICAgICAgICAgICAgIHVzYWdlOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbnB1dFRva2VucyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0VG9rZW5zRGV0YWlsczogcmVzcG9uc2UuZGF0YS5yZXNwb25zZS51c2FnZT8uaW5wdXRfdG9rZW5fZGV0YWlscyA/PyB7fSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG91dHB1dFRva2VucyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG91dHB1dFRva2Vuc0RldGFpbHM6IHJlc3BvbnNlLmRhdGEucmVzcG9uc2UudXNhZ2U/Lm91dHB1dF90b2tlbl9kZXRhaWxzID8/IHt9LFxuICAgICAgICAgICAgICAgICAgICAgICAgdG90YWxUb2tlbnMsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwYXJzZWQudHlwZSA9PT0gJ3Jlc3BvbnNlLm91dHB1dF9hdWRpby5kb25lJykge1xuICAgICAgICAgICAgdGhpcy5lbWl0KCdhdWRpb19kb25lJyk7XG4gICAgICAgICAgICB0aGlzLl9hZnRlckF1ZGlvRG9uZUV2ZW50KCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBhcnNlZC50eXBlID09PSAnY29udmVyc2F0aW9uLml0ZW0uZGVsZXRlZCcpIHtcbiAgICAgICAgICAgIHRoaXMuZW1pdCgnaXRlbV9kZWxldGVkJywge1xuICAgICAgICAgICAgICAgIGl0ZW1JZDogcGFyc2VkLml0ZW1faWQsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAocGFyc2VkLnR5cGUgPT09ICdjb252ZXJzYXRpb24uaXRlbS5pbnB1dF9hdWRpb190cmFuc2NyaXB0aW9uLmNvbXBsZXRlZCcgfHxcbiAgICAgICAgICAgIHBhcnNlZC50eXBlID09PSAnY29udmVyc2F0aW9uLml0ZW0udHJ1bmNhdGVkJykge1xuICAgICAgICAgICAgLy8gcmlnaHQgbm93IHJhdGhlciB0aGFuIGtlZXBpbmcgdHJhY2sgb2YgcGFydGlhbHMgYW5kIHJlYnVpbGRpbmcgdGhlIGl0ZW0gd2VcbiAgICAgICAgICAgIC8vIHdpbGwgcmV0cmlldmUgaXQgaW5zdGVhZCB3aGljaCB0cmlnZ2VycyB0aGUgYGNvbnZlcnNhdGlvbi5pdGVtLnJldHJpZXZlZGAgZXZlbnQgYmVsb3dcbiAgICAgICAgICAgIHRoaXMuc2VuZEV2ZW50KHtcbiAgICAgICAgICAgICAgICB0eXBlOiAnY29udmVyc2F0aW9uLml0ZW0ucmV0cmlldmUnLFxuICAgICAgICAgICAgICAgIGl0ZW1faWQ6IHBhcnNlZC5pdGVtX2lkLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBhcnNlZC50eXBlID09PSAnY29udmVyc2F0aW9uLml0ZW0uaW5wdXRfYXVkaW9fdHJhbnNjcmlwdGlvbi5kZWx0YScgfHxcbiAgICAgICAgICAgIHBhcnNlZC50eXBlID09PSAncmVzcG9uc2Uub3V0cHV0X3RleHQuZGVsdGEnIHx8XG4gICAgICAgICAgICBwYXJzZWQudHlwZSA9PT0gJ3Jlc3BvbnNlLm91dHB1dF9hdWRpb190cmFuc2NyaXB0LmRlbHRhJyB8fFxuICAgICAgICAgICAgcGFyc2VkLnR5cGUgPT09ICdyZXNwb25zZS5mdW5jdGlvbl9jYWxsX2FyZ3VtZW50cy5kZWx0YScpIHtcbiAgICAgICAgICAgIGlmIChwYXJzZWQudHlwZSA9PT0gJ3Jlc3BvbnNlLm91dHB1dF9hdWRpb190cmFuc2NyaXB0LmRlbHRhJykge1xuICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgnYXVkaW9fdHJhbnNjcmlwdF9kZWx0YScsIHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3RyYW5zY3JpcHRfZGVsdGEnLFxuICAgICAgICAgICAgICAgICAgICBkZWx0YTogcGFyc2VkLmRlbHRhLFxuICAgICAgICAgICAgICAgICAgICBpdGVtSWQ6IHBhcnNlZC5pdGVtX2lkLFxuICAgICAgICAgICAgICAgICAgICByZXNwb25zZUlkOiBwYXJzZWQucmVzcG9uc2VfaWQsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBubyBzdXBwb3J0IGZvciBwYXJ0aWFsIHRyYW5zY3JpcHRzIHlldC5cbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAocGFyc2VkLnR5cGUgPT09ICdjb252ZXJzYXRpb24uaXRlbS5hZGRlZCcgfHxcbiAgICAgICAgICAgIHBhcnNlZC50eXBlID09PSAnY29udmVyc2F0aW9uLml0ZW0uZG9uZScgfHxcbiAgICAgICAgICAgIHBhcnNlZC50eXBlID09PSAnY29udmVyc2F0aW9uLml0ZW0ucmV0cmlldmVkJykge1xuICAgICAgICAgICAgLy8gSGFuZGxlIE1DUCBsaXN0IHRvb2xzIGl0ZW1zIChvbmx5IGFjdCB3aGVuIGRvbmUgdG8gZW5zdXJlIHRvb2xzIGFyZSBwcmVzZW50KVxuICAgICAgICAgICAgaWYgKHBhcnNlZC5pdGVtLnR5cGUgPT09ICdtY3BfbGlzdF90b29scycgJiZcbiAgICAgICAgICAgICAgICBwYXJzZWQudHlwZSA9PT0gJ2NvbnZlcnNhdGlvbi5pdGVtLmRvbmUnKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgc2VydmVyTGFiZWwgPSBwYXJzZWQuaXRlbS5zZXJ2ZXJfbGFiZWwgPz8gJyc7XG4gICAgICAgICAgICAgICAgY29uc3QgdG9vbHMgPSAocGFyc2VkLml0ZW0udG9vbHMgPz8gW10pO1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgnbWNwX3Rvb2xzX2xpc3RlZCcsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlcnZlckxhYmVsLFxuICAgICAgICAgICAgICAgICAgICAgICAgdG9vbHMsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgIGxvZ2dlci5lcnJvcignRXJyb3IgZW1pdHRpbmcgbWNwX3Rvb2xzX2xpc3RlZCcsIGVyciwgcGFyc2VkLml0ZW0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBXZSBkbyBub3QgYWRkIHRoaXMgaXRlbSB0byBoaXN0b3J5OyBpdCdzIGEgdHJhbnNwb3J0LWxldmVsIHNpZGUtY2hhbm5lbC5cbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocGFyc2VkLml0ZW0udHlwZSA9PT0gJ21lc3NhZ2UnKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcHJldmlvdXNJdGVtSWQgPSBwYXJzZWQudHlwZSA9PT0gJ2NvbnZlcnNhdGlvbi5pdGVtLmFkZGVkJyB8fFxuICAgICAgICAgICAgICAgICAgICBwYXJzZWQudHlwZSA9PT0gJ2NvbnZlcnNhdGlvbi5pdGVtLmRvbmUnXG4gICAgICAgICAgICAgICAgICAgID8gcGFyc2VkLnByZXZpb3VzX2l0ZW1faWRcbiAgICAgICAgICAgICAgICAgICAgOiBudWxsO1xuICAgICAgICAgICAgICAgIGNvbnN0IGl0ZW0gPSByZWFsdGltZU1lc3NhZ2VJdGVtU2NoZW1hLnBhcnNlKHtcbiAgICAgICAgICAgICAgICAgICAgaXRlbUlkOiBwYXJzZWQuaXRlbS5pZCxcbiAgICAgICAgICAgICAgICAgICAgcHJldmlvdXNJdGVtSWQsXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IHBhcnNlZC5pdGVtLnR5cGUsXG4gICAgICAgICAgICAgICAgICAgIHJvbGU6IHBhcnNlZC5pdGVtLnJvbGUsXG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6IHBhcnNlZC5pdGVtLmNvbnRlbnQsXG4gICAgICAgICAgICAgICAgICAgIHN0YXR1czogcGFyc2VkLml0ZW0uc3RhdHVzLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgnaXRlbV91cGRhdGUnLCBpdGVtKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocGFyc2VkLml0ZW0udHlwZSA9PT0gJ21jcF9hcHByb3ZhbF9yZXF1ZXN0JyAmJlxuICAgICAgICAgICAgICAgIHBhcnNlZC50eXBlID09PSAnY29udmVyc2F0aW9uLml0ZW0uZG9uZScpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBpdGVtID0gcGFyc2VkLml0ZW07XG4gICAgICAgICAgICAgICAgY29uc3QgbWNwQXBwcm92YWxSZXF1ZXN0ID0gcmVhbHRpbWVNY3BDYWxsQXBwcm92YWxSZXF1ZXN0SXRlbS5wYXJzZSh7XG4gICAgICAgICAgICAgICAgICAgIGl0ZW1JZDogaXRlbS5pZCxcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogaXRlbS50eXBlLFxuICAgICAgICAgICAgICAgICAgICBzZXJ2ZXJMYWJlbDogaXRlbS5zZXJ2ZXJfbGFiZWwsXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IGl0ZW0ubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgYXJndW1lbnRzOiBKU09OLnBhcnNlKGl0ZW0uYXJndW1lbnRzIHx8ICd7fScpLFxuICAgICAgICAgICAgICAgICAgICBhcHByb3ZlZDogaXRlbS5hcHByb3ZlZCxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ2l0ZW1fdXBkYXRlJywgbWNwQXBwcm92YWxSZXF1ZXN0KTtcbiAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ21jcF9hcHByb3ZhbF9yZXF1ZXN0JywgbWNwQXBwcm92YWxSZXF1ZXN0KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocGFyc2VkLml0ZW0udHlwZSA9PT0gJ21jcF90b29sX2NhbGwnIHx8XG4gICAgICAgICAgICAgICAgcGFyc2VkLml0ZW0udHlwZSA9PT0gJ21jcF9jYWxsJykge1xuICAgICAgICAgICAgICAgIGNvbnN0IHN0YXR1cyA9IHBhcnNlZC50eXBlID09PSAnY29udmVyc2F0aW9uLml0ZW0uZG9uZSdcbiAgICAgICAgICAgICAgICAgICAgPyAnY29tcGxldGVkJ1xuICAgICAgICAgICAgICAgICAgICA6ICdpbl9wcm9ncmVzcyc7XG4gICAgICAgICAgICAgICAgY29uc3QgbWNwQ2FsbCA9IHJlYWx0aW1lTWNwQ2FsbEl0ZW0ucGFyc2Uoe1xuICAgICAgICAgICAgICAgICAgICBpdGVtSWQ6IHBhcnNlZC5pdGVtLmlkLFxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBwYXJzZWQuaXRlbS50eXBlLFxuICAgICAgICAgICAgICAgICAgICBzdGF0dXMsXG4gICAgICAgICAgICAgICAgICAgIGFyZ3VtZW50czogcGFyc2VkLml0ZW0uYXJndW1lbnRzLFxuICAgICAgICAgICAgICAgICAgICBuYW1lOiBwYXJzZWQuaXRlbS5uYW1lLFxuICAgICAgICAgICAgICAgICAgICBvdXRwdXQ6IHBhcnNlZC5pdGVtLm91dHB1dCxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ2l0ZW1fdXBkYXRlJywgbWNwQ2FsbCk7XG4gICAgICAgICAgICAgICAgaWYgKHBhcnNlZC50eXBlID09PSAnY29udmVyc2F0aW9uLml0ZW0uZG9uZScpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5lbWl0KCdtY3BfdG9vbF9jYWxsX2NvbXBsZXRlZCcsIG1jcENhbGwpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBhcnNlZC50eXBlID09PSAncmVzcG9uc2UubWNwX2NhbGwuaW5fcHJvZ3Jlc3MnKSB7XG4gICAgICAgICAgICBjb25zdCBpdGVtID0gcGFyc2VkO1xuICAgICAgICAgICAgdGhpcy5zZW5kRXZlbnQoe1xuICAgICAgICAgICAgICAgIHR5cGU6ICdjb252ZXJzYXRpb24uaXRlbS5yZXRyaWV2ZScsXG4gICAgICAgICAgICAgICAgaXRlbV9pZDogaXRlbS5pdGVtX2lkLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBhcnNlZC50eXBlID09PSAnbWNwX2xpc3RfdG9vbHMuaW5fcHJvZ3Jlc3MnKSB7XG4gICAgICAgICAgICBjb25zdCBpdGVtID0gcGFyc2VkO1xuICAgICAgICAgICAgaWYgKGl0ZW0uaXRlbV9pZCkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2VuZEV2ZW50KHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2NvbnZlcnNhdGlvbi5pdGVtLnJldHJpZXZlJyxcbiAgICAgICAgICAgICAgICAgICAgaXRlbV9pZDogaXRlbS5pdGVtX2lkLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwYXJzZWQudHlwZSA9PT0gJ3Jlc3BvbnNlLm91dHB1dF9pdGVtLmRvbmUnIHx8XG4gICAgICAgICAgICBwYXJzZWQudHlwZSA9PT0gJ3Jlc3BvbnNlLm91dHB1dF9pdGVtLmFkZGVkJykge1xuICAgICAgICAgICAgY29uc3QgaXRlbSA9IHBhcnNlZC5pdGVtO1xuICAgICAgICAgICAgaWYgKGl0ZW0udHlwZSA9PT0gJ2Z1bmN0aW9uX2NhbGwnICYmIGl0ZW0uc3RhdHVzID09PSAnY29tcGxldGVkJykge1xuICAgICAgICAgICAgICAgIGNvbnN0IHRvb2xDYWxsID0gcmVhbHRpbWVUb29sQ2FsbEl0ZW0ucGFyc2Uoe1xuICAgICAgICAgICAgICAgICAgICBpdGVtSWQ6IGl0ZW0uaWQsXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IGl0ZW0udHlwZSxcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiAnaW5fcHJvZ3Jlc3MnLCAvLyB3ZSBzZXQgaXQgdG8gaW5fcHJvZ3Jlc3MgZm9yIHRoZSBVSSBhcyBpdCB3aWxsIG9ubHkgYmUgY29tcGxldGVkIHdpdGggdGhlIG91dHB1dFxuICAgICAgICAgICAgICAgICAgICBhcmd1bWVudHM6IGl0ZW0uYXJndW1lbnRzLFxuICAgICAgICAgICAgICAgICAgICBuYW1lOiBpdGVtLm5hbWUsXG4gICAgICAgICAgICAgICAgICAgIG91dHB1dDogbnVsbCxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ2l0ZW1fdXBkYXRlJywgdG9vbENhbGwpO1xuICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgnZnVuY3Rpb25fY2FsbCcsIHtcbiAgICAgICAgICAgICAgICAgICAgaWQ6IGl0ZW0uaWQsXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdmdW5jdGlvbl9jYWxsJyxcbiAgICAgICAgICAgICAgICAgICAgY2FsbElkOiBpdGVtLmNhbGxfaWQgPz8gJycsXG4gICAgICAgICAgICAgICAgICAgIGFyZ3VtZW50czogaXRlbS5hcmd1bWVudHMgPz8gJycsXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IGl0ZW0ubmFtZSA/PyAnJyxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoaXRlbS50eXBlID09PSAnbWNwX3Rvb2xfY2FsbCcgfHwgaXRlbS50eXBlID09PSAnbWNwX2NhbGwnKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbWNwQ2FsbCA9IHJlYWx0aW1lTWNwQ2FsbEl0ZW0ucGFyc2Uoe1xuICAgICAgICAgICAgICAgICAgICBpdGVtSWQ6IGl0ZW0uaWQsXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IGl0ZW0udHlwZSxcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiBwYXJzZWQudHlwZSA9PT0gJ3Jlc3BvbnNlLm91dHB1dF9pdGVtLmRvbmUnXG4gICAgICAgICAgICAgICAgICAgICAgICA/ICdjb21wbGV0ZWQnXG4gICAgICAgICAgICAgICAgICAgICAgICA6ICdpbl9wcm9ncmVzcycsIC8vIHdlIHNldCBpdCB0byBpbl9wcm9ncmVzcyBmb3IgdGhlIFVJIGFzIGl0IHdpbGwgb25seSBiZSBjb21wbGV0ZWQgd2l0aCB0aGUgb3V0cHV0XG4gICAgICAgICAgICAgICAgICAgIGFyZ3VtZW50czogaXRlbS5hcmd1bWVudHMsXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IGl0ZW0ubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgb3V0cHV0OiBpdGVtLm91dHB1dCxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ2l0ZW1fdXBkYXRlJywgbWNwQ2FsbCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGl0ZW0udHlwZSA9PT0gJ21lc3NhZ2UnKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVhbHRpbWVJdGVtID0gcmVhbHRpbWVNZXNzYWdlSXRlbVNjaGVtYS5wYXJzZSh7XG4gICAgICAgICAgICAgICAgICAgIGl0ZW1JZDogcGFyc2VkLml0ZW0uaWQsXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IHBhcnNlZC5pdGVtLnR5cGUsXG4gICAgICAgICAgICAgICAgICAgIHJvbGU6IHBhcnNlZC5pdGVtLnJvbGUsXG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6IHBhcnNlZC5pdGVtLmNvbnRlbnQsXG4gICAgICAgICAgICAgICAgICAgIHN0YXR1czogcGFyc2VkLnR5cGUgPT09ICdyZXNwb25zZS5vdXRwdXRfaXRlbS5kb25lJ1xuICAgICAgICAgICAgICAgICAgICAgICAgPyAoaXRlbS5zdGF0dXMgPz8gJ2NvbXBsZXRlZCcpXG4gICAgICAgICAgICAgICAgICAgICAgICA6IChpdGVtLnN0YXR1cyA/PyAnaW5fcHJvZ3Jlc3MnKSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ2l0ZW1fdXBkYXRlJywgcmVhbHRpbWVJdGVtKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgX29uRXJyb3IoZXJyb3IpIHtcbiAgICAgICAgdGhpcy5lbWl0KCdlcnJvcicsIHtcbiAgICAgICAgICAgIHR5cGU6ICdlcnJvcicsXG4gICAgICAgICAgICBlcnJvcixcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIF9vbk9wZW4oKSB7XG4gICAgICAgIHRoaXMuZW1pdCgnY29ubmVjdGVkJyk7XG4gICAgfVxuICAgIF9vbkNsb3NlKCkge1xuICAgICAgICB0aGlzLmVtaXQoJ2Rpc2Nvbm5lY3RlZCcpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZW5kIGEgbWVzc2FnZSB0byB0aGUgUmVhbHRpbWUgQVBJLiBUaGlzIHdpbGwgY3JlYXRlIGEgbmV3IGl0ZW0gaW4gdGhlIGNvbnZlcnNhdGlvbiBhbmRcbiAgICAgKiB0cmlnZ2VyIGEgcmVzcG9uc2UuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gbWVzc2FnZSAtIFRoZSBtZXNzYWdlIHRvIHNlbmQuXG4gICAgICogQHBhcmFtIG90aGVyRXZlbnREYXRhIC0gQWRkaXRpb25hbCBldmVudCBkYXRhIHRvIHNlbmQuXG4gICAgICovXG4gICAgc2VuZE1lc3NhZ2UobWVzc2FnZSwgb3RoZXJFdmVudERhdGEsIHsgdHJpZ2dlclJlc3BvbnNlID0gdHJ1ZSB9ID0ge30pIHtcbiAgICAgICAgY29uc3QgY29udGVudCA9IHR5cGVvZiBtZXNzYWdlID09PSAnc3RyaW5nJ1xuICAgICAgICAgICAgPyBbXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiAnaW5wdXRfdGV4dCcsXG4gICAgICAgICAgICAgICAgICAgIHRleHQ6IG1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF1cbiAgICAgICAgICAgIDogbWVzc2FnZS5jb250ZW50Lm1hcCgoY29udGVudCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChjb250ZW50LnR5cGUgPT09ICdpbnB1dF9pbWFnZScpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdpbnB1dF9pbWFnZScsXG4gICAgICAgICAgICAgICAgICAgICAgICBpbWFnZV91cmw6IGNvbnRlbnQuaW1hZ2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAuLi4oY29udGVudC5wcm92aWRlckRhdGEgPz8ge30pLFxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gY29udGVudDtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB0aGlzLnNlbmRFdmVudCh7XG4gICAgICAgICAgICB0eXBlOiAnY29udmVyc2F0aW9uLml0ZW0uY3JlYXRlJyxcbiAgICAgICAgICAgIGl0ZW06IHtcbiAgICAgICAgICAgICAgICB0eXBlOiAnbWVzc2FnZScsXG4gICAgICAgICAgICAgICAgcm9sZTogJ3VzZXInLFxuICAgICAgICAgICAgICAgIGNvbnRlbnQsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgLi4ub3RoZXJFdmVudERhdGEsXG4gICAgICAgIH0pO1xuICAgICAgICBpZiAodHJpZ2dlclJlc3BvbnNlKSB7XG4gICAgICAgICAgICB0aGlzLnNlbmRFdmVudCh7XG4gICAgICAgICAgICAgICAgdHlwZTogJ3Jlc3BvbnNlLmNyZWF0ZScsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhZGRJbWFnZShpbWFnZSwgeyB0cmlnZ2VyUmVzcG9uc2UgPSB0cnVlIH0gPSB7fSkge1xuICAgICAgICB0aGlzLnNlbmRNZXNzYWdlKHtcbiAgICAgICAgICAgIHR5cGU6ICdtZXNzYWdlJyxcbiAgICAgICAgICAgIHJvbGU6ICd1c2VyJyxcbiAgICAgICAgICAgIGNvbnRlbnQ6IFt7IHR5cGU6ICdpbnB1dF9pbWFnZScsIGltYWdlIH1dLFxuICAgICAgICB9LCB7fSwgeyB0cmlnZ2VyUmVzcG9uc2UgfSk7XG4gICAgfVxuICAgIF9nZXRNZXJnZWRTZXNzaW9uQ29uZmlnKGNvbmZpZykge1xuICAgICAgICBjb25zdCBuZXdDb25maWcgPSB0b05ld1Nlc3Npb25Db25maWcoY29uZmlnKTtcbiAgICAgICAgY29uc3Qgc2Vzc2lvbkRhdGEgPSB7XG4gICAgICAgICAgICB0eXBlOiAncmVhbHRpbWUnLFxuICAgICAgICAgICAgaW5zdHJ1Y3Rpb25zOiBuZXdDb25maWcuaW5zdHJ1Y3Rpb25zLFxuICAgICAgICAgICAgbW9kZWw6IG5ld0NvbmZpZy5tb2RlbCA/PyB0aGlzLiNtb2RlbCxcbiAgICAgICAgICAgIG91dHB1dF9tb2RhbGl0aWVzOiBuZXdDb25maWcub3V0cHV0TW9kYWxpdGllcyA/P1xuICAgICAgICAgICAgICAgIERFRkFVTFRfT1BFTkFJX1JFQUxUSU1FX1NFU1NJT05fQ09ORklHLm91dHB1dE1vZGFsaXRpZXMsXG4gICAgICAgICAgICBhdWRpbzoge1xuICAgICAgICAgICAgICAgIGlucHV0OiB7XG4gICAgICAgICAgICAgICAgICAgIGZvcm1hdDogbmV3Q29uZmlnLmF1ZGlvPy5pbnB1dD8uZm9ybWF0ID8/XG4gICAgICAgICAgICAgICAgICAgICAgICBERUZBVUxUX09QRU5BSV9SRUFMVElNRV9TRVNTSU9OX0NPTkZJRy5hdWRpbz8uaW5wdXQ/LmZvcm1hdCxcbiAgICAgICAgICAgICAgICAgICAgbm9pc2VfcmVkdWN0aW9uOiBuZXdDb25maWcuYXVkaW8/LmlucHV0Py5ub2lzZVJlZHVjdGlvbiA/P1xuICAgICAgICAgICAgICAgICAgICAgICAgREVGQVVMVF9PUEVOQUlfUkVBTFRJTUVfU0VTU0lPTl9DT05GSUcuYXVkaW8/LmlucHV0Py5ub2lzZVJlZHVjdGlvbixcbiAgICAgICAgICAgICAgICAgICAgdHJhbnNjcmlwdGlvbjogbmV3Q29uZmlnLmF1ZGlvPy5pbnB1dD8udHJhbnNjcmlwdGlvbiA/P1xuICAgICAgICAgICAgICAgICAgICAgICAgREVGQVVMVF9PUEVOQUlfUkVBTFRJTUVfU0VTU0lPTl9DT05GSUcuYXVkaW8/LmlucHV0Py50cmFuc2NyaXB0aW9uLFxuICAgICAgICAgICAgICAgICAgICB0dXJuX2RldGVjdGlvbjogT3BlbkFJUmVhbHRpbWVCYXNlLmJ1aWxkVHVybkRldGVjdGlvbkNvbmZpZyhuZXdDb25maWcuYXVkaW8/LmlucHV0Py50dXJuRGV0ZWN0aW9uKSA/P1xuICAgICAgICAgICAgICAgICAgICAgICAgREVGQVVMVF9PUEVOQUlfUkVBTFRJTUVfU0VTU0lPTl9DT05GSUcuYXVkaW8/LmlucHV0Py50dXJuRGV0ZWN0aW9uLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgb3V0cHV0OiB7XG4gICAgICAgICAgICAgICAgICAgIGZvcm1hdDogbmV3Q29uZmlnLmF1ZGlvPy5vdXRwdXQ/LmZvcm1hdCA/P1xuICAgICAgICAgICAgICAgICAgICAgICAgREVGQVVMVF9PUEVOQUlfUkVBTFRJTUVfU0VTU0lPTl9DT05GSUcuYXVkaW8/Lm91dHB1dD8uZm9ybWF0LFxuICAgICAgICAgICAgICAgICAgICB2b2ljZTogbmV3Q29uZmlnLmF1ZGlvPy5vdXRwdXQ/LnZvaWNlID8/XG4gICAgICAgICAgICAgICAgICAgICAgICBERUZBVUxUX09QRU5BSV9SRUFMVElNRV9TRVNTSU9OX0NPTkZJRy5hdWRpbz8ub3V0cHV0Py52b2ljZSxcbiAgICAgICAgICAgICAgICAgICAgc3BlZWQ6IG5ld0NvbmZpZy5hdWRpbz8ub3V0cHV0Py5zcGVlZCA/P1xuICAgICAgICAgICAgICAgICAgICAgICAgREVGQVVMVF9PUEVOQUlfUkVBTFRJTUVfU0VTU0lPTl9DT05GSUcuYXVkaW8/Lm91dHB1dD8uc3BlZWQsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB0b29sX2Nob2ljZTogbmV3Q29uZmlnLnRvb2xDaG9pY2UgPz9cbiAgICAgICAgICAgICAgICBERUZBVUxUX09QRU5BSV9SRUFMVElNRV9TRVNTSU9OX0NPTkZJRy50b29sQ2hvaWNlLFxuICAgICAgICAgICAgLy8gV2UgZG9uJ3Qgc2V0IHRyYWNpbmcgaGVyZSB0byBtYWtlIHN1cmUgdGhhdCB3ZSBkb24ndCB0cnkgdG8gb3ZlcnJpZGUgaXQgb24gZXZlcnlcbiAgICAgICAgICAgIC8vIHNlc3Npb24udXBkYXRlIGFzIGl0IG1pZ2h0IGxlYWQgdG8gZXJyb3JzXG4gICAgICAgICAgICAuLi4obmV3Q29uZmlnLnByb3ZpZGVyRGF0YSA/PyB7fSksXG4gICAgICAgIH07XG4gICAgICAgIGlmIChuZXdDb25maWcucHJvbXB0KSB7XG4gICAgICAgICAgICBzZXNzaW9uRGF0YS5wcm9tcHQgPSB7XG4gICAgICAgICAgICAgICAgaWQ6IG5ld0NvbmZpZy5wcm9tcHQucHJvbXB0SWQsXG4gICAgICAgICAgICAgICAgdmVyc2lvbjogbmV3Q29uZmlnLnByb21wdC52ZXJzaW9uLFxuICAgICAgICAgICAgICAgIHZhcmlhYmxlczogbmV3Q29uZmlnLnByb21wdC52YXJpYWJsZXMsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIGlmIChuZXdDb25maWcudG9vbHMgJiYgbmV3Q29uZmlnLnRvb2xzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHNlc3Npb25EYXRhLnRvb2xzID0gbmV3Q29uZmlnLnRvb2xzLm1hcCgodG9vbCkgPT4gKHtcbiAgICAgICAgICAgICAgICAuLi50b29sLFxuICAgICAgICAgICAgICAgIHN0cmljdDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzZXNzaW9uRGF0YTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQnVpbGQgdGhlIHBheWxvYWQgb2JqZWN0IGV4cGVjdGVkIGJ5IHRoZSBSZWFsdGltZSBBUEkgd2hlbiBjcmVhdGluZyBvciB1cGRhdGluZyBhIHNlc3Npb24uXG4gICAgICpcbiAgICAgKiBUaGUgaGVscGVyIGNlbnRyYWxpc2VzIHRoZSBjb252ZXJzaW9uIGZyb20gY2FtZWxDYXNlIHJ1bnRpbWUgY29uZmlnIHRvIHRoZSBzbmFrZV9jYXNlIHBheWxvYWRcbiAgICAgKiByZXF1aXJlZCBieSB0aGUgUmVhbHRpbWUgQVBJIHNvIHRyYW5zcG9ydHMgdGhhdCBuZWVkIGEgb25lLW9mZiBwYXlsb2FkIChmb3IgZXhhbXBsZSBTSVAgY2FsbFxuICAgICAqIGFjY2VwdGFuY2UpIGNhbiByZXVzZSB0aGUgc2FtZSBsb2dpYyB3aXRob3V0IGR1cGxpY2F0aW5nIHByaXZhdGUgc3RhdGUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gY29uZmlnIC0gVGhlIHNlc3Npb24gY29uZmlnIHRvIG1lcmdlIHdpdGggZGVmYXVsdHMuXG4gICAgICovXG4gICAgYnVpbGRTZXNzaW9uUGF5bG9hZChjb25maWcpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2dldE1lcmdlZFNlc3Npb25Db25maWcoY29uZmlnKTtcbiAgICB9XG4gICAgc3RhdGljIGJ1aWxkVHVybkRldGVjdGlvbkNvbmZpZyhjKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYyA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgeyB0eXBlLCBjcmVhdGVSZXNwb25zZSwgY3JlYXRlX3Jlc3BvbnNlLCBlYWdlcm5lc3MsIGludGVycnVwdFJlc3BvbnNlLCBpbnRlcnJ1cHRfcmVzcG9uc2UsIHByZWZpeFBhZGRpbmdNcywgcHJlZml4X3BhZGRpbmdfbXMsIHNpbGVuY2VEdXJhdGlvbk1zLCBzaWxlbmNlX2R1cmF0aW9uX21zLCB0aHJlc2hvbGQsIGlkbGVUaW1lb3V0TXMsIGlkbGVfdGltZW91dF9tcywgLi4ucmVzdCB9ID0gYztcbiAgICAgICAgY29uc3QgY29uZmlnID0ge1xuICAgICAgICAgICAgdHlwZSxcbiAgICAgICAgICAgIGNyZWF0ZV9yZXNwb25zZTogY3JlYXRlUmVzcG9uc2UgPyBjcmVhdGVSZXNwb25zZSA6IGNyZWF0ZV9yZXNwb25zZSxcbiAgICAgICAgICAgIGVhZ2VybmVzcyxcbiAgICAgICAgICAgIGludGVycnVwdF9yZXNwb25zZTogaW50ZXJydXB0UmVzcG9uc2VcbiAgICAgICAgICAgICAgICA/IGludGVycnVwdFJlc3BvbnNlXG4gICAgICAgICAgICAgICAgOiBpbnRlcnJ1cHRfcmVzcG9uc2UsXG4gICAgICAgICAgICBwcmVmaXhfcGFkZGluZ19tczogcHJlZml4UGFkZGluZ01zID8gcHJlZml4UGFkZGluZ01zIDogcHJlZml4X3BhZGRpbmdfbXMsXG4gICAgICAgICAgICBzaWxlbmNlX2R1cmF0aW9uX21zOiBzaWxlbmNlRHVyYXRpb25Nc1xuICAgICAgICAgICAgICAgID8gc2lsZW5jZUR1cmF0aW9uTXNcbiAgICAgICAgICAgICAgICA6IHNpbGVuY2VfZHVyYXRpb25fbXMsXG4gICAgICAgICAgICBpZGxlX3RpbWVvdXRfbXM6IGlkbGVUaW1lb3V0TXMgPyBpZGxlVGltZW91dE1zIDogaWRsZV90aW1lb3V0X21zLFxuICAgICAgICAgICAgdGhyZXNob2xkLFxuICAgICAgICAgICAgLi4ucmVzdCxcbiAgICAgICAgfTtcbiAgICAgICAgLy8gUmVtb3ZlIHVuZGVmaW5lZCB2YWx1ZXMgZnJvbSB0aGUgY29uZmlnXG4gICAgICAgIE9iamVjdC5rZXlzKGNvbmZpZykuZm9yRWFjaCgoa2V5KSA9PiB7XG4gICAgICAgICAgICBpZiAoY29uZmlnW2tleV0gPT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgICAgICBkZWxldGUgY29uZmlnW2tleV07XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gT2JqZWN0LmtleXMoY29uZmlnKS5sZW5ndGggPiAwID8gY29uZmlnIDogdW5kZWZpbmVkO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXRzIHRoZSBpbnRlcm5hbCB0cmFjaW5nIGNvbmZpZy4gVGhpcyBpcyB1c2VkIHRvIHRyYWNrIHRoZSB0cmFjaW5nIGNvbmZpZyB0aGF0IGhhcyBiZWVuIHNldFxuICAgICAqIGR1cmluZyB0aGUgc2Vzc2lvbi5jcmVhdGUgZXZlbnQuXG4gICAgICovXG4gICAgc2V0IF90cmFjaW5nQ29uZmlnKHRyYWNpbmdDb25maWcpIHtcbiAgICAgICAgdGhpcy4jdHJhY2luZ0NvbmZpZyA9IHRyYWNpbmdDb25maWc7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldHMgdGhlIHRyYWNpbmcgY29uZmlnIGZvciB0aGUgc2Vzc2lvbi4gVGhpcyB3aWxsIHNlbmQgdGhlIHRyYWNpbmcgY29uZmlnIHRvIHRoZSBSZWFsdGltZSBBUEkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdHJhY2luZ0NvbmZpZyAtIFRoZSB0cmFjaW5nIGNvbmZpZyB0byBzZXQuIFdlIGRvbid0IHN1cHBvcnQgJ2F1dG8nIGhlcmUgYXMgdGhlIFNESyB3aWxsIGFsd2F5cyBjb25maWd1cmUgYSBXb3JrZmxvdyBOYW1lIHVubGVzcyBpdCBleGlzdHNcbiAgICAgKi9cbiAgICBfdXBkYXRlVHJhY2luZ0NvbmZpZyh0cmFjaW5nQ29uZmlnKSB7XG4gICAgICAgIGlmICh0eXBlb2YgdGhpcy4jdHJhY2luZ0NvbmZpZyA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIC8vIHRyZWF0aW5nIGl0IGFzIGRlZmF1bHQgdmFsdWVcbiAgICAgICAgICAgIHRoaXMuI3RyYWNpbmdDb25maWcgPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0cmFjaW5nQ29uZmlnID09PSAnYXV0bycpIHtcbiAgICAgICAgICAgIC8vIHR1cm4gb24gdHJhY2luZyBpbiBhdXRvIG1vZGVcbiAgICAgICAgICAgIHRoaXMuc2VuZEV2ZW50KHtcbiAgICAgICAgICAgICAgICB0eXBlOiAnc2Vzc2lvbi51cGRhdGUnLFxuICAgICAgICAgICAgICAgIHNlc3Npb246IHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3JlYWx0aW1lJyxcbiAgICAgICAgICAgICAgICAgICAgdHJhY2luZzogJ2F1dG8nLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy4jdHJhY2luZ0NvbmZpZyAhPT0gbnVsbCAmJlxuICAgICAgICAgICAgdHlwZW9mIHRoaXMuI3RyYWNpbmdDb25maWcgIT09ICdzdHJpbmcnICYmXG4gICAgICAgICAgICB0eXBlb2YgdHJhY2luZ0NvbmZpZyAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIC8vIHRyYWNpbmcgaXMgYWxyZWFkeSBzZXQsIHdlIGNhbid0IGNoYW5nZSBpdFxuICAgICAgICAgICAgbG9nZ2VyLndhcm4oJ1RyYWNpbmcgY29uZmlnIGlzIGFscmVhZHkgc2V0LCBza2lwcGluZyBzZXR0aW5nIGl0IGFnYWluLiBUaGlzIGxpa2VseSBoYXBwZW5zIHdoZW4geW91IGFscmVhZHkgc2V0IGEgdHJhY2luZyBjb25maWcgb24gc2Vzc2lvbiBjcmVhdGlvbi4nKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHJhY2luZ0NvbmZpZyA9PT0gbnVsbCkge1xuICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKCdEaXNhYmxpbmcgdHJhY2luZyBmb3IgdGhpcyBzZXNzaW9uLiBJdCBjYW5ub3QgYmUgdHVybmVkIG9uIGZvciB0aGlzIHNlc3Npb24gZnJvbSB0aGlzIHBvaW50IG9uLicpO1xuICAgICAgICAgICAgdGhpcy5zZW5kRXZlbnQoe1xuICAgICAgICAgICAgICAgIHR5cGU6ICdzZXNzaW9uLnVwZGF0ZScsXG4gICAgICAgICAgICAgICAgc2Vzc2lvbjoge1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiAncmVhbHRpbWUnLFxuICAgICAgICAgICAgICAgICAgICB0cmFjaW5nOiBudWxsLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy4jdHJhY2luZ0NvbmZpZyA9PT0gbnVsbCB8fFxuICAgICAgICAgICAgdHlwZW9mIHRoaXMuI3RyYWNpbmdDb25maWcgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAvLyB0cmFjaW5nIGlzIGN1cnJlbnRseSBub3Qgc2V0IHNvIHdlIGNhbiBzZXQgaXQgdG8gdGhlIG5ldyB2YWx1ZVxuICAgICAgICAgICAgdGhpcy5zZW5kRXZlbnQoe1xuICAgICAgICAgICAgICAgIHR5cGU6ICdzZXNzaW9uLnVwZGF0ZScsXG4gICAgICAgICAgICAgICAgc2Vzc2lvbjoge1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiAncmVhbHRpbWUnLFxuICAgICAgICAgICAgICAgICAgICB0cmFjaW5nOiB0cmFjaW5nQ29uZmlnLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHJhY2luZ0NvbmZpZz8uZ3JvdXBfaWQgIT09IHRoaXMuI3RyYWNpbmdDb25maWc/Lmdyb3VwX2lkIHx8XG4gICAgICAgICAgICB0cmFjaW5nQ29uZmlnPy5tZXRhZGF0YSAhPT0gdGhpcy4jdHJhY2luZ0NvbmZpZz8ubWV0YWRhdGEgfHxcbiAgICAgICAgICAgIHRyYWNpbmdDb25maWc/LndvcmtmbG93X25hbWUgIT09IHRoaXMuI3RyYWNpbmdDb25maWc/LndvcmtmbG93X25hbWUpIHtcbiAgICAgICAgICAgIGxvZ2dlci53YXJuKCdNaXNtYXRjaCBpbiB0cmFjaW5nIGNvbmZpZy4gSWdub3JpbmcgdGhlIG5ldyB0cmFjaW5nIGNvbmZpZy4gVGhpcyBsaWtlbHkgaGFwcGVucyB3aGVuIHlvdSBhbHJlYWR5IHNldCBhIHRyYWNpbmcgY29uZmlnIG9uIHNlc3Npb24gY3JlYXRpb24uIEN1cnJlbnQgdHJhY2luZyBjb25maWc6ICVzLCBuZXcgdHJhY2luZyBjb25maWc6ICVzJywgSlNPTi5zdHJpbmdpZnkodGhpcy4jdHJhY2luZ0NvbmZpZyksIEpTT04uc3RyaW5naWZ5KHRyYWNpbmdDb25maWcpKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnNlbmRFdmVudCh7XG4gICAgICAgICAgICB0eXBlOiAnc2Vzc2lvbi51cGRhdGUnLFxuICAgICAgICAgICAgc2Vzc2lvbjoge1xuICAgICAgICAgICAgICAgIHR5cGU6ICdyZWFsdGltZScsXG4gICAgICAgICAgICAgICAgdHJhY2luZzogdHJhY2luZ0NvbmZpZyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBVcGRhdGVzIHRoZSBzZXNzaW9uIGNvbmZpZy4gVGhpcyB3aWxsIG1lcmdlIGl0IHdpdGggdGhlIGN1cnJlbnQgc2Vzc2lvbiBjb25maWcgd2l0aCB0aGUgZGVmYXVsdFxuICAgICAqIHZhbHVlcyBhbmQgc2VuZCBpdCB0byB0aGUgUmVhbHRpbWUgQVBJLlxuICAgICAqXG4gICAgICogQHBhcmFtIGNvbmZpZyAtIFRoZSBzZXNzaW9uIGNvbmZpZyB0byB1cGRhdGUuXG4gICAgICovXG4gICAgdXBkYXRlU2Vzc2lvbkNvbmZpZyhjb25maWcpIHtcbiAgICAgICAgY29uc3Qgc2Vzc2lvbkRhdGEgPSB0aGlzLmJ1aWxkU2Vzc2lvblBheWxvYWQoY29uZmlnKTtcbiAgICAgICAgdGhpcy5zZW5kRXZlbnQoe1xuICAgICAgICAgICAgdHlwZTogJ3Nlc3Npb24udXBkYXRlJyxcbiAgICAgICAgICAgIHNlc3Npb246IHNlc3Npb25EYXRhLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2VuZCB0aGUgb3V0cHV0IG9mIGEgZnVuY3Rpb24gY2FsbCB0byB0aGUgUmVhbHRpbWUgQVBJLlxuICAgICAqXG4gICAgICogQHBhcmFtIHRvb2xDYWxsIC0gVGhlIHRvb2wgY2FsbCB0byBzZW5kIHRoZSBvdXRwdXQgZm9yLlxuICAgICAqIEBwYXJhbSBvdXRwdXQgLSBUaGUgb3V0cHV0IG9mIHRoZSBmdW5jdGlvbiBjYWxsLlxuICAgICAqIEBwYXJhbSBzdGFydFJlc3BvbnNlIC0gV2hldGhlciB0byBzdGFydCBhIG5ldyByZXNwb25zZSBhZnRlciBzZW5kaW5nIHRoZSBvdXRwdXQuXG4gICAgICovXG4gICAgc2VuZEZ1bmN0aW9uQ2FsbE91dHB1dCh0b29sQ2FsbCwgb3V0cHV0LCBzdGFydFJlc3BvbnNlID0gdHJ1ZSkge1xuICAgICAgICB0aGlzLnNlbmRFdmVudCh7XG4gICAgICAgICAgICB0eXBlOiAnY29udmVyc2F0aW9uLml0ZW0uY3JlYXRlJyxcbiAgICAgICAgICAgIGl0ZW06IHtcbiAgICAgICAgICAgICAgICB0eXBlOiAnZnVuY3Rpb25fY2FsbF9vdXRwdXQnLFxuICAgICAgICAgICAgICAgIG91dHB1dCxcbiAgICAgICAgICAgICAgICBjYWxsX2lkOiB0b29sQ2FsbC5jYWxsSWQsXG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IGl0ZW0gPSByZWFsdGltZVRvb2xDYWxsSXRlbS5wYXJzZSh7XG4gICAgICAgICAgICAgICAgaXRlbUlkOiB0b29sQ2FsbC5pZCxcbiAgICAgICAgICAgICAgICBwcmV2aW91c0l0ZW1JZDogdG9vbENhbGwucHJldmlvdXNJdGVtSWQsXG4gICAgICAgICAgICAgICAgdHlwZTogJ2Z1bmN0aW9uX2NhbGwnLFxuICAgICAgICAgICAgICAgIHN0YXR1czogJ2NvbXBsZXRlZCcsXG4gICAgICAgICAgICAgICAgYXJndW1lbnRzOiB0b29sQ2FsbC5hcmd1bWVudHMsXG4gICAgICAgICAgICAgICAgbmFtZTogdG9vbENhbGwubmFtZSxcbiAgICAgICAgICAgICAgICBvdXRwdXQsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMuZW1pdCgnaXRlbV91cGRhdGUnLCBpdGVtKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGxvZ2dlci5lcnJvcignRXJyb3IgcGFyc2luZyB0b29sIGNhbGwgaXRlbScsIGVycm9yLCB0b29sQ2FsbCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHN0YXJ0UmVzcG9uc2UpIHtcbiAgICAgICAgICAgIHRoaXMuc2VuZEV2ZW50KHtcbiAgICAgICAgICAgICAgICB0eXBlOiAncmVzcG9uc2UuY3JlYXRlJyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNlbmQgYW4gYXVkaW8gYnVmZmVyIHRvIHRoZSBSZWFsdGltZSBBUEkuIElmIGB7IGNvbW1pdDogdHJ1ZSB9YCBpcyBwYXNzZWQsIHRoZSBhdWRpbyBidWZmZXJcbiAgICAgKiB3aWxsIGJlIGNvbW1pdHRlZCBhbmQgdGhlIG1vZGVsIHdpbGwgc3RhcnQgcHJvY2Vzc2luZyBpdC4gVGhpcyBpcyBuZWNlc3NhcnkgaWYgeW91IGhhdmVcbiAgICAgKiBkaXNhYmxlZCB0dXJuIGRldGVjdGlvbiAvIHZvaWNlIGFjdGl2aXR5IGRldGVjdGlvbiAoVkFEKS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBhdWRpbyAtIFRoZSBhdWRpbyBidWZmZXIgdG8gc2VuZC5cbiAgICAgKiBAcGFyYW0gb3B0aW9ucyAtIFRoZSBvcHRpb25zIGZvciB0aGUgYXVkaW8gYnVmZmVyLlxuICAgICAqL1xuICAgIHNlbmRBdWRpbyhhdWRpbywgeyBjb21taXQgPSBmYWxzZSB9ID0ge30pIHtcbiAgICAgICAgdGhpcy5zZW5kRXZlbnQoe1xuICAgICAgICAgICAgdHlwZTogJ2lucHV0X2F1ZGlvX2J1ZmZlci5hcHBlbmQnLFxuICAgICAgICAgICAgYXVkaW86IGFycmF5QnVmZmVyVG9CYXNlNjQoYXVkaW8pLFxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKGNvbW1pdCkge1xuICAgICAgICAgICAgdGhpcy5zZW5kRXZlbnQoe1xuICAgICAgICAgICAgICAgIHR5cGU6ICdpbnB1dF9hdWRpb19idWZmZXIuY29tbWl0JyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlc2V0IHRoZSBoaXN0b3J5IG9mIHRoZSBjb252ZXJzYXRpb24uIFRoaXMgd2lsbCBjcmVhdGUgYSBkaWZmIGJldHdlZW4gdGhlIG9sZCBhbmQgbmV3IGhpc3RvcnlcbiAgICAgKiBhbmQgc2VuZCB0aGUgbmVjZXNzYXJ5IGV2ZW50cyB0byB0aGUgUmVhbHRpbWUgQVBJIHRvIHVwZGF0ZSB0aGUgaGlzdG9yeS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBvbGRIaXN0b3J5IC0gVGhlIG9sZCBoaXN0b3J5IG9mIHRoZSBjb252ZXJzYXRpb24uXG4gICAgICogQHBhcmFtIG5ld0hpc3RvcnkgLSBUaGUgbmV3IGhpc3Rvcnkgb2YgdGhlIGNvbnZlcnNhdGlvbi5cbiAgICAgKi9cbiAgICByZXNldEhpc3Rvcnkob2xkSGlzdG9yeSwgbmV3SGlzdG9yeSkge1xuICAgICAgICBjb25zdCB7IHJlbW92YWxzLCBhZGRpdGlvbnMsIHVwZGF0ZXMgfSA9IGRpZmZSZWFsdGltZUhpc3Rvcnkob2xkSGlzdG9yeSwgbmV3SGlzdG9yeSk7XG4gICAgICAgIGNvbnN0IHJlbW92YWxJZHMgPSBuZXcgU2V0KHJlbW92YWxzLm1hcCgoaXRlbSkgPT4gaXRlbS5pdGVtSWQpKTtcbiAgICAgICAgLy8gd2UgZG9uJ3QgaGF2ZSBhbiB1cGRhdGUgZXZlbnQgZm9yIGl0ZW1zIHNvIHdlIHdpbGwgcmVtb3ZlIGFuZCByZS1hZGQgd2hhdCdzIHRoZXJlXG4gICAgICAgIGZvciAoY29uc3QgdXBkYXRlIG9mIHVwZGF0ZXMpIHtcbiAgICAgICAgICAgIHJlbW92YWxJZHMuYWRkKHVwZGF0ZS5pdGVtSWQpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChyZW1vdmFsSWRzLnNpemUgPiAwKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGl0ZW1JZCBvZiByZW1vdmFsSWRzKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZW5kRXZlbnQoe1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiAnY29udmVyc2F0aW9uLml0ZW0uZGVsZXRlJyxcbiAgICAgICAgICAgICAgICAgICAgaXRlbV9pZDogaXRlbUlkLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGFkZGl0aW9uc0FuZFVwZGF0ZXMgPSBbLi4uYWRkaXRpb25zLCAuLi51cGRhdGVzXTtcbiAgICAgICAgZm9yIChjb25zdCBhZGRpdGlvbiBvZiBhZGRpdGlvbnNBbmRVcGRhdGVzKSB7XG4gICAgICAgICAgICBpZiAoYWRkaXRpb24udHlwZSA9PT0gJ21lc3NhZ2UnKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgaXRlbUVudHJ5ID0ge1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiAnbWVzc2FnZScsXG4gICAgICAgICAgICAgICAgICAgIHJvbGU6IGFkZGl0aW9uLnJvbGUsXG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6IGFkZGl0aW9uLmNvbnRlbnQsXG4gICAgICAgICAgICAgICAgICAgIGlkOiBhZGRpdGlvbi5pdGVtSWQsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBpZiAoYWRkaXRpb24ucm9sZSAhPT0gJ3N5c3RlbScgJiYgYWRkaXRpb24uc3RhdHVzKSB7XG4gICAgICAgICAgICAgICAgICAgIGl0ZW1FbnRyeS5zdGF0dXMgPSBhZGRpdGlvbi5zdGF0dXM7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuc2VuZEV2ZW50KHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2NvbnZlcnNhdGlvbi5pdGVtLmNyZWF0ZScsXG4gICAgICAgICAgICAgICAgICAgIGl0ZW06IGl0ZW1FbnRyeSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGFkZGl0aW9uLnR5cGUgPT09ICdmdW5jdGlvbl9jYWxsJykge1xuICAgICAgICAgICAgICAgIGxvZ2dlci53YXJuKCdGdW5jdGlvbiBjYWxscyBjYW5ub3QgYmUgbWFudWFsbHkgYWRkZWQgb3IgdXBkYXRlZCBhdCB0aGUgbW9tZW50LiBJZ25vcmluZy4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBzZW5kTWNwUmVzcG9uc2UoYXBwcm92YWxSZXF1ZXN0LCBhcHByb3ZlZCkge1xuICAgICAgICB0aGlzLnNlbmRFdmVudCh7XG4gICAgICAgICAgICB0eXBlOiAnY29udmVyc2F0aW9uLml0ZW0uY3JlYXRlJyxcbiAgICAgICAgICAgIHByZXZpb3VzX2l0ZW1faWQ6IGFwcHJvdmFsUmVxdWVzdC5pdGVtSWQsXG4gICAgICAgICAgICBpdGVtOiB7XG4gICAgICAgICAgICAgICAgdHlwZTogJ21jcF9hcHByb3ZhbF9yZXNwb25zZScsXG4gICAgICAgICAgICAgICAgYXBwcm92YWxfcmVxdWVzdF9pZDogYXBwcm92YWxSZXF1ZXN0Lml0ZW1JZCxcbiAgICAgICAgICAgICAgICBhcHByb3ZlOiBhcHByb3ZlZCxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW9wZW5haVJlYWx0aW1lQmFzZS5tanMubWFwIiwiLy8vIDxyZWZlcmVuY2UgbGliPVwiZG9tXCIgLz5cbmltcG9ydCB7IGlzQnJvd3NlckVudmlyb25tZW50IH0gZnJvbSAnQG9wZW5haS9hZ2VudHMtY29yZS9fc2hpbXMnO1xuaW1wb3J0IHsgVXNlckVycm9yIH0gZnJvbSAnQG9wZW5haS9hZ2VudHMtY29yZSc7XG5pbXBvcnQgbG9nZ2VyIGZyb20gXCIuL2xvZ2dlci5tanNcIjtcbmltcG9ydCB7IE9wZW5BSVJlYWx0aW1lQmFzZSwgfSBmcm9tIFwiLi9vcGVuYWlSZWFsdGltZUJhc2UubWpzXCI7XG5pbXBvcnQgeyBwYXJzZVJlYWx0aW1lRXZlbnQgfSBmcm9tIFwiLi9vcGVuYWlSZWFsdGltZUV2ZW50cy5tanNcIjtcbmltcG9ydCB7IEhFQURFUlMgfSBmcm9tIFwiLi91dGlscy5tanNcIjtcbi8qKlxuICogVHJhbnNwb3J0IGxheWVyIHRoYXQncyBoYW5kbGluZyB0aGUgY29ubmVjdGlvbiBiZXR3ZWVuIHRoZSBjbGllbnQgYW5kIE9wZW5BSSdzIFJlYWx0aW1lIEFQSVxuICogdmlhIFdlYlJUQy4gV2hpbGUgdGhpcyB0cmFuc3BvcnQgbGF5ZXIgaXMgZGVzaWduZWQgdG8gYmUgdXNlZCB3aXRoaW4gYSBSZWFsdGltZVNlc3Npb24sIGl0IGNhblxuICogYWxzbyBiZSB1c2VkIHN0YW5kYWxvbmUgaWYgeW91IHdhbnQgdG8gaGF2ZSBhIGRpcmVjdCBjb25uZWN0aW9uIHRvIHRoZSBSZWFsdGltZSBBUEkuXG4gKlxuICogVW5sZXNzIHlvdSBzcGVjaWZ5IGEgYG1lZGlhU3RyZWFtYCBvciBgYXVkaW9FbGVtZW50YCBvcHRpb24sIHRoZSB0cmFuc3BvcnQgbGF5ZXIgd2lsbFxuICogYXV0b21hdGljYWxseSBjb25maWd1cmUgdGhlIG1pY3JvcGhvbmUgYW5kIGF1ZGlvIG91dHB1dCB0byBiZSB1c2VkIGJ5IHRoZSBzZXNzaW9uLlxuICovXG5leHBvcnQgY2xhc3MgT3BlbkFJUmVhbHRpbWVXZWJSVEMgZXh0ZW5kcyBPcGVuQUlSZWFsdGltZUJhc2Uge1xuICAgIG9wdGlvbnM7XG4gICAgI3VybDtcbiAgICAjc3RhdGUgPSB7XG4gICAgICAgIHN0YXR1czogJ2Rpc2Nvbm5lY3RlZCcsXG4gICAgICAgIHBlZXJDb25uZWN0aW9uOiB1bmRlZmluZWQsXG4gICAgICAgIGRhdGFDaGFubmVsOiB1bmRlZmluZWQsXG4gICAgICAgIGNhbGxJZDogdW5kZWZpbmVkLFxuICAgIH07XG4gICAgI3VzZUluc2VjdXJlQXBpS2V5O1xuICAgICNvbmdvaW5nUmVzcG9uc2UgPSBmYWxzZTtcbiAgICAjbXV0ZWQgPSBmYWxzZTtcbiAgICBjb25zdHJ1Y3RvcihvcHRpb25zID0ge30pIHtcbiAgICAgICAgaWYgKHR5cGVvZiBSVENQZWVyQ29ubmVjdGlvbiA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignV2ViUlRDIGlzIG5vdCBzdXBwb3J0ZWQgaW4gdGhpcyBlbnZpcm9ubWVudCcpO1xuICAgICAgICB9XG4gICAgICAgIHN1cGVyKG9wdGlvbnMpO1xuICAgICAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICAgICAgICB0aGlzLiN1cmwgPSBvcHRpb25zLmJhc2VVcmwgPz8gYGh0dHBzOi8vYXBpLm9wZW5haS5jb20vdjEvcmVhbHRpbWUvY2FsbHNgO1xuICAgICAgICB0aGlzLiN1c2VJbnNlY3VyZUFwaUtleSA9IG9wdGlvbnMudXNlSW5zZWN1cmVBcGlLZXkgPz8gZmFsc2U7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBjdXJyZW50IGNhbGwgSUQgb2YgdGhlIFdlYlJUQyBjb25uZWN0aW9uLlxuICAgICAqL1xuICAgIGdldCBjYWxsSWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiNzdGF0ZS5jYWxsSWQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBjdXJyZW50IHN0YXR1cyBvZiB0aGUgV2ViUlRDIGNvbm5lY3Rpb24uXG4gICAgICovXG4gICAgZ2V0IHN0YXR1cygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuI3N0YXRlLnN0YXR1cztcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIGN1cnJlbnQgY29ubmVjdGlvbiBzdGF0ZSBvZiB0aGUgV2ViUlRDIGNvbm5lY3Rpb24gaW5jbHVkaW5nIHRoZSBwZWVyIGNvbm5lY3Rpb24gYW5kIGRhdGFcbiAgICAgKiBjaGFubmVsLlxuICAgICAqL1xuICAgIGdldCBjb25uZWN0aW9uU3RhdGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiNzdGF0ZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogV2hldGhlciB0aGUgc2Vzc2lvbiBpcyBtdXRlZC5cbiAgICAgKi9cbiAgICBnZXQgbXV0ZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiNtdXRlZDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ29ubmVjdCB0byB0aGUgUmVhbHRpbWUgQVBJLiBUaGlzIHdpbGwgZXN0YWJsaXNoIHRoZSBjb25uZWN0aW9uIHRvIHRoZSBPcGVuQUkgUmVhbHRpbWUgQVBJXG4gICAgICogdmlhIFdlYlJUQy5cbiAgICAgKlxuICAgICAqIElmIHlvdSBhcmUgdXNpbmcgYSBicm93c2VyLCB0aGUgdHJhbnNwb3J0IGxheWVyIHdpbGwgYWxzbyBhdXRvbWF0aWNhbGx5IGNvbmZpZ3VyZSB0aGVcbiAgICAgKiBtaWNyb3Bob25lIGFuZCBhdWRpbyBvdXRwdXQgdG8gYmUgdXNlZCBieSB0aGUgc2Vzc2lvbi5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBvcHRpb25zIC0gVGhlIG9wdGlvbnMgZm9yIHRoZSBjb25uZWN0aW9uLlxuICAgICAqL1xuICAgIGFzeW5jIGNvbm5lY3Qob3B0aW9ucykge1xuICAgICAgICBpZiAodGhpcy4jc3RhdGUuc3RhdHVzID09PSAnY29ubmVjdGVkJykge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLiNzdGF0ZS5zdGF0dXMgPT09ICdjb25uZWN0aW5nJykge1xuICAgICAgICAgICAgbG9nZ2VyLndhcm4oJ1JlYWx0aW1lIGNvbm5lY3Rpb24gYWxyZWFkeSBpbiBwcm9ncmVzcy4gUGxlYXNlIGF3YWl0IG9yaWdpbmFsIHByb21pc2UnKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBtb2RlbCA9IG9wdGlvbnMubW9kZWwgPz8gdGhpcy5jdXJyZW50TW9kZWw7XG4gICAgICAgIHRoaXMuY3VycmVudE1vZGVsID0gbW9kZWw7XG4gICAgICAgIGNvbnN0IGJhc2VVcmwgPSBvcHRpb25zLnVybCA/PyB0aGlzLiN1cmw7XG4gICAgICAgIGNvbnN0IGFwaUtleSA9IGF3YWl0IHRoaXMuX2dldEFwaUtleShvcHRpb25zKTtcbiAgICAgICAgY29uc3QgaXNDbGllbnRLZXkgPSB0eXBlb2YgYXBpS2V5ID09PSAnc3RyaW5nJyAmJiBhcGlLZXkuc3RhcnRzV2l0aCgnZWtfJyk7XG4gICAgICAgIGlmIChpc0Jyb3dzZXJFbnZpcm9ubWVudCgpICYmICF0aGlzLiN1c2VJbnNlY3VyZUFwaUtleSAmJiAhaXNDbGllbnRLZXkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBVc2VyRXJyb3IoJ1VzaW5nIHRoZSBXZWJSVEMgY29ubmVjdGlvbiBpbiBhIGJyb3dzZXIgZW52aXJvbm1lbnQgcmVxdWlyZXMgYW4gZXBoZW1lcmFsIGNsaWVudCBrZXkuIElmIHlvdSBuZWVkIHRvIHVzZSBhIHJlZ3VsYXIgQVBJIGtleSwgdXNlIHRoZSBXZWJTb2NrZXQgdHJhbnNwb3J0IG9yIHNldCB0aGUgYHVzZUluc2VjdXJlQXBpS2V5YCBvcHRpb24gdG8gdHJ1ZS4nKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tYXN5bmMtcHJvbWlzZS1leGVjdXRvclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoYXN5bmMgKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjb25zdCB1c2VyU2Vzc2lvbkNvbmZpZyA9IHtcbiAgICAgICAgICAgICAgICAgICAgLi4uKG9wdGlvbnMuaW5pdGlhbFNlc3Npb25Db25maWcgfHwge30pLFxuICAgICAgICAgICAgICAgICAgICBtb2RlbDogdGhpcy5jdXJyZW50TW9kZWwsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBjb25zdCBjb25uZWN0aW9uVXJsID0gbmV3IFVSTChiYXNlVXJsKTtcbiAgICAgICAgICAgICAgICBsZXQgcGVlckNvbm5lY3Rpb24gPSBuZXcgUlRDUGVlckNvbm5lY3Rpb24oKTtcbiAgICAgICAgICAgICAgICBjb25zdCBkYXRhQ2hhbm5lbCA9IHBlZXJDb25uZWN0aW9uLmNyZWF0ZURhdGFDaGFubmVsKCdvYWktZXZlbnRzJyk7XG4gICAgICAgICAgICAgICAgbGV0IGNhbGxJZCA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICBjb25zdCBhdHRhY2hDb25uZWN0aW9uU3RhdGVIYW5kbGVyID0gKGNvbm5lY3Rpb24pID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29ubmVjdGlvbi5vbmNvbm5lY3Rpb25zdGF0ZWNoYW5nZSA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoY29ubmVjdGlvbi5jb25uZWN0aW9uU3RhdGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdkaXNjb25uZWN0ZWQnOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ2ZhaWxlZCc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnY2xvc2VkJzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAnY29ubmVjdGVkJyBzdGF0ZSBpcyBoYW5kbGVkIGJ5IGRhdGFDaGFubmVsLm9ub3Blbi4gU28gd2UgZG9uJ3QgbmVlZCB0byBoYW5kbGUgaXQgaGVyZS5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAnbmV3JyBhbmQgJ2Nvbm5lY3RpbmcnIGFyZSBpbnRlcm1lZGlhdGUgc3RhdGVzIGFuZCBkbyBub3QgcmVxdWlyZSBhY3Rpb24gaGVyZS5cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGF0dGFjaENvbm5lY3Rpb25TdGF0ZUhhbmRsZXIocGVlckNvbm5lY3Rpb24pO1xuICAgICAgICAgICAgICAgIHRoaXMuI3N0YXRlID0ge1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXM6ICdjb25uZWN0aW5nJyxcbiAgICAgICAgICAgICAgICAgICAgcGVlckNvbm5lY3Rpb24sXG4gICAgICAgICAgICAgICAgICAgIGRhdGFDaGFubmVsLFxuICAgICAgICAgICAgICAgICAgICBjYWxsSWQsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ2Nvbm5lY3Rpb25fY2hhbmdlJywgdGhpcy4jc3RhdGUuc3RhdHVzKTtcbiAgICAgICAgICAgICAgICBkYXRhQ2hhbm5lbC5hZGRFdmVudExpc3RlbmVyKCdvcGVuJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLiNzdGF0ZSA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXR1czogJ2Nvbm5lY3RlZCcsXG4gICAgICAgICAgICAgICAgICAgICAgICBwZWVyQ29ubmVjdGlvbixcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFDaGFubmVsLFxuICAgICAgICAgICAgICAgICAgICAgICAgY2FsbElkLFxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAvLyBTZW5kaW5nIHRoZSBzZXNzaW9uIGNvbmZpZyBhZ2FpbiBoZXJlIG9uY2UgdGhlIGNoYW5uZWwgaXMgY29ubmVjdGVkIHRvIGVuc3VyZVxuICAgICAgICAgICAgICAgICAgICAvLyB0aGF0IHRoZSBzZXNzaW9uIGNvbmZpZyBpcyBzZW50IHRvIHRoZSBzZXJ2ZXIgYmVmb3JlIHRoZSBmaXJzdCByZXNwb25zZSBpcyByZWNlaXZlZFxuICAgICAgICAgICAgICAgICAgICAvLyBTZXR0aW5nIGl0IG9uIGNvbm5lY3Rpb24gc2hvdWxkIHdvcmsgYnV0IHRoZSBjb25maWcgaXMgbm90IGJlaW5nIHZhbGlkYXRlZCBvbiB0aGVcbiAgICAgICAgICAgICAgICAgICAgLy8gc2VydmVyLiBUaGlzIHRyaWdnZXJzIGEgdmFsaWRhdGlvbiBlcnJvciBpZiB0aGUgY29uZmlnIGlzIG5vdCB2YWxpZC5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVTZXNzaW9uQ29uZmlnKHVzZXJTZXNzaW9uQ29uZmlnKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5lbWl0KCdjb25uZWN0aW9uX2NoYW5nZScsIHRoaXMuI3N0YXRlLnN0YXR1cyk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX29uT3BlbigpO1xuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgZGF0YUNoYW5uZWwuYWRkRXZlbnRMaXN0ZW5lcignZXJyb3InLCAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9vbkVycm9yKGV2ZW50KTtcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KGV2ZW50KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBkYXRhQ2hhbm5lbC5hZGRFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX29uTWVzc2FnZShldmVudCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHsgZGF0YTogcGFyc2VkLCBpc0dlbmVyaWMgfSA9IHBhcnNlUmVhbHRpbWVFdmVudChldmVudCk7XG4gICAgICAgICAgICAgICAgICAgIGlmICghcGFyc2VkIHx8IGlzR2VuZXJpYykge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChwYXJzZWQudHlwZSA9PT0gJ3Jlc3BvbnNlLmNyZWF0ZWQnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiNvbmdvaW5nUmVzcG9uc2UgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHBhcnNlZC50eXBlID09PSAncmVzcG9uc2UuZG9uZScpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuI29uZ29pbmdSZXNwb25zZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChwYXJzZWQudHlwZSA9PT0gJ3Nlc3Npb24uY3JlYXRlZCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX3RyYWNpbmdDb25maWcgPSBwYXJzZWQuc2Vzc2lvbi50cmFjaW5nO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gVHJ5aW5nIHRvIHR1cm4gb24gdHJhY2luZyBhZnRlciB0aGUgc2Vzc2lvbiBpcyBjcmVhdGVkXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0cmFjaW5nQ29uZmlnID0gdHlwZW9mIHVzZXJTZXNzaW9uQ29uZmlnLnRyYWNpbmcgPT09ICd1bmRlZmluZWQnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPyAnYXV0bydcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IHVzZXJTZXNzaW9uQ29uZmlnLnRyYWNpbmc7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl91cGRhdGVUcmFjaW5nQ29uZmlnKHRyYWNpbmdDb25maWcpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgLy8gc2V0IHVwIGF1ZGlvIHBsYXliYWNrXG4gICAgICAgICAgICAgICAgY29uc3QgYXVkaW9FbGVtZW50ID0gdGhpcy5vcHRpb25zLmF1ZGlvRWxlbWVudCA/PyBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhdWRpbycpO1xuICAgICAgICAgICAgICAgIGF1ZGlvRWxlbWVudC5hdXRvcGxheSA9IHRydWU7XG4gICAgICAgICAgICAgICAgcGVlckNvbm5lY3Rpb24ub250cmFjayA9IChldmVudCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBhdWRpb0VsZW1lbnQuc3JjT2JqZWN0ID0gZXZlbnQuc3RyZWFtc1swXTtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIC8vIGdldCBtaWNyb3Bob25lIHN0cmVhbVxuICAgICAgICAgICAgICAgIGNvbnN0IHN0cmVhbSA9IHRoaXMub3B0aW9ucy5tZWRpYVN0cmVhbSA/P1xuICAgICAgICAgICAgICAgICAgICAoYXdhaXQgbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWEoe1xuICAgICAgICAgICAgICAgICAgICAgICAgYXVkaW86IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgICAgICBwZWVyQ29ubmVjdGlvbi5hZGRUcmFjayhzdHJlYW0uZ2V0QXVkaW9UcmFja3MoKVswXSk7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5jaGFuZ2VQZWVyQ29ubmVjdGlvbikge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBvcmlnaW5hbFBlZXJDb25uZWN0aW9uID0gcGVlckNvbm5lY3Rpb247XG4gICAgICAgICAgICAgICAgICAgIHBlZXJDb25uZWN0aW9uID1cbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMub3B0aW9ucy5jaGFuZ2VQZWVyQ29ubmVjdGlvbihwZWVyQ29ubmVjdGlvbik7XG4gICAgICAgICAgICAgICAgICAgIGlmIChvcmlnaW5hbFBlZXJDb25uZWN0aW9uICE9PSBwZWVyQ29ubmVjdGlvbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgb3JpZ2luYWxQZWVyQ29ubmVjdGlvbi5vbmNvbm5lY3Rpb25zdGF0ZWNoYW5nZSA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYXR0YWNoQ29ubmVjdGlvblN0YXRlSGFuZGxlcihwZWVyQ29ubmVjdGlvbik7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuI3N0YXRlID0geyAuLi50aGlzLiNzdGF0ZSwgcGVlckNvbm5lY3Rpb24gfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3Qgb2ZmZXIgPSBhd2FpdCBwZWVyQ29ubmVjdGlvbi5jcmVhdGVPZmZlcigpO1xuICAgICAgICAgICAgICAgIGF3YWl0IHBlZXJDb25uZWN0aW9uLnNldExvY2FsRGVzY3JpcHRpb24ob2ZmZXIpO1xuICAgICAgICAgICAgICAgIGlmICghb2ZmZXIuc2RwKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignRmFpbGVkIHRvIGNyZWF0ZSBvZmZlcicpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCBzZHBSZXNwb25zZSA9IGF3YWl0IGZldGNoKGNvbm5lY3Rpb25VcmwsIHtcbiAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICAgICAgICAgIGJvZHk6IG9mZmVyLnNkcCxcbiAgICAgICAgICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9zZHAnLFxuICAgICAgICAgICAgICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke2FwaUtleX1gLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ1gtT3BlbkFJLUFnZW50cy1TREsnOiBIRUFERVJTWydYLU9wZW5BSS1BZ2VudHMtU0RLJ10sXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgY2FsbElkID0gc2RwUmVzcG9uc2UuaGVhZGVycz8uZ2V0KCdMb2NhdGlvbicpPy5zcGxpdCgnLycpLnBvcCgpO1xuICAgICAgICAgICAgICAgIHRoaXMuI3N0YXRlID0geyAuLi50aGlzLiNzdGF0ZSwgY2FsbElkIH07XG4gICAgICAgICAgICAgICAgY29uc3QgYW5zd2VyID0ge1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiAnYW5zd2VyJyxcbiAgICAgICAgICAgICAgICAgICAgc2RwOiBhd2FpdCBzZHBSZXNwb25zZS50ZXh0KCksXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBhd2FpdCBwZWVyQ29ubmVjdGlvbi5zZXRSZW1vdGVEZXNjcmlwdGlvbihhbnN3ZXIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICAgICAgICAgIHRoaXMuX29uRXJyb3IoZXJyb3IpO1xuICAgICAgICAgICAgICAgIHJlamVjdChlcnJvcik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZW5kIGFuIGV2ZW50IHRvIHRoZSBSZWFsdGltZSBBUEkuIFRoaXMgd2lsbCBzdHJpbmdpZnkgdGhlIGV2ZW50IGFuZCBzZW5kIGl0IGRpcmVjdGx5IHRvIHRoZVxuICAgICAqIEFQSS4gVGhpcyBjYW4gYmUgdXNlZCBpZiB5b3Ugd2FudCB0byB0YWtlIGNvbnRyb2wgb3ZlciB0aGUgY29ubmVjdGlvbiBhbmQgc2VuZCBldmVudHMgbWFudWFsbHkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZXZlbnQgLSBUaGUgZXZlbnQgdG8gc2VuZC5cbiAgICAgKi9cbiAgICBzZW5kRXZlbnQoZXZlbnQpIHtcbiAgICAgICAgaWYgKCF0aGlzLiNzdGF0ZS5kYXRhQ2hhbm5lbCB8fFxuICAgICAgICAgICAgdGhpcy4jc3RhdGUuZGF0YUNoYW5uZWwucmVhZHlTdGF0ZSAhPT0gJ29wZW4nKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1dlYlJUQyBkYXRhIGNoYW5uZWwgaXMgbm90IGNvbm5lY3RlZC4gTWFrZSBzdXJlIHlvdSBjYWxsIGBjb25uZWN0KClgIGJlZm9yZSBzZW5kaW5nIGV2ZW50cy4nKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLiNzdGF0ZS5kYXRhQ2hhbm5lbC5zZW5kKEpTT04uc3RyaW5naWZ5KGV2ZW50KSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE11dGUgb3IgdW5tdXRlIHRoZSBzZXNzaW9uLlxuICAgICAqIEBwYXJhbSBtdXRlZCAtIFdoZXRoZXIgdG8gbXV0ZSB0aGUgc2Vzc2lvbi5cbiAgICAgKi9cbiAgICBtdXRlKG11dGVkKSB7XG4gICAgICAgIHRoaXMuI211dGVkID0gbXV0ZWQ7XG4gICAgICAgIGlmICh0aGlzLiNzdGF0ZS5wZWVyQ29ubmVjdGlvbikge1xuICAgICAgICAgICAgY29uc3QgcGVlckNvbm5lY3Rpb24gPSB0aGlzLiNzdGF0ZS5wZWVyQ29ubmVjdGlvbjtcbiAgICAgICAgICAgIHBlZXJDb25uZWN0aW9uLmdldFNlbmRlcnMoKS5mb3JFYWNoKChzZW5kZXIpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoc2VuZGVyLnRyYWNrKSB7XG4gICAgICAgICAgICAgICAgICAgIHNlbmRlci50cmFjay5lbmFibGVkID0gIW11dGVkO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIF9hZnRlckF1ZGlvRG9uZUV2ZW50KCkge1xuICAgICAgICB0aGlzLiNvbmdvaW5nUmVzcG9uc2UgPSBmYWxzZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2xvc2UgdGhlIGNvbm5lY3Rpb24gdG8gdGhlIFJlYWx0aW1lIEFQSSBhbmQgZGlzY29ubmVjdHMgdGhlIHVuZGVybHlpbmcgV2ViUlRDIGNvbm5lY3Rpb24uXG4gICAgICovXG4gICAgY2xvc2UoKSB7XG4gICAgICAgIGlmICh0aGlzLiNzdGF0ZS5kYXRhQ2hhbm5lbCkge1xuICAgICAgICAgICAgdGhpcy4jc3RhdGUuZGF0YUNoYW5uZWwuY2xvc2UoKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy4jc3RhdGUucGVlckNvbm5lY3Rpb24pIHtcbiAgICAgICAgICAgIGNvbnN0IHBlZXJDb25uZWN0aW9uID0gdGhpcy4jc3RhdGUucGVlckNvbm5lY3Rpb247XG4gICAgICAgICAgICBwZWVyQ29ubmVjdGlvbi5vbmNvbm5lY3Rpb25zdGF0ZWNoYW5nZSA9IG51bGw7XG4gICAgICAgICAgICBwZWVyQ29ubmVjdGlvbi5nZXRTZW5kZXJzKCkuZm9yRWFjaCgoc2VuZGVyKSA9PiB7XG4gICAgICAgICAgICAgICAgc2VuZGVyLnRyYWNrPy5zdG9wKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHBlZXJDb25uZWN0aW9uLmNsb3NlKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuI3N0YXRlLnN0YXR1cyAhPT0gJ2Rpc2Nvbm5lY3RlZCcpIHtcbiAgICAgICAgICAgIHRoaXMuI3N0YXRlID0ge1xuICAgICAgICAgICAgICAgIHN0YXR1czogJ2Rpc2Nvbm5lY3RlZCcsXG4gICAgICAgICAgICAgICAgcGVlckNvbm5lY3Rpb246IHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICBkYXRhQ2hhbm5lbDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgICAgIGNhbGxJZDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMuZW1pdCgnY29ubmVjdGlvbl9jaGFuZ2UnLCB0aGlzLiNzdGF0ZS5zdGF0dXMpO1xuICAgICAgICAgICAgdGhpcy5fb25DbG9zZSgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEludGVycnVwdCB0aGUgY3VycmVudCByZXNwb25zZSBpZiBvbmUgaXMgb25nb2luZyBhbmQgY2xlYXIgdGhlIGF1ZGlvIGJ1ZmZlciBzbyB0aGF0IHRoZSBhZ2VudFxuICAgICAqIHN0b3BzIHRhbGtpbmcuXG4gICAgICovXG4gICAgaW50ZXJydXB0KCkge1xuICAgICAgICBpZiAodGhpcy4jb25nb2luZ1Jlc3BvbnNlKSB7XG4gICAgICAgICAgICB0aGlzLnNlbmRFdmVudCh7XG4gICAgICAgICAgICAgICAgdHlwZTogJ3Jlc3BvbnNlLmNhbmNlbCcsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMuI29uZ29pbmdSZXNwb25zZSA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc2VuZEV2ZW50KHtcbiAgICAgICAgICAgIHR5cGU6ICdvdXRwdXRfYXVkaW9fYnVmZmVyLmNsZWFyJyxcbiAgICAgICAgfSk7XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9b3BlbmFpUmVhbHRpbWVXZWJSdGMubWpzLm1hcCIsIi8vLyA8cmVmZXJlbmNlIGxpYj1cImRvbVwiIC8+XG5leHBvcnQgY29uc3QgV2ViU29ja2V0ID0gZ2xvYmFsVGhpcy5XZWJTb2NrZXQ7XG5leHBvcnQgZnVuY3Rpb24gaXNCcm93c2VyRW52aXJvbm1lbnQoKSB7XG4gICAgcmV0dXJuIHRydWU7XG59XG5leHBvcnQgY29uc3QgdXNlV2ViU29ja2V0UHJvdG9jb2xzID0gdHJ1ZTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXNoaW1zLWJyb3dzZXIubWpzLm1hcCIsImltcG9ydCB7IGlzQnJvd3NlckVudmlyb25tZW50LCB1c2VXZWJTb2NrZXRQcm90b2NvbHMsIFdlYlNvY2tldCwgfSBmcm9tICdAb3BlbmFpL2FnZW50cy1yZWFsdGltZS9fc2hpbXMnO1xuaW1wb3J0IHsgT3BlbkFJUmVhbHRpbWVCYXNlLCB9IGZyb20gXCIuL29wZW5haVJlYWx0aW1lQmFzZS5tanNcIjtcbmltcG9ydCB7IGJhc2U2NFRvQXJyYXlCdWZmZXIsIEhFQURFUlMsIFdFQlNPQ0tFVF9NRVRBIH0gZnJvbSBcIi4vdXRpbHMubWpzXCI7XG5pbXBvcnQgeyBVc2VyRXJyb3IgfSBmcm9tICdAb3BlbmFpL2FnZW50cy1jb3JlJztcbmltcG9ydCB7IHBhcnNlUmVhbHRpbWVFdmVudCB9IGZyb20gXCIuL29wZW5haVJlYWx0aW1lRXZlbnRzLm1qc1wiO1xuLyoqXG4gKiBUcmFuc3BvcnQgbGF5ZXIgdGhhdCdzIGhhbmRsaW5nIHRoZSBjb25uZWN0aW9uIGJldHdlZW4gdGhlIGNsaWVudCBhbmQgT3BlbkFJJ3MgUmVhbHRpbWUgQVBJXG4gKiB2aWEgV2ViU29ja2V0cy4gV2hpbGUgdGhpcyB0cmFuc3BvcnQgbGF5ZXIgaXMgZGVzaWduZWQgdG8gYmUgdXNlZCB3aXRoaW4gYSBSZWFsdGltZVNlc3Npb24sIGl0XG4gKiBjYW4gYWxzbyBiZSB1c2VkIHN0YW5kYWxvbmUgaWYgeW91IHdhbnQgdG8gaGF2ZSBhIGRpcmVjdCBjb25uZWN0aW9uIHRvIHRoZSBSZWFsdGltZSBBUEkuXG4gKi9cbmV4cG9ydCBjbGFzcyBPcGVuQUlSZWFsdGltZVdlYlNvY2tldCBleHRlbmRzIE9wZW5BSVJlYWx0aW1lQmFzZSB7XG4gICAgI2FwaUtleTtcbiAgICAjdXJsO1xuICAgICNkZWZhdWx0VXJsO1xuICAgICNzdGF0ZSA9IHtcbiAgICAgICAgc3RhdHVzOiAnZGlzY29ubmVjdGVkJyxcbiAgICAgICAgd2Vic29ja2V0OiB1bmRlZmluZWQsXG4gICAgfTtcbiAgICAjdXNlSW5zZWN1cmVBcGlLZXk7XG4gICAgI2N1cnJlbnRJdGVtSWQ7XG4gICAgI2N1cnJlbnRBdWRpb0NvbnRlbnRJbmRleDtcbiAgICAvKipcbiAgICAgKiBUaW1lc3RhbXAgbWFpbnRhaW5lZCBieSB0aGUgdHJhbnNwb3J0IGxheWVyIHRvIGFpZCB3aXRoIHRoZSBjYWxjdWxhdGlvbiBvZiB0aGUgZWxhcHNlZCB0aW1lXG4gICAgICogc2luY2UgdGhlIHJlc3BvbnNlIHN0YXJ0ZWQgdG8gY29tcHV0ZSB0aGUgcmlnaHQgaW50ZXJydXB0aW9uIHRpbWUuXG4gICAgICpcbiAgICAgKiBNb3N0bHkgaW50ZXJuYWwgYnV0IG1pZ2h0IGJlIHVzZWQgYnkgZXh0ZW5kZWQgdHJhbnNwb3J0IGxheWVycyBmb3IgdGhlaXIgaW50ZXJydXB0aW9uXG4gICAgICogY2FsY3VsYXRpb24uXG4gICAgICovXG4gICAgX2ZpcnN0QXVkaW9UaW1lc3RhbXA7XG4gICAgX2F1ZGlvTGVuZ3RoTXMgPSAwO1xuICAgICNvbmdvaW5nUmVzcG9uc2UgPSBmYWxzZTtcbiAgICAjY3JlYXRlV2ViU29ja2V0O1xuICAgICNza2lwT3BlbkV2ZW50TGlzdGVuZXJzO1xuICAgICNyZXNldEF1ZGlvUGxheWJhY2tTdGF0ZSgpIHtcbiAgICAgICAgdGhpcy4jY3VycmVudEl0ZW1JZCA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5fZmlyc3RBdWRpb1RpbWVzdGFtcCA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5fYXVkaW9MZW5ndGhNcyA9IDA7XG4gICAgICAgIHRoaXMuI2N1cnJlbnRBdWRpb0NvbnRlbnRJbmRleCA9IHVuZGVmaW5lZDtcbiAgICB9XG4gICAgY29uc3RydWN0b3Iob3B0aW9ucyA9IHt9KSB7XG4gICAgICAgIHN1cGVyKG9wdGlvbnMpO1xuICAgICAgICB0aGlzLiN1cmwgPSBvcHRpb25zLnVybDtcbiAgICAgICAgdGhpcy4jZGVmYXVsdFVybCA9IG9wdGlvbnMudXJsO1xuICAgICAgICB0aGlzLiN1c2VJbnNlY3VyZUFwaUtleSA9IG9wdGlvbnMudXNlSW5zZWN1cmVBcGlLZXkgPz8gZmFsc2U7XG4gICAgICAgIHRoaXMuI2NyZWF0ZVdlYlNvY2tldCA9IG9wdGlvbnMuY3JlYXRlV2ViU29ja2V0O1xuICAgICAgICB0aGlzLiNza2lwT3BlbkV2ZW50TGlzdGVuZXJzID0gb3B0aW9ucy5za2lwT3BlbkV2ZW50TGlzdGVuZXJzID8/IGZhbHNlO1xuICAgIH1cbiAgICBnZXRDb21tb25SZXF1ZXN0SGVhZGVycygpIHtcbiAgICAgICAgcmV0dXJuIEhFQURFUlM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBjdXJyZW50IHN0YXR1cyBvZiB0aGUgV2ViU29ja2V0IGNvbm5lY3Rpb24uXG4gICAgICovXG4gICAgZ2V0IHN0YXR1cygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuI3N0YXRlLnN0YXR1cztcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIGN1cnJlbnQgY29ubmVjdGlvbiBzdGF0ZSBvZiB0aGUgV2ViU29ja2V0IGNvbm5lY3Rpb24uXG4gICAgICovXG4gICAgZ2V0IGNvbm5lY3Rpb25TdGF0ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuI3N0YXRlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBbHdheXMgcmV0dXJucyBgbnVsbGAgYXMgdGhlIFdlYlNvY2tldCB0cmFuc3BvcnQgbGF5ZXIgZG9lcyBub3QgaGFuZGxlIG11dGluZy4gSW5zdGVhZCxcbiAgICAgKiB0aGlzIHNob3VsZCBiZSBoYW5kbGVkIGJ5IHRoZSBjbGllbnQgYnkgbm90IHRyaWdnZXJpbmcgdGhlIGBzZW5kQXVkaW9gIG1ldGhvZC5cbiAgICAgKi9cbiAgICBnZXQgbXV0ZWQoKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgY3VycmVudCBpdGVtIElEIG9mIHRoZSBvbmdvaW5nIHJlc3BvbnNlLlxuICAgICAqL1xuICAgIGdldCBjdXJyZW50SXRlbUlkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy4jY3VycmVudEl0ZW1JZDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVHJpZ2dlcnMgdGhlIGBhdWRpb2AgZXZlbnQgdGhhdCBhIGNsaWVudCBtaWdodCBsaXN0ZW4gdG8gdG8gcmVjZWl2ZSB0aGUgYXVkaW8gYnVmZmVyLlxuICAgICAqIFByb3RlY3RlZCBmb3IgeW91IHRvIGJlIGFibGUgdG8gb3ZlcnJpZGUgYW5kIGRpc2FibGUgZW1pdHRpbmcgdGhpcyBldmVudCBpbiBjYXNlIHlvdXIgZXh0ZW5kZWRcbiAgICAgKiB0cmFuc3BvcnQgbGF5ZXIgaGFuZGxlcyBhdWRpbyBpbnRlcm5hbGx5LlxuICAgICAqXG4gICAgICogQHBhcmFtIGF1ZGlvRXZlbnQgLSBUaGUgYXVkaW8gZXZlbnQgdG8gZW1pdC5cbiAgICAgKi9cbiAgICBfb25BdWRpbyhhdWRpb0V2ZW50KSB7XG4gICAgICAgIHRoaXMuZW1pdCgnYXVkaW8nLCBhdWRpb0V2ZW50KTtcbiAgICB9XG4gICAgX2FmdGVyQXVkaW9Eb25lRXZlbnQoKSB7XG4gICAgICAgIHRoaXMuI3Jlc2V0QXVkaW9QbGF5YmFja1N0YXRlKCk7XG4gICAgfVxuICAgIGFzeW5jICNzZXR1cFdlYlNvY2tldChyZXNvbHZlLCByZWplY3QsIHNlc3Npb25Db25maWcpIHtcbiAgICAgICAgaWYgKHRoaXMuI3N0YXRlLndlYnNvY2tldCkge1xuICAgICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmICghdGhpcy4jYXBpS2V5KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVXNlckVycm9yKCdBUEkga2V5IGlzIG5vdCBzZXQuIFBsZWFzZSBjYWxsIGBjb25uZWN0KClgIHdpdGggYW4gQVBJIGtleSBmaXJzdC4nKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaXNCcm93c2VyRW52aXJvbm1lbnQoKSAmJlxuICAgICAgICAgICAgIXRoaXMuI2FwaUtleS5zdGFydHNXaXRoKCdla18nKSAmJlxuICAgICAgICAgICAgIXRoaXMuI3VzZUluc2VjdXJlQXBpS2V5KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVXNlckVycm9yKCdVc2luZyB0aGUgV2ViU29ja2V0IGNvbm5lY3Rpb24gaW4gYSBicm93c2VyIGVudmlyb25tZW50IHJlcXVpcmVzIGFuIGVwaGVtZXJhbCBjbGllbnQga2V5LiBJZiB5b3UgaGF2ZSB0byB1c2UgYSByZWd1bGFyIEFQSSBrZXksIHNldCB0aGUgYHVzZUluc2VjdXJlQXBpS2V5YCBvcHRpb24gdG8gdHJ1ZS4nKTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgd3MgPSBudWxsO1xuICAgICAgICBpZiAodGhpcy4jY3JlYXRlV2ViU29ja2V0KSB7XG4gICAgICAgICAgICB3cyA9IGF3YWl0IHRoaXMuI2NyZWF0ZVdlYlNvY2tldCh7XG4gICAgICAgICAgICAgICAgdXJsOiB0aGlzLiN1cmwsXG4gICAgICAgICAgICAgICAgYXBpS2V5OiB0aGlzLiNhcGlLZXksXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIC8vIGJyb3dzZXJzIGFuZCB3b3JrZXJkIHNob3VsZCB1c2UgdGhlIHByb3RvY29scyBhcmd1bWVudCwgbm9kZSBzaG91bGQgdXNlIHRoZSBoZWFkZXJzIGFyZ3VtZW50XG4gICAgICAgICAgICBjb25zdCB3ZWJzb2NrZXRBcmd1bWVudHMgPSB1c2VXZWJTb2NrZXRQcm90b2NvbHNcbiAgICAgICAgICAgICAgICA/IFtcbiAgICAgICAgICAgICAgICAgICAgJ3JlYWx0aW1lJyxcbiAgICAgICAgICAgICAgICAgICAgLy8gQXV0aFxuICAgICAgICAgICAgICAgICAgICAnb3BlbmFpLWluc2VjdXJlLWFwaS1rZXkuJyArIHRoaXMuI2FwaUtleSxcbiAgICAgICAgICAgICAgICAgICAgLy8gVmVyc2lvbiBoZWFkZXJcbiAgICAgICAgICAgICAgICAgICAgV0VCU09DS0VUX01FVEEsXG4gICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgICAgIDoge1xuICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7dGhpcy4jYXBpS2V5fWAsXG4gICAgICAgICAgICAgICAgICAgICAgICAuLi50aGlzLmdldENvbW1vblJlcXVlc3RIZWFkZXJzKCksXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHdzID0gbmV3IFdlYlNvY2tldCh0aGlzLiN1cmwsIHdlYnNvY2tldEFyZ3VtZW50cyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy4jc3RhdGUgPSB7XG4gICAgICAgICAgICBzdGF0dXM6ICdjb25uZWN0aW5nJyxcbiAgICAgICAgICAgIHdlYnNvY2tldDogd3MsXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuZW1pdCgnY29ubmVjdGlvbl9jaGFuZ2UnLCB0aGlzLiNzdGF0ZS5zdGF0dXMpO1xuICAgICAgICBjb25zdCBvblNvY2tldE9wZW5SZWFkeSA9ICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuI3N0YXRlID0ge1xuICAgICAgICAgICAgICAgIHN0YXR1czogJ2Nvbm5lY3RlZCcsXG4gICAgICAgICAgICAgICAgd2Vic29ja2V0OiB3cyxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLmVtaXQoJ2Nvbm5lY3Rpb25fY2hhbmdlJywgdGhpcy4jc3RhdGUuc3RhdHVzKTtcbiAgICAgICAgICAgIHRoaXMuX29uT3BlbigpO1xuICAgICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICB9O1xuICAgICAgICBpZiAodGhpcy4jc2tpcE9wZW5FdmVudExpc3RlbmVycyA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgb25Tb2NrZXRPcGVuUmVhZHkoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHdzLmFkZEV2ZW50TGlzdGVuZXIoJ29wZW4nLCBvblNvY2tldE9wZW5SZWFkeSk7XG4gICAgICAgIH1cbiAgICAgICAgd3MuYWRkRXZlbnRMaXN0ZW5lcignZXJyb3InLCAoZXJyb3IpID0+IHtcbiAgICAgICAgICAgIHRoaXMuX29uRXJyb3IoZXJyb3IpO1xuICAgICAgICAgICAgdGhpcy4jc3RhdGUgPSB7XG4gICAgICAgICAgICAgICAgc3RhdHVzOiAnZGlzY29ubmVjdGVkJyxcbiAgICAgICAgICAgICAgICB3ZWJzb2NrZXQ6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLmVtaXQoJ2Nvbm5lY3Rpb25fY2hhbmdlJywgdGhpcy4jc3RhdGUuc3RhdHVzKTtcbiAgICAgICAgICAgIHJlamVjdChlcnJvcik7XG4gICAgICAgIH0pO1xuICAgICAgICB3cy5hZGRFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgKG1lc3NhZ2UpID0+IHtcbiAgICAgICAgICAgIHRoaXMuX29uTWVzc2FnZShtZXNzYWdlKTtcbiAgICAgICAgICAgIGNvbnN0IHsgZGF0YTogcGFyc2VkLCBpc0dlbmVyaWMgfSA9IHBhcnNlUmVhbHRpbWVFdmVudChtZXNzYWdlKTtcbiAgICAgICAgICAgIGlmICghcGFyc2VkIHx8IGlzR2VuZXJpYykge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChwYXJzZWQudHlwZSA9PT0gJ3Jlc3BvbnNlLm91dHB1dF9hdWRpby5kZWx0YScpIHtcbiAgICAgICAgICAgICAgICB0aGlzLiNjdXJyZW50QXVkaW9Db250ZW50SW5kZXggPSBwYXJzZWQuY29udGVudF9pbmRleDtcbiAgICAgICAgICAgICAgICB0aGlzLiNjdXJyZW50SXRlbUlkID0gcGFyc2VkLml0ZW1faWQ7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuX2ZpcnN0QXVkaW9UaW1lc3RhbXAgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAvLyBJZiB0aGUgcmVzcG9uc2Ugc3RhcnQgdGltZXN0YW1wIGlzIG5vdCBzZXQsIHdlIHNldCBpdCB0byB0aGUgY3VycmVudCB0aW1lLlxuICAgICAgICAgICAgICAgICAgICAvLyBUaGlzIGlzIHVzZWQgdG8gY2FsY3VsYXRlIHRoZSBlbGFwc2VkIHRpbWUgZm9yIGludGVycnVwdGlvbi5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fZmlyc3RBdWRpb1RpbWVzdGFtcCA9IERhdGUubm93KCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2F1ZGlvTGVuZ3RoTXMgPSAwO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCBidWZmID0gYmFzZTY0VG9BcnJheUJ1ZmZlcihwYXJzZWQuZGVsdGEpO1xuICAgICAgICAgICAgICAgIC8vIGNhbGN1bGF0ZSB0aGUgYXVkaW8gbGVuZ3RoIGluIG1pbGxpc2Vjb25kc1xuICAgICAgICAgICAgICAgIC8vIEdBIGZvcm1hdDogc2Vzc2lvbi5hdWRpby5vdXRwdXQuZm9ybWF0IHN1cHBvcnRzIHN0cnVjdHVyZWQgeyB0eXBlOiBcImF1ZGlvL3BjbVwiLCByYXRlIH0gb3IgXCJhdWRpby9wY211XCIgZXRjLlxuICAgICAgICAgICAgICAgIGNvbnN0IGZtdCA9IHRoaXMuX3Jhd1Nlc3Npb25Db25maWc/LmF1ZGlvPy5vdXRwdXQ/LmZvcm1hdDtcbiAgICAgICAgICAgICAgICBpZiAoZm10ICYmIHR5cGVvZiBmbXQgPT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFN0cnVjdHVyZWQgZm9ybWF0XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHQgPSBmbXQudHlwZTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHQgPT09ICdhdWRpby9wY211JyB8fCB0ID09PSAnYXVkaW8vcGNtYScpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIDhrSHosIDEgYnl0ZSBwZXIgc2FtcGxlXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9hdWRpb0xlbmd0aE1zICs9IGJ1ZmYuYnl0ZUxlbmd0aCAvIDg7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAodCA9PT0gJ2F1ZGlvL3BjbScpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHJhdGUgPSBmbXQucmF0ZSA/PyAyNDAwMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGJ5dGVzIC0+IHNhbXBsZXMgKDIgYnl0ZXMgcGVyIHNhbXBsZSkgLT4gbXNcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX2F1ZGlvTGVuZ3RoTXMgKz0gKGJ1ZmYuYnl0ZUxlbmd0aCAvIDIgLyByYXRlKSAqIDEwMDA7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBGYWxsYmFjayBhc3N1bXB0aW9uIHNpbWlsYXIgdG8gbGVnYWN5XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9hdWRpb0xlbmd0aE1zICs9IGJ1ZmYuYnl0ZUxlbmd0aCAvIDI0IC8gMjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmICh0eXBlb2YgZm10ID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZm10LnN0YXJ0c1dpdGgoJ2c3MTFfJykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX2F1ZGlvTGVuZ3RoTXMgKz0gYnVmZi5ieXRlTGVuZ3RoIC8gODtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEFzc3VtZSAyNGtIeiBQQ00xNlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fYXVkaW9MZW5ndGhNcyArPSBidWZmLmJ5dGVMZW5ndGggLyAyNCAvIDI7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIERlZmF1bHQgdG8gMjRrSHogUENNMTYgYmVoYXZpb3IgaWYgdW5zcGVjaWZpZWRcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fYXVkaW9MZW5ndGhNcyArPSBidWZmLmJ5dGVMZW5ndGggLyAyNCAvIDI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IGF1ZGlvRXZlbnQgPSB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdhdWRpbycsXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IGJ1ZmYsXG4gICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlSWQ6IHBhcnNlZC5yZXNwb25zZV9pZCxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHRoaXMuX29uQXVkaW8oYXVkaW9FdmVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChwYXJzZWQudHlwZSA9PT0gJ2lucHV0X2F1ZGlvX2J1ZmZlci5zcGVlY2hfc3RhcnRlZCcpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBhdXRvbWF0aWNSZXNwb25zZUNhbmNlbGxhdGlvbkVuYWJsZWQgPSB0aGlzLl9yYXdTZXNzaW9uQ29uZmlnPy5hdWRpbz8uaW5wdXQ/LnR1cm5fZGV0ZWN0aW9uXG4gICAgICAgICAgICAgICAgICAgID8uaW50ZXJydXB0X3Jlc3BvbnNlID8/IGZhbHNlO1xuICAgICAgICAgICAgICAgIHRoaXMuaW50ZXJydXB0KCFhdXRvbWF0aWNSZXNwb25zZUNhbmNlbGxhdGlvbkVuYWJsZWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAocGFyc2VkLnR5cGUgPT09ICdyZXNwb25zZS5jcmVhdGVkJykge1xuICAgICAgICAgICAgICAgIHRoaXMuI29uZ29pbmdSZXNwb25zZSA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChwYXJzZWQudHlwZSA9PT0gJ3Jlc3BvbnNlLmRvbmUnKSB7XG4gICAgICAgICAgICAgICAgdGhpcy4jb25nb2luZ1Jlc3BvbnNlID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChwYXJzZWQudHlwZSA9PT0gJ3Nlc3Npb24uY3JlYXRlZCcpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl90cmFjaW5nQ29uZmlnID0gcGFyc2VkLnNlc3Npb24udHJhY2luZztcbiAgICAgICAgICAgICAgICAvLyBUcnlpbmcgdG8gdHVybiBvbiB0cmFjaW5nIGFmdGVyIHRoZSBzZXNzaW9uIGlzIGNyZWF0ZWRcbiAgICAgICAgICAgICAgICBjb25zdCB0cmFjaW5nQ29uZmlnID0gdHlwZW9mIHNlc3Npb25Db25maWcudHJhY2luZyA9PT0gJ3VuZGVmaW5lZCdcbiAgICAgICAgICAgICAgICAgICAgPyAnYXV0bydcbiAgICAgICAgICAgICAgICAgICAgOiBzZXNzaW9uQ29uZmlnLnRyYWNpbmc7XG4gICAgICAgICAgICAgICAgdGhpcy5fdXBkYXRlVHJhY2luZ0NvbmZpZyh0cmFjaW5nQ29uZmlnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHdzLmFkZEV2ZW50TGlzdGVuZXIoJ2Nsb3NlJywgKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy4jc3RhdGUgPSB7XG4gICAgICAgICAgICAgICAgc3RhdHVzOiAnZGlzY29ubmVjdGVkJyxcbiAgICAgICAgICAgICAgICB3ZWJzb2NrZXQ6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLmVtaXQoJ2Nvbm5lY3Rpb25fY2hhbmdlJywgdGhpcy4jc3RhdGUuc3RhdHVzKTtcbiAgICAgICAgICAgIHRoaXMuX29uQ2xvc2UoKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGFzeW5jIGNvbm5lY3Qob3B0aW9ucykge1xuICAgICAgICBjb25zdCBtb2RlbCA9IG9wdGlvbnMubW9kZWwgPz8gdGhpcy5jdXJyZW50TW9kZWw7XG4gICAgICAgIHRoaXMuY3VycmVudE1vZGVsID0gbW9kZWw7XG4gICAgICAgIHRoaXMuI2FwaUtleSA9IGF3YWl0IHRoaXMuX2dldEFwaUtleShvcHRpb25zKTtcbiAgICAgICAgY29uc3QgY2FsbElkID0gb3B0aW9ucy5jYWxsSWQ7XG4gICAgICAgIGxldCB1cmw7XG4gICAgICAgIGlmIChvcHRpb25zLnVybCkge1xuICAgICAgICAgICAgdXJsID0gb3B0aW9ucy51cmw7XG4gICAgICAgICAgICB0aGlzLiNkZWZhdWx0VXJsID0gb3B0aW9ucy51cmw7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoY2FsbElkKSB7XG4gICAgICAgICAgICB1cmwgPSBgd3NzOi8vYXBpLm9wZW5haS5jb20vdjEvcmVhbHRpbWU/Y2FsbF9pZD0ke2NhbGxJZH1gO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRoaXMuI2RlZmF1bHRVcmwpIHtcbiAgICAgICAgICAgIHVybCA9IHRoaXMuI2RlZmF1bHRVcmw7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB1cmwgPSBgd3NzOi8vYXBpLm9wZW5haS5jb20vdjEvcmVhbHRpbWU/bW9kZWw9JHt0aGlzLmN1cnJlbnRNb2RlbH1gO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuI3VybCA9IHVybDtcbiAgICAgICAgY29uc3Qgc2Vzc2lvbkNvbmZpZyA9IHtcbiAgICAgICAgICAgIC4uLihvcHRpb25zLmluaXRpYWxTZXNzaW9uQ29uZmlnIHx8IHt9KSxcbiAgICAgICAgICAgIG1vZGVsOiB0aGlzLmN1cnJlbnRNb2RlbCxcbiAgICAgICAgfTtcbiAgICAgICAgYXdhaXQgbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgdGhpcy4jc2V0dXBXZWJTb2NrZXQocmVzb2x2ZSwgcmVqZWN0LCBzZXNzaW9uQ29uZmlnKS5jYXRjaChyZWplY3QpO1xuICAgICAgICB9KTtcbiAgICAgICAgYXdhaXQgdGhpcy51cGRhdGVTZXNzaW9uQ29uZmlnKHNlc3Npb25Db25maWcpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZW5kIGFuIGV2ZW50IHRvIHRoZSBSZWFsdGltZSBBUEkuIFRoaXMgd2lsbCBzdHJpbmdpZnkgdGhlIGV2ZW50IGFuZCBzZW5kIGl0IGRpcmVjdGx5IHRvIHRoZVxuICAgICAqIEFQSS4gVGhpcyBjYW4gYmUgdXNlZCBpZiB5b3Ugd2FudCB0byB0YWtlIGNvbnRyb2wgb3ZlciB0aGUgY29ubmVjdGlvbiBhbmQgc2VuZCBldmVudHMgbWFudWFsbHkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZXZlbnQgLSBUaGUgZXZlbnQgdG8gc2VuZC5cbiAgICAgKi9cbiAgICBzZW5kRXZlbnQoZXZlbnQpIHtcbiAgICAgICAgaWYgKCF0aGlzLiNzdGF0ZS53ZWJzb2NrZXQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignV2ViU29ja2V0IGlzIG5vdCBjb25uZWN0ZWQuIE1ha2Ugc3VyZSB5b3UgY2FsbCBgY29ubmVjdCgpYCBiZWZvcmUgc2VuZGluZyBldmVudHMuJyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy4jc3RhdGUud2Vic29ja2V0LnNlbmQoSlNPTi5zdHJpbmdpZnkoZXZlbnQpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2xvc2UgdGhlIFdlYlNvY2tldCBjb25uZWN0aW9uLlxuICAgICAqXG4gICAgICogVGhpcyB3aWxsIGFsc28gcmVzZXQgYW55IGludGVybmFsIGNvbm5lY3Rpb24gdHJhY2tpbmcgdXNlZCBmb3IgaW50ZXJydXB0aW9uIGhhbmRsaW5nLlxuICAgICAqL1xuICAgIGNsb3NlKCkge1xuICAgICAgICB0aGlzLiNzdGF0ZS53ZWJzb2NrZXQ/LmNsb3NlKCk7XG4gICAgICAgIHRoaXMuI2N1cnJlbnRJdGVtSWQgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMuX2ZpcnN0QXVkaW9UaW1lc3RhbXAgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMuX2F1ZGlvTGVuZ3RoTXMgPSAwO1xuICAgICAgICB0aGlzLiNjdXJyZW50QXVkaW9Db250ZW50SW5kZXggPSB1bmRlZmluZWQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFdpbGwgdGhyb3cgYW4gZXJyb3IgYXMgdGhlIFdlYlNvY2tldCB0cmFuc3BvcnQgbGF5ZXIgZG9lcyBub3Qgc3VwcG9ydCBtdXRpbmcuXG4gICAgICovXG4gICAgbXV0ZShfbXV0ZWQpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdNdXRlIGlzIG5vdCBzdXBwb3J0ZWQgZm9yIHRoZSBXZWJTb2NrZXQgdHJhbnNwb3J0LiBZb3UgaGF2ZSB0byBtdXRlIHRoZSBhdWRpbyBpbnB1dCB5b3Vyc2VsZi4nKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2VuZCBhbiBhdWRpbyBidWZmZXIgdG8gdGhlIFJlYWx0aW1lIEFQSS4gVGhpcyBpcyB1c2VkIGZvciB5b3VyIGNsaWVudCB0byBzZW5kIGF1ZGlvIHRvIHRoZVxuICAgICAqIG1vZGVsIHRvIHJlc3BvbmQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gYXVkaW8gLSBUaGUgYXVkaW8gYnVmZmVyIHRvIHNlbmQuXG4gICAgICogQHBhcmFtIG9wdGlvbnMgLSBUaGUgb3B0aW9ucyBmb3IgdGhlIGF1ZGlvIGJ1ZmZlci5cbiAgICAgKi9cbiAgICBzZW5kQXVkaW8oYXVkaW8sIG9wdGlvbnMgPSB7fSkge1xuICAgICAgICBpZiAodGhpcy4jc3RhdGUuc3RhdHVzID09PSAnY29ubmVjdGVkJykge1xuICAgICAgICAgICAgc3VwZXIuc2VuZEF1ZGlvKGF1ZGlvLCBvcHRpb25zKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZW5kIGEgY2FuY2VsIHJlc3BvbnNlIGV2ZW50IHRvIHRoZSBSZWFsdGltZSBBUEkuIFRoaXMgaXMgdXNlZCB0byBjYW5jZWwgYW4gb25nb2luZ1xuICAgICAqICByZXNwb25zZSB0aGF0IHRoZSBtb2RlbCBpcyBjdXJyZW50bHkgZ2VuZXJhdGluZy5cbiAgICAgKi9cbiAgICBfY2FuY2VsUmVzcG9uc2UoKSB7XG4gICAgICAgIC8vIGNhbmNlbCB0aGUgb25nb2luZyByZXNwb25zZVxuICAgICAgICBpZiAodGhpcy4jb25nb2luZ1Jlc3BvbnNlKSB7XG4gICAgICAgICAgICB0aGlzLnNlbmRFdmVudCh7XG4gICAgICAgICAgICAgICAgdHlwZTogJ3Jlc3BvbnNlLmNhbmNlbCcsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMuI29uZ29pbmdSZXNwb25zZSA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIERvIE5PVCBjYWxsIHRoaXMgbWV0aG9kIGRpcmVjdGx5LiBDYWxsIGBpbnRlcnJ1cHQoKWAgaW5zdGVhZCBmb3IgcHJvcGVyIGludGVycnVwdGlvbiBoYW5kbGluZy5cbiAgICAgKlxuICAgICAqIFRoaXMgbWV0aG9kIGlzIHVzZWQgdG8gc2VuZCB0aGUgcmlnaHQgZXZlbnRzIHRvIHRoZSBBUEkgdG8gaW5mb3JtIHRoZSBtb2RlbCB0aGF0IHRoZSB1c2VyIGhhc1xuICAgICAqIGludGVycnVwdGVkIHRoZSByZXNwb25zZS4gSXQgbWlnaHQgYmUgb3ZlcnJpZGRlbi9leHRlbmRlZCBieSBhbiBleHRlbmRlZCB0cmFuc3BvcnQgbGF5ZXIuIFNlZVxuICAgICAqIHRoZSBgVHdpbGlvUmVhbHRpbWVUcmFuc3BvcnRMYXllcmAgZm9yIGFuIGV4YW1wbGUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZWxhcHNlZFRpbWUgLSBUaGUgZWxhcHNlZCB0aW1lIHNpbmNlIHRoZSByZXNwb25zZSBzdGFydGVkLlxuICAgICAqL1xuICAgIF9pbnRlcnJ1cHQoZWxhcHNlZFRpbWUsIGNhbmNlbE9uZ29pbmdSZXNwb25zZSA9IHRydWUpIHtcbiAgICAgICAgaWYgKGVsYXBzZWRUaW1lIDwgMCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIC8vIGltbWVkaWF0ZWx5IGVtaXQgdGhpcyBldmVudCBzbyB0aGUgY2xpZW50IGNhbiBzdG9wIHBsYXlpbmcgYXVkaW9cbiAgICAgICAgaWYgKGNhbmNlbE9uZ29pbmdSZXNwb25zZSkge1xuICAgICAgICAgICAgdGhpcy5fY2FuY2VsUmVzcG9uc2UoKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBsZW5ndGggPSB0aGlzLl9hdWRpb0xlbmd0aE1zID8/IE51bWJlci5QT1NJVElWRV9JTkZJTklUWTtcbiAgICAgICAgLy8gYXVkaW9fZW5kX21zIG11c3QgYmUgYW4gaW50ZWdlclxuICAgICAgICBjb25zdCBhdWRpb19lbmRfbXMgPSBNYXRoLm1heCgwLCBNYXRoLmZsb29yKE1hdGgubWluKGVsYXBzZWRUaW1lLCBsZW5ndGgpKSk7XG4gICAgICAgIHRoaXMuZW1pdCgnYXVkaW9faW50ZXJydXB0ZWQnKTtcbiAgICAgICAgdGhpcy5zZW5kRXZlbnQoe1xuICAgICAgICAgICAgdHlwZTogJ2NvbnZlcnNhdGlvbi5pdGVtLnRydW5jYXRlJyxcbiAgICAgICAgICAgIGl0ZW1faWQ6IHRoaXMuI2N1cnJlbnRJdGVtSWQsXG4gICAgICAgICAgICBjb250ZW50X2luZGV4OiB0aGlzLiNjdXJyZW50QXVkaW9Db250ZW50SW5kZXgsXG4gICAgICAgICAgICBhdWRpb19lbmRfbXMsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBJbnRlcnJ1cHQgdGhlIG9uZ29pbmcgcmVzcG9uc2UuIFRoaXMgbWV0aG9kIGlzIHRyaWdnZXJlZCBhdXRvbWF0aWNhbGx5IGJ5IHRoZSBjbGllbnQgd2hlblxuICAgICAqIHZvaWNlIGFjdGl2aXR5IGRldGVjdGlvbiAoVkFEKSBpcyBlbmFibGVkIChkZWZhdWx0KSBhcyB3ZWxsIGFzIHdoZW4gYW4gb3V0cHV0IGd1YXJkcmFpbCBnb3RcbiAgICAgKiB0cmlnZ2VyZWQuXG4gICAgICpcbiAgICAgKiBZb3UgY2FuIGFsc28gY2FsbCB0aGlzIG1ldGhvZCBkaXJlY3RseSBpZiB5b3Ugd2FudCB0byBpbnRlcnJ1cHQgdGhlIGNvbnZlcnNhdGlvbiBmb3IgZXhhbXBsZVxuICAgICAqIGJhc2VkIG9uIGFuIGV2ZW50IGluIHRoZSBjbGllbnQuXG4gICAgICovXG4gICAgaW50ZXJydXB0KGNhbmNlbE9uZ29pbmdSZXNwb25zZSA9IHRydWUpIHtcbiAgICAgICAgaWYgKCF0aGlzLiNjdXJyZW50SXRlbUlkIHx8IHR5cGVvZiB0aGlzLl9maXJzdEF1ZGlvVGltZXN0YW1wICE9PSAnbnVtYmVyJykge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGVsYXBzZWRUaW1lID0gRGF0ZS5ub3coKSAtIHRoaXMuX2ZpcnN0QXVkaW9UaW1lc3RhbXA7XG4gICAgICAgIGlmIChlbGFwc2VkVGltZSA+PSAwKSB7XG4gICAgICAgICAgICB0aGlzLl9pbnRlcnJ1cHQoZWxhcHNlZFRpbWUsIGNhbmNlbE9uZ29pbmdSZXNwb25zZSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy4jcmVzZXRBdWRpb1BsYXliYWNrU3RhdGUoKTtcbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1vcGVuYWlSZWFsdGltZVdlYnNvY2tldC5tanMubWFwIiwiaW1wb3J0IHsgVXNlckVycm9yLCB9IGZyb20gJ0BvcGVuYWkvYWdlbnRzLWNvcmUnO1xuZXhwb3J0IGNvbnN0IEJBQ0tHUk9VTkRfUkVTVUxUX1NZTUJPTCA9IFN5bWJvbCgnYmFja2dyb3VuZFJlc3VsdCcpO1xuZXhwb3J0IGZ1bmN0aW9uIGJhY2tncm91bmRSZXN1bHQoY29udGVudCkge1xuICAgIHJldHVybiB7XG4gICAgICAgIFtCQUNLR1JPVU5EX1JFU1VMVF9TWU1CT0xdOiB0cnVlLFxuICAgICAgICBjb250ZW50LFxuICAgIH07XG59XG5leHBvcnQgZnVuY3Rpb24gaXNCYWNrZ3JvdW5kUmVzdWx0KHJlc3VsdCkge1xuICAgIHJldHVybiAodHlwZW9mIHJlc3VsdCA9PT0gJ29iamVjdCcgJiZcbiAgICAgICAgcmVzdWx0ICE9PSBudWxsICYmXG4gICAgICAgIEJBQ0tHUk9VTkRfUkVTVUxUX1NZTUJPTCBpbiByZXN1bHQpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGlzVmFsaWRSZWFsdGltZVRvb2wodG9vbCkge1xuICAgIHJldHVybiAodG9vbC50eXBlID09PSAnZnVuY3Rpb24nIHx8XG4gICAgICAgICh0b29sLnR5cGUgPT09ICdob3N0ZWRfdG9vbCcgJiYgdG9vbC5uYW1lID09PSAnaG9zdGVkX21jcCcpKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiB0b1JlYWx0aW1lVG9vbERlZmluaXRpb24odG9vbCkge1xuICAgIGlmICh0b29sLnR5cGUgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgcmV0dXJuIHRvb2w7XG4gICAgfVxuICAgIGlmICh0b29sLnR5cGUgPT09ICdob3N0ZWRfdG9vbCcgJiYgdG9vbC5uYW1lID09PSAnaG9zdGVkX21jcCcpIHtcbiAgICAgICAgY29uc3Qgc2VydmVyVXJsID0gdG9vbC5wcm92aWRlckRhdGEuc2VydmVyX3VybCAmJiB0b29sLnByb3ZpZGVyRGF0YS5zZXJ2ZXJfdXJsLmxlbmd0aCA+IDBcbiAgICAgICAgICAgID8gdG9vbC5wcm92aWRlckRhdGEuc2VydmVyX3VybFxuICAgICAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB0eXBlOiAnbWNwJyxcbiAgICAgICAgICAgIHNlcnZlcl9sYWJlbDogdG9vbC5wcm92aWRlckRhdGEuc2VydmVyX2xhYmVsLFxuICAgICAgICAgICAgc2VydmVyX3VybDogc2VydmVyVXJsLFxuICAgICAgICAgICAgaGVhZGVyczogdG9vbC5wcm92aWRlckRhdGEuaGVhZGVycyxcbiAgICAgICAgICAgIGFsbG93ZWRfdG9vbHM6IHRvb2wucHJvdmlkZXJEYXRhLmFsbG93ZWRfdG9vbHMsXG4gICAgICAgICAgICByZXF1aXJlX2FwcHJvdmFsOiB0b29sLnByb3ZpZGVyRGF0YS5yZXF1aXJlX2FwcHJvdmFsLFxuICAgICAgICB9O1xuICAgIH1cbiAgICB0aHJvdyBuZXcgVXNlckVycm9yKGBJbnZhbGlkIHRvb2wgdHlwZTogJHt0b29sfWApO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dG9vbC5tanMubWFwIiwiaW1wb3J0IHsgZ2V0VHJhbnNmZXJNZXNzYWdlLCBNb2RlbEJlaGF2aW9yRXJyb3IsIE91dHB1dEd1YXJkcmFpbFRyaXB3aXJlVHJpZ2dlcmVkLCBSdW5Db250ZXh0LCBSdW5Ub29sQXBwcm92YWxJdGVtLCB9IGZyb20gJ0BvcGVuYWkvYWdlbnRzLWNvcmUnO1xuaW1wb3J0IHsgUnVudGltZUV2ZW50RW1pdHRlciB9IGZyb20gJ0BvcGVuYWkvYWdlbnRzLWNvcmUvX3NoaW1zJztcbmltcG9ydCB7IGlzWm9kT2JqZWN0LCB0b1NtYXJ0U3RyaW5nIH0gZnJvbSAnQG9wZW5haS9hZ2VudHMtY29yZS91dGlscyc7XG5pbXBvcnQgeyBkZWZpbmVSZWFsdGltZU91dHB1dEd1YXJkcmFpbCwgZ2V0UmVhbHRpbWVHdWFyZHJhaWxGZWVkYmFja01lc3NhZ2UsIGdldFJlYWx0aW1lR3VhcmRyYWlsU2V0dGluZ3MsIH0gZnJvbSBcIi4vZ3VhcmRyYWlsLm1qc1wiO1xuaW1wb3J0IHsgREVGQVVMVF9PUEVOQUlfUkVBTFRJTUVfU0VTU0lPTl9DT05GSUcsIH0gZnJvbSBcIi4vb3BlbmFpUmVhbHRpbWVCYXNlLm1qc1wiO1xuaW1wb3J0IHsgT3BlbkFJUmVhbHRpbWVXZWJSVEMgfSBmcm9tIFwiLi9vcGVuYWlSZWFsdGltZVdlYlJ0Yy5tanNcIjtcbmltcG9ydCB7IE9wZW5BSVJlYWx0aW1lV2ViU29ja2V0IH0gZnJvbSBcIi4vb3BlbmFpUmVhbHRpbWVXZWJzb2NrZXQubWpzXCI7XG5pbXBvcnQgeyBhcHByb3ZhbEl0ZW1Ub1JlYWx0aW1lQXBwcm92YWxJdGVtLCBnZXRMYXN0VGV4dEZyb21BdWRpb091dHB1dE1lc3NhZ2UsIGhhc1dlYlJUQ1N1cHBvcnQsIHJlYWx0aW1lQXBwcm92YWxJdGVtVG9BcHByb3ZhbEl0ZW0sIHVwZGF0ZVJlYWx0aW1lSGlzdG9yeSwgfSBmcm9tIFwiLi91dGlscy5tanNcIjtcbmltcG9ydCBsb2dnZXIgZnJvbSBcIi4vbG9nZ2VyLm1qc1wiO1xuaW1wb3J0IHsgaXNCYWNrZ3JvdW5kUmVzdWx0LCBpc1ZhbGlkUmVhbHRpbWVUb29sLCB0b1JlYWx0aW1lVG9vbERlZmluaXRpb24sIH0gZnJvbSBcIi4vdG9vbC5tanNcIjtcbmZ1bmN0aW9uIGNsb25lRGVmYXVsdFNlc3Npb25Db25maWcoKSB7XG4gICAgcmV0dXJuIEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoREVGQVVMVF9PUEVOQUlfUkVBTFRJTUVfU0VTU0lPTl9DT05GSUcpKTtcbn1cbi8qKlxuICogQSBgUmVhbHRpbWVTZXNzaW9uYCBpcyB0aGUgY29ybmVyc3RvbmUgb2YgYnVpbGRpbmcgVm9pY2UgQWdlbnRzLiBJdCdzIHRoZSBlcXVpdmFsZW50IG9mIGFcbiAqIFJ1bm5lciBpbiB0ZXh0LWJhc2VkIGFnZW50cyBleGNlcHQgdGhhdCBpdCBhdXRvbWF0aWNhbGx5IGhhbmRsZXMgbXVsdGlwbGUgdHVybnMgYnkgbWFpbnRhaW5pbmcgYVxuICogY29ubmVjdGlvbiB3aXRoIHRoZSB1bmRlcmx5aW5nIHRyYW5zcG9ydCBsYXllci5cbiAqXG4gKiBUaGUgc2Vzc2lvbiBoYW5kbGVzIG1hbmFnaW5nIHRoZSBsb2NhbCBoaXN0b3J5IGNvcHksIGV4ZWN1dGVzIHRvb2xzLCBydW5zIG91dHB1dCBndWFyZHJhaWxzLCBhbmRcbiAqIGZhY2lsaXRhdGVzIGhhbmRvZmZzLlxuICpcbiAqIFRoZSBhY3R1YWwgYXVkaW8gaGFuZGxpbmcgYW5kIGdlbmVyYXRpb24gb2YgbW9kZWwgcmVzcG9uc2VzIGlzIGhhbmRsZWQgYnkgdGhlIHVuZGVybHlpbmdcbiAqIHRyYW5zcG9ydCBsYXllci4gQnkgZGVmYXVsdCBpZiB5b3UgYXJlIHVzaW5nIGEgYnJvd3NlciB3aXRoIFdlYlJUQyBzdXBwb3J0LCB0aGUgc2Vzc2lvbiB3aWxsXG4gKiBhdXRvbWF0aWNhbGx5IHVzZSB0aGUgV2ViUlRDIHZlcnNpb24gb2YgdGhlIE9wZW5BSSBSZWFsdGltZSBBUEkuIE9uIHRoZSBzZXJ2ZXIgb3IgaWYgeW91IHBhc3NcbiAqIGB3ZWJzb2NrZXRgIGFzIHRoZSB0cmFuc3BvcnQgbGF5ZXIsIHRoZSBzZXNzaW9uIHdpbGwgZXN0YWJsaXNoIGEgY29ubmVjdGlvbiB1c2luZyBXZWJTb2NrZXRzLlxuICpcbiAqIEluIHRoZSBjYXNlIG9mIFdlYlJUQywgaW4gdGhlIGJyb3dzZXIsIHRoZSB0cmFuc3BvcnQgbGF5ZXIgd2lsbCBhbHNvIGF1dG9tYXRpY2FsbHkgY29uZmlndXJlIHRoZVxuICogbWljcm9waG9uZSBhbmQgYXVkaW8gb3V0cHV0IHRvIGJlIHVzZWQgYnkgdGhlIHNlc3Npb24uXG4gKlxuICogWW91IGNhbiBhbHNvIGNyZWF0ZSBhIHRyYW5zcG9ydCBsYXllciBpbnN0YW5jZSB5b3Vyc2VsZiBhbmQgcGFzcyBpdCBpbiB0byBoYXZlIG1vcmUgY29udHJvbCBvdmVyXG4gKiB0aGUgY29uZmlndXJhdGlvbiBvciBldmVuIGV4dGVuZCB0aGUgZXhpc3Rpbmcgb25lcy4gQ2hlY2sgb3V0IHRoZSBgVHdpbGlvUmVhbHRpbWVUcmFuc3BvcnRMYXllcmBcbiAqIGZvciBhbiBleGFtcGxlIG9mIGhvdyB0byBjcmVhdGUgYSBjdXN0b20gdHJhbnNwb3J0IGxheWVyLlxuICpcbiAqIEBleGFtcGxlXG4gKiBgYGB0c1xuICogY29uc3QgYWdlbnQgPSBuZXcgUmVhbHRpbWVBZ2VudCh7XG4gKiAgIG5hbWU6ICdteS1hZ2VudCcsXG4gKiAgIGluc3RydWN0aW9uczogJ1lvdSBhcmUgYSBoZWxwZnVsIGFzc2lzdGFudCB0aGF0IGNhbiBhbnN3ZXIgcXVlc3Rpb25zIGFuZCBoZWxwIHdpdGggdGFza3MuJyxcbiAqIH0pXG4gKlxuICogY29uc3Qgc2Vzc2lvbiA9IG5ldyBSZWFsdGltZVNlc3Npb24oYWdlbnQpO1xuICogc2Vzc2lvbi5jb25uZWN0KHtcbiAqICAgYXBpS2V5OiAneW91ci1hcGkta2V5JyxcbiAqIH0pO1xuICogYGBgXG4gKi9cbmV4cG9ydCBjbGFzcyBSZWFsdGltZVNlc3Npb24gZXh0ZW5kcyBSdW50aW1lRXZlbnRFbWl0dGVyIHtcbiAgICBpbml0aWFsQWdlbnQ7XG4gICAgb3B0aW9ucztcbiAgICAjdHJhbnNwb3J0O1xuICAgICNjdXJyZW50QWdlbnQ7XG4gICAgI2N1cnJlbnRUb29scztcbiAgICAjY29udGV4dDtcbiAgICAjb3V0cHV0R3VhcmRyYWlscyA9IFtdO1xuICAgICNvdXRwdXRHdWFyZHJhaWxTZXR0aW5ncztcbiAgICAjdHJhbnNjcmliZWRUZXh0RGVsdGFzID0ge307XG4gICAgI2hpc3RvcnkgPSBbXTtcbiAgICAjc2hvdWxkSW5jbHVkZUF1ZGlvRGF0YTtcbiAgICAjaW50ZXJydXB0ZWRCeUd1YXJkcmFpbCA9IHt9O1xuICAgICNhdWRpb1N0YXJ0ZWQgPSBmYWxzZTtcbiAgICAvLyBUcmFja3MgYWxsIE1DUCB0b29scyBmZXRjaGVkIHBlciBzZXJ2ZXIgbGFiZWwgKGZyb20gbWNwX2xpc3RfdG9vbHMgcmVzdWx0cykuXG4gICAgI2FsbE1jcFRvb2xzQnlTZXJ2ZXIgPSBuZXcgTWFwKCk7XG4gICAgLy8gVHJhY2tzIGN1cnJlbnRseSBhdmFpbGFibGUgTUNQIHRvb2xzIGJhc2VkIG9uIHRoZSBhY3RpdmUgYWdlbnQncyBjb25maWd1cmVkIHNlcnZlcl9sYWJlbHMuXG4gICAgI2F2YWlsYWJsZU1jcFRvb2xzID0gW107XG4gICAgLy8gS2VlcHMgdHJhY2sgb2YgdGhlIGxhc3QgZnVsbCBzZXNzaW9uIGNvbmZpZyB3ZSBzZW50IChjYW1lbENhc2Uga2V5cykgc28gdGhhdFxuICAgIC8vIHN1YnNlcXVlbnQgdXBkYXRlcyAoZS5nLiBkdXJpbmcgYWdlbnQgaGFuZG9mZnMpIHByZXNlcnZlIHByb3BlcnRpZXMgdGhhdCBhcmVcbiAgICAvLyBub3QgZXhwbGljaXRseSByZWNhbGN1bGF0ZWQgaGVyZSAoc3VjaCBhcyBpbnB1dEF1ZGlvRm9ybWF0LCBvdXRwdXRBdWRpb0Zvcm1hdCxcbiAgICAvLyBtb2RhbGl0aWVzLCBzcGVlZCwgdG9vbENob2ljZSwgdHVybkRldGVjdGlvbiwgZXRjLikuIFdpdGhvdXQgdGhpcywgdXBkYXRpbmdcbiAgICAvLyB0aGUgYWdlbnQgd291bGQgZHJvcCBhdWRpbyBmb3JtYXQgb3ZlcnJpZGVzIChlLmcuIGc3MTFfdWxhdykgYW5kIHJldmVydCB0b1xuICAgIC8vIHRyYW5zcG9ydCBkZWZhdWx0cyBjYXVzaW5nIGlzc3VlcyBmb3IgaW50ZWdyYXRpb25zIGxpa2UgVHdpbGlvLlxuICAgICNsYXN0U2Vzc2lvbkNvbmZpZyA9IGNsb25lRGVmYXVsdFNlc3Npb25Db25maWcoKTtcbiAgICAjYXV0b21hdGljYWxseVRyaWdnZXJSZXNwb25zZUZvck1jcFRvb2xDYWxscyA9IHRydWU7XG4gICAgY29uc3RydWN0b3IoaW5pdGlhbEFnZW50LCBvcHRpb25zID0ge30pIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5pbml0aWFsQWdlbnQgPSBpbml0aWFsQWdlbnQ7XG4gICAgICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG4gICAgICAgIGlmICgodHlwZW9mIG9wdGlvbnMudHJhbnNwb3J0ID09PSAndW5kZWZpbmVkJyAmJiBoYXNXZWJSVENTdXBwb3J0KCkpIHx8XG4gICAgICAgICAgICBvcHRpb25zLnRyYW5zcG9ydCA9PT0gJ3dlYnJ0YycpIHtcbiAgICAgICAgICAgIHRoaXMuI3RyYW5zcG9ydCA9IG5ldyBPcGVuQUlSZWFsdGltZVdlYlJUQygpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKG9wdGlvbnMudHJhbnNwb3J0ID09PSAnd2Vic29ja2V0JyB8fFxuICAgICAgICAgICAgdHlwZW9mIG9wdGlvbnMudHJhbnNwb3J0ID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgdGhpcy4jdHJhbnNwb3J0ID0gbmV3IE9wZW5BSVJlYWx0aW1lV2ViU29ja2V0KCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLiN0cmFuc3BvcnQgPSBvcHRpb25zLnRyYW5zcG9ydDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLiNjdXJyZW50QWdlbnQgPSBpbml0aWFsQWdlbnQ7XG4gICAgICAgIHRoaXMuI2NvbnRleHQgPSBuZXcgUnVuQ29udGV4dCh7XG4gICAgICAgICAgICAuLi4ob3B0aW9ucy5jb250ZXh0ID8/IHt9KSxcbiAgICAgICAgICAgIGhpc3Rvcnk6IHRoaXMuI2hpc3RvcnksXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLiNvdXRwdXRHdWFyZHJhaWxzID0gKG9wdGlvbnMub3V0cHV0R3VhcmRyYWlscyA/PyBbXSkubWFwKGRlZmluZVJlYWx0aW1lT3V0cHV0R3VhcmRyYWlsKTtcbiAgICAgICAgdGhpcy4jb3V0cHV0R3VhcmRyYWlsU2V0dGluZ3MgPSBnZXRSZWFsdGltZUd1YXJkcmFpbFNldHRpbmdzKG9wdGlvbnMub3V0cHV0R3VhcmRyYWlsU2V0dGluZ3MgPz8ge30pO1xuICAgICAgICB0aGlzLiNzaG91bGRJbmNsdWRlQXVkaW9EYXRhID0gb3B0aW9ucy5oaXN0b3J5U3RvcmVBdWRpbyA/PyBmYWxzZTtcbiAgICAgICAgdGhpcy4jYXV0b21hdGljYWxseVRyaWdnZXJSZXNwb25zZUZvck1jcFRvb2xDYWxscyA9XG4gICAgICAgICAgICBvcHRpb25zLmF1dG9tYXRpY2FsbHlUcmlnZ2VyUmVzcG9uc2VGb3JNY3BUb29sQ2FsbHMgPz8gdHJ1ZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIHRyYW5zcG9ydCBsYXllciB1c2VkIGJ5IHRoZSBzZXNzaW9uLlxuICAgICAqL1xuICAgIGdldCB0cmFuc3BvcnQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiN0cmFuc3BvcnQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBjdXJyZW50IGFnZW50IGluIHRoZSBzZXNzaW9uLlxuICAgICAqL1xuICAgIGdldCBjdXJyZW50QWdlbnQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiNjdXJyZW50QWdlbnQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBjdXJyZW50IHVzYWdlIG9mIHRoZSBzZXNzaW9uLlxuICAgICAqL1xuICAgIGdldCB1c2FnZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuI2NvbnRleHQudXNhZ2U7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBjdXJyZW50IGNvbnRleHQgb2YgdGhlIHNlc3Npb24uXG4gICAgICovXG4gICAgZ2V0IGNvbnRleHQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiNjb250ZXh0O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBXaGV0aGVyIHRoZSBzZXNzaW9uIGlzIG11dGVkLiBNaWdodCBiZSBgbnVsbGAgaWYgdGhlIHVuZGVybHlpbmcgdHJhbnNwb3J0IGxheWVyIGRvZXMgbm90XG4gICAgICogc3VwcG9ydCBtdXRpbmcuXG4gICAgICovXG4gICAgZ2V0IG11dGVkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy4jdHJhbnNwb3J0Lm11dGVkO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgaGlzdG9yeSBvZiB0aGUgc2Vzc2lvbi5cbiAgICAgKi9cbiAgICBnZXQgaGlzdG9yeSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuI2hpc3Rvcnk7XG4gICAgfVxuICAgIGdldCBhdmFpbGFibGVNY3BUb29scygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuI2F2YWlsYWJsZU1jcFRvb2xzO1xuICAgIH1cbiAgICBhc3luYyAjc2V0Q3VycmVudEFnZW50KGFnZW50KSB7XG4gICAgICAgIHRoaXMuI2N1cnJlbnRBZ2VudCA9IGFnZW50O1xuICAgICAgICBjb25zdCBoYW5kb2ZmcyA9IGF3YWl0IHRoaXMuI2N1cnJlbnRBZ2VudC5nZXRFbmFibGVkSGFuZG9mZnModGhpcy4jY29udGV4dCk7XG4gICAgICAgIGNvbnN0IGhhbmRvZmZUb29scyA9IGhhbmRvZmZzLm1hcCgoaGFuZG9mZikgPT4gaGFuZG9mZi5nZXRIYW5kb2ZmQXNGdW5jdGlvblRvb2woKSk7XG4gICAgICAgIGNvbnN0IGFsbFRvb2xzID0gKGF3YWl0IHRoaXMuI2N1cnJlbnRBZ2VudC5nZXRBbGxUb29scyh0aGlzLiNjb250ZXh0KSlcbiAgICAgICAgICAgIC5maWx0ZXIoaXNWYWxpZFJlYWx0aW1lVG9vbClcbiAgICAgICAgICAgIC5tYXAodG9SZWFsdGltZVRvb2xEZWZpbml0aW9uKTtcbiAgICAgICAgY29uc3QgaGFzVG9vbHNEZWZpbmVkID0gdHlwZW9mIHRoaXMuI2N1cnJlbnRBZ2VudC50b29scyAhPT0gJ3VuZGVmaW5lZCcgfHxcbiAgICAgICAgICAgIHR5cGVvZiB0aGlzLiNjdXJyZW50QWdlbnQubWNwU2VydmVycyAhPT0gJ3VuZGVmaW5lZCc7XG4gICAgICAgIGNvbnN0IGhhc0hhbmRvZmZzRGVmaW5lZCA9IGhhbmRvZmZzLmxlbmd0aCA+IDA7XG4gICAgICAgIHRoaXMuI2N1cnJlbnRUb29scyA9XG4gICAgICAgICAgICBoYXNUb29sc0RlZmluZWQgfHwgaGFzSGFuZG9mZnNEZWZpbmVkXG4gICAgICAgICAgICAgICAgPyBbLi4uYWxsVG9vbHMsIC4uLmhhbmRvZmZUb29sc11cbiAgICAgICAgICAgICAgICA6IHVuZGVmaW5lZDtcbiAgICAgICAgLy8gUmVjb21wdXRlIGN1cnJlbnRseSBhdmFpbGFibGUgTUNQIHRvb2xzIGJhc2VkIG9uIHRoZSBuZXcgYWdlbnQncyBhY3RpdmUgc2VydmVyIGxhYmVscy5cbiAgICAgICAgdGhpcy4jdXBkYXRlQXZhaWxhYmxlTWNwVG9vbHMoKTtcbiAgICB9XG4gICAgYXN5bmMgI2dldFNlc3Npb25Db25maWcoYWRkaXRpb25hbENvbmZpZyA9IHt9KSB7XG4gICAgICAgIGNvbnN0IG92ZXJyaWRlc0NvbmZpZyA9IGFkZGl0aW9uYWxDb25maWcgPz8ge307XG4gICAgICAgIGNvbnN0IG9wdGlvbnNDb25maWcgPSB0aGlzLm9wdGlvbnMuY29uZmlnID8/IHt9O1xuICAgICAgICBjb25zdCBpbnN0cnVjdGlvbnMgPSBhd2FpdCB0aGlzLiNjdXJyZW50QWdlbnQuZ2V0U3lzdGVtUHJvbXB0KHRoaXMuI2NvbnRleHQpO1xuICAgICAgICBjb25zdCBnZXRBdWRpb091dHB1dFZvaWNlT3ZlcnJpZGUgPSAoY29uZmlnKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBhdWRpb0NvbmZpZyA9IGNvbmZpZ1xuICAgICAgICAgICAgICAgIC5hdWRpbztcbiAgICAgICAgICAgIHJldHVybiBhdWRpb0NvbmZpZz8ub3V0cHV0Py52b2ljZTtcbiAgICAgICAgfTtcbiAgICAgICAgLy8gUmVhbHRpbWUgZXhwZWN0cyB0cmFjaW5nIHRvIGJlIGV4cGxpY2l0bHkgbnVsbCB0byBkaXNhYmxlIGl0OyBsZWF2aW5nIHRoZSBwcmV2aW91cyBjb25maWdcbiAgICAgICAgLy8gaW4gcGxhY2Ugd291bGQgb3RoZXJ3aXNlIGNvbnRpbnVlIGVtaXR0aW5nIHNwYW5zLlxuICAgICAgICBjb25zdCB0cmFjaW5nQ29uZmlnID0gdGhpcy5vcHRpb25zXG4gICAgICAgICAgICAudHJhY2luZ0Rpc2FibGVkXG4gICAgICAgICAgICA/IG51bGxcbiAgICAgICAgICAgIDogdGhpcy5vcHRpb25zLndvcmtmbG93TmFtZVxuICAgICAgICAgICAgICAgID8ge1xuICAgICAgICAgICAgICAgICAgICB3b3JrZmxvd19uYW1lOiB0aGlzLm9wdGlvbnMud29ya2Zsb3dOYW1lLFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICA6ICdhdXRvJztcbiAgICAgICAgaWYgKHRyYWNpbmdDb25maWcgIT09IG51bGwgJiYgdHJhY2luZ0NvbmZpZyAhPT0gJ2F1dG8nKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5vcHRpb25zLmdyb3VwSWQpIHtcbiAgICAgICAgICAgICAgICB0cmFjaW5nQ29uZmlnLmdyb3VwX2lkID0gdGhpcy5vcHRpb25zLmdyb3VwSWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5vcHRpb25zLnRyYWNlTWV0YWRhdGEpIHtcbiAgICAgICAgICAgICAgICB0cmFjaW5nQ29uZmlnLm1ldGFkYXRhID0gdGhpcy5vcHRpb25zLnRyYWNlTWV0YWRhdGE7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodGhpcy5vcHRpb25zLmdyb3VwSWQgfHwgdGhpcy5vcHRpb25zLnRyYWNlTWV0YWRhdGEpIHtcbiAgICAgICAgICAgIGxvZ2dlci53YXJuKCdJbiBvcmRlciB0byBzZXQgdHJhY2VNZXRhZGF0YSBvciBhIGdyb3VwSWQgeW91IG5lZWQgdG8gc3BlY2lmeSBhIHdvcmtmbG93TmFtZS4nKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBhdWRpb091dHB1dFZvaWNlT3ZlcnJpZGUgPSBnZXRBdWRpb091dHB1dFZvaWNlT3ZlcnJpZGUob3ZlcnJpZGVzQ29uZmlnKSA/P1xuICAgICAgICAgICAgZ2V0QXVkaW9PdXRwdXRWb2ljZU92ZXJyaWRlKG9wdGlvbnNDb25maWcpO1xuICAgICAgICBjb25zdCB0b3BMZXZlbFZvaWNlT3ZlcnJpZGUgPSBvdmVycmlkZXNDb25maWcudm9pY2UgPz8gb3B0aW9uc0NvbmZpZy52b2ljZTtcbiAgICAgICAgY29uc3QgcmVzb2x2ZWRWb2ljZSA9IHR5cGVvZiBhdWRpb091dHB1dFZvaWNlT3ZlcnJpZGUgIT09ICd1bmRlZmluZWQnXG4gICAgICAgICAgICA/IGF1ZGlvT3V0cHV0Vm9pY2VPdmVycmlkZVxuICAgICAgICAgICAgOiB0eXBlb2YgdG9wTGV2ZWxWb2ljZU92ZXJyaWRlICE9PSAndW5kZWZpbmVkJ1xuICAgICAgICAgICAgICAgID8gdG9wTGV2ZWxWb2ljZU92ZXJyaWRlXG4gICAgICAgICAgICAgICAgOiB0aGlzLiNjdXJyZW50QWdlbnQudm9pY2U7XG4gICAgICAgIC8vIFN0YXJ0IGZyb20gYW55IHByZXZpb3VzbHktc2VudCBjb25maWcgKHNvIHdlIHByZXNlcnZlIHZhbHVlcyBsaWtlIGF1ZGlvIGZvcm1hdHMpXG4gICAgICAgIC8vIGFuZCB0aGUgb3JpZ2luYWwgb3B0aW9ucy5jb25maWcgcHJvdmlkZWQgYnkgdGhlIHVzZXIuIFByZWZlcmVuY2Ugb3JkZXI6XG4gICAgICAgIC8vIDEuIExhc3Qgc2Vzc2lvbiBjb25maWcgd2Ugc2VudCAoI2xhc3RTZXNzaW9uQ29uZmlnKVxuICAgICAgICAvLyAyLiBPcmlnaW5hbCBvcHRpb25zLmNvbmZpZ1xuICAgICAgICAvLyAzLiBBZGRpdGlvbmFsIGNvbmZpZyBwYXNzZWQgaW50byB0aGlzIGludm9jYXRpb24gKGV4cGxpY2l0IG92ZXJyaWRlcylcbiAgICAgICAgLy8gRmluYWxseSB3ZSBvdmVyd3JpdGUgZHluYW1pYyBmaWVsZHMgKGluc3RydWN0aW9ucywgdm9pY2UsIG1vZGVsLCB0b29scywgdHJhY2luZylcbiAgICAgICAgLy8gdG8gZW5zdXJlIHRoZXkgYWx3YXlzIHJlZmxlY3QgdGhlIGN1cnJlbnQgYWdlbnQgJiBydW50aW1lIHN0YXRlLlxuICAgICAgICBjb25zdCBiYXNlID0ge1xuICAgICAgICAgICAgLi4uKHRoaXMuI2xhc3RTZXNzaW9uQ29uZmlnID8/IHt9KSxcbiAgICAgICAgICAgIC4uLm9wdGlvbnNDb25maWcsXG4gICAgICAgICAgICAuLi5vdmVycmlkZXNDb25maWcsXG4gICAgICAgIH07XG4gICAgICAgIC8vIE5vdGU6IENlcnRhaW4gZmllbGRzIGNhbm5vdCBiZSB1cGRhdGVkIGFmdGVyIHRoZSBzZXNzaW9uIGJlZ2lucywgc3VjaCBhcyB2b2ljZSBhbmQgbW9kZWxcbiAgICAgICAgY29uc3QgZnVsbENvbmZpZyA9IHtcbiAgICAgICAgICAgIC4uLmJhc2UsXG4gICAgICAgICAgICBpbnN0cnVjdGlvbnMsXG4gICAgICAgICAgICB2b2ljZTogcmVzb2x2ZWRWb2ljZSxcbiAgICAgICAgICAgIG1vZGVsOiB0aGlzLm9wdGlvbnMubW9kZWwsXG4gICAgICAgICAgICB0b29sczogdGhpcy4jY3VycmVudFRvb2xzLFxuICAgICAgICAgICAgdHJhY2luZzogdHJhY2luZ0NvbmZpZyxcbiAgICAgICAgICAgIHByb21wdDogdHlwZW9mIHRoaXMuI2N1cnJlbnRBZ2VudC5wcm9tcHQgPT09ICdmdW5jdGlvbidcbiAgICAgICAgICAgICAgICA/IGF3YWl0IHRoaXMuI2N1cnJlbnRBZ2VudC5wcm9tcHQodGhpcy4jY29udGV4dCwgdGhpcy4jY3VycmVudEFnZW50KVxuICAgICAgICAgICAgICAgIDogdGhpcy4jY3VycmVudEFnZW50LnByb21wdCxcbiAgICAgICAgfTtcbiAgICAgICAgLy8gVXBkYXRlIG91ciBjYWNoZSBzbyBzdWJzZXF1ZW50IHVwZGF0ZXMgaW5oZXJpdCB0aGUgZnVsbCBzZXQgaW5jbHVkaW5nIGFueVxuICAgICAgICAvLyBkeW5hbWljIGZpZWxkcyB3ZSBqdXN0IG92ZXJ3cm90ZS5cbiAgICAgICAgdGhpcy4jbGFzdFNlc3Npb25Db25maWcgPSBmdWxsQ29uZmlnO1xuICAgICAgICByZXR1cm4gZnVsbENvbmZpZztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ29tcHV0ZSB0aGUgaW5pdGlhbCBzZXNzaW9uIGNvbmZpZyB0aGF0IHRoZSBjdXJyZW50IHNlc3Npb24gd2lsbCB1c2Ugd2hlbiBjb25uZWN0aW5nLlxuICAgICAqXG4gICAgICogVGhpcyBtaXJyb3JzIHRoZSBjb25maWd1cmF0aW9uIHBheWxvYWQgd2Ugc2VuZCBkdXJpbmcgYGNvbm5lY3RgLCBpbmNsdWRpbmcgZHluYW1pYyB2YWx1ZXNcbiAgICAgKiBzdWNoIGFzIHRoZSB1cHN0cmVhbSBhZ2VudCBpbnN0cnVjdGlvbnMsIHRvb2wgZGVmaW5pdGlvbnMsIGFuZCBwcm9tcHQgY29udGVudCBnZW5lcmF0ZWQgYXRcbiAgICAgKiBydW50aW1lLiBLZWVwaW5nIHRoaXMgaGVscGVyIGV4cG9zZWQgYWxsb3dzIHRyYW5zcG9ydHMgb3Igb3JjaGVzdHJhdGlvbiBsYXllcnMgdG8gcHJlY29tcHV0ZVxuICAgICAqIGEgQ2FsbEFjY2VwdC1jb21wYXRpYmxlIHBheWxvYWQgd2l0aG91dCBvcGVuaW5nIGEgc29ja2V0LlxuICAgICAqXG4gICAgICogQHBhcmFtIG92ZXJyaWRlcyAtIEFkZGl0aW9uYWwgY29uZmlnIG92ZXJyaWRlcyBhcHBsaWVkIG9uIHRvcCBvZiB0aGUgc2Vzc2lvbiBvcHRpb25zLlxuICAgICAqL1xuICAgIGFzeW5jIGdldEluaXRpYWxTZXNzaW9uQ29uZmlnKG92ZXJyaWRlcyA9IHt9KSB7XG4gICAgICAgIGF3YWl0IHRoaXMuI3NldEN1cnJlbnRBZ2VudCh0aGlzLmluaXRpYWxBZ2VudCk7XG4gICAgICAgIHJldHVybiB0aGlzLiNnZXRTZXNzaW9uQ29uZmlnKHtcbiAgICAgICAgICAgIC4uLih0aGlzLm9wdGlvbnMuY29uZmlnID8/IHt9KSxcbiAgICAgICAgICAgIC4uLihvdmVycmlkZXMgPz8ge30pLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ29udmVuaWVuY2UgaGVscGVyIHRvIGNvbXB1dGUgdGhlIGluaXRpYWwgc2Vzc2lvbiBjb25maWcgd2l0aG91dCBtYW51YWxseSBpbnN0YW50aWF0aW5nIGFuZCBjb25uZWN0aW5nIGEgc2Vzc2lvbi5cbiAgICAgKlxuICAgICAqIFRoaXMgaXMgcHJpbWFyaWx5IHVzZWZ1bCBmb3IgaW50ZWdyYXRpb25zIHRoYXQgbXVzdCBwcm92aWRlIHRoZSBzZXNzaW9uIGNvbmZpZ3VyYXRpb24gdG8gYVxuICAgICAqIHRoaXJkIHBhcnR5IChmb3IgZXhhbXBsZSB0aGUgU0lQIGBjYWxscy5hY2NlcHRgIGVuZHBvaW50KSBiZWZvcmUgdGhlIGFjdHVhbCByZWFsdGltZSBzZXNzaW9uXG4gICAgICogaXMgYXR0YWNoZWQuIFRoZSBoZWxwZXIgaW5zdGFudGlhdGVzIGEgdGhyb3dhd2F5IHNlc3Npb24gc28gYWxsIGFnZW50LWRyaXZlbiBkeW5hbWljIGZpZWxkc1xuICAgICAqIHJlc29sdmUgaW4gZXhhY3RseSB0aGUgc2FtZSB3YXkgYXMgdGhlIGxpdmUgc2Vzc2lvbiBwYXRoLlxuICAgICAqXG4gICAgICogQHBhcmFtIGFnZW50IC0gVGhlIHN0YXJ0aW5nIGFnZW50IGZvciB0aGUgc2Vzc2lvbi5cbiAgICAgKiBAcGFyYW0gb3B0aW9ucyAtIFNlc3Npb24gb3B0aW9ucyB1c2VkIHRvIHNlZWQgdGhlIGNvbmZpZyBjYWxjdWxhdGlvbi5cbiAgICAgKiBAcGFyYW0gb3ZlcnJpZGVzIC0gQWRkaXRpb25hbCBjb25maWcgb3ZlcnJpZGVzIGFwcGxpZWQgb24gdG9wIG9mIHRoZSBwcm92aWRlZCBvcHRpb25zLlxuICAgICAqL1xuICAgIHN0YXRpYyBhc3luYyBjb21wdXRlSW5pdGlhbFNlc3Npb25Db25maWcoYWdlbnQsIG9wdGlvbnMgPSB7fSwgb3ZlcnJpZGVzID0ge30pIHtcbiAgICAgICAgY29uc3Qgc2Vzc2lvbiA9IG5ldyBSZWFsdGltZVNlc3Npb24oYWdlbnQsIG9wdGlvbnMpO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmV0dXJuIGF3YWl0IHNlc3Npb24uZ2V0SW5pdGlhbFNlc3Npb25Db25maWcob3ZlcnJpZGVzKTtcbiAgICAgICAgfVxuICAgICAgICBmaW5hbGx5IHtcbiAgICAgICAgICAgIHNlc3Npb24uY2xvc2UoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyB1cGRhdGVBZ2VudChuZXdBZ2VudCkge1xuICAgICAgICB0aGlzLiNjdXJyZW50QWdlbnQuZW1pdCgnYWdlbnRfaGFuZG9mZicsIHRoaXMuI2NvbnRleHQsIG5ld0FnZW50KTtcbiAgICAgICAgdGhpcy5lbWl0KCdhZ2VudF9oYW5kb2ZmJywgdGhpcy4jY29udGV4dCwgdGhpcy4jY3VycmVudEFnZW50LCBuZXdBZ2VudCk7XG4gICAgICAgIGF3YWl0IHRoaXMuI3NldEN1cnJlbnRBZ2VudChuZXdBZ2VudCk7XG4gICAgICAgIGF3YWl0IHRoaXMuI3RyYW5zcG9ydC51cGRhdGVTZXNzaW9uQ29uZmlnKGF3YWl0IHRoaXMuI2dldFNlc3Npb25Db25maWcoKSk7XG4gICAgICAgIHJldHVybiBuZXdBZ2VudDtcbiAgICB9XG4gICAgYXN5bmMgI2hhbmRsZUhhbmRvZmYodG9vbENhbGwsIGhhbmRvZmYpIHtcbiAgICAgICAgY29uc3QgbmV3QWdlbnQgPSAoYXdhaXQgaGFuZG9mZi5vbkludm9rZUhhbmRvZmYodGhpcy4jY29udGV4dCwgdG9vbENhbGwuYXJndW1lbnRzKSk7XG4gICAgICAgIHRoaXMuI2N1cnJlbnRBZ2VudC5lbWl0KCdhZ2VudF9oYW5kb2ZmJywgdGhpcy4jY29udGV4dCwgbmV3QWdlbnQpO1xuICAgICAgICB0aGlzLmVtaXQoJ2FnZW50X2hhbmRvZmYnLCB0aGlzLiNjb250ZXh0LCB0aGlzLiNjdXJyZW50QWdlbnQsIG5ld0FnZW50KTtcbiAgICAgICAgLy8gdXBkYXRlIHNlc3Npb24gd2l0aCBuZXcgYWdlbnRcbiAgICAgICAgYXdhaXQgdGhpcy4jc2V0Q3VycmVudEFnZW50KG5ld0FnZW50KTtcbiAgICAgICAgYXdhaXQgdGhpcy4jdHJhbnNwb3J0LnVwZGF0ZVNlc3Npb25Db25maWcoYXdhaXQgdGhpcy4jZ2V0U2Vzc2lvbkNvbmZpZygpKTtcbiAgICAgICAgY29uc3Qgb3V0cHV0ID0gZ2V0VHJhbnNmZXJNZXNzYWdlKG5ld0FnZW50KTtcbiAgICAgICAgdGhpcy4jdHJhbnNwb3J0LnNlbmRGdW5jdGlvbkNhbGxPdXRwdXQodG9vbENhbGwsIG91dHB1dCwgdHJ1ZSk7XG4gICAgICAgIHJldHVybiBuZXdBZ2VudDtcbiAgICB9XG4gICAgYXN5bmMgI2hhbmRsZUZ1bmN0aW9uVG9vbENhbGwodG9vbENhbGwsIHRvb2wpIHtcbiAgICAgICAgdGhpcy4jY29udGV4dC5jb250ZXh0Lmhpc3RvcnkgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHRoaXMuI2hpc3RvcnkpKTsgLy8gZGVlcCBjb3B5IG9mIHRoZSBoaXN0b3J5XG4gICAgICAgIGxldCBwYXJzZWRBcmdzID0gdG9vbENhbGwuYXJndW1lbnRzO1xuICAgICAgICBpZiAodG9vbC5wYXJhbWV0ZXJzKSB7XG4gICAgICAgICAgICBpZiAoaXNab2RPYmplY3QodG9vbC5wYXJhbWV0ZXJzKSkge1xuICAgICAgICAgICAgICAgIHBhcnNlZEFyZ3MgPSB0b29sLnBhcmFtZXRlcnMucGFyc2UocGFyc2VkQXJncyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBwYXJzZWRBcmdzID0gSlNPTi5wYXJzZShwYXJzZWRBcmdzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjb25zdCBuZWVkc0FwcHJvdmFsID0gYXdhaXQgdG9vbC5uZWVkc0FwcHJvdmFsKHRoaXMuI2NvbnRleHQsIHBhcnNlZEFyZ3MsIHRvb2xDYWxsLmNhbGxJZCk7XG4gICAgICAgIGlmIChuZWVkc0FwcHJvdmFsKSB7XG4gICAgICAgICAgICBjb25zdCBhcHByb3ZhbCA9IHRoaXMuY29udGV4dC5pc1Rvb2xBcHByb3ZlZCh7XG4gICAgICAgICAgICAgICAgdG9vbE5hbWU6IHRvb2wubmFtZSxcbiAgICAgICAgICAgICAgICBjYWxsSWQ6IHRvb2xDYWxsLmNhbGxJZCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKGFwcHJvdmFsID09PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgnYWdlbnRfdG9vbF9zdGFydCcsIHRoaXMuI2NvbnRleHQsIHRoaXMuI2N1cnJlbnRBZ2VudCwgdG9vbCwge1xuICAgICAgICAgICAgICAgICAgICB0b29sQ2FsbCxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB0aGlzLiNjdXJyZW50QWdlbnQuZW1pdCgnYWdlbnRfdG9vbF9zdGFydCcsIHRoaXMuI2NvbnRleHQsIHRvb2wsIHtcbiAgICAgICAgICAgICAgICAgICAgdG9vbENhbGwsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gJ1Rvb2wgZXhlY3V0aW9uIHdhcyBub3QgYXBwcm92ZWQuJztcbiAgICAgICAgICAgICAgICB0aGlzLiN0cmFuc3BvcnQuc2VuZEZ1bmN0aW9uQ2FsbE91dHB1dCh0b29sQ2FsbCwgcmVzdWx0LCB0cnVlKTtcbiAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ2FnZW50X3Rvb2xfZW5kJywgdGhpcy4jY29udGV4dCwgdGhpcy4jY3VycmVudEFnZW50LCB0b29sLCByZXN1bHQsIHsgdG9vbENhbGwgfSk7XG4gICAgICAgICAgICAgICAgdGhpcy4jY3VycmVudEFnZW50LmVtaXQoJ2FnZW50X3Rvb2xfZW5kJywgdGhpcy4jY29udGV4dCwgdG9vbCwgcmVzdWx0LCB7XG4gICAgICAgICAgICAgICAgICAgIHRvb2xDYWxsLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHR5cGVvZiBhcHByb3ZhbCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ3Rvb2xfYXBwcm92YWxfcmVxdWVzdGVkJywgdGhpcy4jY29udGV4dCwgdGhpcy4jY3VycmVudEFnZW50LCB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdmdW5jdGlvbl9hcHByb3ZhbCcsXG4gICAgICAgICAgICAgICAgICAgIHRvb2wsXG4gICAgICAgICAgICAgICAgICAgIGFwcHJvdmFsSXRlbTogbmV3IFJ1blRvb2xBcHByb3ZhbEl0ZW0odG9vbENhbGwsIHRoaXMuI2N1cnJlbnRBZ2VudCksXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMuZW1pdCgnYWdlbnRfdG9vbF9zdGFydCcsIHRoaXMuI2NvbnRleHQsIHRoaXMuI2N1cnJlbnRBZ2VudCwgdG9vbCwge1xuICAgICAgICAgICAgdG9vbENhbGwsXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLiNjdXJyZW50QWdlbnQuZW1pdCgnYWdlbnRfdG9vbF9zdGFydCcsIHRoaXMuI2NvbnRleHQsIHRvb2wsIHtcbiAgICAgICAgICAgIHRvb2xDYWxsLFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy4jY29udGV4dC5jb250ZXh0Lmhpc3RvcnkgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHRoaXMuI2hpc3RvcnkpKTsgLy8gZGVlcCBjb3B5IG9mIHRoZSBoaXN0b3J5XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRvb2wuaW52b2tlKHRoaXMuI2NvbnRleHQsIHRvb2xDYWxsLmFyZ3VtZW50cywge1xuICAgICAgICAgICAgdG9vbENhbGwsXG4gICAgICAgIH0pO1xuICAgICAgICBsZXQgc3RyaW5nUmVzdWx0O1xuICAgICAgICBpZiAoaXNCYWNrZ3JvdW5kUmVzdWx0KHJlc3VsdCkpIHtcbiAgICAgICAgICAgIC8vIERvbid0IGdlbmVyYXRlIGEgbmV3IHJlc3BvbnNlLCBqdXN0IHNlbmQgdGhlIHJlc3VsdFxuICAgICAgICAgICAgc3RyaW5nUmVzdWx0ID0gdG9TbWFydFN0cmluZyhyZXN1bHQuY29udGVudCk7XG4gICAgICAgICAgICB0aGlzLiN0cmFuc3BvcnQuc2VuZEZ1bmN0aW9uQ2FsbE91dHB1dCh0b29sQ2FsbCwgc3RyaW5nUmVzdWx0LCBmYWxzZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBzdHJpbmdSZXN1bHQgPSB0b1NtYXJ0U3RyaW5nKHJlc3VsdCk7XG4gICAgICAgICAgICB0aGlzLiN0cmFuc3BvcnQuc2VuZEZ1bmN0aW9uQ2FsbE91dHB1dCh0b29sQ2FsbCwgc3RyaW5nUmVzdWx0LCB0cnVlKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmVtaXQoJ2FnZW50X3Rvb2xfZW5kJywgdGhpcy4jY29udGV4dCwgdGhpcy4jY3VycmVudEFnZW50LCB0b29sLCBzdHJpbmdSZXN1bHQsIHsgdG9vbENhbGwgfSk7XG4gICAgICAgIHRoaXMuI2N1cnJlbnRBZ2VudC5lbWl0KCdhZ2VudF90b29sX2VuZCcsIHRoaXMuI2NvbnRleHQsIHRvb2wsIHN0cmluZ1Jlc3VsdCwgeyB0b29sQ2FsbCB9KTtcbiAgICB9XG4gICAgYXN5bmMgI2hhbmRsZUZ1bmN0aW9uQ2FsbCh0b29sQ2FsbCkge1xuICAgICAgICBjb25zdCBlbmFibGVkSGFuZG9mZnMgPSBhd2FpdCB0aGlzLiNjdXJyZW50QWdlbnQuZ2V0RW5hYmxlZEhhbmRvZmZzKHRoaXMuI2NvbnRleHQpO1xuICAgICAgICBjb25zdCBoYW5kb2ZmTWFwID0gbmV3IE1hcChlbmFibGVkSGFuZG9mZnMubWFwKChoYW5kb2ZmKSA9PiBbaGFuZG9mZi50b29sTmFtZSwgaGFuZG9mZl0pKTtcbiAgICAgICAgY29uc3QgYWxsVG9vbHMgPSBhd2FpdCB0aGlzLiNjdXJyZW50QWdlbnQuZ2V0QWxsVG9vbHModGhpcy4jY29udGV4dCk7XG4gICAgICAgIGNvbnN0IGZ1bmN0aW9uVG9vbE1hcCA9IG5ldyBNYXAoYWxsVG9vbHMubWFwKCh0b29sKSA9PiBbdG9vbC5uYW1lLCB0b29sXSkpO1xuICAgICAgICBjb25zdCBwb3NzaWJsZUhhbmRvZmYgPSBoYW5kb2ZmTWFwLmdldCh0b29sQ2FsbC5uYW1lKTtcbiAgICAgICAgaWYgKHBvc3NpYmxlSGFuZG9mZikge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy4jaGFuZGxlSGFuZG9mZih0b29sQ2FsbCwgcG9zc2libGVIYW5kb2ZmKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IGZ1bmN0aW9uVG9vbCA9IGZ1bmN0aW9uVG9vbE1hcC5nZXQodG9vbENhbGwubmFtZSk7XG4gICAgICAgICAgICBpZiAoZnVuY3Rpb25Ub29sICYmIGZ1bmN0aW9uVG9vbC50eXBlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy4jaGFuZGxlRnVuY3Rpb25Ub29sQ2FsbCh0b29sQ2FsbCwgZnVuY3Rpb25Ub29sKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBNb2RlbEJlaGF2aW9yRXJyb3IoYFRvb2wgJHt0b29sQ2FsbC5uYW1lfSBub3QgZm91bmRgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyAjcnVuT3V0cHV0R3VhcmRyYWlscyhvdXRwdXQsIHJlc3BvbnNlSWQsIGl0ZW1JZCkge1xuICAgICAgICBpZiAodGhpcy4jb3V0cHV0R3VhcmRyYWlscy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBndWFyZHJhaWxBcmdzID0ge1xuICAgICAgICAgICAgYWdlbnQ6IHRoaXMuI2N1cnJlbnRBZ2VudCxcbiAgICAgICAgICAgIGFnZW50T3V0cHV0OiBvdXRwdXQsXG4gICAgICAgICAgICBjb250ZXh0OiB0aGlzLiNjb250ZXh0LFxuICAgICAgICB9O1xuICAgICAgICBjb25zdCByZXN1bHRzID0gYXdhaXQgUHJvbWlzZS5hbGwodGhpcy4jb3V0cHV0R3VhcmRyYWlscy5tYXAoKGd1YXJkcmFpbCkgPT4gZ3VhcmRyYWlsLnJ1bihndWFyZHJhaWxBcmdzKSkpO1xuICAgICAgICBjb25zdCBmaXJzdFRyaXB3aXJlVHJpZ2dlcmVkID0gcmVzdWx0cy5maW5kKChyZXN1bHQpID0+IHJlc3VsdC5vdXRwdXQudHJpcHdpcmVUcmlnZ2VyZWQpO1xuICAgICAgICBpZiAoZmlyc3RUcmlwd2lyZVRyaWdnZXJlZCkge1xuICAgICAgICAgICAgLy8gdGhpcyBlbnN1cmVzIHRoYXQgaWYgb25lIGd1YXJkcmFpbCBhbHJlYWR5IHRyaXBzIGFuZCB3ZSBhcmUgaW4gdGhlIG1pZGRsZSBvZiBhbm90aGVyXG4gICAgICAgICAgICAvLyBndWFyZHJhaWwgcnVuLCB3ZSBkb24ndCB0cmlwIGFnYWluXG4gICAgICAgICAgICBpZiAodGhpcy4jaW50ZXJydXB0ZWRCeUd1YXJkcmFpbFtyZXNwb25zZUlkXSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuI2ludGVycnVwdGVkQnlHdWFyZHJhaWxbcmVzcG9uc2VJZF0gPSB0cnVlO1xuICAgICAgICAgICAgY29uc3QgZXJyb3IgPSBuZXcgT3V0cHV0R3VhcmRyYWlsVHJpcHdpcmVUcmlnZ2VyZWQoYE91dHB1dCBndWFyZHJhaWwgdHJpZ2dlcmVkOiAke0pTT04uc3RyaW5naWZ5KGZpcnN0VHJpcHdpcmVUcmlnZ2VyZWQub3V0cHV0Lm91dHB1dEluZm8pfWAsIGZpcnN0VHJpcHdpcmVUcmlnZ2VyZWQpO1xuICAgICAgICAgICAgdGhpcy5lbWl0KCdndWFyZHJhaWxfdHJpcHBlZCcsIHRoaXMuI2NvbnRleHQsIHRoaXMuI2N1cnJlbnRBZ2VudCwgZXJyb3IsIHtcbiAgICAgICAgICAgICAgICBpdGVtSWQsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMuaW50ZXJydXB0KCk7XG4gICAgICAgICAgICBjb25zdCBmZWVkYmFja1RleHQgPSBnZXRSZWFsdGltZUd1YXJkcmFpbEZlZWRiYWNrTWVzc2FnZShmaXJzdFRyaXB3aXJlVHJpZ2dlcmVkKTtcbiAgICAgICAgICAgIHRoaXMuc2VuZE1lc3NhZ2UoZmVlZGJhY2tUZXh0KTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgIH1cbiAgICAjc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgICAgIHRoaXMuI3RyYW5zcG9ydC5vbignKicsIChldmVudCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5lbWl0KCd0cmFuc3BvcnRfZXZlbnQnLCBldmVudCk7XG4gICAgICAgICAgICAvLyBIYW5kbGUgY29tcGxldGVkIHVzZXIgdHJhbnNjcmlwdGlvbiBldmVudHNcbiAgICAgICAgICAgIGlmIChldmVudC50eXBlID09PSAnY29udmVyc2F0aW9uLml0ZW0uaW5wdXRfYXVkaW9fdHJhbnNjcmlwdGlvbi5jb21wbGV0ZWQnKSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY29tcGxldGVkRXZlbnQgPSBldmVudDtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy4jaGlzdG9yeSA9IHVwZGF0ZVJlYWx0aW1lSGlzdG9yeSh0aGlzLiNoaXN0b3J5LCBjb21wbGV0ZWRFdmVudCwgdGhpcy4jc2hvdWxkSW5jbHVkZUF1ZGlvRGF0YSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuI2NvbnRleHQuY29udGV4dC5oaXN0b3J5ID0gdGhpcy4jaGlzdG9yeTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5lbWl0KCdoaXN0b3J5X3VwZGF0ZWQnLCB0aGlzLiNoaXN0b3J5KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ2Vycm9yJywge1xuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2Vycm9yJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yOiBlcnIsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuI3RyYW5zcG9ydC5vbignbWNwX3Rvb2xzX2xpc3RlZCcsICh7IHNlcnZlckxhYmVsLCB0b29scyB9KSA9PiB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHRoaXMuI2FsbE1jcFRvb2xzQnlTZXJ2ZXIuc2V0KHNlcnZlckxhYmVsLCB0b29scyA/PyBbXSk7XG4gICAgICAgICAgICAgICAgdGhpcy4jdXBkYXRlQXZhaWxhYmxlTWNwVG9vbHMoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ2Vycm9yJywgeyB0eXBlOiAnZXJyb3InLCBlcnJvcjogZXJyIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy4jdHJhbnNwb3J0Lm9uKCdhdWRpbycsIChldmVudCkgPT4ge1xuICAgICAgICAgICAgaWYgKCF0aGlzLiNhdWRpb1N0YXJ0ZWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLiNhdWRpb1N0YXJ0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgnYXVkaW9fc3RhcnQnLCB0aGlzLiNjb250ZXh0LCB0aGlzLiNjdXJyZW50QWdlbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5lbWl0KCdhdWRpbycsIGV2ZW50KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuI3RyYW5zcG9ydC5vbigndHVybl9zdGFydGVkJywgKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy4jYXVkaW9TdGFydGVkID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLmVtaXQoJ2FnZW50X3N0YXJ0JywgdGhpcy4jY29udGV4dCwgdGhpcy4jY3VycmVudEFnZW50KTtcbiAgICAgICAgICAgIHRoaXMuI2N1cnJlbnRBZ2VudC5lbWl0KCdhZ2VudF9zdGFydCcsIHRoaXMuI2NvbnRleHQsIHRoaXMuI2N1cnJlbnRBZ2VudCk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLiN0cmFuc3BvcnQub24oJ3R1cm5fZG9uZScsIChldmVudCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgaXRlbSA9IGV2ZW50LnJlc3BvbnNlLm91dHB1dFtldmVudC5yZXNwb25zZS5vdXRwdXQubGVuZ3RoIC0gMV07XG4gICAgICAgICAgICBjb25zdCB0ZXh0T3V0cHV0ID0gZ2V0TGFzdFRleHRGcm9tQXVkaW9PdXRwdXRNZXNzYWdlKGl0ZW0pID8/ICcnO1xuICAgICAgICAgICAgY29uc3QgaXRlbUlkID0gaXRlbT8uaWQgPz8gJyc7XG4gICAgICAgICAgICB0aGlzLmVtaXQoJ2FnZW50X2VuZCcsIHRoaXMuI2NvbnRleHQsIHRoaXMuI2N1cnJlbnRBZ2VudCwgdGV4dE91dHB1dCk7XG4gICAgICAgICAgICB0aGlzLiNjdXJyZW50QWdlbnQuZW1pdCgnYWdlbnRfZW5kJywgdGhpcy4jY29udGV4dCwgdGV4dE91dHB1dCk7XG4gICAgICAgICAgICB0aGlzLiNydW5PdXRwdXRHdWFyZHJhaWxzKHRleHRPdXRwdXQsIGV2ZW50LnJlc3BvbnNlLmlkLCBpdGVtSWQpO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy4jdHJhbnNwb3J0Lm9uKCdhdWRpb19kb25lJywgKCkgPT4ge1xuICAgICAgICAgICAgaWYgKHRoaXMuI2F1ZGlvU3RhcnRlZCkge1xuICAgICAgICAgICAgICAgIHRoaXMuI2F1ZGlvU3RhcnRlZCA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5lbWl0KCdhdWRpb19zdG9wcGVkJywgdGhpcy4jY29udGV4dCwgdGhpcy4jY3VycmVudEFnZW50KTtcbiAgICAgICAgfSk7XG4gICAgICAgIGxldCBsYXN0UnVuSW5kZXggPSAwO1xuICAgICAgICBsZXQgbGFzdEl0ZW1JZDtcbiAgICAgICAgdGhpcy4jdHJhbnNwb3J0Lm9uKCdhdWRpb190cmFuc2NyaXB0X2RlbHRhJywgKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGRlbHRhID0gZXZlbnQuZGVsdGE7XG4gICAgICAgICAgICAgICAgY29uc3QgaXRlbUlkID0gZXZlbnQuaXRlbUlkO1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlSWQgPSBldmVudC5yZXNwb25zZUlkO1xuICAgICAgICAgICAgICAgIGlmIChsYXN0SXRlbUlkICE9PSBpdGVtSWQpIHtcbiAgICAgICAgICAgICAgICAgICAgbGFzdEl0ZW1JZCA9IGl0ZW1JZDtcbiAgICAgICAgICAgICAgICAgICAgbGFzdFJ1bkluZGV4ID0gMDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3QgY3VycmVudFRleHQgPSB0aGlzLiN0cmFuc2NyaWJlZFRleHREZWx0YXNbaXRlbUlkXSA/PyAnJztcbiAgICAgICAgICAgICAgICBjb25zdCBuZXdUZXh0ID0gY3VycmVudFRleHQgKyBkZWx0YTtcbiAgICAgICAgICAgICAgICB0aGlzLiN0cmFuc2NyaWJlZFRleHREZWx0YXNbaXRlbUlkXSA9IG5ld1RleHQ7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuI291dHB1dEd1YXJkcmFpbFNldHRpbmdzLmRlYm91bmNlVGV4dExlbmd0aCA8IDApIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCBuZXdSdW5JbmRleCA9IE1hdGguZmxvb3IobmV3VGV4dC5sZW5ndGggLyB0aGlzLiNvdXRwdXRHdWFyZHJhaWxTZXR0aW5ncy5kZWJvdW5jZVRleHRMZW5ndGgpO1xuICAgICAgICAgICAgICAgIGlmIChuZXdSdW5JbmRleCA+IGxhc3RSdW5JbmRleCkge1xuICAgICAgICAgICAgICAgICAgICBsYXN0UnVuSW5kZXggPSBuZXdSdW5JbmRleDtcbiAgICAgICAgICAgICAgICAgICAgLy8gV2UgZG9uJ3QgY2FuY2VsIGV4aXN0aW5nIHJ1bnMgYmVjYXVzZSB3ZSB3YW50IHRoZSBmaXJzdCBvbmUgdG8gZmFpbCB0byBmYWlsXG4gICAgICAgICAgICAgICAgICAgIC8vIFRoZSB0cmFuc3BvcnQgbGF5ZXIgc2hvdWxkIHVwb24gZmFpbHVyZSBoYW5kbGUgdGhlIGludGVycnVwdGlvbiBhbmQgc3RvcCB0aGUgbW9kZWxcbiAgICAgICAgICAgICAgICAgICAgLy8gZnJvbSBnZW5lcmF0aW5nIGZ1cnRoZXJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy4jcnVuT3V0cHV0R3VhcmRyYWlscyhuZXdUZXh0LCByZXNwb25zZUlkLCBpdGVtSWQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ2Vycm9yJywge1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiAnZXJyb3InLFxuICAgICAgICAgICAgICAgICAgICBlcnJvcjogZXJyLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy4jdHJhbnNwb3J0Lm9uKCdpdGVtX3VwZGF0ZScsIChldmVudCkgPT4ge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjb25zdCBpc05ldyA9ICF0aGlzLiNoaXN0b3J5LnNvbWUoKGl0ZW0pID0+IGl0ZW0uaXRlbUlkID09PSBldmVudC5pdGVtSWQpO1xuICAgICAgICAgICAgICAgIHRoaXMuI2hpc3RvcnkgPSB1cGRhdGVSZWFsdGltZUhpc3RvcnkodGhpcy4jaGlzdG9yeSwgZXZlbnQsIHRoaXMuI3Nob3VsZEluY2x1ZGVBdWRpb0RhdGEpO1xuICAgICAgICAgICAgICAgIHRoaXMuI2NvbnRleHQuY29udGV4dC5oaXN0b3J5ID0gdGhpcy4jaGlzdG9yeTtcbiAgICAgICAgICAgICAgICBpZiAoaXNOZXcpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYWRkZWRJdGVtID0gdGhpcy4jaGlzdG9yeS5maW5kKChpdGVtKSA9PiBpdGVtLml0ZW1JZCA9PT0gZXZlbnQuaXRlbUlkKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGFkZGVkSXRlbSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lbWl0KCdoaXN0b3J5X2FkZGVkJywgYWRkZWRJdGVtKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ2hpc3RvcnlfdXBkYXRlZCcsIHRoaXMuI2hpc3RvcnkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgnZXJyb3InLCB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdlcnJvcicsXG4gICAgICAgICAgICAgICAgICAgIGVycm9yOiBlcnIsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLiN0cmFuc3BvcnQub24oJ2l0ZW1fZGVsZXRlZCcsIChldmVudCkgPT4ge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICB0aGlzLiNoaXN0b3J5ID0gdGhpcy4jaGlzdG9yeS5maWx0ZXIoKGl0ZW0pID0+IGl0ZW0uaXRlbUlkICE9PSBldmVudC5pdGVtSWQpO1xuICAgICAgICAgICAgICAgIHRoaXMuI2NvbnRleHQuY29udGV4dC5oaXN0b3J5ID0gdGhpcy4jaGlzdG9yeTtcbiAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ2hpc3RvcnlfdXBkYXRlZCcsIHRoaXMuI2hpc3RvcnkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgnZXJyb3InLCB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdlcnJvcicsXG4gICAgICAgICAgICAgICAgICAgIGVycm9yOiBlcnIsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLiN0cmFuc3BvcnQub24oJ2Z1bmN0aW9uX2NhbGwnLCBhc3luYyAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy4jaGFuZGxlRnVuY3Rpb25DYWxsKGV2ZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgIGxvZ2dlci5lcnJvcignRXJyb3IgaGFuZGxpbmcgZnVuY3Rpb24gY2FsbCcsIGVycm9yKTtcbiAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ2Vycm9yJywge1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiAnZXJyb3InLFxuICAgICAgICAgICAgICAgICAgICBlcnJvcixcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuI3RyYW5zcG9ydC5vbigndXNhZ2VfdXBkYXRlJywgKHVzYWdlKSA9PiB7XG4gICAgICAgICAgICB0aGlzLiNjb250ZXh0LnVzYWdlLmFkZCh1c2FnZSk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLiN0cmFuc3BvcnQub24oJ2F1ZGlvX2ludGVycnVwdGVkJywgKCkgPT4ge1xuICAgICAgICAgICAgaWYgKHRoaXMuI2F1ZGlvU3RhcnRlZCkge1xuICAgICAgICAgICAgICAgIHRoaXMuI2F1ZGlvU3RhcnRlZCA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5lbWl0KCdhdWRpb19pbnRlcnJ1cHRlZCcsIHRoaXMuI2NvbnRleHQsIHRoaXMuI2N1cnJlbnRBZ2VudCk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLiN0cmFuc3BvcnQub24oJ2Vycm9yJywgKGVycm9yKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmVtaXQoJ2Vycm9yJywgZXJyb3IpO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy4jdHJhbnNwb3J0Lm9uKCdtY3BfdG9vbF9jYWxsX2NvbXBsZXRlZCcsICh0b29sQ2FsbCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5lbWl0KCdtY3BfdG9vbF9jYWxsX2NvbXBsZXRlZCcsIHRoaXMuI2NvbnRleHQsIHRoaXMuI2N1cnJlbnRBZ2VudCwgdG9vbENhbGwpO1xuICAgICAgICAgICAgaWYgKHRoaXMuI2F1dG9tYXRpY2FsbHlUcmlnZ2VyUmVzcG9uc2VGb3JNY3BUb29sQ2FsbHMpIHtcbiAgICAgICAgICAgICAgICB0aGlzLiN0cmFuc3BvcnQuc2VuZEV2ZW50KHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3Jlc3BvbnNlLmNyZWF0ZScsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLiN0cmFuc3BvcnQub24oJ21jcF9hcHByb3ZhbF9yZXF1ZXN0JywgKGFwcHJvdmFsUmVxdWVzdCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5lbWl0KCd0b29sX2FwcHJvdmFsX3JlcXVlc3RlZCcsIHRoaXMuI2NvbnRleHQsIHRoaXMuI2N1cnJlbnRBZ2VudCwge1xuICAgICAgICAgICAgICAgIHR5cGU6ICdtY3BfYXBwcm92YWxfcmVxdWVzdCcsXG4gICAgICAgICAgICAgICAgYXBwcm92YWxJdGVtOiByZWFsdGltZUFwcHJvdmFsSXRlbVRvQXBwcm92YWxJdGVtKHRoaXMuI2N1cnJlbnRBZ2VudCwgYXBwcm92YWxSZXF1ZXN0KSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVjb21wdXRlcyB0aGUgY3VycmVudGx5IGF2YWlsYWJsZSBNQ1AgdG9vbHMgYmFzZWQgb24gdGhlIGN1cnJlbnQgYWdlbnQncyBhY3RpdmVcbiAgICAgKiBNQ1Agc2VydmVyIGNvbmZpZ3VyYXRpb25zIGFuZCB0aGUgY2FjaGVkIHBlci1zZXJ2ZXIgdG9vbCBsaXN0aW5ncy4gRW1pdHNcbiAgICAgKiBgbWNwX3Rvb2xzX2NoYW5nZWRgIGlmIHRoZSBzZXQgY2hhbmdlZC5cbiAgICAgKi9cbiAgICAjdXBkYXRlQXZhaWxhYmxlTWNwVG9vbHMoKSB7XG4gICAgICAgIC8vIENvbGxlY3QgYWN0aXZlIE1DUCBzZXJ2ZXIgbGFiZWxzIGFuZCBvcHRpb25hbCBhbGxvd2VkIGZpbHRlcnMgZnJvbSB0aGUgY3VycmVudCBhZ2VudFxuICAgICAgICBjb25zdCBhY3RpdmVNY3BDb25maWdzID0gdGhpcy4jY3VycmVudFRvb2xzPy5maWx0ZXIoKHQpID0+IHQudHlwZSA9PT0gJ21jcCcpO1xuICAgICAgICBjb25zdCBhbGxvd2VkRnJvbUNvbmZpZyA9IChjZmcpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGFsbG93ZWQgPSBjZmcuYWxsb3dlZF90b29scztcbiAgICAgICAgICAgIGlmICghYWxsb3dlZClcbiAgICAgICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoYWxsb3dlZCkpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGFsbG93ZWQ7XG4gICAgICAgICAgICBpZiAoYWxsb3dlZCAmJiBBcnJheS5pc0FycmF5KGFsbG93ZWQudG9vbF9uYW1lcykpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGFsbG93ZWQudG9vbF9uYW1lcztcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IGRlZHVwQnlOYW1lID0gbmV3IE1hcCgpO1xuICAgICAgICBmb3IgKGNvbnN0IGNmZyBvZiBhY3RpdmVNY3BDb25maWdzKSB7XG4gICAgICAgICAgICBjb25zdCB0b29scyA9IHRoaXMuI2FsbE1jcFRvb2xzQnlTZXJ2ZXIuZ2V0KGNmZy5zZXJ2ZXJfbGFiZWwpID8/IFtdO1xuICAgICAgICAgICAgY29uc3QgYWxsb3dlZCA9IGFsbG93ZWRGcm9tQ29uZmlnKGNmZyk7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHRvb2wgb2YgdG9vbHMpIHtcbiAgICAgICAgICAgICAgICBpZiAoYWxsb3dlZCAmJiAhYWxsb3dlZC5pbmNsdWRlcyh0b29sLm5hbWUpKVxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICBpZiAoIWRlZHVwQnlOYW1lLmhhcyh0b29sLm5hbWUpKSB7XG4gICAgICAgICAgICAgICAgICAgIGRlZHVwQnlOYW1lLnNldCh0b29sLm5hbWUsIHRvb2wpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjb25zdCBuZXh0ID0gQXJyYXkuZnJvbShkZWR1cEJ5TmFtZS52YWx1ZXMoKSk7XG4gICAgICAgIGNvbnN0IHByZXYgPSB0aGlzLiNhdmFpbGFibGVNY3BUb29scztcbiAgICAgICAgY29uc3QgY2hhbmdlZCA9IHByZXYubGVuZ3RoICE9PSBuZXh0Lmxlbmd0aCB8fFxuICAgICAgICAgICAgSlNPTi5zdHJpbmdpZnkocHJldi5tYXAoKHQpID0+IHQubmFtZSkuc29ydCgpKSAhPT1cbiAgICAgICAgICAgICAgICBKU09OLnN0cmluZ2lmeShuZXh0Lm1hcCgodCkgPT4gdC5uYW1lKS5zb3J0KCkpO1xuICAgICAgICBpZiAoY2hhbmdlZCkge1xuICAgICAgICAgICAgdGhpcy4jYXZhaWxhYmxlTWNwVG9vbHMgPSBuZXh0O1xuICAgICAgICAgICAgdGhpcy5lbWl0KCdtY3BfdG9vbHNfY2hhbmdlZCcsIHRoaXMuI2F2YWlsYWJsZU1jcFRvb2xzKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBDb25uZWN0IHRvIHRoZSBzZXNzaW9uLiBUaGlzIHdpbGwgZXN0YWJsaXNoIHRoZSBjb25uZWN0aW9uIHRvIHRoZSB1bmRlcmx5aW5nIHRyYW5zcG9ydCBsYXllclxuICAgICAqIGFuZCBzdGFydCB0aGUgc2Vzc2lvbi5cbiAgICAgKlxuICAgICAqIEFmdGVyIGNvbm5lY3RpbmcsIHRoZSBzZXNzaW9uIHdpbGwgYWxzbyBlbWl0IGEgYGhpc3RvcnlfdXBkYXRlZGAgZXZlbnQgd2l0aCBhbiBlbXB0eSBoaXN0b3J5LlxuICAgICAqXG4gICAgICogQHBhcmFtIG9wdGlvbnMgLSBUaGUgb3B0aW9ucyBmb3IgdGhlIGNvbm5lY3Rpb24uXG4gICAgICovXG4gICAgYXN5bmMgY29ubmVjdChvcHRpb25zKSB7XG4gICAgICAgIC8vIG1ha2VzIHN1cmUgdGhlIGN1cnJlbnQgYWdlbnQgaXMgY29ycmVjdGx5IHNldCBhbmQgbG9hZHMgdGhlIHRvb2xzXG4gICAgICAgIGF3YWl0IHRoaXMuI3NldEN1cnJlbnRBZ2VudCh0aGlzLmluaXRpYWxBZ2VudCk7XG4gICAgICAgIHRoaXMuI3NldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgICAgIGF3YWl0IHRoaXMuI3RyYW5zcG9ydC5jb25uZWN0KHtcbiAgICAgICAgICAgIGFwaUtleTogb3B0aW9ucy5hcGlLZXkgPz8gdGhpcy5vcHRpb25zLmFwaUtleSxcbiAgICAgICAgICAgIG1vZGVsOiB0aGlzLm9wdGlvbnMubW9kZWwsXG4gICAgICAgICAgICB1cmw6IG9wdGlvbnMudXJsLFxuICAgICAgICAgICAgY2FsbElkOiBvcHRpb25zLmNhbGxJZCxcbiAgICAgICAgICAgIGluaXRpYWxTZXNzaW9uQ29uZmlnOiBhd2FpdCB0aGlzLiNnZXRTZXNzaW9uQ29uZmlnKHRoaXMub3B0aW9ucy5jb25maWcpLFxuICAgICAgICB9KTtcbiAgICAgICAgLy8gRW5zdXJlIHRoZSBjYWNoZWQgbGFzdFNlc3Npb25Db25maWcgaW5jbHVkZXMgZXZlcnl0aGluZyBwYXNzZWQgYXMgdGhlIGluaXRpYWwgc2Vzc2lvbiBjb25maWdcbiAgICAgICAgLy8gKHRoZSBjYWxsIGFib3ZlIGFscmVhZHkgc2V0IGl0IHZpYSAjZ2V0U2Vzc2lvbkNvbmZpZyBidXQgaW4gY2FzZSBhZGRpdGlvbmFsIG92ZXJyaWRlcyB3ZXJlXG4gICAgICAgIC8vIHBhc3NlZCBkaXJlY3RseSBoZXJlIGluIHRoZSBmdXR1cmUgd2UgY291bGQgbWVyZ2UgdGhlbSkuIEZvciBub3cgaXQncyBhIG5vLW9wLlxuICAgICAgICB0aGlzLiNoaXN0b3J5ID0gW107XG4gICAgICAgIHRoaXMuZW1pdCgnaGlzdG9yeV91cGRhdGVkJywgdGhpcy4jaGlzdG9yeSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFVwZGF0ZSB0aGUgaGlzdG9yeSBvZiB0aGUgc2Vzc2lvbi5cbiAgICAgKiBAcGFyYW0gbmV3SGlzdG9yeSAtIFRoZSBuZXcgaGlzdG9yeSB0byBzZXQuXG4gICAgICovXG4gICAgdXBkYXRlSGlzdG9yeShuZXdIaXN0b3J5KSB7XG4gICAgICAgIGxldCB1cGRhdGVkSGlzdG9yeTtcbiAgICAgICAgaWYgKHR5cGVvZiBuZXdIaXN0b3J5ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICB1cGRhdGVkSGlzdG9yeSA9IG5ld0hpc3RvcnkodGhpcy4jaGlzdG9yeSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB1cGRhdGVkSGlzdG9yeSA9IG5ld0hpc3Rvcnk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy4jdHJhbnNwb3J0LnJlc2V0SGlzdG9yeSh0aGlzLiNoaXN0b3J5LCB1cGRhdGVkSGlzdG9yeSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNlbmQgYSBtZXNzYWdlIHRvIHRoZSBzZXNzaW9uLlxuICAgICAqIEBwYXJhbSBtZXNzYWdlIC0gVGhlIG1lc3NhZ2UgdG8gc2VuZC5cbiAgICAgKiBAcGFyYW0gb3RoZXJFdmVudERhdGEgLSBBZGRpdGlvbmFsIGV2ZW50IGRhdGEgdG8gc2VuZC5cbiAgICAgKi9cbiAgICBzZW5kTWVzc2FnZShtZXNzYWdlLCBvdGhlckV2ZW50RGF0YSA9IHt9KSB7XG4gICAgICAgIHRoaXMuI3RyYW5zcG9ydC5zZW5kTWVzc2FnZShtZXNzYWdlLCBvdGhlckV2ZW50RGF0YSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFkZCBpbWFnZSB0byB0aGUgc2Vzc2lvblxuICAgICAqIEBwYXJhbSBpbWFnZSAtIFRoZSBpbWFnZSB0byBhZGQuXG4gICAgICovXG4gICAgYWRkSW1hZ2UoaW1hZ2UsIHsgdHJpZ2dlclJlc3BvbnNlID0gdHJ1ZSB9ID0ge30pIHtcbiAgICAgICAgdGhpcy4jdHJhbnNwb3J0LmFkZEltYWdlKGltYWdlLCB7IHRyaWdnZXJSZXNwb25zZSB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTXV0ZSB0aGUgc2Vzc2lvbi5cbiAgICAgKiBAcGFyYW0gbXV0ZWQgLSBXaGV0aGVyIHRvIG11dGUgdGhlIHNlc3Npb24uXG4gICAgICovXG4gICAgbXV0ZShtdXRlZCkge1xuICAgICAgICB0aGlzLiN0cmFuc3BvcnQubXV0ZShtdXRlZCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIERpc2Nvbm5lY3QgZnJvbSB0aGUgc2Vzc2lvbi5cbiAgICAgKi9cbiAgICBjbG9zZSgpIHtcbiAgICAgICAgdGhpcy4jaW50ZXJydXB0ZWRCeUd1YXJkcmFpbCA9IHt9O1xuICAgICAgICB0aGlzLiN0cmFuc3BvcnQuY2xvc2UoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2VuZCBhdWRpbyB0byB0aGUgc2Vzc2lvbi5cbiAgICAgKiBAcGFyYW0gYXVkaW8gLSBUaGUgYXVkaW8gdG8gc2VuZC5cbiAgICAgKiBAcGFyYW0gb3B0aW9ucyAtIEFkZGl0aW9uYWwgb3B0aW9ucy5cbiAgICAgKiBAcGFyYW0gb3B0aW9ucy5jb21taXQgLSBXaGV0aGVyIHRvIGZpbmlzaCB0aGUgdHVybiB3aXRoIHRoaXMgYXVkaW8uXG4gICAgICovXG4gICAgc2VuZEF1ZGlvKGF1ZGlvLCBvcHRpb25zID0ge30pIHtcbiAgICAgICAgdGhpcy4jdHJhbnNwb3J0LnNlbmRBdWRpbyhhdWRpbywgb3B0aW9ucyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEludGVycnVwdCB0aGUgc2Vzc2lvbiBhcnRpZmljaWFsbHkgZm9yIGV4YW1wbGUgaWYgeW91IHdhbnQgdG8gYnVpbGQgYSBcInN0b3AgdGFsa2luZ1wiXG4gICAgICogYnV0dG9uLlxuICAgICAqL1xuICAgIGludGVycnVwdCgpIHtcbiAgICAgICAgdGhpcy4jdHJhbnNwb3J0LmludGVycnVwdCgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBcHByb3ZlIGEgdG9vbCBjYWxsLiBUaGlzIHdpbGwgYWxzbyB0cmlnZ2VyIHRoZSB0b29sIGNhbGwgdG8gdGhlIGFnZW50LlxuICAgICAqIEBwYXJhbSBhcHByb3ZhbEl0ZW0gLSBUaGUgYXBwcm92YWwgaXRlbSB0byBhcHByb3ZlLlxuICAgICAqIEBwYXJhbSBvcHRpb25zIC0gQWRkaXRpb25hbCBvcHRpb25zLlxuICAgICAqIEBwYXJhbSBvcHRpb25zLmFsd2F5c0FwcHJvdmUgLSBXaGV0aGVyIHRvIGFsd2F5cyBhcHByb3ZlIHRoZSB0b29sIGNhbGwuXG4gICAgICovXG4gICAgYXN5bmMgYXBwcm92ZShhcHByb3ZhbEl0ZW0sIG9wdGlvbnMgPSB7IGFsd2F5c0FwcHJvdmU6IGZhbHNlIH0pIHtcbiAgICAgICAgdGhpcy4jY29udGV4dC5hcHByb3ZlVG9vbChhcHByb3ZhbEl0ZW0sIG9wdGlvbnMpO1xuICAgICAgICBjb25zdCB0b29sTmFtZSA9IGFwcHJvdmFsSXRlbS50b29sTmFtZSA/PyBhcHByb3ZhbEl0ZW0ucmF3SXRlbS5uYW1lO1xuICAgICAgICBjb25zdCB0b29sID0gdGhpcy4jY3VycmVudEFnZW50LnRvb2xzLmZpbmQoKHRvb2wpID0+IHRvb2wubmFtZSA9PT0gdG9vbE5hbWUpO1xuICAgICAgICBpZiAodG9vbCAmJlxuICAgICAgICAgICAgdG9vbC50eXBlID09PSAnZnVuY3Rpb24nICYmXG4gICAgICAgICAgICBhcHByb3ZhbEl0ZW0ucmF3SXRlbS50eXBlID09PSAnZnVuY3Rpb25fY2FsbCcpIHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuI2hhbmRsZUZ1bmN0aW9uVG9vbENhbGwoYXBwcm92YWxJdGVtLnJhd0l0ZW0sIHRvb2wpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGFwcHJvdmFsSXRlbS5yYXdJdGVtLnR5cGUgPT09ICdob3N0ZWRfdG9vbF9jYWxsJykge1xuICAgICAgICAgICAgaWYgKG9wdGlvbnMuYWx3YXlzQXBwcm92ZSkge1xuICAgICAgICAgICAgICAgIGxvZ2dlci53YXJuKCdBbHdheXMgYXBwcm92aW5nIE1DUCB0b29scyBpcyBub3Qgc3VwcG9ydGVkLiBVc2UgdGhlIGFsbG93ZWQgdG9vbHMgY29uZmlndXJhdGlvbiBpbnN0ZWFkLicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgbWNwQXBwcm92YWxSZXF1ZXN0ID0gYXBwcm92YWxJdGVtVG9SZWFsdGltZUFwcHJvdmFsSXRlbShhcHByb3ZhbEl0ZW0pO1xuICAgICAgICAgICAgdGhpcy4jdHJhbnNwb3J0LnNlbmRNY3BSZXNwb25zZShtY3BBcHByb3ZhbFJlcXVlc3QsIHRydWUpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhyb3cgbmV3IE1vZGVsQmVoYXZpb3JFcnJvcihgVG9vbCAke3Rvb2xOYW1lID8/ICd1bmtub3duJ30gbm90IGZvdW5kYCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVqZWN0IGEgdG9vbCBjYWxsLiBUaGlzIHdpbGwgYWxzbyB0cmlnZ2VyIHRoZSB0b29sIGNhbGwgdG8gdGhlIGFnZW50LlxuICAgICAqIEBwYXJhbSBhcHByb3ZhbEl0ZW0gLSBUaGUgYXBwcm92YWwgaXRlbSB0byByZWplY3QuXG4gICAgICogQHBhcmFtIG9wdGlvbnMgLSBBZGRpdGlvbmFsIG9wdGlvbnMuXG4gICAgICogQHBhcmFtIG9wdGlvbnMuYWx3YXlzUmVqZWN0IC0gV2hldGhlciB0byBhbHdheXMgcmVqZWN0IHRoZSB0b29sIGNhbGwuXG4gICAgICovXG4gICAgYXN5bmMgcmVqZWN0KGFwcHJvdmFsSXRlbSwgb3B0aW9ucyA9IHsgYWx3YXlzUmVqZWN0OiBmYWxzZSB9KSB7XG4gICAgICAgIHRoaXMuI2NvbnRleHQucmVqZWN0VG9vbChhcHByb3ZhbEl0ZW0sIG9wdGlvbnMpO1xuICAgICAgICAvLyB3ZSBzdGlsbCBuZWVkIHRvIHNpbXVsYXRlIGEgdG9vbCBjYWxsIHRvIHRoZSBhZ2VudCB0byBsZXQgdGhlIGFnZW50IGtub3dcbiAgICAgICAgY29uc3QgdG9vbE5hbWUgPSBhcHByb3ZhbEl0ZW0udG9vbE5hbWUgPz8gYXBwcm92YWxJdGVtLnJhd0l0ZW0ubmFtZTtcbiAgICAgICAgY29uc3QgdG9vbCA9IHRoaXMuI2N1cnJlbnRBZ2VudC50b29scy5maW5kKCh0b29sKSA9PiB0b29sLm5hbWUgPT09IHRvb2xOYW1lKTtcbiAgICAgICAgaWYgKHRvb2wgJiZcbiAgICAgICAgICAgIHRvb2wudHlwZSA9PT0gJ2Z1bmN0aW9uJyAmJlxuICAgICAgICAgICAgYXBwcm92YWxJdGVtLnJhd0l0ZW0udHlwZSA9PT0gJ2Z1bmN0aW9uX2NhbGwnKSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLiNoYW5kbGVGdW5jdGlvblRvb2xDYWxsKGFwcHJvdmFsSXRlbS5yYXdJdGVtLCB0b29sKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChhcHByb3ZhbEl0ZW0ucmF3SXRlbS50eXBlID09PSAnaG9zdGVkX3Rvb2xfY2FsbCcpIHtcbiAgICAgICAgICAgIGlmIChvcHRpb25zLmFsd2F5c1JlamVjdCkge1xuICAgICAgICAgICAgICAgIGxvZ2dlci53YXJuKCdBbHdheXMgcmVqZWN0aW5nIE1DUCB0b29scyBpcyBub3Qgc3VwcG9ydGVkLiBVc2UgdGhlIGFsbG93ZWQgdG9vbHMgY29uZmlndXJhdGlvbiBpbnN0ZWFkLicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgbWNwQXBwcm92YWxSZXF1ZXN0ID0gYXBwcm92YWxJdGVtVG9SZWFsdGltZUFwcHJvdmFsSXRlbShhcHByb3ZhbEl0ZW0pO1xuICAgICAgICAgICAgdGhpcy4jdHJhbnNwb3J0LnNlbmRNY3BSZXNwb25zZShtY3BBcHByb3ZhbFJlcXVlc3QsIGZhbHNlKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBNb2RlbEJlaGF2aW9yRXJyb3IoYFRvb2wgJHt0b29sTmFtZSA/PyAndW5rbm93bid9IG5vdCBmb3VuZGApO1xuICAgICAgICB9XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cmVhbHRpbWVTZXNzaW9uLm1qcy5tYXAiLCJpbXBvcnQgeyBVc2VyRXJyb3IgfSBmcm9tICdAb3BlbmFpL2FnZW50cy1jb3JlJztcbmltcG9ydCB7IE9wZW5BSVJlYWx0aW1lV2ViU29ja2V0LCB9IGZyb20gXCIuL29wZW5haVJlYWx0aW1lV2Vic29ja2V0Lm1qc1wiO1xuaW1wb3J0IHsgUmVhbHRpbWVTZXNzaW9uLCB9IGZyb20gXCIuL3JlYWx0aW1lU2Vzc2lvbi5tanNcIjtcbi8qKlxuICogVHJhbnNwb3J0IGxheWVyIHRoYXQgY29ubmVjdHMgdG8gYW4gZXhpc3RpbmcgU0lQLWluaXRpYXRlZCBSZWFsdGltZSBjYWxsIHZpYSBjYWxsIElELlxuICovXG5leHBvcnQgY2xhc3MgT3BlbkFJUmVhbHRpbWVTSVAgZXh0ZW5kcyBPcGVuQUlSZWFsdGltZVdlYlNvY2tldCB7XG4gICAgY29uc3RydWN0b3Iob3B0aW9ucyA9IHt9KSB7XG4gICAgICAgIHN1cGVyKG9wdGlvbnMpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBCdWlsZCB0aGUgaW5pdGlhbCBzZXNzaW9uIHBheWxvYWQgZm9yIGEgU0lQLWF0dGFjaGVkIHNlc3Npb24sIG1hdGNoaW5nIHRoZSBjb25maWcgdGhhdCBhIFJlYWx0aW1lU2Vzc2lvbiB3b3VsZCBzZW5kIG9uIGNvbm5lY3QuXG4gICAgICpcbiAgICAgKiBUaGlzIGVuYWJsZXMgU0lQIGRlcGxveW1lbnRzIHRvIGFjY2VwdCBhbiBpbmNvbWluZyBjYWxsIHdpdGggYSBwYXlsb2FkIHRoYXQgYWxyZWFkeSByZWZsZWN0c1xuICAgICAqIHRoZSBhY3RpdmUgYWdlbnQncyBpbnN0cnVjdGlvbnMsIHRvb2xzLCBwcm9tcHQsIGFuZCB0cmFjaW5nIG1ldGFkYXRhIHdpdGhvdXQgZHVwbGljYXRpbmcgdGhlXG4gICAgICogc2Vzc2lvbiBsb2dpYyBvdXRzaWRlIG9mIHRoZSBTREsuIFRoZSByZXR1cm5lZCBvYmplY3Qgc3RydWN0dXJhbGx5IG1hdGNoZXMgdGhlIFJFU1RcbiAgICAgKiBgQ2FsbEFjY2VwdFBhcmFtc2AgaW50ZXJmYWNlLCBzbyBpdCBjYW4gYmUgZm9yd2FyZGVkIGRpcmVjdGx5IHRvXG4gICAgICogYG9wZW5haS5yZWFsdGltZS5jYWxscy5hY2NlcHQoLi4uKWAuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gYWdlbnQgLSBUaGUgc3RhcnRpbmcgYWdlbnQgdXNlZCB0byBzZWVkIHRoZSBzZXNzaW9uIGluc3RydWN0aW9ucywgdG9vbHMsIGFuZCBwcm9tcHQuXG4gICAgICogQHBhcmFtIG9wdGlvbnMgLSBPcHRpb25hbCBzZXNzaW9uIG9wdGlvbnMgdGhhdCBtaXJyb3IgdGhlIG9uZXMgcGFzc2VkIHRvIHRoZSBSZWFsdGltZVNlc3Npb24gY29uc3RydWN0b3IuXG4gICAgICogQHBhcmFtIG92ZXJyaWRlcyAtIEFkZGl0aW9uYWwgY29uZmlnIG92ZXJyaWRlcyBhcHBsaWVkIG9uIHRvcCBvZiB0aGUgc2Vzc2lvbiBvcHRpb25zLlxuICAgICAqL1xuICAgIHN0YXRpYyBhc3luYyBidWlsZEluaXRpYWxDb25maWcoYWdlbnQsIG9wdGlvbnMgPSB7fSwgb3ZlcnJpZGVzID0ge30pIHtcbiAgICAgICAgY29uc3Qgc2Vzc2lvbkNvbmZpZyA9IGF3YWl0IFJlYWx0aW1lU2Vzc2lvbi5jb21wdXRlSW5pdGlhbFNlc3Npb25Db25maWcoYWdlbnQsIG9wdGlvbnMsIG92ZXJyaWRlcyk7XG4gICAgICAgIGNvbnN0IHRyYW5zcG9ydCA9IG5ldyBPcGVuQUlSZWFsdGltZVNJUCgpO1xuICAgICAgICByZXR1cm4gdHJhbnNwb3J0LmJ1aWxkU2Vzc2lvblBheWxvYWQoc2Vzc2lvbkNvbmZpZyk7XG4gICAgfVxuICAgIHNlbmRBdWRpbyhfYXVkaW8sIF9vcHRpb25zID0ge30pIHtcbiAgICAgICAgLy8gU0lQIGludGVncmF0aW9ucyBzdHJlYW0gYXVkaW8gdG8gT3BlbkFJIGRpcmVjdGx5IHRocm91Z2ggdGhlIHRlbGVwaG9ueSBwcm92aWRlciwgc28gdGhlXG4gICAgICAgIC8vIHRyYW5zcG9ydCBkZWxpYmVyYXRlbHkgcHJldmVudHMgdXNlcmxhbmQgY29kZSBmcm9tIHNlbmRpbmcgZHVwbGljYXRlIGJ1ZmZlcnMuXG4gICAgICAgIHRocm93IG5ldyBFcnJvcignT3BlbkFJUmVhbHRpbWVTSVAgZG9lcyBub3Qgc3VwcG9ydCBzZW5kaW5nIGF1ZGlvIGJ1ZmZlcnM7IGF1ZGlvIGlzIGhhbmRsZWQgYnkgdGhlIFNJUCBjYWxsLicpO1xuICAgIH1cbiAgICBhc3luYyBjb25uZWN0KG9wdGlvbnMpIHtcbiAgICAgICAgaWYgKCFvcHRpb25zLmNhbGxJZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFVzZXJFcnJvcignT3BlbkFJUmVhbHRpbWVTSVAgcmVxdWlyZXMgYGNhbGxJZGAgaW4gdGhlIGNvbm5lY3Qgb3B0aW9ucy4nKTtcbiAgICAgICAgfVxuICAgICAgICBhd2FpdCBzdXBlci5jb25uZWN0KG9wdGlvbnMpO1xuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW9wZW5haVJlYWx0aW1lU2lwLm1qcy5tYXAiLCJpbXBvcnQgKiBhcyB1dGlsSW1wb3J0IGZyb20gXCIuL3V0aWxzLm1qc1wiO1xuZXhwb3J0IHsgUmVhbHRpbWVBZ2VudCB9IGZyb20gXCIuL3JlYWx0aW1lQWdlbnQubWpzXCI7XG5leHBvcnQgeyBSZWFsdGltZVNlc3Npb24sIH0gZnJvbSBcIi4vcmVhbHRpbWVTZXNzaW9uLm1qc1wiO1xuZXhwb3J0IHsgT3BlbkFJUmVhbHRpbWVXZWJSVEMsIH0gZnJvbSBcIi4vb3BlbmFpUmVhbHRpbWVXZWJSdGMubWpzXCI7XG5leHBvcnQgeyBPcGVuQUlSZWFsdGltZVdlYlNvY2tldCwgfSBmcm9tIFwiLi9vcGVuYWlSZWFsdGltZVdlYnNvY2tldC5tanNcIjtcbmV4cG9ydCB7IE9wZW5BSVJlYWx0aW1lU0lQIH0gZnJvbSBcIi4vb3BlbmFpUmVhbHRpbWVTaXAubWpzXCI7XG5leHBvcnQgeyBPcGVuQUlSZWFsdGltZUJhc2UsIERFRkFVTFRfT1BFTkFJX1JFQUxUSU1FX01PREVMLCBERUZBVUxUX09QRU5BSV9SRUFMVElNRV9TRVNTSU9OX0NPTkZJRywgfSBmcm9tIFwiLi9vcGVuYWlSZWFsdGltZUJhc2UubWpzXCI7XG5leHBvcnQgY29uc3QgdXRpbHMgPSB7XG4gICAgYmFzZTY0VG9BcnJheUJ1ZmZlcjogdXRpbEltcG9ydC5iYXNlNjRUb0FycmF5QnVmZmVyLFxuICAgIGFycmF5QnVmZmVyVG9CYXNlNjQ6IHV0aWxJbXBvcnQuYXJyYXlCdWZmZXJUb0Jhc2U2NCxcbiAgICBnZXRMYXN0VGV4dEZyb21BdWRpb091dHB1dE1lc3NhZ2U6IHV0aWxJbXBvcnQuZ2V0TGFzdFRleHRGcm9tQXVkaW9PdXRwdXRNZXNzYWdlLFxufTtcbmV4cG9ydCB7IE1vZGVsQmVoYXZpb3JFcnJvciwgT3V0cHV0R3VhcmRyYWlsVHJpcHdpcmVUcmlnZ2VyZWQsIHRvb2wsIFVzZXJFcnJvciwgfSBmcm9tICdAb3BlbmFpL2FnZW50cy1jb3JlJztcbmV4cG9ydCB7IGJhY2tncm91bmRSZXN1bHQsIGlzQmFja2dyb3VuZFJlc3VsdCB9IGZyb20gXCIuL3Rvb2wubWpzXCI7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5tanMubWFwIl0sIm5hbWVzIjpbIk1FVEFEQVRBIiwic2FmZUV4ZWN1dGUiLCJmbiIsImVycm9yIiwiZ2V0RW51bVZhbHVlcyIsImVudHJpZXMiLCJudW1lcmljVmFsdWVzIiwidiIsImsiLCJfIiwiJFpvZFJlZ2lzdHJ5Iiwic2NoZW1hIiwiX21ldGEiLCJtZXRhIiwicCIsInBtIiwicmVnaXN0cnkiLCJnbG9iYWxSZWdpc3RyeSIsIkpTT05TY2hlbWFHZW5lcmF0b3IiLCJwYXJhbXMiLCJfcGFyYW1zIiwiX2EiLCJkZWYiLCJmb3JtYXRNYXAiLCJzZWVuIiwicmVzdWx0Iiwib3ZlcnJpZGVTY2hlbWEiLCJfYiIsInBhcmVudCIsIl9qc29uIiwianNvbiIsIm1pbmltdW0iLCJtYXhpbXVtIiwiZm9ybWF0IiwicGF0dGVybnMiLCJjb250ZW50RW5jb2RpbmciLCJyZWdleGVzIiwicmVnZXgiLCJtdWx0aXBsZU9mIiwiZXhjbHVzaXZlTWF4aW11bSIsImV4Y2x1c2l2ZU1pbmltdW0iLCJzaGFwZSIsImtleSIsImFsbEtleXMiLCJyZXF1aXJlZEtleXMiLCJfYyIsIngiLCJpIiwiYSIsImIiLCJpc1NpbXBsZUludGVyc2VjdGlvbiIsInZhbCIsImFsbE9mIiwicHJlZml4SXRlbXMiLCJyZXN0IiwidmFsdWVzIiwidmFscyIsImZpbGUiLCJtaW1lIiwibSIsImlubmVyIiwiY2F0Y2hWYWx1ZSIsInBhdHRlcm4iLCJpbm5lclR5cGUiLCJpc1RyYW5zZm9ybWluZyIsInJvb3QiLCJtYWtlVVJJIiwiZW50cnkiLCJkZWZzU2VnbWVudCIsImV4dGVybmFsSWQiLCJ1cmlHZW5lcmF0b3IiLCJpZCIsImRlZlVyaVByZWZpeCIsImRlZklkIiwiZXh0cmFjdFRvRGVmIiwicmVmIiwiZXh0IiwiZmxhdHRlblJlZiIsInpvZFNjaGVtYSIsIl9jYWNoZWQiLCJyZWZTY2hlbWEiLCJfZCIsIl9lIiwiZGVmcyIsIl9mIiwidG9KU09OU2NoZW1hIiwiaW5wdXQiLCJnZW4iLCJzY2hlbWFzIiwiZXh0ZXJuYWwiLCJfc2NoZW1hIiwiX2N0eCIsImN0eCIsIm9wdGlvbiIsIml0ZW0iLCJtYWtlUGFyc2VhYmxlVGV4dEZvcm1hdCIsInJlc3BvbnNlX2Zvcm1hdCIsInBhcnNlciIsIm9iaiIsImlnbm9yZU92ZXJyaWRlIiwiZGVmYXVsdE9wdGlvbnMiLCJnZXREZWZhdWx0T3B0aW9ucyIsIm9wdGlvbnMiLCJ6b2REZWYiLCJpc0VtcHR5T2JqIiwiX2siLCJnZXRSZWZzIiwiX29wdGlvbnMiLCJjdXJyZW50UGF0aCIsIm5hbWUiLCJhZGRFcnJvck1lc3NhZ2UiLCJyZXMiLCJlcnJvck1lc3NhZ2UiLCJyZWZzIiwic2V0UmVzcG9uc2VWYWx1ZUFuZEVycm9ycyIsInZhbHVlIiwidXRpbCIsImFzc2VydElzIiwiX2FyZyIsImFzc2VydE5ldmVyIiwiX3giLCJpdGVtcyIsInZhbGlkS2V5cyIsImZpbHRlcmVkIiwiZSIsIm9iamVjdCIsImtleXMiLCJhcnIiLCJjaGVja2VyIiwiam9pblZhbHVlcyIsImFycmF5Iiwic2VwYXJhdG9yIiwib2JqZWN0VXRpbCIsImZpcnN0Iiwic2Vjb25kIiwiWm9kUGFyc2VkVHlwZSIsImdldFBhcnNlZFR5cGUiLCJkYXRhIiwiWm9kSXNzdWVDb2RlIiwiWm9kRXJyb3IiLCJpc3N1ZXMiLCJzdWIiLCJzdWJzIiwiYWN0dWFsUHJvdG8iLCJfbWFwcGVyIiwibWFwcGVyIiwiaXNzdWUiLCJmaWVsZEVycm9ycyIsInByb2Nlc3NFcnJvciIsImN1cnIiLCJlbCIsImZvcm1FcnJvcnMiLCJmaXJzdEVsIiwiZXJyb3JNYXAiLCJtZXNzYWdlIiwib3ZlcnJpZGVFcnJvck1hcCIsImRlZmF1bHRFcnJvck1hcCIsImdldEVycm9yTWFwIiwibWFrZUlzc3VlIiwicGF0aCIsImVycm9yTWFwcyIsImlzc3VlRGF0YSIsImZ1bGxQYXRoIiwiZnVsbElzc3VlIiwibWFwcyIsIm1hcCIsImFkZElzc3VlVG9Db250ZXh0Iiwib3ZlcnJpZGVNYXAiLCJQYXJzZVN0YXR1cyIsInN0YXR1cyIsInJlc3VsdHMiLCJhcnJheVZhbHVlIiwiSU5WQUxJRCIsInBhaXJzIiwic3luY1BhaXJzIiwicGFpciIsImZpbmFsT2JqZWN0IiwiRElSVFkiLCJPSyIsImlzQWJvcnRlZCIsImlzRGlydHkiLCJpc1ZhbGlkIiwiaXNBc3luYyIsImVycm9yVXRpbCIsIlBhcnNlSW5wdXRMYXp5UGF0aCIsImhhbmRsZVJlc3VsdCIsInByb2Nlc3NDcmVhdGVQYXJhbXMiLCJpbnZhbGlkX3R5cGVfZXJyb3IiLCJyZXF1aXJlZF9lcnJvciIsImRlc2NyaXB0aW9uIiwiaXNzIiwiWm9kVHlwZSIsImVyciIsIm1heWJlQXN5bmNSZXN1bHQiLCJjaGVjayIsImdldElzc3VlUHJvcGVydGllcyIsInNldEVycm9yIiwicmVmaW5lbWVudERhdGEiLCJyZWZpbmVtZW50IiwiWm9kRWZmZWN0cyIsIlpvZEZpcnN0UGFydHlUeXBlS2luZCIsIlpvZE9wdGlvbmFsIiwiWm9kTnVsbGFibGUiLCJab2RBcnJheSIsIlpvZFByb21pc2UiLCJab2RVbmlvbiIsImluY29taW5nIiwiWm9kSW50ZXJzZWN0aW9uIiwidHJhbnNmb3JtIiwiZGVmYXVsdFZhbHVlRnVuYyIsIlpvZERlZmF1bHQiLCJab2RCcmFuZGVkIiwiY2F0Y2hWYWx1ZUZ1bmMiLCJab2RDYXRjaCIsIlRoaXMiLCJ0YXJnZXQiLCJab2RQaXBlbGluZSIsIlpvZFJlYWRvbmx5IiwiY3VpZFJlZ2V4IiwiY3VpZDJSZWdleCIsInVsaWRSZWdleCIsInV1aWRSZWdleCIsIm5hbm9pZFJlZ2V4Iiwiand0UmVnZXgiLCJkdXJhdGlvblJlZ2V4IiwiZW1haWxSZWdleCIsIl9lbW9qaVJlZ2V4IiwiZW1vamlSZWdleCIsImlwdjRSZWdleCIsImlwdjRDaWRyUmVnZXgiLCJpcHY2UmVnZXgiLCJpcHY2Q2lkclJlZ2V4IiwiYmFzZTY0UmVnZXgiLCJiYXNlNjR1cmxSZWdleCIsImRhdGVSZWdleFNvdXJjZSIsImRhdGVSZWdleCIsInRpbWVSZWdleFNvdXJjZSIsImFyZ3MiLCJzZWNvbmRzUmVnZXhTb3VyY2UiLCJzZWNvbmRzUXVhbnRpZmllciIsInRpbWVSZWdleCIsImRhdGV0aW1lUmVnZXgiLCJvcHRzIiwiaXNWYWxpZElQIiwiaXAiLCJ2ZXJzaW9uIiwiaXNWYWxpZEpXVCIsImp3dCIsImFsZyIsImhlYWRlciIsImJhc2U2NCIsImRlY29kZWQiLCJpc1ZhbGlkQ2lkciIsIlpvZFN0cmluZyIsInRvb0JpZyIsInRvb1NtYWxsIiwidmFsaWRhdGlvbiIsIm1pbkxlbmd0aCIsIm1heExlbmd0aCIsImxlbiIsImNoIiwibWluIiwibWF4IiwiZmxvYXRTYWZlUmVtYWluZGVyIiwic3RlcCIsInZhbERlY0NvdW50Iiwic3RlcERlY0NvdW50IiwiZGVjQ291bnQiLCJ2YWxJbnQiLCJzdGVwSW50IiwiWm9kTnVtYmVyIiwia2luZCIsImluY2x1c2l2ZSIsIlpvZEJpZ0ludCIsIlpvZEJvb2xlYW4iLCJab2REYXRlIiwibWluRGF0ZSIsIm1heERhdGUiLCJab2RTeW1ib2wiLCJab2RVbmRlZmluZWQiLCJab2ROdWxsIiwiWm9kQW55IiwiWm9kVW5rbm93biIsIlpvZE5ldmVyIiwiWm9kVm9pZCIsImRlZXBQYXJ0aWFsaWZ5IiwiWm9kT2JqZWN0IiwibmV3U2hhcGUiLCJmaWVsZFNjaGVtYSIsIlpvZFR1cGxlIiwic2hhcGVLZXlzIiwiZXh0cmFLZXlzIiwia2V5VmFsaWRhdG9yIiwidW5rbm93bktleXMiLCJjYXRjaGFsbCIsImRlZmF1bHRFcnJvciIsImF1Z21lbnRhdGlvbiIsIm1lcmdpbmciLCJpbmRleCIsIm1hc2siLCJuZXdGaWVsZCIsImNyZWF0ZVpvZEVudW0iLCJoYW5kbGVSZXN1bHRzIiwidW5pb25FcnJvcnMiLCJjaGlsZEN0eCIsImRpcnR5IiwidHlwZXMiLCJnZXREaXNjcmltaW5hdG9yIiwidHlwZSIsIlpvZExhenkiLCJab2RMaXRlcmFsIiwiWm9kRW51bSIsIlpvZE5hdGl2ZUVudW0iLCJab2REaXNjcmltaW5hdGVkVW5pb24iLCJkaXNjcmltaW5hdG9yIiwiZGlzY3JpbWluYXRvclZhbHVlIiwib3B0aW9uc01hcCIsImRpc2NyaW1pbmF0b3JWYWx1ZXMiLCJtZXJnZVZhbHVlcyIsImFUeXBlIiwiYlR5cGUiLCJiS2V5cyIsInNoYXJlZEtleXMiLCJuZXdPYmoiLCJzaGFyZWRWYWx1ZSIsIm5ld0FycmF5IiwiaXRlbUEiLCJpdGVtQiIsImhhbmRsZVBhcnNlZCIsInBhcnNlZExlZnQiLCJwYXJzZWRSaWdodCIsIm1lcmdlZCIsImxlZnQiLCJyaWdodCIsIml0ZW1JbmRleCIsIlpvZFJlY29yZCIsImtleVR5cGUiLCJ2YWx1ZVR5cGUiLCJ0aGlyZCIsIlpvZE1hcCIsImZpbmFsTWFwIiwiWm9kU2V0IiwiZmluYWxpemVTZXQiLCJlbGVtZW50cyIsInBhcnNlZFNldCIsImVsZW1lbnQiLCJtaW5TaXplIiwibWF4U2l6ZSIsInNpemUiLCJnZXR0ZXIiLCJleHBlY3RlZFZhbHVlcyIsImVudW1WYWx1ZXMiLCJuZXdEZWYiLCJvcHQiLCJuYXRpdmVFbnVtVmFsdWVzIiwicHJvbWlzaWZpZWQiLCJlZmZlY3QiLCJjaGVja0N0eCIsImFyZyIsInByb2Nlc3NlZCIsImV4ZWN1dGVSZWZpbmVtZW50IiwiYWNjIiwiYmFzZSIsInByZXByb2Nlc3MiLCJuZXdDdHgiLCJab2ROYU4iLCJpblJlc3VsdCIsImZyZWV6ZSIsImNsZWFuUGFyYW1zIiwiY3VzdG9tIiwiZmF0YWwiLCJyIiwiX2ZhdGFsIiwiaW5zdGFuY2VPZlR5cGUiLCJjbHMiLCJzdHJpbmdUeXBlIiwibnVtYmVyVHlwZSIsImJvb2xlYW5UeXBlIiwiYW55VHlwZSIsImFycmF5VHlwZSIsIm9iamVjdFR5cGUiLCJ1bmlvblR5cGUiLCJkaXNjcmltaW5hdGVkVW5pb25UeXBlIiwicmVjb3JkVHlwZSIsImxhenlUeXBlIiwibGl0ZXJhbFR5cGUiLCJlbnVtVHlwZSIsInBhcnNlQW55RGVmIiwicGFyc2VBcnJheURlZiIsInBhcnNlRGVmIiwicGFyc2VCaWdpbnREZWYiLCJwYXJzZUJvb2xlYW5EZWYiLCJwYXJzZUJyYW5kZWREZWYiLCJfZGVmIiwicGFyc2VDYXRjaERlZiIsInBhcnNlRGF0ZURlZiIsIm92ZXJyaWRlRGF0ZVN0cmF0ZWd5Iiwic3RyYXRlZ3kiLCJpbnRlZ2VyRGF0ZVBhcnNlciIsInBhcnNlRGVmYXVsdERlZiIsInBhcnNlRWZmZWN0c0RlZiIsImZvcmNlUmVzb2x1dGlvbiIsInBhcnNlRW51bURlZiIsImlzSnNvblNjaGVtYTdBbGxPZlR5cGUiLCJwYXJzZUludGVyc2VjdGlvbkRlZiIsInVuZXZhbHVhdGVkUHJvcGVydGllcyIsIm1lcmdlZEFsbE9mIiwibmVzdGVkU2NoZW1hIiwiYWRkaXRpb25hbFByb3BlcnRpZXMiLCJwYXJzZUxpdGVyYWxEZWYiLCJwYXJzZWRUeXBlIiwiem9kUGF0dGVybnMiLCJwYXJzZVN0cmluZ0RlZiIsInByb2Nlc3NQYXR0ZXJuIiwiZXNjYXBlTm9uQWxwaGFOdW1lcmljIiwiYWRkRm9ybWF0IiwiYWRkUGF0dGVybiIsImMiLCJwcm9jZXNzUmVnRXhwIiwicmVnZXhPckZ1bmN0aW9uIiwiZmxhZ3MiLCJzb3VyY2UiLCJpc0VzY2FwZWQiLCJpbkNoYXJHcm91cCIsImluQ2hhclJhbmdlIiwicmVnZXhUZXN0IiwicGFyc2VSZWNvcmREZWYiLCJwYXJzZU1hcERlZiIsInBhcnNlTmF0aXZlRW51bURlZiIsImFjdHVhbFZhbHVlcyIsInBhcnNlZFR5cGVzIiwicGFyc2VOZXZlckRlZiIsInBhcnNlTnVsbERlZiIsInByaW1pdGl2ZU1hcHBpbmdzIiwicGFyc2VVbmlvbkRlZiIsImFzQW55T2YiLCJ1bmlxdWVUeXBlcyIsImFueU9mIiwicGFyc2VOdWxsYWJsZURlZiIsInBhcnNlTnVtYmVyRGVmIiwiZGVjaWRlQWRkaXRpb25hbFByb3BlcnRpZXMiLCJwYXJzZU9iamVjdERlZiIsInByb3BOYW1lIiwicHJvcERlZiIsInByb3BlcnR5UGF0aCIsInBhcnNlZERlZiIsInBhcnNlT3B0aW9uYWxEZWYiLCJpbm5lclNjaGVtYSIsInBhcnNlUGlwZWxpbmVEZWYiLCJwYXJzZVByb21pc2VEZWYiLCJwYXJzZVNldERlZiIsInBhcnNlVHVwbGVEZWYiLCJwYXJzZVVuZGVmaW5lZERlZiIsInBhcnNlVW5rbm93bkRlZiIsInBhcnNlUmVhZG9ubHlEZWYiLCJzZWVuSXRlbSIsIm92ZXJyaWRlUmVzdWx0Iiwic2VlblNjaGVtYSIsImdldCRyZWYiLCJuZXdJdGVtIiwianNvblNjaGVtYSIsInNlbGVjdFBhcnNlciIsImFkZE1ldGEiLCJnZXRSZWxhdGl2ZVBhdGgiLCJwYXRoQSIsInBhdGhCIiwidHlwZU5hbWUiLCJ6b2RUb0pzb25TY2hlbWEiLCJtYWluIiwidGl0bGUiLCJkZWZpbml0aW9ucyIsInByb2Nlc3NlZERlZmluaXRpb25zIiwibmV3RGVmaW5pdGlvbnMiLCJjb21iaW5lZCIsIm1ha2VQYXJzZWFibGVSZXNwb25zZVRvb2wiLCJ0b29sIiwiY2FsbGJhY2siLCJ0b1N0cmljdEpzb25TY2hlbWEiLCJzY2hlbWFDb3B5IiwiZW5zdXJlU3RyaWN0SnNvblNjaGVtYSIsImlzTnVsbGFibGUiLCJvbmVPZlZhcmlhbnQiLCJhbGxPZlZhcmlhbnQiLCJpc09iamVjdCIsImRlZk5hbWUiLCJkZWZTY2hlbWEiLCJkZWZpbml0aW9uTmFtZSIsImRlZmluaXRpb25TY2hlbWEiLCJyZXF1aXJlZCIsInByb3BlcnRpZXMiLCJwcm9wU2NoZW1hIiwidmFyaWFudCIsInJlc29sdmVkIiwiaGFzTW9yZVRoYW5OS2V5cyIsInJlc29sdmVSZWYiLCJwYXRoUGFydHMiLCJuIiwiem9kVjNUb0pzb25TY2hlbWEiLCJfem9kVG9Kc29uU2NoZW1hIiwiem9kVjRUb0pzb25TY2hlbWEiLCJ6NC50b0pTT05TY2hlbWEiLCJpc1pvZFY0Iiwiem9kT2JqZWN0Iiwiem9kVGV4dEZvcm1hdCIsInByb3BzIiwiY29udGVudCIsInpvZFJlc3BvbnNlc0Z1bmN0aW9uIiwiQWdlbnRzRXJyb3IiLCJzdGF0ZSIsIl9fcHVibGljRmllbGQiLCJTeXN0ZW1FcnJvciIsIk1heFR1cm5zRXhjZWVkZWRFcnJvciIsIk1vZGVsQmVoYXZpb3JFcnJvciIsIlVzZXJFcnJvciIsIkd1YXJkcmFpbEV4ZWN1dGlvbkVycm9yIiwiVG9vbENhbGxFcnJvciIsIklucHV0R3VhcmRyYWlsVHJpcHdpcmVUcmlnZ2VyZWQiLCJPdXRwdXRHdWFyZHJhaWxUcmlwd2lyZVRyaWdnZXJlZCIsImFzWm9kVHlwZSIsInJlYWRab2REZWZpbml0aW9uIiwiY2FuZGlkYXRlIiwicmVhZFpvZFR5cGUiLCJyYXdUeXBlIiwibG93ZXIiLCJpc1pvZE9iamVjdCIsImlzQWdlbnRUb29sSW5wdXQiLCJKU09OX1NDSEVNQV9EUkFGVF8wNyIsIk9QVElPTkFMX1dSQVBQRVJTIiwiREVDT1JBVE9SX1dSQVBQRVJTIiwiU0lNUExFX1RZUEVfTUFQUElORyIsImhhc0pzb25TY2hlbWFPYmplY3RTaGFwZSIsInpvZEpzb25TY2hlbWFDb21wYXQiLCJidWlsZE9iamVjdFNjaGVtYSIsInJlYWRTaGFwZSIsImZpZWxkIiwib3B0aW9uYWwiLCJjb252ZXJ0UHJvcGVydHkiLCJjdXJyZW50IiwidW53cmFwRGVjb3JhdG9ycyIsIm5leHQiLCJjb252ZXJ0U2NoZW1hIiwidW53cmFwcGVkIiwiYnVpbGRBcnJheVNjaGVtYSIsImJ1aWxkVHVwbGVTY2hlbWEiLCJidWlsZFVuaW9uU2NoZW1hIiwiYnVpbGRJbnRlcnNlY3Rpb25TY2hlbWEiLCJidWlsZExpdGVyYWwiLCJidWlsZEVudW0iLCJidWlsZFJlY29yZFNjaGVtYSIsImJ1aWxkTWFwU2NoZW1hIiwiYnVpbGRTZXRTY2hlbWEiLCJidWlsZE51bGxhYmxlU2NoZW1hIiwiZXh0cmFjdEZpcnN0IiwiY29lcmNlQXJyYXkiLCJ2YWx1ZVNjaGVtYSIsImxpdGVyYWwiLCJ6b2RSZXNwb25zZXNGdW5jdGlvbkNvbXBhdCIsInpvZFRleHRGb3JtYXRDb21wYXQiLCJidWlsZEpzb25TY2hlbWFGcm9tWm9kIiwiaW5wdXRUeXBlIiwidG9GdW5jdGlvblRvb2xOYW1lIiwiZ2V0U2NoZW1hQW5kUGFyc2VyRnJvbUlucHV0VHlwZSIsInVzZUZhbGxiYWNrIiwib3JpZ2luYWxFcnJvciIsImZhbGxiYWNrU2NoZW1hIiwicmF3SW5wdXQiLCJmb3JtYXR0ZWRGdW5jdGlvbiIsImNvbnZlcnRBZ2VudE91dHB1dFR5cGVUb1NlcmlhbGl6YWJsZSIsIm91dHB1dFR5cGUiLCJleGlzdGluZyIsIm91dHB1dCIsInMiLCJoIiwiZCIsInciLCJ5IiwibXMiLCJwYXJzZSIsImZtdExvbmciLCJmbXRTaG9ydCIsInN0ciIsIm1hdGNoIiwibXNBYnMiLCJwbHVyYWwiLCJpc1BsdXJhbCIsInNldHVwIiwiZW52IiwiY3JlYXRlRGVidWciLCJjb2VyY2UiLCJkaXNhYmxlIiwiZW5hYmxlIiwiZW5hYmxlZCIsInJlcXVpcmUkJDAiLCJkZXN0cm95Iiwic2VsZWN0Q29sb3IiLCJuYW1lc3BhY2UiLCJoYXNoIiwicHJldlRpbWUiLCJlbmFibGVPdmVycmlkZSIsIm5hbWVzcGFjZXNDYWNoZSIsImVuYWJsZWRDYWNoZSIsImRlYnVnIiwic2VsZiIsImZvcm1hdHRlciIsImV4dGVuZCIsImRlbGltaXRlciIsIm5ld0RlYnVnIiwibmFtZXNwYWNlcyIsInNwbGl0IiwibnMiLCJtYXRjaGVzVGVtcGxhdGUiLCJzZWFyY2giLCJ0ZW1wbGF0ZSIsInNlYXJjaEluZGV4IiwidGVtcGxhdGVJbmRleCIsInN0YXJJbmRleCIsIm1hdGNoSW5kZXgiLCJza2lwIiwiY29tbW9uIiwiZXhwb3J0cyIsImZvcm1hdEFyZ3MiLCJzYXZlIiwibG9hZCIsInVzZUNvbG9ycyIsImxvY2Fsc3RvcmFnZSIsIndhcm5lZCIsIm1vZHVsZSIsImxhc3RDIiwiZm9ybWF0dGVycyIsImxvYWRFbnYiLCJfbG9hZEVudiIsImlzRW5hYmxlZCIsImZsYWdOYW1lIiwidHJhY2luZyIsImxvZ2dpbmciLCJkb250TG9nTW9kZWxEYXRhIiwiZG9udExvZ1Rvb2xEYXRhIiwiZ2V0TG9nZ2VyIiwibG9nZ2VyIiwiQllURV9QUkVWSUVXX0xJTUlUIiwidG9TbWFydFN0cmluZyIsImlzQXJyYXlCdWZmZXJMaWtlIiwiZm9ybWF0Qnl0ZUFycmF5IiwiaXNBcnJheUJ1ZmZlclZpZXciLCJ2aWV3Iiwic21hcnRTdHJpbmdSZXBsYWNlciIsInNoYXJlZEFycmF5QnVmZmVyQ3RvciIsImlzU2VyaWFsaXplZEJ1ZmZlclNuYXBzaG90IiwiaXNOb2RlQnVmZmVyIiwiYnVmZmVyQ3RvciIsImJ5dGVzIiwicHJldmlld0xlbmd0aCIsInByZXZpZXdQYXJ0cyIsImZvcm1hdEJ5dGUiLCJlbGxpcHNpcyIsImJ5dGUiLCJfa2V5IiwibmVzdGVkVmFsdWUiLCJpc0NvbXB1dGVyUHJvdmlkZXIiLCJjb21wdXRlckNhY2hlIiwiY29tcHV0ZXJJbml0aWFsaXplck1hcCIsImNvbXB1dGVyc0J5UnVuQ29udGV4dCIsImdldENvbXB1dGVySW5pdGlhbGl6ZXIiLCJpbml0aWFsaXplciIsInRyYWNrUmVzb2x2ZWRDb21wdXRlciIsInJ1bkNvbnRleHQiLCJyZXNvbHZlZEJ5UnVuIiwicmVzb2x2ZUNvbXB1dGVyIiwidG9vbEtleSIsInBlckNvbnRleHQiLCJjYWNoZWQiLCJpbml0aWFsaXplckNvbmZpZyIsImxpZmVjeWNsZSIsImRpc3Bvc2VyIiwiY29tcHV0ZXIiLCJkaXNwb3NlUmVzb2x2ZWRDb21wdXRlcnMiLCJkaXNwb3NlcnMiLCJzdG9yZWRJbml0aWFsaXplciIsImRpc3Bvc2UiLCJkZWZhdWx0VG9vbEVycm9yRnVuY3Rpb24iLCJjb250ZXh0IiwidG9vbEVycm9yRnVuY3Rpb24iLCJzdHJpY3RNb2RlIiwicGFyYW1ldGVycyIsIl9pbnZva2UiLCJkZXRhaWxzIiwicGFyc2VkIiwic3RyaW5nUmVzdWx0IiwiaW52b2tlIiwiY3VycmVudFNwYW4iLCJnZXRDdXJyZW50U3BhbiIsIm5lZWRzQXBwcm92YWwiLCJhZ2VudCIsInByZWRpY2F0ZSIsInoub2JqZWN0Iiwiei5zdHJpbmciLCJ6LmxpdGVyYWwiLCJ6LnJlY29yZCIsInouYW55Iiwiei5hcnJheSIsInouYm9vbGVhbiIsIl9jYWNoZWRUb29scyIsIl9jYWNoZWRUb29sS2V5c0J5U2VydmVyIiwiZGVmYXVsdE1DUFRvb2xDYWNoZUtleSIsInNlcnZlciIsImdldEZ1bmN0aW9uVG9vbHNGcm9tU2VydmVyIiwiY29udmVydFNjaGVtYXNUb1N0cmljdCIsImdlbmVyYXRlTUNQVG9vbENhY2hlS2V5IiwiY2FjaGVLZXkiLCJ0IiwibWNwVG9GdW5jdGlvblRvb2wiLCJsaXN0VG9vbHNGb3JTZXJ2ZXIiLCJzcGFuIiwiZmV0Y2hlZE1jcFRvb2xzIiwibWNwVG9vbHMiLCJmaWx0ZXJlZFRvb2xzIiwiZmlsdGVyIiwiZ2xvYmFsTG9nZ2VyIiwiYWxsb3dlZFRvb2xOYW1lcyIsImJsb2NrZWRUb29sTmFtZXMiLCJhbGxvd2VkIiwiYmxvY2tlZCIsInRvb2xzIiwiZ2V0Q3VycmVudFRyYWNlIiwid2l0aE1DUExpc3RUb29sc1NwYW4iLCJnZXRBbGxNY3BUb29scyIsIm1jcFNlcnZlcnNPck9wdHMiLCJtY3BTZXJ2ZXJzIiwiY29udmVydFNjaGVtYXNUb1N0cmljdEZyb21PcHRzIiwicnVuQ29udGV4dEZyb21PcHRzIiwiYWdlbnRGcm9tT3B0cyIsImFsbFRvb2xzIiwidG9vbE5hbWVzIiwic2VydmVyVG9vbHMiLCJpbnRlcnNlY3Rpb24iLCJtY3BUb29sIiwiX2NvbnRleHQiLCJzdHJpY3RTY2hlbWEiLCJub25TdHJpY3RTY2hlbWEiLCJvdXQiLCJCcm93c2VyRXZlbnRFbWl0dGVyIiwiX19wcml2YXRlQWRkIiwiX3RhcmdldCIsIl9saXN0ZW5lcldyYXBwZXJzIiwibGlzdGVuZXIiLCJldmVudFR5cGUiLCJsaXN0ZW5lcnNGb3JUeXBlIiwiX19wcml2YXRlR2V0Iiwid3JhcHBlcnMiLCJ3cmFwcGVyIiwiZXZlbnQiLCJoYW5kbGVyIiwicmFuZG9tVVVJRCIsIlJlYWRhYmxlIiwiX2Rlc3RpbmF0aW9uIiwiX3RyYW5zZm9ybSIsIlJlYWRhYmxlU3RyZWFtIiwiVHJhbnNmb3JtU3RyZWFtIiwiQXN5bmNMb2NhbFN0b3JhZ2UiLCJCcm93c2VyVGltZXIiLCJ0aW1lb3V0IiwidGltZW91dElkIiwidGltZXIiLCJFdmVudEVtaXR0ZXJEZWxlZ2F0ZSIsIkFnZW50SG9va3MiLCJSdW50aW1lRXZlbnRFbWl0dGVyIiwiUnVuSG9va3MiLCJPUEVOQUlfREVGQVVMVF9NT0RFTF9FTlZfVkFSSUFCTEVfTkFNRSIsImdwdDVSZWFzb25pbmdTZXR0aW5nc1JlcXVpcmVkIiwibW9kZWxOYW1lIiwiaXNHcHQ1RGVmYXVsdCIsImdldERlZmF1bHRNb2RlbCIsImdldERlZmF1bHRNb2RlbFNldHRpbmdzIiwibW9kZWwiLCJfbW9kZWwiLCJnZXRUcmFuc2Zlck1lc3NhZ2UiLCJkZWZhdWx0SGFuZG9mZlRvb2xOYW1lIiwiZGVmYXVsdEhhbmRvZmZUb29sRGVzY3JpcHRpb24iLCJIYW5kb2ZmIiwib25JbnZva2VIYW5kb2ZmIiwiaGFuZG9mZiIsImNvbmZpZyIsImhhc09uSGFuZG9mZiIsImhhc0lucHV0VHlwZSIsImlucHV0SnNvblN0cmluZyIsImFkZEVycm9yVG9DdXJyZW50U3BhbiIsImdldEhhbmRvZmYiLCJnZXRMYXN0VGV4dEZyb21PdXRwdXRNZXNzYWdlIiwib3V0cHV0TWVzc2FnZSIsImxhc3RJdGVtIiwiZ2V0T3V0cHV0VGV4dCIsImFnZW50VG9vbFJ1blJlc3VsdHMiLCJzYXZlQWdlbnRUb29sUnVuUmVzdWx0IiwidG9vbENhbGwiLCJydW5SZXN1bHQiLCJjb25zdW1lQWdlbnRUb29sUnVuUmVzdWx0IiwiQWdlbnRBc1Rvb2xOZWVkQXBwcm92YWxTY2hhbWUiLCJfQWdlbnQiLCJvdXRwdXRUeXBlcyIsInRvb2xOYW1lIiwidG9vbERlc2NyaXB0aW9uIiwiY3VzdG9tT3V0cHV0RXh0cmFjdG9yIiwicnVuQ29uZmlnIiwicnVuT3B0aW9ucyIsIm9uU3RyZWFtIiwiZXZlbnRIYW5kbGVycyIsImVtaXRFdmVudCIsInNwZWNpZmljIiwid2lsZGNhcmQiLCJjYW5kaWRhdGVzIiwiYWdlbnRUb29sIiwicnVubmVyIiwiUnVubmVyIiwic2hvdWxkU3RyZWFtIiwic3RyZWFtUGF5bG9hZCIsInN0cmVhbVJlc3VsdCIsImNvbXBsZXRlZFJlc3VsdCIsInVzZXNTdG9wQXRUb29sTmFtZXMiLCJvdXRwdXRUZXh0Iiwic2V0IiwiZW5hYmxlZFRvb2xzIiwibWF5YmVJc0VuYWJsZWQiLCJoYW5kb2ZmcyIsIkFnZW50IiwiZGVmaW5lSW5wdXRHdWFyZHJhaWwiLCJleGVjdXRlIiwicnVuSW5QYXJhbGxlbCIsImRlZmluZU91dHB1dEd1YXJkcmFpbCIsImdldERlZmF1bHRNb2RlbFByb3ZpZGVyIiwiU2hhcmVkQmFzZSIsIkl0ZW1CYXNlIiwiUmVmdXNhbCIsIk91dHB1dFRleHQiLCJJbnB1dFRleHQiLCJSZWFzb25pbmdUZXh0IiwiSW5wdXRJbWFnZSIsInpcbiAgICAgICAgLy8gMS4gaW1hZ2UgZGF0YVxuICAgICAgICAuc3RyaW5nIiwiSW5wdXRGaWxlIiwielxuICAgICAgICAvLyAxLiBmaWxlIGRhdGFcbiAgICAgICAgLnN0cmluZyIsIkF1ZGlvQ29udGVudCIsInpcbiAgICAgICAgLnN0cmluZyIsIkltYWdlQ29udGVudCIsIlRvb2xPdXRwdXRUZXh0IiwiSW1hZ2VEYXRhT2JqZWN0U2NoZW1hIiwielxuICAgICAgICAudW5pb24iLCJ6Lmluc3RhbmNlb2YiLCJJbWFnZVVybE9iamVjdFNjaGVtYSIsIkltYWdlRmlsZUlkT2JqZWN0U2NoZW1hIiwiSW1hZ2VPYmplY3RTY2hlbWEiLCJ6XG4gICAgLnVuaW9uIiwiRmlsZURhdGFPYmplY3RTY2hlbWEiLCJGaWxlVXJsT2JqZWN0U2NoZW1hIiwiRmlsZUlkT2JqZWN0U2NoZW1hIiwiRmlsZVJlZmVyZW5jZVNjaGVtYSIsInpTdHJpbmdXaXRoSGludHMiLCJfaGludHMiLCJUb29sT3V0cHV0SW1hZ2UiLCJUb29sT3V0cHV0RmlsZUNvbnRlbnQiLCJDb21wdXRlclRvb2xPdXRwdXQiLCJjb21wdXRlckFjdGlvbnMiLCJ6LmRpc2NyaW1pbmF0ZWRVbmlvbiIsInoubnVtYmVyIiwiei5lbnVtIiwiQXNzaXN0YW50Q29udGVudCIsIk1lc3NhZ2VCYXNlIiwiQXNzaXN0YW50TWVzc2FnZUl0ZW0iLCJVc2VyQ29udGVudCIsIlVzZXJNZXNzYWdlSXRlbSIsIlN5c3RlbU1lc3NhZ2VJdGVtIiwiSG9zdGVkVG9vbENhbGxJdGVtIiwiRnVuY3Rpb25DYWxsSXRlbSIsIlRvb2xDYWxsT3V0cHV0Q29udGVudCIsIlRvb2xDYWxsU3RydWN0dXJlZE91dHB1dCIsIkZ1bmN0aW9uQ2FsbFJlc3VsdEl0ZW0iLCJDb21wdXRlclVzZUNhbGxJdGVtIiwiQ29tcHV0ZXJDYWxsUmVzdWx0SXRlbSIsIlNoZWxsQWN0aW9uIiwiU2hlbGxDYWxsSXRlbSIsIlNoZWxsQ2FsbE91dGNvbWUiLCJTaGVsbENhbGxPdXRwdXRDb250ZW50IiwielxuICAgIC5vYmplY3QiLCJTaGVsbENhbGxSZXN1bHRJdGVtIiwiQXBwbHlQYXRjaE9wZXJhdGlvbkNyZWF0ZUZpbGUiLCJBcHBseVBhdGNoT3BlcmF0aW9uVXBkYXRlRmlsZSIsIkFwcGx5UGF0Y2hPcGVyYXRpb25EZWxldGVGaWxlIiwiQXBwbHlQYXRjaE9wZXJhdGlvbiIsIkFwcGx5UGF0Y2hDYWxsSXRlbSIsIkFwcGx5UGF0Y2hDYWxsUmVzdWx0SXRlbSIsIlRvb2xDYWxsSXRlbSIsIlJlYXNvbmluZ0l0ZW0iLCJDb21wYWN0aW9uSXRlbSIsIlVua25vd25JdGVtIiwiT3V0cHV0TW9kZWxJdGVtIiwiTW9kZWxJdGVtIiwiei51bmlvbiIsIlJlcXVlc3RVc2FnZURhdGEiLCJVc2FnZURhdGEiLCJTdHJlYW1FdmVudFRleHRTdHJlYW0iLCJTdHJlYW1FdmVudFJlc3BvbnNlU3RhcnRlZCIsIlN0cmVhbUV2ZW50UmVzcG9uc2VDb21wbGV0ZWQiLCJTdHJlYW1FdmVudEdlbmVyaWNJdGVtIiwiUmVxdWVzdFVzYWdlIiwiaW5wdXRUb2tlbnNEZXRhaWxzIiwib3V0cHV0VG9rZW5zRGV0YWlscyIsIlVzYWdlIiwicmVxdWVzdFVzYWdlRW50cmllcyIsIm5vcm1hbGl6ZWRSZXF1ZXN0VXNhZ2VFbnRyaWVzIiwibmV3VXNhZ2UiLCJSdW5Db250ZXh0IiwiX2FwcHJvdmFscyIsIl9fcHJpdmF0ZVNldCIsImFwcHJvdmFscyIsImFwcHJvdmFsIiwiY2FsbElkIiwiYXBwcm92YWxFbnRyeSIsImluZGl2aWR1YWxDYWxsQXBwcm92YWwiLCJpbmRpdmlkdWFsQ2FsbFJlamVjdGlvbiIsImFwcHJvdmFsSXRlbSIsImFsd2F5c0FwcHJvdmUiLCJhbHdheXNSZWplY3QiLCJpc0NvbXB1dGVySW5zdGFuY2UiLCJzZXJpYWxpemVUb29sIiwic2VyaWFsaXplSGFuZG9mZiIsIlJ1bkl0ZW1CYXNlIiwiUnVuTWVzc2FnZU91dHB1dEl0ZW0iLCJyYXdJdGVtIiwicGFydCIsIlJ1blRvb2xDYWxsSXRlbSIsIlJ1blRvb2xDYWxsT3V0cHV0SXRlbSIsIlJ1blJlYXNvbmluZ0l0ZW0iLCJSdW5IYW5kb2ZmQ2FsbEl0ZW0iLCJSdW5IYW5kb2ZmT3V0cHV0SXRlbSIsInNvdXJjZUFnZW50IiwidGFyZ2V0QWdlbnQiLCJSdW5Ub29sQXBwcm92YWxJdGVtIiwiX3dpdGhTcGFuRmFjdG9yeSIsImNyZWF0ZVNwYW4iLCJ3aXRoTmV3U3BhbkNvbnRleHQiLCJzZXRDdXJyZW50U3BhbiIsInJlc2V0Q3VycmVudFNwYW4iLCJjcmVhdGVBZ2VudFNwYW4iLCJnZXRHbG9iYWxUcmFjZVByb3ZpZGVyIiwiY3JlYXRlRnVuY3Rpb25TcGFuIiwid2l0aEZ1bmN0aW9uU3BhbiIsImNyZWF0ZUhhbmRvZmZTcGFuIiwid2l0aEhhbmRvZmZTcGFuIiwiY3JlYXRlR3VhcmRyYWlsU3BhbiIsIndpdGhHdWFyZHJhaWxTcGFuIiwiY3JlYXRlTUNQTGlzdFRvb2xzU3BhbiIsImVuY29kZVVpbnQ4QXJyYXlUb0Jhc2U2NCIsImdsb2JhbEJ1ZmZlciIsImJpbmFyeSIsImNoYXJzIiwiYzEiLCJjMiIsImMzIiwiZW5jMSIsImVuYzIiLCJlbmMzIiwiZW5jNCIsIlJ1blJhd01vZGVsU3RyZWFtRXZlbnQiLCJSdW5JdGVtU3RyZWFtRXZlbnQiLCJSdW5BZ2VudFVwZGF0ZWRTdHJlYW1FdmVudCIsImlzT3BlbkFJUmVzcG9uc2VzQ29tcGFjdGlvbkF3YXJlU2Vzc2lvbiIsInNlc3Npb24iLCJpc0FwcHJvdmFsSXRlbUxpa2UiLCJpdGVtVHlwZSIsImdldEFwcHJvdmFsSWRlbnRpdHkiLCJwcm92aWRlckRhdGEiLCJhZ2VudE5hbWUiLCJmb3JtYXRGaW5hbE91dHB1dFR5cGVFcnJvciIsInouWm9kRXJyb3IiLCJpc3N1ZVBhdGhQYXJ0cyIsImlzc3VlUGF0aCIsInRydW5jYXRlRm9yRGV2ZWxvcGVyIiwidHJpbW1lZCIsInByb2Nlc3NNb2RlbFJlc3BvbnNlIiwibW9kZWxSZXNwb25zZSIsInJ1bkhhbmRvZmZzIiwicnVuRnVuY3Rpb25zIiwicnVuQ29tcHV0ZXJBY3Rpb25zIiwicnVuU2hlbGxBY3Rpb25zIiwicnVuQXBwbHlQYXRjaEFjdGlvbnMiLCJydW5NQ1BBcHByb3ZhbFJlcXVlc3RzIiwidG9vbHNVc2VkIiwiaGFuZG9mZk1hcCIsImZ1bmN0aW9uTWFwIiwiY29tcHV0ZXJUb29sIiwic2hlbGxUb29sIiwiYXBwbHlQYXRjaFRvb2wiLCJtY3BUb29sTWFwIiwibWNwU2VydmVyTGFiZWwiLCJtY3BTZXJ2ZXJUb29sIiwiZnVuY3Rpb25Ub29sIiwibmV4dFN0ZXBTY2hlbWEiLCJTaW5nbGVTdGVwUmVzdWx0Iiwib3JpZ2luYWxJbnB1dCIsInByZVN0ZXBJdGVtcyIsIm5ld1N0ZXBJdGVtcyIsIm5leHRTdGVwIiwibWF5YmVSZXNldFRvb2xDaG9pY2UiLCJ0b29sVXNlVHJhY2tlciIsIm1vZGVsU2V0dGluZ3MiLCJyZXNvbHZlSW50ZXJydXB0ZWRUdXJuIiwib3JpZ2luYWxQcmVTdGVwSXRlbXMiLCJuZXdSZXNwb25zZSIsInByb2Nlc3NlZFJlc3BvbnNlIiwiZnVuY3Rpb25DYWxsSWRzIiwicGVuZGluZ0FwcHJvdmFsSXRlbXMiLCJwZW5kaW5nQXBwcm92YWxJZGVudGl0aWVzIiwiaWRlbnRpdHkiLCJyZXdpbmRDb3VudCIsImZ1bmN0aW9uVG9vbFJ1bnMiLCJydW4iLCJmdW5jdGlvblJlc3VsdHMiLCJleGVjdXRlRnVuY3Rpb25Ub29sQ2FsbHMiLCJjb21wdXRlclJlc3VsdHMiLCJleGVjdXRlQ29tcHV0ZXJBY3Rpb25zIiwib3JpZ2luYWxQcmVTdGVwSXRlbVNldCIsIm5ld0l0ZW1zIiwibmV3SXRlbXNTZXQiLCJhcHBlbmRJZk5ldyIsIm1jcEFwcHJvdmFsUnVucyIsInBlbmRpbmdIb3N0ZWRNQ1BBcHByb3ZhbHMiLCJwZW5kaW5nSG9zdGVkTUNQQXBwcm92YWxJZHMiLCJhcHByb3ZhbFJlcXVlc3RJZCIsImFwcHJvdmVkIiwicmVzcG9uc2VJdGVtIiwiY29tcGxldGVkU3RlcCIsIm1heWJlQ29tcGxldGVUdXJuRnJvbVRvb2xSZXN1bHRzIiwicmVzb2x2ZVR1cm5BZnRlck1vZGVsUmVzcG9uc2UiLCJzZWVuSXRlbXMiLCJzaGVsbFJlc3VsdHMiLCJhcHBseVBhdGNoUmVzdWx0cyIsImV4ZWN1dGVTaGVsbEFjdGlvbnMiLCJleGVjdXRlQXBwbHlQYXRjaE9wZXJhdGlvbnMiLCJhcHByb3ZhbFJlcXVlc3QiLCJ0b29sRGF0YSIsInJlcXVlc3REYXRhIiwiYXBwcm92YWxSZXN1bHQiLCJhcHByb3ZhbFJlc3BvbnNlRGF0YSIsImV4ZWN1dGVIYW5kb2ZmQ2FsbHMiLCJtZXNzYWdlSXRlbXMiLCJwb3RlbnRpYWxGaW5hbE91dHB1dCIsIm91dHB1dEVycm9yTWVzc2FnZSIsInRvb2xPdXRjb21lIiwiY2hlY2tGb3JGaW5hbE91dHB1dEZyb21Ub29scyIsImdldFRvb2xDYWxsT3V0cHV0SXRlbSIsIm1heWJlU3RydWN0dXJlZE91dHB1dHMiLCJub3JtYWxpemVTdHJ1Y3R1cmVkVG9vbE91dHB1dHMiLCJzdHJ1Y3R1cmVkSXRlbXMiLCJjb252ZXJ0U3RydWN0dXJlZFRvb2xPdXRwdXRUb0lucHV0SXRlbSIsIm5vcm1hbGl6ZUZpbGVWYWx1ZSIsImRpcmVjdEZpbGUiLCJub3JtYWxpemVkT2JqZWN0Iiwibm9ybWFsaXplRmlsZU9iamVjdENhbmRpZGF0ZSIsImxlZ2FjeVZhbHVlIiwibm9ybWFsaXplTGVnYWN5RmlsZVZhbHVlIiwiaXNSZWNvcmQiLCJkYXRhVmFsdWUiLCJoYXNTdHJpbmdEYXRhIiwiaGFzQmluYXJ5RGF0YSIsImlzTm9uRW1wdHlTdHJpbmciLCJyZWZlcmVuY2VkSWQiLCJmaWxlbmFtZSIsIm1lZGlhVHlwZSIsInRvSW5saW5lSW1hZ2VTdHJpbmciLCJhc0RhdGFVcmwiLCJ0b29sUnVucyIsInJ1blNpbmdsZVRvb2wiLCJ0b29sUnVuIiwicGFyc2VkQXJncyIsInJlc3BvbnNlIiwidG9vbE91dHB1dCIsImZ1bmN0aW9uUmVzdWx0IiwibmVzdGVkUnVuUmVzdWx0IiwibmVzdGVkSW50ZXJydXB0aW9ucyIsImVycm9yUmVzdWx0IiwiX3J1bkNvbXB1dGVyQWN0aW9uQW5kU2NyZWVuc2hvdCIsImFjdGlvbiIsInNjcmVlbnNob3QiLCJ0b0Vycm9yTWVzc2FnZSIsImFjdGlvbnMiLCJjdXN0b21Mb2dnZXIiLCJfbG9nZ2VyIiwiZGVjaXNpb24iLCJyZWplY3Rpb25PdXRwdXQiLCJzaGVsbE91dHB1dHMiLCJwcm92aWRlck1ldGEiLCJtYXhPdXRwdXRMZW5ndGgiLCJzaGVsbFJlc3VsdCIsImltYWdlVXJsIiwiYWN0dWFsSGFuZG9mZiIsImhhbmRvZmZTcGFuIiwibmV3QWdlbnQiLCJyZXF1ZXN0ZWRBZ2VudHMiLCJpbnB1dEZpbHRlciIsImhhbmRvZmZJbnB1dERhdGEiLCJOT1RfRklOQUxfT1VUUFVUIiwidG9vbFJlc3VsdHMiLCJpbnRlcnJ1cHRpb25zIiwiZmlyc3RUb29sUmVzdWx0IiwidG9vbFVzZUJlaGF2aW9yIiwic3RvcHBpbmdUb29sIiwiZ2V0UnVuSXRlbVN0cmVhbUV2ZW50TmFtZSIsImVucXVldWVSdW5JdGVtU3RyZWFtRXZlbnQiLCJpdGVtTmFtZSIsInN0cmVhbVN0ZXBJdGVtc1RvUnVuUmVzdWx0IiwiYWRkU3RlcFRvUnVuUmVzdWx0Iiwic2tpcHBlZEl0ZW1zIiwiQWdlbnRUb29sVXNlVHJhY2tlciIsIl9hZ2VudFRvVG9vbHMiLCJ0b0lucHV0SXRlbUxpc3QiLCJleHRyYWN0T3V0cHV0SXRlbXNGcm9tUnVuSXRlbXMiLCJub3JtYWxpemVJdGVtc0ZvclNlc3Npb25QZXJzaXN0ZW5jZSIsInNhbml0aXplVmFsdWVGb3JTZXNzaW9uIiwic3RyaXBUcmFuc2llbnRDYWxsSWRzIiwidG9VaW50OEFycmF5SWZCaW5hcnkiLCJ0b0RhdGFVcmxGcm9tQnl0ZXMiLCJpc1BsYWluT2JqZWN0IiwicmVjb3JkIiwibmV4dENvbnRleHQiLCJzbmFwc2hvdCIsInByb3RvIiwic2hvdWxkU3RyaXBJZCIsInNob3VsZFN0cmlwSWRGb3JUeXBlIiwicnVuQ29tcGFjdGlvbk9uU2Vzc2lvbiIsInJlc3BvbnNlSWQiLCJjb21wYWN0aW9uUmVzdWx0IiwidXNhZ2UiLCJzYXZlVG9TZXNzaW9uIiwic2Vzc2lvbklucHV0SXRlbXMiLCJpbnB1dEl0ZW1zIiwiYWxyZWFkeVBlcnNpc3RlZCIsIm5ld1J1bkl0ZW1zIiwib3V0cHV0SXRlbXMiLCJpdGVtc1RvU2F2ZSIsInNhbml0aXplZEl0ZW1zIiwic2F2ZVN0cmVhbUlucHV0VG9TZXNzaW9uIiwic2FuaXRpemVkSW5wdXQiLCJzYXZlU3RyZWFtUmVzdWx0VG9TZXNzaW9uIiwicHJlcGFyZUlucHV0SXRlbXNXaXRoU2Vzc2lvbiIsInNlc3Npb25JbnB1dENhbGxiYWNrIiwiaW5jbHVkZUhpc3RvcnlJblByZXBhcmVkSW5wdXQiLCJwcmVzZXJ2ZURyb3BwZWROZXdJdGVtcyIsImhpc3RvcnkiLCJuZXdJbnB1dEl0ZW1zIiwiaGlzdG9yeVNuYXBzaG90IiwibmV3SW5wdXRTbmFwc2hvdCIsImhpc3RvcnlDb3VudHMiLCJidWlsZEl0ZW1GcmVxdWVuY3lNYXAiLCJuZXdJbnB1dENvdW50cyIsImhpc3RvcnlSZWZzIiwiYnVpbGRJdGVtUmVmZXJlbmNlTWFwIiwibmV3SW5wdXRSZWZzIiwiYXBwZW5kZWQiLCJzZXNzaW9uSXRlbUtleSIsImNvbnN1bWVSZWZlcmVuY2UiLCJkZWNyZW1lbnRDb3VudCIsImhpc3RvcnlSZW1haW5pbmciLCJuZXdSZW1haW5pbmciLCJzdHJ1Y3R1cmVkIiwibm9ybWFsaXplZCIsIm5vcm1hbGl6ZVN0cnVjdHVyZWRUb29sT3V0cHV0IiwiaW1hZ2VTdHJpbmciLCJpbWFnZUZpbGVJZCIsImZhbGxiYWNrSW1hZ2VNZWRpYVR5cGUiLCJpbWFnZUZpZWxkIiwiaW1hZ2VPYmoiLCJpbmxpbmVNZWRpYVR5cGUiLCJjYW5kaWRhdGVJZCIsImZpbGVWYWx1ZSIsImNvdW50cyIsImxpc3QiLCJyZW1haW5pbmciLCJzZXNzaW9uU2VyaWFsaXphdGlvblJlcGxhY2VyIiwiQ1VSUkVOVF9TQ0hFTUFfVkVSU0lPTiIsIiRzY2hlbWFWZXJzaW9uIiwic2VyaWFsaXplZEFnZW50U2NoZW1hIiwiU2VyaWFsaXplZFNwYW4iLCJ6XG4gICAgICAgIC5vYmplY3QiLCJ6LmxhenkiLCJyZXF1ZXN0VXNhZ2VTY2hlbWEiLCJ1c2FnZVNjaGVtYSIsIm1vZGVsUmVzcG9uc2VTY2hlbWEiLCJwcm90b2NvbC5PdXRwdXRNb2RlbEl0ZW0iLCJpdGVtU2NoZW1hIiwicHJvdG9jb2wuQXNzaXN0YW50TWVzc2FnZUl0ZW0iLCJwcm90b2NvbC5Ub29sQ2FsbEl0ZW0iLCJwcm90b2NvbC5Ib3N0ZWRUb29sQ2FsbEl0ZW0iLCJwcm90b2NvbC5GdW5jdGlvbkNhbGxSZXN1bHRJdGVtIiwicHJvdG9jb2wuUmVhc29uaW5nSXRlbSIsInByb3RvY29sLkZ1bmN0aW9uQ2FsbEl0ZW0iLCJwcm90b2NvbC5TaGVsbENhbGxJdGVtIiwicHJvdG9jb2wuQXBwbHlQYXRjaENhbGxJdGVtIiwic2VyaWFsaXplZFRyYWNlU2NoZW1hIiwic2VyaWFsaXplZFByb2Nlc3NlZFJlc3BvbnNlU2NoZW1hIiwielxuICAgICAgICAuYXJyYXkiLCJndWFyZHJhaWxGdW5jdGlvbk91dHB1dFNjaGVtYSIsImlucHV0R3VhcmRyYWlsUmVzdWx0U2NoZW1hIiwib3V0cHV0R3VhcmRyYWlsUmVzdWx0U2NoZW1hIiwiU2VyaWFsaXplZFJ1blN0YXRlIiwicHJvdG9jb2wuTW9kZWxJdGVtIiwiUnVuU3RhdGUiLCJzdGFydGluZ0FnZW50IiwibWF4VHVybnMiLCJnZXRUdXJuSW5wdXQiLCJpbml0aWFsQWdlbnQiLCJwYXJzaW5nRXJyb3IiLCJqc29uUmVzdWx0IiwiY3VycmVudFNjaGVtYVZlcnNpb24iLCJzdGF0ZUpzb24iLCJhZ2VudE1hcCIsImJ1aWxkQWdlbnRNYXAiLCJjdXJyZW50QWdlbnQiLCJ0cmFjZSIsImRlc2VyaWFsaXplU3BhbiIsImRlc2VyaWFsaXplTW9kZWxSZXNwb25zZSIsImRlc2VyaWFsaXplSXRlbSIsImRlc2VyaWFsaXplUHJvY2Vzc2VkUmVzcG9uc2UiLCJxdWV1ZSIsInNlcmlhbGl6ZWRTcGFuIiwic3BhbkRhdGEiLCJwcmV2aW91c1NwYW4iLCJzZXJpYWxpemVkTW9kZWxSZXNwb25zZSIsInNlcmlhbGl6ZWRJdGVtIiwic2VyaWFsaXplZFByb2Nlc3NlZFJlc3BvbnNlIiwiY29tcHV0ZXJUb29scyIsInNoZWxsVG9vbHMiLCJhcHBseVBhdGNoVG9vbHMiLCJmdW5jdGlvbkNhbGwiLCJjb21wdXRlckFjdGlvbiIsInNoZWxsQWN0aW9uIiwiYXBwbHlQYXRjaEFjdGlvbiIsIl9SdW5uZXJfaW5zdGFuY2VzIiwicmVzb2x2ZWRPcHRpb25zIiwiY2FsbE1vZGVsSW5wdXRGaWx0ZXIiLCJoYXNDYWxsTW9kZWxJbnB1dEZpbHRlciIsImVmZmVjdGl2ZU9wdGlvbnMiLCJzZXJ2ZXJNYW5hZ2VzQ29udmVyc2F0aW9uIiwicmVzdW1pbmdGcm9tU3RhdGUiLCJzZXNzaW9uSW5wdXRPcmlnaW5hbFNuYXBzaG90Iiwic2Vzc2lvbklucHV0RmlsdGVyZWRTbmFwc2hvdCIsInNlc3Npb25JbnB1dFBlbmRpbmdXcml0ZUNvdW50cyIsInJlY29yZFNlc3Npb25JdGVtc0ZvclBlcnNpc3RlbmNlIiwic291cmNlSXRlbXMiLCJmaWx0ZXJlZEl0ZW1zIiwicGVuZGluZ1dyaXRlQ291bnRzIiwicGVyc2lzdGFibGVJdGVtcyIsInNvdXJjZU9jY3VycmVuY2VDb3VudHMiLCJuZXh0Q291bnQiLCJjb25zdW1lQW55UGVuZGluZ1dyaXRlU2xvdCIsImZpbHRlcmVkSXRlbSIsImFsbG9jYXRlZCIsInBlbmRpbmdPY2N1cnJlbmNlcyIsInNvdXJjZUtleSIsImdldEFnZW50SW5wdXRJdGVtS2V5IiwiZmlsdGVyZWRLZXkiLCJmaWx0ZXJlZFJlbWFpbmluZyIsInJlc29sdmVTZXNzaW9uSXRlbXNGb3JQZXJzaXN0ZW5jZSIsInByZXBhcmVkSW5wdXQiLCJwcmVwYXJlZCIsInNlc3Npb25JdGVtcyIsImVuc3VyZVN0cmVhbUlucHV0UGVyc2lzdGVkIiwicGVyc2lzdGVkIiwiaXRlbXNUb1BlcnNpc3QiLCJleGVjdXRlUnVuIiwiX19wcml2YXRlTWV0aG9kIiwicnVuSW5kaXZpZHVhbFN0cmVhbV9mbiIsInJ1bkluZGl2aWR1YWxOb25TdHJlYW1fZm4iLCJ3aXRoVHJhY2UiLCJnZXRPckNyZWF0ZVRyYWNlIiwiZ2V0SW5wdXRHdWFyZHJhaWxEZWZpbml0aW9uc19mbiIsInNwbGl0SW5wdXRHdWFyZHJhaWxzX2ZuIiwiZ3VhcmRyYWlscyIsImJsb2NraW5nIiwicGFyYWxsZWwiLCJndWFyZHJhaWwiLCJyZXNvbHZlTW9kZWxGb3JBZ2VudF9mbiIsImV4cGxpY3RseU1vZGVsU2V0IiwicmVzb2x2ZWRNb2RlbCIsInNlbGVjdE1vZGVsIiwic2Vzc2lvbklucHV0VXBkYXRlIiwiaXNSZXN1bWVkU3RhdGUiLCJERUZBVUxUX01BWF9UVVJOUyIsInNlcnZlckNvbnZlcnNhdGlvblRyYWNrZXIiLCJTZXJ2ZXJDb252ZXJzYXRpb25UcmFja2VyIiwiY29udGludWluZ0ludGVycnVwdGVkVHVybiIsInR1cm5SZXN1bHQiLCJSdW5SZXN1bHQiLCJhcnRpZmFjdHMiLCJwcmVwYXJlQWdlbnRBcnRpZmFjdHMiLCJpc1Jlc3VtaW5nRnJvbUludGVycnVwdGlvbiIsInBhcmFsbGVsR3VhcmRyYWlsUHJvbWlzZSIsInJ1bklucHV0R3VhcmRyYWlsc19mbiIsInR1cm5JbnB1dCIsInByZXBhcmVkQ2FsbCIsInByZXBhcmVNb2RlbENhbGxfZm4iLCJnZXRUcmFjaW5nIiwicnVuT3V0cHV0R3VhcmRyYWlsc19mbiIsInJ1blN0cmVhbUxvb3BfZm4iLCJoYW5kZWRJbnB1dFRvTW9kZWwiLCJzdHJlYW1JbnB1dFBlcnNpc3RlZCIsInBlcnNpc3RTdHJlYW1JbnB1dElmTmVlZGVkIiwiZ3VhcmRyYWlsRXJyb3IiLCJmaW5hbFJlc3BvbnNlIiwicHJlVG9vbEl0ZW1zIiwiU3RyZWFtZWRSdW5SZXN1bHQiLCJzdHJlYW1Mb29wUHJvbWlzZSIsImd1YXJkcmFpbHNPdmVycmlkZSIsImd1YXJkcmFpbEFyZ3MiLCJhZ2VudE91dHB1dCIsInJ1bk91dHB1dCIsImFkanVzdE1vZGVsU2V0dGluZ3NGb3JOb25HUFQ1UnVubmVyTW9kZWwiLCJzeXN0ZW1JbnN0cnVjdGlvbnMiLCJwcm9tcHQiLCJtb2RlbElucHV0IiwicGVyc2lzdGVkSXRlbXMiLCJmaWx0ZXJBcHBsaWVkIiwiYXBwbHlDYWxsTW9kZWxJbnB1dEZpbHRlciIsInByZXZpb3VzUmVzcG9uc2VJZCIsImNvbnZlcnNhdGlvbklkIiwiZ2VuZXJhdGVkSXRlbXMiLCJyYXdJdGVtcyIsInRvQWdlbnRJbnB1dExpc3QiLCJhZ2VudE1vZGVsIiwicnVuQ29uZmlnTW9kZWwiLCJ0cmFjaW5nRGlzYWJsZWQiLCJ0cmFjZUluY2x1ZGVTZW5zaXRpdmVEYXRhIiwiY2xvbmVJbnB1dEl0ZW1zIiwiY2xvbmVkIiwiY2xvbmVNYXAiLCJvcmlnaW5hbFBvb2wiLCJidWlsZEFnZW50SW5wdXRQb29sIiwiZmFsbGJhY2tPcmlnaW5hbHMiLCJyZW1vdmVGcm9tRmFsbGJhY2siLCJvcmlnaW5hbCIsInRha2VGYWxsYmFja09yaWdpbmFsIiwicmVtb3ZlQWdlbnRJbnB1dEZyb21Qb29sIiwibWF0Y2hlZEJ5Q29udGVudCIsInRha2VBZ2VudElucHV0RnJvbVBvb2wiLCJmYWxsYmFjayIsImNsb25lZEZpbHRlcmVkSW5wdXQiLCJtb2RlbFJlc3BvbnNlcyIsImxhdGVzdFJlc3BvbnNlIiwiaW5pdGlhbEl0ZW1zIiwiZGVsaXZlcmVkIiwiYWdlbnRNb2RlbFNldHRpbmdzIiwicnVubmVyTW9kZWwiLCJjb3BpZWRNb2RlbFNldHRpbmdzIiwiX2ciLCJfaCIsImhhbmRvZmZOYW1lcyIsImFnZW50SW5wdXRTZXJpYWxpemF0aW9uUmVwbGFjZXIiLCJwb29sIiwiUnVuUmVzdWx0QmFzZSIsInJlc3BvbnNlcyIsIl9lcnJvciIsIl9zaWduYWwiLCJfcmVhZGFibGVDb250cm9sbGVyIiwiX3JlYWRhYmxlU3RyZWFtIiwiX2NvbXBsZXRlZFByb21pc2UiLCJfY29tcGxldGVkUHJvbWlzZVJlc29sdmUiLCJfY29tcGxldGVkUHJvbWlzZVJlamVjdCIsIl9jYW5jZWxsZWQiLCJfc3RyZWFtTG9vcFByb21pc2UiLCJfUmVhZGFibGVTdHJlYW0iLCJjb250cm9sbGVyIiwicmVzb2x2ZSIsInJlamVjdCIsImhhbmRsZUFib3J0Iiwic3RyZWFtIiwicHJvbWlzZSIsIl9jb250ZXh0QXN5bmNMb2NhbFN0b3JhZ2UiLCJnZXRDb250ZXh0QXN5bmNMb2NhbFN0b3JhZ2UiLCJjdXJyZW50VHJhY2UiLCJfd3JhcEZ1bmN0aW9uV2l0aFRyYWNlTGlmZWN5Y2xlIiwibmV3VHJhY2UiLCJzcGFuRXJyb3IiLCJjbG9uZUN1cnJlbnRDb250ZXh0IiwiY3VycmVudENvbnRleHQiLCJjb3B5T2ZDb250ZXh0IiwiQ29uc29sZVNwYW5FeHBvcnRlciIsIkJhdGNoVHJhY2VQcm9jZXNzb3IiLCJleHBvcnRlciIsIm1heFF1ZXVlU2l6ZSIsIm1heEJhdGNoU2l6ZSIsInNjaGVkdWxlRGVsYXkiLCJleHBvcnRUcmlnZ2VyUmF0aW8iLCJfQmF0Y2hUcmFjZVByb2Nlc3Nvcl9pbnN0YW5jZXMiLCJfbWF4UXVldWVTaXplIiwiX21heEJhdGNoU2l6ZSIsIl9zY2hlZHVsZURlbGF5IiwiX2V4cG9ydFRyaWdnZXJTaXplIiwiX2V4cG9ydGVyIiwiX2J1ZmZlciIsIl90aW1lciIsIl90aW1lb3V0IiwiX2V4cG9ydEluUHJvZ3Jlc3MiLCJfdGltZW91dEFib3J0Q29udHJvbGxlciIsInJ1bkV4cG9ydExvb3BfZm4iLCJzYWZlQWRkSXRlbV9mbiIsIl90cmFjZSIsIl9zcGFuIiwiZXhwb3J0QmF0Y2hlc19mbiIsImZvcmNlIiwidG9FeHBvcnQiLCJiYXRjaCIsIk11bHRpVHJhY2luZ1Byb2Nlc3NvciIsIl9wcm9jZXNzb3JzIiwicHJvY2Vzc29yIiwicHJvY2Vzc29ycyIsIl9kZWZhdWx0RXhwb3J0ZXIiLCJfZGVmYXVsdFByb2Nlc3NvciIsImRlZmF1bHRFeHBvcnRlciIsImRlZmF1bHRQcm9jZXNzb3IiLCJ0aW1lSXNvIiwiZ2VuZXJhdGVUcmFjZUlkIiwiZ2VuZXJhdGVTcGFuSWQiLCJyZW1vdmVQcml2YXRlRmllbGRzIiwiX1NwYW4iLCJfZGF0YSIsIl90cmFjZUlkIiwiX3NwYW5JZCIsIl9wYXJlbnRJZCIsIl9wcm9jZXNzb3IiLCJfc3RhcnRlZEF0IiwiX2VuZGVkQXQiLCJfcHJldmlvdXNTcGFuIiwiU3BhbiIsIk5vb3BTcGFuIiwiX1RyYWNlIiwiX3N0YXJ0ZWQiLCJUcmFjZSIsIk5vb3BUcmFjZSIsIlRyYWNlUHJvdmlkZXIiLCJfVHJhY2VQcm92aWRlcl9pbnN0YW5jZXMiLCJfbXVsdGlQcm9jZXNzb3IiLCJfZGlzYWJsZWQiLCJhZGRDbGVhbnVwTGlzdGVuZXJzX2ZuIiwiZGlzYWJsZWQiLCJ0cmFjZU9wdGlvbnMiLCJ0cmFjZUlkIiwic3Bhbk9wdGlvbnMiLCJwYXJlbnRJZCIsImNsZWFudXAiLCJoYXNPdGhlckxpc3RlbmVyc0ZvclNpZ25hbHMiLCJyZWFzb24iLCJoYXNPdGhlckxpc3RlbmVyc0ZvckV2ZW50cyIsIkdMT0JBTF9UUkFDRV9QUk9WSURFUiIsImFkZFRyYWNlUHJvY2Vzc29yIiwiYmFzZTY0VG9BcnJheUJ1ZmZlciIsImJpbmFyeVN0cmluZyIsImFycmF5QnVmZmVyVG9CYXNlNjQiLCJhcnJheUJ1ZmZlciIsImdldExhc3RUZXh0RnJvbUF1ZGlvT3V0cHV0TWVzc2FnZSIsImxhc3RDb250ZW50SXRlbSIsImRpZmZSZWFsdGltZUhpc3RvcnkiLCJvbGRIaXN0b3J5IiwibmV3SGlzdG9yeSIsInJlbW92YWxzIiwiYWRkaXRpb25zIiwib2xkSXRlbSIsInVwZGF0ZXMiLCJoYXNXZWJSVENTdXBwb3J0IiwicmVtb3ZlQXVkaW9Gcm9tQ29udGVudCIsInByZXNlcnZlQXNzaXN0YW50QXVkaW9UcmFuc2NyaXB0cyIsIm1lcmdlZENvbnRlbnQiLCJwcmV2aW91c0VudHJ5IiwidXBkYXRlUmVhbHRpbWVIaXN0b3J5Iiwic2hvdWxkSW5jbHVkZUF1ZGlvRGF0YSIsInVwZGF0ZWRDb250ZW50IiwibmV3RXZlbnQiLCJleGlzdGluZ0luZGV4IiwiZXhpc3RpbmdJdGVtIiwibWVyZ2VkRXZlbnQiLCJpZHgiLCJwcmV2SW5kZXgiLCJIRUFERVJTIiwiV0VCU09DS0VUX01FVEEiLCJyZWFsdGltZUFwcHJvdmFsSXRlbVRvQXBwcm92YWxJdGVtIiwiYXBwcm92YWxJdGVtVG9SZWFsdGltZUFwcHJvdmFsSXRlbSIsIml0ZW1JZCIsInNlcnZlckxhYmVsIiwiUmVhbHRpbWVBZ2VudCIsImdldFJlYWx0aW1lR3VhcmRyYWlsU2V0dGluZ3MiLCJzZXR0aW5ncyIsImRlZmluZVJlYWx0aW1lT3V0cHV0R3VhcmRyYWlsIiwicG9saWN5SGludElucHV0IiwiYmFzZUd1YXJkcmFpbCIsInBvbGljeUhpbnQiLCJnZXRSZWFsdGltZUd1YXJkcmFpbEZlZWRiYWNrTWVzc2FnZSIsImlzRGVmaW5lZCIsImlzRGVwcmVjYXRlZENvbmZpZyIsInRvTmV3U2Vzc2lvbkNvbmZpZyIsImlucHV0Q29uZmlnIiwibm9ybWFsaXplQXVkaW9Gb3JtYXQiLCJyZXF1ZXN0ZWRPdXRwdXRWb2ljZSIsIm91dHB1dENvbmZpZyIsImYiLCJyZWFsdGltZU1lc3NhZ2VJdGVtU2NoZW1hIiwicmVhbHRpbWVUb29sQ2FsbEl0ZW0iLCJyZWFsdGltZU1jcENhbGxJdGVtIiwicmVhbHRpbWVNY3BDYWxsQXBwcm92YWxSZXF1ZXN0SXRlbSIsInJlYWx0aW1lUmVzcG9uc2UiLCJ6XG4gICAgICAgICAgICAub2JqZWN0IiwielxuICAgICAgICAuZW51bSIsImNvbnZlcnNhdGlvbkl0ZW1Db250ZW50U2NoZW1hIiwiY29udmVyc2F0aW9uSXRlbVNjaGVtYSIsImNvbnZlcnNhdGlvbkNyZWF0ZWRFdmVudFNjaGVtYSIsImNvbnZlcnNhdGlvbkl0ZW1BZGRlZEV2ZW50U2NoZW1hIiwiY29udmVyc2F0aW9uSXRlbURvbmVFdmVudFNjaGVtYSIsImNvbnZlcnNhdGlvbkl0ZW1EZWxldGVkRXZlbnRTY2hlbWEiLCJjb252ZXJzYXRpb25JdGVtSW5wdXRBdWRpb1RyYW5zY3JpcHRpb25Db21wbGV0ZWRFdmVudFNjaGVtYSIsImNvbnZlcnNhdGlvbkl0ZW1JbnB1dEF1ZGlvVHJhbnNjcmlwdGlvbkRlbHRhRXZlbnRTY2hlbWEiLCJjb252ZXJzYXRpb25JdGVtSW5wdXRBdWRpb1RyYW5zY3JpcHRpb25GYWlsZWRFdmVudFNjaGVtYSIsImNvbnZlcnNhdGlvbkl0ZW1SZXRyaWV2ZWRFdmVudFNjaGVtYSIsImNvbnZlcnNhdGlvbkl0ZW1UcnVuY2F0ZWRFdmVudFNjaGVtYSIsImNvbnZlcnNhdGlvbkl0ZW1DcmVhdGVFdmVudFNjaGVtYSIsImNvbnZlcnNhdGlvbkl0ZW1EZWxldGVFdmVudFNjaGVtYSIsImNvbnZlcnNhdGlvbkl0ZW1SZXRyaWV2ZUV2ZW50U2NoZW1hIiwiY29udmVyc2F0aW9uSXRlbVRydW5jYXRlRXZlbnRTY2hlbWEiLCJlcnJvckV2ZW50U2NoZW1hIiwiaW5wdXRBdWRpb0J1ZmZlckNsZWFyZWRFdmVudFNjaGVtYSIsImlucHV0QXVkaW9CdWZmZXJBcHBlbmRFdmVudFNjaGVtYSIsImlucHV0QXVkaW9CdWZmZXJDbGVhckV2ZW50U2NoZW1hIiwiaW5wdXRBdWRpb0J1ZmZlckNvbW1pdEV2ZW50U2NoZW1hIiwiaW5wdXRBdWRpb0J1ZmZlckNvbW1pdHRlZEV2ZW50U2NoZW1hIiwiaW5wdXRBdWRpb0J1ZmZlclNwZWVjaFN0YXJ0ZWRFdmVudFNjaGVtYSIsImlucHV0QXVkaW9CdWZmZXJTcGVlY2hTdG9wcGVkRXZlbnRTY2hlbWEiLCJvdXRwdXRBdWRpb0J1ZmZlclN0YXJ0ZWRFdmVudFNjaGVtYSIsIm91dHB1dEF1ZGlvQnVmZmVyU3RvcHBlZEV2ZW50U2NoZW1hIiwib3V0cHV0QXVkaW9CdWZmZXJDbGVhcmVkRXZlbnRTY2hlbWEiLCJyYXRlTGltaXRzVXBkYXRlZEV2ZW50U2NoZW1hIiwicmVzcG9uc2VBdWRpb0RlbHRhRXZlbnRTY2hlbWEiLCJyZXNwb25zZUF1ZGlvRG9uZUV2ZW50U2NoZW1hIiwicmVzcG9uc2VBdWRpb1RyYW5zY3JpcHREZWx0YUV2ZW50U2NoZW1hIiwicmVzcG9uc2VBdWRpb1RyYW5zY3JpcHREb25lRXZlbnRTY2hlbWEiLCJyZXNwb25zZUNvbnRlbnRQYXJ0QWRkZWRFdmVudFNjaGVtYSIsInJlc3BvbnNlQ29udGVudFBhcnREb25lRXZlbnRTY2hlbWEiLCJyZXNwb25zZUNyZWF0ZWRFdmVudFNjaGVtYSIsInJlc3BvbnNlRG9uZUV2ZW50U2NoZW1hIiwicmVzcG9uc2VGdW5jdGlvbkNhbGxBcmd1bWVudHNEZWx0YUV2ZW50U2NoZW1hIiwicmVzcG9uc2VGdW5jdGlvbkNhbGxBcmd1bWVudHNEb25lRXZlbnRTY2hlbWEiLCJyZXNwb25zZU91dHB1dEl0ZW1BZGRlZEV2ZW50U2NoZW1hIiwicmVzcG9uc2VPdXRwdXRJdGVtRG9uZUV2ZW50U2NoZW1hIiwicmVzcG9uc2VUZXh0RGVsdGFFdmVudFNjaGVtYSIsInJlc3BvbnNlVGV4dERvbmVFdmVudFNjaGVtYSIsInNlc3Npb25DcmVhdGVkRXZlbnRTY2hlbWEiLCJzZXNzaW9uVXBkYXRlZEV2ZW50U2NoZW1hIiwicmVzcG9uc2VDYW5jZWxFdmVudFNjaGVtYSIsInJlc3BvbnNlQ3JlYXRlRXZlbnRTY2hlbWEiLCJzZXNzaW9uVXBkYXRlRXZlbnRTY2hlbWEiLCJtY3BMaXN0VG9vbHNJblByb2dyZXNzRXZlbnRTY2hlbWEiLCJtY3BMaXN0VG9vbHNDb21wbGV0ZWRFdmVudFNjaGVtYSIsInJlc3BvbnNlTWNwQ2FsbEFyZ3VtZW50c0RlbHRhRXZlbnRTY2hlbWEiLCJyZXNwb25zZU1jcENhbGxBcmd1bWVudHNEb25lRXZlbnRTY2hlbWEiLCJyZXNwb25zZU1jcENhbGxJblByb2dyZXNzRXZlbnRTY2hlbWEiLCJyZXNwb25zZU1jcENhbGxDb21wbGV0ZWRFdmVudFNjaGVtYSIsIm1jcExpc3RUb29sc0ZhaWxlZEV2ZW50U2NoZW1hIiwiZ2VuZXJpY0V2ZW50U2NoZW1hIiwicmVhbHRpbWVTZXJ2ZXJFdmVudFNjaGVtYSIsInBhcnNlUmVhbHRpbWVFdmVudCIsInJhdyIsImdlbmVyaWNQYXJzZWQiLCJERUZBVUxUX09QRU5BSV9SRUFMVElNRV9NT0RFTCIsIkRFRkFVTFRfT1BFTkFJX1JFQUxUSU1FX1NFU1NJT05fQ09ORklHIiwiX09wZW5BSVJlYWx0aW1lQmFzZSIsIl9hcGlLZXkiLCJfdHJhY2luZ0NvbmZpZyIsIl9yYXdTZXNzaW9uQ29uZmlnIiwiYXBpS2V5IiwiaXNHZW5lcmljIiwiaW5wdXRUb2tlbnMiLCJvdXRwdXRUb2tlbnMiLCJ0b3RhbFRva2VucyIsInByZXZpb3VzSXRlbUlkIiwibWNwQXBwcm92YWxSZXF1ZXN0IiwibWNwQ2FsbCIsInJlYWx0aW1lSXRlbSIsIm90aGVyRXZlbnREYXRhIiwidHJpZ2dlclJlc3BvbnNlIiwiaW1hZ2UiLCJuZXdDb25maWciLCJzZXNzaW9uRGF0YSIsIl9qIiwiX2kiLCJfbCIsIl9uIiwiX20iLCJfcCIsIl9vIiwiX3IiLCJfcSIsIl90IiwiX3MiLCJfdiIsIl91IiwiX3ciLCJfeiIsIl95IiwiX0IiLCJfQSIsImNyZWF0ZVJlc3BvbnNlIiwiY3JlYXRlX3Jlc3BvbnNlIiwiZWFnZXJuZXNzIiwiaW50ZXJydXB0UmVzcG9uc2UiLCJpbnRlcnJ1cHRfcmVzcG9uc2UiLCJwcmVmaXhQYWRkaW5nTXMiLCJwcmVmaXhfcGFkZGluZ19tcyIsInNpbGVuY2VEdXJhdGlvbk1zIiwic2lsZW5jZV9kdXJhdGlvbl9tcyIsInRocmVzaG9sZCIsImlkbGVUaW1lb3V0TXMiLCJpZGxlX3RpbWVvdXRfbXMiLCJ0cmFjaW5nQ29uZmlnIiwic3RhcnRSZXNwb25zZSIsImF1ZGlvIiwiY29tbWl0IiwicmVtb3ZhbElkcyIsInVwZGF0ZSIsImFkZGl0aW9uc0FuZFVwZGF0ZXMiLCJhZGRpdGlvbiIsIml0ZW1FbnRyeSIsIk9wZW5BSVJlYWx0aW1lQmFzZSIsIk9wZW5BSVJlYWx0aW1lV2ViUlRDIiwiX3VybCIsIl9zdGF0ZSIsIl91c2VJbnNlY3VyZUFwaUtleSIsIl9vbmdvaW5nUmVzcG9uc2UiLCJfbXV0ZWQiLCJiYXNlVXJsIiwiaXNDbGllbnRLZXkiLCJ1c2VyU2Vzc2lvbkNvbmZpZyIsImNvbm5lY3Rpb25VcmwiLCJwZWVyQ29ubmVjdGlvbiIsImRhdGFDaGFubmVsIiwiYXR0YWNoQ29ubmVjdGlvblN0YXRlSGFuZGxlciIsImNvbm5lY3Rpb24iLCJhdWRpb0VsZW1lbnQiLCJvcmlnaW5hbFBlZXJDb25uZWN0aW9uIiwib2ZmZXIiLCJzZHBSZXNwb25zZSIsImFuc3dlciIsIm11dGVkIiwic2VuZGVyIiwiV2ViU29ja2V0IiwiT3BlbkFJUmVhbHRpbWVXZWJTb2NrZXQiLCJfT3BlbkFJUmVhbHRpbWVXZWJTb2NrZXRfaW5zdGFuY2VzIiwiX2RlZmF1bHRVcmwiLCJfY3VycmVudEl0ZW1JZCIsIl9jdXJyZW50QXVkaW9Db250ZW50SW5kZXgiLCJfY3JlYXRlV2ViU29ja2V0IiwiX3NraXBPcGVuRXZlbnRMaXN0ZW5lcnMiLCJhdWRpb0V2ZW50IiwicmVzZXRBdWRpb1BsYXliYWNrU3RhdGVfZm4iLCJ1cmwiLCJzZXNzaW9uQ29uZmlnIiwic2V0dXBXZWJTb2NrZXRfZm4iLCJlbGFwc2VkVGltZSIsImNhbmNlbE9uZ29pbmdSZXNwb25zZSIsImxlbmd0aCIsImF1ZGlvX2VuZF9tcyIsIndzIiwid2Vic29ja2V0QXJndW1lbnRzIiwib25Tb2NrZXRPcGVuUmVhZHkiLCJidWZmIiwiZm10IiwicmF0ZSIsImF1dG9tYXRpY1Jlc3BvbnNlQ2FuY2VsbGF0aW9uRW5hYmxlZCIsIkJBQ0tHUk9VTkRfUkVTVUxUX1NZTUJPTCIsImJhY2tncm91bmRSZXN1bHQiLCJpc0JhY2tncm91bmRSZXN1bHQiLCJpc1ZhbGlkUmVhbHRpbWVUb29sIiwidG9SZWFsdGltZVRvb2xEZWZpbml0aW9uIiwic2VydmVyVXJsIiwiY2xvbmVEZWZhdWx0U2Vzc2lvbkNvbmZpZyIsIl9SZWFsdGltZVNlc3Npb24iLCJfUmVhbHRpbWVTZXNzaW9uX2luc3RhbmNlcyIsIl90cmFuc3BvcnQiLCJfY3VycmVudEFnZW50IiwiX2N1cnJlbnRUb29scyIsIl9vdXRwdXRHdWFyZHJhaWxzIiwiX291dHB1dEd1YXJkcmFpbFNldHRpbmdzIiwiX3RyYW5zY3JpYmVkVGV4dERlbHRhcyIsIl9oaXN0b3J5IiwiX3Nob3VsZEluY2x1ZGVBdWRpb0RhdGEiLCJfaW50ZXJydXB0ZWRCeUd1YXJkcmFpbCIsIl9hdWRpb1N0YXJ0ZWQiLCJfYWxsTWNwVG9vbHNCeVNlcnZlciIsIl9hdmFpbGFibGVNY3BUb29scyIsIl9sYXN0U2Vzc2lvbkNvbmZpZyIsIl9hdXRvbWF0aWNhbGx5VHJpZ2dlclJlc3BvbnNlRm9yTWNwVG9vbENhbGxzIiwib3ZlcnJpZGVzIiwic2V0Q3VycmVudEFnZW50X2ZuIiwiZ2V0U2Vzc2lvbkNvbmZpZ19mbiIsInNldEV2ZW50TGlzdGVuZXJzX2ZuIiwidXBkYXRlZEhpc3RvcnkiLCJoYW5kbGVGdW5jdGlvblRvb2xDYWxsX2ZuIiwiaGFuZG9mZlRvb2xzIiwiaGFzVG9vbHNEZWZpbmVkIiwiaGFzSGFuZG9mZnNEZWZpbmVkIiwidXBkYXRlQXZhaWxhYmxlTWNwVG9vbHNfZm4iLCJhZGRpdGlvbmFsQ29uZmlnIiwib3ZlcnJpZGVzQ29uZmlnIiwib3B0aW9uc0NvbmZpZyIsImluc3RydWN0aW9ucyIsImdldEF1ZGlvT3V0cHV0Vm9pY2VPdmVycmlkZSIsImF1ZGlvQ29uZmlnIiwiYXVkaW9PdXRwdXRWb2ljZU92ZXJyaWRlIiwidG9wTGV2ZWxWb2ljZU92ZXJyaWRlIiwicmVzb2x2ZWRWb2ljZSIsImZ1bGxDb25maWciLCJoYW5kbGVIYW5kb2ZmX2ZuIiwiaGFuZGxlRnVuY3Rpb25DYWxsX2ZuIiwiZW5hYmxlZEhhbmRvZmZzIiwiZnVuY3Rpb25Ub29sTWFwIiwicG9zc2libGVIYW5kb2ZmIiwiZmlyc3RUcmlwd2lyZVRyaWdnZXJlZCIsImZlZWRiYWNrVGV4dCIsImNvbXBsZXRlZEV2ZW50IiwidGV4dE91dHB1dCIsImxhc3RSdW5JbmRleCIsImxhc3RJdGVtSWQiLCJkZWx0YSIsIm5ld1RleHQiLCJuZXdSdW5JbmRleCIsImlzTmV3IiwiYWRkZWRJdGVtIiwiYWN0aXZlTWNwQ29uZmlncyIsImFsbG93ZWRGcm9tQ29uZmlnIiwiY2ZnIiwiZGVkdXBCeU5hbWUiLCJwcmV2IiwiUmVhbHRpbWVTZXNzaW9uIiwiT3BlbkFJUmVhbHRpbWVTSVAiLCJfYXVkaW8iLCJ1dGlscyIsInV0aWxJbXBvcnQuYmFzZTY0VG9BcnJheUJ1ZmZlciIsInV0aWxJbXBvcnQuYXJyYXlCdWZmZXJUb0Jhc2U2NCIsInV0aWxJbXBvcnQuZ2V0TGFzdFRleHRGcm9tQXVkaW9PdXRwdXRNZXNzYWdlIl0sIm1hcHBpbmdzIjoiMm1DQUNPLE1BQU1BLEdBQVcsQ0FFcEIsUUFBVyxPQUtmLEVDUk8sZUFBZUMsR0FBWUMsRUFBSSxDQUNsQyxHQUFJLENBQ0EsTUFBTyxDQUFDLEtBQU0sTUFBTUEsR0FBSSxDQUM1QixPQUNPQyxFQUFPLENBQ1YsTUFBTyxDQUFDQSxFQUFPLElBQUksQ0FDdkIsQ0FDSixDQ0tPLFNBQVNDLEdBQWNDLEVBQVMsQ0FDbkMsTUFBTUMsRUFBZ0IsT0FBTyxPQUFPRCxDQUFPLEVBQUUsT0FBUUUsR0FBTSxPQUFPQSxHQUFNLFFBQVEsRUFJaEYsT0FIZSxPQUFPLFFBQVFGLENBQU8sRUFDaEMsT0FBTyxDQUFDLENBQUNHLEVBQUdDLENBQUMsSUFBTUgsRUFBYyxRQUFRLENBQUNFLENBQUMsSUFBTSxFQUFFLEVBQ25ELElBQUksQ0FBQyxDQUFDQyxFQUFHRixDQUFDLElBQU1BLENBQUMsQ0FFMUIsQ0NoQk8sTUFBTUcsRUFBYSxDQUN0QixhQUFjLENBQ1YsS0FBSyxLQUFPLElBQUksSUFDaEIsS0FBSyxPQUFTLElBQUksR0FDdEIsQ0FDQSxJQUFJQyxLQUFXQyxFQUFPLENBQ2xCLE1BQU1DLEVBQU9ELEVBQU0sQ0FBQyxFQUVwQixHQURBLEtBQUssS0FBSyxJ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QUssQ0FBQSxFQUMzRG4vQixFQUFVay9CLEVBQWtCQyxDQUFHLEVBQ3JDLFVBQVd4dUMsS0FBUXVQLEVBQ1hGLEdBQVcsQ0FBQ0EsRUFBUSxTQUFTclAsRUFBSyxJQUFJLEdBRXJDeXVDLEVBQVksSUFBSXp1QyxFQUFLLElBQUksR0FDMUJ5dUMsRUFBWSxJQUFJenVDLEVBQUssS0FBTUEsQ0FBSSxDQUczQyxDQUNBLE1BQU1nRSxFQUFPLE1BQU0sS0FBS3lxQyxFQUFZLE9BQU0sQ0FBRSxFQUN0Q0MsRUFBTzE5QixFQUFBLEtBQUsrNkIsS0FDRjJDLEVBQUssU0FBVzFxQyxFQUFLLFFBQ2pDLEtBQUssVUFBVTBxQyxFQUFLLElBQUtoZ0MsR0FBTUEsRUFBRSxJQUFJLEVBQUUsTUFBTSxJQUN6QyxLQUFLLFVBQVUxSyxFQUFLLElBQUswSyxHQUFNQSxFQUFFLElBQUksRUFBRSxNQUFNLEtBRWpEeU0sRUFBQSxLQUFLNHdCLEdBQXFCL25DLEdBQzFCLEtBQUssS0FBSyxvQkFBcUJnTixFQUFBLEtBQUsrNkIsR0FBa0IsRUFFOUQsRUE3aEJHLElBQU00QyxHQUFOekQsR0N4Q0EsTUFBTTBELFdBQTBCeEYsRUFBd0IsQ0FDM0QsWUFBWXpnRCxFQUFVLEdBQUksQ0FDdEIsTUFBTUEsQ0FBTyxDQUNqQixDQWNBLGFBQWEsbUJBQW1COGtCLEVBQU85a0IsRUFBVSxDQUFBLEVBQUl1akQsRUFBWSxDQUFBLEVBQUksQ0FDakUsTUFBTXBDLEVBQWdCLE1BQU02RSxHQUFnQiw0QkFBNEJsaEMsRUFBTzlrQixFQUFTdWpELENBQVMsRUFFakcsT0FEa0IsSUFBSTBDLEdBQWlCLEVBQ3RCLG9CQUFvQjlFLENBQWEsQ0FDdEQsQ0FDQSxVQUFVK0UsRUFBUTdsRCxFQUFXLEdBQUksQ0FHN0IsTUFBTSxJQUFJLE1BQU0sNkZBQTZGLENBQ2pILENBQ0EsTUFBTSxRQUFRTCxFQUFTLENBQ25CLEdBQUksQ0FBQ0EsRUFBUSxPQUNULE1BQU0sSUFBSTJaLEdBQVUsNkRBQTZELEVBRXJGLE1BQU0sTUFBTSxRQUFRM1osQ0FBTyxDQUMvQixDQUNKLENDaENZLE1BQUNtbUQsR0FBUSxDQUNqQixvQkFBcUJDLEdBQ3JCLG9CQUFxQkMsR0FDckIsa0NBQW1DQyxFQUN2QyIsInhfZ29vZ2xlX2lnbm9yZUxpc3QiOlsyLDMsNCw1LDYsNyw4LDksMTAsMTEsMTIsMTMsMTQsMTUsMTYsMTcsMTgsMTksMjAsMjEsMjIsMjMsMjQsMjUsMjYsMjcsMjgsMjksMzAsMzEsMzIsMzMsMzQsMzUsMzYsMzcsMzgsMzksNDAsNDEsNDIsNDMsNDQsNDUsNDYsNDcsNDgsNDksNTAsNTEsNTcsNTgsNTldfQ==
