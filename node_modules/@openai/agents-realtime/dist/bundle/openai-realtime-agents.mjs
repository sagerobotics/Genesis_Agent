var So = Object.defineProperty;
var zs = (n) => {
  throw TypeError(n);
};
var To = (n, e, t) => e in n ? So(n, e, { enumerable: !0, configurable: !0, writable: !0, value: t }) : n[e] = t;
var x = (n, e, t) => To(n, typeof e != "symbol" ? e + "" : e, t), Nr = (n, e, t) => e.has(n) || zs("Cannot " + t);
var u = (n, e, t) => (Nr(n, e, "read from private field"), t ? t.call(n) : e.get(n)), R = (n, e, t) => e.has(n) ? zs("Cannot add the same private member more than once") : e instanceof WeakSet ? e.add(n) : e.set(n, t), k = (n, e, t, r) => (Nr(n, e, "write to private field"), r ? r.call(n, t) : e.set(n, t), t), U = (n, e, t) => (Nr(n, e, "access private method"), t);
const Br = {
  version: "0.3.7"
};
async function ws(n) {
  try {
    return [null, await n()];
  } catch (e) {
    return [e, null];
  }
}
function ko(n) {
  const e = Object.values(n).filter((r) => typeof r == "number");
  return Object.entries(n).filter(([r, s]) => e.indexOf(+r) === -1).map(([r, s]) => s);
}
class Xi {
  constructor() {
    this._map = /* @__PURE__ */ new Map(), this._idmap = /* @__PURE__ */ new Map();
  }
  add(e, ...t) {
    const r = t[0];
    if (this._map.set(e, r), r && typeof r == "object" && "id" in r) {
      if (this._idmap.has(r.id))
        throw new Error(`ID ${r.id} already exists in the registry`);
      this._idmap.set(r.id, e);
    }
    return this;
  }
  clear() {
    return this._map = /* @__PURE__ */ new Map(), this._idmap = /* @__PURE__ */ new Map(), this;
  }
  remove(e) {
    const t = this._map.get(e);
    return t && typeof t == "object" && "id" in t && this._idmap.delete(t.id), this._map.delete(e), this;
  }
  get(e) {
    const t = e._zod.parent;
    if (t) {
      const r = { ...this.get(t) ?? {} };
      return delete r.id, { ...r, ...this._map.get(e) };
    }
    return this._map.get(e);
  }
  has(e) {
    return this._map.has(e);
  }
}
function Ao() {
  return new Xi();
}
const Co = /* @__PURE__ */ Ao();
class Gs {
  constructor(e) {
    this.counter = 0, this.metadataRegistry = (e == null ? void 0 : e.metadata) ?? Co, this.target = (e == null ? void 0 : e.target) ?? "draft-2020-12", this.unrepresentable = (e == null ? void 0 : e.unrepresentable) ?? "throw", this.override = (e == null ? void 0 : e.override) ?? (() => {
    }), this.io = (e == null ? void 0 : e.io) ?? "output", this.seen = /* @__PURE__ */ new Map();
  }
  process(e, t = { path: [], schemaPath: [] }) {
    var d, m, g;
    var r;
    const s = e._zod.def, i = {
      guid: "uuid",
      url: "uri",
      datetime: "date-time",
      json_string: "json-string",
      regex: ""
      // do not set
    }, o = this.seen.get(e);
    if (o)
      return o.count++, t.schemaPath.includes(e) && (o.cycle = t.path), o.schema;
    const a = { schema: {}, count: 1, cycle: void 0, path: t.path };
    this.seen.set(e, a);
    const c = (m = (d = e._zod).toJSONSchema) == null ? void 0 : m.call(d);
    if (c)
      a.schema = c;
    else {
      const v = {
        ...t,
        schemaPath: [...t.schemaPath, e],
        path: t.path
      }, S = e._zod.parent;
      if (S)
        a.ref = S, this.process(S, v), this.seen.get(S).isParent = !0;
      else {
        const y = a.schema;
        switch (s.type) {
          case "string": {
            const h = y;
            h.type = "string";
            const { minimum: b, maximum: _, format: N, patterns: T, contentEncoding: A } = e._zod.bag;
            if (typeof b == "number" && (h.minLength = b), typeof _ == "number" && (h.maxLength = _), N && (h.format = i[N] ?? N, h.format === "" && delete h.format), A && (h.contentEncoding = A), T && T.size > 0) {
              const D = [...T];
              D.length === 1 ? h.pattern = D[0].source : D.length > 1 && (a.schema.allOf = [
                ...D.map((F) => ({
                  ...this.target === "draft-7" ? { type: "string" } : {},
                  pattern: F.source
                }))
              ]);
            }
            break;
          }
          case "number": {
            const h = y, { minimum: b, maximum: _, format: N, multipleOf: T, exclusiveMaximum: A, exclusiveMinimum: D } = e._zod.bag;
            typeof N == "string" && N.includes("int") ? h.type = "integer" : h.type = "number", typeof D == "number" && (h.exclusiveMinimum = D), typeof b == "number" && (h.minimum = b, typeof D == "number" && (D >= b ? delete h.minimum : delete h.exclusiveMinimum)), typeof A == "number" && (h.exclusiveMaximum = A), typeof _ == "number" && (h.maximum = _, typeof A == "number" && (A <= _ ? delete h.maximum : delete h.exclusiveMaximum)), typeof T == "number" && (h.multipleOf = T);
            break;
          }
          case "boolean": {
            const h = y;
            h.type = "boolean";
            break;
          }
          case "bigint": {
            if (this.unrepresentable === "throw")
              throw new Error("BigInt cannot be represented in JSON Schema");
            break;
          }
          case "symbol": {
            if (this.unrepresentable === "throw")
              throw new Error("Symbols cannot be represented in JSON Schema");
            break;
          }
          case "null": {
            y.type = "null";
            break;
          }
          case "any":
            break;
          case "unknown":
            break;
          case "undefined": {
            if (this.unrepresentable === "throw")
              throw new Error("Undefined cannot be represented in JSON Schema");
            break;
          }
          case "void": {
            if (this.unrepresentable === "throw")
              throw new Error("Void cannot be represented in JSON Schema");
            break;
          }
          case "never": {
            y.not = {};
            break;
          }
          case "date": {
            if (this.unrepresentable === "throw")
              throw new Error("Date cannot be represented in JSON Schema");
            break;
          }
          case "array": {
            const h = y, { minimum: b, maximum: _ } = e._zod.bag;
            typeof b == "number" && (h.minItems = b), typeof _ == "number" && (h.maxItems = _), h.type = "array", h.items = this.process(s.element, { ...v, path: [...v.path, "items"] });
            break;
          }
          case "object": {
            const h = y;
            h.type = "object", h.properties = {};
            const b = s.shape;
            for (const T in b)
              h.properties[T] = this.process(b[T], {
                ...v,
                path: [...v.path, "properties", T]
              });
            const _ = new Set(Object.keys(b)), N = new Set([..._].filter((T) => {
              const A = s.shape[T]._zod;
              return this.io === "input" ? A.optin === void 0 : A.optout === void 0;
            }));
            N.size > 0 && (h.required = Array.from(N)), ((g = s.catchall) == null ? void 0 : g._zod.def.type) === "never" ? h.additionalProperties = !1 : s.catchall ? s.catchall && (h.additionalProperties = this.process(s.catchall, {
              ...v,
              path: [...v.path, "additionalProperties"]
            })) : this.io === "output" && (h.additionalProperties = !1);
            break;
          }
          case "union": {
            const h = y;
            h.anyOf = s.options.map((b, _) => this.process(b, {
              ...v,
              path: [...v.path, "anyOf", _]
            }));
            break;
          }
          case "intersection": {
            const h = y, b = this.process(s.left, {
              ...v,
              path: [...v.path, "allOf", 0]
            }), _ = this.process(s.right, {
              ...v,
              path: [...v.path, "allOf", 1]
            }), N = (A) => "allOf" in A && Object.keys(A).length === 1, T = [
              ...N(b) ? b.allOf : [b],
              ...N(_) ? _.allOf : [_]
            ];
            h.allOf = T;
            break;
          }
          case "tuple": {
            const h = y;
            h.type = "array";
            const b = s.items.map((T, A) => this.process(T, { ...v, path: [...v.path, "prefixItems", A] }));
            if (this.target === "draft-2020-12" ? h.prefixItems = b : h.items = b, s.rest) {
              const T = this.process(s.rest, {
                ...v,
                path: [...v.path, "items"]
              });
              this.target === "draft-2020-12" ? h.items = T : h.additionalItems = T;
            }
            s.rest && (h.items = this.process(s.rest, {
              ...v,
              path: [...v.path, "items"]
            }));
            const { minimum: _, maximum: N } = e._zod.bag;
            typeof _ == "number" && (h.minItems = _), typeof N == "number" && (h.maxItems = N);
            break;
          }
          case "record": {
            const h = y;
            h.type = "object", h.propertyNames = this.process(s.keyType, { ...v, path: [...v.path, "propertyNames"] }), h.additionalProperties = this.process(s.valueType, {
              ...v,
              path: [...v.path, "additionalProperties"]
            });
            break;
          }
          case "map": {
            if (this.unrepresentable === "throw")
              throw new Error("Map cannot be represented in JSON Schema");
            break;
          }
          case "set": {
            if (this.unrepresentable === "throw")
              throw new Error("Set cannot be represented in JSON Schema");
            break;
          }
          case "enum": {
            const h = y, b = ko(s.entries);
            b.every((_) => typeof _ == "number") && (h.type = "number"), b.every((_) => typeof _ == "string") && (h.type = "string"), h.enum = b;
            break;
          }
          case "literal": {
            const h = y, b = [];
            for (const _ of s.values)
              if (_ === void 0) {
                if (this.unrepresentable === "throw")
                  throw new Error("Literal `undefined` cannot be represented in JSON Schema");
              } else if (typeof _ == "bigint") {
                if (this.unrepresentable === "throw")
                  throw new Error("BigInt literals cannot be represented in JSON Schema");
                b.push(Number(_));
              } else
                b.push(_);
            if (b.length !== 0) if (b.length === 1) {
              const _ = b[0];
              h.type = _ === null ? "null" : typeof _, h.const = _;
            } else
              b.every((_) => typeof _ == "number") && (h.type = "number"), b.every((_) => typeof _ == "string") && (h.type = "string"), b.every((_) => typeof _ == "boolean") && (h.type = "string"), b.every((_) => _ === null) && (h.type = "null"), h.enum = b;
            break;
          }
          case "file": {
            const h = y, b = {
              type: "string",
              format: "binary",
              contentEncoding: "binary"
            }, { minimum: _, maximum: N, mime: T } = e._zod.bag;
            _ !== void 0 && (b.minLength = _), N !== void 0 && (b.maxLength = N), T ? T.length === 1 ? (b.contentMediaType = T[0], Object.assign(h, b)) : h.anyOf = T.map((A) => ({ ...b, contentMediaType: A })) : Object.assign(h, b);
            break;
          }
          case "transform": {
            if (this.unrepresentable === "throw")
              throw new Error("Transforms cannot be represented in JSON Schema");
            break;
          }
          case "nullable": {
            const h = this.process(s.innerType, v);
            y.anyOf = [h, { type: "null" }];
            break;
          }
          case "nonoptional": {
            this.process(s.innerType, v), a.ref = s.innerType;
            break;
          }
          case "success": {
            const h = y;
            h.type = "boolean";
            break;
          }
          case "default": {
            this.process(s.innerType, v), a.ref = s.innerType, y.default = JSON.parse(JSON.stringify(s.defaultValue));
            break;
          }
          case "prefault": {
            this.process(s.innerType, v), a.ref = s.innerType, this.io === "input" && (y._prefault = JSON.parse(JSON.stringify(s.defaultValue)));
            break;
          }
          case "catch": {
            this.process(s.innerType, v), a.ref = s.innerType;
            let h;
            try {
              h = s.catchValue(void 0);
            } catch {
              throw new Error("Dynamic catch values are not supported in JSON Schema");
            }
            y.default = h;
            break;
          }
          case "nan": {
            if (this.unrepresentable === "throw")
              throw new Error("NaN cannot be represented in JSON Schema");
            break;
          }
          case "template_literal": {
            const h = y, b = e._zod.pattern;
            if (!b)
              throw new Error("Pattern not found in template literal");
            h.type = "string", h.pattern = b.source;
            break;
          }
          case "pipe": {
            const h = this.io === "input" ? s.in._zod.def.type === "transform" ? s.out : s.in : s.out;
            this.process(h, v), a.ref = h;
            break;
          }
          case "readonly": {
            this.process(s.innerType, v), a.ref = s.innerType, y.readOnly = !0;
            break;
          }
          // passthrough types
          case "promise": {
            this.process(s.innerType, v), a.ref = s.innerType;
            break;
          }
          case "optional": {
            this.process(s.innerType, v), a.ref = s.innerType;
            break;
          }
          case "lazy": {
            const h = e._zod.innerType;
            this.process(h, v), a.ref = h;
            break;
          }
          case "custom": {
            if (this.unrepresentable === "throw")
              throw new Error("Custom types cannot be represented in JSON Schema");
            break;
          }
        }
      }
    }
    const l = this.metadataRegistry.get(e);
    return l && Object.assign(a.schema, l), this.io === "input" && le(e) && (delete a.schema.examples, delete a.schema.default), this.io === "input" && a.schema._prefault && ((r = a.schema).default ?? (r.default = a.schema._prefault)), delete a.schema._prefault, this.seen.get(e).schema;
  }
  emit(e, t) {
    var f, d, m, g, v, S;
    const r = {
      cycles: (t == null ? void 0 : t.cycles) ?? "ref",
      reused: (t == null ? void 0 : t.reused) ?? "inline",
      // unrepresentable: _params?.unrepresentable ?? "throw",
      // uri: _params?.uri ?? ((id) => `${id}`),
      external: (t == null ? void 0 : t.external) ?? void 0
    }, s = this.seen.get(e);
    if (!s)
      throw new Error("Unprocessed schema. This is a bug in Zod.");
    const i = (y) => {
      var T;
      const h = this.target === "draft-2020-12" ? "$defs" : "definitions";
      if (r.external) {
        const A = (T = r.external.registry.get(y[0])) == null ? void 0 : T.id, D = r.external.uri ?? ((z) => z);
        if (A)
          return { ref: D(A) };
        const F = y[1].defId ?? y[1].schema.id ?? `schema${this.counter++}`;
        return y[1].defId = F, { defId: F, ref: `${D("__shared")}#/${h}/${F}` };
      }
      if (y[1] === s)
        return { ref: "#" };
      const _ = `#/${h}/`, N = y[1].schema.id ?? `__schema${this.counter++}`;
      return { defId: N, ref: _ + N };
    }, o = (y) => {
      if (y[1].schema.$ref)
        return;
      const h = y[1], { ref: b, defId: _ } = i(y);
      h.def = { ...h.schema }, _ && (h.defId = _);
      const N = h.schema;
      for (const T in N)
        delete N[T];
      N.$ref = b;
    };
    if (r.cycles === "throw")
      for (const y of this.seen.entries()) {
        const h = y[1];
        if (h.cycle)
          throw new Error(`Cycle detected: #/${(f = h.cycle) == null ? void 0 : f.join("/")}/<root>

Set the \`cycles\` parameter to \`"ref"\` to resolve cyclical schemas with defs.`);
      }
    for (const y of this.seen.entries()) {
      const h = y[1];
      if (e === y[0]) {
        o(y);
        continue;
      }
      if (r.external) {
        const _ = (d = r.external.registry.get(y[0])) == null ? void 0 : d.id;
        if (e !== y[0] && _) {
          o(y);
          continue;
        }
      }
      if ((m = this.metadataRegistry.get(y[0])) == null ? void 0 : m.id) {
        o(y);
        continue;
      }
      if (h.cycle) {
        o(y);
        continue;
      }
      if (h.count > 1 && r.reused === "ref") {
        o(y);
        continue;
      }
    }
    const a = (y, h) => {
      const b = this.seen.get(y), _ = b.def ?? b.schema, N = { ..._ };
      if (b.ref === null)
        return;
      const T = b.ref;
      if (b.ref = null, T) {
        a(T, h);
        const A = this.seen.get(T).schema;
        A.$ref && h.target === "draft-7" ? (_.allOf = _.allOf ?? [], _.allOf.push(A)) : (Object.assign(_, A), Object.assign(_, N));
      }
      b.isParent || this.override({
        zodSchema: y,
        jsonSchema: _,
        path: b.path ?? []
      });
    };
    for (const y of [...this.seen.entries()].reverse())
      a(y[0], { target: this.target });
    const c = {};
    if (this.target === "draft-2020-12" ? c.$schema = "https://json-schema.org/draft/2020-12/schema" : this.target === "draft-7" ? c.$schema = "http://json-schema.org/draft-07/schema#" : console.warn(`Invalid target: ${this.target}`), (g = r.external) != null && g.uri) {
      const y = (v = r.external.registry.get(e)) == null ? void 0 : v.id;
      if (!y)
        throw new Error("Schema is missing an `id` property");
      c.$id = r.external.uri(y);
    }
    Object.assign(c, s.def);
    const l = ((S = r.external) == null ? void 0 : S.defs) ?? {};
    for (const y of this.seen.entries()) {
      const h = y[1];
      h.def && h.defId && (l[h.defId] = h.def);
    }
    r.external || Object.keys(l).length > 0 && (this.target === "draft-2020-12" ? c.$defs = l : c.definitions = l);
    try {
      return JSON.parse(JSON.stringify(c));
    } catch {
      throw new Error("Error converting schema to JSON.");
    }
  }
}
function Oo(n, e) {
  if (n instanceof Xi) {
    const r = new Gs(e), s = {};
    for (const a of n._idmap.entries()) {
      const [c, l] = a;
      r.process(l);
    }
    const i = {}, o = {
      registry: n,
      uri: e == null ? void 0 : e.uri,
      defs: s
    };
    for (const a of n._idmap.entries()) {
      const [c, l] = a;
      i[c] = r.emit(l, {
        ...e,
        external: o
      });
    }
    if (Object.keys(s).length > 0) {
      const a = r.target === "draft-2020-12" ? "$defs" : "definitions";
      i.__shared = {
        [a]: s
      };
    }
    return { schemas: i };
  }
  const t = new Gs(e);
  return t.process(n), t.emit(n, e);
}
function le(n, e) {
  const t = e ?? { seen: /* @__PURE__ */ new Set() };
  if (t.seen.has(n))
    return !1;
  t.seen.add(n);
  const s = n._zod.def;
  switch (s.type) {
    case "string":
    case "number":
    case "bigint":
    case "boolean":
    case "date":
    case "symbol":
    case "undefined":
    case "null":
    case "any":
    case "unknown":
    case "never":
    case "void":
    case "literal":
    case "enum":
    case "nan":
    case "file":
    case "template_literal":
      return !1;
    case "array":
      return le(s.element, t);
    case "object": {
      for (const i in s.shape)
        if (le(s.shape[i], t))
          return !0;
      return !1;
    }
    case "union": {
      for (const i of s.options)
        if (le(i, t))
          return !0;
      return !1;
    }
    case "intersection":
      return le(s.left, t) || le(s.right, t);
    case "tuple": {
      for (const i of s.items)
        if (le(i, t))
          return !0;
      return !!(s.rest && le(s.rest, t));
    }
    case "record":
      return le(s.keyType, t) || le(s.valueType, t);
    case "map":
      return le(s.keyType, t) || le(s.valueType, t);
    case "set":
      return le(s.valueType, t);
    // inner types
    case "promise":
    case "optional":
    case "nonoptional":
    case "nullable":
    case "readonly":
      return le(s.innerType, t);
    case "lazy":
      return le(s.getter(), t);
    case "default":
      return le(s.innerType, t);
    case "prefault":
      return le(s.innerType, t);
    case "custom":
      return !1;
    case "transform":
      return !0;
    case "pipe":
      return le(s.in, t) || le(s.out, t);
    case "success":
      return !1;
    case "catch":
      return !1;
  }
  throw new Error(`Unknown schema type: ${s.type}`);
}
function Eo(n, e) {
  const t = { ...n };
  return Object.defineProperties(t, {
    $brand: {
      value: "auto-parseable-response-format",
      enumerable: !1
    },
    $parseRaw: {
      value: e,
      enumerable: !1
    }
  }), t;
}
const Ro = Symbol("Let zodToJsonSchema decide on which parser to use"), Vs = {
  name: void 0,
  $refStrategy: "root",
  effectStrategy: "input",
  pipeStrategy: "all",
  dateStrategy: "format:date-time",
  mapStrategy: "entries",
  nullableStrategy: "from-target",
  removeAdditionalStrategy: "passthrough",
  definitionPath: "definitions",
  target: "jsonSchema7",
  strictUnions: !1,
  errorMessages: !1,
  markdownDescription: !1,
  patternStrategy: "escape",
  applyRegexFlags: !1,
  emailStrategy: "format:email",
  base64Strategy: "contentEncoding:base64",
  nameStrategy: "ref"
}, No = (n) => typeof n == "string" ? {
  ...Vs,
  basePath: ["#"],
  definitions: {},
  name: n
} : {
  ...Vs,
  basePath: ["#"],
  definitions: {},
  ...n
}, zr = (n) => "_def" in n ? n._def : n;
function Po(n) {
  if (!n)
    return !0;
  for (const e in n)
    return !1;
  return !0;
}
const Do = (n) => {
  const e = No(n), t = e.name !== void 0 ? [...e.basePath, e.definitionPath, e.name] : e.basePath;
  return {
    ...e,
    currentPath: t,
    propertyPath: void 0,
    seenRefs: /* @__PURE__ */ new Set(),
    seen: new Map(Object.entries(e.definitions).map(([r, s]) => [
      zr(s),
      {
        def: zr(s),
        path: [...e.basePath, e.definitionPath, r],
        // Resolution of references will be forced even though seen, so it's ok that the schema is undefined here for now.
        jsonSchema: void 0
      }
    ]))
  };
};
function Qi(n, e, t, r) {
  r != null && r.errorMessages && t && (n.errorMessage = {
    ...n.errorMessage,
    [e]: t
  });
}
function Q(n, e, t, r, s) {
  n[e] = t, Qi(n, e, r, s);
}
var Y;
(function(n) {
  n.assertEqual = (s) => {
  };
  function e(s) {
  }
  n.assertIs = e;
  function t(s) {
    throw new Error();
  }
  n.assertNever = t, n.arrayToEnum = (s) => {
    const i = {};
    for (const o of s)
      i[o] = o;
    return i;
  }, n.getValidEnumValues = (s) => {
    const i = n.objectKeys(s).filter((a) => typeof s[s[a]] != "number"), o = {};
    for (const a of i)
      o[a] = s[a];
    return n.objectValues(o);
  }, n.objectValues = (s) => n.objectKeys(s).map(function(i) {
    return s[i];
  }), n.objectKeys = typeof Object.keys == "function" ? (s) => Object.keys(s) : (s) => {
    const i = [];
    for (const o in s)
      Object.prototype.hasOwnProperty.call(s, o) && i.push(o);
    return i;
  }, n.find = (s, i) => {
    for (const o of s)
      if (i(o))
        return o;
  }, n.isInteger = typeof Number.isInteger == "function" ? (s) => Number.isInteger(s) : (s) => typeof s == "number" && Number.isFinite(s) && Math.floor(s) === s;
  function r(s, i = " | ") {
    return s.map((o) => typeof o == "string" ? `'${o}'` : o).join(i);
  }
  n.joinValues = r, n.jsonStringifyReplacer = (s, i) => typeof i == "bigint" ? i.toString() : i;
})(Y || (Y = {}));
var Ws;
(function(n) {
  n.mergeShapes = (e, t) => ({
    ...e,
    ...t
    // second overwrites first
  });
})(Ws || (Ws = {}));
const M = Y.arrayToEnum([
  "string",
  "nan",
  "number",
  "integer",
  "float",
  "boolean",
  "date",
  "bigint",
  "symbol",
  "function",
  "undefined",
  "null",
  "array",
  "object",
  "unknown",
  "promise",
  "void",
  "never",
  "map",
  "set"
]), st = (n) => {
  switch (typeof n) {
    case "undefined":
      return M.undefined;
    case "string":
      return M.string;
    case "number":
      return Number.isNaN(n) ? M.nan : M.number;
    case "boolean":
      return M.boolean;
    case "function":
      return M.function;
    case "bigint":
      return M.bigint;
    case "symbol":
      return M.symbol;
    case "object":
      return Array.isArray(n) ? M.array : n === null ? M.null : n.then && typeof n.then == "function" && n.catch && typeof n.catch == "function" ? M.promise : typeof Map < "u" && n instanceof Map ? M.map : typeof Set < "u" && n instanceof Set ? M.set : typeof Date < "u" && n instanceof Date ? M.date : M.object;
    default:
      return M.unknown;
  }
}, C = Y.arrayToEnum([
  "invalid_type",
  "invalid_literal",
  "custom",
  "invalid_union",
  "invalid_union_discriminator",
  "invalid_enum_value",
  "unrecognized_keys",
  "invalid_arguments",
  "invalid_return_type",
  "invalid_date",
  "invalid_string",
  "too_small",
  "too_big",
  "invalid_intersection_types",
  "not_multiple_of",
  "not_finite"
]);
class Fe extends Error {
  get errors() {
    return this.issues;
  }
  constructor(e) {
    super(), this.issues = [], this.addIssue = (r) => {
      this.issues = [...this.issues, r];
    }, this.addIssues = (r = []) => {
      this.issues = [...this.issues, ...r];
    };
    const t = new.target.prototype;
    Object.setPrototypeOf ? Object.setPrototypeOf(this, t) : this.__proto__ = t, this.name = "ZodError", this.issues = e;
  }
  format(e) {
    const t = e || function(i) {
      return i.message;
    }, r = { _errors: [] }, s = (i) => {
      for (const o of i.issues)
        if (o.code === "invalid_union")
          o.unionErrors.map(s);
        else if (o.code === "invalid_return_type")
          s(o.returnTypeError);
        else if (o.code === "invalid_arguments")
          s(o.argumentsError);
        else if (o.path.length === 0)
          r._errors.push(t(o));
        else {
          let a = r, c = 0;
          for (; c < o.path.length; ) {
            const l = o.path[c];
            c === o.path.length - 1 ? (a[l] = a[l] || { _errors: [] }, a[l]._errors.push(t(o))) : a[l] = a[l] || { _errors: [] }, a = a[l], c++;
          }
        }
    };
    return s(this), r;
  }
  static assert(e) {
    if (!(e instanceof Fe))
      throw new Error(`Not a ZodError: ${e}`);
  }
  toString() {
    return this.message;
  }
  get message() {
    return JSON.stringify(this.issues, Y.jsonStringifyReplacer, 2);
  }
  get isEmpty() {
    return this.issues.length === 0;
  }
  flatten(e = (t) => t.message) {
    const t = {}, r = [];
    for (const s of this.issues)
      if (s.path.length > 0) {
        const i = s.path[0];
        t[i] = t[i] || [], t[i].push(e(s));
      } else
        r.push(e(s));
    return { formErrors: r, fieldErrors: t };
  }
  get formErrors() {
    return this.flatten();
  }
}
Fe.create = (n) => new Fe(n);
const Gr = (n, e) => {
  let t;
  switch (n.code) {
    case C.invalid_type:
      n.received === M.undefined ? t = "Required" : t = `Expected ${n.expected}, received ${n.received}`;
      break;
    case C.invalid_literal:
      t = `Invalid literal value, expected ${JSON.stringify(n.expected, Y.jsonStringifyReplacer)}`;
      break;
    case C.unrecognized_keys:
      t = `Unrecognized key(s) in object: ${Y.joinValues(n.keys, ", ")}`;
      break;
    case C.invalid_union:
      t = "Invalid input";
      break;
    case C.invalid_union_discriminator:
      t = `Invalid discriminator value. Expected ${Y.joinValues(n.options)}`;
      break;
    case C.invalid_enum_value:
      t = `Invalid enum value. Expected ${Y.joinValues(n.options)}, received '${n.received}'`;
      break;
    case C.invalid_arguments:
      t = "Invalid function arguments";
      break;
    case C.invalid_return_type:
      t = "Invalid function return type";
      break;
    case C.invalid_date:
      t = "Invalid date";
      break;
    case C.invalid_string:
      typeof n.validation == "object" ? "includes" in n.validation ? (t = `Invalid input: must include "${n.validation.includes}"`, typeof n.validation.position == "number" && (t = `${t} at one or more positions greater than or equal to ${n.validation.position}`)) : "startsWith" in n.validation ? t = `Invalid input: must start with "${n.validation.startsWith}"` : "endsWith" in n.validation ? t = `Invalid input: must end with "${n.validation.endsWith}"` : Y.assertNever(n.validation) : n.validation !== "regex" ? t = `Invalid ${n.validation}` : t = "Invalid";
      break;
    case C.too_small:
      n.type === "array" ? t = `Array must contain ${n.exact ? "exactly" : n.inclusive ? "at least" : "more than"} ${n.minimum} element(s)` : n.type === "string" ? t = `String must contain ${n.exact ? "exactly" : n.inclusive ? "at least" : "over"} ${n.minimum} character(s)` : n.type === "number" ? t = `Number must be ${n.exact ? "exactly equal to " : n.inclusive ? "greater than or equal to " : "greater than "}${n.minimum}` : n.type === "bigint" ? t = `Number must be ${n.exact ? "exactly equal to " : n.inclusive ? "greater than or equal to " : "greater than "}${n.minimum}` : n.type === "date" ? t = `Date must be ${n.exact ? "exactly equal to " : n.inclusive ? "greater than or equal to " : "greater than "}${new Date(Number(n.minimum))}` : t = "Invalid input";
      break;
    case C.too_big:
      n.type === "array" ? t = `Array must contain ${n.exact ? "exactly" : n.inclusive ? "at most" : "less than"} ${n.maximum} element(s)` : n.type === "string" ? t = `String must contain ${n.exact ? "exactly" : n.inclusive ? "at most" : "under"} ${n.maximum} character(s)` : n.type === "number" ? t = `Number must be ${n.exact ? "exactly" : n.inclusive ? "less than or equal to" : "less than"} ${n.maximum}` : n.type === "bigint" ? t = `BigInt must be ${n.exact ? "exactly" : n.inclusive ? "less than or equal to" : "less than"} ${n.maximum}` : n.type === "date" ? t = `Date must be ${n.exact ? "exactly" : n.inclusive ? "smaller than or equal to" : "smaller than"} ${new Date(Number(n.maximum))}` : t = "Invalid input";
      break;
    case C.custom:
      t = "Invalid input";
      break;
    case C.invalid_intersection_types:
      t = "Intersection results could not be merged";
      break;
    case C.not_multiple_of:
      t = `Number must be a multiple of ${n.multipleOf}`;
      break;
    case C.not_finite:
      t = "Number must be finite";
      break;
    default:
      t = e.defaultError, Y.assertNever(n);
  }
  return { message: t };
};
let Mo = Gr;
function jo() {
  return Mo;
}
const $o = (n) => {
  const { data: e, path: t, errorMaps: r, issueData: s } = n, i = [...t, ...s.path || []], o = {
    ...s,
    path: i
  };
  if (s.message !== void 0)
    return {
      ...s,
      path: i,
      message: s.message
    };
  let a = "";
  const c = r.filter((l) => !!l).slice().reverse();
  for (const l of c)
    a = l(o, { data: e, defaultError: a }).message;
  return {
    ...s,
    path: i,
    message: a
  };
};
function P(n, e) {
  const t = jo(), r = $o({
    issueData: e,
    data: n.data,
    path: n.path,
    errorMaps: [
      n.common.contextualErrorMap,
      // contextual error map is first priority
      n.schemaErrorMap,
      // then schema-bound map if available
      t,
      // then global override map
      t === Gr ? void 0 : Gr
      // then global default map
    ].filter((s) => !!s)
  });
  n.common.issues.push(r);
}
class _e {
  constructor() {
    this.value = "valid";
  }
  dirty() {
    this.value === "valid" && (this.value = "dirty");
  }
  abort() {
    this.value !== "aborted" && (this.value = "aborted");
  }
  static mergeArray(e, t) {
    const r = [];
    for (const s of t) {
      if (s.status === "aborted")
        return J;
      s.status === "dirty" && e.dirty(), r.push(s.value);
    }
    return { status: e.value, value: r };
  }
  static async mergeObjectAsync(e, t) {
    const r = [];
    for (const s of t) {
      const i = await s.key, o = await s.value;
      r.push({
        key: i,
        value: o
      });
    }
    return _e.mergeObjectSync(e, r);
  }
  static mergeObjectSync(e, t) {
    const r = {};
    for (const s of t) {
      const { key: i, value: o } = s;
      if (i.status === "aborted" || o.status === "aborted")
        return J;
      i.status === "dirty" && e.dirty(), o.status === "dirty" && e.dirty(), i.value !== "__proto__" && (typeof o.value < "u" || s.alwaysSet) && (r[i.value] = o.value);
    }
    return { status: e.value, value: r };
  }
}
const J = Object.freeze({
  status: "aborted"
}), fn = (n) => ({ status: "dirty", value: n }), Ae = (n) => ({ status: "valid", value: n }), Hs = (n) => n.status === "aborted", Ks = (n) => n.status === "dirty", an = (n) => n.status === "valid", sr = (n) => typeof Promise < "u" && n instanceof Promise;
var $;
(function(n) {
  n.errToObj = (e) => typeof e == "string" ? { message: e } : e || {}, n.toString = (e) => typeof e == "string" ? e : e == null ? void 0 : e.message;
})($ || ($ = {}));
class Le {
  constructor(e, t, r, s) {
    this._cachedPath = [], this.parent = e, this.data = t, this._path = r, this._key = s;
  }
  get path() {
    return this._cachedPath.length || (Array.isArray(this._key) ? this._cachedPath.push(...this._path, ...this._key) : this._cachedPath.push(...this._path, this._key)), this._cachedPath;
  }
}
const Ys = (n, e) => {
  if (an(e))
    return { success: !0, data: e.value };
  if (!n.common.issues.length)
    throw new Error("Validation failed but no issues detected.");
  return {
    success: !1,
    get error() {
      if (this._error)
        return this._error;
      const t = new Fe(n.common.issues);
      return this._error = t, this._error;
    }
  };
};
function G(n) {
  if (!n)
    return {};
  const { errorMap: e, invalid_type_error: t, required_error: r, description: s } = n;
  if (e && (t || r))
    throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);
  return e ? { errorMap: e, description: s } : { errorMap: (o, a) => {
    const { message: c } = n;
    return o.code === "invalid_enum_value" ? { message: c ?? a.defaultError } : typeof a.data > "u" ? { message: c ?? r ?? a.defaultError } : o.code !== "invalid_type" ? { message: a.defaultError } : { message: c ?? t ?? a.defaultError };
  }, description: s };
}
class H {
  get description() {
    return this._def.description;
  }
  _getType(e) {
    return st(e.data);
  }
  _getOrReturnCtx(e, t) {
    return t || {
      common: e.parent.common,
      data: e.data,
      parsedType: st(e.data),
      schemaErrorMap: this._def.errorMap,
      path: e.path,
      parent: e.parent
    };
  }
  _processInputParams(e) {
    return {
      status: new _e(),
      ctx: {
        common: e.parent.common,
        data: e.data,
        parsedType: st(e.data),
        schemaErrorMap: this._def.errorMap,
        path: e.path,
        parent: e.parent
      }
    };
  }
  _parseSync(e) {
    const t = this._parse(e);
    if (sr(t))
      throw new Error("Synchronous parse encountered promise.");
    return t;
  }
  _parseAsync(e) {
    const t = this._parse(e);
    return Promise.resolve(t);
  }
  parse(e, t) {
    const r = this.safeParse(e, t);
    if (r.success)
      return r.data;
    throw r.error;
  }
  safeParse(e, t) {
    const r = {
      common: {
        issues: [],
        async: (t == null ? void 0 : t.async) ?? !1,
        contextualErrorMap: t == null ? void 0 : t.errorMap
      },
      path: (t == null ? void 0 : t.path) || [],
      schemaErrorMap: this._def.errorMap,
      parent: null,
      data: e,
      parsedType: st(e)
    }, s = this._parseSync({ data: e, path: r.path, parent: r });
    return Ys(r, s);
  }
  "~validate"(e) {
    var r, s;
    const t = {
      common: {
        issues: [],
        async: !!this["~standard"].async
      },
      path: [],
      schemaErrorMap: this._def.errorMap,
      parent: null,
      data: e,
      parsedType: st(e)
    };
    if (!this["~standard"].async)
      try {
        const i = this._parseSync({ data: e, path: [], parent: t });
        return an(i) ? {
          value: i.value
        } : {
          issues: t.common.issues
        };
      } catch (i) {
        (s = (r = i == null ? void 0 : i.message) == null ? void 0 : r.toLowerCase()) != null && s.includes("encountered") && (this["~standard"].async = !0), t.common = {
          issues: [],
          async: !0
        };
      }
    return this._parseAsync({ data: e, path: [], parent: t }).then((i) => an(i) ? {
      value: i.value
    } : {
      issues: t.common.issues
    });
  }
  async parseAsync(e, t) {
    const r = await this.safeParseAsync(e, t);
    if (r.success)
      return r.data;
    throw r.error;
  }
  async safeParseAsync(e, t) {
    const r = {
      common: {
        issues: [],
        contextualErrorMap: t == null ? void 0 : t.errorMap,
        async: !0
      },
      path: (t == null ? void 0 : t.path) || [],
      schemaErrorMap: this._def.errorMap,
      parent: null,
      data: e,
      parsedType: st(e)
    }, s = this._parse({ data: e, path: r.path, parent: r }), i = await (sr(s) ? s : Promise.resolve(s));
    return Ys(r, i);
  }
  refine(e, t) {
    const r = (s) => typeof t == "string" || typeof t > "u" ? { message: t } : typeof t == "function" ? t(s) : t;
    return this._refinement((s, i) => {
      const o = e(s), a = () => i.addIssue({
        code: C.custom,
        ...r(s)
      });
      return typeof Promise < "u" && o instanceof Promise ? o.then((c) => c ? !0 : (a(), !1)) : o ? !0 : (a(), !1);
    });
  }
  refinement(e, t) {
    return this._refinement((r, s) => e(r) ? !0 : (s.addIssue(typeof t == "function" ? t(r, s) : t), !1));
  }
  _refinement(e) {
    return new Dt({
      schema: this,
      typeName: O.ZodEffects,
      effect: { type: "refinement", refinement: e }
    });
  }
  superRefine(e) {
    return this._refinement(e);
  }
  constructor(e) {
    this.spa = this.safeParseAsync, this._def = e, this.parse = this.parse.bind(this), this.safeParse = this.safeParse.bind(this), this.parseAsync = this.parseAsync.bind(this), this.safeParseAsync = this.safeParseAsync.bind(this), this.spa = this.spa.bind(this), this.refine = this.refine.bind(this), this.refinement = this.refinement.bind(this), this.superRefine = this.superRefine.bind(this), this.optional = this.optional.bind(this), this.nullable = this.nullable.bind(this), this.nullish = this.nullish.bind(this), this.array = this.array.bind(this), this.promise = this.promise.bind(this), this.or = this.or.bind(this), this.and = this.and.bind(this), this.transform = this.transform.bind(this), this.brand = this.brand.bind(this), this.default = this.default.bind(this), this.catch = this.catch.bind(this), this.describe = this.describe.bind(this), this.pipe = this.pipe.bind(this), this.readonly = this.readonly.bind(this), this.isNullable = this.isNullable.bind(this), this.isOptional = this.isOptional.bind(this), this["~standard"] = {
      version: 1,
      vendor: "zod",
      validate: (t) => this["~validate"](t)
    };
  }
  optional() {
    return et.create(this, this._def);
  }
  nullable() {
    return Mt.create(this, this._def);
  }
  nullish() {
    return this.nullable().optional();
  }
  array() {
    return $e.create(this);
  }
  promise() {
    return dr.create(this, this._def);
  }
  or(e) {
    return ar.create([this, e], this._def);
  }
  and(e) {
    return or.create(this, e, this._def);
  }
  transform(e) {
    return new Dt({
      ...G(this._def),
      schema: this,
      typeName: O.ZodEffects,
      effect: { type: "transform", transform: e }
    });
  }
  default(e) {
    const t = typeof e == "function" ? e : () => e;
    return new pr({
      ...G(this._def),
      innerType: this,
      defaultValue: t,
      typeName: O.ZodDefault
    });
  }
  brand() {
    return new ra({
      typeName: O.ZodBranded,
      type: this,
      ...G(this._def)
    });
  }
  catch(e) {
    const t = typeof e == "function" ? e : () => e;
    return new fr({
      ...G(this._def),
      innerType: this,
      catchValue: t,
      typeName: O.ZodCatch
    });
  }
  describe(e) {
    const t = this.constructor;
    return new t({
      ...this._def,
      description: e
    });
  }
  pipe(e) {
    return Is.create(this, e);
  }
  readonly() {
    return hr.create(this);
  }
  isOptional() {
    return this.safeParse(void 0).success;
  }
  isNullable() {
    return this.safeParse(null).success;
  }
}
const Fo = /^c[^\s-]{8,}$/i, Lo = /^[0-9a-z]+$/, Uo = /^[0-9A-HJKMNP-TV-Z]{26}$/i, Zo = /^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i, qo = /^[a-z0-9_-]{21}$/i, Jo = /^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/, Bo = /^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/, zo = /^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i, Go = "^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";
let Pr;
const Vo = /^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/, Wo = /^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/, Ho = /^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/, Ko = /^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/, Yo = /^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/, Xo = /^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/, ea = "((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))", Qo = new RegExp(`^${ea}$`);
function ta(n) {
  let e = "[0-5]\\d";
  n.precision ? e = `${e}\\.\\d{${n.precision}}` : n.precision == null && (e = `${e}(\\.\\d+)?`);
  const t = n.precision ? "+" : "?";
  return `([01]\\d|2[0-3]):[0-5]\\d(:${e})${t}`;
}
function eu(n) {
  return new RegExp(`^${ta(n)}$`);
}
function tu(n) {
  let e = `${ea}T${ta(n)}`;
  const t = [];
  return t.push(n.local ? "Z?" : "Z"), n.offset && t.push("([+-]\\d{2}:?\\d{2})"), e = `${e}(${t.join("|")})`, new RegExp(`^${e}$`);
}
function nu(n, e) {
  return !!((e === "v4" || !e) && Vo.test(n) || (e === "v6" || !e) && Ho.test(n));
}
function ru(n, e) {
  if (!Jo.test(n))
    return !1;
  try {
    const [t] = n.split(".");
    if (!t)
      return !1;
    const r = t.replace(/-/g, "+").replace(/_/g, "/").padEnd(t.length + (4 - t.length % 4) % 4, "="), s = JSON.parse(atob(r));
    return !(typeof s != "object" || s === null || "typ" in s && (s == null ? void 0 : s.typ) !== "JWT" || !s.alg || e && s.alg !== e);
  } catch {
    return !1;
  }
}
function su(n, e) {
  return !!((e === "v4" || !e) && Wo.test(n) || (e === "v6" || !e) && Ko.test(n));
}
class Qe extends H {
  _parse(e) {
    if (this._def.coerce && (e.data = String(e.data)), this._getType(e) !== M.string) {
      const i = this._getOrReturnCtx(e);
      return P(i, {
        code: C.invalid_type,
        expected: M.string,
        received: i.parsedType
      }), J;
    }
    const r = new _e();
    let s;
    for (const i of this._def.checks)
      if (i.kind === "min")
        e.data.length < i.value && (s = this._getOrReturnCtx(e, s), P(s, {
          code: C.too_small,
          minimum: i.value,
          type: "string",
          inclusive: !0,
          exact: !1,
          message: i.message
        }), r.dirty());
      else if (i.kind === "max")
        e.data.length > i.value && (s = this._getOrReturnCtx(e, s), P(s, {
          code: C.too_big,
          maximum: i.value,
          type: "string",
          inclusive: !0,
          exact: !1,
          message: i.message
        }), r.dirty());
      else if (i.kind === "length") {
        const o = e.data.length > i.value, a = e.data.length < i.value;
        (o || a) && (s = this._getOrReturnCtx(e, s), o ? P(s, {
          code: C.too_big,
          maximum: i.value,
          type: "string",
          inclusive: !0,
          exact: !0,
          message: i.message
        }) : a && P(s, {
          code: C.too_small,
          minimum: i.value,
          type: "string",
          inclusive: !0,
          exact: !0,
          message: i.message
        }), r.dirty());
      } else if (i.kind === "email")
        zo.test(e.data) || (s = this._getOrReturnCtx(e, s), P(s, {
          validation: "email",
          code: C.invalid_string,
          message: i.message
        }), r.dirty());
      else if (i.kind === "emoji")
        Pr || (Pr = new RegExp(Go, "u")), Pr.test(e.data) || (s = this._getOrReturnCtx(e, s), P(s, {
          validation: "emoji",
          code: C.invalid_string,
          message: i.message
        }), r.dirty());
      else if (i.kind === "uuid")
        Zo.test(e.data) || (s = this._getOrReturnCtx(e, s), P(s, {
          validation: "uuid",
          code: C.invalid_string,
          message: i.message
        }), r.dirty());
      else if (i.kind === "nanoid")
        qo.test(e.data) || (s = this._getOrReturnCtx(e, s), P(s, {
          validation: "nanoid",
          code: C.invalid_string,
          message: i.message
        }), r.dirty());
      else if (i.kind === "cuid")
        Fo.test(e.data) || (s = this._getOrReturnCtx(e, s), P(s, {
          validation: "cuid",
          code: C.invalid_string,
          message: i.message
        }), r.dirty());
      else if (i.kind === "cuid2")
        Lo.test(e.data) || (s = this._getOrReturnCtx(e, s), P(s, {
          validation: "cuid2",
          code: C.invalid_string,
          message: i.message
        }), r.dirty());
      else if (i.kind === "ulid")
        Uo.test(e.data) || (s = this._getOrReturnCtx(e, s), P(s, {
          validation: "ulid",
          code: C.invalid_string,
          message: i.message
        }), r.dirty());
      else if (i.kind === "url")
        try {
          new URL(e.data);
        } catch {
          s = this._getOrReturnCtx(e, s), P(s, {
            validation: "url",
            code: C.invalid_string,
            message: i.message
          }), r.dirty();
        }
      else i.kind === "regex" ? (i.regex.lastIndex = 0, i.regex.test(e.data) || (s = this._getOrReturnCtx(e, s), P(s, {
        validation: "regex",
        code: C.invalid_string,
        message: i.message
      }), r.dirty())) : i.kind === "trim" ? e.data = e.data.trim() : i.kind === "includes" ? e.data.includes(i.value, i.position) || (s = this._getOrReturnCtx(e, s), P(s, {
        code: C.invalid_string,
        validation: { includes: i.value, position: i.position },
        message: i.message
      }), r.dirty()) : i.kind === "toLowerCase" ? e.data = e.data.toLowerCase() : i.kind === "toUpperCase" ? e.data = e.data.toUpperCase() : i.kind === "startsWith" ? e.data.startsWith(i.value) || (s = this._getOrReturnCtx(e, s), P(s, {
        code: C.invalid_string,
        validation: { startsWith: i.value },
        message: i.message
      }), r.dirty()) : i.kind === "endsWith" ? e.data.endsWith(i.value) || (s = this._getOrReturnCtx(e, s), P(s, {
        code: C.invalid_string,
        validation: { endsWith: i.value },
        message: i.message
      }), r.dirty()) : i.kind === "datetime" ? tu(i).test(e.data) || (s = this._getOrReturnCtx(e, s), P(s, {
        code: C.invalid_string,
        validation: "datetime",
        message: i.message
      }), r.dirty()) : i.kind === "date" ? Qo.test(e.data) || (s = this._getOrReturnCtx(e, s), P(s, {
        code: C.invalid_string,
        validation: "date",
        message: i.message
      }), r.dirty()) : i.kind === "time" ? eu(i).test(e.data) || (s = this._getOrReturnCtx(e, s), P(s, {
        code: C.invalid_string,
        validation: "time",
        message: i.message
      }), r.dirty()) : i.kind === "duration" ? Bo.test(e.data) || (s = this._getOrReturnCtx(e, s), P(s, {
        validation: "duration",
        code: C.invalid_string,
        message: i.message
      }), r.dirty()) : i.kind === "ip" ? nu(e.data, i.version) || (s = this._getOrReturnCtx(e, s), P(s, {
        validation: "ip",
        code: C.invalid_string,
        message: i.message
      }), r.dirty()) : i.kind === "jwt" ? ru(e.data, i.alg) || (s = this._getOrReturnCtx(e, s), P(s, {
        validation: "jwt",
        code: C.invalid_string,
        message: i.message
      }), r.dirty()) : i.kind === "cidr" ? su(e.data, i.version) || (s = this._getOrReturnCtx(e, s), P(s, {
        validation: "cidr",
        code: C.invalid_string,
        message: i.message
      }), r.dirty()) : i.kind === "base64" ? Yo.test(e.data) || (s = this._getOrReturnCtx(e, s), P(s, {
        validation: "base64",
        code: C.invalid_string,
        message: i.message
      }), r.dirty()) : i.kind === "base64url" ? Xo.test(e.data) || (s = this._getOrReturnCtx(e, s), P(s, {
        validation: "base64url",
        code: C.invalid_string,
        message: i.message
      }), r.dirty()) : Y.assertNever(i);
    return { status: r.value, value: e.data };
  }
  _regex(e, t, r) {
    return this.refinement((s) => e.test(s), {
      validation: t,
      code: C.invalid_string,
      ...$.errToObj(r)
    });
  }
  _addCheck(e) {
    return new Qe({
      ...this._def,
      checks: [...this._def.checks, e]
    });
  }
  email(e) {
    return this._addCheck({ kind: "email", ...$.errToObj(e) });
  }
  url(e) {
    return this._addCheck({ kind: "url", ...$.errToObj(e) });
  }
  emoji(e) {
    return this._addCheck({ kind: "emoji", ...$.errToObj(e) });
  }
  uuid(e) {
    return this._addCheck({ kind: "uuid", ...$.errToObj(e) });
  }
  nanoid(e) {
    return this._addCheck({ kind: "nanoid", ...$.errToObj(e) });
  }
  cuid(e) {
    return this._addCheck({ kind: "cuid", ...$.errToObj(e) });
  }
  cuid2(e) {
    return this._addCheck({ kind: "cuid2", ...$.errToObj(e) });
  }
  ulid(e) {
    return this._addCheck({ kind: "ulid", ...$.errToObj(e) });
  }
  base64(e) {
    return this._addCheck({ kind: "base64", ...$.errToObj(e) });
  }
  base64url(e) {
    return this._addCheck({
      kind: "base64url",
      ...$.errToObj(e)
    });
  }
  jwt(e) {
    return this._addCheck({ kind: "jwt", ...$.errToObj(e) });
  }
  ip(e) {
    return this._addCheck({ kind: "ip", ...$.errToObj(e) });
  }
  cidr(e) {
    return this._addCheck({ kind: "cidr", ...$.errToObj(e) });
  }
  datetime(e) {
    return typeof e == "string" ? this._addCheck({
      kind: "datetime",
      precision: null,
      offset: !1,
      local: !1,
      message: e
    }) : this._addCheck({
      kind: "datetime",
      precision: typeof (e == null ? void 0 : e.precision) > "u" ? null : e == null ? void 0 : e.precision,
      offset: (e == null ? void 0 : e.offset) ?? !1,
      local: (e == null ? void 0 : e.local) ?? !1,
      ...$.errToObj(e == null ? void 0 : e.message)
    });
  }
  date(e) {
    return this._addCheck({ kind: "date", message: e });
  }
  time(e) {
    return typeof e == "string" ? this._addCheck({
      kind: "time",
      precision: null,
      message: e
    }) : this._addCheck({
      kind: "time",
      precision: typeof (e == null ? void 0 : e.precision) > "u" ? null : e == null ? void 0 : e.precision,
      ...$.errToObj(e == null ? void 0 : e.message)
    });
  }
  duration(e) {
    return this._addCheck({ kind: "duration", ...$.errToObj(e) });
  }
  regex(e, t) {
    return this._addCheck({
      kind: "regex",
      regex: e,
      ...$.errToObj(t)
    });
  }
  includes(e, t) {
    return this._addCheck({
      kind: "includes",
      value: e,
      position: t == null ? void 0 : t.position,
      ...$.errToObj(t == null ? void 0 : t.message)
    });
  }
  startsWith(e, t) {
    return this._addCheck({
      kind: "startsWith",
      value: e,
      ...$.errToObj(t)
    });
  }
  endsWith(e, t) {
    return this._addCheck({
      kind: "endsWith",
      value: e,
      ...$.errToObj(t)
    });
  }
  min(e, t) {
    return this._addCheck({
      kind: "min",
      value: e,
      ...$.errToObj(t)
    });
  }
  max(e, t) {
    return this._addCheck({
      kind: "max",
      value: e,
      ...$.errToObj(t)
    });
  }
  length(e, t) {
    return this._addCheck({
      kind: "length",
      value: e,
      ...$.errToObj(t)
    });
  }
  /**
   * Equivalent to `.min(1)`
   */
  nonempty(e) {
    return this.min(1, $.errToObj(e));
  }
  trim() {
    return new Qe({
      ...this._def,
      checks: [...this._def.checks, { kind: "trim" }]
    });
  }
  toLowerCase() {
    return new Qe({
      ...this._def,
      checks: [...this._def.checks, { kind: "toLowerCase" }]
    });
  }
  toUpperCase() {
    return new Qe({
      ...this._def,
      checks: [...this._def.checks, { kind: "toUpperCase" }]
    });
  }
  get isDatetime() {
    return !!this._def.checks.find((e) => e.kind === "datetime");
  }
  get isDate() {
    return !!this._def.checks.find((e) => e.kind === "date");
  }
  get isTime() {
    return !!this._def.checks.find((e) => e.kind === "time");
  }
  get isDuration() {
    return !!this._def.checks.find((e) => e.kind === "duration");
  }
  get isEmail() {
    return !!this._def.checks.find((e) => e.kind === "email");
  }
  get isURL() {
    return !!this._def.checks.find((e) => e.kind === "url");
  }
  get isEmoji() {
    return !!this._def.checks.find((e) => e.kind === "emoji");
  }
  get isUUID() {
    return !!this._def.checks.find((e) => e.kind === "uuid");
  }
  get isNANOID() {
    return !!this._def.checks.find((e) => e.kind === "nanoid");
  }
  get isCUID() {
    return !!this._def.checks.find((e) => e.kind === "cuid");
  }
  get isCUID2() {
    return !!this._def.checks.find((e) => e.kind === "cuid2");
  }
  get isULID() {
    return !!this._def.checks.find((e) => e.kind === "ulid");
  }
  get isIP() {
    return !!this._def.checks.find((e) => e.kind === "ip");
  }
  get isCIDR() {
    return !!this._def.checks.find((e) => e.kind === "cidr");
  }
  get isBase64() {
    return !!this._def.checks.find((e) => e.kind === "base64");
  }
  get isBase64url() {
    return !!this._def.checks.find((e) => e.kind === "base64url");
  }
  get minLength() {
    let e = null;
    for (const t of this._def.checks)
      t.kind === "min" && (e === null || t.value > e) && (e = t.value);
    return e;
  }
  get maxLength() {
    let e = null;
    for (const t of this._def.checks)
      t.kind === "max" && (e === null || t.value < e) && (e = t.value);
    return e;
  }
}
Qe.create = (n) => new Qe({
  checks: [],
  typeName: O.ZodString,
  coerce: (n == null ? void 0 : n.coerce) ?? !1,
  ...G(n)
});
function iu(n, e) {
  const t = (n.toString().split(".")[1] || "").length, r = (e.toString().split(".")[1] || "").length, s = t > r ? t : r, i = Number.parseInt(n.toFixed(s).replace(".", "")), o = Number.parseInt(e.toFixed(s).replace(".", ""));
  return i % o / 10 ** s;
}
class on extends H {
  constructor() {
    super(...arguments), this.min = this.gte, this.max = this.lte, this.step = this.multipleOf;
  }
  _parse(e) {
    if (this._def.coerce && (e.data = Number(e.data)), this._getType(e) !== M.number) {
      const i = this._getOrReturnCtx(e);
      return P(i, {
        code: C.invalid_type,
        expected: M.number,
        received: i.parsedType
      }), J;
    }
    let r;
    const s = new _e();
    for (const i of this._def.checks)
      i.kind === "int" ? Y.isInteger(e.data) || (r = this._getOrReturnCtx(e, r), P(r, {
        code: C.invalid_type,
        expected: "integer",
        received: "float",
        message: i.message
      }), s.dirty()) : i.kind === "min" ? (i.inclusive ? e.data < i.value : e.data <= i.value) && (r = this._getOrReturnCtx(e, r), P(r, {
        code: C.too_small,
        minimum: i.value,
        type: "number",
        inclusive: i.inclusive,
        exact: !1,
        message: i.message
      }), s.dirty()) : i.kind === "max" ? (i.inclusive ? e.data > i.value : e.data >= i.value) && (r = this._getOrReturnCtx(e, r), P(r, {
        code: C.too_big,
        maximum: i.value,
        type: "number",
        inclusive: i.inclusive,
        exact: !1,
        message: i.message
      }), s.dirty()) : i.kind === "multipleOf" ? iu(e.data, i.value) !== 0 && (r = this._getOrReturnCtx(e, r), P(r, {
        code: C.not_multiple_of,
        multipleOf: i.value,
        message: i.message
      }), s.dirty()) : i.kind === "finite" ? Number.isFinite(e.data) || (r = this._getOrReturnCtx(e, r), P(r, {
        code: C.not_finite,
        message: i.message
      }), s.dirty()) : Y.assertNever(i);
    return { status: s.value, value: e.data };
  }
  gte(e, t) {
    return this.setLimit("min", e, !0, $.toString(t));
  }
  gt(e, t) {
    return this.setLimit("min", e, !1, $.toString(t));
  }
  lte(e, t) {
    return this.setLimit("max", e, !0, $.toString(t));
  }
  lt(e, t) {
    return this.setLimit("max", e, !1, $.toString(t));
  }
  setLimit(e, t, r, s) {
    return new on({
      ...this._def,
      checks: [
        ...this._def.checks,
        {
          kind: e,
          value: t,
          inclusive: r,
          message: $.toString(s)
        }
      ]
    });
  }
  _addCheck(e) {
    return new on({
      ...this._def,
      checks: [...this._def.checks, e]
    });
  }
  int(e) {
    return this._addCheck({
      kind: "int",
      message: $.toString(e)
    });
  }
  positive(e) {
    return this._addCheck({
      kind: "min",
      value: 0,
      inclusive: !1,
      message: $.toString(e)
    });
  }
  negative(e) {
    return this._addCheck({
      kind: "max",
      value: 0,
      inclusive: !1,
      message: $.toString(e)
    });
  }
  nonpositive(e) {
    return this._addCheck({
      kind: "max",
      value: 0,
      inclusive: !0,
      message: $.toString(e)
    });
  }
  nonnegative(e) {
    return this._addCheck({
      kind: "min",
      value: 0,
      inclusive: !0,
      message: $.toString(e)
    });
  }
  multipleOf(e, t) {
    return this._addCheck({
      kind: "multipleOf",
      value: e,
      message: $.toString(t)
    });
  }
  finite(e) {
    return this._addCheck({
      kind: "finite",
      message: $.toString(e)
    });
  }
  safe(e) {
    return this._addCheck({
      kind: "min",
      inclusive: !0,
      value: Number.MIN_SAFE_INTEGER,
      message: $.toString(e)
    })._addCheck({
      kind: "max",
      inclusive: !0,
      value: Number.MAX_SAFE_INTEGER,
      message: $.toString(e)
    });
  }
  get minValue() {
    let e = null;
    for (const t of this._def.checks)
      t.kind === "min" && (e === null || t.value > e) && (e = t.value);
    return e;
  }
  get maxValue() {
    let e = null;
    for (const t of this._def.checks)
      t.kind === "max" && (e === null || t.value < e) && (e = t.value);
    return e;
  }
  get isInt() {
    return !!this._def.checks.find((e) => e.kind === "int" || e.kind === "multipleOf" && Y.isInteger(e.value));
  }
  get isFinite() {
    let e = null, t = null;
    for (const r of this._def.checks) {
      if (r.kind === "finite" || r.kind === "int" || r.kind === "multipleOf")
        return !0;
      r.kind === "min" ? (t === null || r.value > t) && (t = r.value) : r.kind === "max" && (e === null || r.value < e) && (e = r.value);
    }
    return Number.isFinite(t) && Number.isFinite(e);
  }
}
on.create = (n) => new on({
  checks: [],
  typeName: O.ZodNumber,
  coerce: (n == null ? void 0 : n.coerce) || !1,
  ...G(n)
});
class vn extends H {
  constructor() {
    super(...arguments), this.min = this.gte, this.max = this.lte;
  }
  _parse(e) {
    if (this._def.coerce)
      try {
        e.data = BigInt(e.data);
      } catch {
        return this._getInvalidInput(e);
      }
    if (this._getType(e) !== M.bigint)
      return this._getInvalidInput(e);
    let r;
    const s = new _e();
    for (const i of this._def.checks)
      i.kind === "min" ? (i.inclusive ? e.data < i.value : e.data <= i.value) && (r = this._getOrReturnCtx(e, r), P(r, {
        code: C.too_small,
        type: "bigint",
        minimum: i.value,
        inclusive: i.inclusive,
        message: i.message
      }), s.dirty()) : i.kind === "max" ? (i.inclusive ? e.data > i.value : e.data >= i.value) && (r = this._getOrReturnCtx(e, r), P(r, {
        code: C.too_big,
        type: "bigint",
        maximum: i.value,
        inclusive: i.inclusive,
        message: i.message
      }), s.dirty()) : i.kind === "multipleOf" ? e.data % i.value !== BigInt(0) && (r = this._getOrReturnCtx(e, r), P(r, {
        code: C.not_multiple_of,
        multipleOf: i.value,
        message: i.message
      }), s.dirty()) : Y.assertNever(i);
    return { status: s.value, value: e.data };
  }
  _getInvalidInput(e) {
    const t = this._getOrReturnCtx(e);
    return P(t, {
      code: C.invalid_type,
      expected: M.bigint,
      received: t.parsedType
    }), J;
  }
  gte(e, t) {
    return this.setLimit("min", e, !0, $.toString(t));
  }
  gt(e, t) {
    return this.setLimit("min", e, !1, $.toString(t));
  }
  lte(e, t) {
    return this.setLimit("max", e, !0, $.toString(t));
  }
  lt(e, t) {
    return this.setLimit("max", e, !1, $.toString(t));
  }
  setLimit(e, t, r, s) {
    return new vn({
      ...this._def,
      checks: [
        ...this._def.checks,
        {
          kind: e,
          value: t,
          inclusive: r,
          message: $.toString(s)
        }
      ]
    });
  }
  _addCheck(e) {
    return new vn({
      ...this._def,
      checks: [...this._def.checks, e]
    });
  }
  positive(e) {
    return this._addCheck({
      kind: "min",
      value: BigInt(0),
      inclusive: !1,
      message: $.toString(e)
    });
  }
  negative(e) {
    return this._addCheck({
      kind: "max",
      value: BigInt(0),
      inclusive: !1,
      message: $.toString(e)
    });
  }
  nonpositive(e) {
    return this._addCheck({
      kind: "max",
      value: BigInt(0),
      inclusive: !0,
      message: $.toString(e)
    });
  }
  nonnegative(e) {
    return this._addCheck({
      kind: "min",
      value: BigInt(0),
      inclusive: !0,
      message: $.toString(e)
    });
  }
  multipleOf(e, t) {
    return this._addCheck({
      kind: "multipleOf",
      value: e,
      message: $.toString(t)
    });
  }
  get minValue() {
    let e = null;
    for (const t of this._def.checks)
      t.kind === "min" && (e === null || t.value > e) && (e = t.value);
    return e;
  }
  get maxValue() {
    let e = null;
    for (const t of this._def.checks)
      t.kind === "max" && (e === null || t.value < e) && (e = t.value);
    return e;
  }
}
vn.create = (n) => new vn({
  checks: [],
  typeName: O.ZodBigInt,
  coerce: (n == null ? void 0 : n.coerce) ?? !1,
  ...G(n)
});
class Vr extends H {
  _parse(e) {
    if (this._def.coerce && (e.data = !!e.data), this._getType(e) !== M.boolean) {
      const r = this._getOrReturnCtx(e);
      return P(r, {
        code: C.invalid_type,
        expected: M.boolean,
        received: r.parsedType
      }), J;
    }
    return Ae(e.data);
  }
}
Vr.create = (n) => new Vr({
  typeName: O.ZodBoolean,
  coerce: (n == null ? void 0 : n.coerce) || !1,
  ...G(n)
});
class ir extends H {
  _parse(e) {
    if (this._def.coerce && (e.data = new Date(e.data)), this._getType(e) !== M.date) {
      const i = this._getOrReturnCtx(e);
      return P(i, {
        code: C.invalid_type,
        expected: M.date,
        received: i.parsedType
      }), J;
    }
    if (Number.isNaN(e.data.getTime())) {
      const i = this._getOrReturnCtx(e);
      return P(i, {
        code: C.invalid_date
      }), J;
    }
    const r = new _e();
    let s;
    for (const i of this._def.checks)
      i.kind === "min" ? e.data.getTime() < i.value && (s = this._getOrReturnCtx(e, s), P(s, {
        code: C.too_small,
        message: i.message,
        inclusive: !0,
        exact: !1,
        minimum: i.value,
        type: "date"
      }), r.dirty()) : i.kind === "max" ? e.data.getTime() > i.value && (s = this._getOrReturnCtx(e, s), P(s, {
        code: C.too_big,
        message: i.message,
        inclusive: !0,
        exact: !1,
        maximum: i.value,
        type: "date"
      }), r.dirty()) : Y.assertNever(i);
    return {
      status: r.value,
      value: new Date(e.data.getTime())
    };
  }
  _addCheck(e) {
    return new ir({
      ...this._def,
      checks: [...this._def.checks, e]
    });
  }
  min(e, t) {
    return this._addCheck({
      kind: "min",
      value: e.getTime(),
      message: $.toString(t)
    });
  }
  max(e, t) {
    return this._addCheck({
      kind: "max",
      value: e.getTime(),
      message: $.toString(t)
    });
  }
  get minDate() {
    let e = null;
    for (const t of this._def.checks)
      t.kind === "min" && (e === null || t.value > e) && (e = t.value);
    return e != null ? new Date(e) : null;
  }
  get maxDate() {
    let e = null;
    for (const t of this._def.checks)
      t.kind === "max" && (e === null || t.value < e) && (e = t.value);
    return e != null ? new Date(e) : null;
  }
}
ir.create = (n) => new ir({
  checks: [],
  coerce: (n == null ? void 0 : n.coerce) || !1,
  typeName: O.ZodDate,
  ...G(n)
});
class Xs extends H {
  _parse(e) {
    if (this._getType(e) !== M.symbol) {
      const r = this._getOrReturnCtx(e);
      return P(r, {
        code: C.invalid_type,
        expected: M.symbol,
        received: r.parsedType
      }), J;
    }
    return Ae(e.data);
  }
}
Xs.create = (n) => new Xs({
  typeName: O.ZodSymbol,
  ...G(n)
});
class Wr extends H {
  _parse(e) {
    if (this._getType(e) !== M.undefined) {
      const r = this._getOrReturnCtx(e);
      return P(r, {
        code: C.invalid_type,
        expected: M.undefined,
        received: r.parsedType
      }), J;
    }
    return Ae(e.data);
  }
}
Wr.create = (n) => new Wr({
  typeName: O.ZodUndefined,
  ...G(n)
});
class Hr extends H {
  _parse(e) {
    if (this._getType(e) !== M.null) {
      const r = this._getOrReturnCtx(e);
      return P(r, {
        code: C.invalid_type,
        expected: M.null,
        received: r.parsedType
      }), J;
    }
    return Ae(e.data);
  }
}
Hr.create = (n) => new Hr({
  typeName: O.ZodNull,
  ...G(n)
});
class wn extends H {
  constructor() {
    super(...arguments), this._any = !0;
  }
  _parse(e) {
    return Ae(e.data);
  }
}
wn.create = (n) => new wn({
  typeName: O.ZodAny,
  ...G(n)
});
class Qs extends H {
  constructor() {
    super(...arguments), this._unknown = !0;
  }
  _parse(e) {
    return Ae(e.data);
  }
}
Qs.create = (n) => new Qs({
  typeName: O.ZodUnknown,
  ...G(n)
});
class pt extends H {
  _parse(e) {
    const t = this._getOrReturnCtx(e);
    return P(t, {
      code: C.invalid_type,
      expected: M.never,
      received: t.parsedType
    }), J;
  }
}
pt.create = (n) => new pt({
  typeName: O.ZodNever,
  ...G(n)
});
class ei extends H {
  _parse(e) {
    if (this._getType(e) !== M.undefined) {
      const r = this._getOrReturnCtx(e);
      return P(r, {
        code: C.invalid_type,
        expected: M.void,
        received: r.parsedType
      }), J;
    }
    return Ae(e.data);
  }
}
ei.create = (n) => new ei({
  typeName: O.ZodVoid,
  ...G(n)
});
class $e extends H {
  _parse(e) {
    const { ctx: t, status: r } = this._processInputParams(e), s = this._def;
    if (t.parsedType !== M.array)
      return P(t, {
        code: C.invalid_type,
        expected: M.array,
        received: t.parsedType
      }), J;
    if (s.exactLength !== null) {
      const o = t.data.length > s.exactLength.value, a = t.data.length < s.exactLength.value;
      (o || a) && (P(t, {
        code: o ? C.too_big : C.too_small,
        minimum: a ? s.exactLength.value : void 0,
        maximum: o ? s.exactLength.value : void 0,
        type: "array",
        inclusive: !0,
        exact: !0,
        message: s.exactLength.message
      }), r.dirty());
    }
    if (s.minLength !== null && t.data.length < s.minLength.value && (P(t, {
      code: C.too_small,
      minimum: s.minLength.value,
      type: "array",
      inclusive: !0,
      exact: !1,
      message: s.minLength.message
    }), r.dirty()), s.maxLength !== null && t.data.length > s.maxLength.value && (P(t, {
      code: C.too_big,
      maximum: s.maxLength.value,
      type: "array",
      inclusive: !0,
      exact: !1,
      message: s.maxLength.message
    }), r.dirty()), t.common.async)
      return Promise.all([...t.data].map((o, a) => s.type._parseAsync(new Le(t, o, t.path, a)))).then((o) => _e.mergeArray(r, o));
    const i = [...t.data].map((o, a) => s.type._parseSync(new Le(t, o, t.path, a)));
    return _e.mergeArray(r, i);
  }
  get element() {
    return this._def.type;
  }
  min(e, t) {
    return new $e({
      ...this._def,
      minLength: { value: e, message: $.toString(t) }
    });
  }
  max(e, t) {
    return new $e({
      ...this._def,
      maxLength: { value: e, message: $.toString(t) }
    });
  }
  length(e, t) {
    return new $e({
      ...this._def,
      exactLength: { value: e, message: $.toString(t) }
    });
  }
  nonempty(e) {
    return this.min(1, e);
  }
}
$e.create = (n, e) => new $e({
  type: n,
  minLength: null,
  maxLength: null,
  exactLength: null,
  typeName: O.ZodArray,
  ...G(e)
});
function Lt(n) {
  if (n instanceof ue) {
    const e = {};
    for (const t in n.shape) {
      const r = n.shape[t];
      e[t] = et.create(Lt(r));
    }
    return new ue({
      ...n._def,
      shape: () => e
    });
  } else return n instanceof $e ? new $e({
    ...n._def,
    type: Lt(n.element)
  }) : n instanceof et ? et.create(Lt(n.unwrap())) : n instanceof Mt ? Mt.create(Lt(n.unwrap())) : n instanceof Nt ? Nt.create(n.items.map((e) => Lt(e))) : n;
}
class ue extends H {
  constructor() {
    super(...arguments), this._cached = null, this.nonstrict = this.passthrough, this.augment = this.extend;
  }
  _getCached() {
    if (this._cached !== null)
      return this._cached;
    const e = this._def.shape(), t = Y.objectKeys(e);
    return this._cached = { shape: e, keys: t }, this._cached;
  }
  _parse(e) {
    if (this._getType(e) !== M.object) {
      const l = this._getOrReturnCtx(e);
      return P(l, {
        code: C.invalid_type,
        expected: M.object,
        received: l.parsedType
      }), J;
    }
    const { status: r, ctx: s } = this._processInputParams(e), { shape: i, keys: o } = this._getCached(), a = [];
    if (!(this._def.catchall instanceof pt && this._def.unknownKeys === "strip"))
      for (const l in s.data)
        o.includes(l) || a.push(l);
    const c = [];
    for (const l of o) {
      const f = i[l], d = s.data[l];
      c.push({
        key: { status: "valid", value: l },
        value: f._parse(new Le(s, d, s.path, l)),
        alwaysSet: l in s.data
      });
    }
    if (this._def.catchall instanceof pt) {
      const l = this._def.unknownKeys;
      if (l === "passthrough")
        for (const f of a)
          c.push({
            key: { status: "valid", value: f },
            value: { status: "valid", value: s.data[f] }
          });
      else if (l === "strict")
        a.length > 0 && (P(s, {
          code: C.unrecognized_keys,
          keys: a
        }), r.dirty());
      else if (l !== "strip") throw new Error("Internal ZodObject error: invalid unknownKeys value.");
    } else {
      const l = this._def.catchall;
      for (const f of a) {
        const d = s.data[f];
        c.push({
          key: { status: "valid", value: f },
          value: l._parse(
            new Le(s, d, s.path, f)
            //, ctx.child(key), value, getParsedType(value)
          ),
          alwaysSet: f in s.data
        });
      }
    }
    return s.common.async ? Promise.resolve().then(async () => {
      const l = [];
      for (const f of c) {
        const d = await f.key, m = await f.value;
        l.push({
          key: d,
          value: m,
          alwaysSet: f.alwaysSet
        });
      }
      return l;
    }).then((l) => _e.mergeObjectSync(r, l)) : _e.mergeObjectSync(r, c);
  }
  get shape() {
    return this._def.shape();
  }
  strict(e) {
    return $.errToObj, new ue({
      ...this._def,
      unknownKeys: "strict",
      ...e !== void 0 ? {
        errorMap: (t, r) => {
          var i, o;
          const s = ((o = (i = this._def).errorMap) == null ? void 0 : o.call(i, t, r).message) ?? r.defaultError;
          return t.code === "unrecognized_keys" ? {
            message: $.errToObj(e).message ?? s
          } : {
            message: s
          };
        }
      } : {}
    });
  }
  strip() {
    return new ue({
      ...this._def,
      unknownKeys: "strip"
    });
  }
  passthrough() {
    return new ue({
      ...this._def,
      unknownKeys: "passthrough"
    });
  }
  // const AugmentFactory =
  //   <Def extends ZodObjectDef>(def: Def) =>
  //   <Augmentation extends ZodRawShape>(
  //     augmentation: Augmentation
  //   ): ZodObject<
  //     extendShape<ReturnType<Def["shape"]>, Augmentation>,
  //     Def["unknownKeys"],
  //     Def["catchall"]
  //   > => {
  //     return new ZodObject({
  //       ...def,
  //       shape: () => ({
  //         ...def.shape(),
  //         ...augmentation,
  //       }),
  //     }) as any;
  //   };
  extend(e) {
    return new ue({
      ...this._def,
      shape: () => ({
        ...this._def.shape(),
        ...e
      })
    });
  }
  /**
   * Prior to zod@1.0.12 there was a bug in the
   * inferred type of merged objects. Please
   * upgrade if you are experiencing issues.
   */
  merge(e) {
    return new ue({
      unknownKeys: e._def.unknownKeys,
      catchall: e._def.catchall,
      shape: () => ({
        ...this._def.shape(),
        ...e._def.shape()
      }),
      typeName: O.ZodObject
    });
  }
  // merge<
  //   Incoming extends AnyZodObject,
  //   Augmentation extends Incoming["shape"],
  //   NewOutput extends {
  //     [k in keyof Augmentation | keyof Output]: k extends keyof Augmentation
  //       ? Augmentation[k]["_output"]
  //       : k extends keyof Output
  //       ? Output[k]
  //       : never;
  //   },
  //   NewInput extends {
  //     [k in keyof Augmentation | keyof Input]: k extends keyof Augmentation
  //       ? Augmentation[k]["_input"]
  //       : k extends keyof Input
  //       ? Input[k]
  //       : never;
  //   }
  // >(
  //   merging: Incoming
  // ): ZodObject<
  //   extendShape<T, ReturnType<Incoming["_def"]["shape"]>>,
  //   Incoming["_def"]["unknownKeys"],
  //   Incoming["_def"]["catchall"],
  //   NewOutput,
  //   NewInput
  // > {
  //   const merged: any = new ZodObject({
  //     unknownKeys: merging._def.unknownKeys,
  //     catchall: merging._def.catchall,
  //     shape: () =>
  //       objectUtil.mergeShapes(this._def.shape(), merging._def.shape()),
  //     typeName: ZodFirstPartyTypeKind.ZodObject,
  //   }) as any;
  //   return merged;
  // }
  setKey(e, t) {
    return this.augment({ [e]: t });
  }
  // merge<Incoming extends AnyZodObject>(
  //   merging: Incoming
  // ): //ZodObject<T & Incoming["_shape"], UnknownKeys, Catchall> = (merging) => {
  // ZodObject<
  //   extendShape<T, ReturnType<Incoming["_def"]["shape"]>>,
  //   Incoming["_def"]["unknownKeys"],
  //   Incoming["_def"]["catchall"]
  // > {
  //   // const mergedShape = objectUtil.mergeShapes(
  //   //   this._def.shape(),
  //   //   merging._def.shape()
  //   // );
  //   const merged: any = new ZodObject({
  //     unknownKeys: merging._def.unknownKeys,
  //     catchall: merging._def.catchall,
  //     shape: () =>
  //       objectUtil.mergeShapes(this._def.shape(), merging._def.shape()),
  //     typeName: ZodFirstPartyTypeKind.ZodObject,
  //   }) as any;
  //   return merged;
  // }
  catchall(e) {
    return new ue({
      ...this._def,
      catchall: e
    });
  }
  pick(e) {
    const t = {};
    for (const r of Y.objectKeys(e))
      e[r] && this.shape[r] && (t[r] = this.shape[r]);
    return new ue({
      ...this._def,
      shape: () => t
    });
  }
  omit(e) {
    const t = {};
    for (const r of Y.objectKeys(this.shape))
      e[r] || (t[r] = this.shape[r]);
    return new ue({
      ...this._def,
      shape: () => t
    });
  }
  /**
   * @deprecated
   */
  deepPartial() {
    return Lt(this);
  }
  partial(e) {
    const t = {};
    for (const r of Y.objectKeys(this.shape)) {
      const s = this.shape[r];
      e && !e[r] ? t[r] = s : t[r] = s.optional();
    }
    return new ue({
      ...this._def,
      shape: () => t
    });
  }
  required(e) {
    const t = {};
    for (const r of Y.objectKeys(this.shape))
      if (e && !e[r])
        t[r] = this.shape[r];
      else {
        let i = this.shape[r];
        for (; i instanceof et; )
          i = i._def.innerType;
        t[r] = i;
      }
    return new ue({
      ...this._def,
      shape: () => t
    });
  }
  keyof() {
    return na(Y.objectKeys(this.shape));
  }
}
ue.create = (n, e) => new ue({
  shape: () => n,
  unknownKeys: "strip",
  catchall: pt.create(),
  typeName: O.ZodObject,
  ...G(e)
});
ue.strictCreate = (n, e) => new ue({
  shape: () => n,
  unknownKeys: "strict",
  catchall: pt.create(),
  typeName: O.ZodObject,
  ...G(e)
});
ue.lazycreate = (n, e) => new ue({
  shape: n,
  unknownKeys: "strip",
  catchall: pt.create(),
  typeName: O.ZodObject,
  ...G(e)
});
class ar extends H {
  _parse(e) {
    const { ctx: t } = this._processInputParams(e), r = this._def.options;
    function s(i) {
      for (const a of i)
        if (a.result.status === "valid")
          return a.result;
      for (const a of i)
        if (a.result.status === "dirty")
          return t.common.issues.push(...a.ctx.common.issues), a.result;
      const o = i.map((a) => new Fe(a.ctx.common.issues));
      return P(t, {
        code: C.invalid_union,
        unionErrors: o
      }), J;
    }
    if (t.common.async)
      return Promise.all(r.map(async (i) => {
        const o = {
          ...t,
          common: {
            ...t.common,
            issues: []
          },
          parent: null
        };
        return {
          result: await i._parseAsync({
            data: t.data,
            path: t.path,
            parent: o
          }),
          ctx: o
        };
      })).then(s);
    {
      let i;
      const o = [];
      for (const c of r) {
        const l = {
          ...t,
          common: {
            ...t.common,
            issues: []
          },
          parent: null
        }, f = c._parseSync({
          data: t.data,
          path: t.path,
          parent: l
        });
        if (f.status === "valid")
          return f;
        f.status === "dirty" && !i && (i = { result: f, ctx: l }), l.common.issues.length && o.push(l.common.issues);
      }
      if (i)
        return t.common.issues.push(...i.ctx.common.issues), i.result;
      const a = o.map((c) => new Fe(c));
      return P(t, {
        code: C.invalid_union,
        unionErrors: a
      }), J;
    }
  }
  get options() {
    return this._def.options;
  }
}
ar.create = (n, e) => new ar({
  options: n,
  typeName: O.ZodUnion,
  ...G(e)
});
const Be = (n) => n instanceof cr ? Be(n.schema) : n instanceof Dt ? Be(n.innerType()) : n instanceof lr ? [n.value] : n instanceof Pt ? n.options : n instanceof Yr ? Y.objectValues(n.enum) : n instanceof pr ? Be(n._def.innerType) : n instanceof Wr ? [void 0] : n instanceof Hr ? [null] : n instanceof et ? [void 0, ...Be(n.unwrap())] : n instanceof Mt ? [null, ...Be(n.unwrap())] : n instanceof ra || n instanceof hr ? Be(n.unwrap()) : n instanceof fr ? Be(n._def.innerType) : [];
class bs extends H {
  _parse(e) {
    const { ctx: t } = this._processInputParams(e);
    if (t.parsedType !== M.object)
      return P(t, {
        code: C.invalid_type,
        expected: M.object,
        received: t.parsedType
      }), J;
    const r = this.discriminator, s = t.data[r], i = this.optionsMap.get(s);
    return i ? t.common.async ? i._parseAsync({
      data: t.data,
      path: t.path,
      parent: t
    }) : i._parseSync({
      data: t.data,
      path: t.path,
      parent: t
    }) : (P(t, {
      code: C.invalid_union_discriminator,
      options: Array.from(this.optionsMap.keys()),
      path: [r]
    }), J);
  }
  get discriminator() {
    return this._def.discriminator;
  }
  get options() {
    return this._def.options;
  }
  get optionsMap() {
    return this._def.optionsMap;
  }
  /**
   * The constructor of the discriminated union schema. Its behaviour is very similar to that of the normal z.union() constructor.
   * However, it only allows a union of objects, all of which need to share a discriminator property. This property must
   * have a different value for each object in the union.
   * @param discriminator the name of the discriminator property
   * @param types an array of object schemas
   * @param params
   */
  static create(e, t, r) {
    const s = /* @__PURE__ */ new Map();
    for (const i of t) {
      const o = Be(i.shape[e]);
      if (!o.length)
        throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);
      for (const a of o) {
        if (s.has(a))
          throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(a)}`);
        s.set(a, i);
      }
    }
    return new bs({
      typeName: O.ZodDiscriminatedUnion,
      discriminator: e,
      options: t,
      optionsMap: s,
      ...G(r)
    });
  }
}
function Kr(n, e) {
  const t = st(n), r = st(e);
  if (n === e)
    return { valid: !0, data: n };
  if (t === M.object && r === M.object) {
    const s = Y.objectKeys(e), i = Y.objectKeys(n).filter((a) => s.indexOf(a) !== -1), o = { ...n, ...e };
    for (const a of i) {
      const c = Kr(n[a], e[a]);
      if (!c.valid)
        return { valid: !1 };
      o[a] = c.data;
    }
    return { valid: !0, data: o };
  } else if (t === M.array && r === M.array) {
    if (n.length !== e.length)
      return { valid: !1 };
    const s = [];
    for (let i = 0; i < n.length; i++) {
      const o = n[i], a = e[i], c = Kr(o, a);
      if (!c.valid)
        return { valid: !1 };
      s.push(c.data);
    }
    return { valid: !0, data: s };
  } else return t === M.date && r === M.date && +n == +e ? { valid: !0, data: n } : { valid: !1 };
}
class or extends H {
  _parse(e) {
    const { status: t, ctx: r } = this._processInputParams(e), s = (i, o) => {
      if (Hs(i) || Hs(o))
        return J;
      const a = Kr(i.value, o.value);
      return a.valid ? ((Ks(i) || Ks(o)) && t.dirty(), { status: t.value, value: a.data }) : (P(r, {
        code: C.invalid_intersection_types
      }), J);
    };
    return r.common.async ? Promise.all([
      this._def.left._parseAsync({
        data: r.data,
        path: r.path,
        parent: r
      }),
      this._def.right._parseAsync({
        data: r.data,
        path: r.path,
        parent: r
      })
    ]).then(([i, o]) => s(i, o)) : s(this._def.left._parseSync({
      data: r.data,
      path: r.path,
      parent: r
    }), this._def.right._parseSync({
      data: r.data,
      path: r.path,
      parent: r
    }));
  }
}
or.create = (n, e, t) => new or({
  left: n,
  right: e,
  typeName: O.ZodIntersection,
  ...G(t)
});
class Nt extends H {
  _parse(e) {
    const { status: t, ctx: r } = this._processInputParams(e);
    if (r.parsedType !== M.array)
      return P(r, {
        code: C.invalid_type,
        expected: M.array,
        received: r.parsedType
      }), J;
    if (r.data.length < this._def.items.length)
      return P(r, {
        code: C.too_small,
        minimum: this._def.items.length,
        inclusive: !0,
        exact: !1,
        type: "array"
      }), J;
    !this._def.rest && r.data.length > this._def.items.length && (P(r, {
      code: C.too_big,
      maximum: this._def.items.length,
      inclusive: !0,
      exact: !1,
      type: "array"
    }), t.dirty());
    const i = [...r.data].map((o, a) => {
      const c = this._def.items[a] || this._def.rest;
      return c ? c._parse(new Le(r, o, r.path, a)) : null;
    }).filter((o) => !!o);
    return r.common.async ? Promise.all(i).then((o) => _e.mergeArray(t, o)) : _e.mergeArray(t, i);
  }
  get items() {
    return this._def.items;
  }
  rest(e) {
    return new Nt({
      ...this._def,
      rest: e
    });
  }
}
Nt.create = (n, e) => {
  if (!Array.isArray(n))
    throw new Error("You must pass an array of schemas to z.tuple([ ... ])");
  return new Nt({
    items: n,
    typeName: O.ZodTuple,
    rest: null,
    ...G(e)
  });
};
class ur extends H {
  get keySchema() {
    return this._def.keyType;
  }
  get valueSchema() {
    return this._def.valueType;
  }
  _parse(e) {
    const { status: t, ctx: r } = this._processInputParams(e);
    if (r.parsedType !== M.object)
      return P(r, {
        code: C.invalid_type,
        expected: M.object,
        received: r.parsedType
      }), J;
    const s = [], i = this._def.keyType, o = this._def.valueType;
    for (const a in r.data)
      s.push({
        key: i._parse(new Le(r, a, r.path, a)),
        value: o._parse(new Le(r, r.data[a], r.path, a)),
        alwaysSet: a in r.data
      });
    return r.common.async ? _e.mergeObjectAsync(t, s) : _e.mergeObjectSync(t, s);
  }
  get element() {
    return this._def.valueType;
  }
  static create(e, t, r) {
    return t instanceof H ? new ur({
      keyType: e,
      valueType: t,
      typeName: O.ZodRecord,
      ...G(r)
    }) : new ur({
      keyType: Qe.create(),
      valueType: e,
      typeName: O.ZodRecord,
      ...G(t)
    });
  }
}
class ti extends H {
  get keySchema() {
    return this._def.keyType;
  }
  get valueSchema() {
    return this._def.valueType;
  }
  _parse(e) {
    const { status: t, ctx: r } = this._processInputParams(e);
    if (r.parsedType !== M.map)
      return P(r, {
        code: C.invalid_type,
        expected: M.map,
        received: r.parsedType
      }), J;
    const s = this._def.keyType, i = this._def.valueType, o = [...r.data.entries()].map(([a, c], l) => ({
      key: s._parse(new Le(r, a, r.path, [l, "key"])),
      value: i._parse(new Le(r, c, r.path, [l, "value"]))
    }));
    if (r.common.async) {
      const a = /* @__PURE__ */ new Map();
      return Promise.resolve().then(async () => {
        for (const c of o) {
          const l = await c.key, f = await c.value;
          if (l.status === "aborted" || f.status === "aborted")
            return J;
          (l.status === "dirty" || f.status === "dirty") && t.dirty(), a.set(l.value, f.value);
        }
        return { status: t.value, value: a };
      });
    } else {
      const a = /* @__PURE__ */ new Map();
      for (const c of o) {
        const l = c.key, f = c.value;
        if (l.status === "aborted" || f.status === "aborted")
          return J;
        (l.status === "dirty" || f.status === "dirty") && t.dirty(), a.set(l.value, f.value);
      }
      return { status: t.value, value: a };
    }
  }
}
ti.create = (n, e, t) => new ti({
  valueType: e,
  keyType: n,
  typeName: O.ZodMap,
  ...G(t)
});
class bn extends H {
  _parse(e) {
    const { status: t, ctx: r } = this._processInputParams(e);
    if (r.parsedType !== M.set)
      return P(r, {
        code: C.invalid_type,
        expected: M.set,
        received: r.parsedType
      }), J;
    const s = this._def;
    s.minSize !== null && r.data.size < s.minSize.value && (P(r, {
      code: C.too_small,
      minimum: s.minSize.value,
      type: "set",
      inclusive: !0,
      exact: !1,
      message: s.minSize.message
    }), t.dirty()), s.maxSize !== null && r.data.size > s.maxSize.value && (P(r, {
      code: C.too_big,
      maximum: s.maxSize.value,
      type: "set",
      inclusive: !0,
      exact: !1,
      message: s.maxSize.message
    }), t.dirty());
    const i = this._def.valueType;
    function o(c) {
      const l = /* @__PURE__ */ new Set();
      for (const f of c) {
        if (f.status === "aborted")
          return J;
        f.status === "dirty" && t.dirty(), l.add(f.value);
      }
      return { status: t.value, value: l };
    }
    const a = [...r.data.values()].map((c, l) => i._parse(new Le(r, c, r.path, l)));
    return r.common.async ? Promise.all(a).then((c) => o(c)) : o(a);
  }
  min(e, t) {
    return new bn({
      ...this._def,
      minSize: { value: e, message: $.toString(t) }
    });
  }
  max(e, t) {
    return new bn({
      ...this._def,
      maxSize: { value: e, message: $.toString(t) }
    });
  }
  size(e, t) {
    return this.min(e, t).max(e, t);
  }
  nonempty(e) {
    return this.min(1, e);
  }
}
bn.create = (n, e) => new bn({
  valueType: n,
  minSize: null,
  maxSize: null,
  typeName: O.ZodSet,
  ...G(e)
});
class cr extends H {
  get schema() {
    return this._def.getter();
  }
  _parse(e) {
    const { ctx: t } = this._processInputParams(e);
    return this._def.getter()._parse({ data: t.data, path: t.path, parent: t });
  }
}
cr.create = (n, e) => new cr({
  getter: n,
  typeName: O.ZodLazy,
  ...G(e)
});
class lr extends H {
  _parse(e) {
    if (e.data !== this._def.value) {
      const t = this._getOrReturnCtx(e);
      return P(t, {
        received: t.data,
        code: C.invalid_literal,
        expected: this._def.value
      }), J;
    }
    return { status: "valid", value: e.data };
  }
  get value() {
    return this._def.value;
  }
}
lr.create = (n, e) => new lr({
  value: n,
  typeName: O.ZodLiteral,
  ...G(e)
});
function na(n, e) {
  return new Pt({
    values: n,
    typeName: O.ZodEnum,
    ...G(e)
  });
}
class Pt extends H {
  _parse(e) {
    if (typeof e.data != "string") {
      const t = this._getOrReturnCtx(e), r = this._def.values;
      return P(t, {
        expected: Y.joinValues(r),
        received: t.parsedType,
        code: C.invalid_type
      }), J;
    }
    if (this._cache || (this._cache = new Set(this._def.values)), !this._cache.has(e.data)) {
      const t = this._getOrReturnCtx(e), r = this._def.values;
      return P(t, {
        received: t.data,
        code: C.invalid_enum_value,
        options: r
      }), J;
    }
    return Ae(e.data);
  }
  get options() {
    return this._def.values;
  }
  get enum() {
    const e = {};
    for (const t of this._def.values)
      e[t] = t;
    return e;
  }
  get Values() {
    const e = {};
    for (const t of this._def.values)
      e[t] = t;
    return e;
  }
  get Enum() {
    const e = {};
    for (const t of this._def.values)
      e[t] = t;
    return e;
  }
  extract(e, t = this._def) {
    return Pt.create(e, {
      ...this._def,
      ...t
    });
  }
  exclude(e, t = this._def) {
    return Pt.create(this.options.filter((r) => !e.includes(r)), {
      ...this._def,
      ...t
    });
  }
}
Pt.create = na;
class Yr extends H {
  _parse(e) {
    const t = Y.getValidEnumValues(this._def.values), r = this._getOrReturnCtx(e);
    if (r.parsedType !== M.string && r.parsedType !== M.number) {
      const s = Y.objectValues(t);
      return P(r, {
        expected: Y.joinValues(s),
        received: r.parsedType,
        code: C.invalid_type
      }), J;
    }
    if (this._cache || (this._cache = new Set(Y.getValidEnumValues(this._def.values))), !this._cache.has(e.data)) {
      const s = Y.objectValues(t);
      return P(r, {
        received: r.data,
        code: C.invalid_enum_value,
        options: s
      }), J;
    }
    return Ae(e.data);
  }
  get enum() {
    return this._def.values;
  }
}
Yr.create = (n, e) => new Yr({
  values: n,
  typeName: O.ZodNativeEnum,
  ...G(e)
});
class dr extends H {
  unwrap() {
    return this._def.type;
  }
  _parse(e) {
    const { ctx: t } = this._processInputParams(e);
    if (t.parsedType !== M.promise && t.common.async === !1)
      return P(t, {
        code: C.invalid_type,
        expected: M.promise,
        received: t.parsedType
      }), J;
    const r = t.parsedType === M.promise ? t.data : Promise.resolve(t.data);
    return Ae(r.then((s) => this._def.type.parseAsync(s, {
      path: t.path,
      errorMap: t.common.contextualErrorMap
    })));
  }
}
dr.create = (n, e) => new dr({
  type: n,
  typeName: O.ZodPromise,
  ...G(e)
});
class Dt extends H {
  innerType() {
    return this._def.schema;
  }
  sourceType() {
    return this._def.schema._def.typeName === O.ZodEffects ? this._def.schema.sourceType() : this._def.schema;
  }
  _parse(e) {
    const { status: t, ctx: r } = this._processInputParams(e), s = this._def.effect || null, i = {
      addIssue: (o) => {
        P(r, o), o.fatal ? t.abort() : t.dirty();
      },
      get path() {
        return r.path;
      }
    };
    if (i.addIssue = i.addIssue.bind(i), s.type === "preprocess") {
      const o = s.transform(r.data, i);
      if (r.common.async)
        return Promise.resolve(o).then(async (a) => {
          if (t.value === "aborted")
            return J;
          const c = await this._def.schema._parseAsync({
            data: a,
            path: r.path,
            parent: r
          });
          return c.status === "aborted" ? J : c.status === "dirty" || t.value === "dirty" ? fn(c.value) : c;
        });
      {
        if (t.value === "aborted")
          return J;
        const a = this._def.schema._parseSync({
          data: o,
          path: r.path,
          parent: r
        });
        return a.status === "aborted" ? J : a.status === "dirty" || t.value === "dirty" ? fn(a.value) : a;
      }
    }
    if (s.type === "refinement") {
      const o = (a) => {
        const c = s.refinement(a, i);
        if (r.common.async)
          return Promise.resolve(c);
        if (c instanceof Promise)
          throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");
        return a;
      };
      if (r.common.async === !1) {
        const a = this._def.schema._parseSync({
          data: r.data,
          path: r.path,
          parent: r
        });
        return a.status === "aborted" ? J : (a.status === "dirty" && t.dirty(), o(a.value), { status: t.value, value: a.value });
      } else
        return this._def.schema._parseAsync({ data: r.data, path: r.path, parent: r }).then((a) => a.status === "aborted" ? J : (a.status === "dirty" && t.dirty(), o(a.value).then(() => ({ status: t.value, value: a.value }))));
    }
    if (s.type === "transform")
      if (r.common.async === !1) {
        const o = this._def.schema._parseSync({
          data: r.data,
          path: r.path,
          parent: r
        });
        if (!an(o))
          return J;
        const a = s.transform(o.value, i);
        if (a instanceof Promise)
          throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");
        return { status: t.value, value: a };
      } else
        return this._def.schema._parseAsync({ data: r.data, path: r.path, parent: r }).then((o) => an(o) ? Promise.resolve(s.transform(o.value, i)).then((a) => ({
          status: t.value,
          value: a
        })) : J);
    Y.assertNever(s);
  }
}
Dt.create = (n, e, t) => new Dt({
  schema: n,
  typeName: O.ZodEffects,
  effect: e,
  ...G(t)
});
Dt.createWithPreprocess = (n, e, t) => new Dt({
  schema: e,
  effect: { type: "preprocess", transform: n },
  typeName: O.ZodEffects,
  ...G(t)
});
class et extends H {
  _parse(e) {
    return this._getType(e) === M.undefined ? Ae(void 0) : this._def.innerType._parse(e);
  }
  unwrap() {
    return this._def.innerType;
  }
}
et.create = (n, e) => new et({
  innerType: n,
  typeName: O.ZodOptional,
  ...G(e)
});
class Mt extends H {
  _parse(e) {
    return this._getType(e) === M.null ? Ae(null) : this._def.innerType._parse(e);
  }
  unwrap() {
    return this._def.innerType;
  }
}
Mt.create = (n, e) => new Mt({
  innerType: n,
  typeName: O.ZodNullable,
  ...G(e)
});
class pr extends H {
  _parse(e) {
    const { ctx: t } = this._processInputParams(e);
    let r = t.data;
    return t.parsedType === M.undefined && (r = this._def.defaultValue()), this._def.innerType._parse({
      data: r,
      path: t.path,
      parent: t
    });
  }
  removeDefault() {
    return this._def.innerType;
  }
}
pr.create = (n, e) => new pr({
  innerType: n,
  typeName: O.ZodDefault,
  defaultValue: typeof e.default == "function" ? e.default : () => e.default,
  ...G(e)
});
class fr extends H {
  _parse(e) {
    const { ctx: t } = this._processInputParams(e), r = {
      ...t,
      common: {
        ...t.common,
        issues: []
      }
    }, s = this._def.innerType._parse({
      data: r.data,
      path: r.path,
      parent: {
        ...r
      }
    });
    return sr(s) ? s.then((i) => ({
      status: "valid",
      value: i.status === "valid" ? i.value : this._def.catchValue({
        get error() {
          return new Fe(r.common.issues);
        },
        input: r.data
      })
    })) : {
      status: "valid",
      value: s.status === "valid" ? s.value : this._def.catchValue({
        get error() {
          return new Fe(r.common.issues);
        },
        input: r.data
      })
    };
  }
  removeCatch() {
    return this._def.innerType;
  }
}
fr.create = (n, e) => new fr({
  innerType: n,
  typeName: O.ZodCatch,
  catchValue: typeof e.catch == "function" ? e.catch : () => e.catch,
  ...G(e)
});
class ni extends H {
  _parse(e) {
    if (this._getType(e) !== M.nan) {
      const r = this._getOrReturnCtx(e);
      return P(r, {
        code: C.invalid_type,
        expected: M.nan,
        received: r.parsedType
      }), J;
    }
    return { status: "valid", value: e.data };
  }
}
ni.create = (n) => new ni({
  typeName: O.ZodNaN,
  ...G(n)
});
class ra extends H {
  _parse(e) {
    const { ctx: t } = this._processInputParams(e), r = t.data;
    return this._def.type._parse({
      data: r,
      path: t.path,
      parent: t
    });
  }
  unwrap() {
    return this._def.type;
  }
}
class Is extends H {
  _parse(e) {
    const { status: t, ctx: r } = this._processInputParams(e);
    if (r.common.async)
      return (async () => {
        const i = await this._def.in._parseAsync({
          data: r.data,
          path: r.path,
          parent: r
        });
        return i.status === "aborted" ? J : i.status === "dirty" ? (t.dirty(), fn(i.value)) : this._def.out._parseAsync({
          data: i.value,
          path: r.path,
          parent: r
        });
      })();
    {
      const s = this._def.in._parseSync({
        data: r.data,
        path: r.path,
        parent: r
      });
      return s.status === "aborted" ? J : s.status === "dirty" ? (t.dirty(), {
        status: "dirty",
        value: s.value
      }) : this._def.out._parseSync({
        data: s.value,
        path: r.path,
        parent: r
      });
    }
  }
  static create(e, t) {
    return new Is({
      in: e,
      out: t,
      typeName: O.ZodPipeline
    });
  }
}
class hr extends H {
  _parse(e) {
    const t = this._def.innerType._parse(e), r = (s) => (an(s) && (s.value = Object.freeze(s.value)), s);
    return sr(t) ? t.then((s) => r(s)) : r(t);
  }
  unwrap() {
    return this._def.innerType;
  }
}
hr.create = (n, e) => new hr({
  innerType: n,
  typeName: O.ZodReadonly,
  ...G(e)
});
function ri(n, e) {
  const t = typeof n == "function" ? n(e) : typeof n == "string" ? { message: n } : n;
  return typeof t == "string" ? { message: t } : t;
}
function au(n, e = {}, t) {
  return n ? wn.create().superRefine((r, s) => {
    const i = n(r);
    if (i instanceof Promise)
      return i.then((o) => {
        if (!o) {
          const a = ri(e, r), c = a.fatal ?? t ?? !0;
          s.addIssue({ code: "custom", ...a, fatal: c });
        }
      });
    if (!i) {
      const o = ri(e, r), a = o.fatal ?? t ?? !0;
      s.addIssue({ code: "custom", ...o, fatal: a });
    }
  }) : wn.create();
}
var O;
(function(n) {
  n.ZodString = "ZodString", n.ZodNumber = "ZodNumber", n.ZodNaN = "ZodNaN", n.ZodBigInt = "ZodBigInt", n.ZodBoolean = "ZodBoolean", n.ZodDate = "ZodDate", n.ZodSymbol = "ZodSymbol", n.ZodUndefined = "ZodUndefined", n.ZodNull = "ZodNull", n.ZodAny = "ZodAny", n.ZodUnknown = "ZodUnknown", n.ZodNever = "ZodNever", n.ZodVoid = "ZodVoid", n.ZodArray = "ZodArray", n.ZodObject = "ZodObject", n.ZodUnion = "ZodUnion", n.ZodDiscriminatedUnion = "ZodDiscriminatedUnion", n.ZodIntersection = "ZodIntersection", n.ZodTuple = "ZodTuple", n.ZodRecord = "ZodRecord", n.ZodMap = "ZodMap", n.ZodSet = "ZodSet", n.ZodFunction = "ZodFunction", n.ZodLazy = "ZodLazy", n.ZodLiteral = "ZodLiteral", n.ZodEnum = "ZodEnum", n.ZodEffects = "ZodEffects", n.ZodNativeEnum = "ZodNativeEnum", n.ZodOptional = "ZodOptional", n.ZodNullable = "ZodNullable", n.ZodDefault = "ZodDefault", n.ZodCatch = "ZodCatch", n.ZodPromise = "ZodPromise", n.ZodBranded = "ZodBranded", n.ZodPipeline = "ZodPipeline", n.ZodReadonly = "ZodReadonly";
})(O || (O = {}));
const sa = (n, e = {
  message: `Input not instance of ${n.name}`
}) => au((t) => t instanceof n, e), p = Qe.create, E = on.create, Rt = Vr.create, W = wn.create;
pt.create;
const B = $e.create, w = ue.create, tt = ar.create, ge = bs.create;
or.create;
Nt.create;
const ne = ur.create, ou = cr.create, I = lr.create, ce = Pt.create;
dr.create;
et.create;
Mt.create;
function uu() {
  return {};
}
function cu(n, e) {
  var r, s;
  const t = {
    type: "array"
  };
  return ((s = (r = n.type) == null ? void 0 : r._def) == null ? void 0 : s.typeName) !== O.ZodAny && (t.items = X(n.type._def, {
    ...e,
    currentPath: [...e.currentPath, "items"]
  })), n.minLength && Q(t, "minItems", n.minLength.value, n.minLength.message, e), n.maxLength && Q(t, "maxItems", n.maxLength.value, n.maxLength.message, e), n.exactLength && (Q(t, "minItems", n.exactLength.value, n.exactLength.message, e), Q(t, "maxItems", n.exactLength.value, n.exactLength.message, e)), t;
}
function lu(n, e) {
  const t = {
    type: "integer",
    format: "int64"
  };
  if (!n.checks)
    return t;
  for (const r of n.checks)
    switch (r.kind) {
      case "min":
        e.target === "jsonSchema7" ? r.inclusive ? Q(t, "minimum", r.value, r.message, e) : Q(t, "exclusiveMinimum", r.value, r.message, e) : (r.inclusive || (t.exclusiveMinimum = !0), Q(t, "minimum", r.value, r.message, e));
        break;
      case "max":
        e.target === "jsonSchema7" ? r.inclusive ? Q(t, "maximum", r.value, r.message, e) : Q(t, "exclusiveMaximum", r.value, r.message, e) : (r.inclusive || (t.exclusiveMaximum = !0), Q(t, "maximum", r.value, r.message, e));
        break;
      case "multipleOf":
        Q(t, "multipleOf", r.value, r.message, e);
        break;
    }
  return t;
}
function du() {
  return {
    type: "boolean"
  };
}
function pu(n, e) {
  return X(n.type._def, e);
}
const fu = (n, e) => X(n.innerType._def, e);
function ia(n, e, t) {
  const r = t ?? e.dateStrategy;
  if (Array.isArray(r))
    return {
      anyOf: r.map((s, i) => ia(n, e, s))
    };
  switch (r) {
    case "string":
    case "format:date-time":
      return {
        type: "string",
        format: "date-time"
      };
    case "format:date":
      return {
        type: "string",
        format: "date"
      };
    case "integer":
      return hu(n, e);
  }
}
const hu = (n, e) => {
  const t = {
    type: "integer",
    format: "unix-time"
  };
  if (e.target === "openApi3")
    return t;
  for (const r of n.checks)
    switch (r.kind) {
      case "min":
        Q(
          t,
          "minimum",
          r.value,
          // This is in milliseconds
          r.message,
          e
        );
        break;
      case "max":
        Q(
          t,
          "maximum",
          r.value,
          // This is in milliseconds
          r.message,
          e
        );
        break;
    }
  return t;
};
function mu(n, e) {
  return {
    ...X(n.innerType._def, e),
    default: n.defaultValue()
  };
}
function gu(n, e, t) {
  return e.effectStrategy === "input" ? X(n.schema._def, e, t) : {};
}
function yu(n) {
  return {
    type: "string",
    enum: [...n.values]
  };
}
const _u = (n) => "type" in n && n.type === "string" ? !1 : "allOf" in n;
function vu(n, e) {
  const t = [
    X(n.left._def, {
      ...e,
      currentPath: [...e.currentPath, "allOf", "0"]
    }),
    X(n.right._def, {
      ...e,
      currentPath: [...e.currentPath, "allOf", "1"]
    })
  ].filter((i) => !!i);
  let r = e.target === "jsonSchema2019-09" ? { unevaluatedProperties: !1 } : void 0;
  const s = [];
  return t.forEach((i) => {
    if (_u(i))
      s.push(...i.allOf), i.unevaluatedProperties === void 0 && (r = void 0);
    else {
      let o = i;
      if ("additionalProperties" in i && i.additionalProperties === !1) {
        const { additionalProperties: a, ...c } = i;
        o = c;
      } else
        r = void 0;
      s.push(o);
    }
  }), s.length ? {
    allOf: s,
    ...r
  } : void 0;
}
function wu(n, e) {
  const t = typeof n.value;
  return t !== "bigint" && t !== "number" && t !== "boolean" && t !== "string" ? {
    type: Array.isArray(n.value) ? "array" : "object"
  } : e.target === "openApi3" ? {
    type: t === "bigint" ? "integer" : t,
    enum: [n.value]
  } : {
    type: t === "bigint" ? "integer" : t,
    const: n.value
  };
}
let Dr;
const mt = {
  /**
   * `c` was changed to `[cC]` to replicate /i flag
   */
  cuid: /^[cC][^\s-]{8,}$/,
  cuid2: /^[0-9a-z]+$/,
  ulid: /^[0-9A-HJKMNP-TV-Z]{26}$/,
  /**
   * `a-z` was added to replicate /i flag
   */
  email: /^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,
  /**
   * Constructed a valid Unicode RegExp
   *
   * Lazily instantiate since this type of regex isn't supported
   * in all envs (e.g. React Native).
   *
   * See:
   * https://github.com/colinhacks/zod/issues/2433
   * Fix in Zod:
   * https://github.com/colinhacks/zod/commit/9340fd51e48576a75adc919bff65dbc4a5d4c99b
   */
  emoji: () => (Dr === void 0 && (Dr = RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$", "u")), Dr),
  base64: /^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,
  nanoid: /^[a-zA-Z0-9_-]{21}$/
};
function aa(n, e) {
  const t = {
    type: "string"
  };
  function r(s) {
    return e.patternStrategy === "escape" ? bu(s) : s;
  }
  if (n.checks)
    for (const s of n.checks)
      switch (s.kind) {
        case "min":
          Q(t, "minLength", typeof t.minLength == "number" ? Math.max(t.minLength, s.value) : s.value, s.message, e);
          break;
        case "max":
          Q(t, "maxLength", typeof t.maxLength == "number" ? Math.min(t.maxLength, s.value) : s.value, s.message, e);
          break;
        case "email":
          switch (e.emailStrategy) {
            case "format:email":
              Ee(t, "email", s.message, e);
              break;
            case "format:idn-email":
              Ee(t, "idn-email", s.message, e);
              break;
            case "pattern:zod":
              Re(t, mt.email, s.message, e);
              break;
          }
          break;
        case "url":
          Ee(t, "uri", s.message, e);
          break;
        case "uuid":
          Ee(t, "uuid", s.message, e);
          break;
        case "regex":
          Re(t, s.regex, s.message, e);
          break;
        case "cuid":
          Re(t, mt.cuid, s.message, e);
          break;
        case "cuid2":
          Re(t, mt.cuid2, s.message, e);
          break;
        case "startsWith":
          Re(t, RegExp(`^${r(s.value)}`), s.message, e);
          break;
        case "endsWith":
          Re(t, RegExp(`${r(s.value)}$`), s.message, e);
          break;
        case "datetime":
          Ee(t, "date-time", s.message, e);
          break;
        case "date":
          Ee(t, "date", s.message, e);
          break;
        case "time":
          Ee(t, "time", s.message, e);
          break;
        case "duration":
          Ee(t, "duration", s.message, e);
          break;
        case "length":
          Q(t, "minLength", typeof t.minLength == "number" ? Math.max(t.minLength, s.value) : s.value, s.message, e), Q(t, "maxLength", typeof t.maxLength == "number" ? Math.min(t.maxLength, s.value) : s.value, s.message, e);
          break;
        case "includes": {
          Re(t, RegExp(r(s.value)), s.message, e);
          break;
        }
        case "ip": {
          s.version !== "v6" && Ee(t, "ipv4", s.message, e), s.version !== "v4" && Ee(t, "ipv6", s.message, e);
          break;
        }
        case "emoji":
          Re(t, mt.emoji, s.message, e);
          break;
        case "ulid": {
          Re(t, mt.ulid, s.message, e);
          break;
        }
        case "base64": {
          switch (e.base64Strategy) {
            case "format:binary": {
              Ee(t, "binary", s.message, e);
              break;
            }
            case "contentEncoding:base64": {
              Q(t, "contentEncoding", "base64", s.message, e);
              break;
            }
            case "pattern:zod": {
              Re(t, mt.base64, s.message, e);
              break;
            }
          }
          break;
        }
        case "nanoid":
          Re(t, mt.nanoid, s.message, e);
      }
  return t;
}
const bu = (n) => Array.from(n).map((e) => /[a-zA-Z0-9]/.test(e) ? e : `\\${e}`).join(""), Ee = (n, e, t, r) => {
  var s;
  n.format || (s = n.anyOf) != null && s.some((i) => i.format) ? (n.anyOf || (n.anyOf = []), n.format && (n.anyOf.push({
    format: n.format,
    ...n.errorMessage && r.errorMessages && {
      errorMessage: { format: n.errorMessage.format }
    }
  }), delete n.format, n.errorMessage && (delete n.errorMessage.format, Object.keys(n.errorMessage).length === 0 && delete n.errorMessage)), n.anyOf.push({
    format: e,
    ...t && r.errorMessages && { errorMessage: { format: t } }
  })) : Q(n, "format", e, t, r);
}, Re = (n, e, t, r) => {
  var s;
  n.pattern || (s = n.allOf) != null && s.some((i) => i.pattern) ? (n.allOf || (n.allOf = []), n.pattern && (n.allOf.push({
    pattern: n.pattern,
    ...n.errorMessage && r.errorMessages && {
      errorMessage: { pattern: n.errorMessage.pattern }
    }
  }), delete n.pattern, n.errorMessage && (delete n.errorMessage.pattern, Object.keys(n.errorMessage).length === 0 && delete n.errorMessage)), n.allOf.push({
    pattern: si(e, r),
    ...t && r.errorMessages && { errorMessage: { pattern: t } }
  })) : Q(n, "pattern", si(e, r), t, r);
}, si = (n, e) => {
  var l;
  const t = typeof n == "function" ? n() : n;
  if (!e.applyRegexFlags || !t.flags)
    return t.source;
  const r = {
    i: t.flags.includes("i"),
    // Case-insensitive
    m: t.flags.includes("m"),
    // `^` and `$` matches adjacent to newline characters
    s: t.flags.includes("s")
    // `.` matches newlines
  }, s = r.i ? t.source.toLowerCase() : t.source;
  let i = "", o = !1, a = !1, c = !1;
  for (let f = 0; f < s.length; f++) {
    if (o) {
      i += s[f], o = !1;
      continue;
    }
    if (r.i) {
      if (a) {
        if (s[f].match(/[a-z]/)) {
          c ? (i += s[f], i += `${s[f - 2]}-${s[f]}`.toUpperCase(), c = !1) : s[f + 1] === "-" && ((l = s[f + 2]) != null && l.match(/[a-z]/)) ? (i += s[f], c = !0) : i += `${s[f]}${s[f].toUpperCase()}`;
          continue;
        }
      } else if (s[f].match(/[a-z]/)) {
        i += `[${s[f]}${s[f].toUpperCase()}]`;
        continue;
      }
    }
    if (r.m) {
      if (s[f] === "^") {
        i += `(^|(?<=[\r
]))`;
        continue;
      } else if (s[f] === "$") {
        i += `($|(?=[\r
]))`;
        continue;
      }
    }
    if (r.s && s[f] === ".") {
      i += a ? `${s[f]}\r
` : `[${s[f]}\r
]`;
      continue;
    }
    i += s[f], s[f] === "\\" ? o = !0 : a && s[f] === "]" ? a = !1 : !a && s[f] === "[" && (a = !0);
  }
  try {
    const f = new RegExp(i);
  } catch {
    return console.warn(`Could not convert regex pattern at ${e.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`), t.source;
  }
  return i;
};
function oa(n, e) {
  var r, s, i, o;
  if (e.target === "openApi3" && ((r = n.keyType) == null ? void 0 : r._def.typeName) === O.ZodEnum)
    return {
      type: "object",
      required: n.keyType._def.values,
      properties: n.keyType._def.values.reduce((a, c) => ({
        ...a,
        [c]: X(n.valueType._def, {
          ...e,
          currentPath: [...e.currentPath, "properties", c]
        }) ?? {}
      }), {}),
      additionalProperties: !1
    };
  const t = {
    type: "object",
    additionalProperties: X(n.valueType._def, {
      ...e,
      currentPath: [...e.currentPath, "additionalProperties"]
    }) ?? {}
  };
  if (e.target === "openApi3")
    return t;
  if (((s = n.keyType) == null ? void 0 : s._def.typeName) === O.ZodString && ((i = n.keyType._def.checks) != null && i.length)) {
    const a = Object.entries(aa(n.keyType._def, e)).reduce((c, [l, f]) => l === "type" ? c : { ...c, [l]: f }, {});
    return {
      ...t,
      propertyNames: a
    };
  } else if (((o = n.keyType) == null ? void 0 : o._def.typeName) === O.ZodEnum)
    return {
      ...t,
      propertyNames: {
        enum: n.keyType._def.values
      }
    };
  return t;
}
function Iu(n, e) {
  if (e.mapStrategy === "record")
    return oa(n, e);
  const t = X(n.keyType._def, {
    ...e,
    currentPath: [...e.currentPath, "items", "items", "0"]
  }) || {}, r = X(n.valueType._def, {
    ...e,
    currentPath: [...e.currentPath, "items", "items", "1"]
  }) || {};
  return {
    type: "array",
    maxItems: 125,
    items: {
      type: "array",
      items: [t, r],
      minItems: 2,
      maxItems: 2
    }
  };
}
function xu(n) {
  const e = n.values, r = Object.keys(n.values).filter((i) => typeof e[e[i]] != "number").map((i) => e[i]), s = Array.from(new Set(r.map((i) => typeof i)));
  return {
    type: s.length === 1 ? s[0] === "string" ? "string" : "number" : ["string", "number"],
    enum: r
  };
}
function Su() {
  return {
    not: {}
  };
}
function Tu(n) {
  return n.target === "openApi3" ? {
    enum: ["null"],
    nullable: !0
  } : {
    type: "null"
  };
}
const mr = {
  ZodString: "string",
  ZodNumber: "number",
  ZodBigInt: "integer",
  ZodBoolean: "boolean",
  ZodNull: "null"
};
function ku(n, e) {
  if (e.target === "openApi3")
    return ii(n, e);
  const t = n.options instanceof Map ? Array.from(n.options.values()) : n.options;
  if (t.every((r) => r._def.typeName in mr && (!r._def.checks || !r._def.checks.length))) {
    const r = t.reduce((s, i) => {
      const o = mr[i._def.typeName];
      return o && !s.includes(o) ? [...s, o] : s;
    }, []);
    return {
      type: r.length > 1 ? r : r[0]
    };
  } else if (t.every((r) => r._def.typeName === "ZodLiteral" && !r.description)) {
    const r = t.reduce((s, i) => {
      const o = typeof i._def.value;
      switch (o) {
        case "string":
        case "number":
        case "boolean":
          return [...s, o];
        case "bigint":
          return [...s, "integer"];
        case "object":
          if (i._def.value === null)
            return [...s, "null"];
        case "symbol":
        case "undefined":
        case "function":
        default:
          return s;
      }
    }, []);
    if (r.length === t.length) {
      const s = r.filter((i, o, a) => a.indexOf(i) === o);
      return {
        type: s.length > 1 ? s : s[0],
        enum: t.reduce((i, o) => i.includes(o._def.value) ? i : [...i, o._def.value], [])
      };
    }
  } else if (t.every((r) => r._def.typeName === "ZodEnum"))
    return {
      type: "string",
      enum: t.reduce((r, s) => [...r, ...s._def.values.filter((i) => !r.includes(i))], [])
    };
  return ii(n, e);
}
const ii = (n, e) => {
  const t = (n.options instanceof Map ? Array.from(n.options.values()) : n.options).map((r, s) => X(r._def, {
    ...e,
    currentPath: [...e.currentPath, "anyOf", `${s}`]
  })).filter((r) => !!r && (!e.strictUnions || typeof r == "object" && Object.keys(r).length > 0));
  return t.length ? { anyOf: t } : void 0;
};
function Au(n, e) {
  if (["ZodString", "ZodNumber", "ZodBigInt", "ZodBoolean", "ZodNull"].includes(n.innerType._def.typeName) && (!n.innerType._def.checks || !n.innerType._def.checks.length))
    return e.target === "openApi3" || e.nullableStrategy === "property" ? {
      type: mr[n.innerType._def.typeName],
      nullable: !0
    } : {
      type: [mr[n.innerType._def.typeName], "null"]
    };
  if (e.target === "openApi3") {
    const r = X(n.innerType._def, {
      ...e,
      currentPath: [...e.currentPath]
    });
    return r && "$ref" in r ? { allOf: [r], nullable: !0 } : r && { ...r, nullable: !0 };
  }
  const t = X(n.innerType._def, {
    ...e,
    currentPath: [...e.currentPath, "anyOf", "0"]
  });
  return t && { anyOf: [t, { type: "null" }] };
}
function Cu(n, e) {
  const t = {
    type: "number"
  };
  if (!n.checks)
    return t;
  for (const r of n.checks)
    switch (r.kind) {
      case "int":
        t.type = "integer", Qi(t, "type", r.message, e);
        break;
      case "min":
        e.target === "jsonSchema7" ? r.inclusive ? Q(t, "minimum", r.value, r.message, e) : Q(t, "exclusiveMinimum", r.value, r.message, e) : (r.inclusive || (t.exclusiveMinimum = !0), Q(t, "minimum", r.value, r.message, e));
        break;
      case "max":
        e.target === "jsonSchema7" ? r.inclusive ? Q(t, "maximum", r.value, r.message, e) : Q(t, "exclusiveMaximum", r.value, r.message, e) : (r.inclusive || (t.exclusiveMaximum = !0), Q(t, "maximum", r.value, r.message, e));
        break;
      case "multipleOf":
        Q(t, "multipleOf", r.value, r.message, e);
        break;
    }
  return t;
}
function Ou(n, e) {
  return e.removeAdditionalStrategy === "strict" ? n.catchall._def.typeName === "ZodNever" ? n.unknownKeys !== "strict" : X(n.catchall._def, {
    ...e,
    currentPath: [...e.currentPath, "additionalProperties"]
  }) ?? !0 : n.catchall._def.typeName === "ZodNever" ? n.unknownKeys === "passthrough" : X(n.catchall._def, {
    ...e,
    currentPath: [...e.currentPath, "additionalProperties"]
  }) ?? !0;
}
function Eu(n, e) {
  const t = {
    type: "object",
    ...Object.entries(n.shape()).reduce((r, [s, i]) => {
      var c;
      if (i === void 0 || i._def === void 0)
        return r;
      const o = [...e.currentPath, "properties", s], a = X(i._def, {
        ...e,
        currentPath: o,
        propertyPath: o
      });
      if (a === void 0)
        return r;
      if (e.openaiStrictMode && i.isOptional() && !i.isNullable() && typeof ((c = i._def) == null ? void 0 : c.defaultValue) > "u")
        throw new Error(`Zod field at \`${o.join("/")}\` uses \`.optional()\` without \`.nullable()\` which is not supported by the API. See: https://platform.openai.com/docs/guides/structured-outputs?api-mode=responses#all-fields-must-be-required`);
      return {
        properties: {
          ...r.properties,
          [s]: a
        },
        required: i.isOptional() && !e.openaiStrictMode ? r.required : [...r.required, s]
      };
    }, { properties: {}, required: [] }),
    additionalProperties: Ou(n, e)
  };
  return t.required.length || delete t.required, t;
}
const Ru = (n, e) => {
  if (e.propertyPath && e.currentPath.slice(0, e.propertyPath.length).toString() === e.propertyPath.toString())
    return X(n.innerType._def, { ...e, currentPath: e.currentPath });
  const t = X(n.innerType._def, {
    ...e,
    currentPath: [...e.currentPath, "anyOf", "1"]
  });
  return t ? {
    anyOf: [
      {
        not: {}
      },
      t
    ]
  } : {};
}, Nu = (n, e) => {
  if (e.pipeStrategy === "input")
    return X(n.in._def, e);
  if (e.pipeStrategy === "output")
    return X(n.out._def, e);
  const t = X(n.in._def, {
    ...e,
    currentPath: [...e.currentPath, "allOf", "0"]
  }), r = X(n.out._def, {
    ...e,
    currentPath: [...e.currentPath, "allOf", t ? "1" : "0"]
  });
  return {
    allOf: [t, r].filter((s) => s !== void 0)
  };
};
function Pu(n, e) {
  return X(n.type._def, e);
}
function Du(n, e) {
  const r = {
    type: "array",
    uniqueItems: !0,
    items: X(n.valueType._def, {
      ...e,
      currentPath: [...e.currentPath, "items"]
    })
  };
  return n.minSize && Q(r, "minItems", n.minSize.value, n.minSize.message, e), n.maxSize && Q(r, "maxItems", n.maxSize.value, n.maxSize.message, e), r;
}
function Mu(n, e) {
  return n.rest ? {
    type: "array",
    minItems: n.items.length,
    items: n.items.map((t, r) => X(t._def, {
      ...e,
      currentPath: [...e.currentPath, "items", `${r}`]
    })).reduce((t, r) => r === void 0 ? t : [...t, r], []),
    additionalItems: X(n.rest._def, {
      ...e,
      currentPath: [...e.currentPath, "additionalItems"]
    })
  } : {
    type: "array",
    minItems: n.items.length,
    maxItems: n.items.length,
    items: n.items.map((t, r) => X(t._def, {
      ...e,
      currentPath: [...e.currentPath, "items", `${r}`]
    })).reduce((t, r) => r === void 0 ? t : [...t, r], [])
  };
}
function ju() {
  return {
    not: {}
  };
}
function $u() {
  return {};
}
const Fu = (n, e) => X(n.innerType._def, e);
function X(n, e, t = !1) {
  var o;
  const r = e.seen.get(n);
  if (e.override) {
    const a = (o = e.override) == null ? void 0 : o.call(e, n, e, r, t);
    if (a !== Ro)
      return a;
  }
  if (r && !t) {
    const a = Lu(r, e);
    if (a !== void 0)
      return "$ref" in a && e.seenRefs.add(a.$ref), a;
  }
  const s = { def: n, path: e.currentPath, jsonSchema: void 0 };
  e.seen.set(n, s);
  const i = Zu(n, n.typeName, e, t);
  return i && qu(n, e, i), s.jsonSchema = i, i;
}
const Lu = (n, e) => {
  switch (e.$refStrategy) {
    case "root":
      return { $ref: n.path.join("/") };
    // this case is needed as OpenAI strict mode doesn't support top-level `$ref`s, i.e.
    // the top-level schema *must* be `{"type": "object", "properties": {...}}` but if we ever
    // need to define a `$ref`, relative `$ref`s aren't supported, so we need to extract
    // the schema to `#/definitions/` and reference that.
    //
    // e.g. if we need to reference a schema at
    // `["#","definitions","contactPerson","properties","person1","properties","name"]`
    // then we'll extract it out to `contactPerson_properties_person1_properties_name`
    case "extract-to-root":
      const t = n.path.slice(e.basePath.length + 1).join("_");
      return t !== e.name && e.nameStrategy === "duplicate-ref" && (e.definitions[t] = n.def), { $ref: [...e.basePath, e.definitionPath, t].join("/") };
    case "relative":
      return { $ref: Uu(e.currentPath, n.path) };
    case "none":
    case "seen":
      return n.path.length < e.currentPath.length && n.path.every((r, s) => e.currentPath[s] === r) ? (console.warn(`Recursive reference detected at ${e.currentPath.join("/")}! Defaulting to any`), {}) : e.$refStrategy === "seen" ? {} : void 0;
  }
}, Uu = (n, e) => {
  let t = 0;
  for (; t < n.length && t < e.length && n[t] === e[t]; t++)
    ;
  return [(n.length - t).toString(), ...e.slice(t)].join("/");
}, Zu = (n, e, t, r) => {
  switch (e) {
    case O.ZodString:
      return aa(n, t);
    case O.ZodNumber:
      return Cu(n, t);
    case O.ZodObject:
      return Eu(n, t);
    case O.ZodBigInt:
      return lu(n, t);
    case O.ZodBoolean:
      return du();
    case O.ZodDate:
      return ia(n, t);
    case O.ZodUndefined:
      return ju();
    case O.ZodNull:
      return Tu(t);
    case O.ZodArray:
      return cu(n, t);
    case O.ZodUnion:
    case O.ZodDiscriminatedUnion:
      return ku(n, t);
    case O.ZodIntersection:
      return vu(n, t);
    case O.ZodTuple:
      return Mu(n, t);
    case O.ZodRecord:
      return oa(n, t);
    case O.ZodLiteral:
      return wu(n, t);
    case O.ZodEnum:
      return yu(n);
    case O.ZodNativeEnum:
      return xu(n);
    case O.ZodNullable:
      return Au(n, t);
    case O.ZodOptional:
      return Ru(n, t);
    case O.ZodMap:
      return Iu(n, t);
    case O.ZodSet:
      return Du(n, t);
    case O.ZodLazy:
      return X(n.getter()._def, t);
    case O.ZodPromise:
      return Pu(n, t);
    case O.ZodNaN:
    case O.ZodNever:
      return Su();
    case O.ZodEffects:
      return gu(n, t, r);
    case O.ZodAny:
      return uu();
    case O.ZodUnknown:
      return $u();
    case O.ZodDefault:
      return mu(n, t);
    case O.ZodBranded:
      return pu(n, t);
    case O.ZodReadonly:
      return Fu(n, t);
    case O.ZodCatch:
      return fu(n, t);
    case O.ZodPipeline:
      return Nu(n, t);
    case O.ZodFunction:
    case O.ZodVoid:
    case O.ZodSymbol:
      return;
    default:
      return /* @__PURE__ */ ((s) => {
      })();
  }
}, qu = (n, e, t) => (n.description && (t.description = n.description, e.markdownDescription && (t.markdownDescription = n.description)), t), Ju = (n, e) => {
  const t = Do(e), r = typeof e == "string" ? e : (e == null ? void 0 : e.nameStrategy) === "title" || e == null ? void 0 : e.name, s = X(n._def, r === void 0 ? t : {
    ...t,
    currentPath: [...t.basePath, t.definitionPath, r]
  }, !1) ?? {}, i = typeof e == "object" && e.name !== void 0 && e.nameStrategy === "title" ? e.name : void 0;
  i !== void 0 && (s.title = i);
  const o = (() => {
    if (Po(t.definitions))
      return;
    const c = {}, l = /* @__PURE__ */ new Set();
    for (let f = 0; f < 500; f++) {
      const d = Object.entries(t.definitions).filter(([m]) => !l.has(m));
      if (d.length === 0)
        break;
      for (const [m, g] of d)
        c[m] = X(zr(g), { ...t, currentPath: [...t.basePath, t.definitionPath, m] }, !0) ?? {}, l.add(m);
    }
    return c;
  })(), a = r === void 0 ? o ? {
    ...s,
    [t.definitionPath]: o
  } : s : t.nameStrategy === "duplicate-ref" ? {
    ...s,
    ...o || t.seenRefs.size ? {
      [t.definitionPath]: {
        ...o,
        // only actually duplicate the schema definition if it was ever referenced
        // otherwise the duplication is completely pointless
        ...t.seenRefs.size ? { [r]: s } : void 0
      }
    } : void 0
  } : {
    $ref: [...t.$refStrategy === "relative" ? [] : t.basePath, t.definitionPath, r].join("/"),
    [t.definitionPath]: {
      ...o,
      [r]: s
    }
  };
  return t.target === "jsonSchema7" ? a.$schema = "http://json-schema.org/draft-07/schema#" : t.target === "jsonSchema2019-09" && (a.$schema = "https://json-schema.org/draft/2019-09/schema#"), a;
};
function Bu(n, { parser: e, callback: t }) {
  const r = { ...n };
  return Object.defineProperties(r, {
    $brand: {
      value: "auto-parseable-tool",
      enumerable: !1
    },
    $parseRaw: {
      value: e,
      enumerable: !1
    },
    $callback: {
      value: t,
      enumerable: !1
    }
  }), r;
}
function zu(n) {
  if (n.type !== "object")
    throw new Error(`Root schema must have type: 'object' but got type: ${n.type ? `'${n.type}'` : "undefined"}`);
  const e = structuredClone(n);
  return ze(e, [], e);
}
function Xr(n) {
  if (typeof n == "boolean")
    return !1;
  if (n.type === "null")
    return !0;
  for (const e of n.oneOf ?? [])
    if (Xr(e))
      return !0;
  for (const e of n.anyOf ?? [])
    if (Xr(e))
      return !0;
  return !1;
}
function ze(n, e, t) {
  if (typeof n == "boolean")
    throw new TypeError(`Expected object schema but got boolean; path=${e.join("/")}`);
  if (!yt(n))
    throw new TypeError(`Expected ${JSON.stringify(n)} to be an object; path=${e.join("/")}`);
  const r = n.$defs;
  if (yt(r))
    for (const [m, g] of Object.entries(r))
      ze(g, [...e, "$defs", m], t);
  const s = n.definitions;
  if (yt(s))
    for (const [m, g] of Object.entries(s))
      ze(g, [...e, "definitions", m], t);
  n.type === "object" && !("additionalProperties" in n) && (n.additionalProperties = !1);
  const o = n.required ?? [], a = n.properties;
  if (yt(a)) {
    for (const [m, g] of Object.entries(a))
      if (!Xr(g) && !o.includes(m))
        throw new Error(`Zod field at \`${[...e, "properties", m].join("/")}\` uses \`.optional()\` without \`.nullable()\` which is not supported by the API. See: https://platform.openai.com/docs/guides/structured-outputs?api-mode=responses#all-fields-must-be-required`);
    n.required = Object.keys(a), n.properties = Object.fromEntries(Object.entries(a).map(([m, g]) => [
      m,
      ze(g, [...e, "properties", m], t)
    ]));
  }
  const c = n.items;
  yt(c) && (n.items = ze(c, [...e, "items"], t));
  const l = n.anyOf;
  Array.isArray(l) && (n.anyOf = l.map((m, g) => ze(m, [...e, "anyOf", String(g)], t)));
  const f = n.allOf;
  if (Array.isArray(f))
    if (f.length === 1) {
      const m = ze(f[0], [...e, "allOf", "0"], t);
      Object.assign(n, m), delete n.allOf;
    } else
      n.allOf = f.map((m, g) => ze(m, [...e, "allOf", String(g)], t));
  n.default === null && delete n.default;
  const d = n.$ref;
  if (d && Vu(n, 1)) {
    if (typeof d != "string")
      throw new TypeError(`Received non-string $ref - ${d}; path=${e.join("/")}`);
    const m = Gu(t, d);
    if (typeof m == "boolean")
      throw new Error(`Expected \`$ref: ${d}\` to resolve to an object schema but got boolean`);
    if (!yt(m))
      throw new Error(`Expected \`$ref: ${d}\` to resolve to an object but got ${JSON.stringify(m)}`);
    return Object.assign(n, { ...m, ...n }), delete n.$ref, ze(n, e, t);
  }
  return n;
}
function Gu(n, e) {
  if (!e.startsWith("#/"))
    throw new Error(`Unexpected $ref format ${JSON.stringify(e)}; Does not start with #/`);
  const t = e.slice(2).split("/");
  let r = n;
  for (const s of t) {
    if (!yt(r))
      throw new Error(`encountered non-object entry while resolving ${e} - ${JSON.stringify(r)}`);
    const i = r[s];
    if (i === void 0)
      throw new Error(`Key ${s} not found while resolving ${e}`);
    r = i;
  }
  return r;
}
function yt(n) {
  return typeof n == "object" && n !== null && !Array.isArray(n);
}
function Vu(n, e) {
  let t = 0;
  for (const r in n)
    if (t++, t > e)
      return !0;
  return !1;
}
function ua(n, e) {
  return Ju(n, {
    openaiStrictMode: !0,
    name: e.name,
    nameStrategy: "duplicate-ref",
    $refStrategy: "extract-to-root",
    nullableStrategy: "property"
  });
}
function ca(n) {
  return zu(Oo(n, {
    target: "draft-7"
  }));
}
function la(n) {
  return "_zod" in n;
}
function Wu(n, e, t) {
  return Eo({
    type: "json_schema",
    ...t,
    name: e,
    strict: !0,
    schema: la(n) ? ca(n) : ua(n, { name: e })
  }, (r) => n.parse(JSON.parse(r)));
}
function Hu(n) {
  return Bu({
    type: "function",
    name: n.name,
    parameters: la(n.parameters) ? ca(n.parameters) : ua(n.parameters, { name: n.name }),
    strict: !0,
    ...n.description ? { description: n.description } : void 0
  }, {
    callback: n.function,
    parser: (e) => n.parameters.parse(JSON.parse(e))
  });
}
class ht extends Error {
  constructor(t, r) {
    super(t);
    x(this, "state");
    this.state = r;
  }
}
class Ku extends ht {
}
class ai extends ht {
}
class we extends ht {
}
class ee extends ht {
}
class oi extends ht {
  constructor(t, r, s) {
    super(t, s);
    x(this, "error");
    this.error = r;
  }
}
class Yu extends ht {
  constructor(t, r, s) {
    super(t, s);
    x(this, "error");
    this.error = r;
  }
}
class ui extends ht {
  constructor(t, r, s) {
    super(t, s);
    x(this, "result");
    this.result = r;
  }
}
class Qr extends ht {
  constructor(t, r, s) {
    super(t, s);
    x(this, "result");
    this.result = r;
  }
}
function cn(n) {
  var t;
  if (typeof n != "object" || n === null)
    return;
  const e = n;
  return ((t = e._zod) == null ? void 0 : t.def) || e._def || e.def;
}
function xr(n) {
  const e = cn(n);
  if (!e)
    return;
  const t = typeof e.typeName == "string" && e.typeName || typeof e.type == "string" && e.type;
  if (typeof t != "string")
    return;
  const r = t.toLowerCase();
  return r.startsWith("zod") ? r.slice(3) : r;
}
function jt(n) {
  return cn(n) ? xr(n) === "object" : !1;
}
function Xu(n) {
  return typeof n == "object" && n !== null && "input" in n && typeof n.input == "string";
}
const Qu = "http://json-schema.org/draft-07/schema#", ec = /* @__PURE__ */ new Set(["optional"]), tc = /* @__PURE__ */ new Set([
  "brand",
  "branded",
  "catch",
  "default",
  "effects",
  "pipeline",
  "pipe",
  "prefault",
  "readonly",
  "refinement",
  "transform"
]), ci = {
  string: { type: "string" },
  number: { type: "number" },
  bigint: { type: "integer" },
  boolean: { type: "boolean" },
  date: { type: "string", format: "date-time" }
};
function da(n) {
  return typeof n == "object" && n !== null && n.type === "object" && "properties" in n && "additionalProperties" in n;
}
function nc(n) {
  const e = pa(n);
  if (e)
    return Array.isArray(e.required) || (e.required = []), typeof e.additionalProperties > "u" && (e.additionalProperties = !1), typeof e.$schema != "string" && (e.$schema = Qu), e;
}
function pa(n) {
  const e = hc(n);
  if (!e)
    return;
  const t = {}, r = [];
  for (const [s, i] of Object.entries(e)) {
    const { schema: o, optional: a } = rc(i);
    if (!o)
      return;
    t[s] = o, a || r.push(s);
  }
  return { type: "object", properties: t, required: r, additionalProperties: !1 };
}
function rc(n) {
  let e = es(n), t = !1;
  for (; ec.has(xr(e) ?? ""); ) {
    t = !0;
    const r = cn(e), s = es(r == null ? void 0 : r.innerType);
    if (!s || s === e)
      break;
    e = s;
  }
  return { schema: Ue(e), optional: t };
}
function Ue(n) {
  if (n === void 0)
    return;
  const e = es(n), t = xr(e), r = cn(e);
  if (t) {
    if (t in ci)
      return ci[t];
    switch (t) {
      case "object":
        return pa(e);
      case "array":
        return sc(r);
      case "tuple":
        return ic(r);
      case "union":
        return ac(r);
      case "intersection":
        return oc(r);
      case "literal":
        return pc(r);
      case "enum":
      case "nativeenum":
        return fc(r);
      case "record":
        return uc(r);
      case "map":
        return cc(r);
      case "set":
        return lc(r);
      case "nullable":
        return dc(r);
      default:
        return;
    }
  }
}
function sc(n) {
  const e = Ue(fa(n, "element", "items", "type"));
  return e ? { type: "array", items: e } : void 0;
}
function ic(n) {
  const e = ha(n == null ? void 0 : n.items).map((r) => Ue(r)).filter(Boolean);
  if (!e.length)
    return;
  const t = {
    type: "array",
    items: e,
    minItems: e.length
  };
  return n != null && n.rest || (t.maxItems = e.length), t;
}
function ac(n) {
  const e = ha((n == null ? void 0 : n.options) ?? (n == null ? void 0 : n.schemas)).map((t) => Ue(t)).filter(Boolean);
  return e.length ? { anyOf: e } : void 0;
}
function oc(n) {
  const e = Ue(n == null ? void 0 : n.left), t = Ue(n == null ? void 0 : n.right);
  return e && t ? { allOf: [e, t] } : void 0;
}
function uc(n) {
  const e = Ue((n == null ? void 0 : n.valueType) ?? (n == null ? void 0 : n.values));
  return e ? { type: "object", additionalProperties: e } : void 0;
}
function cc(n) {
  const e = Ue((n == null ? void 0 : n.valueType) ?? (n == null ? void 0 : n.values));
  return e ? { type: "array", items: e } : void 0;
}
function lc(n) {
  const e = Ue(n == null ? void 0 : n.valueType);
  return e ? { type: "array", items: e, uniqueItems: !0 } : void 0;
}
function dc(n) {
  const e = Ue((n == null ? void 0 : n.innerType) ?? (n == null ? void 0 : n.type));
  return e ? { anyOf: [e, { type: "null" }] } : void 0;
}
function es(n) {
  let e = n;
  for (; tc.has(xr(e) ?? ""); ) {
    const t = cn(e), r = (t == null ? void 0 : t.innerType) ?? (t == null ? void 0 : t.schema) ?? (t == null ? void 0 : t.base) ?? (t == null ? void 0 : t.type) ?? (t == null ? void 0 : t.wrapped) ?? (t == null ? void 0 : t.underlying);
    if (!r || r === e)
      return e;
    e = r;
  }
  return e;
}
function fa(n, ...e) {
  if (n) {
    for (const t of e)
      if (t in n && n[t] !== void 0)
        return n[t];
  }
}
function ha(n) {
  return Array.isArray(n) ? n : n === void 0 ? [] : [n];
}
function pc(n) {
  if (!n)
    return;
  const e = fa(n, "value", "literal");
  if (e !== void 0)
    return {
      const: e,
      type: e === null ? "null" : typeof e
    };
}
function fc(n) {
  if (n) {
    if (Array.isArray(n.values))
      return { enum: n.values };
    if (Array.isArray(n.options))
      return { enum: n.options };
    if (n.values && typeof n.values == "object")
      return { enum: Object.values(n.values) };
    if (n.enum && typeof n.enum == "object")
      return { enum: Object.values(n.enum) };
  }
}
function hc(n) {
  if (typeof n != "object" || n === null)
    return;
  const e = n;
  if (e.shape && typeof e.shape == "object")
    return e.shape;
  if (typeof e.shape == "function")
    try {
      return e.shape();
    } catch {
      return;
    }
  const t = cn(e), r = t == null ? void 0 : t.shape;
  if (r && typeof r == "object")
    return r;
  if (typeof r == "function")
    try {
      return r();
    } catch {
      return;
    }
}
const mc = Hu, gc = Wu;
function ma(n) {
  return nc(n);
}
function gr(n) {
  if (n = n.replace(/\s/g, "_"), n = n.replace(/[^a-zA-Z0-9]/g, "_"), n.length === 0)
    throw new Error("Tool name cannot be empty");
  return n;
}
function xs(n, e) {
  const t = (r) => JSON.parse(r);
  if (jt(n)) {
    const r = (i) => {
      const o = ma(n);
      if (o)
        return {
          schema: o,
          parser: (c) => n.parse(JSON.parse(c))
        };
      const a = i instanceof Error ? ` Upstream helper error: ${i.message}` : "";
      throw new ee(`Unable to convert the provided Zod schema to JSON Schema. Ensure that the \`zod\` package is available at runtime or provide a JSON schema object instead.${a}`);
    };
    let s;
    try {
      s = mc({
        name: e,
        parameters: n,
        function: () => {
        },
        // empty function here to satisfy the OpenAI helper
        description: ""
      });
    } catch (i) {
      return r(i);
    }
    return da(s.parameters) ? {
      schema: s.parameters,
      parser: s.$parseRaw
    } : r();
  } else if (typeof n == "object" && n !== null)
    return {
      schema: n,
      parser: t
    };
  throw new ee("Input type is not a ZodObject or a valid JSON schema");
}
function li(n) {
  if (n === "text")
    return "text";
  if (jt(n)) {
    const e = (r, s) => {
      const i = ma(n);
      if (i)
        return {
          type: (r == null ? void 0 : r.type) ?? "json_schema",
          name: (r == null ? void 0 : r.name) ?? "output",
          strict: (r == null ? void 0 : r.strict) ?? !1,
          schema: i
        };
      const o = s instanceof Error ? ` Upstream helper error: ${s.message}` : "";
      throw new ee(`Unable to convert the provided Zod schema to JSON Schema. Ensure that the \`zod\` package is available at runtime or provide a JSON schema object instead.${o}`);
    };
    let t;
    try {
      t = gc(n, "output");
    } catch (r) {
      return e(void 0, r);
    }
    return da(t.schema) ? {
      type: t.type,
      name: t.name,
      strict: t.strict || !1,
      schema: t.schema
    } : e(t);
  }
  return n;
}
function yc(n) {
  return n && n.__esModule && Object.prototype.hasOwnProperty.call(n, "default") ? n.default : n;
}
var Xn = { exports: {} }, Mr, di;
function _c() {
  if (di) return Mr;
  di = 1;
  var n = 1e3, e = n * 60, t = e * 60, r = t * 24, s = r * 7, i = r * 365.25;
  Mr = function(f, d) {
    d = d || {};
    var m = typeof f;
    if (m === "string" && f.length > 0)
      return o(f);
    if (m === "number" && isFinite(f))
      return d.long ? c(f) : a(f);
    throw new Error(
      "val is not a non-empty string or a valid number. val=" + JSON.stringify(f)
    );
  };
  function o(f) {
    if (f = String(f), !(f.length > 100)) {
      var d = /^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(
        f
      );
      if (d) {
        var m = parseFloat(d[1]), g = (d[2] || "ms").toLowerCase();
        switch (g) {
          case "years":
          case "year":
          case "yrs":
          case "yr":
          case "y":
            return m * i;
          case "weeks":
          case "week":
          case "w":
            return m * s;
          case "days":
          case "day":
          case "d":
            return m * r;
          case "hours":
          case "hour":
          case "hrs":
          case "hr":
          case "h":
            return m * t;
          case "minutes":
          case "minute":
          case "mins":
          case "min":
          case "m":
            return m * e;
          case "seconds":
          case "second":
          case "secs":
          case "sec":
          case "s":
            return m * n;
          case "milliseconds":
          case "millisecond":
          case "msecs":
          case "msec":
          case "ms":
            return m;
          default:
            return;
        }
      }
    }
  }
  function a(f) {
    var d = Math.abs(f);
    return d >= r ? Math.round(f / r) + "d" : d >= t ? Math.round(f / t) + "h" : d >= e ? Math.round(f / e) + "m" : d >= n ? Math.round(f / n) + "s" : f + "ms";
  }
  function c(f) {
    var d = Math.abs(f);
    return d >= r ? l(f, d, r, "day") : d >= t ? l(f, d, t, "hour") : d >= e ? l(f, d, e, "minute") : d >= n ? l(f, d, n, "second") : f + " ms";
  }
  function l(f, d, m, g) {
    var v = d >= m * 1.5;
    return Math.round(f / m) + " " + g + (v ? "s" : "");
  }
  return Mr;
}
var jr, pi;
function vc() {
  if (pi) return jr;
  pi = 1;
  function n(e) {
    r.debug = r, r.default = r, r.coerce = l, r.disable = a, r.enable = i, r.enabled = c, r.humanize = _c(), r.destroy = f, Object.keys(e).forEach((d) => {
      r[d] = e[d];
    }), r.names = [], r.skips = [], r.formatters = {};
    function t(d) {
      let m = 0;
      for (let g = 0; g < d.length; g++)
        m = (m << 5) - m + d.charCodeAt(g), m |= 0;
      return r.colors[Math.abs(m) % r.colors.length];
    }
    r.selectColor = t;
    function r(d) {
      let m, g = null, v, S;
      function y(...h) {
        if (!y.enabled)
          return;
        const b = y, _ = Number(/* @__PURE__ */ new Date()), N = _ - (m || _);
        b.diff = N, b.prev = m, b.curr = _, m = _, h[0] = r.coerce(h[0]), typeof h[0] != "string" && h.unshift("%O");
        let T = 0;
        h[0] = h[0].replace(/%([a-zA-Z%])/g, (D, F) => {
          if (D === "%%")
            return "%";
          T++;
          const z = r.formatters[F];
          if (typeof z == "function") {
            const L = h[T];
            D = z.call(b, L), h.splice(T, 1), T--;
          }
          return D;
        }), r.formatArgs.call(b, h), (b.log || r.log).apply(b, h);
      }
      return y.namespace = d, y.useColors = r.useColors(), y.color = r.selectColor(d), y.extend = s, y.destroy = r.destroy, Object.defineProperty(y, "enabled", {
        enumerable: !0,
        configurable: !1,
        get: () => g !== null ? g : (v !== r.namespaces && (v = r.namespaces, S = r.enabled(d)), S),
        set: (h) => {
          g = h;
        }
      }), typeof r.init == "function" && r.init(y), y;
    }
    function s(d, m) {
      const g = r(this.namespace + (typeof m > "u" ? ":" : m) + d);
      return g.log = this.log, g;
    }
    function i(d) {
      r.save(d), r.namespaces = d, r.names = [], r.skips = [];
      const m = (typeof d == "string" ? d : "").trim().replace(/\s+/g, ",").split(",").filter(Boolean);
      for (const g of m)
        g[0] === "-" ? r.skips.push(g.slice(1)) : r.names.push(g);
    }
    function o(d, m) {
      let g = 0, v = 0, S = -1, y = 0;
      for (; g < d.length; )
        if (v < m.length && (m[v] === d[g] || m[v] === "*"))
          m[v] === "*" ? (S = v, y = g, v++) : (g++, v++);
        else if (S !== -1)
          v = S + 1, y++, g = y;
        else
          return !1;
      for (; v < m.length && m[v] === "*"; )
        v++;
      return v === m.length;
    }
    function a() {
      const d = [
        ...r.names,
        ...r.skips.map((m) => "-" + m)
      ].join(",");
      return r.enable(""), d;
    }
    function c(d) {
      for (const m of r.skips)
        if (o(d, m))
          return !1;
      for (const m of r.names)
        if (o(d, m))
          return !0;
      return !1;
    }
    function l(d) {
      return d instanceof Error ? d.stack || d.message : d;
    }
    function f() {
      console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");
    }
    return r.enable(r.load()), r;
  }
  return jr = n, jr;
}
var fi;
function wc() {
  return fi || (fi = 1, (function(n, e) {
    e.formatArgs = r, e.save = s, e.load = i, e.useColors = t, e.storage = o(), e.destroy = /* @__PURE__ */ (() => {
      let c = !1;
      return () => {
        c || (c = !0, console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."));
      };
    })(), e.colors = [
      "#0000CC",
      "#0000FF",
      "#0033CC",
      "#0033FF",
      "#0066CC",
      "#0066FF",
      "#0099CC",
      "#0099FF",
      "#00CC00",
      "#00CC33",
      "#00CC66",
      "#00CC99",
      "#00CCCC",
      "#00CCFF",
      "#3300CC",
      "#3300FF",
      "#3333CC",
      "#3333FF",
      "#3366CC",
      "#3366FF",
      "#3399CC",
      "#3399FF",
      "#33CC00",
      "#33CC33",
      "#33CC66",
      "#33CC99",
      "#33CCCC",
      "#33CCFF",
      "#6600CC",
      "#6600FF",
      "#6633CC",
      "#6633FF",
      "#66CC00",
      "#66CC33",
      "#9900CC",
      "#9900FF",
      "#9933CC",
      "#9933FF",
      "#99CC00",
      "#99CC33",
      "#CC0000",
      "#CC0033",
      "#CC0066",
      "#CC0099",
      "#CC00CC",
      "#CC00FF",
      "#CC3300",
      "#CC3333",
      "#CC3366",
      "#CC3399",
      "#CC33CC",
      "#CC33FF",
      "#CC6600",
      "#CC6633",
      "#CC9900",
      "#CC9933",
      "#CCCC00",
      "#CCCC33",
      "#FF0000",
      "#FF0033",
      "#FF0066",
      "#FF0099",
      "#FF00CC",
      "#FF00FF",
      "#FF3300",
      "#FF3333",
      "#FF3366",
      "#FF3399",
      "#FF33CC",
      "#FF33FF",
      "#FF6600",
      "#FF6633",
      "#FF9900",
      "#FF9933",
      "#FFCC00",
      "#FFCC33"
    ];
    function t() {
      if (typeof window < "u" && window.process && (window.process.type === "renderer" || window.process.__nwjs))
        return !0;
      if (typeof navigator < "u" && navigator.userAgent && navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))
        return !1;
      let c;
      return typeof document < "u" && document.documentElement && document.documentElement.style && document.documentElement.style.WebkitAppearance || // Is firebug? http://stackoverflow.com/a/398120/376773
      typeof window < "u" && window.console && (window.console.firebug || window.console.exception && window.console.table) || // Is firefox >= v31?
      // https://developer.mozilla.org/en-US/docs/Tools/Web_Console#Styling_messages
      typeof navigator < "u" && navigator.userAgent && (c = navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)) && parseInt(c[1], 10) >= 31 || // Double check webkit in userAgent just in case we are in a worker
      typeof navigator < "u" && navigator.userAgent && navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/);
    }
    function r(c) {
      if (c[0] = (this.useColors ? "%c" : "") + this.namespace + (this.useColors ? " %c" : " ") + c[0] + (this.useColors ? "%c " : " ") + "+" + n.exports.humanize(this.diff), !this.useColors)
        return;
      const l = "color: " + this.color;
      c.splice(1, 0, l, "color: inherit");
      let f = 0, d = 0;
      c[0].replace(/%[a-zA-Z%]/g, (m) => {
        m !== "%%" && (f++, m === "%c" && (d = f));
      }), c.splice(d, 0, l);
    }
    e.log = console.debug || console.log || (() => {
    });
    function s(c) {
      try {
        c ? e.storage.setItem("debug", c) : e.storage.removeItem("debug");
      } catch {
      }
    }
    function i() {
      let c;
      try {
        c = e.storage.getItem("debug") || e.storage.getItem("DEBUG");
      } catch {
      }
      return !c && typeof process < "u" && "env" in process && (c = process.env.DEBUG), c;
    }
    function o() {
      try {
        return localStorage;
      } catch {
      }
    }
    n.exports = vc()(e);
    const { formatters: a } = n.exports;
    a.j = function(c) {
      try {
        return JSON.stringify(c);
      } catch (l) {
        return "[UnexpectedJSONParseError]: " + l.message;
      }
    };
  })(Xn, Xn.exports)), Xn.exports;
}
var bc = wc();
const Ic = /* @__PURE__ */ yc(bc);
function ga() {
  return Pc();
}
function hi(n) {
  const e = ga();
  return typeof e < "u" && (e[n] === "true" || e[n] === "1");
}
const ya = {
  get disabled() {
    return !0;
  }
}, _a = {
  get dontLogModelData() {
    return hi("OPENAI_AGENTS_DONT_LOG_MODEL_DATA");
  },
  get dontLogToolData() {
    return hi("OPENAI_AGENTS_DONT_LOG_TOOL_DATA");
  }
}, xc = _a.dontLogModelData, Sc = _a.dontLogToolData;
function va(n = "openai-agents") {
  return {
    namespace: n,
    debug: Ic(n),
    error: console.error,
    warn: console.warn,
    dontLogModelData: xc,
    dontLogToolData: Sc
  };
}
const j = va("openai-agents:core"), mi = 20;
function ft(n) {
  if (n == null)
    return String(n);
  if (wa(n))
    return _n(new Uint8Array(n));
  if (Hn(n)) {
    const e = n;
    return _n(new Uint8Array(e.buffer, e.byteOffset, e.byteLength));
  }
  if (typeof n == "string")
    return n;
  if (typeof n == "object")
    try {
      return JSON.stringify(n, kc);
    } catch {
      return "[object with circular references]";
    }
  return String(n);
}
function wa(n) {
  if (n instanceof ArrayBuffer)
    return !0;
  const e = globalThis.SharedArrayBuffer;
  return !!(e && n instanceof e);
}
function Hn(n) {
  return typeof ArrayBuffer < "u" && ArrayBuffer.isView(n);
}
function Sr(n) {
  return typeof n == "object" && n !== null && n.type === "Buffer" && Array.isArray(n.data);
}
function Ss(n) {
  const e = globalThis.Buffer;
  return !!(e && typeof e.isBuffer == "function" && e.isBuffer(n));
}
function _n(n) {
  if (n.length === 0)
    return "[byte array (0 bytes)]";
  const e = Math.min(n.length, mi), t = [];
  for (let i = 0; i < e; i++)
    t.push(Tc(n[i]));
  const r = n.length > mi ? " " : "";
  return `[byte array ${t.join(" ")}${r} (${n.length} bytes)]`;
}
function Tc(n) {
  return `0x${n.toString(16).padStart(2, "0")}`;
}
function kc(n, e) {
  if (wa(e))
    return _n(new Uint8Array(e));
  if (Hn(e)) {
    const t = e;
    return _n(new Uint8Array(t.buffer, t.byteOffset, t.byteLength));
  }
  return Sr(e) ? _n(Uint8Array.from(e.data)) : e;
}
function ts(n) {
  return !!n && typeof n == "object" && typeof n.create == "function";
}
const ns = /* @__PURE__ */ new WeakMap(), Ac = /* @__PURE__ */ new WeakMap(), yr = /* @__PURE__ */ new WeakMap();
function ba(n) {
  const e = Ac.get(n);
  if (e)
    return e;
  if (typeof n.computer == "function" || ts(n.computer))
    return n.computer;
}
function gi(n, e, t) {
  let r = yr.get(e);
  r || (r = /* @__PURE__ */ new Map(), yr.set(e, r)), r.set(n, t);
}
async function Ia(n) {
  const { tool: e, runContext: t } = n, r = e;
  let s = ns.get(r);
  s || (s = /* @__PURE__ */ new WeakMap(), ns.set(r, s));
  const i = s.get(t);
  if (i)
    return gi(e, t, i), i.computer;
  const o = ba(e), a = o && ts(o) ? o : ts(e.computer) ? e.computer : void 0, c = typeof o == "function" ? o : (a == null ? void 0 : a.create) ?? (typeof e.computer == "function" ? e.computer : void 0), l = a == null ? void 0 : a.dispose, f = c && typeof c == "function" ? await c({ runContext: t }) : e.computer;
  if (!f)
    throw new ee("The computer tool did not provide a computer instance.");
  const d = {
    computer: f,
    dispose: l
  };
  return s.set(t, d), gi(e, t, d), e.computer = f, f;
}
async function yi({ runContext: n }) {
  const e = yr.get(n);
  if (!e)
    return;
  yr.delete(n);
  const t = [];
  for (const [r, s] of e.entries()) {
    const i = ns.get(r);
    i == null || i.delete(n);
    const o = ba(r);
    o && (r.computer = o), s.dispose && t.push(async () => {
      var a;
      await ((a = s.dispose) == null ? void 0 : a.call(s, { runContext: n, computer: s.computer }));
    });
  }
  for (const r of t)
    try {
      await r();
    } catch (s) {
      j.warn(`Failed to dispose computer for run context: ${s}`);
    }
}
function Cc(n, e) {
  return `An error occurred while running the tool. Please try again. Error: ${e instanceof Error ? e.toString() : String(e)}`;
}
function rs(n) {
  const e = n.name ? gr(n.name) : gr(n.execute.name), t = typeof n.errorFunction > "u" ? Cc : n.errorFunction;
  if (!e)
    throw new Error("Tool name cannot be empty. Either name your function or provide a name in the options.");
  const r = n.strict ?? !0;
  if (!r && jt(n.parameters))
    throw new ee("Strict mode is required for Zod parameters");
  const { parser: s, schema: i } = xs(n.parameters, e);
  async function o(f, d, m) {
    const [g, v] = await ws(() => s(d));
    if (g !== null)
      throw j.dontLogToolData ? j.debug(`Invalid JSON input for tool ${e}`) : j.debug(`Invalid JSON input for tool ${e}: ${d}`), new we("Invalid JSON input for tool");
    j.dontLogToolData ? j.debug(`Invoking tool ${e}`) : j.debug(`Invoking tool ${e} with input ${d}`);
    const S = await n.execute(v, f, m), y = ft(S);
    return j.dontLogToolData ? j.debug(`Tool ${e} completed`) : j.debug(`Tool ${e} returned: ${y}`), S;
  }
  async function a(f, d, m) {
    return o(f, d, m).catch((g) => {
      if (t) {
        const v = Sn();
        return v == null || v.setError({
          message: "Error running tool (non-fatal)",
          data: {
            tool_name: e,
            error: g.toString()
          }
        }), t(f, g);
      }
      throw g;
    });
  }
  const c = typeof n.needsApproval == "function" ? n.needsApproval : async () => typeof n.needsApproval == "boolean" ? n.needsApproval : !1, l = typeof n.isEnabled == "function" ? async (f, d) => {
    const m = n.isEnabled;
    return !!await m({ runContext: f, agent: d });
  } : async () => typeof n.isEnabled == "boolean" ? n.isEnabled : !0;
  return {
    type: "function",
    name: e,
    description: n.description,
    parameters: i,
    strict: r,
    invoke: a,
    needsApproval: c,
    isEnabled: l
  };
}
w({
  name: p(),
  description: p().optional(),
  inputSchema: w({
    type: I("object"),
    properties: ne(p(), W()),
    required: B(p()),
    additionalProperties: Rt()
  })
});
const $r = {}, Fr = {}, Oc = ({ server: n, agent: e }) => n.toolFilter && typeof n.toolFilter == "function" && e ? `${n.name}:${e.name}` : n.name;
async function Ec({ server: n, convertSchemasToStrict: e, runContext: t, agent: r, generateMCPToolCacheKey: s }) {
  const i = (s || Oc)({
    server: n,
    agent: r,
    runContext: t
  });
  if (n.cacheToolsList && $r[i])
    return $r[i].map((a) => _i(a, n, e));
  const o = async (a) => {
    const c = await n.listTools();
    let l = c;
    if (t && r) {
      const d = { runContext: t, agent: r, serverName: n.name }, m = [];
      for (const g of c) {
        const v = n.toolFilter;
        if (v)
          if (typeof v == "function") {
            if (!await v(d, g)) {
              j.debug(`MCP Tool (server: ${n.name}, tool: ${g.name}) is blocked by the callable filter.`);
              continue;
            }
          } else {
            const S = v.allowedToolNames ?? [], y = v.blockedToolNames ?? [];
            if (S.length > 0 || y.length > 0) {
              const h = S.length > 0 ? S.includes(g.name) : !0, b = y.length > 0 ? y.includes(g.name) : !1;
              if (!h || b) {
                b ? j.debug(`MCP Tool (server: ${n.name}, tool: ${g.name}) is blocked by the static filter.`) : h || j.debug(`MCP Tool (server: ${n.name}, tool: ${g.name}) is not allowed by the static filter.`);
                continue;
              }
            }
          }
        m.push(g);
      }
      l = m;
    }
    a && (a.spanData.result = l.map((d) => d.name));
    const f = l.map((d) => _i(d, n, e));
    return n.cacheToolsList && ($r[i] = l, Fr[n.name] || (Fr[n.name] = /* @__PURE__ */ new Set()), Fr[n.name].add(i)), f;
  };
  return un() ? Jl(o, {
    data: { server: n.name }
  }) : o();
}
async function Rc(n, e, t, r = !1) {
  const s = Array.isArray(n) ? {
    mcpServers: n,
    runContext: e,
    agent: t,
    convertSchemasToStrict: r
  } : n, { mcpServers: i, convertSchemasToStrict: o = !1, runContext: a, agent: c, generateMCPToolCacheKey: l } = s, f = [], d = /* @__PURE__ */ new Set();
  for (const m of i) {
    const g = await Ec({
      server: m,
      convertSchemasToStrict: o,
      runContext: a,
      agent: c,
      generateMCPToolCacheKey: l
    }), S = [...new Set(g.map((y) => y.name))].filter((y) => d.has(y));
    if (S.length > 0)
      throw new ee(`Duplicate tool names found across MCP servers: ${S.join(", ")}`);
    for (const y of g)
      d.add(y.name), f.push(y);
  }
  return f;
}
function _i(n, e, t) {
  var o, a, c, l;
  async function r(f, d) {
    let m = {};
    typeof f == "string" && f ? m = JSON.parse(f) : typeof f == "object" && f != null && (m = f);
    const g = Sn();
    g && (g.spanData.mcp_data = { server: e.name });
    const v = await e.callTool(n.name, m);
    return v.length === 1 ? v[0] : v;
  }
  const s = {
    ...n.inputSchema,
    type: ((o = n.inputSchema) == null ? void 0 : o.type) ?? "object",
    properties: ((a = n.inputSchema) == null ? void 0 : a.properties) ?? {},
    required: ((c = n.inputSchema) == null ? void 0 : c.required) ?? [],
    additionalProperties: ((l = n.inputSchema) == null ? void 0 : l.additionalProperties) ?? !1
  };
  if (t || s.additionalProperties === !0)
    try {
      const f = Nc(s);
      return rs({
        name: n.name,
        description: n.description || "",
        parameters: f,
        strict: !0,
        execute: r
      });
    } catch (f) {
      j.warn(`Error converting MCP schema to strict mode: ${f}`);
    }
  const i = {
    ...s,
    additionalProperties: !0
  };
  return rs({
    name: n.name,
    description: n.description || "",
    parameters: i,
    strict: !1,
    execute: r
  });
}
function Nc(n) {
  const e = {
    ...n,
    additionalProperties: !1
  };
  return e.required || (e.required = []), e;
}
function Pc() {
  return {};
}
var zt, wt;
class Tr {
  constructor() {
    R(this, zt, new EventTarget());
    R(this, wt, /* @__PURE__ */ new Map());
  }
  on(e, t) {
    const r = e;
    let s = u(this, wt).get(r);
    s || (s = /* @__PURE__ */ new Map(), u(this, wt).set(r, s));
    let i = s.get(t);
    i || (i = /* @__PURE__ */ new Set(), s.set(t, i));
    const o = ((a) => t(...a.detail ?? []));
    return i.add(o), u(this, zt).addEventListener(r, o), this;
  }
  off(e, t) {
    const r = e, s = u(this, wt).get(r), i = s == null ? void 0 : s.get(t);
    if (i != null && i.size) {
      for (const o of i)
        u(this, zt).removeEventListener(r, o);
      s == null || s.delete(t), (s == null ? void 0 : s.size) === 0 && u(this, wt).delete(r);
    }
    return this;
  }
  emit(e, ...t) {
    const r = new CustomEvent(e, { detail: t });
    return u(this, zt).dispatchEvent(r);
  }
  once(e, t) {
    const r = (...s) => {
      this.off(e, r), t(...s);
    };
    return this.on(e, r), this;
  }
}
zt = new WeakMap(), wt = new WeakMap();
const xa = () => typeof crypto < "u" && crypto.randomUUID ? crypto.randomUUID() : "xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g, function(n) {
  const e = Math.random() * 16 | 0;
  return (n === "x" ? e : e & 3 | 8).toString(16);
}), Dc = class {
  constructor() {
  }
  pipeTo(e, t) {
  }
  pipeThrough(e, t) {
  }
}, Mc = globalThis.ReadableStream, jc = globalThis.TransformStream;
class $c {
  constructor() {
    x(this, "context", null);
  }
  run(e, t) {
    return this.context = e, t();
  }
  getStore() {
    return this.context;
  }
  enterWith(e) {
    this.context = e;
  }
}
class Fc {
  constructor() {
  }
  setTimeout(e, t) {
    const r = setTimeout(e, t);
    return r.ref = typeof r.ref == "function" ? r.ref : () => r, r.unref = typeof r.unref == "function" ? r.unref : () => r, r.hasRef = typeof r.hasRef == "function" ? r.hasRef : () => !0, r.refresh = typeof r.refresh == "function" ? r.refresh : () => r, r;
  }
  clearTimeout(e) {
    window.clearTimeout(e);
  }
}
const Lc = new Fc();
class Ts {
  on(e, t) {
    return this.eventEmitter.on(e, t), this.eventEmitter;
  }
  off(e, t) {
    return this.eventEmitter.off(e, t), this.eventEmitter;
  }
  emit(e, ...t) {
    return this.eventEmitter.emit(e, ...t);
  }
  once(e, t) {
    return this.eventEmitter.once(e, t), this.eventEmitter;
  }
}
class Uc extends Ts {
  constructor() {
    super(...arguments);
    x(this, "eventEmitter", new Tr());
  }
}
class Zc extends Ts {
  constructor() {
    super(...arguments);
    x(this, "eventEmitter", new Tr());
  }
}
const qc = "OPENAI_DEFAULT_MODEL";
function kr(n) {
  return n.startsWith("gpt-5-chat") ? !1 : n.startsWith("gpt-5");
}
function Sa() {
  return kr(Ta());
}
function Ta() {
  var e;
  return ((e = ga()[qc]) == null ? void 0 : e.toLowerCase()) ?? "gpt-4.1";
}
function Jc(n) {
  const e = Ta();
  return kr(e) ? {
    // We chose "low" instead of "minimal" because some of the built-in tools
    // (e.g., file search, image generation, etc.) do not support "minimal"
    // If you want to use "minimal" reasoning effort, you can pass your own model settings
    reasoning: { effort: "low" },
    text: { verbosity: "low" }
  } : {};
}
function ka(n) {
  return JSON.stringify({ assistant: n.name });
}
function Bc(n) {
  return `transfer_to_${gr(n.name)}`;
}
function zc(n) {
  return `Handoff to the ${n.name} agent to handle the request. ${n.handoffDescription ?? ""}`;
}
class Aa {
  constructor(e, t) {
    /**
     * The name of the tool that represents the handoff.
     */
    x(this, "toolName");
    /**
     * The description of the tool that represents the handoff.
     */
    x(this, "toolDescription");
    /**
     * The JSON schema for the handoff input. Can be empty if the handoff does not take an input
     */
    x(this, "inputJsonSchema", {
      type: "object",
      properties: {},
      required: [],
      additionalProperties: !1
    });
    /**
     * Whether the input JSON schema is in strict mode. We **strongly** recommend setting this to
     * true, as it increases the likelihood of correct JSON input.
     */
    x(this, "strictJsonSchema", !0);
    /**
     * The function that invokes the handoff. The parameters passed are:
     * 1. The handoff run context
     * 2. The arguments from the LLM, as a JSON string. Empty string if inputJsonSchema is empty.
     *
     * Must return an agent
     */
    x(this, "onInvokeHandoff");
    /**
     * The name of the agent that is being handed off to.
     */
    x(this, "agentName");
    /**
     * A function that filters the inputs that are passed to the next agent. By default, the new agent
     * sees the entire conversation history. In some cases, you may want to filter inputs e.g. to
     * remove older inputs, or remove tools from existing inputs.
     *
     * The function will receive the entire conversation hisstory so far, including the input item
     * that triggered the handoff and a tool call output item representing the handoff tool's output.
     *
     * You are free to modify the input history or new items as you see fit. The next agent that runs
     * will receive `handoffInputData.allItems
     */
    x(this, "inputFilter");
    /**
     * The agent that is being handed off to.
     */
    x(this, "agent");
    x(this, "isEnabled", async () => !0);
    this.agentName = e.name, this.onInvokeHandoff = t, this.toolName = Bc(e), this.toolDescription = zc(e), this.agent = e;
  }
  /**
   * Returns a function tool definition that can be used to invoke the handoff.
   */
  getHandoffAsFunctionTool() {
    return {
      type: "function",
      name: this.toolName,
      description: this.toolDescription,
      parameters: this.inputJsonSchema,
      strict: this.strictJsonSchema
    };
  }
}
function Ca(n, e = {}) {
  let t;
  const r = !!e.onHandoff, s = !!e.inputType;
  if (!(r === s))
    throw new ee("You must provide either both `onHandoff` and `inputType` or neither.");
  async function o(c, l) {
    var f;
    if (t) {
      if (!l)
        throw Xe({
          message: `Handoff function expected non empty input but got: ${l}`,
          data: {
            details: "input is empty"
          }
        }), new we("Handoff function expected non empty input");
      try {
        const d = await t(l);
        e.onHandoff && await e.onHandoff(c, d);
      } catch (d) {
        throw Xe({
          message: "Invalid JSON provided",
          data: {}
        }), j.dontLogToolData || j.error(`Invalid JSON when parsing: ${l}. Error: ${d}`), new we("Invalid JSON provided");
      }
    } else
      await ((f = e.onHandoff) == null ? void 0 : f.call(e, c));
    return n;
  }
  const a = new Aa(n, o);
  if (typeof e.isEnabled == "function") {
    const c = e.isEnabled;
    a.isEnabled = async ({ runContext: l, agent: f }) => !!await c({ runContext: l, agent: f });
  } else typeof e.isEnabled == "boolean" && (a.isEnabled = async () => e.isEnabled);
  if (e.inputType) {
    const c = xs(e.inputType, a.toolName);
    a.inputJsonSchema = c.schema, a.strictJsonSchema = !0, t = c.parser;
  }
  return e.toolNameOverride && (a.toolName = e.toolNameOverride), e.toolDescriptionOverride && (a.toolDescription = e.toolDescriptionOverride), e.inputFilter && (a.inputFilter = e.inputFilter), a;
}
function Gc(n) {
  return n instanceof Aa ? n : Ca(n);
}
function Oa(n) {
  if (n.type !== "message" || n.role !== "assistant")
    return;
  const e = n.content[n.content.length - 1];
  if (e.type === "output_text")
    return e.text;
}
function Vc(n) {
  return n.output.length === 0 ? "" : Oa(n.output[n.output.length - 1]) || "";
}
const ss = /* @__PURE__ */ new WeakMap();
function Wc(n, e) {
  n && ss.set(n, e);
}
function Hc(n) {
  const e = ss.get(n);
  return e && ss.delete(n), e;
}
const Kc = w({ input: p() }), Jt = class Jt extends Uc {
  constructor(t) {
    super();
    x(this, "name");
    x(this, "instructions");
    x(this, "prompt");
    x(this, "handoffDescription");
    x(this, "handoffs");
    x(this, "model");
    x(this, "modelSettings");
    x(this, "tools");
    x(this, "mcpServers");
    x(this, "inputGuardrails");
    x(this, "outputGuardrails");
    x(this, "outputType", "text");
    x(this, "toolUseBehavior");
    x(this, "resetToolChoice");
    x(this, "_toolsExplicitlyConfigured");
    if (typeof t.name != "string" || t.name.trim() === "")
      throw new ee("Agent must have a name.");
    if (this.name = t.name, this.instructions = t.instructions ?? Jt.DEFAULT_MODEL_PLACEHOLDER, this.prompt = t.prompt, this.handoffDescription = t.handoffDescription ?? "", this.handoffs = t.handoffs ?? [], this.model = t.model ?? "", this.modelSettings = t.modelSettings ?? Jc(), this.tools = t.tools ?? [], this._toolsExplicitlyConfigured = t.tools !== void 0, this.mcpServers = t.mcpServers ?? [], this.inputGuardrails = t.inputGuardrails ?? [], this.outputGuardrails = t.outputGuardrails ?? [], t.outputType && (this.outputType = t.outputType), this.toolUseBehavior = t.toolUseBehavior ?? "run_llm_again", this.resetToolChoice = t.resetToolChoice ?? !0, // The user sets a non-default model
    t.model !== void 0 && // The default model is gpt-5
    Sa() && // However, the specified model is not a gpt-5 model
    (typeof t.model != "string" || !kr(t.model)) && // The model settings are not customized for the specified model
    t.modelSettings === void 0 && (this.modelSettings = {}), (t.handoffOutputTypeWarningEnabled === void 0 || t.handoffOutputTypeWarningEnabled) && this.handoffs && this.outputType) {
      const r = /* @__PURE__ */ new Set([JSON.stringify(this.outputType)]);
      for (const s of this.handoffs)
        "outputType" in s && s.outputType ? r.add(JSON.stringify(s.outputType)) : "agent" in s && s.agent.outputType && r.add(JSON.stringify(s.agent.outputType));
      r.size > 1 && j.warn(`[Agent] Warning: Handoff agents have different output types: ${Array.from(r).join(", ")}. You can make it type-safe by using Agent.create({ ... }) method instead.`);
    }
  }
  /**
   * Create an Agent with handoffs and automatically infer the union type for TOutput from the handoff agents' output types.
   */
  static create(t) {
    return new Jt({
      ...t,
      handoffs: t.handoffs,
      outputType: t.outputType,
      handoffOutputTypeWarningEnabled: !1
    });
  }
  /**
   * Output schema name.
   */
  get outputSchemaName() {
    if (this.outputType === "text")
      return "text";
    if (jt(this.outputType))
      return "ZodOutput";
    if (typeof this.outputType == "object")
      return this.outputType.name;
    throw new Error(`Unknown output type: ${this.outputType}`);
  }
  /**
   * Makes a copy of the agent, with the given arguments changed. For example, you could do:
   *
   * ```
   * const newAgent = agent.clone({ instructions: 'New instructions' })
   * ```
   *
   * @param config - A partial configuration to change.
   * @returns A new agent with the given changes.
   */
  clone(t) {
    return new Jt({
      ...this,
      ...t
    });
  }
  /**
   * Transform this agent into a tool, callable by other agents.
   *
   * This is different from handoffs in two ways:
   * 1. In handoffs, the new agent receives the conversation history. In this tool, the new agent
   *    receives generated input.
   * 2. In handoffs, the new agent takes over the conversation. In this tool, the new agent is
   *    called as a tool, and the conversation is continued by the original agent.
   *
   * @param options - Options for the tool.
   * @returns A tool that runs the agent and returns the output text.
   */
  asTool(t) {
    const { toolName: r, toolDescription: s, customOutputExtractor: i, needsApproval: o, runConfig: a, runOptions: c, isEnabled: l, onStream: f } = t, d = /* @__PURE__ */ new Map(), m = async (S) => {
      const y = d.get(S.event.type), h = d.get("*"), b = [
        ...f ? [f] : [],
        ...y ? Array.from(y) : [],
        ...h ? Array.from(h) : []
      ];
      await Promise.allSettled(b.map((_) => Promise.resolve().then(() => _(S))));
    }, v = {
      ...rs({
        name: r ?? gr(this.name),
        description: s ?? "",
        parameters: Kc,
        strict: !0,
        needsApproval: o,
        isEnabled: l,
        execute: async (S, y, h) => {
          if (!Xu(S))
            throw new we("Agent tool called with invalid input");
          const b = new Ad(a ?? {}), _ = typeof f == "function" || d.size > 0, N = _ ? await b.run(this, S.input, {
            context: y,
            ...c ?? {},
            stream: !0
          }) : await b.run(this, S.input, {
            context: y,
            ...c ?? {}
          }), T = {
            agent: this,
            toolCall: h == null ? void 0 : h.toolCall
          };
          if (_) {
            const z = N;
            for await (const L of z)
              await m({
                event: L,
                ...T
              });
            await z.completed;
          }
          const A = N, D = typeof this.toolUseBehavior == "object" && this.toolUseBehavior !== null && "stopAtToolNames" in this.toolUseBehavior;
          typeof i != "function" && D && j.debug(`You're passing the agent (name: ${this.name}) with toolUseBehavior.stopAtToolNames configured as a tool to a different agent; this may not work as you expect. You may want to have a wrapper function tool to consistently return the final output.`);
          const F = typeof i == "function" ? await i(A) : Vc(A.rawResponses[A.rawResponses.length - 1]);
          return h != null && h.toolCall && Wc(h.toolCall, A), F;
        }
      }),
      on: (S, y) => {
        const h = d.get(S) ?? /* @__PURE__ */ new Set();
        return h.add(y), d.set(S, h), v;
      }
    };
    return v;
  }
  /**
   * Returns the system prompt for the agent.
   *
   * If the agent has a function as its instructions, this function will be called with the
   * runContext and the agent instance.
   */
  async getSystemPrompt(t) {
    return typeof this.instructions == "function" ? await this.instructions(t, this) : this.instructions;
  }
  /**
   * Returns the prompt template for the agent, if defined.
   *
   * If the agent has a function as its prompt, this function will be called with the
   * runContext and the agent instance.
   */
  async getPrompt(t) {
    return typeof this.prompt == "function" ? await this.prompt(t, this) : this.prompt;
  }
  /**
   * Fetches the available tools from the MCP servers.
   * @returns the MCP powered tools
   */
  async getMcpTools(t) {
    return this.mcpServers.length > 0 ? Rc({
      mcpServers: this.mcpServers,
      runContext: t,
      agent: this,
      convertSchemasToStrict: !1
    }) : [];
  }
  /**
   * ALl agent tools, including the MCPl and function tools.
   *
   * @returns all configured tools
   */
  async getAllTools(t) {
    const r = await this.getMcpTools(t), s = [];
    for (const i of this.tools) {
      if (i.type === "function") {
        const o = i.isEnabled;
        if (!(typeof o == "function" ? await o(t, this) : typeof o == "boolean" ? o : !0))
          continue;
      }
      s.push(i);
    }
    return [...r, ...s];
  }
  hasExplicitToolConfig() {
    return this._toolsExplicitlyConfigured;
  }
  /**
   * Returns the handoffs that should be exposed to the model for the current run.
   *
   * Handoffs that provide an `isEnabled` function returning `false` are omitted.
   */
  async getEnabledHandoffs(t) {
    var i;
    const r = ((i = this.handoffs) == null ? void 0 : i.map((o) => Gc(o))) ?? [], s = [];
    for (const o of r)
      await o.isEnabled({ runContext: t, agent: this }) && s.push(o);
    return s;
  }
  /**
   * Processes the final output of the agent.
   *
   * @param output - The output of the agent.
   * @returns The parsed out.
   */
  processFinalOutput(t) {
    if (this.outputType === "text")
      return t;
    if (typeof this.outputType == "object") {
      const r = JSON.parse(t);
      return jt(this.outputType) ? this.outputType.parse(r) : r;
    }
    throw new Error(`Unknown output type: ${this.outputType}`);
  }
  /**
   * Returns a JSON representation of the agent, which is serializable.
   *
   * @returns A JSON object containing the agent's name.
   */
  toJSON() {
    return {
      name: this.name
    };
  }
};
x(Jt, "DEFAULT_MODEL_PLACEHOLDER", "");
let nt = Jt;
function vi({ name: n, execute: e, runInParallel: t = !0 }) {
  return {
    type: "input",
    name: n,
    runInParallel: t,
    guardrailFunction: e,
    async run(r) {
      return {
        guardrail: { type: "input", name: n },
        output: await e(r)
      };
    }
  };
}
function is({ name: n, execute: e }) {
  return {
    type: "output",
    name: n,
    guardrailFunction: e,
    async run(t) {
      return {
        guardrail: { type: "output", name: n },
        agent: t.agent,
        agentOutput: t.agentOutput,
        output: await e(t)
      };
    }
  };
}
function Yc() {
  throw new Error("No default model provider set. Make sure to set a provider using setDefaultModelProvider before calling getDefaultModelProvider or pass an explicit provider.");
}
const de = w({
  /**
   * Additional optional provider specific data. Used for custom functionality or model provider
   * specific fields.
   */
  providerData: ne(p(), W()).optional()
}), Ce = de.extend({
  /**
   * An ID to identify the item. This is optional by default. If a model provider absolutely
   * requires this field, it will be validated on the model level.
   */
  id: p().optional()
}), Xc = de.extend({
  type: I("refusal"),
  /**
   * The refusal explanation from the model.
   */
  refusal: p()
}), Qc = de.extend({
  type: I("output_text"),
  /**
   * The text output from the model.
   */
  text: p()
}), ks = de.extend({
  type: I("input_text"),
  /**
   * A text input for example a message from a user
   */
  text: p()
}), el = de.extend({
  type: I("reasoning_text"),
  /**
   * A text input for example a message from a user
   */
  text: p()
}), Ea = de.extend({
  type: I("input_image"),
  /**
   * The image input to the model. Could be provided inline (`image`), as a URL, or by reference to a
   * previously uploaded OpenAI file.
   */
  image: p().or(w({ id: p().describe("OpenAI file ID") })).describe("Either base64 encoded image data, a data URL, or an object with a file ID.").optional(),
  /**
   * Controls the level of detail requested for image understanding tasks.
   * Future models may add new values, therefore this accepts any string.
   */
  detail: p().optional()
}), Ra = de.extend({
  type: I("input_file"),
  /**
   * The file input to the model. Could be raw data, a URL, or an OpenAI file ID.
   */
  file: p().describe("Either base64 encoded file data or a publicly accessible file URL").or(w({ id: p().describe("OpenAI file ID") })).or(w({ url: p().describe("Publicly accessible file URL") })).describe("Contents of the file or an object with a file ID.").optional(),
  /**
   * Optional filename metadata when uploading file data inline.
   */
  filename: p().optional()
}), Na = de.extend({
  type: I("audio"),
  /**
   * The audio input to the model. Could be base64 encoded audio data or an object with a file ID.
   */
  audio: p().or(w({
    id: p()
  })).describe("Base64 encoded audio data or file id"),
  /**
   * The format of the audio.
   */
  format: p().nullable().optional(),
  /**
   * The transcript of the audio.
   */
  transcript: p().nullable().optional()
}), tl = de.extend({
  type: I("image"),
  /**
   * The image input to the model. Could be base64 encoded image data or an object with a file ID.
   */
  image: p().describe("Base64 encoded image data")
}), nl = de.extend({
  type: I("text"),
  /**
   * The text output from the model.
   */
  text: p()
}), rl = w({
  data: tt([p(), sa(Uint8Array)]).describe("Base64 image data, or raw bytes that will be base64 encoded automatically."),
  mediaType: p().optional()
}), sl = w({
  url: p().describe("Publicly accessible URL pointing to the image content")
}), il = w({
  fileId: p().describe("OpenAI file ID referencing uploaded image content")
}), al = tt([rl, sl, il]).describe("Inline image data or references to uploaded content."), ol = w({
  data: tt([p(), sa(Uint8Array)]).describe("Base64 encoded file data, or raw bytes that will be encoded automatically."),
  mediaType: p().describe("IANA media type describing the file contents"),
  filename: p().describe("Filename associated with the inline data")
}), ul = w({
  url: p().describe("Publicly accessible URL for the file content"),
  filename: p().optional()
}), cl = w({
  id: p().describe("OpenAI file ID referencing uploaded content"),
  filename: p().optional()
}), ll = tt([
  p().describe("Existing data URL or base64 string"),
  ol,
  ul,
  cl
]).describe("Inline data (with metadata) or references pointing to file contents."), dl = (...n) => p(), pl = de.extend({
  type: I("image"),
  /**
   * Inline image content or a reference to an uploaded file. Accepts a URL/data URL string or an
   * object describing the data/url/fileId source.
   */
  image: p().or(al).optional(),
  /**
   * Controls the requested level of detail for vision models.
   * Use a string to avoid constraining future model capabilities.
   */
  detail: dl("low", "high", "auto").optional()
}), fl = de.extend({
  type: I("file"),
  /**
   * File output reference. Provide either a string (data URL / base64), a data object (requires
   * mediaType + filename), or an object pointing to an uploaded file/URL.
   */
  file: ll
}), hl = de.extend({
  type: I("computer_screenshot"),
  /**
   * A base64 encoded image data or a URL representing the screenshot.
   */
  data: p().describe("Base64 encoded image data or URL")
}), ml = ge("type", [
  w({ type: I("screenshot") }),
  w({
    type: I("click"),
    x: E(),
    y: E(),
    button: ce(["left", "right", "wheel", "back", "forward"])
  }),
  w({
    type: I("double_click"),
    x: E(),
    y: E()
  }),
  w({
    type: I("scroll"),
    x: E(),
    y: E(),
    scroll_x: E(),
    scroll_y: E()
  }),
  w({
    type: I("type"),
    text: p()
  }),
  w({ type: I("wait") }),
  w({
    type: I("move"),
    x: E(),
    y: E()
  }),
  w({
    type: I("keypress"),
    keys: B(p())
  }),
  w({
    type: I("drag"),
    path: B(w({ x: E(), y: E() }))
  })
]), gl = ge("type", [
  Qc,
  Xc,
  Na,
  tl
]), As = Ce.extend({
  /**
   * Any item without a type is treated as a message
   */
  type: I("message").optional()
}), Ar = As.extend({
  /**
   * Representing a message from the assistant (i.e. the model)
   */
  role: I("assistant"),
  /**
   * The status of the message.
   */
  status: ce(["in_progress", "completed", "incomplete"]),
  /**
   * The content of the message.
   */
  content: B(gl)
}), yl = ge("type", [
  ks,
  Ea,
  Ra,
  Na
]), Pa = As.extend({
  // type: z.literal('message'),
  /**
   * Representing a message from the user
   */
  role: I("user"),
  /**
   * The content of the message.
   */
  content: B(yl).or(p())
}), Da = As.extend({
  // type: z.literal('message'),
  /**
   * Representing a system message to the user
   */
  role: I("system"),
  /**
   * The content of the message.
   */
  content: p()
});
ge("role", [
  Da,
  Ar,
  Pa
]);
const In = Ce.extend({
  type: I("hosted_tool_call"),
  /**
   * The name of the hosted tool. For example `web_search_call` or `file_search_call`
   */
  name: p().describe("The name of the hosted tool"),
  /**
   * The arguments of the hosted tool call.
   */
  arguments: p().describe("The arguments of the hosted tool call").optional(),
  /**
   * The status of the tool call.
   */
  status: p().optional(),
  /**
   * The primary output of the tool call. Additional output might be in the `providerData` field.
   */
  output: p().optional()
}), xn = Ce.extend({
  type: I("function_call"),
  /**
   * The ID of the tool call. Required to match up the respective tool call result.
   */
  callId: p().describe("The ID of the tool call"),
  /**
   * The name of the function.
   */
  name: p().describe("The name of the function"),
  /**
   * The status of the function call.
   */
  status: ce(["in_progress", "completed", "incomplete"]).optional(),
  /**
   * The arguments of the function call.
   */
  arguments: p()
}), _l = ge("type", [
  nl,
  pl,
  fl
]), vl = ge("type", [
  ks,
  Ea,
  Ra
]), _r = Ce.extend({
  type: I("function_call_result"),
  /**
   * The name of the tool that was called
   */
  name: p().describe("The name of the tool"),
  /**
   * The ID of the tool call. Required to match up the respective tool call result.
   */
  callId: p().describe("The ID of the tool call"),
  /**
   * The status of the tool call.
   */
  status: ce(["in_progress", "completed", "incomplete"]),
  /**
   * The output of the tool call.
   */
  output: tt([
    p(),
    _l,
    B(vl)
  ]).describe("Output returned by the tool call. Supports plain strings, legacy ToolOutput items, or structured input_* items.")
}), Cs = Ce.extend({
  type: I("computer_call"),
  /**
   * The ID of the computer call. Required to match up the respective computer call result.
   */
  callId: p().describe("The ID of the computer call"),
  /**
   * The status of the computer call.
   */
  status: ce(["in_progress", "completed", "incomplete"]),
  /**
   * The action to be performed by the computer.
   */
  action: ml
}), wl = Ce.extend({
  type: I("computer_call_result"),
  /**
   * The ID of the computer call. Required to match up the respective computer call result.
   */
  callId: p().describe("The ID of the computer call"),
  /**
   * The output of the computer call.
   */
  output: hl
}), bl = w({
  commands: B(p()),
  timeoutMs: E().int().min(0).optional(),
  maxOutputLength: E().int().min(0).optional()
}), Cr = Ce.extend({
  type: I("shell_call"),
  callId: p(),
  status: ce(["in_progress", "completed", "incomplete"]).optional(),
  action: bl
}), Il = ge("type", [
  w({ type: I("timeout") }),
  w({
    type: I("exit"),
    exitCode: E().int().nullable()
  })
]), xl = w({
  stdout: p(),
  stderr: p(),
  outcome: Il
}).passthrough(), Ma = Ce.extend({
  type: I("shell_call_output"),
  callId: p(),
  maxOutputLength: E().optional(),
  output: B(xl)
}), Sl = w({
  type: I("create_file"),
  path: p(),
  diff: p()
}), Tl = w({
  type: I("update_file"),
  path: p(),
  diff: p()
}), kl = w({
  type: I("delete_file"),
  path: p()
}), Al = ge("type", [
  Sl,
  Tl,
  kl
]), Or = Ce.extend({
  type: I("apply_patch_call"),
  callId: p(),
  status: ce(["in_progress", "completed"]),
  operation: Al
}), ja = Ce.extend({
  type: I("apply_patch_call_output"),
  callId: p(),
  status: ce(["completed", "failed"]),
  output: p().optional()
}), Cl = ge("type", [
  Cs,
  Cr,
  Or,
  xn,
  In
]), Os = de.extend({
  id: p().optional(),
  type: I("reasoning"),
  /**
   * The user facing representation of the reasoning. Additional information might be in the `providerData` field.
   */
  content: B(ks),
  /**
   * The raw reasoning text from the model.
   */
  rawContent: B(el).optional()
}), $a = Ce.extend({
  type: I("compaction"),
  /**
   * Encrypted payload returned by the compaction endpoint.
   */
  encrypted_content: p(),
  /**
   * Identifier for the compaction item.
   */
  id: p().optional(),
  /**
   * Identifier for the generator of this compaction item.
   */
  created_by: p().optional()
}), Fa = Ce.extend({
  type: I("unknown")
}), Es = ge("type", [
  Ar,
  In,
  xn,
  Cs,
  Cr,
  Or,
  _r,
  Ma,
  ja,
  Os,
  $a,
  Fa
]), Ol = tt([
  Pa,
  Ar,
  Da,
  In,
  xn,
  Cs,
  Cr,
  Or,
  _r,
  wl,
  Ma,
  ja,
  Os,
  $a,
  Fa
]), El = w({
  inputTokens: E(),
  outputTokens: E(),
  totalTokens: E(),
  inputTokensDetails: ne(p(), E()).optional(),
  outputTokensDetails: ne(p(), E()).optional(),
  endpoint: p().optional()
}), Rl = w({
  requests: E().optional(),
  inputTokens: E(),
  outputTokens: E(),
  totalTokens: E(),
  inputTokensDetails: tt([
    ne(p(), E()),
    B(ne(p(), E()))
  ]).optional(),
  outputTokensDetails: tt([
    ne(p(), E()),
    B(ne(p(), E()))
  ]).optional(),
  requestUsageEntries: B(El).optional()
}), La = de.extend({
  type: I("output_text_delta"),
  /**
   * The delta text that was streamed by the modelto the user.
   */
  delta: p()
}), Nl = de.extend({
  type: I("response_started")
}), Ua = de.extend({
  type: I("response_done"),
  /**
   * The response from the model.
   */
  response: de.extend({
    /**
     * The ID of the response.
     */
    id: p(),
    /**
     * The usage data for the response.
     */
    usage: Rl,
    /**
     * The output from the model.
     */
    output: B(Es)
  })
}), Pl = de.extend({
  type: I("model"),
  event: W().describe("The event from the model")
});
ge("type", [
  La,
  Ua,
  Nl,
  Pl
]);
class pn {
  constructor(e) {
    /**
     * The number of input tokens used for this request.
     */
    x(this, "inputTokens");
    /**
     * The number of output tokens used for this request.
     */
    x(this, "outputTokens");
    /**
     * The total number of tokens sent and received for this request.
     */
    x(this, "totalTokens");
    /**
     * Details about the input tokens used for this request.
     */
    x(this, "inputTokensDetails");
    /**
     * Details about the output tokens used for this request.
     */
    x(this, "outputTokensDetails");
    /**
     * The endpoint that produced this usage entry (e.g., responses.create, responses.compact).
     */
    x(this, "endpoint");
    this.inputTokens = (e == null ? void 0 : e.inputTokens) ?? (e == null ? void 0 : e.input_tokens) ?? 0, this.outputTokens = (e == null ? void 0 : e.outputTokens) ?? (e == null ? void 0 : e.output_tokens) ?? 0, this.totalTokens = (e == null ? void 0 : e.totalTokens) ?? (e == null ? void 0 : e.total_tokens) ?? this.inputTokens + this.outputTokens;
    const t = (e == null ? void 0 : e.inputTokensDetails) ?? (e == null ? void 0 : e.input_tokens_details);
    this.inputTokensDetails = t || {};
    const r = (e == null ? void 0 : e.outputTokensDetails) ?? (e == null ? void 0 : e.output_tokens_details);
    this.outputTokensDetails = r || {}, typeof (e == null ? void 0 : e.endpoint) < "u" && (this.endpoint = e.endpoint);
  }
}
class Kn {
  constructor(e) {
    /**
     * The number of requests made to the LLM API.
     */
    x(this, "requests");
    /**
     * The number of input tokens used across all requests.
     */
    x(this, "inputTokens");
    /**
     * The number of output tokens used across all requests.
     */
    x(this, "outputTokens");
    /**
     * The total number of tokens sent and received, across all requests.
     */
    x(this, "totalTokens");
    /**
     * Details about the input tokens used across all requests.
     */
    x(this, "inputTokensDetails", []);
    /**
     * Details about the output tokens used across all requests.
     */
    x(this, "outputTokensDetails", []);
    /**
     * List of per-request usage entries for detailed cost calculations.
     */
    x(this, "requestUsageEntries");
    if (typeof e > "u")
      this.requests = 0, this.inputTokens = 0, this.outputTokens = 0, this.totalTokens = 0, this.inputTokensDetails = [], this.outputTokensDetails = [], this.requestUsageEntries = void 0;
    else {
      this.requests = (e == null ? void 0 : e.requests) ?? 1, this.inputTokens = (e == null ? void 0 : e.inputTokens) ?? (e == null ? void 0 : e.input_tokens) ?? 0, this.outputTokens = (e == null ? void 0 : e.outputTokens) ?? (e == null ? void 0 : e.output_tokens) ?? 0, this.totalTokens = (e == null ? void 0 : e.totalTokens) ?? (e == null ? void 0 : e.total_tokens) ?? this.inputTokens + this.outputTokens;
      const t = (e == null ? void 0 : e.inputTokensDetails) ?? (e == null ? void 0 : e.input_tokens_details);
      Array.isArray(t) ? this.inputTokensDetails = t : this.inputTokensDetails = t ? [t] : [];
      const r = (e == null ? void 0 : e.outputTokensDetails) ?? (e == null ? void 0 : e.output_tokens_details);
      Array.isArray(r) ? this.outputTokensDetails = r : this.outputTokensDetails = r ? [r] : [];
      const s = (e == null ? void 0 : e.requestUsageEntries) ?? (e == null ? void 0 : e.request_usage_entries), i = Array.isArray(s) ? s.map((o) => o instanceof pn ? o : new pn(o)) : void 0;
      this.requestUsageEntries = i && i.length > 0 ? i : void 0;
    }
  }
  add(e) {
    var t, r;
    this.requests += e.requests ?? 0, this.inputTokens += e.inputTokens ?? 0, this.outputTokens += e.outputTokens ?? 0, this.totalTokens += e.totalTokens ?? 0, e.inputTokensDetails && this.inputTokensDetails.push(...e.inputTokensDetails), e.outputTokensDetails && this.outputTokensDetails.push(...e.outputTokensDetails), Array.isArray(e.requestUsageEntries) && e.requestUsageEntries.length > 0 ? (this.requestUsageEntries ?? (this.requestUsageEntries = []), this.requestUsageEntries.push(...e.requestUsageEntries.map((s) => s instanceof pn ? s : new pn(s)))) : e.requests === 1 && e.totalTokens > 0 && (this.requestUsageEntries ?? (this.requestUsageEntries = []), this.requestUsageEntries.push(new pn({
      inputTokens: e.inputTokens,
      outputTokens: e.outputTokens,
      totalTokens: e.totalTokens,
      inputTokensDetails: (t = e.inputTokensDetails) == null ? void 0 : t[0],
      outputTokensDetails: (r = e.outputTokensDetails) == null ? void 0 : r[0]
    })));
  }
}
var Ie;
class Zt {
  constructor(e = {}) {
    /**
     * The context object you passed to the `Runner.run()` method.
     */
    x(this, "context");
    /**
     * The usage of the agent run so far. For streamed responses, the usage will be updated in real-time
     */
    x(this, "usage");
    /**
     * A map of tool names to whether they have been approved.
     */
    R(this, Ie);
    this.context = e, this.usage = new Kn(), k(this, Ie, /* @__PURE__ */ new Map());
  }
  /**
   * Rebuild the approvals map from a serialized state.
   * @internal
   *
   * @param approvals - The approvals map to rebuild.
   */
  _rebuildApprovals(e) {
    k(this, Ie, new Map(Object.entries(e)));
  }
  /**
   * Check if a tool call has been approved.
   *
   * @param approval - Details about the tool call being evaluated.
   * @returns `true` if the tool call has been approved, `false` if blocked and `undefined` if not yet approved or rejected.
   */
  isToolApproved(e) {
    const { toolName: t, callId: r } = e, s = u(this, Ie).get(t);
    if ((s == null ? void 0 : s.approved) === !0 && s.rejected === !0)
      return j.warn("Tool is permanently approved and rejected at the same time. Approval takes precedence"), !0;
    if ((s == null ? void 0 : s.approved) === !0)
      return !0;
    if ((s == null ? void 0 : s.rejected) === !0)
      return !1;
    const i = Array.isArray(s == null ? void 0 : s.approved) ? s.approved.includes(r) : !1, o = Array.isArray(s == null ? void 0 : s.rejected) ? s.rejected.includes(r) : !1;
    if (i && o)
      return j.warn(`Tool call ${r} is both approved and rejected at the same time. Approval takes precedence`), !0;
    if (i)
      return !0;
    if (o)
      return !1;
  }
  /**
   * Approve a tool call.
   *
   * @param approvalItem - The tool approval item to approve.
   * @param options - Additional approval behavior options.
   */
  approveTool(e, { alwaysApprove: t = !1 } = {}) {
    const r = e.toolName ?? e.rawItem.name;
    if (t) {
      u(this, Ie).set(r, {
        approved: !0,
        rejected: []
      });
      return;
    }
    const s = u(this, Ie).get(r) ?? {
      approved: [],
      rejected: []
    };
    if (Array.isArray(s.approved)) {
      const i = "callId" in e.rawItem ? e.rawItem.callId : e.rawItem.id;
      s.approved.push(i);
    }
    u(this, Ie).set(r, s);
  }
  /**
   * Reject a tool call.
   *
   * @param approvalItem - The tool approval item to reject.
   */
  rejectTool(e, { alwaysReject: t = !1 } = {}) {
    const r = e.toolName ?? e.rawItem.name;
    if (t) {
      u(this, Ie).set(r, {
        approved: !1,
        rejected: !0
      });
      return;
    }
    const s = u(this, Ie).get(r) ?? {
      approved: [],
      rejected: []
    };
    if (Array.isArray(s.rejected)) {
      const i = "callId" in e.rawItem ? e.rawItem.callId : e.rawItem.id;
      s.rejected.push(i);
    }
    u(this, Ie).set(r, s);
  }
  toJSON() {
    return {
      context: this.context,
      usage: this.usage,
      approvals: Object.fromEntries(u(this, Ie).entries())
    };
  }
}
Ie = new WeakMap();
function Dl(n) {
  return !!n && typeof n == "object" && "environment" in n && "dimensions" in n;
}
function Ml(n) {
  if (n.type === "function")
    return {
      type: "function",
      name: n.name,
      description: n.description,
      parameters: n.parameters,
      strict: n.strict
    };
  if (n.type === "computer") {
    if (!Dl(n.computer))
      throw new ee("Computer tool is not initialized for serialization. Call resolveComputer({ tool, runContext }) first (for example, when building a model payload outside Runner.run).");
    return {
      type: "computer",
      name: n.name,
      environment: n.computer.environment,
      dimensions: n.computer.dimensions
    };
  }
  return n.type === "shell" ? {
    type: "shell",
    name: n.name
  } : n.type === "apply_patch" ? {
    type: "apply_patch",
    name: n.name
  } : {
    type: "hosted_tool",
    name: n.name,
    providerData: n.providerData
  };
}
function jl(n) {
  return {
    toolName: n.toolName,
    toolDescription: n.toolDescription,
    inputJsonSchema: n.inputJsonSchema,
    strictJsonSchema: n.strictJsonSchema
  };
}
class Ft {
  constructor() {
    x(this, "type", "base_item");
    x(this, "rawItem");
  }
  toJSON() {
    return {
      type: this.type,
      rawItem: this.rawItem
    };
  }
}
class Er extends Ft {
  constructor(t, r) {
    super();
    x(this, "rawItem");
    x(this, "agent");
    x(this, "type", "message_output_item");
    this.rawItem = t, this.agent = r;
  }
  toJSON() {
    return {
      ...super.toJSON(),
      agent: this.agent.toJSON()
    };
  }
  get content() {
    let t = "";
    for (const r of this.rawItem.content)
      r.type === "output_text" && (t += r.text);
    return t;
  }
}
class Ye extends Ft {
  constructor(t, r) {
    super();
    x(this, "rawItem");
    x(this, "agent");
    x(this, "type", "tool_call_item");
    this.rawItem = t, this.agent = r;
  }
  toJSON() {
    return {
      ...super.toJSON(),
      agent: this.agent.toJSON()
    };
  }
}
class Ze extends Ft {
  constructor(t, r, s) {
    super();
    x(this, "rawItem");
    x(this, "agent");
    x(this, "output");
    x(this, "type", "tool_call_output_item");
    this.rawItem = t, this.agent = r, this.output = s;
  }
  toJSON() {
    return {
      ...super.toJSON(),
      agent: this.agent.toJSON(),
      output: ft(this.output)
    };
  }
}
class Rs extends Ft {
  constructor(t, r) {
    super();
    x(this, "rawItem");
    x(this, "agent");
    x(this, "type", "reasoning_item");
    this.rawItem = t, this.agent = r;
  }
  toJSON() {
    return {
      ...super.toJSON(),
      agent: this.agent.toJSON()
    };
  }
}
class Ns extends Ft {
  constructor(t, r) {
    super();
    x(this, "rawItem");
    x(this, "agent");
    x(this, "type", "handoff_call_item");
    this.rawItem = t, this.agent = r;
  }
  toJSON() {
    return {
      ...super.toJSON(),
      agent: this.agent.toJSON()
    };
  }
}
class Ps extends Ft {
  constructor(t, r, s) {
    super();
    x(this, "rawItem");
    x(this, "sourceAgent");
    x(this, "targetAgent");
    x(this, "type", "handoff_output_item");
    this.rawItem = t, this.sourceAgent = r, this.targetAgent = s;
  }
  toJSON() {
    return {
      ...super.toJSON(),
      sourceAgent: this.sourceAgent.toJSON(),
      targetAgent: this.targetAgent.toJSON()
    };
  }
}
class ye extends Ft {
  constructor(t, r, s) {
    super();
    x(this, "rawItem");
    x(this, "agent");
    x(this, "toolName");
    x(this, "type", "tool_approval_item");
    this.rawItem = t, this.agent = r, this.toolName = s, this.toolName = s ?? t.name;
  }
  /**
   * Returns the tool name if available on the raw item or provided explicitly.
   * Kept for backwards compatibility with code that previously relied on `rawItem.name`.
   */
  get name() {
    return this.toolName ?? this.rawItem.name;
  }
  /**
   * Returns the arguments if the raw item has an arguments property otherwise this will be undefined.
   */
  get arguments() {
    return "arguments" in this.rawItem ? this.rawItem.arguments : void 0;
  }
  toJSON() {
    return {
      ...super.toJSON(),
      agent: this.agent.toJSON(),
      toolName: this.toolName
    };
  }
}
function Rr(n) {
  return async (e, ...t) => fs(async () => {
    const r = n(...t);
    js(r);
    try {
      return r.start(), await e(r);
    } catch (s) {
      throw r.setError({
        message: s.message,
        data: s.data
      }), s;
    } finally {
      r.end(), mn();
    }
  });
}
function $l(n, e) {
  var t;
  return Je().createSpan({
    ...n,
    data: {
      type: "agent",
      name: ((t = n == null ? void 0 : n.data) == null ? void 0 : t.name) ?? "Agent",
      ...n == null ? void 0 : n.data
    }
  }, e);
}
function Fl(n, e) {
  var t, r;
  return Je().createSpan({
    ...n,
    data: {
      type: "function",
      input: ((t = n == null ? void 0 : n.data) == null ? void 0 : t.input) ?? "",
      output: ((r = n == null ? void 0 : n.data) == null ? void 0 : r.output) ?? "",
      ...n == null ? void 0 : n.data
    }
  }, e);
}
const wi = Rr(Fl);
function Ll(n, e) {
  return Je().createSpan({
    ...n,
    data: { type: "handoff", ...n == null ? void 0 : n.data }
  }, e);
}
const Ul = Rr(Ll);
function Zl(n, e) {
  return Je().createSpan({
    ...n,
    data: {
      type: "guardrail",
      triggered: !1,
      ...n == null ? void 0 : n.data
    }
  }, e);
}
const bi = Rr(Zl);
function ql(n, e) {
  return Je().createSpan({
    ...n,
    data: {
      type: "mcp_tools",
      ...n == null ? void 0 : n.data
    }
  }, e);
}
const Jl = Rr(ql);
function ke(n) {
  if (n.length === 0)
    return "";
  const e = typeof globalThis < "u" && globalThis.Buffer ? globalThis.Buffer : void 0;
  if (e)
    return e.from(n).toString("base64");
  let t = "";
  for (let o = 0; o < n.length; o += 1)
    t += String.fromCharCode(n[o]);
  if (typeof globalThis.btoa == "function")
    return globalThis.btoa(t);
  const r = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";
  let s = "", i = 0;
  for (; i < t.length; ) {
    const o = t.charCodeAt(i++), a = t.charCodeAt(i++), c = t.charCodeAt(i++), l = o >> 2, f = (o & 3) << 4 | a >> 4, d = isNaN(a) ? 64 : (a & 15) << 2 | c >> 6, m = isNaN(c) ? 64 : c & 63;
    s += r.charAt(l) + r.charAt(f) + r.charAt(d) + r.charAt(m);
  }
  return s;
}
class Bl {
  /**
   * @param data The raw responses stream events from the LLM.
   */
  constructor(e) {
    x(this, "data");
    /**
     * The type of the event.
     */
    x(this, "type", "raw_model_stream_event");
    this.data = e;
  }
}
class zl {
  /**
   * @param name The name of the event.
   * @param item The item that was created.
   */
  constructor(e, t) {
    x(this, "name");
    x(this, "item");
    x(this, "type", "run_item_stream_event");
    this.name = e, this.item = t;
  }
}
class Gl {
  /**
   * @param agent The new agent
   */
  constructor(e) {
    x(this, "agent");
    x(this, "type", "agent_updated_stream_event");
    this.agent = e;
  }
}
function Vl(n) {
  return !!n && typeof n.runCompaction == "function";
}
function Wl(n) {
  if (!n || typeof n != "object" || !("rawItem" in n))
    return !1;
  const e = n.rawItem;
  if (!e || typeof e != "object")
    return !1;
  const t = e.type;
  return t === "function_call" || t === "hosted_tool_call";
}
function Ii(n) {
  const e = n.rawItem;
  if (!e)
    return;
  if (e.type === "function_call" && e.callId)
    return `function_call:${e.callId}`;
  if ("callId" in e && e.callId)
    return `${e.type}:${e.callId}`;
  const t = "id" in e ? e.id : void 0;
  if (t)
    return `${e.type}:${t}`;
  const r = typeof e.providerData == "object" && e.providerData ? e.providerData : void 0;
  if (r != null && r.id)
    return `${e.type}:provider:${r.id}`;
  const s = "agent" in n && n.agent ? n.agent.name : "";
  try {
    return `${s}:${e.type}:${JSON.stringify(e)}`;
  } catch {
    return `${s}:${e.type}`;
  }
}
function Hl(n) {
  try {
    if (n instanceof Fe) {
      const e = n.issues[0];
      if (e) {
        const t = Array.isArray(e.path) ? e.path : [], r = t.length > 0 ? t.map((i) => String(i)).join(".") : "(root)", s = xi(e.message ?? "");
        return `Invalid output type: final assistant output failed schema validation at "${r}" (${s}).`;
      }
      return "Invalid output type: final assistant output failed schema validation.";
    }
    if (n instanceof Error && n.message)
      return `Invalid output type: ${xi(n.message)}`;
  } catch {
  }
  return "Invalid output type: final assistant output did not match the expected schema.";
}
function xi(n, e = 160) {
  const t = n.trim();
  return t ? t.length <= e ? t : `${t.slice(0, e - 3)}...` : "Schema validation failed.";
}
function Si(n, e, t, r) {
  var b;
  const s = [], i = [], o = [], a = [], c = [], l = [], f = [], d = [], m = new Map(r.map((_) => [_.toolName, _])), g = new Map(t.filter((_) => _.type === "function").map((_) => [_.name, _])), v = t.find((_) => _.type === "computer"), S = t.find((_) => _.type === "shell"), y = t.find((_) => _.type === "apply_patch"), h = new Map(t.filter((_) => {
    var N;
    return _.type === "hosted_tool" && ((N = _.providerData) == null ? void 0 : N.type) === "mcp";
  }).map((_) => _).map((_) => [_.providerData.server_label, _]));
  for (const _ of n.output) {
    if (_.type === "message")
      _.role === "assistant" && s.push(new Er(_, e));
    else if (_.type === "hosted_tool_call") {
      s.push(new Ye(_, e));
      const T = _.name;
      if (d.push(T), ((b = _.providerData) == null ? void 0 : b.type) === "mcp_approval_request" || _.name === "mcp_approval_request") {
        const A = _.providerData, D = A.server_label, F = h.get(D);
        if (typeof F > "u") {
          const L = `MCP server (${D}) not found in Agent (${e.name})`;
          throw Xe({
            message: L,
            data: { mcp_server_label: D }
          }), new we(L);
        }
        const z = new ye({
          type: "hosted_tool_call",
          // We must use this name to align with the name sent from the servers
          name: A.name,
          id: A.id,
          status: "in_progress",
          providerData: A
        }, e);
        f.push({
          requestItem: z,
          mcpTool: F
        }), F.providerData.on_approval || s.push(z);
      }
    } else if (_.type === "reasoning")
      s.push(new Rs(_, e));
    else if (_.type === "computer_call") {
      if (s.push(new Ye(_, e)), d.push("computer_use"), !v)
        throw Xe({
          message: "Model produced computer action without a computer tool.",
          data: {
            agent_name: e.name
          }
        }), new we("Model produced computer action without a computer tool.");
      a.push({
        toolCall: _,
        computer: v
      });
    } else if (_.type === "shell_call") {
      if (s.push(new Ye(_, e)), d.push("shell"), !S)
        throw Xe({
          message: "Model produced shell action without a shell tool.",
          data: {
            agent_name: e.name
          }
        }), new we("Model produced shell action without a shell tool.");
      c.push({
        toolCall: _,
        shell: S
      });
    } else if (_.type === "apply_patch_call") {
      if (s.push(new Ye(_, e)), d.push("apply_patch"), !y)
        throw Xe({
          message: "Model produced apply_patch action without an apply_patch tool.",
          data: {
            agent_name: e.name
          }
        }), new we("Model produced apply_patch action without an apply_patch tool.");
      l.push({
        toolCall: _,
        applyPatch: y
      });
    }
    if (_.type !== "function_call")
      continue;
    d.push(_.name);
    const N = m.get(_.name);
    if (N)
      s.push(new Ns(_, e)), i.push({
        toolCall: _,
        handoff: N
      });
    else {
      const T = g.get(_.name);
      if (!T)
        throw Xe({
          message: `Tool ${_.name} not found in agent ${e.name}.`,
          data: {
            tool_name: _.name,
            agent_name: e.name
          }
        }), new we(`Tool ${_.name} not found in agent ${e.name}.`);
      s.push(new Ye(_, e)), o.push({
        toolCall: _,
        tool: T
      });
    }
  }
  return {
    newItems: s,
    handoffs: i,
    functions: o,
    computerActions: a,
    shellActions: c,
    applyPatchActions: l,
    mcpApprovalRequests: f,
    toolsUsed: d,
    hasToolsOrApprovalsToRun() {
      return i.length > 0 || o.length > 0 || f.length > 0 || a.length > 0 || c.length > 0 || l.length > 0;
    }
  };
}
const Kl = ge("type", [
  w({
    type: I("next_step_handoff"),
    newAgent: W()
  }),
  w({
    type: I("next_step_final_output"),
    output: p()
  }),
  w({
    type: I("next_step_run_again")
  }),
  w({
    type: I("next_step_interruption"),
    data: ne(p(), W())
  })
]);
class je {
  constructor(e, t, r, s, i) {
    x(this, "originalInput");
    x(this, "modelResponse");
    x(this, "preStepItems");
    x(this, "newStepItems");
    x(this, "nextStep");
    this.originalInput = e, this.modelResponse = t, this.preStepItems = r, this.newStepItems = s, this.nextStep = i;
  }
  /**
   * The items generated during the agent run (i.e. everything generated after originalInput)
   */
  get generatedItems() {
    return this.preStepItems.concat(this.newStepItems);
  }
}
function Yl(n, e, t) {
  return n.resetToolChoice && e.hasUsedTools(n) ? { ...t, toolChoice: void 0 } : t;
}
async function Ti(n, e, t, r, s, i, o) {
  const a = t.filter((T) => T instanceof ye && "callId" in T.rawItem && T.rawItem.type === "function_call").map((T) => T.rawItem.callId), c = o.getInterruptions().filter(Wl);
  if (c.length > 0) {
    const T = /* @__PURE__ */ new Set();
    for (const A of c) {
      const D = Ii(A);
      D && T.add(D);
    }
    if (T.size > 0) {
      let A = 0;
      for (let D = t.length - 1; D >= 0; D--) {
        const F = t[D];
        if (!(F instanceof ye))
          continue;
        const z = Ii(F);
        if (z && T.has(z) && (A++, T.delete(z), T.size === 0))
          break;
      }
      A > 0 && (o._currentTurnPersistedItemCount = Math.max(0, o._currentTurnPersistedItemCount - A));
    }
  }
  const l = s.functions.filter((T) => a.includes(T.toolCall.callId)), f = await qa(n, l, i, o), d = s.computerActions.length > 0 ? await Ba(n, s.computerActions, i, o._context) : [], m = new Set(t), g = [], v = /* @__PURE__ */ new Set(), S = (T) => {
    m.has(T) || v.has(T) || (g.push(T), v.add(T));
  };
  for (const T of f)
    S(T.runItem);
  for (const T of d)
    S(T);
  const y = s.mcpApprovalRequests.filter((T) => {
    var A;
    return T.requestItem.type === "tool_approval_item" && T.requestItem.rawItem.type === "hosted_tool_call" && ((A = T.requestItem.rawItem.providerData) == null ? void 0 : A.type) === "mcp_approval_request";
  }), h = /* @__PURE__ */ new Set(), b = /* @__PURE__ */ new Set();
  for (const T of y) {
    const A = T.requestItem.rawItem;
    if (A.type !== "hosted_tool_call")
      continue;
    const D = A.id, F = o._context.isToolApproved({
      // Since this item name must be the same with the one sent from Responses API server
      toolName: A.name,
      callId: D
    });
    if (typeof F < "u") {
      const z = {
        approve: F,
        approval_request_id: D,
        reason: void 0
      }, L = new Ye({
        type: "hosted_tool_call",
        name: "mcp_approval_response",
        providerData: z
      }, n);
      S(L);
    } else
      h.add(T.requestItem), b.add(D), f.push({
        type: "hosted_mcp_tool_approval",
        tool: T.mcpTool,
        runItem: T.requestItem
      }), S(T.requestItem);
  }
  const _ = t.filter((T) => {
    var A;
    if (!(T instanceof ye))
      return !0;
    if (T.rawItem.type === "hosted_tool_call" && ((A = T.rawItem.providerData) == null ? void 0 : A.type) === "mcp_approval_request") {
      if (h.has(T))
        return !0;
      const D = T.rawItem.id;
      return D ? b.has(D) : !1;
    }
    return !1;
  }), N = await Za({
    agent: n,
    runner: i,
    state: o,
    functionResults: f,
    originalInput: e,
    newResponse: r,
    preStepItems: _,
    newItems: g
  });
  return N || new je(e, r, _, g, { type: "next_step_run_again" });
}
async function ki(n, e, t, r, s, i, o) {
  var N, T, A, D, F, z;
  const a = t, c = new Set(t), l = [], f = (L) => {
    c.has(L) || (l.push(L), c.add(L));
  };
  for (const L of s.newItems)
    f(L);
  const [d, m, g, v] = await Promise.all([
    qa(n, s.functions, i, o),
    Ba(n, s.computerActions, i, o._context),
    nd(n, s.shellActions, i, o._context),
    rd(n, s.applyPatchActions, i, o._context)
  ]);
  for (const L of d)
    f(L.runItem);
  for (const L of m)
    f(L);
  for (const L of g)
    f(L);
  for (const L of v)
    f(L);
  if (s.mcpApprovalRequests.length > 0)
    for (const L of s.mcpApprovalRequests) {
      const oe = L.mcpTool.providerData, K = L.requestItem.rawItem.providerData;
      if (oe.on_approval) {
        const ae = await oe.on_approval(o._context, L.requestItem), Oe = {
          approve: ae.approve,
          approval_request_id: K.id,
          reason: ae.reason
        };
        l.push(new Ye({
          type: "hosted_tool_call",
          name: "mcp_approval_response",
          providerData: Oe
        }, n));
      } else {
        l.push(L.requestItem);
        const ae = {
          type: "hosted_mcp_tool_approval",
          tool: L.mcpTool,
          runItem: new ye({
            type: "hosted_tool_call",
            name: K.name,
            id: K.id,
            arguments: K.arguments,
            status: "in_progress",
            providerData: K
          }, n)
        };
        d.push(ae);
      }
    }
  if (s.handoffs.length > 0)
    return await sd(n, e, a, l, r, s.handoffs, i, o._context);
  const S = await Za({
    agent: n,
    runner: i,
    state: o,
    functionResults: d,
    originalInput: e,
    newResponse: r,
    preStepItems: a,
    newItems: l
  });
  if (S)
    return S;
  if ((((N = s.functions) == null ? void 0 : N.length) ?? 0) > 0 || (((T = s.computerActions) == null ? void 0 : T.length) ?? 0) > 0 || (((A = s.shellActions) == null ? void 0 : A.length) ?? 0) > 0 || (((D = s.applyPatchActions) == null ? void 0 : D.length) ?? 0) > 0 || (((F = s.mcpApprovalRequests) == null ? void 0 : F.length) ?? 0) > 0 || (((z = s.handoffs) == null ? void 0 : z.length) ?? 0) > 0)
    return new je(e, r, a, l, { type: "next_step_run_again" });
  const h = l.filter((L) => L instanceof Er), b = h.length > 0 ? Oa(h[h.length - 1].rawItem) : void 0;
  if (typeof b > "u")
    return new je(e, r, a, l, { type: "next_step_run_again" });
  if (!d.some((L) => L.runItem instanceof ye)) {
    if (n.outputType === "text")
      return new je(e, r, a, l, {
        type: "next_step_final_output",
        output: b
      });
    if (n.outputType !== "text" && b) {
      const { parser: L } = xs(n.outputType, "final_output"), [oe] = await ws(() => L(b));
      if (oe) {
        const K = Hl(oe);
        throw Xe({
          message: K,
          data: {
            error: String(oe)
          }
        }), new we(K);
      }
      return new je(e, r, a, l, { type: "next_step_final_output", output: b });
    }
  }
  return new je(e, r, a, l, { type: "next_step_run_again" });
}
async function Za({ agent: n, runner: e, state: t, functionResults: r, originalInput: s, newResponse: i, preStepItems: o, newItems: a }) {
  const c = await id(n, r, t);
  return c.isFinalOutput ? (e.emit("agent_end", t._context, n, c.finalOutput), n.emit("agent_end", t._context, c.finalOutput), new je(s, i, o, a, {
    type: "next_step_final_output",
    output: c.finalOutput
  })) : c.isInterrupted ? new je(s, i, o, a, {
    type: "next_step_interruption",
    data: {
      interruptions: c.interruptions
    }
  }) : null;
}
function vr(n, e) {
  const t = md(e);
  if (t) {
    const r = t.map(gd);
    return {
      type: "function_call_result",
      name: n.name,
      callId: n.callId,
      status: "completed",
      output: r
    };
  }
  return {
    type: "function_call_result",
    name: n.name,
    callId: n.callId,
    status: "completed",
    output: {
      type: "text",
      text: ft(e)
    }
  };
}
function Xl(n) {
  const e = n.file;
  if (typeof e == "string" && e.length > 0)
    return e;
  const t = Ql(e);
  if (t)
    return t;
  const r = ed(n);
  return r || null;
}
function Ql(n) {
  if (!_t(n))
    return null;
  if ("data" in n && n.data !== void 0) {
    const t = n.data, r = typeof t == "string" && t.length > 0, s = t instanceof Uint8Array && t.length > 0;
    return !r && !s || !fe(n.mediaType) || !fe(n.filename) ? null : {
      data: typeof t == "string" ? t : new Uint8Array(t),
      mediaType: n.mediaType,
      filename: n.filename
    };
  }
  if (fe(n.url)) {
    const t = { url: n.url };
    return fe(n.filename) && (t.filename = n.filename), t;
  }
  const e = fe(n.id) && n.id || fe(n.fileId) && n.fileId;
  if (e) {
    const t = { id: e };
    return fe(n.filename) && (t.filename = n.filename), t;
  }
  return null;
}
function ed(n) {
  const e = typeof n.filename == "string" && n.filename.length > 0 ? n.filename : void 0, t = typeof n.mediaType == "string" && n.mediaType.length > 0 ? n.mediaType : void 0;
  if (typeof n.fileData == "string" && n.fileData.length > 0)
    return !t || !e ? null : { data: n.fileData, mediaType: t, filename: e };
  if (n.fileData instanceof Uint8Array && n.fileData.length > 0)
    return !t || !e ? null : { data: new Uint8Array(n.fileData), mediaType: t, filename: e };
  if (typeof n.fileUrl == "string" && n.fileUrl.length > 0) {
    const r = { url: n.fileUrl };
    return e && (r.filename = e), r;
  }
  if (typeof n.fileId == "string" && n.fileId.length > 0) {
    const r = { id: n.fileId };
    return e && (r.filename = e), r;
  }
  return null;
}
function _t(n) {
  return typeof n == "object" && n !== null;
}
function fe(n) {
  return typeof n == "string" && n.length > 0;
}
function Qn(n, e) {
  if (typeof n == "string")
    return e && !n.startsWith("data:") ? qt(n, e) : n;
  const t = ke(n);
  return qt(t, e);
}
function qt(n, e) {
  return e ? `data:${e};base64,${n}` : n;
}
async function qa(n, e, t, r) {
  async function s(i) {
    let o = i.toolCall.arguments;
    if (i.tool.parameters && (jt(i.tool.parameters) ? o = i.tool.parameters.parse(o) : o = JSON.parse(o)), await i.tool.needsApproval(r._context, o, i.toolCall.callId)) {
      const c = r._context.isToolApproved({
        toolName: i.tool.name,
        callId: i.toolCall.callId
      });
      if (c === !1)
        return wi(async (l) => {
          const f = "Tool execution was not approved.";
          return l.setError({
            message: f,
            data: {
              tool_name: i.tool.name,
              error: `Tool execution for ${i.toolCall.callId} was manually rejected by user.`
            }
          }), l.spanData.output = f, {
            type: "function_output",
            tool: i.tool,
            output: f,
            runItem: new Ze(vr(i.toolCall, f), n, f)
          };
        }, {
          data: {
            name: i.tool.name
          }
        });
      if (c !== !0)
        return {
          type: "function_approval",
          tool: i.tool,
          runItem: new ye(i.toolCall, n)
        };
    }
    return wi(async (c) => {
      t.config.traceIncludeSensitiveData && (c.spanData.input = i.toolCall.arguments);
      try {
        t.emit("agent_tool_start", r._context, n, i.tool, {
          toolCall: i.toolCall
        }), n.emit("agent_tool_start", r._context, i.tool, {
          toolCall: i.toolCall
        });
        const l = await i.tool.invoke(r._context, i.toolCall.arguments, { toolCall: i.toolCall }), f = ft(l);
        t.emit("agent_tool_end", r._context, n, i.tool, f, { toolCall: i.toolCall }), n.emit("agent_tool_end", r._context, i.tool, f, { toolCall: i.toolCall }), t.config.traceIncludeSensitiveData && (c.spanData.output = f);
        const d = {
          type: "function_output",
          tool: i.tool,
          output: l,
          runItem: new Ze(vr(i.toolCall, l), n, l)
        }, m = Hc(i.toolCall);
        if (m) {
          d.agentRunResult = m;
          const g = m.interruptions;
          g.length > 0 && (d.interruptions = g);
        }
        return d;
      } catch (l) {
        c.setError({
          message: "Error running tool",
          data: {
            tool_name: i.tool.name,
            error: String(l)
          }
        });
        const f = String(l);
        throw t.emit("agent_tool_end", r._context, n, i.tool, f, {
          toolCall: i.toolCall
        }), n.emit("agent_tool_end", r._context, i.tool, f, {
          toolCall: i.toolCall
        }), l;
      }
    }, {
      data: {
        name: i.tool.name
      }
    });
  }
  try {
    return await Promise.all(e.map(s));
  } catch (i) {
    throw new Yu(`Failed to run function tools: ${i}`, i, r);
  }
}
async function td(n, e) {
  const t = e.action;
  let r;
  switch (t.type) {
    case "click":
      await n.click(t.x, t.y, t.button);
      break;
    case "double_click":
      await n.doubleClick(t.x, t.y);
      break;
    case "drag":
      await n.drag(t.path.map((s) => [s.x, s.y]));
      break;
    case "keypress":
      await n.keypress(t.keys);
      break;
    case "move":
      await n.move(t.x, t.y);
      break;
    case "screenshot":
      r = await n.screenshot();
      break;
    case "scroll":
      await n.scroll(t.x, t.y, t.scroll_x, t.scroll_y);
      break;
    case "type":
      await n.type(t.text);
      break;
    case "wait":
      await n.wait();
      break;
  }
  if (typeof r < "u" || typeof n.screenshot == "function" && (r = await n.screenshot(), typeof r < "u"))
    return r;
  throw new Error("Computer does not implement screenshot()");
}
function Ja(n) {
  if (n instanceof Error)
    return n.message || n.toString();
  try {
    return JSON.stringify(n);
  } catch {
    return String(n);
  }
}
async function nd(n, e, t, r, s = void 0) {
  const i = s ?? j, o = [];
  for (const a of e) {
    const c = a.shell, l = a.toolCall, f = new ye(l, n, c.name);
    if (await c.needsApproval(r, l.action, l.callId)) {
      if (c.onApproval) {
        const h = await c.onApproval(r, f);
        h.approve === !0 ? r.approveTool(f) : h.approve === !1 && r.rejectTool(f);
      }
      const y = r.isToolApproved({
        toolName: c.name,
        callId: l.callId
      });
      if (y === !1) {
        const h = "Tool execution was not approved.", b = {
          stdout: "",
          stderr: h,
          outcome: { type: "exit", exitCode: null }
        };
        o.push(new Ze({
          type: "shell_call_output",
          callId: l.callId,
          output: [b]
        }, n, h));
        continue;
      }
      if (y !== !0) {
        o.push(f);
        continue;
      }
    }
    t.emit("agent_tool_start", r, n, c, {
      toolCall: l
    }), typeof n.emit == "function" && n.emit("agent_tool_start", r, c, { toolCall: l });
    let m;
    const g = {};
    let v;
    try {
      const y = await c.shell.run(l.action);
      m = y.output ?? [], y.providerData && Object.assign(g, y.providerData), typeof y.maxOutputLength == "number" && (v = y.maxOutputLength);
    } catch (y) {
      m = [
        {
          stdout: "",
          stderr: Ja(y),
          outcome: { type: "exit", exitCode: null }
        }
      ], i.error("Failed to execute shell action:", y);
    }
    m = m ?? [], t.emit("agent_tool_end", r, n, c, JSON.stringify(m), {
      toolCall: l
    }), typeof n.emit == "function" && n.emit("agent_tool_end", r, c, JSON.stringify(m), {
      toolCall: l
    });
    const S = {
      type: "shell_call_output",
      callId: l.callId,
      output: m ?? []
    };
    typeof v == "number" && (S.maxOutputLength = v), Object.keys(g).length > 0 && (S.providerData = g), o.push(new Ze(S, n, S.output));
  }
  return o;
}
async function rd(n, e, t, r, s = void 0) {
  const i = s ?? j, o = [];
  for (const a of e) {
    const c = a.applyPatch, l = a.toolCall, f = new ye(l, n, c.name);
    if (await c.needsApproval(r, l.operation, l.callId)) {
      if (c.onApproval) {
        const y = await c.onApproval(r, f);
        y.approve === !0 ? r.approveTool(f) : y.approve === !1 && r.rejectTool(f);
      }
      const S = r.isToolApproved({
        toolName: c.name,
        callId: l.callId
      });
      if (S === !1) {
        const y = "Tool execution was not approved.";
        o.push(new Ze({
          type: "apply_patch_call_output",
          callId: l.callId,
          status: "failed",
          output: y
        }, n, y));
        continue;
      }
      if (S !== !0) {
        o.push(f);
        continue;
      }
    }
    t.emit("agent_tool_start", r, n, c, {
      toolCall: l
    }), typeof n.emit == "function" && n.emit("agent_tool_start", r, c, {
      toolCall: l
    });
    let m = "completed", g = "";
    try {
      let S;
      switch (l.operation.type) {
        case "create_file":
          S = await c.editor.createFile(l.operation);
          break;
        case "update_file":
          S = await c.editor.updateFile(l.operation);
          break;
        case "delete_file":
          S = await c.editor.deleteFile(l.operation);
          break;
        default:
          throw new Error("Unsupported apply_patch operation");
      }
      S && typeof S.status == "string" && (m = S.status), S && typeof S.output == "string" && (g = S.output);
    } catch (S) {
      m = "failed", g = Ja(S), i.error("Failed to execute apply_patch operation:", S);
    }
    t.emit("agent_tool_end", r, n, c, g, {
      toolCall: l
    }), typeof n.emit == "function" && n.emit("agent_tool_end", r, c, g, {
      toolCall: l
    });
    const v = {
      type: "apply_patch_call_output",
      callId: l.callId,
      status: m
    };
    g && (v.output = g), o.push(new Ze(v, n, g));
  }
  return o;
}
async function Ba(n, e, t, r, s = void 0) {
  const i = s ?? j, o = [];
  for (const a of e) {
    const c = a.toolCall;
    t.emit("agent_tool_start", r, n, a.computer, {
      toolCall: c
    }), typeof n.emit == "function" && n.emit("agent_tool_start", r, a.computer, { toolCall: c });
    let l;
    try {
      const m = await Ia({
        tool: a.computer,
        runContext: r
      });
      l = await td(m, c);
    } catch (m) {
      i.error("Failed to execute computer action:", m), l = "";
    }
    t.emit("agent_tool_end", r, n, a.computer, l, {
      toolCall: c
    }), typeof n.emit == "function" && n.emit("agent_tool_end", r, a.computer, l, {
      toolCall: c
    });
    const f = l ? `data:image/png;base64,${l}` : "", d = {
      type: "computer_call_result",
      callId: c.callId,
      output: { type: "computer_screenshot", data: f }
    };
    o.push(new Ze(d, n, f));
  }
  return o;
}
async function sd(n, e, t, r, s, i, o, a) {
  if (r = [...r], i.length === 0)
    return j.warn("Incorrectly called executeHandoffCalls with no handoffs. This should not happen. Moving on."), new je(e, s, t, r, { type: "next_step_run_again" });
  if (i.length > 1) {
    const l = "Multiple handoffs detected, ignoring this one.";
    for (let f = 1; f < i.length; f++)
      r.push(new Ze(vr(i[f].toolCall, l), n, l));
  }
  const c = i[0];
  return Ul(async (l) => {
    const f = c.handoff, d = await f.onInvokeHandoff(a, c.toolCall.arguments);
    if (l.spanData.to_agent = d.name, i.length > 1) {
      const g = i.map((v) => v.handoff.agentName);
      l.setError({
        message: "Multiple handoffs requested",
        data: {
          requested_agents: g
        }
      });
    }
    r.push(new Ps(vr(c.toolCall, ka(d)), n, d)), o.emit("agent_handoff", a, n, d), n.emit("agent_handoff", a, d);
    const m = f.inputFilter ?? o.config.handoffInputFilter;
    if (m) {
      j.debug("Filtering inputs for handoff"), typeof m != "function" && l.setError({
        message: "Invalid input filter",
        data: {
          details: "not callable"
        }
      });
      const g = {
        inputHistory: Array.isArray(e) ? [...e] : e,
        preHandoffItems: [...t],
        newItems: [...r],
        runContext: a
      }, v = m(g);
      e = v.inputHistory, t = v.preHandoffItems, r = v.newItems;
    }
    return new je(e, s, t, r, { type: "next_step_handoff", newAgent: d });
  }, {
    data: {
      from_agent: n.name
    }
  });
}
const er = {
  isFinalOutput: !1,
  isInterrupted: void 0
};
async function id(n, e, t) {
  if (e.length === 0)
    return er;
  const r = [];
  for (const o of e)
    if (o.runItem instanceof ye && r.push(o.runItem), o.type === "function_output") {
      if (Array.isArray(o.interruptions))
        r.push(...o.interruptions);
      else if (o.agentRunResult) {
        const a = o.agentRunResult.interruptions;
        a.length > 0 && r.push(...a);
      }
    }
  if (r.length > 0)
    return {
      isFinalOutput: !1,
      isInterrupted: !0,
      interruptions: r
    };
  if (n.toolUseBehavior === "run_llm_again")
    return er;
  const s = e[0];
  if (n.toolUseBehavior === "stop_on_first_tool")
    return (s == null ? void 0 : s.type) === "function_output" ? {
      isFinalOutput: !0,
      isInterrupted: void 0,
      finalOutput: ft(s.output)
    } : er;
  const i = n.toolUseBehavior;
  if (typeof i == "object") {
    const o = e.find((a) => i.stopAtToolNames.includes(a.tool.name));
    return (o == null ? void 0 : o.type) === "function_output" ? {
      isFinalOutput: !0,
      isInterrupted: void 0,
      finalOutput: ft(o.output)
    } : er;
  }
  if (typeof i == "function")
    return i(t._context, e);
  throw new ee(`Invalid toolUseBehavior: ${i}`, t);
}
function ad(n) {
  if (n instanceof Er)
    return "message_output_created";
  if (n instanceof Ns)
    return "handoff_requested";
  if (n instanceof Ps)
    return "handoff_occurred";
  if (n instanceof Ye)
    return "tool_called";
  if (n instanceof Ze)
    return "tool_output";
  if (n instanceof Rs)
    return "reasoning_item_created";
  if (n instanceof ye)
    return "tool_approval_requested";
}
function za(n, e) {
  const t = ad(e);
  if (!t) {
    j.warn("Unknown item type: ", e);
    return;
  }
  n._addItem(new zl(t, e));
}
function od(n, e) {
  for (const t of e)
    za(n, t);
}
function Ai(n, e, t) {
  const r = t == null ? void 0 : t.skipItems;
  for (const s of e.newStepItems)
    r != null && r.has(s) || za(n, s);
}
var Gt;
class Ci {
  constructor() {
    R(this, Gt, /* @__PURE__ */ new Map());
  }
  addToolUse(e, t) {
    u(this, Gt).set(e, t);
  }
  hasUsedTools(e) {
    return u(this, Gt).has(e);
  }
  toJSON() {
    return Object.fromEntries(Array.from(u(this, Gt).entries()).map(([e, t]) => [e.name, t]));
  }
}
Gt = new WeakMap();
function ud(n) {
  return typeof n == "string" ? [
    {
      type: "message",
      role: "user",
      content: n
    }
  ] : [...n];
}
function Ga(n) {
  return n.filter((e) => e.type !== "tool_approval_item").map((e) => e.rawItem);
}
function Ds(n) {
  return n.map((e) => as(os(e)));
}
function as(n, e = {}) {
  if (n == null)
    return n;
  const t = cd(n);
  if (t)
    return ld(t, e.mediaType);
  if (Array.isArray(n))
    return n.map((o) => as(o, e));
  if (!Va(n))
    return n;
  const r = n, s = {}, i = typeof r.mediaType == "string" && r.mediaType.length > 0 ? r.mediaType : e.mediaType;
  for (const [o, a] of Object.entries(r)) {
    const c = o === "data" || o === "fileData" ? { mediaType: i } : e;
    s[o] = as(a, c);
  }
  return s;
}
function cd(n) {
  if (n instanceof ArrayBuffer)
    return new Uint8Array(n);
  if (Hn(n)) {
    const e = n;
    return new Uint8Array(e.buffer, e.byteOffset, e.byteLength);
  }
  if (Ss(n)) {
    const e = n;
    return new Uint8Array(e.buffer, e.byteOffset, e.byteLength);
  }
  if (Sr(n)) {
    const e = n;
    return Uint8Array.from(e.data);
  }
}
function ld(n, e) {
  const t = ke(n);
  return `data:${e && !e.startsWith("data:") ? e : "text/plain"};base64,${t}`;
}
function Va(n) {
  if (typeof n != "object" || n === null)
    return !1;
  const e = Object.getPrototypeOf(n);
  return e === Object.prototype || e === null;
}
function os(n) {
  if (n == null)
    return n;
  if (Array.isArray(n))
    return n.map((i) => os(i));
  if (!Va(n))
    return n;
  const e = n, t = {}, s = typeof e.type == "string" && e.type.length > 0 && dd(e.type);
  for (const [i, o] of Object.entries(e))
    s && i === "id" || (t[i] = os(o));
  return t;
}
function dd(n) {
  switch (n) {
    case "function_call":
    case "function_call_result":
      return !0;
    default:
      return !1;
  }
}
async function wr(n, e, t) {
  if (!Vl(n))
    return;
  const r = await n.runCompaction(typeof e > "u" ? void 0 : { responseId: e });
  if (!r)
    return;
  const s = r.usage;
  t._context.usage.add(new Kn({
    requests: 1,
    inputTokens: s.inputTokens,
    outputTokens: s.outputTokens,
    totalTokens: s.totalTokens,
    inputTokensDetails: s.inputTokensDetails,
    outputTokensDetails: s.outputTokensDetails,
    requestUsageEntries: [s]
  }));
}
async function pd(n, e, t) {
  if (!n)
    return;
  const r = e ?? [], s = t.state, i = s._currentTurnPersistedItemCount ?? 0, o = t.newItems.slice(i);
  process.env.OPENAI_AGENTS__DEBUG_SAVE_SESSION && console.debug("saveToSession:newRunItems", o.map((f) => f.type));
  const a = Ga(o), c = [...r, ...a];
  if (c.length === 0) {
    s._currentTurnPersistedItemCount = i + o.length, await wr(n, t.lastResponseId, s);
    return;
  }
  const l = Ds(c);
  await n.addItems(l), await wr(n, t.lastResponseId, s), s._currentTurnPersistedItemCount = i + o.length;
}
async function fd(n, e) {
  if (!n || !e || e.length === 0)
    return;
  const t = Ds(e);
  await n.addItems(t);
}
async function Oi(n, e) {
  if (!n)
    return;
  const t = e.state, r = t._currentTurnPersistedItemCount ?? 0, s = e.newItems.slice(r), i = Ga(s);
  if (i.length === 0) {
    t._currentTurnPersistedItemCount = r + s.length, await wr(n, e.lastResponseId, t);
    return;
  }
  const o = Ds(i);
  await n.addItems(o), await wr(n, e.lastResponseId, t), t._currentTurnPersistedItemCount = r + s.length;
}
async function hd(n, e, t, r) {
  if (!e)
    return {
      preparedInput: n,
      sessionItems: void 0
    };
  const s = (r == null ? void 0 : r.includeHistoryInPreparedInput) ?? !0, i = (r == null ? void 0 : r.preserveDroppedNewItems) ?? !1, o = await e.getItems(), a = Array.isArray(n) ? [...n] : ud(n);
  if (!t)
    return {
      preparedInput: s ? [...o, ...a] : a,
      sessionItems: a
    };
  const c = o.slice(), l = a.slice(), f = await t(o, a);
  if (!Array.isArray(f))
    throw new ee("Session input callback must return an array of AgentInputItem objects.");
  const d = Ri(c), m = Ri(l), g = Ni(c), v = Ni(l), S = [];
  for (const h of f) {
    const b = Ms(h);
    if (Pi(v, b, h)) {
      Di(m, b), S.push(h);
      continue;
    }
    if (Pi(g, b, h)) {
      Di(d, b);
      continue;
    }
    const _ = d.get(b) ?? 0;
    if (_ > 0) {
      d.set(b, _ - 1);
      continue;
    }
    const N = m.get(b) ?? 0;
    if (N > 0) {
      m.set(b, N - 1), S.push(h);
      continue;
    }
    S.push(h);
  }
  return {
    preparedInput: s ? f : S.length > 0 ? S : i ? l : [],
    // Respect callbacks that intentionally drop the latest inputs (e.g. to redact sensitive
    // values) by persisting only the items they kept in the combined array.
    sessionItems: S
  };
}
function md(n) {
  if (Array.isArray(n)) {
    const t = [];
    for (const r of n) {
      const s = Ei(r);
      if (!s)
        return null;
      t.push(s);
    }
    return t;
  }
  const e = Ei(n);
  return e ? [e] : null;
}
function Ei(n) {
  if (!_t(n))
    return null;
  const e = n.type;
  if (e === "text" && typeof n.text == "string") {
    const t = { type: "text", text: n.text };
    return _t(n.providerData) && (t.providerData = n.providerData), t;
  }
  if (e === "image") {
    const t = { type: "image" };
    let r, s;
    const i = fe(n.mediaType) ? n.mediaType : void 0, o = n.image;
    if (typeof o == "string" && o.length > 0)
      r = o;
    else if (_t(o)) {
      const a = o, c = fe(a.mediaType) ? a.mediaType : i;
      if (fe(a.url) ? r = a.url : (fe(a.data) || a.data instanceof Uint8Array && a.data.length > 0) && (r = Qn(a.data, c)), !r) {
        const l = fe(a.fileId) && a.fileId || fe(a.id) && a.id || void 0;
        l && (s = l);
      }
    }
    if (!r && typeof n.imageUrl == "string" && n.imageUrl.length > 0 && (r = n.imageUrl), !s && typeof n.fileId == "string" && n.fileId.length > 0 && (s = n.fileId), !r && typeof n.data == "string" && n.data.length > 0 ? r = i ? Qn(n.data, i) : n.data : !r && n.data instanceof Uint8Array && n.data.length > 0 && (r = Qn(n.data, i)), typeof n.detail == "string" && n.detail.length > 0 && (t.detail = n.detail), r)
      t.image = r;
    else if (s)
      t.image = { fileId: s };
    else
      return null;
    return _t(n.providerData) && (t.providerData = n.providerData), t;
  }
  if (e === "file") {
    const t = Xl(n);
    if (!t)
      return null;
    const r = { type: "file", file: t };
    return _t(n.providerData) && (r.providerData = n.providerData), r;
  }
  return null;
}
function gd(n) {
  if (n.type === "text") {
    const t = {
      type: "input_text",
      text: n.text
    };
    return n.providerData && (t.providerData = n.providerData), t;
  }
  if (n.type === "image") {
    const t = { type: "input_image" };
    if (typeof n.detail == "string" && n.detail.length > 0 && (t.detail = n.detail), typeof n.image == "string" && n.image.length > 0)
      t.image = n.image;
    else if (_t(n.image)) {
      const r = n.image, s = fe(r.mediaType) ? r.mediaType : void 0;
      if (fe(r.url))
        t.image = r.url;
      else if (fe(r.data))
        t.image = s && !r.data.startsWith("data:") ? qt(r.data, s) : r.data;
      else if (r.data instanceof Uint8Array && r.data.length > 0) {
        const i = ke(r.data);
        t.image = qt(i, s);
      } else {
        const i = fe(r.fileId) && r.fileId || fe(r.id) && r.id || void 0;
        i && (t.image = { id: i });
      }
    }
    return n.providerData && (t.providerData = n.providerData), t;
  }
  if (n.type === "file") {
    const t = { type: "input_file" }, r = n.file;
    if (typeof r == "string")
      t.file = r;
    else if (r && typeof r == "object") {
      const s = r;
      if ("data" in s && s.data) {
        const i = s.mediaType ?? "text/plain";
        if (typeof s.data == "string")
          t.file = qt(s.data, i);
        else {
          const o = ke(s.data);
          t.file = qt(o, i);
        }
      } else if (typeof s.url == "string" && s.url.length > 0)
        t.file = { url: s.url };
      else {
        const i = typeof s.id == "string" && s.id.length > 0 && s.id || (typeof s.fileId == "string" && s.fileId.length > 0 ? s.fileId : void 0);
        i && (t.file = { id: i });
      }
      typeof s.filename == "string" && s.filename.length > 0 && (t.filename = s.filename);
    }
    return n.providerData && (t.providerData = n.providerData), t;
  }
  return n;
}
function Ri(n) {
  const e = /* @__PURE__ */ new Map();
  for (const t of n) {
    const r = Ms(t);
    e.set(r, (e.get(r) ?? 0) + 1);
  }
  return e;
}
function Ni(n) {
  const e = /* @__PURE__ */ new Map();
  for (const t of n) {
    const r = Ms(t), s = e.get(r);
    s ? s.push(t) : e.set(r, [t]);
  }
  return e;
}
function Pi(n, e, t) {
  const r = n.get(e);
  if (!r || r.length === 0)
    return !1;
  const s = r.findIndex((i) => i === t);
  return s === -1 ? !1 : (r.splice(s, 1), r.length === 0 && n.delete(e), !0);
}
function Di(n, e) {
  const t = (n.get(e) ?? 0) - 1;
  t <= 0 ? n.delete(e) : n.set(e, t);
}
function Ms(n) {
  return JSON.stringify(n, yd);
}
function yd(n, e) {
  if (e instanceof ArrayBuffer)
    return {
      __type: "ArrayBuffer",
      data: ke(new Uint8Array(e))
    };
  if (Hn(e)) {
    const t = e;
    return {
      __type: t.constructor.name,
      data: ke(new Uint8Array(t.buffer, t.byteOffset, t.byteLength))
    };
  }
  if (Ss(e)) {
    const t = e;
    return {
      __type: "Buffer",
      data: ke(new Uint8Array(t.buffer, t.byteOffset, t.byteLength))
    };
  }
  return Sr(e) ? {
    __type: "Buffer",
    data: ke(Uint8Array.from(e.data))
  } : e;
}
const nr = "1.0", _d = I(nr), De = w({
  name: p()
}), vd = w({
  object: I("trace.span"),
  id: p(),
  trace_id: p(),
  parent_id: p().nullable(),
  started_at: p().nullable(),
  ended_at: p().nullable(),
  error: w({
    message: p(),
    data: ne(p(), W()).optional()
  }).nullable(),
  span_data: ne(p(), W())
}), Wa = vd.extend({
  previous_span: ou(() => Wa).optional()
}), wd = w({
  inputTokens: E(),
  outputTokens: E(),
  totalTokens: E(),
  inputTokensDetails: ne(p(), E()).optional(),
  outputTokensDetails: ne(p(), E()).optional(),
  endpoint: p().optional()
}), Ha = w({
  requests: E(),
  inputTokens: E(),
  outputTokens: E(),
  totalTokens: E(),
  inputTokensDetails: B(ne(p(), E())).optional(),
  outputTokensDetails: B(ne(p(), E())).optional(),
  requestUsageEntries: B(wd).optional()
}), Mi = w({
  usage: Ha,
  output: B(Es),
  responseId: p().optional(),
  providerData: ne(p(), W()).optional()
}), Ka = ge("type", [
  w({
    type: I("message_output_item"),
    rawItem: Ar,
    agent: De
  }),
  w({
    type: I("tool_call_item"),
    rawItem: Cl.or(In),
    agent: De
  }),
  w({
    type: I("tool_call_output_item"),
    rawItem: _r,
    agent: De,
    output: p()
  }),
  w({
    type: I("reasoning_item"),
    rawItem: Os,
    agent: De
  }),
  w({
    type: I("handoff_call_item"),
    rawItem: xn,
    agent: De
  }),
  w({
    type: I("handoff_output_item"),
    rawItem: _r,
    sourceAgent: De,
    targetAgent: De
  }),
  w({
    type: I("tool_approval_item"),
    rawItem: xn.or(In).or(Cr).or(Or),
    agent: De,
    toolName: p().optional()
  })
]), bd = w({
  object: I("trace"),
  id: p(),
  workflow_name: p(),
  group_id: p().nullable(),
  metadata: ne(p(), W())
}), Id = w({
  newItems: B(Ka),
  toolsUsed: B(p()),
  handoffs: B(w({
    toolCall: W(),
    handoff: W()
  })),
  functions: B(w({
    toolCall: W(),
    tool: W()
  })),
  computerActions: B(w({
    toolCall: W(),
    computer: W()
  })),
  shellActions: B(w({
    toolCall: W(),
    shell: W()
  })).optional(),
  applyPatchActions: B(w({
    toolCall: W(),
    applyPatch: W()
  })).optional(),
  mcpApprovalRequests: B(w({
    requestItem: w({
      // protocol.HostedToolCallItem
      rawItem: w({
        type: I("hosted_tool_call"),
        name: p(),
        arguments: p().optional(),
        status: p().optional(),
        output: p().optional(),
        // this always exists but marked as optional for early version compatibility; when releasing 1.0, we can remove the nullable and optional
        providerData: ne(p(), W()).nullable().optional()
      })
    }),
    // HostedMCPTool
    mcpTool: w({
      type: I("hosted_tool"),
      name: I("hosted_mcp"),
      providerData: ne(p(), W())
    })
  })).optional()
}), Ya = w({
  tripwireTriggered: Rt(),
  outputInfo: W()
}), xd = w({
  guardrail: w({
    type: I("input"),
    name: p()
  }),
  output: Ya
}), Sd = w({
  guardrail: w({
    type: I("output"),
    name: p()
  }),
  agentOutput: W(),
  agent: De,
  output: Ya
}), ji = w({
  $schemaVersion: _d,
  currentTurn: E(),
  currentAgent: De,
  originalInput: p().or(B(Ol)),
  modelResponses: B(Mi),
  context: w({
    usage: Ha,
    approvals: ne(p(), w({
      approved: B(p()).or(Rt()),
      rejected: B(p()).or(Rt())
    })),
    context: ne(p(), W())
  }),
  toolUseTracker: ne(p(), B(p())),
  maxTurns: E(),
  currentAgentSpan: Wa.nullable().optional(),
  noActiveAgentRun: Rt(),
  inputGuardrailResults: B(xd),
  outputGuardrailResults: B(Sd),
  currentStep: Kl.optional(),
  lastModelResponse: Mi.optional(),
  generatedItems: B(Ka),
  lastProcessedResponse: Id.optional(),
  currentTurnPersistedItemCount: E().int().min(0).optional(),
  trace: bd.nullable()
});
class Ge {
  constructor(e, t, r, s) {
    /**
     * Current turn number in the conversation.
     */
    x(this, "_currentTurn", 0);
    /**
     * The agent currently handling the conversation.
     */
    x(this, "_currentAgent");
    /**
     * Original user input prior to any processing.
     */
    x(this, "_originalInput");
    /**
     * Responses from the model so far.
     */
    x(this, "_modelResponses");
    /**
     * Active tracing span for the current agent if tracing is enabled.
     */
    x(this, "_currentAgentSpan");
    /**
     * Run context tracking approvals, usage, and other metadata.
     */
    x(this, "_context");
    /**
     * Tracks what tools each agent has used.
     */
    x(this, "_toolUseTracker");
    /**
     * Items generated by the agent during the run.
     */
    x(this, "_generatedItems");
    /**
     * Number of `_generatedItems` already flushed to session storage for the current turn.
     *
     * Persisting the entire turn on every save would duplicate responses and tool outputs.
     * Instead, `saveToSession` appends only the delta since the previous write. This counter
     * tracks how many generated run items from *this turn* were already written so the next
     * save can slice off only the new entries. When a turn is interrupted (e.g., awaiting tool
     * approval) and later resumed, we rewind the counter before continuing so the pending tool
     * output still gets stored.
     */
    x(this, "_currentTurnPersistedItemCount");
    /**
     * Maximum allowed turns before forcing termination.
     */
    x(this, "_maxTurns");
    /**
     * Whether the run has an active agent step in progress.
     */
    x(this, "_noActiveAgentRun", !0);
    /**
     * Last model response for the previous turn.
     */
    x(this, "_lastTurnResponse");
    /**
     * Results from input guardrails applied to the run.
     */
    x(this, "_inputGuardrailResults");
    /**
     * Results from output guardrails applied to the run.
     */
    x(this, "_outputGuardrailResults");
    /**
     * Next step computed for the agent to take.
     */
    x(this, "_currentStep");
    /**
     * Parsed model response after applying guardrails and tools.
     */
    x(this, "_lastProcessedResponse");
    /**
     * Trace associated with this run if tracing is enabled.
     */
    x(this, "_trace", null);
    this._context = e, this._originalInput = structuredClone(t), this._modelResponses = [], this._currentAgentSpan = void 0, this._currentAgent = r, this._toolUseTracker = new Ci(), this._generatedItems = [], this._currentTurnPersistedItemCount = 0, this._maxTurns = s, this._inputGuardrailResults = [], this._outputGuardrailResults = [], this._trace = un();
  }
  /**
   * The usage aggregated for this run. This includes per-request breakdowns when available.
   */
  get usage() {
    return this._context.usage;
  }
  /**
   * The history of the agent run. This includes the input items and the new items generated during the run.
   *
   * This can be used as inputs for the next agent run.
   */
  get history() {
    return Bt(this._originalInput, this._generatedItems);
  }
  /**
   * Returns all interruptions if the current step is an interruption otherwise returns an empty array.
   */
  getInterruptions() {
    var e;
    return ((e = this._currentStep) == null ? void 0 : e.type) !== "next_step_interruption" ? [] : this._currentStep.data.interruptions;
  }
  /**
   * Approves a tool call requested by the agent through an interruption and approval item request.
   *
   * To approve the request use this method and then run the agent again with the same state object
   * to continue the execution.
   *
   * By default it will only approve the current tool call. To allow the tool to be used multiple
   * times throughout the run, set the `alwaysApprove` option to `true`.
   *
   * @param approvalItem - The tool call approval item to approve.
   * @param options - Options for the approval.
   */
  approve(e, t = { alwaysApprove: !1 }) {
    this._context.approveTool(e, t);
  }
  /**
   * Rejects a tool call requested by the agent through an interruption and approval item request.
   *
   * To reject the request use this method and then run the agent again with the same state object
   * to continue the execution.
   *
   * By default it will only reject the current tool call. To allow the tool to be used multiple
   * times throughout the run, set the `alwaysReject` option to `true`.
   *
   * @param approvalItem - The tool call approval item to reject.
   * @param options - Options for the rejection.
   */
  reject(e, t = { alwaysReject: !1 }) {
    this._context.rejectTool(e, t);
  }
  /**
   * Serializes the run state to a JSON object.
   *
   * This method is used to serialize the run state to a JSON object that can be used to
   * resume the run later.
   *
   * @returns The serialized run state.
   */
  toJSON() {
    var r;
    const e = {
      $schemaVersion: nr,
      currentTurn: this._currentTurn,
      currentAgent: {
        name: this._currentAgent.name
      },
      originalInput: this._originalInput,
      modelResponses: this._modelResponses.map((s) => ({
        usage: {
          requests: s.usage.requests,
          inputTokens: s.usage.inputTokens,
          outputTokens: s.usage.outputTokens,
          totalTokens: s.usage.totalTokens,
          inputTokensDetails: s.usage.inputTokensDetails,
          outputTokensDetails: s.usage.outputTokensDetails,
          ...s.usage.requestUsageEntries && s.usage.requestUsageEntries.length > 0 ? {
            requestUsageEntries: s.usage.requestUsageEntries.map((i) => ({
              inputTokens: i.inputTokens,
              outputTokens: i.outputTokens,
              totalTokens: i.totalTokens,
              inputTokensDetails: i.inputTokensDetails,
              outputTokensDetails: i.outputTokensDetails,
              ...i.endpoint ? { endpoint: i.endpoint } : {}
            }))
          } : {}
        },
        output: s.output,
        responseId: s.responseId,
        providerData: s.providerData
      })),
      context: this._context.toJSON(),
      toolUseTracker: this._toolUseTracker.toJSON(),
      maxTurns: this._maxTurns,
      currentAgentSpan: (r = this._currentAgentSpan) == null ? void 0 : r.toJSON(),
      noActiveAgentRun: this._noActiveAgentRun,
      inputGuardrailResults: this._inputGuardrailResults,
      outputGuardrailResults: this._outputGuardrailResults.map((s) => ({
        ...s,
        agent: s.agent.toJSON()
      })),
      currentStep: this._currentStep,
      lastModelResponse: this._lastTurnResponse,
      generatedItems: this._generatedItems.map((s) => s.toJSON()),
      currentTurnPersistedItemCount: this._currentTurnPersistedItemCount,
      lastProcessedResponse: this._lastProcessedResponse,
      trace: this._trace ? this._trace.toJSON() : null
    }, t = ji.safeParse(e);
    if (!t.success)
      throw new Ku(`Failed to serialize run state. ${t.error.message}`);
    return t.data;
  }
  /**
   * Serializes the run state to a string.
   *
   * This method is used to serialize the run state to a string that can be used to
   * resume the run later.
   *
   * @returns The serialized run state.
   */
  toString() {
    return JSON.stringify(this.toJSON());
  }
  /**
   * Deserializes a run state from a string.
   *
   * This method is used to deserialize a run state from a string that was serialized using the
   * `toString` method.
   */
  static async fromString(e, t) {
    var d, m, g, v, S;
    const [r, s] = await ws(() => JSON.parse(t));
    if (r)
      throw new ee(`Failed to parse run state. ${r instanceof Error ? r.message : String(r)}`);
    const i = s.$schemaVersion;
    if (!i)
      throw new ee("Run state is missing schema version");
    if (i !== nr)
      throw new ee(`Run state schema version ${i} is not supported. Please use version ${nr}`);
    const o = ji.parse(JSON.parse(t)), a = Td(e), c = new Zt(o.context.context);
    c._rebuildApprovals(o.context.approvals);
    const l = a.get(o.currentAgent.name);
    if (!l)
      throw new ee(`Agent ${o.currentAgent.name} not found`);
    const f = new Ge(c, "", l, o.maxTurns);
    f._currentTurn = o.currentTurn, f._toolUseTracker = new Ci();
    for (const [y, h] of Object.entries(o.toolUseTracker))
      f._toolUseTracker.addToolUse(a.get(y), h);
    if (o.currentAgentSpan) {
      o.trace || j.warn("Trace is not set, skipping tracing setup");
      const y = Je().createTrace({
        traceId: (d = o.trace) == null ? void 0 : d.id,
        name: (m = o.trace) == null ? void 0 : m.workflow_name,
        groupId: ((g = o.trace) == null ? void 0 : g.group_id) ?? void 0,
        metadata: (v = o.trace) == null ? void 0 : v.metadata
      });
      f._currentAgentSpan = Xa(y, o.currentAgentSpan), f._trace = y;
    }
    return f._noActiveAgentRun = o.noActiveAgentRun, f._inputGuardrailResults = o.inputGuardrailResults, f._outputGuardrailResults = o.outputGuardrailResults.map((y) => ({
      ...y,
      agent: a.get(y.agent.name)
    })), f._currentStep = o.currentStep, f._originalInput = o.originalInput, f._modelResponses = o.modelResponses.map($i), f._lastTurnResponse = o.lastModelResponse ? $i(o.lastModelResponse) : void 0, f._generatedItems = o.generatedItems.map((y) => Qa(y, a)), f._currentTurnPersistedItemCount = o.currentTurnPersistedItemCount ?? 0, f._lastProcessedResponse = o.lastProcessedResponse ? await kd(a, f._currentAgent, f._context, o.lastProcessedResponse) : void 0, ((S = o.currentStep) == null ? void 0 : S.type) === "next_step_handoff" && (f._currentStep = {
      type: "next_step_handoff",
      newAgent: a.get(o.currentStep.newAgent.name)
    }), f;
  }
}
function Td(n) {
  const e = /* @__PURE__ */ new Map(), t = [n];
  for (; t.length > 0; ) {
    const r = t.shift();
    if (!e.has(r.name)) {
      e.set(r.name, r);
      for (const s of r.handoffs)
        s instanceof nt ? e.has(s.name) || t.push(s) : s.agent && (e.has(s.agent.name) || t.push(s.agent));
    }
  }
  return e;
}
function Xa(n, e) {
  const t = e.span_data, r = e.previous_span ? Xa(n, e.previous_span) : void 0, s = Je().createSpan({
    spanId: e.id,
    traceId: e.trace_id,
    parentId: e.parent_id ?? void 0,
    startedAt: e.started_at ?? void 0,
    endedAt: e.ended_at ?? void 0,
    data: t
  }, n);
  return s.previousSpan = r, s;
}
function $i(n) {
  return {
    usage: new Kn(n.usage),
    output: n.output.map((t) => Es.parse(t)),
    responseId: n.responseId,
    providerData: n.providerData
  };
}
function Qa(n, e) {
  switch (n.type) {
    case "message_output_item":
      return new Er(n.rawItem, e.get(n.agent.name));
    case "tool_call_item":
      return new Ye(n.rawItem, e.get(n.agent.name));
    case "tool_call_output_item":
      return new Ze(n.rawItem, e.get(n.agent.name), n.output);
    case "reasoning_item":
      return new Rs(n.rawItem, e.get(n.agent.name));
    case "handoff_call_item":
      return new Ns(n.rawItem, e.get(n.agent.name));
    case "handoff_output_item":
      return new Ps(n.rawItem, e.get(n.sourceAgent.name), e.get(n.targetAgent.name));
    case "tool_approval_item":
      return new ye(n.rawItem, e.get(n.agent.name), n.toolName);
  }
}
async function kd(n, e, t, r) {
  const s = await e.getAllTools(t), i = new Map(s.filter((d) => d.type === "function").map((d) => [d.name, d])), o = new Map(s.filter((d) => d.type === "computer").map((d) => [d.name, d])), a = new Map(s.filter((d) => d.type === "shell").map((d) => [d.name, d])), c = new Map(s.filter((d) => d.type === "apply_patch").map((d) => [d.name, d])), l = new Map(e.handoffs.map((d) => d instanceof nt ? [d.name, Ca(d)] : [d.toolName, d])), f = {
    newItems: r.newItems.map((d) => Qa(d, n)),
    toolsUsed: r.toolsUsed,
    handoffs: r.handoffs.map((d) => {
      if (!l.has(d.handoff.toolName))
        throw new ee(`Handoff ${d.handoff.toolName} not found`);
      return {
        toolCall: d.toolCall,
        handoff: l.get(d.handoff.toolName)
      };
    }),
    functions: await Promise.all(r.functions.map(async (d) => {
      if (!i.has(d.tool.name))
        throw new ee(`Tool ${d.tool.name} not found`);
      return {
        toolCall: d.toolCall,
        tool: i.get(d.tool.name)
      };
    })),
    computerActions: r.computerActions.map((d) => {
      const m = d.computer.name;
      if (!o.has(m))
        throw new ee(`Computer tool ${m} not found`);
      return {
        toolCall: d.toolCall,
        computer: o.get(m)
      };
    }),
    shellActions: (r.shellActions ?? []).map((d) => {
      const m = d.shell.name;
      if (!a.has(m))
        throw new ee(`Shell tool ${m} not found`);
      return {
        toolCall: d.toolCall,
        shell: a.get(m)
      };
    }),
    applyPatchActions: (r.applyPatchActions ?? []).map((d) => {
      const m = d.applyPatch.name;
      if (!c.has(m))
        throw new ee(`Apply patch tool ${m} not found`);
      return {
        toolCall: d.toolCall,
        applyPatch: c.get(m)
      };
    }),
    mcpApprovalRequests: (r.mcpApprovalRequests ?? []).map((d) => ({
      requestItem: new ye(d.requestItem.rawItem, e),
      mcpTool: d.mcpTool
    }))
  };
  return {
    ...f,
    hasToolsOrApprovalsToRun() {
      return f.handoffs.length > 0 || f.functions.length > 0 || f.mcpApprovalRequests.length > 0 || f.computerActions.length > 0 || f.shellActions.length > 0 || f.applyPatchActions.length > 0;
    }
  };
}
var se, us, cs, eo, to, no, ro, hn, ls, ds;
class Ad extends Zc {
  /**
   * Creates a runner with optional defaults that apply to every subsequent run invocation.
   *
   * @param config - Overrides for models, guardrails, tracing, or session behavior.
   */
  constructor(t = {}) {
    super();
    R(this, se);
    x(this, "config");
    // --------------------------------------------------------------
    //  Internals
    // --------------------------------------------------------------
    x(this, "inputGuardrailDefs");
    x(this, "outputGuardrailDefs");
    this.config = {
      modelProvider: t.modelProvider ?? Yc(),
      model: t.model,
      modelSettings: t.modelSettings,
      handoffInputFilter: t.handoffInputFilter,
      inputGuardrails: t.inputGuardrails,
      outputGuardrails: t.outputGuardrails,
      tracingDisabled: t.tracingDisabled ?? !1,
      traceIncludeSensitiveData: t.traceIncludeSensitiveData ?? !0,
      workflowName: t.workflowName ?? "Agent workflow",
      traceId: t.traceId,
      groupId: t.groupId,
      traceMetadata: t.traceMetadata,
      sessionInputCallback: t.sessionInputCallback,
      callModelInputFilter: t.callModelInputFilter
    }, this.inputGuardrailDefs = (t.inputGuardrails ?? []).map(vi), this.outputGuardrailDefs = (t.outputGuardrails ?? []).map(is);
  }
  async run(t, r, s = {
    stream: !1,
    context: void 0
  }) {
    const i = s ?? { stream: !1, context: void 0 }, o = i.sessionInputCallback ?? this.config.sessionInputCallback, a = i.callModelInputFilter ?? this.config.callModelInputFilter, c = !!a, l = {
      ...i,
      sessionInputCallback: o,
      callModelInputFilter: a
    }, f = !!l.conversationId || !!l.previousResponseId, d = l.session, m = r instanceof Ge;
    let g = d && m ? [] : void 0, v, S = d && m ? /* @__PURE__ */ new Map() : void 0;
    const y = (T, A) => {
      const D = S;
      if (A !== void 0) {
        if (!D) {
          v = A.map((K) => structuredClone(K));
          return;
        }
        const z = [], L = /* @__PURE__ */ new WeakMap();
        for (const K of T) {
          if (!K || typeof K != "object")
            continue;
          const ae = (L.get(K) ?? 0) + 1;
          L.set(K, ae);
        }
        const oe = () => {
          for (const [K, ae] of D)
            if (ae > 0)
              return D.set(K, ae - 1), !0;
          return !1;
        };
        for (let K = 0; K < A.length; K++) {
          const ae = A[K];
          if (!ae)
            continue;
          let Oe = !1;
          const Ne = T[K];
          if (Ne && typeof Ne == "object") {
            const qs = (L.get(Ne) ?? 0) - 1;
            if (L.set(Ne, qs), qs > 0)
              continue;
            const Js = vt(Ne), Bs = D.get(Js) ?? 0;
            if (Bs > 0) {
              D.set(Js, Bs - 1), z.push(structuredClone(ae)), Oe = !0;
              continue;
            }
          }
          const dn = vt(ae), Yn = D.get(dn) ?? 0;
          if (Yn > 0) {
            D.set(dn, Yn - 1), z.push(structuredClone(ae)), Oe = !0;
            continue;
          }
          !Ne && oe() && (z.push(structuredClone(ae)), Oe = !0), !Oe && !Ne && v === void 0 && z.push(structuredClone(ae));
        }
        (z.length > 0 || v === void 0) && (v = z);
        return;
      }
      const F = [];
      if (D)
        for (const z of T) {
          if (!z)
            continue;
          const L = vt(z), oe = D.get(L) ?? 0;
          oe <= 0 || (D.set(L, oe - 1), F.push(structuredClone(z)));
        }
      else
        for (const z of T)
          z && F.push(structuredClone(z));
      F.length > 0 ? v = F : v === void 0 && (v = []);
    }, h = () => {
      if (v !== void 0)
        return v;
      if (!c)
        return g;
    };
    let b = r;
    if (!(b instanceof Ge)) {
      if (d && Array.isArray(b) && !o)
        throw new ee("RunConfig.sessionInputCallback must be provided when using session history with list inputs.");
      const T = await hd(b, d, o, {
        // When the server tracks conversation state we only send the new turn inputs;
        // previous messages are recovered via conversationId/previousResponseId.
        includeHistoryInPreparedInput: !f,
        preserveDroppedNewItems: f
      });
      if (f && d) {
        const A = T.sessionItems;
        A && A.length > 0 ? b = A : b = T.preparedInput;
      } else
        b = T.preparedInput;
      if (d) {
        const A = T.sessionItems ?? [];
        g = A.map((D) => structuredClone(D)), S = /* @__PURE__ */ new Map();
        for (const D of A) {
          const F = vt(D);
          S.set(F, (S.get(F) ?? 0) + 1);
        }
      }
    }
    let _;
    if (d && !f) {
      let T = !1;
      _ = async () => {
        if (T)
          return;
        const A = h();
        !A || A.length === 0 || (T = !0, await fd(d, A));
      };
    }
    const N = async () => {
      if (l.stream)
        return await U(this, se, ro).call(this, t, b, l, _, y);
      const T = await U(this, se, to).call(this, t, b, l, y);
      return d && !f && await pd(d, h(), T), T;
    };
    return b instanceof Ge && b._trace ? Dd(b._trace, async () => (b._currentAgentSpan && js(b._currentAgentSpan), N())) : Md(async () => N(), {
      traceId: this.config.traceId,
      name: this.config.workflowName,
      groupId: this.config.groupId,
      metadata: this.config.traceMetadata
    });
  }
}
se = new WeakSet(), us = function(t) {
  return this.inputGuardrailDefs.concat(t._currentAgent.inputGuardrails.map(vi));
}, cs = function(t) {
  const r = U(this, se, us).call(this, t), s = [], i = [];
  for (const o of r)
    o.runInParallel === !1 ? s.push(o) : i.push(o);
  return { blocking: s, parallel: i };
}, eo = async function(t) {
  const r = t.model !== void 0 && t.model !== nt.DEFAULT_MODEL_PLACEHOLDER || this.config.model !== void 0 && this.config.model !== nt.DEFAULT_MODEL_PLACEHOLDER;
  let s = Cd(t.model, this.config.model);
  return typeof s == "string" && (s = await this.config.modelProvider.getModel(s)), { model: s, explictlyModelSet: r };
}, to = async function(t, r, s, i) {
  return fs(async () => {
    var f, d, m;
    const o = r instanceof Ge, a = o ? r : new Ge(s.context instanceof Zt ? s.context : new Zt(s.context), r, t, s.maxTurns ?? Fi), c = s.conversationId || s.previousResponseId ? new Ui({
      conversationId: s.conversationId,
      previousResponseId: s.previousResponseId
    }) : void 0;
    c && o && c.primeFromState({
      originalInput: a._originalInput,
      generatedItems: a._generatedItems,
      modelResponses: a._modelResponses
    });
    let l = !1;
    try {
      for (; ; ) {
        if (a._currentStep = a._currentStep ?? {
          type: "next_step_run_again"
        }, a._currentStep.type === "next_step_interruption") {
          if (j.debug("Continuing from interruption"), !a._lastTurnResponse || !a._lastProcessedResponse)
            throw new ee("No model response found in previous state", a);
          const g = await Ti(a._currentAgent, a._originalInput, a._generatedItems, a._lastTurnResponse, a._lastProcessedResponse, this, a);
          if (a._toolUseTracker.addToolUse(a._currentAgent, a._lastProcessedResponse.toolsUsed), a._originalInput = g.originalInput, a._generatedItems = g.generatedItems, g.nextStep.type === "next_step_interruption")
            return a._currentStep = g.nextStep, new Lr(a);
          if (g.nextStep.type === "next_step_run_again") {
            l = !0, a._currentStep = void 0;
            continue;
          }
          l = !1, a._currentStep = g.nextStep;
        }
        if (a._currentStep.type === "next_step_run_again") {
          const g = await Zi(a), v = o && l;
          if (l = !1, v || (a._currentTurn++, a._currentTurnPersistedItemCount = 0), a._currentTurn > a._maxTurns)
            throw (f = a._currentAgentSpan) == null || f.setError({
              message: "Max turns exceeded",
              data: { max_turns: a._maxTurns }
            }), new ai(`Max turns (${a._maxTurns}) exceeded`, a);
          j.debug(`Running agent ${a._currentAgent.name} (turn ${a._currentTurn})`);
          let S;
          if (a._currentTurn === 1 && !v) {
            const N = U(this, se, cs).call(this, a);
            N.blocking.length > 0 && await U(this, se, hn).call(this, a, N.blocking), N.parallel.length > 0 && (S = U(this, se, hn).call(this, a, N.parallel), S.catch(() => {
            }));
          }
          const y = c ? c.prepareInput(a._originalInput, a._generatedItems) : Bt(a._originalInput, a._generatedItems);
          a._noActiveAgentRun && (a._currentAgent.emit("agent_start", a._context, a._currentAgent, y), this.emit("agent_start", a._context, a._currentAgent, y));
          const h = await U(this, se, ds).call(this, a, s, g, y, c, i);
          a._lastTurnResponse = await h.model.getResponse({
            systemInstructions: h.modelInput.instructions,
            prompt: h.prompt,
            // Explicit agent/run config models should take precedence over prompt defaults.
            ...h.explictlyModelSet ? { overridePromptModel: !0 } : {},
            input: h.modelInput.input,
            previousResponseId: h.previousResponseId,
            conversationId: h.conversationId,
            modelSettings: h.modelSettings,
            tools: h.serializedTools,
            toolsExplicitlyProvided: h.toolsExplicitlyProvided,
            outputType: li(a._currentAgent.outputType),
            handoffs: h.serializedHandoffs,
            tracing: Li(this.config.tracingDisabled, this.config.traceIncludeSensitiveData),
            signal: s.signal
          }), a._modelResponses.push(a._lastTurnResponse), a._context.usage.add(a._lastTurnResponse.usage), a._noActiveAgentRun = !1, c == null || c.trackServerItems(a._lastTurnResponse);
          const b = Si(a._lastTurnResponse, a._currentAgent, h.tools, h.handoffs);
          a._lastProcessedResponse = b;
          const _ = await ki(a._currentAgent, a._originalInput, a._generatedItems, a._lastTurnResponse, a._lastProcessedResponse, this, a);
          a._toolUseTracker.addToolUse(a._currentAgent, a._lastProcessedResponse.toolsUsed), a._originalInput = _.originalInput, a._generatedItems = _.generatedItems, _.nextStep.type === "next_step_run_again" && (a._currentTurnPersistedItemCount = 0), a._currentStep = _.nextStep, S && await S;
        }
        if (a._currentStep && a._currentStep.type === "next_step_final_output")
          return await U(this, se, ls).call(this, a, a._currentStep.output), this.emit("agent_end", a._context, a._currentAgent, a._currentStep.output), a._currentAgent.emit("agent_end", a._context, a._currentStep.output), new Lr(a);
        if (a._currentStep && a._currentStep.type === "next_step_handoff")
          a._currentAgent = a._currentStep.newAgent, a._currentAgentSpan && (a._currentAgentSpan.end(), mn(), a._currentAgentSpan = void 0), a._noActiveAgentRun = !0, a._currentStep = { type: "next_step_run_again" };
        else {
          if (a._currentStep && a._currentStep.type === "next_step_interruption")
            return new Lr(a);
          j.debug("Running next loop");
        }
      }
    } catch (g) {
      throw a._currentAgentSpan && a._currentAgentSpan.setError({
        message: "Error in agent run",
        data: { error: String(g) }
      }), g;
    } finally {
      if (((d = a._currentStep) == null ? void 0 : d.type) !== "next_step_interruption")
        try {
          await yi({ runContext: a._context });
        } catch (g) {
          j.warn(`Failed to dispose computers after run: ${g}`);
        }
      a._currentAgentSpan && (((m = a._currentStep) == null ? void 0 : m.type) !== "next_step_interruption" && a._currentAgentSpan.end(), mn());
    }
  });
}, no = async function(t, r, s, i, o) {
  var g, v, S, y;
  const a = !!r.conversationId || !!r.previousResponseId, c = a ? new Ui({
    conversationId: r.conversationId,
    previousResponseId: r.previousResponseId
  }) : void 0;
  let l = !1, f = !1;
  const d = async () => {
    f || !i || (await i(), f = !0);
  };
  c && s && c.primeFromState({
    originalInput: t.state._originalInput,
    generatedItems: t.state._generatedItems,
    modelResponses: t.state._modelResponses
  });
  let m = !1;
  try {
    for (; ; ) {
      const h = t.state._currentAgent;
      if (t.state._currentStep = t.state._currentStep ?? {
        type: "next_step_run_again"
      }, t.state._currentStep.type === "next_step_interruption") {
        if (j.debug("Continuing from interruption"), !t.state._lastTurnResponse || !t.state._lastProcessedResponse)
          throw new ee("No model response found in previous state", t.state);
        const b = await Ti(t.state._currentAgent, t.state._originalInput, t.state._generatedItems, t.state._lastTurnResponse, t.state._lastProcessedResponse, this, t.state);
        if (Ai(t, b), t.state._toolUseTracker.addToolUse(t.state._currentAgent, t.state._lastProcessedResponse.toolsUsed), t.state._originalInput = b.originalInput, t.state._generatedItems = b.generatedItems, b.nextStep.type === "next_step_interruption") {
          t.state._currentStep = b.nextStep;
          return;
        }
        if (b.nextStep.type === "next_step_run_again") {
          m = !0, t.state._currentStep = void 0;
          continue;
        }
        m = !1, t.state._currentStep = b.nextStep;
      }
      if (t.state._currentStep.type === "next_step_run_again") {
        const b = await Zi(t.state), _ = s && m;
        if (m = !1, _ || (t.state._currentTurn++, t.state._currentTurnPersistedItemCount = 0), t.state._currentTurn > t.state._maxTurns)
          throw (g = t.state._currentAgentSpan) == null || g.setError({
            message: "Max turns exceeded",
            data: { max_turns: t.state._maxTurns }
          }), new ai(`Max turns (${t.state._maxTurns}) exceeded`, t.state);
        j.debug(`Running agent ${h.name} (turn ${t.state._currentTurn})`);
        let N, T;
        if (t.state._currentTurn === 1 && !_) {
          const K = U(this, se, cs).call(this, t.state);
          K.blocking.length > 0 && await U(this, se, hn).call(this, t.state, K.blocking), K.parallel.length > 0 && (T = U(this, se, hn).call(this, t.state, K.parallel).catch((Oe) => (N = Oe, [])));
        }
        const A = c ? c.prepareInput(t.input, t.newItems) : Bt(t.input, t.newItems);
        t.state._noActiveAgentRun && (h.emit("agent_start", t.state._context, h, A), this.emit("agent_start", t.state._context, h, A));
        let D;
        const F = await U(this, se, ds).call(this, t.state, r, b, A, c, o);
        if (N)
          throw N;
        l = !0, await d();
        for await (const K of F.model.getStreamedResponse({
          systemInstructions: F.modelInput.instructions,
          prompt: F.prompt,
          // Streaming requests should also honor explicitly chosen models.
          ...F.explictlyModelSet ? { overridePromptModel: !0 } : {},
          input: F.modelInput.input,
          previousResponseId: F.previousResponseId,
          conversationId: F.conversationId,
          modelSettings: F.modelSettings,
          tools: F.serializedTools,
          toolsExplicitlyProvided: F.toolsExplicitlyProvided,
          handoffs: F.serializedHandoffs,
          outputType: li(h.outputType),
          tracing: Li(this.config.tracingDisabled, this.config.traceIncludeSensitiveData),
          signal: r.signal
        })) {
          if (N)
            throw N;
          if (K.type === "response_done") {
            const ae = Ua.parse(K);
            D = {
              usage: new Kn(ae.response.usage),
              output: ae.response.output,
              responseId: ae.response.id
            }, t.state._context.usage.add(D.usage);
          }
          if (t.cancelled)
            return;
          t._addItem(new Bl(K));
        }
        if (T && (await T, N))
          throw N;
        if (t.state._noActiveAgentRun = !1, !D)
          throw new we("Model did not produce a final response!", t.state);
        t.state._lastTurnResponse = D, c == null || c.trackServerItems(D), t.state._modelResponses.push(t.state._lastTurnResponse);
        const z = Si(t.state._lastTurnResponse, h, F.tools, F.handoffs);
        t.state._lastProcessedResponse = z;
        const L = new Set(z.newItems);
        L.size > 0 && od(t, z.newItems);
        const oe = await ki(h, t.state._originalInput, t.state._generatedItems, t.state._lastTurnResponse, t.state._lastProcessedResponse, this, t.state);
        Ai(t, oe, {
          skipItems: L
        }), t.state._toolUseTracker.addToolUse(h, z.toolsUsed), t.state._originalInput = oe.originalInput, t.state._generatedItems = oe.generatedItems, oe.nextStep.type === "next_step_run_again" && (t.state._currentTurnPersistedItemCount = 0), t.state._currentStep = oe.nextStep;
      }
      if (t.state._currentStep.type === "next_step_final_output") {
        await U(this, se, ls).call(this, t.state, t.state._currentStep.output), await d(), a || await Oi(r.session, t), this.emit("agent_end", t.state._context, h, t.state._currentStep.output), h.emit("agent_end", t.state._context, t.state._currentStep.output);
        return;
      } else if (t.state._currentStep.type === "next_step_interruption") {
        await d(), a || await Oi(r.session, t);
        return;
      } else t.state._currentStep.type === "next_step_handoff" ? (t.state._currentAgent = (v = t.state._currentStep) == null ? void 0 : v.newAgent, t.state._currentAgentSpan && (t.state._currentAgentSpan.end(), mn()), t.state._currentAgentSpan = void 0, t._addItem(new Gl(t.state._currentAgent)), t.state._noActiveAgentRun = !0, t.state._currentStep = {
        type: "next_step_run_again"
      }) : j.debug("Running next loop");
    }
  } catch (h) {
    throw l && !f && await d(), t.state._currentAgentSpan && t.state._currentAgentSpan.setError({
      message: "Error in agent run",
      data: { error: String(h) }
    }), h;
  } finally {
    if (((S = t.state._currentStep) == null ? void 0 : S.type) !== "next_step_interruption")
      try {
        await yi({ runContext: t.state._context });
      } catch (h) {
        j.warn(`Failed to dispose computers after run: ${h}`);
      }
    t.state._currentAgentSpan && (((y = t.state._currentStep) == null ? void 0 : y.type) !== "next_step_interruption" && t.state._currentAgentSpan.end(), mn());
  }
}, ro = async function(t, r, s, i, o) {
  return s = s ?? {}, fs(async () => {
    const a = r instanceof Ge, c = a ? r : new Ge(s.context instanceof Zt ? s.context : new Zt(s.context), r, t, s.maxTurns ?? Fi), l = new io({
      signal: s.signal,
      state: c
    });
    l.maxTurns = s.maxTurns ?? c._maxTurns;
    const f = U(this, se, no).call(this, l, s, a, i, o).then(() => {
      l._done();
    }, (d) => {
      l._raiseError(d);
    });
    return l._setStreamLoopPromise(f), l;
  });
}, hn = async function(t, r) {
  const s = r ?? U(this, se, us).call(this, t);
  if (s.length > 0) {
    const i = {
      agent: t._currentAgent,
      input: t._originalInput,
      context: t._context
    };
    try {
      const o = await Promise.all(s.map(async (a) => bi(async (c) => {
        const l = await a.run(i);
        return c.spanData.triggered = l.output.tripwireTriggered, l;
      }, { data: { name: a.name } }, t._currentAgentSpan)));
      t._inputGuardrailResults.push(...o);
      for (const a of o)
        if (a.output.tripwireTriggered)
          throw t._currentAgentSpan && t._currentAgentSpan.setError({
            message: "Guardrail tripwire triggered",
            data: { guardrail: a.guardrail.name }
          }), new ui(`Input guardrail triggered: ${JSON.stringify(a.output.outputInfo)}`, a, t);
      return o;
    } catch (o) {
      throw o instanceof ui ? o : (t._currentTurn--, new oi(`Input guardrail failed to complete: ${o}`, o, t));
    }
  }
  return [];
}, ls = async function(t, r) {
  const s = this.outputGuardrailDefs.concat(t._currentAgent.outputGuardrails.map(is));
  if (s.length > 0) {
    const i = t._currentAgent.processFinalOutput(r), o = Bt([], t._generatedItems), a = {
      agent: t._currentAgent,
      agentOutput: i,
      context: t._context,
      details: {
        modelResponse: t._lastTurnResponse,
        output: o
      }
    };
    try {
      const c = await Promise.all(s.map(async (l) => bi(async (f) => {
        const d = await l.run(a);
        return f.spanData.triggered = d.output.tripwireTriggered, d;
      }, { data: { name: l.name } }, t._currentAgentSpan)));
      for (const l of c)
        if (l.output.tripwireTriggered)
          throw t._currentAgentSpan && t._currentAgentSpan.setError({
            message: "Guardrail tripwire triggered",
            data: { guardrail: l.guardrail.name }
          }), new Qr(`Output guardrail triggered: ${JSON.stringify(l.output.outputInfo)}`, l, t);
    } catch (c) {
      throw c instanceof Qr ? c : new oi(`Output guardrail failed to complete: ${c}`, c, t);
    }
  }
}, ds = async function(t, r, s, i, o, a) {
  const { model: c, explictlyModelSet: l } = await U(this, se, eo).call(this, t._currentAgent);
  let f = {
    ...this.config.modelSettings,
    ...t._currentAgent.modelSettings
  };
  f = Ed(l, t._currentAgent.modelSettings, c, f), f = Yl(t._currentAgent, t._toolUseTracker, f);
  const d = await t._currentAgent.getSystemPrompt(t._context), m = await t._currentAgent.getPrompt(t._context), { modelInput: g, sourceItems: v, persistedItems: S, filterApplied: y } = await Od(t._currentAgent, r.callModelInputFilter, t._context, i, d);
  o == null || o.markInputAsSent(v), a == null || a(v, y ? S : void 0);
  const h = (o == null ? void 0 : o.previousResponseId) ?? r.previousResponseId, b = (o == null ? void 0 : o.conversationId) ?? r.conversationId;
  return {
    ...s,
    model: c,
    explictlyModelSet: l,
    modelSettings: f,
    modelInput: g,
    prompt: m,
    previousResponseId: h,
    conversationId: b
  };
};
function Bt(n, e) {
  const t = e.filter((r) => r.type !== "tool_approval_item").map((r) => r.rawItem);
  return [...ps(n), ...t];
}
const Fi = 10;
function Cd(n, e) {
  return typeof n == "string" && n !== nt.DEFAULT_MODEL_PLACEHOLDER || n ? n : e ?? n ?? nt.DEFAULT_MODEL_PLACEHOLDER;
}
function Li(n, e) {
  return n ? !1 : e ? !0 : "enabled_without_data";
}
async function Od(n, e, t, r, s) {
  const i = (g, v) => g.map((S) => {
    const y = structuredClone(S);
    return v && y && typeof y == "object" && v.set(y, S), y;
  }), o = /* @__PURE__ */ new WeakMap(), a = Rd(r), c = [];
  for (const g of r)
    g && typeof g == "object" && c.push(g);
  const l = (g) => {
    if (!g || typeof g != "object")
      return;
    const v = c.findIndex((S) => S === g);
    v !== -1 && c.splice(v, 1);
  }, f = () => {
    const g = c.shift();
    return g && qi(a, g), g;
  }, m = {
    input: i(r, o),
    instructions: s
  };
  if (!e)
    return {
      modelInput: m,
      sourceItems: [...r],
      persistedItems: [],
      filterApplied: !1
    };
  try {
    const g = await e({
      modelData: m,
      agent: n,
      context: t.context
    });
    if (!g || !Array.isArray(g.input))
      throw new ee("callModelInputFilter must return a ModelInputData object with an input array.");
    const v = g.input.map((y) => {
      if (!y || typeof y != "object")
        return;
      const h = o.get(y);
      if (h)
        return l(h), qi(a, h), h;
      const b = vt(y), _ = Nd(a, b);
      if (_)
        return l(_), _;
      const N = f();
      if (N)
        return N;
    }), S = i(g.input);
    return {
      modelInput: {
        input: S,
        instructions: typeof g.instructions > "u" ? s : g.instructions
      },
      sourceItems: v,
      persistedItems: S.map((y) => structuredClone(y)),
      filterApplied: !0
    };
  } catch (g) {
    throw Xe({
      message: "Error in callModelInputFilter",
      data: { error: String(g) }
    }), g;
  }
}
class Ui {
  constructor({ conversationId: e, previousResponseId: t }) {
    // Conversation ID:
    // - https://platform.openai.com/docs/guides/conversation-state?api-mode=responses#using-the-conversations-api
    // - https://platform.openai.com/docs/api-reference/conversations/create
    x(this, "conversationId");
    // Previous Response ID:
    // https://platform.openai.com/docs/guides/conversation-state?api-mode=responses#passing-context-from-the-previous-response
    x(this, "previousResponseId");
    // Using this flag because WeakSet does not provide a way to check its size
    x(this, "sentInitialInput", !1);
    // The items already sent to the model; using WeakSet for memory efficiency
    x(this, "sentItems", /* @__PURE__ */ new WeakSet());
    // The items received from the server; using WeakSet for memory efficiency
    x(this, "serverItems", /* @__PURE__ */ new WeakSet());
    // Track initial input items that have not yet been sent so they can be retried on later turns.
    x(this, "remainingInitialInput", null);
    this.conversationId = e ?? void 0, this.previousResponseId = t ?? void 0;
  }
  /**
   * Pre-populates tracker caches from an existing RunState when resuming server-managed runs.
   */
  primeFromState({ originalInput: e, generatedItems: t, modelResponses: r }) {
    if (this.sentInitialInput)
      return;
    for (const i of ps(e))
      i && typeof i == "object" && this.sentItems.add(i);
    this.sentInitialInput = !0, this.remainingInitialInput = null;
    const s = r[r.length - 1];
    for (const i of r)
      for (const o of i.output)
        o && typeof o == "object" && this.serverItems.add(o);
    !this.conversationId && (s != null && s.responseId) && (this.previousResponseId = s.responseId);
    for (const i of t) {
      const o = i.rawItem;
      !o || typeof o != "object" || this.serverItems.has(o) && this.sentItems.add(o);
    }
  }
  /**
   * Records the raw items returned by the server so future delta calculations skip them.
   * Also captures the latest response identifier to chain follow-up calls when possible.
   */
  trackServerItems(e) {
    if (e) {
      for (const t of e.output)
        t && typeof t == "object" && this.serverItems.add(t);
      !this.conversationId && e.responseId && (this.previousResponseId = e.responseId);
    }
  }
  /**
   * Returns the minimum set of items that still need to be delivered to the server for the
   * current turn. This includes the original turn inputs (until acknowledged) plus any
   * newly generated items that have not yet been echoed back by the API.
   */
  prepareInput(e, t) {
    const r = [];
    if (this.sentInitialInput)
      this.remainingInitialInput && this.remainingInitialInput.length > 0 && r.push(...this.remainingInitialInput);
    else {
      const s = ps(e);
      r.push(...s), this.remainingInitialInput = s.filter((i) => !!i && typeof i == "object"), this.sentInitialInput = !0;
    }
    for (const s of t) {
      if (s.type === "tool_approval_item")
        continue;
      const i = s.rawItem;
      !i || typeof i != "object" || this.sentItems.has(i) || this.serverItems.has(i) || r.push(i);
    }
    return r;
  }
  /**
   * Marks the provided originals as delivered so future turns do not resend them and any
   * pending initial inputs can be dropped once the server acknowledges receipt.
   */
  markInputAsSent(e) {
    if (!e.length)
      return;
    const t = /* @__PURE__ */ new Set();
    for (const r of e)
      !r || typeof r != "object" || t.has(r) || (t.add(r), this.sentItems.add(r));
    !this.remainingInitialInput || this.remainingInitialInput.length === 0 || (this.remainingInitialInput = this.remainingInitialInput.filter((r) => !t.has(r)), this.remainingInitialInput.length === 0 && (this.remainingInitialInput = null));
  }
}
function Ed(n, e, t, r) {
  var s, i, o, a, c, l, f, d;
  if (
    // gpt-5 is enabled for the default model for agents
    Sa() && // explicitly set model for the agent
    n && // this runner uses a non-gpt-5 model
    (typeof t != "string" || !kr(t)) && ((s = e.providerData) != null && s.reasoning || (o = (i = e.providerData) == null ? void 0 : i.text) != null && o.verbosity || (a = e.providerData) != null && a.reasoning_effort)
  ) {
    const m = { ...r };
    return (c = m.providerData) == null || delete c.reasoning, (f = (l = m.providerData) == null ? void 0 : l.text) == null || delete f.verbosity, (d = m.providerData) == null || delete d.reasoning_effort, m.reasoning && (delete m.reasoning.effort, delete m.reasoning.summary), m.text && delete m.text.verbosity, m;
  }
  return r;
}
async function Zi(n) {
  const e = await n._currentAgent.getEnabledHandoffs(n._context), t = await n._currentAgent.getAllTools(n._context), r = t.filter((s) => s.type === "computer");
  if (r.length > 0 && await Promise.all(r.map(async (s) => {
    await Ia({ tool: s, runContext: n._context });
  })), n._currentAgentSpan)
    n._currentAgentSpan.spanData.tools = t.map((s) => s.name);
  else {
    const s = e.map((i) => i.agentName);
    n._currentAgentSpan = $l({
      data: {
        name: n._currentAgent.name,
        handoffs: s,
        tools: t.map((i) => i.name),
        output_type: n._currentAgent.outputSchemaName
      }
    }), n._currentAgentSpan.start(), js(n._currentAgentSpan);
  }
  return {
    handoffs: e,
    tools: t,
    serializedHandoffs: e.map((s) => jl(s)),
    serializedTools: t.map((s) => Ml(s)),
    toolsExplicitlyProvided: n._currentAgent.hasExplicitToolConfig()
  };
}
function vt(n) {
  return JSON.stringify(n, Pd);
}
function Rd(n) {
  const e = /* @__PURE__ */ new Map();
  for (const t of n) {
    const r = vt(t), s = e.get(r);
    s ? s.push(t) : e.set(r, [t]);
  }
  return e;
}
function Nd(n, e) {
  const t = n.get(e);
  if (!t || t.length === 0)
    return;
  const [r] = t;
  return t.shift(), t.length === 0 && n.delete(e), r;
}
function qi(n, e) {
  const t = vt(e), r = n.get(t);
  if (!r || r.length === 0)
    return;
  const s = r.findIndex((i) => i === e);
  s !== -1 && (r.splice(s, 1), r.length === 0 && n.delete(t));
}
function Pd(n, e) {
  if (e instanceof ArrayBuffer)
    return {
      __type: "ArrayBuffer",
      data: ke(new Uint8Array(e))
    };
  if (Hn(e)) {
    const t = e;
    return {
      __type: t.constructor.name,
      data: ke(new Uint8Array(t.buffer, t.byteOffset, t.byteLength))
    };
  }
  if (Ss(e)) {
    const t = e;
    return {
      __type: "Buffer",
      data: ke(new Uint8Array(t.buffer, t.byteOffset, t.byteLength))
    };
  }
  return Sr(e) ? {
    __type: "Buffer",
    data: ke(Uint8Array.from(e.data))
  } : e;
}
function ps(n) {
  return typeof n == "string" ? [{ type: "message", role: "user", content: n }] : [...n];
}
class so {
  constructor(e) {
    x(this, "state");
    this.state = e;
  }
  /**
   * The history of the agent run. This includes the input items and the new items generated during
   * the agent run.
   *
   * This can be used as inputs for the next agent run.
   */
  get history() {
    return Bt(this.input, this.newItems);
  }
  /**
   * The new items generated during the agent run. These include things like new messages, tool
   * calls and their outputs, etc.
   *
   * It does not include information about the agents and instead represents the model data.
   *
   * For the output including the agents, use the `newItems` property.
   */
  get output() {
    return Bt([], this.newItems);
  }
  /**
   * A copy of the original input items.
   */
  get input() {
    return this.state._originalInput;
  }
  /**
   * The run items generated during the agent run. This associates the model data with the agents.
   *
   * For the model data that can be used as inputs for the next agent run, use the `output` property.
   */
  get newItems() {
    return this.state._generatedItems;
  }
  /**
   * The raw LLM responses generated by the model during the agent run.
   */
  get rawResponses() {
    return this.state._modelResponses;
  }
  /**
   * The last response ID generated by the model during the agent run.
   */
  get lastResponseId() {
    const e = this.rawResponses;
    return e && e.length > 0 ? e[e.length - 1].responseId : void 0;
  }
  /**
   * The last agent that was run
   */
  get lastAgent() {
    return this.state._currentAgent;
  }
  /**
   * Guardrail results for the input messages.
   */
  get inputGuardrailResults() {
    return this.state._inputGuardrailResults;
  }
  /**
   * Guardrail results for the final output of the agent.
   */
  get outputGuardrailResults() {
    return this.state._outputGuardrailResults;
  }
  /**
   * Any interruptions that occurred during the agent run for example for tool approvals.
   */
  get interruptions() {
    var e;
    return ((e = this.state._currentStep) == null ? void 0 : e.type) === "next_step_interruption" ? this.state._currentStep.data.interruptions : [];
  }
  /**
   * The final output of the agent. If the output type was set to anything other than `text`,
   * this will be parsed either as JSON or using the Zod schema you provided.
   */
  get finalOutput() {
    var e;
    if (((e = this.state._currentStep) == null ? void 0 : e.type) === "next_step_final_output")
      return this.state._currentAgent.processFinalOutput(this.state._currentStep.output);
    j.warn("Accessed finalOutput before agent run is completed.");
  }
}
class Lr extends so {
  constructor(e) {
    super(e);
  }
}
var An, it, xe, Ve, Vt, Wt, Cn, bt, On;
class io extends so {
  constructor(t = {}) {
    super(t.state);
    /**
     * The current turn number
     */
    x(this, "currentTurn", 0);
    /**
     * The maximum number of turns that can be run
     */
    x(this, "maxTurns");
    R(this, An, null);
    R(this, it);
    R(this, xe);
    R(this, Ve);
    R(this, Vt);
    R(this, Wt);
    R(this, Cn);
    R(this, bt, !1);
    R(this, On);
    if (k(this, it, t.signal), k(this, Ve, new Mc({
      start: (r) => {
        k(this, xe, r);
      },
      cancel: () => {
        k(this, bt, !0);
      }
    })), k(this, Vt, new Promise((r, s) => {
      k(this, Wt, r), k(this, Cn, s);
    })), u(this, it)) {
      const r = () => {
        var i, o;
        if (u(this, bt))
          return;
        k(this, bt, !0);
        const s = u(this, xe);
        if (k(this, xe, void 0), u(this, Ve).locked) {
          if (s)
            try {
              s.close();
            } catch (a) {
              j.debug(`Failed to close readable stream on abort: ${a}`);
            }
        } else
          u(this, Ve).cancel((i = u(this, it)) == null ? void 0 : i.reason).catch((a) => {
            j.debug(`Failed to cancel readable stream on abort: ${a}`);
          });
        (o = u(this, Wt)) == null || o.call(this);
      };
      u(this, it).aborted ? r() : u(this, it).addEventListener("abort", r, { once: !0 });
    }
  }
  /**
   * The current agent that is running
   */
  get currentAgent() {
    return this.lastAgent;
  }
  /**
   * @internal
   * Adds an item to the stream of output items
   */
  _addItem(t) {
    var r;
    this.cancelled || (r = u(this, xe)) == null || r.enqueue(t);
  }
  /**
   * @internal
   * Indicates that the stream has been completed
   */
  _done() {
    var t;
    !this.cancelled && u(this, xe) && (u(this, xe).close(), k(this, xe, void 0), (t = u(this, Wt)) == null || t.call(this));
  }
  /**
   * @internal
   * Handles an error in the stream loop.
   */
  _raiseError(t) {
    var r;
    !this.cancelled && u(this, xe) && (u(this, xe).error(t), k(this, xe, void 0)), k(this, An, t), (r = u(this, Cn)) == null || r.call(this, t), u(this, Vt).catch((s) => {
      j.debug(`Resulted in an error: ${s}`);
    });
  }
  /**
   * Returns true if the stream has been cancelled.
   */
  get cancelled() {
    return u(this, bt);
  }
  /**
   * Returns the underlying readable stream.
   * @returns A readable stream of the agent run.
   */
  toStream() {
    return u(this, Ve);
  }
  /**
   * Await this promise to ensure that the stream has been completed if you are not consuming the
   * stream directly.
   */
  get completed() {
    return u(this, Vt);
  }
  /**
   * Error thrown during the run, if any.
   */
  get error() {
    return u(this, An);
  }
  toTextStream(t = {}) {
    const r = u(this, Ve).pipeThrough(new jc({
      transform(s, i) {
        if (s.type === "raw_model_stream_event" && s.data.type === "output_text_delta") {
          const o = La.parse(s.data);
          i.enqueue(o.delta);
        }
      }
    }));
    return t.compatibleWithNodeStreams ? Dc.fromWeb(r) : r;
  }
  [Symbol.asyncIterator]() {
    return u(this, Ve)[Symbol.asyncIterator]();
  }
  /**
   * @internal
   * Sets the stream loop promise that completes when the internal stream loop finishes.
   * This is used to defer trace end until all agent work is complete.
   */
  _setStreamLoopPromise(t) {
    k(this, On, t);
  }
  /**
   * @internal
   * Returns a promise that resolves when the stream loop completes.
   * This is used by the tracing system to wait for all agent work before ending the trace.
   */
  _getStreamLoopPromise() {
    return u(this, On);
  }
}
An = new WeakMap(), it = new WeakMap(), xe = new WeakMap(), Ve = new WeakMap(), Vt = new WeakMap(), Wt = new WeakMap(), Cn = new WeakMap(), bt = new WeakMap(), On = new WeakMap();
let Ji;
function qe() {
  return Ji ?? (Ji = new $c()), Ji;
}
function un() {
  const n = qe().getStore();
  return n != null && n.trace ? n.trace : null;
}
function Sn() {
  const n = qe().getStore();
  return n != null && n.span ? n.span : null;
}
function ao(n) {
  return async () => {
    const e = un();
    if (!e)
      throw new Error("No trace found");
    await e.start();
    const t = await n(e);
    if (t instanceof io) {
      const r = t._getStreamLoopPromise();
      if (r)
        return r.finally(() => e.end()), t;
    }
    return await e.end(), t;
  };
}
async function Dd(n, e, t = {}) {
  const r = typeof n == "string" ? Je().createTrace({
    ...t,
    name: n
  }) : n;
  return qe().run({ trace: r }, ao(e));
}
async function Md(n, e = {}) {
  if (un())
    return await n();
  const r = Je().createTrace(e);
  return qe().run({ trace: r }, ao(n));
}
function js(n) {
  const e = qe().getStore();
  if (!e)
    throw new Error("No existing trace found");
  e.span && (e.span.previousSpan = e.previousSpan, e.previousSpan = e.span), n.previousSpan = e.span ?? e.previousSpan, e.span = n, qe().enterWith(e);
}
function mn() {
  var e;
  const n = qe().getStore();
  n && (n.span = n.previousSpan, n.previousSpan = (e = n.previousSpan) == null ? void 0 : e.previousSpan, qe().enterWith(n));
}
function Xe(n) {
  const e = Sn();
  e && e.setError(n);
}
function jd(n) {
  var e, t, r;
  return {
    trace: (e = n.trace) == null ? void 0 : e.clone(),
    span: (t = n.span) == null ? void 0 : t.clone(),
    previousSpan: (r = n.previousSpan) == null ? void 0 : r.clone()
  };
}
function fs(n) {
  const e = qe().getStore();
  if (!e)
    throw new Error("No existing trace found");
  const t = jd(e);
  return qe().run(t, n);
}
class $d {
  async export(e) {
    if (ya.disabled) {
      j.debug("Tracing is disabled. Skipping export");
      return;
    }
    for (const t of e)
      t.type === "trace" ? console.log(`[Exporter] Export trace traceId=${t.traceId} name=${t.name}${t.groupId ? ` groupId=${t.groupId}` : ""}`) : console.log(`[Exporter] Export span: ${JSON.stringify(t)}`);
  }
}
var En, Ht, Rn, Nn, Kt, me, We, at, ot, Yt, be, hs, ms, Ut;
class Fd {
  constructor(e, {
    maxQueueSize: t = 1e3,
    maxBatchSize: r = 100,
    scheduleDelay: s = 5e3,
    // 5 seconds
    exportTriggerRatio: i = 0.8
  } = {}) {
    R(this, be);
    R(this, En);
    R(this, Ht);
    R(this, Rn);
    R(this, Nn);
    R(this, Kt);
    R(this, me, []);
    R(this, We);
    R(this, at, null);
    R(this, ot, !1);
    R(this, Yt, null);
    k(this, En, t), k(this, Ht, r), k(this, Rn, s), k(this, Nn, t * i), k(this, Kt, e), k(this, We, Lc), j.debug("Automatic trace export loop is not supported in this environment. You need to manually call `getGlobalTraceProvider().forceFlush()` to export traces.");
  }
  start() {
    k(this, Yt, new AbortController()), U(this, be, ms).call(this);
  }
  async onTraceStart(e) {
    await U(this, be, hs).call(this, e);
  }
  async onTraceEnd(e) {
  }
  async onSpanStart(e) {
  }
  async onSpanEnd(e) {
    await U(this, be, hs).call(this, e);
  }
  async shutdown(e) {
    var t;
    for (e && u(this, We).setTimeout(() => {
      var r;
      (r = u(this, Yt)) == null || r.abort();
    }, e), j.debug("Shutting down gracefully"); u(this, me).length > 0; ) {
      if (j.debug(`Waiting for buffer to empty. Items left: ${u(this, me).length}`), u(this, ot) || await U(this, be, Ut).call(this, !0), (t = u(this, Yt)) != null && t.signal.aborted) {
        j.debug("Timeout reached, force flushing"), await U(this, be, Ut).call(this, !0);
        break;
      }
      await new Promise((r) => u(this, We).setTimeout(r, 500));
    }
    j.debug("Buffer empty. Exiting"), u(this, We) && u(this, at) && u(this, We).clearTimeout(u(this, at));
  }
  async forceFlush() {
    u(this, me).length > 0 && await U(this, be, Ut).call(this, !0);
  }
}
En = new WeakMap(), Ht = new WeakMap(), Rn = new WeakMap(), Nn = new WeakMap(), Kt = new WeakMap(), me = new WeakMap(), We = new WeakMap(), at = new WeakMap(), ot = new WeakMap(), Yt = new WeakMap(), be = new WeakSet(), hs = async function(e) {
  if (u(this, me).length + 1 > u(this, En)) {
    j.error("Dropping trace because buffer is full");
    return;
  }
  u(this, me).push(e), u(this, me).length > u(this, Nn) && await U(this, be, Ut).call(this);
}, ms = function() {
  k(this, at, u(this, We).setTimeout(async () => {
    await U(this, be, Ut).call(this), U(this, be, ms).call(this);
  }, u(this, Rn))), typeof u(this, at).unref == "function" && u(this, at).unref();
}, Ut = async function(e = !1) {
  if (u(this, me).length !== 0) {
    if (j.debug(`Exporting batches. Force: ${e}. Buffer size: ${u(this, me).length}`), e || u(this, me).length < u(this, Ht)) {
      const t = [...u(this, me)];
      k(this, me, []), k(this, ot, !0), await u(this, Kt).export(t), k(this, ot, !1);
    } else if (u(this, me).length > 0) {
      const t = u(this, me).splice(0, u(this, Ht));
      k(this, ot, !0), await u(this, Kt).export(t), k(this, ot, !1);
    }
  }
};
var Se;
class Ld {
  constructor() {
    R(this, Se, []);
  }
  start() {
    for (const e of u(this, Se))
      e.start && e.start();
  }
  addTraceProcessor(e) {
    u(this, Se).push(e);
  }
  setProcessors(e) {
    j.debug("Shutting down old processors");
    for (const t of u(this, Se))
      t.shutdown();
    k(this, Se, e);
  }
  async onTraceStart(e) {
    for (const t of u(this, Se))
      await t.onTraceStart(e);
  }
  async onTraceEnd(e) {
    for (const t of u(this, Se))
      await t.onTraceEnd(e);
  }
  async onSpanStart(e) {
    for (const t of u(this, Se))
      await t.onSpanStart(e);
  }
  async onSpanEnd(e) {
    for (const t of u(this, Se))
      await t.onSpanEnd(e);
  }
  async shutdown(e) {
    for (const t of u(this, Se))
      await t.shutdown(e);
  }
  async forceFlush() {
    for (const e of u(this, Se))
      await e.forceFlush();
  }
}
Se = new WeakMap();
let Ur = null, Zr = null;
function Ud() {
  return Ur || (Ur = new $d()), Ur;
}
function oo() {
  return Zr || (Zr = new Fd(Ud())), Zr;
}
function Bi() {
  return (/* @__PURE__ */ new Date()).toISOString();
}
function uo() {
  return `trace_${xa().replace(/-/g, "")}`;
}
function Zd() {
  return `span_${xa().replace(/-/g, "").slice(0, 24)}`;
}
function qd(n) {
  return Object.fromEntries(Object.entries(n).filter(([e]) => !e.startsWith("_")));
}
var Pn, Dn, Mn, jn, It, ut, ct, xt, $n;
const Fs = class Fs {
  constructor(e, t) {
    x(this, "type", "trace.span");
    R(this, Pn);
    R(this, Dn);
    R(this, Mn);
    R(this, jn);
    R(this, It);
    R(this, ut);
    R(this, ct);
    R(this, xt);
    R(this, $n);
    k(this, Dn, e.traceId), k(this, Mn, e.spanId ?? Zd()), k(this, Pn, e.data), k(this, It, t), k(this, jn, e.parentId ?? null), k(this, xt, e.error ?? null), k(this, ut, e.startedAt ?? null), k(this, ct, e.endedAt ?? null);
  }
  get traceId() {
    return u(this, Dn);
  }
  get spanData() {
    return u(this, Pn);
  }
  get spanId() {
    return u(this, Mn);
  }
  get parentId() {
    return u(this, jn);
  }
  get previousSpan() {
    return u(this, $n);
  }
  set previousSpan(e) {
    k(this, $n, e);
  }
  start() {
    if (u(this, ut)) {
      j.warn("Span already started");
      return;
    }
    k(this, ut, Bi()), u(this, It).onSpanStart(this);
  }
  end() {
    if (u(this, ct)) {
      j.debug("Span already finished", this.spanData);
      return;
    }
    k(this, ct, Bi()), u(this, It).onSpanEnd(this);
  }
  setError(e) {
    k(this, xt, e);
  }
  get error() {
    return u(this, xt);
  }
  get startedAt() {
    return u(this, ut);
  }
  get endedAt() {
    return u(this, ct);
  }
  clone() {
    var t;
    const e = new Fs({
      traceId: this.traceId,
      spanId: this.spanId,
      parentId: this.parentId ?? void 0,
      data: this.spanData,
      startedAt: u(this, ut) ?? void 0,
      endedAt: u(this, ct) ?? void 0,
      error: u(this, xt) ?? void 0
    }, u(this, It));
    return e.previousSpan = (t = this.previousSpan) == null ? void 0 : t.clone(), e;
  }
  toJSON() {
    return {
      object: this.type,
      id: this.spanId,
      trace_id: this.traceId,
      parent_id: this.parentId,
      started_at: this.startedAt,
      ended_at: this.endedAt,
      span_data: qd(this.spanData),
      error: this.error
    };
  }
};
Pn = new WeakMap(), Dn = new WeakMap(), Mn = new WeakMap(), jn = new WeakMap(), It = new WeakMap(), ut = new WeakMap(), ct = new WeakMap(), xt = new WeakMap(), $n = new WeakMap();
let Tn = Fs;
class rt extends Tn {
  constructor(e, t) {
    super({ traceId: "no-op", spanId: "no-op", data: e }, t);
  }
  start() {
  }
  end() {
  }
  setError() {
  }
  toJSON() {
    return null;
  }
}
var Xt, He;
const Ls = class Ls {
  constructor(e, t) {
    x(this, "type", "trace");
    x(this, "traceId");
    x(this, "name");
    x(this, "groupId", null);
    x(this, "metadata");
    R(this, Xt);
    R(this, He);
    this.traceId = e.traceId ?? uo(), this.name = e.name ?? "Agent workflow", this.groupId = e.groupId ?? null, this.metadata = e.metadata ?? {}, k(this, Xt, t ?? oo()), k(this, He, e.started ?? !1);
  }
  async start() {
    u(this, He) || (k(this, He, !0), await u(this, Xt).onTraceStart(this));
  }
  async end() {
    u(this, He) && (k(this, He, !1), await u(this, Xt).onTraceEnd(this));
  }
  clone() {
    return new Ls({
      traceId: this.traceId,
      name: this.name,
      groupId: this.groupId ?? void 0,
      metadata: this.metadata,
      started: u(this, He)
    });
  }
  toJSON() {
    return {
      object: this.type,
      id: this.traceId,
      workflow_name: this.name,
      group_id: this.groupId,
      metadata: this.metadata
    };
  }
};
Xt = new WeakMap(), He = new WeakMap();
let kn = Ls;
class qr extends kn {
  constructor() {
    super({});
  }
  async start() {
  }
  async end() {
  }
  toJSON() {
    return null;
  }
}
var he, St, Ir, co;
class Jd {
  constructor() {
    R(this, Ir);
    R(this, he);
    R(this, St);
    k(this, he, new Ld()), k(this, St, ya.disabled), U(this, Ir, co).call(this);
  }
  /**
   * Add a processor to the list of processors. Each processor will receive all traces/spans.
   *
   * @param processor - The processor to add.
   */
  registerProcessor(e) {
    u(this, he).addTraceProcessor(e);
  }
  /**
   * Set the list of processors. This will replace any existing processors.
   *
   * @param processors - The list of processors to set.
   */
  setProcessors(e) {
    u(this, he).setProcessors(e);
  }
  /**
   * Get the current trace.
   *
   * @returns The current trace.
   */
  getCurrentTrace() {
    return un();
  }
  getCurrentSpan() {
    return Sn();
  }
  setDisabled(e) {
    k(this, St, e);
  }
  startExportLoop() {
    u(this, he).start();
  }
  createTrace(e) {
    if (u(this, St))
      return j.debug("Tracing is disabled, Not creating trace %o", e), new qr();
    const t = e.traceId ?? uo(), r = e.name ?? "Agent workflow";
    return j.debug("Creating trace %s with name %s", t, r), new kn({ ...e, name: r, traceId: t }, u(this, he));
  }
  createSpan(e, t) {
    if (u(this, St) || e.disabled)
      return j.debug("Tracing is disabled, Not creating span %o", e), new rt(e.data, u(this, he));
    let r, s;
    if (t) {
      if (t instanceof kn) {
        if (t instanceof qr)
          return j.debug("Parent trace is no-op, returning NoopSpan"), new rt(e.data, u(this, he));
        s = t.traceId;
      } else if (t instanceof Tn) {
        if (t instanceof rt)
          return j.debug("Parent span is no-op, returning NoopSpan"), new rt(e.data, u(this, he));
        r = t.spanId, s = t.traceId;
      }
    } else {
      const i = un(), o = Sn();
      if (!i)
        return j.error("No active trace. Make sure to start a trace with `withTrace()` first. Returning NoopSpan."), new rt(e.data, u(this, he));
      if (o instanceof rt || i instanceof qr)
        return j.debug(`Parent ${o} or ${i} is no-op, returning NoopSpan`), new rt(e.data, u(this, he));
      s = i.traceId, o ? (j.debug("Using parent span %s", o.spanId), r = o.spanId) : j.debug("No parent span, using current trace %s", i.traceId);
    }
    return s ? (j.debug(`Creating span ${JSON.stringify(e.data)} with id ${e.spanId ?? s}`), new Tn({
      ...e,
      traceId: s,
      parentId: r
    }, u(this, he))) : (j.error("No traceId found. Make sure to start a trace with `withTrace()` first. Returning NoopSpan."), new rt(e.data, u(this, he)));
  }
  async shutdown(e) {
    try {
      j.debug("Shutting down tracing provider"), await u(this, he).shutdown(e);
    } catch (t) {
      j.error("Error shutting down tracing provider %o", t);
    }
  }
  async forceFlush() {
    await u(this, he).forceFlush();
  }
}
he = new WeakMap(), St = new WeakMap(), Ir = new WeakSet(), /** Adds listeners to `process` to ensure `shutdown` occurs before exit. */
co = function() {
  if (typeof process < "u" && typeof process.on == "function") {
    const e = async () => {
      const t = setTimeout(() => {
        console.warn("Cleanup timeout, forcing exit"), process.exit(1);
      }, 5e3);
      try {
        await this.shutdown();
      } finally {
        clearTimeout(t);
      }
    };
    process.on("beforeExit", e), process.on("SIGINT", async () => {
      await e(), zi("SIGINT") || process.exit(130);
    }), process.on("SIGTERM", async () => {
      await e(), zi("SIGTERM") || process.exit(0);
    }), process.on("unhandledRejection", async (t, r) => {
      j.error("Unhandled rejection", t, r), await e(), Bd("unhandledRejection") || process.exit(1);
    });
  }
};
function zi(n) {
  return process.listeners(n).length > 1;
}
function Bd(n) {
  return process.listeners(n).length > 1;
}
let Jr;
function Je() {
  return Jr || (Jr = new Jd()), Jr;
}
function zd(n) {
  Je().registerProcessor(n);
}
zd(oo());
function lo(n) {
  const e = atob(n), t = e.length, r = new Uint8Array(t);
  for (let s = 0; s < t; s++)
    r[s] = e.charCodeAt(s);
  return r.buffer;
}
function po(n) {
  const e = String.fromCharCode(...new Uint8Array(n));
  return btoa(e);
}
function fo(n) {
  if (typeof n > "u" || n === null || typeof n != "object" || !("type" in n) || typeof n.type != "string" || !n.type || n.type !== "message" || !("content" in n) || !Array.isArray(n.content) || n.content.length < 1)
    return;
  const e = n.content[n.content.length - 1];
  if (!(!("type" in e) || typeof e.type != "string")) {
    if (e.type === "output_text")
      return typeof e.text == "string" ? e.text : void 0;
    if (e.type === "output_audio")
      return typeof e.transcript == "string" ? e.transcript : void 0;
  }
}
function Gd(n, e) {
  const t = n.filter((i) => !e.some((o) => o.itemId === i.itemId)), r = e.filter((i) => !n.some((o) => o.itemId === i.itemId)), s = e.filter((i) => n.some((o) => o.itemId === i.itemId && JSON.stringify(o) !== JSON.stringify(i)));
  return {
    removals: t,
    additions: r,
    updates: s
  };
}
function Vd() {
  return typeof window > "u" ? !1 : typeof window.RTCPeerConnection < "u";
}
function Gi(n) {
  return n.role === "system" ? n : n.role === "assistant" ? {
    ...n,
    content: n.content.map((e) => e.type === "output_audio" ? {
      ...e,
      audio: null
    } : e)
  } : n.role === "user" ? {
    ...n,
    content: n.content.map((e) => e.type === "input_audio" ? {
      ...e,
      audio: null
    } : e)
  } : n;
}
function Wd(n, e) {
  if (n.role !== "assistant" || e.role !== "assistant")
    return e;
  const t = e.content.map((r, s) => {
    if (r.type !== "output_audio" || !(typeof r.transcript != "string" || r.transcript.length === 0))
      return r;
    const o = n.content[s];
    return o && o.type === "output_audio" && typeof o.transcript == "string" && o.transcript.length > 0 ? {
      ...r,
      transcript: o.transcript
    } : r;
  });
  return {
    ...e,
    content: t
  };
}
function Vi(n, e, t) {
  if (e.type === "conversation.item.input_audio_transcription.completed")
    return n.map((i) => {
      if (i.itemId === e.item_id && i.type === "message" && "role" in i && i.role === "user") {
        const o = i.content.map((a) => a.type === "input_audio" ? {
          ...a,
          transcript: e.transcript
        } : a);
        return {
          ...i,
          content: o,
          status: "completed"
        };
      }
      return i;
    });
  const r = !t && e.type === "message" ? Gi(e) : e, s = n.findIndex((i) => i.itemId === e.itemId);
  if (s !== -1) {
    const i = n[s], o = r.type === "message" && i.type === "message" ? Wd(i, r) : r;
    return n.map((a, c) => c === s ? o : !t && a.type === "message" ? Gi(a) : a);
  } else if (e.previousItemId) {
    const i = n.findIndex((o) => o.itemId === e.previousItemId);
    return i !== -1 ? [
      ...n.slice(0, i + 1),
      r,
      ...n.slice(i + 1)
    ] : [...n, r];
  } else
    return [...n, r];
}
const ho = {
  "User-Agent": `Agents/JavaScript ${Br.version}`,
  "X-OpenAI-Agents-SDK": `openai-agents-sdk.${Br.version}`
}, Hd = `openai-agents-sdk.${Br.version}`;
function Kd(n, e) {
  const { name: t, arguments: r, ...s } = e;
  return new ye({
    type: "hosted_tool_call",
    name: t,
    arguments: JSON.stringify(r),
    status: "in_progress",
    providerData: {
      ...s
    }
  }, n);
}
function Wi(n) {
  if (n.rawItem.type !== "function_call" && n.rawItem.type !== "hosted_tool_call")
    throw new Error("Invalid approval item type for Realtime MCP approval request");
  const { name: e, arguments: t, providerData: r } = n.rawItem, { itemId: s, serverLabel: i, ...o } = r ?? {};
  if (!s || !i)
    throw new Error("Invalid approval item for Realtime MCP approval request");
  return {
    type: "mcp_approval_request",
    itemId: s,
    serverLabel: i,
    ...o,
    name: e,
    arguments: t ? JSON.parse(t) : {},
    approved: null
  };
}
class pf extends nt {
  constructor(t) {
    super(t);
    /**
     * The voice intended to be used by the agent. If another agent already spoke during the
     * RealtimeSession, changing the voice during a handoff will fail.
     */
    x(this, "voice");
    this.voice = t.voice;
  }
}
function Yd(n) {
  return {
    debounceTextLength: n.debounceTextLength ?? 100
  };
}
function Xd({ policyHint: n, ...e }) {
  const t = is(e), r = n ?? t.name;
  return {
    ...t,
    policyHint: r,
    run: async (s) => {
      const i = await t.run(s);
      return {
        ...i,
        guardrail: { ...i.guardrail, policyHint: r }
      };
    }
  };
}
function Qd(n) {
  return `
 Your last answer was blocked. 
Failed Guardrail Reason: ${n.guardrail.policyHint}. 
Failure Details: ${JSON.stringify(n.output.outputInfo ?? {})}. 
Please respond again following policy. Apologize for not being able to answer the question (while avoiding the specific reason) and divert discussion back to an approved topic immediately and not invite more discussion.
`.trim();
}
function gt(n, e) {
  return n in e && typeof e[n] < "u";
}
function ep(n) {
  return gt("modalities", n) || gt("inputAudioFormat", n) || gt("outputAudioFormat", n) || gt("inputAudioTranscription", n) || gt("turnDetection", n) || gt("inputAudioNoiseReduction", n) || gt("speed", n);
}
function tp(n) {
  var e, t, r, s, i, o, a, c;
  if (!ep(n)) {
    const l = (e = n.audio) != null && e.input ? {
      format: tr(n.audio.input.format),
      noiseReduction: n.audio.input.noiseReduction ?? null,
      transcription: n.audio.input.transcription,
      turnDetection: n.audio.input.turnDetection
    } : void 0, f = ((r = (t = n.audio) == null ? void 0 : t.output) == null ? void 0 : r.voice) ?? n.voice, d = (s = n.audio) != null && s.output || typeof f < "u" ? {
      format: tr((o = (i = n.audio) == null ? void 0 : i.output) == null ? void 0 : o.format),
      voice: f,
      speed: (c = (a = n.audio) == null ? void 0 : a.output) == null ? void 0 : c.speed
    } : void 0;
    return {
      model: n.model,
      instructions: n.instructions,
      toolChoice: n.toolChoice,
      tools: n.tools,
      tracing: n.tracing,
      providerData: n.providerData,
      prompt: n.prompt,
      outputModalities: n.outputModalities,
      audio: l || d ? {
        input: l,
        output: d
      } : void 0
    };
  }
  return {
    model: n.model,
    instructions: n.instructions,
    toolChoice: n.toolChoice,
    tools: n.tools,
    tracing: n.tracing,
    providerData: n.providerData,
    prompt: n.prompt,
    outputModalities: n.modalities,
    audio: {
      input: {
        format: tr(n.inputAudioFormat),
        noiseReduction: n.inputAudioNoiseReduction ?? null,
        transcription: n.inputAudioTranscription,
        turnDetection: n.turnDetection
      },
      output: {
        format: tr(n.outputAudioFormat),
        voice: n.voice,
        speed: n.speed
      }
    }
  };
}
function tr(n) {
  if (!n)
    return;
  if (typeof n == "object")
    return n;
  const e = String(n);
  return e === "pcm16" ? { type: "audio/pcm", rate: 24e3 } : e === "g711_ulaw" ? { type: "audio/pcmu" } : e === "g711_alaw" ? { type: "audio/pcma" } : { type: "audio/pcm", rate: 24e3 };
}
w({
  itemId: p()
});
const Hi = ge("role", [
  w({
    itemId: p(),
    previousItemId: p().nullable().optional(),
    type: I("message"),
    role: I("system"),
    content: B(w({ type: I("input_text"), text: p() }))
  }),
  w({
    itemId: p(),
    previousItemId: p().nullable().optional(),
    type: I("message"),
    role: I("user"),
    status: ce(["in_progress", "completed"]),
    content: B(w({ type: I("input_text"), text: p() }).or(w({
      type: I("input_audio"),
      audio: p().nullable().optional(),
      transcript: p().nullable()
    })))
  }),
  w({
    itemId: p(),
    previousItemId: p().nullable().optional(),
    type: I("message"),
    role: I("assistant"),
    status: ce(["in_progress", "completed", "incomplete"]),
    content: B(w({ type: I("output_text"), text: p() }).or(w({
      type: I("output_audio"),
      audio: p().nullable().optional(),
      transcript: p().nullable().optional()
    })))
  })
]), Ki = w({
  itemId: p(),
  previousItemId: p().nullable().optional(),
  type: I("function_call"),
  status: ce(["in_progress", "completed", "incomplete"]),
  arguments: p(),
  name: p(),
  output: p().nullable()
}), Yi = w({
  itemId: p(),
  previousItemId: p().nullable().optional(),
  type: ce(["mcp_call", "mcp_tool_call"]),
  status: ce(["in_progress", "completed", "incomplete"]),
  arguments: p(),
  name: p(),
  output: p().nullable()
}), np = w({
  itemId: p(),
  type: I("mcp_approval_request"),
  serverLabel: p(),
  name: p(),
  arguments: ne(p(), W()),
  approved: Rt().optional().nullable()
}), Te = va("openai-agents:realtime"), mo = w({
  id: p().optional().nullable(),
  conversation_id: p().optional().nullable(),
  max_output_tokens: E().or(I("inf")).optional().nullable(),
  metadata: ne(p(), W()).optional().nullable(),
  // GA rename: modalities -> output_modalities
  output_modalities: B(p()).optional().nullable(),
  object: I("realtime.response").optional().nullable(),
  output: B(W()).optional().nullable(),
  // GA grouping: audio.output.{format,voice}
  audio: w({
    output: w({
      format: W().optional().nullable(),
      voice: p().optional().nullable()
    }).optional().nullable()
  }).optional().nullable(),
  status: ce(["completed", "incomplete", "failed", "cancelled", "in_progress"]).optional().nullable(),
  status_details: ne(p(), W()).optional().nullable(),
  usage: w({
    input_tokens: E().optional(),
    input_token_details: ne(p(), W()).optional().nullable(),
    output_tokens: E().optional(),
    output_token_details: ne(p(), W()).optional().nullable()
  }).optional().nullable()
}), rp = w({
  id: p().optional(),
  audio: p().nullable().optional(),
  text: p().nullable().optional(),
  transcript: p().nullable().optional(),
  type: tt([
    I("input_text"),
    I("input_audio"),
    I("item_reference"),
    I("output_text"),
    I("output_audio")
  ])
}), ln = w({
  id: p().optional(),
  arguments: p().optional(),
  call_id: p().optional(),
  content: B(rp).optional(),
  name: p().optional(),
  output: p().nullable().optional(),
  role: ce(["user", "assistant", "system"]).optional(),
  status: ce(["completed", "incomplete", "in_progress"]).optional(),
  type: ce([
    "message",
    "function_call",
    "function_call_output",
    "mcp_list_tools",
    "mcp_tool_call",
    "mcp_call",
    "mcp_approval_request",
    "mcp_approval_response"
  ]).optional(),
  approval_request_id: p().nullable().optional(),
  approve: Rt().nullable().optional(),
  reason: p().nullable().optional(),
  server_label: p().optional(),
  error: W().nullable().optional(),
  tools: B(w({
    name: p(),
    description: p(),
    input_schema: ne(W()).optional()
  }).passthrough()).optional()
}).passthrough(), sp = w({
  type: I("conversation.created"),
  event_id: p(),
  conversation: w({
    id: p().optional(),
    object: I("realtime.conversation").optional()
  })
}), ip = w({
  type: I("conversation.item.added"),
  event_id: p(),
  item: ln,
  previous_item_id: p().nullable().optional()
}), ap = w({
  type: I("conversation.item.done"),
  event_id: p(),
  item: ln,
  previous_item_id: p().nullable().optional()
}), op = w({
  type: I("conversation.item.deleted"),
  event_id: p(),
  item_id: p()
}), up = w({
  type: I("conversation.item.input_audio_transcription.completed"),
  event_id: p(),
  item_id: p(),
  content_index: E(),
  transcript: p(),
  logprobs: B(W()).nullable().optional(),
  usage: w({
    type: I("tokens"),
    total_tokens: E(),
    input_tokens: E(),
    input_token_details: w({
      text_tokens: E(),
      audio_tokens: E()
    }),
    output_tokens: E()
  }).optional()
}), cp = w({
  type: I("conversation.item.input_audio_transcription.delta"),
  event_id: p(),
  item_id: p(),
  content_index: E().optional(),
  delta: p().optional(),
  logprobs: B(W()).nullable().optional()
}), lp = w({
  type: I("conversation.item.input_audio_transcription.failed"),
  event_id: p(),
  item_id: p(),
  content_index: E(),
  error: w({
    code: p().optional(),
    message: p().optional(),
    param: p().optional(),
    type: p().optional()
  })
}), dp = w({
  type: I("conversation.item.retrieved"),
  event_id: p(),
  item: ln
}), pp = w({
  type: I("conversation.item.truncated"),
  event_id: p(),
  item_id: p(),
  audio_end_ms: E(),
  content_index: E()
}), fp = w({
  type: I("conversation.item.create"),
  item: ln,
  event_id: p().optional(),
  previous_item_id: p().nullable().optional()
}), hp = w({
  type: I("conversation.item.delete"),
  item_id: p(),
  event_id: p().optional()
}), mp = w({
  type: I("conversation.item.retrieve"),
  item_id: p(),
  event_id: p().optional()
}), gp = w({
  type: I("conversation.item.truncate"),
  item_id: p(),
  audio_end_ms: E(),
  content_index: E(),
  event_id: p().optional()
}), yp = w({
  type: I("error"),
  event_id: p().optional(),
  error: W().optional()
}), _p = w({
  type: I("input_audio_buffer.cleared"),
  event_id: p()
}), vp = w({
  type: I("input_audio_buffer.append"),
  audio: p(),
  event_id: p().optional()
}), wp = w({
  type: I("input_audio_buffer.clear"),
  event_id: p().optional()
}), bp = w({
  type: I("input_audio_buffer.commit"),
  event_id: p().optional()
}), Ip = w({
  type: I("input_audio_buffer.committed"),
  event_id: p(),
  item_id: p(),
  previous_item_id: p().nullable().optional()
}), xp = w({
  type: I("input_audio_buffer.speech_started"),
  event_id: p(),
  item_id: p(),
  audio_start_ms: E()
}), Sp = w({
  type: I("input_audio_buffer.speech_stopped"),
  event_id: p(),
  item_id: p(),
  audio_end_ms: E()
}), Tp = w({
  type: I("output_audio_buffer.started"),
  event_id: p()
}).passthrough(), kp = w({
  type: I("output_audio_buffer.stopped"),
  event_id: p()
}).passthrough(), Ap = w({
  type: I("output_audio_buffer.cleared"),
  event_id: p()
}), Cp = w({
  type: I("rate_limits.updated"),
  event_id: p(),
  rate_limits: B(w({
    limit: E().optional(),
    name: ce(["requests", "tokens"]).optional(),
    remaining: E().optional(),
    reset_seconds: E().optional()
  }))
}), Op = w({
  type: I("response.output_audio.delta"),
  event_id: p(),
  item_id: p(),
  content_index: E(),
  delta: p(),
  output_index: E(),
  response_id: p()
}), Ep = w({
  type: I("response.output_audio.done"),
  event_id: p(),
  item_id: p(),
  content_index: E(),
  output_index: E(),
  response_id: p()
}), Rp = w({
  type: I("response.output_audio_transcript.delta"),
  event_id: p(),
  item_id: p(),
  content_index: E(),
  delta: p(),
  output_index: E(),
  response_id: p()
}), Np = w({
  //  GA may introduce response.output_audio_transcript.done
  type: I("response.output_audio_transcript.done"),
  event_id: p(),
  item_id: p(),
  content_index: E(),
  transcript: p(),
  output_index: E(),
  response_id: p()
}), Pp = w({
  type: I("response.content_part.added"),
  event_id: p(),
  item_id: p(),
  content_index: E(),
  output_index: E(),
  response_id: p(),
  part: w({
    audio: p().optional(),
    text: p().optional(),
    transcript: p().optional(),
    type: ce(["text", "audio"]).optional()
  })
}), Dp = w({
  type: I("response.content_part.done"),
  event_id: p(),
  item_id: p(),
  content_index: E(),
  output_index: E(),
  response_id: p(),
  part: w({
    audio: p().optional(),
    text: p().optional(),
    transcript: p().optional(),
    type: ce(["text", "audio"]).optional()
  })
}), Mp = w({
  type: I("response.created"),
  event_id: p(),
  response: mo
}), go = w({
  type: I("response.done"),
  event_id: p(),
  response: mo
}), jp = w({
  type: I("response.function_call_arguments.delta"),
  event_id: p(),
  item_id: p(),
  call_id: p(),
  delta: p(),
  output_index: E(),
  response_id: p()
}), $p = w({
  type: I("response.function_call_arguments.done"),
  event_id: p(),
  item_id: p(),
  call_id: p(),
  arguments: p(),
  output_index: E(),
  response_id: p()
}), Fp = w({
  type: I("response.output_item.added"),
  event_id: p(),
  item: ln,
  output_index: E(),
  response_id: p()
}), Lp = w({
  type: I("response.output_item.done"),
  event_id: p(),
  item: ln,
  output_index: E(),
  response_id: p()
}), Up = w({
  type: I("response.output_text.delta"),
  event_id: p(),
  item_id: p(),
  content_index: E(),
  delta: p(),
  output_index: E(),
  response_id: p()
}), Zp = w({
  // No rename specified for done; keep response.text.done
  type: I("response.output_text.done"),
  event_id: p(),
  item_id: p(),
  content_index: E(),
  text: p(),
  output_index: E(),
  response_id: p()
}), qp = w({
  type: I("session.created"),
  event_id: p(),
  session: W()
}), Jp = w({
  type: I("session.updated"),
  event_id: p(),
  session: W()
}), Bp = w({
  type: I("response.cancel"),
  event_id: p().optional(),
  response_id: p().optional()
}), zp = w({
  type: I("response.create"),
  event_id: p().optional(),
  response: W().optional()
}), Gp = w({
  type: I("session.update"),
  event_id: p().optional(),
  session: W()
}), Vp = w({
  type: I("mcp_list_tools.in_progress"),
  event_id: p().optional(),
  item_id: p().optional()
}), Wp = w({
  type: I("mcp_list_tools.completed"),
  event_id: p().optional(),
  item_id: p().optional()
}), Hp = w({
  type: I("response.mcp_call_arguments.delta"),
  event_id: p(),
  response_id: p(),
  item_id: p(),
  output_index: E(),
  delta: p(),
  obfuscation: p()
}), Kp = w({
  type: I("response.mcp_call_arguments.done"),
  event_id: p(),
  response_id: p(),
  item_id: p(),
  output_index: E(),
  arguments: p()
}), Yp = w({
  type: I("response.mcp_call.in_progress"),
  event_id: p(),
  output_index: E(),
  item_id: p()
}), Xp = w({
  type: I("response.mcp_call.completed"),
  event_id: p(),
  output_index: E(),
  item_id: p()
}), Qp = w({
  type: I("mcp_list_tools.failed"),
  event_id: p().optional(),
  item_id: p().optional()
}), ef = w({
  type: p(),
  event_id: p().optional().nullable()
}).passthrough(), tf = ge("type", [
  sp,
  ip,
  ap,
  op,
  up,
  cp,
  lp,
  dp,
  pp,
  yp,
  _p,
  Ip,
  xp,
  Sp,
  Tp,
  kp,
  Ap,
  Cp,
  Op,
  Ep,
  Rp,
  Np,
  Pp,
  Dp,
  Mp,
  go,
  jp,
  $p,
  Fp,
  Lp,
  Up,
  Zp,
  qp,
  Jp,
  Vp,
  Wp,
  Qp,
  Hp,
  Kp,
  Yp,
  Xp
]);
ge("type", [
  fp,
  hp,
  mp,
  gp,
  vp,
  wp,
  bp,
  Bp,
  zp,
  Gp
]);
function $s(n) {
  const e = JSON.parse(n.data.toString()), t = tf.safeParse(e);
  if (!t.success) {
    const r = ef.safeParse(e);
    return r.success ? { data: r.data, isGeneric: !0 } : { data: null, isGeneric: !0 };
  }
  return { data: t.data, isGeneric: !1 };
}
const nf = "gpt-realtime", Pe = {
  outputModalities: ["audio"],
  audio: {
    input: {
      format: { type: "audio/pcm", rate: 24e3 },
      transcription: { model: "gpt-4o-mini-transcribe" },
      turnDetection: { type: "semantic_vad" },
      noiseReduction: null
    },
    output: {
      format: { type: "audio/pcm", rate: 24e3 },
      speed: 1
    }
  }
};
var Tt, Fn, ve, Ln;
const Us = class Us extends Ts {
  constructor(t = {}) {
    super();
    R(this, Tt);
    R(this, Fn);
    R(this, ve, null);
    R(this, Ln, null);
    x(this, "eventEmitter", new Tr());
    k(this, Tt, t.model ?? nf), k(this, Fn, t.apiKey);
  }
  /**
   * The current model that is being used by the transport layer.
   */
  get currentModel() {
    return u(this, Tt);
  }
  /**
   * The current model that is being used by the transport layer.
   * **Note**: The model cannot be changed mid conversation.
   */
  set currentModel(t) {
    k(this, Tt, t);
  }
  /**
   * Hook for subclasses to clean up transport-specific state when audio
   * playback finishes. Defaults to a no-op.
   */
  _afterAudioDoneEvent() {
  }
  get _rawSessionConfig() {
    return u(this, Ln) ?? null;
  }
  async _getApiKey(t) {
    const r = t.apiKey ?? u(this, Fn);
    return typeof r == "function" ? await r() : r;
  }
  _onMessage(t) {
    var i, o, a, c, l, f;
    const { data: r, isGeneric: s } = $s(t);
    if (r !== null && (this.emit("*", r), !s)) {
      if (r.type === "error" ? this.emit("error", { type: "error", error: r }) : this.emit(r.type, r), r.type === "response.created") {
        this.emit("turn_started", {
          type: "response_started",
          providerData: {
            ...r
          }
        });
        return;
      }
      if (r.type === "session.updated" && k(this, Ln, r.session), r.type === "response.done") {
        const d = go.safeParse(r);
        if (!d.success) {
          Te.error("Error parsing response done event", d.error);
          return;
        }
        const m = ((i = d.data.response.usage) == null ? void 0 : i.input_tokens) ?? 0, g = ((o = d.data.response.usage) == null ? void 0 : o.output_tokens) ?? 0, v = m + g, S = new Kn({
          inputTokens: m,
          inputTokensDetails: ((a = d.data.response.usage) == null ? void 0 : a.input_token_details) ?? {},
          outputTokens: g,
          outputTokensDetails: ((c = d.data.response.usage) == null ? void 0 : c.output_token_details) ?? {},
          totalTokens: v
        });
        this.emit("usage_update", S), this.emit("turn_done", {
          type: "response_done",
          response: {
            id: d.data.response.id ?? "",
            output: d.data.response.output ?? [],
            usage: {
              inputTokens: m,
              inputTokensDetails: ((l = d.data.response.usage) == null ? void 0 : l.input_token_details) ?? {},
              outputTokens: g,
              outputTokensDetails: ((f = d.data.response.usage) == null ? void 0 : f.output_token_details) ?? {},
              totalTokens: v
            }
          }
        });
        return;
      }
      if (r.type === "response.output_audio.done") {
        this.emit("audio_done"), this._afterAudioDoneEvent();
        return;
      }
      if (r.type === "conversation.item.deleted") {
        this.emit("item_deleted", {
          itemId: r.item_id
        });
        return;
      }
      if (r.type === "conversation.item.input_audio_transcription.completed" || r.type === "conversation.item.truncated") {
        this.sendEvent({
          type: "conversation.item.retrieve",
          item_id: r.item_id
        });
        return;
      }
      if (r.type === "conversation.item.input_audio_transcription.delta" || r.type === "response.output_text.delta" || r.type === "response.output_audio_transcript.delta" || r.type === "response.function_call_arguments.delta") {
        r.type === "response.output_audio_transcript.delta" && this.emit("audio_transcript_delta", {
          type: "transcript_delta",
          delta: r.delta,
          itemId: r.item_id,
          responseId: r.response_id
        });
        return;
      }
      if (r.type === "conversation.item.added" || r.type === "conversation.item.done" || r.type === "conversation.item.retrieved") {
        if (r.item.type === "mcp_list_tools" && r.type === "conversation.item.done") {
          const d = r.item.server_label ?? "", m = r.item.tools ?? [];
          try {
            this.emit("mcp_tools_listed", {
              serverLabel: d,
              tools: m
            });
          } catch (g) {
            Te.error("Error emitting mcp_tools_listed", g, r.item);
          }
          return;
        }
        if (r.item.type === "message") {
          const d = r.type === "conversation.item.added" || r.type === "conversation.item.done" ? r.previous_item_id : null, m = Hi.parse({
            itemId: r.item.id,
            previousItemId: d,
            type: r.item.type,
            role: r.item.role,
            content: r.item.content,
            status: r.item.status
          });
          this.emit("item_update", m);
          return;
        }
        if (r.item.type === "mcp_approval_request" && r.type === "conversation.item.done") {
          const d = r.item, m = np.parse({
            itemId: d.id,
            type: d.type,
            serverLabel: d.server_label,
            name: d.name,
            arguments: JSON.parse(d.arguments || "{}"),
            approved: d.approved
          });
          this.emit("item_update", m), this.emit("mcp_approval_request", m);
          return;
        }
        if (r.item.type === "mcp_tool_call" || r.item.type === "mcp_call") {
          const d = r.type === "conversation.item.done" ? "completed" : "in_progress", m = Yi.parse({
            itemId: r.item.id,
            type: r.item.type,
            status: d,
            arguments: r.item.arguments,
            name: r.item.name,
            output: r.item.output
          });
          this.emit("item_update", m), r.type === "conversation.item.done" && this.emit("mcp_tool_call_completed", m);
          return;
        }
      }
      if (r.type === "response.mcp_call.in_progress") {
        const d = r;
        this.sendEvent({
          type: "conversation.item.retrieve",
          item_id: d.item_id
        });
        return;
      }
      if (r.type === "mcp_list_tools.in_progress") {
        const d = r;
        d.item_id && this.sendEvent({
          type: "conversation.item.retrieve",
          item_id: d.item_id
        });
        return;
      }
      if (r.type === "response.output_item.done" || r.type === "response.output_item.added") {
        const d = r.item;
        if (d.type === "function_call" && d.status === "completed") {
          const m = Ki.parse({
            itemId: d.id,
            type: d.type,
            status: "in_progress",
            // we set it to in_progress for the UI as it will only be completed with the output
            arguments: d.arguments,
            name: d.name,
            output: null
          });
          this.emit("item_update", m), this.emit("function_call", {
            id: d.id,
            type: "function_call",
            callId: d.call_id ?? "",
            arguments: d.arguments ?? "",
            name: d.name ?? ""
          });
          return;
        }
        if (d.type === "mcp_tool_call" || d.type === "mcp_call") {
          const m = Yi.parse({
            itemId: d.id,
            type: d.type,
            status: r.type === "response.output_item.done" ? "completed" : "in_progress",
            // we set it to in_progress for the UI as it will only be completed with the output
            arguments: d.arguments,
            name: d.name,
            output: d.output
          });
          this.emit("item_update", m);
          return;
        }
        if (d.type === "message") {
          const m = Hi.parse({
            itemId: r.item.id,
            type: r.item.type,
            role: r.item.role,
            content: r.item.content,
            status: r.type === "response.output_item.done" ? d.status ?? "completed" : d.status ?? "in_progress"
          });
          this.emit("item_update", m);
          return;
        }
      }
    }
  }
  _onError(t) {
    this.emit("error", {
      type: "error",
      error: t
    });
  }
  _onOpen() {
    this.emit("connected");
  }
  _onClose() {
    this.emit("disconnected");
  }
  /**
   * Send a message to the Realtime API. This will create a new item in the conversation and
   * trigger a response.
   *
   * @param message - The message to send.
   * @param otherEventData - Additional event data to send.
   */
  sendMessage(t, r, { triggerResponse: s = !0 } = {}) {
    const i = typeof t == "string" ? [
      {
        type: "input_text",
        text: t
      }
    ] : t.content.map((o) => o.type === "input_image" ? {
      type: "input_image",
      image_url: o.image,
      ...o.providerData ?? {}
    } : o);
    this.sendEvent({
      type: "conversation.item.create",
      item: {
        type: "message",
        role: "user",
        content: i
      },
      ...r
    }), s && this.sendEvent({
      type: "response.create"
    });
  }
  addImage(t, { triggerResponse: r = !0 } = {}) {
    this.sendMessage({
      type: "message",
      role: "user",
      content: [{ type: "input_image", image: t }]
    }, {}, { triggerResponse: r });
  }
  _getMergedSessionConfig(t) {
    var i, o, a, c, l, f, d, m, g, v, S, y, h, b, _, N, T, A, D, F, z, L, oe, K, ae, Oe, Ne, dn;
    const r = tp(t), s = {
      type: "realtime",
      instructions: r.instructions,
      model: r.model ?? u(this, Tt),
      output_modalities: r.outputModalities ?? Pe.outputModalities,
      audio: {
        input: {
          format: ((o = (i = r.audio) == null ? void 0 : i.input) == null ? void 0 : o.format) ?? ((c = (a = Pe.audio) == null ? void 0 : a.input) == null ? void 0 : c.format),
          noise_reduction: ((f = (l = r.audio) == null ? void 0 : l.input) == null ? void 0 : f.noiseReduction) ?? ((m = (d = Pe.audio) == null ? void 0 : d.input) == null ? void 0 : m.noiseReduction),
          transcription: ((v = (g = r.audio) == null ? void 0 : g.input) == null ? void 0 : v.transcription) ?? ((y = (S = Pe.audio) == null ? void 0 : S.input) == null ? void 0 : y.transcription),
          turn_detection: Us.buildTurnDetectionConfig((b = (h = r.audio) == null ? void 0 : h.input) == null ? void 0 : b.turnDetection) ?? ((N = (_ = Pe.audio) == null ? void 0 : _.input) == null ? void 0 : N.turnDetection)
        },
        output: {
          format: ((A = (T = r.audio) == null ? void 0 : T.output) == null ? void 0 : A.format) ?? ((F = (D = Pe.audio) == null ? void 0 : D.output) == null ? void 0 : F.format),
          voice: ((L = (z = r.audio) == null ? void 0 : z.output) == null ? void 0 : L.voice) ?? ((K = (oe = Pe.audio) == null ? void 0 : oe.output) == null ? void 0 : K.voice),
          speed: ((Oe = (ae = r.audio) == null ? void 0 : ae.output) == null ? void 0 : Oe.speed) ?? ((dn = (Ne = Pe.audio) == null ? void 0 : Ne.output) == null ? void 0 : dn.speed)
        }
      },
      tool_choice: r.toolChoice ?? Pe.toolChoice,
      // We don't set tracing here to make sure that we don't try to override it on every
      // session.update as it might lead to errors
      ...r.providerData ?? {}
    };
    return r.prompt && (s.prompt = {
      id: r.prompt.promptId,
      version: r.prompt.version,
      variables: r.prompt.variables
    }), r.tools && r.tools.length > 0 && (s.tools = r.tools.map((Yn) => ({
      ...Yn,
      strict: void 0
    }))), s;
  }
  /**
   * Build the payload object expected by the Realtime API when creating or updating a session.
   *
   * The helper centralises the conversion from camelCase runtime config to the snake_case payload
   * required by the Realtime API so transports that need a one-off payload (for example SIP call
   * acceptance) can reuse the same logic without duplicating private state.
   *
   * @param config - The session config to merge with defaults.
   */
  buildSessionPayload(t) {
    return this._getMergedSessionConfig(t);
  }
  static buildTurnDetectionConfig(t) {
    if (typeof t > "u")
      return;
    const { type: r, createResponse: s, create_response: i, eagerness: o, interruptResponse: a, interrupt_response: c, prefixPaddingMs: l, prefix_padding_ms: f, silenceDurationMs: d, silence_duration_ms: m, threshold: g, idleTimeoutMs: v, idle_timeout_ms: S, ...y } = t, h = {
      type: r,
      create_response: s || i,
      eagerness: o,
      interrupt_response: a || c,
      prefix_padding_ms: l || f,
      silence_duration_ms: d || m,
      idle_timeout_ms: v || S,
      threshold: g,
      ...y
    };
    return Object.keys(h).forEach((b) => {
      h[b] === void 0 && delete h[b];
    }), Object.keys(h).length > 0 ? h : void 0;
  }
  /**
   * Sets the internal tracing config. This is used to track the tracing config that has been set
   * during the session.create event.
   */
  set _tracingConfig(t) {
    k(this, ve, t);
  }
  /**
   * Sets the tracing config for the session. This will send the tracing config to the Realtime API.
   *
   * @param tracingConfig - The tracing config to set. We don't support 'auto' here as the SDK will always configure a Workflow Name unless it exists
   */
  _updateTracingConfig(t) {
    var r, s, i;
    if (typeof u(this, ve) > "u" && k(this, ve, null), t === "auto") {
      this.sendEvent({
        type: "session.update",
        session: {
          type: "realtime",
          tracing: "auto"
        }
      });
      return;
    }
    if (u(this, ve) !== null && typeof u(this, ve) != "string" && typeof t != "string") {
      Te.warn("Tracing config is already set, skipping setting it again. This likely happens when you already set a tracing config on session creation.");
      return;
    }
    if (t === null) {
      Te.debug("Disabling tracing for this session. It cannot be turned on for this session from this point on."), this.sendEvent({
        type: "session.update",
        session: {
          type: "realtime",
          tracing: null
        }
      });
      return;
    }
    if (u(this, ve) === null || typeof u(this, ve) == "string") {
      this.sendEvent({
        type: "session.update",
        session: {
          type: "realtime",
          tracing: t
        }
      });
      return;
    }
    if ((t == null ? void 0 : t.group_id) !== ((r = u(this, ve)) == null ? void 0 : r.group_id) || (t == null ? void 0 : t.metadata) !== ((s = u(this, ve)) == null ? void 0 : s.metadata) || (t == null ? void 0 : t.workflow_name) !== ((i = u(this, ve)) == null ? void 0 : i.workflow_name)) {
      Te.warn("Mismatch in tracing config. Ignoring the new tracing config. This likely happens when you already set a tracing config on session creation. Current tracing config: %s, new tracing config: %s", JSON.stringify(u(this, ve)), JSON.stringify(t));
      return;
    }
    this.sendEvent({
      type: "session.update",
      session: {
        type: "realtime",
        tracing: t
      }
    });
  }
  /**
   * Updates the session config. This will merge it with the current session config with the default
   * values and send it to the Realtime API.
   *
   * @param config - The session config to update.
   */
  updateSessionConfig(t) {
    const r = this.buildSessionPayload(t);
    this.sendEvent({
      type: "session.update",
      session: r
    });
  }
  /**
   * Send the output of a function call to the Realtime API.
   *
   * @param toolCall - The tool call to send the output for.
   * @param output - The output of the function call.
   * @param startResponse - Whether to start a new response after sending the output.
   */
  sendFunctionCallOutput(t, r, s = !0) {
    this.sendEvent({
      type: "conversation.item.create",
      item: {
        type: "function_call_output",
        output: r,
        call_id: t.callId
      }
    });
    try {
      const i = Ki.parse({
        itemId: t.id,
        previousItemId: t.previousItemId,
        type: "function_call",
        status: "completed",
        arguments: t.arguments,
        name: t.name,
        output: r
      });
      this.emit("item_update", i);
    } catch (i) {
      Te.error("Error parsing tool call item", i, t);
    }
    s && this.sendEvent({
      type: "response.create"
    });
  }
  /**
   * Send an audio buffer to the Realtime API. If `{ commit: true }` is passed, the audio buffer
   * will be committed and the model will start processing it. This is necessary if you have
   * disabled turn detection / voice activity detection (VAD).
   *
   * @param audio - The audio buffer to send.
   * @param options - The options for the audio buffer.
   */
  sendAudio(t, { commit: r = !1 } = {}) {
    this.sendEvent({
      type: "input_audio_buffer.append",
      audio: po(t)
    }), r && this.sendEvent({
      type: "input_audio_buffer.commit"
    });
  }
  /**
   * Reset the history of the conversation. This will create a diff between the old and new history
   * and send the necessary events to the Realtime API to update the history.
   *
   * @param oldHistory - The old history of the conversation.
   * @param newHistory - The new history of the conversation.
   */
  resetHistory(t, r) {
    const { removals: s, additions: i, updates: o } = Gd(t, r), a = new Set(s.map((l) => l.itemId));
    for (const l of o)
      a.add(l.itemId);
    if (a.size > 0)
      for (const l of a)
        this.sendEvent({
          type: "conversation.item.delete",
          item_id: l
        });
    const c = [...i, ...o];
    for (const l of c)
      if (l.type === "message") {
        const f = {
          type: "message",
          role: l.role,
          content: l.content,
          id: l.itemId
        };
        l.role !== "system" && l.status && (f.status = l.status), this.sendEvent({
          type: "conversation.item.create",
          item: f
        });
      } else l.type === "function_call" && Te.warn("Function calls cannot be manually added or updated at the moment. Ignoring.");
  }
  sendMcpResponse(t, r) {
    this.sendEvent({
      type: "conversation.item.create",
      previous_item_id: t.itemId,
      item: {
        type: "mcp_approval_response",
        approval_request_id: t.itemId,
        approve: r
      }
    });
  }
};
Tt = new WeakMap(), Fn = new WeakMap(), ve = new WeakMap(), Ln = new WeakMap();
let br = Us;
var Un, te, Zn, lt, qn;
class rf extends br {
  constructor(t = {}) {
    if (typeof RTCPeerConnection > "u")
      throw new Error("WebRTC is not supported in this environment");
    super(t);
    x(this, "options");
    R(this, Un);
    R(this, te, {
      status: "disconnected",
      peerConnection: void 0,
      dataChannel: void 0,
      callId: void 0
    });
    R(this, Zn);
    R(this, lt, !1);
    R(this, qn, !1);
    this.options = t, k(this, Un, t.baseUrl ?? "https://api.openai.com/v1/realtime/calls"), k(this, Zn, t.useInsecureApiKey ?? !1);
  }
  /**
   * The current call ID of the WebRTC connection.
   */
  get callId() {
    return u(this, te).callId;
  }
  /**
   * The current status of the WebRTC connection.
   */
  get status() {
    return u(this, te).status;
  }
  /**
   * The current connection state of the WebRTC connection including the peer connection and data
   * channel.
   */
  get connectionState() {
    return u(this, te);
  }
  /**
   * Whether the session is muted.
   */
  get muted() {
    return u(this, qn);
  }
  /**
   * Connect to the Realtime API. This will establish the connection to the OpenAI Realtime API
   * via WebRTC.
   *
   * If you are using a browser, the transport layer will also automatically configure the
   * microphone and audio output to be used by the session.
   *
   * @param options - The options for the connection.
   */
  async connect(t) {
    if (u(this, te).status === "connected")
      return;
    u(this, te).status === "connecting" && Te.warn("Realtime connection already in progress. Please await original promise");
    const r = t.model ?? this.currentModel;
    this.currentModel = r;
    const s = t.url ?? u(this, Un), i = await this._getApiKey(t), o = typeof i == "string" && i.startsWith("ek_");
    if (!u(this, Zn) && !o)
      throw new ee("Using the WebRTC connection in a browser environment requires an ephemeral client key. If you need to use a regular API key, use the WebSocket transport or set the `useInsecureApiKey` option to true.");
    return new Promise(async (a, c) => {
      var l, f;
      try {
        const d = {
          ...t.initialSessionConfig || {},
          model: this.currentModel
        }, m = new URL(s);
        let g = new RTCPeerConnection();
        const v = g.createDataChannel("oai-events");
        let S;
        const y = (A) => {
          A.onconnectionstatechange = () => {
            switch (A.connectionState) {
              case "disconnected":
              case "failed":
              case "closed":
                this.close();
                break;
            }
          };
        };
        y(g), k(this, te, {
          status: "connecting",
          peerConnection: g,
          dataChannel: v,
          callId: S
        }), this.emit("connection_change", u(this, te).status), v.addEventListener("open", () => {
          k(this, te, {
            status: "connected",
            peerConnection: g,
            dataChannel: v,
            callId: S
          }), this.updateSessionConfig(d), this.emit("connection_change", u(this, te).status), this._onOpen(), a();
        }), v.addEventListener("error", (A) => {
          this.close(), this._onError(A), c(A);
        }), v.addEventListener("message", (A) => {
          this._onMessage(A);
          const { data: D, isGeneric: F } = $s(A);
          if (!(!D || F) && (D.type === "response.created" ? k(this, lt, !0) : D.type === "response.done" && k(this, lt, !1), D.type === "session.created")) {
            this._tracingConfig = D.session.tracing;
            const z = typeof d.tracing > "u" ? "auto" : d.tracing;
            this._updateTracingConfig(z);
          }
        });
        const h = this.options.audioElement ?? document.createElement("audio");
        h.autoplay = !0, g.ontrack = (A) => {
          h.srcObject = A.streams[0];
        };
        const b = this.options.mediaStream ?? await navigator.mediaDevices.getUserMedia({
          audio: !0
        });
        if (g.addTrack(b.getAudioTracks()[0]), this.options.changePeerConnection) {
          const A = g;
          g = await this.options.changePeerConnection(g), A !== g && (A.onconnectionstatechange = null), y(g), k(this, te, { ...u(this, te), peerConnection: g });
        }
        const _ = await g.createOffer();
        if (await g.setLocalDescription(_), !_.sdp)
          throw new Error("Failed to create offer");
        const N = await fetch(m, {
          method: "POST",
          body: _.sdp,
          headers: {
            "Content-Type": "application/sdp",
            Authorization: `Bearer ${i}`,
            "X-OpenAI-Agents-SDK": ho["X-OpenAI-Agents-SDK"]
          }
        });
        S = (f = (l = N.headers) == null ? void 0 : l.get("Location")) == null ? void 0 : f.split("/").pop(), k(this, te, { ...u(this, te), callId: S });
        const T = {
          type: "answer",
          sdp: await N.text()
        };
        await g.setRemoteDescription(T);
      } catch (d) {
        this.close(), this._onError(d), c(d);
      }
    });
  }
  /**
   * Send an event to the Realtime API. This will stringify the event and send it directly to the
   * API. This can be used if you want to take control over the connection and send events manually.
   *
   * @param event - The event to send.
   */
  sendEvent(t) {
    if (!u(this, te).dataChannel || u(this, te).dataChannel.readyState !== "open")
      throw new Error("WebRTC data channel is not connected. Make sure you call `connect()` before sending events.");
    u(this, te).dataChannel.send(JSON.stringify(t));
  }
  /**
   * Mute or unmute the session.
   * @param muted - Whether to mute the session.
   */
  mute(t) {
    k(this, qn, t), u(this, te).peerConnection && u(this, te).peerConnection.getSenders().forEach((s) => {
      s.track && (s.track.enabled = !t);
    });
  }
  _afterAudioDoneEvent() {
    k(this, lt, !1);
  }
  /**
   * Close the connection to the Realtime API and disconnects the underlying WebRTC connection.
   */
  close() {
    if (u(this, te).dataChannel && u(this, te).dataChannel.close(), u(this, te).peerConnection) {
      const t = u(this, te).peerConnection;
      t.onconnectionstatechange = null, t.getSenders().forEach((r) => {
        var s;
        (s = r.track) == null || s.stop();
      }), t.close();
    }
    u(this, te).status !== "disconnected" && (k(this, te, {
      status: "disconnected",
      peerConnection: void 0,
      dataChannel: void 0,
      callId: void 0
    }), this.emit("connection_change", u(this, te).status), this._onClose());
  }
  /**
   * Interrupt the current response if one is ongoing and clear the audio buffer so that the agent
   * stops talking.
   */
  interrupt() {
    u(this, lt) && (this.sendEvent({
      type: "response.cancel"
    }), k(this, lt, !1)), this.sendEvent({
      type: "output_audio_buffer.clear"
    });
  }
}
Un = new WeakMap(), te = new WeakMap(), Zn = new WeakMap(), lt = new WeakMap(), qn = new WeakMap();
const sf = globalThis.WebSocket;
var dt, kt, At, pe, Jn, Ke, Ct, Ot, Qt, Bn, $t, gs, _o;
class yo extends br {
  constructor(t = {}) {
    super(t);
    R(this, $t);
    R(this, dt);
    R(this, kt);
    R(this, At);
    R(this, pe, {
      status: "disconnected",
      websocket: void 0
    });
    R(this, Jn);
    R(this, Ke);
    R(this, Ct);
    /**
     * Timestamp maintained by the transport layer to aid with the calculation of the elapsed time
     * since the response started to compute the right interruption time.
     *
     * Mostly internal but might be used by extended transport layers for their interruption
     * calculation.
     */
    x(this, "_firstAudioTimestamp");
    x(this, "_audioLengthMs", 0);
    R(this, Ot, !1);
    R(this, Qt);
    R(this, Bn);
    k(this, kt, t.url), k(this, At, t.url), k(this, Jn, t.useInsecureApiKey ?? !1), k(this, Qt, t.createWebSocket), k(this, Bn, t.skipOpenEventListeners ?? !1);
  }
  getCommonRequestHeaders() {
    return ho;
  }
  /**
   * The current status of the WebSocket connection.
   */
  get status() {
    return u(this, pe).status;
  }
  /**
   * The current connection state of the WebSocket connection.
   */
  get connectionState() {
    return u(this, pe);
  }
  /**
   * Always returns `null` as the WebSocket transport layer does not handle muting. Instead,
   * this should be handled by the client by not triggering the `sendAudio` method.
   */
  get muted() {
    return null;
  }
  /**
   * The current item ID of the ongoing response.
   */
  get currentItemId() {
    return u(this, Ke);
  }
  /**
   * Triggers the `audio` event that a client might listen to to receive the audio buffer.
   * Protected for you to be able to override and disable emitting this event in case your extended
   * transport layer handles audio internally.
   *
   * @param audioEvent - The audio event to emit.
   */
  _onAudio(t) {
    this.emit("audio", t);
  }
  _afterAudioDoneEvent() {
    U(this, $t, gs).call(this);
  }
  async connect(t) {
    const r = t.model ?? this.currentModel;
    this.currentModel = r, k(this, dt, await this._getApiKey(t));
    const s = t.callId;
    let i;
    t.url ? (i = t.url, k(this, At, t.url)) : s ? i = `wss://api.openai.com/v1/realtime?call_id=${s}` : u(this, At) ? i = u(this, At) : i = `wss://api.openai.com/v1/realtime?model=${this.currentModel}`, k(this, kt, i);
    const o = {
      ...t.initialSessionConfig || {},
      model: this.currentModel
    };
    await new Promise((a, c) => {
      U(this, $t, _o).call(this, a, c, o).catch(c);
    }), await this.updateSessionConfig(o);
  }
  /**
   * Send an event to the Realtime API. This will stringify the event and send it directly to the
   * API. This can be used if you want to take control over the connection and send events manually.
   *
   * @param event - The event to send.
   */
  sendEvent(t) {
    if (!u(this, pe).websocket)
      throw new Error("WebSocket is not connected. Make sure you call `connect()` before sending events.");
    u(this, pe).websocket.send(JSON.stringify(t));
  }
  /**
   * Close the WebSocket connection.
   *
   * This will also reset any internal connection tracking used for interruption handling.
   */
  close() {
    var t;
    (t = u(this, pe).websocket) == null || t.close(), k(this, Ke, void 0), this._firstAudioTimestamp = void 0, this._audioLengthMs = 0, k(this, Ct, void 0);
  }
  /**
   * Will throw an error as the WebSocket transport layer does not support muting.
   */
  mute(t) {
    throw new Error("Mute is not supported for the WebSocket transport. You have to mute the audio input yourself.");
  }
  /**
   * Send an audio buffer to the Realtime API. This is used for your client to send audio to the
   * model to respond.
   *
   * @param audio - The audio buffer to send.
   * @param options - The options for the audio buffer.
   */
  sendAudio(t, r = {}) {
    u(this, pe).status === "connected" && super.sendAudio(t, r);
  }
  /**
   * Send a cancel response event to the Realtime API. This is used to cancel an ongoing
   *  response that the model is currently generating.
   */
  _cancelResponse() {
    u(this, Ot) && (this.sendEvent({
      type: "response.cancel"
    }), k(this, Ot, !1));
  }
  /**
   * Do NOT call this method directly. Call `interrupt()` instead for proper interruption handling.
   *
   * This method is used to send the right events to the API to inform the model that the user has
   * interrupted the response. It might be overridden/extended by an extended transport layer. See
   * the `TwilioRealtimeTransportLayer` for an example.
   *
   * @param elapsedTime - The elapsed time since the response started.
   */
  _interrupt(t, r = !0) {
    if (t < 0)
      return;
    r && this._cancelResponse();
    const s = this._audioLengthMs ?? Number.POSITIVE_INFINITY, i = Math.max(0, Math.floor(Math.min(t, s)));
    this.emit("audio_interrupted"), this.sendEvent({
      type: "conversation.item.truncate",
      item_id: u(this, Ke),
      content_index: u(this, Ct),
      audio_end_ms: i
    });
  }
  /**
   * Interrupt the ongoing response. This method is triggered automatically by the client when
   * voice activity detection (VAD) is enabled (default) as well as when an output guardrail got
   * triggered.
   *
   * You can also call this method directly if you want to interrupt the conversation for example
   * based on an event in the client.
   */
  interrupt(t = !0) {
    if (!u(this, Ke) || typeof this._firstAudioTimestamp != "number")
      return;
    const r = Date.now() - this._firstAudioTimestamp;
    r >= 0 && this._interrupt(r, t), U(this, $t, gs).call(this);
  }
}
dt = new WeakMap(), kt = new WeakMap(), At = new WeakMap(), pe = new WeakMap(), Jn = new WeakMap(), Ke = new WeakMap(), Ct = new WeakMap(), Ot = new WeakMap(), Qt = new WeakMap(), Bn = new WeakMap(), $t = new WeakSet(), gs = function() {
  k(this, Ke, void 0), this._firstAudioTimestamp = void 0, this._audioLengthMs = 0, k(this, Ct, void 0);
}, _o = async function(t, r, s) {
  if (u(this, pe).websocket) {
    t();
    return;
  }
  if (!u(this, dt))
    throw new ee("API key is not set. Please call `connect()` with an API key first.");
  if (!u(this, dt).startsWith("ek_") && !u(this, Jn))
    throw new ee("Using the WebSocket connection in a browser environment requires an ephemeral client key. If you have to use a regular API key, set the `useInsecureApiKey` option to true.");
  let i = null;
  if (u(this, Qt))
    i = await u(this, Qt).call(this, {
      url: u(this, kt),
      apiKey: u(this, dt)
    });
  else {
    const a = [
      "realtime",
      // Auth
      "openai-insecure-api-key." + u(this, dt),
      // Version header
      Hd
    ];
    i = new sf(u(this, kt), a);
  }
  k(this, pe, {
    status: "connecting",
    websocket: i
  }), this.emit("connection_change", u(this, pe).status);
  const o = () => {
    k(this, pe, {
      status: "connected",
      websocket: i
    }), this.emit("connection_change", u(this, pe).status), this._onOpen(), t();
  };
  u(this, Bn) === !0 ? o() : i.addEventListener("open", o), i.addEventListener("error", (a) => {
    this._onError(a), k(this, pe, {
      status: "disconnected",
      websocket: void 0
    }), this.emit("connection_change", u(this, pe).status), r(a);
  }), i.addEventListener("message", (a) => {
    var f, d, m, g, v, S, y;
    this._onMessage(a);
    const { data: c, isGeneric: l } = $s(a);
    if (!(!c || l)) {
      if (c.type === "response.output_audio.delta") {
        k(this, Ct, c.content_index), k(this, Ke, c.item_id), this._firstAudioTimestamp === void 0 && (this._firstAudioTimestamp = Date.now(), this._audioLengthMs = 0);
        const h = lo(c.delta), b = (m = (d = (f = this._rawSessionConfig) == null ? void 0 : f.audio) == null ? void 0 : d.output) == null ? void 0 : m.format;
        if (b && typeof b == "object") {
          const N = b.type;
          if (N === "audio/pcmu" || N === "audio/pcma")
            this._audioLengthMs += h.byteLength / 8;
          else if (N === "audio/pcm") {
            const T = b.rate ?? 24e3;
            this._audioLengthMs += h.byteLength / 2 / T * 1e3;
          } else
            this._audioLengthMs += h.byteLength / 24 / 2;
        } else typeof b == "string" ? b.startsWith("g711_") ? this._audioLengthMs += h.byteLength / 8 : this._audioLengthMs += h.byteLength / 24 / 2 : this._audioLengthMs += h.byteLength / 24 / 2;
        const _ = {
          type: "audio",
          data: h,
          responseId: c.response_id
        };
        this._onAudio(_);
      } else if (c.type === "input_audio_buffer.speech_started") {
        const h = ((y = (S = (v = (g = this._rawSessionConfig) == null ? void 0 : g.audio) == null ? void 0 : v.input) == null ? void 0 : S.turn_detection) == null ? void 0 : y.interrupt_response) ?? !1;
        this.interrupt(!h);
      } else if (c.type === "response.created")
        k(this, Ot, !0);
      else if (c.type === "response.done")
        k(this, Ot, !1);
      else if (c.type === "session.created") {
        this._tracingConfig = c.session.tracing;
        const h = typeof s.tracing > "u" ? "auto" : s.tracing;
        this._updateTracingConfig(h);
      }
    }
  }), i.addEventListener("close", () => {
    k(this, pe, {
      status: "disconnected",
      websocket: void 0
    }), this.emit("connection_change", u(this, pe).status), this._onClose();
  });
};
const vo = Symbol("backgroundResult");
function ff(n) {
  return {
    [vo]: !0,
    content: n
  };
}
function af(n) {
  return typeof n == "object" && n !== null && vo in n;
}
function of(n) {
  return n.type === "function" || n.type === "hosted_tool" && n.name === "hosted_mcp";
}
function uf(n) {
  if (n.type === "function")
    return n;
  if (n.type === "hosted_tool" && n.name === "hosted_mcp") {
    const e = n.providerData.server_url && n.providerData.server_url.length > 0 ? n.providerData.server_url : void 0;
    return {
      type: "mcp",
      server_label: n.providerData.server_label,
      server_url: e,
      headers: n.providerData.headers,
      allowed_tools: n.providerData.allowed_tools,
      require_approval: n.providerData.require_approval
    };
  }
  throw new ee(`Invalid tool type: ${n}`);
}
function cf() {
  return JSON.parse(JSON.stringify(Pe));
}
var V, Z, en, q, tn, nn, zn, ie, rn, sn, Me, Gn, Et, Vn, Wn, re, gn, yn, wo, rr, bo, _s, Io, vs;
const Zs = class Zs extends Tr {
  constructor(t, r = {}) {
    super();
    R(this, re);
    x(this, "initialAgent");
    x(this, "options");
    R(this, V);
    R(this, Z);
    R(this, en);
    R(this, q);
    R(this, tn, []);
    R(this, nn);
    R(this, zn, {});
    R(this, ie, []);
    R(this, rn);
    R(this, sn, {});
    R(this, Me, !1);
    // Tracks all MCP tools fetched per server label (from mcp_list_tools results).
    R(this, Gn, /* @__PURE__ */ new Map());
    // Tracks currently available MCP tools based on the active agent's configured server_labels.
    R(this, Et, []);
    // Keeps track of the last full session config we sent (camelCase keys) so that
    // subsequent updates (e.g. during agent handoffs) preserve properties that are
    // not explicitly recalculated here (such as inputAudioFormat, outputAudioFormat,
    // modalities, speed, toolChoice, turnDetection, etc.). Without this, updating
    // the agent would drop audio format overrides (e.g. g711_ulaw) and revert to
    // transport defaults causing issues for integrations like Twilio.
    R(this, Vn, cf());
    R(this, Wn, !0);
    this.initialAgent = t, this.options = r, typeof r.transport > "u" && Vd() || r.transport === "webrtc" ? k(this, V, new rf()) : r.transport === "websocket" || typeof r.transport > "u" ? k(this, V, new yo()) : k(this, V, r.transport), k(this, Z, t), k(this, q, new Zt({
      ...r.context ?? {},
      history: u(this, ie)
    })), k(this, tn, (r.outputGuardrails ?? []).map(Xd)), k(this, nn, Yd(r.outputGuardrailSettings ?? {})), k(this, rn, r.historyStoreAudio ?? !1), k(this, Wn, r.automaticallyTriggerResponseForMcpToolCalls ?? !0);
  }
  /**
   * The transport layer used by the session.
   */
  get transport() {
    return u(this, V);
  }
  /**
   * The current agent in the session.
   */
  get currentAgent() {
    return u(this, Z);
  }
  /**
   * The current usage of the session.
   */
  get usage() {
    return u(this, q).usage;
  }
  /**
   * The current context of the session.
   */
  get context() {
    return u(this, q);
  }
  /**
   * Whether the session is muted. Might be `null` if the underlying transport layer does not
   * support muting.
   */
  get muted() {
    return u(this, V).muted;
  }
  /**
   * The history of the session.
   */
  get history() {
    return u(this, ie);
  }
  get availableMcpTools() {
    return u(this, Et);
  }
  /**
   * Compute the initial session config that the current session will use when connecting.
   *
   * This mirrors the configuration payload we send during `connect`, including dynamic values
   * such as the upstream agent instructions, tool definitions, and prompt content generated at
   * runtime. Keeping this helper exposed allows transports or orchestration layers to precompute
   * a CallAccept-compatible payload without opening a socket.
   *
   * @param overrides - Additional config overrides applied on top of the session options.
   */
  async getInitialSessionConfig(t = {}) {
    return await U(this, re, gn).call(this, this.initialAgent), U(this, re, yn).call(this, {
      ...this.options.config ?? {},
      ...t ?? {}
    });
  }
  /**
   * Convenience helper to compute the initial session config without manually instantiating and connecting a session.
   *
   * This is primarily useful for integrations that must provide the session configuration to a
   * third party (for example the SIP `calls.accept` endpoint) before the actual realtime session
   * is attached. The helper instantiates a throwaway session so all agent-driven dynamic fields
   * resolve in exactly the same way as the live session path.
   *
   * @param agent - The starting agent for the session.
   * @param options - Session options used to seed the config calculation.
   * @param overrides - Additional config overrides applied on top of the provided options.
   */
  static async computeInitialSessionConfig(t, r = {}, s = {}) {
    const i = new Zs(t, r);
    try {
      return await i.getInitialSessionConfig(s);
    } finally {
      i.close();
    }
  }
  async updateAgent(t) {
    return u(this, Z).emit("agent_handoff", u(this, q), t), this.emit("agent_handoff", u(this, q), u(this, Z), t), await U(this, re, gn).call(this, t), await u(this, V).updateSessionConfig(await U(this, re, yn).call(this)), t;
  }
  /**
   * Connect to the session. This will establish the connection to the underlying transport layer
   * and start the session.
   *
   * After connecting, the session will also emit a `history_updated` event with an empty history.
   *
   * @param options - The options for the connection.
   */
  async connect(t) {
    await U(this, re, gn).call(this, this.initialAgent), U(this, re, Io).call(this), await u(this, V).connect({
      apiKey: t.apiKey ?? this.options.apiKey,
      model: this.options.model,
      url: t.url,
      callId: t.callId,
      initialSessionConfig: await U(this, re, yn).call(this, this.options.config)
    }), k(this, ie, []), this.emit("history_updated", u(this, ie));
  }
  /**
   * Update the history of the session.
   * @param newHistory - The new history to set.
   */
  updateHistory(t) {
    let r;
    typeof t == "function" ? r = t(u(this, ie)) : r = t, u(this, V).resetHistory(u(this, ie), r);
  }
  /**
   * Send a message to the session.
   * @param message - The message to send.
   * @param otherEventData - Additional event data to send.
   */
  sendMessage(t, r = {}) {
    u(this, V).sendMessage(t, r);
  }
  /**
   * Add image to the session
   * @param image - The image to add.
   */
  addImage(t, { triggerResponse: r = !0 } = {}) {
    u(this, V).addImage(t, { triggerResponse: r });
  }
  /**
   * Mute the session.
   * @param muted - Whether to mute the session.
   */
  mute(t) {
    u(this, V).mute(t);
  }
  /**
   * Disconnect from the session.
   */
  close() {
    k(this, sn, {}), u(this, V).close();
  }
  /**
   * Send audio to the session.
   * @param audio - The audio to send.
   * @param options - Additional options.
   * @param options.commit - Whether to finish the turn with this audio.
   */
  sendAudio(t, r = {}) {
    u(this, V).sendAudio(t, r);
  }
  /**
   * Interrupt the session artificially for example if you want to build a "stop talking"
   * button.
   */
  interrupt() {
    u(this, V).interrupt();
  }
  /**
   * Approve a tool call. This will also trigger the tool call to the agent.
   * @param approvalItem - The approval item to approve.
   * @param options - Additional options.
   * @param options.alwaysApprove - Whether to always approve the tool call.
   */
  async approve(t, r = { alwaysApprove: !1 }) {
    u(this, q).approveTool(t, r);
    const s = t.toolName ?? t.rawItem.name, i = u(this, Z).tools.find((o) => o.name === s);
    if (i && i.type === "function" && t.rawItem.type === "function_call")
      await U(this, re, rr).call(this, t.rawItem, i);
    else if (t.rawItem.type === "hosted_tool_call") {
      r.alwaysApprove && Te.warn("Always approving MCP tools is not supported. Use the allowed tools configuration instead.");
      const o = Wi(t);
      u(this, V).sendMcpResponse(o, !0);
    } else
      throw new we(`Tool ${s ?? "unknown"} not found`);
  }
  /**
   * Reject a tool call. This will also trigger the tool call to the agent.
   * @param approvalItem - The approval item to reject.
   * @param options - Additional options.
   * @param options.alwaysReject - Whether to always reject the tool call.
   */
  async reject(t, r = { alwaysReject: !1 }) {
    u(this, q).rejectTool(t, r);
    const s = t.toolName ?? t.rawItem.name, i = u(this, Z).tools.find((o) => o.name === s);
    if (i && i.type === "function" && t.rawItem.type === "function_call")
      await U(this, re, rr).call(this, t.rawItem, i);
    else if (t.rawItem.type === "hosted_tool_call") {
      r.alwaysReject && Te.warn("Always rejecting MCP tools is not supported. Use the allowed tools configuration instead.");
      const o = Wi(t);
      u(this, V).sendMcpResponse(o, !1);
    } else
      throw new we(`Tool ${s ?? "unknown"} not found`);
  }
};
V = new WeakMap(), Z = new WeakMap(), en = new WeakMap(), q = new WeakMap(), tn = new WeakMap(), nn = new WeakMap(), zn = new WeakMap(), ie = new WeakMap(), rn = new WeakMap(), sn = new WeakMap(), Me = new WeakMap(), Gn = new WeakMap(), Et = new WeakMap(), Vn = new WeakMap(), Wn = new WeakMap(), re = new WeakSet(), gn = async function(t) {
  k(this, Z, t);
  const r = await u(this, Z).getEnabledHandoffs(u(this, q)), s = r.map((c) => c.getHandoffAsFunctionTool()), i = (await u(this, Z).getAllTools(u(this, q))).filter(of).map(uf), o = typeof u(this, Z).tools < "u" || typeof u(this, Z).mcpServers < "u", a = r.length > 0;
  k(this, en, o || a ? [...i, ...s] : void 0), U(this, re, vs).call(this);
}, yn = async function(t = {}) {
  const r = t ?? {}, s = this.options.config ?? {}, i = await u(this, Z).getSystemPrompt(u(this, q)), o = (g) => {
    var S;
    const v = g.audio;
    return (S = v == null ? void 0 : v.output) == null ? void 0 : S.voice;
  }, a = this.options.tracingDisabled ? null : this.options.workflowName ? {
    workflow_name: this.options.workflowName
  } : "auto";
  a !== null && a !== "auto" ? (this.options.groupId && (a.group_id = this.options.groupId), this.options.traceMetadata && (a.metadata = this.options.traceMetadata)) : (this.options.groupId || this.options.traceMetadata) && Te.warn("In order to set traceMetadata or a groupId you need to specify a workflowName.");
  const c = o(r) ?? o(s), l = r.voice ?? s.voice, f = typeof c < "u" ? c : typeof l < "u" ? l : u(this, Z).voice, m = {
    ...{
      ...u(this, Vn) ?? {},
      ...s,
      ...r
    },
    instructions: i,
    voice: f,
    model: this.options.model,
    tools: u(this, en),
    tracing: a,
    prompt: typeof u(this, Z).prompt == "function" ? await u(this, Z).prompt(u(this, q), u(this, Z)) : u(this, Z).prompt
  };
  return k(this, Vn, m), m;
}, wo = async function(t, r) {
  const s = await r.onInvokeHandoff(u(this, q), t.arguments);
  u(this, Z).emit("agent_handoff", u(this, q), s), this.emit("agent_handoff", u(this, q), u(this, Z), s), await U(this, re, gn).call(this, s), await u(this, V).updateSessionConfig(await U(this, re, yn).call(this));
  const i = ka(s);
  return u(this, V).sendFunctionCallOutput(t, i, !0), s;
}, rr = async function(t, r) {
  u(this, q).context.history = JSON.parse(JSON.stringify(u(this, ie)));
  let s = t.arguments;
  if (r.parameters && (jt(r.parameters) ? s = r.parameters.parse(s) : s = JSON.parse(s)), await r.needsApproval(u(this, q), s, t.callId)) {
    const c = this.context.isToolApproved({
      toolName: r.name,
      callId: t.callId
    });
    if (c === !1) {
      this.emit("agent_tool_start", u(this, q), u(this, Z), r, {
        toolCall: t
      }), u(this, Z).emit("agent_tool_start", u(this, q), r, {
        toolCall: t
      });
      const l = "Tool execution was not approved.";
      u(this, V).sendFunctionCallOutput(t, l, !0), this.emit("agent_tool_end", u(this, q), u(this, Z), r, l, { toolCall: t }), u(this, Z).emit("agent_tool_end", u(this, q), r, l, {
        toolCall: t
      });
      return;
    } else if (typeof c > "u") {
      this.emit("tool_approval_requested", u(this, q), u(this, Z), {
        type: "function_approval",
        tool: r,
        approvalItem: new ye(t, u(this, Z))
      });
      return;
    }
  }
  this.emit("agent_tool_start", u(this, q), u(this, Z), r, {
    toolCall: t
  }), u(this, Z).emit("agent_tool_start", u(this, q), r, {
    toolCall: t
  }), u(this, q).context.history = JSON.parse(JSON.stringify(u(this, ie)));
  const o = await r.invoke(u(this, q), t.arguments, {
    toolCall: t
  });
  let a;
  af(o) ? (a = ft(o.content), u(this, V).sendFunctionCallOutput(t, a, !1)) : (a = ft(o), u(this, V).sendFunctionCallOutput(t, a, !0)), this.emit("agent_tool_end", u(this, q), u(this, Z), r, a, { toolCall: t }), u(this, Z).emit("agent_tool_end", u(this, q), r, a, { toolCall: t });
}, bo = async function(t) {
  const r = await u(this, Z).getEnabledHandoffs(u(this, q)), s = new Map(r.map((c) => [c.toolName, c])), i = await u(this, Z).getAllTools(u(this, q)), o = new Map(i.map((c) => [c.name, c])), a = s.get(t.name);
  if (a)
    await U(this, re, wo).call(this, t, a);
  else {
    const c = o.get(t.name);
    if (c && c.type === "function")
      await U(this, re, rr).call(this, t, c);
    else
      throw new we(`Tool ${t.name} not found`);
  }
}, _s = async function(t, r, s) {
  if (u(this, tn).length === 0)
    return;
  const i = {
    agent: u(this, Z),
    agentOutput: t,
    context: u(this, q)
  }, a = (await Promise.all(u(this, tn).map((c) => c.run(i)))).find((c) => c.output.tripwireTriggered);
  if (a) {
    if (u(this, sn)[r])
      return;
    u(this, sn)[r] = !0;
    const c = new Qr(`Output guardrail triggered: ${JSON.stringify(a.output.outputInfo)}`, a);
    this.emit("guardrail_tripped", u(this, q), u(this, Z), c, {
      itemId: s
    }), this.interrupt();
    const l = Qd(a);
    this.sendMessage(l);
    return;
  }
}, Io = function() {
  u(this, V).on("*", (s) => {
    if (this.emit("transport_event", s), s.type === "conversation.item.input_audio_transcription.completed")
      try {
        const i = s;
        k(this, ie, Vi(u(this, ie), i, u(this, rn))), u(this, q).context.history = u(this, ie), this.emit("history_updated", u(this, ie));
      } catch (i) {
        this.emit("error", {
          type: "error",
          error: i
        });
      }
  }), u(this, V).on("mcp_tools_listed", ({ serverLabel: s, tools: i }) => {
    try {
      u(this, Gn).set(s, i ?? []), U(this, re, vs).call(this);
    } catch (o) {
      this.emit("error", { type: "error", error: o });
    }
  }), u(this, V).on("audio", (s) => {
    u(this, Me) || (k(this, Me, !0), this.emit("audio_start", u(this, q), u(this, Z))), this.emit("audio", s);
  }), u(this, V).on("turn_started", () => {
    k(this, Me, !1), this.emit("agent_start", u(this, q), u(this, Z)), u(this, Z).emit("agent_start", u(this, q), u(this, Z));
  }), u(this, V).on("turn_done", (s) => {
    const i = s.response.output[s.response.output.length - 1], o = fo(i) ?? "", a = (i == null ? void 0 : i.id) ?? "";
    this.emit("agent_end", u(this, q), u(this, Z), o), u(this, Z).emit("agent_end", u(this, q), o), U(this, re, _s).call(this, o, s.response.id, a);
  }), u(this, V).on("audio_done", () => {
    u(this, Me) && k(this, Me, !1), this.emit("audio_stopped", u(this, q), u(this, Z));
  });
  let t = 0, r;
  u(this, V).on("audio_transcript_delta", (s) => {
    try {
      const i = s.delta, o = s.itemId, a = s.responseId;
      r !== o && (r = o, t = 0);
      const l = (u(this, zn)[o] ?? "") + i;
      if (u(this, zn)[o] = l, u(this, nn).debounceTextLength < 0)
        return;
      const f = Math.floor(l.length / u(this, nn).debounceTextLength);
      f > t && (t = f, U(this, re, _s).call(this, l, a, o));
    } catch (i) {
      this.emit("error", {
        type: "error",
        error: i
      });
    }
  }), u(this, V).on("item_update", (s) => {
    try {
      const i = !u(this, ie).some((o) => o.itemId === s.itemId);
      if (k(this, ie, Vi(u(this, ie), s, u(this, rn))), u(this, q).context.history = u(this, ie), i) {
        const o = u(this, ie).find((a) => a.itemId === s.itemId);
        o && this.emit("history_added", o);
      }
      this.emit("history_updated", u(this, ie));
    } catch (i) {
      this.emit("error", {
        type: "error",
        error: i
      });
    }
  }), u(this, V).on("item_deleted", (s) => {
    try {
      k(this, ie, u(this, ie).filter((i) => i.itemId !== s.itemId)), u(this, q).context.history = u(this, ie), this.emit("history_updated", u(this, ie));
    } catch (i) {
      this.emit("error", {
        type: "error",
        error: i
      });
    }
  }), u(this, V).on("function_call", async (s) => {
    try {
      await U(this, re, bo).call(this, s);
    } catch (i) {
      Te.error("Error handling function call", i), this.emit("error", {
        type: "error",
        error: i
      });
    }
  }), u(this, V).on("usage_update", (s) => {
    u(this, q).usage.add(s);
  }), u(this, V).on("audio_interrupted", () => {
    u(this, Me) && k(this, Me, !1), this.emit("audio_interrupted", u(this, q), u(this, Z));
  }), u(this, V).on("error", (s) => {
    this.emit("error", s);
  }), u(this, V).on("mcp_tool_call_completed", (s) => {
    this.emit("mcp_tool_call_completed", u(this, q), u(this, Z), s), u(this, Wn) && u(this, V).sendEvent({
      type: "response.create"
    });
  }), u(this, V).on("mcp_approval_request", (s) => {
    this.emit("tool_approval_requested", u(this, q), u(this, Z), {
      type: "mcp_approval_request",
      approvalItem: Kd(u(this, Z), s)
    });
  });
}, /**
 * Recomputes the currently available MCP tools based on the current agent's active
 * MCP server configurations and the cached per-server tool listings. Emits
 * `mcp_tools_changed` if the set changed.
 */
vs = function() {
  var c;
  const t = (c = u(this, en)) == null ? void 0 : c.filter((l) => l.type === "mcp"), r = (l) => {
    const f = l.allowed_tools;
    if (f) {
      if (Array.isArray(f))
        return f;
      if (f && Array.isArray(f.tool_names))
        return f.tool_names;
    }
  }, s = /* @__PURE__ */ new Map();
  for (const l of t) {
    const f = u(this, Gn).get(l.server_label) ?? [], d = r(l);
    for (const m of f)
      d && !d.includes(m.name) || s.has(m.name) || s.set(m.name, m);
  }
  const i = Array.from(s.values()), o = u(this, Et);
  (o.length !== i.length || JSON.stringify(o.map((l) => l.name).sort()) !== JSON.stringify(i.map((l) => l.name).sort())) && (k(this, Et, i), this.emit("mcp_tools_changed", u(this, Et)));
};
let ys = Zs;
class xo extends yo {
  constructor(e = {}) {
    super(e);
  }
  /**
   * Build the initial session payload for a SIP-attached session, matching the config that a RealtimeSession would send on connect.
   *
   * This enables SIP deployments to accept an incoming call with a payload that already reflects
   * the active agent's instructions, tools, prompt, and tracing metadata without duplicating the
   * session logic outside of the SDK. The returned object structurally matches the REST
   * `CallAcceptParams` interface, so it can be forwarded directly to
   * `openai.realtime.calls.accept(...)`.
   *
   * @param agent - The starting agent used to seed the session instructions, tools, and prompt.
   * @param options - Optional session options that mirror the ones passed to the RealtimeSession constructor.
   * @param overrides - Additional config overrides applied on top of the session options.
   */
  static async buildInitialConfig(e, t = {}, r = {}) {
    const s = await ys.computeInitialSessionConfig(e, t, r);
    return new xo().buildSessionPayload(s);
  }
  sendAudio(e, t = {}) {
    throw new Error("OpenAIRealtimeSIP does not support sending audio buffers; audio is handled by the SIP call.");
  }
  async connect(e) {
    if (!e.callId)
      throw new ee("OpenAIRealtimeSIP requires `callId` in the connect options.");
    await super.connect(e);
  }
}
const hf = {
  base64ToArrayBuffer: lo,
  arrayBufferToBase64: po,
  getLastTextFromAudioOutputMessage: fo
};
export {
  nf as DEFAULT_OPENAI_REALTIME_MODEL,
  Pe as DEFAULT_OPENAI_REALTIME_SESSION_CONFIG,
  we as ModelBehaviorError,
  br as OpenAIRealtimeBase,
  xo as OpenAIRealtimeSIP,
  rf as OpenAIRealtimeWebRTC,
  yo as OpenAIRealtimeWebSocket,
  Qr as OutputGuardrailTripwireTriggered,
  pf as RealtimeAgent,
  ys as RealtimeSession,
  ee as UserError,
  ff as backgroundResult,
  af as isBackgroundResult,
  rs as tool,
  hf as utils
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoib3BlbmFpLXJlYWx0aW1lLWFnZW50cy5tanMiLCJzb3VyY2VzIjpbIi4uL21ldGFkYXRhLm1qcyIsIi4uLy4uLy4uL2FnZW50cy1jb3JlL2Rpc3QvdXRpbHMvc2FmZUV4ZWN1dGUubWpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3pvZC92NC9jb3JlL3V0aWwuanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvem9kL3Y0L2NvcmUvcmVnaXN0cmllcy5qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy96b2QvdjQvY29yZS90by1qc29uLXNjaGVtYS5qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9vcGVuYWkvbGliL3BhcnNlci5tanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvb3BlbmFpL192ZW5kb3Ivem9kLXRvLWpzb24tc2NoZW1hL09wdGlvbnMubWpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL29wZW5haS9fdmVuZG9yL3pvZC10by1qc29uLXNjaGVtYS91dGlsLm1qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9vcGVuYWkvX3ZlbmRvci96b2QtdG8tanNvbi1zY2hlbWEvUmVmcy5tanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvb3BlbmFpL192ZW5kb3Ivem9kLXRvLWpzb24tc2NoZW1hL2Vycm9yTWVzc2FnZXMubWpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3pvZC92My9oZWxwZXJzL3V0aWwuanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvem9kL3YzL1pvZEVycm9yLmpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3pvZC92My9sb2NhbGVzL2VuLmpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3pvZC92My9lcnJvcnMuanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvem9kL3YzL2hlbHBlcnMvcGFyc2VVdGlsLmpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3pvZC92My9oZWxwZXJzL2Vycm9yVXRpbC5qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy96b2QvdjMvdHlwZXMuanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvb3BlbmFpL192ZW5kb3Ivem9kLXRvLWpzb24tc2NoZW1hL3BhcnNlcnMvYW55Lm1qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9vcGVuYWkvX3ZlbmRvci96b2QtdG8tanNvbi1zY2hlbWEvcGFyc2Vycy9hcnJheS5tanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvb3BlbmFpL192ZW5kb3Ivem9kLXRvLWpzb24tc2NoZW1hL3BhcnNlcnMvYmlnaW50Lm1qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9vcGVuYWkvX3ZlbmRvci96b2QtdG8tanNvbi1zY2hlbWEvcGFyc2Vycy9ib29sZWFuLm1qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9vcGVuYWkvX3ZlbmRvci96b2QtdG8tanNvbi1zY2hlbWEvcGFyc2Vycy9icmFuZGVkLm1qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9vcGVuYWkvX3ZlbmRvci96b2QtdG8tanNvbi1zY2hlbWEvcGFyc2Vycy9jYXRjaC5tanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvb3BlbmFpL192ZW5kb3Ivem9kLXRvLWpzb24tc2NoZW1hL3BhcnNlcnMvZGF0ZS5tanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvb3BlbmFpL192ZW5kb3Ivem9kLXRvLWpzb24tc2NoZW1hL3BhcnNlcnMvZGVmYXVsdC5tanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvb3BlbmFpL192ZW5kb3Ivem9kLXRvLWpzb24tc2NoZW1hL3BhcnNlcnMvZWZmZWN0cy5tanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvb3BlbmFpL192ZW5kb3Ivem9kLXRvLWpzb24tc2NoZW1hL3BhcnNlcnMvZW51bS5tanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvb3BlbmFpL192ZW5kb3Ivem9kLXRvLWpzb24tc2NoZW1hL3BhcnNlcnMvaW50ZXJzZWN0aW9uLm1qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9vcGVuYWkvX3ZlbmRvci96b2QtdG8tanNvbi1zY2hlbWEvcGFyc2Vycy9saXRlcmFsLm1qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9vcGVuYWkvX3ZlbmRvci96b2QtdG8tanNvbi1zY2hlbWEvcGFyc2Vycy9zdHJpbmcubWpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL29wZW5haS9fdmVuZG9yL3pvZC10by1qc29uLXNjaGVtYS9wYXJzZXJzL3JlY29yZC5tanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvb3BlbmFpL192ZW5kb3Ivem9kLXRvLWpzb24tc2NoZW1hL3BhcnNlcnMvbWFwLm1qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9vcGVuYWkvX3ZlbmRvci96b2QtdG8tanNvbi1zY2hlbWEvcGFyc2Vycy9uYXRpdmVFbnVtLm1qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9vcGVuYWkvX3ZlbmRvci96b2QtdG8tanNvbi1zY2hlbWEvcGFyc2Vycy9uZXZlci5tanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvb3BlbmFpL192ZW5kb3Ivem9kLXRvLWpzb24tc2NoZW1hL3BhcnNlcnMvbnVsbC5tanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvb3BlbmFpL192ZW5kb3Ivem9kLXRvLWpzb24tc2NoZW1hL3BhcnNlcnMvdW5pb24ubWpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL29wZW5haS9fdmVuZG9yL3pvZC10by1qc29uLXNjaGVtYS9wYXJzZXJzL251bGxhYmxlLm1qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9vcGVuYWkvX3ZlbmRvci96b2QtdG8tanNvbi1zY2hlbWEvcGFyc2Vycy9udW1iZXIubWpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL29wZW5haS9fdmVuZG9yL3pvZC10by1qc29uLXNjaGVtYS9wYXJzZXJzL29iamVjdC5tanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvb3BlbmFpL192ZW5kb3Ivem9kLXRvLWpzb24tc2NoZW1hL3BhcnNlcnMvb3B0aW9uYWwubWpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL29wZW5haS9fdmVuZG9yL3pvZC10by1qc29uLXNjaGVtYS9wYXJzZXJzL3BpcGVsaW5lLm1qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9vcGVuYWkvX3ZlbmRvci96b2QtdG8tanNvbi1zY2hlbWEvcGFyc2Vycy9wcm9taXNlLm1qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9vcGVuYWkvX3ZlbmRvci96b2QtdG8tanNvbi1zY2hlbWEvcGFyc2Vycy9zZXQubWpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL29wZW5haS9fdmVuZG9yL3pvZC10by1qc29uLXNjaGVtYS9wYXJzZXJzL3R1cGxlLm1qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9vcGVuYWkvX3ZlbmRvci96b2QtdG8tanNvbi1zY2hlbWEvcGFyc2Vycy91bmRlZmluZWQubWpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL29wZW5haS9fdmVuZG9yL3pvZC10by1qc29uLXNjaGVtYS9wYXJzZXJzL3Vua25vd24ubWpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL29wZW5haS9fdmVuZG9yL3pvZC10by1qc29uLXNjaGVtYS9wYXJzZXJzL3JlYWRvbmx5Lm1qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9vcGVuYWkvX3ZlbmRvci96b2QtdG8tanNvbi1zY2hlbWEvcGFyc2VEZWYubWpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL29wZW5haS9fdmVuZG9yL3pvZC10by1qc29uLXNjaGVtYS96b2RUb0pzb25TY2hlbWEubWpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL29wZW5haS9saWIvUmVzcG9uc2VzUGFyc2VyLm1qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9vcGVuYWkvbGliL3RyYW5zZm9ybS5tanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvb3BlbmFpL2hlbHBlcnMvem9kLm1qcyIsIi4uLy4uLy4uL2FnZW50cy1jb3JlL2Rpc3QvZXJyb3JzLm1qcyIsIi4uLy4uLy4uL2FnZW50cy1jb3JlL2Rpc3QvdXRpbHMvem9kQ29tcGF0Lm1qcyIsIi4uLy4uLy4uL2FnZW50cy1jb3JlL2Rpc3QvdXRpbHMvdHlwZUd1YXJkcy5tanMiLCIuLi8uLi8uLi9hZ2VudHMtY29yZS9kaXN0L3V0aWxzL3pvZEpzb25TY2hlbWFDb21wYXQubWpzIiwiLi4vLi4vLi4vYWdlbnRzLWNvcmUvZGlzdC91dGlscy90b29scy5tanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvbXMvaW5kZXguanMiLCIuLi8uLi8uLi9hZ2VudHMtY29yZS9ub2RlX21vZHVsZXMvZGVidWcvc3JjL2NvbW1vbi5qcyIsIi4uLy4uLy4uL2FnZW50cy1jb3JlL25vZGVfbW9kdWxlcy9kZWJ1Zy9zcmMvYnJvd3Nlci5qcyIsIi4uLy4uLy4uL2FnZW50cy1jb3JlL2Rpc3QvY29uZmlnLm1qcyIsIi4uLy4uLy4uL2FnZW50cy1jb3JlL2Rpc3QvbG9nZ2VyLm1qcyIsIi4uLy4uLy4uL2FnZW50cy1jb3JlL2Rpc3QvdXRpbHMvc21hcnRTdHJpbmcubWpzIiwiLi4vLi4vLi4vYWdlbnRzLWNvcmUvZGlzdC90b29sLm1qcyIsIi4uLy4uLy4uL2FnZW50cy1jb3JlL2Rpc3QvbWNwLm1qcyIsIi4uLy4uLy4uL2FnZW50cy1jb3JlL2Rpc3Qvc2hpbXMvc2hpbXMtYnJvd3Nlci5tanMiLCIuLi8uLi8uLi9hZ2VudHMtY29yZS9kaXN0L2xpZmVjeWNsZS5tanMiLCIuLi8uLi8uLi9hZ2VudHMtY29yZS9kaXN0L2RlZmF1bHRNb2RlbC5tanMiLCIuLi8uLi8uLi9hZ2VudHMtY29yZS9kaXN0L2hhbmRvZmYubWpzIiwiLi4vLi4vLi4vYWdlbnRzLWNvcmUvZGlzdC91dGlscy9tZXNzYWdlcy5tanMiLCIuLi8uLi8uLi9hZ2VudHMtY29yZS9kaXN0L2FnZW50Lm1qcyIsIi4uLy4uLy4uL2FnZW50cy1jb3JlL2Rpc3QvZ3VhcmRyYWlsLm1qcyIsIi4uLy4uLy4uL2FnZW50cy1jb3JlL2Rpc3QvcHJvdmlkZXJzLm1qcyIsIi4uLy4uLy4uL2FnZW50cy1jb3JlL2Rpc3QvdHlwZXMvcHJvdG9jb2wubWpzIiwiLi4vLi4vLi4vYWdlbnRzLWNvcmUvZGlzdC91c2FnZS5tanMiLCIuLi8uLi8uLi9hZ2VudHMtY29yZS9kaXN0L3J1bkNvbnRleHQubWpzIiwiLi4vLi4vLi4vYWdlbnRzLWNvcmUvZGlzdC91dGlscy9zZXJpYWxpemUubWpzIiwiLi4vLi4vLi4vYWdlbnRzLWNvcmUvZGlzdC9pdGVtcy5tanMiLCIuLi8uLi8uLi9hZ2VudHMtY29yZS9kaXN0L3RyYWNpbmcvY3JlYXRlU3BhbnMubWpzIiwiLi4vLi4vLi4vYWdlbnRzLWNvcmUvZGlzdC91dGlscy9iYXNlNjQubWpzIiwiLi4vLi4vLi4vYWdlbnRzLWNvcmUvZGlzdC9ldmVudHMubWpzIiwiLi4vLi4vLi4vYWdlbnRzLWNvcmUvZGlzdC9tZW1vcnkvc2Vzc2lvbi5tanMiLCIuLi8uLi8uLi9hZ2VudHMtY29yZS9kaXN0L3J1bkltcGxlbWVudGF0aW9uLm1qcyIsIi4uLy4uLy4uL2FnZW50cy1jb3JlL2Rpc3QvcnVuU3RhdGUubWpzIiwiLi4vLi4vLi4vYWdlbnRzLWNvcmUvZGlzdC9ydW4ubWpzIiwiLi4vLi4vLi4vYWdlbnRzLWNvcmUvZGlzdC9yZXN1bHQubWpzIiwiLi4vLi4vLi4vYWdlbnRzLWNvcmUvZGlzdC90cmFjaW5nL2NvbnRleHQubWpzIiwiLi4vLi4vLi4vYWdlbnRzLWNvcmUvZGlzdC90cmFjaW5nL3Byb2Nlc3Nvci5tanMiLCIuLi8uLi8uLi9hZ2VudHMtY29yZS9kaXN0L3RyYWNpbmcvdXRpbHMubWpzIiwiLi4vLi4vLi4vYWdlbnRzLWNvcmUvZGlzdC90cmFjaW5nL3NwYW5zLm1qcyIsIi4uLy4uLy4uL2FnZW50cy1jb3JlL2Rpc3QvdHJhY2luZy90cmFjZXMubWpzIiwiLi4vLi4vLi4vYWdlbnRzLWNvcmUvZGlzdC90cmFjaW5nL3Byb3ZpZGVyLm1qcyIsIi4uLy4uLy4uL2FnZW50cy1jb3JlL2Rpc3QvdHJhY2luZy9pbmRleC5tanMiLCIuLi8uLi8uLi9hZ2VudHMtY29yZS9kaXN0L2luZGV4Lm1qcyIsIi4uL3V0aWxzLm1qcyIsIi4uL3JlYWx0aW1lQWdlbnQubWpzIiwiLi4vZ3VhcmRyYWlsLm1qcyIsIi4uL2NsaWVudE1lc3NhZ2VzLm1qcyIsIi4uL2l0ZW1zLm1qcyIsIi4uL2xvZ2dlci5tanMiLCIuLi9vcGVuYWlSZWFsdGltZUV2ZW50cy5tanMiLCIuLi9vcGVuYWlSZWFsdGltZUJhc2UubWpzIiwiLi4vb3BlbmFpUmVhbHRpbWVXZWJSdGMubWpzIiwiLi4vc2hpbXMvc2hpbXMtYnJvd3Nlci5tanMiLCIuLi9vcGVuYWlSZWFsdGltZVdlYnNvY2tldC5tanMiLCIuLi90b29sLm1qcyIsIi4uL3JlYWx0aW1lU2Vzc2lvbi5tanMiLCIuLi9vcGVuYWlSZWFsdGltZVNpcC5tanMiLCIuLi9pbmRleC5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gVGhpcyBmaWxlIGlzIGF1dG9tYXRpY2FsbHkgZ2VuZXJhdGVkXG5leHBvcnQgY29uc3QgTUVUQURBVEEgPSB7XG4gICAgXCJuYW1lXCI6IFwiQG9wZW5haS9hZ2VudHMtcmVhbHRpbWVcIixcbiAgICBcInZlcnNpb25cIjogXCIwLjMuN1wiLFxuICAgIFwidmVyc2lvbnNcIjoge1xuICAgICAgICBcIkBvcGVuYWkvYWdlbnRzLXJlYWx0aW1lXCI6IFwiMC4zLjdcIixcbiAgICAgICAgXCJAb3BlbmFpL2FnZW50cy1jb3JlXCI6IFwid29ya3NwYWNlOipcIlxuICAgIH1cbn07XG5leHBvcnQgZGVmYXVsdCBNRVRBREFUQTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW1ldGFkYXRhLm1qcy5tYXAiLCJleHBvcnQgYXN5bmMgZnVuY3Rpb24gc2FmZUV4ZWN1dGUoZm4pIHtcbiAgICB0cnkge1xuICAgICAgICByZXR1cm4gW251bGwsIGF3YWl0IGZuKCldO1xuICAgIH1cbiAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgcmV0dXJuIFtlcnJvciwgbnVsbF07XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c2FmZUV4ZWN1dGUubWpzLm1hcCIsIi8vIGZ1bmN0aW9uc1xuZXhwb3J0IGZ1bmN0aW9uIGFzc2VydEVxdWFsKHZhbCkge1xuICAgIHJldHVybiB2YWw7XG59XG5leHBvcnQgZnVuY3Rpb24gYXNzZXJ0Tm90RXF1YWwodmFsKSB7XG4gICAgcmV0dXJuIHZhbDtcbn1cbmV4cG9ydCBmdW5jdGlvbiBhc3NlcnRJcyhfYXJnKSB7IH1cbmV4cG9ydCBmdW5jdGlvbiBhc3NlcnROZXZlcihfeCkge1xuICAgIHRocm93IG5ldyBFcnJvcigpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGFzc2VydChfKSB7IH1cbmV4cG9ydCBmdW5jdGlvbiBnZXRFbnVtVmFsdWVzKGVudHJpZXMpIHtcbiAgICBjb25zdCBudW1lcmljVmFsdWVzID0gT2JqZWN0LnZhbHVlcyhlbnRyaWVzKS5maWx0ZXIoKHYpID0+IHR5cGVvZiB2ID09PSBcIm51bWJlclwiKTtcbiAgICBjb25zdCB2YWx1ZXMgPSBPYmplY3QuZW50cmllcyhlbnRyaWVzKVxuICAgICAgICAuZmlsdGVyKChbaywgX10pID0+IG51bWVyaWNWYWx1ZXMuaW5kZXhPZigraykgPT09IC0xKVxuICAgICAgICAubWFwKChbXywgdl0pID0+IHYpO1xuICAgIHJldHVybiB2YWx1ZXM7XG59XG5leHBvcnQgZnVuY3Rpb24gam9pblZhbHVlcyhhcnJheSwgc2VwYXJhdG9yID0gXCJ8XCIpIHtcbiAgICByZXR1cm4gYXJyYXkubWFwKCh2YWwpID0+IHN0cmluZ2lmeVByaW1pdGl2ZSh2YWwpKS5qb2luKHNlcGFyYXRvcik7XG59XG5leHBvcnQgZnVuY3Rpb24ganNvblN0cmluZ2lmeVJlcGxhY2VyKF8sIHZhbHVlKSB7XG4gICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gXCJiaWdpbnRcIilcbiAgICAgICAgcmV0dXJuIHZhbHVlLnRvU3RyaW5nKCk7XG4gICAgcmV0dXJuIHZhbHVlO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGNhY2hlZChnZXR0ZXIpIHtcbiAgICBjb25zdCBzZXQgPSBmYWxzZTtcbiAgICByZXR1cm4ge1xuICAgICAgICBnZXQgdmFsdWUoKSB7XG4gICAgICAgICAgICBpZiAoIXNldCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gZ2V0dGVyKCk7XG4gICAgICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwidmFsdWVcIiwgeyB2YWx1ZSB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJjYWNoZWQgdmFsdWUgYWxyZWFkeSBzZXRcIik7XG4gICAgICAgIH0sXG4gICAgfTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBudWxsaXNoKGlucHV0KSB7XG4gICAgcmV0dXJuIGlucHV0ID09PSBudWxsIHx8IGlucHV0ID09PSB1bmRlZmluZWQ7XG59XG5leHBvcnQgZnVuY3Rpb24gY2xlYW5SZWdleChzb3VyY2UpIHtcbiAgICBjb25zdCBzdGFydCA9IHNvdXJjZS5zdGFydHNXaXRoKFwiXlwiKSA/IDEgOiAwO1xuICAgIGNvbnN0IGVuZCA9IHNvdXJjZS5lbmRzV2l0aChcIiRcIikgPyBzb3VyY2UubGVuZ3RoIC0gMSA6IHNvdXJjZS5sZW5ndGg7XG4gICAgcmV0dXJuIHNvdXJjZS5zbGljZShzdGFydCwgZW5kKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBmbG9hdFNhZmVSZW1haW5kZXIodmFsLCBzdGVwKSB7XG4gICAgY29uc3QgdmFsRGVjQ291bnQgPSAodmFsLnRvU3RyaW5nKCkuc3BsaXQoXCIuXCIpWzFdIHx8IFwiXCIpLmxlbmd0aDtcbiAgICBjb25zdCBzdGVwRGVjQ291bnQgPSAoc3RlcC50b1N0cmluZygpLnNwbGl0KFwiLlwiKVsxXSB8fCBcIlwiKS5sZW5ndGg7XG4gICAgY29uc3QgZGVjQ291bnQgPSB2YWxEZWNDb3VudCA+IHN0ZXBEZWNDb3VudCA/IHZhbERlY0NvdW50IDogc3RlcERlY0NvdW50O1xuICAgIGNvbnN0IHZhbEludCA9IE51bWJlci5wYXJzZUludCh2YWwudG9GaXhlZChkZWNDb3VudCkucmVwbGFjZShcIi5cIiwgXCJcIikpO1xuICAgIGNvbnN0IHN0ZXBJbnQgPSBOdW1iZXIucGFyc2VJbnQoc3RlcC50b0ZpeGVkKGRlY0NvdW50KS5yZXBsYWNlKFwiLlwiLCBcIlwiKSk7XG4gICAgcmV0dXJuICh2YWxJbnQgJSBzdGVwSW50KSAvIDEwICoqIGRlY0NvdW50O1xufVxuZXhwb3J0IGZ1bmN0aW9uIGRlZmluZUxhenkob2JqZWN0LCBrZXksIGdldHRlcikge1xuICAgIGNvbnN0IHNldCA9IGZhbHNlO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmplY3QsIGtleSwge1xuICAgICAgICBnZXQoKSB7XG4gICAgICAgICAgICBpZiAoIXNldCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gZ2V0dGVyKCk7XG4gICAgICAgICAgICAgICAgb2JqZWN0W2tleV0gPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJjYWNoZWQgdmFsdWUgYWxyZWFkeSBzZXRcIik7XG4gICAgICAgIH0sXG4gICAgICAgIHNldCh2KSB7XG4gICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqZWN0LCBrZXksIHtcbiAgICAgICAgICAgICAgICB2YWx1ZTogdixcbiAgICAgICAgICAgICAgICAvLyBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIC8vIG9iamVjdFtrZXldID0gdjtcbiAgICAgICAgfSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgIH0pO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGFzc2lnblByb3AodGFyZ2V0LCBwcm9wLCB2YWx1ZSkge1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIHByb3AsIHtcbiAgICAgICAgdmFsdWUsXG4gICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgfSk7XG59XG5leHBvcnQgZnVuY3Rpb24gZ2V0RWxlbWVudEF0UGF0aChvYmosIHBhdGgpIHtcbiAgICBpZiAoIXBhdGgpXG4gICAgICAgIHJldHVybiBvYmo7XG4gICAgcmV0dXJuIHBhdGgucmVkdWNlKChhY2MsIGtleSkgPT4gYWNjPy5ba2V5XSwgb2JqKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBwcm9taXNlQWxsT2JqZWN0KHByb21pc2VzT2JqKSB7XG4gICAgY29uc3Qga2V5cyA9IE9iamVjdC5rZXlzKHByb21pc2VzT2JqKTtcbiAgICBjb25zdCBwcm9taXNlcyA9IGtleXMubWFwKChrZXkpID0+IHByb21pc2VzT2JqW2tleV0pO1xuICAgIHJldHVybiBQcm9taXNlLmFsbChwcm9taXNlcykudGhlbigocmVzdWx0cykgPT4ge1xuICAgICAgICBjb25zdCByZXNvbHZlZE9iaiA9IHt9O1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHJlc29sdmVkT2JqW2tleXNbaV1dID0gcmVzdWx0c1tpXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzb2x2ZWRPYmo7XG4gICAgfSk7XG59XG5leHBvcnQgZnVuY3Rpb24gcmFuZG9tU3RyaW5nKGxlbmd0aCA9IDEwKSB7XG4gICAgY29uc3QgY2hhcnMgPSBcImFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6XCI7XG4gICAgbGV0IHN0ciA9IFwiXCI7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgICBzdHIgKz0gY2hhcnNbTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogY2hhcnMubGVuZ3RoKV07XG4gICAgfVxuICAgIHJldHVybiBzdHI7XG59XG5leHBvcnQgZnVuY3Rpb24gZXNjKHN0cikge1xuICAgIHJldHVybiBKU09OLnN0cmluZ2lmeShzdHIpO1xufVxuZXhwb3J0IGNvbnN0IGNhcHR1cmVTdGFja1RyYWNlID0gRXJyb3IuY2FwdHVyZVN0YWNrVHJhY2VcbiAgICA/IEVycm9yLmNhcHR1cmVTdGFja1RyYWNlXG4gICAgOiAoLi4uX2FyZ3MpID0+IHsgfTtcbmV4cG9ydCBmdW5jdGlvbiBpc09iamVjdChkYXRhKSB7XG4gICAgcmV0dXJuIHR5cGVvZiBkYXRhID09PSBcIm9iamVjdFwiICYmIGRhdGEgIT09IG51bGwgJiYgIUFycmF5LmlzQXJyYXkoZGF0YSk7XG59XG5leHBvcnQgY29uc3QgYWxsb3dzRXZhbCA9IGNhY2hlZCgoKSA9PiB7XG4gICAgaWYgKHR5cGVvZiBuYXZpZ2F0b3IgIT09IFwidW5kZWZpbmVkXCIgJiYgbmF2aWdhdG9yPy51c2VyQWdlbnQ/LmluY2x1ZGVzKFwiQ2xvdWRmbGFyZVwiKSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IEYgPSBGdW5jdGlvbjtcbiAgICAgICAgbmV3IEYoXCJcIik7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBjYXRjaCAoXykge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxufSk7XG5leHBvcnQgZnVuY3Rpb24gaXNQbGFpbk9iamVjdChvKSB7XG4gICAgaWYgKGlzT2JqZWN0KG8pID09PSBmYWxzZSlcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIC8vIG1vZGlmaWVkIGNvbnN0cnVjdG9yXG4gICAgY29uc3QgY3RvciA9IG8uY29uc3RydWN0b3I7XG4gICAgaWYgKGN0b3IgPT09IHVuZGVmaW5lZClcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgLy8gbW9kaWZpZWQgcHJvdG90eXBlXG4gICAgY29uc3QgcHJvdCA9IGN0b3IucHJvdG90eXBlO1xuICAgIGlmIChpc09iamVjdChwcm90KSA9PT0gZmFsc2UpXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAvLyBjdG9yIGRvZXNuJ3QgaGF2ZSBzdGF0aWMgYGlzUHJvdG90eXBlT2ZgXG4gICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChwcm90LCBcImlzUHJvdG90eXBlT2ZcIikgPT09IGZhbHNlKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG59XG5leHBvcnQgZnVuY3Rpb24gbnVtS2V5cyhkYXRhKSB7XG4gICAgbGV0IGtleUNvdW50ID0gMDtcbiAgICBmb3IgKGNvbnN0IGtleSBpbiBkYXRhKSB7XG4gICAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZGF0YSwga2V5KSkge1xuICAgICAgICAgICAga2V5Q291bnQrKztcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4ga2V5Q291bnQ7XG59XG5leHBvcnQgY29uc3QgZ2V0UGFyc2VkVHlwZSA9IChkYXRhKSA9PiB7XG4gICAgY29uc3QgdCA9IHR5cGVvZiBkYXRhO1xuICAgIHN3aXRjaCAodCkge1xuICAgICAgICBjYXNlIFwidW5kZWZpbmVkXCI6XG4gICAgICAgICAgICByZXR1cm4gXCJ1bmRlZmluZWRcIjtcbiAgICAgICAgY2FzZSBcInN0cmluZ1wiOlxuICAgICAgICAgICAgcmV0dXJuIFwic3RyaW5nXCI7XG4gICAgICAgIGNhc2UgXCJudW1iZXJcIjpcbiAgICAgICAgICAgIHJldHVybiBOdW1iZXIuaXNOYU4oZGF0YSkgPyBcIm5hblwiIDogXCJudW1iZXJcIjtcbiAgICAgICAgY2FzZSBcImJvb2xlYW5cIjpcbiAgICAgICAgICAgIHJldHVybiBcImJvb2xlYW5cIjtcbiAgICAgICAgY2FzZSBcImZ1bmN0aW9uXCI6XG4gICAgICAgICAgICByZXR1cm4gXCJmdW5jdGlvblwiO1xuICAgICAgICBjYXNlIFwiYmlnaW50XCI6XG4gICAgICAgICAgICByZXR1cm4gXCJiaWdpbnRcIjtcbiAgICAgICAgY2FzZSBcInN5bWJvbFwiOlxuICAgICAgICAgICAgcmV0dXJuIFwic3ltYm9sXCI7XG4gICAgICAgIGNhc2UgXCJvYmplY3RcIjpcbiAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KGRhdGEpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiYXJyYXlcIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChkYXRhID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFwibnVsbFwiO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGRhdGEudGhlbiAmJiB0eXBlb2YgZGF0YS50aGVuID09PSBcImZ1bmN0aW9uXCIgJiYgZGF0YS5jYXRjaCAmJiB0eXBlb2YgZGF0YS5jYXRjaCA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFwicHJvbWlzZVwiO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHR5cGVvZiBNYXAgIT09IFwidW5kZWZpbmVkXCIgJiYgZGF0YSBpbnN0YW5jZW9mIE1hcCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBcIm1hcFwiO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHR5cGVvZiBTZXQgIT09IFwidW5kZWZpbmVkXCIgJiYgZGF0YSBpbnN0YW5jZW9mIFNldCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBcInNldFwiO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHR5cGVvZiBEYXRlICE9PSBcInVuZGVmaW5lZFwiICYmIGRhdGEgaW5zdGFuY2VvZiBEYXRlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiZGF0ZVwiO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHR5cGVvZiBGaWxlICE9PSBcInVuZGVmaW5lZFwiICYmIGRhdGEgaW5zdGFuY2VvZiBGaWxlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiZmlsZVwiO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIFwib2JqZWN0XCI7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFVua25vd24gZGF0YSB0eXBlOiAke3R9YCk7XG4gICAgfVxufTtcbmV4cG9ydCBjb25zdCBwcm9wZXJ0eUtleVR5cGVzID0gbmV3IFNldChbXCJzdHJpbmdcIiwgXCJudW1iZXJcIiwgXCJzeW1ib2xcIl0pO1xuZXhwb3J0IGNvbnN0IHByaW1pdGl2ZVR5cGVzID0gbmV3IFNldChbXCJzdHJpbmdcIiwgXCJudW1iZXJcIiwgXCJiaWdpbnRcIiwgXCJib29sZWFuXCIsIFwic3ltYm9sXCIsIFwidW5kZWZpbmVkXCJdKTtcbmV4cG9ydCBmdW5jdGlvbiBlc2NhcGVSZWdleChzdHIpIHtcbiAgICByZXR1cm4gc3RyLnJlcGxhY2UoL1suKis/XiR7fSgpfFtcXF1cXFxcXS9nLCBcIlxcXFwkJlwiKTtcbn1cbi8vIHpvZC1zcGVjaWZpYyB1dGlsc1xuZXhwb3J0IGZ1bmN0aW9uIGNsb25lKGluc3QsIGRlZiwgcGFyYW1zKSB7XG4gICAgY29uc3QgY2wgPSBuZXcgaW5zdC5fem9kLmNvbnN0cihkZWYgPz8gaW5zdC5fem9kLmRlZik7XG4gICAgaWYgKCFkZWYgfHwgcGFyYW1zPy5wYXJlbnQpXG4gICAgICAgIGNsLl96b2QucGFyZW50ID0gaW5zdDtcbiAgICByZXR1cm4gY2w7XG59XG5leHBvcnQgZnVuY3Rpb24gbm9ybWFsaXplUGFyYW1zKF9wYXJhbXMpIHtcbiAgICBjb25zdCBwYXJhbXMgPSBfcGFyYW1zO1xuICAgIGlmICghcGFyYW1zKVxuICAgICAgICByZXR1cm4ge307XG4gICAgaWYgKHR5cGVvZiBwYXJhbXMgPT09IFwic3RyaW5nXCIpXG4gICAgICAgIHJldHVybiB7IGVycm9yOiAoKSA9PiBwYXJhbXMgfTtcbiAgICBpZiAocGFyYW1zPy5tZXNzYWdlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgaWYgKHBhcmFtcz8uZXJyb3IgIT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkNhbm5vdCBzcGVjaWZ5IGJvdGggYG1lc3NhZ2VgIGFuZCBgZXJyb3JgIHBhcmFtc1wiKTtcbiAgICAgICAgcGFyYW1zLmVycm9yID0gcGFyYW1zLm1lc3NhZ2U7XG4gICAgfVxuICAgIGRlbGV0ZSBwYXJhbXMubWVzc2FnZTtcbiAgICBpZiAodHlwZW9mIHBhcmFtcy5lcnJvciA9PT0gXCJzdHJpbmdcIilcbiAgICAgICAgcmV0dXJuIHsgLi4ucGFyYW1zLCBlcnJvcjogKCkgPT4gcGFyYW1zLmVycm9yIH07XG4gICAgcmV0dXJuIHBhcmFtcztcbn1cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVUcmFuc3BhcmVudFByb3h5KGdldHRlcikge1xuICAgIGxldCB0YXJnZXQ7XG4gICAgcmV0dXJuIG5ldyBQcm94eSh7fSwge1xuICAgICAgICBnZXQoXywgcHJvcCwgcmVjZWl2ZXIpIHtcbiAgICAgICAgICAgIHRhcmdldCA/PyAodGFyZ2V0ID0gZ2V0dGVyKCkpO1xuICAgICAgICAgICAgcmV0dXJuIFJlZmxlY3QuZ2V0KHRhcmdldCwgcHJvcCwgcmVjZWl2ZXIpO1xuICAgICAgICB9LFxuICAgICAgICBzZXQoXywgcHJvcCwgdmFsdWUsIHJlY2VpdmVyKSB7XG4gICAgICAgICAgICB0YXJnZXQgPz8gKHRhcmdldCA9IGdldHRlcigpKTtcbiAgICAgICAgICAgIHJldHVybiBSZWZsZWN0LnNldCh0YXJnZXQsIHByb3AsIHZhbHVlLCByZWNlaXZlcik7XG4gICAgICAgIH0sXG4gICAgICAgIGhhcyhfLCBwcm9wKSB7XG4gICAgICAgICAgICB0YXJnZXQgPz8gKHRhcmdldCA9IGdldHRlcigpKTtcbiAgICAgICAgICAgIHJldHVybiBSZWZsZWN0Lmhhcyh0YXJnZXQsIHByb3ApO1xuICAgICAgICB9LFxuICAgICAgICBkZWxldGVQcm9wZXJ0eShfLCBwcm9wKSB7XG4gICAgICAgICAgICB0YXJnZXQgPz8gKHRhcmdldCA9IGdldHRlcigpKTtcbiAgICAgICAgICAgIHJldHVybiBSZWZsZWN0LmRlbGV0ZVByb3BlcnR5KHRhcmdldCwgcHJvcCk7XG4gICAgICAgIH0sXG4gICAgICAgIG93bktleXMoXykge1xuICAgICAgICAgICAgdGFyZ2V0ID8/ICh0YXJnZXQgPSBnZXR0ZXIoKSk7XG4gICAgICAgICAgICByZXR1cm4gUmVmbGVjdC5vd25LZXlzKHRhcmdldCk7XG4gICAgICAgIH0sXG4gICAgICAgIGdldE93blByb3BlcnR5RGVzY3JpcHRvcihfLCBwcm9wKSB7XG4gICAgICAgICAgICB0YXJnZXQgPz8gKHRhcmdldCA9IGdldHRlcigpKTtcbiAgICAgICAgICAgIHJldHVybiBSZWZsZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIHByb3ApO1xuICAgICAgICB9LFxuICAgICAgICBkZWZpbmVQcm9wZXJ0eShfLCBwcm9wLCBkZXNjcmlwdG9yKSB7XG4gICAgICAgICAgICB0YXJnZXQgPz8gKHRhcmdldCA9IGdldHRlcigpKTtcbiAgICAgICAgICAgIHJldHVybiBSZWZsZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgcHJvcCwgZGVzY3JpcHRvcik7XG4gICAgICAgIH0sXG4gICAgfSk7XG59XG5leHBvcnQgZnVuY3Rpb24gc3RyaW5naWZ5UHJpbWl0aXZlKHZhbHVlKSB7XG4gICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gXCJiaWdpbnRcIilcbiAgICAgICAgcmV0dXJuIHZhbHVlLnRvU3RyaW5nKCkgKyBcIm5cIjtcbiAgICBpZiAodHlwZW9mIHZhbHVlID09PSBcInN0cmluZ1wiKVxuICAgICAgICByZXR1cm4gYFwiJHt2YWx1ZX1cImA7XG4gICAgcmV0dXJuIGAke3ZhbHVlfWA7XG59XG5leHBvcnQgZnVuY3Rpb24gb3B0aW9uYWxLZXlzKHNoYXBlKSB7XG4gICAgcmV0dXJuIE9iamVjdC5rZXlzKHNoYXBlKS5maWx0ZXIoKGspID0+IHtcbiAgICAgICAgcmV0dXJuIHNoYXBlW2tdLl96b2Qub3B0aW4gPT09IFwib3B0aW9uYWxcIiAmJiBzaGFwZVtrXS5fem9kLm9wdG91dCA9PT0gXCJvcHRpb25hbFwiO1xuICAgIH0pO1xufVxuZXhwb3J0IGNvbnN0IE5VTUJFUl9GT1JNQVRfUkFOR0VTID0ge1xuICAgIHNhZmVpbnQ6IFtOdW1iZXIuTUlOX1NBRkVfSU5URUdFUiwgTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVJdLFxuICAgIGludDMyOiBbLTIxNDc0ODM2NDgsIDIxNDc0ODM2NDddLFxuICAgIHVpbnQzMjogWzAsIDQyOTQ5NjcyOTVdLFxuICAgIGZsb2F0MzI6IFstMy40MDI4MjM0NjYzODUyODg2ZTM4LCAzLjQwMjgyMzQ2NjM4NTI4ODZlMzhdLFxuICAgIGZsb2F0NjQ6IFstTnVtYmVyLk1BWF9WQUxVRSwgTnVtYmVyLk1BWF9WQUxVRV0sXG59O1xuZXhwb3J0IGNvbnN0IEJJR0lOVF9GT1JNQVRfUkFOR0VTID0ge1xuICAgIGludDY0OiBbLyogQF9fUFVSRV9fKi8gQmlnSW50KFwiLTkyMjMzNzIwMzY4NTQ3NzU4MDhcIiksIC8qIEBfX1BVUkVfXyovIEJpZ0ludChcIjkyMjMzNzIwMzY4NTQ3NzU4MDdcIildLFxuICAgIHVpbnQ2NDogWy8qIEBfX1BVUkVfXyovIEJpZ0ludCgwKSwgLyogQF9fUFVSRV9fKi8gQmlnSW50KFwiMTg0NDY3NDQwNzM3MDk1NTE2MTVcIildLFxufTtcbmV4cG9ydCBmdW5jdGlvbiBwaWNrKHNjaGVtYSwgbWFzaykge1xuICAgIGNvbnN0IG5ld1NoYXBlID0ge307XG4gICAgY29uc3QgY3VyckRlZiA9IHNjaGVtYS5fem9kLmRlZjsgLy8uc2hhcGU7XG4gICAgZm9yIChjb25zdCBrZXkgaW4gbWFzaykge1xuICAgICAgICBpZiAoIShrZXkgaW4gY3VyckRlZi5zaGFwZSkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgVW5yZWNvZ25pemVkIGtleTogXCIke2tleX1cImApO1xuICAgICAgICB9XG4gICAgICAgIGlmICghbWFza1trZXldKVxuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIC8vIHBpY2sga2V5XG4gICAgICAgIG5ld1NoYXBlW2tleV0gPSBjdXJyRGVmLnNoYXBlW2tleV07XG4gICAgfVxuICAgIHJldHVybiBjbG9uZShzY2hlbWEsIHtcbiAgICAgICAgLi4uc2NoZW1hLl96b2QuZGVmLFxuICAgICAgICBzaGFwZTogbmV3U2hhcGUsXG4gICAgICAgIGNoZWNrczogW10sXG4gICAgfSk7XG59XG5leHBvcnQgZnVuY3Rpb24gb21pdChzY2hlbWEsIG1hc2spIHtcbiAgICBjb25zdCBuZXdTaGFwZSA9IHsgLi4uc2NoZW1hLl96b2QuZGVmLnNoYXBlIH07XG4gICAgY29uc3QgY3VyckRlZiA9IHNjaGVtYS5fem9kLmRlZjsgLy8uc2hhcGU7XG4gICAgZm9yIChjb25zdCBrZXkgaW4gbWFzaykge1xuICAgICAgICBpZiAoIShrZXkgaW4gY3VyckRlZi5zaGFwZSkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgVW5yZWNvZ25pemVkIGtleTogXCIke2tleX1cImApO1xuICAgICAgICB9XG4gICAgICAgIGlmICghbWFza1trZXldKVxuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIGRlbGV0ZSBuZXdTaGFwZVtrZXldO1xuICAgIH1cbiAgICByZXR1cm4gY2xvbmUoc2NoZW1hLCB7XG4gICAgICAgIC4uLnNjaGVtYS5fem9kLmRlZixcbiAgICAgICAgc2hhcGU6IG5ld1NoYXBlLFxuICAgICAgICBjaGVja3M6IFtdLFxuICAgIH0pO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGV4dGVuZChzY2hlbWEsIHNoYXBlKSB7XG4gICAgaWYgKCFpc1BsYWluT2JqZWN0KHNoYXBlKSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIGlucHV0IHRvIGV4dGVuZDogZXhwZWN0ZWQgYSBwbGFpbiBvYmplY3RcIik7XG4gICAgfVxuICAgIGNvbnN0IGRlZiA9IHtcbiAgICAgICAgLi4uc2NoZW1hLl96b2QuZGVmLFxuICAgICAgICBnZXQgc2hhcGUoKSB7XG4gICAgICAgICAgICBjb25zdCBfc2hhcGUgPSB7IC4uLnNjaGVtYS5fem9kLmRlZi5zaGFwZSwgLi4uc2hhcGUgfTtcbiAgICAgICAgICAgIGFzc2lnblByb3AodGhpcywgXCJzaGFwZVwiLCBfc2hhcGUpOyAvLyBzZWxmLWNhY2hpbmdcbiAgICAgICAgICAgIHJldHVybiBfc2hhcGU7XG4gICAgICAgIH0sXG4gICAgICAgIGNoZWNrczogW10sIC8vIGRlbGV0ZSBleGlzdGluZyBjaGVja3NcbiAgICB9O1xuICAgIHJldHVybiBjbG9uZShzY2hlbWEsIGRlZik7XG59XG5leHBvcnQgZnVuY3Rpb24gbWVyZ2UoYSwgYikge1xuICAgIHJldHVybiBjbG9uZShhLCB7XG4gICAgICAgIC4uLmEuX3pvZC5kZWYsXG4gICAgICAgIGdldCBzaGFwZSgpIHtcbiAgICAgICAgICAgIGNvbnN0IF9zaGFwZSA9IHsgLi4uYS5fem9kLmRlZi5zaGFwZSwgLi4uYi5fem9kLmRlZi5zaGFwZSB9O1xuICAgICAgICAgICAgYXNzaWduUHJvcCh0aGlzLCBcInNoYXBlXCIsIF9zaGFwZSk7IC8vIHNlbGYtY2FjaGluZ1xuICAgICAgICAgICAgcmV0dXJuIF9zaGFwZTtcbiAgICAgICAgfSxcbiAgICAgICAgY2F0Y2hhbGw6IGIuX3pvZC5kZWYuY2F0Y2hhbGwsXG4gICAgICAgIGNoZWNrczogW10sIC8vIGRlbGV0ZSBleGlzdGluZyBjaGVja3NcbiAgICB9KTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBwYXJ0aWFsKENsYXNzLCBzY2hlbWEsIG1hc2spIHtcbiAgICBjb25zdCBvbGRTaGFwZSA9IHNjaGVtYS5fem9kLmRlZi5zaGFwZTtcbiAgICBjb25zdCBzaGFwZSA9IHsgLi4ub2xkU2hhcGUgfTtcbiAgICBpZiAobWFzaykge1xuICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBtYXNrKSB7XG4gICAgICAgICAgICBpZiAoIShrZXkgaW4gb2xkU2hhcGUpKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBVbnJlY29nbml6ZWQga2V5OiBcIiR7a2V5fVwiYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIW1hc2tba2V5XSlcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIC8vIGlmIChvbGRTaGFwZVtrZXldIS5fem9kLm9wdGluID09PSBcIm9wdGlvbmFsXCIpIGNvbnRpbnVlO1xuICAgICAgICAgICAgc2hhcGVba2V5XSA9IENsYXNzXG4gICAgICAgICAgICAgICAgPyBuZXcgQ2xhc3Moe1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiBcIm9wdGlvbmFsXCIsXG4gICAgICAgICAgICAgICAgICAgIGlubmVyVHlwZTogb2xkU2hhcGVba2V5XSxcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIDogb2xkU2hhcGVba2V5XTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gb2xkU2hhcGUpIHtcbiAgICAgICAgICAgIC8vIGlmIChvbGRTaGFwZVtrZXldIS5fem9kLm9wdGluID09PSBcIm9wdGlvbmFsXCIpIGNvbnRpbnVlO1xuICAgICAgICAgICAgc2hhcGVba2V5XSA9IENsYXNzXG4gICAgICAgICAgICAgICAgPyBuZXcgQ2xhc3Moe1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiBcIm9wdGlvbmFsXCIsXG4gICAgICAgICAgICAgICAgICAgIGlubmVyVHlwZTogb2xkU2hhcGVba2V5XSxcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIDogb2xkU2hhcGVba2V5XTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gY2xvbmUoc2NoZW1hLCB7XG4gICAgICAgIC4uLnNjaGVtYS5fem9kLmRlZixcbiAgICAgICAgc2hhcGUsXG4gICAgICAgIGNoZWNrczogW10sXG4gICAgfSk7XG59XG5leHBvcnQgZnVuY3Rpb24gcmVxdWlyZWQoQ2xhc3MsIHNjaGVtYSwgbWFzaykge1xuICAgIGNvbnN0IG9sZFNoYXBlID0gc2NoZW1hLl96b2QuZGVmLnNoYXBlO1xuICAgIGNvbnN0IHNoYXBlID0geyAuLi5vbGRTaGFwZSB9O1xuICAgIGlmIChtYXNrKSB7XG4gICAgICAgIGZvciAoY29uc3Qga2V5IGluIG1hc2spIHtcbiAgICAgICAgICAgIGlmICghKGtleSBpbiBzaGFwZSkpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFVucmVjb2duaXplZCBrZXk6IFwiJHtrZXl9XCJgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghbWFza1trZXldKVxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgLy8gb3ZlcndyaXRlIHdpdGggbm9uLW9wdGlvbmFsXG4gICAgICAgICAgICBzaGFwZVtrZXldID0gbmV3IENsYXNzKHtcbiAgICAgICAgICAgICAgICB0eXBlOiBcIm5vbm9wdGlvbmFsXCIsXG4gICAgICAgICAgICAgICAgaW5uZXJUeXBlOiBvbGRTaGFwZVtrZXldLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGZvciAoY29uc3Qga2V5IGluIG9sZFNoYXBlKSB7XG4gICAgICAgICAgICAvLyBvdmVyd3JpdGUgd2l0aCBub24tb3B0aW9uYWxcbiAgICAgICAgICAgIHNoYXBlW2tleV0gPSBuZXcgQ2xhc3Moe1xuICAgICAgICAgICAgICAgIHR5cGU6IFwibm9ub3B0aW9uYWxcIixcbiAgICAgICAgICAgICAgICBpbm5lclR5cGU6IG9sZFNoYXBlW2tleV0sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gY2xvbmUoc2NoZW1hLCB7XG4gICAgICAgIC4uLnNjaGVtYS5fem9kLmRlZixcbiAgICAgICAgc2hhcGUsXG4gICAgICAgIC8vIG9wdGlvbmFsOiBbXSxcbiAgICAgICAgY2hlY2tzOiBbXSxcbiAgICB9KTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBhYm9ydGVkKHgsIHN0YXJ0SW5kZXggPSAwKSB7XG4gICAgZm9yIChsZXQgaSA9IHN0YXJ0SW5kZXg7IGkgPCB4Lmlzc3Vlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICBpZiAoeC5pc3N1ZXNbaV0/LmNvbnRpbnVlICE9PSB0cnVlKVxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBwcmVmaXhJc3N1ZXMocGF0aCwgaXNzdWVzKSB7XG4gICAgcmV0dXJuIGlzc3Vlcy5tYXAoKGlzcykgPT4ge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIChfYSA9IGlzcykucGF0aCA/PyAoX2EucGF0aCA9IFtdKTtcbiAgICAgICAgaXNzLnBhdGgudW5zaGlmdChwYXRoKTtcbiAgICAgICAgcmV0dXJuIGlzcztcbiAgICB9KTtcbn1cbmV4cG9ydCBmdW5jdGlvbiB1bndyYXBNZXNzYWdlKG1lc3NhZ2UpIHtcbiAgICByZXR1cm4gdHlwZW9mIG1lc3NhZ2UgPT09IFwic3RyaW5nXCIgPyBtZXNzYWdlIDogbWVzc2FnZT8ubWVzc2FnZTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBmaW5hbGl6ZUlzc3VlKGlzcywgY3R4LCBjb25maWcpIHtcbiAgICBjb25zdCBmdWxsID0geyAuLi5pc3MsIHBhdGg6IGlzcy5wYXRoID8/IFtdIH07XG4gICAgLy8gZm9yIGJhY2t3YXJkcyBjb21wYXRpYmlsaXR5XG4gICAgaWYgKCFpc3MubWVzc2FnZSkge1xuICAgICAgICBjb25zdCBtZXNzYWdlID0gdW53cmFwTWVzc2FnZShpc3MuaW5zdD8uX3pvZC5kZWY/LmVycm9yPy4oaXNzKSkgPz9cbiAgICAgICAgICAgIHVud3JhcE1lc3NhZ2UoY3R4Py5lcnJvcj8uKGlzcykpID8/XG4gICAgICAgICAgICB1bndyYXBNZXNzYWdlKGNvbmZpZy5jdXN0b21FcnJvcj8uKGlzcykpID8/XG4gICAgICAgICAgICB1bndyYXBNZXNzYWdlKGNvbmZpZy5sb2NhbGVFcnJvcj8uKGlzcykpID8/XG4gICAgICAgICAgICBcIkludmFsaWQgaW5wdXRcIjtcbiAgICAgICAgZnVsbC5tZXNzYWdlID0gbWVzc2FnZTtcbiAgICB9XG4gICAgLy8gZGVsZXRlIChmdWxsIGFzIGFueSkuZGVmO1xuICAgIGRlbGV0ZSBmdWxsLmluc3Q7XG4gICAgZGVsZXRlIGZ1bGwuY29udGludWU7XG4gICAgaWYgKCFjdHg/LnJlcG9ydElucHV0KSB7XG4gICAgICAgIGRlbGV0ZSBmdWxsLmlucHV0O1xuICAgIH1cbiAgICByZXR1cm4gZnVsbDtcbn1cbmV4cG9ydCBmdW5jdGlvbiBnZXRTaXphYmxlT3JpZ2luKGlucHV0KSB7XG4gICAgaWYgKGlucHV0IGluc3RhbmNlb2YgU2V0KVxuICAgICAgICByZXR1cm4gXCJzZXRcIjtcbiAgICBpZiAoaW5wdXQgaW5zdGFuY2VvZiBNYXApXG4gICAgICAgIHJldHVybiBcIm1hcFwiO1xuICAgIGlmIChpbnB1dCBpbnN0YW5jZW9mIEZpbGUpXG4gICAgICAgIHJldHVybiBcImZpbGVcIjtcbiAgICByZXR1cm4gXCJ1bmtub3duXCI7XG59XG5leHBvcnQgZnVuY3Rpb24gZ2V0TGVuZ3RoYWJsZU9yaWdpbihpbnB1dCkge1xuICAgIGlmIChBcnJheS5pc0FycmF5KGlucHV0KSlcbiAgICAgICAgcmV0dXJuIFwiYXJyYXlcIjtcbiAgICBpZiAodHlwZW9mIGlucHV0ID09PSBcInN0cmluZ1wiKVxuICAgICAgICByZXR1cm4gXCJzdHJpbmdcIjtcbiAgICByZXR1cm4gXCJ1bmtub3duXCI7XG59XG5leHBvcnQgZnVuY3Rpb24gaXNzdWUoLi4uYXJncykge1xuICAgIGNvbnN0IFtpc3MsIGlucHV0LCBpbnN0XSA9IGFyZ3M7XG4gICAgaWYgKHR5cGVvZiBpc3MgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG1lc3NhZ2U6IGlzcyxcbiAgICAgICAgICAgIGNvZGU6IFwiY3VzdG9tXCIsXG4gICAgICAgICAgICBpbnB1dCxcbiAgICAgICAgICAgIGluc3QsXG4gICAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiB7IC4uLmlzcyB9O1xufVxuZXhwb3J0IGZ1bmN0aW9uIGNsZWFuRW51bShvYmopIHtcbiAgICByZXR1cm4gT2JqZWN0LmVudHJpZXMob2JqKVxuICAgICAgICAuZmlsdGVyKChbaywgX10pID0+IHtcbiAgICAgICAgLy8gcmV0dXJuIHRydWUgaWYgTmFOLCBtZWFuaW5nIGl0J3Mgbm90IGEgbnVtYmVyLCB0aHVzIGEgc3RyaW5nIGtleVxuICAgICAgICByZXR1cm4gTnVtYmVyLmlzTmFOKE51bWJlci5wYXJzZUludChrLCAxMCkpO1xuICAgIH0pXG4gICAgICAgIC5tYXAoKGVsKSA9PiBlbFsxXSk7XG59XG4vLyBpbnN0YW5jZW9mXG5leHBvcnQgY2xhc3MgQ2xhc3Mge1xuICAgIGNvbnN0cnVjdG9yKC4uLl9hcmdzKSB7IH1cbn1cbiIsImV4cG9ydCBjb25zdCAkb3V0cHV0ID0gU3ltYm9sKFwiWm9kT3V0cHV0XCIpO1xuZXhwb3J0IGNvbnN0ICRpbnB1dCA9IFN5bWJvbChcIlpvZElucHV0XCIpO1xuZXhwb3J0IGNsYXNzICRab2RSZWdpc3RyeSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuX21hcCA9IG5ldyBNYXAoKTtcbiAgICAgICAgdGhpcy5faWRtYXAgPSBuZXcgTWFwKCk7XG4gICAgfVxuICAgIGFkZChzY2hlbWEsIC4uLl9tZXRhKSB7XG4gICAgICAgIGNvbnN0IG1ldGEgPSBfbWV0YVswXTtcbiAgICAgICAgdGhpcy5fbWFwLnNldChzY2hlbWEsIG1ldGEpO1xuICAgICAgICBpZiAobWV0YSAmJiB0eXBlb2YgbWV0YSA9PT0gXCJvYmplY3RcIiAmJiBcImlkXCIgaW4gbWV0YSkge1xuICAgICAgICAgICAgaWYgKHRoaXMuX2lkbWFwLmhhcyhtZXRhLmlkKSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgSUQgJHttZXRhLmlkfSBhbHJlYWR5IGV4aXN0cyBpbiB0aGUgcmVnaXN0cnlgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuX2lkbWFwLnNldChtZXRhLmlkLCBzY2hlbWEpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICBjbGVhcigpIHtcbiAgICAgICAgdGhpcy5fbWFwID0gbmV3IE1hcCgpO1xuICAgICAgICB0aGlzLl9pZG1hcCA9IG5ldyBNYXAoKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIHJlbW92ZShzY2hlbWEpIHtcbiAgICAgICAgY29uc3QgbWV0YSA9IHRoaXMuX21hcC5nZXQoc2NoZW1hKTtcbiAgICAgICAgaWYgKG1ldGEgJiYgdHlwZW9mIG1ldGEgPT09IFwib2JqZWN0XCIgJiYgXCJpZFwiIGluIG1ldGEpIHtcbiAgICAgICAgICAgIHRoaXMuX2lkbWFwLmRlbGV0ZShtZXRhLmlkKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9tYXAuZGVsZXRlKHNjaGVtYSk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICBnZXQoc2NoZW1hKSB7XG4gICAgICAgIC8vIHJldHVybiB0aGlzLl9tYXAuZ2V0KHNjaGVtYSkgYXMgYW55O1xuICAgICAgICAvLyBpbmhlcml0IG1ldGFkYXRhXG4gICAgICAgIGNvbnN0IHAgPSBzY2hlbWEuX3pvZC5wYXJlbnQ7XG4gICAgICAgIGlmIChwKSB7XG4gICAgICAgICAgICBjb25zdCBwbSA9IHsgLi4uKHRoaXMuZ2V0KHApID8/IHt9KSB9O1xuICAgICAgICAgICAgZGVsZXRlIHBtLmlkOyAvLyBkbyBub3QgaW5oZXJpdCBpZFxuICAgICAgICAgICAgcmV0dXJuIHsgLi4ucG0sIC4uLnRoaXMuX21hcC5nZXQoc2NoZW1hKSB9O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLl9tYXAuZ2V0KHNjaGVtYSk7XG4gICAgfVxuICAgIGhhcyhzY2hlbWEpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX21hcC5oYXMoc2NoZW1hKTtcbiAgICB9XG59XG4vLyByZWdpc3RyaWVzXG5leHBvcnQgZnVuY3Rpb24gcmVnaXN0cnkoKSB7XG4gICAgcmV0dXJuIG5ldyAkWm9kUmVnaXN0cnkoKTtcbn1cbmV4cG9ydCBjb25zdCBnbG9iYWxSZWdpc3RyeSA9IC8qQF9fUFVSRV9fKi8gcmVnaXN0cnkoKTtcbiIsImltcG9ydCB7ICRab2RSZWdpc3RyeSwgZ2xvYmFsUmVnaXN0cnkgfSBmcm9tIFwiLi9yZWdpc3RyaWVzLmpzXCI7XG5pbXBvcnQgeyBnZXRFbnVtVmFsdWVzIH0gZnJvbSBcIi4vdXRpbC5qc1wiO1xuZXhwb3J0IGNsYXNzIEpTT05TY2hlbWFHZW5lcmF0b3Ige1xuICAgIGNvbnN0cnVjdG9yKHBhcmFtcykge1xuICAgICAgICB0aGlzLmNvdW50ZXIgPSAwO1xuICAgICAgICB0aGlzLm1ldGFkYXRhUmVnaXN0cnkgPSBwYXJhbXM/Lm1ldGFkYXRhID8/IGdsb2JhbFJlZ2lzdHJ5O1xuICAgICAgICB0aGlzLnRhcmdldCA9IHBhcmFtcz8udGFyZ2V0ID8/IFwiZHJhZnQtMjAyMC0xMlwiO1xuICAgICAgICB0aGlzLnVucmVwcmVzZW50YWJsZSA9IHBhcmFtcz8udW5yZXByZXNlbnRhYmxlID8/IFwidGhyb3dcIjtcbiAgICAgICAgdGhpcy5vdmVycmlkZSA9IHBhcmFtcz8ub3ZlcnJpZGUgPz8gKCgpID0+IHsgfSk7XG4gICAgICAgIHRoaXMuaW8gPSBwYXJhbXM/LmlvID8/IFwib3V0cHV0XCI7XG4gICAgICAgIHRoaXMuc2VlbiA9IG5ldyBNYXAoKTtcbiAgICB9XG4gICAgcHJvY2VzcyhzY2hlbWEsIF9wYXJhbXMgPSB7IHBhdGg6IFtdLCBzY2hlbWFQYXRoOiBbXSB9KSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgY29uc3QgZGVmID0gc2NoZW1hLl96b2QuZGVmO1xuICAgICAgICBjb25zdCBmb3JtYXRNYXAgPSB7XG4gICAgICAgICAgICBndWlkOiBcInV1aWRcIixcbiAgICAgICAgICAgIHVybDogXCJ1cmlcIixcbiAgICAgICAgICAgIGRhdGV0aW1lOiBcImRhdGUtdGltZVwiLFxuICAgICAgICAgICAganNvbl9zdHJpbmc6IFwianNvbi1zdHJpbmdcIixcbiAgICAgICAgICAgIHJlZ2V4OiBcIlwiLCAvLyBkbyBub3Qgc2V0XG4gICAgICAgIH07XG4gICAgICAgIC8vIGNoZWNrIGZvciBzY2hlbWEgaW4gc2VlbnNcbiAgICAgICAgY29uc3Qgc2VlbiA9IHRoaXMuc2Vlbi5nZXQoc2NoZW1hKTtcbiAgICAgICAgaWYgKHNlZW4pIHtcbiAgICAgICAgICAgIHNlZW4uY291bnQrKztcbiAgICAgICAgICAgIC8vIGNoZWNrIGlmIGN5Y2xlXG4gICAgICAgICAgICBjb25zdCBpc0N5Y2xlID0gX3BhcmFtcy5zY2hlbWFQYXRoLmluY2x1ZGVzKHNjaGVtYSk7XG4gICAgICAgICAgICBpZiAoaXNDeWNsZSkge1xuICAgICAgICAgICAgICAgIHNlZW4uY3ljbGUgPSBfcGFyYW1zLnBhdGg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gc2Vlbi5zY2hlbWE7XG4gICAgICAgIH1cbiAgICAgICAgLy8gaW5pdGlhbGl6ZVxuICAgICAgICBjb25zdCByZXN1bHQgPSB7IHNjaGVtYToge30sIGNvdW50OiAxLCBjeWNsZTogdW5kZWZpbmVkLCBwYXRoOiBfcGFyYW1zLnBhdGggfTtcbiAgICAgICAgdGhpcy5zZWVuLnNldChzY2hlbWEsIHJlc3VsdCk7XG4gICAgICAgIC8vIGN1c3RvbSBtZXRob2Qgb3ZlcnJpZGVzIGRlZmF1bHQgYmVoYXZpb3JcbiAgICAgICAgY29uc3Qgb3ZlcnJpZGVTY2hlbWEgPSBzY2hlbWEuX3pvZC50b0pTT05TY2hlbWE/LigpO1xuICAgICAgICBpZiAob3ZlcnJpZGVTY2hlbWEpIHtcbiAgICAgICAgICAgIHJlc3VsdC5zY2hlbWEgPSBvdmVycmlkZVNjaGVtYTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IHBhcmFtcyA9IHtcbiAgICAgICAgICAgICAgICAuLi5fcGFyYW1zLFxuICAgICAgICAgICAgICAgIHNjaGVtYVBhdGg6IFsuLi5fcGFyYW1zLnNjaGVtYVBhdGgsIHNjaGVtYV0sXG4gICAgICAgICAgICAgICAgcGF0aDogX3BhcmFtcy5wYXRoLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNvbnN0IHBhcmVudCA9IHNjaGVtYS5fem9kLnBhcmVudDtcbiAgICAgICAgICAgIGlmIChwYXJlbnQpIHtcbiAgICAgICAgICAgICAgICAvLyBzY2hlbWEgd2FzIGNsb25lZCBmcm9tIGFub3RoZXIgc2NoZW1hXG4gICAgICAgICAgICAgICAgcmVzdWx0LnJlZiA9IHBhcmVudDtcbiAgICAgICAgICAgICAgICB0aGlzLnByb2Nlc3MocGFyZW50LCBwYXJhbXMpO1xuICAgICAgICAgICAgICAgIHRoaXMuc2Vlbi5nZXQocGFyZW50KS5pc1BhcmVudCA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zdCBfanNvbiA9IHJlc3VsdC5zY2hlbWE7XG4gICAgICAgICAgICAgICAgc3dpdGNoIChkZWYudHlwZSkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIFwic3RyaW5nXCI6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGpzb24gPSBfanNvbjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGpzb24udHlwZSA9IFwic3RyaW5nXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB7IG1pbmltdW0sIG1heGltdW0sIGZvcm1hdCwgcGF0dGVybnMsIGNvbnRlbnRFbmNvZGluZyB9ID0gc2NoZW1hLl96b2RcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYmFnO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBtaW5pbXVtID09PSBcIm51bWJlclwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGpzb24ubWluTGVuZ3RoID0gbWluaW11bTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgbWF4aW11bSA9PT0gXCJudW1iZXJcIilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBqc29uLm1heExlbmd0aCA9IG1heGltdW07XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBjdXN0b20gcGF0dGVybiBvdmVycmlkZXMgZm9ybWF0XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZm9ybWF0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAganNvbi5mb3JtYXQgPSBmb3JtYXRNYXBbZm9ybWF0XSA/PyBmb3JtYXQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGpzb24uZm9ybWF0ID09PSBcIlwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUganNvbi5mb3JtYXQ7IC8vIGVtcHR5IGZvcm1hdCBpcyBub3QgdmFsaWRcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjb250ZW50RW5jb2RpbmcpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAganNvbi5jb250ZW50RW5jb2RpbmcgPSBjb250ZW50RW5jb2Rpbmc7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocGF0dGVybnMgJiYgcGF0dGVybnMuc2l6ZSA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCByZWdleGVzID0gWy4uLnBhdHRlcm5zXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVnZXhlcy5sZW5ndGggPT09IDEpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGpzb24ucGF0dGVybiA9IHJlZ2V4ZXNbMF0uc291cmNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHJlZ2V4ZXMubGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQuc2NoZW1hLmFsbE9mID0gW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4ucmVnZXhlcy5tYXAoKHJlZ2V4KSA9PiAoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLih0aGlzLnRhcmdldCA9PT0gXCJkcmFmdC03XCIgPyB7IHR5cGU6IFwic3RyaW5nXCIgfSA6IHt9KSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXR0ZXJuOiByZWdleC5zb3VyY2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcIm51bWJlclwiOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBqc29uID0gX2pzb247XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB7IG1pbmltdW0sIG1heGltdW0sIGZvcm1hdCwgbXVsdGlwbGVPZiwgZXhjbHVzaXZlTWF4aW11bSwgZXhjbHVzaXZlTWluaW11bSB9ID0gc2NoZW1hLl96b2QuYmFnO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBmb3JtYXQgPT09IFwic3RyaW5nXCIgJiYgZm9ybWF0LmluY2x1ZGVzKFwiaW50XCIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGpzb24udHlwZSA9IFwiaW50ZWdlclwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGpzb24udHlwZSA9IFwibnVtYmVyXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGV4Y2x1c2l2ZU1pbmltdW0gPT09IFwibnVtYmVyXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAganNvbi5leGNsdXNpdmVNaW5pbXVtID0gZXhjbHVzaXZlTWluaW11bTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgbWluaW11bSA9PT0gXCJudW1iZXJcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGpzb24ubWluaW11bSA9IG1pbmltdW07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBleGNsdXNpdmVNaW5pbXVtID09PSBcIm51bWJlclwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChleGNsdXNpdmVNaW5pbXVtID49IG1pbmltdW0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUganNvbi5taW5pbXVtO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUganNvbi5leGNsdXNpdmVNaW5pbXVtO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgZXhjbHVzaXZlTWF4aW11bSA9PT0gXCJudW1iZXJcIilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBqc29uLmV4Y2x1c2l2ZU1heGltdW0gPSBleGNsdXNpdmVNYXhpbXVtO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBtYXhpbXVtID09PSBcIm51bWJlclwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAganNvbi5tYXhpbXVtID0gbWF4aW11bTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGV4Y2x1c2l2ZU1heGltdW0gPT09IFwibnVtYmVyXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGV4Y2x1c2l2ZU1heGltdW0gPD0gbWF4aW11bSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBqc29uLm1heGltdW07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBqc29uLmV4Y2x1c2l2ZU1heGltdW07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBtdWx0aXBsZU9mID09PSBcIm51bWJlclwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGpzb24ubXVsdGlwbGVPZiA9IG11bHRpcGxlT2Y7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXNlIFwiYm9vbGVhblwiOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBqc29uID0gX2pzb247XG4gICAgICAgICAgICAgICAgICAgICAgICBqc29uLnR5cGUgPSBcImJvb2xlYW5cIjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJiaWdpbnRcIjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMudW5yZXByZXNlbnRhYmxlID09PSBcInRocm93XCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJCaWdJbnQgY2Fubm90IGJlIHJlcHJlc2VudGVkIGluIEpTT04gU2NoZW1hXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcInN5bWJvbFwiOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy51bnJlcHJlc2VudGFibGUgPT09IFwidGhyb3dcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlN5bWJvbHMgY2Fubm90IGJlIHJlcHJlc2VudGVkIGluIEpTT04gU2NoZW1hXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcIm51bGxcIjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgX2pzb24udHlwZSA9IFwibnVsbFwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcImFueVwiOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXNlIFwidW5rbm93blwiOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXNlIFwidW5kZWZpbmVkXCI6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnVucmVwcmVzZW50YWJsZSA9PT0gXCJ0aHJvd1wiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVW5kZWZpbmVkIGNhbm5vdCBiZSByZXByZXNlbnRlZCBpbiBKU09OIFNjaGVtYVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJ2b2lkXCI6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnVucmVwcmVzZW50YWJsZSA9PT0gXCJ0aHJvd1wiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVm9pZCBjYW5ub3QgYmUgcmVwcmVzZW50ZWQgaW4gSlNPTiBTY2hlbWFcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXNlIFwibmV2ZXJcIjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgX2pzb24ubm90ID0ge307XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXNlIFwiZGF0ZVwiOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy51bnJlcHJlc2VudGFibGUgPT09IFwidGhyb3dcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkRhdGUgY2Fubm90IGJlIHJlcHJlc2VudGVkIGluIEpTT04gU2NoZW1hXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcImFycmF5XCI6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGpzb24gPSBfanNvbjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHsgbWluaW11bSwgbWF4aW11bSB9ID0gc2NoZW1hLl96b2QuYmFnO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBtaW5pbXVtID09PSBcIm51bWJlclwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGpzb24ubWluSXRlbXMgPSBtaW5pbXVtO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBtYXhpbXVtID09PSBcIm51bWJlclwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGpzb24ubWF4SXRlbXMgPSBtYXhpbXVtO1xuICAgICAgICAgICAgICAgICAgICAgICAganNvbi50eXBlID0gXCJhcnJheVwiO1xuICAgICAgICAgICAgICAgICAgICAgICAganNvbi5pdGVtcyA9IHRoaXMucHJvY2VzcyhkZWYuZWxlbWVudCwgeyAuLi5wYXJhbXMsIHBhdGg6IFsuLi5wYXJhbXMucGF0aCwgXCJpdGVtc1wiXSB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJvYmplY3RcIjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QganNvbiA9IF9qc29uO1xuICAgICAgICAgICAgICAgICAgICAgICAganNvbi50eXBlID0gXCJvYmplY3RcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGpzb24ucHJvcGVydGllcyA9IHt9O1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2hhcGUgPSBkZWYuc2hhcGU7IC8vIHBhcmFtcy5zaGFwZUNhY2hlLmdldChzY2hlbWEpITtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3Qga2V5IGluIHNoYXBlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAganNvbi5wcm9wZXJ0aWVzW2tleV0gPSB0aGlzLnByb2Nlc3Moc2hhcGVba2V5XSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5wYXJhbXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhdGg6IFsuLi5wYXJhbXMucGF0aCwgXCJwcm9wZXJ0aWVzXCIsIGtleV0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyByZXF1aXJlZCBrZXlzXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBhbGxLZXlzID0gbmV3IFNldChPYmplY3Qua2V5cyhzaGFwZSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uc3Qgb3B0aW9uYWxLZXlzID0gbmV3IFNldChkZWYub3B0aW9uYWwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVxdWlyZWRLZXlzID0gbmV3IFNldChbLi4uYWxsS2V5c10uZmlsdGVyKChrZXkpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB2ID0gZGVmLnNoYXBlW2tleV0uX3pvZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5pbyA9PT0gXCJpbnB1dFwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB2Lm9wdGluID09PSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdi5vcHRvdXQgPT09IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVxdWlyZWRLZXlzLnNpemUgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAganNvbi5yZXF1aXJlZCA9IEFycmF5LmZyb20ocmVxdWlyZWRLZXlzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNhdGNoYWxsXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGVmLmNhdGNoYWxsPy5fem9kLmRlZi50eXBlID09PSBcIm5ldmVyXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzdHJpY3RcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBqc29uLmFkZGl0aW9uYWxQcm9wZXJ0aWVzID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICghZGVmLmNhdGNoYWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmVndWxhclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmlvID09PSBcIm91dHB1dFwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBqc29uLmFkZGl0aW9uYWxQcm9wZXJ0aWVzID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChkZWYuY2F0Y2hhbGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBqc29uLmFkZGl0aW9uYWxQcm9wZXJ0aWVzID0gdGhpcy5wcm9jZXNzKGRlZi5jYXRjaGFsbCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5wYXJhbXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhdGg6IFsuLi5wYXJhbXMucGF0aCwgXCJhZGRpdGlvbmFsUHJvcGVydGllc1wiXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJ1bmlvblwiOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBqc29uID0gX2pzb247XG4gICAgICAgICAgICAgICAgICAgICAgICBqc29uLmFueU9mID0gZGVmLm9wdGlvbnMubWFwKCh4LCBpKSA9PiB0aGlzLnByb2Nlc3MoeCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLnBhcmFtcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXRoOiBbLi4ucGFyYW1zLnBhdGgsIFwiYW55T2ZcIiwgaV0sXG4gICAgICAgICAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXNlIFwiaW50ZXJzZWN0aW9uXCI6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGpzb24gPSBfanNvbjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGEgPSB0aGlzLnByb2Nlc3MoZGVmLmxlZnQsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5wYXJhbXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGF0aDogWy4uLnBhcmFtcy5wYXRoLCBcImFsbE9mXCIsIDBdLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBiID0gdGhpcy5wcm9jZXNzKGRlZi5yaWdodCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLnBhcmFtcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXRoOiBbLi4ucGFyYW1zLnBhdGgsIFwiYWxsT2ZcIiwgMV0sXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGlzU2ltcGxlSW50ZXJzZWN0aW9uID0gKHZhbCkgPT4gXCJhbGxPZlwiIGluIHZhbCAmJiBPYmplY3Qua2V5cyh2YWwpLmxlbmd0aCA9PT0gMTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGFsbE9mID0gW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLihpc1NpbXBsZUludGVyc2VjdGlvbihhKSA/IGEuYWxsT2YgOiBbYV0pLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLihpc1NpbXBsZUludGVyc2VjdGlvbihiKSA/IGIuYWxsT2YgOiBbYl0pLFxuICAgICAgICAgICAgICAgICAgICAgICAgXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGpzb24uYWxsT2YgPSBhbGxPZjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJ0dXBsZVwiOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBqc29uID0gX2pzb247XG4gICAgICAgICAgICAgICAgICAgICAgICBqc29uLnR5cGUgPSBcImFycmF5XCI7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBwcmVmaXhJdGVtcyA9IGRlZi5pdGVtcy5tYXAoKHgsIGkpID0+IHRoaXMucHJvY2Vzcyh4LCB7IC4uLnBhcmFtcywgcGF0aDogWy4uLnBhcmFtcy5wYXRoLCBcInByZWZpeEl0ZW1zXCIsIGldIH0pKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnRhcmdldCA9PT0gXCJkcmFmdC0yMDIwLTEyXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBqc29uLnByZWZpeEl0ZW1zID0gcHJlZml4SXRlbXM7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBqc29uLml0ZW1zID0gcHJlZml4SXRlbXM7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGVmLnJlc3QpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCByZXN0ID0gdGhpcy5wcm9jZXNzKGRlZi5yZXN0LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLnBhcmFtcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGF0aDogWy4uLnBhcmFtcy5wYXRoLCBcIml0ZW1zXCJdLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnRhcmdldCA9PT0gXCJkcmFmdC0yMDIwLTEyXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAganNvbi5pdGVtcyA9IHJlc3Q7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBqc29uLmFkZGl0aW9uYWxJdGVtcyA9IHJlc3Q7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gYWRkaXRpb25hbEl0ZW1zXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGVmLnJlc3QpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBqc29uLml0ZW1zID0gdGhpcy5wcm9jZXNzKGRlZi5yZXN0LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLnBhcmFtcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGF0aDogWy4uLnBhcmFtcy5wYXRoLCBcIml0ZW1zXCJdLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gbGVuZ3RoXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB7IG1pbmltdW0sIG1heGltdW0gfSA9IHNjaGVtYS5fem9kLmJhZztcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgbWluaW11bSA9PT0gXCJudW1iZXJcIilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBqc29uLm1pbkl0ZW1zID0gbWluaW11bTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgbWF4aW11bSA9PT0gXCJudW1iZXJcIilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBqc29uLm1heEl0ZW1zID0gbWF4aW11bTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJyZWNvcmRcIjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QganNvbiA9IF9qc29uO1xuICAgICAgICAgICAgICAgICAgICAgICAganNvbi50eXBlID0gXCJvYmplY3RcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGpzb24ucHJvcGVydHlOYW1lcyA9IHRoaXMucHJvY2VzcyhkZWYua2V5VHlwZSwgeyAuLi5wYXJhbXMsIHBhdGg6IFsuLi5wYXJhbXMucGF0aCwgXCJwcm9wZXJ0eU5hbWVzXCJdIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAganNvbi5hZGRpdGlvbmFsUHJvcGVydGllcyA9IHRoaXMucHJvY2VzcyhkZWYudmFsdWVUeXBlLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4ucGFyYW1zLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhdGg6IFsuLi5wYXJhbXMucGF0aCwgXCJhZGRpdGlvbmFsUHJvcGVydGllc1wiXSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcIm1hcFwiOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy51bnJlcHJlc2VudGFibGUgPT09IFwidGhyb3dcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIk1hcCBjYW5ub3QgYmUgcmVwcmVzZW50ZWQgaW4gSlNPTiBTY2hlbWFcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXNlIFwic2V0XCI6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnVucmVwcmVzZW50YWJsZSA9PT0gXCJ0aHJvd1wiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiU2V0IGNhbm5vdCBiZSByZXByZXNlbnRlZCBpbiBKU09OIFNjaGVtYVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJlbnVtXCI6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGpzb24gPSBfanNvbjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHZhbHVlcyA9IGdldEVudW1WYWx1ZXMoZGVmLmVudHJpZXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gTnVtYmVyIGVudW1zIGNhbiBoYXZlIGJvdGggc3RyaW5nIGFuZCBudW1iZXIgdmFsdWVzXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWVzLmV2ZXJ5KCh2KSA9PiB0eXBlb2YgdiA9PT0gXCJudW1iZXJcIikpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAganNvbi50eXBlID0gXCJudW1iZXJcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZXMuZXZlcnkoKHYpID0+IHR5cGVvZiB2ID09PSBcInN0cmluZ1wiKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBqc29uLnR5cGUgPSBcInN0cmluZ1wiO1xuICAgICAgICAgICAgICAgICAgICAgICAganNvbi5lbnVtID0gdmFsdWVzO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcImxpdGVyYWxcIjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QganNvbiA9IF9qc29uO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdmFscyA9IFtdO1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCB2YWwgb2YgZGVmLnZhbHVlcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWwgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy51bnJlcHJlc2VudGFibGUgPT09IFwidGhyb3dcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTGl0ZXJhbCBgdW5kZWZpbmVkYCBjYW5ub3QgYmUgcmVwcmVzZW50ZWQgaW4gSlNPTiBTY2hlbWFcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBkbyBub3QgYWRkIHRvIHZhbHNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICh0eXBlb2YgdmFsID09PSBcImJpZ2ludFwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnVucmVwcmVzZW50YWJsZSA9PT0gXCJ0aHJvd1wiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJCaWdJbnQgbGl0ZXJhbHMgY2Fubm90IGJlIHJlcHJlc2VudGVkIGluIEpTT04gU2NoZW1hXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFscy5wdXNoKE51bWJlcih2YWwpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFscy5wdXNoKHZhbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZG8gbm90aGluZyAoYW4gdW5kZWZpbmVkIGxpdGVyYWwgd2FzIHN0cmlwcGVkKVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAodmFscy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB2YWwgPSB2YWxzWzBdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGpzb24udHlwZSA9IHZhbCA9PT0gbnVsbCA/IFwibnVsbFwiIDogdHlwZW9mIHZhbDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBqc29uLmNvbnN0ID0gdmFsO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHMuZXZlcnkoKHYpID0+IHR5cGVvZiB2ID09PSBcIm51bWJlclwiKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAganNvbi50eXBlID0gXCJudW1iZXJcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodmFscy5ldmVyeSgodikgPT4gdHlwZW9mIHYgPT09IFwic3RyaW5nXCIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBqc29uLnR5cGUgPSBcInN0cmluZ1wiO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWxzLmV2ZXJ5KCh2KSA9PiB0eXBlb2YgdiA9PT0gXCJib29sZWFuXCIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBqc29uLnR5cGUgPSBcInN0cmluZ1wiO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWxzLmV2ZXJ5KCh2KSA9PiB2ID09PSBudWxsKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAganNvbi50eXBlID0gXCJudWxsXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAganNvbi5lbnVtID0gdmFscztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJmaWxlXCI6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGpzb24gPSBfanNvbjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGZpbGUgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJzdHJpbmdcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3JtYXQ6IFwiYmluYXJ5XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudEVuY29kaW5nOiBcImJpbmFyeVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHsgbWluaW11bSwgbWF4aW11bSwgbWltZSB9ID0gc2NoZW1hLl96b2QuYmFnO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1pbmltdW0gIT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWxlLm1pbkxlbmd0aCA9IG1pbmltdW07XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobWF4aW11bSAhPT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGUubWF4TGVuZ3RoID0gbWF4aW11bTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtaW1lKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1pbWUubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGUuY29udGVudE1lZGlhVHlwZSA9IG1pbWVbMF07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE9iamVjdC5hc3NpZ24oanNvbiwgZmlsZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBqc29uLmFueU9mID0gbWltZS5tYXAoKG0pID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG1GaWxlID0geyAuLi5maWxlLCBjb250ZW50TWVkaWFUeXBlOiBtIH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbUZpbGU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIE9iamVjdC5hc3NpZ24oanNvbiwgZmlsZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiAodGhpcy51bnJlcHJlc2VudGFibGUgPT09IFwidGhyb3dcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gICB0aHJvdyBuZXcgRXJyb3IoXCJGaWxlIGNhbm5vdCBiZSByZXByZXNlbnRlZCBpbiBKU09OIFNjaGVtYVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJ0cmFuc2Zvcm1cIjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMudW5yZXByZXNlbnRhYmxlID09PSBcInRocm93XCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJUcmFuc2Zvcm1zIGNhbm5vdCBiZSByZXByZXNlbnRlZCBpbiBKU09OIFNjaGVtYVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJudWxsYWJsZVwiOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpbm5lciA9IHRoaXMucHJvY2VzcyhkZWYuaW5uZXJUeXBlLCBwYXJhbXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgX2pzb24uYW55T2YgPSBbaW5uZXIsIHsgdHlwZTogXCJudWxsXCIgfV07XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXNlIFwibm9ub3B0aW9uYWxcIjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9jZXNzKGRlZi5pbm5lclR5cGUsIHBhcmFtcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQucmVmID0gZGVmLmlubmVyVHlwZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJzdWNjZXNzXCI6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGpzb24gPSBfanNvbjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGpzb24udHlwZSA9IFwiYm9vbGVhblwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcImRlZmF1bHRcIjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9jZXNzKGRlZi5pbm5lclR5cGUsIHBhcmFtcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQucmVmID0gZGVmLmlubmVyVHlwZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9qc29uLmRlZmF1bHQgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGRlZi5kZWZhdWx0VmFsdWUpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJwcmVmYXVsdFwiOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByb2Nlc3MoZGVmLmlubmVyVHlwZSwgcGFyYW1zKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC5yZWYgPSBkZWYuaW5uZXJUeXBlO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuaW8gPT09IFwiaW5wdXRcIilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfanNvbi5fcHJlZmF1bHQgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGRlZi5kZWZhdWx0VmFsdWUpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJjYXRjaFwiOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB1c2UgY29uZGl0aW9uYWxzXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByb2Nlc3MoZGVmLmlubmVyVHlwZSwgcGFyYW1zKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC5yZWYgPSBkZWYuaW5uZXJUeXBlO1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGNhdGNoVmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhdGNoVmFsdWUgPSBkZWYuY2F0Y2hWYWx1ZSh1bmRlZmluZWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgY2F0Y2gge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkR5bmFtaWMgY2F0Y2ggdmFsdWVzIGFyZSBub3Qgc3VwcG9ydGVkIGluIEpTT04gU2NoZW1hXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgX2pzb24uZGVmYXVsdCA9IGNhdGNoVmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXNlIFwibmFuXCI6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnVucmVwcmVzZW50YWJsZSA9PT0gXCJ0aHJvd1wiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTmFOIGNhbm5vdCBiZSByZXByZXNlbnRlZCBpbiBKU09OIFNjaGVtYVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJ0ZW1wbGF0ZV9saXRlcmFsXCI6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGpzb24gPSBfanNvbjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHBhdHRlcm4gPSBzY2hlbWEuX3pvZC5wYXR0ZXJuO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFwYXR0ZXJuKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlBhdHRlcm4gbm90IGZvdW5kIGluIHRlbXBsYXRlIGxpdGVyYWxcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICBqc29uLnR5cGUgPSBcInN0cmluZ1wiO1xuICAgICAgICAgICAgICAgICAgICAgICAganNvbi5wYXR0ZXJuID0gcGF0dGVybi5zb3VyY2U7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXNlIFwicGlwZVwiOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpbm5lclR5cGUgPSB0aGlzLmlvID09PSBcImlucHV0XCIgPyAoZGVmLmluLl96b2QuZGVmLnR5cGUgPT09IFwidHJhbnNmb3JtXCIgPyBkZWYub3V0IDogZGVmLmluKSA6IGRlZi5vdXQ7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByb2Nlc3MoaW5uZXJUeXBlLCBwYXJhbXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnJlZiA9IGlubmVyVHlwZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJyZWFkb25seVwiOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByb2Nlc3MoZGVmLmlubmVyVHlwZSwgcGFyYW1zKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC5yZWYgPSBkZWYuaW5uZXJUeXBlO1xuICAgICAgICAgICAgICAgICAgICAgICAgX2pzb24ucmVhZE9ubHkgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgLy8gcGFzc3Rocm91Z2ggdHlwZXNcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcInByb21pc2VcIjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9jZXNzKGRlZi5pbm5lclR5cGUsIHBhcmFtcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQucmVmID0gZGVmLmlubmVyVHlwZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJvcHRpb25hbFwiOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByb2Nlc3MoZGVmLmlubmVyVHlwZSwgcGFyYW1zKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC5yZWYgPSBkZWYuaW5uZXJUeXBlO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcImxhenlcIjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaW5uZXJUeXBlID0gc2NoZW1hLl96b2QuaW5uZXJUeXBlO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9jZXNzKGlubmVyVHlwZSwgcGFyYW1zKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC5yZWYgPSBpbm5lclR5cGU7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXNlIFwiY3VzdG9tXCI6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnVucmVwcmVzZW50YWJsZSA9PT0gXCJ0aHJvd1wiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQ3VzdG9tIHR5cGVzIGNhbm5vdCBiZSByZXByZXNlbnRlZCBpbiBKU09OIFNjaGVtYVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBtZXRhZGF0YVxuICAgICAgICBjb25zdCBtZXRhID0gdGhpcy5tZXRhZGF0YVJlZ2lzdHJ5LmdldChzY2hlbWEpO1xuICAgICAgICBpZiAobWV0YSlcbiAgICAgICAgICAgIE9iamVjdC5hc3NpZ24ocmVzdWx0LnNjaGVtYSwgbWV0YSk7XG4gICAgICAgIGlmICh0aGlzLmlvID09PSBcImlucHV0XCIgJiYgaXNUcmFuc2Zvcm1pbmcoc2NoZW1hKSkge1xuICAgICAgICAgICAgLy8gZXhhbXBsZXMvZGVmYXVsdHMgb25seSBhcHBseSB0byBvdXRwdXQgdHlwZSBvZiBwaXBlXG4gICAgICAgICAgICBkZWxldGUgcmVzdWx0LnNjaGVtYS5leGFtcGxlcztcbiAgICAgICAgICAgIGRlbGV0ZSByZXN1bHQuc2NoZW1hLmRlZmF1bHQ7XG4gICAgICAgIH1cbiAgICAgICAgLy8gc2V0IHByZWZhdWx0IGFzIGRlZmF1bHRcbiAgICAgICAgaWYgKHRoaXMuaW8gPT09IFwiaW5wdXRcIiAmJiByZXN1bHQuc2NoZW1hLl9wcmVmYXVsdClcbiAgICAgICAgICAgIChfYSA9IHJlc3VsdC5zY2hlbWEpLmRlZmF1bHQgPz8gKF9hLmRlZmF1bHQgPSByZXN1bHQuc2NoZW1hLl9wcmVmYXVsdCk7XG4gICAgICAgIGRlbGV0ZSByZXN1bHQuc2NoZW1hLl9wcmVmYXVsdDtcbiAgICAgICAgLy8gcHVsbGluZyBmcmVzaCBmcm9tIHRoaXMuc2VlbiBpbiBjYXNlIGl0IHdhcyBvdmVyd3JpdHRlblxuICAgICAgICBjb25zdCBfcmVzdWx0ID0gdGhpcy5zZWVuLmdldChzY2hlbWEpO1xuICAgICAgICByZXR1cm4gX3Jlc3VsdC5zY2hlbWE7XG4gICAgfVxuICAgIGVtaXQoc2NoZW1hLCBfcGFyYW1zKSB7XG4gICAgICAgIGNvbnN0IHBhcmFtcyA9IHtcbiAgICAgICAgICAgIGN5Y2xlczogX3BhcmFtcz8uY3ljbGVzID8/IFwicmVmXCIsXG4gICAgICAgICAgICByZXVzZWQ6IF9wYXJhbXM/LnJldXNlZCA/PyBcImlubGluZVwiLFxuICAgICAgICAgICAgLy8gdW5yZXByZXNlbnRhYmxlOiBfcGFyYW1zPy51bnJlcHJlc2VudGFibGUgPz8gXCJ0aHJvd1wiLFxuICAgICAgICAgICAgLy8gdXJpOiBfcGFyYW1zPy51cmkgPz8gKChpZCkgPT4gYCR7aWR9YCksXG4gICAgICAgICAgICBleHRlcm5hbDogX3BhcmFtcz8uZXh0ZXJuYWwgPz8gdW5kZWZpbmVkLFxuICAgICAgICB9O1xuICAgICAgICAvLyBpdGVyYXRlIG92ZXIgc2VlbiBtYXA7XG4gICAgICAgIGNvbnN0IHJvb3QgPSB0aGlzLnNlZW4uZ2V0KHNjaGVtYSk7XG4gICAgICAgIGlmICghcm9vdClcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlVucHJvY2Vzc2VkIHNjaGVtYS4gVGhpcyBpcyBhIGJ1ZyBpbiBab2QuXCIpO1xuICAgICAgICAvLyBpbml0aWFsaXplIHJlc3VsdCB3aXRoIHJvb3Qgc2NoZW1hIGZpZWxkc1xuICAgICAgICAvLyBPYmplY3QuYXNzaWduKHJlc3VsdCwgc2Vlbi5jYWNoZWQpO1xuICAgICAgICAvLyByZXR1cm5zIGEgcmVmIHRvIHRoZSBzY2hlbWFcbiAgICAgICAgLy8gZGVmSWQgd2lsbCBiZSBlbXB0eSBpZiB0aGUgcmVmIHBvaW50cyB0byBhbiBleHRlcm5hbCBzY2hlbWEgKG9yICMpXG4gICAgICAgIGNvbnN0IG1ha2VVUkkgPSAoZW50cnkpID0+IHtcbiAgICAgICAgICAgIC8vIGNvbXBhcmluZyB0aGUgc2VlbiBvYmplY3RzIGJlY2F1c2Ugc29tZXRpbWVzXG4gICAgICAgICAgICAvLyBtdWx0aXBsZSBzY2hlbWFzIG1hcCB0byB0aGUgc2FtZSBzZWVuIG9iamVjdC5cbiAgICAgICAgICAgIC8vIGUuZy4gbGF6eVxuICAgICAgICAgICAgLy8gZXh0ZXJuYWwgaXMgY29uZmlndXJlZFxuICAgICAgICAgICAgY29uc3QgZGVmc1NlZ21lbnQgPSB0aGlzLnRhcmdldCA9PT0gXCJkcmFmdC0yMDIwLTEyXCIgPyBcIiRkZWZzXCIgOiBcImRlZmluaXRpb25zXCI7XG4gICAgICAgICAgICBpZiAocGFyYW1zLmV4dGVybmFsKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZXh0ZXJuYWxJZCA9IHBhcmFtcy5leHRlcm5hbC5yZWdpc3RyeS5nZXQoZW50cnlbMF0pPy5pZDsgLy8gPz8gXCJfX3NoYXJlZFwiOy8vIGBfX3NjaGVtYSR7dGhpcy5jb3VudGVyKyt9YDtcbiAgICAgICAgICAgICAgICAvLyBjaGVjayBpZiBzY2hlbWEgaXMgaW4gdGhlIGV4dGVybmFsIHJlZ2lzdHJ5XG4gICAgICAgICAgICAgICAgY29uc3QgdXJpR2VuZXJhdG9yID0gcGFyYW1zLmV4dGVybmFsLnVyaSA/PyAoKGlkKSA9PiBpZCk7XG4gICAgICAgICAgICAgICAgaWYgKGV4dGVybmFsSWQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsgcmVmOiB1cmlHZW5lcmF0b3IoZXh0ZXJuYWxJZCkgfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gb3RoZXJ3aXNlLCBhZGQgdG8gX19zaGFyZWRcbiAgICAgICAgICAgICAgICBjb25zdCBpZCA9IGVudHJ5WzFdLmRlZklkID8/IGVudHJ5WzFdLnNjaGVtYS5pZCA/PyBgc2NoZW1hJHt0aGlzLmNvdW50ZXIrK31gO1xuICAgICAgICAgICAgICAgIGVudHJ5WzFdLmRlZklkID0gaWQ7IC8vIHNldCBkZWZJZCBzbyBpdCB3aWxsIGJlIHJldXNlZCBpZiBuZWVkZWRcbiAgICAgICAgICAgICAgICByZXR1cm4geyBkZWZJZDogaWQsIHJlZjogYCR7dXJpR2VuZXJhdG9yKFwiX19zaGFyZWRcIil9Iy8ke2RlZnNTZWdtZW50fS8ke2lkfWAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChlbnRyeVsxXSA9PT0gcm9vdCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB7IHJlZjogXCIjXCIgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIHNlbGYtY29udGFpbmVkIHNjaGVtYVxuICAgICAgICAgICAgY29uc3QgdXJpUHJlZml4ID0gYCNgO1xuICAgICAgICAgICAgY29uc3QgZGVmVXJpUHJlZml4ID0gYCR7dXJpUHJlZml4fS8ke2RlZnNTZWdtZW50fS9gO1xuICAgICAgICAgICAgY29uc3QgZGVmSWQgPSBlbnRyeVsxXS5zY2hlbWEuaWQgPz8gYF9fc2NoZW1hJHt0aGlzLmNvdW50ZXIrK31gO1xuICAgICAgICAgICAgcmV0dXJuIHsgZGVmSWQsIHJlZjogZGVmVXJpUHJlZml4ICsgZGVmSWQgfTtcbiAgICAgICAgfTtcbiAgICAgICAgLy8gc3RvcmVkIGNhY2hlZCB2ZXJzaW9uIGluIGBkZWZgIHByb3BlcnR5XG4gICAgICAgIC8vIHJlbW92ZSBhbGwgcHJvcGVydGllcywgc2V0ICRyZWZcbiAgICAgICAgY29uc3QgZXh0cmFjdFRvRGVmID0gKGVudHJ5KSA9PiB7XG4gICAgICAgICAgICAvLyBpZiB0aGUgc2NoZW1hIGlzIGFscmVhZHkgYSByZWZlcmVuY2UsIGRvIG5vdCBleHRyYWN0IGl0XG4gICAgICAgICAgICBpZiAoZW50cnlbMV0uc2NoZW1hLiRyZWYpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBzZWVuID0gZW50cnlbMV07XG4gICAgICAgICAgICBjb25zdCB7IHJlZiwgZGVmSWQgfSA9IG1ha2VVUkkoZW50cnkpO1xuICAgICAgICAgICAgc2Vlbi5kZWYgPSB7IC4uLnNlZW4uc2NoZW1hIH07XG4gICAgICAgICAgICAvLyBkZWZJZCB3b24ndCBiZSBzZXQgaWYgdGhlIHNjaGVtYSBpcyBhIHJlZmVyZW5jZSB0byBhbiBleHRlcm5hbCBzY2hlbWFcbiAgICAgICAgICAgIGlmIChkZWZJZClcbiAgICAgICAgICAgICAgICBzZWVuLmRlZklkID0gZGVmSWQ7XG4gICAgICAgICAgICAvLyB3aXBlIGF3YXkgYWxsIHByb3BlcnRpZXMgZXhjZXB0ICRyZWZcbiAgICAgICAgICAgIGNvbnN0IHNjaGVtYSA9IHNlZW4uc2NoZW1hO1xuICAgICAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gc2NoZW1hKSB7XG4gICAgICAgICAgICAgICAgZGVsZXRlIHNjaGVtYVtrZXldO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc2NoZW1hLiRyZWYgPSByZWY7XG4gICAgICAgIH07XG4gICAgICAgIC8vIHRocm93IG9uIGN5Y2xlc1xuICAgICAgICAvLyBicmVhayBjeWNsZXNcbiAgICAgICAgaWYgKHBhcmFtcy5jeWNsZXMgPT09IFwidGhyb3dcIikge1xuICAgICAgICAgICAgZm9yIChjb25zdCBlbnRyeSBvZiB0aGlzLnNlZW4uZW50cmllcygpKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgc2VlbiA9IGVudHJ5WzFdO1xuICAgICAgICAgICAgICAgIGlmIChzZWVuLmN5Y2xlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkN5Y2xlIGRldGVjdGVkOiBcIiArXG4gICAgICAgICAgICAgICAgICAgICAgICBgIy8ke3NlZW4uY3ljbGU/LmpvaW4oXCIvXCIpfS88cm9vdD5gICtcbiAgICAgICAgICAgICAgICAgICAgICAgICdcXG5cXG5TZXQgdGhlIGBjeWNsZXNgIHBhcmFtZXRlciB0byBgXCJyZWZcImAgdG8gcmVzb2x2ZSBjeWNsaWNhbCBzY2hlbWFzIHdpdGggZGVmcy4nKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gZXh0cmFjdCBzY2hlbWFzIGludG8gJGRlZnNcbiAgICAgICAgZm9yIChjb25zdCBlbnRyeSBvZiB0aGlzLnNlZW4uZW50cmllcygpKSB7XG4gICAgICAgICAgICBjb25zdCBzZWVuID0gZW50cnlbMV07XG4gICAgICAgICAgICAvLyBjb252ZXJ0IHJvb3Qgc2NoZW1hIHRvICMgJHJlZlxuICAgICAgICAgICAgaWYgKHNjaGVtYSA9PT0gZW50cnlbMF0pIHtcbiAgICAgICAgICAgICAgICBleHRyYWN0VG9EZWYoZW50cnkpOyAvLyB0aGlzIGhhcyBzcGVjaWFsIGhhbmRsaW5nIGZvciB0aGUgcm9vdCBzY2hlbWFcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIGV4dHJhY3Qgc2NoZW1hcyB0aGF0IGFyZSBpbiB0aGUgZXh0ZXJuYWwgcmVnaXN0cnlcbiAgICAgICAgICAgIGlmIChwYXJhbXMuZXh0ZXJuYWwpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBleHQgPSBwYXJhbXMuZXh0ZXJuYWwucmVnaXN0cnkuZ2V0KGVudHJ5WzBdKT8uaWQ7XG4gICAgICAgICAgICAgICAgaWYgKHNjaGVtYSAhPT0gZW50cnlbMF0gJiYgZXh0KSB7XG4gICAgICAgICAgICAgICAgICAgIGV4dHJhY3RUb0RlZihlbnRyeSk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIGV4dHJhY3Qgc2NoZW1hcyB3aXRoIGBpZGAgbWV0YVxuICAgICAgICAgICAgY29uc3QgaWQgPSB0aGlzLm1ldGFkYXRhUmVnaXN0cnkuZ2V0KGVudHJ5WzBdKT8uaWQ7XG4gICAgICAgICAgICBpZiAoaWQpIHtcbiAgICAgICAgICAgICAgICBleHRyYWN0VG9EZWYoZW50cnkpO1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gYnJlYWsgY3ljbGVzXG4gICAgICAgICAgICBpZiAoc2Vlbi5jeWNsZSkge1xuICAgICAgICAgICAgICAgIC8vIGFueVxuICAgICAgICAgICAgICAgIGV4dHJhY3RUb0RlZihlbnRyeSk7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBleHRyYWN0IHJldXNlZCBzY2hlbWFzXG4gICAgICAgICAgICBpZiAoc2Vlbi5jb3VudCA+IDEpIHtcbiAgICAgICAgICAgICAgICBpZiAocGFyYW1zLnJldXNlZCA9PT0gXCJyZWZcIikge1xuICAgICAgICAgICAgICAgICAgICBleHRyYWN0VG9EZWYoZW50cnkpO1xuICAgICAgICAgICAgICAgICAgICAvLyBiaW9tZS1pZ25vcmUgbGludDpcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIGZsYXR0ZW4gX3JlZnNcbiAgICAgICAgY29uc3QgZmxhdHRlblJlZiA9ICh6b2RTY2hlbWEsIHBhcmFtcykgPT4ge1xuICAgICAgICAgICAgY29uc3Qgc2VlbiA9IHRoaXMuc2Vlbi5nZXQoem9kU2NoZW1hKTtcbiAgICAgICAgICAgIGNvbnN0IHNjaGVtYSA9IHNlZW4uZGVmID8/IHNlZW4uc2NoZW1hO1xuICAgICAgICAgICAgY29uc3QgX2NhY2hlZCA9IHsgLi4uc2NoZW1hIH07XG4gICAgICAgICAgICAvLyBhbHJlYWR5IHNlZW5cbiAgICAgICAgICAgIGlmIChzZWVuLnJlZiA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIGZsYXR0ZW4gcmVmIGlmIGRlZmluZWRcbiAgICAgICAgICAgIGNvbnN0IHJlZiA9IHNlZW4ucmVmO1xuICAgICAgICAgICAgc2Vlbi5yZWYgPSBudWxsOyAvLyBwcmV2ZW50IHJlY3Vyc2lvblxuICAgICAgICAgICAgaWYgKHJlZikge1xuICAgICAgICAgICAgICAgIGZsYXR0ZW5SZWYocmVmLCBwYXJhbXMpO1xuICAgICAgICAgICAgICAgIC8vIG1lcmdlIHJlZmVyZW5jZWQgc2NoZW1hIGludG8gY3VycmVudFxuICAgICAgICAgICAgICAgIGNvbnN0IHJlZlNjaGVtYSA9IHRoaXMuc2Vlbi5nZXQocmVmKS5zY2hlbWE7XG4gICAgICAgICAgICAgICAgaWYgKHJlZlNjaGVtYS4kcmVmICYmIHBhcmFtcy50YXJnZXQgPT09IFwiZHJhZnQtN1wiKSB7XG4gICAgICAgICAgICAgICAgICAgIHNjaGVtYS5hbGxPZiA9IHNjaGVtYS5hbGxPZiA/PyBbXTtcbiAgICAgICAgICAgICAgICAgICAgc2NoZW1hLmFsbE9mLnB1c2gocmVmU2NoZW1hKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIE9iamVjdC5hc3NpZ24oc2NoZW1hLCByZWZTY2hlbWEpO1xuICAgICAgICAgICAgICAgICAgICBPYmplY3QuYXNzaWduKHNjaGVtYSwgX2NhY2hlZCk7IC8vIHByZXZlbnQgb3ZlcndyaXRpbmcgYW55IGZpZWxkcyBpbiB0aGUgb3JpZ2luYWwgc2NoZW1hXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gZXhlY3V0ZSBvdmVycmlkZXNcbiAgICAgICAgICAgIGlmICghc2Vlbi5pc1BhcmVudClcbiAgICAgICAgICAgICAgICB0aGlzLm92ZXJyaWRlKHtcbiAgICAgICAgICAgICAgICAgICAgem9kU2NoZW1hOiB6b2RTY2hlbWEsXG4gICAgICAgICAgICAgICAgICAgIGpzb25TY2hlbWE6IHNjaGVtYSxcbiAgICAgICAgICAgICAgICAgICAgcGF0aDogc2Vlbi5wYXRoID8/IFtdLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICBmb3IgKGNvbnN0IGVudHJ5IG9mIFsuLi50aGlzLnNlZW4uZW50cmllcygpXS5yZXZlcnNlKCkpIHtcbiAgICAgICAgICAgIGZsYXR0ZW5SZWYoZW50cnlbMF0sIHsgdGFyZ2V0OiB0aGlzLnRhcmdldCB9KTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCByZXN1bHQgPSB7fTtcbiAgICAgICAgaWYgKHRoaXMudGFyZ2V0ID09PSBcImRyYWZ0LTIwMjAtMTJcIikge1xuICAgICAgICAgICAgcmVzdWx0LiRzY2hlbWEgPSBcImh0dHBzOi8vanNvbi1zY2hlbWEub3JnL2RyYWZ0LzIwMjAtMTIvc2NoZW1hXCI7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodGhpcy50YXJnZXQgPT09IFwiZHJhZnQtN1wiKSB7XG4gICAgICAgICAgICByZXN1bHQuJHNjaGVtYSA9IFwiaHR0cDovL2pzb24tc2NoZW1hLm9yZy9kcmFmdC0wNy9zY2hlbWEjXCI7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oYEludmFsaWQgdGFyZ2V0OiAke3RoaXMudGFyZ2V0fWApO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwYXJhbXMuZXh0ZXJuYWw/LnVyaSkge1xuICAgICAgICAgICAgY29uc3QgaWQgPSBwYXJhbXMuZXh0ZXJuYWwucmVnaXN0cnkuZ2V0KHNjaGVtYSk/LmlkO1xuICAgICAgICAgICAgaWYgKCFpZClcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJTY2hlbWEgaXMgbWlzc2luZyBhbiBgaWRgIHByb3BlcnR5XCIpO1xuICAgICAgICAgICAgcmVzdWx0LiRpZCA9IHBhcmFtcy5leHRlcm5hbC51cmkoaWQpO1xuICAgICAgICB9XG4gICAgICAgIE9iamVjdC5hc3NpZ24ocmVzdWx0LCByb290LmRlZik7XG4gICAgICAgIC8vIGJ1aWxkIGRlZnMgb2JqZWN0XG4gICAgICAgIGNvbnN0IGRlZnMgPSBwYXJhbXMuZXh0ZXJuYWw/LmRlZnMgPz8ge307XG4gICAgICAgIGZvciAoY29uc3QgZW50cnkgb2YgdGhpcy5zZWVuLmVudHJpZXMoKSkge1xuICAgICAgICAgICAgY29uc3Qgc2VlbiA9IGVudHJ5WzFdO1xuICAgICAgICAgICAgaWYgKHNlZW4uZGVmICYmIHNlZW4uZGVmSWQpIHtcbiAgICAgICAgICAgICAgICBkZWZzW3NlZW4uZGVmSWRdID0gc2Vlbi5kZWY7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gc2V0IGRlZmluaXRpb25zIGluIHJlc3VsdFxuICAgICAgICBpZiAocGFyYW1zLmV4dGVybmFsKSB7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBpZiAoT2JqZWN0LmtleXMoZGVmcykubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnRhcmdldCA9PT0gXCJkcmFmdC0yMDIwLTEyXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LiRkZWZzID0gZGVmcztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdC5kZWZpbml0aW9ucyA9IGRlZnM7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyB0aGlzIFwiZmluYWxpemVzXCIgdGhpcyBzY2hlbWEgYW5kIGVuc3VyZXMgYWxsIGN5Y2xlcyBhcmUgcmVtb3ZlZFxuICAgICAgICAgICAgLy8gZWFjaCBjYWxsIHRvIC5lbWl0KCkgaXMgZnVuY3Rpb25hbGx5IGluZGVwZW5kZW50XG4gICAgICAgICAgICAvLyB0aG91Z2ggdGhlIHNlZW4gbWFwIGlzIHNoYXJlZFxuICAgICAgICAgICAgcmV0dXJuIEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkocmVzdWx0KSk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKF9lcnIpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkVycm9yIGNvbnZlcnRpbmcgc2NoZW1hIHRvIEpTT04uXCIpO1xuICAgICAgICB9XG4gICAgfVxufVxuZXhwb3J0IGZ1bmN0aW9uIHRvSlNPTlNjaGVtYShpbnB1dCwgX3BhcmFtcykge1xuICAgIGlmIChpbnB1dCBpbnN0YW5jZW9mICRab2RSZWdpc3RyeSkge1xuICAgICAgICBjb25zdCBnZW4gPSBuZXcgSlNPTlNjaGVtYUdlbmVyYXRvcihfcGFyYW1zKTtcbiAgICAgICAgY29uc3QgZGVmcyA9IHt9O1xuICAgICAgICBmb3IgKGNvbnN0IGVudHJ5IG9mIGlucHV0Ll9pZG1hcC5lbnRyaWVzKCkpIHtcbiAgICAgICAgICAgIGNvbnN0IFtfLCBzY2hlbWFdID0gZW50cnk7XG4gICAgICAgICAgICBnZW4ucHJvY2VzcyhzY2hlbWEpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHNjaGVtYXMgPSB7fTtcbiAgICAgICAgY29uc3QgZXh0ZXJuYWwgPSB7XG4gICAgICAgICAgICByZWdpc3RyeTogaW5wdXQsXG4gICAgICAgICAgICB1cmk6IF9wYXJhbXM/LnVyaSxcbiAgICAgICAgICAgIGRlZnMsXG4gICAgICAgIH07XG4gICAgICAgIGZvciAoY29uc3QgZW50cnkgb2YgaW5wdXQuX2lkbWFwLmVudHJpZXMoKSkge1xuICAgICAgICAgICAgY29uc3QgW2tleSwgc2NoZW1hXSA9IGVudHJ5O1xuICAgICAgICAgICAgc2NoZW1hc1trZXldID0gZ2VuLmVtaXQoc2NoZW1hLCB7XG4gICAgICAgICAgICAgICAgLi4uX3BhcmFtcyxcbiAgICAgICAgICAgICAgICBleHRlcm5hbCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGlmIChPYmplY3Qua2V5cyhkZWZzKS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBjb25zdCBkZWZzU2VnbWVudCA9IGdlbi50YXJnZXQgPT09IFwiZHJhZnQtMjAyMC0xMlwiID8gXCIkZGVmc1wiIDogXCJkZWZpbml0aW9uc1wiO1xuICAgICAgICAgICAgc2NoZW1hcy5fX3NoYXJlZCA9IHtcbiAgICAgICAgICAgICAgICBbZGVmc1NlZ21lbnRdOiBkZWZzLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4geyBzY2hlbWFzIH07XG4gICAgfVxuICAgIGNvbnN0IGdlbiA9IG5ldyBKU09OU2NoZW1hR2VuZXJhdG9yKF9wYXJhbXMpO1xuICAgIGdlbi5wcm9jZXNzKGlucHV0KTtcbiAgICByZXR1cm4gZ2VuLmVtaXQoaW5wdXQsIF9wYXJhbXMpO1xufVxuZnVuY3Rpb24gaXNUcmFuc2Zvcm1pbmcoX3NjaGVtYSwgX2N0eCkge1xuICAgIGNvbnN0IGN0eCA9IF9jdHggPz8geyBzZWVuOiBuZXcgU2V0KCkgfTtcbiAgICBpZiAoY3R4LnNlZW4uaGFzKF9zY2hlbWEpKVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgY3R4LnNlZW4uYWRkKF9zY2hlbWEpO1xuICAgIGNvbnN0IHNjaGVtYSA9IF9zY2hlbWE7XG4gICAgY29uc3QgZGVmID0gc2NoZW1hLl96b2QuZGVmO1xuICAgIHN3aXRjaCAoZGVmLnR5cGUpIHtcbiAgICAgICAgY2FzZSBcInN0cmluZ1wiOlxuICAgICAgICBjYXNlIFwibnVtYmVyXCI6XG4gICAgICAgIGNhc2UgXCJiaWdpbnRcIjpcbiAgICAgICAgY2FzZSBcImJvb2xlYW5cIjpcbiAgICAgICAgY2FzZSBcImRhdGVcIjpcbiAgICAgICAgY2FzZSBcInN5bWJvbFwiOlxuICAgICAgICBjYXNlIFwidW5kZWZpbmVkXCI6XG4gICAgICAgIGNhc2UgXCJudWxsXCI6XG4gICAgICAgIGNhc2UgXCJhbnlcIjpcbiAgICAgICAgY2FzZSBcInVua25vd25cIjpcbiAgICAgICAgY2FzZSBcIm5ldmVyXCI6XG4gICAgICAgIGNhc2UgXCJ2b2lkXCI6XG4gICAgICAgIGNhc2UgXCJsaXRlcmFsXCI6XG4gICAgICAgIGNhc2UgXCJlbnVtXCI6XG4gICAgICAgIGNhc2UgXCJuYW5cIjpcbiAgICAgICAgY2FzZSBcImZpbGVcIjpcbiAgICAgICAgY2FzZSBcInRlbXBsYXRlX2xpdGVyYWxcIjpcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgY2FzZSBcImFycmF5XCI6IHtcbiAgICAgICAgICAgIHJldHVybiBpc1RyYW5zZm9ybWluZyhkZWYuZWxlbWVudCwgY3R4KTtcbiAgICAgICAgfVxuICAgICAgICBjYXNlIFwib2JqZWN0XCI6IHtcbiAgICAgICAgICAgIGZvciAoY29uc3Qga2V5IGluIGRlZi5zaGFwZSkge1xuICAgICAgICAgICAgICAgIGlmIChpc1RyYW5zZm9ybWluZyhkZWYuc2hhcGVba2V5XSwgY3R4KSlcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSBcInVuaW9uXCI6IHtcbiAgICAgICAgICAgIGZvciAoY29uc3Qgb3B0aW9uIG9mIGRlZi5vcHRpb25zKSB7XG4gICAgICAgICAgICAgICAgaWYgKGlzVHJhbnNmb3JtaW5nKG9wdGlvbiwgY3R4KSlcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSBcImludGVyc2VjdGlvblwiOiB7XG4gICAgICAgICAgICByZXR1cm4gaXNUcmFuc2Zvcm1pbmcoZGVmLmxlZnQsIGN0eCkgfHwgaXNUcmFuc2Zvcm1pbmcoZGVmLnJpZ2h0LCBjdHgpO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgXCJ0dXBsZVwiOiB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgZGVmLml0ZW1zKSB7XG4gICAgICAgICAgICAgICAgaWYgKGlzVHJhbnNmb3JtaW5nKGl0ZW0sIGN0eCkpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGRlZi5yZXN0ICYmIGlzVHJhbnNmb3JtaW5nKGRlZi5yZXN0LCBjdHgpKVxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgXCJyZWNvcmRcIjoge1xuICAgICAgICAgICAgcmV0dXJuIGlzVHJhbnNmb3JtaW5nKGRlZi5rZXlUeXBlLCBjdHgpIHx8IGlzVHJhbnNmb3JtaW5nKGRlZi52YWx1ZVR5cGUsIGN0eCk7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSBcIm1hcFwiOiB7XG4gICAgICAgICAgICByZXR1cm4gaXNUcmFuc2Zvcm1pbmcoZGVmLmtleVR5cGUsIGN0eCkgfHwgaXNUcmFuc2Zvcm1pbmcoZGVmLnZhbHVlVHlwZSwgY3R4KTtcbiAgICAgICAgfVxuICAgICAgICBjYXNlIFwic2V0XCI6IHtcbiAgICAgICAgICAgIHJldHVybiBpc1RyYW5zZm9ybWluZyhkZWYudmFsdWVUeXBlLCBjdHgpO1xuICAgICAgICB9XG4gICAgICAgIC8vIGlubmVyIHR5cGVzXG4gICAgICAgIGNhc2UgXCJwcm9taXNlXCI6XG4gICAgICAgIGNhc2UgXCJvcHRpb25hbFwiOlxuICAgICAgICBjYXNlIFwibm9ub3B0aW9uYWxcIjpcbiAgICAgICAgY2FzZSBcIm51bGxhYmxlXCI6XG4gICAgICAgIGNhc2UgXCJyZWFkb25seVwiOlxuICAgICAgICAgICAgcmV0dXJuIGlzVHJhbnNmb3JtaW5nKGRlZi5pbm5lclR5cGUsIGN0eCk7XG4gICAgICAgIGNhc2UgXCJsYXp5XCI6XG4gICAgICAgICAgICByZXR1cm4gaXNUcmFuc2Zvcm1pbmcoZGVmLmdldHRlcigpLCBjdHgpO1xuICAgICAgICBjYXNlIFwiZGVmYXVsdFwiOiB7XG4gICAgICAgICAgICByZXR1cm4gaXNUcmFuc2Zvcm1pbmcoZGVmLmlubmVyVHlwZSwgY3R4KTtcbiAgICAgICAgfVxuICAgICAgICBjYXNlIFwicHJlZmF1bHRcIjoge1xuICAgICAgICAgICAgcmV0dXJuIGlzVHJhbnNmb3JtaW5nKGRlZi5pbm5lclR5cGUsIGN0eCk7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSBcImN1c3RvbVwiOiB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSBcInRyYW5zZm9ybVwiOiB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBjYXNlIFwicGlwZVwiOiB7XG4gICAgICAgICAgICByZXR1cm4gaXNUcmFuc2Zvcm1pbmcoZGVmLmluLCBjdHgpIHx8IGlzVHJhbnNmb3JtaW5nKGRlZi5vdXQsIGN0eCk7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSBcInN1Y2Nlc3NcIjoge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgXCJjYXRjaFwiOiB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIGRlZjtcbiAgICB9XG4gICAgdGhyb3cgbmV3IEVycm9yKGBVbmtub3duIHNjaGVtYSB0eXBlOiAke2RlZi50eXBlfWApO1xufVxuIiwiaW1wb3J0IHsgQ29udGVudEZpbHRlckZpbmlzaFJlYXNvbkVycm9yLCBMZW5ndGhGaW5pc2hSZWFzb25FcnJvciwgT3BlbkFJRXJyb3IgfSBmcm9tIFwiLi4vZXJyb3IubWpzXCI7XG5leHBvcnQgZnVuY3Rpb24gaXNDaGF0Q29tcGxldGlvbkZ1bmN0aW9uVG9vbCh0b29sKSB7XG4gICAgcmV0dXJuIHRvb2wgIT09IHVuZGVmaW5lZCAmJiAnZnVuY3Rpb24nIGluIHRvb2wgJiYgdG9vbC5mdW5jdGlvbiAhPT0gdW5kZWZpbmVkO1xufVxuZXhwb3J0IGZ1bmN0aW9uIG1ha2VQYXJzZWFibGVSZXNwb25zZUZvcm1hdChyZXNwb25zZV9mb3JtYXQsIHBhcnNlcikge1xuICAgIGNvbnN0IG9iaiA9IHsgLi4ucmVzcG9uc2VfZm9ybWF0IH07XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnRpZXMob2JqLCB7XG4gICAgICAgICRicmFuZDoge1xuICAgICAgICAgICAgdmFsdWU6ICdhdXRvLXBhcnNlYWJsZS1yZXNwb25zZS1mb3JtYXQnLFxuICAgICAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIH0sXG4gICAgICAgICRwYXJzZVJhdzoge1xuICAgICAgICAgICAgdmFsdWU6IHBhcnNlcixcbiAgICAgICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICB9LFxuICAgIH0pO1xuICAgIHJldHVybiBvYmo7XG59XG5leHBvcnQgZnVuY3Rpb24gbWFrZVBhcnNlYWJsZVRleHRGb3JtYXQocmVzcG9uc2VfZm9ybWF0LCBwYXJzZXIpIHtcbiAgICBjb25zdCBvYmogPSB7IC4uLnJlc3BvbnNlX2Zvcm1hdCB9O1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKG9iaiwge1xuICAgICAgICAkYnJhbmQ6IHtcbiAgICAgICAgICAgIHZhbHVlOiAnYXV0by1wYXJzZWFibGUtcmVzcG9uc2UtZm9ybWF0JyxcbiAgICAgICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICB9LFxuICAgICAgICAkcGFyc2VSYXc6IHtcbiAgICAgICAgICAgIHZhbHVlOiBwYXJzZXIsXG4gICAgICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgfSxcbiAgICB9KTtcbiAgICByZXR1cm4gb2JqO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGlzQXV0b1BhcnNhYmxlUmVzcG9uc2VGb3JtYXQocmVzcG9uc2VfZm9ybWF0KSB7XG4gICAgcmV0dXJuIHJlc3BvbnNlX2Zvcm1hdD8uWyckYnJhbmQnXSA9PT0gJ2F1dG8tcGFyc2VhYmxlLXJlc3BvbnNlLWZvcm1hdCc7XG59XG5leHBvcnQgZnVuY3Rpb24gbWFrZVBhcnNlYWJsZVRvb2wodG9vbCwgeyBwYXJzZXIsIGNhbGxiYWNrLCB9KSB7XG4gICAgY29uc3Qgb2JqID0geyAuLi50b29sIH07XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnRpZXMob2JqLCB7XG4gICAgICAgICRicmFuZDoge1xuICAgICAgICAgICAgdmFsdWU6ICdhdXRvLXBhcnNlYWJsZS10b29sJyxcbiAgICAgICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICB9LFxuICAgICAgICAkcGFyc2VSYXc6IHtcbiAgICAgICAgICAgIHZhbHVlOiBwYXJzZXIsXG4gICAgICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgfSxcbiAgICAgICAgJGNhbGxiYWNrOiB7XG4gICAgICAgICAgICB2YWx1ZTogY2FsbGJhY2ssXG4gICAgICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgfSxcbiAgICB9KTtcbiAgICByZXR1cm4gb2JqO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGlzQXV0b1BhcnNhYmxlVG9vbCh0b29sKSB7XG4gICAgcmV0dXJuIHRvb2w/LlsnJGJyYW5kJ10gPT09ICdhdXRvLXBhcnNlYWJsZS10b29sJztcbn1cbmV4cG9ydCBmdW5jdGlvbiBtYXliZVBhcnNlQ2hhdENvbXBsZXRpb24oY29tcGxldGlvbiwgcGFyYW1zKSB7XG4gICAgaWYgKCFwYXJhbXMgfHwgIWhhc0F1dG9QYXJzZWFibGVJbnB1dChwYXJhbXMpKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAuLi5jb21wbGV0aW9uLFxuICAgICAgICAgICAgY2hvaWNlczogY29tcGxldGlvbi5jaG9pY2VzLm1hcCgoY2hvaWNlKSA9PiB7XG4gICAgICAgICAgICAgICAgYXNzZXJ0VG9vbENhbGxzQXJlQ2hhdENvbXBsZXRpb25GdW5jdGlvblRvb2xDYWxscyhjaG9pY2UubWVzc2FnZS50b29sX2NhbGxzKTtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAuLi5jaG9pY2UsXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLmNob2ljZS5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VkOiBudWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgLi4uKGNob2ljZS5tZXNzYWdlLnRvb2xfY2FsbHMgP1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9vbF9jYWxsczogY2hvaWNlLm1lc3NhZ2UudG9vbF9jYWxscyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgOiB1bmRlZmluZWQpLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9KSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIHBhcnNlQ2hhdENvbXBsZXRpb24oY29tcGxldGlvbiwgcGFyYW1zKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBwYXJzZUNoYXRDb21wbGV0aW9uKGNvbXBsZXRpb24sIHBhcmFtcykge1xuICAgIGNvbnN0IGNob2ljZXMgPSBjb21wbGV0aW9uLmNob2ljZXMubWFwKChjaG9pY2UpID0+IHtcbiAgICAgICAgaWYgKGNob2ljZS5maW5pc2hfcmVhc29uID09PSAnbGVuZ3RoJykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IExlbmd0aEZpbmlzaFJlYXNvbkVycm9yKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNob2ljZS5maW5pc2hfcmVhc29uID09PSAnY29udGVudF9maWx0ZXInKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgQ29udGVudEZpbHRlckZpbmlzaFJlYXNvbkVycm9yKCk7XG4gICAgICAgIH1cbiAgICAgICAgYXNzZXJ0VG9vbENhbGxzQXJlQ2hhdENvbXBsZXRpb25GdW5jdGlvblRvb2xDYWxscyhjaG9pY2UubWVzc2FnZS50b29sX2NhbGxzKTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIC4uLmNob2ljZSxcbiAgICAgICAgICAgIG1lc3NhZ2U6IHtcbiAgICAgICAgICAgICAgICAuLi5jaG9pY2UubWVzc2FnZSxcbiAgICAgICAgICAgICAgICAuLi4oY2hvaWNlLm1lc3NhZ2UudG9vbF9jYWxscyA/XG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvb2xfY2FsbHM6IGNob2ljZS5tZXNzYWdlLnRvb2xfY2FsbHM/Lm1hcCgodG9vbENhbGwpID0+IHBhcnNlVG9vbENhbGwocGFyYW1zLCB0b29sQ2FsbCkpID8/IHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICA6IHVuZGVmaW5lZCksXG4gICAgICAgICAgICAgICAgcGFyc2VkOiBjaG9pY2UubWVzc2FnZS5jb250ZW50ICYmICFjaG9pY2UubWVzc2FnZS5yZWZ1c2FsID9cbiAgICAgICAgICAgICAgICAgICAgcGFyc2VSZXNwb25zZUZvcm1hdChwYXJhbXMsIGNob2ljZS5tZXNzYWdlLmNvbnRlbnQpXG4gICAgICAgICAgICAgICAgICAgIDogbnVsbCxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH07XG4gICAgfSk7XG4gICAgcmV0dXJuIHsgLi4uY29tcGxldGlvbiwgY2hvaWNlcyB9O1xufVxuZnVuY3Rpb24gcGFyc2VSZXNwb25zZUZvcm1hdChwYXJhbXMsIGNvbnRlbnQpIHtcbiAgICBpZiAocGFyYW1zLnJlc3BvbnNlX2Zvcm1hdD8udHlwZSAhPT0gJ2pzb25fc2NoZW1hJykge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgaWYgKHBhcmFtcy5yZXNwb25zZV9mb3JtYXQ/LnR5cGUgPT09ICdqc29uX3NjaGVtYScpIHtcbiAgICAgICAgaWYgKCckcGFyc2VSYXcnIGluIHBhcmFtcy5yZXNwb25zZV9mb3JtYXQpIHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlX2Zvcm1hdCA9IHBhcmFtcy5yZXNwb25zZV9mb3JtYXQ7XG4gICAgICAgICAgICByZXR1cm4gcmVzcG9uc2VfZm9ybWF0LiRwYXJzZVJhdyhjb250ZW50KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gSlNPTi5wYXJzZShjb250ZW50KTtcbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG59XG5mdW5jdGlvbiBwYXJzZVRvb2xDYWxsKHBhcmFtcywgdG9vbENhbGwpIHtcbiAgICBjb25zdCBpbnB1dFRvb2wgPSBwYXJhbXMudG9vbHM/LmZpbmQoKGlucHV0VG9vbCkgPT4gaXNDaGF0Q29tcGxldGlvbkZ1bmN0aW9uVG9vbChpbnB1dFRvb2wpICYmIGlucHV0VG9vbC5mdW5jdGlvbj8ubmFtZSA9PT0gdG9vbENhbGwuZnVuY3Rpb24ubmFtZSk7IC8vIFRTIGRvZXNuJ3QgbmFycm93IGJhc2VkIG9uIGlzQ2hhdENvbXBsZXRpb25Ub29sXG4gICAgcmV0dXJuIHtcbiAgICAgICAgLi4udG9vbENhbGwsXG4gICAgICAgIGZ1bmN0aW9uOiB7XG4gICAgICAgICAgICAuLi50b29sQ2FsbC5mdW5jdGlvbixcbiAgICAgICAgICAgIHBhcnNlZF9hcmd1bWVudHM6IGlzQXV0b1BhcnNhYmxlVG9vbChpbnB1dFRvb2wpID8gaW5wdXRUb29sLiRwYXJzZVJhdyh0b29sQ2FsbC5mdW5jdGlvbi5hcmd1bWVudHMpXG4gICAgICAgICAgICAgICAgOiBpbnB1dFRvb2w/LmZ1bmN0aW9uLnN0cmljdCA/IEpTT04ucGFyc2UodG9vbENhbGwuZnVuY3Rpb24uYXJndW1lbnRzKVxuICAgICAgICAgICAgICAgICAgICA6IG51bGwsXG4gICAgICAgIH0sXG4gICAgfTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBzaG91bGRQYXJzZVRvb2xDYWxsKHBhcmFtcywgdG9vbENhbGwpIHtcbiAgICBpZiAoIXBhcmFtcyB8fCAhKCd0b29scycgaW4gcGFyYW1zKSB8fCAhcGFyYW1zLnRvb2xzKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgY29uc3QgaW5wdXRUb29sID0gcGFyYW1zLnRvb2xzPy5maW5kKChpbnB1dFRvb2wpID0+IGlzQ2hhdENvbXBsZXRpb25GdW5jdGlvblRvb2woaW5wdXRUb29sKSAmJiBpbnB1dFRvb2wuZnVuY3Rpb24/Lm5hbWUgPT09IHRvb2xDYWxsLmZ1bmN0aW9uLm5hbWUpO1xuICAgIHJldHVybiAoaXNDaGF0Q29tcGxldGlvbkZ1bmN0aW9uVG9vbChpbnB1dFRvb2wpICYmXG4gICAgICAgIChpc0F1dG9QYXJzYWJsZVRvb2woaW5wdXRUb29sKSB8fCBpbnB1dFRvb2w/LmZ1bmN0aW9uLnN0cmljdCB8fCBmYWxzZSkpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGhhc0F1dG9QYXJzZWFibGVJbnB1dChwYXJhbXMpIHtcbiAgICBpZiAoaXNBdXRvUGFyc2FibGVSZXNwb25zZUZvcm1hdChwYXJhbXMucmVzcG9uc2VfZm9ybWF0KSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIChwYXJhbXMudG9vbHM/LnNvbWUoKHQpID0+IGlzQXV0b1BhcnNhYmxlVG9vbCh0KSB8fCAodC50eXBlID09PSAnZnVuY3Rpb24nICYmIHQuZnVuY3Rpb24uc3RyaWN0ID09PSB0cnVlKSkgPz8gZmFsc2UpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGFzc2VydFRvb2xDYWxsc0FyZUNoYXRDb21wbGV0aW9uRnVuY3Rpb25Ub29sQ2FsbHModG9vbENhbGxzKSB7XG4gICAgZm9yIChjb25zdCB0b29sQ2FsbCBvZiB0b29sQ2FsbHMgfHwgW10pIHtcbiAgICAgICAgaWYgKHRvb2xDYWxsLnR5cGUgIT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBPcGVuQUlFcnJvcihgQ3VycmVudGx5IG9ubHkgXFxgZnVuY3Rpb25cXGAgdG9vbCBjYWxscyBhcmUgc3VwcG9ydGVkOyBSZWNlaXZlZCBcXGAke3Rvb2xDYWxsLnR5cGV9XFxgYCk7XG4gICAgICAgIH1cbiAgICB9XG59XG5leHBvcnQgZnVuY3Rpb24gdmFsaWRhdGVJbnB1dFRvb2xzKHRvb2xzKSB7XG4gICAgZm9yIChjb25zdCB0b29sIG9mIHRvb2xzID8/IFtdKSB7XG4gICAgICAgIGlmICh0b29sLnR5cGUgIT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBPcGVuQUlFcnJvcihgQ3VycmVudGx5IG9ubHkgXFxgZnVuY3Rpb25cXGAgdG9vbCB0eXBlcyBzdXBwb3J0IGF1dG8tcGFyc2luZzsgUmVjZWl2ZWQgXFxgJHt0b29sLnR5cGV9XFxgYCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRvb2wuZnVuY3Rpb24uc3RyaWN0ICE9PSB0cnVlKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgT3BlbkFJRXJyb3IoYFRoZSBcXGAke3Rvb2wuZnVuY3Rpb24ubmFtZX1cXGAgdG9vbCBpcyBub3QgbWFya2VkIHdpdGggXFxgc3RyaWN0OiB0cnVlXFxgLiBPbmx5IHN0cmljdCBmdW5jdGlvbiB0b29scyBjYW4gYmUgYXV0by1wYXJzZWRgKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBhcnNlci5tanMubWFwIiwiZXhwb3J0IGNvbnN0IGlnbm9yZU92ZXJyaWRlID0gU3ltYm9sKCdMZXQgem9kVG9Kc29uU2NoZW1hIGRlY2lkZSBvbiB3aGljaCBwYXJzZXIgdG8gdXNlJyk7XG5jb25zdCBkZWZhdWx0T3B0aW9ucyA9IHtcbiAgICBuYW1lOiB1bmRlZmluZWQsXG4gICAgJHJlZlN0cmF0ZWd5OiAncm9vdCcsXG4gICAgZWZmZWN0U3RyYXRlZ3k6ICdpbnB1dCcsXG4gICAgcGlwZVN0cmF0ZWd5OiAnYWxsJyxcbiAgICBkYXRlU3RyYXRlZ3k6ICdmb3JtYXQ6ZGF0ZS10aW1lJyxcbiAgICBtYXBTdHJhdGVneTogJ2VudHJpZXMnLFxuICAgIG51bGxhYmxlU3RyYXRlZ3k6ICdmcm9tLXRhcmdldCcsXG4gICAgcmVtb3ZlQWRkaXRpb25hbFN0cmF0ZWd5OiAncGFzc3Rocm91Z2gnLFxuICAgIGRlZmluaXRpb25QYXRoOiAnZGVmaW5pdGlvbnMnLFxuICAgIHRhcmdldDogJ2pzb25TY2hlbWE3JyxcbiAgICBzdHJpY3RVbmlvbnM6IGZhbHNlLFxuICAgIGVycm9yTWVzc2FnZXM6IGZhbHNlLFxuICAgIG1hcmtkb3duRGVzY3JpcHRpb246IGZhbHNlLFxuICAgIHBhdHRlcm5TdHJhdGVneTogJ2VzY2FwZScsXG4gICAgYXBwbHlSZWdleEZsYWdzOiBmYWxzZSxcbiAgICBlbWFpbFN0cmF0ZWd5OiAnZm9ybWF0OmVtYWlsJyxcbiAgICBiYXNlNjRTdHJhdGVneTogJ2NvbnRlbnRFbmNvZGluZzpiYXNlNjQnLFxuICAgIG5hbWVTdHJhdGVneTogJ3JlZicsXG59O1xuZXhwb3J0IGNvbnN0IGdldERlZmF1bHRPcHRpb25zID0gKG9wdGlvbnMpID0+IHtcbiAgICAvLyBXZSBuZWVkIHRvIGFkZCBgZGVmaW5pdGlvbnNgIGhlcmUgYXMgd2UgbWF5IG11dGF0ZSBpdFxuICAgIHJldHVybiAodHlwZW9mIG9wdGlvbnMgPT09ICdzdHJpbmcnID9cbiAgICAgICAge1xuICAgICAgICAgICAgLi4uZGVmYXVsdE9wdGlvbnMsXG4gICAgICAgICAgICBiYXNlUGF0aDogWycjJ10sXG4gICAgICAgICAgICBkZWZpbml0aW9uczoge30sXG4gICAgICAgICAgICBuYW1lOiBvcHRpb25zLFxuICAgICAgICB9XG4gICAgICAgIDoge1xuICAgICAgICAgICAgLi4uZGVmYXVsdE9wdGlvbnMsXG4gICAgICAgICAgICBiYXNlUGF0aDogWycjJ10sXG4gICAgICAgICAgICBkZWZpbml0aW9uczoge30sXG4gICAgICAgICAgICAuLi5vcHRpb25zLFxuICAgICAgICB9KTtcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1PcHRpb25zLm1qcy5tYXAiLCJleHBvcnQgY29uc3Qgem9kRGVmID0gKHpvZFNjaGVtYSkgPT4ge1xuICAgIHJldHVybiAnX2RlZicgaW4gem9kU2NoZW1hID8gem9kU2NoZW1hLl9kZWYgOiB6b2RTY2hlbWE7XG59O1xuZXhwb3J0IGZ1bmN0aW9uIGlzRW1wdHlPYmoob2JqKSB7XG4gICAgaWYgKCFvYmopXG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIGZvciAoY29uc3QgX2sgaW4gb2JqKVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgcmV0dXJuIHRydWU7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD11dGlsLm1qcy5tYXAiLCJpbXBvcnQgeyBnZXREZWZhdWx0T3B0aW9ucyB9IGZyb20gXCIuL09wdGlvbnMubWpzXCI7XG5pbXBvcnQgeyB6b2REZWYgfSBmcm9tIFwiLi91dGlsLm1qc1wiO1xuZXhwb3J0IGNvbnN0IGdldFJlZnMgPSAob3B0aW9ucykgPT4ge1xuICAgIGNvbnN0IF9vcHRpb25zID0gZ2V0RGVmYXVsdE9wdGlvbnMob3B0aW9ucyk7XG4gICAgY29uc3QgY3VycmVudFBhdGggPSBfb3B0aW9ucy5uYW1lICE9PSB1bmRlZmluZWQgP1xuICAgICAgICBbLi4uX29wdGlvbnMuYmFzZVBhdGgsIF9vcHRpb25zLmRlZmluaXRpb25QYXRoLCBfb3B0aW9ucy5uYW1lXVxuICAgICAgICA6IF9vcHRpb25zLmJhc2VQYXRoO1xuICAgIHJldHVybiB7XG4gICAgICAgIC4uLl9vcHRpb25zLFxuICAgICAgICBjdXJyZW50UGF0aDogY3VycmVudFBhdGgsXG4gICAgICAgIHByb3BlcnR5UGF0aDogdW5kZWZpbmVkLFxuICAgICAgICBzZWVuUmVmczogbmV3IFNldCgpLFxuICAgICAgICBzZWVuOiBuZXcgTWFwKE9iamVjdC5lbnRyaWVzKF9vcHRpb25zLmRlZmluaXRpb25zKS5tYXAoKFtuYW1lLCBkZWZdKSA9PiBbXG4gICAgICAgICAgICB6b2REZWYoZGVmKSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBkZWY6IHpvZERlZihkZWYpLFxuICAgICAgICAgICAgICAgIHBhdGg6IFsuLi5fb3B0aW9ucy5iYXNlUGF0aCwgX29wdGlvbnMuZGVmaW5pdGlvblBhdGgsIG5hbWVdLFxuICAgICAgICAgICAgICAgIC8vIFJlc29sdXRpb24gb2YgcmVmZXJlbmNlcyB3aWxsIGJlIGZvcmNlZCBldmVuIHRob3VnaCBzZWVuLCBzbyBpdCdzIG9rIHRoYXQgdGhlIHNjaGVtYSBpcyB1bmRlZmluZWQgaGVyZSBmb3Igbm93LlxuICAgICAgICAgICAgICAgIGpzb25TY2hlbWE6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIF0pKSxcbiAgICB9O1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVJlZnMubWpzLm1hcCIsImV4cG9ydCBmdW5jdGlvbiBhZGRFcnJvck1lc3NhZ2UocmVzLCBrZXksIGVycm9yTWVzc2FnZSwgcmVmcykge1xuICAgIGlmICghcmVmcz8uZXJyb3JNZXNzYWdlcylcbiAgICAgICAgcmV0dXJuO1xuICAgIGlmIChlcnJvck1lc3NhZ2UpIHtcbiAgICAgICAgcmVzLmVycm9yTWVzc2FnZSA9IHtcbiAgICAgICAgICAgIC4uLnJlcy5lcnJvck1lc3NhZ2UsXG4gICAgICAgICAgICBba2V5XTogZXJyb3JNZXNzYWdlLFxuICAgICAgICB9O1xuICAgIH1cbn1cbmV4cG9ydCBmdW5jdGlvbiBzZXRSZXNwb25zZVZhbHVlQW5kRXJyb3JzKHJlcywga2V5LCB2YWx1ZSwgZXJyb3JNZXNzYWdlLCByZWZzKSB7XG4gICAgcmVzW2tleV0gPSB2YWx1ZTtcbiAgICBhZGRFcnJvck1lc3NhZ2UocmVzLCBrZXksIGVycm9yTWVzc2FnZSwgcmVmcyk7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1lcnJvck1lc3NhZ2VzLm1qcy5tYXAiLCJleHBvcnQgdmFyIHV0aWw7XG4oZnVuY3Rpb24gKHV0aWwpIHtcbiAgICB1dGlsLmFzc2VydEVxdWFsID0gKF8pID0+IHsgfTtcbiAgICBmdW5jdGlvbiBhc3NlcnRJcyhfYXJnKSB7IH1cbiAgICB1dGlsLmFzc2VydElzID0gYXNzZXJ0SXM7XG4gICAgZnVuY3Rpb24gYXNzZXJ0TmV2ZXIoX3gpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCk7XG4gICAgfVxuICAgIHV0aWwuYXNzZXJ0TmV2ZXIgPSBhc3NlcnROZXZlcjtcbiAgICB1dGlsLmFycmF5VG9FbnVtID0gKGl0ZW1zKSA9PiB7XG4gICAgICAgIGNvbnN0IG9iaiA9IHt9O1xuICAgICAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgaXRlbXMpIHtcbiAgICAgICAgICAgIG9ialtpdGVtXSA9IGl0ZW07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG9iajtcbiAgICB9O1xuICAgIHV0aWwuZ2V0VmFsaWRFbnVtVmFsdWVzID0gKG9iaikgPT4ge1xuICAgICAgICBjb25zdCB2YWxpZEtleXMgPSB1dGlsLm9iamVjdEtleXMob2JqKS5maWx0ZXIoKGspID0+IHR5cGVvZiBvYmpbb2JqW2tdXSAhPT0gXCJudW1iZXJcIik7XG4gICAgICAgIGNvbnN0IGZpbHRlcmVkID0ge307XG4gICAgICAgIGZvciAoY29uc3QgayBvZiB2YWxpZEtleXMpIHtcbiAgICAgICAgICAgIGZpbHRlcmVkW2tdID0gb2JqW2tdO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB1dGlsLm9iamVjdFZhbHVlcyhmaWx0ZXJlZCk7XG4gICAgfTtcbiAgICB1dGlsLm9iamVjdFZhbHVlcyA9IChvYmopID0+IHtcbiAgICAgICAgcmV0dXJuIHV0aWwub2JqZWN0S2V5cyhvYmopLm1hcChmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgcmV0dXJuIG9ialtlXTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICB1dGlsLm9iamVjdEtleXMgPSB0eXBlb2YgT2JqZWN0LmtleXMgPT09IFwiZnVuY3Rpb25cIiAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIGJhbi9iYW5cbiAgICAgICAgPyAob2JqKSA9PiBPYmplY3Qua2V5cyhvYmopIC8vIGVzbGludC1kaXNhYmxlLWxpbmUgYmFuL2JhblxuICAgICAgICA6IChvYmplY3QpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGtleXMgPSBbXTtcbiAgICAgICAgICAgIGZvciAoY29uc3Qga2V5IGluIG9iamVjdCkge1xuICAgICAgICAgICAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBrZXkpKSB7XG4gICAgICAgICAgICAgICAgICAgIGtleXMucHVzaChrZXkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBrZXlzO1xuICAgICAgICB9O1xuICAgIHV0aWwuZmluZCA9IChhcnIsIGNoZWNrZXIpID0+IHtcbiAgICAgICAgZm9yIChjb25zdCBpdGVtIG9mIGFycikge1xuICAgICAgICAgICAgaWYgKGNoZWNrZXIoaXRlbSkpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGl0ZW07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9O1xuICAgIHV0aWwuaXNJbnRlZ2VyID0gdHlwZW9mIE51bWJlci5pc0ludGVnZXIgPT09IFwiZnVuY3Rpb25cIlxuICAgICAgICA/ICh2YWwpID0+IE51bWJlci5pc0ludGVnZXIodmFsKSAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIGJhbi9iYW5cbiAgICAgICAgOiAodmFsKSA9PiB0eXBlb2YgdmFsID09PSBcIm51bWJlclwiICYmIE51bWJlci5pc0Zpbml0ZSh2YWwpICYmIE1hdGguZmxvb3IodmFsKSA9PT0gdmFsO1xuICAgIGZ1bmN0aW9uIGpvaW5WYWx1ZXMoYXJyYXksIHNlcGFyYXRvciA9IFwiIHwgXCIpIHtcbiAgICAgICAgcmV0dXJuIGFycmF5Lm1hcCgodmFsKSA9PiAodHlwZW9mIHZhbCA9PT0gXCJzdHJpbmdcIiA/IGAnJHt2YWx9J2AgOiB2YWwpKS5qb2luKHNlcGFyYXRvcik7XG4gICAgfVxuICAgIHV0aWwuam9pblZhbHVlcyA9IGpvaW5WYWx1ZXM7XG4gICAgdXRpbC5qc29uU3RyaW5naWZ5UmVwbGFjZXIgPSAoXywgdmFsdWUpID0+IHtcbiAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gXCJiaWdpbnRcIikge1xuICAgICAgICAgICAgcmV0dXJuIHZhbHVlLnRvU3RyaW5nKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH07XG59KSh1dGlsIHx8ICh1dGlsID0ge30pKTtcbmV4cG9ydCB2YXIgb2JqZWN0VXRpbDtcbihmdW5jdGlvbiAob2JqZWN0VXRpbCkge1xuICAgIG9iamVjdFV0aWwubWVyZ2VTaGFwZXMgPSAoZmlyc3QsIHNlY29uZCkgPT4ge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgLi4uZmlyc3QsXG4gICAgICAgICAgICAuLi5zZWNvbmQsIC8vIHNlY29uZCBvdmVyd3JpdGVzIGZpcnN0XG4gICAgICAgIH07XG4gICAgfTtcbn0pKG9iamVjdFV0aWwgfHwgKG9iamVjdFV0aWwgPSB7fSkpO1xuZXhwb3J0IGNvbnN0IFpvZFBhcnNlZFR5cGUgPSB1dGlsLmFycmF5VG9FbnVtKFtcbiAgICBcInN0cmluZ1wiLFxuICAgIFwibmFuXCIsXG4gICAgXCJudW1iZXJcIixcbiAgICBcImludGVnZXJcIixcbiAgICBcImZsb2F0XCIsXG4gICAgXCJib29sZWFuXCIsXG4gICAgXCJkYXRlXCIsXG4gICAgXCJiaWdpbnRcIixcbiAgICBcInN5bWJvbFwiLFxuICAgIFwiZnVuY3Rpb25cIixcbiAgICBcInVuZGVmaW5lZFwiLFxuICAgIFwibnVsbFwiLFxuICAgIFwiYXJyYXlcIixcbiAgICBcIm9iamVjdFwiLFxuICAgIFwidW5rbm93blwiLFxuICAgIFwicHJvbWlzZVwiLFxuICAgIFwidm9pZFwiLFxuICAgIFwibmV2ZXJcIixcbiAgICBcIm1hcFwiLFxuICAgIFwic2V0XCIsXG5dKTtcbmV4cG9ydCBjb25zdCBnZXRQYXJzZWRUeXBlID0gKGRhdGEpID0+IHtcbiAgICBjb25zdCB0ID0gdHlwZW9mIGRhdGE7XG4gICAgc3dpdGNoICh0KSB7XG4gICAgICAgIGNhc2UgXCJ1bmRlZmluZWRcIjpcbiAgICAgICAgICAgIHJldHVybiBab2RQYXJzZWRUeXBlLnVuZGVmaW5lZDtcbiAgICAgICAgY2FzZSBcInN0cmluZ1wiOlxuICAgICAgICAgICAgcmV0dXJuIFpvZFBhcnNlZFR5cGUuc3RyaW5nO1xuICAgICAgICBjYXNlIFwibnVtYmVyXCI6XG4gICAgICAgICAgICByZXR1cm4gTnVtYmVyLmlzTmFOKGRhdGEpID8gWm9kUGFyc2VkVHlwZS5uYW4gOiBab2RQYXJzZWRUeXBlLm51bWJlcjtcbiAgICAgICAgY2FzZSBcImJvb2xlYW5cIjpcbiAgICAgICAgICAgIHJldHVybiBab2RQYXJzZWRUeXBlLmJvb2xlYW47XG4gICAgICAgIGNhc2UgXCJmdW5jdGlvblwiOlxuICAgICAgICAgICAgcmV0dXJuIFpvZFBhcnNlZFR5cGUuZnVuY3Rpb247XG4gICAgICAgIGNhc2UgXCJiaWdpbnRcIjpcbiAgICAgICAgICAgIHJldHVybiBab2RQYXJzZWRUeXBlLmJpZ2ludDtcbiAgICAgICAgY2FzZSBcInN5bWJvbFwiOlxuICAgICAgICAgICAgcmV0dXJuIFpvZFBhcnNlZFR5cGUuc3ltYm9sO1xuICAgICAgICBjYXNlIFwib2JqZWN0XCI6XG4gICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShkYXRhKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBab2RQYXJzZWRUeXBlLmFycmF5O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGRhdGEgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gWm9kUGFyc2VkVHlwZS5udWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGRhdGEudGhlbiAmJiB0eXBlb2YgZGF0YS50aGVuID09PSBcImZ1bmN0aW9uXCIgJiYgZGF0YS5jYXRjaCAmJiB0eXBlb2YgZGF0YS5jYXRjaCA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFpvZFBhcnNlZFR5cGUucHJvbWlzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0eXBlb2YgTWFwICE9PSBcInVuZGVmaW5lZFwiICYmIGRhdGEgaW5zdGFuY2VvZiBNYXApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gWm9kUGFyc2VkVHlwZS5tYXA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodHlwZW9mIFNldCAhPT0gXCJ1bmRlZmluZWRcIiAmJiBkYXRhIGluc3RhbmNlb2YgU2V0KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFpvZFBhcnNlZFR5cGUuc2V0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHR5cGVvZiBEYXRlICE9PSBcInVuZGVmaW5lZFwiICYmIGRhdGEgaW5zdGFuY2VvZiBEYXRlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFpvZFBhcnNlZFR5cGUuZGF0ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBab2RQYXJzZWRUeXBlLm9iamVjdDtcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiBab2RQYXJzZWRUeXBlLnVua25vd247XG4gICAgfVxufTtcbiIsImltcG9ydCB7IHV0aWwgfSBmcm9tIFwiLi9oZWxwZXJzL3V0aWwuanNcIjtcbmV4cG9ydCBjb25zdCBab2RJc3N1ZUNvZGUgPSB1dGlsLmFycmF5VG9FbnVtKFtcbiAgICBcImludmFsaWRfdHlwZVwiLFxuICAgIFwiaW52YWxpZF9saXRlcmFsXCIsXG4gICAgXCJjdXN0b21cIixcbiAgICBcImludmFsaWRfdW5pb25cIixcbiAgICBcImludmFsaWRfdW5pb25fZGlzY3JpbWluYXRvclwiLFxuICAgIFwiaW52YWxpZF9lbnVtX3ZhbHVlXCIsXG4gICAgXCJ1bnJlY29nbml6ZWRfa2V5c1wiLFxuICAgIFwiaW52YWxpZF9hcmd1bWVudHNcIixcbiAgICBcImludmFsaWRfcmV0dXJuX3R5cGVcIixcbiAgICBcImludmFsaWRfZGF0ZVwiLFxuICAgIFwiaW52YWxpZF9zdHJpbmdcIixcbiAgICBcInRvb19zbWFsbFwiLFxuICAgIFwidG9vX2JpZ1wiLFxuICAgIFwiaW52YWxpZF9pbnRlcnNlY3Rpb25fdHlwZXNcIixcbiAgICBcIm5vdF9tdWx0aXBsZV9vZlwiLFxuICAgIFwibm90X2Zpbml0ZVwiLFxuXSk7XG5leHBvcnQgY29uc3QgcXVvdGVsZXNzSnNvbiA9IChvYmopID0+IHtcbiAgICBjb25zdCBqc29uID0gSlNPTi5zdHJpbmdpZnkob2JqLCBudWxsLCAyKTtcbiAgICByZXR1cm4ganNvbi5yZXBsYWNlKC9cIihbXlwiXSspXCI6L2csIFwiJDE6XCIpO1xufTtcbmV4cG9ydCBjbGFzcyBab2RFcnJvciBleHRlbmRzIEVycm9yIHtcbiAgICBnZXQgZXJyb3JzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5pc3N1ZXM7XG4gICAgfVxuICAgIGNvbnN0cnVjdG9yKGlzc3Vlcykge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLmlzc3VlcyA9IFtdO1xuICAgICAgICB0aGlzLmFkZElzc3VlID0gKHN1YikgPT4ge1xuICAgICAgICAgICAgdGhpcy5pc3N1ZXMgPSBbLi4udGhpcy5pc3N1ZXMsIHN1Yl07XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuYWRkSXNzdWVzID0gKHN1YnMgPSBbXSkgPT4ge1xuICAgICAgICAgICAgdGhpcy5pc3N1ZXMgPSBbLi4udGhpcy5pc3N1ZXMsIC4uLnN1YnNdO1xuICAgICAgICB9O1xuICAgICAgICBjb25zdCBhY3R1YWxQcm90byA9IG5ldy50YXJnZXQucHJvdG90eXBlO1xuICAgICAgICBpZiAoT2JqZWN0LnNldFByb3RvdHlwZU9mKSB7XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgYmFuL2JhblxuICAgICAgICAgICAgT2JqZWN0LnNldFByb3RvdHlwZU9mKHRoaXMsIGFjdHVhbFByb3RvKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuX19wcm90b19fID0gYWN0dWFsUHJvdG87XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5uYW1lID0gXCJab2RFcnJvclwiO1xuICAgICAgICB0aGlzLmlzc3VlcyA9IGlzc3VlcztcbiAgICB9XG4gICAgZm9ybWF0KF9tYXBwZXIpIHtcbiAgICAgICAgY29uc3QgbWFwcGVyID0gX21hcHBlciB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGlzc3VlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGlzc3VlLm1lc3NhZ2U7XG4gICAgICAgICAgICB9O1xuICAgICAgICBjb25zdCBmaWVsZEVycm9ycyA9IHsgX2Vycm9yczogW10gfTtcbiAgICAgICAgY29uc3QgcHJvY2Vzc0Vycm9yID0gKGVycm9yKSA9PiB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGlzc3VlIG9mIGVycm9yLmlzc3Vlcykge1xuICAgICAgICAgICAgICAgIGlmIChpc3N1ZS5jb2RlID09PSBcImludmFsaWRfdW5pb25cIikge1xuICAgICAgICAgICAgICAgICAgICBpc3N1ZS51bmlvbkVycm9ycy5tYXAocHJvY2Vzc0Vycm9yKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoaXNzdWUuY29kZSA9PT0gXCJpbnZhbGlkX3JldHVybl90eXBlXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgcHJvY2Vzc0Vycm9yKGlzc3VlLnJldHVyblR5cGVFcnJvcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGlzc3VlLmNvZGUgPT09IFwiaW52YWxpZF9hcmd1bWVudHNcIikge1xuICAgICAgICAgICAgICAgICAgICBwcm9jZXNzRXJyb3IoaXNzdWUuYXJndW1lbnRzRXJyb3IpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChpc3N1ZS5wYXRoLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICBmaWVsZEVycm9ycy5fZXJyb3JzLnB1c2gobWFwcGVyKGlzc3VlKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBsZXQgY3VyciA9IGZpZWxkRXJyb3JzO1xuICAgICAgICAgICAgICAgICAgICBsZXQgaSA9IDA7XG4gICAgICAgICAgICAgICAgICAgIHdoaWxlIChpIDwgaXNzdWUucGF0aC5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGVsID0gaXNzdWUucGF0aFtpXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRlcm1pbmFsID0gaSA9PT0gaXNzdWUucGF0aC5sZW5ndGggLSAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF0ZXJtaW5hbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJbZWxdID0gY3VycltlbF0gfHwgeyBfZXJyb3JzOiBbXSB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmICh0eXBlb2YgZWwgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgIGN1cnJbZWxdID0gY3VycltlbF0gfHwgeyBfZXJyb3JzOiBbXSB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIH0gZWxzZSBpZiAodHlwZW9mIGVsID09PSBcIm51bWJlclwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICBjb25zdCBlcnJvckFycmF5OiBhbnkgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgIGVycm9yQXJyYXkuX2Vycm9ycyA9IFtdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgY3VycltlbF0gPSBjdXJyW2VsXSB8fCBlcnJvckFycmF5O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJbZWxdID0gY3VycltlbF0gfHwgeyBfZXJyb3JzOiBbXSB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJbZWxdLl9lcnJvcnMucHVzaChtYXBwZXIoaXNzdWUpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnIgPSBjdXJyW2VsXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGkrKztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgcHJvY2Vzc0Vycm9yKHRoaXMpO1xuICAgICAgICByZXR1cm4gZmllbGRFcnJvcnM7XG4gICAgfVxuICAgIHN0YXRpYyBhc3NlcnQodmFsdWUpIHtcbiAgICAgICAgaWYgKCEodmFsdWUgaW5zdGFuY2VvZiBab2RFcnJvcikpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgTm90IGEgWm9kRXJyb3I6ICR7dmFsdWV9YCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1lc3NhZ2U7XG4gICAgfVxuICAgIGdldCBtZXNzYWdlKCkge1xuICAgICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkodGhpcy5pc3N1ZXMsIHV0aWwuanNvblN0cmluZ2lmeVJlcGxhY2VyLCAyKTtcbiAgICB9XG4gICAgZ2V0IGlzRW1wdHkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmlzc3Vlcy5sZW5ndGggPT09IDA7XG4gICAgfVxuICAgIGZsYXR0ZW4obWFwcGVyID0gKGlzc3VlKSA9PiBpc3N1ZS5tZXNzYWdlKSB7XG4gICAgICAgIGNvbnN0IGZpZWxkRXJyb3JzID0ge307XG4gICAgICAgIGNvbnN0IGZvcm1FcnJvcnMgPSBbXTtcbiAgICAgICAgZm9yIChjb25zdCBzdWIgb2YgdGhpcy5pc3N1ZXMpIHtcbiAgICAgICAgICAgIGlmIChzdWIucGF0aC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZmlyc3RFbCA9IHN1Yi5wYXRoWzBdO1xuICAgICAgICAgICAgICAgIGZpZWxkRXJyb3JzW2ZpcnN0RWxdID0gZmllbGRFcnJvcnNbZmlyc3RFbF0gfHwgW107XG4gICAgICAgICAgICAgICAgZmllbGRFcnJvcnNbZmlyc3RFbF0ucHVzaChtYXBwZXIoc3ViKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBmb3JtRXJyb3JzLnB1c2gobWFwcGVyKHN1YikpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7IGZvcm1FcnJvcnMsIGZpZWxkRXJyb3JzIH07XG4gICAgfVxuICAgIGdldCBmb3JtRXJyb3JzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5mbGF0dGVuKCk7XG4gICAgfVxufVxuWm9kRXJyb3IuY3JlYXRlID0gKGlzc3VlcykgPT4ge1xuICAgIGNvbnN0IGVycm9yID0gbmV3IFpvZEVycm9yKGlzc3Vlcyk7XG4gICAgcmV0dXJuIGVycm9yO1xufTtcbiIsImltcG9ydCB7IFpvZElzc3VlQ29kZSB9IGZyb20gXCIuLi9ab2RFcnJvci5qc1wiO1xuaW1wb3J0IHsgdXRpbCwgWm9kUGFyc2VkVHlwZSB9IGZyb20gXCIuLi9oZWxwZXJzL3V0aWwuanNcIjtcbmNvbnN0IGVycm9yTWFwID0gKGlzc3VlLCBfY3R4KSA9PiB7XG4gICAgbGV0IG1lc3NhZ2U7XG4gICAgc3dpdGNoIChpc3N1ZS5jb2RlKSB7XG4gICAgICAgIGNhc2UgWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZTpcbiAgICAgICAgICAgIGlmIChpc3N1ZS5yZWNlaXZlZCA9PT0gWm9kUGFyc2VkVHlwZS51bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBtZXNzYWdlID0gXCJSZXF1aXJlZFwiO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgbWVzc2FnZSA9IGBFeHBlY3RlZCAke2lzc3VlLmV4cGVjdGVkfSwgcmVjZWl2ZWQgJHtpc3N1ZS5yZWNlaXZlZH1gO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgWm9kSXNzdWVDb2RlLmludmFsaWRfbGl0ZXJhbDpcbiAgICAgICAgICAgIG1lc3NhZ2UgPSBgSW52YWxpZCBsaXRlcmFsIHZhbHVlLCBleHBlY3RlZCAke0pTT04uc3RyaW5naWZ5KGlzc3VlLmV4cGVjdGVkLCB1dGlsLmpzb25TdHJpbmdpZnlSZXBsYWNlcil9YDtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFpvZElzc3VlQ29kZS51bnJlY29nbml6ZWRfa2V5czpcbiAgICAgICAgICAgIG1lc3NhZ2UgPSBgVW5yZWNvZ25pemVkIGtleShzKSBpbiBvYmplY3Q6ICR7dXRpbC5qb2luVmFsdWVzKGlzc3VlLmtleXMsIFwiLCBcIil9YDtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFpvZElzc3VlQ29kZS5pbnZhbGlkX3VuaW9uOlxuICAgICAgICAgICAgbWVzc2FnZSA9IGBJbnZhbGlkIGlucHV0YDtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFpvZElzc3VlQ29kZS5pbnZhbGlkX3VuaW9uX2Rpc2NyaW1pbmF0b3I6XG4gICAgICAgICAgICBtZXNzYWdlID0gYEludmFsaWQgZGlzY3JpbWluYXRvciB2YWx1ZS4gRXhwZWN0ZWQgJHt1dGlsLmpvaW5WYWx1ZXMoaXNzdWUub3B0aW9ucyl9YDtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFpvZElzc3VlQ29kZS5pbnZhbGlkX2VudW1fdmFsdWU6XG4gICAgICAgICAgICBtZXNzYWdlID0gYEludmFsaWQgZW51bSB2YWx1ZS4gRXhwZWN0ZWQgJHt1dGlsLmpvaW5WYWx1ZXMoaXNzdWUub3B0aW9ucyl9LCByZWNlaXZlZCAnJHtpc3N1ZS5yZWNlaXZlZH0nYDtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFpvZElzc3VlQ29kZS5pbnZhbGlkX2FyZ3VtZW50czpcbiAgICAgICAgICAgIG1lc3NhZ2UgPSBgSW52YWxpZCBmdW5jdGlvbiBhcmd1bWVudHNgO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgWm9kSXNzdWVDb2RlLmludmFsaWRfcmV0dXJuX3R5cGU6XG4gICAgICAgICAgICBtZXNzYWdlID0gYEludmFsaWQgZnVuY3Rpb24gcmV0dXJuIHR5cGVgO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgWm9kSXNzdWVDb2RlLmludmFsaWRfZGF0ZTpcbiAgICAgICAgICAgIG1lc3NhZ2UgPSBgSW52YWxpZCBkYXRlYDtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFpvZElzc3VlQ29kZS5pbnZhbGlkX3N0cmluZzpcbiAgICAgICAgICAgIGlmICh0eXBlb2YgaXNzdWUudmFsaWRhdGlvbiA9PT0gXCJvYmplY3RcIikge1xuICAgICAgICAgICAgICAgIGlmIChcImluY2x1ZGVzXCIgaW4gaXNzdWUudmFsaWRhdGlvbikge1xuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlID0gYEludmFsaWQgaW5wdXQ6IG11c3QgaW5jbHVkZSBcIiR7aXNzdWUudmFsaWRhdGlvbi5pbmNsdWRlc31cImA7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgaXNzdWUudmFsaWRhdGlvbi5wb3NpdGlvbiA9PT0gXCJudW1iZXJcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZSA9IGAke21lc3NhZ2V9IGF0IG9uZSBvciBtb3JlIHBvc2l0aW9ucyBncmVhdGVyIHRoYW4gb3IgZXF1YWwgdG8gJHtpc3N1ZS52YWxpZGF0aW9uLnBvc2l0aW9ufWA7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoXCJzdGFydHNXaXRoXCIgaW4gaXNzdWUudmFsaWRhdGlvbikge1xuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlID0gYEludmFsaWQgaW5wdXQ6IG11c3Qgc3RhcnQgd2l0aCBcIiR7aXNzdWUudmFsaWRhdGlvbi5zdGFydHNXaXRofVwiYDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoXCJlbmRzV2l0aFwiIGluIGlzc3VlLnZhbGlkYXRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZSA9IGBJbnZhbGlkIGlucHV0OiBtdXN0IGVuZCB3aXRoIFwiJHtpc3N1ZS52YWxpZGF0aW9uLmVuZHNXaXRofVwiYDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHV0aWwuYXNzZXJ0TmV2ZXIoaXNzdWUudmFsaWRhdGlvbik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoaXNzdWUudmFsaWRhdGlvbiAhPT0gXCJyZWdleFwiKSB7XG4gICAgICAgICAgICAgICAgbWVzc2FnZSA9IGBJbnZhbGlkICR7aXNzdWUudmFsaWRhdGlvbn1gO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgbWVzc2FnZSA9IFwiSW52YWxpZFwiO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgWm9kSXNzdWVDb2RlLnRvb19zbWFsbDpcbiAgICAgICAgICAgIGlmIChpc3N1ZS50eXBlID09PSBcImFycmF5XCIpXG4gICAgICAgICAgICAgICAgbWVzc2FnZSA9IGBBcnJheSBtdXN0IGNvbnRhaW4gJHtpc3N1ZS5leGFjdCA/IFwiZXhhY3RseVwiIDogaXNzdWUuaW5jbHVzaXZlID8gYGF0IGxlYXN0YCA6IGBtb3JlIHRoYW5gfSAke2lzc3VlLm1pbmltdW19IGVsZW1lbnQocylgO1xuICAgICAgICAgICAgZWxzZSBpZiAoaXNzdWUudHlwZSA9PT0gXCJzdHJpbmdcIilcbiAgICAgICAgICAgICAgICBtZXNzYWdlID0gYFN0cmluZyBtdXN0IGNvbnRhaW4gJHtpc3N1ZS5leGFjdCA/IFwiZXhhY3RseVwiIDogaXNzdWUuaW5jbHVzaXZlID8gYGF0IGxlYXN0YCA6IGBvdmVyYH0gJHtpc3N1ZS5taW5pbXVtfSBjaGFyYWN0ZXIocylgO1xuICAgICAgICAgICAgZWxzZSBpZiAoaXNzdWUudHlwZSA9PT0gXCJudW1iZXJcIilcbiAgICAgICAgICAgICAgICBtZXNzYWdlID0gYE51bWJlciBtdXN0IGJlICR7aXNzdWUuZXhhY3QgPyBgZXhhY3RseSBlcXVhbCB0byBgIDogaXNzdWUuaW5jbHVzaXZlID8gYGdyZWF0ZXIgdGhhbiBvciBlcXVhbCB0byBgIDogYGdyZWF0ZXIgdGhhbiBgfSR7aXNzdWUubWluaW11bX1gO1xuICAgICAgICAgICAgZWxzZSBpZiAoaXNzdWUudHlwZSA9PT0gXCJiaWdpbnRcIilcbiAgICAgICAgICAgICAgICBtZXNzYWdlID0gYE51bWJlciBtdXN0IGJlICR7aXNzdWUuZXhhY3QgPyBgZXhhY3RseSBlcXVhbCB0byBgIDogaXNzdWUuaW5jbHVzaXZlID8gYGdyZWF0ZXIgdGhhbiBvciBlcXVhbCB0byBgIDogYGdyZWF0ZXIgdGhhbiBgfSR7aXNzdWUubWluaW11bX1gO1xuICAgICAgICAgICAgZWxzZSBpZiAoaXNzdWUudHlwZSA9PT0gXCJkYXRlXCIpXG4gICAgICAgICAgICAgICAgbWVzc2FnZSA9IGBEYXRlIG11c3QgYmUgJHtpc3N1ZS5leGFjdCA/IGBleGFjdGx5IGVxdWFsIHRvIGAgOiBpc3N1ZS5pbmNsdXNpdmUgPyBgZ3JlYXRlciB0aGFuIG9yIGVxdWFsIHRvIGAgOiBgZ3JlYXRlciB0aGFuIGB9JHtuZXcgRGF0ZShOdW1iZXIoaXNzdWUubWluaW11bSkpfWA7XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgbWVzc2FnZSA9IFwiSW52YWxpZCBpbnB1dFwiO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgWm9kSXNzdWVDb2RlLnRvb19iaWc6XG4gICAgICAgICAgICBpZiAoaXNzdWUudHlwZSA9PT0gXCJhcnJheVwiKVxuICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSBgQXJyYXkgbXVzdCBjb250YWluICR7aXNzdWUuZXhhY3QgPyBgZXhhY3RseWAgOiBpc3N1ZS5pbmNsdXNpdmUgPyBgYXQgbW9zdGAgOiBgbGVzcyB0aGFuYH0gJHtpc3N1ZS5tYXhpbXVtfSBlbGVtZW50KHMpYDtcbiAgICAgICAgICAgIGVsc2UgaWYgKGlzc3VlLnR5cGUgPT09IFwic3RyaW5nXCIpXG4gICAgICAgICAgICAgICAgbWVzc2FnZSA9IGBTdHJpbmcgbXVzdCBjb250YWluICR7aXNzdWUuZXhhY3QgPyBgZXhhY3RseWAgOiBpc3N1ZS5pbmNsdXNpdmUgPyBgYXQgbW9zdGAgOiBgdW5kZXJgfSAke2lzc3VlLm1heGltdW19IGNoYXJhY3RlcihzKWA7XG4gICAgICAgICAgICBlbHNlIGlmIChpc3N1ZS50eXBlID09PSBcIm51bWJlclwiKVxuICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSBgTnVtYmVyIG11c3QgYmUgJHtpc3N1ZS5leGFjdCA/IGBleGFjdGx5YCA6IGlzc3VlLmluY2x1c2l2ZSA/IGBsZXNzIHRoYW4gb3IgZXF1YWwgdG9gIDogYGxlc3MgdGhhbmB9ICR7aXNzdWUubWF4aW11bX1gO1xuICAgICAgICAgICAgZWxzZSBpZiAoaXNzdWUudHlwZSA9PT0gXCJiaWdpbnRcIilcbiAgICAgICAgICAgICAgICBtZXNzYWdlID0gYEJpZ0ludCBtdXN0IGJlICR7aXNzdWUuZXhhY3QgPyBgZXhhY3RseWAgOiBpc3N1ZS5pbmNsdXNpdmUgPyBgbGVzcyB0aGFuIG9yIGVxdWFsIHRvYCA6IGBsZXNzIHRoYW5gfSAke2lzc3VlLm1heGltdW19YDtcbiAgICAgICAgICAgIGVsc2UgaWYgKGlzc3VlLnR5cGUgPT09IFwiZGF0ZVwiKVxuICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSBgRGF0ZSBtdXN0IGJlICR7aXNzdWUuZXhhY3QgPyBgZXhhY3RseWAgOiBpc3N1ZS5pbmNsdXNpdmUgPyBgc21hbGxlciB0aGFuIG9yIGVxdWFsIHRvYCA6IGBzbWFsbGVyIHRoYW5gfSAke25ldyBEYXRlKE51bWJlcihpc3N1ZS5tYXhpbXVtKSl9YDtcbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICBtZXNzYWdlID0gXCJJbnZhbGlkIGlucHV0XCI7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBab2RJc3N1ZUNvZGUuY3VzdG9tOlxuICAgICAgICAgICAgbWVzc2FnZSA9IGBJbnZhbGlkIGlucHV0YDtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFpvZElzc3VlQ29kZS5pbnZhbGlkX2ludGVyc2VjdGlvbl90eXBlczpcbiAgICAgICAgICAgIG1lc3NhZ2UgPSBgSW50ZXJzZWN0aW9uIHJlc3VsdHMgY291bGQgbm90IGJlIG1lcmdlZGA7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBab2RJc3N1ZUNvZGUubm90X211bHRpcGxlX29mOlxuICAgICAgICAgICAgbWVzc2FnZSA9IGBOdW1iZXIgbXVzdCBiZSBhIG11bHRpcGxlIG9mICR7aXNzdWUubXVsdGlwbGVPZn1gO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgWm9kSXNzdWVDb2RlLm5vdF9maW5pdGU6XG4gICAgICAgICAgICBtZXNzYWdlID0gXCJOdW1iZXIgbXVzdCBiZSBmaW5pdGVcIjtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgbWVzc2FnZSA9IF9jdHguZGVmYXVsdEVycm9yO1xuICAgICAgICAgICAgdXRpbC5hc3NlcnROZXZlcihpc3N1ZSk7XG4gICAgfVxuICAgIHJldHVybiB7IG1lc3NhZ2UgfTtcbn07XG5leHBvcnQgZGVmYXVsdCBlcnJvck1hcDtcbiIsImltcG9ydCBkZWZhdWx0RXJyb3JNYXAgZnJvbSBcIi4vbG9jYWxlcy9lbi5qc1wiO1xubGV0IG92ZXJyaWRlRXJyb3JNYXAgPSBkZWZhdWx0RXJyb3JNYXA7XG5leHBvcnQgeyBkZWZhdWx0RXJyb3JNYXAgfTtcbmV4cG9ydCBmdW5jdGlvbiBzZXRFcnJvck1hcChtYXApIHtcbiAgICBvdmVycmlkZUVycm9yTWFwID0gbWFwO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGdldEVycm9yTWFwKCkge1xuICAgIHJldHVybiBvdmVycmlkZUVycm9yTWFwO1xufVxuIiwiaW1wb3J0IHsgZ2V0RXJyb3JNYXAgfSBmcm9tIFwiLi4vZXJyb3JzLmpzXCI7XG5pbXBvcnQgZGVmYXVsdEVycm9yTWFwIGZyb20gXCIuLi9sb2NhbGVzL2VuLmpzXCI7XG5leHBvcnQgY29uc3QgbWFrZUlzc3VlID0gKHBhcmFtcykgPT4ge1xuICAgIGNvbnN0IHsgZGF0YSwgcGF0aCwgZXJyb3JNYXBzLCBpc3N1ZURhdGEgfSA9IHBhcmFtcztcbiAgICBjb25zdCBmdWxsUGF0aCA9IFsuLi5wYXRoLCAuLi4oaXNzdWVEYXRhLnBhdGggfHwgW10pXTtcbiAgICBjb25zdCBmdWxsSXNzdWUgPSB7XG4gICAgICAgIC4uLmlzc3VlRGF0YSxcbiAgICAgICAgcGF0aDogZnVsbFBhdGgsXG4gICAgfTtcbiAgICBpZiAoaXNzdWVEYXRhLm1lc3NhZ2UgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgLi4uaXNzdWVEYXRhLFxuICAgICAgICAgICAgcGF0aDogZnVsbFBhdGgsXG4gICAgICAgICAgICBtZXNzYWdlOiBpc3N1ZURhdGEubWVzc2FnZSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgbGV0IGVycm9yTWVzc2FnZSA9IFwiXCI7XG4gICAgY29uc3QgbWFwcyA9IGVycm9yTWFwc1xuICAgICAgICAuZmlsdGVyKChtKSA9PiAhIW0pXG4gICAgICAgIC5zbGljZSgpXG4gICAgICAgIC5yZXZlcnNlKCk7XG4gICAgZm9yIChjb25zdCBtYXAgb2YgbWFwcykge1xuICAgICAgICBlcnJvck1lc3NhZ2UgPSBtYXAoZnVsbElzc3VlLCB7IGRhdGEsIGRlZmF1bHRFcnJvcjogZXJyb3JNZXNzYWdlIH0pLm1lc3NhZ2U7XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICAgIC4uLmlzc3VlRGF0YSxcbiAgICAgICAgcGF0aDogZnVsbFBhdGgsXG4gICAgICAgIG1lc3NhZ2U6IGVycm9yTWVzc2FnZSxcbiAgICB9O1xufTtcbmV4cG9ydCBjb25zdCBFTVBUWV9QQVRIID0gW107XG5leHBvcnQgZnVuY3Rpb24gYWRkSXNzdWVUb0NvbnRleHQoY3R4LCBpc3N1ZURhdGEpIHtcbiAgICBjb25zdCBvdmVycmlkZU1hcCA9IGdldEVycm9yTWFwKCk7XG4gICAgY29uc3QgaXNzdWUgPSBtYWtlSXNzdWUoe1xuICAgICAgICBpc3N1ZURhdGE6IGlzc3VlRGF0YSxcbiAgICAgICAgZGF0YTogY3R4LmRhdGEsXG4gICAgICAgIHBhdGg6IGN0eC5wYXRoLFxuICAgICAgICBlcnJvck1hcHM6IFtcbiAgICAgICAgICAgIGN0eC5jb21tb24uY29udGV4dHVhbEVycm9yTWFwLCAvLyBjb250ZXh0dWFsIGVycm9yIG1hcCBpcyBmaXJzdCBwcmlvcml0eVxuICAgICAgICAgICAgY3R4LnNjaGVtYUVycm9yTWFwLCAvLyB0aGVuIHNjaGVtYS1ib3VuZCBtYXAgaWYgYXZhaWxhYmxlXG4gICAgICAgICAgICBvdmVycmlkZU1hcCwgLy8gdGhlbiBnbG9iYWwgb3ZlcnJpZGUgbWFwXG4gICAgICAgICAgICBvdmVycmlkZU1hcCA9PT0gZGVmYXVsdEVycm9yTWFwID8gdW5kZWZpbmVkIDogZGVmYXVsdEVycm9yTWFwLCAvLyB0aGVuIGdsb2JhbCBkZWZhdWx0IG1hcFxuICAgICAgICBdLmZpbHRlcigoeCkgPT4gISF4KSxcbiAgICB9KTtcbiAgICBjdHguY29tbW9uLmlzc3Vlcy5wdXNoKGlzc3VlKTtcbn1cbmV4cG9ydCBjbGFzcyBQYXJzZVN0YXR1cyB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMudmFsdWUgPSBcInZhbGlkXCI7XG4gICAgfVxuICAgIGRpcnR5KCkge1xuICAgICAgICBpZiAodGhpcy52YWx1ZSA9PT0gXCJ2YWxpZFwiKVxuICAgICAgICAgICAgdGhpcy52YWx1ZSA9IFwiZGlydHlcIjtcbiAgICB9XG4gICAgYWJvcnQoKSB7XG4gICAgICAgIGlmICh0aGlzLnZhbHVlICE9PSBcImFib3J0ZWRcIilcbiAgICAgICAgICAgIHRoaXMudmFsdWUgPSBcImFib3J0ZWRcIjtcbiAgICB9XG4gICAgc3RhdGljIG1lcmdlQXJyYXkoc3RhdHVzLCByZXN1bHRzKSB7XG4gICAgICAgIGNvbnN0IGFycmF5VmFsdWUgPSBbXTtcbiAgICAgICAgZm9yIChjb25zdCBzIG9mIHJlc3VsdHMpIHtcbiAgICAgICAgICAgIGlmIChzLnN0YXR1cyA9PT0gXCJhYm9ydGVkXCIpXG4gICAgICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgICAgICBpZiAocy5zdGF0dXMgPT09IFwiZGlydHlcIilcbiAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgIGFycmF5VmFsdWUucHVzaChzLnZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4geyBzdGF0dXM6IHN0YXR1cy52YWx1ZSwgdmFsdWU6IGFycmF5VmFsdWUgfTtcbiAgICB9XG4gICAgc3RhdGljIGFzeW5jIG1lcmdlT2JqZWN0QXN5bmMoc3RhdHVzLCBwYWlycykge1xuICAgICAgICBjb25zdCBzeW5jUGFpcnMgPSBbXTtcbiAgICAgICAgZm9yIChjb25zdCBwYWlyIG9mIHBhaXJzKSB7XG4gICAgICAgICAgICBjb25zdCBrZXkgPSBhd2FpdCBwYWlyLmtleTtcbiAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gYXdhaXQgcGFpci52YWx1ZTtcbiAgICAgICAgICAgIHN5bmNQYWlycy5wdXNoKHtcbiAgICAgICAgICAgICAgICBrZXksXG4gICAgICAgICAgICAgICAgdmFsdWUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gUGFyc2VTdGF0dXMubWVyZ2VPYmplY3RTeW5jKHN0YXR1cywgc3luY1BhaXJzKTtcbiAgICB9XG4gICAgc3RhdGljIG1lcmdlT2JqZWN0U3luYyhzdGF0dXMsIHBhaXJzKSB7XG4gICAgICAgIGNvbnN0IGZpbmFsT2JqZWN0ID0ge307XG4gICAgICAgIGZvciAoY29uc3QgcGFpciBvZiBwYWlycykge1xuICAgICAgICAgICAgY29uc3QgeyBrZXksIHZhbHVlIH0gPSBwYWlyO1xuICAgICAgICAgICAgaWYgKGtleS5zdGF0dXMgPT09IFwiYWJvcnRlZFwiKVxuICAgICAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICAgICAgaWYgKHZhbHVlLnN0YXR1cyA9PT0gXCJhYm9ydGVkXCIpXG4gICAgICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgICAgICBpZiAoa2V5LnN0YXR1cyA9PT0gXCJkaXJ0eVwiKVxuICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgaWYgKHZhbHVlLnN0YXR1cyA9PT0gXCJkaXJ0eVwiKVxuICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgaWYgKGtleS52YWx1ZSAhPT0gXCJfX3Byb3RvX19cIiAmJiAodHlwZW9mIHZhbHVlLnZhbHVlICE9PSBcInVuZGVmaW5lZFwiIHx8IHBhaXIuYWx3YXlzU2V0KSkge1xuICAgICAgICAgICAgICAgIGZpbmFsT2JqZWN0W2tleS52YWx1ZV0gPSB2YWx1ZS52YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4geyBzdGF0dXM6IHN0YXR1cy52YWx1ZSwgdmFsdWU6IGZpbmFsT2JqZWN0IH07XG4gICAgfVxufVxuZXhwb3J0IGNvbnN0IElOVkFMSUQgPSBPYmplY3QuZnJlZXplKHtcbiAgICBzdGF0dXM6IFwiYWJvcnRlZFwiLFxufSk7XG5leHBvcnQgY29uc3QgRElSVFkgPSAodmFsdWUpID0+ICh7IHN0YXR1czogXCJkaXJ0eVwiLCB2YWx1ZSB9KTtcbmV4cG9ydCBjb25zdCBPSyA9ICh2YWx1ZSkgPT4gKHsgc3RhdHVzOiBcInZhbGlkXCIsIHZhbHVlIH0pO1xuZXhwb3J0IGNvbnN0IGlzQWJvcnRlZCA9ICh4KSA9PiB4LnN0YXR1cyA9PT0gXCJhYm9ydGVkXCI7XG5leHBvcnQgY29uc3QgaXNEaXJ0eSA9ICh4KSA9PiB4LnN0YXR1cyA9PT0gXCJkaXJ0eVwiO1xuZXhwb3J0IGNvbnN0IGlzVmFsaWQgPSAoeCkgPT4geC5zdGF0dXMgPT09IFwidmFsaWRcIjtcbmV4cG9ydCBjb25zdCBpc0FzeW5jID0gKHgpID0+IHR5cGVvZiBQcm9taXNlICE9PSBcInVuZGVmaW5lZFwiICYmIHggaW5zdGFuY2VvZiBQcm9taXNlO1xuIiwiZXhwb3J0IHZhciBlcnJvclV0aWw7XG4oZnVuY3Rpb24gKGVycm9yVXRpbCkge1xuICAgIGVycm9yVXRpbC5lcnJUb09iaiA9IChtZXNzYWdlKSA9PiB0eXBlb2YgbWVzc2FnZSA9PT0gXCJzdHJpbmdcIiA/IHsgbWVzc2FnZSB9IDogbWVzc2FnZSB8fCB7fTtcbiAgICAvLyBiaW9tZS1pZ25vcmUgbGludDpcbiAgICBlcnJvclV0aWwudG9TdHJpbmcgPSAobWVzc2FnZSkgPT4gdHlwZW9mIG1lc3NhZ2UgPT09IFwic3RyaW5nXCIgPyBtZXNzYWdlIDogbWVzc2FnZT8ubWVzc2FnZTtcbn0pKGVycm9yVXRpbCB8fCAoZXJyb3JVdGlsID0ge30pKTtcbiIsImltcG9ydCB7IFpvZEVycm9yLCBab2RJc3N1ZUNvZGUsIH0gZnJvbSBcIi4vWm9kRXJyb3IuanNcIjtcbmltcG9ydCB7IGRlZmF1bHRFcnJvck1hcCwgZ2V0RXJyb3JNYXAgfSBmcm9tIFwiLi9lcnJvcnMuanNcIjtcbmltcG9ydCB7IGVycm9yVXRpbCB9IGZyb20gXCIuL2hlbHBlcnMvZXJyb3JVdGlsLmpzXCI7XG5pbXBvcnQgeyBESVJUWSwgSU5WQUxJRCwgT0ssIFBhcnNlU3RhdHVzLCBhZGRJc3N1ZVRvQ29udGV4dCwgaXNBYm9ydGVkLCBpc0FzeW5jLCBpc0RpcnR5LCBpc1ZhbGlkLCBtYWtlSXNzdWUsIH0gZnJvbSBcIi4vaGVscGVycy9wYXJzZVV0aWwuanNcIjtcbmltcG9ydCB7IHV0aWwsIFpvZFBhcnNlZFR5cGUsIGdldFBhcnNlZFR5cGUgfSBmcm9tIFwiLi9oZWxwZXJzL3V0aWwuanNcIjtcbmNsYXNzIFBhcnNlSW5wdXRMYXp5UGF0aCB7XG4gICAgY29uc3RydWN0b3IocGFyZW50LCB2YWx1ZSwgcGF0aCwga2V5KSB7XG4gICAgICAgIHRoaXMuX2NhY2hlZFBhdGggPSBbXTtcbiAgICAgICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XG4gICAgICAgIHRoaXMuZGF0YSA9IHZhbHVlO1xuICAgICAgICB0aGlzLl9wYXRoID0gcGF0aDtcbiAgICAgICAgdGhpcy5fa2V5ID0ga2V5O1xuICAgIH1cbiAgICBnZXQgcGF0aCgpIHtcbiAgICAgICAgaWYgKCF0aGlzLl9jYWNoZWRQYXRoLmxlbmd0aCkge1xuICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkodGhpcy5fa2V5KSkge1xuICAgICAgICAgICAgICAgIHRoaXMuX2NhY2hlZFBhdGgucHVzaCguLi50aGlzLl9wYXRoLCAuLi50aGlzLl9rZXkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fY2FjaGVkUGF0aC5wdXNoKC4uLnRoaXMuX3BhdGgsIHRoaXMuX2tleSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuX2NhY2hlZFBhdGg7XG4gICAgfVxufVxuY29uc3QgaGFuZGxlUmVzdWx0ID0gKGN0eCwgcmVzdWx0KSA9PiB7XG4gICAgaWYgKGlzVmFsaWQocmVzdWx0KSkge1xuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCBkYXRhOiByZXN1bHQudmFsdWUgfTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGlmICghY3R4LmNvbW1vbi5pc3N1ZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJWYWxpZGF0aW9uIGZhaWxlZCBidXQgbm8gaXNzdWVzIGRldGVjdGVkLlwiKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgICBnZXQgZXJyb3IoKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuX2Vycm9yKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fZXJyb3I7XG4gICAgICAgICAgICAgICAgY29uc3QgZXJyb3IgPSBuZXcgWm9kRXJyb3IoY3R4LmNvbW1vbi5pc3N1ZXMpO1xuICAgICAgICAgICAgICAgIHRoaXMuX2Vycm9yID0gZXJyb3I7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2Vycm9yO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgfTtcbiAgICB9XG59O1xuZnVuY3Rpb24gcHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpIHtcbiAgICBpZiAoIXBhcmFtcylcbiAgICAgICAgcmV0dXJuIHt9O1xuICAgIGNvbnN0IHsgZXJyb3JNYXAsIGludmFsaWRfdHlwZV9lcnJvciwgcmVxdWlyZWRfZXJyb3IsIGRlc2NyaXB0aW9uIH0gPSBwYXJhbXM7XG4gICAgaWYgKGVycm9yTWFwICYmIChpbnZhbGlkX3R5cGVfZXJyb3IgfHwgcmVxdWlyZWRfZXJyb3IpKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgQ2FuJ3QgdXNlIFwiaW52YWxpZF90eXBlX2Vycm9yXCIgb3IgXCJyZXF1aXJlZF9lcnJvclwiIGluIGNvbmp1bmN0aW9uIHdpdGggY3VzdG9tIGVycm9yIG1hcC5gKTtcbiAgICB9XG4gICAgaWYgKGVycm9yTWFwKVxuICAgICAgICByZXR1cm4geyBlcnJvck1hcDogZXJyb3JNYXAsIGRlc2NyaXB0aW9uIH07XG4gICAgY29uc3QgY3VzdG9tTWFwID0gKGlzcywgY3R4KSA9PiB7XG4gICAgICAgIGNvbnN0IHsgbWVzc2FnZSB9ID0gcGFyYW1zO1xuICAgICAgICBpZiAoaXNzLmNvZGUgPT09IFwiaW52YWxpZF9lbnVtX3ZhbHVlXCIpIHtcbiAgICAgICAgICAgIHJldHVybiB7IG1lc3NhZ2U6IG1lc3NhZ2UgPz8gY3R4LmRlZmF1bHRFcnJvciB9O1xuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlb2YgY3R4LmRhdGEgPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgICAgIHJldHVybiB7IG1lc3NhZ2U6IG1lc3NhZ2UgPz8gcmVxdWlyZWRfZXJyb3IgPz8gY3R4LmRlZmF1bHRFcnJvciB9O1xuICAgICAgICB9XG4gICAgICAgIGlmIChpc3MuY29kZSAhPT0gXCJpbnZhbGlkX3R5cGVcIilcbiAgICAgICAgICAgIHJldHVybiB7IG1lc3NhZ2U6IGN0eC5kZWZhdWx0RXJyb3IgfTtcbiAgICAgICAgcmV0dXJuIHsgbWVzc2FnZTogbWVzc2FnZSA/PyBpbnZhbGlkX3R5cGVfZXJyb3IgPz8gY3R4LmRlZmF1bHRFcnJvciB9O1xuICAgIH07XG4gICAgcmV0dXJuIHsgZXJyb3JNYXA6IGN1c3RvbU1hcCwgZGVzY3JpcHRpb24gfTtcbn1cbmV4cG9ydCBjbGFzcyBab2RUeXBlIHtcbiAgICBnZXQgZGVzY3JpcHRpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYuZGVzY3JpcHRpb247XG4gICAgfVxuICAgIF9nZXRUeXBlKGlucHV0KSB7XG4gICAgICAgIHJldHVybiBnZXRQYXJzZWRUeXBlKGlucHV0LmRhdGEpO1xuICAgIH1cbiAgICBfZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCkge1xuICAgICAgICByZXR1cm4gKGN0eCB8fCB7XG4gICAgICAgICAgICBjb21tb246IGlucHV0LnBhcmVudC5jb21tb24sXG4gICAgICAgICAgICBkYXRhOiBpbnB1dC5kYXRhLFxuICAgICAgICAgICAgcGFyc2VkVHlwZTogZ2V0UGFyc2VkVHlwZShpbnB1dC5kYXRhKSxcbiAgICAgICAgICAgIHNjaGVtYUVycm9yTWFwOiB0aGlzLl9kZWYuZXJyb3JNYXAsXG4gICAgICAgICAgICBwYXRoOiBpbnB1dC5wYXRoLFxuICAgICAgICAgICAgcGFyZW50OiBpbnB1dC5wYXJlbnQsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBfcHJvY2Vzc0lucHV0UGFyYW1zKGlucHV0KSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBzdGF0dXM6IG5ldyBQYXJzZVN0YXR1cygpLFxuICAgICAgICAgICAgY3R4OiB7XG4gICAgICAgICAgICAgICAgY29tbW9uOiBpbnB1dC5wYXJlbnQuY29tbW9uLFxuICAgICAgICAgICAgICAgIGRhdGE6IGlucHV0LmRhdGEsXG4gICAgICAgICAgICAgICAgcGFyc2VkVHlwZTogZ2V0UGFyc2VkVHlwZShpbnB1dC5kYXRhKSxcbiAgICAgICAgICAgICAgICBzY2hlbWFFcnJvck1hcDogdGhpcy5fZGVmLmVycm9yTWFwLFxuICAgICAgICAgICAgICAgIHBhdGg6IGlucHV0LnBhdGgsXG4gICAgICAgICAgICAgICAgcGFyZW50OiBpbnB1dC5wYXJlbnQsXG4gICAgICAgICAgICB9LFxuICAgICAgICB9O1xuICAgIH1cbiAgICBfcGFyc2VTeW5jKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMuX3BhcnNlKGlucHV0KTtcbiAgICAgICAgaWYgKGlzQXN5bmMocmVzdWx0KSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiU3luY2hyb25vdXMgcGFyc2UgZW5jb3VudGVyZWQgcHJvbWlzZS5cIik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG4gICAgX3BhcnNlQXN5bmMoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gdGhpcy5fcGFyc2UoaW5wdXQpO1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHJlc3VsdCk7XG4gICAgfVxuICAgIHBhcnNlKGRhdGEsIHBhcmFtcykge1xuICAgICAgICBjb25zdCByZXN1bHQgPSB0aGlzLnNhZmVQYXJzZShkYXRhLCBwYXJhbXMpO1xuICAgICAgICBpZiAocmVzdWx0LnN1Y2Nlc3MpXG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0LmRhdGE7XG4gICAgICAgIHRocm93IHJlc3VsdC5lcnJvcjtcbiAgICB9XG4gICAgc2FmZVBhcnNlKGRhdGEsIHBhcmFtcykge1xuICAgICAgICBjb25zdCBjdHggPSB7XG4gICAgICAgICAgICBjb21tb246IHtcbiAgICAgICAgICAgICAgICBpc3N1ZXM6IFtdLFxuICAgICAgICAgICAgICAgIGFzeW5jOiBwYXJhbXM/LmFzeW5jID8/IGZhbHNlLFxuICAgICAgICAgICAgICAgIGNvbnRleHR1YWxFcnJvck1hcDogcGFyYW1zPy5lcnJvck1hcCxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBwYXRoOiBwYXJhbXM/LnBhdGggfHwgW10sXG4gICAgICAgICAgICBzY2hlbWFFcnJvck1hcDogdGhpcy5fZGVmLmVycm9yTWFwLFxuICAgICAgICAgICAgcGFyZW50OiBudWxsLFxuICAgICAgICAgICAgZGF0YSxcbiAgICAgICAgICAgIHBhcnNlZFR5cGU6IGdldFBhcnNlZFR5cGUoZGF0YSksXG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMuX3BhcnNlU3luYyh7IGRhdGEsIHBhdGg6IGN0eC5wYXRoLCBwYXJlbnQ6IGN0eCB9KTtcbiAgICAgICAgcmV0dXJuIGhhbmRsZVJlc3VsdChjdHgsIHJlc3VsdCk7XG4gICAgfVxuICAgIFwifnZhbGlkYXRlXCIoZGF0YSkge1xuICAgICAgICBjb25zdCBjdHggPSB7XG4gICAgICAgICAgICBjb21tb246IHtcbiAgICAgICAgICAgICAgICBpc3N1ZXM6IFtdLFxuICAgICAgICAgICAgICAgIGFzeW5jOiAhIXRoaXNbXCJ+c3RhbmRhcmRcIl0uYXN5bmMsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcGF0aDogW10sXG4gICAgICAgICAgICBzY2hlbWFFcnJvck1hcDogdGhpcy5fZGVmLmVycm9yTWFwLFxuICAgICAgICAgICAgcGFyZW50OiBudWxsLFxuICAgICAgICAgICAgZGF0YSxcbiAgICAgICAgICAgIHBhcnNlZFR5cGU6IGdldFBhcnNlZFR5cGUoZGF0YSksXG4gICAgICAgIH07XG4gICAgICAgIGlmICghdGhpc1tcIn5zdGFuZGFyZFwiXS5hc3luYykge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSB0aGlzLl9wYXJzZVN5bmMoeyBkYXRhLCBwYXRoOiBbXSwgcGFyZW50OiBjdHggfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGlzVmFsaWQocmVzdWx0KVxuICAgICAgICAgICAgICAgICAgICA/IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiByZXN1bHQudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpc3N1ZXM6IGN0eC5jb21tb24uaXNzdWVzLFxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgIGlmIChlcnI/Lm1lc3NhZ2U/LnRvTG93ZXJDYXNlKCk/LmluY2x1ZGVzKFwiZW5jb3VudGVyZWRcIikpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpc1tcIn5zdGFuZGFyZFwiXS5hc3luYyA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGN0eC5jb21tb24gPSB7XG4gICAgICAgICAgICAgICAgICAgIGlzc3VlczogW10sXG4gICAgICAgICAgICAgICAgICAgIGFzeW5jOiB0cnVlLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuX3BhcnNlQXN5bmMoeyBkYXRhLCBwYXRoOiBbXSwgcGFyZW50OiBjdHggfSkudGhlbigocmVzdWx0KSA9PiBpc1ZhbGlkKHJlc3VsdClcbiAgICAgICAgICAgID8ge1xuICAgICAgICAgICAgICAgIHZhbHVlOiByZXN1bHQudmFsdWUsXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICA6IHtcbiAgICAgICAgICAgICAgICBpc3N1ZXM6IGN0eC5jb21tb24uaXNzdWVzLFxuICAgICAgICAgICAgfSk7XG4gICAgfVxuICAgIGFzeW5jIHBhcnNlQXN5bmMoZGF0YSwgcGFyYW1zKSB7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMuc2FmZVBhcnNlQXN5bmMoZGF0YSwgcGFyYW1zKTtcbiAgICAgICAgaWYgKHJlc3VsdC5zdWNjZXNzKVxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdC5kYXRhO1xuICAgICAgICB0aHJvdyByZXN1bHQuZXJyb3I7XG4gICAgfVxuICAgIGFzeW5jIHNhZmVQYXJzZUFzeW5jKGRhdGEsIHBhcmFtcykge1xuICAgICAgICBjb25zdCBjdHggPSB7XG4gICAgICAgICAgICBjb21tb246IHtcbiAgICAgICAgICAgICAgICBpc3N1ZXM6IFtdLFxuICAgICAgICAgICAgICAgIGNvbnRleHR1YWxFcnJvck1hcDogcGFyYW1zPy5lcnJvck1hcCxcbiAgICAgICAgICAgICAgICBhc3luYzogdHJ1ZSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBwYXRoOiBwYXJhbXM/LnBhdGggfHwgW10sXG4gICAgICAgICAgICBzY2hlbWFFcnJvck1hcDogdGhpcy5fZGVmLmVycm9yTWFwLFxuICAgICAgICAgICAgcGFyZW50OiBudWxsLFxuICAgICAgICAgICAgZGF0YSxcbiAgICAgICAgICAgIHBhcnNlZFR5cGU6IGdldFBhcnNlZFR5cGUoZGF0YSksXG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IG1heWJlQXN5bmNSZXN1bHQgPSB0aGlzLl9wYXJzZSh7IGRhdGEsIHBhdGg6IGN0eC5wYXRoLCBwYXJlbnQ6IGN0eCB9KTtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgKGlzQXN5bmMobWF5YmVBc3luY1Jlc3VsdCkgPyBtYXliZUFzeW5jUmVzdWx0IDogUHJvbWlzZS5yZXNvbHZlKG1heWJlQXN5bmNSZXN1bHQpKTtcbiAgICAgICAgcmV0dXJuIGhhbmRsZVJlc3VsdChjdHgsIHJlc3VsdCk7XG4gICAgfVxuICAgIHJlZmluZShjaGVjaywgbWVzc2FnZSkge1xuICAgICAgICBjb25zdCBnZXRJc3N1ZVByb3BlcnRpZXMgPSAodmFsKSA9PiB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIG1lc3NhZ2UgPT09IFwic3RyaW5nXCIgfHwgdHlwZW9mIG1lc3NhZ2UgPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4geyBtZXNzYWdlIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh0eXBlb2YgbWVzc2FnZSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG1lc3NhZ2UodmFsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gdGhpcy5fcmVmaW5lbWVudCgodmFsLCBjdHgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGNoZWNrKHZhbCk7XG4gICAgICAgICAgICBjb25zdCBzZXRFcnJvciA9ICgpID0+IGN0eC5hZGRJc3N1ZSh7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmN1c3RvbSxcbiAgICAgICAgICAgICAgICAuLi5nZXRJc3N1ZVByb3BlcnRpZXModmFsKSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBQcm9taXNlICE9PSBcInVuZGVmaW5lZFwiICYmIHJlc3VsdCBpbnN0YW5jZW9mIFByb21pc2UpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0LnRoZW4oKGRhdGEpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRFcnJvcigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghcmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgc2V0RXJyb3IoKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHJlZmluZW1lbnQoY2hlY2ssIHJlZmluZW1lbnREYXRhKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9yZWZpbmVtZW50KCh2YWwsIGN0eCkgPT4ge1xuICAgICAgICAgICAgaWYgKCFjaGVjayh2YWwpKSB7XG4gICAgICAgICAgICAgICAgY3R4LmFkZElzc3VlKHR5cGVvZiByZWZpbmVtZW50RGF0YSA9PT0gXCJmdW5jdGlvblwiID8gcmVmaW5lbWVudERhdGEodmFsLCBjdHgpIDogcmVmaW5lbWVudERhdGEpO1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgX3JlZmluZW1lbnQocmVmaW5lbWVudCkge1xuICAgICAgICByZXR1cm4gbmV3IFpvZEVmZmVjdHMoe1xuICAgICAgICAgICAgc2NoZW1hOiB0aGlzLFxuICAgICAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RFZmZlY3RzLFxuICAgICAgICAgICAgZWZmZWN0OiB7IHR5cGU6IFwicmVmaW5lbWVudFwiLCByZWZpbmVtZW50IH0sXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBzdXBlclJlZmluZShyZWZpbmVtZW50KSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9yZWZpbmVtZW50KHJlZmluZW1lbnQpO1xuICAgIH1cbiAgICBjb25zdHJ1Y3RvcihkZWYpIHtcbiAgICAgICAgLyoqIEFsaWFzIG9mIHNhZmVQYXJzZUFzeW5jICovXG4gICAgICAgIHRoaXMuc3BhID0gdGhpcy5zYWZlUGFyc2VBc3luYztcbiAgICAgICAgdGhpcy5fZGVmID0gZGVmO1xuICAgICAgICB0aGlzLnBhcnNlID0gdGhpcy5wYXJzZS5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLnNhZmVQYXJzZSA9IHRoaXMuc2FmZVBhcnNlLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMucGFyc2VBc3luYyA9IHRoaXMucGFyc2VBc3luYy5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLnNhZmVQYXJzZUFzeW5jID0gdGhpcy5zYWZlUGFyc2VBc3luYy5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLnNwYSA9IHRoaXMuc3BhLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMucmVmaW5lID0gdGhpcy5yZWZpbmUuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5yZWZpbmVtZW50ID0gdGhpcy5yZWZpbmVtZW50LmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuc3VwZXJSZWZpbmUgPSB0aGlzLnN1cGVyUmVmaW5lLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMub3B0aW9uYWwgPSB0aGlzLm9wdGlvbmFsLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMubnVsbGFibGUgPSB0aGlzLm51bGxhYmxlLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMubnVsbGlzaCA9IHRoaXMubnVsbGlzaC5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLmFycmF5ID0gdGhpcy5hcnJheS5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLnByb21pc2UgPSB0aGlzLnByb21pc2UuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5vciA9IHRoaXMub3IuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5hbmQgPSB0aGlzLmFuZC5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLnRyYW5zZm9ybSA9IHRoaXMudHJhbnNmb3JtLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuYnJhbmQgPSB0aGlzLmJyYW5kLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuZGVmYXVsdCA9IHRoaXMuZGVmYXVsdC5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLmNhdGNoID0gdGhpcy5jYXRjaC5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLmRlc2NyaWJlID0gdGhpcy5kZXNjcmliZS5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLnBpcGUgPSB0aGlzLnBpcGUuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5yZWFkb25seSA9IHRoaXMucmVhZG9ubHkuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5pc051bGxhYmxlID0gdGhpcy5pc051bGxhYmxlLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuaXNPcHRpb25hbCA9IHRoaXMuaXNPcHRpb25hbC5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzW1wifnN0YW5kYXJkXCJdID0ge1xuICAgICAgICAgICAgdmVyc2lvbjogMSxcbiAgICAgICAgICAgIHZlbmRvcjogXCJ6b2RcIixcbiAgICAgICAgICAgIHZhbGlkYXRlOiAoZGF0YSkgPT4gdGhpc1tcIn52YWxpZGF0ZVwiXShkYXRhKSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgb3B0aW9uYWwoKSB7XG4gICAgICAgIHJldHVybiBab2RPcHRpb25hbC5jcmVhdGUodGhpcywgdGhpcy5fZGVmKTtcbiAgICB9XG4gICAgbnVsbGFibGUoKSB7XG4gICAgICAgIHJldHVybiBab2ROdWxsYWJsZS5jcmVhdGUodGhpcywgdGhpcy5fZGVmKTtcbiAgICB9XG4gICAgbnVsbGlzaCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubnVsbGFibGUoKS5vcHRpb25hbCgpO1xuICAgIH1cbiAgICBhcnJheSgpIHtcbiAgICAgICAgcmV0dXJuIFpvZEFycmF5LmNyZWF0ZSh0aGlzKTtcbiAgICB9XG4gICAgcHJvbWlzZSgpIHtcbiAgICAgICAgcmV0dXJuIFpvZFByb21pc2UuY3JlYXRlKHRoaXMsIHRoaXMuX2RlZik7XG4gICAgfVxuICAgIG9yKG9wdGlvbikge1xuICAgICAgICByZXR1cm4gWm9kVW5pb24uY3JlYXRlKFt0aGlzLCBvcHRpb25dLCB0aGlzLl9kZWYpO1xuICAgIH1cbiAgICBhbmQoaW5jb21pbmcpIHtcbiAgICAgICAgcmV0dXJuIFpvZEludGVyc2VjdGlvbi5jcmVhdGUodGhpcywgaW5jb21pbmcsIHRoaXMuX2RlZik7XG4gICAgfVxuICAgIHRyYW5zZm9ybSh0cmFuc2Zvcm0pIHtcbiAgICAgICAgcmV0dXJuIG5ldyBab2RFZmZlY3RzKHtcbiAgICAgICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXModGhpcy5fZGVmKSxcbiAgICAgICAgICAgIHNjaGVtYTogdGhpcyxcbiAgICAgICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kRWZmZWN0cyxcbiAgICAgICAgICAgIGVmZmVjdDogeyB0eXBlOiBcInRyYW5zZm9ybVwiLCB0cmFuc2Zvcm0gfSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGRlZmF1bHQoZGVmKSB7XG4gICAgICAgIGNvbnN0IGRlZmF1bHRWYWx1ZUZ1bmMgPSB0eXBlb2YgZGVmID09PSBcImZ1bmN0aW9uXCIgPyBkZWYgOiAoKSA9PiBkZWY7XG4gICAgICAgIHJldHVybiBuZXcgWm9kRGVmYXVsdCh7XG4gICAgICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHRoaXMuX2RlZiksXG4gICAgICAgICAgICBpbm5lclR5cGU6IHRoaXMsXG4gICAgICAgICAgICBkZWZhdWx0VmFsdWU6IGRlZmF1bHRWYWx1ZUZ1bmMsXG4gICAgICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZERlZmF1bHQsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBicmFuZCgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBab2RCcmFuZGVkKHtcbiAgICAgICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kQnJhbmRlZCxcbiAgICAgICAgICAgIHR5cGU6IHRoaXMsXG4gICAgICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHRoaXMuX2RlZiksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBjYXRjaChkZWYpIHtcbiAgICAgICAgY29uc3QgY2F0Y2hWYWx1ZUZ1bmMgPSB0eXBlb2YgZGVmID09PSBcImZ1bmN0aW9uXCIgPyBkZWYgOiAoKSA9PiBkZWY7XG4gICAgICAgIHJldHVybiBuZXcgWm9kQ2F0Y2goe1xuICAgICAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyh0aGlzLl9kZWYpLFxuICAgICAgICAgICAgaW5uZXJUeXBlOiB0aGlzLFxuICAgICAgICAgICAgY2F0Y2hWYWx1ZTogY2F0Y2hWYWx1ZUZ1bmMsXG4gICAgICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZENhdGNoLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgZGVzY3JpYmUoZGVzY3JpcHRpb24pIHtcbiAgICAgICAgY29uc3QgVGhpcyA9IHRoaXMuY29uc3RydWN0b3I7XG4gICAgICAgIHJldHVybiBuZXcgVGhpcyh7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICBkZXNjcmlwdGlvbixcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHBpcGUodGFyZ2V0KSB7XG4gICAgICAgIHJldHVybiBab2RQaXBlbGluZS5jcmVhdGUodGhpcywgdGFyZ2V0KTtcbiAgICB9XG4gICAgcmVhZG9ubHkoKSB7XG4gICAgICAgIHJldHVybiBab2RSZWFkb25seS5jcmVhdGUodGhpcyk7XG4gICAgfVxuICAgIGlzT3B0aW9uYWwoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNhZmVQYXJzZSh1bmRlZmluZWQpLnN1Y2Nlc3M7XG4gICAgfVxuICAgIGlzTnVsbGFibGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNhZmVQYXJzZShudWxsKS5zdWNjZXNzO1xuICAgIH1cbn1cbmNvbnN0IGN1aWRSZWdleCA9IC9eY1teXFxzLV17OCx9JC9pO1xuY29uc3QgY3VpZDJSZWdleCA9IC9eWzAtOWEtel0rJC87XG5jb25zdCB1bGlkUmVnZXggPSAvXlswLTlBLUhKS01OUC1UVi1aXXsyNn0kL2k7XG4vLyBjb25zdCB1dWlkUmVnZXggPVxuLy8gICAvXihbYS1mMC05XXs4fS1bYS1mMC05XXs0fS1bMS01XVthLWYwLTldezN9LVthLWYwLTldezR9LVthLWYwLTldezEyfXwwMDAwMDAwMC0wMDAwLTAwMDAtMDAwMC0wMDAwMDAwMDAwMDApJC9pO1xuY29uc3QgdXVpZFJlZ2V4ID0gL15bMC05YS1mQS1GXXs4fVxcYi1bMC05YS1mQS1GXXs0fVxcYi1bMC05YS1mQS1GXXs0fVxcYi1bMC05YS1mQS1GXXs0fVxcYi1bMC05YS1mQS1GXXsxMn0kL2k7XG5jb25zdCBuYW5vaWRSZWdleCA9IC9eW2EtejAtOV8tXXsyMX0kL2k7XG5jb25zdCBqd3RSZWdleCA9IC9eW0EtWmEtejAtOS1fXStcXC5bQS1aYS16MC05LV9dK1xcLltBLVphLXowLTktX10qJC87XG5jb25zdCBkdXJhdGlvblJlZ2V4ID0gL15bLStdP1AoPyEkKSg/Oig/OlstK10/XFxkK1kpfCg/OlstK10/XFxkK1suLF1cXGQrWSQpKT8oPzooPzpbLStdP1xcZCtNKXwoPzpbLStdP1xcZCtbLixdXFxkK00kKSk/KD86KD86Wy0rXT9cXGQrVyl8KD86Wy0rXT9cXGQrWy4sXVxcZCtXJCkpPyg/Oig/OlstK10/XFxkK0QpfCg/OlstK10/XFxkK1suLF1cXGQrRCQpKT8oPzpUKD89W1xcZCstXSkoPzooPzpbLStdP1xcZCtIKXwoPzpbLStdP1xcZCtbLixdXFxkK0gkKSk/KD86KD86Wy0rXT9cXGQrTSl8KD86Wy0rXT9cXGQrWy4sXVxcZCtNJCkpPyg/OlstK10/XFxkKyg/OlsuLF1cXGQrKT9TKT8pPz8kLztcbi8vIGZyb20gaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9hLzQ2MTgxLzE1NTAxNTVcbi8vIG9sZCB2ZXJzaW9uOiB0b28gc2xvdywgZGlkbid0IHN1cHBvcnQgdW5pY29kZVxuLy8gY29uc3QgZW1haWxSZWdleCA9IC9eKCgoW2Etel18XFxkfFshI1xcJCUmJ1xcKlxcK1xcLVxcLz1cXD9cXF5fYHtcXHx9fl18W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pKyhcXC4oW2Etel18XFxkfFshI1xcJCUmJ1xcKlxcK1xcLVxcLz1cXD9cXF5fYHtcXHx9fl18W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pKykqKXwoKFxceDIyKSgoKChcXHgyMHxcXHgwOSkqKFxceDBkXFx4MGEpKT8oXFx4MjB8XFx4MDkpKyk/KChbXFx4MDEtXFx4MDhcXHgwYlxceDBjXFx4MGUtXFx4MWZcXHg3Zl18XFx4MjF8W1xceDIzLVxceDViXXxbXFx4NWQtXFx4N2VdfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKXwoXFxcXChbXFx4MDEtXFx4MDlcXHgwYlxceDBjXFx4MGQtXFx4N2ZdfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKSkpKSooKChcXHgyMHxcXHgwOSkqKFxceDBkXFx4MGEpKT8oXFx4MjB8XFx4MDkpKyk/KFxceDIyKSkpQCgoKFthLXpdfFxcZHxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSl8KChbYS16XXxcXGR8W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pKFthLXpdfFxcZHwtfFxcLnxffH58W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pKihbYS16XXxcXGR8W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pKSlcXC4pKygoW2Etel18W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pfCgoW2Etel18W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pKFthLXpdfFxcZHwtfFxcLnxffH58W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pKihbYS16XXxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSkpKSQvaTtcbi8vb2xkIGVtYWlsIHJlZ2V4XG4vLyBjb25zdCBlbWFpbFJlZ2V4ID0gL14oKFtePD4oKVtcXF0uLDs6XFxzQFwiXSsoXFwuW148PigpW1xcXS4sOzpcXHNAXCJdKykqKXwoXCIuK1wiKSlAKCg/IS0pKFtePD4oKVtcXF0uLDs6XFxzQFwiXStcXC4pK1tePD4oKVtcXF0uLDs6XFxzQFwiXXsxLH0pW14tPD4oKVtcXF0uLDs6XFxzQFwiXSQvaTtcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZVxuLy8gY29uc3QgZW1haWxSZWdleCA9XG4vLyAgIC9eKChbXjw+KClbXFxdXFxcXC4sOzpcXHNAXFxcIl0rKFxcLltePD4oKVtcXF1cXFxcLiw7Olxcc0BcXFwiXSspKil8KFxcXCIuK1xcXCIpKUAoKFxcWygoKDI1WzAtNV0pfCgyWzAtNF1bMC05XSl8KDFbMC05XXsyfSl8KFswLTldezEsMn0pKVxcLil7M30oKDI1WzAtNV0pfCgyWzAtNF1bMC05XSl8KDFbMC05XXsyfSl8KFswLTldezEsMn0pKVxcXSl8KFxcW0lQdjY6KChbYS1mMC05XXsxLDR9Oil7N318OjooW2EtZjAtOV17MSw0fTopezAsNn18KFthLWYwLTldezEsNH06KXsxfTooW2EtZjAtOV17MSw0fTopezAsNX18KFthLWYwLTldezEsNH06KXsyfTooW2EtZjAtOV17MSw0fTopezAsNH18KFthLWYwLTldezEsNH06KXszfTooW2EtZjAtOV17MSw0fTopezAsM318KFthLWYwLTldezEsNH06KXs0fTooW2EtZjAtOV17MSw0fTopezAsMn18KFthLWYwLTldezEsNH06KXs1fTooW2EtZjAtOV17MSw0fTopezAsMX0pKFthLWYwLTldezEsNH18KCgoMjVbMC01XSl8KDJbMC00XVswLTldKXwoMVswLTldezJ9KXwoWzAtOV17MSwyfSkpXFwuKXszfSgoMjVbMC01XSl8KDJbMC00XVswLTldKXwoMVswLTldezJ9KXwoWzAtOV17MSwyfSkpKVxcXSl8KFtBLVphLXowLTldKFtBLVphLXowLTktXSpbQS1aYS16MC05XSkqKFxcLltBLVphLXpdezIsfSkrKSkkLztcbi8vIGNvbnN0IGVtYWlsUmVnZXggPVxuLy8gICAvXlthLXpBLVowLTlcXC5cXCFcXCNcXCRcXCVcXCZcXCdcXCpcXCtcXC9cXD1cXD9cXF5cXF9cXGBcXHtcXHxcXH1cXH5cXC1dK0BbYS16QS1aMC05XSg/OlthLXpBLVowLTktXXswLDYxfVthLXpBLVowLTldKT8oPzpcXC5bYS16QS1aMC05XSg/OlthLXpBLVowLTktXXswLDYxfVthLXpBLVowLTldKT8pKiQvO1xuLy8gY29uc3QgZW1haWxSZWdleCA9XG4vLyAgIC9eKD86W2EtejAtOSEjJCUmJyorLz0/Xl9ge3x9fi1dKyg/OlxcLlthLXowLTkhIyQlJicqKy89P15fYHt8fX4tXSspKnxcIig/OltcXHgwMS1cXHgwOFxceDBiXFx4MGNcXHgwZS1cXHgxZlxceDIxXFx4MjMtXFx4NWJcXHg1ZC1cXHg3Zl18XFxcXFtcXHgwMS1cXHgwOVxceDBiXFx4MGNcXHgwZS1cXHg3Zl0pKlwiKUAoPzooPzpbYS16MC05XSg/OlthLXowLTktXSpbYS16MC05XSk/XFwuKStbYS16MC05XSg/OlthLXowLTktXSpbYS16MC05XSk/fFxcWyg/Oig/OjI1WzAtNV18MlswLTRdWzAtOV18WzAxXT9bMC05XVswLTldPylcXC4pezN9KD86MjVbMC01XXwyWzAtNF1bMC05XXxbMDFdP1swLTldWzAtOV0/fFthLXowLTktXSpbYS16MC05XTooPzpbXFx4MDEtXFx4MDhcXHgwYlxceDBjXFx4MGUtXFx4MWZcXHgyMS1cXHg1YVxceDUzLVxceDdmXXxcXFxcW1xceDAxLVxceDA5XFx4MGJcXHgwY1xceDBlLVxceDdmXSkrKVxcXSkkL2k7XG5jb25zdCBlbWFpbFJlZ2V4ID0gL14oPyFcXC4pKD8hLipcXC5cXC4pKFtBLVowLTlfJytcXC1cXC5dKilbQS1aMC05XystXUAoW0EtWjAtOV1bQS1aMC05XFwtXSpcXC4pK1tBLVpdezIsfSQvaTtcbi8vIGNvbnN0IGVtYWlsUmVnZXggPVxuLy8gICAvXlthLXowLTkuISMkJSbigJkqKy89P15fYHt8fX4tXStAW2EtejAtOS1dKyg/OlxcLlthLXowLTlcXC1dKykqJC9pO1xuLy8gZnJvbSBodHRwczovL3RoZWtldmluc2NvdHQuY29tL2Vtb2ppcy1pbi1qYXZhc2NyaXB0LyN3cml0aW5nLWEtcmVndWxhci1leHByZXNzaW9uXG5jb25zdCBfZW1vamlSZWdleCA9IGBeKFxcXFxwe0V4dGVuZGVkX1BpY3RvZ3JhcGhpY318XFxcXHB7RW1vamlfQ29tcG9uZW50fSkrJGA7XG5sZXQgZW1vamlSZWdleDtcbi8vIGZhc3Rlciwgc2ltcGxlciwgc2FmZXJcbmNvbnN0IGlwdjRSZWdleCA9IC9eKD86KD86MjVbMC01XXwyWzAtNF1bMC05XXwxWzAtOV1bMC05XXxbMS05XVswLTldfFswLTldKVxcLil7M30oPzoyNVswLTVdfDJbMC00XVswLTldfDFbMC05XVswLTldfFsxLTldWzAtOV18WzAtOV0pJC87XG5jb25zdCBpcHY0Q2lkclJlZ2V4ID0gL14oPzooPzoyNVswLTVdfDJbMC00XVswLTldfDFbMC05XVswLTldfFsxLTldWzAtOV18WzAtOV0pXFwuKXszfSg/OjI1WzAtNV18MlswLTRdWzAtOV18MVswLTldWzAtOV18WzEtOV1bMC05XXxbMC05XSlcXC8oM1swLTJdfFsxMl0/WzAtOV0pJC87XG4vLyBjb25zdCBpcHY2UmVnZXggPVxuLy8gL14oKFthLWYwLTldezEsNH06KXs3fXw6OihbYS1mMC05XXsxLDR9Oil7MCw2fXwoW2EtZjAtOV17MSw0fTopezF9OihbYS1mMC05XXsxLDR9Oil7MCw1fXwoW2EtZjAtOV17MSw0fTopezJ9OihbYS1mMC05XXsxLDR9Oil7MCw0fXwoW2EtZjAtOV17MSw0fTopezN9OihbYS1mMC05XXsxLDR9Oil7MCwzfXwoW2EtZjAtOV17MSw0fTopezR9OihbYS1mMC05XXsxLDR9Oil7MCwyfXwoW2EtZjAtOV17MSw0fTopezV9OihbYS1mMC05XXsxLDR9Oil7MCwxfSkoW2EtZjAtOV17MSw0fXwoKCgyNVswLTVdKXwoMlswLTRdWzAtOV0pfCgxWzAtOV17Mn0pfChbMC05XXsxLDJ9KSlcXC4pezN9KCgyNVswLTVdKXwoMlswLTRdWzAtOV0pfCgxWzAtOV17Mn0pfChbMC05XXsxLDJ9KSkpJC87XG5jb25zdCBpcHY2UmVnZXggPSAvXigoWzAtOWEtZkEtRl17MSw0fTopezcsN31bMC05YS1mQS1GXXsxLDR9fChbMC05YS1mQS1GXXsxLDR9Oil7MSw3fTp8KFswLTlhLWZBLUZdezEsNH06KXsxLDZ9OlswLTlhLWZBLUZdezEsNH18KFswLTlhLWZBLUZdezEsNH06KXsxLDV9KDpbMC05YS1mQS1GXXsxLDR9KXsxLDJ9fChbMC05YS1mQS1GXXsxLDR9Oil7MSw0fSg6WzAtOWEtZkEtRl17MSw0fSl7MSwzfXwoWzAtOWEtZkEtRl17MSw0fTopezEsM30oOlswLTlhLWZBLUZdezEsNH0pezEsNH18KFswLTlhLWZBLUZdezEsNH06KXsxLDJ9KDpbMC05YS1mQS1GXXsxLDR9KXsxLDV9fFswLTlhLWZBLUZdezEsNH06KCg6WzAtOWEtZkEtRl17MSw0fSl7MSw2fSl8OigoOlswLTlhLWZBLUZdezEsNH0pezEsN318Oil8ZmU4MDooOlswLTlhLWZBLUZdezAsNH0pezAsNH0lWzAtOWEtekEtWl17MSx9fDo6KGZmZmYoOjB7MSw0fSl7MCwxfTopezAsMX0oKDI1WzAtNV18KDJbMC00XXwxezAsMX1bMC05XSl7MCwxfVswLTldKVxcLil7MywzfSgyNVswLTVdfCgyWzAtNF18MXswLDF9WzAtOV0pezAsMX1bMC05XSl8KFswLTlhLWZBLUZdezEsNH06KXsxLDR9OigoMjVbMC01XXwoMlswLTRdfDF7MCwxfVswLTldKXswLDF9WzAtOV0pXFwuKXszLDN9KDI1WzAtNV18KDJbMC00XXwxezAsMX1bMC05XSl7MCwxfVswLTldKSkkLztcbmNvbnN0IGlwdjZDaWRyUmVnZXggPSAvXigoWzAtOWEtZkEtRl17MSw0fTopezcsN31bMC05YS1mQS1GXXsxLDR9fChbMC05YS1mQS1GXXsxLDR9Oil7MSw3fTp8KFswLTlhLWZBLUZdezEsNH06KXsxLDZ9OlswLTlhLWZBLUZdezEsNH18KFswLTlhLWZBLUZdezEsNH06KXsxLDV9KDpbMC05YS1mQS1GXXsxLDR9KXsxLDJ9fChbMC05YS1mQS1GXXsxLDR9Oil7MSw0fSg6WzAtOWEtZkEtRl17MSw0fSl7MSwzfXwoWzAtOWEtZkEtRl17MSw0fTopezEsM30oOlswLTlhLWZBLUZdezEsNH0pezEsNH18KFswLTlhLWZBLUZdezEsNH06KXsxLDJ9KDpbMC05YS1mQS1GXXsxLDR9KXsxLDV9fFswLTlhLWZBLUZdezEsNH06KCg6WzAtOWEtZkEtRl17MSw0fSl7MSw2fSl8OigoOlswLTlhLWZBLUZdezEsNH0pezEsN318Oil8ZmU4MDooOlswLTlhLWZBLUZdezAsNH0pezAsNH0lWzAtOWEtekEtWl17MSx9fDo6KGZmZmYoOjB7MSw0fSl7MCwxfTopezAsMX0oKDI1WzAtNV18KDJbMC00XXwxezAsMX1bMC05XSl7MCwxfVswLTldKVxcLil7MywzfSgyNVswLTVdfCgyWzAtNF18MXswLDF9WzAtOV0pezAsMX1bMC05XSl8KFswLTlhLWZBLUZdezEsNH06KXsxLDR9OigoMjVbMC01XXwoMlswLTRdfDF7MCwxfVswLTldKXswLDF9WzAtOV0pXFwuKXszLDN9KDI1WzAtNV18KDJbMC00XXwxezAsMX1bMC05XSl7MCwxfVswLTldKSlcXC8oMTJbMC04XXwxWzAxXVswLTldfFsxLTldP1swLTldKSQvO1xuLy8gaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvNzg2MDM5Mi9kZXRlcm1pbmUtaWYtc3RyaW5nLWlzLWluLWJhc2U2NC11c2luZy1qYXZhc2NyaXB0XG5jb25zdCBiYXNlNjRSZWdleCA9IC9eKFswLTlhLXpBLVorL117NH0pKigoWzAtOWEtekEtWisvXXsyfT09KXwoWzAtOWEtekEtWisvXXszfT0pKT8kLztcbi8vIGh0dHBzOi8vYmFzZTY0Lmd1cnUvc3RhbmRhcmRzL2Jhc2U2NHVybFxuY29uc3QgYmFzZTY0dXJsUmVnZXggPSAvXihbMC05YS16QS1aLV9dezR9KSooKFswLTlhLXpBLVotX117Mn0oPT0pPyl8KFswLTlhLXpBLVotX117M30oPSk/KSk/JC87XG4vLyBzaW1wbGVcbi8vIGNvbnN0IGRhdGVSZWdleFNvdXJjZSA9IGBcXFxcZHs0fS1cXFxcZHsyfS1cXFxcZHsyfWA7XG4vLyBubyBsZWFwIHllYXIgdmFsaWRhdGlvblxuLy8gY29uc3QgZGF0ZVJlZ2V4U291cmNlID0gYFxcXFxkezR9LSgoMFsxMzU3OF18MTB8MTIpLTMxfCgwWzEzLTldfDFbMC0yXSktMzB8KDBbMS05XXwxWzAtMl0pLSgwWzEtOV18MVxcXFxkfDJcXFxcZCkpYDtcbi8vIHdpdGggbGVhcCB5ZWFyIHZhbGlkYXRpb25cbmNvbnN0IGRhdGVSZWdleFNvdXJjZSA9IGAoKFxcXFxkXFxcXGRbMjQ2OF1bMDQ4XXxcXFxcZFxcXFxkWzEzNTc5XVsyNl18XFxcXGRcXFxcZDBbNDhdfFswMjQ2OF1bMDQ4XTAwfFsxMzU3OV1bMjZdMDApLTAyLTI5fFxcXFxkezR9LSgoMFsxMzU3OF18MVswMl0pLSgwWzEtOV18WzEyXVxcXFxkfDNbMDFdKXwoMFs0NjldfDExKS0oMFsxLTldfFsxMl1cXFxcZHwzMCl8KDAyKS0oMFsxLTldfDFcXFxcZHwyWzAtOF0pKSlgO1xuY29uc3QgZGF0ZVJlZ2V4ID0gbmV3IFJlZ0V4cChgXiR7ZGF0ZVJlZ2V4U291cmNlfSRgKTtcbmZ1bmN0aW9uIHRpbWVSZWdleFNvdXJjZShhcmdzKSB7XG4gICAgbGV0IHNlY29uZHNSZWdleFNvdXJjZSA9IGBbMC01XVxcXFxkYDtcbiAgICBpZiAoYXJncy5wcmVjaXNpb24pIHtcbiAgICAgICAgc2Vjb25kc1JlZ2V4U291cmNlID0gYCR7c2Vjb25kc1JlZ2V4U291cmNlfVxcXFwuXFxcXGR7JHthcmdzLnByZWNpc2lvbn19YDtcbiAgICB9XG4gICAgZWxzZSBpZiAoYXJncy5wcmVjaXNpb24gPT0gbnVsbCkge1xuICAgICAgICBzZWNvbmRzUmVnZXhTb3VyY2UgPSBgJHtzZWNvbmRzUmVnZXhTb3VyY2V9KFxcXFwuXFxcXGQrKT9gO1xuICAgIH1cbiAgICBjb25zdCBzZWNvbmRzUXVhbnRpZmllciA9IGFyZ3MucHJlY2lzaW9uID8gXCIrXCIgOiBcIj9cIjsgLy8gcmVxdWlyZSBzZWNvbmRzIGlmIHByZWNpc2lvbiBpcyBub256ZXJvXG4gICAgcmV0dXJuIGAoWzAxXVxcXFxkfDJbMC0zXSk6WzAtNV1cXFxcZCg6JHtzZWNvbmRzUmVnZXhTb3VyY2V9KSR7c2Vjb25kc1F1YW50aWZpZXJ9YDtcbn1cbmZ1bmN0aW9uIHRpbWVSZWdleChhcmdzKSB7XG4gICAgcmV0dXJuIG5ldyBSZWdFeHAoYF4ke3RpbWVSZWdleFNvdXJjZShhcmdzKX0kYCk7XG59XG4vLyBBZGFwdGVkIGZyb20gaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9hLzMxNDMyMzFcbmV4cG9ydCBmdW5jdGlvbiBkYXRldGltZVJlZ2V4KGFyZ3MpIHtcbiAgICBsZXQgcmVnZXggPSBgJHtkYXRlUmVnZXhTb3VyY2V9VCR7dGltZVJlZ2V4U291cmNlKGFyZ3MpfWA7XG4gICAgY29uc3Qgb3B0cyA9IFtdO1xuICAgIG9wdHMucHVzaChhcmdzLmxvY2FsID8gYFo/YCA6IGBaYCk7XG4gICAgaWYgKGFyZ3Mub2Zmc2V0KVxuICAgICAgICBvcHRzLnB1c2goYChbKy1dXFxcXGR7Mn06P1xcXFxkezJ9KWApO1xuICAgIHJlZ2V4ID0gYCR7cmVnZXh9KCR7b3B0cy5qb2luKFwifFwiKX0pYDtcbiAgICByZXR1cm4gbmV3IFJlZ0V4cChgXiR7cmVnZXh9JGApO1xufVxuZnVuY3Rpb24gaXNWYWxpZElQKGlwLCB2ZXJzaW9uKSB7XG4gICAgaWYgKCh2ZXJzaW9uID09PSBcInY0XCIgfHwgIXZlcnNpb24pICYmIGlwdjRSZWdleC50ZXN0KGlwKSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgaWYgKCh2ZXJzaW9uID09PSBcInY2XCIgfHwgIXZlcnNpb24pICYmIGlwdjZSZWdleC50ZXN0KGlwKSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xufVxuZnVuY3Rpb24gaXNWYWxpZEpXVChqd3QsIGFsZykge1xuICAgIGlmICghand0UmVnZXgudGVzdChqd3QpKVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgW2hlYWRlcl0gPSBqd3Quc3BsaXQoXCIuXCIpO1xuICAgICAgICBpZiAoIWhlYWRlcilcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgLy8gQ29udmVydCBiYXNlNjR1cmwgdG8gYmFzZTY0XG4gICAgICAgIGNvbnN0IGJhc2U2NCA9IGhlYWRlclxuICAgICAgICAgICAgLnJlcGxhY2UoLy0vZywgXCIrXCIpXG4gICAgICAgICAgICAucmVwbGFjZSgvXy9nLCBcIi9cIilcbiAgICAgICAgICAgIC5wYWRFbmQoaGVhZGVyLmxlbmd0aCArICgoNCAtIChoZWFkZXIubGVuZ3RoICUgNCkpICUgNCksIFwiPVwiKTtcbiAgICAgICAgY29uc3QgZGVjb2RlZCA9IEpTT04ucGFyc2UoYXRvYihiYXNlNjQpKTtcbiAgICAgICAgaWYgKHR5cGVvZiBkZWNvZGVkICE9PSBcIm9iamVjdFwiIHx8IGRlY29kZWQgPT09IG51bGwpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIGlmIChcInR5cFwiIGluIGRlY29kZWQgJiYgZGVjb2RlZD8udHlwICE9PSBcIkpXVFwiKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICBpZiAoIWRlY29kZWQuYWxnKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICBpZiAoYWxnICYmIGRlY29kZWQuYWxnICE9PSBhbGcpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBjYXRjaCB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG59XG5mdW5jdGlvbiBpc1ZhbGlkQ2lkcihpcCwgdmVyc2lvbikge1xuICAgIGlmICgodmVyc2lvbiA9PT0gXCJ2NFwiIHx8ICF2ZXJzaW9uKSAmJiBpcHY0Q2lkclJlZ2V4LnRlc3QoaXApKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBpZiAoKHZlcnNpb24gPT09IFwidjZcIiB8fCAhdmVyc2lvbikgJiYgaXB2NkNpZHJSZWdleC50ZXN0KGlwKSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xufVxuZXhwb3J0IGNsYXNzIFpvZFN0cmluZyBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBpZiAodGhpcy5fZGVmLmNvZXJjZSkge1xuICAgICAgICAgICAgaW5wdXQuZGF0YSA9IFN0cmluZyhpbnB1dC5kYXRhKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwYXJzZWRUeXBlID0gdGhpcy5fZ2V0VHlwZShpbnB1dCk7XG4gICAgICAgIGlmIChwYXJzZWRUeXBlICE9PSBab2RQYXJzZWRUeXBlLnN0cmluZykge1xuICAgICAgICAgICAgY29uc3QgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQpO1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogWm9kUGFyc2VkVHlwZS5zdHJpbmcsXG4gICAgICAgICAgICAgICAgcmVjZWl2ZWQ6IGN0eC5wYXJzZWRUeXBlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBzdGF0dXMgPSBuZXcgUGFyc2VTdGF0dXMoKTtcbiAgICAgICAgbGV0IGN0eCA9IHVuZGVmaW5lZDtcbiAgICAgICAgZm9yIChjb25zdCBjaGVjayBvZiB0aGlzLl9kZWYuY2hlY2tzKSB7XG4gICAgICAgICAgICBpZiAoY2hlY2sua2luZCA9PT0gXCJtaW5cIikge1xuICAgICAgICAgICAgICAgIGlmIChpbnB1dC5kYXRhLmxlbmd0aCA8IGNoZWNrLnZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS50b29fc21hbGwsXG4gICAgICAgICAgICAgICAgICAgICAgICBtaW5pbXVtOiBjaGVjay52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwic3RyaW5nXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBpbmNsdXNpdmU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBleGFjdDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJtYXhcIikge1xuICAgICAgICAgICAgICAgIGlmIChpbnB1dC5kYXRhLmxlbmd0aCA+IGNoZWNrLnZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS50b29fYmlnLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWF4aW11bTogY2hlY2sudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcInN0cmluZ1wiLFxuICAgICAgICAgICAgICAgICAgICAgICAgaW5jbHVzaXZlOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgZXhhY3Q6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwibGVuZ3RoXCIpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0b29CaWcgPSBpbnB1dC5kYXRhLmxlbmd0aCA+IGNoZWNrLnZhbHVlO1xuICAgICAgICAgICAgICAgIGNvbnN0IHRvb1NtYWxsID0gaW5wdXQuZGF0YS5sZW5ndGggPCBjaGVjay52YWx1ZTtcbiAgICAgICAgICAgICAgICBpZiAodG9vQmlnIHx8IHRvb1NtYWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAodG9vQmlnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUudG9vX2JpZyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXhpbXVtOiBjaGVjay52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcInN0cmluZ1wiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluY2x1c2l2ZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBleGFjdDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAodG9vU21hbGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS50b29fc21hbGwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWluaW11bTogY2hlY2sudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJzdHJpbmdcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmNsdXNpdmU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhhY3Q6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwiZW1haWxcIikge1xuICAgICAgICAgICAgICAgIGlmICghZW1haWxSZWdleC50ZXN0KGlucHV0LmRhdGEpKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkYXRpb246IFwiZW1haWxcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3N0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcImVtb2ppXCIpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWVtb2ppUmVnZXgpIHtcbiAgICAgICAgICAgICAgICAgICAgZW1vamlSZWdleCA9IG5ldyBSZWdFeHAoX2Vtb2ppUmVnZXgsIFwidVwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKCFlbW9qaVJlZ2V4LnRlc3QoaW5wdXQuZGF0YSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbjogXCJlbW9qaVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfc3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwidXVpZFwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKCF1dWlkUmVnZXgudGVzdChpbnB1dC5kYXRhKSkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWxpZGF0aW9uOiBcInV1aWRcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3N0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcIm5hbm9pZFwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFuYW5vaWRSZWdleC50ZXN0KGlucHV0LmRhdGEpKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkYXRpb246IFwibmFub2lkXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9zdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJjdWlkXCIpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWN1aWRSZWdleC50ZXN0KGlucHV0LmRhdGEpKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkYXRpb246IFwiY3VpZFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfc3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwiY3VpZDJcIikge1xuICAgICAgICAgICAgICAgIGlmICghY3VpZDJSZWdleC50ZXN0KGlucHV0LmRhdGEpKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkYXRpb246IFwiY3VpZDJcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3N0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcInVsaWRcIikge1xuICAgICAgICAgICAgICAgIGlmICghdWxpZFJlZ2V4LnRlc3QoaW5wdXQuZGF0YSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbjogXCJ1bGlkXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9zdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJ1cmxcIikge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIG5ldyBVUkwoaW5wdXQuZGF0YSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbjogXCJ1cmxcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3N0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcInJlZ2V4XCIpIHtcbiAgICAgICAgICAgICAgICBjaGVjay5yZWdleC5sYXN0SW5kZXggPSAwO1xuICAgICAgICAgICAgICAgIGNvbnN0IHRlc3RSZXN1bHQgPSBjaGVjay5yZWdleC50ZXN0KGlucHV0LmRhdGEpO1xuICAgICAgICAgICAgICAgIGlmICghdGVzdFJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWxpZGF0aW9uOiBcInJlZ2V4XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9zdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJ0cmltXCIpIHtcbiAgICAgICAgICAgICAgICBpbnB1dC5kYXRhID0gaW5wdXQuZGF0YS50cmltKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcImluY2x1ZGVzXCIpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWlucHV0LmRhdGEuaW5jbHVkZXMoY2hlY2sudmFsdWUsIGNoZWNrLnBvc2l0aW9uKSkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9zdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWxpZGF0aW9uOiB7IGluY2x1ZGVzOiBjaGVjay52YWx1ZSwgcG9zaXRpb246IGNoZWNrLnBvc2l0aW9uIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJ0b0xvd2VyQ2FzZVwiKSB7XG4gICAgICAgICAgICAgICAgaW5wdXQuZGF0YSA9IGlucHV0LmRhdGEudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwidG9VcHBlckNhc2VcIikge1xuICAgICAgICAgICAgICAgIGlucHV0LmRhdGEgPSBpbnB1dC5kYXRhLnRvVXBwZXJDYXNlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcInN0YXJ0c1dpdGhcIikge1xuICAgICAgICAgICAgICAgIGlmICghaW5wdXQuZGF0YS5zdGFydHNXaXRoKGNoZWNrLnZhbHVlKSkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9zdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWxpZGF0aW9uOiB7IHN0YXJ0c1dpdGg6IGNoZWNrLnZhbHVlIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJlbmRzV2l0aFwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFpbnB1dC5kYXRhLmVuZHNXaXRoKGNoZWNrLnZhbHVlKSkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9zdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWxpZGF0aW9uOiB7IGVuZHNXaXRoOiBjaGVjay52YWx1ZSB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwiZGF0ZXRpbWVcIikge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlZ2V4ID0gZGF0ZXRpbWVSZWdleChjaGVjayk7XG4gICAgICAgICAgICAgICAgaWYgKCFyZWdleC50ZXN0KGlucHV0LmRhdGEpKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3N0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkYXRpb246IFwiZGF0ZXRpbWVcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcImRhdGVcIikge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlZ2V4ID0gZGF0ZVJlZ2V4O1xuICAgICAgICAgICAgICAgIGlmICghcmVnZXgudGVzdChpbnB1dC5kYXRhKSkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9zdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWxpZGF0aW9uOiBcImRhdGVcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcInRpbWVcIikge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlZ2V4ID0gdGltZVJlZ2V4KGNoZWNrKTtcbiAgICAgICAgICAgICAgICBpZiAoIXJlZ2V4LnRlc3QoaW5wdXQuZGF0YSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfc3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbjogXCJ0aW1lXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJkdXJhdGlvblwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFkdXJhdGlvblJlZ2V4LnRlc3QoaW5wdXQuZGF0YSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbjogXCJkdXJhdGlvblwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfc3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwiaXBcIikge1xuICAgICAgICAgICAgICAgIGlmICghaXNWYWxpZElQKGlucHV0LmRhdGEsIGNoZWNrLnZlcnNpb24pKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkYXRpb246IFwiaXBcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3N0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcImp3dFwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFpc1ZhbGlkSldUKGlucHV0LmRhdGEsIGNoZWNrLmFsZykpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbjogXCJqd3RcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3N0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcImNpZHJcIikge1xuICAgICAgICAgICAgICAgIGlmICghaXNWYWxpZENpZHIoaW5wdXQuZGF0YSwgY2hlY2sudmVyc2lvbikpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbjogXCJjaWRyXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9zdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJiYXNlNjRcIikge1xuICAgICAgICAgICAgICAgIGlmICghYmFzZTY0UmVnZXgudGVzdChpbnB1dC5kYXRhKSkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWxpZGF0aW9uOiBcImJhc2U2NFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfc3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwiYmFzZTY0dXJsXCIpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWJhc2U2NHVybFJlZ2V4LnRlc3QoaW5wdXQuZGF0YSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbjogXCJiYXNlNjR1cmxcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3N0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB1dGlsLmFzc2VydE5ldmVyKGNoZWNrKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4geyBzdGF0dXM6IHN0YXR1cy52YWx1ZSwgdmFsdWU6IGlucHV0LmRhdGEgfTtcbiAgICB9XG4gICAgX3JlZ2V4KHJlZ2V4LCB2YWxpZGF0aW9uLCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlZmluZW1lbnQoKGRhdGEpID0+IHJlZ2V4LnRlc3QoZGF0YSksIHtcbiAgICAgICAgICAgIHZhbGlkYXRpb24sXG4gICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9zdHJpbmcsXG4gICAgICAgICAgICAuLi5lcnJvclV0aWwuZXJyVG9PYmoobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBfYWRkQ2hlY2soY2hlY2spIHtcbiAgICAgICAgcmV0dXJuIG5ldyBab2RTdHJpbmcoe1xuICAgICAgICAgICAgLi4udGhpcy5fZGVmLFxuICAgICAgICAgICAgY2hlY2tzOiBbLi4udGhpcy5fZGVmLmNoZWNrcywgY2hlY2tdLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgZW1haWwobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soeyBraW5kOiBcImVtYWlsXCIsIC4uLmVycm9yVXRpbC5lcnJUb09iaihtZXNzYWdlKSB9KTtcbiAgICB9XG4gICAgdXJsKG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHsga2luZDogXCJ1cmxcIiwgLi4uZXJyb3JVdGlsLmVyclRvT2JqKG1lc3NhZ2UpIH0pO1xuICAgIH1cbiAgICBlbW9qaShtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7IGtpbmQ6IFwiZW1vamlcIiwgLi4uZXJyb3JVdGlsLmVyclRvT2JqKG1lc3NhZ2UpIH0pO1xuICAgIH1cbiAgICB1dWlkKG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHsga2luZDogXCJ1dWlkXCIsIC4uLmVycm9yVXRpbC5lcnJUb09iaihtZXNzYWdlKSB9KTtcbiAgICB9XG4gICAgbmFub2lkKG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHsga2luZDogXCJuYW5vaWRcIiwgLi4uZXJyb3JVdGlsLmVyclRvT2JqKG1lc3NhZ2UpIH0pO1xuICAgIH1cbiAgICBjdWlkKG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHsga2luZDogXCJjdWlkXCIsIC4uLmVycm9yVXRpbC5lcnJUb09iaihtZXNzYWdlKSB9KTtcbiAgICB9XG4gICAgY3VpZDIobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soeyBraW5kOiBcImN1aWQyXCIsIC4uLmVycm9yVXRpbC5lcnJUb09iaihtZXNzYWdlKSB9KTtcbiAgICB9XG4gICAgdWxpZChtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7IGtpbmQ6IFwidWxpZFwiLCAuLi5lcnJvclV0aWwuZXJyVG9PYmoobWVzc2FnZSkgfSk7XG4gICAgfVxuICAgIGJhc2U2NChtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7IGtpbmQ6IFwiYmFzZTY0XCIsIC4uLmVycm9yVXRpbC5lcnJUb09iaihtZXNzYWdlKSB9KTtcbiAgICB9XG4gICAgYmFzZTY0dXJsKG1lc3NhZ2UpIHtcbiAgICAgICAgLy8gYmFzZTY0dXJsIGVuY29kaW5nIGlzIGEgbW9kaWZpY2F0aW9uIG9mIGJhc2U2NCB0aGF0IGNhbiBzYWZlbHkgYmUgdXNlZCBpbiBVUkxzIGFuZCBmaWxlbmFtZXNcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHtcbiAgICAgICAgICAgIGtpbmQ6IFwiYmFzZTY0dXJsXCIsXG4gICAgICAgICAgICAuLi5lcnJvclV0aWwuZXJyVG9PYmoobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBqd3Qob3B0aW9ucykge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soeyBraW5kOiBcImp3dFwiLCAuLi5lcnJvclV0aWwuZXJyVG9PYmoob3B0aW9ucykgfSk7XG4gICAgfVxuICAgIGlwKG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHsga2luZDogXCJpcFwiLCAuLi5lcnJvclV0aWwuZXJyVG9PYmoob3B0aW9ucykgfSk7XG4gICAgfVxuICAgIGNpZHIob3B0aW9ucykge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soeyBraW5kOiBcImNpZHJcIiwgLi4uZXJyb3JVdGlsLmVyclRvT2JqKG9wdGlvbnMpIH0pO1xuICAgIH1cbiAgICBkYXRldGltZShvcHRpb25zKSB7XG4gICAgICAgIGlmICh0eXBlb2Ygb3B0aW9ucyA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHtcbiAgICAgICAgICAgICAgICBraW5kOiBcImRhdGV0aW1lXCIsXG4gICAgICAgICAgICAgICAgcHJlY2lzaW9uOiBudWxsLFxuICAgICAgICAgICAgICAgIG9mZnNldDogZmFsc2UsXG4gICAgICAgICAgICAgICAgbG9jYWw6IGZhbHNlLFxuICAgICAgICAgICAgICAgIG1lc3NhZ2U6IG9wdGlvbnMsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJkYXRldGltZVwiLFxuICAgICAgICAgICAgcHJlY2lzaW9uOiB0eXBlb2Ygb3B0aW9ucz8ucHJlY2lzaW9uID09PSBcInVuZGVmaW5lZFwiID8gbnVsbCA6IG9wdGlvbnM/LnByZWNpc2lvbixcbiAgICAgICAgICAgIG9mZnNldDogb3B0aW9ucz8ub2Zmc2V0ID8/IGZhbHNlLFxuICAgICAgICAgICAgbG9jYWw6IG9wdGlvbnM/LmxvY2FsID8/IGZhbHNlLFxuICAgICAgICAgICAgLi4uZXJyb3JVdGlsLmVyclRvT2JqKG9wdGlvbnM/Lm1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgZGF0ZShtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7IGtpbmQ6IFwiZGF0ZVwiLCBtZXNzYWdlIH0pO1xuICAgIH1cbiAgICB0aW1lKG9wdGlvbnMpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBvcHRpb25zID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAgICAgIGtpbmQ6IFwidGltZVwiLFxuICAgICAgICAgICAgICAgIHByZWNpc2lvbjogbnVsbCxcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiBvcHRpb25zLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHtcbiAgICAgICAgICAgIGtpbmQ6IFwidGltZVwiLFxuICAgICAgICAgICAgcHJlY2lzaW9uOiB0eXBlb2Ygb3B0aW9ucz8ucHJlY2lzaW9uID09PSBcInVuZGVmaW5lZFwiID8gbnVsbCA6IG9wdGlvbnM/LnByZWNpc2lvbixcbiAgICAgICAgICAgIC4uLmVycm9yVXRpbC5lcnJUb09iaihvcHRpb25zPy5tZXNzYWdlKSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGR1cmF0aW9uKG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHsga2luZDogXCJkdXJhdGlvblwiLCAuLi5lcnJvclV0aWwuZXJyVG9PYmoobWVzc2FnZSkgfSk7XG4gICAgfVxuICAgIHJlZ2V4KHJlZ2V4LCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7XG4gICAgICAgICAgICBraW5kOiBcInJlZ2V4XCIsXG4gICAgICAgICAgICByZWdleDogcmVnZXgsXG4gICAgICAgICAgICAuLi5lcnJvclV0aWwuZXJyVG9PYmoobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBpbmNsdWRlcyh2YWx1ZSwgb3B0aW9ucykge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJpbmNsdWRlc1wiLFxuICAgICAgICAgICAgdmFsdWU6IHZhbHVlLFxuICAgICAgICAgICAgcG9zaXRpb246IG9wdGlvbnM/LnBvc2l0aW9uLFxuICAgICAgICAgICAgLi4uZXJyb3JVdGlsLmVyclRvT2JqKG9wdGlvbnM/Lm1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgc3RhcnRzV2l0aCh2YWx1ZSwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJzdGFydHNXaXRoXCIsXG4gICAgICAgICAgICB2YWx1ZTogdmFsdWUsXG4gICAgICAgICAgICAuLi5lcnJvclV0aWwuZXJyVG9PYmoobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBlbmRzV2l0aCh2YWx1ZSwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJlbmRzV2l0aFwiLFxuICAgICAgICAgICAgdmFsdWU6IHZhbHVlLFxuICAgICAgICAgICAgLi4uZXJyb3JVdGlsLmVyclRvT2JqKG1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgbWluKG1pbkxlbmd0aCwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJtaW5cIixcbiAgICAgICAgICAgIHZhbHVlOiBtaW5MZW5ndGgsXG4gICAgICAgICAgICAuLi5lcnJvclV0aWwuZXJyVG9PYmoobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBtYXgobWF4TGVuZ3RoLCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7XG4gICAgICAgICAgICBraW5kOiBcIm1heFwiLFxuICAgICAgICAgICAgdmFsdWU6IG1heExlbmd0aCxcbiAgICAgICAgICAgIC4uLmVycm9yVXRpbC5lcnJUb09iaihtZXNzYWdlKSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGxlbmd0aChsZW4sIG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHtcbiAgICAgICAgICAgIGtpbmQ6IFwibGVuZ3RoXCIsXG4gICAgICAgICAgICB2YWx1ZTogbGVuLFxuICAgICAgICAgICAgLi4uZXJyb3JVdGlsLmVyclRvT2JqKG1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRXF1aXZhbGVudCB0byBgLm1pbigxKWBcbiAgICAgKi9cbiAgICBub25lbXB0eShtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1pbigxLCBlcnJvclV0aWwuZXJyVG9PYmoobWVzc2FnZSkpO1xuICAgIH1cbiAgICB0cmltKCkge1xuICAgICAgICByZXR1cm4gbmV3IFpvZFN0cmluZyh7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICBjaGVja3M6IFsuLi50aGlzLl9kZWYuY2hlY2tzLCB7IGtpbmQ6IFwidHJpbVwiIH1dLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgdG9Mb3dlckNhc2UoKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kU3RyaW5nKHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIGNoZWNrczogWy4uLnRoaXMuX2RlZi5jaGVja3MsIHsga2luZDogXCJ0b0xvd2VyQ2FzZVwiIH1dLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgdG9VcHBlckNhc2UoKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kU3RyaW5nKHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIGNoZWNrczogWy4uLnRoaXMuX2RlZi5jaGVja3MsIHsga2luZDogXCJ0b1VwcGVyQ2FzZVwiIH1dLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgZ2V0IGlzRGF0ZXRpbWUoKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuX2RlZi5jaGVja3MuZmluZCgoY2gpID0+IGNoLmtpbmQgPT09IFwiZGF0ZXRpbWVcIik7XG4gICAgfVxuICAgIGdldCBpc0RhdGUoKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuX2RlZi5jaGVja3MuZmluZCgoY2gpID0+IGNoLmtpbmQgPT09IFwiZGF0ZVwiKTtcbiAgICB9XG4gICAgZ2V0IGlzVGltZSgpIHtcbiAgICAgICAgcmV0dXJuICEhdGhpcy5fZGVmLmNoZWNrcy5maW5kKChjaCkgPT4gY2gua2luZCA9PT0gXCJ0aW1lXCIpO1xuICAgIH1cbiAgICBnZXQgaXNEdXJhdGlvbigpIHtcbiAgICAgICAgcmV0dXJuICEhdGhpcy5fZGVmLmNoZWNrcy5maW5kKChjaCkgPT4gY2gua2luZCA9PT0gXCJkdXJhdGlvblwiKTtcbiAgICB9XG4gICAgZ2V0IGlzRW1haWwoKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuX2RlZi5jaGVja3MuZmluZCgoY2gpID0+IGNoLmtpbmQgPT09IFwiZW1haWxcIik7XG4gICAgfVxuICAgIGdldCBpc1VSTCgpIHtcbiAgICAgICAgcmV0dXJuICEhdGhpcy5fZGVmLmNoZWNrcy5maW5kKChjaCkgPT4gY2gua2luZCA9PT0gXCJ1cmxcIik7XG4gICAgfVxuICAgIGdldCBpc0Vtb2ppKCkge1xuICAgICAgICByZXR1cm4gISF0aGlzLl9kZWYuY2hlY2tzLmZpbmQoKGNoKSA9PiBjaC5raW5kID09PSBcImVtb2ppXCIpO1xuICAgIH1cbiAgICBnZXQgaXNVVUlEKCkge1xuICAgICAgICByZXR1cm4gISF0aGlzLl9kZWYuY2hlY2tzLmZpbmQoKGNoKSA9PiBjaC5raW5kID09PSBcInV1aWRcIik7XG4gICAgfVxuICAgIGdldCBpc05BTk9JRCgpIHtcbiAgICAgICAgcmV0dXJuICEhdGhpcy5fZGVmLmNoZWNrcy5maW5kKChjaCkgPT4gY2gua2luZCA9PT0gXCJuYW5vaWRcIik7XG4gICAgfVxuICAgIGdldCBpc0NVSUQoKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuX2RlZi5jaGVja3MuZmluZCgoY2gpID0+IGNoLmtpbmQgPT09IFwiY3VpZFwiKTtcbiAgICB9XG4gICAgZ2V0IGlzQ1VJRDIoKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuX2RlZi5jaGVja3MuZmluZCgoY2gpID0+IGNoLmtpbmQgPT09IFwiY3VpZDJcIik7XG4gICAgfVxuICAgIGdldCBpc1VMSUQoKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuX2RlZi5jaGVja3MuZmluZCgoY2gpID0+IGNoLmtpbmQgPT09IFwidWxpZFwiKTtcbiAgICB9XG4gICAgZ2V0IGlzSVAoKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuX2RlZi5jaGVja3MuZmluZCgoY2gpID0+IGNoLmtpbmQgPT09IFwiaXBcIik7XG4gICAgfVxuICAgIGdldCBpc0NJRFIoKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuX2RlZi5jaGVja3MuZmluZCgoY2gpID0+IGNoLmtpbmQgPT09IFwiY2lkclwiKTtcbiAgICB9XG4gICAgZ2V0IGlzQmFzZTY0KCkge1xuICAgICAgICByZXR1cm4gISF0aGlzLl9kZWYuY2hlY2tzLmZpbmQoKGNoKSA9PiBjaC5raW5kID09PSBcImJhc2U2NFwiKTtcbiAgICB9XG4gICAgZ2V0IGlzQmFzZTY0dXJsKCkge1xuICAgICAgICAvLyBiYXNlNjR1cmwgZW5jb2RpbmcgaXMgYSBtb2RpZmljYXRpb24gb2YgYmFzZTY0IHRoYXQgY2FuIHNhZmVseSBiZSB1c2VkIGluIFVSTHMgYW5kIGZpbGVuYW1lc1xuICAgICAgICByZXR1cm4gISF0aGlzLl9kZWYuY2hlY2tzLmZpbmQoKGNoKSA9PiBjaC5raW5kID09PSBcImJhc2U2NHVybFwiKTtcbiAgICB9XG4gICAgZ2V0IG1pbkxlbmd0aCgpIHtcbiAgICAgICAgbGV0IG1pbiA9IG51bGw7XG4gICAgICAgIGZvciAoY29uc3QgY2ggb2YgdGhpcy5fZGVmLmNoZWNrcykge1xuICAgICAgICAgICAgaWYgKGNoLmtpbmQgPT09IFwibWluXCIpIHtcbiAgICAgICAgICAgICAgICBpZiAobWluID09PSBudWxsIHx8IGNoLnZhbHVlID4gbWluKVxuICAgICAgICAgICAgICAgICAgICBtaW4gPSBjaC52YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbWluO1xuICAgIH1cbiAgICBnZXQgbWF4TGVuZ3RoKCkge1xuICAgICAgICBsZXQgbWF4ID0gbnVsbDtcbiAgICAgICAgZm9yIChjb25zdCBjaCBvZiB0aGlzLl9kZWYuY2hlY2tzKSB7XG4gICAgICAgICAgICBpZiAoY2gua2luZCA9PT0gXCJtYXhcIikge1xuICAgICAgICAgICAgICAgIGlmIChtYXggPT09IG51bGwgfHwgY2gudmFsdWUgPCBtYXgpXG4gICAgICAgICAgICAgICAgICAgIG1heCA9IGNoLnZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtYXg7XG4gICAgfVxufVxuWm9kU3RyaW5nLmNyZWF0ZSA9IChwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZFN0cmluZyh7XG4gICAgICAgIGNoZWNrczogW10sXG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kU3RyaW5nLFxuICAgICAgICBjb2VyY2U6IHBhcmFtcz8uY29lcmNlID8/IGZhbHNlLFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuLy8gaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvMzk2NjQ4NC93aHktZG9lcy1tb2R1bHVzLW9wZXJhdG9yLXJldHVybi1mcmFjdGlvbmFsLW51bWJlci1pbi1qYXZhc2NyaXB0LzMxNzExMDM0IzMxNzExMDM0XG5mdW5jdGlvbiBmbG9hdFNhZmVSZW1haW5kZXIodmFsLCBzdGVwKSB7XG4gICAgY29uc3QgdmFsRGVjQ291bnQgPSAodmFsLnRvU3RyaW5nKCkuc3BsaXQoXCIuXCIpWzFdIHx8IFwiXCIpLmxlbmd0aDtcbiAgICBjb25zdCBzdGVwRGVjQ291bnQgPSAoc3RlcC50b1N0cmluZygpLnNwbGl0KFwiLlwiKVsxXSB8fCBcIlwiKS5sZW5ndGg7XG4gICAgY29uc3QgZGVjQ291bnQgPSB2YWxEZWNDb3VudCA+IHN0ZXBEZWNDb3VudCA/IHZhbERlY0NvdW50IDogc3RlcERlY0NvdW50O1xuICAgIGNvbnN0IHZhbEludCA9IE51bWJlci5wYXJzZUludCh2YWwudG9GaXhlZChkZWNDb3VudCkucmVwbGFjZShcIi5cIiwgXCJcIikpO1xuICAgIGNvbnN0IHN0ZXBJbnQgPSBOdW1iZXIucGFyc2VJbnQoc3RlcC50b0ZpeGVkKGRlY0NvdW50KS5yZXBsYWNlKFwiLlwiLCBcIlwiKSk7XG4gICAgcmV0dXJuICh2YWxJbnQgJSBzdGVwSW50KSAvIDEwICoqIGRlY0NvdW50O1xufVxuZXhwb3J0IGNsYXNzIFpvZE51bWJlciBleHRlbmRzIFpvZFR5cGUge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlciguLi5hcmd1bWVudHMpO1xuICAgICAgICB0aGlzLm1pbiA9IHRoaXMuZ3RlO1xuICAgICAgICB0aGlzLm1heCA9IHRoaXMubHRlO1xuICAgICAgICB0aGlzLnN0ZXAgPSB0aGlzLm11bHRpcGxlT2Y7XG4gICAgfVxuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBpZiAodGhpcy5fZGVmLmNvZXJjZSkge1xuICAgICAgICAgICAgaW5wdXQuZGF0YSA9IE51bWJlcihpbnB1dC5kYXRhKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwYXJzZWRUeXBlID0gdGhpcy5fZ2V0VHlwZShpbnB1dCk7XG4gICAgICAgIGlmIChwYXJzZWRUeXBlICE9PSBab2RQYXJzZWRUeXBlLm51bWJlcikge1xuICAgICAgICAgICAgY29uc3QgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQpO1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogWm9kUGFyc2VkVHlwZS5udW1iZXIsXG4gICAgICAgICAgICAgICAgcmVjZWl2ZWQ6IGN0eC5wYXJzZWRUeXBlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICBsZXQgY3R4ID0gdW5kZWZpbmVkO1xuICAgICAgICBjb25zdCBzdGF0dXMgPSBuZXcgUGFyc2VTdGF0dXMoKTtcbiAgICAgICAgZm9yIChjb25zdCBjaGVjayBvZiB0aGlzLl9kZWYuY2hlY2tzKSB7XG4gICAgICAgICAgICBpZiAoY2hlY2sua2luZCA9PT0gXCJpbnRcIikge1xuICAgICAgICAgICAgICAgIGlmICghdXRpbC5pc0ludGVnZXIoaW5wdXQuZGF0YSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4cGVjdGVkOiBcImludGVnZXJcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlY2VpdmVkOiBcImZsb2F0XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJtaW5cIikge1xuICAgICAgICAgICAgICAgIGNvbnN0IHRvb1NtYWxsID0gY2hlY2suaW5jbHVzaXZlID8gaW5wdXQuZGF0YSA8IGNoZWNrLnZhbHVlIDogaW5wdXQuZGF0YSA8PSBjaGVjay52YWx1ZTtcbiAgICAgICAgICAgICAgICBpZiAodG9vU21hbGwpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLnRvb19zbWFsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1pbmltdW06IGNoZWNrLnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJudW1iZXJcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGluY2x1c2l2ZTogY2hlY2suaW5jbHVzaXZlLFxuICAgICAgICAgICAgICAgICAgICAgICAgZXhhY3Q6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwibWF4XCIpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0b29CaWcgPSBjaGVjay5pbmNsdXNpdmUgPyBpbnB1dC5kYXRhID4gY2hlY2sudmFsdWUgOiBpbnB1dC5kYXRhID49IGNoZWNrLnZhbHVlO1xuICAgICAgICAgICAgICAgIGlmICh0b29CaWcpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLnRvb19iaWcsXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXhpbXVtOiBjaGVjay52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwibnVtYmVyXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBpbmNsdXNpdmU6IGNoZWNrLmluY2x1c2l2ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4YWN0OiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcIm11bHRpcGxlT2ZcIikge1xuICAgICAgICAgICAgICAgIGlmIChmbG9hdFNhZmVSZW1haW5kZXIoaW5wdXQuZGF0YSwgY2hlY2sudmFsdWUpICE9PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5ub3RfbXVsdGlwbGVfb2YsXG4gICAgICAgICAgICAgICAgICAgICAgICBtdWx0aXBsZU9mOiBjaGVjay52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcImZpbml0ZVwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFOdW1iZXIuaXNGaW5pdGUoaW5wdXQuZGF0YSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLm5vdF9maW5pdGUsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdXRpbC5hc3NlcnROZXZlcihjaGVjayk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHsgc3RhdHVzOiBzdGF0dXMudmFsdWUsIHZhbHVlOiBpbnB1dC5kYXRhIH07XG4gICAgfVxuICAgIGd0ZSh2YWx1ZSwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5zZXRMaW1pdChcIm1pblwiLCB2YWx1ZSwgdHJ1ZSwgZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpKTtcbiAgICB9XG4gICAgZ3QodmFsdWUsIG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2V0TGltaXQoXCJtaW5cIiwgdmFsdWUsIGZhbHNlLCBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSkpO1xuICAgIH1cbiAgICBsdGUodmFsdWUsIG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2V0TGltaXQoXCJtYXhcIiwgdmFsdWUsIHRydWUsIGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSk7XG4gICAgfVxuICAgIGx0KHZhbHVlLCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNldExpbWl0KFwibWF4XCIsIHZhbHVlLCBmYWxzZSwgZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpKTtcbiAgICB9XG4gICAgc2V0TGltaXQoa2luZCwgdmFsdWUsIGluY2x1c2l2ZSwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gbmV3IFpvZE51bWJlcih7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICBjaGVja3M6IFtcbiAgICAgICAgICAgICAgICAuLi50aGlzLl9kZWYuY2hlY2tzLFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAga2luZCxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWUsXG4gICAgICAgICAgICAgICAgICAgIGluY2x1c2l2ZSxcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBdLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgX2FkZENoZWNrKGNoZWNrKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kTnVtYmVyKHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIGNoZWNrczogWy4uLnRoaXMuX2RlZi5jaGVja3MsIGNoZWNrXSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGludChtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7XG4gICAgICAgICAgICBraW5kOiBcImludFwiLFxuICAgICAgICAgICAgbWVzc2FnZTogZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgcG9zaXRpdmUobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJtaW5cIixcbiAgICAgICAgICAgIHZhbHVlOiAwLFxuICAgICAgICAgICAgaW5jbHVzaXZlOiBmYWxzZSxcbiAgICAgICAgICAgIG1lc3NhZ2U6IGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIG5lZ2F0aXZlKG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHtcbiAgICAgICAgICAgIGtpbmQ6IFwibWF4XCIsXG4gICAgICAgICAgICB2YWx1ZTogMCxcbiAgICAgICAgICAgIGluY2x1c2l2ZTogZmFsc2UsXG4gICAgICAgICAgICBtZXNzYWdlOiBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBub25wb3NpdGl2ZShtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7XG4gICAgICAgICAgICBraW5kOiBcIm1heFwiLFxuICAgICAgICAgICAgdmFsdWU6IDAsXG4gICAgICAgICAgICBpbmNsdXNpdmU6IHRydWUsXG4gICAgICAgICAgICBtZXNzYWdlOiBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBub25uZWdhdGl2ZShtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7XG4gICAgICAgICAgICBraW5kOiBcIm1pblwiLFxuICAgICAgICAgICAgdmFsdWU6IDAsXG4gICAgICAgICAgICBpbmNsdXNpdmU6IHRydWUsXG4gICAgICAgICAgICBtZXNzYWdlOiBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBtdWx0aXBsZU9mKHZhbHVlLCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7XG4gICAgICAgICAgICBraW5kOiBcIm11bHRpcGxlT2ZcIixcbiAgICAgICAgICAgIHZhbHVlOiB2YWx1ZSxcbiAgICAgICAgICAgIG1lc3NhZ2U6IGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGZpbml0ZShtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7XG4gICAgICAgICAgICBraW5kOiBcImZpbml0ZVwiLFxuICAgICAgICAgICAgbWVzc2FnZTogZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgc2FmZShtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7XG4gICAgICAgICAgICBraW5kOiBcIm1pblwiLFxuICAgICAgICAgICAgaW5jbHVzaXZlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IE51bWJlci5NSU5fU0FGRV9JTlRFR0VSLFxuICAgICAgICAgICAgbWVzc2FnZTogZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpLFxuICAgICAgICB9KS5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJtYXhcIixcbiAgICAgICAgICAgIGluY2x1c2l2ZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBOdW1iZXIuTUFYX1NBRkVfSU5URUdFUixcbiAgICAgICAgICAgIG1lc3NhZ2U6IGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGdldCBtaW5WYWx1ZSgpIHtcbiAgICAgICAgbGV0IG1pbiA9IG51bGw7XG4gICAgICAgIGZvciAoY29uc3QgY2ggb2YgdGhpcy5fZGVmLmNoZWNrcykge1xuICAgICAgICAgICAgaWYgKGNoLmtpbmQgPT09IFwibWluXCIpIHtcbiAgICAgICAgICAgICAgICBpZiAobWluID09PSBudWxsIHx8IGNoLnZhbHVlID4gbWluKVxuICAgICAgICAgICAgICAgICAgICBtaW4gPSBjaC52YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbWluO1xuICAgIH1cbiAgICBnZXQgbWF4VmFsdWUoKSB7XG4gICAgICAgIGxldCBtYXggPSBudWxsO1xuICAgICAgICBmb3IgKGNvbnN0IGNoIG9mIHRoaXMuX2RlZi5jaGVja3MpIHtcbiAgICAgICAgICAgIGlmIChjaC5raW5kID09PSBcIm1heFwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKG1heCA9PT0gbnVsbCB8fCBjaC52YWx1ZSA8IG1heClcbiAgICAgICAgICAgICAgICAgICAgbWF4ID0gY2gudmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1heDtcbiAgICB9XG4gICAgZ2V0IGlzSW50KCkge1xuICAgICAgICByZXR1cm4gISF0aGlzLl9kZWYuY2hlY2tzLmZpbmQoKGNoKSA9PiBjaC5raW5kID09PSBcImludFwiIHx8IChjaC5raW5kID09PSBcIm11bHRpcGxlT2ZcIiAmJiB1dGlsLmlzSW50ZWdlcihjaC52YWx1ZSkpKTtcbiAgICB9XG4gICAgZ2V0IGlzRmluaXRlKCkge1xuICAgICAgICBsZXQgbWF4ID0gbnVsbDtcbiAgICAgICAgbGV0IG1pbiA9IG51bGw7XG4gICAgICAgIGZvciAoY29uc3QgY2ggb2YgdGhpcy5fZGVmLmNoZWNrcykge1xuICAgICAgICAgICAgaWYgKGNoLmtpbmQgPT09IFwiZmluaXRlXCIgfHwgY2gua2luZCA9PT0gXCJpbnRcIiB8fCBjaC5raW5kID09PSBcIm11bHRpcGxlT2ZcIikge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2gua2luZCA9PT0gXCJtaW5cIikge1xuICAgICAgICAgICAgICAgIGlmIChtaW4gPT09IG51bGwgfHwgY2gudmFsdWUgPiBtaW4pXG4gICAgICAgICAgICAgICAgICAgIG1pbiA9IGNoLnZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2gua2luZCA9PT0gXCJtYXhcIikge1xuICAgICAgICAgICAgICAgIGlmIChtYXggPT09IG51bGwgfHwgY2gudmFsdWUgPCBtYXgpXG4gICAgICAgICAgICAgICAgICAgIG1heCA9IGNoLnZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBOdW1iZXIuaXNGaW5pdGUobWluKSAmJiBOdW1iZXIuaXNGaW5pdGUobWF4KTtcbiAgICB9XG59XG5ab2ROdW1iZXIuY3JlYXRlID0gKHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kTnVtYmVyKHtcbiAgICAgICAgY2hlY2tzOiBbXSxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2ROdW1iZXIsXG4gICAgICAgIGNvZXJjZTogcGFyYW1zPy5jb2VyY2UgfHwgZmFsc2UsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kQmlnSW50IGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7XG4gICAgICAgIHRoaXMubWluID0gdGhpcy5ndGU7XG4gICAgICAgIHRoaXMubWF4ID0gdGhpcy5sdGU7XG4gICAgfVxuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBpZiAodGhpcy5fZGVmLmNvZXJjZSkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBpbnB1dC5kYXRhID0gQmlnSW50KGlucHV0LmRhdGEpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2gge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9nZXRJbnZhbGlkSW5wdXQoaW5wdXQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHBhcnNlZFR5cGUgPSB0aGlzLl9nZXRUeXBlKGlucHV0KTtcbiAgICAgICAgaWYgKHBhcnNlZFR5cGUgIT09IFpvZFBhcnNlZFR5cGUuYmlnaW50KSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fZ2V0SW52YWxpZElucHV0KGlucHV0KTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgY3R4ID0gdW5kZWZpbmVkO1xuICAgICAgICBjb25zdCBzdGF0dXMgPSBuZXcgUGFyc2VTdGF0dXMoKTtcbiAgICAgICAgZm9yIChjb25zdCBjaGVjayBvZiB0aGlzLl9kZWYuY2hlY2tzKSB7XG4gICAgICAgICAgICBpZiAoY2hlY2sua2luZCA9PT0gXCJtaW5cIikge1xuICAgICAgICAgICAgICAgIGNvbnN0IHRvb1NtYWxsID0gY2hlY2suaW5jbHVzaXZlID8gaW5wdXQuZGF0YSA8IGNoZWNrLnZhbHVlIDogaW5wdXQuZGF0YSA8PSBjaGVjay52YWx1ZTtcbiAgICAgICAgICAgICAgICBpZiAodG9vU21hbGwpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLnRvb19zbWFsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwiYmlnaW50XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBtaW5pbXVtOiBjaGVjay52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGluY2x1c2l2ZTogY2hlY2suaW5jbHVzaXZlLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwibWF4XCIpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0b29CaWcgPSBjaGVjay5pbmNsdXNpdmUgPyBpbnB1dC5kYXRhID4gY2hlY2sudmFsdWUgOiBpbnB1dC5kYXRhID49IGNoZWNrLnZhbHVlO1xuICAgICAgICAgICAgICAgIGlmICh0b29CaWcpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLnRvb19iaWcsXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImJpZ2ludFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWF4aW11bTogY2hlY2sudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBpbmNsdXNpdmU6IGNoZWNrLmluY2x1c2l2ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcIm11bHRpcGxlT2ZcIikge1xuICAgICAgICAgICAgICAgIGlmIChpbnB1dC5kYXRhICUgY2hlY2sudmFsdWUgIT09IEJpZ0ludCgwKSkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUubm90X211bHRpcGxlX29mLFxuICAgICAgICAgICAgICAgICAgICAgICAgbXVsdGlwbGVPZjogY2hlY2sudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdXRpbC5hc3NlcnROZXZlcihjaGVjayk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHsgc3RhdHVzOiBzdGF0dXMudmFsdWUsIHZhbHVlOiBpbnB1dC5kYXRhIH07XG4gICAgfVxuICAgIF9nZXRJbnZhbGlkSW5wdXQoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQpO1xuICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3R5cGUsXG4gICAgICAgICAgICBleHBlY3RlZDogWm9kUGFyc2VkVHlwZS5iaWdpbnQsXG4gICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICB9XG4gICAgZ3RlKHZhbHVlLCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNldExpbWl0KFwibWluXCIsIHZhbHVlLCB0cnVlLCBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSkpO1xuICAgIH1cbiAgICBndCh2YWx1ZSwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5zZXRMaW1pdChcIm1pblwiLCB2YWx1ZSwgZmFsc2UsIGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSk7XG4gICAgfVxuICAgIGx0ZSh2YWx1ZSwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5zZXRMaW1pdChcIm1heFwiLCB2YWx1ZSwgdHJ1ZSwgZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpKTtcbiAgICB9XG4gICAgbHQodmFsdWUsIG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2V0TGltaXQoXCJtYXhcIiwgdmFsdWUsIGZhbHNlLCBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSkpO1xuICAgIH1cbiAgICBzZXRMaW1pdChraW5kLCB2YWx1ZSwgaW5jbHVzaXZlLCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kQmlnSW50KHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIGNoZWNrczogW1xuICAgICAgICAgICAgICAgIC4uLnRoaXMuX2RlZi5jaGVja3MsXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBraW5kLFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgaW5jbHVzaXZlLFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSksXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF0sXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBfYWRkQ2hlY2soY2hlY2spIHtcbiAgICAgICAgcmV0dXJuIG5ldyBab2RCaWdJbnQoe1xuICAgICAgICAgICAgLi4udGhpcy5fZGVmLFxuICAgICAgICAgICAgY2hlY2tzOiBbLi4udGhpcy5fZGVmLmNoZWNrcywgY2hlY2tdLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgcG9zaXRpdmUobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJtaW5cIixcbiAgICAgICAgICAgIHZhbHVlOiBCaWdJbnQoMCksXG4gICAgICAgICAgICBpbmNsdXNpdmU6IGZhbHNlLFxuICAgICAgICAgICAgbWVzc2FnZTogZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgbmVnYXRpdmUobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJtYXhcIixcbiAgICAgICAgICAgIHZhbHVlOiBCaWdJbnQoMCksXG4gICAgICAgICAgICBpbmNsdXNpdmU6IGZhbHNlLFxuICAgICAgICAgICAgbWVzc2FnZTogZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgbm9ucG9zaXRpdmUobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJtYXhcIixcbiAgICAgICAgICAgIHZhbHVlOiBCaWdJbnQoMCksXG4gICAgICAgICAgICBpbmNsdXNpdmU6IHRydWUsXG4gICAgICAgICAgICBtZXNzYWdlOiBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBub25uZWdhdGl2ZShtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7XG4gICAgICAgICAgICBraW5kOiBcIm1pblwiLFxuICAgICAgICAgICAgdmFsdWU6IEJpZ0ludCgwKSxcbiAgICAgICAgICAgIGluY2x1c2l2ZTogdHJ1ZSxcbiAgICAgICAgICAgIG1lc3NhZ2U6IGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIG11bHRpcGxlT2YodmFsdWUsIG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHtcbiAgICAgICAgICAgIGtpbmQ6IFwibXVsdGlwbGVPZlwiLFxuICAgICAgICAgICAgdmFsdWUsXG4gICAgICAgICAgICBtZXNzYWdlOiBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBnZXQgbWluVmFsdWUoKSB7XG4gICAgICAgIGxldCBtaW4gPSBudWxsO1xuICAgICAgICBmb3IgKGNvbnN0IGNoIG9mIHRoaXMuX2RlZi5jaGVja3MpIHtcbiAgICAgICAgICAgIGlmIChjaC5raW5kID09PSBcIm1pblwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKG1pbiA9PT0gbnVsbCB8fCBjaC52YWx1ZSA+IG1pbilcbiAgICAgICAgICAgICAgICAgICAgbWluID0gY2gudmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1pbjtcbiAgICB9XG4gICAgZ2V0IG1heFZhbHVlKCkge1xuICAgICAgICBsZXQgbWF4ID0gbnVsbDtcbiAgICAgICAgZm9yIChjb25zdCBjaCBvZiB0aGlzLl9kZWYuY2hlY2tzKSB7XG4gICAgICAgICAgICBpZiAoY2gua2luZCA9PT0gXCJtYXhcIikge1xuICAgICAgICAgICAgICAgIGlmIChtYXggPT09IG51bGwgfHwgY2gudmFsdWUgPCBtYXgpXG4gICAgICAgICAgICAgICAgICAgIG1heCA9IGNoLnZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtYXg7XG4gICAgfVxufVxuWm9kQmlnSW50LmNyZWF0ZSA9IChwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZEJpZ0ludCh7XG4gICAgICAgIGNoZWNrczogW10sXG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kQmlnSW50LFxuICAgICAgICBjb2VyY2U6IHBhcmFtcz8uY29lcmNlID8/IGZhbHNlLFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuZXhwb3J0IGNsYXNzIFpvZEJvb2xlYW4gZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgaWYgKHRoaXMuX2RlZi5jb2VyY2UpIHtcbiAgICAgICAgICAgIGlucHV0LmRhdGEgPSBCb29sZWFuKGlucHV0LmRhdGEpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHBhcnNlZFR5cGUgPSB0aGlzLl9nZXRUeXBlKGlucHV0KTtcbiAgICAgICAgaWYgKHBhcnNlZFR5cGUgIT09IFpvZFBhcnNlZFR5cGUuYm9vbGVhbikge1xuICAgICAgICAgICAgY29uc3QgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQpO1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogWm9kUGFyc2VkVHlwZS5ib29sZWFuLFxuICAgICAgICAgICAgICAgIHJlY2VpdmVkOiBjdHgucGFyc2VkVHlwZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIE9LKGlucHV0LmRhdGEpO1xuICAgIH1cbn1cblpvZEJvb2xlYW4uY3JlYXRlID0gKHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kQm9vbGVhbih7XG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kQm9vbGVhbixcbiAgICAgICAgY29lcmNlOiBwYXJhbXM/LmNvZXJjZSB8fCBmYWxzZSxcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcbmV4cG9ydCBjbGFzcyBab2REYXRlIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGlmICh0aGlzLl9kZWYuY29lcmNlKSB7XG4gICAgICAgICAgICBpbnB1dC5kYXRhID0gbmV3IERhdGUoaW5wdXQuZGF0YSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcGFyc2VkVHlwZSA9IHRoaXMuX2dldFR5cGUoaW5wdXQpO1xuICAgICAgICBpZiAocGFyc2VkVHlwZSAhPT0gWm9kUGFyc2VkVHlwZS5kYXRlKSB7XG4gICAgICAgICAgICBjb25zdCBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCk7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF90eXBlLFxuICAgICAgICAgICAgICAgIGV4cGVjdGVkOiBab2RQYXJzZWRUeXBlLmRhdGUsXG4gICAgICAgICAgICAgICAgcmVjZWl2ZWQ6IGN0eC5wYXJzZWRUeXBlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoTnVtYmVyLmlzTmFOKGlucHV0LmRhdGEuZ2V0VGltZSgpKSkge1xuICAgICAgICAgICAgY29uc3QgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQpO1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfZGF0ZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgc3RhdHVzID0gbmV3IFBhcnNlU3RhdHVzKCk7XG4gICAgICAgIGxldCBjdHggPSB1bmRlZmluZWQ7XG4gICAgICAgIGZvciAoY29uc3QgY2hlY2sgb2YgdGhpcy5fZGVmLmNoZWNrcykge1xuICAgICAgICAgICAgaWYgKGNoZWNrLmtpbmQgPT09IFwibWluXCIpIHtcbiAgICAgICAgICAgICAgICBpZiAoaW5wdXQuZGF0YS5nZXRUaW1lKCkgPCBjaGVjay52YWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUudG9vX3NtYWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGluY2x1c2l2ZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4YWN0OiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1pbmltdW06IGNoZWNrLnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJkYXRlXCIsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcIm1heFwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKGlucHV0LmRhdGEuZ2V0VGltZSgpID4gY2hlY2sudmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLnRvb19iaWcsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICAgICAgaW5jbHVzaXZlOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgZXhhY3Q6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWF4aW11bTogY2hlY2sudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImRhdGVcIixcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHV0aWwuYXNzZXJ0TmV2ZXIoY2hlY2spO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBzdGF0dXM6IHN0YXR1cy52YWx1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBuZXcgRGF0ZShpbnB1dC5kYXRhLmdldFRpbWUoKSksXG4gICAgICAgIH07XG4gICAgfVxuICAgIF9hZGRDaGVjayhjaGVjaykge1xuICAgICAgICByZXR1cm4gbmV3IFpvZERhdGUoe1xuICAgICAgICAgICAgLi4udGhpcy5fZGVmLFxuICAgICAgICAgICAgY2hlY2tzOiBbLi4udGhpcy5fZGVmLmNoZWNrcywgY2hlY2tdLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgbWluKG1pbkRhdGUsIG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHtcbiAgICAgICAgICAgIGtpbmQ6IFwibWluXCIsXG4gICAgICAgICAgICB2YWx1ZTogbWluRGF0ZS5nZXRUaW1lKCksXG4gICAgICAgICAgICBtZXNzYWdlOiBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBtYXgobWF4RGF0ZSwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJtYXhcIixcbiAgICAgICAgICAgIHZhbHVlOiBtYXhEYXRlLmdldFRpbWUoKSxcbiAgICAgICAgICAgIG1lc3NhZ2U6IGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGdldCBtaW5EYXRlKCkge1xuICAgICAgICBsZXQgbWluID0gbnVsbDtcbiAgICAgICAgZm9yIChjb25zdCBjaCBvZiB0aGlzLl9kZWYuY2hlY2tzKSB7XG4gICAgICAgICAgICBpZiAoY2gua2luZCA9PT0gXCJtaW5cIikge1xuICAgICAgICAgICAgICAgIGlmIChtaW4gPT09IG51bGwgfHwgY2gudmFsdWUgPiBtaW4pXG4gICAgICAgICAgICAgICAgICAgIG1pbiA9IGNoLnZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtaW4gIT0gbnVsbCA/IG5ldyBEYXRlKG1pbikgOiBudWxsO1xuICAgIH1cbiAgICBnZXQgbWF4RGF0ZSgpIHtcbiAgICAgICAgbGV0IG1heCA9IG51bGw7XG4gICAgICAgIGZvciAoY29uc3QgY2ggb2YgdGhpcy5fZGVmLmNoZWNrcykge1xuICAgICAgICAgICAgaWYgKGNoLmtpbmQgPT09IFwibWF4XCIpIHtcbiAgICAgICAgICAgICAgICBpZiAobWF4ID09PSBudWxsIHx8IGNoLnZhbHVlIDwgbWF4KVxuICAgICAgICAgICAgICAgICAgICBtYXggPSBjaC52YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbWF4ICE9IG51bGwgPyBuZXcgRGF0ZShtYXgpIDogbnVsbDtcbiAgICB9XG59XG5ab2REYXRlLmNyZWF0ZSA9IChwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZERhdGUoe1xuICAgICAgICBjaGVja3M6IFtdLFxuICAgICAgICBjb2VyY2U6IHBhcmFtcz8uY29lcmNlIHx8IGZhbHNlLFxuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZERhdGUsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kU3ltYm9sIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHBhcnNlZFR5cGUgPSB0aGlzLl9nZXRUeXBlKGlucHV0KTtcbiAgICAgICAgaWYgKHBhcnNlZFR5cGUgIT09IFpvZFBhcnNlZFR5cGUuc3ltYm9sKSB7XG4gICAgICAgICAgICBjb25zdCBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCk7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF90eXBlLFxuICAgICAgICAgICAgICAgIGV4cGVjdGVkOiBab2RQYXJzZWRUeXBlLnN5bWJvbCxcbiAgICAgICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBPSyhpbnB1dC5kYXRhKTtcbiAgICB9XG59XG5ab2RTeW1ib2wuY3JlYXRlID0gKHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kU3ltYm9sKHtcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RTeW1ib2wsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kVW5kZWZpbmVkIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHBhcnNlZFR5cGUgPSB0aGlzLl9nZXRUeXBlKGlucHV0KTtcbiAgICAgICAgaWYgKHBhcnNlZFR5cGUgIT09IFpvZFBhcnNlZFR5cGUudW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBjb25zdCBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCk7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF90eXBlLFxuICAgICAgICAgICAgICAgIGV4cGVjdGVkOiBab2RQYXJzZWRUeXBlLnVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBPSyhpbnB1dC5kYXRhKTtcbiAgICB9XG59XG5ab2RVbmRlZmluZWQuY3JlYXRlID0gKHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kVW5kZWZpbmVkKHtcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RVbmRlZmluZWQsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kTnVsbCBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBjb25zdCBwYXJzZWRUeXBlID0gdGhpcy5fZ2V0VHlwZShpbnB1dCk7XG4gICAgICAgIGlmIChwYXJzZWRUeXBlICE9PSBab2RQYXJzZWRUeXBlLm51bGwpIHtcbiAgICAgICAgICAgIGNvbnN0IGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0KTtcbiAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3R5cGUsXG4gICAgICAgICAgICAgICAgZXhwZWN0ZWQ6IFpvZFBhcnNlZFR5cGUubnVsbCxcbiAgICAgICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBPSyhpbnB1dC5kYXRhKTtcbiAgICB9XG59XG5ab2ROdWxsLmNyZWF0ZSA9IChwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZE51bGwoe1xuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZE51bGwsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kQW55IGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7XG4gICAgICAgIC8vIHRvIHByZXZlbnQgaW5zdGFuY2VzIG9mIG90aGVyIGNsYXNzZXMgZnJvbSBleHRlbmRpbmcgWm9kQW55LiB0aGlzIGNhdXNlcyBpc3N1ZXMgd2l0aCBjYXRjaGFsbCBpbiBab2RPYmplY3QuXG4gICAgICAgIHRoaXMuX2FueSA9IHRydWU7XG4gICAgfVxuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICByZXR1cm4gT0soaW5wdXQuZGF0YSk7XG4gICAgfVxufVxuWm9kQW55LmNyZWF0ZSA9IChwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZEFueSh7XG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kQW55LFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuZXhwb3J0IGNsYXNzIFpvZFVua25vd24gZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcbiAgICAgICAgLy8gcmVxdWlyZWRcbiAgICAgICAgdGhpcy5fdW5rbm93biA9IHRydWU7XG4gICAgfVxuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICByZXR1cm4gT0soaW5wdXQuZGF0YSk7XG4gICAgfVxufVxuWm9kVW5rbm93bi5jcmVhdGUgPSAocGFyYW1zKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBab2RVbmtub3duKHtcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RVbmtub3duLFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuZXhwb3J0IGNsYXNzIFpvZE5ldmVyIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0KTtcbiAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF90eXBlLFxuICAgICAgICAgICAgZXhwZWN0ZWQ6IFpvZFBhcnNlZFR5cGUubmV2ZXIsXG4gICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICB9XG59XG5ab2ROZXZlci5jcmVhdGUgPSAocGFyYW1zKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBab2ROZXZlcih7XG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kTmV2ZXIsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kVm9pZCBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBjb25zdCBwYXJzZWRUeXBlID0gdGhpcy5fZ2V0VHlwZShpbnB1dCk7XG4gICAgICAgIGlmIChwYXJzZWRUeXBlICE9PSBab2RQYXJzZWRUeXBlLnVuZGVmaW5lZCkge1xuICAgICAgICAgICAgY29uc3QgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQpO1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogWm9kUGFyc2VkVHlwZS52b2lkLFxuICAgICAgICAgICAgICAgIHJlY2VpdmVkOiBjdHgucGFyc2VkVHlwZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIE9LKGlucHV0LmRhdGEpO1xuICAgIH1cbn1cblpvZFZvaWQuY3JlYXRlID0gKHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kVm9pZCh7XG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kVm9pZCxcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcbmV4cG9ydCBjbGFzcyBab2RBcnJheSBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBjb25zdCB7IGN0eCwgc3RhdHVzIH0gPSB0aGlzLl9wcm9jZXNzSW5wdXRQYXJhbXMoaW5wdXQpO1xuICAgICAgICBjb25zdCBkZWYgPSB0aGlzLl9kZWY7XG4gICAgICAgIGlmIChjdHgucGFyc2VkVHlwZSAhPT0gWm9kUGFyc2VkVHlwZS5hcnJheSkge1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogWm9kUGFyc2VkVHlwZS5hcnJheSxcbiAgICAgICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIGlmIChkZWYuZXhhY3RMZW5ndGggIT09IG51bGwpIHtcbiAgICAgICAgICAgIGNvbnN0IHRvb0JpZyA9IGN0eC5kYXRhLmxlbmd0aCA+IGRlZi5leGFjdExlbmd0aC52YWx1ZTtcbiAgICAgICAgICAgIGNvbnN0IHRvb1NtYWxsID0gY3R4LmRhdGEubGVuZ3RoIDwgZGVmLmV4YWN0TGVuZ3RoLnZhbHVlO1xuICAgICAgICAgICAgaWYgKHRvb0JpZyB8fCB0b29TbWFsbCkge1xuICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICBjb2RlOiB0b29CaWcgPyBab2RJc3N1ZUNvZGUudG9vX2JpZyA6IFpvZElzc3VlQ29kZS50b29fc21hbGwsXG4gICAgICAgICAgICAgICAgICAgIG1pbmltdW06ICh0b29TbWFsbCA/IGRlZi5leGFjdExlbmd0aC52YWx1ZSA6IHVuZGVmaW5lZCksXG4gICAgICAgICAgICAgICAgICAgIG1heGltdW06ICh0b29CaWcgPyBkZWYuZXhhY3RMZW5ndGgudmFsdWUgOiB1bmRlZmluZWQpLFxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImFycmF5XCIsXG4gICAgICAgICAgICAgICAgICAgIGluY2x1c2l2ZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgZXhhY3Q6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGRlZi5leGFjdExlbmd0aC5tZXNzYWdlLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChkZWYubWluTGVuZ3RoICE9PSBudWxsKSB7XG4gICAgICAgICAgICBpZiAoY3R4LmRhdGEubGVuZ3RoIDwgZGVmLm1pbkxlbmd0aC52YWx1ZSkge1xuICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUudG9vX3NtYWxsLFxuICAgICAgICAgICAgICAgICAgICBtaW5pbXVtOiBkZWYubWluTGVuZ3RoLnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImFycmF5XCIsXG4gICAgICAgICAgICAgICAgICAgIGluY2x1c2l2ZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgZXhhY3Q6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBkZWYubWluTGVuZ3RoLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGRlZi5tYXhMZW5ndGggIT09IG51bGwpIHtcbiAgICAgICAgICAgIGlmIChjdHguZGF0YS5sZW5ndGggPiBkZWYubWF4TGVuZ3RoLnZhbHVlKSB7XG4gICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS50b29fYmlnLFxuICAgICAgICAgICAgICAgICAgICBtYXhpbXVtOiBkZWYubWF4TGVuZ3RoLnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImFycmF5XCIsXG4gICAgICAgICAgICAgICAgICAgIGluY2x1c2l2ZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgZXhhY3Q6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBkZWYubWF4TGVuZ3RoLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGN0eC5jb21tb24uYXN5bmMpIHtcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLmFsbChbLi4uY3R4LmRhdGFdLm1hcCgoaXRlbSwgaSkgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiBkZWYudHlwZS5fcGFyc2VBc3luYyhuZXcgUGFyc2VJbnB1dExhenlQYXRoKGN0eCwgaXRlbSwgY3R4LnBhdGgsIGkpKTtcbiAgICAgICAgICAgIH0pKS50aGVuKChyZXN1bHQpID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gUGFyc2VTdGF0dXMubWVyZ2VBcnJheShzdGF0dXMsIHJlc3VsdCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCByZXN1bHQgPSBbLi4uY3R4LmRhdGFdLm1hcCgoaXRlbSwgaSkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIGRlZi50eXBlLl9wYXJzZVN5bmMobmV3IFBhcnNlSW5wdXRMYXp5UGF0aChjdHgsIGl0ZW0sIGN0eC5wYXRoLCBpKSk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gUGFyc2VTdGF0dXMubWVyZ2VBcnJheShzdGF0dXMsIHJlc3VsdCk7XG4gICAgfVxuICAgIGdldCBlbGVtZW50KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLnR5cGU7XG4gICAgfVxuICAgIG1pbihtaW5MZW5ndGgsIG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBab2RBcnJheSh7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICBtaW5MZW5ndGg6IHsgdmFsdWU6IG1pbkxlbmd0aCwgbWVzc2FnZTogZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpIH0sXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBtYXgobWF4TGVuZ3RoLCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kQXJyYXkoe1xuICAgICAgICAgICAgLi4udGhpcy5fZGVmLFxuICAgICAgICAgICAgbWF4TGVuZ3RoOiB7IHZhbHVlOiBtYXhMZW5ndGgsIG1lc3NhZ2U6IGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSB9LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgbGVuZ3RoKGxlbiwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gbmV3IFpvZEFycmF5KHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIGV4YWN0TGVuZ3RoOiB7IHZhbHVlOiBsZW4sIG1lc3NhZ2U6IGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSB9LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgbm9uZW1wdHkobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5taW4oMSwgbWVzc2FnZSk7XG4gICAgfVxufVxuWm9kQXJyYXkuY3JlYXRlID0gKHNjaGVtYSwgcGFyYW1zKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBab2RBcnJheSh7XG4gICAgICAgIHR5cGU6IHNjaGVtYSxcbiAgICAgICAgbWluTGVuZ3RoOiBudWxsLFxuICAgICAgICBtYXhMZW5ndGg6IG51bGwsXG4gICAgICAgIGV4YWN0TGVuZ3RoOiBudWxsLFxuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZEFycmF5LFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuZnVuY3Rpb24gZGVlcFBhcnRpYWxpZnkoc2NoZW1hKSB7XG4gICAgaWYgKHNjaGVtYSBpbnN0YW5jZW9mIFpvZE9iamVjdCkge1xuICAgICAgICBjb25zdCBuZXdTaGFwZSA9IHt9O1xuICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBzY2hlbWEuc2hhcGUpIHtcbiAgICAgICAgICAgIGNvbnN0IGZpZWxkU2NoZW1hID0gc2NoZW1hLnNoYXBlW2tleV07XG4gICAgICAgICAgICBuZXdTaGFwZVtrZXldID0gWm9kT3B0aW9uYWwuY3JlYXRlKGRlZXBQYXJ0aWFsaWZ5KGZpZWxkU2NoZW1hKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBab2RPYmplY3Qoe1xuICAgICAgICAgICAgLi4uc2NoZW1hLl9kZWYsXG4gICAgICAgICAgICBzaGFwZTogKCkgPT4gbmV3U2hhcGUsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBlbHNlIGlmIChzY2hlbWEgaW5zdGFuY2VvZiBab2RBcnJheSkge1xuICAgICAgICByZXR1cm4gbmV3IFpvZEFycmF5KHtcbiAgICAgICAgICAgIC4uLnNjaGVtYS5fZGVmLFxuICAgICAgICAgICAgdHlwZTogZGVlcFBhcnRpYWxpZnkoc2NoZW1hLmVsZW1lbnQpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgZWxzZSBpZiAoc2NoZW1hIGluc3RhbmNlb2YgWm9kT3B0aW9uYWwpIHtcbiAgICAgICAgcmV0dXJuIFpvZE9wdGlvbmFsLmNyZWF0ZShkZWVwUGFydGlhbGlmeShzY2hlbWEudW53cmFwKCkpKTtcbiAgICB9XG4gICAgZWxzZSBpZiAoc2NoZW1hIGluc3RhbmNlb2YgWm9kTnVsbGFibGUpIHtcbiAgICAgICAgcmV0dXJuIFpvZE51bGxhYmxlLmNyZWF0ZShkZWVwUGFydGlhbGlmeShzY2hlbWEudW53cmFwKCkpKTtcbiAgICB9XG4gICAgZWxzZSBpZiAoc2NoZW1hIGluc3RhbmNlb2YgWm9kVHVwbGUpIHtcbiAgICAgICAgcmV0dXJuIFpvZFR1cGxlLmNyZWF0ZShzY2hlbWEuaXRlbXMubWFwKChpdGVtKSA9PiBkZWVwUGFydGlhbGlmeShpdGVtKSkpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHNjaGVtYTtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgWm9kT2JqZWN0IGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7XG4gICAgICAgIHRoaXMuX2NhY2hlZCA9IG51bGw7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAZGVwcmVjYXRlZCBJbiBtb3N0IGNhc2VzLCB0aGlzIGlzIG5vIGxvbmdlciBuZWVkZWQgLSB1bmtub3duIHByb3BlcnRpZXMgYXJlIG5vdyBzaWxlbnRseSBzdHJpcHBlZC5cbiAgICAgICAgICogSWYgeW91IHdhbnQgdG8gcGFzcyB0aHJvdWdoIHVua25vd24gcHJvcGVydGllcywgdXNlIGAucGFzc3Rocm91Z2goKWAgaW5zdGVhZC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMubm9uc3RyaWN0ID0gdGhpcy5wYXNzdGhyb3VnaDtcbiAgICAgICAgLy8gZXh0ZW5kPFxuICAgICAgICAvLyAgIEF1Z21lbnRhdGlvbiBleHRlbmRzIFpvZFJhd1NoYXBlLFxuICAgICAgICAvLyAgIE5ld091dHB1dCBleHRlbmRzIHV0aWwuZmxhdHRlbjx7XG4gICAgICAgIC8vICAgICBbayBpbiBrZXlvZiBBdWdtZW50YXRpb24gfCBrZXlvZiBPdXRwdXRdOiBrIGV4dGVuZHMga2V5b2YgQXVnbWVudGF0aW9uXG4gICAgICAgIC8vICAgICAgID8gQXVnbWVudGF0aW9uW2tdW1wiX291dHB1dFwiXVxuICAgICAgICAvLyAgICAgICA6IGsgZXh0ZW5kcyBrZXlvZiBPdXRwdXRcbiAgICAgICAgLy8gICAgICAgPyBPdXRwdXRba11cbiAgICAgICAgLy8gICAgICAgOiBuZXZlcjtcbiAgICAgICAgLy8gICB9PixcbiAgICAgICAgLy8gICBOZXdJbnB1dCBleHRlbmRzIHV0aWwuZmxhdHRlbjx7XG4gICAgICAgIC8vICAgICBbayBpbiBrZXlvZiBBdWdtZW50YXRpb24gfCBrZXlvZiBJbnB1dF06IGsgZXh0ZW5kcyBrZXlvZiBBdWdtZW50YXRpb25cbiAgICAgICAgLy8gICAgICAgPyBBdWdtZW50YXRpb25ba11bXCJfaW5wdXRcIl1cbiAgICAgICAgLy8gICAgICAgOiBrIGV4dGVuZHMga2V5b2YgSW5wdXRcbiAgICAgICAgLy8gICAgICAgPyBJbnB1dFtrXVxuICAgICAgICAvLyAgICAgICA6IG5ldmVyO1xuICAgICAgICAvLyAgIH0+XG4gICAgICAgIC8vID4oXG4gICAgICAgIC8vICAgYXVnbWVudGF0aW9uOiBBdWdtZW50YXRpb25cbiAgICAgICAgLy8gKTogWm9kT2JqZWN0PFxuICAgICAgICAvLyAgIGV4dGVuZFNoYXBlPFQsIEF1Z21lbnRhdGlvbj4sXG4gICAgICAgIC8vICAgVW5rbm93bktleXMsXG4gICAgICAgIC8vICAgQ2F0Y2hhbGwsXG4gICAgICAgIC8vICAgTmV3T3V0cHV0LFxuICAgICAgICAvLyAgIE5ld0lucHV0XG4gICAgICAgIC8vID4ge1xuICAgICAgICAvLyAgIHJldHVybiBuZXcgWm9kT2JqZWN0KHtcbiAgICAgICAgLy8gICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgLy8gICAgIHNoYXBlOiAoKSA9PiAoe1xuICAgICAgICAvLyAgICAgICAuLi50aGlzLl9kZWYuc2hhcGUoKSxcbiAgICAgICAgLy8gICAgICAgLi4uYXVnbWVudGF0aW9uLFxuICAgICAgICAvLyAgICAgfSksXG4gICAgICAgIC8vICAgfSkgYXMgYW55O1xuICAgICAgICAvLyB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAZGVwcmVjYXRlZCBVc2UgYC5leHRlbmRgIGluc3RlYWRcbiAgICAgICAgICogICovXG4gICAgICAgIHRoaXMuYXVnbWVudCA9IHRoaXMuZXh0ZW5kO1xuICAgIH1cbiAgICBfZ2V0Q2FjaGVkKCkge1xuICAgICAgICBpZiAodGhpcy5fY2FjaGVkICE9PSBudWxsKVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2NhY2hlZDtcbiAgICAgICAgY29uc3Qgc2hhcGUgPSB0aGlzLl9kZWYuc2hhcGUoKTtcbiAgICAgICAgY29uc3Qga2V5cyA9IHV0aWwub2JqZWN0S2V5cyhzaGFwZSk7XG4gICAgICAgIHRoaXMuX2NhY2hlZCA9IHsgc2hhcGUsIGtleXMgfTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NhY2hlZDtcbiAgICB9XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHBhcnNlZFR5cGUgPSB0aGlzLl9nZXRUeXBlKGlucHV0KTtcbiAgICAgICAgaWYgKHBhcnNlZFR5cGUgIT09IFpvZFBhcnNlZFR5cGUub2JqZWN0KSB7XG4gICAgICAgICAgICBjb25zdCBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCk7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF90eXBlLFxuICAgICAgICAgICAgICAgIGV4cGVjdGVkOiBab2RQYXJzZWRUeXBlLm9iamVjdCxcbiAgICAgICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHsgc3RhdHVzLCBjdHggfSA9IHRoaXMuX3Byb2Nlc3NJbnB1dFBhcmFtcyhpbnB1dCk7XG4gICAgICAgIGNvbnN0IHsgc2hhcGUsIGtleXM6IHNoYXBlS2V5cyB9ID0gdGhpcy5fZ2V0Q2FjaGVkKCk7XG4gICAgICAgIGNvbnN0IGV4dHJhS2V5cyA9IFtdO1xuICAgICAgICBpZiAoISh0aGlzLl9kZWYuY2F0Y2hhbGwgaW5zdGFuY2VvZiBab2ROZXZlciAmJiB0aGlzLl9kZWYudW5rbm93bktleXMgPT09IFwic3RyaXBcIikpIHtcbiAgICAgICAgICAgIGZvciAoY29uc3Qga2V5IGluIGN0eC5kYXRhKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFzaGFwZUtleXMuaW5jbHVkZXMoa2V5KSkge1xuICAgICAgICAgICAgICAgICAgICBleHRyYUtleXMucHVzaChrZXkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwYWlycyA9IFtdO1xuICAgICAgICBmb3IgKGNvbnN0IGtleSBvZiBzaGFwZUtleXMpIHtcbiAgICAgICAgICAgIGNvbnN0IGtleVZhbGlkYXRvciA9IHNoYXBlW2tleV07XG4gICAgICAgICAgICBjb25zdCB2YWx1ZSA9IGN0eC5kYXRhW2tleV07XG4gICAgICAgICAgICBwYWlycy5wdXNoKHtcbiAgICAgICAgICAgICAgICBrZXk6IHsgc3RhdHVzOiBcInZhbGlkXCIsIHZhbHVlOiBrZXkgfSxcbiAgICAgICAgICAgICAgICB2YWx1ZToga2V5VmFsaWRhdG9yLl9wYXJzZShuZXcgUGFyc2VJbnB1dExhenlQYXRoKGN0eCwgdmFsdWUsIGN0eC5wYXRoLCBrZXkpKSxcbiAgICAgICAgICAgICAgICBhbHdheXNTZXQ6IGtleSBpbiBjdHguZGF0YSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLl9kZWYuY2F0Y2hhbGwgaW5zdGFuY2VvZiBab2ROZXZlcikge1xuICAgICAgICAgICAgY29uc3QgdW5rbm93bktleXMgPSB0aGlzLl9kZWYudW5rbm93bktleXM7XG4gICAgICAgICAgICBpZiAodW5rbm93bktleXMgPT09IFwicGFzc3Rocm91Z2hcIikge1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3Qga2V5IG9mIGV4dHJhS2V5cykge1xuICAgICAgICAgICAgICAgICAgICBwYWlycy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleTogeyBzdGF0dXM6IFwidmFsaWRcIiwgdmFsdWU6IGtleSB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHsgc3RhdHVzOiBcInZhbGlkXCIsIHZhbHVlOiBjdHguZGF0YVtrZXldIH0sXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHVua25vd25LZXlzID09PSBcInN0cmljdFwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKGV4dHJhS2V5cy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLnVucmVjb2duaXplZF9rZXlzLFxuICAgICAgICAgICAgICAgICAgICAgICAga2V5czogZXh0cmFLZXlzLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodW5rbm93bktleXMgPT09IFwic3RyaXBcIikge1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnRlcm5hbCBab2RPYmplY3QgZXJyb3I6IGludmFsaWQgdW5rbm93bktleXMgdmFsdWUuYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAvLyBydW4gY2F0Y2hhbGwgdmFsaWRhdGlvblxuICAgICAgICAgICAgY29uc3QgY2F0Y2hhbGwgPSB0aGlzLl9kZWYuY2F0Y2hhbGw7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBvZiBleHRyYUtleXMpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB2YWx1ZSA9IGN0eC5kYXRhW2tleV07XG4gICAgICAgICAgICAgICAgcGFpcnMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgIGtleTogeyBzdGF0dXM6IFwidmFsaWRcIiwgdmFsdWU6IGtleSB9LFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogY2F0Y2hhbGwuX3BhcnNlKG5ldyBQYXJzZUlucHV0TGF6eVBhdGgoY3R4LCB2YWx1ZSwgY3R4LnBhdGgsIGtleSkgLy8sIGN0eC5jaGlsZChrZXkpLCB2YWx1ZSwgZ2V0UGFyc2VkVHlwZSh2YWx1ZSlcbiAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgYWx3YXlzU2V0OiBrZXkgaW4gY3R4LmRhdGEsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGN0eC5jb21tb24uYXN5bmMpIHtcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKVxuICAgICAgICAgICAgICAgIC50aGVuKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBzeW5jUGFpcnMgPSBbXTtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHBhaXIgb2YgcGFpcnMpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qga2V5ID0gYXdhaXQgcGFpci5rZXk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gYXdhaXQgcGFpci52YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgc3luY1BhaXJzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgICAga2V5LFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBhbHdheXNTZXQ6IHBhaXIuYWx3YXlzU2V0LFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHN5bmNQYWlycztcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLnRoZW4oKHN5bmNQYWlycykgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiBQYXJzZVN0YXR1cy5tZXJnZU9iamVjdFN5bmMoc3RhdHVzLCBzeW5jUGFpcnMpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gUGFyc2VTdGF0dXMubWVyZ2VPYmplY3RTeW5jKHN0YXR1cywgcGFpcnMpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldCBzaGFwZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi5zaGFwZSgpO1xuICAgIH1cbiAgICBzdHJpY3QobWVzc2FnZSkge1xuICAgICAgICBlcnJvclV0aWwuZXJyVG9PYmo7XG4gICAgICAgIHJldHVybiBuZXcgWm9kT2JqZWN0KHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIHVua25vd25LZXlzOiBcInN0cmljdFwiLFxuICAgICAgICAgICAgLi4uKG1lc3NhZ2UgIT09IHVuZGVmaW5lZFxuICAgICAgICAgICAgICAgID8ge1xuICAgICAgICAgICAgICAgICAgICBlcnJvck1hcDogKGlzc3VlLCBjdHgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGRlZmF1bHRFcnJvciA9IHRoaXMuX2RlZi5lcnJvck1hcD8uKGlzc3VlLCBjdHgpLm1lc3NhZ2UgPz8gY3R4LmRlZmF1bHRFcnJvcjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc3N1ZS5jb2RlID09PSBcInVucmVjb2duaXplZF9rZXlzXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogZXJyb3JVdGlsLmVyclRvT2JqKG1lc3NhZ2UpLm1lc3NhZ2UgPz8gZGVmYXVsdEVycm9yLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGRlZmF1bHRFcnJvcixcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIDoge30pLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgc3RyaXAoKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kT2JqZWN0KHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIHVua25vd25LZXlzOiBcInN0cmlwXCIsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBwYXNzdGhyb3VnaCgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBab2RPYmplY3Qoe1xuICAgICAgICAgICAgLi4udGhpcy5fZGVmLFxuICAgICAgICAgICAgdW5rbm93bktleXM6IFwicGFzc3Rocm91Z2hcIixcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8vIGNvbnN0IEF1Z21lbnRGYWN0b3J5ID1cbiAgICAvLyAgIDxEZWYgZXh0ZW5kcyBab2RPYmplY3REZWY+KGRlZjogRGVmKSA9PlxuICAgIC8vICAgPEF1Z21lbnRhdGlvbiBleHRlbmRzIFpvZFJhd1NoYXBlPihcbiAgICAvLyAgICAgYXVnbWVudGF0aW9uOiBBdWdtZW50YXRpb25cbiAgICAvLyAgICk6IFpvZE9iamVjdDxcbiAgICAvLyAgICAgZXh0ZW5kU2hhcGU8UmV0dXJuVHlwZTxEZWZbXCJzaGFwZVwiXT4sIEF1Z21lbnRhdGlvbj4sXG4gICAgLy8gICAgIERlZltcInVua25vd25LZXlzXCJdLFxuICAgIC8vICAgICBEZWZbXCJjYXRjaGFsbFwiXVxuICAgIC8vICAgPiA9PiB7XG4gICAgLy8gICAgIHJldHVybiBuZXcgWm9kT2JqZWN0KHtcbiAgICAvLyAgICAgICAuLi5kZWYsXG4gICAgLy8gICAgICAgc2hhcGU6ICgpID0+ICh7XG4gICAgLy8gICAgICAgICAuLi5kZWYuc2hhcGUoKSxcbiAgICAvLyAgICAgICAgIC4uLmF1Z21lbnRhdGlvbixcbiAgICAvLyAgICAgICB9KSxcbiAgICAvLyAgICAgfSkgYXMgYW55O1xuICAgIC8vICAgfTtcbiAgICBleHRlbmQoYXVnbWVudGF0aW9uKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kT2JqZWN0KHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIHNoYXBlOiAoKSA9PiAoe1xuICAgICAgICAgICAgICAgIC4uLnRoaXMuX2RlZi5zaGFwZSgpLFxuICAgICAgICAgICAgICAgIC4uLmF1Z21lbnRhdGlvbixcbiAgICAgICAgICAgIH0pLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUHJpb3IgdG8gem9kQDEuMC4xMiB0aGVyZSB3YXMgYSBidWcgaW4gdGhlXG4gICAgICogaW5mZXJyZWQgdHlwZSBvZiBtZXJnZWQgb2JqZWN0cy4gUGxlYXNlXG4gICAgICogdXBncmFkZSBpZiB5b3UgYXJlIGV4cGVyaWVuY2luZyBpc3N1ZXMuXG4gICAgICovXG4gICAgbWVyZ2UobWVyZ2luZykge1xuICAgICAgICBjb25zdCBtZXJnZWQgPSBuZXcgWm9kT2JqZWN0KHtcbiAgICAgICAgICAgIHVua25vd25LZXlzOiBtZXJnaW5nLl9kZWYudW5rbm93bktleXMsXG4gICAgICAgICAgICBjYXRjaGFsbDogbWVyZ2luZy5fZGVmLmNhdGNoYWxsLFxuICAgICAgICAgICAgc2hhcGU6ICgpID0+ICh7XG4gICAgICAgICAgICAgICAgLi4udGhpcy5fZGVmLnNoYXBlKCksXG4gICAgICAgICAgICAgICAgLi4ubWVyZ2luZy5fZGVmLnNoYXBlKCksXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kT2JqZWN0LFxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIG1lcmdlZDtcbiAgICB9XG4gICAgLy8gbWVyZ2U8XG4gICAgLy8gICBJbmNvbWluZyBleHRlbmRzIEFueVpvZE9iamVjdCxcbiAgICAvLyAgIEF1Z21lbnRhdGlvbiBleHRlbmRzIEluY29taW5nW1wic2hhcGVcIl0sXG4gICAgLy8gICBOZXdPdXRwdXQgZXh0ZW5kcyB7XG4gICAgLy8gICAgIFtrIGluIGtleW9mIEF1Z21lbnRhdGlvbiB8IGtleW9mIE91dHB1dF06IGsgZXh0ZW5kcyBrZXlvZiBBdWdtZW50YXRpb25cbiAgICAvLyAgICAgICA/IEF1Z21lbnRhdGlvbltrXVtcIl9vdXRwdXRcIl1cbiAgICAvLyAgICAgICA6IGsgZXh0ZW5kcyBrZXlvZiBPdXRwdXRcbiAgICAvLyAgICAgICA/IE91dHB1dFtrXVxuICAgIC8vICAgICAgIDogbmV2ZXI7XG4gICAgLy8gICB9LFxuICAgIC8vICAgTmV3SW5wdXQgZXh0ZW5kcyB7XG4gICAgLy8gICAgIFtrIGluIGtleW9mIEF1Z21lbnRhdGlvbiB8IGtleW9mIElucHV0XTogayBleHRlbmRzIGtleW9mIEF1Z21lbnRhdGlvblxuICAgIC8vICAgICAgID8gQXVnbWVudGF0aW9uW2tdW1wiX2lucHV0XCJdXG4gICAgLy8gICAgICAgOiBrIGV4dGVuZHMga2V5b2YgSW5wdXRcbiAgICAvLyAgICAgICA/IElucHV0W2tdXG4gICAgLy8gICAgICAgOiBuZXZlcjtcbiAgICAvLyAgIH1cbiAgICAvLyA+KFxuICAgIC8vICAgbWVyZ2luZzogSW5jb21pbmdcbiAgICAvLyApOiBab2RPYmplY3Q8XG4gICAgLy8gICBleHRlbmRTaGFwZTxULCBSZXR1cm5UeXBlPEluY29taW5nW1wiX2RlZlwiXVtcInNoYXBlXCJdPj4sXG4gICAgLy8gICBJbmNvbWluZ1tcIl9kZWZcIl1bXCJ1bmtub3duS2V5c1wiXSxcbiAgICAvLyAgIEluY29taW5nW1wiX2RlZlwiXVtcImNhdGNoYWxsXCJdLFxuICAgIC8vICAgTmV3T3V0cHV0LFxuICAgIC8vICAgTmV3SW5wdXRcbiAgICAvLyA+IHtcbiAgICAvLyAgIGNvbnN0IG1lcmdlZDogYW55ID0gbmV3IFpvZE9iamVjdCh7XG4gICAgLy8gICAgIHVua25vd25LZXlzOiBtZXJnaW5nLl9kZWYudW5rbm93bktleXMsXG4gICAgLy8gICAgIGNhdGNoYWxsOiBtZXJnaW5nLl9kZWYuY2F0Y2hhbGwsXG4gICAgLy8gICAgIHNoYXBlOiAoKSA9PlxuICAgIC8vICAgICAgIG9iamVjdFV0aWwubWVyZ2VTaGFwZXModGhpcy5fZGVmLnNoYXBlKCksIG1lcmdpbmcuX2RlZi5zaGFwZSgpKSxcbiAgICAvLyAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RPYmplY3QsXG4gICAgLy8gICB9KSBhcyBhbnk7XG4gICAgLy8gICByZXR1cm4gbWVyZ2VkO1xuICAgIC8vIH1cbiAgICBzZXRLZXkoa2V5LCBzY2hlbWEpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYXVnbWVudCh7IFtrZXldOiBzY2hlbWEgfSk7XG4gICAgfVxuICAgIC8vIG1lcmdlPEluY29taW5nIGV4dGVuZHMgQW55Wm9kT2JqZWN0PihcbiAgICAvLyAgIG1lcmdpbmc6IEluY29taW5nXG4gICAgLy8gKTogLy9ab2RPYmplY3Q8VCAmIEluY29taW5nW1wiX3NoYXBlXCJdLCBVbmtub3duS2V5cywgQ2F0Y2hhbGw+ID0gKG1lcmdpbmcpID0+IHtcbiAgICAvLyBab2RPYmplY3Q8XG4gICAgLy8gICBleHRlbmRTaGFwZTxULCBSZXR1cm5UeXBlPEluY29taW5nW1wiX2RlZlwiXVtcInNoYXBlXCJdPj4sXG4gICAgLy8gICBJbmNvbWluZ1tcIl9kZWZcIl1bXCJ1bmtub3duS2V5c1wiXSxcbiAgICAvLyAgIEluY29taW5nW1wiX2RlZlwiXVtcImNhdGNoYWxsXCJdXG4gICAgLy8gPiB7XG4gICAgLy8gICAvLyBjb25zdCBtZXJnZWRTaGFwZSA9IG9iamVjdFV0aWwubWVyZ2VTaGFwZXMoXG4gICAgLy8gICAvLyAgIHRoaXMuX2RlZi5zaGFwZSgpLFxuICAgIC8vICAgLy8gICBtZXJnaW5nLl9kZWYuc2hhcGUoKVxuICAgIC8vICAgLy8gKTtcbiAgICAvLyAgIGNvbnN0IG1lcmdlZDogYW55ID0gbmV3IFpvZE9iamVjdCh7XG4gICAgLy8gICAgIHVua25vd25LZXlzOiBtZXJnaW5nLl9kZWYudW5rbm93bktleXMsXG4gICAgLy8gICAgIGNhdGNoYWxsOiBtZXJnaW5nLl9kZWYuY2F0Y2hhbGwsXG4gICAgLy8gICAgIHNoYXBlOiAoKSA9PlxuICAgIC8vICAgICAgIG9iamVjdFV0aWwubWVyZ2VTaGFwZXModGhpcy5fZGVmLnNoYXBlKCksIG1lcmdpbmcuX2RlZi5zaGFwZSgpKSxcbiAgICAvLyAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RPYmplY3QsXG4gICAgLy8gICB9KSBhcyBhbnk7XG4gICAgLy8gICByZXR1cm4gbWVyZ2VkO1xuICAgIC8vIH1cbiAgICBjYXRjaGFsbChpbmRleCkge1xuICAgICAgICByZXR1cm4gbmV3IFpvZE9iamVjdCh7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICBjYXRjaGFsbDogaW5kZXgsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBwaWNrKG1hc2spIHtcbiAgICAgICAgY29uc3Qgc2hhcGUgPSB7fTtcbiAgICAgICAgZm9yIChjb25zdCBrZXkgb2YgdXRpbC5vYmplY3RLZXlzKG1hc2spKSB7XG4gICAgICAgICAgICBpZiAobWFza1trZXldICYmIHRoaXMuc2hhcGVba2V5XSkge1xuICAgICAgICAgICAgICAgIHNoYXBlW2tleV0gPSB0aGlzLnNoYXBlW2tleV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBab2RPYmplY3Qoe1xuICAgICAgICAgICAgLi4udGhpcy5fZGVmLFxuICAgICAgICAgICAgc2hhcGU6ICgpID0+IHNoYXBlLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgb21pdChtYXNrKSB7XG4gICAgICAgIGNvbnN0IHNoYXBlID0ge307XG4gICAgICAgIGZvciAoY29uc3Qga2V5IG9mIHV0aWwub2JqZWN0S2V5cyh0aGlzLnNoYXBlKSkge1xuICAgICAgICAgICAgaWYgKCFtYXNrW2tleV0pIHtcbiAgICAgICAgICAgICAgICBzaGFwZVtrZXldID0gdGhpcy5zaGFwZVtrZXldO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgWm9kT2JqZWN0KHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIHNoYXBlOiAoKSA9PiBzaGFwZSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBkZXByZWNhdGVkXG4gICAgICovXG4gICAgZGVlcFBhcnRpYWwoKSB7XG4gICAgICAgIHJldHVybiBkZWVwUGFydGlhbGlmeSh0aGlzKTtcbiAgICB9XG4gICAgcGFydGlhbChtYXNrKSB7XG4gICAgICAgIGNvbnN0IG5ld1NoYXBlID0ge307XG4gICAgICAgIGZvciAoY29uc3Qga2V5IG9mIHV0aWwub2JqZWN0S2V5cyh0aGlzLnNoYXBlKSkge1xuICAgICAgICAgICAgY29uc3QgZmllbGRTY2hlbWEgPSB0aGlzLnNoYXBlW2tleV07XG4gICAgICAgICAgICBpZiAobWFzayAmJiAhbWFza1trZXldKSB7XG4gICAgICAgICAgICAgICAgbmV3U2hhcGVba2V5XSA9IGZpZWxkU2NoZW1hO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgbmV3U2hhcGVba2V5XSA9IGZpZWxkU2NoZW1hLm9wdGlvbmFsKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBab2RPYmplY3Qoe1xuICAgICAgICAgICAgLi4udGhpcy5fZGVmLFxuICAgICAgICAgICAgc2hhcGU6ICgpID0+IG5ld1NoYXBlLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgcmVxdWlyZWQobWFzaykge1xuICAgICAgICBjb25zdCBuZXdTaGFwZSA9IHt9O1xuICAgICAgICBmb3IgKGNvbnN0IGtleSBvZiB1dGlsLm9iamVjdEtleXModGhpcy5zaGFwZSkpIHtcbiAgICAgICAgICAgIGlmIChtYXNrICYmICFtYXNrW2tleV0pIHtcbiAgICAgICAgICAgICAgICBuZXdTaGFwZVtrZXldID0gdGhpcy5zaGFwZVtrZXldO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZmllbGRTY2hlbWEgPSB0aGlzLnNoYXBlW2tleV07XG4gICAgICAgICAgICAgICAgbGV0IG5ld0ZpZWxkID0gZmllbGRTY2hlbWE7XG4gICAgICAgICAgICAgICAgd2hpbGUgKG5ld0ZpZWxkIGluc3RhbmNlb2YgWm9kT3B0aW9uYWwpIHtcbiAgICAgICAgICAgICAgICAgICAgbmV3RmllbGQgPSBuZXdGaWVsZC5fZGVmLmlubmVyVHlwZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgbmV3U2hhcGVba2V5XSA9IG5ld0ZpZWxkO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgWm9kT2JqZWN0KHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIHNoYXBlOiAoKSA9PiBuZXdTaGFwZSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGtleW9mKCkge1xuICAgICAgICByZXR1cm4gY3JlYXRlWm9kRW51bSh1dGlsLm9iamVjdEtleXModGhpcy5zaGFwZSkpO1xuICAgIH1cbn1cblpvZE9iamVjdC5jcmVhdGUgPSAoc2hhcGUsIHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kT2JqZWN0KHtcbiAgICAgICAgc2hhcGU6ICgpID0+IHNoYXBlLFxuICAgICAgICB1bmtub3duS2V5czogXCJzdHJpcFwiLFxuICAgICAgICBjYXRjaGFsbDogWm9kTmV2ZXIuY3JlYXRlKCksXG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kT2JqZWN0LFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuWm9kT2JqZWN0LnN0cmljdENyZWF0ZSA9IChzaGFwZSwgcGFyYW1zKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBab2RPYmplY3Qoe1xuICAgICAgICBzaGFwZTogKCkgPT4gc2hhcGUsXG4gICAgICAgIHVua25vd25LZXlzOiBcInN0cmljdFwiLFxuICAgICAgICBjYXRjaGFsbDogWm9kTmV2ZXIuY3JlYXRlKCksXG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kT2JqZWN0LFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuWm9kT2JqZWN0LmxhenljcmVhdGUgPSAoc2hhcGUsIHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kT2JqZWN0KHtcbiAgICAgICAgc2hhcGUsXG4gICAgICAgIHVua25vd25LZXlzOiBcInN0cmlwXCIsXG4gICAgICAgIGNhdGNoYWxsOiBab2ROZXZlci5jcmVhdGUoKSxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RPYmplY3QsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kVW5pb24gZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgeyBjdHggfSA9IHRoaXMuX3Byb2Nlc3NJbnB1dFBhcmFtcyhpbnB1dCk7XG4gICAgICAgIGNvbnN0IG9wdGlvbnMgPSB0aGlzLl9kZWYub3B0aW9ucztcbiAgICAgICAgZnVuY3Rpb24gaGFuZGxlUmVzdWx0cyhyZXN1bHRzKSB7XG4gICAgICAgICAgICAvLyByZXR1cm4gZmlyc3QgaXNzdWUtZnJlZSB2YWxpZGF0aW9uIGlmIGl0IGV4aXN0c1xuICAgICAgICAgICAgZm9yIChjb25zdCByZXN1bHQgb2YgcmVzdWx0cykge1xuICAgICAgICAgICAgICAgIGlmIChyZXN1bHQucmVzdWx0LnN0YXR1cyA9PT0gXCJ2YWxpZFwiKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQucmVzdWx0O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvciAoY29uc3QgcmVzdWx0IG9mIHJlc3VsdHMpIHtcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0LnJlc3VsdC5zdGF0dXMgPT09IFwiZGlydHlcIikge1xuICAgICAgICAgICAgICAgICAgICAvLyBhZGQgaXNzdWVzIGZyb20gZGlydHkgb3B0aW9uXG4gICAgICAgICAgICAgICAgICAgIGN0eC5jb21tb24uaXNzdWVzLnB1c2goLi4ucmVzdWx0LmN0eC5jb21tb24uaXNzdWVzKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdC5yZXN1bHQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gcmV0dXJuIGludmFsaWRcbiAgICAgICAgICAgIGNvbnN0IHVuaW9uRXJyb3JzID0gcmVzdWx0cy5tYXAoKHJlc3VsdCkgPT4gbmV3IFpvZEVycm9yKHJlc3VsdC5jdHguY29tbW9uLmlzc3VlcykpO1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdW5pb24sXG4gICAgICAgICAgICAgICAgdW5pb25FcnJvcnMsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjdHguY29tbW9uLmFzeW5jKSB7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwob3B0aW9ucy5tYXAoYXN5bmMgKG9wdGlvbikgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGNoaWxkQ3R4ID0ge1xuICAgICAgICAgICAgICAgICAgICAuLi5jdHgsXG4gICAgICAgICAgICAgICAgICAgIGNvbW1vbjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3R4LmNvbW1vbixcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzc3VlczogW10sXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHBhcmVudDogbnVsbCxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdDogYXdhaXQgb3B0aW9uLl9wYXJzZUFzeW5jKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IGN0eC5kYXRhLFxuICAgICAgICAgICAgICAgICAgICAgICAgcGF0aDogY3R4LnBhdGgsXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnQ6IGNoaWxkQ3R4LFxuICAgICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICAgICAgY3R4OiBjaGlsZEN0eCxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSkpLnRoZW4oaGFuZGxlUmVzdWx0cyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBsZXQgZGlydHkgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICBjb25zdCBpc3N1ZXMgPSBbXTtcbiAgICAgICAgICAgIGZvciAoY29uc3Qgb3B0aW9uIG9mIG9wdGlvbnMpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBjaGlsZEN0eCA9IHtcbiAgICAgICAgICAgICAgICAgICAgLi4uY3R4LFxuICAgICAgICAgICAgICAgICAgICBjb21tb246IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN0eC5jb21tb24sXG4gICAgICAgICAgICAgICAgICAgICAgICBpc3N1ZXM6IFtdLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBwYXJlbnQ6IG51bGwsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSBvcHRpb24uX3BhcnNlU3luYyh7XG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IGN0eC5kYXRhLFxuICAgICAgICAgICAgICAgICAgICBwYXRoOiBjdHgucGF0aCxcbiAgICAgICAgICAgICAgICAgICAgcGFyZW50OiBjaGlsZEN0eCxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0LnN0YXR1cyA9PT0gXCJ2YWxpZFwiKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHJlc3VsdC5zdGF0dXMgPT09IFwiZGlydHlcIiAmJiAhZGlydHkpIHtcbiAgICAgICAgICAgICAgICAgICAgZGlydHkgPSB7IHJlc3VsdCwgY3R4OiBjaGlsZEN0eCB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoY2hpbGRDdHguY29tbW9uLmlzc3Vlcy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgaXNzdWVzLnB1c2goY2hpbGRDdHguY29tbW9uLmlzc3Vlcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGRpcnR5KSB7XG4gICAgICAgICAgICAgICAgY3R4LmNvbW1vbi5pc3N1ZXMucHVzaCguLi5kaXJ0eS5jdHguY29tbW9uLmlzc3Vlcyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGRpcnR5LnJlc3VsdDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHVuaW9uRXJyb3JzID0gaXNzdWVzLm1hcCgoaXNzdWVzKSA9PiBuZXcgWm9kRXJyb3IoaXNzdWVzKSk7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF91bmlvbixcbiAgICAgICAgICAgICAgICB1bmlvbkVycm9ycyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0IG9wdGlvbnMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYub3B0aW9ucztcbiAgICB9XG59XG5ab2RVbmlvbi5jcmVhdGUgPSAodHlwZXMsIHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kVW5pb24oe1xuICAgICAgICBvcHRpb25zOiB0eXBlcyxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RVbmlvbixcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuLy8vLy8vLy8vLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vLy8vLy8vLy9cbi8vLy8vLy8vLy8gICAgICBab2REaXNjcmltaW5hdGVkVW5pb24gICAgICAvLy8vLy8vLy8vXG4vLy8vLy8vLy8vICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8vLy8vLy8vL1xuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5jb25zdCBnZXREaXNjcmltaW5hdG9yID0gKHR5cGUpID0+IHtcbiAgICBpZiAodHlwZSBpbnN0YW5jZW9mIFpvZExhenkpIHtcbiAgICAgICAgcmV0dXJuIGdldERpc2NyaW1pbmF0b3IodHlwZS5zY2hlbWEpO1xuICAgIH1cbiAgICBlbHNlIGlmICh0eXBlIGluc3RhbmNlb2YgWm9kRWZmZWN0cykge1xuICAgICAgICByZXR1cm4gZ2V0RGlzY3JpbWluYXRvcih0eXBlLmlubmVyVHlwZSgpKTtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZSBpbnN0YW5jZW9mIFpvZExpdGVyYWwpIHtcbiAgICAgICAgcmV0dXJuIFt0eXBlLnZhbHVlXTtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZSBpbnN0YW5jZW9mIFpvZEVudW0pIHtcbiAgICAgICAgcmV0dXJuIHR5cGUub3B0aW9ucztcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZSBpbnN0YW5jZW9mIFpvZE5hdGl2ZUVudW0pIHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGJhbi9iYW5cbiAgICAgICAgcmV0dXJuIHV0aWwub2JqZWN0VmFsdWVzKHR5cGUuZW51bSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGUgaW5zdGFuY2VvZiBab2REZWZhdWx0KSB7XG4gICAgICAgIHJldHVybiBnZXREaXNjcmltaW5hdG9yKHR5cGUuX2RlZi5pbm5lclR5cGUpO1xuICAgIH1cbiAgICBlbHNlIGlmICh0eXBlIGluc3RhbmNlb2YgWm9kVW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiBbdW5kZWZpbmVkXTtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZSBpbnN0YW5jZW9mIFpvZE51bGwpIHtcbiAgICAgICAgcmV0dXJuIFtudWxsXTtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZSBpbnN0YW5jZW9mIFpvZE9wdGlvbmFsKSB7XG4gICAgICAgIHJldHVybiBbdW5kZWZpbmVkLCAuLi5nZXREaXNjcmltaW5hdG9yKHR5cGUudW53cmFwKCkpXTtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZSBpbnN0YW5jZW9mIFpvZE51bGxhYmxlKSB7XG4gICAgICAgIHJldHVybiBbbnVsbCwgLi4uZ2V0RGlzY3JpbWluYXRvcih0eXBlLnVud3JhcCgpKV07XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGUgaW5zdGFuY2VvZiBab2RCcmFuZGVkKSB7XG4gICAgICAgIHJldHVybiBnZXREaXNjcmltaW5hdG9yKHR5cGUudW53cmFwKCkpO1xuICAgIH1cbiAgICBlbHNlIGlmICh0eXBlIGluc3RhbmNlb2YgWm9kUmVhZG9ubHkpIHtcbiAgICAgICAgcmV0dXJuIGdldERpc2NyaW1pbmF0b3IodHlwZS51bndyYXAoKSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGUgaW5zdGFuY2VvZiBab2RDYXRjaCkge1xuICAgICAgICByZXR1cm4gZ2V0RGlzY3JpbWluYXRvcih0eXBlLl9kZWYuaW5uZXJUeXBlKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiBbXTtcbiAgICB9XG59O1xuZXhwb3J0IGNsYXNzIFpvZERpc2NyaW1pbmF0ZWRVbmlvbiBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBjb25zdCB7IGN0eCB9ID0gdGhpcy5fcHJvY2Vzc0lucHV0UGFyYW1zKGlucHV0KTtcbiAgICAgICAgaWYgKGN0eC5wYXJzZWRUeXBlICE9PSBab2RQYXJzZWRUeXBlLm9iamVjdCkge1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogWm9kUGFyc2VkVHlwZS5vYmplY3QsXG4gICAgICAgICAgICAgICAgcmVjZWl2ZWQ6IGN0eC5wYXJzZWRUeXBlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBkaXNjcmltaW5hdG9yID0gdGhpcy5kaXNjcmltaW5hdG9yO1xuICAgICAgICBjb25zdCBkaXNjcmltaW5hdG9yVmFsdWUgPSBjdHguZGF0YVtkaXNjcmltaW5hdG9yXTtcbiAgICAgICAgY29uc3Qgb3B0aW9uID0gdGhpcy5vcHRpb25zTWFwLmdldChkaXNjcmltaW5hdG9yVmFsdWUpO1xuICAgICAgICBpZiAoIW9wdGlvbikge1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdW5pb25fZGlzY3JpbWluYXRvcixcbiAgICAgICAgICAgICAgICBvcHRpb25zOiBBcnJheS5mcm9tKHRoaXMub3B0aW9uc01hcC5rZXlzKCkpLFxuICAgICAgICAgICAgICAgIHBhdGg6IFtkaXNjcmltaW5hdG9yXSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGN0eC5jb21tb24uYXN5bmMpIHtcbiAgICAgICAgICAgIHJldHVybiBvcHRpb24uX3BhcnNlQXN5bmMoe1xuICAgICAgICAgICAgICAgIGRhdGE6IGN0eC5kYXRhLFxuICAgICAgICAgICAgICAgIHBhdGg6IGN0eC5wYXRoLFxuICAgICAgICAgICAgICAgIHBhcmVudDogY3R4LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gb3B0aW9uLl9wYXJzZVN5bmMoe1xuICAgICAgICAgICAgICAgIGRhdGE6IGN0eC5kYXRhLFxuICAgICAgICAgICAgICAgIHBhdGg6IGN0eC5wYXRoLFxuICAgICAgICAgICAgICAgIHBhcmVudDogY3R4LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0IGRpc2NyaW1pbmF0b3IoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYuZGlzY3JpbWluYXRvcjtcbiAgICB9XG4gICAgZ2V0IG9wdGlvbnMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYub3B0aW9ucztcbiAgICB9XG4gICAgZ2V0IG9wdGlvbnNNYXAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYub3B0aW9uc01hcDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIGNvbnN0cnVjdG9yIG9mIHRoZSBkaXNjcmltaW5hdGVkIHVuaW9uIHNjaGVtYS4gSXRzIGJlaGF2aW91ciBpcyB2ZXJ5IHNpbWlsYXIgdG8gdGhhdCBvZiB0aGUgbm9ybWFsIHoudW5pb24oKSBjb25zdHJ1Y3Rvci5cbiAgICAgKiBIb3dldmVyLCBpdCBvbmx5IGFsbG93cyBhIHVuaW9uIG9mIG9iamVjdHMsIGFsbCBvZiB3aGljaCBuZWVkIHRvIHNoYXJlIGEgZGlzY3JpbWluYXRvciBwcm9wZXJ0eS4gVGhpcyBwcm9wZXJ0eSBtdXN0XG4gICAgICogaGF2ZSBhIGRpZmZlcmVudCB2YWx1ZSBmb3IgZWFjaCBvYmplY3QgaW4gdGhlIHVuaW9uLlxuICAgICAqIEBwYXJhbSBkaXNjcmltaW5hdG9yIHRoZSBuYW1lIG9mIHRoZSBkaXNjcmltaW5hdG9yIHByb3BlcnR5XG4gICAgICogQHBhcmFtIHR5cGVzIGFuIGFycmF5IG9mIG9iamVjdCBzY2hlbWFzXG4gICAgICogQHBhcmFtIHBhcmFtc1xuICAgICAqL1xuICAgIHN0YXRpYyBjcmVhdGUoZGlzY3JpbWluYXRvciwgb3B0aW9ucywgcGFyYW1zKSB7XG4gICAgICAgIC8vIEdldCBhbGwgdGhlIHZhbGlkIGRpc2NyaW1pbmF0b3IgdmFsdWVzXG4gICAgICAgIGNvbnN0IG9wdGlvbnNNYXAgPSBuZXcgTWFwKCk7XG4gICAgICAgIC8vIHRyeSB7XG4gICAgICAgIGZvciAoY29uc3QgdHlwZSBvZiBvcHRpb25zKSB7XG4gICAgICAgICAgICBjb25zdCBkaXNjcmltaW5hdG9yVmFsdWVzID0gZ2V0RGlzY3JpbWluYXRvcih0eXBlLnNoYXBlW2Rpc2NyaW1pbmF0b3JdKTtcbiAgICAgICAgICAgIGlmICghZGlzY3JpbWluYXRvclZhbHVlcy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEEgZGlzY3JpbWluYXRvciB2YWx1ZSBmb3Iga2V5IFxcYCR7ZGlzY3JpbWluYXRvcn1cXGAgY291bGQgbm90IGJlIGV4dHJhY3RlZCBmcm9tIGFsbCBzY2hlbWEgb3B0aW9uc2ApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yIChjb25zdCB2YWx1ZSBvZiBkaXNjcmltaW5hdG9yVmFsdWVzKSB7XG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbnNNYXAuaGFzKHZhbHVlKSkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYERpc2NyaW1pbmF0b3IgcHJvcGVydHkgJHtTdHJpbmcoZGlzY3JpbWluYXRvcil9IGhhcyBkdXBsaWNhdGUgdmFsdWUgJHtTdHJpbmcodmFsdWUpfWApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBvcHRpb25zTWFwLnNldCh2YWx1ZSwgdHlwZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBab2REaXNjcmltaW5hdGVkVW5pb24oe1xuICAgICAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2REaXNjcmltaW5hdGVkVW5pb24sXG4gICAgICAgICAgICBkaXNjcmltaW5hdG9yLFxuICAgICAgICAgICAgb3B0aW9ucyxcbiAgICAgICAgICAgIG9wdGlvbnNNYXAsXG4gICAgICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgICAgIH0pO1xuICAgIH1cbn1cbmZ1bmN0aW9uIG1lcmdlVmFsdWVzKGEsIGIpIHtcbiAgICBjb25zdCBhVHlwZSA9IGdldFBhcnNlZFR5cGUoYSk7XG4gICAgY29uc3QgYlR5cGUgPSBnZXRQYXJzZWRUeXBlKGIpO1xuICAgIGlmIChhID09PSBiKSB7XG4gICAgICAgIHJldHVybiB7IHZhbGlkOiB0cnVlLCBkYXRhOiBhIH07XG4gICAgfVxuICAgIGVsc2UgaWYgKGFUeXBlID09PSBab2RQYXJzZWRUeXBlLm9iamVjdCAmJiBiVHlwZSA9PT0gWm9kUGFyc2VkVHlwZS5vYmplY3QpIHtcbiAgICAgICAgY29uc3QgYktleXMgPSB1dGlsLm9iamVjdEtleXMoYik7XG4gICAgICAgIGNvbnN0IHNoYXJlZEtleXMgPSB1dGlsLm9iamVjdEtleXMoYSkuZmlsdGVyKChrZXkpID0+IGJLZXlzLmluZGV4T2Yoa2V5KSAhPT0gLTEpO1xuICAgICAgICBjb25zdCBuZXdPYmogPSB7IC4uLmEsIC4uLmIgfTtcbiAgICAgICAgZm9yIChjb25zdCBrZXkgb2Ygc2hhcmVkS2V5cykge1xuICAgICAgICAgICAgY29uc3Qgc2hhcmVkVmFsdWUgPSBtZXJnZVZhbHVlcyhhW2tleV0sIGJba2V5XSk7XG4gICAgICAgICAgICBpZiAoIXNoYXJlZFZhbHVlLnZhbGlkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgdmFsaWQ6IGZhbHNlIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBuZXdPYmpba2V5XSA9IHNoYXJlZFZhbHVlLmRhdGE7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHsgdmFsaWQ6IHRydWUsIGRhdGE6IG5ld09iaiB9O1xuICAgIH1cbiAgICBlbHNlIGlmIChhVHlwZSA9PT0gWm9kUGFyc2VkVHlwZS5hcnJheSAmJiBiVHlwZSA9PT0gWm9kUGFyc2VkVHlwZS5hcnJheSkge1xuICAgICAgICBpZiAoYS5sZW5ndGggIT09IGIubGVuZ3RoKSB7XG4gICAgICAgICAgICByZXR1cm4geyB2YWxpZDogZmFsc2UgfTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBuZXdBcnJheSA9IFtdO1xuICAgICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgYS5sZW5ndGg7IGluZGV4KyspIHtcbiAgICAgICAgICAgIGNvbnN0IGl0ZW1BID0gYVtpbmRleF07XG4gICAgICAgICAgICBjb25zdCBpdGVtQiA9IGJbaW5kZXhdO1xuICAgICAgICAgICAgY29uc3Qgc2hhcmVkVmFsdWUgPSBtZXJnZVZhbHVlcyhpdGVtQSwgaXRlbUIpO1xuICAgICAgICAgICAgaWYgKCFzaGFyZWRWYWx1ZS52YWxpZCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB7IHZhbGlkOiBmYWxzZSB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbmV3QXJyYXkucHVzaChzaGFyZWRWYWx1ZS5kYXRhKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4geyB2YWxpZDogdHJ1ZSwgZGF0YTogbmV3QXJyYXkgfTtcbiAgICB9XG4gICAgZWxzZSBpZiAoYVR5cGUgPT09IFpvZFBhcnNlZFR5cGUuZGF0ZSAmJiBiVHlwZSA9PT0gWm9kUGFyc2VkVHlwZS5kYXRlICYmICthID09PSArYikge1xuICAgICAgICByZXR1cm4geyB2YWxpZDogdHJ1ZSwgZGF0YTogYSB9O1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHsgdmFsaWQ6IGZhbHNlIH07XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIFpvZEludGVyc2VjdGlvbiBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBjb25zdCB7IHN0YXR1cywgY3R4IH0gPSB0aGlzLl9wcm9jZXNzSW5wdXRQYXJhbXMoaW5wdXQpO1xuICAgICAgICBjb25zdCBoYW5kbGVQYXJzZWQgPSAocGFyc2VkTGVmdCwgcGFyc2VkUmlnaHQpID0+IHtcbiAgICAgICAgICAgIGlmIChpc0Fib3J0ZWQocGFyc2VkTGVmdCkgfHwgaXNBYm9ydGVkKHBhcnNlZFJpZ2h0KSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgbWVyZ2VkID0gbWVyZ2VWYWx1ZXMocGFyc2VkTGVmdC52YWx1ZSwgcGFyc2VkUmlnaHQudmFsdWUpO1xuICAgICAgICAgICAgaWYgKCFtZXJnZWQudmFsaWQpIHtcbiAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfaW50ZXJzZWN0aW9uX3R5cGVzLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGlzRGlydHkocGFyc2VkTGVmdCkgfHwgaXNEaXJ0eShwYXJzZWRSaWdodCkpIHtcbiAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB7IHN0YXR1czogc3RhdHVzLnZhbHVlLCB2YWx1ZTogbWVyZ2VkLmRhdGEgfTtcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKGN0eC5jb21tb24uYXN5bmMpIHtcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLmFsbChbXG4gICAgICAgICAgICAgICAgdGhpcy5fZGVmLmxlZnQuX3BhcnNlQXN5bmMoe1xuICAgICAgICAgICAgICAgICAgICBkYXRhOiBjdHguZGF0YSxcbiAgICAgICAgICAgICAgICAgICAgcGF0aDogY3R4LnBhdGgsXG4gICAgICAgICAgICAgICAgICAgIHBhcmVudDogY3R4LFxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgIHRoaXMuX2RlZi5yaWdodC5fcGFyc2VBc3luYyh7XG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IGN0eC5kYXRhLFxuICAgICAgICAgICAgICAgICAgICBwYXRoOiBjdHgucGF0aCxcbiAgICAgICAgICAgICAgICAgICAgcGFyZW50OiBjdHgsXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICBdKS50aGVuKChbbGVmdCwgcmlnaHRdKSA9PiBoYW5kbGVQYXJzZWQobGVmdCwgcmlnaHQpKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBoYW5kbGVQYXJzZWQodGhpcy5fZGVmLmxlZnQuX3BhcnNlU3luYyh7XG4gICAgICAgICAgICAgICAgZGF0YTogY3R4LmRhdGEsXG4gICAgICAgICAgICAgICAgcGF0aDogY3R4LnBhdGgsXG4gICAgICAgICAgICAgICAgcGFyZW50OiBjdHgsXG4gICAgICAgICAgICB9KSwgdGhpcy5fZGVmLnJpZ2h0Ll9wYXJzZVN5bmMoe1xuICAgICAgICAgICAgICAgIGRhdGE6IGN0eC5kYXRhLFxuICAgICAgICAgICAgICAgIHBhdGg6IGN0eC5wYXRoLFxuICAgICAgICAgICAgICAgIHBhcmVudDogY3R4LFxuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9XG4gICAgfVxufVxuWm9kSW50ZXJzZWN0aW9uLmNyZWF0ZSA9IChsZWZ0LCByaWdodCwgcGFyYW1zKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBab2RJbnRlcnNlY3Rpb24oe1xuICAgICAgICBsZWZ0OiBsZWZ0LFxuICAgICAgICByaWdodDogcmlnaHQsXG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kSW50ZXJzZWN0aW9uLFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuLy8gdHlwZSBab2RUdXBsZUl0ZW1zID0gW1pvZFR5cGVBbnksIC4uLlpvZFR5cGVBbnlbXV07XG5leHBvcnQgY2xhc3MgWm9kVHVwbGUgZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgeyBzdGF0dXMsIGN0eCB9ID0gdGhpcy5fcHJvY2Vzc0lucHV0UGFyYW1zKGlucHV0KTtcbiAgICAgICAgaWYgKGN0eC5wYXJzZWRUeXBlICE9PSBab2RQYXJzZWRUeXBlLmFycmF5KSB7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF90eXBlLFxuICAgICAgICAgICAgICAgIGV4cGVjdGVkOiBab2RQYXJzZWRUeXBlLmFycmF5LFxuICAgICAgICAgICAgICAgIHJlY2VpdmVkOiBjdHgucGFyc2VkVHlwZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGN0eC5kYXRhLmxlbmd0aCA8IHRoaXMuX2RlZi5pdGVtcy5sZW5ndGgpIHtcbiAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS50b29fc21hbGwsXG4gICAgICAgICAgICAgICAgbWluaW11bTogdGhpcy5fZGVmLml0ZW1zLmxlbmd0aCxcbiAgICAgICAgICAgICAgICBpbmNsdXNpdmU6IHRydWUsXG4gICAgICAgICAgICAgICAgZXhhY3Q6IGZhbHNlLFxuICAgICAgICAgICAgICAgIHR5cGU6IFwiYXJyYXlcIixcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcmVzdCA9IHRoaXMuX2RlZi5yZXN0O1xuICAgICAgICBpZiAoIXJlc3QgJiYgY3R4LmRhdGEubGVuZ3RoID4gdGhpcy5fZGVmLml0ZW1zLmxlbmd0aCkge1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLnRvb19iaWcsXG4gICAgICAgICAgICAgICAgbWF4aW11bTogdGhpcy5fZGVmLml0ZW1zLmxlbmd0aCxcbiAgICAgICAgICAgICAgICBpbmNsdXNpdmU6IHRydWUsXG4gICAgICAgICAgICAgICAgZXhhY3Q6IGZhbHNlLFxuICAgICAgICAgICAgICAgIHR5cGU6IFwiYXJyYXlcIixcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgaXRlbXMgPSBbLi4uY3R4LmRhdGFdXG4gICAgICAgICAgICAubWFwKChpdGVtLCBpdGVtSW5kZXgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHNjaGVtYSA9IHRoaXMuX2RlZi5pdGVtc1tpdGVtSW5kZXhdIHx8IHRoaXMuX2RlZi5yZXN0O1xuICAgICAgICAgICAgaWYgKCFzY2hlbWEpXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICByZXR1cm4gc2NoZW1hLl9wYXJzZShuZXcgUGFyc2VJbnB1dExhenlQYXRoKGN0eCwgaXRlbSwgY3R4LnBhdGgsIGl0ZW1JbmRleCkpO1xuICAgICAgICB9KVxuICAgICAgICAgICAgLmZpbHRlcigoeCkgPT4gISF4KTsgLy8gZmlsdGVyIG51bGxzXG4gICAgICAgIGlmIChjdHguY29tbW9uLmFzeW5jKSB7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwoaXRlbXMpLnRoZW4oKHJlc3VsdHMpID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gUGFyc2VTdGF0dXMubWVyZ2VBcnJheShzdGF0dXMsIHJlc3VsdHMpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gUGFyc2VTdGF0dXMubWVyZ2VBcnJheShzdGF0dXMsIGl0ZW1zKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXQgaXRlbXMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYuaXRlbXM7XG4gICAgfVxuICAgIHJlc3QocmVzdCkge1xuICAgICAgICByZXR1cm4gbmV3IFpvZFR1cGxlKHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIHJlc3QsXG4gICAgICAgIH0pO1xuICAgIH1cbn1cblpvZFR1cGxlLmNyZWF0ZSA9IChzY2hlbWFzLCBwYXJhbXMpID0+IHtcbiAgICBpZiAoIUFycmF5LmlzQXJyYXkoc2NoZW1hcykpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiWW91IG11c3QgcGFzcyBhbiBhcnJheSBvZiBzY2hlbWFzIHRvIHoudHVwbGUoWyAuLi4gXSlcIik7XG4gICAgfVxuICAgIHJldHVybiBuZXcgWm9kVHVwbGUoe1xuICAgICAgICBpdGVtczogc2NoZW1hcyxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RUdXBsZSxcbiAgICAgICAgcmVzdDogbnVsbCxcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcbmV4cG9ydCBjbGFzcyBab2RSZWNvcmQgZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBnZXQga2V5U2NoZW1hKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLmtleVR5cGU7XG4gICAgfVxuICAgIGdldCB2YWx1ZVNjaGVtYSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi52YWx1ZVR5cGU7XG4gICAgfVxuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBjb25zdCB7IHN0YXR1cywgY3R4IH0gPSB0aGlzLl9wcm9jZXNzSW5wdXRQYXJhbXMoaW5wdXQpO1xuICAgICAgICBpZiAoY3R4LnBhcnNlZFR5cGUgIT09IFpvZFBhcnNlZFR5cGUub2JqZWN0KSB7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF90eXBlLFxuICAgICAgICAgICAgICAgIGV4cGVjdGVkOiBab2RQYXJzZWRUeXBlLm9iamVjdCxcbiAgICAgICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHBhaXJzID0gW107XG4gICAgICAgIGNvbnN0IGtleVR5cGUgPSB0aGlzLl9kZWYua2V5VHlwZTtcbiAgICAgICAgY29uc3QgdmFsdWVUeXBlID0gdGhpcy5fZGVmLnZhbHVlVHlwZTtcbiAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gY3R4LmRhdGEpIHtcbiAgICAgICAgICAgIHBhaXJzLnB1c2goe1xuICAgICAgICAgICAgICAgIGtleToga2V5VHlwZS5fcGFyc2UobmV3IFBhcnNlSW5wdXRMYXp5UGF0aChjdHgsIGtleSwgY3R4LnBhdGgsIGtleSkpLFxuICAgICAgICAgICAgICAgIHZhbHVlOiB2YWx1ZVR5cGUuX3BhcnNlKG5ldyBQYXJzZUlucHV0TGF6eVBhdGgoY3R4LCBjdHguZGF0YVtrZXldLCBjdHgucGF0aCwga2V5KSksXG4gICAgICAgICAgICAgICAgYWx3YXlzU2V0OiBrZXkgaW4gY3R4LmRhdGEsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY3R4LmNvbW1vbi5hc3luYykge1xuICAgICAgICAgICAgcmV0dXJuIFBhcnNlU3RhdHVzLm1lcmdlT2JqZWN0QXN5bmMoc3RhdHVzLCBwYWlycyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gUGFyc2VTdGF0dXMubWVyZ2VPYmplY3RTeW5jKHN0YXR1cywgcGFpcnMpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldCBlbGVtZW50KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLnZhbHVlVHlwZTtcbiAgICB9XG4gICAgc3RhdGljIGNyZWF0ZShmaXJzdCwgc2Vjb25kLCB0aGlyZCkge1xuICAgICAgICBpZiAoc2Vjb25kIGluc3RhbmNlb2YgWm9kVHlwZSkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBab2RSZWNvcmQoe1xuICAgICAgICAgICAgICAgIGtleVR5cGU6IGZpcnN0LFxuICAgICAgICAgICAgICAgIHZhbHVlVHlwZTogc2Vjb25kLFxuICAgICAgICAgICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kUmVjb3JkLFxuICAgICAgICAgICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXModGhpcmQpLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBab2RSZWNvcmQoe1xuICAgICAgICAgICAga2V5VHlwZTogWm9kU3RyaW5nLmNyZWF0ZSgpLFxuICAgICAgICAgICAgdmFsdWVUeXBlOiBmaXJzdCxcbiAgICAgICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kUmVjb3JkLFxuICAgICAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhzZWNvbmQpLFxuICAgICAgICB9KTtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgWm9kTWFwIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgZ2V0IGtleVNjaGVtYSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi5rZXlUeXBlO1xuICAgIH1cbiAgICBnZXQgdmFsdWVTY2hlbWEoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYudmFsdWVUeXBlO1xuICAgIH1cbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgeyBzdGF0dXMsIGN0eCB9ID0gdGhpcy5fcHJvY2Vzc0lucHV0UGFyYW1zKGlucHV0KTtcbiAgICAgICAgaWYgKGN0eC5wYXJzZWRUeXBlICE9PSBab2RQYXJzZWRUeXBlLm1hcCkge1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogWm9kUGFyc2VkVHlwZS5tYXAsXG4gICAgICAgICAgICAgICAgcmVjZWl2ZWQ6IGN0eC5wYXJzZWRUeXBlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBrZXlUeXBlID0gdGhpcy5fZGVmLmtleVR5cGU7XG4gICAgICAgIGNvbnN0IHZhbHVlVHlwZSA9IHRoaXMuX2RlZi52YWx1ZVR5cGU7XG4gICAgICAgIGNvbnN0IHBhaXJzID0gWy4uLmN0eC5kYXRhLmVudHJpZXMoKV0ubWFwKChba2V5LCB2YWx1ZV0sIGluZGV4KSA9PiB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGtleToga2V5VHlwZS5fcGFyc2UobmV3IFBhcnNlSW5wdXRMYXp5UGF0aChjdHgsIGtleSwgY3R4LnBhdGgsIFtpbmRleCwgXCJrZXlcIl0pKSxcbiAgICAgICAgICAgICAgICB2YWx1ZTogdmFsdWVUeXBlLl9wYXJzZShuZXcgUGFyc2VJbnB1dExhenlQYXRoKGN0eCwgdmFsdWUsIGN0eC5wYXRoLCBbaW5kZXgsIFwidmFsdWVcIl0pKSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pO1xuICAgICAgICBpZiAoY3R4LmNvbW1vbi5hc3luYykge1xuICAgICAgICAgICAgY29uc3QgZmluYWxNYXAgPSBuZXcgTWFwKCk7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCkudGhlbihhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBwYWlyIG9mIHBhaXJzKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGtleSA9IGF3YWl0IHBhaXIua2V5O1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB2YWx1ZSA9IGF3YWl0IHBhaXIudmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIGlmIChrZXkuc3RhdHVzID09PSBcImFib3J0ZWRcIiB8fCB2YWx1ZS5zdGF0dXMgPT09IFwiYWJvcnRlZFwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoa2V5LnN0YXR1cyA9PT0gXCJkaXJ0eVwiIHx8IHZhbHVlLnN0YXR1cyA9PT0gXCJkaXJ0eVwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBmaW5hbE1hcC5zZXQoa2V5LnZhbHVlLCB2YWx1ZS52YWx1ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiB7IHN0YXR1czogc3RhdHVzLnZhbHVlLCB2YWx1ZTogZmluYWxNYXAgfTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgZmluYWxNYXAgPSBuZXcgTWFwKCk7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHBhaXIgb2YgcGFpcnMpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBrZXkgPSBwYWlyLmtleTtcbiAgICAgICAgICAgICAgICBjb25zdCB2YWx1ZSA9IHBhaXIudmFsdWU7XG4gICAgICAgICAgICAgICAgaWYgKGtleS5zdGF0dXMgPT09IFwiYWJvcnRlZFwiIHx8IHZhbHVlLnN0YXR1cyA9PT0gXCJhYm9ydGVkXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChrZXkuc3RhdHVzID09PSBcImRpcnR5XCIgfHwgdmFsdWUuc3RhdHVzID09PSBcImRpcnR5XCIpIHtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGZpbmFsTWFwLnNldChrZXkudmFsdWUsIHZhbHVlLnZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB7IHN0YXR1czogc3RhdHVzLnZhbHVlLCB2YWx1ZTogZmluYWxNYXAgfTtcbiAgICAgICAgfVxuICAgIH1cbn1cblpvZE1hcC5jcmVhdGUgPSAoa2V5VHlwZSwgdmFsdWVUeXBlLCBwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZE1hcCh7XG4gICAgICAgIHZhbHVlVHlwZSxcbiAgICAgICAga2V5VHlwZSxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RNYXAsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kU2V0IGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHsgc3RhdHVzLCBjdHggfSA9IHRoaXMuX3Byb2Nlc3NJbnB1dFBhcmFtcyhpbnB1dCk7XG4gICAgICAgIGlmIChjdHgucGFyc2VkVHlwZSAhPT0gWm9kUGFyc2VkVHlwZS5zZXQpIHtcbiAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3R5cGUsXG4gICAgICAgICAgICAgICAgZXhwZWN0ZWQ6IFpvZFBhcnNlZFR5cGUuc2V0LFxuICAgICAgICAgICAgICAgIHJlY2VpdmVkOiBjdHgucGFyc2VkVHlwZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZGVmID0gdGhpcy5fZGVmO1xuICAgICAgICBpZiAoZGVmLm1pblNpemUgIT09IG51bGwpIHtcbiAgICAgICAgICAgIGlmIChjdHguZGF0YS5zaXplIDwgZGVmLm1pblNpemUudmFsdWUpIHtcbiAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLnRvb19zbWFsbCxcbiAgICAgICAgICAgICAgICAgICAgbWluaW11bTogZGVmLm1pblNpemUudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IFwic2V0XCIsXG4gICAgICAgICAgICAgICAgICAgIGluY2x1c2l2ZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgZXhhY3Q6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBkZWYubWluU2l6ZS5tZXNzYWdlLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChkZWYubWF4U2l6ZSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaWYgKGN0eC5kYXRhLnNpemUgPiBkZWYubWF4U2l6ZS52YWx1ZSkge1xuICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUudG9vX2JpZyxcbiAgICAgICAgICAgICAgICAgICAgbWF4aW11bTogZGVmLm1heFNpemUudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IFwic2V0XCIsXG4gICAgICAgICAgICAgICAgICAgIGluY2x1c2l2ZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgZXhhY3Q6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBkZWYubWF4U2l6ZS5tZXNzYWdlLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHZhbHVlVHlwZSA9IHRoaXMuX2RlZi52YWx1ZVR5cGU7XG4gICAgICAgIGZ1bmN0aW9uIGZpbmFsaXplU2V0KGVsZW1lbnRzKSB7XG4gICAgICAgICAgICBjb25zdCBwYXJzZWRTZXQgPSBuZXcgU2V0KCk7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGVsZW1lbnQgb2YgZWxlbWVudHMpIHtcbiAgICAgICAgICAgICAgICBpZiAoZWxlbWVudC5zdGF0dXMgPT09IFwiYWJvcnRlZFwiKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgICAgICAgICBpZiAoZWxlbWVudC5zdGF0dXMgPT09IFwiZGlydHlcIilcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgcGFyc2VkU2V0LmFkZChlbGVtZW50LnZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB7IHN0YXR1czogc3RhdHVzLnZhbHVlLCB2YWx1ZTogcGFyc2VkU2V0IH07XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZWxlbWVudHMgPSBbLi4uY3R4LmRhdGEudmFsdWVzKCldLm1hcCgoaXRlbSwgaSkgPT4gdmFsdWVUeXBlLl9wYXJzZShuZXcgUGFyc2VJbnB1dExhenlQYXRoKGN0eCwgaXRlbSwgY3R4LnBhdGgsIGkpKSk7XG4gICAgICAgIGlmIChjdHguY29tbW9uLmFzeW5jKSB7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwoZWxlbWVudHMpLnRoZW4oKGVsZW1lbnRzKSA9PiBmaW5hbGl6ZVNldChlbGVtZW50cykpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIGZpbmFsaXplU2V0KGVsZW1lbnRzKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBtaW4obWluU2l6ZSwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gbmV3IFpvZFNldCh7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICBtaW5TaXplOiB7IHZhbHVlOiBtaW5TaXplLCBtZXNzYWdlOiBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSkgfSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIG1heChtYXhTaXplLCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kU2V0KHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIG1heFNpemU6IHsgdmFsdWU6IG1heFNpemUsIG1lc3NhZ2U6IGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSB9LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgc2l6ZShzaXplLCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1pbihzaXplLCBtZXNzYWdlKS5tYXgoc2l6ZSwgbWVzc2FnZSk7XG4gICAgfVxuICAgIG5vbmVtcHR5KG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubWluKDEsIG1lc3NhZ2UpO1xuICAgIH1cbn1cblpvZFNldC5jcmVhdGUgPSAodmFsdWVUeXBlLCBwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZFNldCh7XG4gICAgICAgIHZhbHVlVHlwZSxcbiAgICAgICAgbWluU2l6ZTogbnVsbCxcbiAgICAgICAgbWF4U2l6ZTogbnVsbCxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RTZXQsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kRnVuY3Rpb24gZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcbiAgICAgICAgdGhpcy52YWxpZGF0ZSA9IHRoaXMuaW1wbGVtZW50O1xuICAgIH1cbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgeyBjdHggfSA9IHRoaXMuX3Byb2Nlc3NJbnB1dFBhcmFtcyhpbnB1dCk7XG4gICAgICAgIGlmIChjdHgucGFyc2VkVHlwZSAhPT0gWm9kUGFyc2VkVHlwZS5mdW5jdGlvbikge1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogWm9kUGFyc2VkVHlwZS5mdW5jdGlvbixcbiAgICAgICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIGZ1bmN0aW9uIG1ha2VBcmdzSXNzdWUoYXJncywgZXJyb3IpIHtcbiAgICAgICAgICAgIHJldHVybiBtYWtlSXNzdWUoe1xuICAgICAgICAgICAgICAgIGRhdGE6IGFyZ3MsXG4gICAgICAgICAgICAgICAgcGF0aDogY3R4LnBhdGgsXG4gICAgICAgICAgICAgICAgZXJyb3JNYXBzOiBbY3R4LmNvbW1vbi5jb250ZXh0dWFsRXJyb3JNYXAsIGN0eC5zY2hlbWFFcnJvck1hcCwgZ2V0RXJyb3JNYXAoKSwgZGVmYXVsdEVycm9yTWFwXS5maWx0ZXIoKHgpID0+ICEheCksXG4gICAgICAgICAgICAgICAgaXNzdWVEYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX2FyZ3VtZW50cyxcbiAgICAgICAgICAgICAgICAgICAgYXJndW1lbnRzRXJyb3I6IGVycm9yLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBmdW5jdGlvbiBtYWtlUmV0dXJuc0lzc3VlKHJldHVybnMsIGVycm9yKSB7XG4gICAgICAgICAgICByZXR1cm4gbWFrZUlzc3VlKHtcbiAgICAgICAgICAgICAgICBkYXRhOiByZXR1cm5zLFxuICAgICAgICAgICAgICAgIHBhdGg6IGN0eC5wYXRoLFxuICAgICAgICAgICAgICAgIGVycm9yTWFwczogW2N0eC5jb21tb24uY29udGV4dHVhbEVycm9yTWFwLCBjdHguc2NoZW1hRXJyb3JNYXAsIGdldEVycm9yTWFwKCksIGRlZmF1bHRFcnJvck1hcF0uZmlsdGVyKCh4KSA9PiAhIXgpLFxuICAgICAgICAgICAgICAgIGlzc3VlRGF0YToge1xuICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9yZXR1cm5fdHlwZSxcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuVHlwZUVycm9yOiBlcnJvcixcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcGFyYW1zID0geyBlcnJvck1hcDogY3R4LmNvbW1vbi5jb250ZXh0dWFsRXJyb3JNYXAgfTtcbiAgICAgICAgY29uc3QgZm4gPSBjdHguZGF0YTtcbiAgICAgICAgaWYgKHRoaXMuX2RlZi5yZXR1cm5zIGluc3RhbmNlb2YgWm9kUHJvbWlzZSkge1xuICAgICAgICAgICAgLy8gV291bGQgbG92ZSBhIHdheSB0byBhdm9pZCBkaXNhYmxpbmcgdGhpcyBydWxlLCBidXQgd2UgbmVlZFxuICAgICAgICAgICAgLy8gYW4gYWxpYXMgKHVzaW5nIGFuIGFycm93IGZ1bmN0aW9uIHdhcyB3aGF0IGNhdXNlZCAyNjUxKS5cbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdGhpcy1hbGlhc1xuICAgICAgICAgICAgY29uc3QgbWUgPSB0aGlzO1xuICAgICAgICAgICAgcmV0dXJuIE9LKGFzeW5jIGZ1bmN0aW9uICguLi5hcmdzKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZXJyb3IgPSBuZXcgWm9kRXJyb3IoW10pO1xuICAgICAgICAgICAgICAgIGNvbnN0IHBhcnNlZEFyZ3MgPSBhd2FpdCBtZS5fZGVmLmFyZ3MucGFyc2VBc3luYyhhcmdzLCBwYXJhbXMpLmNhdGNoKChlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGVycm9yLmFkZElzc3VlKG1ha2VBcmdzSXNzdWUoYXJncywgZSkpO1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBSZWZsZWN0LmFwcGx5KGZuLCB0aGlzLCBwYXJzZWRBcmdzKTtcbiAgICAgICAgICAgICAgICBjb25zdCBwYXJzZWRSZXR1cm5zID0gYXdhaXQgbWUuX2RlZi5yZXR1cm5zLl9kZWYudHlwZVxuICAgICAgICAgICAgICAgICAgICAucGFyc2VBc3luYyhyZXN1bHQsIHBhcmFtcylcbiAgICAgICAgICAgICAgICAgICAgLmNhdGNoKChlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGVycm9yLmFkZElzc3VlKG1ha2VSZXR1cm5zSXNzdWUocmVzdWx0LCBlKSk7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybiBwYXJzZWRSZXR1cm5zO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAvLyBXb3VsZCBsb3ZlIGEgd2F5IHRvIGF2b2lkIGRpc2FibGluZyB0aGlzIHJ1bGUsIGJ1dCB3ZSBuZWVkXG4gICAgICAgICAgICAvLyBhbiBhbGlhcyAodXNpbmcgYW4gYXJyb3cgZnVuY3Rpb24gd2FzIHdoYXQgY2F1c2VkIDI2NTEpLlxuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby10aGlzLWFsaWFzXG4gICAgICAgICAgICBjb25zdCBtZSA9IHRoaXM7XG4gICAgICAgICAgICByZXR1cm4gT0soZnVuY3Rpb24gKC4uLmFyZ3MpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBwYXJzZWRBcmdzID0gbWUuX2RlZi5hcmdzLnNhZmVQYXJzZShhcmdzLCBwYXJhbXMpO1xuICAgICAgICAgICAgICAgIGlmICghcGFyc2VkQXJncy5zdWNjZXNzKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBab2RFcnJvcihbbWFrZUFyZ3NJc3N1ZShhcmdzLCBwYXJzZWRBcmdzLmVycm9yKV0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSBSZWZsZWN0LmFwcGx5KGZuLCB0aGlzLCBwYXJzZWRBcmdzLmRhdGEpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHBhcnNlZFJldHVybnMgPSBtZS5fZGVmLnJldHVybnMuc2FmZVBhcnNlKHJlc3VsdCwgcGFyYW1zKTtcbiAgICAgICAgICAgICAgICBpZiAoIXBhcnNlZFJldHVybnMuc3VjY2Vzcykge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgWm9kRXJyb3IoW21ha2VSZXR1cm5zSXNzdWUocmVzdWx0LCBwYXJzZWRSZXR1cm5zLmVycm9yKV0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gcGFyc2VkUmV0dXJucy5kYXRhO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcGFyYW1ldGVycygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi5hcmdzO1xuICAgIH1cbiAgICByZXR1cm5UeXBlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLnJldHVybnM7XG4gICAgfVxuICAgIGFyZ3MoLi4uaXRlbXMpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBab2RGdW5jdGlvbih7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICBhcmdzOiBab2RUdXBsZS5jcmVhdGUoaXRlbXMpLnJlc3QoWm9kVW5rbm93bi5jcmVhdGUoKSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm5zKHJldHVyblR5cGUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBab2RGdW5jdGlvbih7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICByZXR1cm5zOiByZXR1cm5UeXBlLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgaW1wbGVtZW50KGZ1bmMpIHtcbiAgICAgICAgY29uc3QgdmFsaWRhdGVkRnVuYyA9IHRoaXMucGFyc2UoZnVuYyk7XG4gICAgICAgIHJldHVybiB2YWxpZGF0ZWRGdW5jO1xuICAgIH1cbiAgICBzdHJpY3RJbXBsZW1lbnQoZnVuYykge1xuICAgICAgICBjb25zdCB2YWxpZGF0ZWRGdW5jID0gdGhpcy5wYXJzZShmdW5jKTtcbiAgICAgICAgcmV0dXJuIHZhbGlkYXRlZEZ1bmM7XG4gICAgfVxuICAgIHN0YXRpYyBjcmVhdGUoYXJncywgcmV0dXJucywgcGFyYW1zKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kRnVuY3Rpb24oe1xuICAgICAgICAgICAgYXJnczogKGFyZ3MgPyBhcmdzIDogWm9kVHVwbGUuY3JlYXRlKFtdKS5yZXN0KFpvZFVua25vd24uY3JlYXRlKCkpKSxcbiAgICAgICAgICAgIHJldHVybnM6IHJldHVybnMgfHwgWm9kVW5rbm93bi5jcmVhdGUoKSxcbiAgICAgICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kRnVuY3Rpb24sXG4gICAgICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgICAgIH0pO1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBab2RMYXp5IGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgZ2V0IHNjaGVtYSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi5nZXR0ZXIoKTtcbiAgICB9XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHsgY3R4IH0gPSB0aGlzLl9wcm9jZXNzSW5wdXRQYXJhbXMoaW5wdXQpO1xuICAgICAgICBjb25zdCBsYXp5U2NoZW1hID0gdGhpcy5fZGVmLmdldHRlcigpO1xuICAgICAgICByZXR1cm4gbGF6eVNjaGVtYS5fcGFyc2UoeyBkYXRhOiBjdHguZGF0YSwgcGF0aDogY3R4LnBhdGgsIHBhcmVudDogY3R4IH0pO1xuICAgIH1cbn1cblpvZExhenkuY3JlYXRlID0gKGdldHRlciwgcGFyYW1zKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBab2RMYXp5KHtcbiAgICAgICAgZ2V0dGVyOiBnZXR0ZXIsXG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kTGF6eSxcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcbmV4cG9ydCBjbGFzcyBab2RMaXRlcmFsIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGlmIChpbnB1dC5kYXRhICE9PSB0aGlzLl9kZWYudmFsdWUpIHtcbiAgICAgICAgICAgIGNvbnN0IGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0KTtcbiAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgIHJlY2VpdmVkOiBjdHguZGF0YSxcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9saXRlcmFsLFxuICAgICAgICAgICAgICAgIGV4cGVjdGVkOiB0aGlzLl9kZWYudmFsdWUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7IHN0YXR1czogXCJ2YWxpZFwiLCB2YWx1ZTogaW5wdXQuZGF0YSB9O1xuICAgIH1cbiAgICBnZXQgdmFsdWUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYudmFsdWU7XG4gICAgfVxufVxuWm9kTGl0ZXJhbC5jcmVhdGUgPSAodmFsdWUsIHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kTGl0ZXJhbCh7XG4gICAgICAgIHZhbHVlOiB2YWx1ZSxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RMaXRlcmFsLFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuZnVuY3Rpb24gY3JlYXRlWm9kRW51bSh2YWx1ZXMsIHBhcmFtcykge1xuICAgIHJldHVybiBuZXcgWm9kRW51bSh7XG4gICAgICAgIHZhbHVlcyxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RFbnVtLFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59XG5leHBvcnQgY2xhc3MgWm9kRW51bSBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBpZiAodHlwZW9mIGlucHV0LmRhdGEgIT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgIGNvbnN0IGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0KTtcbiAgICAgICAgICAgIGNvbnN0IGV4cGVjdGVkVmFsdWVzID0gdGhpcy5fZGVmLnZhbHVlcztcbiAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgIGV4cGVjdGVkOiB1dGlsLmpvaW5WYWx1ZXMoZXhwZWN0ZWRWYWx1ZXMpLFxuICAgICAgICAgICAgICAgIHJlY2VpdmVkOiBjdHgucGFyc2VkVHlwZSxcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF90eXBlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRoaXMuX2NhY2hlKSB7XG4gICAgICAgICAgICB0aGlzLl9jYWNoZSA9IG5ldyBTZXQodGhpcy5fZGVmLnZhbHVlcyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF0aGlzLl9jYWNoZS5oYXMoaW5wdXQuZGF0YSkpIHtcbiAgICAgICAgICAgIGNvbnN0IGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0KTtcbiAgICAgICAgICAgIGNvbnN0IGV4cGVjdGVkVmFsdWVzID0gdGhpcy5fZGVmLnZhbHVlcztcbiAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgIHJlY2VpdmVkOiBjdHguZGF0YSxcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9lbnVtX3ZhbHVlLFxuICAgICAgICAgICAgICAgIG9wdGlvbnM6IGV4cGVjdGVkVmFsdWVzLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gT0soaW5wdXQuZGF0YSk7XG4gICAgfVxuICAgIGdldCBvcHRpb25zKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLnZhbHVlcztcbiAgICB9XG4gICAgZ2V0IGVudW0oKSB7XG4gICAgICAgIGNvbnN0IGVudW1WYWx1ZXMgPSB7fTtcbiAgICAgICAgZm9yIChjb25zdCB2YWwgb2YgdGhpcy5fZGVmLnZhbHVlcykge1xuICAgICAgICAgICAgZW51bVZhbHVlc1t2YWxdID0gdmFsO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBlbnVtVmFsdWVzO1xuICAgIH1cbiAgICBnZXQgVmFsdWVzKCkge1xuICAgICAgICBjb25zdCBlbnVtVmFsdWVzID0ge307XG4gICAgICAgIGZvciAoY29uc3QgdmFsIG9mIHRoaXMuX2RlZi52YWx1ZXMpIHtcbiAgICAgICAgICAgIGVudW1WYWx1ZXNbdmFsXSA9IHZhbDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZW51bVZhbHVlcztcbiAgICB9XG4gICAgZ2V0IEVudW0oKSB7XG4gICAgICAgIGNvbnN0IGVudW1WYWx1ZXMgPSB7fTtcbiAgICAgICAgZm9yIChjb25zdCB2YWwgb2YgdGhpcy5fZGVmLnZhbHVlcykge1xuICAgICAgICAgICAgZW51bVZhbHVlc1t2YWxdID0gdmFsO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBlbnVtVmFsdWVzO1xuICAgIH1cbiAgICBleHRyYWN0KHZhbHVlcywgbmV3RGVmID0gdGhpcy5fZGVmKSB7XG4gICAgICAgIHJldHVybiBab2RFbnVtLmNyZWF0ZSh2YWx1ZXMsIHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIC4uLm5ld0RlZixcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGV4Y2x1ZGUodmFsdWVzLCBuZXdEZWYgPSB0aGlzLl9kZWYpIHtcbiAgICAgICAgcmV0dXJuIFpvZEVudW0uY3JlYXRlKHRoaXMub3B0aW9ucy5maWx0ZXIoKG9wdCkgPT4gIXZhbHVlcy5pbmNsdWRlcyhvcHQpKSwge1xuICAgICAgICAgICAgLi4udGhpcy5fZGVmLFxuICAgICAgICAgICAgLi4ubmV3RGVmLFxuICAgICAgICB9KTtcbiAgICB9XG59XG5ab2RFbnVtLmNyZWF0ZSA9IGNyZWF0ZVpvZEVudW07XG5leHBvcnQgY2xhc3MgWm9kTmF0aXZlRW51bSBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBjb25zdCBuYXRpdmVFbnVtVmFsdWVzID0gdXRpbC5nZXRWYWxpZEVudW1WYWx1ZXModGhpcy5fZGVmLnZhbHVlcyk7XG4gICAgICAgIGNvbnN0IGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0KTtcbiAgICAgICAgaWYgKGN0eC5wYXJzZWRUeXBlICE9PSBab2RQYXJzZWRUeXBlLnN0cmluZyAmJiBjdHgucGFyc2VkVHlwZSAhPT0gWm9kUGFyc2VkVHlwZS5udW1iZXIpIHtcbiAgICAgICAgICAgIGNvbnN0IGV4cGVjdGVkVmFsdWVzID0gdXRpbC5vYmplY3RWYWx1ZXMobmF0aXZlRW51bVZhbHVlcyk7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogdXRpbC5qb2luVmFsdWVzKGV4cGVjdGVkVmFsdWVzKSxcbiAgICAgICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF0aGlzLl9jYWNoZSkge1xuICAgICAgICAgICAgdGhpcy5fY2FjaGUgPSBuZXcgU2V0KHV0aWwuZ2V0VmFsaWRFbnVtVmFsdWVzKHRoaXMuX2RlZi52YWx1ZXMpKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRoaXMuX2NhY2hlLmhhcyhpbnB1dC5kYXRhKSkge1xuICAgICAgICAgICAgY29uc3QgZXhwZWN0ZWRWYWx1ZXMgPSB1dGlsLm9iamVjdFZhbHVlcyhuYXRpdmVFbnVtVmFsdWVzKTtcbiAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgIHJlY2VpdmVkOiBjdHguZGF0YSxcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9lbnVtX3ZhbHVlLFxuICAgICAgICAgICAgICAgIG9wdGlvbnM6IGV4cGVjdGVkVmFsdWVzLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gT0soaW5wdXQuZGF0YSk7XG4gICAgfVxuICAgIGdldCBlbnVtKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLnZhbHVlcztcbiAgICB9XG59XG5ab2ROYXRpdmVFbnVtLmNyZWF0ZSA9ICh2YWx1ZXMsIHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kTmF0aXZlRW51bSh7XG4gICAgICAgIHZhbHVlczogdmFsdWVzLFxuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZE5hdGl2ZUVudW0sXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kUHJvbWlzZSBleHRlbmRzIFpvZFR5cGUge1xuICAgIHVud3JhcCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi50eXBlO1xuICAgIH1cbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgeyBjdHggfSA9IHRoaXMuX3Byb2Nlc3NJbnB1dFBhcmFtcyhpbnB1dCk7XG4gICAgICAgIGlmIChjdHgucGFyc2VkVHlwZSAhPT0gWm9kUGFyc2VkVHlwZS5wcm9taXNlICYmIGN0eC5jb21tb24uYXN5bmMgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF90eXBlLFxuICAgICAgICAgICAgICAgIGV4cGVjdGVkOiBab2RQYXJzZWRUeXBlLnByb21pc2UsXG4gICAgICAgICAgICAgICAgcmVjZWl2ZWQ6IGN0eC5wYXJzZWRUeXBlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwcm9taXNpZmllZCA9IGN0eC5wYXJzZWRUeXBlID09PSBab2RQYXJzZWRUeXBlLnByb21pc2UgPyBjdHguZGF0YSA6IFByb21pc2UucmVzb2x2ZShjdHguZGF0YSk7XG4gICAgICAgIHJldHVybiBPSyhwcm9taXNpZmllZC50aGVuKChkYXRhKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fZGVmLnR5cGUucGFyc2VBc3luYyhkYXRhLCB7XG4gICAgICAgICAgICAgICAgcGF0aDogY3R4LnBhdGgsXG4gICAgICAgICAgICAgICAgZXJyb3JNYXA6IGN0eC5jb21tb24uY29udGV4dHVhbEVycm9yTWFwLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG59XG5ab2RQcm9taXNlLmNyZWF0ZSA9IChzY2hlbWEsIHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kUHJvbWlzZSh7XG4gICAgICAgIHR5cGU6IHNjaGVtYSxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RQcm9taXNlLFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuZXhwb3J0IGNsYXNzIFpvZEVmZmVjdHMgZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBpbm5lclR5cGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYuc2NoZW1hO1xuICAgIH1cbiAgICBzb3VyY2VUeXBlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLnNjaGVtYS5fZGVmLnR5cGVOYW1lID09PSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kRWZmZWN0c1xuICAgICAgICAgICAgPyB0aGlzLl9kZWYuc2NoZW1hLnNvdXJjZVR5cGUoKVxuICAgICAgICAgICAgOiB0aGlzLl9kZWYuc2NoZW1hO1xuICAgIH1cbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgeyBzdGF0dXMsIGN0eCB9ID0gdGhpcy5fcHJvY2Vzc0lucHV0UGFyYW1zKGlucHV0KTtcbiAgICAgICAgY29uc3QgZWZmZWN0ID0gdGhpcy5fZGVmLmVmZmVjdCB8fCBudWxsO1xuICAgICAgICBjb25zdCBjaGVja0N0eCA9IHtcbiAgICAgICAgICAgIGFkZElzc3VlOiAoYXJnKSA9PiB7XG4gICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCBhcmcpO1xuICAgICAgICAgICAgICAgIGlmIChhcmcuZmF0YWwpIHtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmFib3J0KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZ2V0IHBhdGgoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGN0eC5wYXRoO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgfTtcbiAgICAgICAgY2hlY2tDdHguYWRkSXNzdWUgPSBjaGVja0N0eC5hZGRJc3N1ZS5iaW5kKGNoZWNrQ3R4KTtcbiAgICAgICAgaWYgKGVmZmVjdC50eXBlID09PSBcInByZXByb2Nlc3NcIikge1xuICAgICAgICAgICAgY29uc3QgcHJvY2Vzc2VkID0gZWZmZWN0LnRyYW5zZm9ybShjdHguZGF0YSwgY2hlY2tDdHgpO1xuICAgICAgICAgICAgaWYgKGN0eC5jb21tb24uYXN5bmMpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHByb2Nlc3NlZCkudGhlbihhc3luYyAocHJvY2Vzc2VkKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChzdGF0dXMudmFsdWUgPT09IFwiYWJvcnRlZFwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMuX2RlZi5zY2hlbWEuX3BhcnNlQXN5bmMoe1xuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogcHJvY2Vzc2VkLFxuICAgICAgICAgICAgICAgICAgICAgICAgcGF0aDogY3R4LnBhdGgsXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnQ6IGN0eCxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQuc3RhdHVzID09PSBcImFib3J0ZWRcIilcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0LnN0YXR1cyA9PT0gXCJkaXJ0eVwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIERJUlRZKHJlc3VsdC52YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChzdGF0dXMudmFsdWUgPT09IFwiZGlydHlcIilcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBESVJUWShyZXN1bHQudmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKHN0YXR1cy52YWx1ZSA9PT0gXCJhYm9ydGVkXCIpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMuX2RlZi5zY2hlbWEuX3BhcnNlU3luYyh7XG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHByb2Nlc3NlZCxcbiAgICAgICAgICAgICAgICAgICAgcGF0aDogY3R4LnBhdGgsXG4gICAgICAgICAgICAgICAgICAgIHBhcmVudDogY3R4LFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGlmIChyZXN1bHQuc3RhdHVzID09PSBcImFib3J0ZWRcIilcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5zdGF0dXMgPT09IFwiZGlydHlcIilcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIERJUlRZKHJlc3VsdC52YWx1ZSk7XG4gICAgICAgICAgICAgICAgaWYgKHN0YXR1cy52YWx1ZSA9PT0gXCJkaXJ0eVwiKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gRElSVFkocmVzdWx0LnZhbHVlKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChlZmZlY3QudHlwZSA9PT0gXCJyZWZpbmVtZW50XCIpIHtcbiAgICAgICAgICAgIGNvbnN0IGV4ZWN1dGVSZWZpbmVtZW50ID0gKGFjYykgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGVmZmVjdC5yZWZpbmVtZW50KGFjYywgY2hlY2tDdHgpO1xuICAgICAgICAgICAgICAgIGlmIChjdHguY29tbW9uLmFzeW5jKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUocmVzdWx0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdCBpbnN0YW5jZW9mIFByb21pc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQXN5bmMgcmVmaW5lbWVudCBlbmNvdW50ZXJlZCBkdXJpbmcgc3luY2hyb25vdXMgcGFyc2Ugb3BlcmF0aW9uLiBVc2UgLnBhcnNlQXN5bmMgaW5zdGVhZC5cIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBhY2M7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgaWYgKGN0eC5jb21tb24uYXN5bmMgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgaW5uZXIgPSB0aGlzLl9kZWYuc2NoZW1hLl9wYXJzZVN5bmMoe1xuICAgICAgICAgICAgICAgICAgICBkYXRhOiBjdHguZGF0YSxcbiAgICAgICAgICAgICAgICAgICAgcGF0aDogY3R4LnBhdGgsXG4gICAgICAgICAgICAgICAgICAgIHBhcmVudDogY3R4LFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGlmIChpbm5lci5zdGF0dXMgPT09IFwiYWJvcnRlZFwiKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgICAgICAgICBpZiAoaW5uZXIuc3RhdHVzID09PSBcImRpcnR5XCIpXG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIC8vIHJldHVybiB2YWx1ZSBpcyBpZ25vcmVkXG4gICAgICAgICAgICAgICAgZXhlY3V0ZVJlZmluZW1lbnQoaW5uZXIudmFsdWUpO1xuICAgICAgICAgICAgICAgIHJldHVybiB7IHN0YXR1czogc3RhdHVzLnZhbHVlLCB2YWx1ZTogaW5uZXIudmFsdWUgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9kZWYuc2NoZW1hLl9wYXJzZUFzeW5jKHsgZGF0YTogY3R4LmRhdGEsIHBhdGg6IGN0eC5wYXRoLCBwYXJlbnQ6IGN0eCB9KS50aGVuKChpbm5lcikgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoaW5uZXIuc3RhdHVzID09PSBcImFib3J0ZWRcIilcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICAgICAgICAgICAgICBpZiAoaW5uZXIuc3RhdHVzID09PSBcImRpcnR5XCIpXG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGV4ZWN1dGVSZWZpbmVtZW50KGlubmVyLnZhbHVlKS50aGVuKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7IHN0YXR1czogc3RhdHVzLnZhbHVlLCB2YWx1ZTogaW5uZXIudmFsdWUgfTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGVmZmVjdC50eXBlID09PSBcInRyYW5zZm9ybVwiKSB7XG4gICAgICAgICAgICBpZiAoY3R4LmNvbW1vbi5hc3luYyA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBiYXNlID0gdGhpcy5fZGVmLnNjaGVtYS5fcGFyc2VTeW5jKHtcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogY3R4LmRhdGEsXG4gICAgICAgICAgICAgICAgICAgIHBhdGg6IGN0eC5wYXRoLFxuICAgICAgICAgICAgICAgICAgICBwYXJlbnQ6IGN0eCxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBpZiAoIWlzVmFsaWQoYmFzZSkpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGVmZmVjdC50cmFuc2Zvcm0oYmFzZS52YWx1ZSwgY2hlY2tDdHgpO1xuICAgICAgICAgICAgICAgIGlmIChyZXN1bHQgaW5zdGFuY2VvZiBQcm9taXNlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgQXN5bmNocm9ub3VzIHRyYW5zZm9ybSBlbmNvdW50ZXJlZCBkdXJpbmcgc3luY2hyb25vdXMgcGFyc2Ugb3BlcmF0aW9uLiBVc2UgLnBhcnNlQXN5bmMgaW5zdGVhZC5gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgc3RhdHVzOiBzdGF0dXMudmFsdWUsIHZhbHVlOiByZXN1bHQgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9kZWYuc2NoZW1hLl9wYXJzZUFzeW5jKHsgZGF0YTogY3R4LmRhdGEsIHBhdGg6IGN0eC5wYXRoLCBwYXJlbnQ6IGN0eCB9KS50aGVuKChiYXNlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghaXNWYWxpZChiYXNlKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKGVmZmVjdC50cmFuc2Zvcm0oYmFzZS52YWx1ZSwgY2hlY2tDdHgpKS50aGVuKChyZXN1bHQpID0+ICh7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IHN0YXR1cy52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiByZXN1bHQsXG4gICAgICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB1dGlsLmFzc2VydE5ldmVyKGVmZmVjdCk7XG4gICAgfVxufVxuWm9kRWZmZWN0cy5jcmVhdGUgPSAoc2NoZW1hLCBlZmZlY3QsIHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kRWZmZWN0cyh7XG4gICAgICAgIHNjaGVtYSxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RFZmZlY3RzLFxuICAgICAgICBlZmZlY3QsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5ab2RFZmZlY3RzLmNyZWF0ZVdpdGhQcmVwcm9jZXNzID0gKHByZXByb2Nlc3MsIHNjaGVtYSwgcGFyYW1zKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBab2RFZmZlY3RzKHtcbiAgICAgICAgc2NoZW1hLFxuICAgICAgICBlZmZlY3Q6IHsgdHlwZTogXCJwcmVwcm9jZXNzXCIsIHRyYW5zZm9ybTogcHJlcHJvY2VzcyB9LFxuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZEVmZmVjdHMsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgeyBab2RFZmZlY3RzIGFzIFpvZFRyYW5zZm9ybWVyIH07XG5leHBvcnQgY2xhc3MgWm9kT3B0aW9uYWwgZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgcGFyc2VkVHlwZSA9IHRoaXMuX2dldFR5cGUoaW5wdXQpO1xuICAgICAgICBpZiAocGFyc2VkVHlwZSA9PT0gWm9kUGFyc2VkVHlwZS51bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJldHVybiBPSyh1bmRlZmluZWQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYuaW5uZXJUeXBlLl9wYXJzZShpbnB1dCk7XG4gICAgfVxuICAgIHVud3JhcCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi5pbm5lclR5cGU7XG4gICAgfVxufVxuWm9kT3B0aW9uYWwuY3JlYXRlID0gKHR5cGUsIHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kT3B0aW9uYWwoe1xuICAgICAgICBpbm5lclR5cGU6IHR5cGUsXG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kT3B0aW9uYWwsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kTnVsbGFibGUgZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgcGFyc2VkVHlwZSA9IHRoaXMuX2dldFR5cGUoaW5wdXQpO1xuICAgICAgICBpZiAocGFyc2VkVHlwZSA9PT0gWm9kUGFyc2VkVHlwZS5udWxsKSB7XG4gICAgICAgICAgICByZXR1cm4gT0sobnVsbCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi5pbm5lclR5cGUuX3BhcnNlKGlucHV0KTtcbiAgICB9XG4gICAgdW53cmFwKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLmlubmVyVHlwZTtcbiAgICB9XG59XG5ab2ROdWxsYWJsZS5jcmVhdGUgPSAodHlwZSwgcGFyYW1zKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBab2ROdWxsYWJsZSh7XG4gICAgICAgIGlubmVyVHlwZTogdHlwZSxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2ROdWxsYWJsZSxcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcbmV4cG9ydCBjbGFzcyBab2REZWZhdWx0IGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHsgY3R4IH0gPSB0aGlzLl9wcm9jZXNzSW5wdXRQYXJhbXMoaW5wdXQpO1xuICAgICAgICBsZXQgZGF0YSA9IGN0eC5kYXRhO1xuICAgICAgICBpZiAoY3R4LnBhcnNlZFR5cGUgPT09IFpvZFBhcnNlZFR5cGUudW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBkYXRhID0gdGhpcy5fZGVmLmRlZmF1bHRWYWx1ZSgpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYuaW5uZXJUeXBlLl9wYXJzZSh7XG4gICAgICAgICAgICBkYXRhLFxuICAgICAgICAgICAgcGF0aDogY3R4LnBhdGgsXG4gICAgICAgICAgICBwYXJlbnQ6IGN0eCxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHJlbW92ZURlZmF1bHQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYuaW5uZXJUeXBlO1xuICAgIH1cbn1cblpvZERlZmF1bHQuY3JlYXRlID0gKHR5cGUsIHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kRGVmYXVsdCh7XG4gICAgICAgIGlubmVyVHlwZTogdHlwZSxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2REZWZhdWx0LFxuICAgICAgICBkZWZhdWx0VmFsdWU6IHR5cGVvZiBwYXJhbXMuZGVmYXVsdCA9PT0gXCJmdW5jdGlvblwiID8gcGFyYW1zLmRlZmF1bHQgOiAoKSA9PiBwYXJhbXMuZGVmYXVsdCxcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcbmV4cG9ydCBjbGFzcyBab2RDYXRjaCBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBjb25zdCB7IGN0eCB9ID0gdGhpcy5fcHJvY2Vzc0lucHV0UGFyYW1zKGlucHV0KTtcbiAgICAgICAgLy8gbmV3Q3R4IGlzIHVzZWQgdG8gbm90IGNvbGxlY3QgaXNzdWVzIGZyb20gaW5uZXIgdHlwZXMgaW4gY3R4XG4gICAgICAgIGNvbnN0IG5ld0N0eCA9IHtcbiAgICAgICAgICAgIC4uLmN0eCxcbiAgICAgICAgICAgIGNvbW1vbjoge1xuICAgICAgICAgICAgICAgIC4uLmN0eC5jb21tb24sXG4gICAgICAgICAgICAgICAgaXNzdWVzOiBbXSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMuX2RlZi5pbm5lclR5cGUuX3BhcnNlKHtcbiAgICAgICAgICAgIGRhdGE6IG5ld0N0eC5kYXRhLFxuICAgICAgICAgICAgcGF0aDogbmV3Q3R4LnBhdGgsXG4gICAgICAgICAgICBwYXJlbnQ6IHtcbiAgICAgICAgICAgICAgICAuLi5uZXdDdHgsXG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKGlzQXN5bmMocmVzdWx0KSkge1xuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdC50aGVuKChyZXN1bHQpID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IFwidmFsaWRcIixcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHJlc3VsdC5zdGF0dXMgPT09IFwidmFsaWRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgPyByZXN1bHQudmFsdWVcbiAgICAgICAgICAgICAgICAgICAgICAgIDogdGhpcy5fZGVmLmNhdGNoVmFsdWUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdldCBlcnJvcigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBab2RFcnJvcihuZXdDdHguY29tbW9uLmlzc3Vlcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnB1dDogbmV3Q3R4LmRhdGEsXG4gICAgICAgICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHN0YXR1czogXCJ2YWxpZFwiLFxuICAgICAgICAgICAgICAgIHZhbHVlOiByZXN1bHQuc3RhdHVzID09PSBcInZhbGlkXCJcbiAgICAgICAgICAgICAgICAgICAgPyByZXN1bHQudmFsdWVcbiAgICAgICAgICAgICAgICAgICAgOiB0aGlzLl9kZWYuY2F0Y2hWYWx1ZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICBnZXQgZXJyb3IoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBab2RFcnJvcihuZXdDdHguY29tbW9uLmlzc3Vlcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXQ6IG5ld0N0eC5kYXRhLFxuICAgICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmVtb3ZlQ2F0Y2goKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYuaW5uZXJUeXBlO1xuICAgIH1cbn1cblpvZENhdGNoLmNyZWF0ZSA9ICh0eXBlLCBwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZENhdGNoKHtcbiAgICAgICAgaW5uZXJUeXBlOiB0eXBlLFxuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZENhdGNoLFxuICAgICAgICBjYXRjaFZhbHVlOiB0eXBlb2YgcGFyYW1zLmNhdGNoID09PSBcImZ1bmN0aW9uXCIgPyBwYXJhbXMuY2F0Y2ggOiAoKSA9PiBwYXJhbXMuY2F0Y2gsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kTmFOIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHBhcnNlZFR5cGUgPSB0aGlzLl9nZXRUeXBlKGlucHV0KTtcbiAgICAgICAgaWYgKHBhcnNlZFR5cGUgIT09IFpvZFBhcnNlZFR5cGUubmFuKSB7XG4gICAgICAgICAgICBjb25zdCBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCk7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF90eXBlLFxuICAgICAgICAgICAgICAgIGV4cGVjdGVkOiBab2RQYXJzZWRUeXBlLm5hbixcbiAgICAgICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7IHN0YXR1czogXCJ2YWxpZFwiLCB2YWx1ZTogaW5wdXQuZGF0YSB9O1xuICAgIH1cbn1cblpvZE5hTi5jcmVhdGUgPSAocGFyYW1zKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBab2ROYU4oe1xuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZE5hTixcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcbmV4cG9ydCBjb25zdCBCUkFORCA9IFN5bWJvbChcInpvZF9icmFuZFwiKTtcbmV4cG9ydCBjbGFzcyBab2RCcmFuZGVkIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHsgY3R4IH0gPSB0aGlzLl9wcm9jZXNzSW5wdXRQYXJhbXMoaW5wdXQpO1xuICAgICAgICBjb25zdCBkYXRhID0gY3R4LmRhdGE7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYudHlwZS5fcGFyc2Uoe1xuICAgICAgICAgICAgZGF0YSxcbiAgICAgICAgICAgIHBhdGg6IGN0eC5wYXRoLFxuICAgICAgICAgICAgcGFyZW50OiBjdHgsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICB1bndyYXAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYudHlwZTtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgWm9kUGlwZWxpbmUgZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgeyBzdGF0dXMsIGN0eCB9ID0gdGhpcy5fcHJvY2Vzc0lucHV0UGFyYW1zKGlucHV0KTtcbiAgICAgICAgaWYgKGN0eC5jb21tb24uYXN5bmMpIHtcbiAgICAgICAgICAgIGNvbnN0IGhhbmRsZUFzeW5jID0gYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGluUmVzdWx0ID0gYXdhaXQgdGhpcy5fZGVmLmluLl9wYXJzZUFzeW5jKHtcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogY3R4LmRhdGEsXG4gICAgICAgICAgICAgICAgICAgIHBhdGg6IGN0eC5wYXRoLFxuICAgICAgICAgICAgICAgICAgICBwYXJlbnQ6IGN0eCxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBpZiAoaW5SZXN1bHQuc3RhdHVzID09PSBcImFib3J0ZWRcIilcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgICAgICAgICAgaWYgKGluUmVzdWx0LnN0YXR1cyA9PT0gXCJkaXJ0eVwiKSB7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gRElSVFkoaW5SZXN1bHQudmFsdWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi5vdXQuX3BhcnNlQXN5bmMoe1xuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogaW5SZXN1bHQudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXRoOiBjdHgucGF0aCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcmVudDogY3R4LFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgcmV0dXJuIGhhbmRsZUFzeW5jKCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBpblJlc3VsdCA9IHRoaXMuX2RlZi5pbi5fcGFyc2VTeW5jKHtcbiAgICAgICAgICAgICAgICBkYXRhOiBjdHguZGF0YSxcbiAgICAgICAgICAgICAgICBwYXRoOiBjdHgucGF0aCxcbiAgICAgICAgICAgICAgICBwYXJlbnQ6IGN0eCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKGluUmVzdWx0LnN0YXR1cyA9PT0gXCJhYm9ydGVkXCIpXG4gICAgICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgICAgICBpZiAoaW5SZXN1bHQuc3RhdHVzID09PSBcImRpcnR5XCIpIHtcbiAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IFwiZGlydHlcIixcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGluUmVzdWx0LnZhbHVlLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fZGVmLm91dC5fcGFyc2VTeW5jKHtcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogaW5SZXN1bHQudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgIHBhdGg6IGN0eC5wYXRoLFxuICAgICAgICAgICAgICAgICAgICBwYXJlbnQ6IGN0eCxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBzdGF0aWMgY3JlYXRlKGEsIGIpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBab2RQaXBlbGluZSh7XG4gICAgICAgICAgICBpbjogYSxcbiAgICAgICAgICAgIG91dDogYixcbiAgICAgICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kUGlwZWxpbmUsXG4gICAgICAgIH0pO1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBab2RSZWFkb25seSBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBjb25zdCByZXN1bHQgPSB0aGlzLl9kZWYuaW5uZXJUeXBlLl9wYXJzZShpbnB1dCk7XG4gICAgICAgIGNvbnN0IGZyZWV6ZSA9IChkYXRhKSA9PiB7XG4gICAgICAgICAgICBpZiAoaXNWYWxpZChkYXRhKSkge1xuICAgICAgICAgICAgICAgIGRhdGEudmFsdWUgPSBPYmplY3QuZnJlZXplKGRhdGEudmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGRhdGE7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBpc0FzeW5jKHJlc3VsdCkgPyByZXN1bHQudGhlbigoZGF0YSkgPT4gZnJlZXplKGRhdGEpKSA6IGZyZWV6ZShyZXN1bHQpO1xuICAgIH1cbiAgICB1bndyYXAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYuaW5uZXJUeXBlO1xuICAgIH1cbn1cblpvZFJlYWRvbmx5LmNyZWF0ZSA9ICh0eXBlLCBwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZFJlYWRvbmx5KHtcbiAgICAgICAgaW5uZXJUeXBlOiB0eXBlLFxuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZFJlYWRvbmx5LFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuLy8vLy8vLy8vLyAgICAgICAgICAgICAgICAgICAgLy8vLy8vLy8vL1xuLy8vLy8vLy8vLyAgICAgIHouY3VzdG9tICAgICAgLy8vLy8vLy8vL1xuLy8vLy8vLy8vLyAgICAgICAgICAgICAgICAgICAgLy8vLy8vLy8vL1xuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuZnVuY3Rpb24gY2xlYW5QYXJhbXMocGFyYW1zLCBkYXRhKSB7XG4gICAgY29uc3QgcCA9IHR5cGVvZiBwYXJhbXMgPT09IFwiZnVuY3Rpb25cIiA/IHBhcmFtcyhkYXRhKSA6IHR5cGVvZiBwYXJhbXMgPT09IFwic3RyaW5nXCIgPyB7IG1lc3NhZ2U6IHBhcmFtcyB9IDogcGFyYW1zO1xuICAgIGNvbnN0IHAyID0gdHlwZW9mIHAgPT09IFwic3RyaW5nXCIgPyB7IG1lc3NhZ2U6IHAgfSA6IHA7XG4gICAgcmV0dXJuIHAyO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGN1c3RvbShjaGVjaywgX3BhcmFtcyA9IHt9LCBcbi8qKlxuICogQGRlcHJlY2F0ZWRcbiAqXG4gKiBQYXNzIGBmYXRhbGAgaW50byB0aGUgcGFyYW1zIG9iamVjdCBpbnN0ZWFkOlxuICpcbiAqIGBgYHRzXG4gKiB6LnN0cmluZygpLmN1c3RvbSgodmFsKSA9PiB2YWwubGVuZ3RoID4gNSwgeyBmYXRhbDogZmFsc2UgfSlcbiAqIGBgYFxuICpcbiAqL1xuZmF0YWwpIHtcbiAgICBpZiAoY2hlY2spXG4gICAgICAgIHJldHVybiBab2RBbnkuY3JlYXRlKCkuc3VwZXJSZWZpbmUoKGRhdGEsIGN0eCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgciA9IGNoZWNrKGRhdGEpO1xuICAgICAgICAgICAgaWYgKHIgaW5zdGFuY2VvZiBQcm9taXNlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHIudGhlbigocikgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHBhcmFtcyA9IGNsZWFuUGFyYW1zKF9wYXJhbXMsIGRhdGEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgX2ZhdGFsID0gcGFyYW1zLmZhdGFsID8/IGZhdGFsID8/IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBjdHguYWRkSXNzdWUoeyBjb2RlOiBcImN1c3RvbVwiLCAuLi5wYXJhbXMsIGZhdGFsOiBfZmF0YWwgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghcikge1xuICAgICAgICAgICAgICAgIGNvbnN0IHBhcmFtcyA9IGNsZWFuUGFyYW1zKF9wYXJhbXMsIGRhdGEpO1xuICAgICAgICAgICAgICAgIGNvbnN0IF9mYXRhbCA9IHBhcmFtcy5mYXRhbCA/PyBmYXRhbCA/PyB0cnVlO1xuICAgICAgICAgICAgICAgIGN0eC5hZGRJc3N1ZSh7IGNvZGU6IFwiY3VzdG9tXCIsIC4uLnBhcmFtcywgZmF0YWw6IF9mYXRhbCB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfSk7XG4gICAgcmV0dXJuIFpvZEFueS5jcmVhdGUoKTtcbn1cbmV4cG9ydCB7IFpvZFR5cGUgYXMgU2NoZW1hLCBab2RUeXBlIGFzIFpvZFNjaGVtYSB9O1xuZXhwb3J0IGNvbnN0IGxhdGUgPSB7XG4gICAgb2JqZWN0OiBab2RPYmplY3QubGF6eWNyZWF0ZSxcbn07XG5leHBvcnQgdmFyIFpvZEZpcnN0UGFydHlUeXBlS2luZDtcbihmdW5jdGlvbiAoWm9kRmlyc3RQYXJ0eVR5cGVLaW5kKSB7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kU3RyaW5nXCJdID0gXCJab2RTdHJpbmdcIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2ROdW1iZXJcIl0gPSBcIlpvZE51bWJlclwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZE5hTlwiXSA9IFwiWm9kTmFOXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kQmlnSW50XCJdID0gXCJab2RCaWdJbnRcIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2RCb29sZWFuXCJdID0gXCJab2RCb29sZWFuXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kRGF0ZVwiXSA9IFwiWm9kRGF0ZVwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZFN5bWJvbFwiXSA9IFwiWm9kU3ltYm9sXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kVW5kZWZpbmVkXCJdID0gXCJab2RVbmRlZmluZWRcIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2ROdWxsXCJdID0gXCJab2ROdWxsXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kQW55XCJdID0gXCJab2RBbnlcIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2RVbmtub3duXCJdID0gXCJab2RVbmtub3duXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kTmV2ZXJcIl0gPSBcIlpvZE5ldmVyXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kVm9pZFwiXSA9IFwiWm9kVm9pZFwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZEFycmF5XCJdID0gXCJab2RBcnJheVwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZE9iamVjdFwiXSA9IFwiWm9kT2JqZWN0XCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kVW5pb25cIl0gPSBcIlpvZFVuaW9uXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kRGlzY3JpbWluYXRlZFVuaW9uXCJdID0gXCJab2REaXNjcmltaW5hdGVkVW5pb25cIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2RJbnRlcnNlY3Rpb25cIl0gPSBcIlpvZEludGVyc2VjdGlvblwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZFR1cGxlXCJdID0gXCJab2RUdXBsZVwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZFJlY29yZFwiXSA9IFwiWm9kUmVjb3JkXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kTWFwXCJdID0gXCJab2RNYXBcIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2RTZXRcIl0gPSBcIlpvZFNldFwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZEZ1bmN0aW9uXCJdID0gXCJab2RGdW5jdGlvblwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZExhenlcIl0gPSBcIlpvZExhenlcIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2RMaXRlcmFsXCJdID0gXCJab2RMaXRlcmFsXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kRW51bVwiXSA9IFwiWm9kRW51bVwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZEVmZmVjdHNcIl0gPSBcIlpvZEVmZmVjdHNcIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2ROYXRpdmVFbnVtXCJdID0gXCJab2ROYXRpdmVFbnVtXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kT3B0aW9uYWxcIl0gPSBcIlpvZE9wdGlvbmFsXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kTnVsbGFibGVcIl0gPSBcIlpvZE51bGxhYmxlXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kRGVmYXVsdFwiXSA9IFwiWm9kRGVmYXVsdFwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZENhdGNoXCJdID0gXCJab2RDYXRjaFwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZFByb21pc2VcIl0gPSBcIlpvZFByb21pc2VcIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2RCcmFuZGVkXCJdID0gXCJab2RCcmFuZGVkXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kUGlwZWxpbmVcIl0gPSBcIlpvZFBpcGVsaW5lXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kUmVhZG9ubHlcIl0gPSBcIlpvZFJlYWRvbmx5XCI7XG59KShab2RGaXJzdFBhcnR5VHlwZUtpbmQgfHwgKFpvZEZpcnN0UGFydHlUeXBlS2luZCA9IHt9KSk7XG4vLyByZXF1aXJlcyBUUyA0LjQrXG5jbGFzcyBDbGFzcyB7XG4gICAgY29uc3RydWN0b3IoLi4uXykgeyB9XG59XG5jb25zdCBpbnN0YW5jZU9mVHlwZSA9IChcbi8vIGNvbnN0IGluc3RhbmNlT2ZUeXBlID0gPFQgZXh0ZW5kcyBuZXcgKC4uLmFyZ3M6IGFueVtdKSA9PiBhbnk+KFxuY2xzLCBwYXJhbXMgPSB7XG4gICAgbWVzc2FnZTogYElucHV0IG5vdCBpbnN0YW5jZSBvZiAke2Nscy5uYW1lfWAsXG59KSA9PiBjdXN0b20oKGRhdGEpID0+IGRhdGEgaW5zdGFuY2VvZiBjbHMsIHBhcmFtcyk7XG5jb25zdCBzdHJpbmdUeXBlID0gWm9kU3RyaW5nLmNyZWF0ZTtcbmNvbnN0IG51bWJlclR5cGUgPSBab2ROdW1iZXIuY3JlYXRlO1xuY29uc3QgbmFuVHlwZSA9IFpvZE5hTi5jcmVhdGU7XG5jb25zdCBiaWdJbnRUeXBlID0gWm9kQmlnSW50LmNyZWF0ZTtcbmNvbnN0IGJvb2xlYW5UeXBlID0gWm9kQm9vbGVhbi5jcmVhdGU7XG5jb25zdCBkYXRlVHlwZSA9IFpvZERhdGUuY3JlYXRlO1xuY29uc3Qgc3ltYm9sVHlwZSA9IFpvZFN5bWJvbC5jcmVhdGU7XG5jb25zdCB1bmRlZmluZWRUeXBlID0gWm9kVW5kZWZpbmVkLmNyZWF0ZTtcbmNvbnN0IG51bGxUeXBlID0gWm9kTnVsbC5jcmVhdGU7XG5jb25zdCBhbnlUeXBlID0gWm9kQW55LmNyZWF0ZTtcbmNvbnN0IHVua25vd25UeXBlID0gWm9kVW5rbm93bi5jcmVhdGU7XG5jb25zdCBuZXZlclR5cGUgPSBab2ROZXZlci5jcmVhdGU7XG5jb25zdCB2b2lkVHlwZSA9IFpvZFZvaWQuY3JlYXRlO1xuY29uc3QgYXJyYXlUeXBlID0gWm9kQXJyYXkuY3JlYXRlO1xuY29uc3Qgb2JqZWN0VHlwZSA9IFpvZE9iamVjdC5jcmVhdGU7XG5jb25zdCBzdHJpY3RPYmplY3RUeXBlID0gWm9kT2JqZWN0LnN0cmljdENyZWF0ZTtcbmNvbnN0IHVuaW9uVHlwZSA9IFpvZFVuaW9uLmNyZWF0ZTtcbmNvbnN0IGRpc2NyaW1pbmF0ZWRVbmlvblR5cGUgPSBab2REaXNjcmltaW5hdGVkVW5pb24uY3JlYXRlO1xuY29uc3QgaW50ZXJzZWN0aW9uVHlwZSA9IFpvZEludGVyc2VjdGlvbi5jcmVhdGU7XG5jb25zdCB0dXBsZVR5cGUgPSBab2RUdXBsZS5jcmVhdGU7XG5jb25zdCByZWNvcmRUeXBlID0gWm9kUmVjb3JkLmNyZWF0ZTtcbmNvbnN0IG1hcFR5cGUgPSBab2RNYXAuY3JlYXRlO1xuY29uc3Qgc2V0VHlwZSA9IFpvZFNldC5jcmVhdGU7XG5jb25zdCBmdW5jdGlvblR5cGUgPSBab2RGdW5jdGlvbi5jcmVhdGU7XG5jb25zdCBsYXp5VHlwZSA9IFpvZExhenkuY3JlYXRlO1xuY29uc3QgbGl0ZXJhbFR5cGUgPSBab2RMaXRlcmFsLmNyZWF0ZTtcbmNvbnN0IGVudW1UeXBlID0gWm9kRW51bS5jcmVhdGU7XG5jb25zdCBuYXRpdmVFbnVtVHlwZSA9IFpvZE5hdGl2ZUVudW0uY3JlYXRlO1xuY29uc3QgcHJvbWlzZVR5cGUgPSBab2RQcm9taXNlLmNyZWF0ZTtcbmNvbnN0IGVmZmVjdHNUeXBlID0gWm9kRWZmZWN0cy5jcmVhdGU7XG5jb25zdCBvcHRpb25hbFR5cGUgPSBab2RPcHRpb25hbC5jcmVhdGU7XG5jb25zdCBudWxsYWJsZVR5cGUgPSBab2ROdWxsYWJsZS5jcmVhdGU7XG5jb25zdCBwcmVwcm9jZXNzVHlwZSA9IFpvZEVmZmVjdHMuY3JlYXRlV2l0aFByZXByb2Nlc3M7XG5jb25zdCBwaXBlbGluZVR5cGUgPSBab2RQaXBlbGluZS5jcmVhdGU7XG5jb25zdCBvc3RyaW5nID0gKCkgPT4gc3RyaW5nVHlwZSgpLm9wdGlvbmFsKCk7XG5jb25zdCBvbnVtYmVyID0gKCkgPT4gbnVtYmVyVHlwZSgpLm9wdGlvbmFsKCk7XG5jb25zdCBvYm9vbGVhbiA9ICgpID0+IGJvb2xlYW5UeXBlKCkub3B0aW9uYWwoKTtcbmV4cG9ydCBjb25zdCBjb2VyY2UgPSB7XG4gICAgc3RyaW5nOiAoKGFyZykgPT4gWm9kU3RyaW5nLmNyZWF0ZSh7IC4uLmFyZywgY29lcmNlOiB0cnVlIH0pKSxcbiAgICBudW1iZXI6ICgoYXJnKSA9PiBab2ROdW1iZXIuY3JlYXRlKHsgLi4uYXJnLCBjb2VyY2U6IHRydWUgfSkpLFxuICAgIGJvb2xlYW46ICgoYXJnKSA9PiBab2RCb29sZWFuLmNyZWF0ZSh7XG4gICAgICAgIC4uLmFyZyxcbiAgICAgICAgY29lcmNlOiB0cnVlLFxuICAgIH0pKSxcbiAgICBiaWdpbnQ6ICgoYXJnKSA9PiBab2RCaWdJbnQuY3JlYXRlKHsgLi4uYXJnLCBjb2VyY2U6IHRydWUgfSkpLFxuICAgIGRhdGU6ICgoYXJnKSA9PiBab2REYXRlLmNyZWF0ZSh7IC4uLmFyZywgY29lcmNlOiB0cnVlIH0pKSxcbn07XG5leHBvcnQgeyBhbnlUeXBlIGFzIGFueSwgYXJyYXlUeXBlIGFzIGFycmF5LCBiaWdJbnRUeXBlIGFzIGJpZ2ludCwgYm9vbGVhblR5cGUgYXMgYm9vbGVhbiwgZGF0ZVR5cGUgYXMgZGF0ZSwgZGlzY3JpbWluYXRlZFVuaW9uVHlwZSBhcyBkaXNjcmltaW5hdGVkVW5pb24sIGVmZmVjdHNUeXBlIGFzIGVmZmVjdCwgZW51bVR5cGUgYXMgZW51bSwgZnVuY3Rpb25UeXBlIGFzIGZ1bmN0aW9uLCBpbnN0YW5jZU9mVHlwZSBhcyBpbnN0YW5jZW9mLCBpbnRlcnNlY3Rpb25UeXBlIGFzIGludGVyc2VjdGlvbiwgbGF6eVR5cGUgYXMgbGF6eSwgbGl0ZXJhbFR5cGUgYXMgbGl0ZXJhbCwgbWFwVHlwZSBhcyBtYXAsIG5hblR5cGUgYXMgbmFuLCBuYXRpdmVFbnVtVHlwZSBhcyBuYXRpdmVFbnVtLCBuZXZlclR5cGUgYXMgbmV2ZXIsIG51bGxUeXBlIGFzIG51bGwsIG51bGxhYmxlVHlwZSBhcyBudWxsYWJsZSwgbnVtYmVyVHlwZSBhcyBudW1iZXIsIG9iamVjdFR5cGUgYXMgb2JqZWN0LCBvYm9vbGVhbiwgb251bWJlciwgb3B0aW9uYWxUeXBlIGFzIG9wdGlvbmFsLCBvc3RyaW5nLCBwaXBlbGluZVR5cGUgYXMgcGlwZWxpbmUsIHByZXByb2Nlc3NUeXBlIGFzIHByZXByb2Nlc3MsIHByb21pc2VUeXBlIGFzIHByb21pc2UsIHJlY29yZFR5cGUgYXMgcmVjb3JkLCBzZXRUeXBlIGFzIHNldCwgc3RyaWN0T2JqZWN0VHlwZSBhcyBzdHJpY3RPYmplY3QsIHN0cmluZ1R5cGUgYXMgc3RyaW5nLCBzeW1ib2xUeXBlIGFzIHN5bWJvbCwgZWZmZWN0c1R5cGUgYXMgdHJhbnNmb3JtZXIsIHR1cGxlVHlwZSBhcyB0dXBsZSwgdW5kZWZpbmVkVHlwZSBhcyB1bmRlZmluZWQsIHVuaW9uVHlwZSBhcyB1bmlvbiwgdW5rbm93blR5cGUgYXMgdW5rbm93biwgdm9pZFR5cGUgYXMgdm9pZCwgfTtcbmV4cG9ydCBjb25zdCBORVZFUiA9IElOVkFMSUQ7XG4iLCJleHBvcnQgZnVuY3Rpb24gcGFyc2VBbnlEZWYoKSB7XG4gICAgcmV0dXJuIHt9O1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YW55Lm1qcy5tYXAiLCJpbXBvcnQgeyBab2RGaXJzdFBhcnR5VHlwZUtpbmQgfSBmcm9tICd6b2QvdjMnO1xuaW1wb3J0IHsgc2V0UmVzcG9uc2VWYWx1ZUFuZEVycm9ycyB9IGZyb20gXCIuLi9lcnJvck1lc3NhZ2VzLm1qc1wiO1xuaW1wb3J0IHsgcGFyc2VEZWYgfSBmcm9tIFwiLi4vcGFyc2VEZWYubWpzXCI7XG5leHBvcnQgZnVuY3Rpb24gcGFyc2VBcnJheURlZihkZWYsIHJlZnMpIHtcbiAgICBjb25zdCByZXMgPSB7XG4gICAgICAgIHR5cGU6ICdhcnJheScsXG4gICAgfTtcbiAgICBpZiAoZGVmLnR5cGU/Ll9kZWY/LnR5cGVOYW1lICE9PSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kQW55KSB7XG4gICAgICAgIHJlcy5pdGVtcyA9IHBhcnNlRGVmKGRlZi50eXBlLl9kZWYsIHtcbiAgICAgICAgICAgIC4uLnJlZnMsXG4gICAgICAgICAgICBjdXJyZW50UGF0aDogWy4uLnJlZnMuY3VycmVudFBhdGgsICdpdGVtcyddLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgaWYgKGRlZi5taW5MZW5ndGgpIHtcbiAgICAgICAgc2V0UmVzcG9uc2VWYWx1ZUFuZEVycm9ycyhyZXMsICdtaW5JdGVtcycsIGRlZi5taW5MZW5ndGgudmFsdWUsIGRlZi5taW5MZW5ndGgubWVzc2FnZSwgcmVmcyk7XG4gICAgfVxuICAgIGlmIChkZWYubWF4TGVuZ3RoKSB7XG4gICAgICAgIHNldFJlc3BvbnNlVmFsdWVBbmRFcnJvcnMocmVzLCAnbWF4SXRlbXMnLCBkZWYubWF4TGVuZ3RoLnZhbHVlLCBkZWYubWF4TGVuZ3RoLm1lc3NhZ2UsIHJlZnMpO1xuICAgIH1cbiAgICBpZiAoZGVmLmV4YWN0TGVuZ3RoKSB7XG4gICAgICAgIHNldFJlc3BvbnNlVmFsdWVBbmRFcnJvcnMocmVzLCAnbWluSXRlbXMnLCBkZWYuZXhhY3RMZW5ndGgudmFsdWUsIGRlZi5leGFjdExlbmd0aC5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgc2V0UmVzcG9uc2VWYWx1ZUFuZEVycm9ycyhyZXMsICdtYXhJdGVtcycsIGRlZi5leGFjdExlbmd0aC52YWx1ZSwgZGVmLmV4YWN0TGVuZ3RoLm1lc3NhZ2UsIHJlZnMpO1xuICAgIH1cbiAgICByZXR1cm4gcmVzO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXJyYXkubWpzLm1hcCIsImltcG9ydCB7IHNldFJlc3BvbnNlVmFsdWVBbmRFcnJvcnMgfSBmcm9tIFwiLi4vZXJyb3JNZXNzYWdlcy5tanNcIjtcbmV4cG9ydCBmdW5jdGlvbiBwYXJzZUJpZ2ludERlZihkZWYsIHJlZnMpIHtcbiAgICBjb25zdCByZXMgPSB7XG4gICAgICAgIHR5cGU6ICdpbnRlZ2VyJyxcbiAgICAgICAgZm9ybWF0OiAnaW50NjQnLFxuICAgIH07XG4gICAgaWYgKCFkZWYuY2hlY2tzKVxuICAgICAgICByZXR1cm4gcmVzO1xuICAgIGZvciAoY29uc3QgY2hlY2sgb2YgZGVmLmNoZWNrcykge1xuICAgICAgICBzd2l0Y2ggKGNoZWNrLmtpbmQpIHtcbiAgICAgICAgICAgIGNhc2UgJ21pbic6XG4gICAgICAgICAgICAgICAgaWYgKHJlZnMudGFyZ2V0ID09PSAnanNvblNjaGVtYTcnKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjaGVjay5pbmNsdXNpdmUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldFJlc3BvbnNlVmFsdWVBbmRFcnJvcnMocmVzLCAnbWluaW11bScsIGNoZWNrLnZhbHVlLCBjaGVjay5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldFJlc3BvbnNlVmFsdWVBbmRFcnJvcnMocmVzLCAnZXhjbHVzaXZlTWluaW11bScsIGNoZWNrLnZhbHVlLCBjaGVjay5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFjaGVjay5pbmNsdXNpdmUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcy5leGNsdXNpdmVNaW5pbXVtID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBzZXRSZXNwb25zZVZhbHVlQW5kRXJyb3JzKHJlcywgJ21pbmltdW0nLCBjaGVjay52YWx1ZSwgY2hlY2subWVzc2FnZSwgcmVmcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnbWF4JzpcbiAgICAgICAgICAgICAgICBpZiAocmVmcy50YXJnZXQgPT09ICdqc29uU2NoZW1hNycpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNoZWNrLmluY2x1c2l2ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0UmVzcG9uc2VWYWx1ZUFuZEVycm9ycyhyZXMsICdtYXhpbXVtJywgY2hlY2sudmFsdWUsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0UmVzcG9uc2VWYWx1ZUFuZEVycm9ycyhyZXMsICdleGNsdXNpdmVNYXhpbXVtJywgY2hlY2sudmFsdWUsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWNoZWNrLmluY2x1c2l2ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzLmV4Y2x1c2l2ZU1heGltdW0gPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHNldFJlc3BvbnNlVmFsdWVBbmRFcnJvcnMocmVzLCAnbWF4aW11bScsIGNoZWNrLnZhbHVlLCBjaGVjay5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdtdWx0aXBsZU9mJzpcbiAgICAgICAgICAgICAgICBzZXRSZXNwb25zZVZhbHVlQW5kRXJyb3JzKHJlcywgJ211bHRpcGxlT2YnLCBjaGVjay52YWx1ZSwgY2hlY2subWVzc2FnZSwgcmVmcyk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHJlcztcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWJpZ2ludC5tanMubWFwIiwiZXhwb3J0IGZ1bmN0aW9uIHBhcnNlQm9vbGVhbkRlZigpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICB0eXBlOiAnYm9vbGVhbicsXG4gICAgfTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWJvb2xlYW4ubWpzLm1hcCIsImltcG9ydCB7IHBhcnNlRGVmIH0gZnJvbSBcIi4uL3BhcnNlRGVmLm1qc1wiO1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlQnJhbmRlZERlZihfZGVmLCByZWZzKSB7XG4gICAgcmV0dXJuIHBhcnNlRGVmKF9kZWYudHlwZS5fZGVmLCByZWZzKTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWJyYW5kZWQubWpzLm1hcCIsImltcG9ydCB7IHBhcnNlRGVmIH0gZnJvbSBcIi4uL3BhcnNlRGVmLm1qc1wiO1xuZXhwb3J0IGNvbnN0IHBhcnNlQ2F0Y2hEZWYgPSAoZGVmLCByZWZzKSA9PiB7XG4gICAgcmV0dXJuIHBhcnNlRGVmKGRlZi5pbm5lclR5cGUuX2RlZiwgcmVmcyk7XG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y2F0Y2gubWpzLm1hcCIsImltcG9ydCB7IHNldFJlc3BvbnNlVmFsdWVBbmRFcnJvcnMgfSBmcm9tIFwiLi4vZXJyb3JNZXNzYWdlcy5tanNcIjtcbmV4cG9ydCBmdW5jdGlvbiBwYXJzZURhdGVEZWYoZGVmLCByZWZzLCBvdmVycmlkZURhdGVTdHJhdGVneSkge1xuICAgIGNvbnN0IHN0cmF0ZWd5ID0gb3ZlcnJpZGVEYXRlU3RyYXRlZ3kgPz8gcmVmcy5kYXRlU3RyYXRlZ3k7XG4gICAgaWYgKEFycmF5LmlzQXJyYXkoc3RyYXRlZ3kpKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBhbnlPZjogc3RyYXRlZ3kubWFwKChpdGVtLCBpKSA9PiBwYXJzZURhdGVEZWYoZGVmLCByZWZzLCBpdGVtKSksXG4gICAgICAgIH07XG4gICAgfVxuICAgIHN3aXRjaCAoc3RyYXRlZ3kpIHtcbiAgICAgICAgY2FzZSAnc3RyaW5nJzpcbiAgICAgICAgY2FzZSAnZm9ybWF0OmRhdGUtdGltZSc6XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHR5cGU6ICdzdHJpbmcnLFxuICAgICAgICAgICAgICAgIGZvcm1hdDogJ2RhdGUtdGltZScsXG4gICAgICAgICAgICB9O1xuICAgICAgICBjYXNlICdmb3JtYXQ6ZGF0ZSc6XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHR5cGU6ICdzdHJpbmcnLFxuICAgICAgICAgICAgICAgIGZvcm1hdDogJ2RhdGUnLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgY2FzZSAnaW50ZWdlcic6XG4gICAgICAgICAgICByZXR1cm4gaW50ZWdlckRhdGVQYXJzZXIoZGVmLCByZWZzKTtcbiAgICB9XG59XG5jb25zdCBpbnRlZ2VyRGF0ZVBhcnNlciA9IChkZWYsIHJlZnMpID0+IHtcbiAgICBjb25zdCByZXMgPSB7XG4gICAgICAgIHR5cGU6ICdpbnRlZ2VyJyxcbiAgICAgICAgZm9ybWF0OiAndW5peC10aW1lJyxcbiAgICB9O1xuICAgIGlmIChyZWZzLnRhcmdldCA9PT0gJ29wZW5BcGkzJykge1xuICAgICAgICByZXR1cm4gcmVzO1xuICAgIH1cbiAgICBmb3IgKGNvbnN0IGNoZWNrIG9mIGRlZi5jaGVja3MpIHtcbiAgICAgICAgc3dpdGNoIChjaGVjay5raW5kKSB7XG4gICAgICAgICAgICBjYXNlICdtaW4nOlxuICAgICAgICAgICAgICAgIHNldFJlc3BvbnNlVmFsdWVBbmRFcnJvcnMocmVzLCAnbWluaW11bScsIGNoZWNrLnZhbHVlLCAvLyBUaGlzIGlzIGluIG1pbGxpc2Vjb25kc1xuICAgICAgICAgICAgICAgIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnbWF4JzpcbiAgICAgICAgICAgICAgICBzZXRSZXNwb25zZVZhbHVlQW5kRXJyb3JzKHJlcywgJ21heGltdW0nLCBjaGVjay52YWx1ZSwgLy8gVGhpcyBpcyBpbiBtaWxsaXNlY29uZHNcbiAgICAgICAgICAgICAgICBjaGVjay5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcmVzO1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGUubWpzLm1hcCIsImltcG9ydCB7IHBhcnNlRGVmIH0gZnJvbSBcIi4uL3BhcnNlRGVmLm1qc1wiO1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlRGVmYXVsdERlZihfZGVmLCByZWZzKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgLi4ucGFyc2VEZWYoX2RlZi5pbm5lclR5cGUuX2RlZiwgcmVmcyksXG4gICAgICAgIGRlZmF1bHQ6IF9kZWYuZGVmYXVsdFZhbHVlKCksXG4gICAgfTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRlZmF1bHQubWpzLm1hcCIsImltcG9ydCB7IHBhcnNlRGVmIH0gZnJvbSBcIi4uL3BhcnNlRGVmLm1qc1wiO1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlRWZmZWN0c0RlZihfZGVmLCByZWZzLCBmb3JjZVJlc29sdXRpb24pIHtcbiAgICByZXR1cm4gcmVmcy5lZmZlY3RTdHJhdGVneSA9PT0gJ2lucHV0JyA/IHBhcnNlRGVmKF9kZWYuc2NoZW1hLl9kZWYsIHJlZnMsIGZvcmNlUmVzb2x1dGlvbikgOiB7fTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWVmZmVjdHMubWpzLm1hcCIsImV4cG9ydCBmdW5jdGlvbiBwYXJzZUVudW1EZWYoZGVmKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogJ3N0cmluZycsXG4gICAgICAgIGVudW06IFsuLi5kZWYudmFsdWVzXSxcbiAgICB9O1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZW51bS5tanMubWFwIiwiaW1wb3J0IHsgcGFyc2VEZWYgfSBmcm9tIFwiLi4vcGFyc2VEZWYubWpzXCI7XG5jb25zdCBpc0pzb25TY2hlbWE3QWxsT2ZUeXBlID0gKHR5cGUpID0+IHtcbiAgICBpZiAoJ3R5cGUnIGluIHR5cGUgJiYgdHlwZS50eXBlID09PSAnc3RyaW5nJylcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIHJldHVybiAnYWxsT2YnIGluIHR5cGU7XG59O1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlSW50ZXJzZWN0aW9uRGVmKGRlZiwgcmVmcykge1xuICAgIGNvbnN0IGFsbE9mID0gW1xuICAgICAgICBwYXJzZURlZihkZWYubGVmdC5fZGVmLCB7XG4gICAgICAgICAgICAuLi5yZWZzLFxuICAgICAgICAgICAgY3VycmVudFBhdGg6IFsuLi5yZWZzLmN1cnJlbnRQYXRoLCAnYWxsT2YnLCAnMCddLFxuICAgICAgICB9KSxcbiAgICAgICAgcGFyc2VEZWYoZGVmLnJpZ2h0Ll9kZWYsIHtcbiAgICAgICAgICAgIC4uLnJlZnMsXG4gICAgICAgICAgICBjdXJyZW50UGF0aDogWy4uLnJlZnMuY3VycmVudFBhdGgsICdhbGxPZicsICcxJ10sXG4gICAgICAgIH0pLFxuICAgIF0uZmlsdGVyKCh4KSA9PiAhIXgpO1xuICAgIGxldCB1bmV2YWx1YXRlZFByb3BlcnRpZXMgPSByZWZzLnRhcmdldCA9PT0gJ2pzb25TY2hlbWEyMDE5LTA5JyA/IHsgdW5ldmFsdWF0ZWRQcm9wZXJ0aWVzOiBmYWxzZSB9IDogdW5kZWZpbmVkO1xuICAgIGNvbnN0IG1lcmdlZEFsbE9mID0gW107XG4gICAgLy8gSWYgZWl0aGVyIG9mIHRoZSBzY2hlbWFzIGlzIGFuIGFsbE9mLCBtZXJnZSB0aGVtIGludG8gYSBzaW5nbGUgYWxsT2ZcbiAgICBhbGxPZi5mb3JFYWNoKChzY2hlbWEpID0+IHtcbiAgICAgICAgaWYgKGlzSnNvblNjaGVtYTdBbGxPZlR5cGUoc2NoZW1hKSkge1xuICAgICAgICAgICAgbWVyZ2VkQWxsT2YucHVzaCguLi5zY2hlbWEuYWxsT2YpO1xuICAgICAgICAgICAgaWYgKHNjaGVtYS51bmV2YWx1YXRlZFByb3BlcnRpZXMgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIC8vIElmIG9uZSBvZiB0aGUgc2NoZW1hcyBoYXMgbm8gdW5ldmFsdWF0ZWRQcm9wZXJ0aWVzIHNldCxcbiAgICAgICAgICAgICAgICAvLyB0aGUgbWVyZ2VkIHNjaGVtYSBzaG91bGQgYWxzbyBoYXZlIG5vIHVuZXZhbHVhdGVkUHJvcGVydGllcyBzZXRcbiAgICAgICAgICAgICAgICB1bmV2YWx1YXRlZFByb3BlcnRpZXMgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBsZXQgbmVzdGVkU2NoZW1hID0gc2NoZW1hO1xuICAgICAgICAgICAgaWYgKCdhZGRpdGlvbmFsUHJvcGVydGllcycgaW4gc2NoZW1hICYmIHNjaGVtYS5hZGRpdGlvbmFsUHJvcGVydGllcyA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB7IGFkZGl0aW9uYWxQcm9wZXJ0aWVzLCAuLi5yZXN0IH0gPSBzY2hlbWE7XG4gICAgICAgICAgICAgICAgbmVzdGVkU2NoZW1hID0gcmVzdDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIEFzIHNvb24gYXMgb25lIG9mIHRoZSBzY2hlbWFzIGhhcyBhZGRpdGlvbmFsUHJvcGVydGllcyBzZXQgbm90IHRvIGZhbHNlLCB3ZSBhbGxvdyB1bmV2YWx1YXRlZFByb3BlcnRpZXNcbiAgICAgICAgICAgICAgICB1bmV2YWx1YXRlZFByb3BlcnRpZXMgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBtZXJnZWRBbGxPZi5wdXNoKG5lc3RlZFNjaGVtYSk7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gbWVyZ2VkQWxsT2YubGVuZ3RoID9cbiAgICAgICAge1xuICAgICAgICAgICAgYWxsT2Y6IG1lcmdlZEFsbE9mLFxuICAgICAgICAgICAgLi4udW5ldmFsdWF0ZWRQcm9wZXJ0aWVzLFxuICAgICAgICB9XG4gICAgICAgIDogdW5kZWZpbmVkO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW50ZXJzZWN0aW9uLm1qcy5tYXAiLCJleHBvcnQgZnVuY3Rpb24gcGFyc2VMaXRlcmFsRGVmKGRlZiwgcmVmcykge1xuICAgIGNvbnN0IHBhcnNlZFR5cGUgPSB0eXBlb2YgZGVmLnZhbHVlO1xuICAgIGlmIChwYXJzZWRUeXBlICE9PSAnYmlnaW50JyAmJlxuICAgICAgICBwYXJzZWRUeXBlICE9PSAnbnVtYmVyJyAmJlxuICAgICAgICBwYXJzZWRUeXBlICE9PSAnYm9vbGVhbicgJiZcbiAgICAgICAgcGFyc2VkVHlwZSAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHR5cGU6IEFycmF5LmlzQXJyYXkoZGVmLnZhbHVlKSA/ICdhcnJheScgOiAnb2JqZWN0JyxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgaWYgKHJlZnMudGFyZ2V0ID09PSAnb3BlbkFwaTMnKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB0eXBlOiBwYXJzZWRUeXBlID09PSAnYmlnaW50JyA/ICdpbnRlZ2VyJyA6IHBhcnNlZFR5cGUsXG4gICAgICAgICAgICBlbnVtOiBbZGVmLnZhbHVlXSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogcGFyc2VkVHlwZSA9PT0gJ2JpZ2ludCcgPyAnaW50ZWdlcicgOiBwYXJzZWRUeXBlLFxuICAgICAgICBjb25zdDogZGVmLnZhbHVlLFxuICAgIH07XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1saXRlcmFsLm1qcy5tYXAiLCJpbXBvcnQgeyBzZXRSZXNwb25zZVZhbHVlQW5kRXJyb3JzIH0gZnJvbSBcIi4uL2Vycm9yTWVzc2FnZXMubWpzXCI7XG5sZXQgZW1vamlSZWdleDtcbi8qKlxuICogR2VuZXJhdGVkIGZyb20gdGhlIHJlZ3VsYXIgZXhwcmVzc2lvbnMgZm91bmQgaGVyZSBhcyBvZiAyMDI0LTA1LTIyOlxuICogaHR0cHM6Ly9naXRodWIuY29tL2NvbGluaGFja3Mvem9kL2Jsb2IvbWFzdGVyL3NyYy90eXBlcy50cy5cbiAqXG4gKiBFeHByZXNzaW9ucyB3aXRoIC9pIGZsYWcgaGF2ZSBiZWVuIGNoYW5nZWQgYWNjb3JkaW5nbHkuXG4gKi9cbmV4cG9ydCBjb25zdCB6b2RQYXR0ZXJucyA9IHtcbiAgICAvKipcbiAgICAgKiBgY2Agd2FzIGNoYW5nZWQgdG8gYFtjQ11gIHRvIHJlcGxpY2F0ZSAvaSBmbGFnXG4gICAgICovXG4gICAgY3VpZDogL15bY0NdW15cXHMtXXs4LH0kLyxcbiAgICBjdWlkMjogL15bMC05YS16XSskLyxcbiAgICB1bGlkOiAvXlswLTlBLUhKS01OUC1UVi1aXXsyNn0kLyxcbiAgICAvKipcbiAgICAgKiBgYS16YCB3YXMgYWRkZWQgdG8gcmVwbGljYXRlIC9pIGZsYWdcbiAgICAgKi9cbiAgICBlbWFpbDogL14oPyFcXC4pKD8hLipcXC5cXC4pKFthLXpBLVowLTlfJytcXC1cXC5dKilbYS16QS1aMC05XystXUAoW2EtekEtWjAtOV1bYS16QS1aMC05XFwtXSpcXC4pK1thLXpBLVpdezIsfSQvLFxuICAgIC8qKlxuICAgICAqIENvbnN0cnVjdGVkIGEgdmFsaWQgVW5pY29kZSBSZWdFeHBcbiAgICAgKlxuICAgICAqIExhemlseSBpbnN0YW50aWF0ZSBzaW5jZSB0aGlzIHR5cGUgb2YgcmVnZXggaXNuJ3Qgc3VwcG9ydGVkXG4gICAgICogaW4gYWxsIGVudnMgKGUuZy4gUmVhY3QgTmF0aXZlKS5cbiAgICAgKlxuICAgICAqIFNlZTpcbiAgICAgKiBodHRwczovL2dpdGh1Yi5jb20vY29saW5oYWNrcy96b2QvaXNzdWVzLzI0MzNcbiAgICAgKiBGaXggaW4gWm9kOlxuICAgICAqIGh0dHBzOi8vZ2l0aHViLmNvbS9jb2xpbmhhY2tzL3pvZC9jb21taXQvOTM0MGZkNTFlNDg1NzZhNzVhZGM5MTliZmY2NWRiYzRhNWQ0Yzk5YlxuICAgICAqL1xuICAgIGVtb2ppOiAoKSA9PiB7XG4gICAgICAgIGlmIChlbW9qaVJlZ2V4ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGVtb2ppUmVnZXggPSBSZWdFeHAoJ14oXFxcXHB7RXh0ZW5kZWRfUGljdG9ncmFwaGljfXxcXFxccHtFbW9qaV9Db21wb25lbnR9KSskJywgJ3UnKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZW1vamlSZWdleDtcbiAgICB9LFxuICAgIC8qKlxuICAgICAqIFVudXNlZFxuICAgICAqL1xuICAgIHV1aWQ6IC9eWzAtOWEtZkEtRl17OH1cXGItWzAtOWEtZkEtRl17NH1cXGItWzAtOWEtZkEtRl17NH1cXGItWzAtOWEtZkEtRl17NH1cXGItWzAtOWEtZkEtRl17MTJ9JC8sXG4gICAgLyoqXG4gICAgICogVW51c2VkXG4gICAgICovXG4gICAgaXB2NDogL14oPzooPzoyNVswLTVdfDJbMC00XVswLTldfDFbMC05XVswLTldfFsxLTldWzAtOV18WzAtOV0pXFwuKXszfSg/OjI1WzAtNV18MlswLTRdWzAtOV18MVswLTldWzAtOV18WzEtOV1bMC05XXxbMC05XSkkLyxcbiAgICAvKipcbiAgICAgKiBVbnVzZWRcbiAgICAgKi9cbiAgICBpcHY2OiAvXigoW2EtZjAtOV17MSw0fTopezd9fDo6KFthLWYwLTldezEsNH06KXswLDZ9fChbYS1mMC05XXsxLDR9Oil7MX06KFthLWYwLTldezEsNH06KXswLDV9fChbYS1mMC05XXsxLDR9Oil7Mn06KFthLWYwLTldezEsNH06KXswLDR9fChbYS1mMC05XXsxLDR9Oil7M306KFthLWYwLTldezEsNH06KXswLDN9fChbYS1mMC05XXsxLDR9Oil7NH06KFthLWYwLTldezEsNH06KXswLDJ9fChbYS1mMC05XXsxLDR9Oil7NX06KFthLWYwLTldezEsNH06KXswLDF9KShbYS1mMC05XXsxLDR9fCgoKDI1WzAtNV0pfCgyWzAtNF1bMC05XSl8KDFbMC05XXsyfSl8KFswLTldezEsMn0pKVxcLil7M30oKDI1WzAtNV0pfCgyWzAtNF1bMC05XSl8KDFbMC05XXsyfSl8KFswLTldezEsMn0pKSkkLyxcbiAgICBiYXNlNjQ6IC9eKFswLTlhLXpBLVorL117NH0pKigoWzAtOWEtekEtWisvXXsyfT09KXwoWzAtOWEtekEtWisvXXszfT0pKT8kLyxcbiAgICBuYW5vaWQ6IC9eW2EtekEtWjAtOV8tXXsyMX0kLyxcbn07XG5leHBvcnQgZnVuY3Rpb24gcGFyc2VTdHJpbmdEZWYoZGVmLCByZWZzKSB7XG4gICAgY29uc3QgcmVzID0ge1xuICAgICAgICB0eXBlOiAnc3RyaW5nJyxcbiAgICB9O1xuICAgIGZ1bmN0aW9uIHByb2Nlc3NQYXR0ZXJuKHZhbHVlKSB7XG4gICAgICAgIHJldHVybiByZWZzLnBhdHRlcm5TdHJhdGVneSA9PT0gJ2VzY2FwZScgPyBlc2NhcGVOb25BbHBoYU51bWVyaWModmFsdWUpIDogdmFsdWU7XG4gICAgfVxuICAgIGlmIChkZWYuY2hlY2tzKSB7XG4gICAgICAgIGZvciAoY29uc3QgY2hlY2sgb2YgZGVmLmNoZWNrcykge1xuICAgICAgICAgICAgc3dpdGNoIChjaGVjay5raW5kKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAnbWluJzpcbiAgICAgICAgICAgICAgICAgICAgc2V0UmVzcG9uc2VWYWx1ZUFuZEVycm9ycyhyZXMsICdtaW5MZW5ndGgnLCB0eXBlb2YgcmVzLm1pbkxlbmd0aCA9PT0gJ251bWJlcicgPyBNYXRoLm1heChyZXMubWluTGVuZ3RoLCBjaGVjay52YWx1ZSkgOiBjaGVjay52YWx1ZSwgY2hlY2subWVzc2FnZSwgcmVmcyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ21heCc6XG4gICAgICAgICAgICAgICAgICAgIHNldFJlc3BvbnNlVmFsdWVBbmRFcnJvcnMocmVzLCAnbWF4TGVuZ3RoJywgdHlwZW9mIHJlcy5tYXhMZW5ndGggPT09ICdudW1iZXInID8gTWF0aC5taW4ocmVzLm1heExlbmd0aCwgY2hlY2sudmFsdWUpIDogY2hlY2sudmFsdWUsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdlbWFpbCc6XG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAocmVmcy5lbWFpbFN0cmF0ZWd5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdmb3JtYXQ6ZW1haWwnOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFkZEZvcm1hdChyZXMsICdlbWFpbCcsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnZm9ybWF0Omlkbi1lbWFpbCc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWRkRm9ybWF0KHJlcywgJ2lkbi1lbWFpbCcsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAncGF0dGVybjp6b2QnOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFkZFBhdHRlcm4ocmVzLCB6b2RQYXR0ZXJucy5lbWFpbCwgY2hlY2subWVzc2FnZSwgcmVmcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAndXJsJzpcbiAgICAgICAgICAgICAgICAgICAgYWRkRm9ybWF0KHJlcywgJ3VyaScsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICd1dWlkJzpcbiAgICAgICAgICAgICAgICAgICAgYWRkRm9ybWF0KHJlcywgJ3V1aWQnLCBjaGVjay5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAncmVnZXgnOlxuICAgICAgICAgICAgICAgICAgICBhZGRQYXR0ZXJuKHJlcywgY2hlY2sucmVnZXgsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdjdWlkJzpcbiAgICAgICAgICAgICAgICAgICAgYWRkUGF0dGVybihyZXMsIHpvZFBhdHRlcm5zLmN1aWQsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdjdWlkMic6XG4gICAgICAgICAgICAgICAgICAgIGFkZFBhdHRlcm4ocmVzLCB6b2RQYXR0ZXJucy5jdWlkMiwgY2hlY2subWVzc2FnZSwgcmVmcyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ3N0YXJ0c1dpdGgnOlxuICAgICAgICAgICAgICAgICAgICBhZGRQYXR0ZXJuKHJlcywgUmVnRXhwKGBeJHtwcm9jZXNzUGF0dGVybihjaGVjay52YWx1ZSl9YCksIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdlbmRzV2l0aCc6XG4gICAgICAgICAgICAgICAgICAgIGFkZFBhdHRlcm4ocmVzLCBSZWdFeHAoYCR7cHJvY2Vzc1BhdHRlcm4oY2hlY2sudmFsdWUpfSRgKSwgY2hlY2subWVzc2FnZSwgcmVmcyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2RhdGV0aW1lJzpcbiAgICAgICAgICAgICAgICAgICAgYWRkRm9ybWF0KHJlcywgJ2RhdGUtdGltZScsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdkYXRlJzpcbiAgICAgICAgICAgICAgICAgICAgYWRkRm9ybWF0KHJlcywgJ2RhdGUnLCBjaGVjay5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAndGltZSc6XG4gICAgICAgICAgICAgICAgICAgIGFkZEZvcm1hdChyZXMsICd0aW1lJywgY2hlY2subWVzc2FnZSwgcmVmcyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2R1cmF0aW9uJzpcbiAgICAgICAgICAgICAgICAgICAgYWRkRm9ybWF0KHJlcywgJ2R1cmF0aW9uJywgY2hlY2subWVzc2FnZSwgcmVmcyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2xlbmd0aCc6XG4gICAgICAgICAgICAgICAgICAgIHNldFJlc3BvbnNlVmFsdWVBbmRFcnJvcnMocmVzLCAnbWluTGVuZ3RoJywgdHlwZW9mIHJlcy5taW5MZW5ndGggPT09ICdudW1iZXInID8gTWF0aC5tYXgocmVzLm1pbkxlbmd0aCwgY2hlY2sudmFsdWUpIDogY2hlY2sudmFsdWUsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgICAgICBzZXRSZXNwb25zZVZhbHVlQW5kRXJyb3JzKHJlcywgJ21heExlbmd0aCcsIHR5cGVvZiByZXMubWF4TGVuZ3RoID09PSAnbnVtYmVyJyA/IE1hdGgubWluKHJlcy5tYXhMZW5ndGgsIGNoZWNrLnZhbHVlKSA6IGNoZWNrLnZhbHVlLCBjaGVjay5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnaW5jbHVkZXMnOiB7XG4gICAgICAgICAgICAgICAgICAgIGFkZFBhdHRlcm4ocmVzLCBSZWdFeHAocHJvY2Vzc1BhdHRlcm4oY2hlY2sudmFsdWUpKSwgY2hlY2subWVzc2FnZSwgcmVmcyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXNlICdpcCc6IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNoZWNrLnZlcnNpb24gIT09ICd2NicpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFkZEZvcm1hdChyZXMsICdpcHY0JywgY2hlY2subWVzc2FnZSwgcmVmcyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKGNoZWNrLnZlcnNpb24gIT09ICd2NCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFkZEZvcm1hdChyZXMsICdpcHY2JywgY2hlY2subWVzc2FnZSwgcmVmcyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhc2UgJ2Vtb2ppJzpcbiAgICAgICAgICAgICAgICAgICAgYWRkUGF0dGVybihyZXMsIHpvZFBhdHRlcm5zLmVtb2ppLCBjaGVjay5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAndWxpZCc6IHtcbiAgICAgICAgICAgICAgICAgICAgYWRkUGF0dGVybihyZXMsIHpvZFBhdHRlcm5zLnVsaWQsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2FzZSAnYmFzZTY0Jzoge1xuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKHJlZnMuYmFzZTY0U3RyYXRlZ3kpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ2Zvcm1hdDpiaW5hcnknOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWRkRm9ybWF0KHJlcywgJ2JpbmFyeScsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnY29udGVudEVuY29kaW5nOmJhc2U2NCc6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRSZXNwb25zZVZhbHVlQW5kRXJyb3JzKHJlcywgJ2NvbnRlbnRFbmNvZGluZycsICdiYXNlNjQnLCBjaGVjay5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ3BhdHRlcm46em9kJzoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFkZFBhdHRlcm4ocmVzLCB6b2RQYXR0ZXJucy5iYXNlNjQsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXNlICduYW5vaWQnOiB7XG4gICAgICAgICAgICAgICAgICAgIGFkZFBhdHRlcm4ocmVzLCB6b2RQYXR0ZXJucy5uYW5vaWQsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXNlICd0b0xvd2VyQ2FzZSc6XG4gICAgICAgICAgICAgICAgY2FzZSAndG9VcHBlckNhc2UnOlxuICAgICAgICAgICAgICAgIGNhc2UgJ3RyaW0nOlxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAoKF8pID0+IHsgfSkoY2hlY2spO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiByZXM7XG59XG5jb25zdCBlc2NhcGVOb25BbHBoYU51bWVyaWMgPSAodmFsdWUpID0+IEFycmF5LmZyb20odmFsdWUpXG4gICAgLm1hcCgoYykgPT4gKC9bYS16QS1aMC05XS8udGVzdChjKSA/IGMgOiBgXFxcXCR7Y31gKSlcbiAgICAuam9pbignJyk7XG5jb25zdCBhZGRGb3JtYXQgPSAoc2NoZW1hLCB2YWx1ZSwgbWVzc2FnZSwgcmVmcykgPT4ge1xuICAgIGlmIChzY2hlbWEuZm9ybWF0IHx8IHNjaGVtYS5hbnlPZj8uc29tZSgoeCkgPT4geC5mb3JtYXQpKSB7XG4gICAgICAgIGlmICghc2NoZW1hLmFueU9mKSB7XG4gICAgICAgICAgICBzY2hlbWEuYW55T2YgPSBbXTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc2NoZW1hLmZvcm1hdCkge1xuICAgICAgICAgICAgc2NoZW1hLmFueU9mLnB1c2goe1xuICAgICAgICAgICAgICAgIGZvcm1hdDogc2NoZW1hLmZvcm1hdCxcbiAgICAgICAgICAgICAgICAuLi4oc2NoZW1hLmVycm9yTWVzc2FnZSAmJlxuICAgICAgICAgICAgICAgICAgICByZWZzLmVycm9yTWVzc2FnZXMgJiYge1xuICAgICAgICAgICAgICAgICAgICBlcnJvck1lc3NhZ2U6IHsgZm9ybWF0OiBzY2hlbWEuZXJyb3JNZXNzYWdlLmZvcm1hdCB9LFxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBkZWxldGUgc2NoZW1hLmZvcm1hdDtcbiAgICAgICAgICAgIGlmIChzY2hlbWEuZXJyb3JNZXNzYWdlKSB7XG4gICAgICAgICAgICAgICAgZGVsZXRlIHNjaGVtYS5lcnJvck1lc3NhZ2UuZm9ybWF0O1xuICAgICAgICAgICAgICAgIGlmIChPYmplY3Qua2V5cyhzY2hlbWEuZXJyb3JNZXNzYWdlKS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHNjaGVtYS5lcnJvck1lc3NhZ2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHNjaGVtYS5hbnlPZi5wdXNoKHtcbiAgICAgICAgICAgIGZvcm1hdDogdmFsdWUsXG4gICAgICAgICAgICAuLi4obWVzc2FnZSAmJiByZWZzLmVycm9yTWVzc2FnZXMgJiYgeyBlcnJvck1lc3NhZ2U6IHsgZm9ybWF0OiBtZXNzYWdlIH0gfSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgc2V0UmVzcG9uc2VWYWx1ZUFuZEVycm9ycyhzY2hlbWEsICdmb3JtYXQnLCB2YWx1ZSwgbWVzc2FnZSwgcmVmcyk7XG4gICAgfVxufTtcbmNvbnN0IGFkZFBhdHRlcm4gPSAoc2NoZW1hLCByZWdleCwgbWVzc2FnZSwgcmVmcykgPT4ge1xuICAgIGlmIChzY2hlbWEucGF0dGVybiB8fCBzY2hlbWEuYWxsT2Y/LnNvbWUoKHgpID0+IHgucGF0dGVybikpIHtcbiAgICAgICAgaWYgKCFzY2hlbWEuYWxsT2YpIHtcbiAgICAgICAgICAgIHNjaGVtYS5hbGxPZiA9IFtdO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzY2hlbWEucGF0dGVybikge1xuICAgICAgICAgICAgc2NoZW1hLmFsbE9mLnB1c2goe1xuICAgICAgICAgICAgICAgIHBhdHRlcm46IHNjaGVtYS5wYXR0ZXJuLFxuICAgICAgICAgICAgICAgIC4uLihzY2hlbWEuZXJyb3JNZXNzYWdlICYmXG4gICAgICAgICAgICAgICAgICAgIHJlZnMuZXJyb3JNZXNzYWdlcyAmJiB7XG4gICAgICAgICAgICAgICAgICAgIGVycm9yTWVzc2FnZTogeyBwYXR0ZXJuOiBzY2hlbWEuZXJyb3JNZXNzYWdlLnBhdHRlcm4gfSxcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgZGVsZXRlIHNjaGVtYS5wYXR0ZXJuO1xuICAgICAgICAgICAgaWYgKHNjaGVtYS5lcnJvck1lc3NhZ2UpIHtcbiAgICAgICAgICAgICAgICBkZWxldGUgc2NoZW1hLmVycm9yTWVzc2FnZS5wYXR0ZXJuO1xuICAgICAgICAgICAgICAgIGlmIChPYmplY3Qua2V5cyhzY2hlbWEuZXJyb3JNZXNzYWdlKS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHNjaGVtYS5lcnJvck1lc3NhZ2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHNjaGVtYS5hbGxPZi5wdXNoKHtcbiAgICAgICAgICAgIHBhdHRlcm46IHByb2Nlc3NSZWdFeHAocmVnZXgsIHJlZnMpLFxuICAgICAgICAgICAgLi4uKG1lc3NhZ2UgJiYgcmVmcy5lcnJvck1lc3NhZ2VzICYmIHsgZXJyb3JNZXNzYWdlOiB7IHBhdHRlcm46IG1lc3NhZ2UgfSB9KSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBzZXRSZXNwb25zZVZhbHVlQW5kRXJyb3JzKHNjaGVtYSwgJ3BhdHRlcm4nLCBwcm9jZXNzUmVnRXhwKHJlZ2V4LCByZWZzKSwgbWVzc2FnZSwgcmVmcyk7XG4gICAgfVxufTtcbi8vIE11dGF0ZSB6LnN0cmluZy5yZWdleCgpIGluIGEgYmVzdCBhdHRlbXB0IHRvIGFjY29tbW9kYXRlIGZvciByZWdleCBmbGFncyB3aGVuIGFwcGx5UmVnZXhGbGFncyBpcyB0cnVlXG5jb25zdCBwcm9jZXNzUmVnRXhwID0gKHJlZ2V4T3JGdW5jdGlvbiwgcmVmcykgPT4ge1xuICAgIGNvbnN0IHJlZ2V4ID0gdHlwZW9mIHJlZ2V4T3JGdW5jdGlvbiA9PT0gJ2Z1bmN0aW9uJyA/IHJlZ2V4T3JGdW5jdGlvbigpIDogcmVnZXhPckZ1bmN0aW9uO1xuICAgIGlmICghcmVmcy5hcHBseVJlZ2V4RmxhZ3MgfHwgIXJlZ2V4LmZsYWdzKVxuICAgICAgICByZXR1cm4gcmVnZXguc291cmNlO1xuICAgIC8vIEN1cnJlbnRseSBoYW5kbGVkIGZsYWdzXG4gICAgY29uc3QgZmxhZ3MgPSB7XG4gICAgICAgIGk6IHJlZ2V4LmZsYWdzLmluY2x1ZGVzKCdpJyksIC8vIENhc2UtaW5zZW5zaXRpdmVcbiAgICAgICAgbTogcmVnZXguZmxhZ3MuaW5jbHVkZXMoJ20nKSwgLy8gYF5gIGFuZCBgJGAgbWF0Y2hlcyBhZGphY2VudCB0byBuZXdsaW5lIGNoYXJhY3RlcnNcbiAgICAgICAgczogcmVnZXguZmxhZ3MuaW5jbHVkZXMoJ3MnKSwgLy8gYC5gIG1hdGNoZXMgbmV3bGluZXNcbiAgICB9O1xuICAgIC8vIFRoZSBnZW5lcmFsIHByaW5jaXBsZSBoZXJlIGlzIHRvIHN0ZXAgdGhyb3VnaCBlYWNoIGNoYXJhY3Rlciwgb25lIGF0IGEgdGltZSwgYXBwbHlpbmcgbXV0YXRpb25zIGFzIGZsYWdzIHJlcXVpcmUuIFdlIGtlZXAgdHJhY2sgd2hlbiB0aGUgY3VycmVudCBjaGFyYWN0ZXIgaXMgZXNjYXBlZCwgYW5kIHdoZW4gaXQncyBpbnNpZGUgYSBncm91cCAvbGlrZSBbdGhpc10vIG9yIChhbHNvKSBhIHJhbmdlIGxpa2UgL1thLXpdLy4gVGhlIGZvbGxvd2luZyBpcyBmYWlybHkgYnJpdHRsZSBpbXBlcmF0aXZlIGNvZGU7IGVkaXQgYXQgeW91ciBwZXJpbCFcbiAgICBjb25zdCBzb3VyY2UgPSBmbGFncy5pID8gcmVnZXguc291cmNlLnRvTG93ZXJDYXNlKCkgOiByZWdleC5zb3VyY2U7XG4gICAgbGV0IHBhdHRlcm4gPSAnJztcbiAgICBsZXQgaXNFc2NhcGVkID0gZmFsc2U7XG4gICAgbGV0IGluQ2hhckdyb3VwID0gZmFsc2U7XG4gICAgbGV0IGluQ2hhclJhbmdlID0gZmFsc2U7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzb3VyY2UubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaWYgKGlzRXNjYXBlZCkge1xuICAgICAgICAgICAgcGF0dGVybiArPSBzb3VyY2VbaV07XG4gICAgICAgICAgICBpc0VzY2FwZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChmbGFncy5pKSB7XG4gICAgICAgICAgICBpZiAoaW5DaGFyR3JvdXApIHtcbiAgICAgICAgICAgICAgICBpZiAoc291cmNlW2ldLm1hdGNoKC9bYS16XS8pKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpbkNoYXJSYW5nZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcGF0dGVybiArPSBzb3VyY2VbaV07XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXR0ZXJuICs9IGAke3NvdXJjZVtpIC0gMl19LSR7c291cmNlW2ldfWAudG9VcHBlckNhc2UoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGluQ2hhclJhbmdlID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoc291cmNlW2kgKyAxXSA9PT0gJy0nICYmIHNvdXJjZVtpICsgMl0/Lm1hdGNoKC9bYS16XS8pKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXR0ZXJuICs9IHNvdXJjZVtpXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGluQ2hhclJhbmdlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhdHRlcm4gKz0gYCR7c291cmNlW2ldfSR7c291cmNlW2ldLnRvVXBwZXJDYXNlKCl9YDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChzb3VyY2VbaV0ubWF0Y2goL1thLXpdLykpIHtcbiAgICAgICAgICAgICAgICBwYXR0ZXJuICs9IGBbJHtzb3VyY2VbaV19JHtzb3VyY2VbaV0udG9VcHBlckNhc2UoKX1dYDtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoZmxhZ3MubSkge1xuICAgICAgICAgICAgaWYgKHNvdXJjZVtpXSA9PT0gJ14nKSB7XG4gICAgICAgICAgICAgICAgcGF0dGVybiArPSBgKF58KD88PVtcXHJcXG5dKSlgO1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoc291cmNlW2ldID09PSAnJCcpIHtcbiAgICAgICAgICAgICAgICBwYXR0ZXJuICs9IGAoJHwoPz1bXFxyXFxuXSkpYDtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoZmxhZ3MucyAmJiBzb3VyY2VbaV0gPT09ICcuJykge1xuICAgICAgICAgICAgcGF0dGVybiArPSBpbkNoYXJHcm91cCA/IGAke3NvdXJjZVtpXX1cXHJcXG5gIDogYFske3NvdXJjZVtpXX1cXHJcXG5dYDtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIHBhdHRlcm4gKz0gc291cmNlW2ldO1xuICAgICAgICBpZiAoc291cmNlW2ldID09PSAnXFxcXCcpIHtcbiAgICAgICAgICAgIGlzRXNjYXBlZCA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoaW5DaGFyR3JvdXAgJiYgc291cmNlW2ldID09PSAnXScpIHtcbiAgICAgICAgICAgIGluQ2hhckdyb3VwID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoIWluQ2hhckdyb3VwICYmIHNvdXJjZVtpXSA9PT0gJ1snKSB7XG4gICAgICAgICAgICBpbkNoYXJHcm91cCA9IHRydWU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgcmVnZXhUZXN0ID0gbmV3IFJlZ0V4cChwYXR0ZXJuKTtcbiAgICB9XG4gICAgY2F0Y2gge1xuICAgICAgICBjb25zb2xlLndhcm4oYENvdWxkIG5vdCBjb252ZXJ0IHJlZ2V4IHBhdHRlcm4gYXQgJHtyZWZzLmN1cnJlbnRQYXRoLmpvaW4oJy8nKX0gdG8gYSBmbGFnLWluZGVwZW5kZW50IGZvcm0hIEZhbGxpbmcgYmFjayB0byB0aGUgZmxhZy1pZ25vcmFudCBzb3VyY2VgKTtcbiAgICAgICAgcmV0dXJuIHJlZ2V4LnNvdXJjZTtcbiAgICB9XG4gICAgcmV0dXJuIHBhdHRlcm47XG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c3RyaW5nLm1qcy5tYXAiLCJpbXBvcnQgeyBab2RGaXJzdFBhcnR5VHlwZUtpbmQgfSBmcm9tICd6b2QvdjMnO1xuaW1wb3J0IHsgcGFyc2VEZWYgfSBmcm9tIFwiLi4vcGFyc2VEZWYubWpzXCI7XG5pbXBvcnQgeyBwYXJzZVN0cmluZ0RlZiB9IGZyb20gXCIuL3N0cmluZy5tanNcIjtcbmV4cG9ydCBmdW5jdGlvbiBwYXJzZVJlY29yZERlZihkZWYsIHJlZnMpIHtcbiAgICBpZiAocmVmcy50YXJnZXQgPT09ICdvcGVuQXBpMycgJiYgZGVmLmtleVR5cGU/Ll9kZWYudHlwZU5hbWUgPT09IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RFbnVtKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB0eXBlOiAnb2JqZWN0JyxcbiAgICAgICAgICAgIHJlcXVpcmVkOiBkZWYua2V5VHlwZS5fZGVmLnZhbHVlcyxcbiAgICAgICAgICAgIHByb3BlcnRpZXM6IGRlZi5rZXlUeXBlLl9kZWYudmFsdWVzLnJlZHVjZSgoYWNjLCBrZXkpID0+ICh7XG4gICAgICAgICAgICAgICAgLi4uYWNjLFxuICAgICAgICAgICAgICAgIFtrZXldOiBwYXJzZURlZihkZWYudmFsdWVUeXBlLl9kZWYsIHtcbiAgICAgICAgICAgICAgICAgICAgLi4ucmVmcyxcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudFBhdGg6IFsuLi5yZWZzLmN1cnJlbnRQYXRoLCAncHJvcGVydGllcycsIGtleV0sXG4gICAgICAgICAgICAgICAgfSkgPz8ge30sXG4gICAgICAgICAgICB9KSwge30pLFxuICAgICAgICAgICAgYWRkaXRpb25hbFByb3BlcnRpZXM6IGZhbHNlLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBjb25zdCBzY2hlbWEgPSB7XG4gICAgICAgIHR5cGU6ICdvYmplY3QnLFxuICAgICAgICBhZGRpdGlvbmFsUHJvcGVydGllczogcGFyc2VEZWYoZGVmLnZhbHVlVHlwZS5fZGVmLCB7XG4gICAgICAgICAgICAuLi5yZWZzLFxuICAgICAgICAgICAgY3VycmVudFBhdGg6IFsuLi5yZWZzLmN1cnJlbnRQYXRoLCAnYWRkaXRpb25hbFByb3BlcnRpZXMnXSxcbiAgICAgICAgfSkgPz8ge30sXG4gICAgfTtcbiAgICBpZiAocmVmcy50YXJnZXQgPT09ICdvcGVuQXBpMycpIHtcbiAgICAgICAgcmV0dXJuIHNjaGVtYTtcbiAgICB9XG4gICAgaWYgKGRlZi5rZXlUeXBlPy5fZGVmLnR5cGVOYW1lID09PSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kU3RyaW5nICYmIGRlZi5rZXlUeXBlLl9kZWYuY2hlY2tzPy5sZW5ndGgpIHtcbiAgICAgICAgY29uc3Qga2V5VHlwZSA9IE9iamVjdC5lbnRyaWVzKHBhcnNlU3RyaW5nRGVmKGRlZi5rZXlUeXBlLl9kZWYsIHJlZnMpKS5yZWR1Y2UoKGFjYywgW2tleSwgdmFsdWVdKSA9PiAoa2V5ID09PSAndHlwZScgPyBhY2MgOiB7IC4uLmFjYywgW2tleV06IHZhbHVlIH0pLCB7fSk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAuLi5zY2hlbWEsXG4gICAgICAgICAgICBwcm9wZXJ0eU5hbWVzOiBrZXlUeXBlLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBlbHNlIGlmIChkZWYua2V5VHlwZT8uX2RlZi50eXBlTmFtZSA9PT0gWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZEVudW0pIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIC4uLnNjaGVtYSxcbiAgICAgICAgICAgIHByb3BlcnR5TmFtZXM6IHtcbiAgICAgICAgICAgICAgICBlbnVtOiBkZWYua2V5VHlwZS5fZGVmLnZhbHVlcyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiBzY2hlbWE7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1yZWNvcmQubWpzLm1hcCIsImltcG9ydCB7IHBhcnNlRGVmIH0gZnJvbSBcIi4uL3BhcnNlRGVmLm1qc1wiO1xuaW1wb3J0IHsgcGFyc2VSZWNvcmREZWYgfSBmcm9tIFwiLi9yZWNvcmQubWpzXCI7XG5leHBvcnQgZnVuY3Rpb24gcGFyc2VNYXBEZWYoZGVmLCByZWZzKSB7XG4gICAgaWYgKHJlZnMubWFwU3RyYXRlZ3kgPT09ICdyZWNvcmQnKSB7XG4gICAgICAgIHJldHVybiBwYXJzZVJlY29yZERlZihkZWYsIHJlZnMpO1xuICAgIH1cbiAgICBjb25zdCBrZXlzID0gcGFyc2VEZWYoZGVmLmtleVR5cGUuX2RlZiwge1xuICAgICAgICAuLi5yZWZzLFxuICAgICAgICBjdXJyZW50UGF0aDogWy4uLnJlZnMuY3VycmVudFBhdGgsICdpdGVtcycsICdpdGVtcycsICcwJ10sXG4gICAgfSkgfHwge307XG4gICAgY29uc3QgdmFsdWVzID0gcGFyc2VEZWYoZGVmLnZhbHVlVHlwZS5fZGVmLCB7XG4gICAgICAgIC4uLnJlZnMsXG4gICAgICAgIGN1cnJlbnRQYXRoOiBbLi4ucmVmcy5jdXJyZW50UGF0aCwgJ2l0ZW1zJywgJ2l0ZW1zJywgJzEnXSxcbiAgICB9KSB8fCB7fTtcbiAgICByZXR1cm4ge1xuICAgICAgICB0eXBlOiAnYXJyYXknLFxuICAgICAgICBtYXhJdGVtczogMTI1LFxuICAgICAgICBpdGVtczoge1xuICAgICAgICAgICAgdHlwZTogJ2FycmF5JyxcbiAgICAgICAgICAgIGl0ZW1zOiBba2V5cywgdmFsdWVzXSxcbiAgICAgICAgICAgIG1pbkl0ZW1zOiAyLFxuICAgICAgICAgICAgbWF4SXRlbXM6IDIsXG4gICAgICAgIH0sXG4gICAgfTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW1hcC5tanMubWFwIiwiZXhwb3J0IGZ1bmN0aW9uIHBhcnNlTmF0aXZlRW51bURlZihkZWYpIHtcbiAgICBjb25zdCBvYmplY3QgPSBkZWYudmFsdWVzO1xuICAgIGNvbnN0IGFjdHVhbEtleXMgPSBPYmplY3Qua2V5cyhkZWYudmFsdWVzKS5maWx0ZXIoKGtleSkgPT4ge1xuICAgICAgICByZXR1cm4gdHlwZW9mIG9iamVjdFtvYmplY3Rba2V5XV0gIT09ICdudW1iZXInO1xuICAgIH0pO1xuICAgIGNvbnN0IGFjdHVhbFZhbHVlcyA9IGFjdHVhbEtleXMubWFwKChrZXkpID0+IG9iamVjdFtrZXldKTtcbiAgICBjb25zdCBwYXJzZWRUeXBlcyA9IEFycmF5LmZyb20obmV3IFNldChhY3R1YWxWYWx1ZXMubWFwKCh2YWx1ZXMpID0+IHR5cGVvZiB2YWx1ZXMpKSk7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogcGFyc2VkVHlwZXMubGVuZ3RoID09PSAxID9cbiAgICAgICAgICAgIHBhcnNlZFR5cGVzWzBdID09PSAnc3RyaW5nJyA/XG4gICAgICAgICAgICAgICAgJ3N0cmluZydcbiAgICAgICAgICAgICAgICA6ICdudW1iZXInXG4gICAgICAgICAgICA6IFsnc3RyaW5nJywgJ251bWJlciddLFxuICAgICAgICBlbnVtOiBhY3R1YWxWYWx1ZXMsXG4gICAgfTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW5hdGl2ZUVudW0ubWpzLm1hcCIsImV4cG9ydCBmdW5jdGlvbiBwYXJzZU5ldmVyRGVmKCkge1xuICAgIHJldHVybiB7XG4gICAgICAgIG5vdDoge30sXG4gICAgfTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW5ldmVyLm1qcy5tYXAiLCJleHBvcnQgZnVuY3Rpb24gcGFyc2VOdWxsRGVmKHJlZnMpIHtcbiAgICByZXR1cm4gcmVmcy50YXJnZXQgPT09ICdvcGVuQXBpMycgP1xuICAgICAgICB7XG4gICAgICAgICAgICBlbnVtOiBbJ251bGwnXSxcbiAgICAgICAgICAgIG51bGxhYmxlOiB0cnVlLFxuICAgICAgICB9XG4gICAgICAgIDoge1xuICAgICAgICAgICAgdHlwZTogJ251bGwnLFxuICAgICAgICB9O1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bnVsbC5tanMubWFwIiwiaW1wb3J0IHsgcGFyc2VEZWYgfSBmcm9tIFwiLi4vcGFyc2VEZWYubWpzXCI7XG5leHBvcnQgY29uc3QgcHJpbWl0aXZlTWFwcGluZ3MgPSB7XG4gICAgWm9kU3RyaW5nOiAnc3RyaW5nJyxcbiAgICBab2ROdW1iZXI6ICdudW1iZXInLFxuICAgIFpvZEJpZ0ludDogJ2ludGVnZXInLFxuICAgIFpvZEJvb2xlYW46ICdib29sZWFuJyxcbiAgICBab2ROdWxsOiAnbnVsbCcsXG59O1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlVW5pb25EZWYoZGVmLCByZWZzKSB7XG4gICAgaWYgKHJlZnMudGFyZ2V0ID09PSAnb3BlbkFwaTMnKVxuICAgICAgICByZXR1cm4gYXNBbnlPZihkZWYsIHJlZnMpO1xuICAgIGNvbnN0IG9wdGlvbnMgPSBkZWYub3B0aW9ucyBpbnN0YW5jZW9mIE1hcCA/IEFycmF5LmZyb20oZGVmLm9wdGlvbnMudmFsdWVzKCkpIDogZGVmLm9wdGlvbnM7XG4gICAgLy8gVGhpcyBibG9ja3MgdHJpZXMgdG8gbG9vayBhaGVhZCBhIGJpdCB0byBwcm9kdWNlIG5pY2VyIGxvb2tpbmcgc2NoZW1hcyB3aXRoIHR5cGUgYXJyYXkgaW5zdGVhZCBvZiBhbnlPZi5cbiAgICBpZiAob3B0aW9ucy5ldmVyeSgoeCkgPT4geC5fZGVmLnR5cGVOYW1lIGluIHByaW1pdGl2ZU1hcHBpbmdzICYmICgheC5fZGVmLmNoZWNrcyB8fCAheC5fZGVmLmNoZWNrcy5sZW5ndGgpKSkge1xuICAgICAgICAvLyBhbGwgdHlwZXMgaW4gdW5pb24gYXJlIHByaW1pdGl2ZSBhbmQgbGFjayBjaGVja3MsIHNvIG1pZ2h0IGFzIHdlbGwgc3F1YXNoIGludG8ge3R5cGU6IFsuLi5dfVxuICAgICAgICBjb25zdCB0eXBlcyA9IG9wdGlvbnMucmVkdWNlKCh0eXBlcywgeCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgdHlwZSA9IHByaW1pdGl2ZU1hcHBpbmdzW3guX2RlZi50eXBlTmFtZV07IC8vQ2FuIGJlIHNhZmVseSBjYXN0ZWQgZHVlIHRvIHJvdyA0M1xuICAgICAgICAgICAgcmV0dXJuIHR5cGUgJiYgIXR5cGVzLmluY2x1ZGVzKHR5cGUpID8gWy4uLnR5cGVzLCB0eXBlXSA6IHR5cGVzO1xuICAgICAgICB9LCBbXSk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB0eXBlOiB0eXBlcy5sZW5ndGggPiAxID8gdHlwZXMgOiB0eXBlc1swXSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgZWxzZSBpZiAob3B0aW9ucy5ldmVyeSgoeCkgPT4geC5fZGVmLnR5cGVOYW1lID09PSAnWm9kTGl0ZXJhbCcgJiYgIXguZGVzY3JpcHRpb24pKSB7XG4gICAgICAgIC8vIGFsbCBvcHRpb25zIGxpdGVyYWxzXG4gICAgICAgIGNvbnN0IHR5cGVzID0gb3B0aW9ucy5yZWR1Y2UoKGFjYywgeCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgdHlwZSA9IHR5cGVvZiB4Ll9kZWYudmFsdWU7XG4gICAgICAgICAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgICAgICAgICAgICBjYXNlICdzdHJpbmcnOlxuICAgICAgICAgICAgICAgIGNhc2UgJ251bWJlcic6XG4gICAgICAgICAgICAgICAgY2FzZSAnYm9vbGVhbic6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbLi4uYWNjLCB0eXBlXTtcbiAgICAgICAgICAgICAgICBjYXNlICdiaWdpbnQnOlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWy4uLmFjYywgJ2ludGVnZXInXTtcbiAgICAgICAgICAgICAgICBjYXNlICdvYmplY3QnOlxuICAgICAgICAgICAgICAgICAgICBpZiAoeC5fZGVmLnZhbHVlID09PSBudWxsKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsuLi5hY2MsICdudWxsJ107XG4gICAgICAgICAgICAgICAgY2FzZSAnc3ltYm9sJzpcbiAgICAgICAgICAgICAgICBjYXNlICd1bmRlZmluZWQnOlxuICAgICAgICAgICAgICAgIGNhc2UgJ2Z1bmN0aW9uJzpcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYWNjO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LCBbXSk7XG4gICAgICAgIGlmICh0eXBlcy5sZW5ndGggPT09IG9wdGlvbnMubGVuZ3RoKSB7XG4gICAgICAgICAgICAvLyBhbGwgdGhlIGxpdGVyYWxzIGFyZSBwcmltaXRpdmUsIGFzIGZhciBhcyBudWxsIGNhbiBiZSBjb25zaWRlcmVkIHByaW1pdGl2ZVxuICAgICAgICAgICAgY29uc3QgdW5pcXVlVHlwZXMgPSB0eXBlcy5maWx0ZXIoKHgsIGksIGEpID0+IGEuaW5kZXhPZih4KSA9PT0gaSk7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHR5cGU6IHVuaXF1ZVR5cGVzLmxlbmd0aCA+IDEgPyB1bmlxdWVUeXBlcyA6IHVuaXF1ZVR5cGVzWzBdLFxuICAgICAgICAgICAgICAgIGVudW06IG9wdGlvbnMucmVkdWNlKChhY2MsIHgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGFjYy5pbmNsdWRlcyh4Ll9kZWYudmFsdWUpID8gYWNjIDogWy4uLmFjYywgeC5fZGVmLnZhbHVlXTtcbiAgICAgICAgICAgICAgICB9LCBbXSksXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2UgaWYgKG9wdGlvbnMuZXZlcnkoKHgpID0+IHguX2RlZi50eXBlTmFtZSA9PT0gJ1pvZEVudW0nKSkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdHlwZTogJ3N0cmluZycsXG4gICAgICAgICAgICBlbnVtOiBvcHRpb25zLnJlZHVjZSgoYWNjLCB4KSA9PiBbLi4uYWNjLCAuLi54Ll9kZWYudmFsdWVzLmZpbHRlcigoeCkgPT4gIWFjYy5pbmNsdWRlcyh4KSldLCBbXSksXG4gICAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiBhc0FueU9mKGRlZiwgcmVmcyk7XG59XG5jb25zdCBhc0FueU9mID0gKGRlZiwgcmVmcykgPT4ge1xuICAgIGNvbnN0IGFueU9mID0gKGRlZi5vcHRpb25zIGluc3RhbmNlb2YgTWFwID8gQXJyYXkuZnJvbShkZWYub3B0aW9ucy52YWx1ZXMoKSkgOiBkZWYub3B0aW9ucylcbiAgICAgICAgLm1hcCgoeCwgaSkgPT4gcGFyc2VEZWYoeC5fZGVmLCB7XG4gICAgICAgIC4uLnJlZnMsXG4gICAgICAgIGN1cnJlbnRQYXRoOiBbLi4ucmVmcy5jdXJyZW50UGF0aCwgJ2FueU9mJywgYCR7aX1gXSxcbiAgICB9KSlcbiAgICAgICAgLmZpbHRlcigoeCkgPT4gISF4ICYmICghcmVmcy5zdHJpY3RVbmlvbnMgfHwgKHR5cGVvZiB4ID09PSAnb2JqZWN0JyAmJiBPYmplY3Qua2V5cyh4KS5sZW5ndGggPiAwKSkpO1xuICAgIHJldHVybiBhbnlPZi5sZW5ndGggPyB7IGFueU9mIH0gOiB1bmRlZmluZWQ7XG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dW5pb24ubWpzLm1hcCIsImltcG9ydCB7IHBhcnNlRGVmIH0gZnJvbSBcIi4uL3BhcnNlRGVmLm1qc1wiO1xuaW1wb3J0IHsgcHJpbWl0aXZlTWFwcGluZ3MgfSBmcm9tIFwiLi91bmlvbi5tanNcIjtcbmV4cG9ydCBmdW5jdGlvbiBwYXJzZU51bGxhYmxlRGVmKGRlZiwgcmVmcykge1xuICAgIGlmIChbJ1pvZFN0cmluZycsICdab2ROdW1iZXInLCAnWm9kQmlnSW50JywgJ1pvZEJvb2xlYW4nLCAnWm9kTnVsbCddLmluY2x1ZGVzKGRlZi5pbm5lclR5cGUuX2RlZi50eXBlTmFtZSkgJiZcbiAgICAgICAgKCFkZWYuaW5uZXJUeXBlLl9kZWYuY2hlY2tzIHx8ICFkZWYuaW5uZXJUeXBlLl9kZWYuY2hlY2tzLmxlbmd0aCkpIHtcbiAgICAgICAgaWYgKHJlZnMudGFyZ2V0ID09PSAnb3BlbkFwaTMnIHx8IHJlZnMubnVsbGFibGVTdHJhdGVneSA9PT0gJ3Byb3BlcnR5Jykge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICB0eXBlOiBwcmltaXRpdmVNYXBwaW5nc1tkZWYuaW5uZXJUeXBlLl9kZWYudHlwZU5hbWVdLFxuICAgICAgICAgICAgICAgIG51bGxhYmxlOiB0cnVlLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdHlwZTogW3ByaW1pdGl2ZU1hcHBpbmdzW2RlZi5pbm5lclR5cGUuX2RlZi50eXBlTmFtZV0sICdudWxsJ10sXG4gICAgICAgIH07XG4gICAgfVxuICAgIGlmIChyZWZzLnRhcmdldCA9PT0gJ29wZW5BcGkzJykge1xuICAgICAgICBjb25zdCBiYXNlID0gcGFyc2VEZWYoZGVmLmlubmVyVHlwZS5fZGVmLCB7XG4gICAgICAgICAgICAuLi5yZWZzLFxuICAgICAgICAgICAgY3VycmVudFBhdGg6IFsuLi5yZWZzLmN1cnJlbnRQYXRoXSxcbiAgICAgICAgfSk7XG4gICAgICAgIGlmIChiYXNlICYmICckcmVmJyBpbiBiYXNlKVxuICAgICAgICAgICAgcmV0dXJuIHsgYWxsT2Y6IFtiYXNlXSwgbnVsbGFibGU6IHRydWUgfTtcbiAgICAgICAgcmV0dXJuIGJhc2UgJiYgeyAuLi5iYXNlLCBudWxsYWJsZTogdHJ1ZSB9O1xuICAgIH1cbiAgICBjb25zdCBiYXNlID0gcGFyc2VEZWYoZGVmLmlubmVyVHlwZS5fZGVmLCB7XG4gICAgICAgIC4uLnJlZnMsXG4gICAgICAgIGN1cnJlbnRQYXRoOiBbLi4ucmVmcy5jdXJyZW50UGF0aCwgJ2FueU9mJywgJzAnXSxcbiAgICB9KTtcbiAgICByZXR1cm4gYmFzZSAmJiB7IGFueU9mOiBbYmFzZSwgeyB0eXBlOiAnbnVsbCcgfV0gfTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW51bGxhYmxlLm1qcy5tYXAiLCJpbXBvcnQgeyBhZGRFcnJvck1lc3NhZ2UsIHNldFJlc3BvbnNlVmFsdWVBbmRFcnJvcnMgfSBmcm9tIFwiLi4vZXJyb3JNZXNzYWdlcy5tanNcIjtcbmV4cG9ydCBmdW5jdGlvbiBwYXJzZU51bWJlckRlZihkZWYsIHJlZnMpIHtcbiAgICBjb25zdCByZXMgPSB7XG4gICAgICAgIHR5cGU6ICdudW1iZXInLFxuICAgIH07XG4gICAgaWYgKCFkZWYuY2hlY2tzKVxuICAgICAgICByZXR1cm4gcmVzO1xuICAgIGZvciAoY29uc3QgY2hlY2sgb2YgZGVmLmNoZWNrcykge1xuICAgICAgICBzd2l0Y2ggKGNoZWNrLmtpbmQpIHtcbiAgICAgICAgICAgIGNhc2UgJ2ludCc6XG4gICAgICAgICAgICAgICAgcmVzLnR5cGUgPSAnaW50ZWdlcic7XG4gICAgICAgICAgICAgICAgYWRkRXJyb3JNZXNzYWdlKHJlcywgJ3R5cGUnLCBjaGVjay5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ21pbic6XG4gICAgICAgICAgICAgICAgaWYgKHJlZnMudGFyZ2V0ID09PSAnanNvblNjaGVtYTcnKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjaGVjay5pbmNsdXNpdmUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldFJlc3BvbnNlVmFsdWVBbmRFcnJvcnMocmVzLCAnbWluaW11bScsIGNoZWNrLnZhbHVlLCBjaGVjay5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldFJlc3BvbnNlVmFsdWVBbmRFcnJvcnMocmVzLCAnZXhjbHVzaXZlTWluaW11bScsIGNoZWNrLnZhbHVlLCBjaGVjay5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFjaGVjay5pbmNsdXNpdmUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcy5leGNsdXNpdmVNaW5pbXVtID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBzZXRSZXNwb25zZVZhbHVlQW5kRXJyb3JzKHJlcywgJ21pbmltdW0nLCBjaGVjay52YWx1ZSwgY2hlY2subWVzc2FnZSwgcmVmcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnbWF4JzpcbiAgICAgICAgICAgICAgICBpZiAocmVmcy50YXJnZXQgPT09ICdqc29uU2NoZW1hNycpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNoZWNrLmluY2x1c2l2ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0UmVzcG9uc2VWYWx1ZUFuZEVycm9ycyhyZXMsICdtYXhpbXVtJywgY2hlY2sudmFsdWUsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0UmVzcG9uc2VWYWx1ZUFuZEVycm9ycyhyZXMsICdleGNsdXNpdmVNYXhpbXVtJywgY2hlY2sudmFsdWUsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWNoZWNrLmluY2x1c2l2ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzLmV4Y2x1c2l2ZU1heGltdW0gPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHNldFJlc3BvbnNlVmFsdWVBbmRFcnJvcnMocmVzLCAnbWF4aW11bScsIGNoZWNrLnZhbHVlLCBjaGVjay5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdtdWx0aXBsZU9mJzpcbiAgICAgICAgICAgICAgICBzZXRSZXNwb25zZVZhbHVlQW5kRXJyb3JzKHJlcywgJ211bHRpcGxlT2YnLCBjaGVjay52YWx1ZSwgY2hlY2subWVzc2FnZSwgcmVmcyk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHJlcztcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW51bWJlci5tanMubWFwIiwiaW1wb3J0IHsgcGFyc2VEZWYgfSBmcm9tIFwiLi4vcGFyc2VEZWYubWpzXCI7XG5mdW5jdGlvbiBkZWNpZGVBZGRpdGlvbmFsUHJvcGVydGllcyhkZWYsIHJlZnMpIHtcbiAgICBpZiAocmVmcy5yZW1vdmVBZGRpdGlvbmFsU3RyYXRlZ3kgPT09ICdzdHJpY3QnKSB7XG4gICAgICAgIHJldHVybiBkZWYuY2F0Y2hhbGwuX2RlZi50eXBlTmFtZSA9PT0gJ1pvZE5ldmVyJyA/XG4gICAgICAgICAgICBkZWYudW5rbm93bktleXMgIT09ICdzdHJpY3QnXG4gICAgICAgICAgICA6IHBhcnNlRGVmKGRlZi5jYXRjaGFsbC5fZGVmLCB7XG4gICAgICAgICAgICAgICAgLi4ucmVmcyxcbiAgICAgICAgICAgICAgICBjdXJyZW50UGF0aDogWy4uLnJlZnMuY3VycmVudFBhdGgsICdhZGRpdGlvbmFsUHJvcGVydGllcyddLFxuICAgICAgICAgICAgfSkgPz8gdHJ1ZTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiBkZWYuY2F0Y2hhbGwuX2RlZi50eXBlTmFtZSA9PT0gJ1pvZE5ldmVyJyA/XG4gICAgICAgICAgICBkZWYudW5rbm93bktleXMgPT09ICdwYXNzdGhyb3VnaCdcbiAgICAgICAgICAgIDogcGFyc2VEZWYoZGVmLmNhdGNoYWxsLl9kZWYsIHtcbiAgICAgICAgICAgICAgICAuLi5yZWZzLFxuICAgICAgICAgICAgICAgIGN1cnJlbnRQYXRoOiBbLi4ucmVmcy5jdXJyZW50UGF0aCwgJ2FkZGl0aW9uYWxQcm9wZXJ0aWVzJ10sXG4gICAgICAgICAgICB9KSA/PyB0cnVlO1xuICAgIH1cbn1cbmV4cG9ydCBmdW5jdGlvbiBwYXJzZU9iamVjdERlZihkZWYsIHJlZnMpIHtcbiAgICBjb25zdCByZXN1bHQgPSB7XG4gICAgICAgIHR5cGU6ICdvYmplY3QnLFxuICAgICAgICAuLi5PYmplY3QuZW50cmllcyhkZWYuc2hhcGUoKSkucmVkdWNlKChhY2MsIFtwcm9wTmFtZSwgcHJvcERlZl0pID0+IHtcbiAgICAgICAgICAgIGlmIChwcm9wRGVmID09PSB1bmRlZmluZWQgfHwgcHJvcERlZi5fZGVmID09PSB1bmRlZmluZWQpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGFjYztcbiAgICAgICAgICAgIGNvbnN0IHByb3BlcnR5UGF0aCA9IFsuLi5yZWZzLmN1cnJlbnRQYXRoLCAncHJvcGVydGllcycsIHByb3BOYW1lXTtcbiAgICAgICAgICAgIGNvbnN0IHBhcnNlZERlZiA9IHBhcnNlRGVmKHByb3BEZWYuX2RlZiwge1xuICAgICAgICAgICAgICAgIC4uLnJlZnMsXG4gICAgICAgICAgICAgICAgY3VycmVudFBhdGg6IHByb3BlcnR5UGF0aCxcbiAgICAgICAgICAgICAgICBwcm9wZXJ0eVBhdGgsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmIChwYXJzZWREZWYgPT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgICAgICByZXR1cm4gYWNjO1xuICAgICAgICAgICAgaWYgKHJlZnMub3BlbmFpU3RyaWN0TW9kZSAmJlxuICAgICAgICAgICAgICAgIHByb3BEZWYuaXNPcHRpb25hbCgpICYmXG4gICAgICAgICAgICAgICAgIXByb3BEZWYuaXNOdWxsYWJsZSgpICYmXG4gICAgICAgICAgICAgICAgdHlwZW9mIHByb3BEZWYuX2RlZj8uZGVmYXVsdFZhbHVlID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgWm9kIGZpZWxkIGF0IFxcYCR7cHJvcGVydHlQYXRoLmpvaW4oJy8nKX1cXGAgdXNlcyBcXGAub3B0aW9uYWwoKVxcYCB3aXRob3V0IFxcYC5udWxsYWJsZSgpXFxgIHdoaWNoIGlzIG5vdCBzdXBwb3J0ZWQgYnkgdGhlIEFQSS4gU2VlOiBodHRwczovL3BsYXRmb3JtLm9wZW5haS5jb20vZG9jcy9ndWlkZXMvc3RydWN0dXJlZC1vdXRwdXRzP2FwaS1tb2RlPXJlc3BvbnNlcyNhbGwtZmllbGRzLW11c3QtYmUtcmVxdWlyZWRgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgcHJvcGVydGllczoge1xuICAgICAgICAgICAgICAgICAgICAuLi5hY2MucHJvcGVydGllcyxcbiAgICAgICAgICAgICAgICAgICAgW3Byb3BOYW1lXTogcGFyc2VkRGVmLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgcmVxdWlyZWQ6IHByb3BEZWYuaXNPcHRpb25hbCgpICYmICFyZWZzLm9wZW5haVN0cmljdE1vZGUgPyBhY2MucmVxdWlyZWQgOiBbLi4uYWNjLnJlcXVpcmVkLCBwcm9wTmFtZV0sXG4gICAgICAgICAgICB9O1xuICAgICAgICB9LCB7IHByb3BlcnRpZXM6IHt9LCByZXF1aXJlZDogW10gfSksXG4gICAgICAgIGFkZGl0aW9uYWxQcm9wZXJ0aWVzOiBkZWNpZGVBZGRpdGlvbmFsUHJvcGVydGllcyhkZWYsIHJlZnMpLFxuICAgIH07XG4gICAgaWYgKCFyZXN1bHQucmVxdWlyZWQubGVuZ3RoKVxuICAgICAgICBkZWxldGUgcmVzdWx0LnJlcXVpcmVkO1xuICAgIHJldHVybiByZXN1bHQ7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1vYmplY3QubWpzLm1hcCIsImltcG9ydCB7IHBhcnNlRGVmIH0gZnJvbSBcIi4uL3BhcnNlRGVmLm1qc1wiO1xuZXhwb3J0IGNvbnN0IHBhcnNlT3B0aW9uYWxEZWYgPSAoZGVmLCByZWZzKSA9PiB7XG4gICAgaWYgKHJlZnMucHJvcGVydHlQYXRoICYmXG4gICAgICAgIHJlZnMuY3VycmVudFBhdGguc2xpY2UoMCwgcmVmcy5wcm9wZXJ0eVBhdGgubGVuZ3RoKS50b1N0cmluZygpID09PSByZWZzLnByb3BlcnR5UGF0aC50b1N0cmluZygpKSB7XG4gICAgICAgIHJldHVybiBwYXJzZURlZihkZWYuaW5uZXJUeXBlLl9kZWYsIHsgLi4ucmVmcywgY3VycmVudFBhdGg6IHJlZnMuY3VycmVudFBhdGggfSk7XG4gICAgfVxuICAgIGNvbnN0IGlubmVyU2NoZW1hID0gcGFyc2VEZWYoZGVmLmlubmVyVHlwZS5fZGVmLCB7XG4gICAgICAgIC4uLnJlZnMsXG4gICAgICAgIGN1cnJlbnRQYXRoOiBbLi4ucmVmcy5jdXJyZW50UGF0aCwgJ2FueU9mJywgJzEnXSxcbiAgICB9KTtcbiAgICByZXR1cm4gaW5uZXJTY2hlbWEgP1xuICAgICAgICB7XG4gICAgICAgICAgICBhbnlPZjogW1xuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbm90OiB7fSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGlubmVyU2NoZW1hLFxuICAgICAgICAgICAgXSxcbiAgICAgICAgfVxuICAgICAgICA6IHt9O1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW9wdGlvbmFsLm1qcy5tYXAiLCJpbXBvcnQgeyBwYXJzZURlZiB9IGZyb20gXCIuLi9wYXJzZURlZi5tanNcIjtcbmV4cG9ydCBjb25zdCBwYXJzZVBpcGVsaW5lRGVmID0gKGRlZiwgcmVmcykgPT4ge1xuICAgIGlmIChyZWZzLnBpcGVTdHJhdGVneSA9PT0gJ2lucHV0Jykge1xuICAgICAgICByZXR1cm4gcGFyc2VEZWYoZGVmLmluLl9kZWYsIHJlZnMpO1xuICAgIH1cbiAgICBlbHNlIGlmIChyZWZzLnBpcGVTdHJhdGVneSA9PT0gJ291dHB1dCcpIHtcbiAgICAgICAgcmV0dXJuIHBhcnNlRGVmKGRlZi5vdXQuX2RlZiwgcmVmcyk7XG4gICAgfVxuICAgIGNvbnN0IGEgPSBwYXJzZURlZihkZWYuaW4uX2RlZiwge1xuICAgICAgICAuLi5yZWZzLFxuICAgICAgICBjdXJyZW50UGF0aDogWy4uLnJlZnMuY3VycmVudFBhdGgsICdhbGxPZicsICcwJ10sXG4gICAgfSk7XG4gICAgY29uc3QgYiA9IHBhcnNlRGVmKGRlZi5vdXQuX2RlZiwge1xuICAgICAgICAuLi5yZWZzLFxuICAgICAgICBjdXJyZW50UGF0aDogWy4uLnJlZnMuY3VycmVudFBhdGgsICdhbGxPZicsIGEgPyAnMScgOiAnMCddLFxuICAgIH0pO1xuICAgIHJldHVybiB7XG4gICAgICAgIGFsbE9mOiBbYSwgYl0uZmlsdGVyKCh4KSA9PiB4ICE9PSB1bmRlZmluZWQpLFxuICAgIH07XG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cGlwZWxpbmUubWpzLm1hcCIsImltcG9ydCB7IHBhcnNlRGVmIH0gZnJvbSBcIi4uL3BhcnNlRGVmLm1qc1wiO1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlUHJvbWlzZURlZihkZWYsIHJlZnMpIHtcbiAgICByZXR1cm4gcGFyc2VEZWYoZGVmLnR5cGUuX2RlZiwgcmVmcyk7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1wcm9taXNlLm1qcy5tYXAiLCJpbXBvcnQgeyBzZXRSZXNwb25zZVZhbHVlQW5kRXJyb3JzIH0gZnJvbSBcIi4uL2Vycm9yTWVzc2FnZXMubWpzXCI7XG5pbXBvcnQgeyBwYXJzZURlZiB9IGZyb20gXCIuLi9wYXJzZURlZi5tanNcIjtcbmV4cG9ydCBmdW5jdGlvbiBwYXJzZVNldERlZihkZWYsIHJlZnMpIHtcbiAgICBjb25zdCBpdGVtcyA9IHBhcnNlRGVmKGRlZi52YWx1ZVR5cGUuX2RlZiwge1xuICAgICAgICAuLi5yZWZzLFxuICAgICAgICBjdXJyZW50UGF0aDogWy4uLnJlZnMuY3VycmVudFBhdGgsICdpdGVtcyddLFxuICAgIH0pO1xuICAgIGNvbnN0IHNjaGVtYSA9IHtcbiAgICAgICAgdHlwZTogJ2FycmF5JyxcbiAgICAgICAgdW5pcXVlSXRlbXM6IHRydWUsXG4gICAgICAgIGl0ZW1zLFxuICAgIH07XG4gICAgaWYgKGRlZi5taW5TaXplKSB7XG4gICAgICAgIHNldFJlc3BvbnNlVmFsdWVBbmRFcnJvcnMoc2NoZW1hLCAnbWluSXRlbXMnLCBkZWYubWluU2l6ZS52YWx1ZSwgZGVmLm1pblNpemUubWVzc2FnZSwgcmVmcyk7XG4gICAgfVxuICAgIGlmIChkZWYubWF4U2l6ZSkge1xuICAgICAgICBzZXRSZXNwb25zZVZhbHVlQW5kRXJyb3JzKHNjaGVtYSwgJ21heEl0ZW1zJywgZGVmLm1heFNpemUudmFsdWUsIGRlZi5tYXhTaXplLm1lc3NhZ2UsIHJlZnMpO1xuICAgIH1cbiAgICByZXR1cm4gc2NoZW1hO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c2V0Lm1qcy5tYXAiLCJpbXBvcnQgeyBwYXJzZURlZiB9IGZyb20gXCIuLi9wYXJzZURlZi5tanNcIjtcbmV4cG9ydCBmdW5jdGlvbiBwYXJzZVR1cGxlRGVmKGRlZiwgcmVmcykge1xuICAgIGlmIChkZWYucmVzdCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdHlwZTogJ2FycmF5JyxcbiAgICAgICAgICAgIG1pbkl0ZW1zOiBkZWYuaXRlbXMubGVuZ3RoLFxuICAgICAgICAgICAgaXRlbXM6IGRlZi5pdGVtc1xuICAgICAgICAgICAgICAgIC5tYXAoKHgsIGkpID0+IHBhcnNlRGVmKHguX2RlZiwge1xuICAgICAgICAgICAgICAgIC4uLnJlZnMsXG4gICAgICAgICAgICAgICAgY3VycmVudFBhdGg6IFsuLi5yZWZzLmN1cnJlbnRQYXRoLCAnaXRlbXMnLCBgJHtpfWBdLFxuICAgICAgICAgICAgfSkpXG4gICAgICAgICAgICAgICAgLnJlZHVjZSgoYWNjLCB4KSA9PiAoeCA9PT0gdW5kZWZpbmVkID8gYWNjIDogWy4uLmFjYywgeF0pLCBbXSksXG4gICAgICAgICAgICBhZGRpdGlvbmFsSXRlbXM6IHBhcnNlRGVmKGRlZi5yZXN0Ll9kZWYsIHtcbiAgICAgICAgICAgICAgICAuLi5yZWZzLFxuICAgICAgICAgICAgICAgIGN1cnJlbnRQYXRoOiBbLi4ucmVmcy5jdXJyZW50UGF0aCwgJ2FkZGl0aW9uYWxJdGVtcyddLFxuICAgICAgICAgICAgfSksXG4gICAgICAgIH07XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdHlwZTogJ2FycmF5JyxcbiAgICAgICAgICAgIG1pbkl0ZW1zOiBkZWYuaXRlbXMubGVuZ3RoLFxuICAgICAgICAgICAgbWF4SXRlbXM6IGRlZi5pdGVtcy5sZW5ndGgsXG4gICAgICAgICAgICBpdGVtczogZGVmLml0ZW1zXG4gICAgICAgICAgICAgICAgLm1hcCgoeCwgaSkgPT4gcGFyc2VEZWYoeC5fZGVmLCB7XG4gICAgICAgICAgICAgICAgLi4ucmVmcyxcbiAgICAgICAgICAgICAgICBjdXJyZW50UGF0aDogWy4uLnJlZnMuY3VycmVudFBhdGgsICdpdGVtcycsIGAke2l9YF0sXG4gICAgICAgICAgICB9KSlcbiAgICAgICAgICAgICAgICAucmVkdWNlKChhY2MsIHgpID0+ICh4ID09PSB1bmRlZmluZWQgPyBhY2MgOiBbLi4uYWNjLCB4XSksIFtdKSxcbiAgICAgICAgfTtcbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD10dXBsZS5tanMubWFwIiwiZXhwb3J0IGZ1bmN0aW9uIHBhcnNlVW5kZWZpbmVkRGVmKCkge1xuICAgIHJldHVybiB7XG4gICAgICAgIG5vdDoge30sXG4gICAgfTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXVuZGVmaW5lZC5tanMubWFwIiwiZXhwb3J0IGZ1bmN0aW9uIHBhcnNlVW5rbm93bkRlZigpIHtcbiAgICByZXR1cm4ge307XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD11bmtub3duLm1qcy5tYXAiLCJpbXBvcnQgeyBwYXJzZURlZiB9IGZyb20gXCIuLi9wYXJzZURlZi5tanNcIjtcbmV4cG9ydCBjb25zdCBwYXJzZVJlYWRvbmx5RGVmID0gKGRlZiwgcmVmcykgPT4ge1xuICAgIHJldHVybiBwYXJzZURlZihkZWYuaW5uZXJUeXBlLl9kZWYsIHJlZnMpO1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXJlYWRvbmx5Lm1qcy5tYXAiLCJpbXBvcnQgeyBab2RGaXJzdFBhcnR5VHlwZUtpbmQgfSBmcm9tICd6b2QvdjMnO1xuaW1wb3J0IHsgcGFyc2VBbnlEZWYgfSBmcm9tIFwiLi9wYXJzZXJzL2FueS5tanNcIjtcbmltcG9ydCB7IHBhcnNlQXJyYXlEZWYgfSBmcm9tIFwiLi9wYXJzZXJzL2FycmF5Lm1qc1wiO1xuaW1wb3J0IHsgcGFyc2VCaWdpbnREZWYgfSBmcm9tIFwiLi9wYXJzZXJzL2JpZ2ludC5tanNcIjtcbmltcG9ydCB7IHBhcnNlQm9vbGVhbkRlZiB9IGZyb20gXCIuL3BhcnNlcnMvYm9vbGVhbi5tanNcIjtcbmltcG9ydCB7IHBhcnNlQnJhbmRlZERlZiB9IGZyb20gXCIuL3BhcnNlcnMvYnJhbmRlZC5tanNcIjtcbmltcG9ydCB7IHBhcnNlQ2F0Y2hEZWYgfSBmcm9tIFwiLi9wYXJzZXJzL2NhdGNoLm1qc1wiO1xuaW1wb3J0IHsgcGFyc2VEYXRlRGVmIH0gZnJvbSBcIi4vcGFyc2Vycy9kYXRlLm1qc1wiO1xuaW1wb3J0IHsgcGFyc2VEZWZhdWx0RGVmIH0gZnJvbSBcIi4vcGFyc2Vycy9kZWZhdWx0Lm1qc1wiO1xuaW1wb3J0IHsgcGFyc2VFZmZlY3RzRGVmIH0gZnJvbSBcIi4vcGFyc2Vycy9lZmZlY3RzLm1qc1wiO1xuaW1wb3J0IHsgcGFyc2VFbnVtRGVmIH0gZnJvbSBcIi4vcGFyc2Vycy9lbnVtLm1qc1wiO1xuaW1wb3J0IHsgcGFyc2VJbnRlcnNlY3Rpb25EZWYgfSBmcm9tIFwiLi9wYXJzZXJzL2ludGVyc2VjdGlvbi5tanNcIjtcbmltcG9ydCB7IHBhcnNlTGl0ZXJhbERlZiB9IGZyb20gXCIuL3BhcnNlcnMvbGl0ZXJhbC5tanNcIjtcbmltcG9ydCB7IHBhcnNlTWFwRGVmIH0gZnJvbSBcIi4vcGFyc2Vycy9tYXAubWpzXCI7XG5pbXBvcnQgeyBwYXJzZU5hdGl2ZUVudW1EZWYgfSBmcm9tIFwiLi9wYXJzZXJzL25hdGl2ZUVudW0ubWpzXCI7XG5pbXBvcnQgeyBwYXJzZU5ldmVyRGVmIH0gZnJvbSBcIi4vcGFyc2Vycy9uZXZlci5tanNcIjtcbmltcG9ydCB7IHBhcnNlTnVsbERlZiB9IGZyb20gXCIuL3BhcnNlcnMvbnVsbC5tanNcIjtcbmltcG9ydCB7IHBhcnNlTnVsbGFibGVEZWYgfSBmcm9tIFwiLi9wYXJzZXJzL251bGxhYmxlLm1qc1wiO1xuaW1wb3J0IHsgcGFyc2VOdW1iZXJEZWYgfSBmcm9tIFwiLi9wYXJzZXJzL251bWJlci5tanNcIjtcbmltcG9ydCB7IHBhcnNlT2JqZWN0RGVmIH0gZnJvbSBcIi4vcGFyc2Vycy9vYmplY3QubWpzXCI7XG5pbXBvcnQgeyBwYXJzZU9wdGlvbmFsRGVmIH0gZnJvbSBcIi4vcGFyc2Vycy9vcHRpb25hbC5tanNcIjtcbmltcG9ydCB7IHBhcnNlUGlwZWxpbmVEZWYgfSBmcm9tIFwiLi9wYXJzZXJzL3BpcGVsaW5lLm1qc1wiO1xuaW1wb3J0IHsgcGFyc2VQcm9taXNlRGVmIH0gZnJvbSBcIi4vcGFyc2Vycy9wcm9taXNlLm1qc1wiO1xuaW1wb3J0IHsgcGFyc2VSZWNvcmREZWYgfSBmcm9tIFwiLi9wYXJzZXJzL3JlY29yZC5tanNcIjtcbmltcG9ydCB7IHBhcnNlU2V0RGVmIH0gZnJvbSBcIi4vcGFyc2Vycy9zZXQubWpzXCI7XG5pbXBvcnQgeyBwYXJzZVN0cmluZ0RlZiB9IGZyb20gXCIuL3BhcnNlcnMvc3RyaW5nLm1qc1wiO1xuaW1wb3J0IHsgcGFyc2VUdXBsZURlZiB9IGZyb20gXCIuL3BhcnNlcnMvdHVwbGUubWpzXCI7XG5pbXBvcnQgeyBwYXJzZVVuZGVmaW5lZERlZiB9IGZyb20gXCIuL3BhcnNlcnMvdW5kZWZpbmVkLm1qc1wiO1xuaW1wb3J0IHsgcGFyc2VVbmlvbkRlZiB9IGZyb20gXCIuL3BhcnNlcnMvdW5pb24ubWpzXCI7XG5pbXBvcnQgeyBwYXJzZVVua25vd25EZWYgfSBmcm9tIFwiLi9wYXJzZXJzL3Vua25vd24ubWpzXCI7XG5pbXBvcnQgeyBwYXJzZVJlYWRvbmx5RGVmIH0gZnJvbSBcIi4vcGFyc2Vycy9yZWFkb25seS5tanNcIjtcbmltcG9ydCB7IGlnbm9yZU92ZXJyaWRlIH0gZnJvbSBcIi4vT3B0aW9ucy5tanNcIjtcbmV4cG9ydCBmdW5jdGlvbiBwYXJzZURlZihkZWYsIHJlZnMsIGZvcmNlUmVzb2x1dGlvbiA9IGZhbHNlKSB7XG4gICAgY29uc3Qgc2Vlbkl0ZW0gPSByZWZzLnNlZW4uZ2V0KGRlZik7XG4gICAgaWYgKHJlZnMub3ZlcnJpZGUpIHtcbiAgICAgICAgY29uc3Qgb3ZlcnJpZGVSZXN1bHQgPSByZWZzLm92ZXJyaWRlPy4oZGVmLCByZWZzLCBzZWVuSXRlbSwgZm9yY2VSZXNvbHV0aW9uKTtcbiAgICAgICAgaWYgKG92ZXJyaWRlUmVzdWx0ICE9PSBpZ25vcmVPdmVycmlkZSkge1xuICAgICAgICAgICAgcmV0dXJuIG92ZXJyaWRlUmVzdWx0O1xuICAgICAgICB9XG4gICAgfVxuICAgIGlmIChzZWVuSXRlbSAmJiAhZm9yY2VSZXNvbHV0aW9uKSB7XG4gICAgICAgIGNvbnN0IHNlZW5TY2hlbWEgPSBnZXQkcmVmKHNlZW5JdGVtLCByZWZzKTtcbiAgICAgICAgaWYgKHNlZW5TY2hlbWEgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaWYgKCckcmVmJyBpbiBzZWVuU2NoZW1hKSB7XG4gICAgICAgICAgICAgICAgcmVmcy5zZWVuUmVmcy5hZGQoc2VlblNjaGVtYS4kcmVmKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBzZWVuU2NoZW1hO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNvbnN0IG5ld0l0ZW0gPSB7IGRlZiwgcGF0aDogcmVmcy5jdXJyZW50UGF0aCwganNvblNjaGVtYTogdW5kZWZpbmVkIH07XG4gICAgcmVmcy5zZWVuLnNldChkZWYsIG5ld0l0ZW0pO1xuICAgIGNvbnN0IGpzb25TY2hlbWEgPSBzZWxlY3RQYXJzZXIoZGVmLCBkZWYudHlwZU5hbWUsIHJlZnMsIGZvcmNlUmVzb2x1dGlvbik7XG4gICAgaWYgKGpzb25TY2hlbWEpIHtcbiAgICAgICAgYWRkTWV0YShkZWYsIHJlZnMsIGpzb25TY2hlbWEpO1xuICAgIH1cbiAgICBuZXdJdGVtLmpzb25TY2hlbWEgPSBqc29uU2NoZW1hO1xuICAgIHJldHVybiBqc29uU2NoZW1hO1xufVxuY29uc3QgZ2V0JHJlZiA9IChpdGVtLCByZWZzKSA9PiB7XG4gICAgc3dpdGNoIChyZWZzLiRyZWZTdHJhdGVneSkge1xuICAgICAgICBjYXNlICdyb290JzpcbiAgICAgICAgICAgIHJldHVybiB7ICRyZWY6IGl0ZW0ucGF0aC5qb2luKCcvJykgfTtcbiAgICAgICAgLy8gdGhpcyBjYXNlIGlzIG5lZWRlZCBhcyBPcGVuQUkgc3RyaWN0IG1vZGUgZG9lc24ndCBzdXBwb3J0IHRvcC1sZXZlbCBgJHJlZmBzLCBpLmUuXG4gICAgICAgIC8vIHRoZSB0b3AtbGV2ZWwgc2NoZW1hICptdXN0KiBiZSBge1widHlwZVwiOiBcIm9iamVjdFwiLCBcInByb3BlcnRpZXNcIjogey4uLn19YCBidXQgaWYgd2UgZXZlclxuICAgICAgICAvLyBuZWVkIHRvIGRlZmluZSBhIGAkcmVmYCwgcmVsYXRpdmUgYCRyZWZgcyBhcmVuJ3Qgc3VwcG9ydGVkLCBzbyB3ZSBuZWVkIHRvIGV4dHJhY3RcbiAgICAgICAgLy8gdGhlIHNjaGVtYSB0byBgIy9kZWZpbml0aW9ucy9gIGFuZCByZWZlcmVuY2UgdGhhdC5cbiAgICAgICAgLy9cbiAgICAgICAgLy8gZS5nLiBpZiB3ZSBuZWVkIHRvIHJlZmVyZW5jZSBhIHNjaGVtYSBhdFxuICAgICAgICAvLyBgW1wiI1wiLFwiZGVmaW5pdGlvbnNcIixcImNvbnRhY3RQZXJzb25cIixcInByb3BlcnRpZXNcIixcInBlcnNvbjFcIixcInByb3BlcnRpZXNcIixcIm5hbWVcIl1gXG4gICAgICAgIC8vIHRoZW4gd2UnbGwgZXh0cmFjdCBpdCBvdXQgdG8gYGNvbnRhY3RQZXJzb25fcHJvcGVydGllc19wZXJzb24xX3Byb3BlcnRpZXNfbmFtZWBcbiAgICAgICAgY2FzZSAnZXh0cmFjdC10by1yb290JzpcbiAgICAgICAgICAgIGNvbnN0IG5hbWUgPSBpdGVtLnBhdGguc2xpY2UocmVmcy5iYXNlUGF0aC5sZW5ndGggKyAxKS5qb2luKCdfJyk7XG4gICAgICAgICAgICAvLyB3ZSBkb24ndCBuZWVkIHRvIGV4dHJhY3QgdGhlIHJvb3Qgc2NoZW1hIGluIHRoaXMgY2FzZSwgYXMgaXQncyBhbHJlYWR5XG4gICAgICAgICAgICAvLyBiZWVuIGFkZGVkIHRvIHRoZSBkZWZpbml0aW9uc1xuICAgICAgICAgICAgaWYgKG5hbWUgIT09IHJlZnMubmFtZSAmJiByZWZzLm5hbWVTdHJhdGVneSA9PT0gJ2R1cGxpY2F0ZS1yZWYnKSB7XG4gICAgICAgICAgICAgICAgcmVmcy5kZWZpbml0aW9uc1tuYW1lXSA9IGl0ZW0uZGVmO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHsgJHJlZjogWy4uLnJlZnMuYmFzZVBhdGgsIHJlZnMuZGVmaW5pdGlvblBhdGgsIG5hbWVdLmpvaW4oJy8nKSB9O1xuICAgICAgICBjYXNlICdyZWxhdGl2ZSc6XG4gICAgICAgICAgICByZXR1cm4geyAkcmVmOiBnZXRSZWxhdGl2ZVBhdGgocmVmcy5jdXJyZW50UGF0aCwgaXRlbS5wYXRoKSB9O1xuICAgICAgICBjYXNlICdub25lJzpcbiAgICAgICAgY2FzZSAnc2Vlbic6IHtcbiAgICAgICAgICAgIGlmIChpdGVtLnBhdGgubGVuZ3RoIDwgcmVmcy5jdXJyZW50UGF0aC5sZW5ndGggJiZcbiAgICAgICAgICAgICAgICBpdGVtLnBhdGguZXZlcnkoKHZhbHVlLCBpbmRleCkgPT4gcmVmcy5jdXJyZW50UGF0aFtpbmRleF0gPT09IHZhbHVlKSkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihgUmVjdXJzaXZlIHJlZmVyZW5jZSBkZXRlY3RlZCBhdCAke3JlZnMuY3VycmVudFBhdGguam9pbignLycpfSEgRGVmYXVsdGluZyB0byBhbnlgKTtcbiAgICAgICAgICAgICAgICByZXR1cm4ge307XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcmVmcy4kcmVmU3RyYXRlZ3kgPT09ICdzZWVuJyA/IHt9IDogdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgfVxufTtcbmNvbnN0IGdldFJlbGF0aXZlUGF0aCA9IChwYXRoQSwgcGF0aEIpID0+IHtcbiAgICBsZXQgaSA9IDA7XG4gICAgZm9yICg7IGkgPCBwYXRoQS5sZW5ndGggJiYgaSA8IHBhdGhCLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGlmIChwYXRoQVtpXSAhPT0gcGF0aEJbaV0pXG4gICAgICAgICAgICBicmVhaztcbiAgICB9XG4gICAgcmV0dXJuIFsocGF0aEEubGVuZ3RoIC0gaSkudG9TdHJpbmcoKSwgLi4ucGF0aEIuc2xpY2UoaSldLmpvaW4oJy8nKTtcbn07XG5jb25zdCBzZWxlY3RQYXJzZXIgPSAoZGVmLCB0eXBlTmFtZSwgcmVmcywgZm9yY2VSZXNvbHV0aW9uKSA9PiB7XG4gICAgc3dpdGNoICh0eXBlTmFtZSkge1xuICAgICAgICBjYXNlIFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RTdHJpbmc6XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VTdHJpbmdEZWYoZGVmLCByZWZzKTtcbiAgICAgICAgY2FzZSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kTnVtYmVyOlxuICAgICAgICAgICAgcmV0dXJuIHBhcnNlTnVtYmVyRGVmKGRlZiwgcmVmcyk7XG4gICAgICAgIGNhc2UgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZE9iamVjdDpcbiAgICAgICAgICAgIHJldHVybiBwYXJzZU9iamVjdERlZihkZWYsIHJlZnMpO1xuICAgICAgICBjYXNlIFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RCaWdJbnQ6XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VCaWdpbnREZWYoZGVmLCByZWZzKTtcbiAgICAgICAgY2FzZSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kQm9vbGVhbjpcbiAgICAgICAgICAgIHJldHVybiBwYXJzZUJvb2xlYW5EZWYoKTtcbiAgICAgICAgY2FzZSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kRGF0ZTpcbiAgICAgICAgICAgIHJldHVybiBwYXJzZURhdGVEZWYoZGVmLCByZWZzKTtcbiAgICAgICAgY2FzZSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kVW5kZWZpbmVkOlxuICAgICAgICAgICAgcmV0dXJuIHBhcnNlVW5kZWZpbmVkRGVmKCk7XG4gICAgICAgIGNhc2UgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZE51bGw6XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VOdWxsRGVmKHJlZnMpO1xuICAgICAgICBjYXNlIFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RBcnJheTpcbiAgICAgICAgICAgIHJldHVybiBwYXJzZUFycmF5RGVmKGRlZiwgcmVmcyk7XG4gICAgICAgIGNhc2UgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZFVuaW9uOlxuICAgICAgICBjYXNlIFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2REaXNjcmltaW5hdGVkVW5pb246XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VVbmlvbkRlZihkZWYsIHJlZnMpO1xuICAgICAgICBjYXNlIFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RJbnRlcnNlY3Rpb246XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VJbnRlcnNlY3Rpb25EZWYoZGVmLCByZWZzKTtcbiAgICAgICAgY2FzZSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kVHVwbGU6XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VUdXBsZURlZihkZWYsIHJlZnMpO1xuICAgICAgICBjYXNlIFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RSZWNvcmQ6XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VSZWNvcmREZWYoZGVmLCByZWZzKTtcbiAgICAgICAgY2FzZSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kTGl0ZXJhbDpcbiAgICAgICAgICAgIHJldHVybiBwYXJzZUxpdGVyYWxEZWYoZGVmLCByZWZzKTtcbiAgICAgICAgY2FzZSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kRW51bTpcbiAgICAgICAgICAgIHJldHVybiBwYXJzZUVudW1EZWYoZGVmKTtcbiAgICAgICAgY2FzZSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kTmF0aXZlRW51bTpcbiAgICAgICAgICAgIHJldHVybiBwYXJzZU5hdGl2ZUVudW1EZWYoZGVmKTtcbiAgICAgICAgY2FzZSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kTnVsbGFibGU6XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VOdWxsYWJsZURlZihkZWYsIHJlZnMpO1xuICAgICAgICBjYXNlIFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RPcHRpb25hbDpcbiAgICAgICAgICAgIHJldHVybiBwYXJzZU9wdGlvbmFsRGVmKGRlZiwgcmVmcyk7XG4gICAgICAgIGNhc2UgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZE1hcDpcbiAgICAgICAgICAgIHJldHVybiBwYXJzZU1hcERlZihkZWYsIHJlZnMpO1xuICAgICAgICBjYXNlIFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RTZXQ6XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VTZXREZWYoZGVmLCByZWZzKTtcbiAgICAgICAgY2FzZSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kTGF6eTpcbiAgICAgICAgICAgIHJldHVybiBwYXJzZURlZihkZWYuZ2V0dGVyKCkuX2RlZiwgcmVmcyk7XG4gICAgICAgIGNhc2UgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZFByb21pc2U6XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VQcm9taXNlRGVmKGRlZiwgcmVmcyk7XG4gICAgICAgIGNhc2UgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZE5hTjpcbiAgICAgICAgY2FzZSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kTmV2ZXI6XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VOZXZlckRlZigpO1xuICAgICAgICBjYXNlIFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RFZmZlY3RzOlxuICAgICAgICAgICAgcmV0dXJuIHBhcnNlRWZmZWN0c0RlZihkZWYsIHJlZnMsIGZvcmNlUmVzb2x1dGlvbik7XG4gICAgICAgIGNhc2UgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZEFueTpcbiAgICAgICAgICAgIHJldHVybiBwYXJzZUFueURlZigpO1xuICAgICAgICBjYXNlIFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RVbmtub3duOlxuICAgICAgICAgICAgcmV0dXJuIHBhcnNlVW5rbm93bkRlZigpO1xuICAgICAgICBjYXNlIFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2REZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuIHBhcnNlRGVmYXVsdERlZihkZWYsIHJlZnMpO1xuICAgICAgICBjYXNlIFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RCcmFuZGVkOlxuICAgICAgICAgICAgcmV0dXJuIHBhcnNlQnJhbmRlZERlZihkZWYsIHJlZnMpO1xuICAgICAgICBjYXNlIFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RSZWFkb25seTpcbiAgICAgICAgICAgIHJldHVybiBwYXJzZVJlYWRvbmx5RGVmKGRlZiwgcmVmcyk7XG4gICAgICAgIGNhc2UgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZENhdGNoOlxuICAgICAgICAgICAgcmV0dXJuIHBhcnNlQ2F0Y2hEZWYoZGVmLCByZWZzKTtcbiAgICAgICAgY2FzZSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kUGlwZWxpbmU6XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VQaXBlbGluZURlZihkZWYsIHJlZnMpO1xuICAgICAgICBjYXNlIFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RGdW5jdGlvbjpcbiAgICAgICAgY2FzZSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kVm9pZDpcbiAgICAgICAgY2FzZSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kU3ltYm9sOlxuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiAoKF8pID0+IHVuZGVmaW5lZCkodHlwZU5hbWUpO1xuICAgIH1cbn07XG5jb25zdCBhZGRNZXRhID0gKGRlZiwgcmVmcywganNvblNjaGVtYSkgPT4ge1xuICAgIGlmIChkZWYuZGVzY3JpcHRpb24pIHtcbiAgICAgICAganNvblNjaGVtYS5kZXNjcmlwdGlvbiA9IGRlZi5kZXNjcmlwdGlvbjtcbiAgICAgICAgaWYgKHJlZnMubWFya2Rvd25EZXNjcmlwdGlvbikge1xuICAgICAgICAgICAganNvblNjaGVtYS5tYXJrZG93bkRlc2NyaXB0aW9uID0gZGVmLmRlc2NyaXB0aW9uO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBqc29uU2NoZW1hO1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBhcnNlRGVmLm1qcy5tYXAiLCJpbXBvcnQgeyBwYXJzZURlZiB9IGZyb20gXCIuL3BhcnNlRGVmLm1qc1wiO1xuaW1wb3J0IHsgZ2V0UmVmcyB9IGZyb20gXCIuL1JlZnMubWpzXCI7XG5pbXBvcnQgeyB6b2REZWYsIGlzRW1wdHlPYmogfSBmcm9tIFwiLi91dGlsLm1qc1wiO1xuY29uc3Qgem9kVG9Kc29uU2NoZW1hID0gKHNjaGVtYSwgb3B0aW9ucykgPT4ge1xuICAgIGNvbnN0IHJlZnMgPSBnZXRSZWZzKG9wdGlvbnMpO1xuICAgIGNvbnN0IG5hbWUgPSB0eXBlb2Ygb3B0aW9ucyA9PT0gJ3N0cmluZycgPyBvcHRpb25zXG4gICAgICAgIDogb3B0aW9ucz8ubmFtZVN0cmF0ZWd5ID09PSAndGl0bGUnID8gdW5kZWZpbmVkXG4gICAgICAgICAgICA6IG9wdGlvbnM/Lm5hbWU7XG4gICAgY29uc3QgbWFpbiA9IHBhcnNlRGVmKHNjaGVtYS5fZGVmLCBuYW1lID09PSB1bmRlZmluZWQgPyByZWZzIDogKHtcbiAgICAgICAgLi4ucmVmcyxcbiAgICAgICAgY3VycmVudFBhdGg6IFsuLi5yZWZzLmJhc2VQYXRoLCByZWZzLmRlZmluaXRpb25QYXRoLCBuYW1lXSxcbiAgICB9KSwgZmFsc2UpID8/IHt9O1xuICAgIGNvbnN0IHRpdGxlID0gdHlwZW9mIG9wdGlvbnMgPT09ICdvYmplY3QnICYmIG9wdGlvbnMubmFtZSAhPT0gdW5kZWZpbmVkICYmIG9wdGlvbnMubmFtZVN0cmF0ZWd5ID09PSAndGl0bGUnID9cbiAgICAgICAgb3B0aW9ucy5uYW1lXG4gICAgICAgIDogdW5kZWZpbmVkO1xuICAgIGlmICh0aXRsZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIG1haW4udGl0bGUgPSB0aXRsZTtcbiAgICB9XG4gICAgY29uc3QgZGVmaW5pdGlvbnMgPSAoKCkgPT4ge1xuICAgICAgICBpZiAoaXNFbXB0eU9iaihyZWZzLmRlZmluaXRpb25zKSkge1xuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBkZWZpbml0aW9ucyA9IHt9O1xuICAgICAgICBjb25zdCBwcm9jZXNzZWREZWZpbml0aW9ucyA9IG5ldyBTZXQoKTtcbiAgICAgICAgLy8gdGhlIGNhbGwgdG8gYHBhcnNlRGVmKClgIGhlcmUgbWlnaHQgaXRzZWxmIGFkZCBtb3JlIGVudHJpZXMgdG8gYC5kZWZpbml0aW9uc2BcbiAgICAgICAgLy8gc28gd2UgbmVlZCB0byBjb250aW51YWxseSBldmFsdWF0ZSBkZWZpbml0aW9ucyB1bnRpbCB3ZSd2ZSByZXNvbHZlZCBhbGwgb2YgdGhlbVxuICAgICAgICAvL1xuICAgICAgICAvLyB3ZSBoYXZlIGEgZ2VuZXJvdXMgaXRlcmF0aW9uIGxpbWl0IGhlcmUgdG8gYXZvaWQgYmxvd2luZyB1cCB0aGUgc3RhY2sgaWYgdGhlcmVcbiAgICAgICAgLy8gYXJlIGFueSBidWdzIHRoYXQgd291bGQgb3RoZXJ3aXNlIHJlc3VsdCBpbiB1cyBpdGVyYXRpbmcgaW5kZWZpbml0ZWx5XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgNTAwOyBpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IG5ld0RlZmluaXRpb25zID0gT2JqZWN0LmVudHJpZXMocmVmcy5kZWZpbml0aW9ucykuZmlsdGVyKChba2V5XSkgPT4gIXByb2Nlc3NlZERlZmluaXRpb25zLmhhcyhrZXkpKTtcbiAgICAgICAgICAgIGlmIChuZXdEZWZpbml0aW9ucy5sZW5ndGggPT09IDApXG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IFtrZXksIHNjaGVtYV0gb2YgbmV3RGVmaW5pdGlvbnMpIHtcbiAgICAgICAgICAgICAgICBkZWZpbml0aW9uc1trZXldID1cbiAgICAgICAgICAgICAgICAgICAgcGFyc2VEZWYoem9kRGVmKHNjaGVtYSksIHsgLi4ucmVmcywgY3VycmVudFBhdGg6IFsuLi5yZWZzLmJhc2VQYXRoLCByZWZzLmRlZmluaXRpb25QYXRoLCBrZXldIH0sIHRydWUpID8/IHt9O1xuICAgICAgICAgICAgICAgIHByb2Nlc3NlZERlZmluaXRpb25zLmFkZChrZXkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBkZWZpbml0aW9ucztcbiAgICB9KSgpO1xuICAgIGNvbnN0IGNvbWJpbmVkID0gbmFtZSA9PT0gdW5kZWZpbmVkID9cbiAgICAgICAgZGVmaW5pdGlvbnMgP1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIC4uLm1haW4sXG4gICAgICAgICAgICAgICAgW3JlZnMuZGVmaW5pdGlvblBhdGhdOiBkZWZpbml0aW9ucyxcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIDogbWFpblxuICAgICAgICA6IHJlZnMubmFtZVN0cmF0ZWd5ID09PSAnZHVwbGljYXRlLXJlZicgP1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIC4uLm1haW4sXG4gICAgICAgICAgICAgICAgLi4uKGRlZmluaXRpb25zIHx8IHJlZnMuc2VlblJlZnMuc2l6ZSA/XG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIFtyZWZzLmRlZmluaXRpb25QYXRoXToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmRlZmluaXRpb25zLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIG9ubHkgYWN0dWFsbHkgZHVwbGljYXRlIHRoZSBzY2hlbWEgZGVmaW5pdGlvbiBpZiBpdCB3YXMgZXZlciByZWZlcmVuY2VkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gb3RoZXJ3aXNlIHRoZSBkdXBsaWNhdGlvbiBpcyBjb21wbGV0ZWx5IHBvaW50bGVzc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLihyZWZzLnNlZW5SZWZzLnNpemUgPyB7IFtuYW1lXTogbWFpbiB9IDogdW5kZWZpbmVkKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgOiB1bmRlZmluZWQpLFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgOiB7XG4gICAgICAgICAgICAgICAgJHJlZjogWy4uLihyZWZzLiRyZWZTdHJhdGVneSA9PT0gJ3JlbGF0aXZlJyA/IFtdIDogcmVmcy5iYXNlUGF0aCksIHJlZnMuZGVmaW5pdGlvblBhdGgsIG5hbWVdLmpvaW4oJy8nKSxcbiAgICAgICAgICAgICAgICBbcmVmcy5kZWZpbml0aW9uUGF0aF06IHtcbiAgICAgICAgICAgICAgICAgICAgLi4uZGVmaW5pdGlvbnMsXG4gICAgICAgICAgICAgICAgICAgIFtuYW1lXTogbWFpbixcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfTtcbiAgICBpZiAocmVmcy50YXJnZXQgPT09ICdqc29uU2NoZW1hNycpIHtcbiAgICAgICAgY29tYmluZWQuJHNjaGVtYSA9ICdodHRwOi8vanNvbi1zY2hlbWEub3JnL2RyYWZ0LTA3L3NjaGVtYSMnO1xuICAgIH1cbiAgICBlbHNlIGlmIChyZWZzLnRhcmdldCA9PT0gJ2pzb25TY2hlbWEyMDE5LTA5Jykge1xuICAgICAgICBjb21iaW5lZC4kc2NoZW1hID0gJ2h0dHBzOi8vanNvbi1zY2hlbWEub3JnL2RyYWZ0LzIwMTktMDkvc2NoZW1hIyc7XG4gICAgfVxuICAgIHJldHVybiBjb21iaW5lZDtcbn07XG5leHBvcnQgeyB6b2RUb0pzb25TY2hlbWEgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXpvZFRvSnNvblNjaGVtYS5tanMubWFwIiwiaW1wb3J0IHsgT3BlbkFJRXJyb3IgfSBmcm9tIFwiLi4vZXJyb3IubWpzXCI7XG5pbXBvcnQgeyBpc0F1dG9QYXJzYWJsZVJlc3BvbnNlRm9ybWF0IH0gZnJvbSBcIi4uL2xpYi9wYXJzZXIubWpzXCI7XG5leHBvcnQgZnVuY3Rpb24gbWF5YmVQYXJzZVJlc3BvbnNlKHJlc3BvbnNlLCBwYXJhbXMpIHtcbiAgICBpZiAoIXBhcmFtcyB8fCAhaGFzQXV0b1BhcnNlYWJsZUlucHV0KHBhcmFtcykpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIC4uLnJlc3BvbnNlLFxuICAgICAgICAgICAgb3V0cHV0X3BhcnNlZDogbnVsbCxcbiAgICAgICAgICAgIG91dHB1dDogcmVzcG9uc2Uub3V0cHV0Lm1hcCgoaXRlbSkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChpdGVtLnR5cGUgPT09ICdmdW5jdGlvbl9jYWxsJykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgLi4uaXRlbSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlZF9hcmd1bWVudHM6IG51bGwsXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChpdGVtLnR5cGUgPT09ICdtZXNzYWdlJykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgLi4uaXRlbSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6IGl0ZW0uY29udGVudC5tYXAoKGNvbnRlbnQpID0+ICh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY29udGVudCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJzZWQ6IG51bGwsXG4gICAgICAgICAgICAgICAgICAgICAgICB9KSksXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gaXRlbTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIHBhcnNlUmVzcG9uc2UocmVzcG9uc2UsIHBhcmFtcyk7XG59XG5leHBvcnQgZnVuY3Rpb24gcGFyc2VSZXNwb25zZShyZXNwb25zZSwgcGFyYW1zKSB7XG4gICAgY29uc3Qgb3V0cHV0ID0gcmVzcG9uc2Uub3V0cHV0Lm1hcCgoaXRlbSkgPT4ge1xuICAgICAgICBpZiAoaXRlbS50eXBlID09PSAnZnVuY3Rpb25fY2FsbCcpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgLi4uaXRlbSxcbiAgICAgICAgICAgICAgICBwYXJzZWRfYXJndW1lbnRzOiBwYXJzZVRvb2xDYWxsKHBhcmFtcywgaXRlbSksXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIGlmIChpdGVtLnR5cGUgPT09ICdtZXNzYWdlJykge1xuICAgICAgICAgICAgY29uc3QgY29udGVudCA9IGl0ZW0uY29udGVudC5tYXAoKGNvbnRlbnQpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoY29udGVudC50eXBlID09PSAnb3V0cHV0X3RleHQnKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAuLi5jb250ZW50LFxuICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VkOiBwYXJzZVRleHRGb3JtYXQocGFyYW1zLCBjb250ZW50LnRleHQpLFxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gY29udGVudDtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAuLi5pdGVtLFxuICAgICAgICAgICAgICAgIGNvbnRlbnQsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBpdGVtO1xuICAgIH0pO1xuICAgIGNvbnN0IHBhcnNlZCA9IE9iamVjdC5hc3NpZ24oe30sIHJlc3BvbnNlLCB7IG91dHB1dCB9KTtcbiAgICBpZiAoIU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IocmVzcG9uc2UsICdvdXRwdXRfdGV4dCcpKSB7XG4gICAgICAgIGFkZE91dHB1dFRleHQocGFyc2VkKTtcbiAgICB9XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHBhcnNlZCwgJ291dHB1dF9wYXJzZWQnLCB7XG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGdldCgpIHtcbiAgICAgICAgICAgIGZvciAoY29uc3Qgb3V0cHV0IG9mIHBhcnNlZC5vdXRwdXQpIHtcbiAgICAgICAgICAgICAgICBpZiAob3V0cHV0LnR5cGUgIT09ICdtZXNzYWdlJykge1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBjb250ZW50IG9mIG91dHB1dC5jb250ZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjb250ZW50LnR5cGUgPT09ICdvdXRwdXRfdGV4dCcgJiYgY29udGVudC5wYXJzZWQgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjb250ZW50LnBhcnNlZDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9LFxuICAgIH0pO1xuICAgIHJldHVybiBwYXJzZWQ7XG59XG5mdW5jdGlvbiBwYXJzZVRleHRGb3JtYXQocGFyYW1zLCBjb250ZW50KSB7XG4gICAgaWYgKHBhcmFtcy50ZXh0Py5mb3JtYXQ/LnR5cGUgIT09ICdqc29uX3NjaGVtYScpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIGlmICgnJHBhcnNlUmF3JyBpbiBwYXJhbXMudGV4dD8uZm9ybWF0KSB7XG4gICAgICAgIGNvbnN0IHRleHRfZm9ybWF0ID0gcGFyYW1zLnRleHQ/LmZvcm1hdDtcbiAgICAgICAgcmV0dXJuIHRleHRfZm9ybWF0LiRwYXJzZVJhdyhjb250ZW50KTtcbiAgICB9XG4gICAgcmV0dXJuIEpTT04ucGFyc2UoY29udGVudCk7XG59XG5leHBvcnQgZnVuY3Rpb24gaGFzQXV0b1BhcnNlYWJsZUlucHV0KHBhcmFtcykge1xuICAgIGlmIChpc0F1dG9QYXJzYWJsZVJlc3BvbnNlRm9ybWF0KHBhcmFtcy50ZXh0Py5mb3JtYXQpKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG59XG5leHBvcnQgZnVuY3Rpb24gbWFrZVBhcnNlYWJsZVJlc3BvbnNlVG9vbCh0b29sLCB7IHBhcnNlciwgY2FsbGJhY2ssIH0pIHtcbiAgICBjb25zdCBvYmogPSB7IC4uLnRvb2wgfTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydGllcyhvYmosIHtcbiAgICAgICAgJGJyYW5kOiB7XG4gICAgICAgICAgICB2YWx1ZTogJ2F1dG8tcGFyc2VhYmxlLXRvb2wnLFxuICAgICAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIH0sXG4gICAgICAgICRwYXJzZVJhdzoge1xuICAgICAgICAgICAgdmFsdWU6IHBhcnNlcixcbiAgICAgICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICB9LFxuICAgICAgICAkY2FsbGJhY2s6IHtcbiAgICAgICAgICAgIHZhbHVlOiBjYWxsYmFjayxcbiAgICAgICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICB9LFxuICAgIH0pO1xuICAgIHJldHVybiBvYmo7XG59XG5leHBvcnQgZnVuY3Rpb24gaXNBdXRvUGFyc2FibGVUb29sKHRvb2wpIHtcbiAgICByZXR1cm4gdG9vbD8uWyckYnJhbmQnXSA9PT0gJ2F1dG8tcGFyc2VhYmxlLXRvb2wnO1xufVxuZnVuY3Rpb24gZ2V0SW5wdXRUb29sQnlOYW1lKGlucHV0X3Rvb2xzLCBuYW1lKSB7XG4gICAgcmV0dXJuIGlucHV0X3Rvb2xzLmZpbmQoKHRvb2wpID0+IHRvb2wudHlwZSA9PT0gJ2Z1bmN0aW9uJyAmJiB0b29sLm5hbWUgPT09IG5hbWUpO1xufVxuZnVuY3Rpb24gcGFyc2VUb29sQ2FsbChwYXJhbXMsIHRvb2xDYWxsKSB7XG4gICAgY29uc3QgaW5wdXRUb29sID0gZ2V0SW5wdXRUb29sQnlOYW1lKHBhcmFtcy50b29scyA/PyBbXSwgdG9vbENhbGwubmFtZSk7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgLi4udG9vbENhbGwsXG4gICAgICAgIC4uLnRvb2xDYWxsLFxuICAgICAgICBwYXJzZWRfYXJndW1lbnRzOiBpc0F1dG9QYXJzYWJsZVRvb2woaW5wdXRUb29sKSA/IGlucHV0VG9vbC4kcGFyc2VSYXcodG9vbENhbGwuYXJndW1lbnRzKVxuICAgICAgICAgICAgOiBpbnB1dFRvb2w/LnN0cmljdCA/IEpTT04ucGFyc2UodG9vbENhbGwuYXJndW1lbnRzKVxuICAgICAgICAgICAgICAgIDogbnVsbCxcbiAgICB9O1xufVxuZXhwb3J0IGZ1bmN0aW9uIHNob3VsZFBhcnNlVG9vbENhbGwocGFyYW1zLCB0b29sQ2FsbCkge1xuICAgIGlmICghcGFyYW1zKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgY29uc3QgaW5wdXRUb29sID0gZ2V0SW5wdXRUb29sQnlOYW1lKHBhcmFtcy50b29scyA/PyBbXSwgdG9vbENhbGwubmFtZSk7XG4gICAgcmV0dXJuIGlzQXV0b1BhcnNhYmxlVG9vbChpbnB1dFRvb2wpIHx8IGlucHV0VG9vbD8uc3RyaWN0IHx8IGZhbHNlO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHZhbGlkYXRlSW5wdXRUb29scyh0b29scykge1xuICAgIGZvciAoY29uc3QgdG9vbCBvZiB0b29scyA/PyBbXSkge1xuICAgICAgICBpZiAodG9vbC50eXBlICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgT3BlbkFJRXJyb3IoYEN1cnJlbnRseSBvbmx5IFxcYGZ1bmN0aW9uXFxgIHRvb2wgdHlwZXMgc3VwcG9ydCBhdXRvLXBhcnNpbmc7IFJlY2VpdmVkIFxcYCR7dG9vbC50eXBlfVxcYGApO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0b29sLmZ1bmN0aW9uLnN0cmljdCAhPT0gdHJ1ZSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IE9wZW5BSUVycm9yKGBUaGUgXFxgJHt0b29sLmZ1bmN0aW9uLm5hbWV9XFxgIHRvb2wgaXMgbm90IG1hcmtlZCB3aXRoIFxcYHN0cmljdDogdHJ1ZVxcYC4gT25seSBzdHJpY3QgZnVuY3Rpb24gdG9vbHMgY2FuIGJlIGF1dG8tcGFyc2VkYCk7XG4gICAgICAgIH1cbiAgICB9XG59XG5leHBvcnQgZnVuY3Rpb24gYWRkT3V0cHV0VGV4dChyc3ApIHtcbiAgICBjb25zdCB0ZXh0cyA9IFtdO1xuICAgIGZvciAoY29uc3Qgb3V0cHV0IG9mIHJzcC5vdXRwdXQpIHtcbiAgICAgICAgaWYgKG91dHB1dC50eXBlICE9PSAnbWVzc2FnZScpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGZvciAoY29uc3QgY29udGVudCBvZiBvdXRwdXQuY29udGVudCkge1xuICAgICAgICAgICAgaWYgKGNvbnRlbnQudHlwZSA9PT0gJ291dHB1dF90ZXh0Jykge1xuICAgICAgICAgICAgICAgIHRleHRzLnB1c2goY29udGVudC50ZXh0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICByc3Aub3V0cHV0X3RleHQgPSB0ZXh0cy5qb2luKCcnKTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVJlc3BvbnNlc1BhcnNlci5tanMubWFwIiwiZXhwb3J0IGZ1bmN0aW9uIHRvU3RyaWN0SnNvblNjaGVtYShzY2hlbWEpIHtcbiAgICBpZiAoc2NoZW1hLnR5cGUgIT09ICdvYmplY3QnKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgUm9vdCBzY2hlbWEgbXVzdCBoYXZlIHR5cGU6ICdvYmplY3QnIGJ1dCBnb3QgdHlwZTogJHtzY2hlbWEudHlwZSA/IGAnJHtzY2hlbWEudHlwZX0nYCA6ICd1bmRlZmluZWQnfWApO1xuICAgIH1cbiAgICBjb25zdCBzY2hlbWFDb3B5ID0gc3RydWN0dXJlZENsb25lKHNjaGVtYSk7XG4gICAgcmV0dXJuIGVuc3VyZVN0cmljdEpzb25TY2hlbWEoc2NoZW1hQ29weSwgW10sIHNjaGVtYUNvcHkpO1xufVxuZnVuY3Rpb24gaXNOdWxsYWJsZShzY2hlbWEpIHtcbiAgICBpZiAodHlwZW9mIHNjaGVtYSA9PT0gJ2Jvb2xlYW4nKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgaWYgKHNjaGVtYS50eXBlID09PSAnbnVsbCcpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGZvciAoY29uc3Qgb25lT2ZWYXJpYW50IG9mIHNjaGVtYS5vbmVPZiA/PyBbXSkge1xuICAgICAgICBpZiAoaXNOdWxsYWJsZShvbmVPZlZhcmlhbnQpKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBmb3IgKGNvbnN0IGFsbE9mVmFyaWFudCBvZiBzY2hlbWEuYW55T2YgPz8gW10pIHtcbiAgICAgICAgaWYgKGlzTnVsbGFibGUoYWxsT2ZWYXJpYW50KSkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xufVxuLyoqXG4gKiBNdXRhdGVzIHRoZSBnaXZlbiBKU09OIHNjaGVtYSB0byBlbnN1cmUgaXQgY29uZm9ybXMgdG8gdGhlIGBzdHJpY3RgIHN0YW5kYXJkXG4gKiB0aGF0IHRoZSBBUEkgZXhwZWN0cy5cbiAqL1xuZnVuY3Rpb24gZW5zdXJlU3RyaWN0SnNvblNjaGVtYShqc29uU2NoZW1hLCBwYXRoLCByb290KSB7XG4gICAgaWYgKHR5cGVvZiBqc29uU2NoZW1hID09PSAnYm9vbGVhbicpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihgRXhwZWN0ZWQgb2JqZWN0IHNjaGVtYSBidXQgZ290IGJvb2xlYW47IHBhdGg9JHtwYXRoLmpvaW4oJy8nKX1gKTtcbiAgICB9XG4gICAgaWYgKCFpc09iamVjdChqc29uU2NoZW1hKSkge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKGBFeHBlY3RlZCAke0pTT04uc3RyaW5naWZ5KGpzb25TY2hlbWEpfSB0byBiZSBhbiBvYmplY3Q7IHBhdGg9JHtwYXRoLmpvaW4oJy8nKX1gKTtcbiAgICB9XG4gICAgLy8gSGFuZGxlICRkZWZzIChub24tc3RhbmRhcmQgYnV0IHNvbWV0aW1lcyB1c2VkKVxuICAgIGNvbnN0IGRlZnMgPSBqc29uU2NoZW1hLiRkZWZzO1xuICAgIGlmIChpc09iamVjdChkZWZzKSkge1xuICAgICAgICBmb3IgKGNvbnN0IFtkZWZOYW1lLCBkZWZTY2hlbWFdIG9mIE9iamVjdC5lbnRyaWVzKGRlZnMpKSB7XG4gICAgICAgICAgICBlbnN1cmVTdHJpY3RKc29uU2NoZW1hKGRlZlNjaGVtYSwgWy4uLnBhdGgsICckZGVmcycsIGRlZk5hbWVdLCByb290KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvLyBIYW5kbGUgZGVmaW5pdGlvbnMgKGRyYWZ0LTA0IHN0eWxlLCBkZXByZWNhdGVkIGluIGRyYWZ0LTA3IGJ1dCBzdGlsbCB1c2VkKVxuICAgIGNvbnN0IGRlZmluaXRpb25zID0ganNvblNjaGVtYS5kZWZpbml0aW9ucztcbiAgICBpZiAoaXNPYmplY3QoZGVmaW5pdGlvbnMpKSB7XG4gICAgICAgIGZvciAoY29uc3QgW2RlZmluaXRpb25OYW1lLCBkZWZpbml0aW9uU2NoZW1hXSBvZiBPYmplY3QuZW50cmllcyhkZWZpbml0aW9ucykpIHtcbiAgICAgICAgICAgIGVuc3VyZVN0cmljdEpzb25TY2hlbWEoZGVmaW5pdGlvblNjaGVtYSwgWy4uLnBhdGgsICdkZWZpbml0aW9ucycsIGRlZmluaXRpb25OYW1lXSwgcm9vdCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLy8gQWRkIGFkZGl0aW9uYWxQcm9wZXJ0aWVzOiBmYWxzZSB0byBvYmplY3QgdHlwZXNcbiAgICBjb25zdCB0eXAgPSBqc29uU2NoZW1hLnR5cGU7XG4gICAgaWYgKHR5cCA9PT0gJ29iamVjdCcgJiYgISgnYWRkaXRpb25hbFByb3BlcnRpZXMnIGluIGpzb25TY2hlbWEpKSB7XG4gICAgICAgIGpzb25TY2hlbWEuYWRkaXRpb25hbFByb3BlcnRpZXMgPSBmYWxzZTtcbiAgICB9XG4gICAgY29uc3QgcmVxdWlyZWQgPSBqc29uU2NoZW1hLnJlcXVpcmVkID8/IFtdO1xuICAgIC8vIEhhbmRsZSBvYmplY3QgcHJvcGVydGllc1xuICAgIGNvbnN0IHByb3BlcnRpZXMgPSBqc29uU2NoZW1hLnByb3BlcnRpZXM7XG4gICAgaWYgKGlzT2JqZWN0KHByb3BlcnRpZXMpKSB7XG4gICAgICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKHByb3BlcnRpZXMpKSB7XG4gICAgICAgICAgICBpZiAoIWlzTnVsbGFibGUodmFsdWUpICYmICFyZXF1aXJlZC5pbmNsdWRlcyhrZXkpKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBab2QgZmllbGQgYXQgXFxgJHtbLi4ucGF0aCwgJ3Byb3BlcnRpZXMnLCBrZXldLmpvaW4oJy8nKX1cXGAgdXNlcyBcXGAub3B0aW9uYWwoKVxcYCB3aXRob3V0IFxcYC5udWxsYWJsZSgpXFxgIHdoaWNoIGlzIG5vdCBzdXBwb3J0ZWQgYnkgdGhlIEFQSS4gU2VlOiBodHRwczovL3BsYXRmb3JtLm9wZW5haS5jb20vZG9jcy9ndWlkZXMvc3RydWN0dXJlZC1vdXRwdXRzP2FwaS1tb2RlPXJlc3BvbnNlcyNhbGwtZmllbGRzLW11c3QtYmUtcmVxdWlyZWRgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBqc29uU2NoZW1hLnJlcXVpcmVkID0gT2JqZWN0LmtleXMocHJvcGVydGllcyk7XG4gICAgICAgIGpzb25TY2hlbWEucHJvcGVydGllcyA9IE9iamVjdC5mcm9tRW50cmllcyhPYmplY3QuZW50cmllcyhwcm9wZXJ0aWVzKS5tYXAoKFtrZXksIHByb3BTY2hlbWFdKSA9PiBbXG4gICAgICAgICAgICBrZXksXG4gICAgICAgICAgICBlbnN1cmVTdHJpY3RKc29uU2NoZW1hKHByb3BTY2hlbWEsIFsuLi5wYXRoLCAncHJvcGVydGllcycsIGtleV0sIHJvb3QpLFxuICAgICAgICBdKSk7XG4gICAgfVxuICAgIC8vIEhhbmRsZSBhcnJheXNcbiAgICBjb25zdCBpdGVtcyA9IGpzb25TY2hlbWEuaXRlbXM7XG4gICAgaWYgKGlzT2JqZWN0KGl0ZW1zKSkge1xuICAgICAgICBqc29uU2NoZW1hLml0ZW1zID0gZW5zdXJlU3RyaWN0SnNvblNjaGVtYShpdGVtcywgWy4uLnBhdGgsICdpdGVtcyddLCByb290KTtcbiAgICB9XG4gICAgLy8gSGFuZGxlIHVuaW9ucyAoYW55T2YpXG4gICAgY29uc3QgYW55T2YgPSBqc29uU2NoZW1hLmFueU9mO1xuICAgIGlmIChBcnJheS5pc0FycmF5KGFueU9mKSkge1xuICAgICAgICBqc29uU2NoZW1hLmFueU9mID0gYW55T2YubWFwKCh2YXJpYW50LCBpKSA9PiBlbnN1cmVTdHJpY3RKc29uU2NoZW1hKHZhcmlhbnQsIFsuLi5wYXRoLCAnYW55T2YnLCBTdHJpbmcoaSldLCByb290KSk7XG4gICAgfVxuICAgIC8vIEhhbmRsZSBpbnRlcnNlY3Rpb25zIChhbGxPZilcbiAgICBjb25zdCBhbGxPZiA9IGpzb25TY2hlbWEuYWxsT2Y7XG4gICAgaWYgKEFycmF5LmlzQXJyYXkoYWxsT2YpKSB7XG4gICAgICAgIGlmIChhbGxPZi5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICAgIGNvbnN0IHJlc29sdmVkID0gZW5zdXJlU3RyaWN0SnNvblNjaGVtYShhbGxPZlswXSwgWy4uLnBhdGgsICdhbGxPZicsICcwJ10sIHJvb3QpO1xuICAgICAgICAgICAgT2JqZWN0LmFzc2lnbihqc29uU2NoZW1hLCByZXNvbHZlZCk7XG4gICAgICAgICAgICBkZWxldGUganNvblNjaGVtYS5hbGxPZjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGpzb25TY2hlbWEuYWxsT2YgPSBhbGxPZi5tYXAoKGVudHJ5LCBpKSA9PiBlbnN1cmVTdHJpY3RKc29uU2NoZW1hKGVudHJ5LCBbLi4ucGF0aCwgJ2FsbE9mJywgU3RyaW5nKGkpXSwgcm9vdCkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8vIFN0cmlwIGBudWxsYCBkZWZhdWx0cyBhcyB0aGVyZSdzIG5vIG1lYW5pbmdmdWwgZGlzdGluY3Rpb25cbiAgICBpZiAoanNvblNjaGVtYS5kZWZhdWx0ID09PSBudWxsKSB7XG4gICAgICAgIGRlbGV0ZSBqc29uU2NoZW1hLmRlZmF1bHQ7XG4gICAgfVxuICAgIC8vIEhhbmRsZSAkcmVmIHdpdGggYWRkaXRpb25hbCBwcm9wZXJ0aWVzXG4gICAgY29uc3QgcmVmID0ganNvblNjaGVtYS4kcmVmO1xuICAgIGlmIChyZWYgJiYgaGFzTW9yZVRoYW5OS2V5cyhqc29uU2NoZW1hLCAxKSkge1xuICAgICAgICBpZiAodHlwZW9mIHJlZiAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoYFJlY2VpdmVkIG5vbi1zdHJpbmcgJHJlZiAtICR7cmVmfTsgcGF0aD0ke3BhdGguam9pbignLycpfWApO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHJlc29sdmVkID0gcmVzb2x2ZVJlZihyb290LCByZWYpO1xuICAgICAgICBpZiAodHlwZW9mIHJlc29sdmVkID09PSAnYm9vbGVhbicpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgRXhwZWN0ZWQgXFxgJHJlZjogJHtyZWZ9XFxgIHRvIHJlc29sdmUgdG8gYW4gb2JqZWN0IHNjaGVtYSBidXQgZ290IGJvb2xlYW5gKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWlzT2JqZWN0KHJlc29sdmVkKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBFeHBlY3RlZCBcXGAkcmVmOiAke3JlZn1cXGAgdG8gcmVzb2x2ZSB0byBhbiBvYmplY3QgYnV0IGdvdCAke0pTT04uc3RyaW5naWZ5KHJlc29sdmVkKX1gKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBQcm9wZXJ0aWVzIGZyb20gdGhlIGpzb24gc2NoZW1hIHRha2UgcHJpb3JpdHkgb3ZlciB0aGUgb25lcyBvbiB0aGUgYCRyZWZgXG4gICAgICAgIE9iamVjdC5hc3NpZ24oanNvblNjaGVtYSwgeyAuLi5yZXNvbHZlZCwgLi4uanNvblNjaGVtYSB9KTtcbiAgICAgICAgZGVsZXRlIGpzb25TY2hlbWEuJHJlZjtcbiAgICAgICAgLy8gU2luY2UgdGhlIHNjaGVtYSBleHBhbmRlZCBmcm9tIGAkcmVmYCBtaWdodCBub3QgaGF2ZSBgYWRkaXRpb25hbFByb3BlcnRpZXM6IGZhbHNlYCBhcHBsaWVkLFxuICAgICAgICAvLyB3ZSBjYWxsIGBlbnN1cmVTdHJpY3RKc29uU2NoZW1hYCBhZ2FpbiB0byBmaXggdGhlIGlubGluZWQgc2NoZW1hIGFuZCBlbnN1cmUgaXQncyB2YWxpZC5cbiAgICAgICAgcmV0dXJuIGVuc3VyZVN0cmljdEpzb25TY2hlbWEoanNvblNjaGVtYSwgcGF0aCwgcm9vdCk7XG4gICAgfVxuICAgIHJldHVybiBqc29uU2NoZW1hO1xufVxuZnVuY3Rpb24gcmVzb2x2ZVJlZihyb290LCByZWYpIHtcbiAgICBpZiAoIXJlZi5zdGFydHNXaXRoKCcjLycpKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgVW5leHBlY3RlZCAkcmVmIGZvcm1hdCAke0pTT04uc3RyaW5naWZ5KHJlZil9OyBEb2VzIG5vdCBzdGFydCB3aXRoICMvYCk7XG4gICAgfVxuICAgIGNvbnN0IHBhdGhQYXJ0cyA9IHJlZi5zbGljZSgyKS5zcGxpdCgnLycpO1xuICAgIGxldCByZXNvbHZlZCA9IHJvb3Q7XG4gICAgZm9yIChjb25zdCBrZXkgb2YgcGF0aFBhcnRzKSB7XG4gICAgICAgIGlmICghaXNPYmplY3QocmVzb2x2ZWQpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYGVuY291bnRlcmVkIG5vbi1vYmplY3QgZW50cnkgd2hpbGUgcmVzb2x2aW5nICR7cmVmfSAtICR7SlNPTi5zdHJpbmdpZnkocmVzb2x2ZWQpfWApO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHZhbHVlID0gcmVzb2x2ZWRba2V5XTtcbiAgICAgICAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgS2V5ICR7a2V5fSBub3QgZm91bmQgd2hpbGUgcmVzb2x2aW5nICR7cmVmfWApO1xuICAgICAgICB9XG4gICAgICAgIHJlc29sdmVkID0gdmFsdWU7XG4gICAgfVxuICAgIHJldHVybiByZXNvbHZlZDtcbn1cbmZ1bmN0aW9uIGlzT2JqZWN0KG9iaikge1xuICAgIHJldHVybiB0eXBlb2Ygb2JqID09PSAnb2JqZWN0JyAmJiBvYmogIT09IG51bGwgJiYgIUFycmF5LmlzQXJyYXkob2JqKTtcbn1cbmZ1bmN0aW9uIGhhc01vcmVUaGFuTktleXMob2JqLCBuKSB7XG4gICAgbGV0IGkgPSAwO1xuICAgIGZvciAoY29uc3QgXyBpbiBvYmopIHtcbiAgICAgICAgaSsrO1xuICAgICAgICBpZiAoaSA+IG4pIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXRyYW5zZm9ybS5tanMubWFwIiwiaW1wb3J0ICogYXMgejQgZnJvbSAnem9kL3Y0JztcbmltcG9ydCB7IG1ha2VQYXJzZWFibGVSZXNwb25zZUZvcm1hdCwgbWFrZVBhcnNlYWJsZVRleHRGb3JtYXQsIG1ha2VQYXJzZWFibGVUb29sLCB9IGZyb20gXCIuLi9saWIvcGFyc2VyLm1qc1wiO1xuaW1wb3J0IHsgem9kVG9Kc29uU2NoZW1hIGFzIF96b2RUb0pzb25TY2hlbWEgfSBmcm9tIFwiLi4vX3ZlbmRvci96b2QtdG8tanNvbi1zY2hlbWEvaW5kZXgubWpzXCI7XG5pbXBvcnQgeyBtYWtlUGFyc2VhYmxlUmVzcG9uc2VUb29sIH0gZnJvbSBcIi4uL2xpYi9SZXNwb25zZXNQYXJzZXIubWpzXCI7XG5pbXBvcnQgeyB0b1N0cmljdEpzb25TY2hlbWEgfSBmcm9tIFwiLi4vbGliL3RyYW5zZm9ybS5tanNcIjtcbmZ1bmN0aW9uIHpvZFYzVG9Kc29uU2NoZW1hKHNjaGVtYSwgb3B0aW9ucykge1xuICAgIHJldHVybiBfem9kVG9Kc29uU2NoZW1hKHNjaGVtYSwge1xuICAgICAgICBvcGVuYWlTdHJpY3RNb2RlOiB0cnVlLFxuICAgICAgICBuYW1lOiBvcHRpb25zLm5hbWUsXG4gICAgICAgIG5hbWVTdHJhdGVneTogJ2R1cGxpY2F0ZS1yZWYnLFxuICAgICAgICAkcmVmU3RyYXRlZ3k6ICdleHRyYWN0LXRvLXJvb3QnLFxuICAgICAgICBudWxsYWJsZVN0cmF0ZWd5OiAncHJvcGVydHknLFxuICAgIH0pO1xufVxuZnVuY3Rpb24gem9kVjRUb0pzb25TY2hlbWEoc2NoZW1hKSB7XG4gICAgcmV0dXJuIHRvU3RyaWN0SnNvblNjaGVtYSh6NC50b0pTT05TY2hlbWEoc2NoZW1hLCB7XG4gICAgICAgIHRhcmdldDogJ2RyYWZ0LTcnLFxuICAgIH0pKTtcbn1cbmZ1bmN0aW9uIGlzWm9kVjQoem9kT2JqZWN0KSB7XG4gICAgcmV0dXJuICdfem9kJyBpbiB6b2RPYmplY3Q7XG59XG4vKipcbiAqIENyZWF0ZXMgYSBjaGF0IGNvbXBsZXRpb24gYEpTT05TY2hlbWFgIHJlc3BvbnNlIGZvcm1hdCBvYmplY3QgZnJvbVxuICogdGhlIGdpdmVuIFpvZCBzY2hlbWEuXG4gKlxuICogSWYgdGhpcyBpcyBwYXNzZWQgdG8gdGhlIGAucGFyc2UoKWAsIGAuc3RyZWFtKClgIG9yIGAucnVuVG9vbHMoKWBcbiAqIGNoYXQgY29tcGxldGlvbiBtZXRob2RzIHRoZW4gdGhlIHJlc3BvbnNlIG1lc3NhZ2Ugd2lsbCBjb250YWluIGFcbiAqIGAucGFyc2VkYCBwcm9wZXJ0eSB0aGF0IGlzIHRoZSByZXN1bHQgb2YgcGFyc2luZyB0aGUgY29udGVudCB3aXRoXG4gKiB0aGUgZ2l2ZW4gWm9kIG9iamVjdC5cbiAqXG4gKiBgYGB0c1xuICogY29uc3QgY29tcGxldGlvbiA9IGF3YWl0IGNsaWVudC5jaGF0LmNvbXBsZXRpb25zLnBhcnNlKHtcbiAqICAgIG1vZGVsOiAnZ3B0LTRvLTIwMjQtMDgtMDYnLFxuICogICAgbWVzc2FnZXM6IFtcbiAqICAgICAgeyByb2xlOiAnc3lzdGVtJywgY29udGVudDogJ1lvdSBhcmUgYSBoZWxwZnVsIG1hdGggdHV0b3IuJyB9LFxuICogICAgICB7IHJvbGU6ICd1c2VyJywgY29udGVudDogJ3NvbHZlIDh4ICsgMzEgPSAyJyB9LFxuICogICAgXSxcbiAqICAgIHJlc3BvbnNlX2Zvcm1hdDogem9kUmVzcG9uc2VGb3JtYXQoXG4gKiAgICAgIHoub2JqZWN0KHtcbiAqICAgICAgICBzdGVwczogei5hcnJheSh6Lm9iamVjdCh7XG4gKiAgICAgICAgICBleHBsYW5hdGlvbjogei5zdHJpbmcoKSxcbiAqICAgICAgICAgIGFuc3dlcjogei5zdHJpbmcoKSxcbiAqICAgICAgICB9KSksXG4gKiAgICAgICAgZmluYWxfYW5zd2VyOiB6LnN0cmluZygpLFxuICogICAgICB9KSxcbiAqICAgICAgJ21hdGhfYW5zd2VyJyxcbiAqICAgICksXG4gKiAgfSk7XG4gKiAgY29uc3QgbWVzc2FnZSA9IGNvbXBsZXRpb24uY2hvaWNlc1swXT8ubWVzc2FnZTtcbiAqICBpZiAobWVzc2FnZT8ucGFyc2VkKSB7XG4gKiAgICBjb25zb2xlLmxvZyhtZXNzYWdlLnBhcnNlZCk7XG4gKiAgICBjb25zb2xlLmxvZyhtZXNzYWdlLnBhcnNlZC5maW5hbF9hbnN3ZXIpO1xuICogfVxuICogYGBgXG4gKlxuICogVGhpcyBjYW4gYmUgcGFzc2VkIGRpcmVjdGx5IHRvIHRoZSBgLmNyZWF0ZSgpYCBtZXRob2QgYnV0IHdpbGwgbm90XG4gKiByZXN1bHQgaW4gYW55IGF1dG9tYXRpYyBwYXJzaW5nLCB5b3UnbGwgaGF2ZSB0byBwYXJzZSB0aGUgcmVzcG9uc2UgeW91cnNlbGYuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB6b2RSZXNwb25zZUZvcm1hdCh6b2RPYmplY3QsIG5hbWUsIHByb3BzKSB7XG4gICAgcmV0dXJuIG1ha2VQYXJzZWFibGVSZXNwb25zZUZvcm1hdCh7XG4gICAgICAgIHR5cGU6ICdqc29uX3NjaGVtYScsXG4gICAgICAgIGpzb25fc2NoZW1hOiB7XG4gICAgICAgICAgICAuLi5wcm9wcyxcbiAgICAgICAgICAgIG5hbWUsXG4gICAgICAgICAgICBzdHJpY3Q6IHRydWUsXG4gICAgICAgICAgICBzY2hlbWE6IGlzWm9kVjQoem9kT2JqZWN0KSA/IHpvZFY0VG9Kc29uU2NoZW1hKHpvZE9iamVjdCkgOiB6b2RWM1RvSnNvblNjaGVtYSh6b2RPYmplY3QsIHsgbmFtZSB9KSxcbiAgICAgICAgfSxcbiAgICB9LCAoY29udGVudCkgPT4gem9kT2JqZWN0LnBhcnNlKEpTT04ucGFyc2UoY29udGVudCkpKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiB6b2RUZXh0Rm9ybWF0KHpvZE9iamVjdCwgbmFtZSwgcHJvcHMpIHtcbiAgICByZXR1cm4gbWFrZVBhcnNlYWJsZVRleHRGb3JtYXQoe1xuICAgICAgICB0eXBlOiAnanNvbl9zY2hlbWEnLFxuICAgICAgICAuLi5wcm9wcyxcbiAgICAgICAgbmFtZSxcbiAgICAgICAgc3RyaWN0OiB0cnVlLFxuICAgICAgICBzY2hlbWE6IGlzWm9kVjQoem9kT2JqZWN0KSA/IHpvZFY0VG9Kc29uU2NoZW1hKHpvZE9iamVjdCkgOiB6b2RWM1RvSnNvblNjaGVtYSh6b2RPYmplY3QsIHsgbmFtZSB9KSxcbiAgICB9LCAoY29udGVudCkgPT4gem9kT2JqZWN0LnBhcnNlKEpTT04ucGFyc2UoY29udGVudCkpKTtcbn1cbi8qKlxuICogQ3JlYXRlcyBhIGNoYXQgY29tcGxldGlvbiBgZnVuY3Rpb25gIHRvb2wgdGhhdCBjYW4gYmUgaW52b2tlZFxuICogYXV0b21hdGljYWxseSBieSB0aGUgY2hhdCBjb21wbGV0aW9uIGAucnVuVG9vbHMoKWAgbWV0aG9kIG9yIGF1dG9tYXRpY2FsbHlcbiAqIHBhcnNlZCBieSBgLnBhcnNlKClgIC8gYC5zdHJlYW0oKWAuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB6b2RGdW5jdGlvbihvcHRpb25zKSB7XG4gICAgLy8gQHRzLWV4cGVjdC1lcnJvciBUT0RPXG4gICAgcmV0dXJuIG1ha2VQYXJzZWFibGVUb29sKHtcbiAgICAgICAgdHlwZTogJ2Z1bmN0aW9uJyxcbiAgICAgICAgZnVuY3Rpb246IHtcbiAgICAgICAgICAgIG5hbWU6IG9wdGlvbnMubmFtZSxcbiAgICAgICAgICAgIHBhcmFtZXRlcnM6IGlzWm9kVjQob3B0aW9ucy5wYXJhbWV0ZXJzKSA/XG4gICAgICAgICAgICAgICAgem9kVjRUb0pzb25TY2hlbWEob3B0aW9ucy5wYXJhbWV0ZXJzKVxuICAgICAgICAgICAgICAgIDogem9kVjNUb0pzb25TY2hlbWEob3B0aW9ucy5wYXJhbWV0ZXJzLCB7IG5hbWU6IG9wdGlvbnMubmFtZSB9KSxcbiAgICAgICAgICAgIHN0cmljdDogdHJ1ZSxcbiAgICAgICAgICAgIC4uLihvcHRpb25zLmRlc2NyaXB0aW9uID8geyBkZXNjcmlwdGlvbjogb3B0aW9ucy5kZXNjcmlwdGlvbiB9IDogdW5kZWZpbmVkKSxcbiAgICAgICAgfSxcbiAgICB9LCB7XG4gICAgICAgIGNhbGxiYWNrOiBvcHRpb25zLmZ1bmN0aW9uLFxuICAgICAgICBwYXJzZXI6IChhcmdzKSA9PiBvcHRpb25zLnBhcmFtZXRlcnMucGFyc2UoSlNPTi5wYXJzZShhcmdzKSksXG4gICAgfSk7XG59XG5leHBvcnQgZnVuY3Rpb24gem9kUmVzcG9uc2VzRnVuY3Rpb24ob3B0aW9ucykge1xuICAgIHJldHVybiBtYWtlUGFyc2VhYmxlUmVzcG9uc2VUb29sKHtcbiAgICAgICAgdHlwZTogJ2Z1bmN0aW9uJyxcbiAgICAgICAgbmFtZTogb3B0aW9ucy5uYW1lLFxuICAgICAgICBwYXJhbWV0ZXJzOiBpc1pvZFY0KG9wdGlvbnMucGFyYW1ldGVycykgP1xuICAgICAgICAgICAgem9kVjRUb0pzb25TY2hlbWEob3B0aW9ucy5wYXJhbWV0ZXJzKVxuICAgICAgICAgICAgOiB6b2RWM1RvSnNvblNjaGVtYShvcHRpb25zLnBhcmFtZXRlcnMsIHsgbmFtZTogb3B0aW9ucy5uYW1lIH0pLFxuICAgICAgICBzdHJpY3Q6IHRydWUsXG4gICAgICAgIC4uLihvcHRpb25zLmRlc2NyaXB0aW9uID8geyBkZXNjcmlwdGlvbjogb3B0aW9ucy5kZXNjcmlwdGlvbiB9IDogdW5kZWZpbmVkKSxcbiAgICB9LCB7XG4gICAgICAgIGNhbGxiYWNrOiBvcHRpb25zLmZ1bmN0aW9uLFxuICAgICAgICBwYXJzZXI6IChhcmdzKSA9PiBvcHRpb25zLnBhcmFtZXRlcnMucGFyc2UoSlNPTi5wYXJzZShhcmdzKSksXG4gICAgfSk7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD16b2QubWpzLm1hcCIsIi8qKlxuICogQmFzZSBjbGFzcyBmb3IgYWxsIGVycm9ycyB0aHJvd24gYnkgdGhlIGxpYnJhcnkuXG4gKi9cbmV4cG9ydCBjbGFzcyBBZ2VudHNFcnJvciBleHRlbmRzIEVycm9yIHtcbiAgICBzdGF0ZTtcbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlLCBzdGF0ZSkge1xuICAgICAgICBzdXBlcihtZXNzYWdlKTtcbiAgICAgICAgdGhpcy5zdGF0ZSA9IHN0YXRlO1xuICAgIH1cbn1cbi8qKlxuICogU3lzdGVtIGVycm9yIHRocm93biB3aGVuIHRoZSBsaWJyYXJ5IGVuY291bnRlcnMgYW4gZXJyb3IgdGhhdCBpcyBub3QgY2F1c2VkIGJ5IHRoZSB1c2VyJ3NcbiAqIG1pc2NvbmZpZ3VyYXRpb24uXG4gKi9cbmV4cG9ydCBjbGFzcyBTeXN0ZW1FcnJvciBleHRlbmRzIEFnZW50c0Vycm9yIHtcbn1cbi8qKlxuICogRXJyb3IgdGhyb3duIHdoZW4gdGhlIG1heGltdW0gbnVtYmVyIG9mIHR1cm5zIGlzIGV4Y2VlZGVkLlxuICovXG5leHBvcnQgY2xhc3MgTWF4VHVybnNFeGNlZWRlZEVycm9yIGV4dGVuZHMgQWdlbnRzRXJyb3Ige1xufVxuLyoqXG4gKiBFcnJvciB0aHJvd24gd2hlbiBhIG1vZGVsIGJlaGF2aW9yIGlzIHVuZXhwZWN0ZWQuXG4gKi9cbmV4cG9ydCBjbGFzcyBNb2RlbEJlaGF2aW9yRXJyb3IgZXh0ZW5kcyBBZ2VudHNFcnJvciB7XG59XG4vKipcbiAqIEVycm9yIHRocm93biB3aGVuIHRoZSBlcnJvciBpcyBjYXVzZWQgYnkgdGhlIGxpYnJhcnkgdXNlcidzIG1pc2NvbmZpZ3VyYXRpb24uXG4gKi9cbmV4cG9ydCBjbGFzcyBVc2VyRXJyb3IgZXh0ZW5kcyBBZ2VudHNFcnJvciB7XG59XG4vKipcbiAqIEVycm9yIHRocm93biB3aGVuIGEgZ3VhcmRyYWlsIGV4ZWN1dGlvbiBmYWlscy5cbiAqL1xuZXhwb3J0IGNsYXNzIEd1YXJkcmFpbEV4ZWN1dGlvbkVycm9yIGV4dGVuZHMgQWdlbnRzRXJyb3Ige1xuICAgIGVycm9yO1xuICAgIGNvbnN0cnVjdG9yKG1lc3NhZ2UsIGVycm9yLCBzdGF0ZSkge1xuICAgICAgICBzdXBlcihtZXNzYWdlLCBzdGF0ZSk7XG4gICAgICAgIHRoaXMuZXJyb3IgPSBlcnJvcjtcbiAgICB9XG59XG4vKipcbiAqIEVycm9yIHRocm93biB3aGVuIGEgdG9vbCBjYWxsIGZhaWxzLlxuICovXG5leHBvcnQgY2xhc3MgVG9vbENhbGxFcnJvciBleHRlbmRzIEFnZW50c0Vycm9yIHtcbiAgICBlcnJvcjtcbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlLCBlcnJvciwgc3RhdGUpIHtcbiAgICAgICAgc3VwZXIobWVzc2FnZSwgc3RhdGUpO1xuICAgICAgICB0aGlzLmVycm9yID0gZXJyb3I7XG4gICAgfVxufVxuLyoqXG4gKiBFcnJvciB0aHJvd24gd2hlbiBhbiBpbnB1dCBndWFyZHJhaWwgdHJpcHdpcmUgaXMgdHJpZ2dlcmVkLlxuICovXG5leHBvcnQgY2xhc3MgSW5wdXRHdWFyZHJhaWxUcmlwd2lyZVRyaWdnZXJlZCBleHRlbmRzIEFnZW50c0Vycm9yIHtcbiAgICByZXN1bHQ7XG4gICAgY29uc3RydWN0b3IobWVzc2FnZSwgcmVzdWx0LCBzdGF0ZSkge1xuICAgICAgICBzdXBlcihtZXNzYWdlLCBzdGF0ZSk7XG4gICAgICAgIHRoaXMucmVzdWx0ID0gcmVzdWx0O1xuICAgIH1cbn1cbi8qKlxuICogRXJyb3IgdGhyb3duIHdoZW4gYW4gb3V0cHV0IGd1YXJkcmFpbCB0cmlwd2lyZSBpcyB0cmlnZ2VyZWQuXG4gKi9cbmV4cG9ydCBjbGFzcyBPdXRwdXRHdWFyZHJhaWxUcmlwd2lyZVRyaWdnZXJlZCBleHRlbmRzIEFnZW50c0Vycm9yIHtcbiAgICByZXN1bHQ7XG4gICAgY29uc3RydWN0b3IobWVzc2FnZSwgcmVzdWx0LCBzdGF0ZSkge1xuICAgICAgICBzdXBlcihtZXNzYWdlLCBzdGF0ZSk7XG4gICAgICAgIHRoaXMucmVzdWx0ID0gcmVzdWx0O1xuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWVycm9ycy5tanMubWFwIiwiZXhwb3J0IGZ1bmN0aW9uIGFzWm9kVHlwZShzY2hlbWEpIHtcbiAgICByZXR1cm4gc2NoZW1hO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHJlYWRab2REZWZpbml0aW9uKGlucHV0KSB7XG4gICAgaWYgKHR5cGVvZiBpbnB1dCAhPT0gJ29iamVjdCcgfHwgaW5wdXQgPT09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG4gICAgY29uc3QgY2FuZGlkYXRlID0gaW5wdXQ7XG4gICAgcmV0dXJuIGNhbmRpZGF0ZS5fem9kPy5kZWYgfHwgY2FuZGlkYXRlLl9kZWYgfHwgY2FuZGlkYXRlLmRlZjtcbn1cbmV4cG9ydCBmdW5jdGlvbiByZWFkWm9kVHlwZShpbnB1dCkge1xuICAgIGNvbnN0IGRlZiA9IHJlYWRab2REZWZpbml0aW9uKGlucHV0KTtcbiAgICBpZiAoIWRlZikge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgICBjb25zdCByYXdUeXBlID0gKHR5cGVvZiBkZWYudHlwZU5hbWUgPT09ICdzdHJpbmcnICYmIGRlZi50eXBlTmFtZSkgfHxcbiAgICAgICAgKHR5cGVvZiBkZWYudHlwZSA9PT0gJ3N0cmluZycgJiYgZGVmLnR5cGUpO1xuICAgIGlmICh0eXBlb2YgcmF3VHlwZSAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG4gICAgY29uc3QgbG93ZXIgPSByYXdUeXBlLnRvTG93ZXJDYXNlKCk7XG4gICAgcmV0dXJuIGxvd2VyLnN0YXJ0c1dpdGgoJ3pvZCcpID8gbG93ZXIuc2xpY2UoMykgOiBsb3dlcjtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXpvZENvbXBhdC5tanMubWFwIiwiaW1wb3J0IHsgcmVhZFpvZERlZmluaXRpb24sIHJlYWRab2RUeXBlIH0gZnJvbSBcIi4vem9kQ29tcGF0Lm1qc1wiO1xuLyoqXG4gKiBWZXJpZmllcyB0aGF0IGFuIGlucHV0IGlzIGEgWm9kT2JqZWN0IHdpdGhvdXQgbmVlZGluZyB0byBoYXZlIFpvZCBhdCBydW50aW1lIHNpbmNlIGl0J3MgYW5cbiAqIG9wdGlvbmFsIGRlcGVuZGVuY3kuXG4gKiBAcGFyYW0gaW5wdXRcbiAqIEByZXR1cm5zXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc1pvZE9iamVjdChpbnB1dCkge1xuICAgIGNvbnN0IGRlZmluaXRpb24gPSByZWFkWm9kRGVmaW5pdGlvbihpbnB1dCk7XG4gICAgaWYgKCFkZWZpbml0aW9uKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgY29uc3QgdHlwZSA9IHJlYWRab2RUeXBlKGlucHV0KTtcbiAgICByZXR1cm4gdHlwZSA9PT0gJ29iamVjdCc7XG59XG4vKipcbiAqIFZlcmlmaWVzIHRoYXQgYW4gaW5wdXQgaXMgYW4gb2JqZWN0IHdpdGggYW4gYGlucHV0YCBwcm9wZXJ0eS5cbiAqIEBwYXJhbSBpbnB1dFxuICogQHJldHVybnNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzQWdlbnRUb29sSW5wdXQoaW5wdXQpIHtcbiAgICByZXR1cm4gKHR5cGVvZiBpbnB1dCA9PT0gJ29iamVjdCcgJiZcbiAgICAgICAgaW5wdXQgIT09IG51bGwgJiZcbiAgICAgICAgJ2lucHV0JyBpbiBpbnB1dCAmJlxuICAgICAgICB0eXBlb2YgaW5wdXQuaW5wdXQgPT09ICdzdHJpbmcnKTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXR5cGVHdWFyZHMubWpzLm1hcCIsImltcG9ydCB7IHJlYWRab2REZWZpbml0aW9uLCByZWFkWm9kVHlwZSB9IGZyb20gXCIuL3pvZENvbXBhdC5tanNcIjtcbmNvbnN0IEpTT05fU0NIRU1BX0RSQUZUXzA3ID0gJ2h0dHA6Ly9qc29uLXNjaGVtYS5vcmcvZHJhZnQtMDcvc2NoZW1hIyc7XG5jb25zdCBPUFRJT05BTF9XUkFQUEVSUyA9IG5ldyBTZXQoWydvcHRpb25hbCddKTtcbmNvbnN0IERFQ09SQVRPUl9XUkFQUEVSUyA9IG5ldyBTZXQoW1xuICAgICdicmFuZCcsXG4gICAgJ2JyYW5kZWQnLFxuICAgICdjYXRjaCcsXG4gICAgJ2RlZmF1bHQnLFxuICAgICdlZmZlY3RzJyxcbiAgICAncGlwZWxpbmUnLFxuICAgICdwaXBlJyxcbiAgICAncHJlZmF1bHQnLFxuICAgICdyZWFkb25seScsXG4gICAgJ3JlZmluZW1lbnQnLFxuICAgICd0cmFuc2Zvcm0nLFxuXSk7XG4vLyBQcmltaXRpdmUgbGVhZiBub2RlcyBtYXAgMToxIHRvIEpTT04gU2NoZW1hIHR5cGVzOyBldmVyeXRoaW5nIGVsc2UgaXMgaGFuZGxlZFxuLy8gYnkgdGhlIHNwZWNpYWxpc2VkIGJ1aWxkZXJzIGZ1cnRoZXIgZG93bi5cbmNvbnN0IFNJTVBMRV9UWVBFX01BUFBJTkcgPSB7XG4gICAgc3RyaW5nOiB7IHR5cGU6ICdzdHJpbmcnIH0sXG4gICAgbnVtYmVyOiB7IHR5cGU6ICdudW1iZXInIH0sXG4gICAgYmlnaW50OiB7IHR5cGU6ICdpbnRlZ2VyJyB9LFxuICAgIGJvb2xlYW46IHsgdHlwZTogJ2Jvb2xlYW4nIH0sXG4gICAgZGF0ZTogeyB0eXBlOiAnc3RyaW5nJywgZm9ybWF0OiAnZGF0ZS10aW1lJyB9LFxufTtcbmV4cG9ydCBmdW5jdGlvbiBoYXNKc29uU2NoZW1hT2JqZWN0U2hhcGUodmFsdWUpIHtcbiAgICByZXR1cm4gKHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiZcbiAgICAgICAgdmFsdWUgIT09IG51bGwgJiZcbiAgICAgICAgdmFsdWUudHlwZSA9PT0gJ29iamVjdCcgJiZcbiAgICAgICAgJ3Byb3BlcnRpZXMnIGluIHZhbHVlICYmXG4gICAgICAgICdhZGRpdGlvbmFsUHJvcGVydGllcycgaW4gdmFsdWUpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHpvZEpzb25TY2hlbWFDb21wYXQoaW5wdXQpIHtcbiAgICAvLyBBdHRlbXB0IHRvIGJ1aWxkIGFuIG9iamVjdCBzY2hlbWEgZnJvbSBab2QncyBpbnRlcm5hbCBzaGFwZS4gSWYgd2UgY2Fubm90XG4gICAgLy8gdW5kZXJzdGFuZCB0aGUgc3RydWN0dXJlIHdlIHJldHVybiB1bmRlZmluZWQsIGxldHRpbmcgY2FsbGVycyByYWlzZSBhXG4gICAgLy8gZGVzY3JpcHRpdmUgZXJyb3IgaW5zdGVhZCBvZiBlbWl0dGluZyBhbiBpbnZhbGlkIHNjaGVtYS5cbiAgICBjb25zdCBzY2hlbWEgPSBidWlsZE9iamVjdFNjaGVtYShpbnB1dCk7XG4gICAgaWYgKCFzY2hlbWEpIHtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG4gICAgaWYgKCFBcnJheS5pc0FycmF5KHNjaGVtYS5yZXF1aXJlZCkpIHtcbiAgICAgICAgc2NoZW1hLnJlcXVpcmVkID0gW107XG4gICAgfVxuICAgIGlmICh0eXBlb2Ygc2NoZW1hLmFkZGl0aW9uYWxQcm9wZXJ0aWVzID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICBzY2hlbWEuYWRkaXRpb25hbFByb3BlcnRpZXMgPSBmYWxzZTtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBzY2hlbWEuJHNjaGVtYSAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgc2NoZW1hLiRzY2hlbWEgPSBKU09OX1NDSEVNQV9EUkFGVF8wNztcbiAgICB9XG4gICAgcmV0dXJuIHNjaGVtYTtcbn1cbmZ1bmN0aW9uIGJ1aWxkT2JqZWN0U2NoZW1hKHZhbHVlKSB7XG4gICAgY29uc3Qgc2hhcGUgPSByZWFkU2hhcGUodmFsdWUpO1xuICAgIGlmICghc2hhcGUpIHtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG4gICAgY29uc3QgcHJvcGVydGllcyA9IHt9O1xuICAgIGNvbnN0IHJlcXVpcmVkID0gW107XG4gICAgZm9yIChjb25zdCBba2V5LCBmaWVsZF0gb2YgT2JqZWN0LmVudHJpZXMoc2hhcGUpKSB7XG4gICAgICAgIGNvbnN0IHsgc2NoZW1hLCBvcHRpb25hbCB9ID0gY29udmVydFByb3BlcnR5KGZpZWxkKTtcbiAgICAgICAgaWYgKCFzY2hlbWEpIHtcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICAgICAgcHJvcGVydGllc1trZXldID0gc2NoZW1hO1xuICAgICAgICBpZiAoIW9wdGlvbmFsKSB7XG4gICAgICAgICAgICByZXF1aXJlZC5wdXNoKGtleSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHsgdHlwZTogJ29iamVjdCcsIHByb3BlcnRpZXMsIHJlcXVpcmVkLCBhZGRpdGlvbmFsUHJvcGVydGllczogZmFsc2UgfTtcbn1cbmZ1bmN0aW9uIGNvbnZlcnRQcm9wZXJ0eSh2YWx1ZSkge1xuICAgIC8vIFJlbW92ZSB3cmFwcGVyIGRlY29yYXRvcnMgKGJyYW5kLCB0cmFuc2Zvcm0sIGV0Yy4pIGJlZm9yZSBhdHRlbXB0aW5nIHRvXG4gICAgLy8gY2xhc3NpZnkgdGhlIG5vZGUsIHRyYWNraW5nIHdoZXRoZXIgd2UgY3Jvc3NlZCBhbiBgb3B0aW9uYWxgIGJvdW5kYXJ5IHNvIHdlXG4gICAgLy8gY2FuIHBvcHVsYXRlIHRoZSBgcmVxdWlyZWRgIGFycmF5IGxhdGVyLlxuICAgIGxldCBjdXJyZW50ID0gdW53cmFwRGVjb3JhdG9ycyh2YWx1ZSk7XG4gICAgbGV0IG9wdGlvbmFsID0gZmFsc2U7XG4gICAgd2hpbGUgKE9QVElPTkFMX1dSQVBQRVJTLmhhcyhyZWFkWm9kVHlwZShjdXJyZW50KSA/PyAnJykpIHtcbiAgICAgICAgb3B0aW9uYWwgPSB0cnVlO1xuICAgICAgICBjb25zdCBkZWYgPSByZWFkWm9kRGVmaW5pdGlvbihjdXJyZW50KTtcbiAgICAgICAgY29uc3QgbmV4dCA9IHVud3JhcERlY29yYXRvcnMoZGVmPy5pbm5lclR5cGUpO1xuICAgICAgICBpZiAoIW5leHQgfHwgbmV4dCA9PT0gY3VycmVudCkge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgY3VycmVudCA9IG5leHQ7XG4gICAgfVxuICAgIHJldHVybiB7IHNjaGVtYTogY29udmVydFNjaGVtYShjdXJyZW50KSwgb3B0aW9uYWwgfTtcbn1cbmZ1bmN0aW9uIGNvbnZlcnRTY2hlbWEodmFsdWUpIHtcbiAgICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgICBjb25zdCB1bndyYXBwZWQgPSB1bndyYXBEZWNvcmF0b3JzKHZhbHVlKTtcbiAgICBjb25zdCB0eXBlID0gcmVhZFpvZFR5cGUodW53cmFwcGVkKTtcbiAgICBjb25zdCBkZWYgPSByZWFkWm9kRGVmaW5pdGlvbih1bndyYXBwZWQpO1xuICAgIGlmICghdHlwZSkge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgICBpZiAodHlwZSBpbiBTSU1QTEVfVFlQRV9NQVBQSU5HKSB7XG4gICAgICAgIHJldHVybiBTSU1QTEVfVFlQRV9NQVBQSU5HW3R5cGVdO1xuICAgIH1cbiAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgICAgY2FzZSAnb2JqZWN0JzpcbiAgICAgICAgICAgIHJldHVybiBidWlsZE9iamVjdFNjaGVtYSh1bndyYXBwZWQpO1xuICAgICAgICBjYXNlICdhcnJheSc6XG4gICAgICAgICAgICByZXR1cm4gYnVpbGRBcnJheVNjaGVtYShkZWYpO1xuICAgICAgICBjYXNlICd0dXBsZSc6XG4gICAgICAgICAgICByZXR1cm4gYnVpbGRUdXBsZVNjaGVtYShkZWYpO1xuICAgICAgICBjYXNlICd1bmlvbic6XG4gICAgICAgICAgICByZXR1cm4gYnVpbGRVbmlvblNjaGVtYShkZWYpO1xuICAgICAgICBjYXNlICdpbnRlcnNlY3Rpb24nOlxuICAgICAgICAgICAgcmV0dXJuIGJ1aWxkSW50ZXJzZWN0aW9uU2NoZW1hKGRlZik7XG4gICAgICAgIGNhc2UgJ2xpdGVyYWwnOlxuICAgICAgICAgICAgcmV0dXJuIGJ1aWxkTGl0ZXJhbChkZWYpO1xuICAgICAgICBjYXNlICdlbnVtJzpcbiAgICAgICAgY2FzZSAnbmF0aXZlZW51bSc6XG4gICAgICAgICAgICByZXR1cm4gYnVpbGRFbnVtKGRlZik7XG4gICAgICAgIGNhc2UgJ3JlY29yZCc6XG4gICAgICAgICAgICByZXR1cm4gYnVpbGRSZWNvcmRTY2hlbWEoZGVmKTtcbiAgICAgICAgY2FzZSAnbWFwJzpcbiAgICAgICAgICAgIHJldHVybiBidWlsZE1hcFNjaGVtYShkZWYpO1xuICAgICAgICBjYXNlICdzZXQnOlxuICAgICAgICAgICAgcmV0dXJuIGJ1aWxkU2V0U2NoZW1hKGRlZik7XG4gICAgICAgIGNhc2UgJ251bGxhYmxlJzpcbiAgICAgICAgICAgIHJldHVybiBidWlsZE51bGxhYmxlU2NoZW1hKGRlZik7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbn1cbi8vIC0tLSBKU09OIFNjaGVtYSBidWlsZGVycyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5mdW5jdGlvbiBidWlsZEFycmF5U2NoZW1hKGRlZikge1xuICAgIGNvbnN0IGl0ZW1zID0gY29udmVydFNjaGVtYShleHRyYWN0Rmlyc3QoZGVmLCAnZWxlbWVudCcsICdpdGVtcycsICd0eXBlJykpO1xuICAgIHJldHVybiBpdGVtcyA/IHsgdHlwZTogJ2FycmF5JywgaXRlbXMgfSA6IHVuZGVmaW5lZDtcbn1cbmZ1bmN0aW9uIGJ1aWxkVHVwbGVTY2hlbWEoZGVmKSB7XG4gICAgY29uc3QgaXRlbXMgPSBjb2VyY2VBcnJheShkZWY/Lml0ZW1zKVxuICAgICAgICAubWFwKChpdGVtKSA9PiBjb252ZXJ0U2NoZW1hKGl0ZW0pKVxuICAgICAgICAuZmlsdGVyKEJvb2xlYW4pO1xuICAgIGlmICghaXRlbXMubGVuZ3RoKSB7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGNvbnN0IHNjaGVtYSA9IHtcbiAgICAgICAgdHlwZTogJ2FycmF5JyxcbiAgICAgICAgaXRlbXMsXG4gICAgICAgIG1pbkl0ZW1zOiBpdGVtcy5sZW5ndGgsXG4gICAgfTtcbiAgICBpZiAoIWRlZj8ucmVzdCkge1xuICAgICAgICBzY2hlbWEubWF4SXRlbXMgPSBpdGVtcy5sZW5ndGg7XG4gICAgfVxuICAgIHJldHVybiBzY2hlbWE7XG59XG5mdW5jdGlvbiBidWlsZFVuaW9uU2NoZW1hKGRlZikge1xuICAgIGNvbnN0IG9wdGlvbnMgPSBjb2VyY2VBcnJheShkZWY/Lm9wdGlvbnMgPz8gZGVmPy5zY2hlbWFzKVxuICAgICAgICAubWFwKChvcHRpb24pID0+IGNvbnZlcnRTY2hlbWEob3B0aW9uKSlcbiAgICAgICAgLmZpbHRlcihCb29sZWFuKTtcbiAgICByZXR1cm4gb3B0aW9ucy5sZW5ndGggPyB7IGFueU9mOiBvcHRpb25zIH0gOiB1bmRlZmluZWQ7XG59XG5mdW5jdGlvbiBidWlsZEludGVyc2VjdGlvblNjaGVtYShkZWYpIHtcbiAgICBjb25zdCBsZWZ0ID0gY29udmVydFNjaGVtYShkZWY/LmxlZnQpO1xuICAgIGNvbnN0IHJpZ2h0ID0gY29udmVydFNjaGVtYShkZWY/LnJpZ2h0KTtcbiAgICByZXR1cm4gbGVmdCAmJiByaWdodCA/IHsgYWxsT2Y6IFtsZWZ0LCByaWdodF0gfSA6IHVuZGVmaW5lZDtcbn1cbmZ1bmN0aW9uIGJ1aWxkUmVjb3JkU2NoZW1hKGRlZikge1xuICAgIGNvbnN0IHZhbHVlU2NoZW1hID0gY29udmVydFNjaGVtYShkZWY/LnZhbHVlVHlwZSA/PyBkZWY/LnZhbHVlcyk7XG4gICAgcmV0dXJuIHZhbHVlU2NoZW1hXG4gICAgICAgID8geyB0eXBlOiAnb2JqZWN0JywgYWRkaXRpb25hbFByb3BlcnRpZXM6IHZhbHVlU2NoZW1hIH1cbiAgICAgICAgOiB1bmRlZmluZWQ7XG59XG5mdW5jdGlvbiBidWlsZE1hcFNjaGVtYShkZWYpIHtcbiAgICBjb25zdCB2YWx1ZVNjaGVtYSA9IGNvbnZlcnRTY2hlbWEoZGVmPy52YWx1ZVR5cGUgPz8gZGVmPy52YWx1ZXMpO1xuICAgIHJldHVybiB2YWx1ZVNjaGVtYSA/IHsgdHlwZTogJ2FycmF5JywgaXRlbXM6IHZhbHVlU2NoZW1hIH0gOiB1bmRlZmluZWQ7XG59XG5mdW5jdGlvbiBidWlsZFNldFNjaGVtYShkZWYpIHtcbiAgICBjb25zdCB2YWx1ZVNjaGVtYSA9IGNvbnZlcnRTY2hlbWEoZGVmPy52YWx1ZVR5cGUpO1xuICAgIHJldHVybiB2YWx1ZVNjaGVtYVxuICAgICAgICA/IHsgdHlwZTogJ2FycmF5JywgaXRlbXM6IHZhbHVlU2NoZW1hLCB1bmlxdWVJdGVtczogdHJ1ZSB9XG4gICAgICAgIDogdW5kZWZpbmVkO1xufVxuZnVuY3Rpb24gYnVpbGROdWxsYWJsZVNjaGVtYShkZWYpIHtcbiAgICBjb25zdCBpbm5lciA9IGNvbnZlcnRTY2hlbWEoZGVmPy5pbm5lclR5cGUgPz8gZGVmPy50eXBlKTtcbiAgICByZXR1cm4gaW5uZXIgPyB7IGFueU9mOiBbaW5uZXIsIHsgdHlwZTogJ251bGwnIH1dIH0gOiB1bmRlZmluZWQ7XG59XG5mdW5jdGlvbiB1bndyYXBEZWNvcmF0b3JzKHZhbHVlKSB7XG4gICAgbGV0IGN1cnJlbnQgPSB2YWx1ZTtcbiAgICB3aGlsZSAoREVDT1JBVE9SX1dSQVBQRVJTLmhhcyhyZWFkWm9kVHlwZShjdXJyZW50KSA/PyAnJykpIHtcbiAgICAgICAgY29uc3QgZGVmID0gcmVhZFpvZERlZmluaXRpb24oY3VycmVudCk7XG4gICAgICAgIGNvbnN0IG5leHQgPSBkZWY/LmlubmVyVHlwZSA/P1xuICAgICAgICAgICAgZGVmPy5zY2hlbWEgPz9cbiAgICAgICAgICAgIGRlZj8uYmFzZSA/P1xuICAgICAgICAgICAgZGVmPy50eXBlID8/XG4gICAgICAgICAgICBkZWY/LndyYXBwZWQgPz9cbiAgICAgICAgICAgIGRlZj8udW5kZXJseWluZztcbiAgICAgICAgaWYgKCFuZXh0IHx8IG5leHQgPT09IGN1cnJlbnQpIHtcbiAgICAgICAgICAgIHJldHVybiBjdXJyZW50O1xuICAgICAgICB9XG4gICAgICAgIGN1cnJlbnQgPSBuZXh0O1xuICAgIH1cbiAgICByZXR1cm4gY3VycmVudDtcbn1cbmZ1bmN0aW9uIGV4dHJhY3RGaXJzdChkZWYsIC4uLmtleXMpIHtcbiAgICBpZiAoIWRlZikge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgICBmb3IgKGNvbnN0IGtleSBvZiBrZXlzKSB7XG4gICAgICAgIGlmIChrZXkgaW4gZGVmICYmIGRlZltrZXldICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJldHVybiBkZWZba2V5XTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdW5kZWZpbmVkO1xufVxuZnVuY3Rpb24gY29lcmNlQXJyYXkodmFsdWUpIHtcbiAgICBpZiAoQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHtcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cbiAgICByZXR1cm4gdmFsdWUgPT09IHVuZGVmaW5lZCA/IFtdIDogW3ZhbHVlXTtcbn1cbmZ1bmN0aW9uIGJ1aWxkTGl0ZXJhbChkZWYpIHtcbiAgICBpZiAoIWRlZikge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgICBjb25zdCBsaXRlcmFsID0gZXh0cmFjdEZpcnN0KGRlZiwgJ3ZhbHVlJywgJ2xpdGVyYWwnKTtcbiAgICBpZiAobGl0ZXJhbCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICAgIGNvbnN0OiBsaXRlcmFsLFxuICAgICAgICB0eXBlOiBsaXRlcmFsID09PSBudWxsID8gJ251bGwnIDogdHlwZW9mIGxpdGVyYWwsXG4gICAgfTtcbn1cbmZ1bmN0aW9uIGJ1aWxkRW51bShkZWYpIHtcbiAgICBpZiAoIWRlZikge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgICBpZiAoQXJyYXkuaXNBcnJheShkZWYudmFsdWVzKSkge1xuICAgICAgICByZXR1cm4geyBlbnVtOiBkZWYudmFsdWVzIH07XG4gICAgfVxuICAgIGlmIChBcnJheS5pc0FycmF5KGRlZi5vcHRpb25zKSkge1xuICAgICAgICByZXR1cm4geyBlbnVtOiBkZWYub3B0aW9ucyB9O1xuICAgIH1cbiAgICBpZiAoZGVmLnZhbHVlcyAmJiB0eXBlb2YgZGVmLnZhbHVlcyA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgcmV0dXJuIHsgZW51bTogT2JqZWN0LnZhbHVlcyhkZWYudmFsdWVzKSB9O1xuICAgIH1cbiAgICBpZiAoZGVmLmVudW0gJiYgdHlwZW9mIGRlZi5lbnVtID09PSAnb2JqZWN0Jykge1xuICAgICAgICByZXR1cm4geyBlbnVtOiBPYmplY3QudmFsdWVzKGRlZi5lbnVtKSB9O1xuICAgIH1cbiAgICByZXR1cm4gdW5kZWZpbmVkO1xufVxuZnVuY3Rpb24gcmVhZFNoYXBlKGlucHV0KSB7XG4gICAgaWYgKHR5cGVvZiBpbnB1dCAhPT0gJ29iamVjdCcgfHwgaW5wdXQgPT09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG4gICAgY29uc3QgY2FuZGlkYXRlID0gaW5wdXQ7XG4gICAgaWYgKGNhbmRpZGF0ZS5zaGFwZSAmJiB0eXBlb2YgY2FuZGlkYXRlLnNoYXBlID09PSAnb2JqZWN0Jykge1xuICAgICAgICByZXR1cm4gY2FuZGlkYXRlLnNoYXBlO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIGNhbmRpZGF0ZS5zaGFwZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmV0dXJuIGNhbmRpZGF0ZS5zaGFwZSgpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChfZXJyb3IpIHtcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY29uc3QgZGVmID0gcmVhZFpvZERlZmluaXRpb24oY2FuZGlkYXRlKTtcbiAgICBjb25zdCBzaGFwZSA9IGRlZj8uc2hhcGU7XG4gICAgaWYgKHNoYXBlICYmIHR5cGVvZiBzaGFwZSA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgcmV0dXJuIHNoYXBlO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIHNoYXBlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXR1cm4gc2hhcGUoKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoX2Vycm9yKSB7XG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiB1bmRlZmluZWQ7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD16b2RKc29uU2NoZW1hQ29tcGF0Lm1qcy5tYXAiLCJpbXBvcnQgeyB6b2RSZXNwb25zZXNGdW5jdGlvbiwgem9kVGV4dEZvcm1hdCB9IGZyb20gJ29wZW5haS9oZWxwZXJzL3pvZCc7XG5pbXBvcnQgeyBVc2VyRXJyb3IgfSBmcm9tIFwiLi4vZXJyb3JzLm1qc1wiO1xuaW1wb3J0IHsgaXNab2RPYmplY3QgfSBmcm9tIFwiLi90eXBlR3VhcmRzLm1qc1wiO1xuaW1wb3J0IHsgem9kSnNvblNjaGVtYUNvbXBhdCwgaGFzSnNvblNjaGVtYU9iamVjdFNoYXBlLCB9IGZyb20gXCIuL3pvZEpzb25TY2hlbWFDb21wYXQubWpzXCI7XG5pbXBvcnQgeyBhc1pvZFR5cGUgfSBmcm9tIFwiLi96b2RDb21wYXQubWpzXCI7XG5jb25zdCB6b2RSZXNwb25zZXNGdW5jdGlvbkNvbXBhdCA9IHpvZFJlc3BvbnNlc0Z1bmN0aW9uO1xuLy8gVGhlIGAuc2NoZW1hYCBwYXlsb2FkIGlzIGFsbCB3ZSBuZWVkLCBzbyBhIGxpZ2h0d2VpZ2h0IHNpZ25hdHVyZSBrZWVwcyB0aGUgY29tcGlsZXIgaGFwcHkuXG5jb25zdCB6b2RUZXh0Rm9ybWF0Q29tcGF0ID0gem9kVGV4dEZvcm1hdDtcbi8vIG9wZW5haS9oZWxwZXJzL3pvZCBjYW5ub3QgZW1pdCBzdHJpY3Qgc2NoZW1hcyBmb3IgZXZlcnkgWm9kIHJ1bnRpbWVcbi8vIChub3RhYmx5IFpvZCB2NCksIHNvIHdlIGRlbGVnYXRlIHRvIGEgc21hbGwgbG9jYWwgY29udmVydGVyIGxpdmluZyBpblxuLy8gem9kSnNvblNjaGVtYUNvbXBhdC50cyB3aGVuZXZlciBpdHMgb3V0cHV0IGlzIG1pc3NpbmcgdGhlIHJlcXVpcmVkIEpTT04gU2NoZW1hIGJpdHMuXG5mdW5jdGlvbiBidWlsZEpzb25TY2hlbWFGcm9tWm9kKGlucHV0VHlwZSkge1xuICAgIHJldHVybiB6b2RKc29uU2NoZW1hQ29tcGF0KGlucHV0VHlwZSk7XG59XG4vKipcbiAqIENvbnZlcnQgYSBzdHJpbmcgdG8gYSBmdW5jdGlvbiB0b29sIG5hbWUgYnkgcmVwbGFjaW5nIHNwYWNlcyB3aXRoIHVuZGVyc2NvcmVzIGFuZFxuICogbm9uLWFscGhhbnVtZXJpYyBjaGFyYWN0ZXJzIHdpdGggdW5kZXJzY29yZXMuXG4gKiBAcGFyYW0gbmFtZSAtIFRoZSBuYW1lIG9mIHRoZSB0b29sLlxuICogQHJldHVybnMgVGhlIGZ1bmN0aW9uIHRvb2wgbmFtZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHRvRnVuY3Rpb25Ub29sTmFtZShuYW1lKSB7XG4gICAgLy8gUmVwbGFjZSBzcGFjZXMgd2l0aCB1bmRlcnNjb3Jlc1xuICAgIG5hbWUgPSBuYW1lLnJlcGxhY2UoL1xccy9nLCAnXycpO1xuICAgIC8vIFJlcGxhY2Ugbm9uLWFscGhhbnVtZXJpYyBjaGFyYWN0ZXJzIHdpdGggdW5kZXJzY29yZXNcbiAgICBuYW1lID0gbmFtZS5yZXBsYWNlKC9bXmEtekEtWjAtOV0vZywgJ18nKTtcbiAgICAvLyBFbnN1cmUgdGhlIG5hbWUgaXMgbm90IGVtcHR5XG4gICAgaWYgKG5hbWUubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignVG9vbCBuYW1lIGNhbm5vdCBiZSBlbXB0eScpO1xuICAgIH1cbiAgICByZXR1cm4gbmFtZTtcbn1cbi8qKlxuICogR2V0IHRoZSBzY2hlbWEgYW5kIHBhcnNlciBmcm9tIGFuIGlucHV0IHR5cGUuIElmIHRoZSBpbnB1dCB0eXBlIGlzIGEgWm9kT2JqZWN0LCB3ZSB3aWxsIGNvbnZlcnRcbiAqIGl0IGludG8gYSBKU09OIFNjaGVtYSBhbmQgdXNlIFpvZCBhcyBwYXJzZXIuIElmIHRoZSBpbnB1dCB0eXBlIGlzIGEgSlNPTiBzY2hlbWEsIHdlIHVzZSB0aGVcbiAqIEpTT04ucGFyc2UgZnVuY3Rpb24gdG8gZ2V0IHRoZSBwYXJzZXIuXG4gKiBAcGFyYW0gaW5wdXRUeXBlIC0gVGhlIGlucHV0IHR5cGUgdG8gZ2V0IHRoZSBzY2hlbWEgYW5kIHBhcnNlciBmcm9tLlxuICogQHBhcmFtIG5hbWUgLSBUaGUgbmFtZSBvZiB0aGUgdG9vbC5cbiAqIEByZXR1cm5zIFRoZSBzY2hlbWEgYW5kIHBhcnNlci5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFNjaGVtYUFuZFBhcnNlckZyb21JbnB1dFR5cGUoaW5wdXRUeXBlLCBuYW1lKSB7XG4gICAgY29uc3QgcGFyc2VyID0gKGlucHV0KSA9PiBKU09OLnBhcnNlKGlucHV0KTtcbiAgICBpZiAoaXNab2RPYmplY3QoaW5wdXRUeXBlKSkge1xuICAgICAgICBjb25zdCB1c2VGYWxsYmFjayA9IChvcmlnaW5hbEVycm9yKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBmYWxsYmFja1NjaGVtYSA9IGJ1aWxkSnNvblNjaGVtYUZyb21ab2QoaW5wdXRUeXBlKTtcbiAgICAgICAgICAgIGlmIChmYWxsYmFja1NjaGVtYSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIHNjaGVtYTogZmFsbGJhY2tTY2hlbWEsXG4gICAgICAgICAgICAgICAgICAgIHBhcnNlcjogKHJhd0lucHV0KSA9PiBpbnB1dFR5cGUucGFyc2UoSlNPTi5wYXJzZShyYXdJbnB1dCkpLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSBvcmlnaW5hbEVycm9yIGluc3RhbmNlb2YgRXJyb3JcbiAgICAgICAgICAgICAgICA/IGAgVXBzdHJlYW0gaGVscGVyIGVycm9yOiAke29yaWdpbmFsRXJyb3IubWVzc2FnZX1gXG4gICAgICAgICAgICAgICAgOiAnJztcbiAgICAgICAgICAgIHRocm93IG5ldyBVc2VyRXJyb3IoYFVuYWJsZSB0byBjb252ZXJ0IHRoZSBwcm92aWRlZCBab2Qgc2NoZW1hIHRvIEpTT04gU2NoZW1hLiBFbnN1cmUgdGhhdCB0aGUgXFxgem9kXFxgIHBhY2thZ2UgaXMgYXZhaWxhYmxlIGF0IHJ1bnRpbWUgb3IgcHJvdmlkZSBhIEpTT04gc2NoZW1hIG9iamVjdCBpbnN0ZWFkLiR7ZXJyb3JNZXNzYWdlfWApO1xuICAgICAgICB9O1xuICAgICAgICBsZXQgZm9ybWF0dGVkRnVuY3Rpb247XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBmb3JtYXR0ZWRGdW5jdGlvbiA9IHpvZFJlc3BvbnNlc0Z1bmN0aW9uQ29tcGF0KHtcbiAgICAgICAgICAgICAgICBuYW1lLFxuICAgICAgICAgICAgICAgIHBhcmFtZXRlcnM6IGFzWm9kVHlwZShpbnB1dFR5cGUpLFxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uOiAoKSA9PiB7IH0sIC8vIGVtcHR5IGZ1bmN0aW9uIGhlcmUgdG8gc2F0aXNmeSB0aGUgT3BlbkFJIGhlbHBlclxuICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAnJyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgcmV0dXJuIHVzZUZhbGxiYWNrKGVycm9yKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaGFzSnNvblNjaGVtYU9iamVjdFNoYXBlKGZvcm1hdHRlZEZ1bmN0aW9uLnBhcmFtZXRlcnMpKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHNjaGVtYTogZm9ybWF0dGVkRnVuY3Rpb24ucGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICBwYXJzZXI6IGZvcm1hdHRlZEZ1bmN0aW9uLiRwYXJzZVJhdyxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHVzZUZhbGxiYWNrKCk7XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGVvZiBpbnB1dFR5cGUgPT09ICdvYmplY3QnICYmIGlucHV0VHlwZSAhPT0gbnVsbCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgc2NoZW1hOiBpbnB1dFR5cGUsXG4gICAgICAgICAgICBwYXJzZXIsXG4gICAgICAgIH07XG4gICAgfVxuICAgIHRocm93IG5ldyBVc2VyRXJyb3IoJ0lucHV0IHR5cGUgaXMgbm90IGEgWm9kT2JqZWN0IG9yIGEgdmFsaWQgSlNPTiBzY2hlbWEnKTtcbn1cbi8qKlxuICogQ29udmVydHMgdGhlIGFnZW50IG91dHB1dCB0eXBlIHByb3ZpZGVkIHRvIGEgc2VyaWFsaXphYmxlIHZlcnNpb25cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNvbnZlcnRBZ2VudE91dHB1dFR5cGVUb1NlcmlhbGl6YWJsZShvdXRwdXRUeXBlKSB7XG4gICAgaWYgKG91dHB1dFR5cGUgPT09ICd0ZXh0Jykge1xuICAgICAgICByZXR1cm4gJ3RleHQnO1xuICAgIH1cbiAgICBpZiAoaXNab2RPYmplY3Qob3V0cHV0VHlwZSkpIHtcbiAgICAgICAgY29uc3QgdXNlRmFsbGJhY2sgPSAoZXhpc3RpbmcsIG9yaWdpbmFsRXJyb3IpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGZhbGxiYWNrU2NoZW1hID0gYnVpbGRKc29uU2NoZW1hRnJvbVpvZChvdXRwdXRUeXBlKTtcbiAgICAgICAgICAgIGlmIChmYWxsYmFja1NjaGVtYSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IGV4aXN0aW5nPy50eXBlID8/ICdqc29uX3NjaGVtYScsXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IGV4aXN0aW5nPy5uYW1lID8/ICdvdXRwdXQnLFxuICAgICAgICAgICAgICAgICAgICBzdHJpY3Q6IGV4aXN0aW5nPy5zdHJpY3QgPz8gZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIHNjaGVtYTogZmFsbGJhY2tTY2hlbWEsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IG9yaWdpbmFsRXJyb3IgaW5zdGFuY2VvZiBFcnJvclxuICAgICAgICAgICAgICAgID8gYCBVcHN0cmVhbSBoZWxwZXIgZXJyb3I6ICR7b3JpZ2luYWxFcnJvci5tZXNzYWdlfWBcbiAgICAgICAgICAgICAgICA6ICcnO1xuICAgICAgICAgICAgdGhyb3cgbmV3IFVzZXJFcnJvcihgVW5hYmxlIHRvIGNvbnZlcnQgdGhlIHByb3ZpZGVkIFpvZCBzY2hlbWEgdG8gSlNPTiBTY2hlbWEuIEVuc3VyZSB0aGF0IHRoZSBcXGB6b2RcXGAgcGFja2FnZSBpcyBhdmFpbGFibGUgYXQgcnVudGltZSBvciBwcm92aWRlIGEgSlNPTiBzY2hlbWEgb2JqZWN0IGluc3RlYWQuJHtlcnJvck1lc3NhZ2V9YCk7XG4gICAgICAgIH07XG4gICAgICAgIGxldCBvdXRwdXQ7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBvdXRwdXQgPSB6b2RUZXh0Rm9ybWF0Q29tcGF0KGFzWm9kVHlwZShvdXRwdXRUeXBlKSwgJ291dHB1dCcpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgcmV0dXJuIHVzZUZhbGxiYWNrKHVuZGVmaW5lZCwgZXJyb3IpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChoYXNKc29uU2NoZW1hT2JqZWN0U2hhcGUob3V0cHV0LnNjaGVtYSkpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgdHlwZTogb3V0cHV0LnR5cGUsXG4gICAgICAgICAgICAgICAgbmFtZTogb3V0cHV0Lm5hbWUsXG4gICAgICAgICAgICAgICAgc3RyaWN0OiBvdXRwdXQuc3RyaWN0IHx8IGZhbHNlLFxuICAgICAgICAgICAgICAgIHNjaGVtYTogb3V0cHV0LnNjaGVtYSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHVzZUZhbGxiYWNrKG91dHB1dCk7XG4gICAgfVxuICAgIHJldHVybiBvdXRwdXRUeXBlO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dG9vbHMubWpzLm1hcCIsIi8qKlxuICogSGVscGVycy5cbiAqL1xuXG52YXIgcyA9IDEwMDA7XG52YXIgbSA9IHMgKiA2MDtcbnZhciBoID0gbSAqIDYwO1xudmFyIGQgPSBoICogMjQ7XG52YXIgdyA9IGQgKiA3O1xudmFyIHkgPSBkICogMzY1LjI1O1xuXG4vKipcbiAqIFBhcnNlIG9yIGZvcm1hdCB0aGUgZ2l2ZW4gYHZhbGAuXG4gKlxuICogT3B0aW9uczpcbiAqXG4gKiAgLSBgbG9uZ2AgdmVyYm9zZSBmb3JtYXR0aW5nIFtmYWxzZV1cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ3xOdW1iZXJ9IHZhbFxuICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXVxuICogQHRocm93cyB7RXJyb3J9IHRocm93IGFuIGVycm9yIGlmIHZhbCBpcyBub3QgYSBub24tZW1wdHkgc3RyaW5nIG9yIGEgbnVtYmVyXG4gKiBAcmV0dXJuIHtTdHJpbmd8TnVtYmVyfVxuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uICh2YWwsIG9wdGlvbnMpIHtcbiAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG4gIHZhciB0eXBlID0gdHlwZW9mIHZhbDtcbiAgaWYgKHR5cGUgPT09ICdzdHJpbmcnICYmIHZhbC5sZW5ndGggPiAwKSB7XG4gICAgcmV0dXJuIHBhcnNlKHZhbCk7XG4gIH0gZWxzZSBpZiAodHlwZSA9PT0gJ251bWJlcicgJiYgaXNGaW5pdGUodmFsKSkge1xuICAgIHJldHVybiBvcHRpb25zLmxvbmcgPyBmbXRMb25nKHZhbCkgOiBmbXRTaG9ydCh2YWwpO1xuICB9XG4gIHRocm93IG5ldyBFcnJvcihcbiAgICAndmFsIGlzIG5vdCBhIG5vbi1lbXB0eSBzdHJpbmcgb3IgYSB2YWxpZCBudW1iZXIuIHZhbD0nICtcbiAgICAgIEpTT04uc3RyaW5naWZ5KHZhbClcbiAgKTtcbn07XG5cbi8qKlxuICogUGFyc2UgdGhlIGdpdmVuIGBzdHJgIGFuZCByZXR1cm4gbWlsbGlzZWNvbmRzLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBzdHJcbiAqIEByZXR1cm4ge051bWJlcn1cbiAqIEBhcGkgcHJpdmF0ZVxuICovXG5cbmZ1bmN0aW9uIHBhcnNlKHN0cikge1xuICBzdHIgPSBTdHJpbmcoc3RyKTtcbiAgaWYgKHN0ci5sZW5ndGggPiAxMDApIHtcbiAgICByZXR1cm47XG4gIH1cbiAgdmFyIG1hdGNoID0gL14oLT8oPzpcXGQrKT9cXC4/XFxkKykgKihtaWxsaXNlY29uZHM/fG1zZWNzP3xtc3xzZWNvbmRzP3xzZWNzP3xzfG1pbnV0ZXM/fG1pbnM/fG18aG91cnM/fGhycz98aHxkYXlzP3xkfHdlZWtzP3x3fHllYXJzP3x5cnM/fHkpPyQvaS5leGVjKFxuICAgIHN0clxuICApO1xuICBpZiAoIW1hdGNoKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIHZhciBuID0gcGFyc2VGbG9hdChtYXRjaFsxXSk7XG4gIHZhciB0eXBlID0gKG1hdGNoWzJdIHx8ICdtcycpLnRvTG93ZXJDYXNlKCk7XG4gIHN3aXRjaCAodHlwZSkge1xuICAgIGNhc2UgJ3llYXJzJzpcbiAgICBjYXNlICd5ZWFyJzpcbiAgICBjYXNlICd5cnMnOlxuICAgIGNhc2UgJ3lyJzpcbiAgICBjYXNlICd5JzpcbiAgICAgIHJldHVybiBuICogeTtcbiAgICBjYXNlICd3ZWVrcyc6XG4gICAgY2FzZSAnd2Vlayc6XG4gICAgY2FzZSAndyc6XG4gICAgICByZXR1cm4gbiAqIHc7XG4gICAgY2FzZSAnZGF5cyc6XG4gICAgY2FzZSAnZGF5JzpcbiAgICBjYXNlICdkJzpcbiAgICAgIHJldHVybiBuICogZDtcbiAgICBjYXNlICdob3Vycyc6XG4gICAgY2FzZSAnaG91cic6XG4gICAgY2FzZSAnaHJzJzpcbiAgICBjYXNlICdocic6XG4gICAgY2FzZSAnaCc6XG4gICAgICByZXR1cm4gbiAqIGg7XG4gICAgY2FzZSAnbWludXRlcyc6XG4gICAgY2FzZSAnbWludXRlJzpcbiAgICBjYXNlICdtaW5zJzpcbiAgICBjYXNlICdtaW4nOlxuICAgIGNhc2UgJ20nOlxuICAgICAgcmV0dXJuIG4gKiBtO1xuICAgIGNhc2UgJ3NlY29uZHMnOlxuICAgIGNhc2UgJ3NlY29uZCc6XG4gICAgY2FzZSAnc2Vjcyc6XG4gICAgY2FzZSAnc2VjJzpcbiAgICBjYXNlICdzJzpcbiAgICAgIHJldHVybiBuICogcztcbiAgICBjYXNlICdtaWxsaXNlY29uZHMnOlxuICAgIGNhc2UgJ21pbGxpc2Vjb25kJzpcbiAgICBjYXNlICdtc2Vjcyc6XG4gICAgY2FzZSAnbXNlYyc6XG4gICAgY2FzZSAnbXMnOlxuICAgICAgcmV0dXJuIG47XG4gICAgZGVmYXVsdDpcbiAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH1cbn1cblxuLyoqXG4gKiBTaG9ydCBmb3JtYXQgZm9yIGBtc2AuXG4gKlxuICogQHBhcmFtIHtOdW1iZXJ9IG1zXG4gKiBAcmV0dXJuIHtTdHJpbmd9XG4gKiBAYXBpIHByaXZhdGVcbiAqL1xuXG5mdW5jdGlvbiBmbXRTaG9ydChtcykge1xuICB2YXIgbXNBYnMgPSBNYXRoLmFicyhtcyk7XG4gIGlmIChtc0FicyA+PSBkKSB7XG4gICAgcmV0dXJuIE1hdGgucm91bmQobXMgLyBkKSArICdkJztcbiAgfVxuICBpZiAobXNBYnMgPj0gaCkge1xuICAgIHJldHVybiBNYXRoLnJvdW5kKG1zIC8gaCkgKyAnaCc7XG4gIH1cbiAgaWYgKG1zQWJzID49IG0pIHtcbiAgICByZXR1cm4gTWF0aC5yb3VuZChtcyAvIG0pICsgJ20nO1xuICB9XG4gIGlmIChtc0FicyA+PSBzKSB7XG4gICAgcmV0dXJuIE1hdGgucm91bmQobXMgLyBzKSArICdzJztcbiAgfVxuICByZXR1cm4gbXMgKyAnbXMnO1xufVxuXG4vKipcbiAqIExvbmcgZm9ybWF0IGZvciBgbXNgLlxuICpcbiAqIEBwYXJhbSB7TnVtYmVyfSBtc1xuICogQHJldHVybiB7U3RyaW5nfVxuICogQGFwaSBwcml2YXRlXG4gKi9cblxuZnVuY3Rpb24gZm10TG9uZyhtcykge1xuICB2YXIgbXNBYnMgPSBNYXRoLmFicyhtcyk7XG4gIGlmIChtc0FicyA+PSBkKSB7XG4gICAgcmV0dXJuIHBsdXJhbChtcywgbXNBYnMsIGQsICdkYXknKTtcbiAgfVxuICBpZiAobXNBYnMgPj0gaCkge1xuICAgIHJldHVybiBwbHVyYWwobXMsIG1zQWJzLCBoLCAnaG91cicpO1xuICB9XG4gIGlmIChtc0FicyA+PSBtKSB7XG4gICAgcmV0dXJuIHBsdXJhbChtcywgbXNBYnMsIG0sICdtaW51dGUnKTtcbiAgfVxuICBpZiAobXNBYnMgPj0gcykge1xuICAgIHJldHVybiBwbHVyYWwobXMsIG1zQWJzLCBzLCAnc2Vjb25kJyk7XG4gIH1cbiAgcmV0dXJuIG1zICsgJyBtcyc7XG59XG5cbi8qKlxuICogUGx1cmFsaXphdGlvbiBoZWxwZXIuXG4gKi9cblxuZnVuY3Rpb24gcGx1cmFsKG1zLCBtc0FicywgbiwgbmFtZSkge1xuICB2YXIgaXNQbHVyYWwgPSBtc0FicyA+PSBuICogMS41O1xuICByZXR1cm4gTWF0aC5yb3VuZChtcyAvIG4pICsgJyAnICsgbmFtZSArIChpc1BsdXJhbCA/ICdzJyA6ICcnKTtcbn1cbiIsIlxuLyoqXG4gKiBUaGlzIGlzIHRoZSBjb21tb24gbG9naWMgZm9yIGJvdGggdGhlIE5vZGUuanMgYW5kIHdlYiBicm93c2VyXG4gKiBpbXBsZW1lbnRhdGlvbnMgb2YgYGRlYnVnKClgLlxuICovXG5cbmZ1bmN0aW9uIHNldHVwKGVudikge1xuXHRjcmVhdGVEZWJ1Zy5kZWJ1ZyA9IGNyZWF0ZURlYnVnO1xuXHRjcmVhdGVEZWJ1Zy5kZWZhdWx0ID0gY3JlYXRlRGVidWc7XG5cdGNyZWF0ZURlYnVnLmNvZXJjZSA9IGNvZXJjZTtcblx0Y3JlYXRlRGVidWcuZGlzYWJsZSA9IGRpc2FibGU7XG5cdGNyZWF0ZURlYnVnLmVuYWJsZSA9IGVuYWJsZTtcblx0Y3JlYXRlRGVidWcuZW5hYmxlZCA9IGVuYWJsZWQ7XG5cdGNyZWF0ZURlYnVnLmh1bWFuaXplID0gcmVxdWlyZSgnbXMnKTtcblx0Y3JlYXRlRGVidWcuZGVzdHJveSA9IGRlc3Ryb3k7XG5cblx0T2JqZWN0LmtleXMoZW52KS5mb3JFYWNoKGtleSA9PiB7XG5cdFx0Y3JlYXRlRGVidWdba2V5XSA9IGVudltrZXldO1xuXHR9KTtcblxuXHQvKipcblx0KiBUaGUgY3VycmVudGx5IGFjdGl2ZSBkZWJ1ZyBtb2RlIG5hbWVzLCBhbmQgbmFtZXMgdG8gc2tpcC5cblx0Ki9cblxuXHRjcmVhdGVEZWJ1Zy5uYW1lcyA9IFtdO1xuXHRjcmVhdGVEZWJ1Zy5za2lwcyA9IFtdO1xuXG5cdC8qKlxuXHQqIE1hcCBvZiBzcGVjaWFsIFwiJW5cIiBoYW5kbGluZyBmdW5jdGlvbnMsIGZvciB0aGUgZGVidWcgXCJmb3JtYXRcIiBhcmd1bWVudC5cblx0KlxuXHQqIFZhbGlkIGtleSBuYW1lcyBhcmUgYSBzaW5nbGUsIGxvd2VyIG9yIHVwcGVyLWNhc2UgbGV0dGVyLCBpLmUuIFwiblwiIGFuZCBcIk5cIi5cblx0Ki9cblx0Y3JlYXRlRGVidWcuZm9ybWF0dGVycyA9IHt9O1xuXG5cdC8qKlxuXHQqIFNlbGVjdHMgYSBjb2xvciBmb3IgYSBkZWJ1ZyBuYW1lc3BhY2Vcblx0KiBAcGFyYW0ge1N0cmluZ30gbmFtZXNwYWNlIFRoZSBuYW1lc3BhY2Ugc3RyaW5nIGZvciB0aGUgZGVidWcgaW5zdGFuY2UgdG8gYmUgY29sb3JlZFxuXHQqIEByZXR1cm4ge051bWJlcnxTdHJpbmd9IEFuIEFOU0kgY29sb3IgY29kZSBmb3IgdGhlIGdpdmVuIG5hbWVzcGFjZVxuXHQqIEBhcGkgcHJpdmF0ZVxuXHQqL1xuXHRmdW5jdGlvbiBzZWxlY3RDb2xvcihuYW1lc3BhY2UpIHtcblx0XHRsZXQgaGFzaCA9IDA7XG5cblx0XHRmb3IgKGxldCBpID0gMDsgaSA8IG5hbWVzcGFjZS5sZW5ndGg7IGkrKykge1xuXHRcdFx0aGFzaCA9ICgoaGFzaCA8PCA1KSAtIGhhc2gpICsgbmFtZXNwYWNlLmNoYXJDb2RlQXQoaSk7XG5cdFx0XHRoYXNoIHw9IDA7IC8vIENvbnZlcnQgdG8gMzJiaXQgaW50ZWdlclxuXHRcdH1cblxuXHRcdHJldHVybiBjcmVhdGVEZWJ1Zy5jb2xvcnNbTWF0aC5hYnMoaGFzaCkgJSBjcmVhdGVEZWJ1Zy5jb2xvcnMubGVuZ3RoXTtcblx0fVxuXHRjcmVhdGVEZWJ1Zy5zZWxlY3RDb2xvciA9IHNlbGVjdENvbG9yO1xuXG5cdC8qKlxuXHQqIENyZWF0ZSBhIGRlYnVnZ2VyIHdpdGggdGhlIGdpdmVuIGBuYW1lc3BhY2VgLlxuXHQqXG5cdCogQHBhcmFtIHtTdHJpbmd9IG5hbWVzcGFjZVxuXHQqIEByZXR1cm4ge0Z1bmN0aW9ufVxuXHQqIEBhcGkgcHVibGljXG5cdCovXG5cdGZ1bmN0aW9uIGNyZWF0ZURlYnVnKG5hbWVzcGFjZSkge1xuXHRcdGxldCBwcmV2VGltZTtcblx0XHRsZXQgZW5hYmxlT3ZlcnJpZGUgPSBudWxsO1xuXHRcdGxldCBuYW1lc3BhY2VzQ2FjaGU7XG5cdFx0bGV0IGVuYWJsZWRDYWNoZTtcblxuXHRcdGZ1bmN0aW9uIGRlYnVnKC4uLmFyZ3MpIHtcblx0XHRcdC8vIERpc2FibGVkP1xuXHRcdFx0aWYgKCFkZWJ1Zy5lbmFibGVkKSB7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblxuXHRcdFx0Y29uc3Qgc2VsZiA9IGRlYnVnO1xuXG5cdFx0XHQvLyBTZXQgYGRpZmZgIHRpbWVzdGFtcFxuXHRcdFx0Y29uc3QgY3VyciA9IE51bWJlcihuZXcgRGF0ZSgpKTtcblx0XHRcdGNvbnN0IG1zID0gY3VyciAtIChwcmV2VGltZSB8fCBjdXJyKTtcblx0XHRcdHNlbGYuZGlmZiA9IG1zO1xuXHRcdFx0c2VsZi5wcmV2ID0gcHJldlRpbWU7XG5cdFx0XHRzZWxmLmN1cnIgPSBjdXJyO1xuXHRcdFx0cHJldlRpbWUgPSBjdXJyO1xuXG5cdFx0XHRhcmdzWzBdID0gY3JlYXRlRGVidWcuY29lcmNlKGFyZ3NbMF0pO1xuXG5cdFx0XHRpZiAodHlwZW9mIGFyZ3NbMF0gIT09ICdzdHJpbmcnKSB7XG5cdFx0XHRcdC8vIEFueXRoaW5nIGVsc2UgbGV0J3MgaW5zcGVjdCB3aXRoICVPXG5cdFx0XHRcdGFyZ3MudW5zaGlmdCgnJU8nKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gQXBwbHkgYW55IGBmb3JtYXR0ZXJzYCB0cmFuc2Zvcm1hdGlvbnNcblx0XHRcdGxldCBpbmRleCA9IDA7XG5cdFx0XHRhcmdzWzBdID0gYXJnc1swXS5yZXBsYWNlKC8lKFthLXpBLVolXSkvZywgKG1hdGNoLCBmb3JtYXQpID0+IHtcblx0XHRcdFx0Ly8gSWYgd2UgZW5jb3VudGVyIGFuIGVzY2FwZWQgJSB0aGVuIGRvbid0IGluY3JlYXNlIHRoZSBhcnJheSBpbmRleFxuXHRcdFx0XHRpZiAobWF0Y2ggPT09ICclJScpIHtcblx0XHRcdFx0XHRyZXR1cm4gJyUnO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGluZGV4Kys7XG5cdFx0XHRcdGNvbnN0IGZvcm1hdHRlciA9IGNyZWF0ZURlYnVnLmZvcm1hdHRlcnNbZm9ybWF0XTtcblx0XHRcdFx0aWYgKHR5cGVvZiBmb3JtYXR0ZXIgPT09ICdmdW5jdGlvbicpIHtcblx0XHRcdFx0XHRjb25zdCB2YWwgPSBhcmdzW2luZGV4XTtcblx0XHRcdFx0XHRtYXRjaCA9IGZvcm1hdHRlci5jYWxsKHNlbGYsIHZhbCk7XG5cblx0XHRcdFx0XHQvLyBOb3cgd2UgbmVlZCB0byByZW1vdmUgYGFyZ3NbaW5kZXhdYCBzaW5jZSBpdCdzIGlubGluZWQgaW4gdGhlIGBmb3JtYXRgXG5cdFx0XHRcdFx0YXJncy5zcGxpY2UoaW5kZXgsIDEpO1xuXHRcdFx0XHRcdGluZGV4LS07XG5cdFx0XHRcdH1cblx0XHRcdFx0cmV0dXJuIG1hdGNoO1xuXHRcdFx0fSk7XG5cblx0XHRcdC8vIEFwcGx5IGVudi1zcGVjaWZpYyBmb3JtYXR0aW5nIChjb2xvcnMsIGV0Yy4pXG5cdFx0XHRjcmVhdGVEZWJ1Zy5mb3JtYXRBcmdzLmNhbGwoc2VsZiwgYXJncyk7XG5cblx0XHRcdGNvbnN0IGxvZ0ZuID0gc2VsZi5sb2cgfHwgY3JlYXRlRGVidWcubG9nO1xuXHRcdFx0bG9nRm4uYXBwbHkoc2VsZiwgYXJncyk7XG5cdFx0fVxuXG5cdFx0ZGVidWcubmFtZXNwYWNlID0gbmFtZXNwYWNlO1xuXHRcdGRlYnVnLnVzZUNvbG9ycyA9IGNyZWF0ZURlYnVnLnVzZUNvbG9ycygpO1xuXHRcdGRlYnVnLmNvbG9yID0gY3JlYXRlRGVidWcuc2VsZWN0Q29sb3IobmFtZXNwYWNlKTtcblx0XHRkZWJ1Zy5leHRlbmQgPSBleHRlbmQ7XG5cdFx0ZGVidWcuZGVzdHJveSA9IGNyZWF0ZURlYnVnLmRlc3Ryb3k7IC8vIFhYWCBUZW1wb3JhcnkuIFdpbGwgYmUgcmVtb3ZlZCBpbiB0aGUgbmV4dCBtYWpvciByZWxlYXNlLlxuXG5cdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGRlYnVnLCAnZW5hYmxlZCcsIHtcblx0XHRcdGVudW1lcmFibGU6IHRydWUsXG5cdFx0XHRjb25maWd1cmFibGU6IGZhbHNlLFxuXHRcdFx0Z2V0OiAoKSA9PiB7XG5cdFx0XHRcdGlmIChlbmFibGVPdmVycmlkZSAhPT0gbnVsbCkge1xuXHRcdFx0XHRcdHJldHVybiBlbmFibGVPdmVycmlkZTtcblx0XHRcdFx0fVxuXHRcdFx0XHRpZiAobmFtZXNwYWNlc0NhY2hlICE9PSBjcmVhdGVEZWJ1Zy5uYW1lc3BhY2VzKSB7XG5cdFx0XHRcdFx0bmFtZXNwYWNlc0NhY2hlID0gY3JlYXRlRGVidWcubmFtZXNwYWNlcztcblx0XHRcdFx0XHRlbmFibGVkQ2FjaGUgPSBjcmVhdGVEZWJ1Zy5lbmFibGVkKG5hbWVzcGFjZSk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRyZXR1cm4gZW5hYmxlZENhY2hlO1xuXHRcdFx0fSxcblx0XHRcdHNldDogdiA9PiB7XG5cdFx0XHRcdGVuYWJsZU92ZXJyaWRlID0gdjtcblx0XHRcdH1cblx0XHR9KTtcblxuXHRcdC8vIEVudi1zcGVjaWZpYyBpbml0aWFsaXphdGlvbiBsb2dpYyBmb3IgZGVidWcgaW5zdGFuY2VzXG5cdFx0aWYgKHR5cGVvZiBjcmVhdGVEZWJ1Zy5pbml0ID09PSAnZnVuY3Rpb24nKSB7XG5cdFx0XHRjcmVhdGVEZWJ1Zy5pbml0KGRlYnVnKTtcblx0XHR9XG5cblx0XHRyZXR1cm4gZGVidWc7XG5cdH1cblxuXHRmdW5jdGlvbiBleHRlbmQobmFtZXNwYWNlLCBkZWxpbWl0ZXIpIHtcblx0XHRjb25zdCBuZXdEZWJ1ZyA9IGNyZWF0ZURlYnVnKHRoaXMubmFtZXNwYWNlICsgKHR5cGVvZiBkZWxpbWl0ZXIgPT09ICd1bmRlZmluZWQnID8gJzonIDogZGVsaW1pdGVyKSArIG5hbWVzcGFjZSk7XG5cdFx0bmV3RGVidWcubG9nID0gdGhpcy5sb2c7XG5cdFx0cmV0dXJuIG5ld0RlYnVnO1xuXHR9XG5cblx0LyoqXG5cdCogRW5hYmxlcyBhIGRlYnVnIG1vZGUgYnkgbmFtZXNwYWNlcy4gVGhpcyBjYW4gaW5jbHVkZSBtb2Rlc1xuXHQqIHNlcGFyYXRlZCBieSBhIGNvbG9uIGFuZCB3aWxkY2FyZHMuXG5cdCpcblx0KiBAcGFyYW0ge1N0cmluZ30gbmFtZXNwYWNlc1xuXHQqIEBhcGkgcHVibGljXG5cdCovXG5cdGZ1bmN0aW9uIGVuYWJsZShuYW1lc3BhY2VzKSB7XG5cdFx0Y3JlYXRlRGVidWcuc2F2ZShuYW1lc3BhY2VzKTtcblx0XHRjcmVhdGVEZWJ1Zy5uYW1lc3BhY2VzID0gbmFtZXNwYWNlcztcblxuXHRcdGNyZWF0ZURlYnVnLm5hbWVzID0gW107XG5cdFx0Y3JlYXRlRGVidWcuc2tpcHMgPSBbXTtcblxuXHRcdGNvbnN0IHNwbGl0ID0gKHR5cGVvZiBuYW1lc3BhY2VzID09PSAnc3RyaW5nJyA/IG5hbWVzcGFjZXMgOiAnJylcblx0XHRcdC50cmltKClcblx0XHRcdC5yZXBsYWNlKC9cXHMrL2csICcsJylcblx0XHRcdC5zcGxpdCgnLCcpXG5cdFx0XHQuZmlsdGVyKEJvb2xlYW4pO1xuXG5cdFx0Zm9yIChjb25zdCBucyBvZiBzcGxpdCkge1xuXHRcdFx0aWYgKG5zWzBdID09PSAnLScpIHtcblx0XHRcdFx0Y3JlYXRlRGVidWcuc2tpcHMucHVzaChucy5zbGljZSgxKSk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRjcmVhdGVEZWJ1Zy5uYW1lcy5wdXNoKG5zKTtcblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHQvKipcblx0ICogQ2hlY2tzIGlmIHRoZSBnaXZlbiBzdHJpbmcgbWF0Y2hlcyBhIG5hbWVzcGFjZSB0ZW1wbGF0ZSwgaG9ub3Jpbmdcblx0ICogYXN0ZXJpc2tzIGFzIHdpbGRjYXJkcy5cblx0ICpcblx0ICogQHBhcmFtIHtTdHJpbmd9IHNlYXJjaFxuXHQgKiBAcGFyYW0ge1N0cmluZ30gdGVtcGxhdGVcblx0ICogQHJldHVybiB7Qm9vbGVhbn1cblx0ICovXG5cdGZ1bmN0aW9uIG1hdGNoZXNUZW1wbGF0ZShzZWFyY2gsIHRlbXBsYXRlKSB7XG5cdFx0bGV0IHNlYXJjaEluZGV4ID0gMDtcblx0XHRsZXQgdGVtcGxhdGVJbmRleCA9IDA7XG5cdFx0bGV0IHN0YXJJbmRleCA9IC0xO1xuXHRcdGxldCBtYXRjaEluZGV4ID0gMDtcblxuXHRcdHdoaWxlIChzZWFyY2hJbmRleCA8IHNlYXJjaC5sZW5ndGgpIHtcblx0XHRcdGlmICh0ZW1wbGF0ZUluZGV4IDwgdGVtcGxhdGUubGVuZ3RoICYmICh0ZW1wbGF0ZVt0ZW1wbGF0ZUluZGV4XSA9PT0gc2VhcmNoW3NlYXJjaEluZGV4XSB8fCB0ZW1wbGF0ZVt0ZW1wbGF0ZUluZGV4XSA9PT0gJyonKSkge1xuXHRcdFx0XHQvLyBNYXRjaCBjaGFyYWN0ZXIgb3IgcHJvY2VlZCB3aXRoIHdpbGRjYXJkXG5cdFx0XHRcdGlmICh0ZW1wbGF0ZVt0ZW1wbGF0ZUluZGV4XSA9PT0gJyonKSB7XG5cdFx0XHRcdFx0c3RhckluZGV4ID0gdGVtcGxhdGVJbmRleDtcblx0XHRcdFx0XHRtYXRjaEluZGV4ID0gc2VhcmNoSW5kZXg7XG5cdFx0XHRcdFx0dGVtcGxhdGVJbmRleCsrOyAvLyBTa2lwIHRoZSAnKidcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRzZWFyY2hJbmRleCsrO1xuXHRcdFx0XHRcdHRlbXBsYXRlSW5kZXgrKztcblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIGlmIChzdGFySW5kZXggIT09IC0xKSB7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tbmVnYXRlZC1jb25kaXRpb25cblx0XHRcdFx0Ly8gQmFja3RyYWNrIHRvIHRoZSBsYXN0ICcqJyBhbmQgdHJ5IHRvIG1hdGNoIG1vcmUgY2hhcmFjdGVyc1xuXHRcdFx0XHR0ZW1wbGF0ZUluZGV4ID0gc3RhckluZGV4ICsgMTtcblx0XHRcdFx0bWF0Y2hJbmRleCsrO1xuXHRcdFx0XHRzZWFyY2hJbmRleCA9IG1hdGNoSW5kZXg7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRyZXR1cm4gZmFsc2U7IC8vIE5vIG1hdGNoXG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gSGFuZGxlIHRyYWlsaW5nICcqJyBpbiB0ZW1wbGF0ZVxuXHRcdHdoaWxlICh0ZW1wbGF0ZUluZGV4IDwgdGVtcGxhdGUubGVuZ3RoICYmIHRlbXBsYXRlW3RlbXBsYXRlSW5kZXhdID09PSAnKicpIHtcblx0XHRcdHRlbXBsYXRlSW5kZXgrKztcblx0XHR9XG5cblx0XHRyZXR1cm4gdGVtcGxhdGVJbmRleCA9PT0gdGVtcGxhdGUubGVuZ3RoO1xuXHR9XG5cblx0LyoqXG5cdCogRGlzYWJsZSBkZWJ1ZyBvdXRwdXQuXG5cdCpcblx0KiBAcmV0dXJuIHtTdHJpbmd9IG5hbWVzcGFjZXNcblx0KiBAYXBpIHB1YmxpY1xuXHQqL1xuXHRmdW5jdGlvbiBkaXNhYmxlKCkge1xuXHRcdGNvbnN0IG5hbWVzcGFjZXMgPSBbXG5cdFx0XHQuLi5jcmVhdGVEZWJ1Zy5uYW1lcyxcblx0XHRcdC4uLmNyZWF0ZURlYnVnLnNraXBzLm1hcChuYW1lc3BhY2UgPT4gJy0nICsgbmFtZXNwYWNlKVxuXHRcdF0uam9pbignLCcpO1xuXHRcdGNyZWF0ZURlYnVnLmVuYWJsZSgnJyk7XG5cdFx0cmV0dXJuIG5hbWVzcGFjZXM7XG5cdH1cblxuXHQvKipcblx0KiBSZXR1cm5zIHRydWUgaWYgdGhlIGdpdmVuIG1vZGUgbmFtZSBpcyBlbmFibGVkLCBmYWxzZSBvdGhlcndpc2UuXG5cdCpcblx0KiBAcGFyYW0ge1N0cmluZ30gbmFtZVxuXHQqIEByZXR1cm4ge0Jvb2xlYW59XG5cdCogQGFwaSBwdWJsaWNcblx0Ki9cblx0ZnVuY3Rpb24gZW5hYmxlZChuYW1lKSB7XG5cdFx0Zm9yIChjb25zdCBza2lwIG9mIGNyZWF0ZURlYnVnLnNraXBzKSB7XG5cdFx0XHRpZiAobWF0Y2hlc1RlbXBsYXRlKG5hbWUsIHNraXApKSB7XG5cdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRmb3IgKGNvbnN0IG5zIG9mIGNyZWF0ZURlYnVnLm5hbWVzKSB7XG5cdFx0XHRpZiAobWF0Y2hlc1RlbXBsYXRlKG5hbWUsIG5zKSkge1xuXHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4gZmFsc2U7XG5cdH1cblxuXHQvKipcblx0KiBDb2VyY2UgYHZhbGAuXG5cdCpcblx0KiBAcGFyYW0ge01peGVkfSB2YWxcblx0KiBAcmV0dXJuIHtNaXhlZH1cblx0KiBAYXBpIHByaXZhdGVcblx0Ki9cblx0ZnVuY3Rpb24gY29lcmNlKHZhbCkge1xuXHRcdGlmICh2YWwgaW5zdGFuY2VvZiBFcnJvcikge1xuXHRcdFx0cmV0dXJuIHZhbC5zdGFjayB8fCB2YWwubWVzc2FnZTtcblx0XHR9XG5cdFx0cmV0dXJuIHZhbDtcblx0fVxuXG5cdC8qKlxuXHQqIFhYWCBETyBOT1QgVVNFLiBUaGlzIGlzIGEgdGVtcG9yYXJ5IHN0dWIgZnVuY3Rpb24uXG5cdCogWFhYIEl0IFdJTEwgYmUgcmVtb3ZlZCBpbiB0aGUgbmV4dCBtYWpvciByZWxlYXNlLlxuXHQqL1xuXHRmdW5jdGlvbiBkZXN0cm95KCkge1xuXHRcdGNvbnNvbGUud2FybignSW5zdGFuY2UgbWV0aG9kIGBkZWJ1Zy5kZXN0cm95KClgIGlzIGRlcHJlY2F0ZWQgYW5kIG5vIGxvbmdlciBkb2VzIGFueXRoaW5nLiBJdCB3aWxsIGJlIHJlbW92ZWQgaW4gdGhlIG5leHQgbWFqb3IgdmVyc2lvbiBvZiBgZGVidWdgLicpO1xuXHR9XG5cblx0Y3JlYXRlRGVidWcuZW5hYmxlKGNyZWF0ZURlYnVnLmxvYWQoKSk7XG5cblx0cmV0dXJuIGNyZWF0ZURlYnVnO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHNldHVwO1xuIiwiLyogZXNsaW50LWVudiBicm93c2VyICovXG5cbi8qKlxuICogVGhpcyBpcyB0aGUgd2ViIGJyb3dzZXIgaW1wbGVtZW50YXRpb24gb2YgYGRlYnVnKClgLlxuICovXG5cbmV4cG9ydHMuZm9ybWF0QXJncyA9IGZvcm1hdEFyZ3M7XG5leHBvcnRzLnNhdmUgPSBzYXZlO1xuZXhwb3J0cy5sb2FkID0gbG9hZDtcbmV4cG9ydHMudXNlQ29sb3JzID0gdXNlQ29sb3JzO1xuZXhwb3J0cy5zdG9yYWdlID0gbG9jYWxzdG9yYWdlKCk7XG5leHBvcnRzLmRlc3Ryb3kgPSAoKCkgPT4ge1xuXHRsZXQgd2FybmVkID0gZmFsc2U7XG5cblx0cmV0dXJuICgpID0+IHtcblx0XHRpZiAoIXdhcm5lZCkge1xuXHRcdFx0d2FybmVkID0gdHJ1ZTtcblx0XHRcdGNvbnNvbGUud2FybignSW5zdGFuY2UgbWV0aG9kIGBkZWJ1Zy5kZXN0cm95KClgIGlzIGRlcHJlY2F0ZWQgYW5kIG5vIGxvbmdlciBkb2VzIGFueXRoaW5nLiBJdCB3aWxsIGJlIHJlbW92ZWQgaW4gdGhlIG5leHQgbWFqb3IgdmVyc2lvbiBvZiBgZGVidWdgLicpO1xuXHRcdH1cblx0fTtcbn0pKCk7XG5cbi8qKlxuICogQ29sb3JzLlxuICovXG5cbmV4cG9ydHMuY29sb3JzID0gW1xuXHQnIzAwMDBDQycsXG5cdCcjMDAwMEZGJyxcblx0JyMwMDMzQ0MnLFxuXHQnIzAwMzNGRicsXG5cdCcjMDA2NkNDJyxcblx0JyMwMDY2RkYnLFxuXHQnIzAwOTlDQycsXG5cdCcjMDA5OUZGJyxcblx0JyMwMENDMDAnLFxuXHQnIzAwQ0MzMycsXG5cdCcjMDBDQzY2Jyxcblx0JyMwMENDOTknLFxuXHQnIzAwQ0NDQycsXG5cdCcjMDBDQ0ZGJyxcblx0JyMzMzAwQ0MnLFxuXHQnIzMzMDBGRicsXG5cdCcjMzMzM0NDJyxcblx0JyMzMzMzRkYnLFxuXHQnIzMzNjZDQycsXG5cdCcjMzM2NkZGJyxcblx0JyMzMzk5Q0MnLFxuXHQnIzMzOTlGRicsXG5cdCcjMzNDQzAwJyxcblx0JyMzM0NDMzMnLFxuXHQnIzMzQ0M2NicsXG5cdCcjMzNDQzk5Jyxcblx0JyMzM0NDQ0MnLFxuXHQnIzMzQ0NGRicsXG5cdCcjNjYwMENDJyxcblx0JyM2NjAwRkYnLFxuXHQnIzY2MzNDQycsXG5cdCcjNjYzM0ZGJyxcblx0JyM2NkNDMDAnLFxuXHQnIzY2Q0MzMycsXG5cdCcjOTkwMENDJyxcblx0JyM5OTAwRkYnLFxuXHQnIzk5MzNDQycsXG5cdCcjOTkzM0ZGJyxcblx0JyM5OUNDMDAnLFxuXHQnIzk5Q0MzMycsXG5cdCcjQ0MwMDAwJyxcblx0JyNDQzAwMzMnLFxuXHQnI0NDMDA2NicsXG5cdCcjQ0MwMDk5Jyxcblx0JyNDQzAwQ0MnLFxuXHQnI0NDMDBGRicsXG5cdCcjQ0MzMzAwJyxcblx0JyNDQzMzMzMnLFxuXHQnI0NDMzM2NicsXG5cdCcjQ0MzMzk5Jyxcblx0JyNDQzMzQ0MnLFxuXHQnI0NDMzNGRicsXG5cdCcjQ0M2NjAwJyxcblx0JyNDQzY2MzMnLFxuXHQnI0NDOTkwMCcsXG5cdCcjQ0M5OTMzJyxcblx0JyNDQ0NDMDAnLFxuXHQnI0NDQ0MzMycsXG5cdCcjRkYwMDAwJyxcblx0JyNGRjAwMzMnLFxuXHQnI0ZGMDA2NicsXG5cdCcjRkYwMDk5Jyxcblx0JyNGRjAwQ0MnLFxuXHQnI0ZGMDBGRicsXG5cdCcjRkYzMzAwJyxcblx0JyNGRjMzMzMnLFxuXHQnI0ZGMzM2NicsXG5cdCcjRkYzMzk5Jyxcblx0JyNGRjMzQ0MnLFxuXHQnI0ZGMzNGRicsXG5cdCcjRkY2NjAwJyxcblx0JyNGRjY2MzMnLFxuXHQnI0ZGOTkwMCcsXG5cdCcjRkY5OTMzJyxcblx0JyNGRkNDMDAnLFxuXHQnI0ZGQ0MzMydcbl07XG5cbi8qKlxuICogQ3VycmVudGx5IG9ubHkgV2ViS2l0LWJhc2VkIFdlYiBJbnNwZWN0b3JzLCBGaXJlZm94ID49IHYzMSxcbiAqIGFuZCB0aGUgRmlyZWJ1ZyBleHRlbnNpb24gKGFueSBGaXJlZm94IHZlcnNpb24pIGFyZSBrbm93blxuICogdG8gc3VwcG9ydCBcIiVjXCIgQ1NTIGN1c3RvbWl6YXRpb25zLlxuICpcbiAqIFRPRE86IGFkZCBhIGBsb2NhbFN0b3JhZ2VgIHZhcmlhYmxlIHRvIGV4cGxpY2l0bHkgZW5hYmxlL2Rpc2FibGUgY29sb3JzXG4gKi9cblxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGNvbXBsZXhpdHlcbmZ1bmN0aW9uIHVzZUNvbG9ycygpIHtcblx0Ly8gTkI6IEluIGFuIEVsZWN0cm9uIHByZWxvYWQgc2NyaXB0LCBkb2N1bWVudCB3aWxsIGJlIGRlZmluZWQgYnV0IG5vdCBmdWxseVxuXHQvLyBpbml0aWFsaXplZC4gU2luY2Ugd2Uga25vdyB3ZSdyZSBpbiBDaHJvbWUsIHdlJ2xsIGp1c3QgZGV0ZWN0IHRoaXMgY2FzZVxuXHQvLyBleHBsaWNpdGx5XG5cdGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB3aW5kb3cucHJvY2VzcyAmJiAod2luZG93LnByb2Nlc3MudHlwZSA9PT0gJ3JlbmRlcmVyJyB8fCB3aW5kb3cucHJvY2Vzcy5fX253anMpKSB7XG5cdFx0cmV0dXJuIHRydWU7XG5cdH1cblxuXHQvLyBJbnRlcm5ldCBFeHBsb3JlciBhbmQgRWRnZSBkbyBub3Qgc3VwcG9ydCBjb2xvcnMuXG5cdGlmICh0eXBlb2YgbmF2aWdhdG9yICE9PSAndW5kZWZpbmVkJyAmJiBuYXZpZ2F0b3IudXNlckFnZW50ICYmIG5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKS5tYXRjaCgvKGVkZ2V8dHJpZGVudClcXC8oXFxkKykvKSkge1xuXHRcdHJldHVybiBmYWxzZTtcblx0fVxuXG5cdGxldCBtO1xuXG5cdC8vIElzIHdlYmtpdD8gaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL2EvMTY0NTk2MDYvMzc2NzczXG5cdC8vIGRvY3VtZW50IGlzIHVuZGVmaW5lZCBpbiByZWFjdC1uYXRpdmU6IGh0dHBzOi8vZ2l0aHViLmNvbS9mYWNlYm9vay9yZWFjdC1uYXRpdmUvcHVsbC8xNjMyXG5cdC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1yZXR1cm4tYXNzaWduXG5cdHJldHVybiAodHlwZW9mIGRvY3VtZW50ICE9PSAndW5kZWZpbmVkJyAmJiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQgJiYgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnN0eWxlICYmIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zdHlsZS5XZWJraXRBcHBlYXJhbmNlKSB8fFxuXHRcdC8vIElzIGZpcmVidWc/IGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9hLzM5ODEyMC8zNzY3NzNcblx0XHQodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgd2luZG93LmNvbnNvbGUgJiYgKHdpbmRvdy5jb25zb2xlLmZpcmVidWcgfHwgKHdpbmRvdy5jb25zb2xlLmV4Y2VwdGlvbiAmJiB3aW5kb3cuY29uc29sZS50YWJsZSkpKSB8fFxuXHRcdC8vIElzIGZpcmVmb3ggPj0gdjMxP1xuXHRcdC8vIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvVG9vbHMvV2ViX0NvbnNvbGUjU3R5bGluZ19tZXNzYWdlc1xuXHRcdCh0eXBlb2YgbmF2aWdhdG9yICE9PSAndW5kZWZpbmVkJyAmJiBuYXZpZ2F0b3IudXNlckFnZW50ICYmIChtID0gbmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpLm1hdGNoKC9maXJlZm94XFwvKFxcZCspLykpICYmIHBhcnNlSW50KG1bMV0sIDEwKSA+PSAzMSkgfHxcblx0XHQvLyBEb3VibGUgY2hlY2sgd2Via2l0IGluIHVzZXJBZ2VudCBqdXN0IGluIGNhc2Ugd2UgYXJlIGluIGEgd29ya2VyXG5cdFx0KHR5cGVvZiBuYXZpZ2F0b3IgIT09ICd1bmRlZmluZWQnICYmIG5hdmlnYXRvci51c2VyQWdlbnQgJiYgbmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpLm1hdGNoKC9hcHBsZXdlYmtpdFxcLyhcXGQrKS8pKTtcbn1cblxuLyoqXG4gKiBDb2xvcml6ZSBsb2cgYXJndW1lbnRzIGlmIGVuYWJsZWQuXG4gKlxuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5mdW5jdGlvbiBmb3JtYXRBcmdzKGFyZ3MpIHtcblx0YXJnc1swXSA9ICh0aGlzLnVzZUNvbG9ycyA/ICclYycgOiAnJykgK1xuXHRcdHRoaXMubmFtZXNwYWNlICtcblx0XHQodGhpcy51c2VDb2xvcnMgPyAnICVjJyA6ICcgJykgK1xuXHRcdGFyZ3NbMF0gK1xuXHRcdCh0aGlzLnVzZUNvbG9ycyA/ICclYyAnIDogJyAnKSArXG5cdFx0JysnICsgbW9kdWxlLmV4cG9ydHMuaHVtYW5pemUodGhpcy5kaWZmKTtcblxuXHRpZiAoIXRoaXMudXNlQ29sb3JzKSB7XG5cdFx0cmV0dXJuO1xuXHR9XG5cblx0Y29uc3QgYyA9ICdjb2xvcjogJyArIHRoaXMuY29sb3I7XG5cdGFyZ3Muc3BsaWNlKDEsIDAsIGMsICdjb2xvcjogaW5oZXJpdCcpO1xuXG5cdC8vIFRoZSBmaW5hbCBcIiVjXCIgaXMgc29tZXdoYXQgdHJpY2t5LCBiZWNhdXNlIHRoZXJlIGNvdWxkIGJlIG90aGVyXG5cdC8vIGFyZ3VtZW50cyBwYXNzZWQgZWl0aGVyIGJlZm9yZSBvciBhZnRlciB0aGUgJWMsIHNvIHdlIG5lZWQgdG9cblx0Ly8gZmlndXJlIG91dCB0aGUgY29ycmVjdCBpbmRleCB0byBpbnNlcnQgdGhlIENTUyBpbnRvXG5cdGxldCBpbmRleCA9IDA7XG5cdGxldCBsYXN0QyA9IDA7XG5cdGFyZ3NbMF0ucmVwbGFjZSgvJVthLXpBLVolXS9nLCBtYXRjaCA9PiB7XG5cdFx0aWYgKG1hdGNoID09PSAnJSUnKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXHRcdGluZGV4Kys7XG5cdFx0aWYgKG1hdGNoID09PSAnJWMnKSB7XG5cdFx0XHQvLyBXZSBvbmx5IGFyZSBpbnRlcmVzdGVkIGluIHRoZSAqbGFzdCogJWNcblx0XHRcdC8vICh0aGUgdXNlciBtYXkgaGF2ZSBwcm92aWRlZCB0aGVpciBvd24pXG5cdFx0XHRsYXN0QyA9IGluZGV4O1xuXHRcdH1cblx0fSk7XG5cblx0YXJncy5zcGxpY2UobGFzdEMsIDAsIGMpO1xufVxuXG4vKipcbiAqIEludm9rZXMgYGNvbnNvbGUuZGVidWcoKWAgd2hlbiBhdmFpbGFibGUuXG4gKiBOby1vcCB3aGVuIGBjb25zb2xlLmRlYnVnYCBpcyBub3QgYSBcImZ1bmN0aW9uXCIuXG4gKiBJZiBgY29uc29sZS5kZWJ1Z2AgaXMgbm90IGF2YWlsYWJsZSwgZmFsbHMgYmFja1xuICogdG8gYGNvbnNvbGUubG9nYC5cbiAqXG4gKiBAYXBpIHB1YmxpY1xuICovXG5leHBvcnRzLmxvZyA9IGNvbnNvbGUuZGVidWcgfHwgY29uc29sZS5sb2cgfHwgKCgpID0+IHt9KTtcblxuLyoqXG4gKiBTYXZlIGBuYW1lc3BhY2VzYC5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gbmFtZXNwYWNlc1xuICogQGFwaSBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIHNhdmUobmFtZXNwYWNlcykge1xuXHR0cnkge1xuXHRcdGlmIChuYW1lc3BhY2VzKSB7XG5cdFx0XHRleHBvcnRzLnN0b3JhZ2Uuc2V0SXRlbSgnZGVidWcnLCBuYW1lc3BhY2VzKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0ZXhwb3J0cy5zdG9yYWdlLnJlbW92ZUl0ZW0oJ2RlYnVnJyk7XG5cdFx0fVxuXHR9IGNhdGNoIChlcnJvcikge1xuXHRcdC8vIFN3YWxsb3dcblx0XHQvLyBYWFggKEBRaXgtKSBzaG91bGQgd2UgYmUgbG9nZ2luZyB0aGVzZT9cblx0fVxufVxuXG4vKipcbiAqIExvYWQgYG5hbWVzcGFjZXNgLlxuICpcbiAqIEByZXR1cm4ge1N0cmluZ30gcmV0dXJucyB0aGUgcHJldmlvdXNseSBwZXJzaXN0ZWQgZGVidWcgbW9kZXNcbiAqIEBhcGkgcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBsb2FkKCkge1xuXHRsZXQgcjtcblx0dHJ5IHtcblx0XHRyID0gZXhwb3J0cy5zdG9yYWdlLmdldEl0ZW0oJ2RlYnVnJykgfHwgZXhwb3J0cy5zdG9yYWdlLmdldEl0ZW0oJ0RFQlVHJykgO1xuXHR9IGNhdGNoIChlcnJvcikge1xuXHRcdC8vIFN3YWxsb3dcblx0XHQvLyBYWFggKEBRaXgtKSBzaG91bGQgd2UgYmUgbG9nZ2luZyB0aGVzZT9cblx0fVxuXG5cdC8vIElmIGRlYnVnIGlzbid0IHNldCBpbiBMUywgYW5kIHdlJ3JlIGluIEVsZWN0cm9uLCB0cnkgdG8gbG9hZCAkREVCVUdcblx0aWYgKCFyICYmIHR5cGVvZiBwcm9jZXNzICE9PSAndW5kZWZpbmVkJyAmJiAnZW52JyBpbiBwcm9jZXNzKSB7XG5cdFx0ciA9IHByb2Nlc3MuZW52LkRFQlVHO1xuXHR9XG5cblx0cmV0dXJuIHI7XG59XG5cbi8qKlxuICogTG9jYWxzdG9yYWdlIGF0dGVtcHRzIHRvIHJldHVybiB0aGUgbG9jYWxzdG9yYWdlLlxuICpcbiAqIFRoaXMgaXMgbmVjZXNzYXJ5IGJlY2F1c2Ugc2FmYXJpIHRocm93c1xuICogd2hlbiBhIHVzZXIgZGlzYWJsZXMgY29va2llcy9sb2NhbHN0b3JhZ2VcbiAqIGFuZCB5b3UgYXR0ZW1wdCB0byBhY2Nlc3MgaXQuXG4gKlxuICogQHJldHVybiB7TG9jYWxTdG9yYWdlfVxuICogQGFwaSBwcml2YXRlXG4gKi9cblxuZnVuY3Rpb24gbG9jYWxzdG9yYWdlKCkge1xuXHR0cnkge1xuXHRcdC8vIFRWTUxLaXQgKEFwcGxlIFRWIEpTIFJ1bnRpbWUpIGRvZXMgbm90IGhhdmUgYSB3aW5kb3cgb2JqZWN0LCBqdXN0IGxvY2FsU3RvcmFnZSBpbiB0aGUgZ2xvYmFsIGNvbnRleHRcblx0XHQvLyBUaGUgQnJvd3NlciBhbHNvIGhhcyBsb2NhbFN0b3JhZ2UgaW4gdGhlIGdsb2JhbCBjb250ZXh0LlxuXHRcdHJldHVybiBsb2NhbFN0b3JhZ2U7XG5cdH0gY2F0Y2ggKGVycm9yKSB7XG5cdFx0Ly8gU3dhbGxvd1xuXHRcdC8vIFhYWCAoQFFpeC0pIHNob3VsZCB3ZSBiZSBsb2dnaW5nIHRoZXNlP1xuXHR9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZSgnLi9jb21tb24nKShleHBvcnRzKTtcblxuY29uc3Qge2Zvcm1hdHRlcnN9ID0gbW9kdWxlLmV4cG9ydHM7XG5cbi8qKlxuICogTWFwICVqIHRvIGBKU09OLnN0cmluZ2lmeSgpYCwgc2luY2Ugbm8gV2ViIEluc3BlY3RvcnMgZG8gdGhhdCBieSBkZWZhdWx0LlxuICovXG5cbmZvcm1hdHRlcnMuaiA9IGZ1bmN0aW9uICh2KSB7XG5cdHRyeSB7XG5cdFx0cmV0dXJuIEpTT04uc3RyaW5naWZ5KHYpO1xuXHR9IGNhdGNoIChlcnJvcikge1xuXHRcdHJldHVybiAnW1VuZXhwZWN0ZWRKU09OUGFyc2VFcnJvcl06ICcgKyBlcnJvci5tZXNzYWdlO1xuXHR9XG59O1xuIiwiaW1wb3J0IHsgbG9hZEVudiBhcyBfbG9hZEVudiwgaXNCcm93c2VyRW52aXJvbm1lbnQsIH0gZnJvbSAnQG9wZW5haS9hZ2VudHMtY29yZS9fc2hpbXMnO1xuLyoqXG4gKiBMb2FkcyBlbnZpcm9ubWVudCB2YXJpYWJsZXMgZnJvbSB0aGUgcHJvY2VzcyBlbnZpcm9ubWVudC5cbiAqXG4gKiBAcmV0dXJucyBBbiBvYmplY3QgY29udGFpbmluZyB0aGUgZW52aXJvbm1lbnQgdmFyaWFibGVzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gbG9hZEVudigpIHtcbiAgICByZXR1cm4gX2xvYWRFbnYoKTtcbn1cbi8qKlxuICogQ2hlY2tzIGlmIGEgZmxhZyBpcyBlbmFibGVkIGluIHRoZSBlbnZpcm9ubWVudC5cbiAqXG4gKiBAcGFyYW0gZmxhZ05hbWUgLSBUaGUgbmFtZSBvZiB0aGUgZmxhZyB0byBjaGVjay5cbiAqIEByZXR1cm5zIGB0cnVlYCBpZiB0aGUgZmxhZyBpcyBlbmFibGVkLCBgZmFsc2VgIG90aGVyd2lzZS5cbiAqL1xuZnVuY3Rpb24gaXNFbmFibGVkKGZsYWdOYW1lKSB7XG4gICAgY29uc3QgZW52ID0gbG9hZEVudigpO1xuICAgIHJldHVybiAodHlwZW9mIGVudiAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICAgICAgKGVudltmbGFnTmFtZV0gPT09ICd0cnVlJyB8fCBlbnZbZmxhZ05hbWVdID09PSAnMScpKTtcbn1cbi8qKlxuICogR2xvYmFsIGNvbmZpZ3VyYXRpb24gZm9yIHRyYWNpbmcuXG4gKi9cbmV4cG9ydCBjb25zdCB0cmFjaW5nID0ge1xuICAgIGdldCBkaXNhYmxlZCgpIHtcbiAgICAgICAgaWYgKGlzQnJvd3NlckVudmlyb25tZW50KCkpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGxvYWRFbnYoKS5OT0RFX0VOViA9PT0gJ3Rlc3QnKSB7XG4gICAgICAgICAgICAvLyBkaXNhYmxpbmcgYnkgZGVmYXVsdCBpbiB0ZXN0c1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGlzRW5hYmxlZCgnT1BFTkFJX0FHRU5UU19ESVNBQkxFX1RSQUNJTkcnKTtcbiAgICB9LFxufTtcbi8qKlxuICogR2xvYmFsIGNvbmZpZ3VyYXRpb24gZm9yIGxvZ2dpbmcuXG4gKi9cbmV4cG9ydCBjb25zdCBsb2dnaW5nID0ge1xuICAgIGdldCBkb250TG9nTW9kZWxEYXRhKCkge1xuICAgICAgICByZXR1cm4gaXNFbmFibGVkKCdPUEVOQUlfQUdFTlRTX0RPTlRfTE9HX01PREVMX0RBVEEnKTtcbiAgICB9LFxuICAgIGdldCBkb250TG9nVG9vbERhdGEoKSB7XG4gICAgICAgIHJldHVybiBpc0VuYWJsZWQoJ09QRU5BSV9BR0VOVFNfRE9OVF9MT0dfVE9PTF9EQVRBJyk7XG4gICAgfSxcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jb25maWcubWpzLm1hcCIsImltcG9ydCBkZWJ1ZyBmcm9tICdkZWJ1Zyc7XG5pbXBvcnQgeyBsb2dnaW5nIH0gZnJvbSBcIi4vY29uZmlnLm1qc1wiO1xuLyoqXG4gKiBCeSBkZWZhdWx0IHdlIGRvbid0IGxvZyBMTE0gaW5wdXRzL291dHB1dHMsIHRvIHByZXZlbnQgZXhwb3Npbmcgc2Vuc2l0aXZlIGRhdGEuIFNldCB0aGlzIGZsYWdcbiAqIHRvIGVuYWJsZSBsb2dnaW5nIHRoZW0uXG4gKi9cbmNvbnN0IGRvbnRMb2dNb2RlbERhdGEgPSBsb2dnaW5nLmRvbnRMb2dNb2RlbERhdGE7XG4vKipcbiAqIEJ5IGRlZmF1bHQgd2UgZG9uJ3QgbG9nIHRvb2wgaW5wdXRzL291dHB1dHMsIHRvIHByZXZlbnQgZXhwb3Npbmcgc2Vuc2l0aXZlIGRhdGEuIFNldCB0aGlzIGZsYWdcbiAqIHRvIGVuYWJsZSBsb2dnaW5nIHRoZW0uXG4gKi9cbmNvbnN0IGRvbnRMb2dUb29sRGF0YSA9IGxvZ2dpbmcuZG9udExvZ1Rvb2xEYXRhO1xuLyoqXG4gKiBHZXQgYSBsb2dnZXIgZm9yIGEgZ2l2ZW4gcGFja2FnZS5cbiAqXG4gKiBAcGFyYW0gbmFtZXNwYWNlIC0gdGhlIG5hbWVzcGFjZSB0byB1c2UgZm9yIHRoZSBsb2dnZXIuXG4gKiBAcmV0dXJucyBBIGxvZ2dlciBvYmplY3Qgd2l0aCBgZGVidWdgIGFuZCBgZXJyb3JgIG1ldGhvZHMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRMb2dnZXIobmFtZXNwYWNlID0gJ29wZW5haS1hZ2VudHMnKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgbmFtZXNwYWNlLFxuICAgICAgICBkZWJ1ZzogZGVidWcobmFtZXNwYWNlKSxcbiAgICAgICAgZXJyb3I6IGNvbnNvbGUuZXJyb3IsXG4gICAgICAgIHdhcm46IGNvbnNvbGUud2FybixcbiAgICAgICAgZG9udExvZ01vZGVsRGF0YSxcbiAgICAgICAgZG9udExvZ1Rvb2xEYXRhLFxuICAgIH07XG59XG5leHBvcnQgY29uc3QgbG9nZ2VyID0gZ2V0TG9nZ2VyKCdvcGVuYWktYWdlbnRzOmNvcmUnKTtcbmV4cG9ydCBkZWZhdWx0IGxvZ2dlcjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWxvZ2dlci5tanMubWFwIiwiY29uc3QgQllURV9QUkVWSUVXX0xJTUlUID0gMjA7XG5leHBvcnQgZnVuY3Rpb24gdG9TbWFydFN0cmluZyh2YWx1ZSkge1xuICAgIC8vIFByb2R1Y2UgYSBodW1hbi1mcmllbmRseSBzdHJpbmcgcmVwcmVzZW50YXRpb24gd2hpbGUgcHJlc2VydmluZyBlbm91Z2ggZGV0YWlsIGZvciBkZWJ1Z2dpbmcgd29ya2Zsb3dzLlxuICAgIGlmICh2YWx1ZSA9PT0gbnVsbCB8fCB2YWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiBTdHJpbmcodmFsdWUpO1xuICAgIH1cbiAgICBpZiAoaXNBcnJheUJ1ZmZlckxpa2UodmFsdWUpKSB7XG4gICAgICAgIHJldHVybiBmb3JtYXRCeXRlQXJyYXkobmV3IFVpbnQ4QXJyYXkodmFsdWUpKTtcbiAgICB9XG4gICAgaWYgKGlzQXJyYXlCdWZmZXJWaWV3KHZhbHVlKSkge1xuICAgICAgICBjb25zdCB2aWV3ID0gdmFsdWU7XG4gICAgICAgIHJldHVybiBmb3JtYXRCeXRlQXJyYXkobmV3IFVpbnQ4QXJyYXkodmlldy5idWZmZXIsIHZpZXcuYnl0ZU9mZnNldCwgdmlldy5ieXRlTGVuZ3RoKSk7XG4gICAgfVxuICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeSh2YWx1ZSwgc21hcnRTdHJpbmdSZXBsYWNlcik7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKF9lKSB7XG4gICAgICAgICAgICByZXR1cm4gJ1tvYmplY3Qgd2l0aCBjaXJjdWxhciByZWZlcmVuY2VzXSc7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIFN0cmluZyh2YWx1ZSk7XG59XG5leHBvcnQgZnVuY3Rpb24gaXNBcnJheUJ1ZmZlckxpa2UodmFsdWUpIHtcbiAgICAvLyBEZXRlY3QgcmF3IEFycmF5QnVmZmVyLWJhY2tlZCBwYXlsb2FkcyBzbyBjYWxsZXJzIGNhbiBnZW5lcmF0ZSBmdWxsIHByZXZpZXdzIHJhdGhlciB0aGFuIHRydW5jYXRlZCBoYXNoZXMuXG4gICAgaWYgKHZhbHVlIGluc3RhbmNlb2YgQXJyYXlCdWZmZXIpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGNvbnN0IHNoYXJlZEFycmF5QnVmZmVyQ3RvciA9IGdsb2JhbFRoaXMuU2hhcmVkQXJyYXlCdWZmZXI7XG4gICAgcmV0dXJuIEJvb2xlYW4oc2hhcmVkQXJyYXlCdWZmZXJDdG9yICYmIHZhbHVlIGluc3RhbmNlb2Ygc2hhcmVkQXJyYXlCdWZmZXJDdG9yKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBpc0FycmF5QnVmZmVyVmlldyh2YWx1ZSkge1xuICAgIC8vIFRyZWF0IHR5cGVkIGFycmF5IHZpZXdzIGFzIGJpbmFyeSBkYXRhIGZvciBjb25zaXN0ZW50IHNlcmlhbGl6YXRpb24uXG4gICAgcmV0dXJuIHR5cGVvZiBBcnJheUJ1ZmZlciAhPT0gJ3VuZGVmaW5lZCcgJiYgQXJyYXlCdWZmZXIuaXNWaWV3KHZhbHVlKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBpc1NlcmlhbGl6ZWRCdWZmZXJTbmFwc2hvdCh2YWx1ZSkge1xuICAgIC8vIFN1cHBvcnQgc2VyaWFsaXplZCBCdWZmZXIgc25hcHNob3RzIChlLmcuLCBmcm9tIEpTT04ucGFyc2UpIGVtaXR0ZWQgYnkgc29tZSB0b29sIG91dHB1dHMuXG4gICAgcmV0dXJuICh0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmXG4gICAgICAgIHZhbHVlICE9PSBudWxsICYmXG4gICAgICAgIHZhbHVlLnR5cGUgPT09ICdCdWZmZXInICYmXG4gICAgICAgIEFycmF5LmlzQXJyYXkodmFsdWUuZGF0YSkpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGlzTm9kZUJ1ZmZlcih2YWx1ZSkge1xuICAgIC8vIERldGVjdCBydW50aW1lIEJ1ZmZlcnMgd2l0aG91dCBpbXBvcnRpbmcgbm9kZS1zcGVjaWZpYyBzaGltcywgaGFuZGxpbmcgYnJvd3NlciBidWlsZHMgZ3JhY2VmdWxseS5cbiAgICBjb25zdCBidWZmZXJDdG9yID0gZ2xvYmFsVGhpcy5CdWZmZXI7XG4gICAgcmV0dXJuIEJvb2xlYW4oYnVmZmVyQ3RvciAmJlxuICAgICAgICB0eXBlb2YgYnVmZmVyQ3Rvci5pc0J1ZmZlciA9PT0gJ2Z1bmN0aW9uJyAmJlxuICAgICAgICBidWZmZXJDdG9yLmlzQnVmZmVyKHZhbHVlKSk7XG59XG5mdW5jdGlvbiBmb3JtYXRCeXRlQXJyYXkoYnl0ZXMpIHtcbiAgICBpZiAoYnl0ZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHJldHVybiAnW2J5dGUgYXJyYXkgKDAgYnl0ZXMpXSc7XG4gICAgfVxuICAgIGNvbnN0IHByZXZpZXdMZW5ndGggPSBNYXRoLm1pbihieXRlcy5sZW5ndGgsIEJZVEVfUFJFVklFV19MSU1JVCk7XG4gICAgY29uc3QgcHJldmlld1BhcnRzID0gW107XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwcmV2aWV3TGVuZ3RoOyBpKyspIHtcbiAgICAgICAgcHJldmlld1BhcnRzLnB1c2goZm9ybWF0Qnl0ZShieXRlc1tpXSkpO1xuICAgIH1cbiAgICBjb25zdCBlbGxpcHNpcyA9IGJ5dGVzLmxlbmd0aCA+IEJZVEVfUFJFVklFV19MSU1JVCA/ICcg4oCmJyA6ICcnO1xuICAgIGNvbnN0IHByZXZpZXcgPSBwcmV2aWV3UGFydHMuam9pbignICcpO1xuICAgIHJldHVybiBgW2J5dGUgYXJyYXkgJHtwcmV2aWV3fSR7ZWxsaXBzaXN9ICgke2J5dGVzLmxlbmd0aH0gYnl0ZXMpXWA7XG59XG5mdW5jdGlvbiBmb3JtYXRCeXRlKGJ5dGUpIHtcbiAgICByZXR1cm4gYDB4JHtieXRlLnRvU3RyaW5nKDE2KS5wYWRTdGFydCgyLCAnMCcpfWA7XG59XG5mdW5jdGlvbiBzbWFydFN0cmluZ1JlcGxhY2VyKF9rZXksIG5lc3RlZFZhbHVlKSB7XG4gICAgaWYgKGlzQXJyYXlCdWZmZXJMaWtlKG5lc3RlZFZhbHVlKSkge1xuICAgICAgICByZXR1cm4gZm9ybWF0Qnl0ZUFycmF5KG5ldyBVaW50OEFycmF5KG5lc3RlZFZhbHVlKSk7XG4gICAgfVxuICAgIGlmIChpc0FycmF5QnVmZmVyVmlldyhuZXN0ZWRWYWx1ZSkpIHtcbiAgICAgICAgY29uc3QgdmlldyA9IG5lc3RlZFZhbHVlO1xuICAgICAgICByZXR1cm4gZm9ybWF0Qnl0ZUFycmF5KG5ldyBVaW50OEFycmF5KHZpZXcuYnVmZmVyLCB2aWV3LmJ5dGVPZmZzZXQsIHZpZXcuYnl0ZUxlbmd0aCkpO1xuICAgIH1cbiAgICBpZiAoaXNTZXJpYWxpemVkQnVmZmVyU25hcHNob3QobmVzdGVkVmFsdWUpKSB7XG4gICAgICAgIHJldHVybiBmb3JtYXRCeXRlQXJyYXkoVWludDhBcnJheS5mcm9tKG5lc3RlZFZhbHVlLmRhdGEpKTtcbiAgICB9XG4gICAgcmV0dXJuIG5lc3RlZFZhbHVlO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c21hcnRTdHJpbmcubWpzLm1hcCIsImltcG9ydCB7IHNhZmVFeGVjdXRlIH0gZnJvbSBcIi4vdXRpbHMvc2FmZUV4ZWN1dGUubWpzXCI7XG5pbXBvcnQgeyB0b0Z1bmN0aW9uVG9vbE5hbWUgfSBmcm9tIFwiLi91dGlscy90b29scy5tanNcIjtcbmltcG9ydCB7IGdldFNjaGVtYUFuZFBhcnNlckZyb21JbnB1dFR5cGUgfSBmcm9tIFwiLi91dGlscy90b29scy5tanNcIjtcbmltcG9ydCB7IGlzWm9kT2JqZWN0IH0gZnJvbSBcIi4vdXRpbHMvdHlwZUd1YXJkcy5tanNcIjtcbmltcG9ydCB7IE1vZGVsQmVoYXZpb3JFcnJvciwgVXNlckVycm9yIH0gZnJvbSBcIi4vZXJyb3JzLm1qc1wiO1xuaW1wb3J0IGxvZ2dlciBmcm9tIFwiLi9sb2dnZXIubWpzXCI7XG5pbXBvcnQgeyBnZXRDdXJyZW50U3BhbiB9IGZyb20gXCIuL3RyYWNpbmcvaW5kZXgubWpzXCI7XG5pbXBvcnQgeyB0b1NtYXJ0U3RyaW5nIH0gZnJvbSBcIi4vdXRpbHMvc21hcnRTdHJpbmcubWpzXCI7XG5mdW5jdGlvbiBpc0NvbXB1dGVyUHJvdmlkZXIoY2FuZGlkYXRlKSB7XG4gICAgcmV0dXJuICghIWNhbmRpZGF0ZSAmJlxuICAgICAgICB0eXBlb2YgY2FuZGlkYXRlID09PSAnb2JqZWN0JyAmJlxuICAgICAgICB0eXBlb2YgY2FuZGlkYXRlLmNyZWF0ZSA9PT0gJ2Z1bmN0aW9uJyk7XG59XG4vKipcbiAqIEV4cG9zZXMgYSBjb21wdXRlciB0byB0aGUgYWdlbnQgYXMgYSB0b29sIHRvIGJlIGNhbGxlZC5cbiAqXG4gKiBAcGFyYW0gb3B0aW9ucyBBZGRpdGlvbmFsIGNvbmZpZ3VyYXRpb24gZm9yIHRoZSBjb21wdXRlciB0b29sIGxpa2Ugc3BlY2lmeWluZyB0aGUgbG9jYXRpb24gb2YgeW91ciBhZ2VudFxuICogQHJldHVybnMgYSBjb21wdXRlciB0b29sIGRlZmluaXRpb25cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNvbXB1dGVyVG9vbChvcHRpb25zKSB7XG4gICAgaWYgKCFvcHRpb25zLmNvbXB1dGVyKSB7XG4gICAgICAgIHRocm93IG5ldyBVc2VyRXJyb3IoJ2NvbXB1dGVyVG9vbCByZXF1aXJlcyBhIGNvbXB1dGVyIGluc3RhbmNlIG9yIGFuIGluaXRpYWxpemVyIGZ1bmN0aW9uLicpO1xuICAgIH1cbiAgICBjb25zdCB0b29sID0ge1xuICAgICAgICB0eXBlOiAnY29tcHV0ZXInLFxuICAgICAgICBuYW1lOiBvcHRpb25zLm5hbWUgPz8gJ2NvbXB1dGVyX3VzZV9wcmV2aWV3JyxcbiAgICAgICAgY29tcHV0ZXI6IG9wdGlvbnMuY29tcHV0ZXIsXG4gICAgfTtcbiAgICBpZiAodHlwZW9mIG9wdGlvbnMuY29tcHV0ZXIgPT09ICdmdW5jdGlvbicgfHxcbiAgICAgICAgaXNDb21wdXRlclByb3ZpZGVyKG9wdGlvbnMuY29tcHV0ZXIpKSB7XG4gICAgICAgIGNvbXB1dGVySW5pdGlhbGl6ZXJNYXAuc2V0KHRvb2wsIG9wdGlvbnMuY29tcHV0ZXIpO1xuICAgIH1cbiAgICByZXR1cm4gdG9vbDtcbn1cbi8vIEtlZXBzIHBlci10b29sIGNhY2hlIG9mIGNvbXB1dGVyIGluc3RhbmNlcyBrZXllZCBieSBSdW5Db250ZXh0IHNvIGVhY2ggcnVuIGdldHMgaXRzIG93biBpbnN0YW5jZS5cbmNvbnN0IGNvbXB1dGVyQ2FjaGUgPSBuZXcgV2Vha01hcCgpO1xuLy8gVHJhY2tzIHRoZSBpbml0aWFsaXplciBzbyB3ZSBkbyBub3Qgb3ZlcndyaXRlIHRoZSBjYWxsYWJsZSBvbiB0aGUgdG9vbCB3aGVuIHdlIG1lbW9pemUgdGhlIHJlc29sdmVkIGluc3RhbmNlLlxuY29uc3QgY29tcHV0ZXJJbml0aWFsaXplck1hcCA9IG5ldyBXZWFrTWFwKCk7XG4vLyBBbGxvd3MgY2xlYW51cCByb3V0aW5lcyB0byBmaW5kIGFsbCByZXNvbHZlZCBjb21wdXRlciBpbnN0YW5jZXMgZm9yIGEgZ2l2ZW4gcnVuIGNvbnRleHQuXG5jb25zdCBjb21wdXRlcnNCeVJ1bkNvbnRleHQgPSBuZXcgV2Vha01hcCgpO1xuZnVuY3Rpb24gZ2V0Q29tcHV0ZXJJbml0aWFsaXplcih0b29sKSB7XG4gICAgY29uc3QgaW5pdGlhbGl6ZXIgPSBjb21wdXRlckluaXRpYWxpemVyTWFwLmdldCh0b29sKTtcbiAgICBpZiAoaW5pdGlhbGl6ZXIpIHtcbiAgICAgICAgcmV0dXJuIGluaXRpYWxpemVyO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIHRvb2wuY29tcHV0ZXIgPT09ICdmdW5jdGlvbicgfHxcbiAgICAgICAgaXNDb21wdXRlclByb3ZpZGVyKHRvb2wuY29tcHV0ZXIpKSB7XG4gICAgICAgIHJldHVybiB0b29sLmNvbXB1dGVyO1xuICAgIH1cbiAgICByZXR1cm4gdW5kZWZpbmVkO1xufVxuZnVuY3Rpb24gdHJhY2tSZXNvbHZlZENvbXB1dGVyKHRvb2wsIHJ1bkNvbnRleHQsIHJlc29sdmVkKSB7XG4gICAgbGV0IHJlc29sdmVkQnlSdW4gPSBjb21wdXRlcnNCeVJ1bkNvbnRleHQuZ2V0KHJ1bkNvbnRleHQpO1xuICAgIGlmICghcmVzb2x2ZWRCeVJ1bikge1xuICAgICAgICByZXNvbHZlZEJ5UnVuID0gbmV3IE1hcCgpO1xuICAgICAgICBjb21wdXRlcnNCeVJ1bkNvbnRleHQuc2V0KHJ1bkNvbnRleHQsIHJlc29sdmVkQnlSdW4pO1xuICAgIH1cbiAgICByZXNvbHZlZEJ5UnVuLnNldCh0b29sLCByZXNvbHZlZCk7XG59XG4vKipcbiAqIFJldHVybnMgYSBjb21wdXRlciBpbnN0YW5jZSBmb3IgdGhlIHByb3ZpZGVkIHJ1biBjb250ZXh0LiBDYWNoZXMgcGVyIHJ1biB0byBhdm9pZCBzaGFyaW5nIGFjcm9zcyBydW5zLlxuICogQGludGVybmFsXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiByZXNvbHZlQ29tcHV0ZXIoYXJncykge1xuICAgIGNvbnN0IHsgdG9vbCwgcnVuQ29udGV4dCB9ID0gYXJncztcbiAgICAvLyBDYWNoZSBpbnN0YW5jZXMgcGVyIFJ1bkNvbnRleHQgc28gYSBzaW5nbGUgQ29tcHV0ZXIgaXMgbm90IHNoYXJlZCBhY3Jvc3Mgc2ltdWx0YW5lb3VzIHJ1bnMuXG4gICAgY29uc3QgdG9vbEtleSA9IHRvb2w7XG4gICAgbGV0IHBlckNvbnRleHQgPSBjb21wdXRlckNhY2hlLmdldCh0b29sS2V5KTtcbiAgICBpZiAoIXBlckNvbnRleHQpIHtcbiAgICAgICAgcGVyQ29udGV4dCA9IG5ldyBXZWFrTWFwKCk7XG4gICAgICAgIGNvbXB1dGVyQ2FjaGUuc2V0KHRvb2xLZXksIHBlckNvbnRleHQpO1xuICAgIH1cbiAgICBjb25zdCBjYWNoZWQgPSBwZXJDb250ZXh0LmdldChydW5Db250ZXh0KTtcbiAgICBpZiAoY2FjaGVkKSB7XG4gICAgICAgIHRyYWNrUmVzb2x2ZWRDb21wdXRlcih0b29sLCBydW5Db250ZXh0LCBjYWNoZWQpO1xuICAgICAgICByZXR1cm4gY2FjaGVkLmNvbXB1dGVyO1xuICAgIH1cbiAgICBjb25zdCBpbml0aWFsaXplckNvbmZpZyA9IGdldENvbXB1dGVySW5pdGlhbGl6ZXIodG9vbCk7XG4gICAgY29uc3QgbGlmZWN5Y2xlID0gaW5pdGlhbGl6ZXJDb25maWcgJiYgaXNDb21wdXRlclByb3ZpZGVyKGluaXRpYWxpemVyQ29uZmlnKVxuICAgICAgICA/IGluaXRpYWxpemVyQ29uZmlnXG4gICAgICAgIDogaXNDb21wdXRlclByb3ZpZGVyKHRvb2wuY29tcHV0ZXIpXG4gICAgICAgICAgICA/IHRvb2wuY29tcHV0ZXJcbiAgICAgICAgICAgIDogdW5kZWZpbmVkO1xuICAgIGNvbnN0IGluaXRpYWxpemVyID0gdHlwZW9mIGluaXRpYWxpemVyQ29uZmlnID09PSAnZnVuY3Rpb24nXG4gICAgICAgID8gaW5pdGlhbGl6ZXJDb25maWdcbiAgICAgICAgOiAobGlmZWN5Y2xlPy5jcmVhdGUgPz9cbiAgICAgICAgICAgICh0eXBlb2YgdG9vbC5jb21wdXRlciA9PT0gJ2Z1bmN0aW9uJ1xuICAgICAgICAgICAgICAgID8gdG9vbC5jb21wdXRlclxuICAgICAgICAgICAgICAgIDogdW5kZWZpbmVkKSk7XG4gICAgY29uc3QgZGlzcG9zZXIgPSBsaWZlY3ljbGU/LmRpc3Bvc2U7XG4gICAgY29uc3QgY29tcHV0ZXIgPSBpbml0aWFsaXplciAmJiB0eXBlb2YgaW5pdGlhbGl6ZXIgPT09ICdmdW5jdGlvbidcbiAgICAgICAgPyBhd2FpdCBpbml0aWFsaXplcih7IHJ1bkNvbnRleHQgfSlcbiAgICAgICAgOiB0b29sLmNvbXB1dGVyO1xuICAgIGlmICghY29tcHV0ZXIpIHtcbiAgICAgICAgdGhyb3cgbmV3IFVzZXJFcnJvcignVGhlIGNvbXB1dGVyIHRvb2wgZGlkIG5vdCBwcm92aWRlIGEgY29tcHV0ZXIgaW5zdGFuY2UuJyk7XG4gICAgfVxuICAgIGNvbnN0IHJlc29sdmVkID0ge1xuICAgICAgICBjb21wdXRlcixcbiAgICAgICAgZGlzcG9zZTogZGlzcG9zZXIsXG4gICAgfTtcbiAgICBwZXJDb250ZXh0LnNldChydW5Db250ZXh0LCByZXNvbHZlZCk7XG4gICAgdHJhY2tSZXNvbHZlZENvbXB1dGVyKHRvb2wsIHJ1bkNvbnRleHQsIHJlc29sdmVkKTtcbiAgICB0b29sLmNvbXB1dGVyID0gY29tcHV0ZXI7XG4gICAgcmV0dXJuIGNvbXB1dGVyO1xufVxuLyoqXG4gKiBEaXNwb3NlcyBhbnkgY29tcHV0ZXIgaW5zdGFuY2VzIGNyZWF0ZWQgZm9yIHRoZSBwcm92aWRlZCBydW4gY29udGV4dC5cbiAqIEBpbnRlcm5hbFxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZGlzcG9zZVJlc29sdmVkQ29tcHV0ZXJzKHsgcnVuQ29udGV4dCwgfSkge1xuICAgIGNvbnN0IHJlc29sdmVkQnlSdW4gPSBjb21wdXRlcnNCeVJ1bkNvbnRleHQuZ2V0KHJ1bkNvbnRleHQpO1xuICAgIGlmICghcmVzb2x2ZWRCeVJ1bikge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbXB1dGVyc0J5UnVuQ29udGV4dC5kZWxldGUocnVuQ29udGV4dCk7XG4gICAgY29uc3QgZGlzcG9zZXJzID0gW107XG4gICAgZm9yIChjb25zdCBbdG9vbCwgcmVzb2x2ZWRdIG9mIHJlc29sdmVkQnlSdW4uZW50cmllcygpKSB7XG4gICAgICAgIGNvbnN0IHBlckNvbnRleHQgPSBjb21wdXRlckNhY2hlLmdldCh0b29sKTtcbiAgICAgICAgcGVyQ29udGV4dD8uZGVsZXRlKHJ1bkNvbnRleHQpO1xuICAgICAgICBjb25zdCBzdG9yZWRJbml0aWFsaXplciA9IGdldENvbXB1dGVySW5pdGlhbGl6ZXIodG9vbCk7XG4gICAgICAgIGlmIChzdG9yZWRJbml0aWFsaXplcikge1xuICAgICAgICAgICAgdG9vbC5jb21wdXRlciA9IHN0b3JlZEluaXRpYWxpemVyO1xuICAgICAgICB9XG4gICAgICAgIGlmIChyZXNvbHZlZC5kaXNwb3NlKSB7XG4gICAgICAgICAgICBkaXNwb3NlcnMucHVzaChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgYXdhaXQgcmVzb2x2ZWQuZGlzcG9zZT8uKHsgcnVuQ29udGV4dCwgY29tcHV0ZXI6IHJlc29sdmVkLmNvbXB1dGVyIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZm9yIChjb25zdCBkaXNwb3NlIG9mIGRpc3Bvc2Vycykge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgYXdhaXQgZGlzcG9zZSgpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgbG9nZ2VyLndhcm4oYEZhaWxlZCB0byBkaXNwb3NlIGNvbXB1dGVyIGZvciBydW4gY29udGV4dDogJHtlcnJvcn1gKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbmV4cG9ydCBmdW5jdGlvbiBzaGVsbFRvb2wob3B0aW9ucykge1xuICAgIGNvbnN0IG5lZWRzQXBwcm92YWwgPSB0eXBlb2Ygb3B0aW9ucy5uZWVkc0FwcHJvdmFsID09PSAnZnVuY3Rpb24nXG4gICAgICAgID8gb3B0aW9ucy5uZWVkc0FwcHJvdmFsXG4gICAgICAgIDogYXN5bmMgKCkgPT4gdHlwZW9mIG9wdGlvbnMubmVlZHNBcHByb3ZhbCA9PT0gJ2Jvb2xlYW4nXG4gICAgICAgICAgICA/IG9wdGlvbnMubmVlZHNBcHByb3ZhbFxuICAgICAgICAgICAgOiBmYWxzZTtcbiAgICByZXR1cm4ge1xuICAgICAgICB0eXBlOiAnc2hlbGwnLFxuICAgICAgICBuYW1lOiBvcHRpb25zLm5hbWUgPz8gJ3NoZWxsJyxcbiAgICAgICAgc2hlbGw6IG9wdGlvbnMuc2hlbGwsXG4gICAgICAgIG5lZWRzQXBwcm92YWwsXG4gICAgICAgIG9uQXBwcm92YWw6IG9wdGlvbnMub25BcHByb3ZhbCxcbiAgICB9O1xufVxuZXhwb3J0IGZ1bmN0aW9uIGFwcGx5UGF0Y2hUb29sKG9wdGlvbnMpIHtcbiAgICBjb25zdCBuZWVkc0FwcHJvdmFsID0gdHlwZW9mIG9wdGlvbnMubmVlZHNBcHByb3ZhbCA9PT0gJ2Z1bmN0aW9uJ1xuICAgICAgICA/IG9wdGlvbnMubmVlZHNBcHByb3ZhbFxuICAgICAgICA6IGFzeW5jICgpID0+IHR5cGVvZiBvcHRpb25zLm5lZWRzQXBwcm92YWwgPT09ICdib29sZWFuJ1xuICAgICAgICAgICAgPyBvcHRpb25zLm5lZWRzQXBwcm92YWxcbiAgICAgICAgICAgIDogZmFsc2U7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogJ2FwcGx5X3BhdGNoJyxcbiAgICAgICAgbmFtZTogb3B0aW9ucy5uYW1lID8/ICdhcHBseV9wYXRjaCcsXG4gICAgICAgIGVkaXRvcjogb3B0aW9ucy5lZGl0b3IsXG4gICAgICAgIG5lZWRzQXBwcm92YWwsXG4gICAgICAgIG9uQXBwcm92YWw6IG9wdGlvbnMub25BcHByb3ZhbCxcbiAgICB9O1xufVxuLyoqXG4gKiBDcmVhdGVzIGEgaG9zdGVkIE1DUCB0b29sIGRlZmluaXRpb24uXG4gKlxuICogQHBhcmFtIG9wdGlvbnMgLSBDb25maWd1cmF0aW9uIGZvciB0aGUgaG9zdGVkIE1DUCB0b29sLCBpbmNsdWRpbmcgc2VydmVyIGNvbm5lY3Rpb24gZGV0YWlsc1xuICogYW5kIGFwcHJvdmFsIHJlcXVpcmVtZW50cy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGhvc3RlZE1jcFRvb2wob3B0aW9ucykge1xuICAgIGlmICgnc2VydmVyVXJsJyBpbiBvcHRpb25zKSB7XG4gICAgICAgIC8vIHRoZSBNQ1Agc2VydmVycyBjb21hcHRpYmxlIHdpdGggdGhlIHNwZWNpZmljYXRpb25cbiAgICAgICAgY29uc3QgcHJvdmlkZXJEYXRhID0gdHlwZW9mIG9wdGlvbnMucmVxdWlyZUFwcHJvdmFsID09PSAndW5kZWZpbmVkJyB8fFxuICAgICAgICAgICAgb3B0aW9ucy5yZXF1aXJlQXBwcm92YWwgPT09ICduZXZlcidcbiAgICAgICAgICAgID8ge1xuICAgICAgICAgICAgICAgIHR5cGU6ICdtY3AnLFxuICAgICAgICAgICAgICAgIHNlcnZlcl9sYWJlbDogb3B0aW9ucy5zZXJ2ZXJMYWJlbCxcbiAgICAgICAgICAgICAgICBzZXJ2ZXJfdXJsOiBvcHRpb25zLnNlcnZlclVybCxcbiAgICAgICAgICAgICAgICBhdXRob3JpemF0aW9uOiBvcHRpb25zLmF1dGhvcml6YXRpb24sXG4gICAgICAgICAgICAgICAgcmVxdWlyZV9hcHByb3ZhbDogJ25ldmVyJyxcbiAgICAgICAgICAgICAgICBhbGxvd2VkX3Rvb2xzOiB0b01jcEFsbG93ZWRUb29sc0ZpbHRlcihvcHRpb25zLmFsbG93ZWRUb29scyksXG4gICAgICAgICAgICAgICAgaGVhZGVyczogb3B0aW9ucy5oZWFkZXJzLFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgOiB7XG4gICAgICAgICAgICAgICAgdHlwZTogJ21jcCcsXG4gICAgICAgICAgICAgICAgc2VydmVyX2xhYmVsOiBvcHRpb25zLnNlcnZlckxhYmVsLFxuICAgICAgICAgICAgICAgIHNlcnZlcl91cmw6IG9wdGlvbnMuc2VydmVyVXJsLFxuICAgICAgICAgICAgICAgIGF1dGhvcml6YXRpb246IG9wdGlvbnMuYXV0aG9yaXphdGlvbixcbiAgICAgICAgICAgICAgICBhbGxvd2VkX3Rvb2xzOiB0b01jcEFsbG93ZWRUb29sc0ZpbHRlcihvcHRpb25zLmFsbG93ZWRUb29scyksXG4gICAgICAgICAgICAgICAgaGVhZGVyczogb3B0aW9ucy5oZWFkZXJzLFxuICAgICAgICAgICAgICAgIHJlcXVpcmVfYXBwcm92YWw6IHR5cGVvZiBvcHRpb25zLnJlcXVpcmVBcHByb3ZhbCA9PT0gJ3N0cmluZydcbiAgICAgICAgICAgICAgICAgICAgPyAnYWx3YXlzJ1xuICAgICAgICAgICAgICAgICAgICA6IGJ1aWxkUmVxdWlyZUFwcHJvdmFsKG9wdGlvbnMucmVxdWlyZUFwcHJvdmFsKSxcbiAgICAgICAgICAgICAgICBvbl9hcHByb3ZhbDogb3B0aW9ucy5vbkFwcHJvdmFsLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHR5cGU6ICdob3N0ZWRfdG9vbCcsXG4gICAgICAgICAgICBuYW1lOiAnaG9zdGVkX21jcCcsXG4gICAgICAgICAgICBwcm92aWRlckRhdGEsXG4gICAgICAgIH07XG4gICAgfVxuICAgIGVsc2UgaWYgKCdjb25uZWN0b3JJZCcgaW4gb3B0aW9ucykge1xuICAgICAgICAvLyBPcGVuQUkncyBjb25uZWN0b3JzXG4gICAgICAgIGNvbnN0IHByb3ZpZGVyRGF0YSA9IHR5cGVvZiBvcHRpb25zLnJlcXVpcmVBcHByb3ZhbCA9PT0gJ3VuZGVmaW5lZCcgfHxcbiAgICAgICAgICAgIG9wdGlvbnMucmVxdWlyZUFwcHJvdmFsID09PSAnbmV2ZXInXG4gICAgICAgICAgICA/IHtcbiAgICAgICAgICAgICAgICB0eXBlOiAnbWNwJyxcbiAgICAgICAgICAgICAgICBzZXJ2ZXJfbGFiZWw6IG9wdGlvbnMuc2VydmVyTGFiZWwsXG4gICAgICAgICAgICAgICAgY29ubmVjdG9yX2lkOiBvcHRpb25zLmNvbm5lY3RvcklkLFxuICAgICAgICAgICAgICAgIGF1dGhvcml6YXRpb246IG9wdGlvbnMuYXV0aG9yaXphdGlvbixcbiAgICAgICAgICAgICAgICByZXF1aXJlX2FwcHJvdmFsOiAnbmV2ZXInLFxuICAgICAgICAgICAgICAgIGFsbG93ZWRfdG9vbHM6IHRvTWNwQWxsb3dlZFRvb2xzRmlsdGVyKG9wdGlvbnMuYWxsb3dlZFRvb2xzKSxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBvcHRpb25zLmhlYWRlcnMsXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICA6IHtcbiAgICAgICAgICAgICAgICB0eXBlOiAnbWNwJyxcbiAgICAgICAgICAgICAgICBzZXJ2ZXJfbGFiZWw6IG9wdGlvbnMuc2VydmVyTGFiZWwsXG4gICAgICAgICAgICAgICAgY29ubmVjdG9yX2lkOiBvcHRpb25zLmNvbm5lY3RvcklkLFxuICAgICAgICAgICAgICAgIGF1dGhvcml6YXRpb246IG9wdGlvbnMuYXV0aG9yaXphdGlvbixcbiAgICAgICAgICAgICAgICBhbGxvd2VkX3Rvb2xzOiB0b01jcEFsbG93ZWRUb29sc0ZpbHRlcihvcHRpb25zLmFsbG93ZWRUb29scyksXG4gICAgICAgICAgICAgICAgaGVhZGVyczogb3B0aW9ucy5oZWFkZXJzLFxuICAgICAgICAgICAgICAgIHJlcXVpcmVfYXBwcm92YWw6IHR5cGVvZiBvcHRpb25zLnJlcXVpcmVBcHByb3ZhbCA9PT0gJ3N0cmluZydcbiAgICAgICAgICAgICAgICAgICAgPyAnYWx3YXlzJ1xuICAgICAgICAgICAgICAgICAgICA6IGJ1aWxkUmVxdWlyZUFwcHJvdmFsKG9wdGlvbnMucmVxdWlyZUFwcHJvdmFsKSxcbiAgICAgICAgICAgICAgICBvbl9hcHByb3ZhbDogb3B0aW9ucy5vbkFwcHJvdmFsLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHR5cGU6ICdob3N0ZWRfdG9vbCcsXG4gICAgICAgICAgICBuYW1lOiAnaG9zdGVkX21jcCcsXG4gICAgICAgICAgICBwcm92aWRlckRhdGEsXG4gICAgICAgIH07XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICAvLyB0aGUgTUNQIHNlcnZlcnMgY29tYXB0aWJsZSB3aXRoIHRoZSBzcGVjaWZpY2F0aW9uXG4gICAgICAgIGNvbnN0IHByb3ZpZGVyRGF0YSA9IHR5cGVvZiBvcHRpb25zLnJlcXVpcmVBcHByb3ZhbCA9PT0gJ3VuZGVmaW5lZCcgfHxcbiAgICAgICAgICAgIG9wdGlvbnMucmVxdWlyZUFwcHJvdmFsID09PSAnbmV2ZXInXG4gICAgICAgICAgICA/IHtcbiAgICAgICAgICAgICAgICB0eXBlOiAnbWNwJyxcbiAgICAgICAgICAgICAgICBzZXJ2ZXJfbGFiZWw6IG9wdGlvbnMuc2VydmVyTGFiZWwsXG4gICAgICAgICAgICAgICAgcmVxdWlyZV9hcHByb3ZhbDogJ25ldmVyJyxcbiAgICAgICAgICAgICAgICBhbGxvd2VkX3Rvb2xzOiB0b01jcEFsbG93ZWRUb29sc0ZpbHRlcihvcHRpb25zLmFsbG93ZWRUb29scyksXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICA6IHtcbiAgICAgICAgICAgICAgICB0eXBlOiAnbWNwJyxcbiAgICAgICAgICAgICAgICBzZXJ2ZXJfbGFiZWw6IG9wdGlvbnMuc2VydmVyTGFiZWwsXG4gICAgICAgICAgICAgICAgYWxsb3dlZF90b29sczogdG9NY3BBbGxvd2VkVG9vbHNGaWx0ZXIob3B0aW9ucy5hbGxvd2VkVG9vbHMpLFxuICAgICAgICAgICAgICAgIHJlcXVpcmVfYXBwcm92YWw6IHR5cGVvZiBvcHRpb25zLnJlcXVpcmVBcHByb3ZhbCA9PT0gJ3N0cmluZydcbiAgICAgICAgICAgICAgICAgICAgPyAnYWx3YXlzJ1xuICAgICAgICAgICAgICAgICAgICA6IGJ1aWxkUmVxdWlyZUFwcHJvdmFsKG9wdGlvbnMucmVxdWlyZUFwcHJvdmFsKSxcbiAgICAgICAgICAgICAgICBvbl9hcHByb3ZhbDogb3B0aW9ucy5vbkFwcHJvdmFsLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHR5cGU6ICdob3N0ZWRfdG9vbCcsXG4gICAgICAgICAgICBuYW1lOiAnaG9zdGVkX21jcCcsXG4gICAgICAgICAgICBwcm92aWRlckRhdGEsXG4gICAgICAgIH07XG4gICAgfVxufVxuLyoqXG4gKiBUaGUgZGVmYXVsdCBmdW5jdGlvbiB0byBpbnZva2Ugd2hlbiBhbiBlcnJvciBvY2N1cnMgd2hpbGUgcnVubmluZyB0aGUgdG9vbC5cbiAqXG4gKiBBbHdheXMgcmV0dXJucyBgQW4gZXJyb3Igb2NjdXJyZWQgd2hpbGUgcnVubmluZyB0aGUgdG9vbC4gUGxlYXNlIHRyeSBhZ2Fpbi4gRXJyb3I6IDxlcnJvciBkZXRhaWxzPmBcbiAqXG4gKiBAcGFyYW0gY29udGV4dCBBbiBpbnN0YW5jZSBvZiB0aGUgY3VycmVudCBSdW5Db250ZXh0XG4gKiBAcGFyYW0gZXJyb3IgVGhlIGVycm9yIHRoYXQgb2NjdXJyZWRcbiAqL1xuZnVuY3Rpb24gZGVmYXVsdFRvb2xFcnJvckZ1bmN0aW9uKGNvbnRleHQsIGVycm9yKSB7XG4gICAgY29uc3QgZGV0YWlscyA9IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci50b1N0cmluZygpIDogU3RyaW5nKGVycm9yKTtcbiAgICByZXR1cm4gYEFuIGVycm9yIG9jY3VycmVkIHdoaWxlIHJ1bm5pbmcgdGhlIHRvb2wuIFBsZWFzZSB0cnkgYWdhaW4uIEVycm9yOiAke2RldGFpbHN9YDtcbn1cbi8qKlxuICogRXhwb3NlcyBhIGZ1bmN0aW9uIHRvIHRoZSBhZ2VudCBhcyBhIHRvb2wgdG8gYmUgY2FsbGVkXG4gKlxuICogQHBhcmFtIG9wdGlvbnMgVGhlIG9wdGlvbnMgZm9yIHRoZSB0b29sXG4gKiBAcmV0dXJucyBBIG5ldyB0b29sXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB0b29sKG9wdGlvbnMpIHtcbiAgICBjb25zdCBuYW1lID0gb3B0aW9ucy5uYW1lXG4gICAgICAgID8gdG9GdW5jdGlvblRvb2xOYW1lKG9wdGlvbnMubmFtZSlcbiAgICAgICAgOiB0b0Z1bmN0aW9uVG9vbE5hbWUob3B0aW9ucy5leGVjdXRlLm5hbWUpO1xuICAgIGNvbnN0IHRvb2xFcnJvckZ1bmN0aW9uID0gdHlwZW9mIG9wdGlvbnMuZXJyb3JGdW5jdGlvbiA9PT0gJ3VuZGVmaW5lZCdcbiAgICAgICAgPyBkZWZhdWx0VG9vbEVycm9yRnVuY3Rpb25cbiAgICAgICAgOiBvcHRpb25zLmVycm9yRnVuY3Rpb247XG4gICAgaWYgKCFuYW1lKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignVG9vbCBuYW1lIGNhbm5vdCBiZSBlbXB0eS4gRWl0aGVyIG5hbWUgeW91ciBmdW5jdGlvbiBvciBwcm92aWRlIGEgbmFtZSBpbiB0aGUgb3B0aW9ucy4nKTtcbiAgICB9XG4gICAgY29uc3Qgc3RyaWN0TW9kZSA9IG9wdGlvbnMuc3RyaWN0ID8/IHRydWU7XG4gICAgaWYgKCFzdHJpY3RNb2RlICYmIGlzWm9kT2JqZWN0KG9wdGlvbnMucGFyYW1ldGVycykpIHtcbiAgICAgICAgdGhyb3cgbmV3IFVzZXJFcnJvcignU3RyaWN0IG1vZGUgaXMgcmVxdWlyZWQgZm9yIFpvZCBwYXJhbWV0ZXJzJyk7XG4gICAgfVxuICAgIGNvbnN0IHsgcGFyc2VyLCBzY2hlbWE6IHBhcmFtZXRlcnMgfSA9IGdldFNjaGVtYUFuZFBhcnNlckZyb21JbnB1dFR5cGUob3B0aW9ucy5wYXJhbWV0ZXJzLCBuYW1lKTtcbiAgICBhc3luYyBmdW5jdGlvbiBfaW52b2tlKHJ1bkNvbnRleHQsIGlucHV0LCBkZXRhaWxzKSB7XG4gICAgICAgIGNvbnN0IFtlcnJvciwgcGFyc2VkXSA9IGF3YWl0IHNhZmVFeGVjdXRlKCgpID0+IHBhcnNlcihpbnB1dCkpO1xuICAgICAgICBpZiAoZXJyb3IgIT09IG51bGwpIHtcbiAgICAgICAgICAgIGlmIChsb2dnZXIuZG9udExvZ1Rvb2xEYXRhKSB7XG4gICAgICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKGBJbnZhbGlkIEpTT04gaW5wdXQgZm9yIHRvb2wgJHtuYW1lfWApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKGBJbnZhbGlkIEpTT04gaW5wdXQgZm9yIHRvb2wgJHtuYW1lfTogJHtpbnB1dH1gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRocm93IG5ldyBNb2RlbEJlaGF2aW9yRXJyb3IoJ0ludmFsaWQgSlNPTiBpbnB1dCBmb3IgdG9vbCcpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChsb2dnZXIuZG9udExvZ1Rvb2xEYXRhKSB7XG4gICAgICAgICAgICBsb2dnZXIuZGVidWcoYEludm9raW5nIHRvb2wgJHtuYW1lfWApO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKGBJbnZva2luZyB0b29sICR7bmFtZX0gd2l0aCBpbnB1dCAke2lucHV0fWApO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IG9wdGlvbnMuZXhlY3V0ZShwYXJzZWQsIHJ1bkNvbnRleHQsIGRldGFpbHMpO1xuICAgICAgICBjb25zdCBzdHJpbmdSZXN1bHQgPSB0b1NtYXJ0U3RyaW5nKHJlc3VsdCk7XG4gICAgICAgIGlmIChsb2dnZXIuZG9udExvZ1Rvb2xEYXRhKSB7XG4gICAgICAgICAgICBsb2dnZXIuZGVidWcoYFRvb2wgJHtuYW1lfSBjb21wbGV0ZWRgKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZyhgVG9vbCAke25hbWV9IHJldHVybmVkOiAke3N0cmluZ1Jlc3VsdH1gKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbiAgICBhc3luYyBmdW5jdGlvbiBpbnZva2UocnVuQ29udGV4dCwgaW5wdXQsIGRldGFpbHMpIHtcbiAgICAgICAgcmV0dXJuIF9pbnZva2UocnVuQ29udGV4dCwgaW5wdXQsIGRldGFpbHMpLmNhdGNoKChlcnJvcikgPT4ge1xuICAgICAgICAgICAgaWYgKHRvb2xFcnJvckZ1bmN0aW9uKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgY3VycmVudFNwYW4gPSBnZXRDdXJyZW50U3BhbigpO1xuICAgICAgICAgICAgICAgIGN1cnJlbnRTcGFuPy5zZXRFcnJvcih7XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdFcnJvciBydW5uaW5nIHRvb2wgKG5vbi1mYXRhbCknLFxuICAgICAgICAgICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0b29sX25hbWU6IG5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJvcjogZXJyb3IudG9TdHJpbmcoKSxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdG9vbEVycm9yRnVuY3Rpb24ocnVuQ29udGV4dCwgZXJyb3IpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBjb25zdCBuZWVkc0FwcHJvdmFsID0gdHlwZW9mIG9wdGlvbnMubmVlZHNBcHByb3ZhbCA9PT0gJ2Z1bmN0aW9uJ1xuICAgICAgICA/IG9wdGlvbnMubmVlZHNBcHByb3ZhbFxuICAgICAgICA6IGFzeW5jICgpID0+IHR5cGVvZiBvcHRpb25zLm5lZWRzQXBwcm92YWwgPT09ICdib29sZWFuJ1xuICAgICAgICAgICAgPyBvcHRpb25zLm5lZWRzQXBwcm92YWxcbiAgICAgICAgICAgIDogZmFsc2U7XG4gICAgY29uc3QgaXNFbmFibGVkID0gdHlwZW9mIG9wdGlvbnMuaXNFbmFibGVkID09PSAnZnVuY3Rpb24nXG4gICAgICAgID8gYXN5bmMgKHJ1bkNvbnRleHQsIGFnZW50KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBwcmVkaWNhdGUgPSBvcHRpb25zLmlzRW5hYmxlZDtcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHByZWRpY2F0ZSh7IHJ1bkNvbnRleHQsIGFnZW50IH0pO1xuICAgICAgICAgICAgcmV0dXJuIEJvb2xlYW4ocmVzdWx0KTtcbiAgICAgICAgfVxuICAgICAgICA6IGFzeW5jICgpID0+IHR5cGVvZiBvcHRpb25zLmlzRW5hYmxlZCA9PT0gJ2Jvb2xlYW4nID8gb3B0aW9ucy5pc0VuYWJsZWQgOiB0cnVlO1xuICAgIHJldHVybiB7XG4gICAgICAgIHR5cGU6ICdmdW5jdGlvbicsXG4gICAgICAgIG5hbWUsXG4gICAgICAgIGRlc2NyaXB0aW9uOiBvcHRpb25zLmRlc2NyaXB0aW9uLFxuICAgICAgICBwYXJhbWV0ZXJzLFxuICAgICAgICBzdHJpY3Q6IHN0cmljdE1vZGUsXG4gICAgICAgIGludm9rZSxcbiAgICAgICAgbmVlZHNBcHByb3ZhbCxcbiAgICAgICAgaXNFbmFibGVkLFxuICAgIH07XG59XG5mdW5jdGlvbiBidWlsZFJlcXVpcmVBcHByb3ZhbChyZXF1aXJlQXBwcm92YWwpIHtcbiAgICBjb25zdCByZXN1bHQgPSB7fTtcbiAgICBpZiAocmVxdWlyZUFwcHJvdmFsLmFsd2F5cykge1xuICAgICAgICByZXN1bHQuYWx3YXlzID0geyB0b29sX25hbWVzOiByZXF1aXJlQXBwcm92YWwuYWx3YXlzLnRvb2xOYW1lcyB9O1xuICAgIH1cbiAgICBpZiAocmVxdWlyZUFwcHJvdmFsLm5ldmVyKSB7XG4gICAgICAgIHJlc3VsdC5uZXZlciA9IHsgdG9vbF9uYW1lczogcmVxdWlyZUFwcHJvdmFsLm5ldmVyLnRvb2xOYW1lcyB9O1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xufVxuZnVuY3Rpb24gdG9NY3BBbGxvd2VkVG9vbHNGaWx0ZXIoYWxsb3dlZFRvb2xzKSB7XG4gICAgaWYgKHR5cGVvZiBhbGxvd2VkVG9vbHMgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGlmIChBcnJheS5pc0FycmF5KGFsbG93ZWRUb29scykpIHtcbiAgICAgICAgcmV0dXJuIHsgdG9vbF9uYW1lczogYWxsb3dlZFRvb2xzIH07XG4gICAgfVxuICAgIHJldHVybiB7IHRvb2xfbmFtZXM6IGFsbG93ZWRUb29scz8udG9vbE5hbWVzID8/IFtdIH07XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD10b29sLm1qcy5tYXAiLCJpbXBvcnQgeyB0b29sIH0gZnJvbSBcIi4vdG9vbC5tanNcIjtcbmltcG9ydCB7IFVzZXJFcnJvciB9IGZyb20gXCIuL2Vycm9ycy5tanNcIjtcbmltcG9ydCB7IE1DUFNlcnZlclN0ZGlvIGFzIFVuZGVybHlpbmdNQ1BTZXJ2ZXJTdGRpbywgTUNQU2VydmVyU3RyZWFtYWJsZUh0dHAgYXMgVW5kZXJseWluZ01DUFNlcnZlclN0cmVhbWFibGVIdHRwLCBNQ1BTZXJ2ZXJTU0UgYXMgVW5kZXJseWluZ01DUFNlcnZlclNTRSwgfSBmcm9tICdAb3BlbmFpL2FnZW50cy1jb3JlL19zaGltcyc7XG5pbXBvcnQgeyBnZXRDdXJyZW50U3BhbiwgZ2V0Q3VycmVudFRyYWNlLCB3aXRoTUNQTGlzdFRvb2xzU3BhbiwgfSBmcm9tIFwiLi90cmFjaW5nL2luZGV4Lm1qc1wiO1xuaW1wb3J0IHsgbG9nZ2VyIGFzIGdsb2JhbExvZ2dlciwgZ2V0TG9nZ2VyIH0gZnJvbSBcIi4vbG9nZ2VyLm1qc1wiO1xuaW1wb3J0IGRlYnVnIGZyb20gJ2RlYnVnJztcbmltcG9ydCB7IHogfSBmcm9tICd6b2QnO1xuZXhwb3J0IGNvbnN0IERFRkFVTFRfU1RESU9fTUNQX0NMSUVOVF9MT0dHRVJfTkFNRSA9ICdvcGVuYWktYWdlbnRzOnN0ZGlvLW1jcC1jbGllbnQnO1xuZXhwb3J0IGNvbnN0IERFRkFVTFRfU1RSRUFNQUJMRV9IVFRQX01DUF9DTElFTlRfTE9HR0VSX05BTUUgPSAnb3BlbmFpLWFnZW50czpzdHJlYW1hYmxlLWh0dHAtbWNwLWNsaWVudCc7XG5leHBvcnQgY29uc3QgREVGQVVMVF9TU0VfTUNQX0NMSUVOVF9MT0dHRVJfTkFNRSA9ICdvcGVuYWktYWdlbnRzOnNzZS1tY3AtY2xpZW50JztcbmV4cG9ydCBjbGFzcyBCYXNlTUNQU2VydmVyU3RkaW8ge1xuICAgIGNhY2hlVG9vbHNMaXN0O1xuICAgIF9jYWNoZWRUb29scyA9IHVuZGVmaW5lZDtcbiAgICB0b29sRmlsdGVyO1xuICAgIGxvZ2dlcjtcbiAgICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XG4gICAgICAgIHRoaXMubG9nZ2VyID1cbiAgICAgICAgICAgIG9wdGlvbnMubG9nZ2VyID8/IGdldExvZ2dlcihERUZBVUxUX1NURElPX01DUF9DTElFTlRfTE9HR0VSX05BTUUpO1xuICAgICAgICB0aGlzLmNhY2hlVG9vbHNMaXN0ID0gb3B0aW9ucy5jYWNoZVRvb2xzTGlzdCA/PyBmYWxzZTtcbiAgICAgICAgdGhpcy50b29sRmlsdGVyID0gb3B0aW9ucy50b29sRmlsdGVyO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBMb2dzIGEgZGVidWcgbWVzc2FnZSB3aGVuIGRlYnVnIGxvZ2dpbmcgaXMgZW5hYmxlZC5cbiAgICAgKiBAcGFyYW0gYnVpbGRNZXNzYWdlIEEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIHRoZSBtZXNzYWdlIHRvIGxvZy5cbiAgICAgKi9cbiAgICBkZWJ1Z0xvZyhidWlsZE1lc3NhZ2UpIHtcbiAgICAgICAgaWYgKGRlYnVnLmVuYWJsZWQodGhpcy5sb2dnZXIubmFtZXNwYWNlKSkge1xuICAgICAgICAgICAgLy8gb25seSB3aGVuIHRoaXMgaXMgdHJ1ZSwgdGhlIGZ1bmN0aW9uIHRvIGJ1aWxkIHRoZSBzdHJpbmcgaXMgY2FsbGVkXG4gICAgICAgICAgICB0aGlzLmxvZ2dlci5kZWJ1ZyhidWlsZE1lc3NhZ2UoKSk7XG4gICAgICAgIH1cbiAgICB9XG59XG5leHBvcnQgY2xhc3MgQmFzZU1DUFNlcnZlclN0cmVhbWFibGVIdHRwIHtcbiAgICBjYWNoZVRvb2xzTGlzdDtcbiAgICBfY2FjaGVkVG9vbHMgPSB1bmRlZmluZWQ7XG4gICAgdG9vbEZpbHRlcjtcbiAgICBsb2dnZXI7XG4gICAgY29uc3RydWN0b3Iob3B0aW9ucykge1xuICAgICAgICB0aGlzLmxvZ2dlciA9XG4gICAgICAgICAgICBvcHRpb25zLmxvZ2dlciA/P1xuICAgICAgICAgICAgICAgIGdldExvZ2dlcihERUZBVUxUX1NUUkVBTUFCTEVfSFRUUF9NQ1BfQ0xJRU5UX0xPR0dFUl9OQU1FKTtcbiAgICAgICAgdGhpcy5jYWNoZVRvb2xzTGlzdCA9IG9wdGlvbnMuY2FjaGVUb29sc0xpc3QgPz8gZmFsc2U7XG4gICAgICAgIHRoaXMudG9vbEZpbHRlciA9IG9wdGlvbnMudG9vbEZpbHRlcjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTG9ncyBhIGRlYnVnIG1lc3NhZ2Ugd2hlbiBkZWJ1ZyBsb2dnaW5nIGlzIGVuYWJsZWQuXG4gICAgICogQHBhcmFtIGJ1aWxkTWVzc2FnZSBBIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyB0aGUgbWVzc2FnZSB0byBsb2cuXG4gICAgICovXG4gICAgZGVidWdMb2coYnVpbGRNZXNzYWdlKSB7XG4gICAgICAgIGlmIChkZWJ1Zy5lbmFibGVkKHRoaXMubG9nZ2VyLm5hbWVzcGFjZSkpIHtcbiAgICAgICAgICAgIC8vIG9ubHkgd2hlbiB0aGlzIGlzIHRydWUsIHRoZSBmdW5jdGlvbiB0byBidWlsZCB0aGUgc3RyaW5nIGlzIGNhbGxlZFxuICAgICAgICAgICAgdGhpcy5sb2dnZXIuZGVidWcoYnVpbGRNZXNzYWdlKCkpO1xuICAgICAgICB9XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIEJhc2VNQ1BTZXJ2ZXJTU0Uge1xuICAgIGNhY2hlVG9vbHNMaXN0O1xuICAgIF9jYWNoZWRUb29scyA9IHVuZGVmaW5lZDtcbiAgICB0b29sRmlsdGVyO1xuICAgIGxvZ2dlcjtcbiAgICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XG4gICAgICAgIHRoaXMubG9nZ2VyID1cbiAgICAgICAgICAgIG9wdGlvbnMubG9nZ2VyID8/IGdldExvZ2dlcihERUZBVUxUX1NTRV9NQ1BfQ0xJRU5UX0xPR0dFUl9OQU1FKTtcbiAgICAgICAgdGhpcy5jYWNoZVRvb2xzTGlzdCA9IG9wdGlvbnMuY2FjaGVUb29sc0xpc3QgPz8gZmFsc2U7XG4gICAgICAgIHRoaXMudG9vbEZpbHRlciA9IG9wdGlvbnMudG9vbEZpbHRlcjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTG9ncyBhIGRlYnVnIG1lc3NhZ2Ugd2hlbiBkZWJ1ZyBsb2dnaW5nIGlzIGVuYWJsZWQuXG4gICAgICogQHBhcmFtIGJ1aWxkTWVzc2FnZSBBIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyB0aGUgbWVzc2FnZSB0byBsb2cuXG4gICAgICovXG4gICAgZGVidWdMb2coYnVpbGRNZXNzYWdlKSB7XG4gICAgICAgIGlmIChkZWJ1Zy5lbmFibGVkKHRoaXMubG9nZ2VyLm5hbWVzcGFjZSkpIHtcbiAgICAgICAgICAgIC8vIG9ubHkgd2hlbiB0aGlzIGlzIHRydWUsIHRoZSBmdW5jdGlvbiB0byBidWlsZCB0aGUgc3RyaW5nIGlzIGNhbGxlZFxuICAgICAgICAgICAgdGhpcy5sb2dnZXIuZGVidWcoYnVpbGRNZXNzYWdlKCkpO1xuICAgICAgICB9XG4gICAgfVxufVxuLyoqXG4gKiBNaW5pbXVtIE1DUCB0b29sIGRhdGEgZGVmaW5pdGlvbi5cbiAqIFRoaXMgdHlwZSBkZWZpbml0aW9uIGRvZXMgbm90IGludGVuZCB0byBjb3ZlciBhbGwgcG9zc2libGUgcHJvcGVydGllcy5cbiAqIEl0IHN1cHBvcnRzIHRoZSBwcm9wZXJ0aWVzIHRoYXQgYXJlIHVzZWQgaW4gdGhpcyBTREsuXG4gKi9cbmV4cG9ydCBjb25zdCBNQ1BUb29sID0gei5vYmplY3Qoe1xuICAgIG5hbWU6IHouc3RyaW5nKCksXG4gICAgZGVzY3JpcHRpb246IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICBpbnB1dFNjaGVtYTogei5vYmplY3Qoe1xuICAgICAgICB0eXBlOiB6LmxpdGVyYWwoJ29iamVjdCcpLFxuICAgICAgICBwcm9wZXJ0aWVzOiB6LnJlY29yZCh6LnN0cmluZygpLCB6LmFueSgpKSxcbiAgICAgICAgcmVxdWlyZWQ6IHouYXJyYXkoei5zdHJpbmcoKSksXG4gICAgICAgIGFkZGl0aW9uYWxQcm9wZXJ0aWVzOiB6LmJvb2xlYW4oKSxcbiAgICB9KSxcbn0pO1xuLyoqXG4gKiBQdWJsaWMgaW50ZXJmYWNlIG9mIGFuIE1DUCBzZXJ2ZXIgdGhhdCBwcm92aWRlcyB0b29scy5cbiAqIFlvdSBjYW4gdXNlIHRoaXMgY2xhc3MgdG8gcGFzcyBNQ1Agc2VydmVyIHNldHRpbmdzIHRvIHlvdXIgYWdlbnQuXG4gKi9cbmV4cG9ydCBjbGFzcyBNQ1BTZXJ2ZXJTdGRpbyBleHRlbmRzIEJhc2VNQ1BTZXJ2ZXJTdGRpbyB7XG4gICAgdW5kZXJseWluZztcbiAgICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XG4gICAgICAgIHN1cGVyKG9wdGlvbnMpO1xuICAgICAgICB0aGlzLnVuZGVybHlpbmcgPSBuZXcgVW5kZXJseWluZ01DUFNlcnZlclN0ZGlvKG9wdGlvbnMpO1xuICAgIH1cbiAgICBnZXQgbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudW5kZXJseWluZy5uYW1lO1xuICAgIH1cbiAgICBjb25uZWN0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy51bmRlcmx5aW5nLmNvbm5lY3QoKTtcbiAgICB9XG4gICAgY2xvc2UoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnVuZGVybHlpbmcuY2xvc2UoKTtcbiAgICB9XG4gICAgYXN5bmMgbGlzdFRvb2xzKCkge1xuICAgICAgICBpZiAodGhpcy5jYWNoZVRvb2xzTGlzdCAmJiB0aGlzLl9jYWNoZWRUb29scykge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2NhY2hlZFRvb2xzO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHRvb2xzID0gYXdhaXQgdGhpcy51bmRlcmx5aW5nLmxpc3RUb29scygpO1xuICAgICAgICBpZiAodGhpcy5jYWNoZVRvb2xzTGlzdCkge1xuICAgICAgICAgICAgdGhpcy5fY2FjaGVkVG9vbHMgPSB0b29scztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdG9vbHM7XG4gICAgfVxuICAgIGNhbGxUb29sKHRvb2xOYW1lLCBhcmdzKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnVuZGVybHlpbmcuY2FsbFRvb2wodG9vbE5hbWUsIGFyZ3MpO1xuICAgIH1cbiAgICBpbnZhbGlkYXRlVG9vbHNDYWNoZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudW5kZXJseWluZy5pbnZhbGlkYXRlVG9vbHNDYWNoZSgpO1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBNQ1BTZXJ2ZXJTdHJlYW1hYmxlSHR0cCBleHRlbmRzIEJhc2VNQ1BTZXJ2ZXJTdHJlYW1hYmxlSHR0cCB7XG4gICAgdW5kZXJseWluZztcbiAgICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XG4gICAgICAgIHN1cGVyKG9wdGlvbnMpO1xuICAgICAgICB0aGlzLnVuZGVybHlpbmcgPSBuZXcgVW5kZXJseWluZ01DUFNlcnZlclN0cmVhbWFibGVIdHRwKG9wdGlvbnMpO1xuICAgIH1cbiAgICBnZXQgbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudW5kZXJseWluZy5uYW1lO1xuICAgIH1cbiAgICBjb25uZWN0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy51bmRlcmx5aW5nLmNvbm5lY3QoKTtcbiAgICB9XG4gICAgY2xvc2UoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnVuZGVybHlpbmcuY2xvc2UoKTtcbiAgICB9XG4gICAgYXN5bmMgbGlzdFRvb2xzKCkge1xuICAgICAgICBpZiAodGhpcy5jYWNoZVRvb2xzTGlzdCAmJiB0aGlzLl9jYWNoZWRUb29scykge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2NhY2hlZFRvb2xzO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHRvb2xzID0gYXdhaXQgdGhpcy51bmRlcmx5aW5nLmxpc3RUb29scygpO1xuICAgICAgICBpZiAodGhpcy5jYWNoZVRvb2xzTGlzdCkge1xuICAgICAgICAgICAgdGhpcy5fY2FjaGVkVG9vbHMgPSB0b29scztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdG9vbHM7XG4gICAgfVxuICAgIGNhbGxUb29sKHRvb2xOYW1lLCBhcmdzKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnVuZGVybHlpbmcuY2FsbFRvb2wodG9vbE5hbWUsIGFyZ3MpO1xuICAgIH1cbiAgICBpbnZhbGlkYXRlVG9vbHNDYWNoZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudW5kZXJseWluZy5pbnZhbGlkYXRlVG9vbHNDYWNoZSgpO1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBNQ1BTZXJ2ZXJTU0UgZXh0ZW5kcyBCYXNlTUNQU2VydmVyU1NFIHtcbiAgICB1bmRlcmx5aW5nO1xuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcbiAgICAgICAgc3VwZXIob3B0aW9ucyk7XG4gICAgICAgIHRoaXMudW5kZXJseWluZyA9IG5ldyBVbmRlcmx5aW5nTUNQU2VydmVyU1NFKG9wdGlvbnMpO1xuICAgIH1cbiAgICBnZXQgbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudW5kZXJseWluZy5uYW1lO1xuICAgIH1cbiAgICBjb25uZWN0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy51bmRlcmx5aW5nLmNvbm5lY3QoKTtcbiAgICB9XG4gICAgY2xvc2UoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnVuZGVybHlpbmcuY2xvc2UoKTtcbiAgICB9XG4gICAgYXN5bmMgbGlzdFRvb2xzKCkge1xuICAgICAgICBpZiAodGhpcy5jYWNoZVRvb2xzTGlzdCAmJiB0aGlzLl9jYWNoZWRUb29scykge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2NhY2hlZFRvb2xzO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHRvb2xzID0gYXdhaXQgdGhpcy51bmRlcmx5aW5nLmxpc3RUb29scygpO1xuICAgICAgICBpZiAodGhpcy5jYWNoZVRvb2xzTGlzdCkge1xuICAgICAgICAgICAgdGhpcy5fY2FjaGVkVG9vbHMgPSB0b29scztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdG9vbHM7XG4gICAgfVxuICAgIGNhbGxUb29sKHRvb2xOYW1lLCBhcmdzKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnVuZGVybHlpbmcuY2FsbFRvb2wodG9vbE5hbWUsIGFyZ3MpO1xuICAgIH1cbiAgICBpbnZhbGlkYXRlVG9vbHNDYWNoZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudW5kZXJseWluZy5pbnZhbGlkYXRlVG9vbHNDYWNoZSgpO1xuICAgIH1cbn1cbi8qKlxuICogRmV0Y2hlcyBhbmQgZmxhdHRlbnMgYWxsIHRvb2xzIGZyb20gbXVsdGlwbGUgTUNQIHNlcnZlcnMuXG4gKiBMb2dzIGFuZCBza2lwcyBhbnkgc2VydmVycyB0aGF0IGZhaWwgdG8gcmVzcG9uZC5cbiAqL1xuY29uc3QgX2NhY2hlZFRvb2xzID0ge307XG5jb25zdCBfY2FjaGVkVG9vbEtleXNCeVNlcnZlciA9IHt9O1xuLyoqXG4gKiBSZW1vdmUgY2FjaGVkIHRvb2xzIGZvciB0aGUgZ2l2ZW4gc2VydmVyIHNvIHRoZSBuZXh0IGxvb2t1cCBmZXRjaGVzIGZyZXNoIGRhdGEuXG4gKlxuICogQHBhcmFtIHNlcnZlck5hbWUgLSBOYW1lIG9mIHRoZSBNQ1Agc2VydmVyIHdob3NlIGNhY2hlIHNob3VsZCBiZSBjbGVhcmVkLlxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gaW52YWxpZGF0ZVNlcnZlclRvb2xzQ2FjaGUoc2VydmVyTmFtZSkge1xuICAgIGNvbnN0IGNhY2hlZEtleXMgPSBfY2FjaGVkVG9vbEtleXNCeVNlcnZlcltzZXJ2ZXJOYW1lXTtcbiAgICBpZiAoY2FjaGVkS2V5cykge1xuICAgICAgICBmb3IgKGNvbnN0IGNhY2hlS2V5IG9mIGNhY2hlZEtleXMpIHtcbiAgICAgICAgICAgIGRlbGV0ZSBfY2FjaGVkVG9vbHNbY2FjaGVLZXldO1xuICAgICAgICB9XG4gICAgICAgIGRlbGV0ZSBfY2FjaGVkVG9vbEtleXNCeVNlcnZlcltzZXJ2ZXJOYW1lXTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBkZWxldGUgX2NhY2hlZFRvb2xzW3NlcnZlck5hbWVdO1xuICAgIGZvciAoY29uc3QgY2FjaGVLZXkgb2YgT2JqZWN0LmtleXMoX2NhY2hlZFRvb2xzKSkge1xuICAgICAgICBpZiAoY2FjaGVLZXkuc3RhcnRzV2l0aChgJHtzZXJ2ZXJOYW1lfTpgKSkge1xuICAgICAgICAgICAgZGVsZXRlIF9jYWNoZWRUb29sc1tjYWNoZUtleV07XG4gICAgICAgIH1cbiAgICB9XG59XG4vKipcbiAqIERlZmF1bHQgY2FjaGUga2V5IGdlbmVyYXRvciBmb3IgTUNQIHRvb2xzLlxuICogVXNlcyBzZXJ2ZXIgbmFtZSwgb3Igc2VydmVyK2FnZW50IGlmIHVzaW5nIGNhbGxhYmxlIGZpbHRlci5cbiAqL1xuZXhwb3J0IGNvbnN0IGRlZmF1bHRNQ1BUb29sQ2FjaGVLZXkgPSAoeyBzZXJ2ZXIsIGFnZW50LCB9KSA9PiB7XG4gICAgaWYgKHNlcnZlci50b29sRmlsdGVyICYmIHR5cGVvZiBzZXJ2ZXIudG9vbEZpbHRlciA9PT0gJ2Z1bmN0aW9uJyAmJiBhZ2VudCkge1xuICAgICAgICByZXR1cm4gYCR7c2VydmVyLm5hbWV9OiR7YWdlbnQubmFtZX1gO1xuICAgIH1cbiAgICByZXR1cm4gc2VydmVyLm5hbWU7XG59O1xuLyoqXG4gKiBGZXRjaGVzIGFsbCBmdW5jdGlvbiB0b29scyBmcm9tIGEgc2luZ2xlIE1DUCBzZXJ2ZXIuXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIGdldEZ1bmN0aW9uVG9vbHNGcm9tU2VydmVyKHsgc2VydmVyLCBjb252ZXJ0U2NoZW1hc1RvU3RyaWN0LCBydW5Db250ZXh0LCBhZ2VudCwgZ2VuZXJhdGVNQ1BUb29sQ2FjaGVLZXksIH0pIHtcbiAgICBjb25zdCBjYWNoZUtleSA9IChnZW5lcmF0ZU1DUFRvb2xDYWNoZUtleSB8fCBkZWZhdWx0TUNQVG9vbENhY2hlS2V5KSh7XG4gICAgICAgIHNlcnZlcixcbiAgICAgICAgYWdlbnQsXG4gICAgICAgIHJ1bkNvbnRleHQsXG4gICAgfSk7XG4gICAgLy8gVXNlIGNhY2hlIGtleSBnZW5lcmF0b3IgaW5qZWN0ZWQgZnJvbSB0aGUgb3V0c2lkZSwgb3IgdGhlIGRlZmF1bHQgaWYgYWJzZW50LlxuICAgIGlmIChzZXJ2ZXIuY2FjaGVUb29sc0xpc3QgJiYgX2NhY2hlZFRvb2xzW2NhY2hlS2V5XSkge1xuICAgICAgICByZXR1cm4gX2NhY2hlZFRvb2xzW2NhY2hlS2V5XS5tYXAoKHQpID0+IG1jcFRvRnVuY3Rpb25Ub29sKHQsIHNlcnZlciwgY29udmVydFNjaGVtYXNUb1N0cmljdCkpO1xuICAgIH1cbiAgICBjb25zdCBsaXN0VG9vbHNGb3JTZXJ2ZXIgPSBhc3luYyAoc3BhbikgPT4ge1xuICAgICAgICBjb25zdCBmZXRjaGVkTWNwVG9vbHMgPSBhd2FpdCBzZXJ2ZXIubGlzdFRvb2xzKCk7XG4gICAgICAgIGxldCBtY3BUb29scyA9IGZldGNoZWRNY3BUb29scztcbiAgICAgICAgaWYgKHJ1bkNvbnRleHQgJiYgYWdlbnQpIHtcbiAgICAgICAgICAgIGNvbnN0IGNvbnRleHQgPSB7IHJ1bkNvbnRleHQsIGFnZW50LCBzZXJ2ZXJOYW1lOiBzZXJ2ZXIubmFtZSB9O1xuICAgICAgICAgICAgY29uc3QgZmlsdGVyZWRUb29scyA9IFtdO1xuICAgICAgICAgICAgZm9yIChjb25zdCB0b29sIG9mIGZldGNoZWRNY3BUb29scykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGZpbHRlciA9IHNlcnZlci50b29sRmlsdGVyO1xuICAgICAgICAgICAgICAgIGlmIChmaWx0ZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBmaWx0ZXIgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGZpbHRlcmVkID0gYXdhaXQgZmlsdGVyKGNvbnRleHQsIHRvb2wpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFmaWx0ZXJlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdsb2JhbExvZ2dlci5kZWJ1ZyhgTUNQIFRvb2wgKHNlcnZlcjogJHtzZXJ2ZXIubmFtZX0sIHRvb2w6ICR7dG9vbC5uYW1lfSkgaXMgYmxvY2tlZCBieSB0aGUgY2FsbGFibGUgZmlsdGVyLmApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYWxsb3dlZFRvb2xOYW1lcyA9IGZpbHRlci5hbGxvd2VkVG9vbE5hbWVzID8/IFtdO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYmxvY2tlZFRvb2xOYW1lcyA9IGZpbHRlci5ibG9ja2VkVG9vbE5hbWVzID8/IFtdO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGFsbG93ZWRUb29sTmFtZXMubGVuZ3RoID4gMCB8fCBibG9ja2VkVG9vbE5hbWVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBhbGxvd2VkID0gYWxsb3dlZFRvb2xOYW1lcy5sZW5ndGggPiAwXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gYWxsb3dlZFRvb2xOYW1lcy5pbmNsdWRlcyh0b29sLm5hbWUpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBibG9ja2VkID0gYmxvY2tlZFRvb2xOYW1lcy5sZW5ndGggPiAwXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gYmxvY2tlZFRvb2xOYW1lcy5pbmNsdWRlcyh0b29sLm5hbWUpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFhbGxvd2VkIHx8IGJsb2NrZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGJsb2NrZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdsb2JhbExvZ2dlci5kZWJ1ZyhgTUNQIFRvb2wgKHNlcnZlcjogJHtzZXJ2ZXIubmFtZX0sIHRvb2w6ICR7dG9vbC5uYW1lfSkgaXMgYmxvY2tlZCBieSB0aGUgc3RhdGljIGZpbHRlci5gKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICghYWxsb3dlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2xvYmFsTG9nZ2VyLmRlYnVnKGBNQ1AgVG9vbCAoc2VydmVyOiAke3NlcnZlci5uYW1lfSwgdG9vbDogJHt0b29sLm5hbWV9KSBpcyBub3QgYWxsb3dlZCBieSB0aGUgc3RhdGljIGZpbHRlci5gKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZmlsdGVyZWRUb29scy5wdXNoKHRvb2wpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbWNwVG9vbHMgPSBmaWx0ZXJlZFRvb2xzO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzcGFuKSB7XG4gICAgICAgICAgICBzcGFuLnNwYW5EYXRhLnJlc3VsdCA9IG1jcFRvb2xzLm1hcCgodCkgPT4gdC5uYW1lKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB0b29scyA9IG1jcFRvb2xzLm1hcCgodCkgPT4gbWNwVG9GdW5jdGlvblRvb2wodCwgc2VydmVyLCBjb252ZXJ0U2NoZW1hc1RvU3RyaWN0KSk7XG4gICAgICAgIC8vIENhY2hlIHN0b3JlXG4gICAgICAgIGlmIChzZXJ2ZXIuY2FjaGVUb29sc0xpc3QpIHtcbiAgICAgICAgICAgIF9jYWNoZWRUb29sc1tjYWNoZUtleV0gPSBtY3BUb29scztcbiAgICAgICAgICAgIGlmICghX2NhY2hlZFRvb2xLZXlzQnlTZXJ2ZXJbc2VydmVyLm5hbWVdKSB7XG4gICAgICAgICAgICAgICAgX2NhY2hlZFRvb2xLZXlzQnlTZXJ2ZXJbc2VydmVyLm5hbWVdID0gbmV3IFNldCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgX2NhY2hlZFRvb2xLZXlzQnlTZXJ2ZXJbc2VydmVyLm5hbWVdLmFkZChjYWNoZUtleSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRvb2xzO1xuICAgIH07XG4gICAgaWYgKCFnZXRDdXJyZW50VHJhY2UoKSkge1xuICAgICAgICByZXR1cm4gbGlzdFRvb2xzRm9yU2VydmVyKCk7XG4gICAgfVxuICAgIHJldHVybiB3aXRoTUNQTGlzdFRvb2xzU3BhbihsaXN0VG9vbHNGb3JTZXJ2ZXIsIHtcbiAgICAgICAgZGF0YTogeyBzZXJ2ZXI6IHNlcnZlci5uYW1lIH0sXG4gICAgfSk7XG59XG4vKipcbiAqIFJldHVybnMgYWxsIE1DUCB0b29scyBmcm9tIHRoZSBwcm92aWRlZCBzZXJ2ZXJzLCB1c2luZyB0aGUgZnVuY3Rpb24gdG9vbCBjb252ZXJzaW9uLlxuICogSWYgcnVuQ29udGV4dCBhbmQgYWdlbnQgYXJlIHByb3ZpZGVkLCBjYWxsYWJsZSB0b29sIGZpbHRlcnMgd2lsbCBiZSBhcHBsaWVkLlxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0QWxsTWNwVG9vbHMobWNwU2VydmVyc09yT3B0cywgcnVuQ29udGV4dCwgYWdlbnQsIGNvbnZlcnRTY2hlbWFzVG9TdHJpY3QgPSBmYWxzZSkge1xuICAgIGNvbnN0IG9wdHMgPSBBcnJheS5pc0FycmF5KG1jcFNlcnZlcnNPck9wdHMpXG4gICAgICAgID8ge1xuICAgICAgICAgICAgbWNwU2VydmVyczogbWNwU2VydmVyc09yT3B0cyxcbiAgICAgICAgICAgIHJ1bkNvbnRleHQsXG4gICAgICAgICAgICBhZ2VudCxcbiAgICAgICAgICAgIGNvbnZlcnRTY2hlbWFzVG9TdHJpY3QsXG4gICAgICAgIH1cbiAgICAgICAgOiBtY3BTZXJ2ZXJzT3JPcHRzO1xuICAgIGNvbnN0IHsgbWNwU2VydmVycywgY29udmVydFNjaGVtYXNUb1N0cmljdDogY29udmVydFNjaGVtYXNUb1N0cmljdEZyb21PcHRzID0gZmFsc2UsIHJ1bkNvbnRleHQ6IHJ1bkNvbnRleHRGcm9tT3B0cywgYWdlbnQ6IGFnZW50RnJvbU9wdHMsIGdlbmVyYXRlTUNQVG9vbENhY2hlS2V5LCB9ID0gb3B0cztcbiAgICBjb25zdCBhbGxUb29scyA9IFtdO1xuICAgIGNvbnN0IHRvb2xOYW1lcyA9IG5ldyBTZXQoKTtcbiAgICBmb3IgKGNvbnN0IHNlcnZlciBvZiBtY3BTZXJ2ZXJzKSB7XG4gICAgICAgIGNvbnN0IHNlcnZlclRvb2xzID0gYXdhaXQgZ2V0RnVuY3Rpb25Ub29sc0Zyb21TZXJ2ZXIoe1xuICAgICAgICAgICAgc2VydmVyLFxuICAgICAgICAgICAgY29udmVydFNjaGVtYXNUb1N0cmljdDogY29udmVydFNjaGVtYXNUb1N0cmljdEZyb21PcHRzLFxuICAgICAgICAgICAgcnVuQ29udGV4dDogcnVuQ29udGV4dEZyb21PcHRzLFxuICAgICAgICAgICAgYWdlbnQ6IGFnZW50RnJvbU9wdHMsXG4gICAgICAgICAgICBnZW5lcmF0ZU1DUFRvb2xDYWNoZUtleSxcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IHNlcnZlclRvb2xOYW1lcyA9IG5ldyBTZXQoc2VydmVyVG9vbHMubWFwKCh0KSA9PiB0Lm5hbWUpKTtcbiAgICAgICAgY29uc3QgaW50ZXJzZWN0aW9uID0gWy4uLnNlcnZlclRvb2xOYW1lc10uZmlsdGVyKChuKSA9PiB0b29sTmFtZXMuaGFzKG4pKTtcbiAgICAgICAgaWYgKGludGVyc2VjdGlvbi5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVXNlckVycm9yKGBEdXBsaWNhdGUgdG9vbCBuYW1lcyBmb3VuZCBhY3Jvc3MgTUNQIHNlcnZlcnM6ICR7aW50ZXJzZWN0aW9uLmpvaW4oJywgJyl9YCk7XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChjb25zdCB0IG9mIHNlcnZlclRvb2xzKSB7XG4gICAgICAgICAgICB0b29sTmFtZXMuYWRkKHQubmFtZSk7XG4gICAgICAgICAgICBhbGxUb29scy5wdXNoKHQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBhbGxUb29scztcbn1cbi8qKlxuICogQ29udmVydHMgYW4gTUNQIHRvb2wgZGVmaW5pdGlvbiB0byBhIGZ1bmN0aW9uIHRvb2wgZm9yIHRoZSBBZ2VudHMgU0RLLlxuICovXG5leHBvcnQgZnVuY3Rpb24gbWNwVG9GdW5jdGlvblRvb2wobWNwVG9vbCwgc2VydmVyLCBjb252ZXJ0U2NoZW1hc1RvU3RyaWN0KSB7XG4gICAgYXN5bmMgZnVuY3Rpb24gaW52b2tlKGlucHV0LCBfY29udGV4dCkge1xuICAgICAgICBsZXQgYXJncyA9IHt9O1xuICAgICAgICBpZiAodHlwZW9mIGlucHV0ID09PSAnc3RyaW5nJyAmJiBpbnB1dCkge1xuICAgICAgICAgICAgYXJncyA9IEpTT04ucGFyc2UoaW5wdXQpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHR5cGVvZiBpbnB1dCA9PT0gJ29iamVjdCcgJiYgaW5wdXQgIT0gbnVsbCkge1xuICAgICAgICAgICAgYXJncyA9IGlucHV0O1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGN1cnJlbnRTcGFuID0gZ2V0Q3VycmVudFNwYW4oKTtcbiAgICAgICAgaWYgKGN1cnJlbnRTcGFuKSB7XG4gICAgICAgICAgICBjdXJyZW50U3Bhbi5zcGFuRGF0YVsnbWNwX2RhdGEnXSA9IHsgc2VydmVyOiBzZXJ2ZXIubmFtZSB9O1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGNvbnRlbnQgPSBhd2FpdCBzZXJ2ZXIuY2FsbFRvb2wobWNwVG9vbC5uYW1lLCBhcmdzKTtcbiAgICAgICAgcmV0dXJuIGNvbnRlbnQubGVuZ3RoID09PSAxID8gY29udGVudFswXSA6IGNvbnRlbnQ7XG4gICAgfVxuICAgIGNvbnN0IHNjaGVtYSA9IHtcbiAgICAgICAgLi4ubWNwVG9vbC5pbnB1dFNjaGVtYSxcbiAgICAgICAgdHlwZTogbWNwVG9vbC5pbnB1dFNjaGVtYT8udHlwZSA/PyAnb2JqZWN0JyxcbiAgICAgICAgcHJvcGVydGllczogbWNwVG9vbC5pbnB1dFNjaGVtYT8ucHJvcGVydGllcyA/PyB7fSxcbiAgICAgICAgcmVxdWlyZWQ6IG1jcFRvb2wuaW5wdXRTY2hlbWE/LnJlcXVpcmVkID8/IFtdLFxuICAgICAgICBhZGRpdGlvbmFsUHJvcGVydGllczogbWNwVG9vbC5pbnB1dFNjaGVtYT8uYWRkaXRpb25hbFByb3BlcnRpZXMgPz8gZmFsc2UsXG4gICAgfTtcbiAgICBpZiAoY29udmVydFNjaGVtYXNUb1N0cmljdCB8fCBzY2hlbWEuYWRkaXRpb25hbFByb3BlcnRpZXMgPT09IHRydWUpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHN0cmljdFNjaGVtYSA9IGVuc3VyZVN0cmljdEpzb25TY2hlbWEoc2NoZW1hKTtcbiAgICAgICAgICAgIHJldHVybiB0b29sKHtcbiAgICAgICAgICAgICAgICBuYW1lOiBtY3BUb29sLm5hbWUsXG4gICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IG1jcFRvb2wuZGVzY3JpcHRpb24gfHwgJycsXG4gICAgICAgICAgICAgICAgcGFyYW1ldGVyczogc3RyaWN0U2NoZW1hLFxuICAgICAgICAgICAgICAgIHN0cmljdDogdHJ1ZSxcbiAgICAgICAgICAgICAgICBleGVjdXRlOiBpbnZva2UsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgZ2xvYmFsTG9nZ2VyLndhcm4oYEVycm9yIGNvbnZlcnRpbmcgTUNQIHNjaGVtYSB0byBzdHJpY3QgbW9kZTogJHtlfWApO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNvbnN0IG5vblN0cmljdFNjaGVtYSA9IHtcbiAgICAgICAgLi4uc2NoZW1hLFxuICAgICAgICBhZGRpdGlvbmFsUHJvcGVydGllczogdHJ1ZSxcbiAgICB9O1xuICAgIHJldHVybiB0b29sKHtcbiAgICAgICAgbmFtZTogbWNwVG9vbC5uYW1lLFxuICAgICAgICBkZXNjcmlwdGlvbjogbWNwVG9vbC5kZXNjcmlwdGlvbiB8fCAnJyxcbiAgICAgICAgcGFyYW1ldGVyczogbm9uU3RyaWN0U2NoZW1hLFxuICAgICAgICBzdHJpY3Q6IGZhbHNlLFxuICAgICAgICBleGVjdXRlOiBpbnZva2UsXG4gICAgfSk7XG59XG4vKipcbiAqIEVuc3VyZXMgdGhlIGdpdmVuIEpTT04gc2NoZW1hIGlzIHN0cmljdCAobm8gYWRkaXRpb25hbCBwcm9wZXJ0aWVzLCByZXF1aXJlZCBmaWVsZHMgc2V0KS5cbiAqL1xuZnVuY3Rpb24gZW5zdXJlU3RyaWN0SnNvblNjaGVtYShzY2hlbWEpIHtcbiAgICBjb25zdCBvdXQgPSB7XG4gICAgICAgIC4uLnNjaGVtYSxcbiAgICAgICAgYWRkaXRpb25hbFByb3BlcnRpZXM6IGZhbHNlLFxuICAgIH07XG4gICAgaWYgKCFvdXQucmVxdWlyZWQpXG4gICAgICAgIG91dC5yZXF1aXJlZCA9IFtdO1xuICAgIHJldHVybiBvdXQ7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1tY3AubWpzLm1hcCIsIi8vLyA8cmVmZXJlbmNlIGxpYj1cImRvbVwiIC8+XG4vLyBVc2UgZnVuY3Rpb24gaW5zdGVhZCBvZiBleHBvcnRpbmcgdGhlIHZhbHVlIHRvIHByZXZlbnRcbi8vIGNpcmN1bGFyIGRlcGVuZGVuY3kgcmVzb2x1dGlvbiBpc3N1ZXMgY2F1c2VkIGJ5IG90aGVyIGV4cG9ydHMgaW4gJ0BvcGVuYWkvYWdlbnRzLWNvcmUvX3NoaW1zJ1xuZXhwb3J0IGZ1bmN0aW9uIGxvYWRFbnYoKSB7XG4gICAgcmV0dXJuIHt9O1xufVxuZXhwb3J0IGNsYXNzIEJyb3dzZXJFdmVudEVtaXR0ZXIge1xuICAgICN0YXJnZXQgPSBuZXcgRXZlbnRUYXJnZXQoKTtcbiAgICAjbGlzdGVuZXJXcmFwcGVycyA9IG5ldyBNYXAoKTtcbiAgICBvbih0eXBlLCBsaXN0ZW5lcikge1xuICAgICAgICBjb25zdCBldmVudFR5cGUgPSB0eXBlO1xuICAgICAgICBsZXQgbGlzdGVuZXJzRm9yVHlwZSA9IHRoaXMuI2xpc3RlbmVyV3JhcHBlcnMuZ2V0KGV2ZW50VHlwZSk7XG4gICAgICAgIGlmICghbGlzdGVuZXJzRm9yVHlwZSkge1xuICAgICAgICAgICAgbGlzdGVuZXJzRm9yVHlwZSA9IG5ldyBNYXAoKTtcbiAgICAgICAgICAgIHRoaXMuI2xpc3RlbmVyV3JhcHBlcnMuc2V0KGV2ZW50VHlwZSwgbGlzdGVuZXJzRm9yVHlwZSk7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IHdyYXBwZXJzID0gbGlzdGVuZXJzRm9yVHlwZS5nZXQobGlzdGVuZXIpO1xuICAgICAgICBpZiAoIXdyYXBwZXJzKSB7XG4gICAgICAgICAgICB3cmFwcGVycyA9IG5ldyBTZXQoKTtcbiAgICAgICAgICAgIGxpc3RlbmVyc0ZvclR5cGUuc2V0KGxpc3RlbmVyLCB3cmFwcGVycyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgd3JhcHBlciA9ICgoZXZlbnQpID0+IGxpc3RlbmVyKC4uLihldmVudC5kZXRhaWwgPz8gW10pKSk7XG4gICAgICAgIHdyYXBwZXJzLmFkZCh3cmFwcGVyKTtcbiAgICAgICAgdGhpcy4jdGFyZ2V0LmFkZEV2ZW50TGlzdGVuZXIoZXZlbnRUeXBlLCB3cmFwcGVyKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIG9mZih0eXBlLCBsaXN0ZW5lcikge1xuICAgICAgICBjb25zdCBldmVudFR5cGUgPSB0eXBlO1xuICAgICAgICBjb25zdCBsaXN0ZW5lcnNGb3JUeXBlID0gdGhpcy4jbGlzdGVuZXJXcmFwcGVycy5nZXQoZXZlbnRUeXBlKTtcbiAgICAgICAgY29uc3Qgd3JhcHBlcnMgPSBsaXN0ZW5lcnNGb3JUeXBlPy5nZXQobGlzdGVuZXIpO1xuICAgICAgICBpZiAod3JhcHBlcnM/LnNpemUpIHtcbiAgICAgICAgICAgIGZvciAoY29uc3Qgd3JhcHBlciBvZiB3cmFwcGVycykge1xuICAgICAgICAgICAgICAgIHRoaXMuI3RhcmdldC5yZW1vdmVFdmVudExpc3RlbmVyKGV2ZW50VHlwZSwgd3JhcHBlcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsaXN0ZW5lcnNGb3JUeXBlPy5kZWxldGUobGlzdGVuZXIpO1xuICAgICAgICAgICAgaWYgKGxpc3RlbmVyc0ZvclR5cGU/LnNpemUgPT09IDApIHtcbiAgICAgICAgICAgICAgICB0aGlzLiNsaXN0ZW5lcldyYXBwZXJzLmRlbGV0ZShldmVudFR5cGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICBlbWl0KHR5cGUsIC4uLmFyZ3MpIHtcbiAgICAgICAgY29uc3QgZXZlbnQgPSBuZXcgQ3VzdG9tRXZlbnQodHlwZSwgeyBkZXRhaWw6IGFyZ3MgfSk7XG4gICAgICAgIHJldHVybiB0aGlzLiN0YXJnZXQuZGlzcGF0Y2hFdmVudChldmVudCk7XG4gICAgfVxuICAgIG9uY2UodHlwZSwgbGlzdGVuZXIpIHtcbiAgICAgICAgY29uc3QgaGFuZGxlciA9ICguLi5hcmdzKSA9PiB7XG4gICAgICAgICAgICB0aGlzLm9mZih0eXBlLCBoYW5kbGVyKTtcbiAgICAgICAgICAgIGxpc3RlbmVyKC4uLmFyZ3MpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLm9uKHR5cGUsIGhhbmRsZXIpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG59XG5leHBvcnQgeyBCcm93c2VyRXZlbnRFbWl0dGVyIGFzIFJ1bnRpbWVFdmVudEVtaXR0ZXIgfTtcbmV4cG9ydCBjb25zdCByYW5kb21VVUlEID0gKCkgPT4ge1xuICAgIGlmICh0eXBlb2YgY3J5cHRvICE9PSAndW5kZWZpbmVkJyAmJiBjcnlwdG8ucmFuZG9tVVVJRCkge1xuICAgICAgICByZXR1cm4gY3J5cHRvLnJhbmRvbVVVSUQoKTtcbiAgICB9XG4gICAgcmV0dXJuICd4eHh4eHh4eC14eHh4LTR4eHgteXh4eC14eHh4eHh4eHh4eHgnLnJlcGxhY2UoL1t4eV0vZywgZnVuY3Rpb24gKGMpIHtcbiAgICAgICAgY29uc3QgciA9IChNYXRoLnJhbmRvbSgpICogMTYpIHwgMDtcbiAgICAgICAgY29uc3QgdiA9IGMgPT09ICd4JyA/IHIgOiAociAmIDB4MykgfCAweDg7XG4gICAgICAgIHJldHVybiB2LnRvU3RyaW5nKDE2KTtcbiAgICB9KTtcbn07XG5leHBvcnQgY29uc3QgUmVhZGFibGUgPSBjbGFzcyBSZWFkYWJsZSB7XG4gICAgY29uc3RydWN0b3IoKSB7IH1cbiAgICBwaXBlVG8oX2Rlc3RpbmF0aW9uLCBfb3B0aW9ucykgeyB9XG4gICAgcGlwZVRocm91Z2goX3RyYW5zZm9ybSwgX29wdGlvbnMpIHsgfVxufTtcbmV4cG9ydCBjb25zdCBSZWFkYWJsZVN0cmVhbSA9IGdsb2JhbFRoaXMuUmVhZGFibGVTdHJlYW07XG5leHBvcnQgY29uc3QgUmVhZGFibGVTdHJlYW1Db250cm9sbGVyID0gZ2xvYmFsVGhpcy5SZWFkYWJsZVN0cmVhbURlZmF1bHRDb250cm9sbGVyO1xuZXhwb3J0IGNvbnN0IFRyYW5zZm9ybVN0cmVhbSA9IGdsb2JhbFRoaXMuVHJhbnNmb3JtU3RyZWFtO1xuZXhwb3J0IGNsYXNzIEFzeW5jTG9jYWxTdG9yYWdlIHtcbiAgICBjb250ZXh0ID0gbnVsbDtcbiAgICBjb25zdHJ1Y3RvcigpIHsgfVxuICAgIHJ1bihjb250ZXh0LCBmbikge1xuICAgICAgICB0aGlzLmNvbnRleHQgPSBjb250ZXh0O1xuICAgICAgICByZXR1cm4gZm4oKTtcbiAgICB9XG4gICAgZ2V0U3RvcmUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbnRleHQ7XG4gICAgfVxuICAgIGVudGVyV2l0aChjb250ZXh0KSB7XG4gICAgICAgIHRoaXMuY29udGV4dCA9IGNvbnRleHQ7XG4gICAgfVxufVxuZXhwb3J0IGZ1bmN0aW9uIGlzQnJvd3NlckVudmlyb25tZW50KCkge1xuICAgIHJldHVybiB0cnVlO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGlzVHJhY2luZ0xvb3BSdW5uaW5nQnlEZWZhdWx0KCkge1xuICAgIHJldHVybiBmYWxzZTtcbn1cbmV4cG9ydCB7IE1DUFNlcnZlclN0ZGlvLCBNQ1BTZXJ2ZXJTdHJlYW1hYmxlSHR0cCwgTUNQU2VydmVyU1NFLCB9IGZyb20gXCIuL21jcC1zZXJ2ZXIvYnJvd3Nlci5tanNcIjtcbmNsYXNzIEJyb3dzZXJUaW1lciB7XG4gICAgY29uc3RydWN0b3IoKSB7IH1cbiAgICBzZXRUaW1lb3V0KGNhbGxiYWNrLCBtcykge1xuICAgICAgICBjb25zdCB0aW1lb3V0ID0gc2V0VGltZW91dChjYWxsYmFjaywgbXMpO1xuICAgICAgICB0aW1lb3V0LnJlZiA9XG4gICAgICAgICAgICB0eXBlb2YgdGltZW91dC5yZWYgPT09ICdmdW5jdGlvbicgPyB0aW1lb3V0LnJlZiA6ICgpID0+IHRpbWVvdXQ7XG4gICAgICAgIHRpbWVvdXQudW5yZWYgPVxuICAgICAgICAgICAgdHlwZW9mIHRpbWVvdXQudW5yZWYgPT09ICdmdW5jdGlvbicgPyB0aW1lb3V0LnVucmVmIDogKCkgPT4gdGltZW91dDtcbiAgICAgICAgdGltZW91dC5oYXNSZWYgPVxuICAgICAgICAgICAgdHlwZW9mIHRpbWVvdXQuaGFzUmVmID09PSAnZnVuY3Rpb24nID8gdGltZW91dC5oYXNSZWYgOiAoKSA9PiB0cnVlO1xuICAgICAgICB0aW1lb3V0LnJlZnJlc2ggPVxuICAgICAgICAgICAgdHlwZW9mIHRpbWVvdXQucmVmcmVzaCA9PT0gJ2Z1bmN0aW9uJyA/IHRpbWVvdXQucmVmcmVzaCA6ICgpID0+IHRpbWVvdXQ7XG4gICAgICAgIHJldHVybiB0aW1lb3V0O1xuICAgIH1cbiAgICBjbGVhclRpbWVvdXQodGltZW91dElkKSB7XG4gICAgICAgIHdpbmRvdy5jbGVhclRpbWVvdXQodGltZW91dElkKTtcbiAgICB9XG59XG5jb25zdCB0aW1lciA9IG5ldyBCcm93c2VyVGltZXIoKTtcbmV4cG9ydCB7IHRpbWVyIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1zaGltcy1icm93c2VyLm1qcy5tYXAiLCJpbXBvcnQgeyBSdW50aW1lRXZlbnRFbWl0dGVyLCB9IGZyb20gJ0BvcGVuYWkvYWdlbnRzLWNvcmUvX3NoaW1zJztcbmV4cG9ydCBjbGFzcyBFdmVudEVtaXR0ZXJEZWxlZ2F0ZSB7XG4gICAgb24odHlwZSwgbGlzdGVuZXIpIHtcbiAgICAgICAgdGhpcy5ldmVudEVtaXR0ZXIub24odHlwZSwgbGlzdGVuZXIpO1xuICAgICAgICByZXR1cm4gdGhpcy5ldmVudEVtaXR0ZXI7XG4gICAgfVxuICAgIG9mZih0eXBlLCBsaXN0ZW5lcikge1xuICAgICAgICB0aGlzLmV2ZW50RW1pdHRlci5vZmYodHlwZSwgbGlzdGVuZXIpO1xuICAgICAgICByZXR1cm4gdGhpcy5ldmVudEVtaXR0ZXI7XG4gICAgfVxuICAgIGVtaXQodHlwZSwgLi4uYXJncykge1xuICAgICAgICByZXR1cm4gdGhpcy5ldmVudEVtaXR0ZXIuZW1pdCh0eXBlLCAuLi5hcmdzKTtcbiAgICB9XG4gICAgb25jZSh0eXBlLCBsaXN0ZW5lcikge1xuICAgICAgICB0aGlzLmV2ZW50RW1pdHRlci5vbmNlKHR5cGUsIGxpc3RlbmVyKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZXZlbnRFbWl0dGVyO1xuICAgIH1cbn1cbi8qKlxuICogRXZlbnQgZW1pdHRlciB0aGF0IGV2ZXJ5IEFnZW50IGluc3RhbmNlIGluaGVyaXRzIGZyb20gYW5kIHRoYXQgZW1pdHMgZXZlbnRzIGZvciB0aGUgbGlmZWN5Y2xlXG4gKiBvZiB0aGUgYWdlbnQuXG4gKi9cbmV4cG9ydCBjbGFzcyBBZ2VudEhvb2tzIGV4dGVuZHMgRXZlbnRFbWl0dGVyRGVsZWdhdGUge1xuICAgIGV2ZW50RW1pdHRlciA9IG5ldyBSdW50aW1lRXZlbnRFbWl0dGVyKCk7XG59XG4vKipcbiAqIEV2ZW50IGVtaXR0ZXIgdGhhdCBldmVyeSBSdW5uZXIgaW5zdGFuY2UgaW5oZXJpdHMgZnJvbSBhbmQgdGhhdCBlbWl0cyBldmVudHMgZm9yIHRoZSBsaWZlY3ljbGVcbiAqIG9mIHRoZSBvdmVyYWxsIHJ1bi5cbiAqL1xuZXhwb3J0IGNsYXNzIFJ1bkhvb2tzIGV4dGVuZHMgRXZlbnRFbWl0dGVyRGVsZWdhdGUge1xuICAgIGV2ZW50RW1pdHRlciA9IG5ldyBSdW50aW1lRXZlbnRFbWl0dGVyKCk7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1saWZlY3ljbGUubWpzLm1hcCIsImltcG9ydCB7IGxvYWRFbnYgfSBmcm9tIFwiLi9jb25maWcubWpzXCI7XG5leHBvcnQgY29uc3QgT1BFTkFJX0RFRkFVTFRfTU9ERUxfRU5WX1ZBUklBQkxFX05BTUUgPSAnT1BFTkFJX0RFRkFVTFRfTU9ERUwnO1xuLyoqXG4gKiBSZXR1cm5zIFRydWUgaWYgdGhlIG1vZGVsIG5hbWUgaXMgYSBHUFQtNSBtb2RlbCBhbmQgcmVhc29uaW5nIHNldHRpbmdzIGFyZSByZXF1aXJlZC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdwdDVSZWFzb25pbmdTZXR0aW5nc1JlcXVpcmVkKG1vZGVsTmFtZSkge1xuICAgIGlmIChtb2RlbE5hbWUuc3RhcnRzV2l0aCgnZ3B0LTUtY2hhdCcpKSB7XG4gICAgICAgIC8vIGdwdC01LWNoYXQtbGF0ZXN0IGRvZXMgbm90IHJlcXVpcmUgcmVhc29uaW5nIHNldHRpbmdzXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgLy8gbWF0Y2hlcyBhbnkgb2YgZ3B0LTUgbW9kZWxzXG4gICAgcmV0dXJuIG1vZGVsTmFtZS5zdGFydHNXaXRoKCdncHQtNScpO1xufVxuLyoqXG4gKiBSZXR1cm5zIFRydWUgaWYgdGhlIGRlZmF1bHQgbW9kZWwgaXMgYSBHUFQtNSBtb2RlbC5cbiAqIFRoaXMgaXMgdXNlZCB0byBkZXRlcm1pbmUgaWYgdGhlIGRlZmF1bHQgbW9kZWwgc2V0dGluZ3MgYXJlIGNvbXBhdGlibGUgd2l0aCBHUFQtNSBtb2RlbHMuXG4gKiBJZiB0aGUgZGVmYXVsdCBtb2RlbCBpcyBub3QgYSBHUFQtNSBtb2RlbCwgdGhlIG1vZGVsIHNldHRpbmdzIGFyZSBjb21wYXRpYmxlIHdpdGggb3RoZXIgbW9kZWxzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNHcHQ1RGVmYXVsdCgpIHtcbiAgICByZXR1cm4gZ3B0NVJlYXNvbmluZ1NldHRpbmdzUmVxdWlyZWQoZ2V0RGVmYXVsdE1vZGVsKCkpO1xufVxuLyoqXG4gKiBSZXR1cm5zIHRoZSBkZWZhdWx0IG1vZGVsIG5hbWUuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXREZWZhdWx0TW9kZWwoKSB7XG4gICAgY29uc3QgZW52ID0gbG9hZEVudigpO1xuICAgIHJldHVybiAoZW52W09QRU5BSV9ERUZBVUxUX01PREVMX0VOVl9WQVJJQUJMRV9OQU1FXT8udG9Mb3dlckNhc2UoKSA/PyAnZ3B0LTQuMScpO1xufVxuLyoqXG4gKiBSZXR1cm5zIHRoZSBkZWZhdWx0IG1vZGVsIHNldHRpbmdzLlxuICogSWYgdGhlIGRlZmF1bHQgbW9kZWwgaXMgYSBHUFQtNSBtb2RlbCwgcmV0dXJucyB0aGUgR1BULTUgZGVmYXVsdCBtb2RlbCBzZXR0aW5ncy5cbiAqIE90aGVyd2lzZSwgcmV0dXJucyB0aGUgbGVnYWN5IGRlZmF1bHQgbW9kZWwgc2V0dGluZ3MuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXREZWZhdWx0TW9kZWxTZXR0aW5ncyhtb2RlbCkge1xuICAgIGNvbnN0IF9tb2RlbCA9IG1vZGVsID8/IGdldERlZmF1bHRNb2RlbCgpO1xuICAgIGlmIChncHQ1UmVhc29uaW5nU2V0dGluZ3NSZXF1aXJlZChfbW9kZWwpKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAvLyBXZSBjaG9zZSBcImxvd1wiIGluc3RlYWQgb2YgXCJtaW5pbWFsXCIgYmVjYXVzZSBzb21lIG9mIHRoZSBidWlsdC1pbiB0b29sc1xuICAgICAgICAgICAgLy8gKGUuZy4sIGZpbGUgc2VhcmNoLCBpbWFnZSBnZW5lcmF0aW9uLCBldGMuKSBkbyBub3Qgc3VwcG9ydCBcIm1pbmltYWxcIlxuICAgICAgICAgICAgLy8gSWYgeW91IHdhbnQgdG8gdXNlIFwibWluaW1hbFwiIHJlYXNvbmluZyBlZmZvcnQsIHlvdSBjYW4gcGFzcyB5b3VyIG93biBtb2RlbCBzZXR0aW5nc1xuICAgICAgICAgICAgcmVhc29uaW5nOiB7IGVmZm9ydDogJ2xvdycgfSxcbiAgICAgICAgICAgIHRleHQ6IHsgdmVyYm9zaXR5OiAnbG93JyB9LFxuICAgICAgICB9O1xuICAgIH1cbiAgICByZXR1cm4ge307XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1kZWZhdWx0TW9kZWwubWpzLm1hcCIsImltcG9ydCB7IE1vZGVsQmVoYXZpb3JFcnJvciwgVXNlckVycm9yIH0gZnJvbSBcIi4vZXJyb3JzLm1qc1wiO1xuaW1wb3J0IHsgdG9GdW5jdGlvblRvb2xOYW1lIH0gZnJvbSBcIi4vdXRpbHMvdG9vbHMubWpzXCI7XG5pbXBvcnQgeyBnZXRTY2hlbWFBbmRQYXJzZXJGcm9tSW5wdXRUeXBlIH0gZnJvbSBcIi4vdXRpbHMvdG9vbHMubWpzXCI7XG5pbXBvcnQgeyBhZGRFcnJvclRvQ3VycmVudFNwYW4gfSBmcm9tIFwiLi90cmFjaW5nL2NvbnRleHQubWpzXCI7XG5pbXBvcnQgbG9nZ2VyIGZyb20gXCIuL2xvZ2dlci5tanNcIjtcbi8qKlxuICogR2VuZXJhdGVzIHRoZSBtZXNzYWdlIHRoYXQgd2lsbCBiZSBnaXZlbiBhcyB0b29sIG91dHB1dCB0byB0aGUgbW9kZWwgdGhhdCByZXF1ZXN0ZWQgdGhlIGhhbmRvZmYuXG4gKlxuICogQHBhcmFtIGFnZW50IFRoZSBhZ2VudCB0byB0cmFuc2ZlciB0b1xuICogQHJldHVybnMgVGhlIG1lc3NhZ2UgdGhhdCB3aWxsIGJlIGdpdmVuIGFzIHRvb2wgb3V0cHV0IHRvIHRoZSBtb2RlbCB0aGF0IHJlcXVlc3RlZCB0aGUgaGFuZG9mZlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0VHJhbnNmZXJNZXNzYWdlKGFnZW50KSB7XG4gICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHsgYXNzaXN0YW50OiBhZ2VudC5uYW1lIH0pO1xufVxuLyoqXG4gKiBUaGUgZGVmYXVsdCBuYW1lIG9mIHRoZSB0b29sIHRoYXQgcmVwcmVzZW50cyB0aGUgaGFuZG9mZi5cbiAqXG4gKiBAcGFyYW0gYWdlbnQgVGhlIGFnZW50IHRvIHRyYW5zZmVyIHRvXG4gKiBAcmV0dXJucyBUaGUgbmFtZSBvZiB0aGUgdG9vbCB0aGF0IHJlcHJlc2VudHMgdGhlIGhhbmRvZmZcbiAqL1xuZnVuY3Rpb24gZGVmYXVsdEhhbmRvZmZUb29sTmFtZShhZ2VudCkge1xuICAgIHJldHVybiBgdHJhbnNmZXJfdG9fJHt0b0Z1bmN0aW9uVG9vbE5hbWUoYWdlbnQubmFtZSl9YDtcbn1cbi8qKlxuICogR2VuZXJhdGVzIHRoZSBkZXNjcmlwdGlvbiBvZiB0aGUgdG9vbCB0aGF0IHJlcHJlc2VudHMgdGhlIGhhbmRvZmYuXG4gKlxuICogQHBhcmFtIGFnZW50IFRoZSBhZ2VudCB0byB0cmFuc2ZlciB0b1xuICogQHJldHVybnMgVGhlIGRlc2NyaXB0aW9uIG9mIHRoZSB0b29sIHRoYXQgcmVwcmVzZW50cyB0aGUgaGFuZG9mZlxuICovXG5mdW5jdGlvbiBkZWZhdWx0SGFuZG9mZlRvb2xEZXNjcmlwdGlvbihhZ2VudCkge1xuICAgIHJldHVybiBgSGFuZG9mZiB0byB0aGUgJHthZ2VudC5uYW1lfSBhZ2VudCB0byBoYW5kbGUgdGhlIHJlcXVlc3QuICR7YWdlbnQuaGFuZG9mZkRlc2NyaXB0aW9uID8/ICcnfWA7XG59XG5leHBvcnQgY2xhc3MgSGFuZG9mZiB7XG4gICAgLyoqXG4gICAgICogVGhlIG5hbWUgb2YgdGhlIHRvb2wgdGhhdCByZXByZXNlbnRzIHRoZSBoYW5kb2ZmLlxuICAgICAqL1xuICAgIHRvb2xOYW1lO1xuICAgIC8qKlxuICAgICAqIFRoZSBkZXNjcmlwdGlvbiBvZiB0aGUgdG9vbCB0aGF0IHJlcHJlc2VudHMgdGhlIGhhbmRvZmYuXG4gICAgICovXG4gICAgdG9vbERlc2NyaXB0aW9uO1xuICAgIC8qKlxuICAgICAqIFRoZSBKU09OIHNjaGVtYSBmb3IgdGhlIGhhbmRvZmYgaW5wdXQuIENhbiBiZSBlbXB0eSBpZiB0aGUgaGFuZG9mZiBkb2VzIG5vdCB0YWtlIGFuIGlucHV0XG4gICAgICovXG4gICAgaW5wdXRKc29uU2NoZW1hID0ge1xuICAgICAgICB0eXBlOiAnb2JqZWN0JyxcbiAgICAgICAgcHJvcGVydGllczoge30sXG4gICAgICAgIHJlcXVpcmVkOiBbXSxcbiAgICAgICAgYWRkaXRpb25hbFByb3BlcnRpZXM6IGZhbHNlLFxuICAgIH07XG4gICAgLyoqXG4gICAgICogV2hldGhlciB0aGUgaW5wdXQgSlNPTiBzY2hlbWEgaXMgaW4gc3RyaWN0IG1vZGUuIFdlICoqc3Ryb25nbHkqKiByZWNvbW1lbmQgc2V0dGluZyB0aGlzIHRvXG4gICAgICogdHJ1ZSwgYXMgaXQgaW5jcmVhc2VzIHRoZSBsaWtlbGlob29kIG9mIGNvcnJlY3QgSlNPTiBpbnB1dC5cbiAgICAgKi9cbiAgICBzdHJpY3RKc29uU2NoZW1hID0gdHJ1ZTtcbiAgICAvKipcbiAgICAgKiBUaGUgZnVuY3Rpb24gdGhhdCBpbnZva2VzIHRoZSBoYW5kb2ZmLiBUaGUgcGFyYW1ldGVycyBwYXNzZWQgYXJlOlxuICAgICAqIDEuIFRoZSBoYW5kb2ZmIHJ1biBjb250ZXh0XG4gICAgICogMi4gVGhlIGFyZ3VtZW50cyBmcm9tIHRoZSBMTE0sIGFzIGEgSlNPTiBzdHJpbmcuIEVtcHR5IHN0cmluZyBpZiBpbnB1dEpzb25TY2hlbWEgaXMgZW1wdHkuXG4gICAgICpcbiAgICAgKiBNdXN0IHJldHVybiBhbiBhZ2VudFxuICAgICAqL1xuICAgIG9uSW52b2tlSGFuZG9mZjtcbiAgICAvKipcbiAgICAgKiBUaGUgbmFtZSBvZiB0aGUgYWdlbnQgdGhhdCBpcyBiZWluZyBoYW5kZWQgb2ZmIHRvLlxuICAgICAqL1xuICAgIGFnZW50TmFtZTtcbiAgICAvKipcbiAgICAgKiBBIGZ1bmN0aW9uIHRoYXQgZmlsdGVycyB0aGUgaW5wdXRzIHRoYXQgYXJlIHBhc3NlZCB0byB0aGUgbmV4dCBhZ2VudC4gQnkgZGVmYXVsdCwgdGhlIG5ldyBhZ2VudFxuICAgICAqIHNlZXMgdGhlIGVudGlyZSBjb252ZXJzYXRpb24gaGlzdG9yeS4gSW4gc29tZSBjYXNlcywgeW91IG1heSB3YW50IHRvIGZpbHRlciBpbnB1dHMgZS5nLiB0b1xuICAgICAqIHJlbW92ZSBvbGRlciBpbnB1dHMsIG9yIHJlbW92ZSB0b29scyBmcm9tIGV4aXN0aW5nIGlucHV0cy5cbiAgICAgKlxuICAgICAqIFRoZSBmdW5jdGlvbiB3aWxsIHJlY2VpdmUgdGhlIGVudGlyZSBjb252ZXJzYXRpb24gaGlzc3Rvcnkgc28gZmFyLCBpbmNsdWRpbmcgdGhlIGlucHV0IGl0ZW1cbiAgICAgKiB0aGF0IHRyaWdnZXJlZCB0aGUgaGFuZG9mZiBhbmQgYSB0b29sIGNhbGwgb3V0cHV0IGl0ZW0gcmVwcmVzZW50aW5nIHRoZSBoYW5kb2ZmIHRvb2wncyBvdXRwdXQuXG4gICAgICpcbiAgICAgKiBZb3UgYXJlIGZyZWUgdG8gbW9kaWZ5IHRoZSBpbnB1dCBoaXN0b3J5IG9yIG5ldyBpdGVtcyBhcyB5b3Ugc2VlIGZpdC4gVGhlIG5leHQgYWdlbnQgdGhhdCBydW5zXG4gICAgICogd2lsbCByZWNlaXZlIGBoYW5kb2ZmSW5wdXREYXRhLmFsbEl0ZW1zXG4gICAgICovXG4gICAgaW5wdXRGaWx0ZXI7XG4gICAgLyoqXG4gICAgICogVGhlIGFnZW50IHRoYXQgaXMgYmVpbmcgaGFuZGVkIG9mZiB0by5cbiAgICAgKi9cbiAgICBhZ2VudDtcbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgZnVuY3Rpb24gdG9vbCBkZWZpbml0aW9uIHRoYXQgY2FuIGJlIHVzZWQgdG8gaW52b2tlIHRoZSBoYW5kb2ZmLlxuICAgICAqL1xuICAgIGdldEhhbmRvZmZBc0Z1bmN0aW9uVG9vbCgpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHR5cGU6ICdmdW5jdGlvbicsXG4gICAgICAgICAgICBuYW1lOiB0aGlzLnRvb2xOYW1lLFxuICAgICAgICAgICAgZGVzY3JpcHRpb246IHRoaXMudG9vbERlc2NyaXB0aW9uLFxuICAgICAgICAgICAgcGFyYW1ldGVyczogdGhpcy5pbnB1dEpzb25TY2hlbWEsXG4gICAgICAgICAgICBzdHJpY3Q6IHRoaXMuc3RyaWN0SnNvblNjaGVtYSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgaXNFbmFibGVkID0gYXN5bmMgKCkgPT4gdHJ1ZTtcbiAgICBjb25zdHJ1Y3RvcihhZ2VudCwgb25JbnZva2VIYW5kb2ZmKSB7XG4gICAgICAgIHRoaXMuYWdlbnROYW1lID0gYWdlbnQubmFtZTtcbiAgICAgICAgdGhpcy5vbkludm9rZUhhbmRvZmYgPSBvbkludm9rZUhhbmRvZmY7XG4gICAgICAgIHRoaXMudG9vbE5hbWUgPSBkZWZhdWx0SGFuZG9mZlRvb2xOYW1lKGFnZW50KTtcbiAgICAgICAgdGhpcy50b29sRGVzY3JpcHRpb24gPSBkZWZhdWx0SGFuZG9mZlRvb2xEZXNjcmlwdGlvbihhZ2VudCk7XG4gICAgICAgIHRoaXMuYWdlbnQgPSBhZ2VudDtcbiAgICB9XG59XG4vKipcbiAqIENyZWF0ZXMgYSBoYW5kb2ZmIGZyb20gYW4gYWdlbnQuIEhhbmRvZmZzIGFyZSBhdXRvbWF0aWNhbGx5IGNyZWF0ZWQgd2hlbiB5b3UgcGFzcyBhbiBhZ2VudFxuICogaW50byB0aGUgYGhhbmRvZmZzYCBvcHRpb24gb2YgdGhlIGBBZ2VudGAgY29uc3RydWN0b3IuIEFsdGVybmF0aXZlbHksIHlvdSBjYW4gdXNlIHRoaXMgZnVuY3Rpb25cbiAqIHRvIGNyZWF0ZSBhIGhhbmRvZmYgbWFudWFsbHksIGdpdmluZyB5b3UgbW9yZSBjb250cm9sIG92ZXIgY29uZmlndXJhdGlvbi5cbiAqXG4gKiBAdGVtcGxhdGUgVENvbnRleHQgVGhlIGNvbnRleHQgb2YgdGhlIGhhbmRvZmZcbiAqIEB0ZW1wbGF0ZSBUT3V0cHV0IFRoZSBvdXRwdXQgdHlwZSBvZiB0aGUgaGFuZG9mZlxuICogQHRlbXBsYXRlIFRJbnB1dFR5cGUgVGhlIGlucHV0IHR5cGUgb2YgdGhlIGhhbmRvZmZcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGhhbmRvZmYoYWdlbnQsIGNvbmZpZyA9IHt9KSB7XG4gICAgbGV0IHBhcnNlciA9IHVuZGVmaW5lZDtcbiAgICBjb25zdCBoYXNPbkhhbmRvZmYgPSAhIWNvbmZpZy5vbkhhbmRvZmY7XG4gICAgY29uc3QgaGFzSW5wdXRUeXBlID0gISFjb25maWcuaW5wdXRUeXBlO1xuICAgIGNvbnN0IGhhc0JvdGhPck5laXRoZXJIYW5kb2ZmQW5kSW5wdXRUeXBlID0gaGFzT25IYW5kb2ZmID09PSBoYXNJbnB1dFR5cGU7XG4gICAgaWYgKCFoYXNCb3RoT3JOZWl0aGVySGFuZG9mZkFuZElucHV0VHlwZSkge1xuICAgICAgICB0aHJvdyBuZXcgVXNlckVycm9yKCdZb3UgbXVzdCBwcm92aWRlIGVpdGhlciBib3RoIGBvbkhhbmRvZmZgIGFuZCBgaW5wdXRUeXBlYCBvciBuZWl0aGVyLicpO1xuICAgIH1cbiAgICBhc3luYyBmdW5jdGlvbiBvbkludm9rZUhhbmRvZmYoY29udGV4dCwgaW5wdXRKc29uU3RyaW5nKSB7XG4gICAgICAgIGlmIChwYXJzZXIpIHtcbiAgICAgICAgICAgIGlmICghaW5wdXRKc29uU3RyaW5nKSB7XG4gICAgICAgICAgICAgICAgYWRkRXJyb3JUb0N1cnJlbnRTcGFuKHtcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogYEhhbmRvZmYgZnVuY3Rpb24gZXhwZWN0ZWQgbm9uIGVtcHR5IGlucHV0IGJ1dCBnb3Q6ICR7aW5wdXRKc29uU3RyaW5nfWAsXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRldGFpbHM6IGBpbnB1dCBpcyBlbXB0eWAsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IE1vZGVsQmVoYXZpb3JFcnJvcignSGFuZG9mZiBmdW5jdGlvbiBleHBlY3RlZCBub24gZW1wdHkgaW5wdXQnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgLy8gdmVyaWZ5IHRoYXQgaXQncyB2YWxpZCBpbnB1dCBidXQgd2UgZG9uJ3QgY2FyZSBhYm91dCB0aGUgcmVzdWx0XG4gICAgICAgICAgICAgICAgY29uc3QgcGFyc2VkID0gYXdhaXQgcGFyc2VyKGlucHV0SnNvblN0cmluZyk7XG4gICAgICAgICAgICAgICAgaWYgKGNvbmZpZy5vbkhhbmRvZmYpIHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgY29uZmlnLm9uSGFuZG9mZihjb250ZXh0LCBwYXJzZWQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgIGFkZEVycm9yVG9DdXJyZW50U3Bhbih7XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGBJbnZhbGlkIEpTT04gcHJvdmlkZWRgLFxuICAgICAgICAgICAgICAgICAgICBkYXRhOiB7fSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBpZiAoIWxvZ2dlci5kb250TG9nVG9vbERhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgbG9nZ2VyLmVycm9yKGBJbnZhbGlkIEpTT04gd2hlbiBwYXJzaW5nOiAke2lucHV0SnNvblN0cmluZ30uIEVycm9yOiAke2Vycm9yfWApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTW9kZWxCZWhhdmlvckVycm9yKCdJbnZhbGlkIEpTT04gcHJvdmlkZWQnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGF3YWl0IGNvbmZpZy5vbkhhbmRvZmY/Lihjb250ZXh0KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYWdlbnQ7XG4gICAgfVxuICAgIGNvbnN0IGhhbmRvZmYgPSBuZXcgSGFuZG9mZihhZ2VudCwgb25JbnZva2VIYW5kb2ZmKTtcbiAgICBpZiAodHlwZW9mIGNvbmZpZy5pc0VuYWJsZWQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgY29uc3QgcHJlZGljYXRlID0gY29uZmlnLmlzRW5hYmxlZDtcbiAgICAgICAgaGFuZG9mZi5pc0VuYWJsZWQgPSBhc3luYyAoeyBydW5Db250ZXh0LCBhZ2VudCB9KSA9PiB7XG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBwcmVkaWNhdGUoeyBydW5Db250ZXh0LCBhZ2VudCB9KTtcbiAgICAgICAgICAgIHJldHVybiBCb29sZWFuKHJlc3VsdCk7XG4gICAgICAgIH07XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGVvZiBjb25maWcuaXNFbmFibGVkID09PSAnYm9vbGVhbicpIHtcbiAgICAgICAgaGFuZG9mZi5pc0VuYWJsZWQgPSBhc3luYyAoKSA9PiBjb25maWcuaXNFbmFibGVkO1xuICAgIH1cbiAgICBpZiAoY29uZmlnLmlucHV0VHlwZSkge1xuICAgICAgICBjb25zdCByZXN1bHQgPSBnZXRTY2hlbWFBbmRQYXJzZXJGcm9tSW5wdXRUeXBlKGNvbmZpZy5pbnB1dFR5cGUsIGhhbmRvZmYudG9vbE5hbWUpO1xuICAgICAgICBoYW5kb2ZmLmlucHV0SnNvblNjaGVtYSA9IHJlc3VsdC5zY2hlbWE7XG4gICAgICAgIGhhbmRvZmYuc3RyaWN0SnNvblNjaGVtYSA9IHRydWU7XG4gICAgICAgIHBhcnNlciA9IHJlc3VsdC5wYXJzZXI7XG4gICAgfVxuICAgIGlmIChjb25maWcudG9vbE5hbWVPdmVycmlkZSkge1xuICAgICAgICBoYW5kb2ZmLnRvb2xOYW1lID0gY29uZmlnLnRvb2xOYW1lT3ZlcnJpZGU7XG4gICAgfVxuICAgIGlmIChjb25maWcudG9vbERlc2NyaXB0aW9uT3ZlcnJpZGUpIHtcbiAgICAgICAgaGFuZG9mZi50b29sRGVzY3JpcHRpb24gPSBjb25maWcudG9vbERlc2NyaXB0aW9uT3ZlcnJpZGU7XG4gICAgfVxuICAgIGlmIChjb25maWcuaW5wdXRGaWx0ZXIpIHtcbiAgICAgICAgaGFuZG9mZi5pbnB1dEZpbHRlciA9IGNvbmZpZy5pbnB1dEZpbHRlcjtcbiAgICB9XG4gICAgcmV0dXJuIGhhbmRvZmY7XG59XG4vKipcbiAqIFJldHVybnMgYSBoYW5kb2ZmIGZvciB0aGUgZ2l2ZW4gYWdlbnQuIElmIHRoZSBhZ2VudCBpcyBhbHJlYWR5IHdyYXBwZWQgaW50byBhIGhhbmRvZmYsXG4gKiBpdCB3aWxsIGJlIHJldHVybmVkIGFzIGlzLiBPdGhlcndpc2UsIGEgbmV3IGhhbmRvZmYgaW5zdGFuY2Ugd2lsbCBiZSBjcmVhdGVkLlxuICpcbiAqIEB0ZW1wbGF0ZSBUQ29udGV4dCBUaGUgY29udGV4dCBvZiB0aGUgaGFuZG9mZlxuICogQHRlbXBsYXRlIFRPdXRwdXQgVGhlIG91dHB1dCB0eXBlIG9mIHRoZSBoYW5kb2ZmXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRIYW5kb2ZmKGFnZW50KSB7XG4gICAgaWYgKGFnZW50IGluc3RhbmNlb2YgSGFuZG9mZikge1xuICAgICAgICByZXR1cm4gYWdlbnQ7XG4gICAgfVxuICAgIHJldHVybiBoYW5kb2ZmKGFnZW50KTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWhhbmRvZmYubWpzLm1hcCIsIi8qKlxuICogR2V0IHRoZSBsYXN0IHRleHQgZnJvbSB0aGUgb3V0cHV0IG1lc3NhZ2UuXG4gKiBAcGFyYW0gb3V0cHV0TWVzc2FnZVxuICogQHJldHVybnNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldExhc3RUZXh0RnJvbU91dHB1dE1lc3NhZ2Uob3V0cHV0TWVzc2FnZSkge1xuICAgIGlmIChvdXRwdXRNZXNzYWdlLnR5cGUgIT09ICdtZXNzYWdlJykge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgICBpZiAob3V0cHV0TWVzc2FnZS5yb2xlICE9PSAnYXNzaXN0YW50Jykge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgICBjb25zdCBsYXN0SXRlbSA9IG91dHB1dE1lc3NhZ2UuY29udGVudFtvdXRwdXRNZXNzYWdlLmNvbnRlbnQubGVuZ3RoIC0gMV07XG4gICAgaWYgKGxhc3RJdGVtLnR5cGUgIT09ICdvdXRwdXRfdGV4dCcpIHtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG4gICAgcmV0dXJuIGxhc3RJdGVtLnRleHQ7XG59XG4vKipcbiAqIEdldCB0aGUgbGFzdCB0ZXh0IGZyb20gdGhlIG91dHB1dCBtZXNzYWdlLlxuICogQHBhcmFtIG91dHB1dFxuICogQHJldHVybnNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldE91dHB1dFRleHQob3V0cHV0KSB7XG4gICAgaWYgKG91dHB1dC5vdXRwdXQubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHJldHVybiAnJztcbiAgICB9XG4gICAgcmV0dXJuIChnZXRMYXN0VGV4dEZyb21PdXRwdXRNZXNzYWdlKG91dHB1dC5vdXRwdXRbb3V0cHV0Lm91dHB1dC5sZW5ndGggLSAxXSkgfHwgJycpO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bWVzc2FnZXMubWpzLm1hcCIsImltcG9ydCB7IHogfSBmcm9tICd6b2QnO1xuaW1wb3J0IHsgQWdlbnRIb29rcyB9IGZyb20gXCIuL2xpZmVjeWNsZS5tanNcIjtcbmltcG9ydCB7IGdldEFsbE1jcFRvb2xzIH0gZnJvbSBcIi4vbWNwLm1qc1wiO1xuaW1wb3J0IHsgZ2V0RGVmYXVsdE1vZGVsU2V0dGluZ3MsIGdwdDVSZWFzb25pbmdTZXR0aW5nc1JlcXVpcmVkLCBpc0dwdDVEZWZhdWx0LCB9IGZyb20gXCIuL2RlZmF1bHRNb2RlbC5tanNcIjtcbmltcG9ydCB7IHRvb2wsIH0gZnJvbSBcIi4vdG9vbC5tanNcIjtcbmltcG9ydCB7IGdldEhhbmRvZmYgfSBmcm9tIFwiLi9oYW5kb2ZmLm1qc1wiO1xuaW1wb3J0IHsgUnVubmVyIH0gZnJvbSBcIi4vcnVuLm1qc1wiO1xuaW1wb3J0IHsgdG9GdW5jdGlvblRvb2xOYW1lIH0gZnJvbSBcIi4vdXRpbHMvdG9vbHMubWpzXCI7XG5pbXBvcnQgeyBnZXRPdXRwdXRUZXh0IH0gZnJvbSBcIi4vdXRpbHMvbWVzc2FnZXMubWpzXCI7XG5pbXBvcnQgeyBpc0FnZW50VG9vbElucHV0IH0gZnJvbSBcIi4vdXRpbHMvdHlwZUd1YXJkcy5tanNcIjtcbmltcG9ydCB7IGlzWm9kT2JqZWN0IH0gZnJvbSBcIi4vdXRpbHMvdHlwZUd1YXJkcy5tanNcIjtcbmltcG9ydCB7IE1vZGVsQmVoYXZpb3JFcnJvciwgVXNlckVycm9yIH0gZnJvbSBcIi4vZXJyb3JzLm1qc1wiO1xuaW1wb3J0IGxvZ2dlciBmcm9tIFwiLi9sb2dnZXIubWpzXCI7XG4vLyBQZXItcHJvY2VzcywgZXBoZW1lcmFsIG1hcCBsaW5raW5nIGEgZnVuY3Rpb24gdG9vbCBjYWxsIHRvIGl0cyBuZXN0ZWRcbi8vIEFnZW50IHJ1biByZXN1bHQgd2l0aGluIHRoZSBzYW1lIHJ1bjsgZW50cnkgaXMgcmVtb3ZlZCBhZnRlciBjb25zdW1wdGlvbi5cbmNvbnN0IGFnZW50VG9vbFJ1blJlc3VsdHMgPSBuZXcgV2Vha01hcCgpO1xuZXhwb3J0IGZ1bmN0aW9uIHNhdmVBZ2VudFRvb2xSdW5SZXN1bHQodG9vbENhbGwsIHJ1blJlc3VsdCkge1xuICAgIGlmICh0b29sQ2FsbCkge1xuICAgICAgICBhZ2VudFRvb2xSdW5SZXN1bHRzLnNldCh0b29sQ2FsbCwgcnVuUmVzdWx0KTtcbiAgICB9XG59XG5leHBvcnQgZnVuY3Rpb24gY29uc3VtZUFnZW50VG9vbFJ1blJlc3VsdCh0b29sQ2FsbCkge1xuICAgIGNvbnN0IHJ1blJlc3VsdCA9IGFnZW50VG9vbFJ1blJlc3VsdHMuZ2V0KHRvb2xDYWxsKTtcbiAgICBpZiAocnVuUmVzdWx0KSB7XG4gICAgICAgIGFnZW50VG9vbFJ1blJlc3VsdHMuZGVsZXRlKHRvb2xDYWxsKTtcbiAgICB9XG4gICAgcmV0dXJuIHJ1blJlc3VsdDtcbn1cbi8vIFRoZSBwYXJhbWV0ZXIgdHlwZSBmbyBuZWVkQXBwcm92YWwgZnVuY3Rpb24gZm9yIHRoZSB0b29sIGNyZWF0ZWQgYnkgQWdlbnQuYXNUb29sKCkgbWV0aG9kXG5jb25zdCBBZ2VudEFzVG9vbE5lZWRBcHByb3ZhbFNjaGFtZSA9IHoub2JqZWN0KHsgaW5wdXQ6IHouc3RyaW5nKCkgfSk7XG4vKipcbiAqIFRoZSBjbGFzcyByZXByZXNlbnRpbmcgYW4gQUkgYWdlbnQgY29uZmlndXJlZCB3aXRoIGluc3RydWN0aW9ucywgdG9vbHMsIGd1YXJkcmFpbHMsIGhhbmRvZmZzIGFuZCBtb3JlLlxuICpcbiAqIFdlIHN0cm9uZ2x5IHJlY29tbWVuZCBwYXNzaW5nIGBpbnN0cnVjdGlvbnNgLCB3aGljaCBpcyB0aGUgXCJzeXN0ZW0gcHJvbXB0XCIgZm9yIHRoZSBhZ2VudC4gSW5cbiAqIGFkZGl0aW9uLCB5b3UgY2FuIHBhc3MgYGhhbmRvZmZEZXNjcmlwdGlvbmAsIHdoaWNoIGlzIGEgaHVtYW4tcmVhZGFibGUgZGVzY3JpcHRpb24gb2YgdGhlXG4gKiBhZ2VudCwgdXNlZCB3aGVuIHRoZSBhZ2VudCBpcyB1c2VkIGluc2lkZSB0b29scy9oYW5kb2Zmcy5cbiAqXG4gKiBBZ2VudHMgYXJlIGdlbmVyaWMgb24gdGhlIGNvbnRleHQgdHlwZS4gVGhlIGNvbnRleHQgaXMgYSAobXV0YWJsZSkgb2JqZWN0IHlvdSBjcmVhdGUuIEl0IGlzXG4gKiBwYXNzZWQgdG8gdG9vbCBmdW5jdGlvbnMsIGhhbmRvZmZzLCBndWFyZHJhaWxzLCBldGMuXG4gKi9cbmV4cG9ydCBjbGFzcyBBZ2VudCBleHRlbmRzIEFnZW50SG9va3Mge1xuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhbiBBZ2VudCB3aXRoIGhhbmRvZmZzIGFuZCBhdXRvbWF0aWNhbGx5IGluZmVyIHRoZSB1bmlvbiB0eXBlIGZvciBUT3V0cHV0IGZyb20gdGhlIGhhbmRvZmYgYWdlbnRzJyBvdXRwdXQgdHlwZXMuXG4gICAgICovXG4gICAgc3RhdGljIGNyZWF0ZShjb25maWcpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBBZ2VudCh7XG4gICAgICAgICAgICAuLi5jb25maWcsXG4gICAgICAgICAgICBoYW5kb2ZmczogY29uZmlnLmhhbmRvZmZzLFxuICAgICAgICAgICAgb3V0cHV0VHlwZTogY29uZmlnLm91dHB1dFR5cGUsXG4gICAgICAgICAgICBoYW5kb2ZmT3V0cHV0VHlwZVdhcm5pbmdFbmFibGVkOiBmYWxzZSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHN0YXRpYyBERUZBVUxUX01PREVMX1BMQUNFSE9MREVSID0gJyc7XG4gICAgbmFtZTtcbiAgICBpbnN0cnVjdGlvbnM7XG4gICAgcHJvbXB0O1xuICAgIGhhbmRvZmZEZXNjcmlwdGlvbjtcbiAgICBoYW5kb2ZmcztcbiAgICBtb2RlbDtcbiAgICBtb2RlbFNldHRpbmdzO1xuICAgIHRvb2xzO1xuICAgIG1jcFNlcnZlcnM7XG4gICAgaW5wdXRHdWFyZHJhaWxzO1xuICAgIG91dHB1dEd1YXJkcmFpbHM7XG4gICAgb3V0cHV0VHlwZSA9ICd0ZXh0JztcbiAgICB0b29sVXNlQmVoYXZpb3I7XG4gICAgcmVzZXRUb29sQ2hvaWNlO1xuICAgIF90b29sc0V4cGxpY2l0bHlDb25maWd1cmVkO1xuICAgIGNvbnN0cnVjdG9yKGNvbmZpZykge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICBpZiAodHlwZW9mIGNvbmZpZy5uYW1lICE9PSAnc3RyaW5nJyB8fCBjb25maWcubmFtZS50cmltKCkgPT09ICcnKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVXNlckVycm9yKCdBZ2VudCBtdXN0IGhhdmUgYSBuYW1lLicpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMubmFtZSA9IGNvbmZpZy5uYW1lO1xuICAgICAgICB0aGlzLmluc3RydWN0aW9ucyA9IGNvbmZpZy5pbnN0cnVjdGlvbnMgPz8gQWdlbnQuREVGQVVMVF9NT0RFTF9QTEFDRUhPTERFUjtcbiAgICAgICAgdGhpcy5wcm9tcHQgPSBjb25maWcucHJvbXB0O1xuICAgICAgICB0aGlzLmhhbmRvZmZEZXNjcmlwdGlvbiA9IGNvbmZpZy5oYW5kb2ZmRGVzY3JpcHRpb24gPz8gJyc7XG4gICAgICAgIHRoaXMuaGFuZG9mZnMgPSBjb25maWcuaGFuZG9mZnMgPz8gW107XG4gICAgICAgIHRoaXMubW9kZWwgPSBjb25maWcubW9kZWwgPz8gJyc7XG4gICAgICAgIHRoaXMubW9kZWxTZXR0aW5ncyA9IGNvbmZpZy5tb2RlbFNldHRpbmdzID8/IGdldERlZmF1bHRNb2RlbFNldHRpbmdzKCk7XG4gICAgICAgIHRoaXMudG9vbHMgPSBjb25maWcudG9vbHMgPz8gW107XG4gICAgICAgIHRoaXMuX3Rvb2xzRXhwbGljaXRseUNvbmZpZ3VyZWQgPSBjb25maWcudG9vbHMgIT09IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5tY3BTZXJ2ZXJzID0gY29uZmlnLm1jcFNlcnZlcnMgPz8gW107XG4gICAgICAgIHRoaXMuaW5wdXRHdWFyZHJhaWxzID0gY29uZmlnLmlucHV0R3VhcmRyYWlscyA/PyBbXTtcbiAgICAgICAgdGhpcy5vdXRwdXRHdWFyZHJhaWxzID0gY29uZmlnLm91dHB1dEd1YXJkcmFpbHMgPz8gW107XG4gICAgICAgIGlmIChjb25maWcub3V0cHV0VHlwZSkge1xuICAgICAgICAgICAgdGhpcy5vdXRwdXRUeXBlID0gY29uZmlnLm91dHB1dFR5cGU7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy50b29sVXNlQmVoYXZpb3IgPSBjb25maWcudG9vbFVzZUJlaGF2aW9yID8/ICdydW5fbGxtX2FnYWluJztcbiAgICAgICAgdGhpcy5yZXNldFRvb2xDaG9pY2UgPSBjb25maWcucmVzZXRUb29sQ2hvaWNlID8/IHRydWU7XG4gICAgICAgIGlmIChcbiAgICAgICAgLy8gVGhlIHVzZXIgc2V0cyBhIG5vbi1kZWZhdWx0IG1vZGVsXG4gICAgICAgIGNvbmZpZy5tb2RlbCAhPT0gdW5kZWZpbmVkICYmXG4gICAgICAgICAgICAvLyBUaGUgZGVmYXVsdCBtb2RlbCBpcyBncHQtNVxuICAgICAgICAgICAgaXNHcHQ1RGVmYXVsdCgpICYmXG4gICAgICAgICAgICAvLyBIb3dldmVyLCB0aGUgc3BlY2lmaWVkIG1vZGVsIGlzIG5vdCBhIGdwdC01IG1vZGVsXG4gICAgICAgICAgICAodHlwZW9mIGNvbmZpZy5tb2RlbCAhPT0gJ3N0cmluZycgfHxcbiAgICAgICAgICAgICAgICAhZ3B0NVJlYXNvbmluZ1NldHRpbmdzUmVxdWlyZWQoY29uZmlnLm1vZGVsKSkgJiZcbiAgICAgICAgICAgIC8vIFRoZSBtb2RlbCBzZXR0aW5ncyBhcmUgbm90IGN1c3RvbWl6ZWQgZm9yIHRoZSBzcGVjaWZpZWQgbW9kZWxcbiAgICAgICAgICAgIGNvbmZpZy5tb2RlbFNldHRpbmdzID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIC8vIEluIHRoaXMgc2NlbmFyaW8sIHdlIHNob3VsZCB1c2UgYSBnZW5lcmljIG1vZGVsIHNldHRpbmdzXG4gICAgICAgICAgICAvLyBiZWNhdXNlIG5vbi1ncHQtNSBtb2RlbHMgYXJlIG5vdCBjb21wYXRpYmxlIHdpdGggdGhlIGRlZmF1bHQgZ3B0LTUgbW9kZWwgc2V0dGluZ3MuXG4gICAgICAgICAgICAvLyBUaGlzIGlzIGEgYmVzdC1lZmZvcnQgYXR0ZW1wdCB0byBtYWtlIHRoZSBhZ2VudCB3b3JrIHdpdGggbm9uLWdwdC01IG1vZGVscy5cbiAgICAgICAgICAgIHRoaXMubW9kZWxTZXR0aW5ncyA9IHt9O1xuICAgICAgICB9XG4gICAgICAgIC8vIC0tLSBSdW50aW1lIHdhcm5pbmcgZm9yIGhhbmRvZmYgb3V0cHV0IHR5cGUgY29tcGF0aWJpbGl0eSAtLS1cbiAgICAgICAgaWYgKGNvbmZpZy5oYW5kb2ZmT3V0cHV0VHlwZVdhcm5pbmdFbmFibGVkID09PSB1bmRlZmluZWQgfHxcbiAgICAgICAgICAgIGNvbmZpZy5oYW5kb2ZmT3V0cHV0VHlwZVdhcm5pbmdFbmFibGVkKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5oYW5kb2ZmcyAmJiB0aGlzLm91dHB1dFR5cGUpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBvdXRwdXRUeXBlcyA9IG5ldyBTZXQoW0pTT04uc3RyaW5naWZ5KHRoaXMub3V0cHV0VHlwZSldKTtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGggb2YgdGhpcy5oYW5kb2Zmcykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoJ291dHB1dFR5cGUnIGluIGggJiYgaC5vdXRwdXRUeXBlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBvdXRwdXRUeXBlcy5hZGQoSlNPTi5zdHJpbmdpZnkoaC5vdXRwdXRUeXBlKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoJ2FnZW50JyBpbiBoICYmIGguYWdlbnQub3V0cHV0VHlwZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgb3V0cHV0VHlwZXMuYWRkKEpTT04uc3RyaW5naWZ5KGguYWdlbnQub3V0cHV0VHlwZSkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChvdXRwdXRUeXBlcy5zaXplID4gMSkge1xuICAgICAgICAgICAgICAgICAgICBsb2dnZXIud2FybihgW0FnZW50XSBXYXJuaW5nOiBIYW5kb2ZmIGFnZW50cyBoYXZlIGRpZmZlcmVudCBvdXRwdXQgdHlwZXM6ICR7QXJyYXkuZnJvbShvdXRwdXRUeXBlcykuam9pbignLCAnKX0uIFlvdSBjYW4gbWFrZSBpdCB0eXBlLXNhZmUgYnkgdXNpbmcgQWdlbnQuY3JlYXRlKHsgLi4uIH0pIG1ldGhvZCBpbnN0ZWFkLmApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBPdXRwdXQgc2NoZW1hIG5hbWUuXG4gICAgICovXG4gICAgZ2V0IG91dHB1dFNjaGVtYU5hbWUoKSB7XG4gICAgICAgIGlmICh0aGlzLm91dHB1dFR5cGUgPT09ICd0ZXh0Jykge1xuICAgICAgICAgICAgcmV0dXJuICd0ZXh0JztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChpc1pvZE9iamVjdCh0aGlzLm91dHB1dFR5cGUpKSB7XG4gICAgICAgICAgICByZXR1cm4gJ1pvZE91dHB1dCc7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodHlwZW9mIHRoaXMub3V0cHV0VHlwZSA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm91dHB1dFR5cGUubmFtZTtcbiAgICAgICAgfVxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFVua25vd24gb3V0cHV0IHR5cGU6ICR7dGhpcy5vdXRwdXRUeXBlfWApO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBNYWtlcyBhIGNvcHkgb2YgdGhlIGFnZW50LCB3aXRoIHRoZSBnaXZlbiBhcmd1bWVudHMgY2hhbmdlZC4gRm9yIGV4YW1wbGUsIHlvdSBjb3VsZCBkbzpcbiAgICAgKlxuICAgICAqIGBgYFxuICAgICAqIGNvbnN0IG5ld0FnZW50ID0gYWdlbnQuY2xvbmUoeyBpbnN0cnVjdGlvbnM6ICdOZXcgaW5zdHJ1Y3Rpb25zJyB9KVxuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogQHBhcmFtIGNvbmZpZyAtIEEgcGFydGlhbCBjb25maWd1cmF0aW9uIHRvIGNoYW5nZS5cbiAgICAgKiBAcmV0dXJucyBBIG5ldyBhZ2VudCB3aXRoIHRoZSBnaXZlbiBjaGFuZ2VzLlxuICAgICAqL1xuICAgIGNsb25lKGNvbmZpZykge1xuICAgICAgICByZXR1cm4gbmV3IEFnZW50KHtcbiAgICAgICAgICAgIC4uLnRoaXMsXG4gICAgICAgICAgICAuLi5jb25maWcsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUcmFuc2Zvcm0gdGhpcyBhZ2VudCBpbnRvIGEgdG9vbCwgY2FsbGFibGUgYnkgb3RoZXIgYWdlbnRzLlxuICAgICAqXG4gICAgICogVGhpcyBpcyBkaWZmZXJlbnQgZnJvbSBoYW5kb2ZmcyBpbiB0d28gd2F5czpcbiAgICAgKiAxLiBJbiBoYW5kb2ZmcywgdGhlIG5ldyBhZ2VudCByZWNlaXZlcyB0aGUgY29udmVyc2F0aW9uIGhpc3RvcnkuIEluIHRoaXMgdG9vbCwgdGhlIG5ldyBhZ2VudFxuICAgICAqICAgIHJlY2VpdmVzIGdlbmVyYXRlZCBpbnB1dC5cbiAgICAgKiAyLiBJbiBoYW5kb2ZmcywgdGhlIG5ldyBhZ2VudCB0YWtlcyBvdmVyIHRoZSBjb252ZXJzYXRpb24uIEluIHRoaXMgdG9vbCwgdGhlIG5ldyBhZ2VudCBpc1xuICAgICAqICAgIGNhbGxlZCBhcyBhIHRvb2wsIGFuZCB0aGUgY29udmVyc2F0aW9uIGlzIGNvbnRpbnVlZCBieSB0aGUgb3JpZ2luYWwgYWdlbnQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gb3B0aW9ucyAtIE9wdGlvbnMgZm9yIHRoZSB0b29sLlxuICAgICAqIEByZXR1cm5zIEEgdG9vbCB0aGF0IHJ1bnMgdGhlIGFnZW50IGFuZCByZXR1cm5zIHRoZSBvdXRwdXQgdGV4dC5cbiAgICAgKi9cbiAgICBhc1Rvb2wob3B0aW9ucykge1xuICAgICAgICBjb25zdCB7IHRvb2xOYW1lLCB0b29sRGVzY3JpcHRpb24sIGN1c3RvbU91dHB1dEV4dHJhY3RvciwgbmVlZHNBcHByb3ZhbCwgcnVuQ29uZmlnLCBydW5PcHRpb25zLCBpc0VuYWJsZWQsIG9uU3RyZWFtLCB9ID0gb3B0aW9ucztcbiAgICAgICAgLy8gRXZlbnQgaGFuZGxlcnMgYXJlIHNjb3BlZCB0byB0aGlzIGFnZW50IHRvb2wgaW5zdGFuY2UgYW5kIGFyZSBub3Qgc2hhcmVkOyB3ZSBvbmx5IHN1cHBvcnQgcmVnaXN0cmF0aW9uIChubyByZW1vdmFsKSB0byBrZWVwIHRoZSBBUEkgc3VyZmFjZSBzbWFsbC5cbiAgICAgICAgY29uc3QgZXZlbnRIYW5kbGVycyA9IG5ldyBNYXAoKTtcbiAgICAgICAgY29uc3QgZW1pdEV2ZW50ID0gYXN5bmMgKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICAvLyBXZSBpbnRlbnRpb25hbGx5IGtlZXAgb25seSBhZGQgc2VtYW50aWNzIChubyBvZmYpIHRvIHJlZHVjZSBzdXJmYWNlIGFyZWE7IGhhbmRsZXJzIGFyZSBzY29wZWQgdG8gdGhpcyBhZ2VudCB0b29sIGluc3RhbmNlLlxuICAgICAgICAgICAgY29uc3Qgc3BlY2lmaWMgPSBldmVudEhhbmRsZXJzLmdldChldmVudC5ldmVudC50eXBlKTtcbiAgICAgICAgICAgIGNvbnN0IHdpbGRjYXJkID0gZXZlbnRIYW5kbGVycy5nZXQoJyonKTtcbiAgICAgICAgICAgIGNvbnN0IGNhbmRpZGF0ZXMgPSBbXG4gICAgICAgICAgICAgICAgLi4uKG9uU3RyZWFtID8gW29uU3RyZWFtXSA6IFtdKSxcbiAgICAgICAgICAgICAgICAuLi4oc3BlY2lmaWMgPyBBcnJheS5mcm9tKHNwZWNpZmljKSA6IFtdKSxcbiAgICAgICAgICAgICAgICAuLi4od2lsZGNhcmQgPyBBcnJheS5mcm9tKHdpbGRjYXJkKSA6IFtdKSxcbiAgICAgICAgICAgIF07XG4gICAgICAgICAgICAvLyBSdW4gYWxsIGhhbmRsZXJzIGluIHBhcmFsbGVsIHNvIGEgc2xvdyBvblN0cmVhbSBjYWxsYmFjayBkb2VzIG5vdCBibG9jayBvbiguLi4pIGhhbmRsZXJzIChhbmQgdmljZSB2ZXJzYSkuXG4gICAgICAgICAgICBhd2FpdCBQcm9taXNlLmFsbFNldHRsZWQoY2FuZGlkYXRlcy5tYXAoKGhhbmRsZXIpID0+IFByb21pc2UucmVzb2x2ZSgpLnRoZW4oKCkgPT4gaGFuZGxlcihldmVudCkpKSk7XG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IGJhc2VUb29sID0gdG9vbCh7XG4gICAgICAgICAgICBuYW1lOiB0b29sTmFtZSA/PyB0b0Z1bmN0aW9uVG9vbE5hbWUodGhpcy5uYW1lKSxcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiB0b29sRGVzY3JpcHRpb24gPz8gJycsXG4gICAgICAgICAgICBwYXJhbWV0ZXJzOiBBZ2VudEFzVG9vbE5lZWRBcHByb3ZhbFNjaGFtZSxcbiAgICAgICAgICAgIHN0cmljdDogdHJ1ZSxcbiAgICAgICAgICAgIG5lZWRzQXBwcm92YWwsXG4gICAgICAgICAgICBpc0VuYWJsZWQsXG4gICAgICAgICAgICBleGVjdXRlOiBhc3luYyAoZGF0YSwgY29udGV4dCwgZGV0YWlscykgPT4ge1xuICAgICAgICAgICAgICAgIGlmICghaXNBZ2VudFRvb2xJbnB1dChkYXRhKSkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTW9kZWxCZWhhdmlvckVycm9yKCdBZ2VudCB0b29sIGNhbGxlZCB3aXRoIGludmFsaWQgaW5wdXQnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3QgcnVubmVyID0gbmV3IFJ1bm5lcihydW5Db25maWcgPz8ge30pO1xuICAgICAgICAgICAgICAgIC8vIE9ubHkgZmxpcCB0byBzdHJlYW1pbmcgbW9kZSB3aGVuIGEgaGFuZGxlciBpcyBwcm92aWRlZCB0byBhdm9pZCBleHRyYSBvdmVyaGVhZCBmb3IgY2FsbGVycyB0aGF0IGRvIG5vdCBuZWVkIGV2ZW50cy5cbiAgICAgICAgICAgICAgICAvLyBGbGlwIHRvIHN0cmVhbWluZyBpZiBlaXRoZXIgYSBsZWdhY3kgb25TdHJlYW0gY2FsbGJhY2sgb3IgZXZlbnQgaGFuZGxlcnMgYXJlIHJlZ2lzdGVyZWQ7IG90aGVyd2lzZSBzdGF5IG9uIHRoZSBub24tc3RyZWFtIHBhdGggdG8gYXZvaWQgZXh0cmEgb3ZlcmhlYWQuXG4gICAgICAgICAgICAgICAgY29uc3Qgc2hvdWxkU3RyZWFtID0gdHlwZW9mIG9uU3RyZWFtID09PSAnZnVuY3Rpb24nIHx8IGV2ZW50SGFuZGxlcnMuc2l6ZSA+IDA7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gc2hvdWxkU3RyZWFtXG4gICAgICAgICAgICAgICAgICAgID8gYXdhaXQgcnVubmVyLnJ1bih0aGlzLCBkYXRhLmlucHV0LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250ZXh0LFxuICAgICAgICAgICAgICAgICAgICAgICAgLi4uKHJ1bk9wdGlvbnMgPz8ge30pLFxuICAgICAgICAgICAgICAgICAgICAgICAgc3RyZWFtOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICA6IGF3YWl0IHJ1bm5lci5ydW4odGhpcywgZGF0YS5pbnB1dCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGV4dCxcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLihydW5PcHRpb25zID8/IHt9KSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgY29uc3Qgc3RyZWFtUGF5bG9hZCA9IHtcbiAgICAgICAgICAgICAgICAgICAgYWdlbnQ6IHRoaXMsXG4gICAgICAgICAgICAgICAgICAgIHRvb2xDYWxsOiBkZXRhaWxzPy50b29sQ2FsbCxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGlmIChzaG91bGRTdHJlYW0pIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gQ2FzdCB0aHJvdWdoIHVua25vd246IHRoZSBhc3luYyBpdGVyYXRvciBzaGFwZSBtYXRjaGVzIGFuZCB3ZSB3YW50IHRvIGRyYWluIHRoZSBzdHJlYW0gZm9yIHNpZGUgZWZmZWN0cyB3aGlsZSBrZWVwaW5nIHRoZSBwdWJsaWMgQVBJIHN0YWJsZS5cbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3RyZWFtUmVzdWx0ID0gcmVzdWx0O1xuICAgICAgICAgICAgICAgICAgICAvLyBEcmFpbiB0aGUgc3RyZWFtIHRvIGRlbGl2ZXIgZXZlcnkgZXZlbnQgdG8gcmVnaXN0ZXJlZCBoYW5kbGVyczsgZW5zdXJlIGNvbXBsZXRpb24gYXdhaXRlZCBzbyB0aGUgbmVzdGVkIHJ1biBmaW5pc2hlcyBiZWZvcmUgcmV0dXJuaW5nLlxuICAgICAgICAgICAgICAgICAgICBmb3IgYXdhaXQgKGNvbnN0IGV2ZW50IG9mIHN0cmVhbVJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgZW1pdEV2ZW50KHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBldmVudCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5zdHJlYW1QYXlsb2FkLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgc3RyZWFtUmVzdWx0LmNvbXBsZXRlZDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3QgY29tcGxldGVkUmVzdWx0ID0gcmVzdWx0O1xuICAgICAgICAgICAgICAgIGNvbnN0IHVzZXNTdG9wQXRUb29sTmFtZXMgPSB0eXBlb2YgdGhpcy50b29sVXNlQmVoYXZpb3IgPT09ICdvYmplY3QnICYmXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudG9vbFVzZUJlaGF2aW9yICE9PSBudWxsICYmXG4gICAgICAgICAgICAgICAgICAgICdzdG9wQXRUb29sTmFtZXMnIGluIHRoaXMudG9vbFVzZUJlaGF2aW9yO1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgY3VzdG9tT3V0cHV0RXh0cmFjdG9yICE9PSAnZnVuY3Rpb24nICYmXG4gICAgICAgICAgICAgICAgICAgIHVzZXNTdG9wQXRUb29sTmFtZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKGBZb3UncmUgcGFzc2luZyB0aGUgYWdlbnQgKG5hbWU6ICR7dGhpcy5uYW1lfSkgd2l0aCB0b29sVXNlQmVoYXZpb3Iuc3RvcEF0VG9vbE5hbWVzIGNvbmZpZ3VyZWQgYXMgYSB0b29sIHRvIGEgZGlmZmVyZW50IGFnZW50OyB0aGlzIG1heSBub3Qgd29yayBhcyB5b3UgZXhwZWN0LiBZb3UgbWF5IHdhbnQgdG8gaGF2ZSBhIHdyYXBwZXIgZnVuY3Rpb24gdG9vbCB0byBjb25zaXN0ZW50bHkgcmV0dXJuIHRoZSBmaW5hbCBvdXRwdXQuYCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IG91dHB1dFRleHQgPSB0eXBlb2YgY3VzdG9tT3V0cHV0RXh0cmFjdG9yID09PSAnZnVuY3Rpb24nXG4gICAgICAgICAgICAgICAgICAgID8gYXdhaXQgY3VzdG9tT3V0cHV0RXh0cmFjdG9yKGNvbXBsZXRlZFJlc3VsdClcbiAgICAgICAgICAgICAgICAgICAgOiBnZXRPdXRwdXRUZXh0KGNvbXBsZXRlZFJlc3VsdC5yYXdSZXNwb25zZXNbY29tcGxldGVkUmVzdWx0LnJhd1Jlc3BvbnNlcy5sZW5ndGggLSAxXSk7XG4gICAgICAgICAgICAgICAgaWYgKGRldGFpbHM/LnRvb2xDYWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIHNhdmVBZ2VudFRvb2xSdW5SZXN1bHQoZGV0YWlscy50b29sQ2FsbCwgY29tcGxldGVkUmVzdWx0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIG91dHB1dFRleHQ7XG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgYWdlbnRUb29sID0ge1xuICAgICAgICAgICAgLi4uYmFzZVRvb2wsXG4gICAgICAgICAgICBvbjogKG5hbWUsIGhhbmRsZXIpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBzZXQgPSBldmVudEhhbmRsZXJzLmdldChuYW1lKSA/PyBuZXcgU2V0KCk7XG4gICAgICAgICAgICAgICAgc2V0LmFkZChoYW5kbGVyKTtcbiAgICAgICAgICAgICAgICBldmVudEhhbmRsZXJzLnNldChuYW1lLCBzZXQpO1xuICAgICAgICAgICAgICAgIHJldHVybiBhZ2VudFRvb2w7XG4gICAgICAgICAgICB9LFxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gYWdlbnRUb29sO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBzeXN0ZW0gcHJvbXB0IGZvciB0aGUgYWdlbnQuXG4gICAgICpcbiAgICAgKiBJZiB0aGUgYWdlbnQgaGFzIGEgZnVuY3Rpb24gYXMgaXRzIGluc3RydWN0aW9ucywgdGhpcyBmdW5jdGlvbiB3aWxsIGJlIGNhbGxlZCB3aXRoIHRoZVxuICAgICAqIHJ1bkNvbnRleHQgYW5kIHRoZSBhZ2VudCBpbnN0YW5jZS5cbiAgICAgKi9cbiAgICBhc3luYyBnZXRTeXN0ZW1Qcm9tcHQocnVuQ29udGV4dCkge1xuICAgICAgICBpZiAodHlwZW9mIHRoaXMuaW5zdHJ1Y3Rpb25zID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5pbnN0cnVjdGlvbnMocnVuQ29udGV4dCwgdGhpcyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuaW5zdHJ1Y3Rpb25zO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBwcm9tcHQgdGVtcGxhdGUgZm9yIHRoZSBhZ2VudCwgaWYgZGVmaW5lZC5cbiAgICAgKlxuICAgICAqIElmIHRoZSBhZ2VudCBoYXMgYSBmdW5jdGlvbiBhcyBpdHMgcHJvbXB0LCB0aGlzIGZ1bmN0aW9uIHdpbGwgYmUgY2FsbGVkIHdpdGggdGhlXG4gICAgICogcnVuQ29udGV4dCBhbmQgdGhlIGFnZW50IGluc3RhbmNlLlxuICAgICAqL1xuICAgIGFzeW5jIGdldFByb21wdChydW5Db250ZXh0KSB7XG4gICAgICAgIGlmICh0eXBlb2YgdGhpcy5wcm9tcHQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIHJldHVybiBhd2FpdCB0aGlzLnByb21wdChydW5Db250ZXh0LCB0aGlzKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5wcm9tcHQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEZldGNoZXMgdGhlIGF2YWlsYWJsZSB0b29scyBmcm9tIHRoZSBNQ1Agc2VydmVycy5cbiAgICAgKiBAcmV0dXJucyB0aGUgTUNQIHBvd2VyZWQgdG9vbHNcbiAgICAgKi9cbiAgICBhc3luYyBnZXRNY3BUb29scyhydW5Db250ZXh0KSB7XG4gICAgICAgIGlmICh0aGlzLm1jcFNlcnZlcnMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgcmV0dXJuIGdldEFsbE1jcFRvb2xzKHtcbiAgICAgICAgICAgICAgICBtY3BTZXJ2ZXJzOiB0aGlzLm1jcFNlcnZlcnMsXG4gICAgICAgICAgICAgICAgcnVuQ29udGV4dCxcbiAgICAgICAgICAgICAgICBhZ2VudDogdGhpcyxcbiAgICAgICAgICAgICAgICBjb252ZXJ0U2NoZW1hc1RvU3RyaWN0OiBmYWxzZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBbXTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQUxsIGFnZW50IHRvb2xzLCBpbmNsdWRpbmcgdGhlIE1DUGwgYW5kIGZ1bmN0aW9uIHRvb2xzLlxuICAgICAqXG4gICAgICogQHJldHVybnMgYWxsIGNvbmZpZ3VyZWQgdG9vbHNcbiAgICAgKi9cbiAgICBhc3luYyBnZXRBbGxUb29scyhydW5Db250ZXh0KSB7XG4gICAgICAgIGNvbnN0IG1jcFRvb2xzID0gYXdhaXQgdGhpcy5nZXRNY3BUb29scyhydW5Db250ZXh0KTtcbiAgICAgICAgY29uc3QgZW5hYmxlZFRvb2xzID0gW107XG4gICAgICAgIGZvciAoY29uc3QgY2FuZGlkYXRlIG9mIHRoaXMudG9vbHMpIHtcbiAgICAgICAgICAgIGlmIChjYW5kaWRhdGUudHlwZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgIGNvbnN0IG1heWJlSXNFbmFibGVkID0gY2FuZGlkYXRlLmlzRW5hYmxlZDtcbiAgICAgICAgICAgICAgICBjb25zdCBlbmFibGVkID0gdHlwZW9mIG1heWJlSXNFbmFibGVkID09PSAnZnVuY3Rpb24nXG4gICAgICAgICAgICAgICAgICAgID8gYXdhaXQgbWF5YmVJc0VuYWJsZWQocnVuQ29udGV4dCwgdGhpcylcbiAgICAgICAgICAgICAgICAgICAgOiB0eXBlb2YgbWF5YmVJc0VuYWJsZWQgPT09ICdib29sZWFuJ1xuICAgICAgICAgICAgICAgICAgICAgICAgPyBtYXliZUlzRW5hYmxlZFxuICAgICAgICAgICAgICAgICAgICAgICAgOiB0cnVlO1xuICAgICAgICAgICAgICAgIGlmICghZW5hYmxlZCkge1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbmFibGVkVG9vbHMucHVzaChjYW5kaWRhdGUpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBbLi4ubWNwVG9vbHMsIC4uLmVuYWJsZWRUb29sc107XG4gICAgfVxuICAgIGhhc0V4cGxpY2l0VG9vbENvbmZpZygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3Rvb2xzRXhwbGljaXRseUNvbmZpZ3VyZWQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIGhhbmRvZmZzIHRoYXQgc2hvdWxkIGJlIGV4cG9zZWQgdG8gdGhlIG1vZGVsIGZvciB0aGUgY3VycmVudCBydW4uXG4gICAgICpcbiAgICAgKiBIYW5kb2ZmcyB0aGF0IHByb3ZpZGUgYW4gYGlzRW5hYmxlZGAgZnVuY3Rpb24gcmV0dXJuaW5nIGBmYWxzZWAgYXJlIG9taXR0ZWQuXG4gICAgICovXG4gICAgYXN5bmMgZ2V0RW5hYmxlZEhhbmRvZmZzKHJ1bkNvbnRleHQpIHtcbiAgICAgICAgY29uc3QgaGFuZG9mZnMgPSB0aGlzLmhhbmRvZmZzPy5tYXAoKGgpID0+IGdldEhhbmRvZmYoaCkpID8/IFtdO1xuICAgICAgICBjb25zdCBlbmFibGVkID0gW107XG4gICAgICAgIGZvciAoY29uc3QgaGFuZG9mZiBvZiBoYW5kb2Zmcykge1xuICAgICAgICAgICAgaWYgKGF3YWl0IGhhbmRvZmYuaXNFbmFibGVkKHsgcnVuQ29udGV4dCwgYWdlbnQ6IHRoaXMgfSkpIHtcbiAgICAgICAgICAgICAgICBlbmFibGVkLnB1c2goaGFuZG9mZik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGVuYWJsZWQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFByb2Nlc3NlcyB0aGUgZmluYWwgb3V0cHV0IG9mIHRoZSBhZ2VudC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBvdXRwdXQgLSBUaGUgb3V0cHV0IG9mIHRoZSBhZ2VudC5cbiAgICAgKiBAcmV0dXJucyBUaGUgcGFyc2VkIG91dC5cbiAgICAgKi9cbiAgICBwcm9jZXNzRmluYWxPdXRwdXQob3V0cHV0KSB7XG4gICAgICAgIGlmICh0aGlzLm91dHB1dFR5cGUgPT09ICd0ZXh0Jykge1xuICAgICAgICAgICAgcmV0dXJuIG91dHB1dDtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIHRoaXMub3V0cHV0VHlwZSA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgIGNvbnN0IHBhcnNlZCA9IEpTT04ucGFyc2Uob3V0cHV0KTtcbiAgICAgICAgICAgIGlmIChpc1pvZE9iamVjdCh0aGlzLm91dHB1dFR5cGUpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMub3V0cHV0VHlwZS5wYXJzZShwYXJzZWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHBhcnNlZDtcbiAgICAgICAgfVxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFVua25vd24gb3V0cHV0IHR5cGU6ICR7dGhpcy5vdXRwdXRUeXBlfWApO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgSlNPTiByZXByZXNlbnRhdGlvbiBvZiB0aGUgYWdlbnQsIHdoaWNoIGlzIHNlcmlhbGl6YWJsZS5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIEEgSlNPTiBvYmplY3QgY29udGFpbmluZyB0aGUgYWdlbnQncyBuYW1lLlxuICAgICAqL1xuICAgIHRvSlNPTigpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG5hbWU6IHRoaXMubmFtZSxcbiAgICAgICAgfTtcbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1hZ2VudC5tanMubWFwIiwiLyoqXG4gKiBEZWZpbmVzIGFuIGlucHV0IGd1YXJkcmFpbCBkZWZpbml0aW9uLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZGVmaW5lSW5wdXRHdWFyZHJhaWwoeyBuYW1lLCBleGVjdXRlLCBydW5JblBhcmFsbGVsID0gdHJ1ZSwgfSkge1xuICAgIHJldHVybiB7XG4gICAgICAgIHR5cGU6ICdpbnB1dCcsXG4gICAgICAgIG5hbWUsXG4gICAgICAgIHJ1bkluUGFyYWxsZWwsXG4gICAgICAgIGd1YXJkcmFpbEZ1bmN0aW9uOiBleGVjdXRlLFxuICAgICAgICBhc3luYyBydW4oYXJncykge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBndWFyZHJhaWw6IHsgdHlwZTogJ2lucHV0JywgbmFtZSB9LFxuICAgICAgICAgICAgICAgIG91dHB1dDogYXdhaXQgZXhlY3V0ZShhcmdzKSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0sXG4gICAgfTtcbn1cbi8qKlxuICogQ3JlYXRlcyBhbiBvdXRwdXQgZ3VhcmRyYWlsIGRlZmluaXRpb24uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkZWZpbmVPdXRwdXRHdWFyZHJhaWwoeyBuYW1lLCBleGVjdXRlLCB9KSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogJ291dHB1dCcsXG4gICAgICAgIG5hbWUsXG4gICAgICAgIGd1YXJkcmFpbEZ1bmN0aW9uOiBleGVjdXRlLFxuICAgICAgICBhc3luYyBydW4oYXJncykge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBndWFyZHJhaWw6IHsgdHlwZTogJ291dHB1dCcsIG5hbWUgfSxcbiAgICAgICAgICAgICAgICBhZ2VudDogYXJncy5hZ2VudCxcbiAgICAgICAgICAgICAgICBhZ2VudE91dHB1dDogYXJncy5hZ2VudE91dHB1dCxcbiAgICAgICAgICAgICAgICBvdXRwdXQ6IGF3YWl0IGV4ZWN1dGUoYXJncyksXG4gICAgICAgICAgICB9O1xuICAgICAgICB9LFxuICAgIH07XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1ndWFyZHJhaWwubWpzLm1hcCIsImxldCBERUZBVUxUX1BST1ZJREVSO1xuLyoqXG4gKiBTZXQgdGhlIG1vZGVsIHByb3ZpZGVyIHVzZWQgd2hlbiBubyBleHBsaWNpdCBwcm92aWRlciBpcyBzdXBwbGllZC5cbiAqXG4gKiBAcGFyYW0gcHJvdmlkZXIgLSBUaGUgcHJvdmlkZXIgdG8gdXNlIGJ5IGRlZmF1bHQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzZXREZWZhdWx0TW9kZWxQcm92aWRlcihwcm92aWRlcikge1xuICAgIERFRkFVTFRfUFJPVklERVIgPSBwcm92aWRlcjtcbn1cbi8qKlxuICogUmV0dXJucyB0aGUgZGVmYXVsdCBtb2RlbCBwcm92aWRlci5cbiAqXG4gKiBAcmV0dXJucyBUaGUgZGVmYXVsdCBtb2RlbCBwcm92aWRlci5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldERlZmF1bHRNb2RlbFByb3ZpZGVyKCkge1xuICAgIGlmICh0eXBlb2YgREVGQVVMVF9QUk9WSURFUiA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdObyBkZWZhdWx0IG1vZGVsIHByb3ZpZGVyIHNldC4gTWFrZSBzdXJlIHRvIHNldCBhIHByb3ZpZGVyIHVzaW5nIHNldERlZmF1bHRNb2RlbFByb3ZpZGVyIGJlZm9yZSBjYWxsaW5nIGdldERlZmF1bHRNb2RlbFByb3ZpZGVyIG9yIHBhc3MgYW4gZXhwbGljaXQgcHJvdmlkZXIuJyk7XG4gICAgfVxuICAgIHJldHVybiBERUZBVUxUX1BST1ZJREVSO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cHJvdmlkZXJzLm1qcy5tYXAiLCJpbXBvcnQgeyB6IH0gZnJvbSAnem9kJztcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIFNoYXJlZCBiYXNlIHR5cGVzXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vKipcbiAqIEV2ZXJ5IGl0ZW0gaW4gdGhlIHByb3RvY29sIHByb3ZpZGVzIGEgYHByb3ZpZGVyRGF0YWAgZmllbGQgdG8gYWNjb21tb2RhdGUgY3VzdG9tIGZ1bmN0aW9uYWxpdHlcbiAqIG9yIG5ldyBmaWVsZHNcbiAqL1xuZXhwb3J0IGNvbnN0IFNoYXJlZEJhc2UgPSB6Lm9iamVjdCh7XG4gICAgLyoqXG4gICAgICogQWRkaXRpb25hbCBvcHRpb25hbCBwcm92aWRlciBzcGVjaWZpYyBkYXRhLiBVc2VkIGZvciBjdXN0b20gZnVuY3Rpb25hbGl0eSBvciBtb2RlbCBwcm92aWRlclxuICAgICAqIHNwZWNpZmljIGZpZWxkcy5cbiAgICAgKi9cbiAgICBwcm92aWRlckRhdGE6IHoucmVjb3JkKHouc3RyaW5nKCksIHouYW55KCkpLm9wdGlvbmFsKCksXG59KTtcbi8qKlxuICogRXZlcnkgaXRlbSBoYXMgYSBzaGFyZWQgb2Ygc2hhcmVkIGl0ZW0gZGF0YSBpbmNsdWRpbmcgYW4gb3B0aW9uYWwgSUQuXG4gKi9cbmV4cG9ydCBjb25zdCBJdGVtQmFzZSA9IFNoYXJlZEJhc2UuZXh0ZW5kKHtcbiAgICAvKipcbiAgICAgKiBBbiBJRCB0byBpZGVudGlmeSB0aGUgaXRlbS4gVGhpcyBpcyBvcHRpb25hbCBieSBkZWZhdWx0LiBJZiBhIG1vZGVsIHByb3ZpZGVyIGFic29sdXRlbHlcbiAgICAgKiByZXF1aXJlcyB0aGlzIGZpZWxkLCBpdCB3aWxsIGJlIHZhbGlkYXRlZCBvbiB0aGUgbW9kZWwgbGV2ZWwuXG4gICAgICovXG4gICAgaWQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbn0pO1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gQ29udGVudCB0eXBlc1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuZXhwb3J0IGNvbnN0IFJlZnVzYWwgPSBTaGFyZWRCYXNlLmV4dGVuZCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdyZWZ1c2FsJyksXG4gICAgLyoqXG4gICAgICogVGhlIHJlZnVzYWwgZXhwbGFuYXRpb24gZnJvbSB0aGUgbW9kZWwuXG4gICAgICovXG4gICAgcmVmdXNhbDogei5zdHJpbmcoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IE91dHB1dFRleHQgPSBTaGFyZWRCYXNlLmV4dGVuZCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdvdXRwdXRfdGV4dCcpLFxuICAgIC8qKlxuICAgICAqIFRoZSB0ZXh0IG91dHB1dCBmcm9tIHRoZSBtb2RlbC5cbiAgICAgKi9cbiAgICB0ZXh0OiB6LnN0cmluZygpLFxufSk7XG5leHBvcnQgY29uc3QgSW5wdXRUZXh0ID0gU2hhcmVkQmFzZS5leHRlbmQoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnaW5wdXRfdGV4dCcpLFxuICAgIC8qKlxuICAgICAqIEEgdGV4dCBpbnB1dCBmb3IgZXhhbXBsZSBhIG1lc3NhZ2UgZnJvbSBhIHVzZXJcbiAgICAgKi9cbiAgICB0ZXh0OiB6LnN0cmluZygpLFxufSk7XG5leHBvcnQgY29uc3QgUmVhc29uaW5nVGV4dCA9IFNoYXJlZEJhc2UuZXh0ZW5kKHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ3JlYXNvbmluZ190ZXh0JyksXG4gICAgLyoqXG4gICAgICogQSB0ZXh0IGlucHV0IGZvciBleGFtcGxlIGEgbWVzc2FnZSBmcm9tIGEgdXNlclxuICAgICAqL1xuICAgIHRleHQ6IHouc3RyaW5nKCksXG59KTtcbmV4cG9ydCBjb25zdCBJbnB1dEltYWdlID0gU2hhcmVkQmFzZS5leHRlbmQoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnaW5wdXRfaW1hZ2UnKSxcbiAgICAvKipcbiAgICAgKiBUaGUgaW1hZ2UgaW5wdXQgdG8gdGhlIG1vZGVsLiBDb3VsZCBiZSBwcm92aWRlZCBpbmxpbmUgKGBpbWFnZWApLCBhcyBhIFVSTCwgb3IgYnkgcmVmZXJlbmNlIHRvIGFcbiAgICAgKiBwcmV2aW91c2x5IHVwbG9hZGVkIE9wZW5BSSBmaWxlLlxuICAgICAqL1xuICAgIGltYWdlOiB6XG4gICAgICAgIC8vIDEuIGltYWdlIGRhdGFcbiAgICAgICAgLnN0cmluZygpXG4gICAgICAgIC8vIDIuZmlsZSBJRCBmb3IgdGhlIGltYWdlXG4gICAgICAgIC5vcih6Lm9iamVjdCh7IGlkOiB6LnN0cmluZygpLmRlc2NyaWJlKCdPcGVuQUkgZmlsZSBJRCcpIH0pKVxuICAgICAgICAuZGVzY3JpYmUoJ0VpdGhlciBiYXNlNjQgZW5jb2RlZCBpbWFnZSBkYXRhLCBhIGRhdGEgVVJMLCBvciBhbiBvYmplY3Qgd2l0aCBhIGZpbGUgSUQuJylcbiAgICAgICAgLm9wdGlvbmFsKCksXG4gICAgLyoqXG4gICAgICogQ29udHJvbHMgdGhlIGxldmVsIG9mIGRldGFpbCByZXF1ZXN0ZWQgZm9yIGltYWdlIHVuZGVyc3RhbmRpbmcgdGFza3MuXG4gICAgICogRnV0dXJlIG1vZGVscyBtYXkgYWRkIG5ldyB2YWx1ZXMsIHRoZXJlZm9yZSB0aGlzIGFjY2VwdHMgYW55IHN0cmluZy5cbiAgICAgKi9cbiAgICBkZXRhaWw6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IElucHV0RmlsZSA9IFNoYXJlZEJhc2UuZXh0ZW5kKHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ2lucHV0X2ZpbGUnKSxcbiAgICAvKipcbiAgICAgKiBUaGUgZmlsZSBpbnB1dCB0byB0aGUgbW9kZWwuIENvdWxkIGJlIHJhdyBkYXRhLCBhIFVSTCwgb3IgYW4gT3BlbkFJIGZpbGUgSUQuXG4gICAgICovXG4gICAgZmlsZTogelxuICAgICAgICAvLyAxLiBmaWxlIGRhdGFcbiAgICAgICAgLnN0cmluZygpXG4gICAgICAgIC5kZXNjcmliZSgnRWl0aGVyIGJhc2U2NCBlbmNvZGVkIGZpbGUgZGF0YSBvciBhIHB1YmxpY2x5IGFjY2Vzc2libGUgZmlsZSBVUkwnKVxuICAgICAgICAvLyAyLiBmaWxlIElEXG4gICAgICAgIC5vcih6Lm9iamVjdCh7IGlkOiB6LnN0cmluZygpLmRlc2NyaWJlKCdPcGVuQUkgZmlsZSBJRCcpIH0pKVxuICAgICAgICAvLyAzLiBwdWJsaWNseSBhY2Nlc3NpYmxlIGZpbGUgVVJMXG4gICAgICAgIC5vcih6Lm9iamVjdCh7IHVybDogei5zdHJpbmcoKS5kZXNjcmliZSgnUHVibGljbHkgYWNjZXNzaWJsZSBmaWxlIFVSTCcpIH0pKVxuICAgICAgICAuZGVzY3JpYmUoJ0NvbnRlbnRzIG9mIHRoZSBmaWxlIG9yIGFuIG9iamVjdCB3aXRoIGEgZmlsZSBJRC4nKVxuICAgICAgICAub3B0aW9uYWwoKSxcbiAgICAvKipcbiAgICAgKiBPcHRpb25hbCBmaWxlbmFtZSBtZXRhZGF0YSB3aGVuIHVwbG9hZGluZyBmaWxlIGRhdGEgaW5saW5lLlxuICAgICAqL1xuICAgIGZpbGVuYW1lOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG59KTtcbmV4cG9ydCBjb25zdCBBdWRpb0NvbnRlbnQgPSBTaGFyZWRCYXNlLmV4dGVuZCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdhdWRpbycpLFxuICAgIC8qKlxuICAgICAqIFRoZSBhdWRpbyBpbnB1dCB0byB0aGUgbW9kZWwuIENvdWxkIGJlIGJhc2U2NCBlbmNvZGVkIGF1ZGlvIGRhdGEgb3IgYW4gb2JqZWN0IHdpdGggYSBmaWxlIElELlxuICAgICAqL1xuICAgIGF1ZGlvOiB6XG4gICAgICAgIC5zdHJpbmcoKVxuICAgICAgICAub3Ioei5vYmplY3Qoe1xuICAgICAgICBpZDogei5zdHJpbmcoKSxcbiAgICB9KSlcbiAgICAgICAgLmRlc2NyaWJlKCdCYXNlNjQgZW5jb2RlZCBhdWRpbyBkYXRhIG9yIGZpbGUgaWQnKSxcbiAgICAvKipcbiAgICAgKiBUaGUgZm9ybWF0IG9mIHRoZSBhdWRpby5cbiAgICAgKi9cbiAgICBmb3JtYXQ6IHouc3RyaW5nKCkubnVsbGFibGUoKS5vcHRpb25hbCgpLFxuICAgIC8qKlxuICAgICAqIFRoZSB0cmFuc2NyaXB0IG9mIHRoZSBhdWRpby5cbiAgICAgKi9cbiAgICB0cmFuc2NyaXB0OiB6LnN0cmluZygpLm51bGxhYmxlKCkub3B0aW9uYWwoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IEltYWdlQ29udGVudCA9IFNoYXJlZEJhc2UuZXh0ZW5kKHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ2ltYWdlJyksXG4gICAgLyoqXG4gICAgICogVGhlIGltYWdlIGlucHV0IHRvIHRoZSBtb2RlbC4gQ291bGQgYmUgYmFzZTY0IGVuY29kZWQgaW1hZ2UgZGF0YSBvciBhbiBvYmplY3Qgd2l0aCBhIGZpbGUgSUQuXG4gICAgICovXG4gICAgaW1hZ2U6IHouc3RyaW5nKCkuZGVzY3JpYmUoJ0Jhc2U2NCBlbmNvZGVkIGltYWdlIGRhdGEnKSxcbn0pO1xuZXhwb3J0IGNvbnN0IFRvb2xPdXRwdXRUZXh0ID0gU2hhcmVkQmFzZS5leHRlbmQoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgndGV4dCcpLFxuICAgIC8qKlxuICAgICAqIFRoZSB0ZXh0IG91dHB1dCBmcm9tIHRoZSBtb2RlbC5cbiAgICAgKi9cbiAgICB0ZXh0OiB6LnN0cmluZygpLFxufSk7XG5jb25zdCBJbWFnZURhdGFPYmplY3RTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgZGF0YTogelxuICAgICAgICAudW5pb24oW3ouc3RyaW5nKCksIHouaW5zdGFuY2VvZihVaW50OEFycmF5KV0pXG4gICAgICAgIC5kZXNjcmliZSgnQmFzZTY0IGltYWdlIGRhdGEsIG9yIHJhdyBieXRlcyB0aGF0IHdpbGwgYmUgYmFzZTY0IGVuY29kZWQgYXV0b21hdGljYWxseS4nKSxcbiAgICBtZWRpYVR5cGU6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbn0pO1xuY29uc3QgSW1hZ2VVcmxPYmplY3RTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdXJsOiB6XG4gICAgICAgIC5zdHJpbmcoKVxuICAgICAgICAuZGVzY3JpYmUoJ1B1YmxpY2x5IGFjY2Vzc2libGUgVVJMIHBvaW50aW5nIHRvIHRoZSBpbWFnZSBjb250ZW50JyksXG59KTtcbmNvbnN0IEltYWdlRmlsZUlkT2JqZWN0U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIGZpbGVJZDogelxuICAgICAgICAuc3RyaW5nKClcbiAgICAgICAgLmRlc2NyaWJlKCdPcGVuQUkgZmlsZSBJRCByZWZlcmVuY2luZyB1cGxvYWRlZCBpbWFnZSBjb250ZW50JyksXG59KTtcbmNvbnN0IEltYWdlT2JqZWN0U2NoZW1hID0gelxuICAgIC51bmlvbihbSW1hZ2VEYXRhT2JqZWN0U2NoZW1hLCBJbWFnZVVybE9iamVjdFNjaGVtYSwgSW1hZ2VGaWxlSWRPYmplY3RTY2hlbWFdKVxuICAgIC5kZXNjcmliZSgnSW5saW5lIGltYWdlIGRhdGEgb3IgcmVmZXJlbmNlcyB0byB1cGxvYWRlZCBjb250ZW50LicpO1xuY29uc3QgRmlsZURhdGFPYmplY3RTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgZGF0YTogelxuICAgICAgICAudW5pb24oW3ouc3RyaW5nKCksIHouaW5zdGFuY2VvZihVaW50OEFycmF5KV0pXG4gICAgICAgIC5kZXNjcmliZSgnQmFzZTY0IGVuY29kZWQgZmlsZSBkYXRhLCBvciByYXcgYnl0ZXMgdGhhdCB3aWxsIGJlIGVuY29kZWQgYXV0b21hdGljYWxseS4nKSxcbiAgICBtZWRpYVR5cGU6IHpcbiAgICAgICAgLnN0cmluZygpXG4gICAgICAgIC5kZXNjcmliZSgnSUFOQSBtZWRpYSB0eXBlIGRlc2NyaWJpbmcgdGhlIGZpbGUgY29udGVudHMnKSxcbiAgICBmaWxlbmFtZTogei5zdHJpbmcoKS5kZXNjcmliZSgnRmlsZW5hbWUgYXNzb2NpYXRlZCB3aXRoIHRoZSBpbmxpbmUgZGF0YScpLFxufSk7XG5jb25zdCBGaWxlVXJsT2JqZWN0U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHVybDogei5zdHJpbmcoKS5kZXNjcmliZSgnUHVibGljbHkgYWNjZXNzaWJsZSBVUkwgZm9yIHRoZSBmaWxlIGNvbnRlbnQnKSxcbiAgICBmaWxlbmFtZTogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxufSk7XG5jb25zdCBGaWxlSWRPYmplY3RTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgaWQ6IHouc3RyaW5nKCkuZGVzY3JpYmUoJ09wZW5BSSBmaWxlIElEIHJlZmVyZW5jaW5nIHVwbG9hZGVkIGNvbnRlbnQnKSxcbiAgICBmaWxlbmFtZTogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxufSk7XG5jb25zdCBGaWxlUmVmZXJlbmNlU2NoZW1hID0gelxuICAgIC51bmlvbihbXG4gICAgei5zdHJpbmcoKS5kZXNjcmliZSgnRXhpc3RpbmcgZGF0YSBVUkwgb3IgYmFzZTY0IHN0cmluZycpLFxuICAgIEZpbGVEYXRhT2JqZWN0U2NoZW1hLFxuICAgIEZpbGVVcmxPYmplY3RTY2hlbWEsXG4gICAgRmlsZUlkT2JqZWN0U2NoZW1hLFxuXSlcbiAgICAuZGVzY3JpYmUoJ0lubGluZSBkYXRhICh3aXRoIG1ldGFkYXRhKSBvciByZWZlcmVuY2VzIHBvaW50aW5nIHRvIGZpbGUgY29udGVudHMuJyk7XG5jb25zdCB6U3RyaW5nV2l0aEhpbnRzID0gKC4uLl9oaW50cykgPT4gei5zdHJpbmcoKTtcbmV4cG9ydCBjb25zdCBUb29sT3V0cHV0SW1hZ2UgPSBTaGFyZWRCYXNlLmV4dGVuZCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdpbWFnZScpLFxuICAgIC8qKlxuICAgICAqIElubGluZSBpbWFnZSBjb250ZW50IG9yIGEgcmVmZXJlbmNlIHRvIGFuIHVwbG9hZGVkIGZpbGUuIEFjY2VwdHMgYSBVUkwvZGF0YSBVUkwgc3RyaW5nIG9yIGFuXG4gICAgICogb2JqZWN0IGRlc2NyaWJpbmcgdGhlIGRhdGEvdXJsL2ZpbGVJZCBzb3VyY2UuXG4gICAgICovXG4gICAgaW1hZ2U6IHouc3RyaW5nKCkub3IoSW1hZ2VPYmplY3RTY2hlbWEpLm9wdGlvbmFsKCksXG4gICAgLyoqXG4gICAgICogQ29udHJvbHMgdGhlIHJlcXVlc3RlZCBsZXZlbCBvZiBkZXRhaWwgZm9yIHZpc2lvbiBtb2RlbHMuXG4gICAgICogVXNlIGEgc3RyaW5nIHRvIGF2b2lkIGNvbnN0cmFpbmluZyBmdXR1cmUgbW9kZWwgY2FwYWJpbGl0aWVzLlxuICAgICAqL1xuICAgIGRldGFpbDogelN0cmluZ1dpdGhIaW50cygnbG93JywgJ2hpZ2gnLCAnYXV0bycpLm9wdGlvbmFsKCksXG59KTtcbmV4cG9ydCBjb25zdCBUb29sT3V0cHV0RmlsZUNvbnRlbnQgPSBTaGFyZWRCYXNlLmV4dGVuZCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdmaWxlJyksXG4gICAgLyoqXG4gICAgICogRmlsZSBvdXRwdXQgcmVmZXJlbmNlLiBQcm92aWRlIGVpdGhlciBhIHN0cmluZyAoZGF0YSBVUkwgLyBiYXNlNjQpLCBhIGRhdGEgb2JqZWN0IChyZXF1aXJlc1xuICAgICAqIG1lZGlhVHlwZSArIGZpbGVuYW1lKSwgb3IgYW4gb2JqZWN0IHBvaW50aW5nIHRvIGFuIHVwbG9hZGVkIGZpbGUvVVJMLlxuICAgICAqL1xuICAgIGZpbGU6IEZpbGVSZWZlcmVuY2VTY2hlbWEsXG59KTtcbmV4cG9ydCBjb25zdCBDb21wdXRlclRvb2xPdXRwdXQgPSBTaGFyZWRCYXNlLmV4dGVuZCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdjb21wdXRlcl9zY3JlZW5zaG90JyksXG4gICAgLyoqXG4gICAgICogQSBiYXNlNjQgZW5jb2RlZCBpbWFnZSBkYXRhIG9yIGEgVVJMIHJlcHJlc2VudGluZyB0aGUgc2NyZWVuc2hvdC5cbiAgICAgKi9cbiAgICBkYXRhOiB6LnN0cmluZygpLmRlc2NyaWJlKCdCYXNlNjQgZW5jb2RlZCBpbWFnZSBkYXRhIG9yIFVSTCcpLFxufSk7XG5leHBvcnQgY29uc3QgY29tcHV0ZXJBY3Rpb25zID0gei5kaXNjcmltaW5hdGVkVW5pb24oJ3R5cGUnLCBbXG4gICAgei5vYmplY3QoeyB0eXBlOiB6LmxpdGVyYWwoJ3NjcmVlbnNob3QnKSB9KSxcbiAgICB6Lm9iamVjdCh7XG4gICAgICAgIHR5cGU6IHoubGl0ZXJhbCgnY2xpY2snKSxcbiAgICAgICAgeDogei5udW1iZXIoKSxcbiAgICAgICAgeTogei5udW1iZXIoKSxcbiAgICAgICAgYnV0dG9uOiB6LmVudW0oWydsZWZ0JywgJ3JpZ2h0JywgJ3doZWVsJywgJ2JhY2snLCAnZm9yd2FyZCddKSxcbiAgICB9KSxcbiAgICB6Lm9iamVjdCh7XG4gICAgICAgIHR5cGU6IHoubGl0ZXJhbCgnZG91YmxlX2NsaWNrJyksXG4gICAgICAgIHg6IHoubnVtYmVyKCksXG4gICAgICAgIHk6IHoubnVtYmVyKCksXG4gICAgfSksXG4gICAgei5vYmplY3Qoe1xuICAgICAgICB0eXBlOiB6LmxpdGVyYWwoJ3Njcm9sbCcpLFxuICAgICAgICB4OiB6Lm51bWJlcigpLFxuICAgICAgICB5OiB6Lm51bWJlcigpLFxuICAgICAgICBzY3JvbGxfeDogei5udW1iZXIoKSxcbiAgICAgICAgc2Nyb2xsX3k6IHoubnVtYmVyKCksXG4gICAgfSksXG4gICAgei5vYmplY3Qoe1xuICAgICAgICB0eXBlOiB6LmxpdGVyYWwoJ3R5cGUnKSxcbiAgICAgICAgdGV4dDogei5zdHJpbmcoKSxcbiAgICB9KSxcbiAgICB6Lm9iamVjdCh7IHR5cGU6IHoubGl0ZXJhbCgnd2FpdCcpIH0pLFxuICAgIHoub2JqZWN0KHtcbiAgICAgICAgdHlwZTogei5saXRlcmFsKCdtb3ZlJyksXG4gICAgICAgIHg6IHoubnVtYmVyKCksXG4gICAgICAgIHk6IHoubnVtYmVyKCksXG4gICAgfSksXG4gICAgei5vYmplY3Qoe1xuICAgICAgICB0eXBlOiB6LmxpdGVyYWwoJ2tleXByZXNzJyksXG4gICAgICAgIGtleXM6IHouYXJyYXkoei5zdHJpbmcoKSksXG4gICAgfSksXG4gICAgei5vYmplY3Qoe1xuICAgICAgICB0eXBlOiB6LmxpdGVyYWwoJ2RyYWcnKSxcbiAgICAgICAgcGF0aDogei5hcnJheSh6Lm9iamVjdCh7IHg6IHoubnVtYmVyKCksIHk6IHoubnVtYmVyKCkgfSkpLFxuICAgIH0pLFxuXSk7XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBNZXNzYWdlIHR5cGVzXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5leHBvcnQgY29uc3QgQXNzaXN0YW50Q29udGVudCA9IHouZGlzY3JpbWluYXRlZFVuaW9uKCd0eXBlJywgW1xuICAgIE91dHB1dFRleHQsXG4gICAgUmVmdXNhbCxcbiAgICBBdWRpb0NvbnRlbnQsXG4gICAgSW1hZ2VDb250ZW50LFxuXSk7XG5jb25zdCBNZXNzYWdlQmFzZSA9IEl0ZW1CYXNlLmV4dGVuZCh7XG4gICAgLyoqXG4gICAgICogQW55IGl0ZW0gd2l0aG91dCBhIHR5cGUgaXMgdHJlYXRlZCBhcyBhIG1lc3NhZ2VcbiAgICAgKi9cbiAgICB0eXBlOiB6LmxpdGVyYWwoJ21lc3NhZ2UnKS5vcHRpb25hbCgpLFxufSk7XG5leHBvcnQgY29uc3QgQXNzaXN0YW50TWVzc2FnZUl0ZW0gPSBNZXNzYWdlQmFzZS5leHRlbmQoe1xuICAgIC8qKlxuICAgICAqIFJlcHJlc2VudGluZyBhIG1lc3NhZ2UgZnJvbSB0aGUgYXNzaXN0YW50IChpLmUuIHRoZSBtb2RlbClcbiAgICAgKi9cbiAgICByb2xlOiB6LmxpdGVyYWwoJ2Fzc2lzdGFudCcpLFxuICAgIC8qKlxuICAgICAqIFRoZSBzdGF0dXMgb2YgdGhlIG1lc3NhZ2UuXG4gICAgICovXG4gICAgc3RhdHVzOiB6LmVudW0oWydpbl9wcm9ncmVzcycsICdjb21wbGV0ZWQnLCAnaW5jb21wbGV0ZSddKSxcbiAgICAvKipcbiAgICAgKiBUaGUgY29udGVudCBvZiB0aGUgbWVzc2FnZS5cbiAgICAgKi9cbiAgICBjb250ZW50OiB6LmFycmF5KEFzc2lzdGFudENvbnRlbnQpLFxufSk7XG5leHBvcnQgY29uc3QgVXNlckNvbnRlbnQgPSB6LmRpc2NyaW1pbmF0ZWRVbmlvbigndHlwZScsIFtcbiAgICBJbnB1dFRleHQsXG4gICAgSW5wdXRJbWFnZSxcbiAgICBJbnB1dEZpbGUsXG4gICAgQXVkaW9Db250ZW50LFxuXSk7XG5leHBvcnQgY29uc3QgVXNlck1lc3NhZ2VJdGVtID0gTWVzc2FnZUJhc2UuZXh0ZW5kKHtcbiAgICAvLyB0eXBlOiB6LmxpdGVyYWwoJ21lc3NhZ2UnKSxcbiAgICAvKipcbiAgICAgKiBSZXByZXNlbnRpbmcgYSBtZXNzYWdlIGZyb20gdGhlIHVzZXJcbiAgICAgKi9cbiAgICByb2xlOiB6LmxpdGVyYWwoJ3VzZXInKSxcbiAgICAvKipcbiAgICAgKiBUaGUgY29udGVudCBvZiB0aGUgbWVzc2FnZS5cbiAgICAgKi9cbiAgICBjb250ZW50OiB6LmFycmF5KFVzZXJDb250ZW50KS5vcih6LnN0cmluZygpKSxcbn0pO1xuY29uc3QgU3lzdGVtTWVzc2FnZUl0ZW0gPSBNZXNzYWdlQmFzZS5leHRlbmQoe1xuICAgIC8vIHR5cGU6IHoubGl0ZXJhbCgnbWVzc2FnZScpLFxuICAgIC8qKlxuICAgICAqIFJlcHJlc2VudGluZyBhIHN5c3RlbSBtZXNzYWdlIHRvIHRoZSB1c2VyXG4gICAgICovXG4gICAgcm9sZTogei5saXRlcmFsKCdzeXN0ZW0nKSxcbiAgICAvKipcbiAgICAgKiBUaGUgY29udGVudCBvZiB0aGUgbWVzc2FnZS5cbiAgICAgKi9cbiAgICBjb250ZW50OiB6LnN0cmluZygpLFxufSk7XG5leHBvcnQgY29uc3QgTWVzc2FnZUl0ZW0gPSB6LmRpc2NyaW1pbmF0ZWRVbmlvbigncm9sZScsIFtcbiAgICBTeXN0ZW1NZXNzYWdlSXRlbSxcbiAgICBBc3Npc3RhbnRNZXNzYWdlSXRlbSxcbiAgICBVc2VyTWVzc2FnZUl0ZW0sXG5dKTtcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIFRvb2wgY2FsbCB0eXBlc1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuZXhwb3J0IGNvbnN0IEhvc3RlZFRvb2xDYWxsSXRlbSA9IEl0ZW1CYXNlLmV4dGVuZCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdob3N0ZWRfdG9vbF9jYWxsJyksXG4gICAgLyoqXG4gICAgICogVGhlIG5hbWUgb2YgdGhlIGhvc3RlZCB0b29sLiBGb3IgZXhhbXBsZSBgd2ViX3NlYXJjaF9jYWxsYCBvciBgZmlsZV9zZWFyY2hfY2FsbGBcbiAgICAgKi9cbiAgICBuYW1lOiB6LnN0cmluZygpLmRlc2NyaWJlKCdUaGUgbmFtZSBvZiB0aGUgaG9zdGVkIHRvb2wnKSxcbiAgICAvKipcbiAgICAgKiBUaGUgYXJndW1lbnRzIG9mIHRoZSBob3N0ZWQgdG9vbCBjYWxsLlxuICAgICAqL1xuICAgIGFyZ3VtZW50czogelxuICAgICAgICAuc3RyaW5nKClcbiAgICAgICAgLmRlc2NyaWJlKCdUaGUgYXJndW1lbnRzIG9mIHRoZSBob3N0ZWQgdG9vbCBjYWxsJylcbiAgICAgICAgLm9wdGlvbmFsKCksXG4gICAgLyoqXG4gICAgICogVGhlIHN0YXR1cyBvZiB0aGUgdG9vbCBjYWxsLlxuICAgICAqL1xuICAgIHN0YXR1czogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgIC8qKlxuICAgICAqIFRoZSBwcmltYXJ5IG91dHB1dCBvZiB0aGUgdG9vbCBjYWxsLiBBZGRpdGlvbmFsIG91dHB1dCBtaWdodCBiZSBpbiB0aGUgYHByb3ZpZGVyRGF0YWAgZmllbGQuXG4gICAgICovXG4gICAgb3V0cHV0OiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG59KTtcbmV4cG9ydCBjb25zdCBGdW5jdGlvbkNhbGxJdGVtID0gSXRlbUJhc2UuZXh0ZW5kKHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ2Z1bmN0aW9uX2NhbGwnKSxcbiAgICAvKipcbiAgICAgKiBUaGUgSUQgb2YgdGhlIHRvb2wgY2FsbC4gUmVxdWlyZWQgdG8gbWF0Y2ggdXAgdGhlIHJlc3BlY3RpdmUgdG9vbCBjYWxsIHJlc3VsdC5cbiAgICAgKi9cbiAgICBjYWxsSWQ6IHouc3RyaW5nKCkuZGVzY3JpYmUoJ1RoZSBJRCBvZiB0aGUgdG9vbCBjYWxsJyksXG4gICAgLyoqXG4gICAgICogVGhlIG5hbWUgb2YgdGhlIGZ1bmN0aW9uLlxuICAgICAqL1xuICAgIG5hbWU6IHouc3RyaW5nKCkuZGVzY3JpYmUoJ1RoZSBuYW1lIG9mIHRoZSBmdW5jdGlvbicpLFxuICAgIC8qKlxuICAgICAqIFRoZSBzdGF0dXMgb2YgdGhlIGZ1bmN0aW9uIGNhbGwuXG4gICAgICovXG4gICAgc3RhdHVzOiB6LmVudW0oWydpbl9wcm9ncmVzcycsICdjb21wbGV0ZWQnLCAnaW5jb21wbGV0ZSddKS5vcHRpb25hbCgpLFxuICAgIC8qKlxuICAgICAqIFRoZSBhcmd1bWVudHMgb2YgdGhlIGZ1bmN0aW9uIGNhbGwuXG4gICAgICovXG4gICAgYXJndW1lbnRzOiB6LnN0cmluZygpLFxufSk7XG5leHBvcnQgY29uc3QgVG9vbENhbGxPdXRwdXRDb250ZW50ID0gei5kaXNjcmltaW5hdGVkVW5pb24oJ3R5cGUnLCBbXG4gICAgVG9vbE91dHB1dFRleHQsXG4gICAgVG9vbE91dHB1dEltYWdlLFxuICAgIFRvb2xPdXRwdXRGaWxlQ29udGVudCxcbl0pO1xuZXhwb3J0IGNvbnN0IFRvb2xDYWxsU3RydWN0dXJlZE91dHB1dCA9IHouZGlzY3JpbWluYXRlZFVuaW9uKCd0eXBlJywgW1xuICAgIElucHV0VGV4dCxcbiAgICBJbnB1dEltYWdlLFxuICAgIElucHV0RmlsZSxcbl0pO1xuZXhwb3J0IGNvbnN0IEZ1bmN0aW9uQ2FsbFJlc3VsdEl0ZW0gPSBJdGVtQmFzZS5leHRlbmQoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnZnVuY3Rpb25fY2FsbF9yZXN1bHQnKSxcbiAgICAvKipcbiAgICAgKiBUaGUgbmFtZSBvZiB0aGUgdG9vbCB0aGF0IHdhcyBjYWxsZWRcbiAgICAgKi9cbiAgICBuYW1lOiB6LnN0cmluZygpLmRlc2NyaWJlKCdUaGUgbmFtZSBvZiB0aGUgdG9vbCcpLFxuICAgIC8qKlxuICAgICAqIFRoZSBJRCBvZiB0aGUgdG9vbCBjYWxsLiBSZXF1aXJlZCB0byBtYXRjaCB1cCB0aGUgcmVzcGVjdGl2ZSB0b29sIGNhbGwgcmVzdWx0LlxuICAgICAqL1xuICAgIGNhbGxJZDogei5zdHJpbmcoKS5kZXNjcmliZSgnVGhlIElEIG9mIHRoZSB0b29sIGNhbGwnKSxcbiAgICAvKipcbiAgICAgKiBUaGUgc3RhdHVzIG9mIHRoZSB0b29sIGNhbGwuXG4gICAgICovXG4gICAgc3RhdHVzOiB6LmVudW0oWydpbl9wcm9ncmVzcycsICdjb21wbGV0ZWQnLCAnaW5jb21wbGV0ZSddKSxcbiAgICAvKipcbiAgICAgKiBUaGUgb3V0cHV0IG9mIHRoZSB0b29sIGNhbGwuXG4gICAgICovXG4gICAgb3V0cHV0OiB6XG4gICAgICAgIC51bmlvbihbXG4gICAgICAgIHouc3RyaW5nKCksXG4gICAgICAgIFRvb2xDYWxsT3V0cHV0Q29udGVudCxcbiAgICAgICAgei5hcnJheShUb29sQ2FsbFN0cnVjdHVyZWRPdXRwdXQpLFxuICAgIF0pXG4gICAgICAgIC5kZXNjcmliZSgnT3V0cHV0IHJldHVybmVkIGJ5IHRoZSB0b29sIGNhbGwuIFN1cHBvcnRzIHBsYWluIHN0cmluZ3MsIGxlZ2FjeSBUb29sT3V0cHV0IGl0ZW1zLCBvciBzdHJ1Y3R1cmVkIGlucHV0XyogaXRlbXMuJyksXG59KTtcbmV4cG9ydCBjb25zdCBDb21wdXRlclVzZUNhbGxJdGVtID0gSXRlbUJhc2UuZXh0ZW5kKHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ2NvbXB1dGVyX2NhbGwnKSxcbiAgICAvKipcbiAgICAgKiBUaGUgSUQgb2YgdGhlIGNvbXB1dGVyIGNhbGwuIFJlcXVpcmVkIHRvIG1hdGNoIHVwIHRoZSByZXNwZWN0aXZlIGNvbXB1dGVyIGNhbGwgcmVzdWx0LlxuICAgICAqL1xuICAgIGNhbGxJZDogei5zdHJpbmcoKS5kZXNjcmliZSgnVGhlIElEIG9mIHRoZSBjb21wdXRlciBjYWxsJyksXG4gICAgLyoqXG4gICAgICogVGhlIHN0YXR1cyBvZiB0aGUgY29tcHV0ZXIgY2FsbC5cbiAgICAgKi9cbiAgICBzdGF0dXM6IHouZW51bShbJ2luX3Byb2dyZXNzJywgJ2NvbXBsZXRlZCcsICdpbmNvbXBsZXRlJ10pLFxuICAgIC8qKlxuICAgICAqIFRoZSBhY3Rpb24gdG8gYmUgcGVyZm9ybWVkIGJ5IHRoZSBjb21wdXRlci5cbiAgICAgKi9cbiAgICBhY3Rpb246IGNvbXB1dGVyQWN0aW9ucyxcbn0pO1xuZXhwb3J0IGNvbnN0IENvbXB1dGVyQ2FsbFJlc3VsdEl0ZW0gPSBJdGVtQmFzZS5leHRlbmQoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnY29tcHV0ZXJfY2FsbF9yZXN1bHQnKSxcbiAgICAvKipcbiAgICAgKiBUaGUgSUQgb2YgdGhlIGNvbXB1dGVyIGNhbGwuIFJlcXVpcmVkIHRvIG1hdGNoIHVwIHRoZSByZXNwZWN0aXZlIGNvbXB1dGVyIGNhbGwgcmVzdWx0LlxuICAgICAqL1xuICAgIGNhbGxJZDogei5zdHJpbmcoKS5kZXNjcmliZSgnVGhlIElEIG9mIHRoZSBjb21wdXRlciBjYWxsJyksXG4gICAgLyoqXG4gICAgICogVGhlIG91dHB1dCBvZiB0aGUgY29tcHV0ZXIgY2FsbC5cbiAgICAgKi9cbiAgICBvdXRwdXQ6IENvbXB1dGVyVG9vbE91dHB1dCxcbn0pO1xuZXhwb3J0IGNvbnN0IFNoZWxsQWN0aW9uID0gei5vYmplY3Qoe1xuICAgIGNvbW1hbmRzOiB6LmFycmF5KHouc3RyaW5nKCkpLFxuICAgIHRpbWVvdXRNczogei5udW1iZXIoKS5pbnQoKS5taW4oMCkub3B0aW9uYWwoKSxcbiAgICBtYXhPdXRwdXRMZW5ndGg6IHoubnVtYmVyKCkuaW50KCkubWluKDApLm9wdGlvbmFsKCksXG59KTtcbmV4cG9ydCBjb25zdCBTaGVsbENhbGxJdGVtID0gSXRlbUJhc2UuZXh0ZW5kKHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ3NoZWxsX2NhbGwnKSxcbiAgICBjYWxsSWQ6IHouc3RyaW5nKCksXG4gICAgc3RhdHVzOiB6LmVudW0oWydpbl9wcm9ncmVzcycsICdjb21wbGV0ZWQnLCAnaW5jb21wbGV0ZSddKS5vcHRpb25hbCgpLFxuICAgIGFjdGlvbjogU2hlbGxBY3Rpb24sXG59KTtcbmV4cG9ydCBjb25zdCBTaGVsbENhbGxPdXRjb21lID0gei5kaXNjcmltaW5hdGVkVW5pb24oJ3R5cGUnLCBbXG4gICAgei5vYmplY3QoeyB0eXBlOiB6LmxpdGVyYWwoJ3RpbWVvdXQnKSB9KSxcbiAgICB6Lm9iamVjdCh7XG4gICAgICAgIHR5cGU6IHoubGl0ZXJhbCgnZXhpdCcpLFxuICAgICAgICBleGl0Q29kZTogei5udW1iZXIoKS5pbnQoKS5udWxsYWJsZSgpLFxuICAgIH0pLFxuXSk7XG5leHBvcnQgY29uc3QgU2hlbGxDYWxsT3V0cHV0Q29udGVudCA9IHpcbiAgICAub2JqZWN0KHtcbiAgICBzdGRvdXQ6IHouc3RyaW5nKCksXG4gICAgc3RkZXJyOiB6LnN0cmluZygpLFxuICAgIG91dGNvbWU6IFNoZWxsQ2FsbE91dGNvbWUsXG59KVxuICAgIC5wYXNzdGhyb3VnaCgpO1xuZXhwb3J0IGNvbnN0IFNoZWxsQ2FsbFJlc3VsdEl0ZW0gPSBJdGVtQmFzZS5leHRlbmQoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnc2hlbGxfY2FsbF9vdXRwdXQnKSxcbiAgICBjYWxsSWQ6IHouc3RyaW5nKCksXG4gICAgbWF4T3V0cHV0TGVuZ3RoOiB6Lm51bWJlcigpLm9wdGlvbmFsKCksXG4gICAgb3V0cHV0OiB6LmFycmF5KFNoZWxsQ2FsbE91dHB1dENvbnRlbnQpLFxufSk7XG5leHBvcnQgY29uc3QgQXBwbHlQYXRjaE9wZXJhdGlvbkNyZWF0ZUZpbGUgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdjcmVhdGVfZmlsZScpLFxuICAgIHBhdGg6IHouc3RyaW5nKCksXG4gICAgZGlmZjogei5zdHJpbmcoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IEFwcGx5UGF0Y2hPcGVyYXRpb25VcGRhdGVGaWxlID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgndXBkYXRlX2ZpbGUnKSxcbiAgICBwYXRoOiB6LnN0cmluZygpLFxuICAgIGRpZmY6IHouc3RyaW5nKCksXG59KTtcbmV4cG9ydCBjb25zdCBBcHBseVBhdGNoT3BlcmF0aW9uRGVsZXRlRmlsZSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ2RlbGV0ZV9maWxlJyksXG4gICAgcGF0aDogei5zdHJpbmcoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IEFwcGx5UGF0Y2hPcGVyYXRpb24gPSB6LmRpc2NyaW1pbmF0ZWRVbmlvbigndHlwZScsIFtcbiAgICBBcHBseVBhdGNoT3BlcmF0aW9uQ3JlYXRlRmlsZSxcbiAgICBBcHBseVBhdGNoT3BlcmF0aW9uVXBkYXRlRmlsZSxcbiAgICBBcHBseVBhdGNoT3BlcmF0aW9uRGVsZXRlRmlsZSxcbl0pO1xuZXhwb3J0IGNvbnN0IEFwcGx5UGF0Y2hDYWxsSXRlbSA9IEl0ZW1CYXNlLmV4dGVuZCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdhcHBseV9wYXRjaF9jYWxsJyksXG4gICAgY2FsbElkOiB6LnN0cmluZygpLFxuICAgIHN0YXR1czogei5lbnVtKFsnaW5fcHJvZ3Jlc3MnLCAnY29tcGxldGVkJ10pLFxuICAgIG9wZXJhdGlvbjogQXBwbHlQYXRjaE9wZXJhdGlvbixcbn0pO1xuZXhwb3J0IGNvbnN0IEFwcGx5UGF0Y2hDYWxsUmVzdWx0SXRlbSA9IEl0ZW1CYXNlLmV4dGVuZCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdhcHBseV9wYXRjaF9jYWxsX291dHB1dCcpLFxuICAgIGNhbGxJZDogei5zdHJpbmcoKSxcbiAgICBzdGF0dXM6IHouZW51bShbJ2NvbXBsZXRlZCcsICdmYWlsZWQnXSksXG4gICAgb3V0cHV0OiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG59KTtcbmV4cG9ydCBjb25zdCBUb29sQ2FsbEl0ZW0gPSB6LmRpc2NyaW1pbmF0ZWRVbmlvbigndHlwZScsIFtcbiAgICBDb21wdXRlclVzZUNhbGxJdGVtLFxuICAgIFNoZWxsQ2FsbEl0ZW0sXG4gICAgQXBwbHlQYXRjaENhbGxJdGVtLFxuICAgIEZ1bmN0aW9uQ2FsbEl0ZW0sXG4gICAgSG9zdGVkVG9vbENhbGxJdGVtLFxuXSk7XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBTcGVjaWFsIGl0ZW0gdHlwZXNcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbmV4cG9ydCBjb25zdCBSZWFzb25pbmdJdGVtID0gU2hhcmVkQmFzZS5leHRlbmQoe1xuICAgIGlkOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgdHlwZTogei5saXRlcmFsKCdyZWFzb25pbmcnKSxcbiAgICAvKipcbiAgICAgKiBUaGUgdXNlciBmYWNpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhlIHJlYXNvbmluZy4gQWRkaXRpb25hbCBpbmZvcm1hdGlvbiBtaWdodCBiZSBpbiB0aGUgYHByb3ZpZGVyRGF0YWAgZmllbGQuXG4gICAgICovXG4gICAgY29udGVudDogei5hcnJheShJbnB1dFRleHQpLFxuICAgIC8qKlxuICAgICAqIFRoZSByYXcgcmVhc29uaW5nIHRleHQgZnJvbSB0aGUgbW9kZWwuXG4gICAgICovXG4gICAgcmF3Q29udGVudDogei5hcnJheShSZWFzb25pbmdUZXh0KS5vcHRpb25hbCgpLFxufSk7XG5leHBvcnQgY29uc3QgQ29tcGFjdGlvbkl0ZW0gPSBJdGVtQmFzZS5leHRlbmQoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnY29tcGFjdGlvbicpLFxuICAgIC8qKlxuICAgICAqIEVuY3J5cHRlZCBwYXlsb2FkIHJldHVybmVkIGJ5IHRoZSBjb21wYWN0aW9uIGVuZHBvaW50LlxuICAgICAqL1xuICAgIGVuY3J5cHRlZF9jb250ZW50OiB6LnN0cmluZygpLFxuICAgIC8qKlxuICAgICAqIElkZW50aWZpZXIgZm9yIHRoZSBjb21wYWN0aW9uIGl0ZW0uXG4gICAgICovXG4gICAgaWQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICAvKipcbiAgICAgKiBJZGVudGlmaWVyIGZvciB0aGUgZ2VuZXJhdG9yIG9mIHRoaXMgY29tcGFjdGlvbiBpdGVtLlxuICAgICAqL1xuICAgIGNyZWF0ZWRfYnk6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbn0pO1xuLyoqXG4gKiBUaGlzIGlzIGEgY2F0Y2ggYWxsIGZvciBpdGVtcyB0aGF0IGFyZSBub3QgcGFydCBvZiB0aGUgcHJvdG9jb2wuXG4gKlxuICogRm9yIGV4YW1wbGUsIGEgbW9kZWwgbWlnaHQgcmV0dXJuIGFuIGl0ZW0gdGhhdCBpcyBub3QgcGFydCBvZiB0aGUgcHJvdG9jb2wgdXNpbmcgdGhpcyB0eXBlLlxuICpcbiAqIEluIHRoYXQgY2FzZSBldmVyeXRoaW5nIHJldHVybmVkIGZyb20gdGhlIG1vZGVsIHNob3VsZCBiZSBwYXNzZWQgaW4gdGhlIGBwcm92aWRlckRhdGFgIGZpZWxkLlxuICpcbiAqIFRoaXMgZW5hYmxlcyBuZXcgZmVhdHVyZXMgdG8gYmUgYWRkZWQgdG8gYmUgYWRkZWQgYnkgYSBtb2RlbCBwcm92aWRlciB3aXRob3V0IGJyZWFraW5nIHRoZSBwcm90b2NvbC5cbiAqL1xuZXhwb3J0IGNvbnN0IFVua25vd25JdGVtID0gSXRlbUJhc2UuZXh0ZW5kKHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ3Vua25vd24nKSxcbn0pO1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gSm9pbmVkIGl0ZW0gdHlwZXNcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbmV4cG9ydCBjb25zdCBPdXRwdXRNb2RlbEl0ZW0gPSB6LmRpc2NyaW1pbmF0ZWRVbmlvbigndHlwZScsIFtcbiAgICBBc3Npc3RhbnRNZXNzYWdlSXRlbSxcbiAgICBIb3N0ZWRUb29sQ2FsbEl0ZW0sXG4gICAgRnVuY3Rpb25DYWxsSXRlbSxcbiAgICBDb21wdXRlclVzZUNhbGxJdGVtLFxuICAgIFNoZWxsQ2FsbEl0ZW0sXG4gICAgQXBwbHlQYXRjaENhbGxJdGVtLFxuICAgIEZ1bmN0aW9uQ2FsbFJlc3VsdEl0ZW0sXG4gICAgU2hlbGxDYWxsUmVzdWx0SXRlbSxcbiAgICBBcHBseVBhdGNoQ2FsbFJlc3VsdEl0ZW0sXG4gICAgUmVhc29uaW5nSXRlbSxcbiAgICBDb21wYWN0aW9uSXRlbSxcbiAgICBVbmtub3duSXRlbSxcbl0pO1xuZXhwb3J0IGNvbnN0IE1vZGVsSXRlbSA9IHoudW5pb24oW1xuICAgIFVzZXJNZXNzYWdlSXRlbSxcbiAgICBBc3Npc3RhbnRNZXNzYWdlSXRlbSxcbiAgICBTeXN0ZW1NZXNzYWdlSXRlbSxcbiAgICBIb3N0ZWRUb29sQ2FsbEl0ZW0sXG4gICAgRnVuY3Rpb25DYWxsSXRlbSxcbiAgICBDb21wdXRlclVzZUNhbGxJdGVtLFxuICAgIFNoZWxsQ2FsbEl0ZW0sXG4gICAgQXBwbHlQYXRjaENhbGxJdGVtLFxuICAgIEZ1bmN0aW9uQ2FsbFJlc3VsdEl0ZW0sXG4gICAgQ29tcHV0ZXJDYWxsUmVzdWx0SXRlbSxcbiAgICBTaGVsbENhbGxSZXN1bHRJdGVtLFxuICAgIEFwcGx5UGF0Y2hDYWxsUmVzdWx0SXRlbSxcbiAgICBSZWFzb25pbmdJdGVtLFxuICAgIENvbXBhY3Rpb25JdGVtLFxuICAgIFVua25vd25JdGVtLFxuXSk7XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBNZXRhIGRhdGEgdHlwZXNcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbmV4cG9ydCBjb25zdCBSZXF1ZXN0VXNhZ2VEYXRhID0gei5vYmplY3Qoe1xuICAgIGlucHV0VG9rZW5zOiB6Lm51bWJlcigpLFxuICAgIG91dHB1dFRva2Vuczogei5udW1iZXIoKSxcbiAgICB0b3RhbFRva2Vuczogei5udW1iZXIoKSxcbiAgICBpbnB1dFRva2Vuc0RldGFpbHM6IHoucmVjb3JkKHouc3RyaW5nKCksIHoubnVtYmVyKCkpLm9wdGlvbmFsKCksXG4gICAgb3V0cHV0VG9rZW5zRGV0YWlsczogei5yZWNvcmQoei5zdHJpbmcoKSwgei5udW1iZXIoKSkub3B0aW9uYWwoKSxcbiAgICBlbmRwb2ludDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxufSk7XG5leHBvcnQgY29uc3QgVXNhZ2VEYXRhID0gei5vYmplY3Qoe1xuICAgIHJlcXVlc3RzOiB6Lm51bWJlcigpLm9wdGlvbmFsKCksXG4gICAgaW5wdXRUb2tlbnM6IHoubnVtYmVyKCksXG4gICAgb3V0cHV0VG9rZW5zOiB6Lm51bWJlcigpLFxuICAgIHRvdGFsVG9rZW5zOiB6Lm51bWJlcigpLFxuICAgIGlucHV0VG9rZW5zRGV0YWlsczogelxuICAgICAgICAudW5pb24oW1xuICAgICAgICB6LnJlY29yZCh6LnN0cmluZygpLCB6Lm51bWJlcigpKSxcbiAgICAgICAgei5hcnJheSh6LnJlY29yZCh6LnN0cmluZygpLCB6Lm51bWJlcigpKSksXG4gICAgXSlcbiAgICAgICAgLm9wdGlvbmFsKCksXG4gICAgb3V0cHV0VG9rZW5zRGV0YWlsczogelxuICAgICAgICAudW5pb24oW1xuICAgICAgICB6LnJlY29yZCh6LnN0cmluZygpLCB6Lm51bWJlcigpKSxcbiAgICAgICAgei5hcnJheSh6LnJlY29yZCh6LnN0cmluZygpLCB6Lm51bWJlcigpKSksXG4gICAgXSlcbiAgICAgICAgLm9wdGlvbmFsKCksXG4gICAgcmVxdWVzdFVzYWdlRW50cmllczogei5hcnJheShSZXF1ZXN0VXNhZ2VEYXRhKS5vcHRpb25hbCgpLFxufSk7XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBTdHJlYW0gZXZlbnQgdHlwZXNcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8qKlxuICogRXZlbnQgcmV0dXJuZWQgYnkgdGhlIG1vZGVsIHdoZW4gbmV3IG91dHB1dCB0ZXh0IGlzIGF2YWlsYWJsZSB0byBzdHJlYW0gdG8gdGhlIHVzZXIuXG4gKi9cbmV4cG9ydCBjb25zdCBTdHJlYW1FdmVudFRleHRTdHJlYW0gPSBTaGFyZWRCYXNlLmV4dGVuZCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdvdXRwdXRfdGV4dF9kZWx0YScpLFxuICAgIC8qKlxuICAgICAqIFRoZSBkZWx0YSB0ZXh0IHRoYXQgd2FzIHN0cmVhbWVkIGJ5IHRoZSBtb2RlbHRvIHRoZSB1c2VyLlxuICAgICAqL1xuICAgIGRlbHRhOiB6LnN0cmluZygpLFxufSk7XG4vKipcbiAqIEV2ZW50IHJldHVybmVkIGJ5IHRoZSBtb2RlbCB3aGVuIGEgbmV3IHJlc3BvbnNlIGlzIHN0YXJ0ZWQuXG4gKi9cbmV4cG9ydCBjb25zdCBTdHJlYW1FdmVudFJlc3BvbnNlU3RhcnRlZCA9IFNoYXJlZEJhc2UuZXh0ZW5kKHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ3Jlc3BvbnNlX3N0YXJ0ZWQnKSxcbn0pO1xuLyoqXG4gKiBFdmVudCByZXR1cm5lZCBieSB0aGUgbW9kZWwgd2hlbiBhIHJlc3BvbnNlIGlzIGNvbXBsZXRlZC5cbiAqL1xuZXhwb3J0IGNvbnN0IFN0cmVhbUV2ZW50UmVzcG9uc2VDb21wbGV0ZWQgPSBTaGFyZWRCYXNlLmV4dGVuZCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdyZXNwb25zZV9kb25lJyksXG4gICAgLyoqXG4gICAgICogVGhlIHJlc3BvbnNlIGZyb20gdGhlIG1vZGVsLlxuICAgICAqL1xuICAgIHJlc3BvbnNlOiBTaGFyZWRCYXNlLmV4dGVuZCh7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgSUQgb2YgdGhlIHJlc3BvbnNlLlxuICAgICAgICAgKi9cbiAgICAgICAgaWQ6IHouc3RyaW5nKCksXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgdXNhZ2UgZGF0YSBmb3IgdGhlIHJlc3BvbnNlLlxuICAgICAgICAgKi9cbiAgICAgICAgdXNhZ2U6IFVzYWdlRGF0YSxcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBvdXRwdXQgZnJvbSB0aGUgbW9kZWwuXG4gICAgICAgICAqL1xuICAgICAgICBvdXRwdXQ6IHouYXJyYXkoT3V0cHV0TW9kZWxJdGVtKSxcbiAgICB9KSxcbn0pO1xuLyoqXG4gKiBFdmVudCByZXR1cm5lZCBmb3IgZXZlcnkgaXRlbSB0aGF0IGdldHMgc3RyZWFtZWQgdG8gdGhlIG1vZGVsLiBVc2VkIHRvIGV4cG9zZSB0aGUgcmF3IGV2ZW50c1xuICogZnJvbSB0aGUgbW9kZWwuXG4gKi9cbmV4cG9ydCBjb25zdCBTdHJlYW1FdmVudEdlbmVyaWNJdGVtID0gU2hhcmVkQmFzZS5leHRlbmQoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnbW9kZWwnKSxcbiAgICBldmVudDogei5hbnkoKS5kZXNjcmliZSgnVGhlIGV2ZW50IGZyb20gdGhlIG1vZGVsJyksXG59KTtcbmV4cG9ydCBjb25zdCBTdHJlYW1FdmVudCA9IHouZGlzY3JpbWluYXRlZFVuaW9uKCd0eXBlJywgW1xuICAgIFN0cmVhbUV2ZW50VGV4dFN0cmVhbSxcbiAgICBTdHJlYW1FdmVudFJlc3BvbnNlQ29tcGxldGVkLFxuICAgIFN0cmVhbUV2ZW50UmVzcG9uc2VTdGFydGVkLFxuICAgIFN0cmVhbUV2ZW50R2VuZXJpY0l0ZW0sXG5dKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXByb3RvY29sLm1qcy5tYXAiLCJpbXBvcnQgeyBSZXF1ZXN0VXNhZ2VEYXRhLCBVc2FnZURhdGEgfSBmcm9tIFwiLi90eXBlcy9wcm90b2NvbC5tanNcIjtcbi8qKlxuICogVXNhZ2UgZGV0YWlscyBmb3IgYSBzaW5nbGUgQVBJIHJlcXVlc3QuXG4gKi9cbmV4cG9ydCBjbGFzcyBSZXF1ZXN0VXNhZ2Uge1xuICAgIC8qKlxuICAgICAqIFRoZSBudW1iZXIgb2YgaW5wdXQgdG9rZW5zIHVzZWQgZm9yIHRoaXMgcmVxdWVzdC5cbiAgICAgKi9cbiAgICBpbnB1dFRva2VucztcbiAgICAvKipcbiAgICAgKiBUaGUgbnVtYmVyIG9mIG91dHB1dCB0b2tlbnMgdXNlZCBmb3IgdGhpcyByZXF1ZXN0LlxuICAgICAqL1xuICAgIG91dHB1dFRva2VucztcbiAgICAvKipcbiAgICAgKiBUaGUgdG90YWwgbnVtYmVyIG9mIHRva2VucyBzZW50IGFuZCByZWNlaXZlZCBmb3IgdGhpcyByZXF1ZXN0LlxuICAgICAqL1xuICAgIHRvdGFsVG9rZW5zO1xuICAgIC8qKlxuICAgICAqIERldGFpbHMgYWJvdXQgdGhlIGlucHV0IHRva2VucyB1c2VkIGZvciB0aGlzIHJlcXVlc3QuXG4gICAgICovXG4gICAgaW5wdXRUb2tlbnNEZXRhaWxzO1xuICAgIC8qKlxuICAgICAqIERldGFpbHMgYWJvdXQgdGhlIG91dHB1dCB0b2tlbnMgdXNlZCBmb3IgdGhpcyByZXF1ZXN0LlxuICAgICAqL1xuICAgIG91dHB1dFRva2Vuc0RldGFpbHM7XG4gICAgLyoqXG4gICAgICogVGhlIGVuZHBvaW50IHRoYXQgcHJvZHVjZWQgdGhpcyB1c2FnZSBlbnRyeSAoZS5nLiwgcmVzcG9uc2VzLmNyZWF0ZSwgcmVzcG9uc2VzLmNvbXBhY3QpLlxuICAgICAqL1xuICAgIGVuZHBvaW50O1xuICAgIGNvbnN0cnVjdG9yKGlucHV0KSB7XG4gICAgICAgIHRoaXMuaW5wdXRUb2tlbnMgPSBpbnB1dD8uaW5wdXRUb2tlbnMgPz8gaW5wdXQ/LmlucHV0X3Rva2VucyA/PyAwO1xuICAgICAgICB0aGlzLm91dHB1dFRva2VucyA9IGlucHV0Py5vdXRwdXRUb2tlbnMgPz8gaW5wdXQ/Lm91dHB1dF90b2tlbnMgPz8gMDtcbiAgICAgICAgdGhpcy50b3RhbFRva2VucyA9XG4gICAgICAgICAgICBpbnB1dD8udG90YWxUb2tlbnMgPz9cbiAgICAgICAgICAgICAgICBpbnB1dD8udG90YWxfdG9rZW5zID8/XG4gICAgICAgICAgICAgICAgdGhpcy5pbnB1dFRva2VucyArIHRoaXMub3V0cHV0VG9rZW5zO1xuICAgICAgICBjb25zdCBpbnB1dFRva2Vuc0RldGFpbHMgPSBpbnB1dD8uaW5wdXRUb2tlbnNEZXRhaWxzID8/IGlucHV0Py5pbnB1dF90b2tlbnNfZGV0YWlscztcbiAgICAgICAgdGhpcy5pbnB1dFRva2Vuc0RldGFpbHMgPSBpbnB1dFRva2Vuc0RldGFpbHNcbiAgICAgICAgICAgID8gaW5wdXRUb2tlbnNEZXRhaWxzXG4gICAgICAgICAgICA6IHt9O1xuICAgICAgICBjb25zdCBvdXRwdXRUb2tlbnNEZXRhaWxzID0gaW5wdXQ/Lm91dHB1dFRva2Vuc0RldGFpbHMgPz8gaW5wdXQ/Lm91dHB1dF90b2tlbnNfZGV0YWlscztcbiAgICAgICAgdGhpcy5vdXRwdXRUb2tlbnNEZXRhaWxzID0gb3V0cHV0VG9rZW5zRGV0YWlsc1xuICAgICAgICAgICAgPyBvdXRwdXRUb2tlbnNEZXRhaWxzXG4gICAgICAgICAgICA6IHt9O1xuICAgICAgICBpZiAodHlwZW9mIGlucHV0Py5lbmRwb2ludCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIHRoaXMuZW5kcG9pbnQgPSBpbnB1dC5lbmRwb2ludDtcbiAgICAgICAgfVxuICAgIH1cbn1cbi8qKlxuICogVHJhY2tzIHRva2VuIHVzYWdlIGFuZCByZXF1ZXN0IGNvdW50cyBmb3IgYW4gYWdlbnQgcnVuLlxuICovXG5leHBvcnQgY2xhc3MgVXNhZ2Uge1xuICAgIC8qKlxuICAgICAqIFRoZSBudW1iZXIgb2YgcmVxdWVzdHMgbWFkZSB0byB0aGUgTExNIEFQSS5cbiAgICAgKi9cbiAgICByZXF1ZXN0cztcbiAgICAvKipcbiAgICAgKiBUaGUgbnVtYmVyIG9mIGlucHV0IHRva2VucyB1c2VkIGFjcm9zcyBhbGwgcmVxdWVzdHMuXG4gICAgICovXG4gICAgaW5wdXRUb2tlbnM7XG4gICAgLyoqXG4gICAgICogVGhlIG51bWJlciBvZiBvdXRwdXQgdG9rZW5zIHVzZWQgYWNyb3NzIGFsbCByZXF1ZXN0cy5cbiAgICAgKi9cbiAgICBvdXRwdXRUb2tlbnM7XG4gICAgLyoqXG4gICAgICogVGhlIHRvdGFsIG51bWJlciBvZiB0b2tlbnMgc2VudCBhbmQgcmVjZWl2ZWQsIGFjcm9zcyBhbGwgcmVxdWVzdHMuXG4gICAgICovXG4gICAgdG90YWxUb2tlbnM7XG4gICAgLyoqXG4gICAgICogRGV0YWlscyBhYm91dCB0aGUgaW5wdXQgdG9rZW5zIHVzZWQgYWNyb3NzIGFsbCByZXF1ZXN0cy5cbiAgICAgKi9cbiAgICBpbnB1dFRva2Vuc0RldGFpbHMgPSBbXTtcbiAgICAvKipcbiAgICAgKiBEZXRhaWxzIGFib3V0IHRoZSBvdXRwdXQgdG9rZW5zIHVzZWQgYWNyb3NzIGFsbCByZXF1ZXN0cy5cbiAgICAgKi9cbiAgICBvdXRwdXRUb2tlbnNEZXRhaWxzID0gW107XG4gICAgLyoqXG4gICAgICogTGlzdCBvZiBwZXItcmVxdWVzdCB1c2FnZSBlbnRyaWVzIGZvciBkZXRhaWxlZCBjb3N0IGNhbGN1bGF0aW9ucy5cbiAgICAgKi9cbiAgICByZXF1ZXN0VXNhZ2VFbnRyaWVzO1xuICAgIGNvbnN0cnVjdG9yKGlucHV0KSB7XG4gICAgICAgIGlmICh0eXBlb2YgaW5wdXQgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICB0aGlzLnJlcXVlc3RzID0gMDtcbiAgICAgICAgICAgIHRoaXMuaW5wdXRUb2tlbnMgPSAwO1xuICAgICAgICAgICAgdGhpcy5vdXRwdXRUb2tlbnMgPSAwO1xuICAgICAgICAgICAgdGhpcy50b3RhbFRva2VucyA9IDA7XG4gICAgICAgICAgICB0aGlzLmlucHV0VG9rZW5zRGV0YWlscyA9IFtdO1xuICAgICAgICAgICAgdGhpcy5vdXRwdXRUb2tlbnNEZXRhaWxzID0gW107XG4gICAgICAgICAgICB0aGlzLnJlcXVlc3RVc2FnZUVudHJpZXMgPSB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnJlcXVlc3RzID0gaW5wdXQ/LnJlcXVlc3RzID8/IDE7XG4gICAgICAgICAgICB0aGlzLmlucHV0VG9rZW5zID0gaW5wdXQ/LmlucHV0VG9rZW5zID8/IGlucHV0Py5pbnB1dF90b2tlbnMgPz8gMDtcbiAgICAgICAgICAgIHRoaXMub3V0cHV0VG9rZW5zID0gaW5wdXQ/Lm91dHB1dFRva2VucyA/PyBpbnB1dD8ub3V0cHV0X3Rva2VucyA/PyAwO1xuICAgICAgICAgICAgdGhpcy50b3RhbFRva2VucyA9XG4gICAgICAgICAgICAgICAgaW5wdXQ/LnRvdGFsVG9rZW5zID8/XG4gICAgICAgICAgICAgICAgICAgIGlucHV0Py50b3RhbF90b2tlbnMgPz9cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pbnB1dFRva2VucyArIHRoaXMub3V0cHV0VG9rZW5zO1xuICAgICAgICAgICAgY29uc3QgaW5wdXRUb2tlbnNEZXRhaWxzID0gaW5wdXQ/LmlucHV0VG9rZW5zRGV0YWlscyA/PyBpbnB1dD8uaW5wdXRfdG9rZW5zX2RldGFpbHM7XG4gICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShpbnB1dFRva2Vuc0RldGFpbHMpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5pbnB1dFRva2Vuc0RldGFpbHMgPSBpbnB1dFRva2Vuc0RldGFpbHM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLmlucHV0VG9rZW5zRGV0YWlscyA9IGlucHV0VG9rZW5zRGV0YWlsc1xuICAgICAgICAgICAgICAgICAgICA/IFtpbnB1dFRva2Vuc0RldGFpbHNdXG4gICAgICAgICAgICAgICAgICAgIDogW107XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBvdXRwdXRUb2tlbnNEZXRhaWxzID0gaW5wdXQ/Lm91dHB1dFRva2Vuc0RldGFpbHMgPz8gaW5wdXQ/Lm91dHB1dF90b2tlbnNfZGV0YWlscztcbiAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KG91dHB1dFRva2Vuc0RldGFpbHMpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5vdXRwdXRUb2tlbnNEZXRhaWxzID0gb3V0cHV0VG9rZW5zRGV0YWlscztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMub3V0cHV0VG9rZW5zRGV0YWlscyA9IG91dHB1dFRva2Vuc0RldGFpbHNcbiAgICAgICAgICAgICAgICAgICAgPyBbb3V0cHV0VG9rZW5zRGV0YWlsc11cbiAgICAgICAgICAgICAgICAgICAgOiBbXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHJlcXVlc3RVc2FnZUVudHJpZXMgPSBpbnB1dD8ucmVxdWVzdFVzYWdlRW50cmllcyA/PyBpbnB1dD8ucmVxdWVzdF91c2FnZV9lbnRyaWVzO1xuICAgICAgICAgICAgY29uc3Qgbm9ybWFsaXplZFJlcXVlc3RVc2FnZUVudHJpZXMgPSBBcnJheS5pc0FycmF5KHJlcXVlc3RVc2FnZUVudHJpZXMpXG4gICAgICAgICAgICAgICAgPyByZXF1ZXN0VXNhZ2VFbnRyaWVzLm1hcCgoZW50cnkpID0+IGVudHJ5IGluc3RhbmNlb2YgUmVxdWVzdFVzYWdlID8gZW50cnkgOiBuZXcgUmVxdWVzdFVzYWdlKGVudHJ5KSlcbiAgICAgICAgICAgICAgICA6IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIHRoaXMucmVxdWVzdFVzYWdlRW50cmllcyA9XG4gICAgICAgICAgICAgICAgbm9ybWFsaXplZFJlcXVlc3RVc2FnZUVudHJpZXMgJiZcbiAgICAgICAgICAgICAgICAgICAgbm9ybWFsaXplZFJlcXVlc3RVc2FnZUVudHJpZXMubGVuZ3RoID4gMFxuICAgICAgICAgICAgICAgICAgICA/IG5vcm1hbGl6ZWRSZXF1ZXN0VXNhZ2VFbnRyaWVzXG4gICAgICAgICAgICAgICAgICAgIDogdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFkZChuZXdVc2FnZSkge1xuICAgICAgICB0aGlzLnJlcXVlc3RzICs9IG5ld1VzYWdlLnJlcXVlc3RzID8/IDA7XG4gICAgICAgIHRoaXMuaW5wdXRUb2tlbnMgKz0gbmV3VXNhZ2UuaW5wdXRUb2tlbnMgPz8gMDtcbiAgICAgICAgdGhpcy5vdXRwdXRUb2tlbnMgKz0gbmV3VXNhZ2Uub3V0cHV0VG9rZW5zID8/IDA7XG4gICAgICAgIHRoaXMudG90YWxUb2tlbnMgKz0gbmV3VXNhZ2UudG90YWxUb2tlbnMgPz8gMDtcbiAgICAgICAgaWYgKG5ld1VzYWdlLmlucHV0VG9rZW5zRGV0YWlscykge1xuICAgICAgICAgICAgLy8gVGhlIHR5cGUgZG9lcyBub3QgYWxsb3cgdW5kZWZpbmVkLCBidXQgaXQgY291bGQgaGFwcGVuIHJ1bnRpbWVcbiAgICAgICAgICAgIHRoaXMuaW5wdXRUb2tlbnNEZXRhaWxzLnB1c2goLi4ubmV3VXNhZ2UuaW5wdXRUb2tlbnNEZXRhaWxzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobmV3VXNhZ2Uub3V0cHV0VG9rZW5zRGV0YWlscykge1xuICAgICAgICAgICAgLy8gVGhlIHR5cGUgZG9lcyBub3QgYWxsb3cgdW5kZWZpbmVkLCBidXQgaXQgY291bGQgaGFwcGVuIHJ1bnRpbWVcbiAgICAgICAgICAgIHRoaXMub3V0cHV0VG9rZW5zRGV0YWlscy5wdXNoKC4uLm5ld1VzYWdlLm91dHB1dFRva2Vuc0RldGFpbHMpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KG5ld1VzYWdlLnJlcXVlc3RVc2FnZUVudHJpZXMpICYmXG4gICAgICAgICAgICBuZXdVc2FnZS5yZXF1ZXN0VXNhZ2VFbnRyaWVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHRoaXMucmVxdWVzdFVzYWdlRW50cmllcyA/Pz0gW107XG4gICAgICAgICAgICB0aGlzLnJlcXVlc3RVc2FnZUVudHJpZXMucHVzaCguLi5uZXdVc2FnZS5yZXF1ZXN0VXNhZ2VFbnRyaWVzLm1hcCgoZW50cnkpID0+IGVudHJ5IGluc3RhbmNlb2YgUmVxdWVzdFVzYWdlID8gZW50cnkgOiBuZXcgUmVxdWVzdFVzYWdlKGVudHJ5KSkpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKG5ld1VzYWdlLnJlcXVlc3RzID09PSAxICYmIG5ld1VzYWdlLnRvdGFsVG9rZW5zID4gMCkge1xuICAgICAgICAgICAgdGhpcy5yZXF1ZXN0VXNhZ2VFbnRyaWVzID8/PSBbXTtcbiAgICAgICAgICAgIHRoaXMucmVxdWVzdFVzYWdlRW50cmllcy5wdXNoKG5ldyBSZXF1ZXN0VXNhZ2Uoe1xuICAgICAgICAgICAgICAgIGlucHV0VG9rZW5zOiBuZXdVc2FnZS5pbnB1dFRva2VucyxcbiAgICAgICAgICAgICAgICBvdXRwdXRUb2tlbnM6IG5ld1VzYWdlLm91dHB1dFRva2VucyxcbiAgICAgICAgICAgICAgICB0b3RhbFRva2VuczogbmV3VXNhZ2UudG90YWxUb2tlbnMsXG4gICAgICAgICAgICAgICAgaW5wdXRUb2tlbnNEZXRhaWxzOiBuZXdVc2FnZS5pbnB1dFRva2Vuc0RldGFpbHM/LlswXSxcbiAgICAgICAgICAgICAgICBvdXRwdXRUb2tlbnNEZXRhaWxzOiBuZXdVc2FnZS5vdXRwdXRUb2tlbnNEZXRhaWxzPy5bMF0sXG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH1cbiAgICB9XG59XG5leHBvcnQgeyBSZXF1ZXN0VXNhZ2VEYXRhLCBVc2FnZURhdGEgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXVzYWdlLm1qcy5tYXAiLCJpbXBvcnQgbG9nZ2VyIGZyb20gXCIuL2xvZ2dlci5tanNcIjtcbmltcG9ydCB7IFVzYWdlIH0gZnJvbSBcIi4vdXNhZ2UubWpzXCI7XG4vKipcbiAqIEEgY29udGV4dCBvYmplY3QgdGhhdCBpcyBwYXNzZWQgdG8gdGhlIGBSdW5uZXIucnVuKClgIG1ldGhvZC5cbiAqL1xuZXhwb3J0IGNsYXNzIFJ1bkNvbnRleHQge1xuICAgIC8qKlxuICAgICAqIFRoZSBjb250ZXh0IG9iamVjdCB5b3UgcGFzc2VkIHRvIHRoZSBgUnVubmVyLnJ1bigpYCBtZXRob2QuXG4gICAgICovXG4gICAgY29udGV4dDtcbiAgICAvKipcbiAgICAgKiBUaGUgdXNhZ2Ugb2YgdGhlIGFnZW50IHJ1biBzbyBmYXIuIEZvciBzdHJlYW1lZCByZXNwb25zZXMsIHRoZSB1c2FnZSB3aWxsIGJlIHVwZGF0ZWQgaW4gcmVhbC10aW1lXG4gICAgICovXG4gICAgdXNhZ2U7XG4gICAgLyoqXG4gICAgICogQSBtYXAgb2YgdG9vbCBuYW1lcyB0byB3aGV0aGVyIHRoZXkgaGF2ZSBiZWVuIGFwcHJvdmVkLlxuICAgICAqL1xuICAgICNhcHByb3ZhbHM7XG4gICAgY29uc3RydWN0b3IoY29udGV4dCA9IHt9KSB7XG4gICAgICAgIHRoaXMuY29udGV4dCA9IGNvbnRleHQ7XG4gICAgICAgIHRoaXMudXNhZ2UgPSBuZXcgVXNhZ2UoKTtcbiAgICAgICAgdGhpcy4jYXBwcm92YWxzID0gbmV3IE1hcCgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZWJ1aWxkIHRoZSBhcHByb3ZhbHMgbWFwIGZyb20gYSBzZXJpYWxpemVkIHN0YXRlLlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqXG4gICAgICogQHBhcmFtIGFwcHJvdmFscyAtIFRoZSBhcHByb3ZhbHMgbWFwIHRvIHJlYnVpbGQuXG4gICAgICovXG4gICAgX3JlYnVpbGRBcHByb3ZhbHMoYXBwcm92YWxzKSB7XG4gICAgICAgIHRoaXMuI2FwcHJvdmFscyA9IG5ldyBNYXAoT2JqZWN0LmVudHJpZXMoYXBwcm92YWxzKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENoZWNrIGlmIGEgdG9vbCBjYWxsIGhhcyBiZWVuIGFwcHJvdmVkLlxuICAgICAqXG4gICAgICogQHBhcmFtIGFwcHJvdmFsIC0gRGV0YWlscyBhYm91dCB0aGUgdG9vbCBjYWxsIGJlaW5nIGV2YWx1YXRlZC5cbiAgICAgKiBAcmV0dXJucyBgdHJ1ZWAgaWYgdGhlIHRvb2wgY2FsbCBoYXMgYmVlbiBhcHByb3ZlZCwgYGZhbHNlYCBpZiBibG9ja2VkIGFuZCBgdW5kZWZpbmVkYCBpZiBub3QgeWV0IGFwcHJvdmVkIG9yIHJlamVjdGVkLlxuICAgICAqL1xuICAgIGlzVG9vbEFwcHJvdmVkKGFwcHJvdmFsKSB7XG4gICAgICAgIGNvbnN0IHsgdG9vbE5hbWUsIGNhbGxJZCB9ID0gYXBwcm92YWw7XG4gICAgICAgIGNvbnN0IGFwcHJvdmFsRW50cnkgPSB0aGlzLiNhcHByb3ZhbHMuZ2V0KHRvb2xOYW1lKTtcbiAgICAgICAgaWYgKGFwcHJvdmFsRW50cnk/LmFwcHJvdmVkID09PSB0cnVlICYmIGFwcHJvdmFsRW50cnkucmVqZWN0ZWQgPT09IHRydWUpIHtcbiAgICAgICAgICAgIGxvZ2dlci53YXJuKCdUb29sIGlzIHBlcm1hbmVudGx5IGFwcHJvdmVkIGFuZCByZWplY3RlZCBhdCB0aGUgc2FtZSB0aW1lLiBBcHByb3ZhbCB0YWtlcyBwcmVjZWRlbmNlJyk7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoYXBwcm92YWxFbnRyeT8uYXBwcm92ZWQgPT09IHRydWUpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChhcHByb3ZhbEVudHJ5Py5yZWplY3RlZCA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGluZGl2aWR1YWxDYWxsQXBwcm92YWwgPSBBcnJheS5pc0FycmF5KGFwcHJvdmFsRW50cnk/LmFwcHJvdmVkKVxuICAgICAgICAgICAgPyBhcHByb3ZhbEVudHJ5LmFwcHJvdmVkLmluY2x1ZGVzKGNhbGxJZClcbiAgICAgICAgICAgIDogZmFsc2U7XG4gICAgICAgIGNvbnN0IGluZGl2aWR1YWxDYWxsUmVqZWN0aW9uID0gQXJyYXkuaXNBcnJheShhcHByb3ZhbEVudHJ5Py5yZWplY3RlZClcbiAgICAgICAgICAgID8gYXBwcm92YWxFbnRyeS5yZWplY3RlZC5pbmNsdWRlcyhjYWxsSWQpXG4gICAgICAgICAgICA6IGZhbHNlO1xuICAgICAgICBpZiAoaW5kaXZpZHVhbENhbGxBcHByb3ZhbCAmJiBpbmRpdmlkdWFsQ2FsbFJlamVjdGlvbikge1xuICAgICAgICAgICAgbG9nZ2VyLndhcm4oYFRvb2wgY2FsbCAke2NhbGxJZH0gaXMgYm90aCBhcHByb3ZlZCBhbmQgcmVqZWN0ZWQgYXQgdGhlIHNhbWUgdGltZS4gQXBwcm92YWwgdGFrZXMgcHJlY2VkZW5jZWApO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGluZGl2aWR1YWxDYWxsQXBwcm92YWwpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpbmRpdmlkdWFsQ2FsbFJlamVjdGlvbikge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFwcHJvdmUgYSB0b29sIGNhbGwuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gYXBwcm92YWxJdGVtIC0gVGhlIHRvb2wgYXBwcm92YWwgaXRlbSB0byBhcHByb3ZlLlxuICAgICAqIEBwYXJhbSBvcHRpb25zIC0gQWRkaXRpb25hbCBhcHByb3ZhbCBiZWhhdmlvciBvcHRpb25zLlxuICAgICAqL1xuICAgIGFwcHJvdmVUb29sKGFwcHJvdmFsSXRlbSwgeyBhbHdheXNBcHByb3ZlID0gZmFsc2UgfSA9IHt9KSB7XG4gICAgICAgIGNvbnN0IHRvb2xOYW1lID0gYXBwcm92YWxJdGVtLnRvb2xOYW1lID8/IGFwcHJvdmFsSXRlbS5yYXdJdGVtLm5hbWU7XG4gICAgICAgIGlmIChhbHdheXNBcHByb3ZlKSB7XG4gICAgICAgICAgICB0aGlzLiNhcHByb3ZhbHMuc2V0KHRvb2xOYW1lLCB7XG4gICAgICAgICAgICAgICAgYXBwcm92ZWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgcmVqZWN0ZWQ6IFtdLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgYXBwcm92YWxFbnRyeSA9IHRoaXMuI2FwcHJvdmFscy5nZXQodG9vbE5hbWUpID8/IHtcbiAgICAgICAgICAgIGFwcHJvdmVkOiBbXSxcbiAgICAgICAgICAgIHJlamVjdGVkOiBbXSxcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoYXBwcm92YWxFbnRyeS5hcHByb3ZlZCkpIHtcbiAgICAgICAgICAgIC8vIGZ1bmN0aW9uIHRvb2wgaGFzIGNhbGxfaWQsIGhvc3RlZCB0b29sIGNhbGwgaGFzIGlkXG4gICAgICAgICAgICBjb25zdCBjYWxsSWQgPSAnY2FsbElkJyBpbiBhcHByb3ZhbEl0ZW0ucmF3SXRlbVxuICAgICAgICAgICAgICAgID8gYXBwcm92YWxJdGVtLnJhd0l0ZW0uY2FsbElkIC8vIGZ1bmN0aW9uIHRvb2xzXG4gICAgICAgICAgICAgICAgOiBhcHByb3ZhbEl0ZW0ucmF3SXRlbS5pZDsgLy8gaG9zdGVkIHRvb2xzXG4gICAgICAgICAgICBhcHByb3ZhbEVudHJ5LmFwcHJvdmVkLnB1c2goY2FsbElkKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLiNhcHByb3ZhbHMuc2V0KHRvb2xOYW1lLCBhcHByb3ZhbEVudHJ5KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVqZWN0IGEgdG9vbCBjYWxsLlxuICAgICAqXG4gICAgICogQHBhcmFtIGFwcHJvdmFsSXRlbSAtIFRoZSB0b29sIGFwcHJvdmFsIGl0ZW0gdG8gcmVqZWN0LlxuICAgICAqL1xuICAgIHJlamVjdFRvb2woYXBwcm92YWxJdGVtLCB7IGFsd2F5c1JlamVjdCA9IGZhbHNlIH0gPSB7fSkge1xuICAgICAgICBjb25zdCB0b29sTmFtZSA9IGFwcHJvdmFsSXRlbS50b29sTmFtZSA/PyBhcHByb3ZhbEl0ZW0ucmF3SXRlbS5uYW1lO1xuICAgICAgICBpZiAoYWx3YXlzUmVqZWN0KSB7XG4gICAgICAgICAgICB0aGlzLiNhcHByb3ZhbHMuc2V0KHRvb2xOYW1lLCB7XG4gICAgICAgICAgICAgICAgYXBwcm92ZWQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgIHJlamVjdGVkOiB0cnVlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgYXBwcm92YWxFbnRyeSA9IHRoaXMuI2FwcHJvdmFscy5nZXQodG9vbE5hbWUpID8/IHtcbiAgICAgICAgICAgIGFwcHJvdmVkOiBbXSxcbiAgICAgICAgICAgIHJlamVjdGVkOiBbXSxcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoYXBwcm92YWxFbnRyeS5yZWplY3RlZCkpIHtcbiAgICAgICAgICAgIC8vIGZ1bmN0aW9uIHRvb2wgaGFzIGNhbGxfaWQsIGhvc3RlZCB0b29sIGNhbGwgaGFzIGlkXG4gICAgICAgICAgICBjb25zdCBjYWxsSWQgPSAnY2FsbElkJyBpbiBhcHByb3ZhbEl0ZW0ucmF3SXRlbVxuICAgICAgICAgICAgICAgID8gYXBwcm92YWxJdGVtLnJhd0l0ZW0uY2FsbElkIC8vIGZ1bmN0aW9uIHRvb2xzXG4gICAgICAgICAgICAgICAgOiBhcHByb3ZhbEl0ZW0ucmF3SXRlbS5pZDsgLy8gaG9zdGVkIHRvb2xzXG4gICAgICAgICAgICBhcHByb3ZhbEVudHJ5LnJlamVjdGVkLnB1c2goY2FsbElkKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLiNhcHByb3ZhbHMuc2V0KHRvb2xOYW1lLCBhcHByb3ZhbEVudHJ5KTtcbiAgICB9XG4gICAgdG9KU09OKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgY29udGV4dDogdGhpcy5jb250ZXh0LFxuICAgICAgICAgICAgdXNhZ2U6IHRoaXMudXNhZ2UsXG4gICAgICAgICAgICBhcHByb3ZhbHM6IE9iamVjdC5mcm9tRW50cmllcyh0aGlzLiNhcHByb3ZhbHMuZW50cmllcygpKSxcbiAgICAgICAgfTtcbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1ydW5Db250ZXh0Lm1qcy5tYXAiLCJpbXBvcnQgeyBVc2VyRXJyb3IgfSBmcm9tIFwiLi4vZXJyb3JzLm1qc1wiO1xuZnVuY3Rpb24gaXNDb21wdXRlckluc3RhbmNlKHZhbHVlKSB7XG4gICAgcmV0dXJuICghIXZhbHVlICYmXG4gICAgICAgIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiZcbiAgICAgICAgJ2Vudmlyb25tZW50JyBpbiB2YWx1ZSAmJlxuICAgICAgICAnZGltZW5zaW9ucycgaW4gdmFsdWUpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHNlcmlhbGl6ZVRvb2wodG9vbCkge1xuICAgIGlmICh0b29sLnR5cGUgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHR5cGU6ICdmdW5jdGlvbicsXG4gICAgICAgICAgICBuYW1lOiB0b29sLm5hbWUsXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogdG9vbC5kZXNjcmlwdGlvbixcbiAgICAgICAgICAgIHBhcmFtZXRlcnM6IHRvb2wucGFyYW1ldGVycyxcbiAgICAgICAgICAgIHN0cmljdDogdG9vbC5zdHJpY3QsXG4gICAgICAgIH07XG4gICAgfVxuICAgIGlmICh0b29sLnR5cGUgPT09ICdjb21wdXRlcicpIHtcbiAgICAgICAgLy8gV2hlbiBhIGNvbXB1dGVyIGlzIGNyZWF0ZWQgbGF6aWx5IHZpYSBhbiBpbml0aWFsaXplciwgc2VyaWFsaXplVG9vbCBjYW4gYmUgY2FsbGVkIGJlZm9yZSBpbml0aWFsaXphdGlvbiAoZS5nLiwgbWFudWFsIHNlcmlhbGl6ZSB3aXRob3V0IHJ1bm5pbmcgdGhlIGFnZW50KS5cbiAgICAgICAgaWYgKCFpc0NvbXB1dGVySW5zdGFuY2UodG9vbC5jb21wdXRlcikpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBVc2VyRXJyb3IoJ0NvbXB1dGVyIHRvb2wgaXMgbm90IGluaXRpYWxpemVkIGZvciBzZXJpYWxpemF0aW9uLiBDYWxsIHJlc29sdmVDb21wdXRlcih7IHRvb2wsIHJ1bkNvbnRleHQgfSkgZmlyc3QgKGZvciBleGFtcGxlLCB3aGVuIGJ1aWxkaW5nIGEgbW9kZWwgcGF5bG9hZCBvdXRzaWRlIFJ1bm5lci5ydW4pLicpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB0eXBlOiAnY29tcHV0ZXInLFxuICAgICAgICAgICAgbmFtZTogdG9vbC5uYW1lLFxuICAgICAgICAgICAgZW52aXJvbm1lbnQ6IHRvb2wuY29tcHV0ZXIuZW52aXJvbm1lbnQsXG4gICAgICAgICAgICBkaW1lbnNpb25zOiB0b29sLmNvbXB1dGVyLmRpbWVuc2lvbnMsXG4gICAgICAgIH07XG4gICAgfVxuICAgIGlmICh0b29sLnR5cGUgPT09ICdzaGVsbCcpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHR5cGU6ICdzaGVsbCcsXG4gICAgICAgICAgICBuYW1lOiB0b29sLm5hbWUsXG4gICAgICAgIH07XG4gICAgfVxuICAgIGlmICh0b29sLnR5cGUgPT09ICdhcHBseV9wYXRjaCcpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHR5cGU6ICdhcHBseV9wYXRjaCcsXG4gICAgICAgICAgICBuYW1lOiB0b29sLm5hbWUsXG4gICAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICAgIHR5cGU6ICdob3N0ZWRfdG9vbCcsXG4gICAgICAgIG5hbWU6IHRvb2wubmFtZSxcbiAgICAgICAgcHJvdmlkZXJEYXRhOiB0b29sLnByb3ZpZGVyRGF0YSxcbiAgICB9O1xufVxuZXhwb3J0IGZ1bmN0aW9uIHNlcmlhbGl6ZUhhbmRvZmYoaCkge1xuICAgIHJldHVybiB7XG4gICAgICAgIHRvb2xOYW1lOiBoLnRvb2xOYW1lLFxuICAgICAgICB0b29sRGVzY3JpcHRpb246IGgudG9vbERlc2NyaXB0aW9uLFxuICAgICAgICBpbnB1dEpzb25TY2hlbWE6IGguaW5wdXRKc29uU2NoZW1hLFxuICAgICAgICBzdHJpY3RKc29uU2NoZW1hOiBoLnN0cmljdEpzb25TY2hlbWEsXG4gICAgfTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXNlcmlhbGl6ZS5tanMubWFwIiwiaW1wb3J0IHsgdG9TbWFydFN0cmluZyB9IGZyb20gXCIuL3V0aWxzL3NtYXJ0U3RyaW5nLm1qc1wiO1xuZXhwb3J0IGNsYXNzIFJ1bkl0ZW1CYXNlIHtcbiAgICB0eXBlID0gJ2Jhc2VfaXRlbSc7XG4gICAgcmF3SXRlbTtcbiAgICB0b0pTT04oKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB0eXBlOiB0aGlzLnR5cGUsXG4gICAgICAgICAgICByYXdJdGVtOiB0aGlzLnJhd0l0ZW0sXG4gICAgICAgIH07XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIFJ1bk1lc3NhZ2VPdXRwdXRJdGVtIGV4dGVuZHMgUnVuSXRlbUJhc2Uge1xuICAgIHJhd0l0ZW07XG4gICAgYWdlbnQ7XG4gICAgdHlwZSA9ICdtZXNzYWdlX291dHB1dF9pdGVtJztcbiAgICBjb25zdHJ1Y3RvcihyYXdJdGVtLCBhZ2VudCkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLnJhd0l0ZW0gPSByYXdJdGVtO1xuICAgICAgICB0aGlzLmFnZW50ID0gYWdlbnQ7XG4gICAgfVxuICAgIHRvSlNPTigpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIC4uLnN1cGVyLnRvSlNPTigpLFxuICAgICAgICAgICAgYWdlbnQ6IHRoaXMuYWdlbnQudG9KU09OKCksXG4gICAgICAgIH07XG4gICAgfVxuICAgIGdldCBjb250ZW50KCkge1xuICAgICAgICBsZXQgY29udGVudCA9ICcnO1xuICAgICAgICBmb3IgKGNvbnN0IHBhcnQgb2YgdGhpcy5yYXdJdGVtLmNvbnRlbnQpIHtcbiAgICAgICAgICAgIGlmIChwYXJ0LnR5cGUgPT09ICdvdXRwdXRfdGV4dCcpIHtcbiAgICAgICAgICAgICAgICBjb250ZW50ICs9IHBhcnQudGV4dDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY29udGVudDtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgUnVuVG9vbENhbGxJdGVtIGV4dGVuZHMgUnVuSXRlbUJhc2Uge1xuICAgIHJhd0l0ZW07XG4gICAgYWdlbnQ7XG4gICAgdHlwZSA9ICd0b29sX2NhbGxfaXRlbSc7XG4gICAgY29uc3RydWN0b3IocmF3SXRlbSwgYWdlbnQpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5yYXdJdGVtID0gcmF3SXRlbTtcbiAgICAgICAgdGhpcy5hZ2VudCA9IGFnZW50O1xuICAgIH1cbiAgICB0b0pTT04oKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAuLi5zdXBlci50b0pTT04oKSxcbiAgICAgICAgICAgIGFnZW50OiB0aGlzLmFnZW50LnRvSlNPTigpLFxuICAgICAgICB9O1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBSdW5Ub29sQ2FsbE91dHB1dEl0ZW0gZXh0ZW5kcyBSdW5JdGVtQmFzZSB7XG4gICAgcmF3SXRlbTtcbiAgICBhZ2VudDtcbiAgICBvdXRwdXQ7XG4gICAgdHlwZSA9ICd0b29sX2NhbGxfb3V0cHV0X2l0ZW0nO1xuICAgIGNvbnN0cnVjdG9yKHJhd0l0ZW0sIGFnZW50LCBvdXRwdXQpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5yYXdJdGVtID0gcmF3SXRlbTtcbiAgICAgICAgdGhpcy5hZ2VudCA9IGFnZW50O1xuICAgICAgICB0aGlzLm91dHB1dCA9IG91dHB1dDtcbiAgICB9XG4gICAgdG9KU09OKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgLi4uc3VwZXIudG9KU09OKCksXG4gICAgICAgICAgICBhZ2VudDogdGhpcy5hZ2VudC50b0pTT04oKSxcbiAgICAgICAgICAgIG91dHB1dDogdG9TbWFydFN0cmluZyh0aGlzLm91dHB1dCksXG4gICAgICAgIH07XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIFJ1blJlYXNvbmluZ0l0ZW0gZXh0ZW5kcyBSdW5JdGVtQmFzZSB7XG4gICAgcmF3SXRlbTtcbiAgICBhZ2VudDtcbiAgICB0eXBlID0gJ3JlYXNvbmluZ19pdGVtJztcbiAgICBjb25zdHJ1Y3RvcihyYXdJdGVtLCBhZ2VudCkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLnJhd0l0ZW0gPSByYXdJdGVtO1xuICAgICAgICB0aGlzLmFnZW50ID0gYWdlbnQ7XG4gICAgfVxuICAgIHRvSlNPTigpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIC4uLnN1cGVyLnRvSlNPTigpLFxuICAgICAgICAgICAgYWdlbnQ6IHRoaXMuYWdlbnQudG9KU09OKCksXG4gICAgICAgIH07XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIFJ1bkhhbmRvZmZDYWxsSXRlbSBleHRlbmRzIFJ1bkl0ZW1CYXNlIHtcbiAgICByYXdJdGVtO1xuICAgIGFnZW50O1xuICAgIHR5cGUgPSAnaGFuZG9mZl9jYWxsX2l0ZW0nO1xuICAgIGNvbnN0cnVjdG9yKHJhd0l0ZW0sIGFnZW50KSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMucmF3SXRlbSA9IHJhd0l0ZW07XG4gICAgICAgIHRoaXMuYWdlbnQgPSBhZ2VudDtcbiAgICB9XG4gICAgdG9KU09OKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgLi4uc3VwZXIudG9KU09OKCksXG4gICAgICAgICAgICBhZ2VudDogdGhpcy5hZ2VudC50b0pTT04oKSxcbiAgICAgICAgfTtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgUnVuSGFuZG9mZk91dHB1dEl0ZW0gZXh0ZW5kcyBSdW5JdGVtQmFzZSB7XG4gICAgcmF3SXRlbTtcbiAgICBzb3VyY2VBZ2VudDtcbiAgICB0YXJnZXRBZ2VudDtcbiAgICB0eXBlID0gJ2hhbmRvZmZfb3V0cHV0X2l0ZW0nO1xuICAgIGNvbnN0cnVjdG9yKHJhd0l0ZW0sIHNvdXJjZUFnZW50LCB0YXJnZXRBZ2VudCkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLnJhd0l0ZW0gPSByYXdJdGVtO1xuICAgICAgICB0aGlzLnNvdXJjZUFnZW50ID0gc291cmNlQWdlbnQ7XG4gICAgICAgIHRoaXMudGFyZ2V0QWdlbnQgPSB0YXJnZXRBZ2VudDtcbiAgICB9XG4gICAgdG9KU09OKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgLi4uc3VwZXIudG9KU09OKCksXG4gICAgICAgICAgICBzb3VyY2VBZ2VudDogdGhpcy5zb3VyY2VBZ2VudC50b0pTT04oKSxcbiAgICAgICAgICAgIHRhcmdldEFnZW50OiB0aGlzLnRhcmdldEFnZW50LnRvSlNPTigpLFxuICAgICAgICB9O1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBSdW5Ub29sQXBwcm92YWxJdGVtIGV4dGVuZHMgUnVuSXRlbUJhc2Uge1xuICAgIHJhd0l0ZW07XG4gICAgYWdlbnQ7XG4gICAgdG9vbE5hbWU7XG4gICAgdHlwZSA9ICd0b29sX2FwcHJvdmFsX2l0ZW0nO1xuICAgIGNvbnN0cnVjdG9yKHJhd0l0ZW0sIGFnZW50LCBcbiAgICAvKipcbiAgICAgKiBFeHBsaWNpdCB0b29sIG5hbWUgdG8gdXNlIGZvciBhcHByb3ZhbCB0cmFja2luZyB3aGVuIG5vdCBwcmVzZW50IG9uIHRoZSByYXcgaXRlbS5cbiAgICAgKi9cbiAgICB0b29sTmFtZSkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLnJhd0l0ZW0gPSByYXdJdGVtO1xuICAgICAgICB0aGlzLmFnZW50ID0gYWdlbnQ7XG4gICAgICAgIHRoaXMudG9vbE5hbWUgPSB0b29sTmFtZTtcbiAgICAgICAgdGhpcy50b29sTmFtZSA9IHRvb2xOYW1lID8/IHJhd0l0ZW0ubmFtZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgdG9vbCBuYW1lIGlmIGF2YWlsYWJsZSBvbiB0aGUgcmF3IGl0ZW0gb3IgcHJvdmlkZWQgZXhwbGljaXRseS5cbiAgICAgKiBLZXB0IGZvciBiYWNrd2FyZHMgY29tcGF0aWJpbGl0eSB3aXRoIGNvZGUgdGhhdCBwcmV2aW91c2x5IHJlbGllZCBvbiBgcmF3SXRlbS5uYW1lYC5cbiAgICAgKi9cbiAgICBnZXQgbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudG9vbE5hbWUgPz8gdGhpcy5yYXdJdGVtLm5hbWU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIGFyZ3VtZW50cyBpZiB0aGUgcmF3IGl0ZW0gaGFzIGFuIGFyZ3VtZW50cyBwcm9wZXJ0eSBvdGhlcndpc2UgdGhpcyB3aWxsIGJlIHVuZGVmaW5lZC5cbiAgICAgKi9cbiAgICBnZXQgYXJndW1lbnRzKCkge1xuICAgICAgICByZXR1cm4gJ2FyZ3VtZW50cycgaW4gdGhpcy5yYXdJdGVtID8gdGhpcy5yYXdJdGVtLmFyZ3VtZW50cyA6IHVuZGVmaW5lZDtcbiAgICB9XG4gICAgdG9KU09OKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgLi4uc3VwZXIudG9KU09OKCksXG4gICAgICAgICAgICBhZ2VudDogdGhpcy5hZ2VudC50b0pTT04oKSxcbiAgICAgICAgICAgIHRvb2xOYW1lOiB0aGlzLnRvb2xOYW1lLFxuICAgICAgICB9O1xuICAgIH1cbn1cbi8qKlxuICogRXh0cmFjdCBhbGwgdGV4dCBvdXRwdXQgZnJvbSBhIGxpc3Qgb2YgcnVuIGl0ZW1zIGJ5IGNvbmNhdGVuYXRpbmcgdGhlIGNvbnRlbnQgb2YgYWxsXG4gKiBtZXNzYWdlIG91dHB1dCBpdGVtcy5cbiAqXG4gKiBAcGFyYW0gaXRlbXMgLSBUaGUgbGlzdCBvZiBydW4gaXRlbXMgdG8gZXh0cmFjdCB0ZXh0IGZyb20uXG4gKiBAcmV0dXJucyBBIHN0cmluZyBvZiBhbGwgdGhlIHRleHQgb3V0cHV0IGZyb20gdGhlIHJ1biBpdGVtcy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGV4dHJhY3RBbGxUZXh0T3V0cHV0KGl0ZW1zKSB7XG4gICAgcmV0dXJuIGl0ZW1zXG4gICAgICAgIC5maWx0ZXIoKGl0ZW0pID0+IGl0ZW0udHlwZSA9PT0gJ21lc3NhZ2Vfb3V0cHV0X2l0ZW0nKVxuICAgICAgICAubWFwKChpdGVtKSA9PiBpdGVtLmNvbnRlbnQpXG4gICAgICAgIC5qb2luKCcnKTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWl0ZW1zLm1qcy5tYXAiLCJpbXBvcnQgeyByZXNldEN1cnJlbnRTcGFuLCBzZXRDdXJyZW50U3Bhbiwgd2l0aE5ld1NwYW5Db250ZXh0LCB9IGZyb20gXCIuL2NvbnRleHQubWpzXCI7XG5pbXBvcnQgeyBnZXRHbG9iYWxUcmFjZVByb3ZpZGVyIH0gZnJvbSBcIi4vcHJvdmlkZXIubWpzXCI7XG5mdW5jdGlvbiBfd2l0aFNwYW5GYWN0b3J5KGNyZWF0ZVNwYW4pIHtcbiAgICByZXR1cm4gYXN5bmMgKGZuLCAuLi5hcmdzKSA9PiB7XG4gICAgICAgIC8vIENyZWF0aW5nIGEgbmV3IHNwYW4gY29udGV4dCB0byBtYWtlIHN1cmUgdGhhdCB0aGUgcHJldmlvdXMgc3BhbiBpcyBjb3JyZWN0bHkgcmVzZXRcbiAgICAgICAgcmV0dXJuIHdpdGhOZXdTcGFuQ29udGV4dChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBzcGFuID0gY3JlYXRlU3BhbiguLi5hcmdzKTtcbiAgICAgICAgICAgIHNldEN1cnJlbnRTcGFuKHNwYW4pO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBzcGFuLnN0YXJ0KCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGF3YWl0IGZuKHNwYW4pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgc3Bhbi5zZXRFcnJvcih7XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IGVycm9yLmRhdGEsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmaW5hbGx5IHtcbiAgICAgICAgICAgICAgICBzcGFuLmVuZCgpO1xuICAgICAgICAgICAgICAgIHJlc2V0Q3VycmVudFNwYW4oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfTtcbn1cbi8qKlxuICogQ3JlYXRlIGEgbmV3IHJlc3BvbnNlIHNwYW4uIFRoZSBzcGFuIHdpbGwgbm90IGJlIHN0YXJ0ZWQgYXV0b21hdGljYWxseSwgeW91IHNob3VsZCBlaXRoZXJcbiAqIHVzZSBgd2l0aFJlc3BvbnNlU3BhbigpYCBvciBjYWxsIGBzcGFuLnN0YXJ0KClgIGFuZCBgc3Bhbi5lbmQoKWAgbWFudWFsbHkuXG4gKlxuICogVGhpcyBzcGFuIGNhcHR1cmVzIHRoZSBkZXRhaWxzIG9mIGEgbW9kZWwgcmVzcG9uc2UsIHByaW1hcmlseSB0aGUgcmVzcG9uc2UgaWRlbnRpZmllci5cbiAqIElmIHlvdSBuZWVkIHRvIGNhcHR1cmUgZGV0YWlsZWQgZ2VuZXJhdGlvbiBpbmZvcm1hdGlvbiBzdWNoIGFzIGlucHV0L291dHB1dCBtZXNzYWdlcyxcbiAqIG1vZGVsIGNvbmZpZ3VyYXRpb24sIG9yIHVzYWdlIGRhdGEsIHVzZSBgY3JlYXRlR2VuZXJhdGlvblNwYW4oKWAgaW5zdGVhZC5cbiAqXG4gKiBAcGFyYW0gb3B0aW9ucyAtIE9wdGlvbmFsIHNwYW4gY3JlYXRpb24gb3B0aW9ucywgaW5jbHVkaW5nIHNwYW4gZGF0YSBhbmQgaWRlbnRpZmllcnMuXG4gKiBAcGFyYW0gcGFyZW50IC0gVGhlIHBhcmVudCBzcGFuIG9yIHRyYWNlLiBJZiBub3QgcHJvdmlkZWQsIHRoZSBjdXJyZW50IHRyYWNlL3NwYW4gd2lsbCBiZSB1c2VkXG4gKiBhdXRvbWF0aWNhbGx5LlxuICpcbiAqIEByZXR1cm5zIFRoZSBuZXdseSBjcmVhdGVkIHJlc3BvbnNlIHNwYW4uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVSZXNwb25zZVNwYW4ob3B0aW9ucywgcGFyZW50KSB7XG4gICAgb3B0aW9ucyA9IHt9O1xuICAgIHJldHVybiBnZXRHbG9iYWxUcmFjZVByb3ZpZGVyKCkuY3JlYXRlU3Bhbih7XG4gICAgICAgIC4uLm9wdGlvbnMsXG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgIHR5cGU6ICdyZXNwb25zZScsXG4gICAgICAgICAgICAuLi5vcHRpb25zLmRhdGEsXG4gICAgICAgIH0sXG4gICAgfSwgcGFyZW50KTtcbn1cbi8qKlxuICogQ3JlYXRlIGEgbmV3IHJlc3BvbnNlIHNwYW4gYW5kIGF1dG9tYXRpY2FsbHkgc3RhcnQgYW5kIGVuZCBpdC5cbiAqXG4gKiBUaGlzIHNwYW4gY2FwdHVyZXMgdGhlIGRldGFpbHMgb2YgYSBtb2RlbCByZXNwb25zZSwgcHJpbWFyaWx5IHRoZSByZXNwb25zZSBpZGVudGlmaWVyLlxuICogSWYgeW91IG5lZWQgdG8gY2FwdHVyZSBkZXRhaWxlZCBnZW5lcmF0aW9uIGluZm9ybWF0aW9uIHN1Y2ggYXMgaW5wdXQvb3V0cHV0IG1lc3NhZ2VzLFxuICogbW9kZWwgY29uZmlndXJhdGlvbiwgb3IgdXNhZ2UgZGF0YSwgdXNlIGBnZW5lcmF0aW9uU3BhbigpYCBpbnN0ZWFkLlxuICovXG5leHBvcnQgY29uc3Qgd2l0aFJlc3BvbnNlU3BhbiA9IF93aXRoU3BhbkZhY3RvcnkoY3JlYXRlUmVzcG9uc2VTcGFuKTtcbi8qKlxuICogQ3JlYXRlIGEgbmV3IGFnZW50IHNwYW4uIFRoZSBzcGFuIHdpbGwgbm90IGJlIHN0YXJ0ZWQgYXV0b21hdGljYWxseSwgeW91IHNob3VsZCBlaXRoZXJcbiAqIHVzZSBgd2l0aEFnZW50U3BhbigpYCBvciBjYWxsIGBzcGFuLnN0YXJ0KClgIGFuZCBgc3Bhbi5lbmQoKWAgbWFudWFsbHkuXG4gKlxuICogQHBhcmFtIG9wdGlvbnMgLSBPcHRpb25hbCBzcGFuIGNyZWF0aW9uIG9wdGlvbnMsIGluY2x1ZGluZyBzcGFuIGRhdGEgYW5kIGlkZW50aWZpZXJzLlxuICogQHBhcmFtIHBhcmVudCAtIFRoZSBwYXJlbnQgc3BhbiBvciB0cmFjZS4gSWYgbm90IHByb3ZpZGVkLCB0aGUgY3VycmVudCB0cmFjZS9zcGFuIHdpbGwgYmUgdXNlZFxuICogYXV0b21hdGljYWxseS5cbiAqXG4gKiBAcmV0dXJucyBUaGUgbmV3bHkgY3JlYXRlZCBhZ2VudCBzcGFuLlxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlQWdlbnRTcGFuKG9wdGlvbnMsIHBhcmVudCkge1xuICAgIHJldHVybiBnZXRHbG9iYWxUcmFjZVByb3ZpZGVyKCkuY3JlYXRlU3Bhbih7XG4gICAgICAgIC4uLm9wdGlvbnMsXG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgIHR5cGU6ICdhZ2VudCcsXG4gICAgICAgICAgICBuYW1lOiBvcHRpb25zPy5kYXRhPy5uYW1lID8/ICdBZ2VudCcsXG4gICAgICAgICAgICAuLi5vcHRpb25zPy5kYXRhLFxuICAgICAgICB9LFxuICAgIH0sIHBhcmVudCk7XG59XG4vKipcbiAqIENyZWF0ZSBhIG5ldyBhZ2VudCBzcGFuIGFuZCBhdXRvbWF0aWNhbGx5IHN0YXJ0IGFuZCBlbmQgaXQuXG4gKi9cbmV4cG9ydCBjb25zdCB3aXRoQWdlbnRTcGFuID0gX3dpdGhTcGFuRmFjdG9yeShjcmVhdGVBZ2VudFNwYW4pO1xuLyoqXG4gKiBDcmVhdGUgYSBuZXcgZnVuY3Rpb24gc3Bhbi4gVGhlIHNwYW4gd2lsbCBub3QgYmUgc3RhcnRlZCBhdXRvbWF0aWNhbGx5LCB5b3Ugc2hvdWxkIGVpdGhlclxuICogdXNlIGB3aXRoRnVuY3Rpb25TcGFuKClgIG9yIGNhbGwgYHNwYW4uc3RhcnQoKWAgYW5kIGBzcGFuLmVuZCgpYCBtYW51YWxseS5cbiAqXG4gKiBAcGFyYW0gb3B0aW9ucyAtIE9wdGlvbmFsIHNwYW4gY3JlYXRpb24gb3B0aW9ucywgaW5jbHVkaW5nIHNwYW4gZGF0YSBhbmQgaWRlbnRpZmllcnMuXG4gKiBAcGFyYW0gcGFyZW50IC0gVGhlIHBhcmVudCBzcGFuIG9yIHRyYWNlLiBJZiBub3QgcHJvdmlkZWQsIHRoZSBjdXJyZW50IHRyYWNlL3NwYW4gd2lsbCBiZSB1c2VkXG4gKiBhdXRvbWF0aWNhbGx5LlxuICpcbiAqIEByZXR1cm5zIFRoZSBuZXdseSBjcmVhdGVkIGZ1bmN0aW9uIHNwYW4uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVGdW5jdGlvblNwYW4ob3B0aW9ucywgcGFyZW50KSB7XG4gICAgcmV0dXJuIGdldEdsb2JhbFRyYWNlUHJvdmlkZXIoKS5jcmVhdGVTcGFuKHtcbiAgICAgICAgLi4ub3B0aW9ucyxcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgdHlwZTogJ2Z1bmN0aW9uJyxcbiAgICAgICAgICAgIGlucHV0OiBvcHRpb25zPy5kYXRhPy5pbnB1dCA/PyAnJyxcbiAgICAgICAgICAgIG91dHB1dDogb3B0aW9ucz8uZGF0YT8ub3V0cHV0ID8/ICcnLFxuICAgICAgICAgICAgLi4ub3B0aW9ucz8uZGF0YSxcbiAgICAgICAgfSxcbiAgICB9LCBwYXJlbnQpO1xufVxuLyoqXG4gKiBDcmVhdGUgYSBuZXcgZnVuY3Rpb24gc3BhbiBhbmQgYXV0b21hdGljYWxseSBzdGFydCBhbmQgZW5kIGl0LlxuICovXG5leHBvcnQgY29uc3Qgd2l0aEZ1bmN0aW9uU3BhbiA9IF93aXRoU3BhbkZhY3RvcnkoY3JlYXRlRnVuY3Rpb25TcGFuKTtcbi8qKlxuICogQ3JlYXRlIGEgbmV3IGhhbmRvZmYgc3Bhbi4gVGhlIHNwYW4gd2lsbCBub3QgYmUgc3RhcnRlZCBhdXRvbWF0aWNhbGx5LCB5b3Ugc2hvdWxkIGVpdGhlclxuICogdXNlIGB3aXRoSGFuZG9mZlNwYW4oKWAgb3IgY2FsbCBgc3Bhbi5zdGFydCgpYCBhbmQgYHNwYW4uZW5kKClgIG1hbnVhbGx5LlxuICpcbiAqIEBwYXJhbSBvcHRpb25zIC0gT3B0aW9uYWwgc3BhbiBjcmVhdGlvbiBvcHRpb25zLCBpbmNsdWRpbmcgc3BhbiBkYXRhIGFuZCBpZGVudGlmaWVycy5cbiAqIEBwYXJhbSBwYXJlbnQgLSBUaGUgcGFyZW50IHNwYW4gb3IgdHJhY2UuIElmIG5vdCBwcm92aWRlZCwgdGhlIGN1cnJlbnQgdHJhY2Uvc3BhbiB3aWxsIGJlIHVzZWRcbiAqIGF1dG9tYXRpY2FsbHkuXG4gKlxuICogQHJldHVybnMgVGhlIG5ld2x5IGNyZWF0ZWQgaGFuZG9mZiBzcGFuLlxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlSGFuZG9mZlNwYW4ob3B0aW9ucywgcGFyZW50KSB7XG4gICAgcmV0dXJuIGdldEdsb2JhbFRyYWNlUHJvdmlkZXIoKS5jcmVhdGVTcGFuKHtcbiAgICAgICAgLi4ub3B0aW9ucyxcbiAgICAgICAgZGF0YTogeyB0eXBlOiAnaGFuZG9mZicsIC4uLm9wdGlvbnM/LmRhdGEgfSxcbiAgICB9LCBwYXJlbnQpO1xufVxuLyoqXG4gKiBDcmVhdGUgYSBuZXcgaGFuZG9mZiBzcGFuIGFuZCBhdXRvbWF0aWNhbGx5IHN0YXJ0IGFuZCBlbmQgaXQuXG4gKi9cbmV4cG9ydCBjb25zdCB3aXRoSGFuZG9mZlNwYW4gPSBfd2l0aFNwYW5GYWN0b3J5KGNyZWF0ZUhhbmRvZmZTcGFuKTtcbi8qKlxuICogQ3JlYXRlIGEgbmV3IGdlbmVyYXRpb24gc3Bhbi4gVGhlIHNwYW4gd2lsbCBub3QgYmUgc3RhcnRlZCBhdXRvbWF0aWNhbGx5LCB5b3Ugc2hvdWxkIGVpdGhlclxuICogdXNlIGB3aXRoR2VuZXJhdGlvblNwYW4oKWAgb3IgY2FsbCBgc3Bhbi5zdGFydCgpYCBhbmQgYHNwYW4uZW5kKClgIG1hbnVhbGx5LlxuICpcbiAqIFRoaXMgc3BhbiBjYXB0dXJlcyB0aGUgZGV0YWlscyBvZiBhIG1vZGVsIGdlbmVyYXRpb24sIGluY2x1ZGluZyBpbnB1dC9vdXRwdXQgbWVzc2FnZVxuICogc2VxdWVuY2VzLCBtb2RlbCBpbmZvcm1hdGlvbiwgYW5kIHVzYWdlIGRhdGEuIElmIHlvdSBvbmx5IG5lZWQgdG8gY2FwdHVyZSBhIG1vZGVsIHJlc3BvbnNlXG4gKiBpZGVudGlmaWVyLCBjb25zaWRlciB1c2luZyBgY3JlYXRlUmVzcG9uc2VTcGFuKClgIGluc3RlYWQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVHZW5lcmF0aW9uU3BhbihvcHRpb25zLCBwYXJlbnQpIHtcbiAgICByZXR1cm4gZ2V0R2xvYmFsVHJhY2VQcm92aWRlcigpLmNyZWF0ZVNwYW4oe1xuICAgICAgICAuLi5vcHRpb25zLFxuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICB0eXBlOiAnZ2VuZXJhdGlvbicsXG4gICAgICAgICAgICAuLi5vcHRpb25zPy5kYXRhLFxuICAgICAgICB9LFxuICAgIH0sIHBhcmVudCk7XG59XG4vKiogQXV0b21hdGljYWxseSBjcmVhdGUgYSBnZW5lcmF0aW9uIHNwYW4sIHJ1biBmbiBhbmQgY2xvc2UgdGhlIHNwYW4gKi9cbmV4cG9ydCBjb25zdCB3aXRoR2VuZXJhdGlvblNwYW4gPSBfd2l0aFNwYW5GYWN0b3J5KGNyZWF0ZUdlbmVyYXRpb25TcGFuKTtcbi8qKlxuICogQ3JlYXRlIGEgbmV3IGN1c3RvbSBzcGFuLiBUaGUgc3BhbiB3aWxsIG5vdCBiZSBzdGFydGVkIGF1dG9tYXRpY2FsbHksIHlvdSBzaG91bGQgZWl0aGVyIHVzZVxuICogYHdpdGhDdXN0b21TcGFuKClgIG9yIGNhbGwgYHNwYW4uc3RhcnQoKWAgYW5kIGBzcGFuLmVuZCgpYCBtYW51YWxseS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUN1c3RvbVNwYW4ob3B0aW9ucywgcGFyZW50KSB7XG4gICAgcmV0dXJuIGdldEdsb2JhbFRyYWNlUHJvdmlkZXIoKS5jcmVhdGVTcGFuKHtcbiAgICAgICAgLi4ub3B0aW9ucyxcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgdHlwZTogJ2N1c3RvbScsXG4gICAgICAgICAgICBkYXRhOiB7fSxcbiAgICAgICAgICAgIC4uLm9wdGlvbnM/LmRhdGEsXG4gICAgICAgIH0sXG4gICAgfSwgcGFyZW50KTtcbn1cbmV4cG9ydCBjb25zdCB3aXRoQ3VzdG9tU3BhbiA9IF93aXRoU3BhbkZhY3RvcnkoY3JlYXRlQ3VzdG9tU3Bhbik7XG4vKipcbiAqIENyZWF0ZSBhIG5ldyBndWFyZHJhaWwgc3Bhbi4gVGhlIHNwYW4gd2lsbCBub3QgYmUgc3RhcnRlZCBhdXRvbWF0aWNhbGx5LCB5b3Ugc2hvdWxkIGVpdGhlciB1c2VcbiAqIGB3aXRoR3VhcmRyYWlsU3BhbigpYCBvciBjYWxsIGBzcGFuLnN0YXJ0KClgIGFuZCBgc3Bhbi5lbmQoKWAgbWFudWFsbHkuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVHdWFyZHJhaWxTcGFuKG9wdGlvbnMsIHBhcmVudCkge1xuICAgIHJldHVybiBnZXRHbG9iYWxUcmFjZVByb3ZpZGVyKCkuY3JlYXRlU3Bhbih7XG4gICAgICAgIC4uLm9wdGlvbnMsXG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgIHR5cGU6ICdndWFyZHJhaWwnLFxuICAgICAgICAgICAgdHJpZ2dlcmVkOiBmYWxzZSxcbiAgICAgICAgICAgIC4uLm9wdGlvbnM/LmRhdGEsXG4gICAgICAgIH0sXG4gICAgfSwgcGFyZW50KTtcbn1cbmV4cG9ydCBjb25zdCB3aXRoR3VhcmRyYWlsU3BhbiA9IF93aXRoU3BhbkZhY3RvcnkoY3JlYXRlR3VhcmRyYWlsU3Bhbik7XG4vKipcbiAqIENyZWF0ZSBhIG5ldyB0cmFuc2NyaXB0aW9uIHNwYW4uIFRoZSBzcGFuIHdpbGwgbm90IGJlIHN0YXJ0ZWQgYXV0b21hdGljYWxseS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVRyYW5zY3JpcHRpb25TcGFuKG9wdGlvbnMsIHBhcmVudCkge1xuICAgIHJldHVybiBnZXRHbG9iYWxUcmFjZVByb3ZpZGVyKCkuY3JlYXRlU3Bhbih7XG4gICAgICAgIC4uLm9wdGlvbnMsXG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgIHR5cGU6ICd0cmFuc2NyaXB0aW9uJyxcbiAgICAgICAgICAgIC4uLm9wdGlvbnMuZGF0YSxcbiAgICAgICAgfSxcbiAgICB9LCBwYXJlbnQpO1xufVxuZXhwb3J0IGNvbnN0IHdpdGhUcmFuc2NyaXB0aW9uU3BhbiA9IF93aXRoU3BhbkZhY3RvcnkoY3JlYXRlVHJhbnNjcmlwdGlvblNwYW4pO1xuLyoqXG4gKiBDcmVhdGUgYSBuZXcgc3BlZWNoIHNwYW4uIFRoZSBzcGFuIHdpbGwgbm90IGJlIHN0YXJ0ZWQgYXV0b21hdGljYWxseS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVNwZWVjaFNwYW4ob3B0aW9ucywgcGFyZW50KSB7XG4gICAgcmV0dXJuIGdldEdsb2JhbFRyYWNlUHJvdmlkZXIoKS5jcmVhdGVTcGFuKHtcbiAgICAgICAgLi4ub3B0aW9ucyxcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgdHlwZTogJ3NwZWVjaCcsXG4gICAgICAgICAgICAuLi5vcHRpb25zLmRhdGEsXG4gICAgICAgIH0sXG4gICAgfSwgcGFyZW50KTtcbn1cbmV4cG9ydCBjb25zdCB3aXRoU3BlZWNoU3BhbiA9IF93aXRoU3BhbkZhY3RvcnkoY3JlYXRlU3BlZWNoU3Bhbik7XG4vKipcbiAqIENyZWF0ZSBhIG5ldyBzcGVlY2ggZ3JvdXAgc3Bhbi4gVGhlIHNwYW4gd2lsbCBub3QgYmUgc3RhcnRlZCBhdXRvbWF0aWNhbGx5LlxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlU3BlZWNoR3JvdXBTcGFuKG9wdGlvbnMsIHBhcmVudCkge1xuICAgIHJldHVybiBnZXRHbG9iYWxUcmFjZVByb3ZpZGVyKCkuY3JlYXRlU3Bhbih7XG4gICAgICAgIC4uLm9wdGlvbnMsXG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgIHR5cGU6ICdzcGVlY2hfZ3JvdXAnLFxuICAgICAgICAgICAgLi4ub3B0aW9ucz8uZGF0YSxcbiAgICAgICAgfSxcbiAgICB9LCBwYXJlbnQpO1xufVxuZXhwb3J0IGNvbnN0IHdpdGhTcGVlY2hHcm91cFNwYW4gPSBfd2l0aFNwYW5GYWN0b3J5KGNyZWF0ZVNwZWVjaEdyb3VwU3Bhbik7XG4vKipcbiAqIENyZWF0ZSBhIG5ldyBNQ1AgbGlzdCB0b29scyBzcGFuLiBUaGUgc3BhbiB3aWxsIG5vdCBiZSBzdGFydGVkIGF1dG9tYXRpY2FsbHkuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVNQ1BMaXN0VG9vbHNTcGFuKG9wdGlvbnMsIHBhcmVudCkge1xuICAgIHJldHVybiBnZXRHbG9iYWxUcmFjZVByb3ZpZGVyKCkuY3JlYXRlU3Bhbih7XG4gICAgICAgIC4uLm9wdGlvbnMsXG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgIHR5cGU6ICdtY3BfdG9vbHMnLFxuICAgICAgICAgICAgLi4ub3B0aW9ucz8uZGF0YSxcbiAgICAgICAgfSxcbiAgICB9LCBwYXJlbnQpO1xufVxuZXhwb3J0IGNvbnN0IHdpdGhNQ1BMaXN0VG9vbHNTcGFuID0gX3dpdGhTcGFuRmFjdG9yeShjcmVhdGVNQ1BMaXN0VG9vbHNTcGFuKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNyZWF0ZVNwYW5zLm1qcy5tYXAiLCIvKipcbiAqIEVuY29kZSBhIFVpbnQ4QXJyYXkgaW50byBhIGJhc2U2NCBzdHJpbmcgaW4gYm90aCBOb2RlIGFuZCBicm93c2VyIGVudmlyb25tZW50cy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGVuY29kZVVpbnQ4QXJyYXlUb0Jhc2U2NChkYXRhKSB7XG4gICAgaWYgKGRhdGEubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHJldHVybiAnJztcbiAgICB9XG4gICAgY29uc3QgZ2xvYmFsQnVmZmVyID0gdHlwZW9mIGdsb2JhbFRoaXMgIT09ICd1bmRlZmluZWQnICYmIGdsb2JhbFRoaXMuQnVmZmVyXG4gICAgICAgID8gZ2xvYmFsVGhpcy5CdWZmZXJcbiAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgaWYgKGdsb2JhbEJ1ZmZlcikge1xuICAgICAgICByZXR1cm4gZ2xvYmFsQnVmZmVyLmZyb20oZGF0YSkudG9TdHJpbmcoJ2Jhc2U2NCcpO1xuICAgIH1cbiAgICBsZXQgYmluYXJ5ID0gJyc7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBkYXRhLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICAgIGJpbmFyeSArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGRhdGFbaV0pO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIGdsb2JhbFRoaXMuYnRvYSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICByZXR1cm4gZ2xvYmFsVGhpcy5idG9hKGJpbmFyeSk7XG4gICAgfVxuICAgIGNvbnN0IGNoYXJzID0gJ0FCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5Ky89JztcbiAgICBsZXQgcmVzdWx0ID0gJyc7XG4gICAgbGV0IGkgPSAwO1xuICAgIHdoaWxlIChpIDwgYmluYXJ5Lmxlbmd0aCkge1xuICAgICAgICBjb25zdCBjMSA9IGJpbmFyeS5jaGFyQ29kZUF0KGkrKyk7XG4gICAgICAgIGNvbnN0IGMyID0gYmluYXJ5LmNoYXJDb2RlQXQoaSsrKTtcbiAgICAgICAgY29uc3QgYzMgPSBiaW5hcnkuY2hhckNvZGVBdChpKyspO1xuICAgICAgICBjb25zdCBlbmMxID0gYzEgPj4gMjtcbiAgICAgICAgY29uc3QgZW5jMiA9ICgoYzEgJiAweDMpIDw8IDQpIHwgKGMyID4+IDQpO1xuICAgICAgICBjb25zdCBlbmMzID0gaXNOYU4oYzIpID8gNjQgOiAoKGMyICYgMHhmKSA8PCAyKSB8IChjMyA+PiA2KTtcbiAgICAgICAgY29uc3QgZW5jNCA9IGlzTmFOKGMzKSA/IDY0IDogYzMgJiAweDNmO1xuICAgICAgICByZXN1bHQgKz1cbiAgICAgICAgICAgIGNoYXJzLmNoYXJBdChlbmMxKSArXG4gICAgICAgICAgICAgICAgY2hhcnMuY2hhckF0KGVuYzIpICtcbiAgICAgICAgICAgICAgICBjaGFycy5jaGFyQXQoZW5jMykgK1xuICAgICAgICAgICAgICAgIGNoYXJzLmNoYXJBdChlbmM0KTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWJhc2U2NC5tanMubWFwIiwiLyoqXG4gKiBTdHJlYW1pbmcgZXZlbnQgZnJvbSB0aGUgTExNLiBUaGVzZSBhcmUgYHJhd2AgZXZlbnRzLCBpLmUuIHRoZXkgYXJlIGRpcmVjdGx5IHBhc3NlZCB0aHJvdWdoIGZyb21cbiAqIHRoZSBMTE0uXG4gKi9cbmV4cG9ydCBjbGFzcyBSdW5SYXdNb2RlbFN0cmVhbUV2ZW50IHtcbiAgICBkYXRhO1xuICAgIC8qKlxuICAgICAqIFRoZSB0eXBlIG9mIHRoZSBldmVudC5cbiAgICAgKi9cbiAgICB0eXBlID0gJ3Jhd19tb2RlbF9zdHJlYW1fZXZlbnQnO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSBkYXRhIFRoZSByYXcgcmVzcG9uc2VzIHN0cmVhbSBldmVudHMgZnJvbSB0aGUgTExNLlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKGRhdGEpIHtcbiAgICAgICAgdGhpcy5kYXRhID0gZGF0YTtcbiAgICB9XG59XG4vKipcbiAqIFN0cmVhbWluZyBldmVudHMgdGhhdCB3cmFwIGEgYFJ1bkl0ZW1gLiBBcyB0aGUgYWdlbnQgcHJvY2Vzc2VzIHRoZSBMTE0gcmVzcG9uc2UsIGl0IHdpbGwgZ2VuZXJhdGVcbiAqIHRoZXNlIGV2ZW50cyBmcm9tIG5ldyBtZXNzYWdlcywgdG9vbCBjYWxscywgdG9vbCBvdXRwdXRzLCBoYW5kb2ZmcywgZXRjLlxuICovXG5leHBvcnQgY2xhc3MgUnVuSXRlbVN0cmVhbUV2ZW50IHtcbiAgICBuYW1lO1xuICAgIGl0ZW07XG4gICAgdHlwZSA9ICdydW5faXRlbV9zdHJlYW1fZXZlbnQnO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSBuYW1lIFRoZSBuYW1lIG9mIHRoZSBldmVudC5cbiAgICAgKiBAcGFyYW0gaXRlbSBUaGUgaXRlbSB0aGF0IHdhcyBjcmVhdGVkLlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKG5hbWUsIGl0ZW0pIHtcbiAgICAgICAgdGhpcy5uYW1lID0gbmFtZTtcbiAgICAgICAgdGhpcy5pdGVtID0gaXRlbTtcbiAgICB9XG59XG4vKipcbiAqIEV2ZW50IHRoYXQgbm90aWZpZXMgdGhhdCB0aGVyZSBpcyBhIG5ldyBhZ2VudCBydW5uaW5nLlxuICovXG5leHBvcnQgY2xhc3MgUnVuQWdlbnRVcGRhdGVkU3RyZWFtRXZlbnQge1xuICAgIGFnZW50O1xuICAgIHR5cGUgPSAnYWdlbnRfdXBkYXRlZF9zdHJlYW1fZXZlbnQnO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSBhZ2VudCBUaGUgbmV3IGFnZW50XG4gICAgICovXG4gICAgY29uc3RydWN0b3IoYWdlbnQpIHtcbiAgICAgICAgdGhpcy5hZ2VudCA9IGFnZW50O1xuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWV2ZW50cy5tanMubWFwIiwiZXhwb3J0IGZ1bmN0aW9uIGlzT3BlbkFJUmVzcG9uc2VzQ29tcGFjdGlvbkF3YXJlU2Vzc2lvbihzZXNzaW9uKSB7XG4gICAgcmV0dXJuICghIXNlc3Npb24gJiZcbiAgICAgICAgdHlwZW9mIHNlc3Npb24ucnVuQ29tcGFjdGlvbiA9PT1cbiAgICAgICAgICAgICdmdW5jdGlvbicpO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c2Vzc2lvbi5tanMubWFwIiwiaW1wb3J0IHsgY29uc3VtZUFnZW50VG9vbFJ1blJlc3VsdCwgfSBmcm9tIFwiLi9hZ2VudC5tanNcIjtcbmltcG9ydCB7IE1vZGVsQmVoYXZpb3JFcnJvciwgVG9vbENhbGxFcnJvciwgVXNlckVycm9yIH0gZnJvbSBcIi4vZXJyb3JzLm1qc1wiO1xuaW1wb3J0IHsgZ2V0VHJhbnNmZXJNZXNzYWdlIH0gZnJvbSBcIi4vaGFuZG9mZi5tanNcIjtcbmltcG9ydCB7IFJ1bkhhbmRvZmZDYWxsSXRlbSwgUnVuSGFuZG9mZk91dHB1dEl0ZW0sIFJ1bk1lc3NhZ2VPdXRwdXRJdGVtLCBSdW5SZWFzb25pbmdJdGVtLCBSdW5Ub29sQXBwcm92YWxJdGVtLCBSdW5Ub29sQ2FsbEl0ZW0sIFJ1blRvb2xDYWxsT3V0cHV0SXRlbSwgfSBmcm9tIFwiLi9pdGVtcy5tanNcIjtcbmltcG9ydCBsb2dnZXIgZnJvbSBcIi4vbG9nZ2VyLm1qc1wiO1xuaW1wb3J0IHsgcmVzb2x2ZUNvbXB1dGVyLCB9IGZyb20gXCIuL3Rvb2wubWpzXCI7XG5pbXBvcnQgeyBnZXRMYXN0VGV4dEZyb21PdXRwdXRNZXNzYWdlIH0gZnJvbSBcIi4vdXRpbHMvbWVzc2FnZXMubWpzXCI7XG5pbXBvcnQgeyB3aXRoRnVuY3Rpb25TcGFuLCB3aXRoSGFuZG9mZlNwYW4gfSBmcm9tIFwiLi90cmFjaW5nL2NyZWF0ZVNwYW5zLm1qc1wiO1xuaW1wb3J0IHsgZ2V0U2NoZW1hQW5kUGFyc2VyRnJvbUlucHV0VHlwZSB9IGZyb20gXCIuL3V0aWxzL3Rvb2xzLm1qc1wiO1xuaW1wb3J0IHsgZW5jb2RlVWludDhBcnJheVRvQmFzZTY0IH0gZnJvbSBcIi4vdXRpbHMvYmFzZTY0Lm1qc1wiO1xuaW1wb3J0IHsgaXNBcnJheUJ1ZmZlclZpZXcsIGlzTm9kZUJ1ZmZlciwgaXNTZXJpYWxpemVkQnVmZmVyU25hcHNob3QsIHRvU21hcnRTdHJpbmcsIH0gZnJvbSBcIi4vdXRpbHMvc21hcnRTdHJpbmcubWpzXCI7XG5pbXBvcnQgeyBzYWZlRXhlY3V0ZSB9IGZyb20gXCIuL3V0aWxzL3NhZmVFeGVjdXRlLm1qc1wiO1xuaW1wb3J0IHsgYWRkRXJyb3JUb0N1cnJlbnRTcGFuIH0gZnJvbSBcIi4vdHJhY2luZy9jb250ZXh0Lm1qc1wiO1xuaW1wb3J0IHsgUnVuSXRlbVN0cmVhbUV2ZW50IH0gZnJvbSBcIi4vZXZlbnRzLm1qc1wiO1xuaW1wb3J0IHsgeiB9IGZyb20gJ3pvZCc7XG5pbXBvcnQgeyBpc1pvZE9iamVjdCB9IGZyb20gXCIuL3V0aWxzL2luZGV4Lm1qc1wiO1xuaW1wb3J0IHsgaXNPcGVuQUlSZXNwb25zZXNDb21wYWN0aW9uQXdhcmVTZXNzaW9uLCB9IGZyb20gXCIuL21lbW9yeS9zZXNzaW9uLm1qc1wiO1xuaW1wb3J0IHsgVXNhZ2UgfSBmcm9tIFwiLi91c2FnZS5tanNcIjtcbmZ1bmN0aW9uIGlzQXBwcm92YWxJdGVtTGlrZSh2YWx1ZSkge1xuICAgIGlmICghdmFsdWUgfHwgdHlwZW9mIHZhbHVlICE9PSAnb2JqZWN0Jykge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGlmICghKCdyYXdJdGVtJyBpbiB2YWx1ZSkpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBjb25zdCByYXdJdGVtID0gdmFsdWUucmF3SXRlbTtcbiAgICBpZiAoIXJhd0l0ZW0gfHwgdHlwZW9mIHJhd0l0ZW0gIT09ICdvYmplY3QnKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgY29uc3QgaXRlbVR5cGUgPSByYXdJdGVtLnR5cGU7XG4gICAgcmV0dXJuIGl0ZW1UeXBlID09PSAnZnVuY3Rpb25fY2FsbCcgfHwgaXRlbVR5cGUgPT09ICdob3N0ZWRfdG9vbF9jYWxsJztcbn1cbmZ1bmN0aW9uIGdldEFwcHJvdmFsSWRlbnRpdHkoYXBwcm92YWwpIHtcbiAgICBjb25zdCByYXdJdGVtID0gYXBwcm92YWwucmF3SXRlbTtcbiAgICBpZiAoIXJhd0l0ZW0pIHtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG4gICAgaWYgKHJhd0l0ZW0udHlwZSA9PT0gJ2Z1bmN0aW9uX2NhbGwnICYmIHJhd0l0ZW0uY2FsbElkKSB7XG4gICAgICAgIHJldHVybiBgZnVuY3Rpb25fY2FsbDoke3Jhd0l0ZW0uY2FsbElkfWA7XG4gICAgfVxuICAgIGlmICgnY2FsbElkJyBpbiByYXdJdGVtICYmIHJhd0l0ZW0uY2FsbElkKSB7XG4gICAgICAgIHJldHVybiBgJHtyYXdJdGVtLnR5cGV9OiR7cmF3SXRlbS5jYWxsSWR9YDtcbiAgICB9XG4gICAgY29uc3QgaWQgPSAnaWQnIGluIHJhd0l0ZW0gPyByYXdJdGVtLmlkIDogdW5kZWZpbmVkO1xuICAgIGlmIChpZCkge1xuICAgICAgICByZXR1cm4gYCR7cmF3SXRlbS50eXBlfToke2lkfWA7XG4gICAgfVxuICAgIGNvbnN0IHByb3ZpZGVyRGF0YSA9IHR5cGVvZiByYXdJdGVtLnByb3ZpZGVyRGF0YSA9PT0gJ29iamVjdCcgJiYgcmF3SXRlbS5wcm92aWRlckRhdGFcbiAgICAgICAgPyByYXdJdGVtLnByb3ZpZGVyRGF0YVxuICAgICAgICA6IHVuZGVmaW5lZDtcbiAgICBpZiAocHJvdmlkZXJEYXRhPy5pZCkge1xuICAgICAgICByZXR1cm4gYCR7cmF3SXRlbS50eXBlfTpwcm92aWRlcjoke3Byb3ZpZGVyRGF0YS5pZH1gO1xuICAgIH1cbiAgICBjb25zdCBhZ2VudE5hbWUgPSAnYWdlbnQnIGluIGFwcHJvdmFsICYmIGFwcHJvdmFsLmFnZW50ID8gYXBwcm92YWwuYWdlbnQubmFtZSA6ICcnO1xuICAgIHRyeSB7XG4gICAgICAgIHJldHVybiBgJHthZ2VudE5hbWV9OiR7cmF3SXRlbS50eXBlfToke0pTT04uc3RyaW5naWZ5KHJhd0l0ZW0pfWA7XG4gICAgfVxuICAgIGNhdGNoIHtcbiAgICAgICAgcmV0dXJuIGAke2FnZW50TmFtZX06JHtyYXdJdGVtLnR5cGV9YDtcbiAgICB9XG59XG5mdW5jdGlvbiBmb3JtYXRGaW5hbE91dHB1dFR5cGVFcnJvcihlcnJvcikge1xuICAgIC8vIFN1cmZhY2Ugc3RydWN0dXJlZCBvdXRwdXQgdmFsaWRhdGlvbiBoaW50cyB3aXRob3V0IGVjaG9pbmcgcG90ZW50aWFsbHkgbGFyZ2Ugb3Igc2Vuc2l0aXZlIHBheWxvYWRzLlxuICAgIHRyeSB7XG4gICAgICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIHouWm9kRXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnN0IGlzc3VlID0gZXJyb3IuaXNzdWVzWzBdO1xuICAgICAgICAgICAgaWYgKGlzc3VlKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgaXNzdWVQYXRoUGFydHMgPSBBcnJheS5pc0FycmF5KGlzc3VlLnBhdGgpID8gaXNzdWUucGF0aCA6IFtdO1xuICAgICAgICAgICAgICAgIGNvbnN0IGlzc3VlUGF0aCA9IGlzc3VlUGF0aFBhcnRzLmxlbmd0aCA+IDBcbiAgICAgICAgICAgICAgICAgICAgPyBpc3N1ZVBhdGhQYXJ0cy5tYXAoKHBhcnQpID0+IFN0cmluZyhwYXJ0KSkuam9pbignLicpXG4gICAgICAgICAgICAgICAgICAgIDogJyhyb290KSc7XG4gICAgICAgICAgICAgICAgY29uc3QgbWVzc2FnZSA9IHRydW5jYXRlRm9yRGV2ZWxvcGVyKGlzc3VlLm1lc3NhZ2UgPz8gJycpO1xuICAgICAgICAgICAgICAgIHJldHVybiBgSW52YWxpZCBvdXRwdXQgdHlwZTogZmluYWwgYXNzaXN0YW50IG91dHB1dCBmYWlsZWQgc2NoZW1hIHZhbGlkYXRpb24gYXQgXCIke2lzc3VlUGF0aH1cIiAoJHttZXNzYWdlfSkuYDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiAnSW52YWxpZCBvdXRwdXQgdHlwZTogZmluYWwgYXNzaXN0YW50IG91dHB1dCBmYWlsZWQgc2NoZW1hIHZhbGlkYXRpb24uJztcbiAgICAgICAgfVxuICAgICAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBFcnJvciAmJiBlcnJvci5tZXNzYWdlKSB7XG4gICAgICAgICAgICByZXR1cm4gYEludmFsaWQgb3V0cHV0IHR5cGU6ICR7dHJ1bmNhdGVGb3JEZXZlbG9wZXIoZXJyb3IubWVzc2FnZSl9YDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjYXRjaCB7XG4gICAgICAgIC8vIFN3YWxsb3cgZm9ybWF0dGluZyBlcnJvcnMgc28gd2UgY2FuIHJldHVybiBhIGdlbmVyaWMgbWVzc2FnZSBiZWxvdy5cbiAgICB9XG4gICAgcmV0dXJuICdJbnZhbGlkIG91dHB1dCB0eXBlOiBmaW5hbCBhc3Npc3RhbnQgb3V0cHV0IGRpZCBub3QgbWF0Y2ggdGhlIGV4cGVjdGVkIHNjaGVtYS4nO1xufVxuZnVuY3Rpb24gdHJ1bmNhdGVGb3JEZXZlbG9wZXIobWVzc2FnZSwgbWF4TGVuZ3RoID0gMTYwKSB7XG4gICAgY29uc3QgdHJpbW1lZCA9IG1lc3NhZ2UudHJpbSgpO1xuICAgIGlmICghdHJpbW1lZCkge1xuICAgICAgICByZXR1cm4gJ1NjaGVtYSB2YWxpZGF0aW9uIGZhaWxlZC4nO1xuICAgIH1cbiAgICBpZiAodHJpbW1lZC5sZW5ndGggPD0gbWF4TGVuZ3RoKSB7XG4gICAgICAgIHJldHVybiB0cmltbWVkO1xuICAgIH1cbiAgICByZXR1cm4gYCR7dHJpbW1lZC5zbGljZSgwLCBtYXhMZW5ndGggLSAzKX0uLi5gO1xufVxuLyoqXG4gKiBAaW50ZXJuYWxcbiAqIFdhbGtzIGEgcmF3IG1vZGVsIHJlc3BvbnNlIGFuZCBjbGFzc2lmaWVzIGVhY2ggaXRlbSBzbyB0aGUgcnVubmVyIGNhbiBzY2hlZHVsZSBmb2xsb3ctdXAgd29yay5cbiAqIFJldHVybnMgYm90aCB0aGUgc2VyaWFsaXphYmxlIFJ1bkl0ZW1zIChmb3IgaGlzdG9yeS9zdHJlYW1pbmcpIGFuZCB0aGUgYWN0aW9uYWJsZSB0b29sIG1ldGFkYXRhLlxuICovXG5leHBvcnQgZnVuY3Rpb24gcHJvY2Vzc01vZGVsUmVzcG9uc2UobW9kZWxSZXNwb25zZSwgYWdlbnQsIHRvb2xzLCBoYW5kb2Zmcykge1xuICAgIGNvbnN0IGl0ZW1zID0gW107XG4gICAgY29uc3QgcnVuSGFuZG9mZnMgPSBbXTtcbiAgICBjb25zdCBydW5GdW5jdGlvbnMgPSBbXTtcbiAgICBjb25zdCBydW5Db21wdXRlckFjdGlvbnMgPSBbXTtcbiAgICBjb25zdCBydW5TaGVsbEFjdGlvbnMgPSBbXTtcbiAgICBjb25zdCBydW5BcHBseVBhdGNoQWN0aW9ucyA9IFtdO1xuICAgIGNvbnN0IHJ1bk1DUEFwcHJvdmFsUmVxdWVzdHMgPSBbXTtcbiAgICBjb25zdCB0b29sc1VzZWQgPSBbXTtcbiAgICBjb25zdCBoYW5kb2ZmTWFwID0gbmV3IE1hcChoYW5kb2Zmcy5tYXAoKGgpID0+IFtoLnRvb2xOYW1lLCBoXSkpO1xuICAgIC8vIFJlc29sdmUgdG9vbHMgdXBmcm9udCBzbyB3ZSBjYW4gbG9vayB1cCB0aGUgY29uY3JldGUgaGFuZGxlciBpbiBPKDEpIHdoaWxlIGl0ZXJhdGluZyBvdXRwdXRzLlxuICAgIGNvbnN0IGZ1bmN0aW9uTWFwID0gbmV3IE1hcCh0b29scy5maWx0ZXIoKHQpID0+IHQudHlwZSA9PT0gJ2Z1bmN0aW9uJykubWFwKCh0KSA9PiBbdC5uYW1lLCB0XSkpO1xuICAgIGNvbnN0IGNvbXB1dGVyVG9vbCA9IHRvb2xzLmZpbmQoKHQpID0+IHQudHlwZSA9PT0gJ2NvbXB1dGVyJyk7XG4gICAgY29uc3Qgc2hlbGxUb29sID0gdG9vbHMuZmluZCgodCkgPT4gdC50eXBlID09PSAnc2hlbGwnKTtcbiAgICBjb25zdCBhcHBseVBhdGNoVG9vbCA9IHRvb2xzLmZpbmQoKHQpID0+IHQudHlwZSA9PT0gJ2FwcGx5X3BhdGNoJyk7XG4gICAgY29uc3QgbWNwVG9vbE1hcCA9IG5ldyBNYXAodG9vbHNcbiAgICAgICAgLmZpbHRlcigodCkgPT4gdC50eXBlID09PSAnaG9zdGVkX3Rvb2wnICYmIHQucHJvdmlkZXJEYXRhPy50eXBlID09PSAnbWNwJylcbiAgICAgICAgLm1hcCgodCkgPT4gdClcbiAgICAgICAgLm1hcCgodCkgPT4gW3QucHJvdmlkZXJEYXRhLnNlcnZlcl9sYWJlbCwgdF0pKTtcbiAgICBmb3IgKGNvbnN0IG91dHB1dCBvZiBtb2RlbFJlc3BvbnNlLm91dHB1dCkge1xuICAgICAgICBpZiAob3V0cHV0LnR5cGUgPT09ICdtZXNzYWdlJykge1xuICAgICAgICAgICAgaWYgKG91dHB1dC5yb2xlID09PSAnYXNzaXN0YW50Jykge1xuICAgICAgICAgICAgICAgIGl0ZW1zLnB1c2gobmV3IFJ1bk1lc3NhZ2VPdXRwdXRJdGVtKG91dHB1dCwgYWdlbnQpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChvdXRwdXQudHlwZSA9PT0gJ2hvc3RlZF90b29sX2NhbGwnKSB7XG4gICAgICAgICAgICBpdGVtcy5wdXNoKG5ldyBSdW5Ub29sQ2FsbEl0ZW0ob3V0cHV0LCBhZ2VudCkpO1xuICAgICAgICAgICAgY29uc3QgdG9vbE5hbWUgPSBvdXRwdXQubmFtZTtcbiAgICAgICAgICAgIHRvb2xzVXNlZC5wdXNoKHRvb2xOYW1lKTtcbiAgICAgICAgICAgIGlmIChvdXRwdXQucHJvdmlkZXJEYXRhPy50eXBlID09PSAnbWNwX2FwcHJvdmFsX3JlcXVlc3QnIHx8XG4gICAgICAgICAgICAgICAgb3V0cHV0Lm5hbWUgPT09ICdtY3BfYXBwcm92YWxfcmVxdWVzdCcpIHtcbiAgICAgICAgICAgICAgICAvLyBIb3N0ZWQgcmVtb3RlIE1DUCBzZXJ2ZXIncyBhcHByb3ZhbCBwcm9jZXNzXG4gICAgICAgICAgICAgICAgY29uc3QgcHJvdmlkZXJEYXRhID0gb3V0cHV0LnByb3ZpZGVyRGF0YTtcbiAgICAgICAgICAgICAgICBjb25zdCBtY3BTZXJ2ZXJMYWJlbCA9IHByb3ZpZGVyRGF0YS5zZXJ2ZXJfbGFiZWw7XG4gICAgICAgICAgICAgICAgY29uc3QgbWNwU2VydmVyVG9vbCA9IG1jcFRvb2xNYXAuZ2V0KG1jcFNlcnZlckxhYmVsKTtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG1jcFNlcnZlclRvb2wgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBgTUNQIHNlcnZlciAoJHttY3BTZXJ2ZXJMYWJlbH0pIG5vdCBmb3VuZCBpbiBBZ2VudCAoJHthZ2VudC5uYW1lfSlgO1xuICAgICAgICAgICAgICAgICAgICBhZGRFcnJvclRvQ3VycmVudFNwYW4oe1xuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IHsgbWNwX3NlcnZlcl9sYWJlbDogbWNwU2VydmVyTGFiZWwgfSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBNb2RlbEJlaGF2aW9yRXJyb3IobWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIERvIHRoaXMgYXBwcm92YWwgbGF0ZXI6XG4gICAgICAgICAgICAgICAgLy8gV2Ugc3VwcG9ydCBib3RoIG9uQXBwcm92YWwgY2FsbGJhY2sgKGxpa2UgdGhlIFB5dGhvbiBTREsgZG9lcykgYW5kIEhJVEwgcGF0dGVybnMuXG4gICAgICAgICAgICAgICAgY29uc3QgYXBwcm92YWxJdGVtID0gbmV3IFJ1blRvb2xBcHByb3ZhbEl0ZW0oe1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiAnaG9zdGVkX3Rvb2xfY2FsbCcsXG4gICAgICAgICAgICAgICAgICAgIC8vIFdlIG11c3QgdXNlIHRoaXMgbmFtZSB0byBhbGlnbiB3aXRoIHRoZSBuYW1lIHNlbnQgZnJvbSB0aGUgc2VydmVyc1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiBwcm92aWRlckRhdGEubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgaWQ6IHByb3ZpZGVyRGF0YS5pZCxcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiAnaW5fcHJvZ3Jlc3MnLFxuICAgICAgICAgICAgICAgICAgICBwcm92aWRlckRhdGEsXG4gICAgICAgICAgICAgICAgfSwgYWdlbnQpO1xuICAgICAgICAgICAgICAgIHJ1bk1DUEFwcHJvdmFsUmVxdWVzdHMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgIHJlcXVlc3RJdGVtOiBhcHByb3ZhbEl0ZW0sXG4gICAgICAgICAgICAgICAgICAgIG1jcFRvb2w6IG1jcFNlcnZlclRvb2wsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgaWYgKCFtY3BTZXJ2ZXJUb29sLnByb3ZpZGVyRGF0YS5vbl9hcHByb3ZhbCkge1xuICAgICAgICAgICAgICAgICAgICAvLyBXaGVuIG9uQXBwcm92YWwgZnVuY3Rpb24gZXhpc3RzLCBpdCBjb25maXJtcyB0aGUgYXBwcm92YWwgcmlnaHQgYWZ0ZXIgdGhpcy5cbiAgICAgICAgICAgICAgICAgICAgLy8gVGh1cywgdGhpcyBhcHByb3ZhbCBpdGVtIG11c3QgYmUgYXBwZW5kZWQgb25seSBmb3IgdGhlIG5leHQgdHVybiBpbnRlcnJ1cHRpb24gcGF0dGVybnMuXG4gICAgICAgICAgICAgICAgICAgIGl0ZW1zLnB1c2goYXBwcm92YWxJdGVtKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAob3V0cHV0LnR5cGUgPT09ICdyZWFzb25pbmcnKSB7XG4gICAgICAgICAgICBpdGVtcy5wdXNoKG5ldyBSdW5SZWFzb25pbmdJdGVtKG91dHB1dCwgYWdlbnQpKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChvdXRwdXQudHlwZSA9PT0gJ2NvbXB1dGVyX2NhbGwnKSB7XG4gICAgICAgICAgICBpdGVtcy5wdXNoKG5ldyBSdW5Ub29sQ2FsbEl0ZW0ob3V0cHV0LCBhZ2VudCkpO1xuICAgICAgICAgICAgdG9vbHNVc2VkLnB1c2goJ2NvbXB1dGVyX3VzZScpO1xuICAgICAgICAgICAgaWYgKCFjb21wdXRlclRvb2wpIHtcbiAgICAgICAgICAgICAgICBhZGRFcnJvclRvQ3VycmVudFNwYW4oe1xuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnTW9kZWwgcHJvZHVjZWQgY29tcHV0ZXIgYWN0aW9uIHdpdGhvdXQgYSBjb21wdXRlciB0b29sLicsXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFnZW50X25hbWU6IGFnZW50Lm5hbWUsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IE1vZGVsQmVoYXZpb3JFcnJvcignTW9kZWwgcHJvZHVjZWQgY29tcHV0ZXIgYWN0aW9uIHdpdGhvdXQgYSBjb21wdXRlciB0b29sLicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcnVuQ29tcHV0ZXJBY3Rpb25zLnB1c2goe1xuICAgICAgICAgICAgICAgIHRvb2xDYWxsOiBvdXRwdXQsXG4gICAgICAgICAgICAgICAgY29tcHV0ZXI6IGNvbXB1dGVyVG9vbCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKG91dHB1dC50eXBlID09PSAnc2hlbGxfY2FsbCcpIHtcbiAgICAgICAgICAgIGl0ZW1zLnB1c2gobmV3IFJ1blRvb2xDYWxsSXRlbShvdXRwdXQsIGFnZW50KSk7XG4gICAgICAgICAgICB0b29sc1VzZWQucHVzaCgnc2hlbGwnKTtcbiAgICAgICAgICAgIGlmICghc2hlbGxUb29sKSB7XG4gICAgICAgICAgICAgICAgYWRkRXJyb3JUb0N1cnJlbnRTcGFuKHtcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ01vZGVsIHByb2R1Y2VkIHNoZWxsIGFjdGlvbiB3aXRob3V0IGEgc2hlbGwgdG9vbC4nLFxuICAgICAgICAgICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhZ2VudF9uYW1lOiBhZ2VudC5uYW1lLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBNb2RlbEJlaGF2aW9yRXJyb3IoJ01vZGVsIHByb2R1Y2VkIHNoZWxsIGFjdGlvbiB3aXRob3V0IGEgc2hlbGwgdG9vbC4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJ1blNoZWxsQWN0aW9ucy5wdXNoKHtcbiAgICAgICAgICAgICAgICB0b29sQ2FsbDogb3V0cHV0LFxuICAgICAgICAgICAgICAgIHNoZWxsOiBzaGVsbFRvb2wsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChvdXRwdXQudHlwZSA9PT0gJ2FwcGx5X3BhdGNoX2NhbGwnKSB7XG4gICAgICAgICAgICBpdGVtcy5wdXNoKG5ldyBSdW5Ub29sQ2FsbEl0ZW0ob3V0cHV0LCBhZ2VudCkpO1xuICAgICAgICAgICAgdG9vbHNVc2VkLnB1c2goJ2FwcGx5X3BhdGNoJyk7XG4gICAgICAgICAgICBpZiAoIWFwcGx5UGF0Y2hUb29sKSB7XG4gICAgICAgICAgICAgICAgYWRkRXJyb3JUb0N1cnJlbnRTcGFuKHtcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ01vZGVsIHByb2R1Y2VkIGFwcGx5X3BhdGNoIGFjdGlvbiB3aXRob3V0IGFuIGFwcGx5X3BhdGNoIHRvb2wuJyxcbiAgICAgICAgICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgICAgICAgICAgYWdlbnRfbmFtZTogYWdlbnQubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTW9kZWxCZWhhdmlvckVycm9yKCdNb2RlbCBwcm9kdWNlZCBhcHBseV9wYXRjaCBhY3Rpb24gd2l0aG91dCBhbiBhcHBseV9wYXRjaCB0b29sLicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcnVuQXBwbHlQYXRjaEFjdGlvbnMucHVzaCh7XG4gICAgICAgICAgICAgICAgdG9vbENhbGw6IG91dHB1dCxcbiAgICAgICAgICAgICAgICBhcHBseVBhdGNoOiBhcHBseVBhdGNoVG9vbCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGlmIChvdXRwdXQudHlwZSAhPT0gJ2Z1bmN0aW9uX2NhbGwnKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICB0b29sc1VzZWQucHVzaChvdXRwdXQubmFtZSk7XG4gICAgICAgIGNvbnN0IGhhbmRvZmYgPSBoYW5kb2ZmTWFwLmdldChvdXRwdXQubmFtZSk7XG4gICAgICAgIGlmIChoYW5kb2ZmKSB7XG4gICAgICAgICAgICBpdGVtcy5wdXNoKG5ldyBSdW5IYW5kb2ZmQ2FsbEl0ZW0ob3V0cHV0LCBhZ2VudCkpO1xuICAgICAgICAgICAgcnVuSGFuZG9mZnMucHVzaCh7XG4gICAgICAgICAgICAgICAgdG9vbENhbGw6IG91dHB1dCxcbiAgICAgICAgICAgICAgICBoYW5kb2ZmOiBoYW5kb2ZmLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBmdW5jdGlvblRvb2wgPSBmdW5jdGlvbk1hcC5nZXQob3V0cHV0Lm5hbWUpO1xuICAgICAgICAgICAgaWYgKCFmdW5jdGlvblRvb2wpIHtcbiAgICAgICAgICAgICAgICBhZGRFcnJvclRvQ3VycmVudFNwYW4oe1xuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBgVG9vbCAke291dHB1dC5uYW1lfSBub3QgZm91bmQgaW4gYWdlbnQgJHthZ2VudC5uYW1lfS5gLFxuICAgICAgICAgICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0b29sX25hbWU6IG91dHB1dC5uYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgYWdlbnRfbmFtZTogYWdlbnQubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTW9kZWxCZWhhdmlvckVycm9yKGBUb29sICR7b3V0cHV0Lm5hbWV9IG5vdCBmb3VuZCBpbiBhZ2VudCAke2FnZW50Lm5hbWV9LmApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaXRlbXMucHVzaChuZXcgUnVuVG9vbENhbGxJdGVtKG91dHB1dCwgYWdlbnQpKTtcbiAgICAgICAgICAgIHJ1bkZ1bmN0aW9ucy5wdXNoKHtcbiAgICAgICAgICAgICAgICB0b29sQ2FsbDogb3V0cHV0LFxuICAgICAgICAgICAgICAgIHRvb2w6IGZ1bmN0aW9uVG9vbCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICAgIG5ld0l0ZW1zOiBpdGVtcyxcbiAgICAgICAgaGFuZG9mZnM6IHJ1bkhhbmRvZmZzLFxuICAgICAgICBmdW5jdGlvbnM6IHJ1bkZ1bmN0aW9ucyxcbiAgICAgICAgY29tcHV0ZXJBY3Rpb25zOiBydW5Db21wdXRlckFjdGlvbnMsXG4gICAgICAgIHNoZWxsQWN0aW9uczogcnVuU2hlbGxBY3Rpb25zLFxuICAgICAgICBhcHBseVBhdGNoQWN0aW9uczogcnVuQXBwbHlQYXRjaEFjdGlvbnMsXG4gICAgICAgIG1jcEFwcHJvdmFsUmVxdWVzdHM6IHJ1bk1DUEFwcHJvdmFsUmVxdWVzdHMsXG4gICAgICAgIHRvb2xzVXNlZDogdG9vbHNVc2VkLFxuICAgICAgICBoYXNUb29sc09yQXBwcm92YWxzVG9SdW4oKSB7XG4gICAgICAgICAgICByZXR1cm4gKHJ1bkhhbmRvZmZzLmxlbmd0aCA+IDAgfHxcbiAgICAgICAgICAgICAgICBydW5GdW5jdGlvbnMubGVuZ3RoID4gMCB8fFxuICAgICAgICAgICAgICAgIHJ1bk1DUEFwcHJvdmFsUmVxdWVzdHMubGVuZ3RoID4gMCB8fFxuICAgICAgICAgICAgICAgIHJ1bkNvbXB1dGVyQWN0aW9ucy5sZW5ndGggPiAwIHx8XG4gICAgICAgICAgICAgICAgcnVuU2hlbGxBY3Rpb25zLmxlbmd0aCA+IDAgfHxcbiAgICAgICAgICAgICAgICBydW5BcHBseVBhdGNoQWN0aW9ucy5sZW5ndGggPiAwKTtcbiAgICAgICAgfSxcbiAgICB9O1xufVxuZXhwb3J0IGNvbnN0IG5leHRTdGVwU2NoZW1hID0gei5kaXNjcmltaW5hdGVkVW5pb24oJ3R5cGUnLCBbXG4gICAgei5vYmplY3Qoe1xuICAgICAgICB0eXBlOiB6LmxpdGVyYWwoJ25leHRfc3RlcF9oYW5kb2ZmJyksXG4gICAgICAgIG5ld0FnZW50OiB6LmFueSgpLFxuICAgIH0pLFxuICAgIHoub2JqZWN0KHtcbiAgICAgICAgdHlwZTogei5saXRlcmFsKCduZXh0X3N0ZXBfZmluYWxfb3V0cHV0JyksXG4gICAgICAgIG91dHB1dDogei5zdHJpbmcoKSxcbiAgICB9KSxcbiAgICB6Lm9iamVjdCh7XG4gICAgICAgIHR5cGU6IHoubGl0ZXJhbCgnbmV4dF9zdGVwX3J1bl9hZ2FpbicpLFxuICAgIH0pLFxuICAgIHoub2JqZWN0KHtcbiAgICAgICAgdHlwZTogei5saXRlcmFsKCduZXh0X3N0ZXBfaW50ZXJydXB0aW9uJyksXG4gICAgICAgIGRhdGE6IHoucmVjb3JkKHouc3RyaW5nKCksIHouYW55KCkpLFxuICAgIH0pLFxuXSk7XG4vKipcbiAqIEludGVybmFsIGNvbnZlbmllbmNlIHdyYXBwZXIgdGhhdCBncm91cHMgdGhlIG91dGNvbWUgb2YgYSBzaW5nbGUgYWdlbnQgdHVybi4gSXQgbGV0cyB0aGUgY2FsbGVyXG4gKiB1cGRhdGUgdGhlIFJ1blN0YXRlIGluIG9uZSBzaG90IGFuZCBkZWNpZGUgd2hpY2ggc3RlcCB0byBleGVjdXRlIG5leHQuXG4gKi9cbmNsYXNzIFNpbmdsZVN0ZXBSZXN1bHQge1xuICAgIG9yaWdpbmFsSW5wdXQ7XG4gICAgbW9kZWxSZXNwb25zZTtcbiAgICBwcmVTdGVwSXRlbXM7XG4gICAgbmV3U3RlcEl0ZW1zO1xuICAgIG5leHRTdGVwO1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKlxuICAgICAqIFRoZSBpbnB1dCBpdGVtcyAoaS5lLiwgdGhlIGl0ZW1zIGJlZm9yZSBydW4oKSB3YXMgY2FsbGVkKS4gTWF5IGJlIG11dGF0ZWQgYnkgaGFuZG9mZiBpbnB1dCBmaWx0ZXJzLlxuICAgICAqL1xuICAgIG9yaWdpbmFsSW5wdXQsIFxuICAgIC8qKlxuICAgICAqIFRoZSBtb2RlbCByZXNwb25zZSBmb3IgdGhlIGN1cnJlbnQgc3RlcFxuICAgICAqL1xuICAgIG1vZGVsUmVzcG9uc2UsIFxuICAgIC8qKlxuICAgICAqIFRoZSBpdGVtcyBiZWZvcmUgdGhlIGN1cnJlbnQgc3RlcCB3YXMgZXhlY3V0ZWRcbiAgICAgKi9cbiAgICBwcmVTdGVwSXRlbXMsIFxuICAgIC8qKlxuICAgICAqIFRoZSBpdGVtcyBhZnRlciB0aGUgY3VycmVudCBzdGVwIHdhcyBleGVjdXRlZFxuICAgICAqL1xuICAgIG5ld1N0ZXBJdGVtcywgXG4gICAgLyoqXG4gICAgICogVGhlIG5leHQgc3RlcCB0byBleGVjdXRlXG4gICAgICovXG4gICAgbmV4dFN0ZXApIHtcbiAgICAgICAgdGhpcy5vcmlnaW5hbElucHV0ID0gb3JpZ2luYWxJbnB1dDtcbiAgICAgICAgdGhpcy5tb2RlbFJlc3BvbnNlID0gbW9kZWxSZXNwb25zZTtcbiAgICAgICAgdGhpcy5wcmVTdGVwSXRlbXMgPSBwcmVTdGVwSXRlbXM7XG4gICAgICAgIHRoaXMubmV3U3RlcEl0ZW1zID0gbmV3U3RlcEl0ZW1zO1xuICAgICAgICB0aGlzLm5leHRTdGVwID0gbmV4dFN0ZXA7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBpdGVtcyBnZW5lcmF0ZWQgZHVyaW5nIHRoZSBhZ2VudCBydW4gKGkuZS4gZXZlcnl0aGluZyBnZW5lcmF0ZWQgYWZ0ZXIgb3JpZ2luYWxJbnB1dClcbiAgICAgKi9cbiAgICBnZXQgZ2VuZXJhdGVkSXRlbXMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByZVN0ZXBJdGVtcy5jb25jYXQodGhpcy5uZXdTdGVwSXRlbXMpO1xuICAgIH1cbn1cbi8qKlxuICogQGludGVybmFsXG4gKiBSZXNldHMgdGhlIHRvb2wgY2hvaWNlIHdoZW4gdGhlIGFnZW50IGlzIGNvbmZpZ3VyZWQgdG8gcHJlZmVyIGEgZnJlc2ggdG9vbCBzZWxlY3Rpb24gYWZ0ZXJcbiAqIGFueSB0b29sIHVzYWdlLiBUaGlzIHByZXZlbnRzIHRoZSBwcm92aWRlciBmcm9tIHJldXNpbmcgc3RhbGUgdG9vbCBoaW50cyBhY3Jvc3MgdHVybnMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBtYXliZVJlc2V0VG9vbENob2ljZShhZ2VudCwgdG9vbFVzZVRyYWNrZXIsIG1vZGVsU2V0dGluZ3MpIHtcbiAgICBpZiAoYWdlbnQucmVzZXRUb29sQ2hvaWNlICYmIHRvb2xVc2VUcmFja2VyLmhhc1VzZWRUb29scyhhZ2VudCkpIHtcbiAgICAgICAgcmV0dXJuIHsgLi4ubW9kZWxTZXR0aW5ncywgdG9vbENob2ljZTogdW5kZWZpbmVkIH07XG4gICAgfVxuICAgIHJldHVybiBtb2RlbFNldHRpbmdzO1xufVxuLyoqXG4gKiBAaW50ZXJuYWxcbiAqIENvbnRpbnVlcyBhIHR1cm4gdGhhdCB3YXMgcHJldmlvdXNseSBpbnRlcnJ1cHRlZCB3YWl0aW5nIGZvciB0b29sIGFwcHJvdmFsLiBFeGVjdXRlcyB0aGUgbm93XG4gKiBhcHByb3ZlZCB0b29scyBhbmQgcmV0dXJucyB0aGUgcmVzdWx0aW5nIHN0ZXAgdHJhbnNpdGlvbi5cbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHJlc29sdmVJbnRlcnJ1cHRlZFR1cm4oYWdlbnQsIG9yaWdpbmFsSW5wdXQsIG9yaWdpbmFsUHJlU3RlcEl0ZW1zLCBuZXdSZXNwb25zZSwgcHJvY2Vzc2VkUmVzcG9uc2UsIHJ1bm5lciwgc3RhdGUpIHtcbiAgICAvLyBjYWxsX2lkcyBmb3IgZnVuY3Rpb24gdG9vbHNcbiAgICBjb25zdCBmdW5jdGlvbkNhbGxJZHMgPSBvcmlnaW5hbFByZVN0ZXBJdGVtc1xuICAgICAgICAuZmlsdGVyKChpdGVtKSA9PiBpdGVtIGluc3RhbmNlb2YgUnVuVG9vbEFwcHJvdmFsSXRlbSAmJlxuICAgICAgICAnY2FsbElkJyBpbiBpdGVtLnJhd0l0ZW0gJiZcbiAgICAgICAgaXRlbS5yYXdJdGVtLnR5cGUgPT09ICdmdW5jdGlvbl9jYWxsJylcbiAgICAgICAgLm1hcCgoaXRlbSkgPT4gaXRlbS5yYXdJdGVtLmNhbGxJZCk7XG4gICAgLy8gV2UgYWxyZWFkeSBwZXJzaXN0ZWQgdGhlIHR1cm4gb25jZSB3aGVuIHRoZSBhcHByb3ZhbCBpbnRlcnJ1cHQgd2FzIHJhaXNlZCwgc28gdGhlXG4gICAgLy8gY291bnRlciByZWZsZWN0cyB0aGUgYXBwcm92YWwgaXRlbXMgYXMgXCJmbHVzaGVkXCIuIFdoZW4gd2UgcmVzdW1lIHRoZSBzYW1lIHR1cm4gd2UgbmVlZFxuICAgIC8vIHRvIHJld2luZCBpdCBzbyB0aGUgZXZlbnR1YWwgdG9vbCBvdXRwdXQgZm9yIHRoaXMgY2FsbCBpcyBzdGlsbCB3cml0dGVuIHRvIHRoZSBzZXNzaW9uLlxuICAgIGNvbnN0IHBlbmRpbmdBcHByb3ZhbEl0ZW1zID0gc3RhdGVcbiAgICAgICAgLmdldEludGVycnVwdGlvbnMoKVxuICAgICAgICAuZmlsdGVyKGlzQXBwcm92YWxJdGVtTGlrZSk7XG4gICAgaWYgKHBlbmRpbmdBcHByb3ZhbEl0ZW1zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgY29uc3QgcGVuZGluZ0FwcHJvdmFsSWRlbnRpdGllcyA9IG5ldyBTZXQoKTtcbiAgICAgICAgZm9yIChjb25zdCBhcHByb3ZhbCBvZiBwZW5kaW5nQXBwcm92YWxJdGVtcykge1xuICAgICAgICAgICAgY29uc3QgaWRlbnRpdHkgPSBnZXRBcHByb3ZhbElkZW50aXR5KGFwcHJvdmFsKTtcbiAgICAgICAgICAgIGlmIChpZGVudGl0eSkge1xuICAgICAgICAgICAgICAgIHBlbmRpbmdBcHByb3ZhbElkZW50aXRpZXMuYWRkKGlkZW50aXR5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAocGVuZGluZ0FwcHJvdmFsSWRlbnRpdGllcy5zaXplID4gMCkge1xuICAgICAgICAgICAgbGV0IHJld2luZENvdW50ID0gMDtcbiAgICAgICAgICAgIGZvciAobGV0IGluZGV4ID0gb3JpZ2luYWxQcmVTdGVwSXRlbXMubGVuZ3RoIC0gMTsgaW5kZXggPj0gMDsgaW5kZXgtLSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGl0ZW0gPSBvcmlnaW5hbFByZVN0ZXBJdGVtc1tpbmRleF07XG4gICAgICAgICAgICAgICAgaWYgKCEoaXRlbSBpbnN0YW5jZW9mIFJ1blRvb2xBcHByb3ZhbEl0ZW0pKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCBpZGVudGl0eSA9IGdldEFwcHJvdmFsSWRlbnRpdHkoaXRlbSk7XG4gICAgICAgICAgICAgICAgaWYgKCFpZGVudGl0eSkge1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKCFwZW5kaW5nQXBwcm92YWxJZGVudGl0aWVzLmhhcyhpZGVudGl0eSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJld2luZENvdW50Kys7XG4gICAgICAgICAgICAgICAgcGVuZGluZ0FwcHJvdmFsSWRlbnRpdGllcy5kZWxldGUoaWRlbnRpdHkpO1xuICAgICAgICAgICAgICAgIGlmIChwZW5kaW5nQXBwcm92YWxJZGVudGl0aWVzLnNpemUgPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gUGVyc2lzdGluZyB0aGUgYXBwcm92YWwgcmVxdWVzdCBhbHJlYWR5IGFkdmFuY2VkIHRoZSBjb3VudGVyIG9uY2UsIHNvIHVuZG8gdGhlIGluY3JlbWVudFxuICAgICAgICAgICAgLy8gdG8gbWFrZSBzdXJlIHdlIHdyaXRlIHRoZSBmaW5hbCB0b29sIG91dHB1dCBiYWNrIHRvIHRoZSBzZXNzaW9uIHdoZW4gdGhlIHR1cm4gcmVzdW1lcy5cbiAgICAgICAgICAgIGlmIChyZXdpbmRDb3VudCA+IDApIHtcbiAgICAgICAgICAgICAgICBzdGF0ZS5fY3VycmVudFR1cm5QZXJzaXN0ZWRJdGVtQ291bnQgPSBNYXRoLm1heCgwLCBzdGF0ZS5fY3VycmVudFR1cm5QZXJzaXN0ZWRJdGVtQ291bnQgLSByZXdpbmRDb3VudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgLy8gUnVuIGZ1bmN0aW9uIHRvb2xzIHRoYXQgcmVxdWlyZSBhcHByb3ZhbCBhZnRlciB0aGV5IGdldCB0aGVpciBhcHByb3ZhbCByZXN1bHRzXG4gICAgY29uc3QgZnVuY3Rpb25Ub29sUnVucyA9IHByb2Nlc3NlZFJlc3BvbnNlLmZ1bmN0aW9ucy5maWx0ZXIoKHJ1bikgPT4ge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb25DYWxsSWRzLmluY2x1ZGVzKHJ1bi50b29sQ2FsbC5jYWxsSWQpO1xuICAgIH0pO1xuICAgIGNvbnN0IGZ1bmN0aW9uUmVzdWx0cyA9IGF3YWl0IGV4ZWN1dGVGdW5jdGlvblRvb2xDYWxscyhhZ2VudCwgZnVuY3Rpb25Ub29sUnVucywgcnVubmVyLCBzdGF0ZSk7XG4gICAgLy8gVGhlcmUgaXMgbm8gYnVpbHQtaW4gSElUTCBhcHByb3ZhbCBzdXJmYWNlIGZvciBjb21wdXRlciB0b29scyB0b2RheSwgc28gZXZlcnkgcGVuZGluZyBhY3Rpb25cbiAgICAvLyBpcyBleGVjdXRlZCBpbW1lZGlhdGVseSB3aGVuIHRoZSB0dXJuIHJlc3VtZXMuXG4gICAgY29uc3QgY29tcHV0ZXJSZXN1bHRzID0gcHJvY2Vzc2VkUmVzcG9uc2UuY29tcHV0ZXJBY3Rpb25zLmxlbmd0aCA+IDBcbiAgICAgICAgPyBhd2FpdCBleGVjdXRlQ29tcHV0ZXJBY3Rpb25zKGFnZW50LCBwcm9jZXNzZWRSZXNwb25zZS5jb21wdXRlckFjdGlvbnMsIHJ1bm5lciwgc3RhdGUuX2NvbnRleHQpXG4gICAgICAgIDogW107XG4gICAgLy8gV2hlbiByZXN1bWluZyB3ZSByZWNlaXZlIHRoZSBvcmlnaW5hbCBSdW5JdGVtIHJlZmVyZW5jZXM7IHN1cHByZXNzIGR1cGxpY2F0ZXMgc28gaGlzdG9yeSBhbmQgc3RyZWFtaW5nIGRvIG5vdCBkb3VibGUtZW1pdCB0aGUgc2FtZSBpdGVtcy5cbiAgICBjb25zdCBvcmlnaW5hbFByZVN0ZXBJdGVtU2V0ID0gbmV3IFNldChvcmlnaW5hbFByZVN0ZXBJdGVtcyk7XG4gICAgY29uc3QgbmV3SXRlbXMgPSBbXTtcbiAgICBjb25zdCBuZXdJdGVtc1NldCA9IG5ldyBTZXQoKTtcbiAgICBjb25zdCBhcHBlbmRJZk5ldyA9IChpdGVtKSA9PiB7XG4gICAgICAgIGlmIChvcmlnaW5hbFByZVN0ZXBJdGVtU2V0LmhhcyhpdGVtKSB8fCBuZXdJdGVtc1NldC5oYXMoaXRlbSkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBuZXdJdGVtcy5wdXNoKGl0ZW0pO1xuICAgICAgICBuZXdJdGVtc1NldC5hZGQoaXRlbSk7XG4gICAgfTtcbiAgICBmb3IgKGNvbnN0IHJlc3VsdCBvZiBmdW5jdGlvblJlc3VsdHMpIHtcbiAgICAgICAgYXBwZW5kSWZOZXcocmVzdWx0LnJ1bkl0ZW0pO1xuICAgIH1cbiAgICBmb3IgKGNvbnN0IHJlc3VsdCBvZiBjb21wdXRlclJlc3VsdHMpIHtcbiAgICAgICAgYXBwZW5kSWZOZXcocmVzdWx0KTtcbiAgICB9XG4gICAgLy8gUnVuIE1DUCB0b29scyB0aGF0IHJlcXVpcmUgYXBwcm92YWwgYWZ0ZXIgdGhleSBnZXQgdGhlaXIgYXBwcm92YWwgcmVzdWx0c1xuICAgIGNvbnN0IG1jcEFwcHJvdmFsUnVucyA9IHByb2Nlc3NlZFJlc3BvbnNlLm1jcEFwcHJvdmFsUmVxdWVzdHMuZmlsdGVyKChydW4pID0+IHtcbiAgICAgICAgcmV0dXJuIChydW4ucmVxdWVzdEl0ZW0udHlwZSA9PT0gJ3Rvb2xfYXBwcm92YWxfaXRlbScgJiZcbiAgICAgICAgICAgIHJ1bi5yZXF1ZXN0SXRlbS5yYXdJdGVtLnR5cGUgPT09ICdob3N0ZWRfdG9vbF9jYWxsJyAmJlxuICAgICAgICAgICAgcnVuLnJlcXVlc3RJdGVtLnJhd0l0ZW0ucHJvdmlkZXJEYXRhPy50eXBlID09PSAnbWNwX2FwcHJvdmFsX3JlcXVlc3QnKTtcbiAgICB9KTtcbiAgICAvLyBIb3N0ZWQgTUNQIGFwcHJvdmFscyBtYXkgc3RpbGwgYmUgd2FpdGluZyBvbiBhIGh1bWFuIGRlY2lzaW9uIHdoZW4gdGhlIHR1cm4gcmVzdW1lcy5cbiAgICBjb25zdCBwZW5kaW5nSG9zdGVkTUNQQXBwcm92YWxzID0gbmV3IFNldCgpO1xuICAgIGNvbnN0IHBlbmRpbmdIb3N0ZWRNQ1BBcHByb3ZhbElkcyA9IG5ldyBTZXQoKTtcbiAgICAvLyBLZWVwIHRyYWNrIG9mIGFwcHJvdmFscyB3ZSBzdGlsbCBuZWVkIHRvIHN1cmZhY2UgbmV4dCB0dXJuIHNvIEhJVEwgZmxvd3MgY2FuIHJlc3VtZSBjbGVhbmx5LlxuICAgIGZvciAoY29uc3QgcnVuIG9mIG1jcEFwcHJvdmFsUnVucykge1xuICAgICAgICAvLyB0aGUgYXBwcm92YWxfcmVxdWVzdF9pZCBcIm1jcHJfMTIzLi4uXCJcbiAgICAgICAgY29uc3QgcmF3SXRlbSA9IHJ1bi5yZXF1ZXN0SXRlbS5yYXdJdGVtO1xuICAgICAgICBpZiAocmF3SXRlbS50eXBlICE9PSAnaG9zdGVkX3Rvb2xfY2FsbCcpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGFwcHJvdmFsUmVxdWVzdElkID0gcmF3SXRlbS5pZDtcbiAgICAgICAgY29uc3QgYXBwcm92ZWQgPSBzdGF0ZS5fY29udGV4dC5pc1Rvb2xBcHByb3ZlZCh7XG4gICAgICAgICAgICAvLyBTaW5jZSB0aGlzIGl0ZW0gbmFtZSBtdXN0IGJlIHRoZSBzYW1lIHdpdGggdGhlIG9uZSBzZW50IGZyb20gUmVzcG9uc2VzIEFQSSBzZXJ2ZXJcbiAgICAgICAgICAgIHRvb2xOYW1lOiByYXdJdGVtLm5hbWUsXG4gICAgICAgICAgICBjYWxsSWQ6IGFwcHJvdmFsUmVxdWVzdElkLFxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKHR5cGVvZiBhcHByb3ZlZCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIGNvbnN0IHByb3ZpZGVyRGF0YSA9IHtcbiAgICAgICAgICAgICAgICBhcHByb3ZlOiBhcHByb3ZlZCxcbiAgICAgICAgICAgICAgICBhcHByb3ZhbF9yZXF1ZXN0X2lkOiBhcHByb3ZhbFJlcXVlc3RJZCxcbiAgICAgICAgICAgICAgICByZWFzb246IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICAvLyBUZWxsIFJlc3BvbnNlcyBBUEkgc2VydmVyIHRoZSBhcHByb3ZhbCByZXN1bHQgaW4gdGhlIG5leHQgdHVyblxuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2VJdGVtID0gbmV3IFJ1blRvb2xDYWxsSXRlbSh7XG4gICAgICAgICAgICAgICAgdHlwZTogJ2hvc3RlZF90b29sX2NhbGwnLFxuICAgICAgICAgICAgICAgIG5hbWU6ICdtY3BfYXBwcm92YWxfcmVzcG9uc2UnLFxuICAgICAgICAgICAgICAgIHByb3ZpZGVyRGF0YSxcbiAgICAgICAgICAgIH0sIGFnZW50KTtcbiAgICAgICAgICAgIGFwcGVuZElmTmV3KHJlc3BvbnNlSXRlbSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBwZW5kaW5nSG9zdGVkTUNQQXBwcm92YWxzLmFkZChydW4ucmVxdWVzdEl0ZW0pO1xuICAgICAgICAgICAgcGVuZGluZ0hvc3RlZE1DUEFwcHJvdmFsSWRzLmFkZChhcHByb3ZhbFJlcXVlc3RJZCk7XG4gICAgICAgICAgICBmdW5jdGlvblJlc3VsdHMucHVzaCh7XG4gICAgICAgICAgICAgICAgdHlwZTogJ2hvc3RlZF9tY3BfdG9vbF9hcHByb3ZhbCcsXG4gICAgICAgICAgICAgICAgdG9vbDogcnVuLm1jcFRvb2wsXG4gICAgICAgICAgICAgICAgcnVuSXRlbTogcnVuLnJlcXVlc3RJdGVtLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBhcHBlbmRJZk5ldyhydW4ucmVxdWVzdEl0ZW0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8vIFNlcnZlci1tYW5hZ2VkIGNvbnZlcnNhdGlvbnMgcmVseSBvbiBwcmVTdGVwSXRlbXMgdG8gcmUtc3VyZmFjZSBwZW5kaW5nIGFwcHJvdmFscy5cbiAgICAvLyBLZWVwIHVucmVzb2x2ZWQgaG9zdGVkIE1DUCBhcHByb3ZhbHMgaW4gcGxhY2Ugc28gSElUTCBmbG93cyBzdGlsbCBoYXZlIHNvbWV0aGluZyB0byBhcHByb3ZlIG5leHQgdHVybi5cbiAgICAvLyBEcm9wIHJlc29sdmVkIGFwcHJvdmFsIHBsYWNlaG9sZGVycyBzbyB0aGV5IGFyZSBub3QgcmVwbGF5ZWQgb24gdGhlIG5leHQgdHVybiwgYnV0IGtlZXBcbiAgICAvLyBwZW5kaW5nIGFwcHJvdmFscyBpbiBwbGFjZSB0byBzaWduYWwgdGhlIG91dHN0YW5kaW5nIHdvcmsgdG8gdGhlIFVJIGFuZCBzZXNzaW9uIHN0b3JlLlxuICAgIGNvbnN0IHByZVN0ZXBJdGVtcyA9IG9yaWdpbmFsUHJlU3RlcEl0ZW1zLmZpbHRlcigoaXRlbSkgPT4ge1xuICAgICAgICBpZiAoIShpdGVtIGluc3RhbmNlb2YgUnVuVG9vbEFwcHJvdmFsSXRlbSkpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpdGVtLnJhd0l0ZW0udHlwZSA9PT0gJ2hvc3RlZF90b29sX2NhbGwnICYmXG4gICAgICAgICAgICBpdGVtLnJhd0l0ZW0ucHJvdmlkZXJEYXRhPy50eXBlID09PSAnbWNwX2FwcHJvdmFsX3JlcXVlc3QnKSB7XG4gICAgICAgICAgICBpZiAocGVuZGluZ0hvc3RlZE1DUEFwcHJvdmFscy5oYXMoaXRlbSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGFwcHJvdmFsUmVxdWVzdElkID0gaXRlbS5yYXdJdGVtLmlkO1xuICAgICAgICAgICAgaWYgKGFwcHJvdmFsUmVxdWVzdElkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHBlbmRpbmdIb3N0ZWRNQ1BBcHByb3ZhbElkcy5oYXMoYXBwcm92YWxSZXF1ZXN0SWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9KTtcbiAgICBjb25zdCBjb21wbGV0ZWRTdGVwID0gYXdhaXQgbWF5YmVDb21wbGV0ZVR1cm5Gcm9tVG9vbFJlc3VsdHMoe1xuICAgICAgICBhZ2VudCxcbiAgICAgICAgcnVubmVyLFxuICAgICAgICBzdGF0ZSxcbiAgICAgICAgZnVuY3Rpb25SZXN1bHRzLFxuICAgICAgICBvcmlnaW5hbElucHV0LFxuICAgICAgICBuZXdSZXNwb25zZSxcbiAgICAgICAgcHJlU3RlcEl0ZW1zLFxuICAgICAgICBuZXdJdGVtcyxcbiAgICB9KTtcbiAgICBpZiAoY29tcGxldGVkU3RlcCkge1xuICAgICAgICByZXR1cm4gY29tcGxldGVkU3RlcDtcbiAgICB9XG4gICAgLy8gd2Ugb25seSByYW4gbmV3IHRvb2xzIGFuZCBzaWRlIGVmZmVjdHMuIFdlIG5lZWQgdG8gcnVuIHRoZSByZXN0IG9mIHRoZSBhZ2VudFxuICAgIHJldHVybiBuZXcgU2luZ2xlU3RlcFJlc3VsdChvcmlnaW5hbElucHV0LCBuZXdSZXNwb25zZSwgcHJlU3RlcEl0ZW1zLCBuZXdJdGVtcywgeyB0eXBlOiAnbmV4dF9zdGVwX3J1bl9hZ2FpbicgfSk7XG59XG4vKipcbiAqIEBpbnRlcm5hbFxuICogRXhlY3V0ZXMgZXZlcnkgZm9sbG93LXVwIGFjdGlvbiB0aGUgbW9kZWwgcmVxdWVzdGVkIChmdW5jdGlvbiB0b29scywgY29tcHV0ZXIgYWN0aW9ucywgTUNQIGZsb3dzKSxcbiAqIGFwcGVuZHMgdGhlaXIgb3V0cHV0cyB0byB0aGUgcnVuIGhpc3RvcnksIGFuZCBkZXRlcm1pbmVzIHRoZSBuZXh0IHN0ZXAgZm9yIHRoZSBhZ2VudCBsb29wLlxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcmVzb2x2ZVR1cm5BZnRlck1vZGVsUmVzcG9uc2UoYWdlbnQsIG9yaWdpbmFsSW5wdXQsIG9yaWdpbmFsUHJlU3RlcEl0ZW1zLCBuZXdSZXNwb25zZSwgcHJvY2Vzc2VkUmVzcG9uc2UsIHJ1bm5lciwgc3RhdGUpIHtcbiAgICAvLyBSZXVzZSB0aGUgc2FtZSBhcnJheSByZWZlcmVuY2Ugc28gd2UgY2FuIGNvbXBhcmUgb2JqZWN0IGlkZW50aXR5IHdoZW4gZGVjaWRpbmcgd2hldGhlciB0b1xuICAgIC8vIGFwcGVuZCBuZXcgaXRlbXMsIGVuc3VyaW5nIHdlIG5ldmVyIGRvdWJsZS1zdHJlYW0gZXhpc3RpbmcgUnVuSXRlbXMuXG4gICAgY29uc3QgcHJlU3RlcEl0ZW1zID0gb3JpZ2luYWxQcmVTdGVwSXRlbXM7XG4gICAgY29uc3Qgc2Vlbkl0ZW1zID0gbmV3IFNldChvcmlnaW5hbFByZVN0ZXBJdGVtcyk7XG4gICAgY29uc3QgbmV3SXRlbXMgPSBbXTtcbiAgICBjb25zdCBhcHBlbmRJZk5ldyA9IChpdGVtKSA9PiB7XG4gICAgICAgIGlmIChzZWVuSXRlbXMuaGFzKGl0ZW0pKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgbmV3SXRlbXMucHVzaChpdGVtKTtcbiAgICAgICAgc2Vlbkl0ZW1zLmFkZChpdGVtKTtcbiAgICB9O1xuICAgIGZvciAoY29uc3QgaXRlbSBvZiBwcm9jZXNzZWRSZXNwb25zZS5uZXdJdGVtcykge1xuICAgICAgICBhcHBlbmRJZk5ldyhpdGVtKTtcbiAgICB9XG4gICAgLy8gUnVuIGZ1bmN0aW9uIHRvb2xzIGFuZCBjb21wdXRlciBhY3Rpb25zIGluIHBhcmFsbGVsOyBuZWl0aGVyIGRlcGVuZHMgb24gdGhlIG90aGVyJ3Mgc2lkZSBlZmZlY3RzLlxuICAgIGNvbnN0IFtmdW5jdGlvblJlc3VsdHMsIGNvbXB1dGVyUmVzdWx0cywgc2hlbGxSZXN1bHRzLCBhcHBseVBhdGNoUmVzdWx0c10gPSBhd2FpdCBQcm9taXNlLmFsbChbXG4gICAgICAgIGV4ZWN1dGVGdW5jdGlvblRvb2xDYWxscyhhZ2VudCwgcHJvY2Vzc2VkUmVzcG9uc2UuZnVuY3Rpb25zLCBydW5uZXIsIHN0YXRlKSxcbiAgICAgICAgZXhlY3V0ZUNvbXB1dGVyQWN0aW9ucyhhZ2VudCwgcHJvY2Vzc2VkUmVzcG9uc2UuY29tcHV0ZXJBY3Rpb25zLCBydW5uZXIsIHN0YXRlLl9jb250ZXh0KSxcbiAgICAgICAgZXhlY3V0ZVNoZWxsQWN0aW9ucyhhZ2VudCwgcHJvY2Vzc2VkUmVzcG9uc2Uuc2hlbGxBY3Rpb25zLCBydW5uZXIsIHN0YXRlLl9jb250ZXh0KSxcbiAgICAgICAgZXhlY3V0ZUFwcGx5UGF0Y2hPcGVyYXRpb25zKGFnZW50LCBwcm9jZXNzZWRSZXNwb25zZS5hcHBseVBhdGNoQWN0aW9ucywgcnVubmVyLCBzdGF0ZS5fY29udGV4dCksXG4gICAgXSk7XG4gICAgZm9yIChjb25zdCByZXN1bHQgb2YgZnVuY3Rpb25SZXN1bHRzKSB7XG4gICAgICAgIGFwcGVuZElmTmV3KHJlc3VsdC5ydW5JdGVtKTtcbiAgICB9XG4gICAgZm9yIChjb25zdCBpdGVtIG9mIGNvbXB1dGVyUmVzdWx0cykge1xuICAgICAgICBhcHBlbmRJZk5ldyhpdGVtKTtcbiAgICB9XG4gICAgZm9yIChjb25zdCBpdGVtIG9mIHNoZWxsUmVzdWx0cykge1xuICAgICAgICBhcHBlbmRJZk5ldyhpdGVtKTtcbiAgICB9XG4gICAgZm9yIChjb25zdCBpdGVtIG9mIGFwcGx5UGF0Y2hSZXN1bHRzKSB7XG4gICAgICAgIGFwcGVuZElmTmV3KGl0ZW0pO1xuICAgIH1cbiAgICAvLyBydW4gaG9zdGVkIE1DUCBhcHByb3ZhbCByZXF1ZXN0c1xuICAgIGlmIChwcm9jZXNzZWRSZXNwb25zZS5tY3BBcHByb3ZhbFJlcXVlc3RzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgZm9yIChjb25zdCBhcHByb3ZhbFJlcXVlc3Qgb2YgcHJvY2Vzc2VkUmVzcG9uc2UubWNwQXBwcm92YWxSZXF1ZXN0cykge1xuICAgICAgICAgICAgY29uc3QgdG9vbERhdGEgPSBhcHByb3ZhbFJlcXVlc3QubWNwVG9vbFxuICAgICAgICAgICAgICAgIC5wcm92aWRlckRhdGE7XG4gICAgICAgICAgICBjb25zdCByZXF1ZXN0RGF0YSA9IGFwcHJvdmFsUmVxdWVzdC5yZXF1ZXN0SXRlbS5yYXdJdGVtXG4gICAgICAgICAgICAgICAgLnByb3ZpZGVyRGF0YTtcbiAgICAgICAgICAgIGlmICh0b29sRGF0YS5vbl9hcHByb3ZhbCkge1xuICAgICAgICAgICAgICAgIC8vIHN5bmNocm9ub3VzbHkgaGFuZGxlIHRoZSBhcHByb3ZhbCBwcm9jZXNzIGhlcmVcbiAgICAgICAgICAgICAgICBjb25zdCBhcHByb3ZhbFJlc3VsdCA9IGF3YWl0IHRvb2xEYXRhLm9uX2FwcHJvdmFsKHN0YXRlLl9jb250ZXh0LCBhcHByb3ZhbFJlcXVlc3QucmVxdWVzdEl0ZW0pO1xuICAgICAgICAgICAgICAgIGNvbnN0IGFwcHJvdmFsUmVzcG9uc2VEYXRhID0ge1xuICAgICAgICAgICAgICAgICAgICBhcHByb3ZlOiBhcHByb3ZhbFJlc3VsdC5hcHByb3ZlLFxuICAgICAgICAgICAgICAgICAgICBhcHByb3ZhbF9yZXF1ZXN0X2lkOiByZXF1ZXN0RGF0YS5pZCxcbiAgICAgICAgICAgICAgICAgICAgcmVhc29uOiBhcHByb3ZhbFJlc3VsdC5yZWFzb24sXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBuZXdJdGVtcy5wdXNoKG5ldyBSdW5Ub29sQ2FsbEl0ZW0oe1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiAnaG9zdGVkX3Rvb2xfY2FsbCcsXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6ICdtY3BfYXBwcm92YWxfcmVzcG9uc2UnLFxuICAgICAgICAgICAgICAgICAgICBwcm92aWRlckRhdGE6IGFwcHJvdmFsUmVzcG9uc2VEYXRhLFxuICAgICAgICAgICAgICAgIH0sIGFnZW50KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyByZWNlaXZlIGEgdXNlcidzIGFwcHJvdmFsIG9uIHRoZSBuZXh0IHR1cm5cbiAgICAgICAgICAgICAgICBuZXdJdGVtcy5wdXNoKGFwcHJvdmFsUmVxdWVzdC5yZXF1ZXN0SXRlbSk7XG4gICAgICAgICAgICAgICAgY29uc3QgYXBwcm92YWxJdGVtID0ge1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiAnaG9zdGVkX21jcF90b29sX2FwcHJvdmFsJyxcbiAgICAgICAgICAgICAgICAgICAgdG9vbDogYXBwcm92YWxSZXF1ZXN0Lm1jcFRvb2wsXG4gICAgICAgICAgICAgICAgICAgIHJ1bkl0ZW06IG5ldyBSdW5Ub29sQXBwcm92YWxJdGVtKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdob3N0ZWRfdG9vbF9jYWxsJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IHJlcXVlc3REYXRhLm5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBpZDogcmVxdWVzdERhdGEuaWQsXG4gICAgICAgICAgICAgICAgICAgICAgICBhcmd1bWVudHM6IHJlcXVlc3REYXRhLmFyZ3VtZW50cyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXR1czogJ2luX3Byb2dyZXNzJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb3ZpZGVyRGF0YTogcmVxdWVzdERhdGEsXG4gICAgICAgICAgICAgICAgICAgIH0sIGFnZW50KSxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGZ1bmN0aW9uUmVzdWx0cy5wdXNoKGFwcHJvdmFsSXRlbSk7XG4gICAgICAgICAgICAgICAgLy8gbmV3SXRlbXMucHVzaChhcHByb3ZhbEl0ZW0ucnVuSXRlbSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgLy8gcHJvY2VzcyBoYW5kb2Zmc1xuICAgIGlmIChwcm9jZXNzZWRSZXNwb25zZS5oYW5kb2Zmcy5sZW5ndGggPiAwKSB7XG4gICAgICAgIHJldHVybiBhd2FpdCBleGVjdXRlSGFuZG9mZkNhbGxzKGFnZW50LCBvcmlnaW5hbElucHV0LCBwcmVTdGVwSXRlbXMsIG5ld0l0ZW1zLCBuZXdSZXNwb25zZSwgcHJvY2Vzc2VkUmVzcG9uc2UuaGFuZG9mZnMsIHJ1bm5lciwgc3RhdGUuX2NvbnRleHQpO1xuICAgIH1cbiAgICBjb25zdCBjb21wbGV0ZWRTdGVwID0gYXdhaXQgbWF5YmVDb21wbGV0ZVR1cm5Gcm9tVG9vbFJlc3VsdHMoe1xuICAgICAgICBhZ2VudCxcbiAgICAgICAgcnVubmVyLFxuICAgICAgICBzdGF0ZSxcbiAgICAgICAgZnVuY3Rpb25SZXN1bHRzLFxuICAgICAgICBvcmlnaW5hbElucHV0LFxuICAgICAgICBuZXdSZXNwb25zZSxcbiAgICAgICAgcHJlU3RlcEl0ZW1zLFxuICAgICAgICBuZXdJdGVtcyxcbiAgICB9KTtcbiAgICBpZiAoY29tcGxldGVkU3RlcCkge1xuICAgICAgICByZXR1cm4gY29tcGxldGVkU3RlcDtcbiAgICB9XG4gICAgLy8gSWYgdGhlIG1vZGVsIGlzc3VlZCBhbnkgdG9vbCBjYWxscyBvciBoYW5kb2ZmcyBpbiB0aGlzIHR1cm4sXG4gICAgLy8gd2UgbXVzdCBOT1QgdHJlYXQgYW55IGFzc2lzdGFudCBtZXNzYWdlIGluIHRoZSBzYW1lIHR1cm4gYXMgdGhlIGZpbmFsIG91dHB1dC5cbiAgICAvLyBXZSBzaG91bGQgcnVuIHRoZSBsb29wIGFnYWluIHNvIHRoZSBtb2RlbCBjYW4gc2VlIHRoZSB0b29sIHJlc3VsdHMgYW5kIHJlc3BvbmQuXG4gICAgY29uc3QgaGFkVG9vbENhbGxzT3JBY3Rpb25zID0gKHByb2Nlc3NlZFJlc3BvbnNlLmZ1bmN0aW9ucz8ubGVuZ3RoID8/IDApID4gMCB8fFxuICAgICAgICAocHJvY2Vzc2VkUmVzcG9uc2UuY29tcHV0ZXJBY3Rpb25zPy5sZW5ndGggPz8gMCkgPiAwIHx8XG4gICAgICAgIChwcm9jZXNzZWRSZXNwb25zZS5zaGVsbEFjdGlvbnM/Lmxlbmd0aCA/PyAwKSA+IDAgfHxcbiAgICAgICAgKHByb2Nlc3NlZFJlc3BvbnNlLmFwcGx5UGF0Y2hBY3Rpb25zPy5sZW5ndGggPz8gMCkgPiAwIHx8XG4gICAgICAgIChwcm9jZXNzZWRSZXNwb25zZS5tY3BBcHByb3ZhbFJlcXVlc3RzPy5sZW5ndGggPz8gMCkgPiAwIHx8XG4gICAgICAgIChwcm9jZXNzZWRSZXNwb25zZS5oYW5kb2Zmcz8ubGVuZ3RoID8/IDApID4gMDtcbiAgICBpZiAoaGFkVG9vbENhbGxzT3JBY3Rpb25zKSB7XG4gICAgICAgIHJldHVybiBuZXcgU2luZ2xlU3RlcFJlc3VsdChvcmlnaW5hbElucHV0LCBuZXdSZXNwb25zZSwgcHJlU3RlcEl0ZW1zLCBuZXdJdGVtcywgeyB0eXBlOiAnbmV4dF9zdGVwX3J1bl9hZ2FpbicgfSk7XG4gICAgfVxuICAgIC8vIE5vIHRvb2wgY2FsbHMvYWN0aW9ucyBpbiB0aGlzIHR1cm47IHNhZmUgdG8gY29uc2lkZXIgYSBwbGFpbiBhc3Npc3RhbnQgbWVzc2FnZSBhcyBmaW5hbC5cbiAgICBjb25zdCBtZXNzYWdlSXRlbXMgPSBuZXdJdGVtcy5maWx0ZXIoKGl0ZW0pID0+IGl0ZW0gaW5zdGFuY2VvZiBSdW5NZXNzYWdlT3V0cHV0SXRlbSk7XG4gICAgLy8gd2Ugd2lsbCB1c2UgdGhlIGxhc3QgY29udGVudCBvdXRwdXQgYXMgdGhlIGZpbmFsIG91dHB1dFxuICAgIGNvbnN0IHBvdGVudGlhbEZpbmFsT3V0cHV0ID0gbWVzc2FnZUl0ZW1zLmxlbmd0aCA+IDBcbiAgICAgICAgPyBnZXRMYXN0VGV4dEZyb21PdXRwdXRNZXNzYWdlKG1lc3NhZ2VJdGVtc1ttZXNzYWdlSXRlbXMubGVuZ3RoIC0gMV0ucmF3SXRlbSlcbiAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgLy8gaWYgdGhlcmUgaXMgbm8gb3V0cHV0IHdlIGp1c3QgcnVuIGFnYWluXG4gICAgaWYgKHR5cGVvZiBwb3RlbnRpYWxGaW5hbE91dHB1dCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBTaW5nbGVTdGVwUmVzdWx0KG9yaWdpbmFsSW5wdXQsIG5ld1Jlc3BvbnNlLCBwcmVTdGVwSXRlbXMsIG5ld0l0ZW1zLCB7IHR5cGU6ICduZXh0X3N0ZXBfcnVuX2FnYWluJyB9KTtcbiAgICB9XG4gICAgLy8gS2VlcCBsb29waW5nIGlmIGFueSB0b29sIG91dHB1dCBwbGFjZWhvbGRlcnMgc3RpbGwgcmVxdWlyZSBhbiBhcHByb3ZhbCBmb2xsb3ctdXAuXG4gICAgY29uc3QgaGFzUGVuZGluZ1Rvb2xzT3JBcHByb3ZhbHMgPSBmdW5jdGlvblJlc3VsdHMuc29tZSgocmVzdWx0KSA9PiByZXN1bHQucnVuSXRlbSBpbnN0YW5jZW9mIFJ1blRvb2xBcHByb3ZhbEl0ZW0pO1xuICAgIGlmICghaGFzUGVuZGluZ1Rvb2xzT3JBcHByb3ZhbHMpIHtcbiAgICAgICAgaWYgKGFnZW50Lm91dHB1dFR5cGUgPT09ICd0ZXh0Jykge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBTaW5nbGVTdGVwUmVzdWx0KG9yaWdpbmFsSW5wdXQsIG5ld1Jlc3BvbnNlLCBwcmVTdGVwSXRlbXMsIG5ld0l0ZW1zLCB7XG4gICAgICAgICAgICAgICAgdHlwZTogJ25leHRfc3RlcF9maW5hbF9vdXRwdXQnLFxuICAgICAgICAgICAgICAgIG91dHB1dDogcG90ZW50aWFsRmluYWxPdXRwdXQsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoYWdlbnQub3V0cHV0VHlwZSAhPT0gJ3RleHQnICYmIHBvdGVudGlhbEZpbmFsT3V0cHV0KSB7XG4gICAgICAgICAgICAvLyBTdHJ1Y3R1cmVkIG91dHB1dCBzY2hlbWEgPT4gYWx3YXlzIGxlYWRzIHRvIGEgZmluYWwgb3V0cHV0IGlmIHdlIGhhdmUgdGV4dC5cbiAgICAgICAgICAgIGNvbnN0IHsgcGFyc2VyIH0gPSBnZXRTY2hlbWFBbmRQYXJzZXJGcm9tSW5wdXRUeXBlKGFnZW50Lm91dHB1dFR5cGUsICdmaW5hbF9vdXRwdXQnKTtcbiAgICAgICAgICAgIGNvbnN0IFtlcnJvcl0gPSBhd2FpdCBzYWZlRXhlY3V0ZSgoKSA9PiBwYXJzZXIocG90ZW50aWFsRmluYWxPdXRwdXQpKTtcbiAgICAgICAgICAgIGlmIChlcnJvcikge1xuICAgICAgICAgICAgICAgIGNvbnN0IG91dHB1dEVycm9yTWVzc2FnZSA9IGZvcm1hdEZpbmFsT3V0cHV0VHlwZUVycm9yKGVycm9yKTtcbiAgICAgICAgICAgICAgICBhZGRFcnJvclRvQ3VycmVudFNwYW4oe1xuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBvdXRwdXRFcnJvck1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yOiBTdHJpbmcoZXJyb3IpLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBNb2RlbEJlaGF2aW9yRXJyb3Iob3V0cHV0RXJyb3JNZXNzYWdlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBuZXcgU2luZ2xlU3RlcFJlc3VsdChvcmlnaW5hbElucHV0LCBuZXdSZXNwb25zZSwgcHJlU3RlcEl0ZW1zLCBuZXdJdGVtcywgeyB0eXBlOiAnbmV4dF9zdGVwX2ZpbmFsX291dHB1dCcsIG91dHB1dDogcG90ZW50aWFsRmluYWxPdXRwdXQgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG5ldyBTaW5nbGVTdGVwUmVzdWx0KG9yaWdpbmFsSW5wdXQsIG5ld1Jlc3BvbnNlLCBwcmVTdGVwSXRlbXMsIG5ld0l0ZW1zLCB7IHR5cGU6ICduZXh0X3N0ZXBfcnVuX2FnYWluJyB9KTtcbn1cbi8vIENvbnNvbGlkYXRlcyB0aGUgbG9naWMgdGhhdCBkZXRlcm1pbmVzIHdoZXRoZXIgdG9vbCByZXN1bHRzIHlpZWxkZWQgYSBmaW5hbCBhbnN3ZXIsXG4vLyB0cmlnZ2VyZWQgYW4gaW50ZXJydXB0aW9uLCBvciByZXF1aXJlIHRoZSBhZ2VudCBsb29wIHRvIGNvbnRpbnVlIHJ1bm5pbmcuXG5hc3luYyBmdW5jdGlvbiBtYXliZUNvbXBsZXRlVHVybkZyb21Ub29sUmVzdWx0cyh7IGFnZW50LCBydW5uZXIsIHN0YXRlLCBmdW5jdGlvblJlc3VsdHMsIG9yaWdpbmFsSW5wdXQsIG5ld1Jlc3BvbnNlLCBwcmVTdGVwSXRlbXMsIG5ld0l0ZW1zLCB9KSB7XG4gICAgY29uc3QgdG9vbE91dGNvbWUgPSBhd2FpdCBjaGVja0ZvckZpbmFsT3V0cHV0RnJvbVRvb2xzKGFnZW50LCBmdW5jdGlvblJlc3VsdHMsIHN0YXRlKTtcbiAgICBpZiAodG9vbE91dGNvbWUuaXNGaW5hbE91dHB1dCkge1xuICAgICAgICBydW5uZXIuZW1pdCgnYWdlbnRfZW5kJywgc3RhdGUuX2NvbnRleHQsIGFnZW50LCB0b29sT3V0Y29tZS5maW5hbE91dHB1dCk7XG4gICAgICAgIGFnZW50LmVtaXQoJ2FnZW50X2VuZCcsIHN0YXRlLl9jb250ZXh0LCB0b29sT3V0Y29tZS5maW5hbE91dHB1dCk7XG4gICAgICAgIHJldHVybiBuZXcgU2luZ2xlU3RlcFJlc3VsdChvcmlnaW5hbElucHV0LCBuZXdSZXNwb25zZSwgcHJlU3RlcEl0ZW1zLCBuZXdJdGVtcywge1xuICAgICAgICAgICAgdHlwZTogJ25leHRfc3RlcF9maW5hbF9vdXRwdXQnLFxuICAgICAgICAgICAgb3V0cHV0OiB0b29sT3V0Y29tZS5maW5hbE91dHB1dCxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGlmICh0b29sT3V0Y29tZS5pc0ludGVycnVwdGVkKSB7XG4gICAgICAgIHJldHVybiBuZXcgU2luZ2xlU3RlcFJlc3VsdChvcmlnaW5hbElucHV0LCBuZXdSZXNwb25zZSwgcHJlU3RlcEl0ZW1zLCBuZXdJdGVtcywge1xuICAgICAgICAgICAgdHlwZTogJ25leHRfc3RlcF9pbnRlcnJ1cHRpb24nLFxuICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgIGludGVycnVwdGlvbnM6IHRvb2xPdXRjb21lLmludGVycnVwdGlvbnMsXG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG59XG4vKipcbiAqIEBpbnRlcm5hbFxuICogTm9ybWFsaXplcyB0b29sIG91dHB1dHMgb25jZSBzbyBkb3duc3RyZWFtIGNvZGUgd29ya3Mgd2l0aCBmdWxseSBzdHJ1Y3R1cmVkIHByb3RvY29sIGl0ZW1zLlxuICogRG9pbmcgdGhpcyBoZXJlIGtlZXBzIEFQSSBzdXJmYWNlIHN0YWJsZSBldmVuIHdoZW4gcHJvdmlkZXJzIGFkZCBuZXcgc2hhcGVzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0VG9vbENhbGxPdXRwdXRJdGVtKHRvb2xDYWxsLCBvdXRwdXQpIHtcbiAgICBjb25zdCBtYXliZVN0cnVjdHVyZWRPdXRwdXRzID0gbm9ybWFsaXplU3RydWN0dXJlZFRvb2xPdXRwdXRzKG91dHB1dCk7XG4gICAgaWYgKG1heWJlU3RydWN0dXJlZE91dHB1dHMpIHtcbiAgICAgICAgY29uc3Qgc3RydWN0dXJlZEl0ZW1zID0gbWF5YmVTdHJ1Y3R1cmVkT3V0cHV0cy5tYXAoY29udmVydFN0cnVjdHVyZWRUb29sT3V0cHV0VG9JbnB1dEl0ZW0pO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdHlwZTogJ2Z1bmN0aW9uX2NhbGxfcmVzdWx0JyxcbiAgICAgICAgICAgIG5hbWU6IHRvb2xDYWxsLm5hbWUsXG4gICAgICAgICAgICBjYWxsSWQ6IHRvb2xDYWxsLmNhbGxJZCxcbiAgICAgICAgICAgIHN0YXR1czogJ2NvbXBsZXRlZCcsXG4gICAgICAgICAgICBvdXRwdXQ6IHN0cnVjdHVyZWRJdGVtcyxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogJ2Z1bmN0aW9uX2NhbGxfcmVzdWx0JyxcbiAgICAgICAgbmFtZTogdG9vbENhbGwubmFtZSxcbiAgICAgICAgY2FsbElkOiB0b29sQ2FsbC5jYWxsSWQsXG4gICAgICAgIHN0YXR1czogJ2NvbXBsZXRlZCcsXG4gICAgICAgIG91dHB1dDoge1xuICAgICAgICAgICAgdHlwZTogJ3RleHQnLFxuICAgICAgICAgICAgdGV4dDogdG9TbWFydFN0cmluZyhvdXRwdXQpLFxuICAgICAgICB9LFxuICAgIH07XG59XG5mdW5jdGlvbiBub3JtYWxpemVGaWxlVmFsdWUodmFsdWUpIHtcbiAgICBjb25zdCBkaXJlY3RGaWxlID0gdmFsdWUuZmlsZTtcbiAgICBpZiAodHlwZW9mIGRpcmVjdEZpbGUgPT09ICdzdHJpbmcnICYmIGRpcmVjdEZpbGUubGVuZ3RoID4gMCkge1xuICAgICAgICByZXR1cm4gZGlyZWN0RmlsZTtcbiAgICB9XG4gICAgY29uc3Qgbm9ybWFsaXplZE9iamVjdCA9IG5vcm1hbGl6ZUZpbGVPYmplY3RDYW5kaWRhdGUoZGlyZWN0RmlsZSk7XG4gICAgaWYgKG5vcm1hbGl6ZWRPYmplY3QpIHtcbiAgICAgICAgcmV0dXJuIG5vcm1hbGl6ZWRPYmplY3Q7XG4gICAgfVxuICAgIGNvbnN0IGxlZ2FjeVZhbHVlID0gbm9ybWFsaXplTGVnYWN5RmlsZVZhbHVlKHZhbHVlKTtcbiAgICBpZiAobGVnYWN5VmFsdWUpIHtcbiAgICAgICAgcmV0dXJuIGxlZ2FjeVZhbHVlO1xuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbn1cbmZ1bmN0aW9uIG5vcm1hbGl6ZUZpbGVPYmplY3RDYW5kaWRhdGUodmFsdWUpIHtcbiAgICBpZiAoIWlzUmVjb3JkKHZhbHVlKSkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgaWYgKCdkYXRhJyBpbiB2YWx1ZSAmJiB2YWx1ZS5kYXRhICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgY29uc3QgZGF0YVZhbHVlID0gdmFsdWUuZGF0YTtcbiAgICAgICAgY29uc3QgaGFzU3RyaW5nRGF0YSA9IHR5cGVvZiBkYXRhVmFsdWUgPT09ICdzdHJpbmcnICYmIGRhdGFWYWx1ZS5sZW5ndGggPiAwO1xuICAgICAgICBjb25zdCBoYXNCaW5hcnlEYXRhID0gZGF0YVZhbHVlIGluc3RhbmNlb2YgVWludDhBcnJheSAmJiBkYXRhVmFsdWUubGVuZ3RoID4gMDtcbiAgICAgICAgaWYgKCFoYXNTdHJpbmdEYXRhICYmICFoYXNCaW5hcnlEYXRhKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWlzTm9uRW1wdHlTdHJpbmcodmFsdWUubWVkaWFUeXBlKSB8fFxuICAgICAgICAgICAgIWlzTm9uRW1wdHlTdHJpbmcodmFsdWUuZmlsZW5hbWUpKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgZGF0YTogdHlwZW9mIGRhdGFWYWx1ZSA9PT0gJ3N0cmluZycgPyBkYXRhVmFsdWUgOiBuZXcgVWludDhBcnJheShkYXRhVmFsdWUpLFxuICAgICAgICAgICAgbWVkaWFUeXBlOiB2YWx1ZS5tZWRpYVR5cGUsXG4gICAgICAgICAgICBmaWxlbmFtZTogdmFsdWUuZmlsZW5hbWUsXG4gICAgICAgIH07XG4gICAgfVxuICAgIGlmIChpc05vbkVtcHR5U3RyaW5nKHZhbHVlLnVybCkpIHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0geyB1cmw6IHZhbHVlLnVybCB9O1xuICAgICAgICBpZiAoaXNOb25FbXB0eVN0cmluZyh2YWx1ZS5maWxlbmFtZSkpIHtcbiAgICAgICAgICAgIHJlc3VsdC5maWxlbmFtZSA9IHZhbHVlLmZpbGVuYW1lO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuICAgIGNvbnN0IHJlZmVyZW5jZWRJZCA9IChpc05vbkVtcHR5U3RyaW5nKHZhbHVlLmlkKSAmJiB2YWx1ZS5pZCkgfHxcbiAgICAgICAgKGlzTm9uRW1wdHlTdHJpbmcodmFsdWUuZmlsZUlkKSAmJiB2YWx1ZS5maWxlSWQpO1xuICAgIGlmIChyZWZlcmVuY2VkSWQpIHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0geyBpZDogcmVmZXJlbmNlZElkIH07XG4gICAgICAgIGlmIChpc05vbkVtcHR5U3RyaW5nKHZhbHVlLmZpbGVuYW1lKSkge1xuICAgICAgICAgICAgcmVzdWx0LmZpbGVuYW1lID0gdmFsdWUuZmlsZW5hbWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG59XG5mdW5jdGlvbiBub3JtYWxpemVMZWdhY3lGaWxlVmFsdWUodmFsdWUpIHtcbiAgICBjb25zdCBmaWxlbmFtZSA9IHR5cGVvZiB2YWx1ZS5maWxlbmFtZSA9PT0gJ3N0cmluZycgJiYgdmFsdWUuZmlsZW5hbWUubGVuZ3RoID4gMFxuICAgICAgICA/IHZhbHVlLmZpbGVuYW1lXG4gICAgICAgIDogdW5kZWZpbmVkO1xuICAgIGNvbnN0IG1lZGlhVHlwZSA9IHR5cGVvZiB2YWx1ZS5tZWRpYVR5cGUgPT09ICdzdHJpbmcnICYmIHZhbHVlLm1lZGlhVHlwZS5sZW5ndGggPiAwXG4gICAgICAgID8gdmFsdWUubWVkaWFUeXBlXG4gICAgICAgIDogdW5kZWZpbmVkO1xuICAgIGlmICh0eXBlb2YgdmFsdWUuZmlsZURhdGEgPT09ICdzdHJpbmcnICYmIHZhbHVlLmZpbGVEYXRhLmxlbmd0aCA+IDApIHtcbiAgICAgICAgaWYgKCFtZWRpYVR5cGUgfHwgIWZpbGVuYW1lKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4geyBkYXRhOiB2YWx1ZS5maWxlRGF0YSwgbWVkaWFUeXBlLCBmaWxlbmFtZSB9O1xuICAgIH1cbiAgICBpZiAodmFsdWUuZmlsZURhdGEgaW5zdGFuY2VvZiBVaW50OEFycmF5ICYmIHZhbHVlLmZpbGVEYXRhLmxlbmd0aCA+IDApIHtcbiAgICAgICAgaWYgKCFtZWRpYVR5cGUgfHwgIWZpbGVuYW1lKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4geyBkYXRhOiBuZXcgVWludDhBcnJheSh2YWx1ZS5maWxlRGF0YSksIG1lZGlhVHlwZSwgZmlsZW5hbWUgfTtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiB2YWx1ZS5maWxlVXJsID09PSAnc3RyaW5nJyAmJiB2YWx1ZS5maWxlVXJsLmxlbmd0aCA+IDApIHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0geyB1cmw6IHZhbHVlLmZpbGVVcmwgfTtcbiAgICAgICAgaWYgKGZpbGVuYW1lKSB7XG4gICAgICAgICAgICByZXN1bHQuZmlsZW5hbWUgPSBmaWxlbmFtZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbiAgICBpZiAodHlwZW9mIHZhbHVlLmZpbGVJZCA9PT0gJ3N0cmluZycgJiYgdmFsdWUuZmlsZUlkLmxlbmd0aCA+IDApIHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0geyBpZDogdmFsdWUuZmlsZUlkIH07XG4gICAgICAgIGlmIChmaWxlbmFtZSkge1xuICAgICAgICAgICAgcmVzdWx0LmZpbGVuYW1lID0gZmlsZW5hbWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG59XG5mdW5jdGlvbiBpc1JlY29yZCh2YWx1ZSkge1xuICAgIHJldHVybiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICE9PSBudWxsO1xufVxuZnVuY3Rpb24gaXNOb25FbXB0eVN0cmluZyh2YWx1ZSkge1xuICAgIHJldHVybiB0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnICYmIHZhbHVlLmxlbmd0aCA+IDA7XG59XG5mdW5jdGlvbiB0b0lubGluZUltYWdlU3RyaW5nKGRhdGEsIG1lZGlhVHlwZSkge1xuICAgIGlmICh0eXBlb2YgZGF0YSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgaWYgKG1lZGlhVHlwZSAmJiAhZGF0YS5zdGFydHNXaXRoKCdkYXRhOicpKSB7XG4gICAgICAgICAgICByZXR1cm4gYXNEYXRhVXJsKGRhdGEsIG1lZGlhVHlwZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGRhdGE7XG4gICAgfVxuICAgIGNvbnN0IGJhc2U2NCA9IGVuY29kZVVpbnQ4QXJyYXlUb0Jhc2U2NChkYXRhKTtcbiAgICByZXR1cm4gYXNEYXRhVXJsKGJhc2U2NCwgbWVkaWFUeXBlKTtcbn1cbmZ1bmN0aW9uIGFzRGF0YVVybChiYXNlNjQsIG1lZGlhVHlwZSkge1xuICAgIHJldHVybiBtZWRpYVR5cGUgPyBgZGF0YToke21lZGlhVHlwZX07YmFzZTY0LCR7YmFzZTY0fWAgOiBiYXNlNjQ7XG59XG4vKipcbiAqIEBpbnRlcm5hbFxuICogUnVucyBldmVyeSBmdW5jdGlvbiB0b29sIGNhbGwgcmVxdWVzdGVkIGJ5IHRoZSBtb2RlbCBhbmQgcmV0dXJucyB0aGVpciBvdXRwdXRzIGFsb25nc2lkZVxuICogdGhlIGBSdW5JdGVtYCBpbnN0YW5jZXMgdGhhdCBzaG91bGQgYmUgYXBwZW5kZWQgdG8gaGlzdG9yeS5cbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGV4ZWN1dGVGdW5jdGlvblRvb2xDYWxscyhhZ2VudCwgdG9vbFJ1bnMsIHJ1bm5lciwgc3RhdGUpIHtcbiAgICBhc3luYyBmdW5jdGlvbiBydW5TaW5nbGVUb29sKHRvb2xSdW4pIHtcbiAgICAgICAgbGV0IHBhcnNlZEFyZ3MgPSB0b29sUnVuLnRvb2xDYWxsLmFyZ3VtZW50cztcbiAgICAgICAgaWYgKHRvb2xSdW4udG9vbC5wYXJhbWV0ZXJzKSB7XG4gICAgICAgICAgICBpZiAoaXNab2RPYmplY3QodG9vbFJ1bi50b29sLnBhcmFtZXRlcnMpKSB7XG4gICAgICAgICAgICAgICAgcGFyc2VkQXJncyA9IHRvb2xSdW4udG9vbC5wYXJhbWV0ZXJzLnBhcnNlKHBhcnNlZEFyZ3MpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcGFyc2VkQXJncyA9IEpTT04ucGFyc2UocGFyc2VkQXJncyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gU29tZSB0b29scyByZXF1aXJlIGEgaHVtYW4gb3IgcG9saWN5IGNoZWNrIGJlZm9yZSBleGVjdXRpb247IGRlZmVyIHVudGlsIGFwcHJvdmFsIGlzIHJlY29yZGVkLlxuICAgICAgICBjb25zdCBuZWVkc0FwcHJvdmFsID0gYXdhaXQgdG9vbFJ1bi50b29sLm5lZWRzQXBwcm92YWwoc3RhdGUuX2NvbnRleHQsIHBhcnNlZEFyZ3MsIHRvb2xSdW4udG9vbENhbGwuY2FsbElkKTtcbiAgICAgICAgaWYgKG5lZWRzQXBwcm92YWwpIHtcbiAgICAgICAgICAgIGNvbnN0IGFwcHJvdmFsID0gc3RhdGUuX2NvbnRleHQuaXNUb29sQXBwcm92ZWQoe1xuICAgICAgICAgICAgICAgIHRvb2xOYW1lOiB0b29sUnVuLnRvb2wubmFtZSxcbiAgICAgICAgICAgICAgICBjYWxsSWQ6IHRvb2xSdW4udG9vbENhbGwuY2FsbElkLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAoYXBwcm92YWwgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgLy8gcmVqZWN0ZWRcbiAgICAgICAgICAgICAgICByZXR1cm4gd2l0aEZ1bmN0aW9uU3Bhbihhc3luYyAoc3BhbikgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCByZXNwb25zZSA9ICdUb29sIGV4ZWN1dGlvbiB3YXMgbm90IGFwcHJvdmVkLic7XG4gICAgICAgICAgICAgICAgICAgIHNwYW4uc2V0RXJyb3Ioe1xuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogcmVzcG9uc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9vbF9uYW1lOiB0b29sUnVuLnRvb2wubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnJvcjogYFRvb2wgZXhlY3V0aW9uIGZvciAke3Rvb2xSdW4udG9vbENhbGwuY2FsbElkfSB3YXMgbWFudWFsbHkgcmVqZWN0ZWQgYnkgdXNlci5gLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHNwYW4uc3BhbkRhdGEub3V0cHV0ID0gcmVzcG9uc2U7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnZnVuY3Rpb25fb3V0cHV0JyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvb2w6IHRvb2xSdW4udG9vbCxcbiAgICAgICAgICAgICAgICAgICAgICAgIG91dHB1dDogcmVzcG9uc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBydW5JdGVtOiBuZXcgUnVuVG9vbENhbGxPdXRwdXRJdGVtKGdldFRvb2xDYWxsT3V0cHV0SXRlbSh0b29sUnVuLnRvb2xDYWxsLCByZXNwb25zZSksIGFnZW50LCByZXNwb25zZSksXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiB0b29sUnVuLnRvb2wubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChhcHByb3ZhbCAhPT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgIC8vIHRoaXMgYXBwcm92YWwgcHJvY2VzcyBuZWVkcyB0byBiZSBkb25lIGluIHRoZSBuZXh0IHR1cm5cbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiAnZnVuY3Rpb25fYXBwcm92YWwnLFxuICAgICAgICAgICAgICAgICAgICB0b29sOiB0b29sUnVuLnRvb2wsXG4gICAgICAgICAgICAgICAgICAgIHJ1bkl0ZW06IG5ldyBSdW5Ub29sQXBwcm92YWxJdGVtKHRvb2xSdW4udG9vbENhbGwsIGFnZW50KSxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB3aXRoRnVuY3Rpb25TcGFuKGFzeW5jIChzcGFuKSA9PiB7XG4gICAgICAgICAgICBpZiAocnVubmVyLmNvbmZpZy50cmFjZUluY2x1ZGVTZW5zaXRpdmVEYXRhKSB7XG4gICAgICAgICAgICAgICAgc3Bhbi5zcGFuRGF0YS5pbnB1dCA9IHRvb2xSdW4udG9vbENhbGwuYXJndW1lbnRzO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBydW5uZXIuZW1pdCgnYWdlbnRfdG9vbF9zdGFydCcsIHN0YXRlLl9jb250ZXh0LCBhZ2VudCwgdG9vbFJ1bi50b29sLCB7XG4gICAgICAgICAgICAgICAgICAgIHRvb2xDYWxsOiB0b29sUnVuLnRvb2xDYWxsLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGFnZW50LmVtaXQoJ2FnZW50X3Rvb2xfc3RhcnQnLCBzdGF0ZS5fY29udGV4dCwgdG9vbFJ1bi50b29sLCB7XG4gICAgICAgICAgICAgICAgICAgIHRvb2xDYWxsOiB0b29sUnVuLnRvb2xDYWxsLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGNvbnN0IHRvb2xPdXRwdXQgPSBhd2FpdCB0b29sUnVuLnRvb2wuaW52b2tlKHN0YXRlLl9jb250ZXh0LCB0b29sUnVuLnRvb2xDYWxsLmFyZ3VtZW50cywgeyB0b29sQ2FsbDogdG9vbFJ1bi50b29sQ2FsbCB9KTtcbiAgICAgICAgICAgICAgICAvLyBVc2Ugc3RyaW5nIGRhdGEgZm9yIHRyYWNpbmcgYW5kIGV2ZW50IGVtaXR0ZXJcbiAgICAgICAgICAgICAgICBjb25zdCBzdHJpbmdSZXN1bHQgPSB0b1NtYXJ0U3RyaW5nKHRvb2xPdXRwdXQpO1xuICAgICAgICAgICAgICAgIHJ1bm5lci5lbWl0KCdhZ2VudF90b29sX2VuZCcsIHN0YXRlLl9jb250ZXh0LCBhZ2VudCwgdG9vbFJ1bi50b29sLCBzdHJpbmdSZXN1bHQsIHsgdG9vbENhbGw6IHRvb2xSdW4udG9vbENhbGwgfSk7XG4gICAgICAgICAgICAgICAgYWdlbnQuZW1pdCgnYWdlbnRfdG9vbF9lbmQnLCBzdGF0ZS5fY29udGV4dCwgdG9vbFJ1bi50b29sLCBzdHJpbmdSZXN1bHQsIHsgdG9vbENhbGw6IHRvb2xSdW4udG9vbENhbGwgfSk7XG4gICAgICAgICAgICAgICAgaWYgKHJ1bm5lci5jb25maWcudHJhY2VJbmNsdWRlU2Vuc2l0aXZlRGF0YSkge1xuICAgICAgICAgICAgICAgICAgICBzcGFuLnNwYW5EYXRhLm91dHB1dCA9IHN0cmluZ1Jlc3VsdDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3QgZnVuY3Rpb25SZXN1bHQgPSB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdmdW5jdGlvbl9vdXRwdXQnLFxuICAgICAgICAgICAgICAgICAgICB0b29sOiB0b29sUnVuLnRvb2wsXG4gICAgICAgICAgICAgICAgICAgIG91dHB1dDogdG9vbE91dHB1dCxcbiAgICAgICAgICAgICAgICAgICAgcnVuSXRlbTogbmV3IFJ1blRvb2xDYWxsT3V0cHV0SXRlbShnZXRUb29sQ2FsbE91dHB1dEl0ZW0odG9vbFJ1bi50b29sQ2FsbCwgdG9vbE91dHB1dCksIGFnZW50LCB0b29sT3V0cHV0KSxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGNvbnN0IG5lc3RlZFJ1blJlc3VsdCA9IGNvbnN1bWVBZ2VudFRvb2xSdW5SZXN1bHQodG9vbFJ1bi50b29sQ2FsbCk7XG4gICAgICAgICAgICAgICAgaWYgKG5lc3RlZFJ1blJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICBmdW5jdGlvblJlc3VsdC5hZ2VudFJ1blJlc3VsdCA9IG5lc3RlZFJ1blJlc3VsdDtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbmVzdGVkSW50ZXJydXB0aW9ucyA9IG5lc3RlZFJ1blJlc3VsdC5pbnRlcnJ1cHRpb25zO1xuICAgICAgICAgICAgICAgICAgICBpZiAobmVzdGVkSW50ZXJydXB0aW9ucy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvblJlc3VsdC5pbnRlcnJ1cHRpb25zID0gbmVzdGVkSW50ZXJydXB0aW9ucztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb25SZXN1bHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBzcGFuLnNldEVycm9yKHtcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ0Vycm9yIHJ1bm5pbmcgdG9vbCcsXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvb2xfbmFtZTogdG9vbFJ1bi50b29sLm5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJvcjogU3RyaW5nKGVycm9yKSxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAvLyBFbWl0IGFnZW50X3Rvb2xfZW5kIGV2ZW4gb24gZXJyb3IgdG8gbWFpbnRhaW4gY29uc2lzdGVudCBldmVudCBsaWZlY3ljbGVcbiAgICAgICAgICAgICAgICBjb25zdCBlcnJvclJlc3VsdCA9IFN0cmluZyhlcnJvcik7XG4gICAgICAgICAgICAgICAgcnVubmVyLmVtaXQoJ2FnZW50X3Rvb2xfZW5kJywgc3RhdGUuX2NvbnRleHQsIGFnZW50LCB0b29sUnVuLnRvb2wsIGVycm9yUmVzdWx0LCB7XG4gICAgICAgICAgICAgICAgICAgIHRvb2xDYWxsOiB0b29sUnVuLnRvb2xDYWxsLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGFnZW50LmVtaXQoJ2FnZW50X3Rvb2xfZW5kJywgc3RhdGUuX2NvbnRleHQsIHRvb2xSdW4udG9vbCwgZXJyb3JSZXN1bHQsIHtcbiAgICAgICAgICAgICAgICAgICAgdG9vbENhbGw6IHRvb2xSdW4udG9vbENhbGwsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICBuYW1lOiB0b29sUnVuLnRvb2wubmFtZSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgICBjb25zdCByZXN1bHRzID0gYXdhaXQgUHJvbWlzZS5hbGwodG9vbFJ1bnMubWFwKHJ1blNpbmdsZVRvb2wpKTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdHM7XG4gICAgfVxuICAgIGNhdGNoIChlKSB7XG4gICAgICAgIHRocm93IG5ldyBUb29sQ2FsbEVycm9yKGBGYWlsZWQgdG8gcnVuIGZ1bmN0aW9uIHRvb2xzOiAke2V9YCwgZSwgc3RhdGUpO1xuICAgIH1cbn1cbi8qKlxuICogQGludGVybmFsXG4gKi9cbi8vIEludGVybmFsIGhlbHBlcjogZGlzcGF0Y2ggYSBjb21wdXRlciBhY3Rpb24gYW5kIHJldHVybiBhIHNjcmVlbnNob3QgKHN5bmMvYXN5bmMpXG5hc3luYyBmdW5jdGlvbiBfcnVuQ29tcHV0ZXJBY3Rpb25BbmRTY3JlZW5zaG90KGNvbXB1dGVyLCB0b29sQ2FsbCkge1xuICAgIGNvbnN0IGFjdGlvbiA9IHRvb2xDYWxsLmFjdGlvbjtcbiAgICBsZXQgc2NyZWVuc2hvdDtcbiAgICAvLyBEaXNwYXRjaCBiYXNlZCBvbiBhY3Rpb24gdHlwZSBzdHJpbmcgKGFzc3VtZSBhY3Rpb24udHlwZSBleGlzdHMpXG4gICAgc3dpdGNoIChhY3Rpb24udHlwZSkge1xuICAgICAgICBjYXNlICdjbGljayc6XG4gICAgICAgICAgICBhd2FpdCBjb21wdXRlci5jbGljayhhY3Rpb24ueCwgYWN0aW9uLnksIGFjdGlvbi5idXR0b24pO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ2RvdWJsZV9jbGljayc6XG4gICAgICAgICAgICBhd2FpdCBjb21wdXRlci5kb3VibGVDbGljayhhY3Rpb24ueCwgYWN0aW9uLnkpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ2RyYWcnOlxuICAgICAgICAgICAgYXdhaXQgY29tcHV0ZXIuZHJhZyhhY3Rpb24ucGF0aC5tYXAoKHApID0+IFtwLngsIHAueV0pKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdrZXlwcmVzcyc6XG4gICAgICAgICAgICBhd2FpdCBjb21wdXRlci5rZXlwcmVzcyhhY3Rpb24ua2V5cyk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnbW92ZSc6XG4gICAgICAgICAgICBhd2FpdCBjb21wdXRlci5tb3ZlKGFjdGlvbi54LCBhY3Rpb24ueSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnc2NyZWVuc2hvdCc6XG4gICAgICAgICAgICBzY3JlZW5zaG90ID0gYXdhaXQgY29tcHV0ZXIuc2NyZWVuc2hvdCgpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ3Njcm9sbCc6XG4gICAgICAgICAgICBhd2FpdCBjb21wdXRlci5zY3JvbGwoYWN0aW9uLngsIGFjdGlvbi55LCBhY3Rpb24uc2Nyb2xsX3gsIGFjdGlvbi5zY3JvbGxfeSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAndHlwZSc6XG4gICAgICAgICAgICBhd2FpdCBjb21wdXRlci50eXBlKGFjdGlvbi50ZXh0KTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICd3YWl0JzpcbiAgICAgICAgICAgIGF3YWl0IGNvbXB1dGVyLndhaXQoKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgYWN0aW9uOyAvLyBlbnN1cmVzIHRoYXQgd2UgaGFuZGxlIGV2ZXJ5IGFjdGlvbiB3ZSBrbm93IG9mXG4gICAgICAgICAgICAvLyBVbmtub3duIGFjdGlvbiwganVzdCB0YWtlIHNjcmVlbnNob3RcbiAgICAgICAgICAgIGJyZWFrO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIHNjcmVlbnNob3QgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHJldHVybiBzY3JlZW5zaG90O1xuICAgIH1cbiAgICAvLyBBbHdheXMgcmV0dXJuIHNjcmVlbnNob3QgYXMgYmFzZTY0IHN0cmluZ1xuICAgIGlmICh0eXBlb2YgY29tcHV0ZXIuc2NyZWVuc2hvdCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICBzY3JlZW5zaG90ID0gYXdhaXQgY29tcHV0ZXIuc2NyZWVuc2hvdCgpO1xuICAgICAgICBpZiAodHlwZW9mIHNjcmVlbnNob3QgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICByZXR1cm4gc2NyZWVuc2hvdDtcbiAgICAgICAgfVxuICAgIH1cbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0NvbXB1dGVyIGRvZXMgbm90IGltcGxlbWVudCBzY3JlZW5zaG90KCknKTtcbn1cbmZ1bmN0aW9uIHRvRXJyb3JNZXNzYWdlKGVycm9yKSB7XG4gICAgaWYgKGVycm9yIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgICAgcmV0dXJuIGVycm9yLm1lc3NhZ2UgfHwgZXJyb3IudG9TdHJpbmcoKTtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KGVycm9yKTtcbiAgICB9XG4gICAgY2F0Y2gge1xuICAgICAgICByZXR1cm4gU3RyaW5nKGVycm9yKTtcbiAgICB9XG59XG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZXhlY3V0ZVNoZWxsQWN0aW9ucyhhZ2VudCwgYWN0aW9ucywgcnVubmVyLCBydW5Db250ZXh0LCBjdXN0b21Mb2dnZXIgPSB1bmRlZmluZWQpIHtcbiAgICBjb25zdCBfbG9nZ2VyID0gY3VzdG9tTG9nZ2VyID8/IGxvZ2dlcjtcbiAgICBjb25zdCByZXN1bHRzID0gW107XG4gICAgZm9yIChjb25zdCBhY3Rpb24gb2YgYWN0aW9ucykge1xuICAgICAgICBjb25zdCBzaGVsbFRvb2wgPSBhY3Rpb24uc2hlbGw7XG4gICAgICAgIGNvbnN0IHRvb2xDYWxsID0gYWN0aW9uLnRvb2xDYWxsO1xuICAgICAgICBjb25zdCBhcHByb3ZhbEl0ZW0gPSBuZXcgUnVuVG9vbEFwcHJvdmFsSXRlbSh0b29sQ2FsbCwgYWdlbnQsIHNoZWxsVG9vbC5uYW1lKTtcbiAgICAgICAgY29uc3QgcmVxdWlyZXNBcHByb3ZhbCA9IGF3YWl0IHNoZWxsVG9vbC5uZWVkc0FwcHJvdmFsKHJ1bkNvbnRleHQsIHRvb2xDYWxsLmFjdGlvbiwgdG9vbENhbGwuY2FsbElkKTtcbiAgICAgICAgaWYgKHJlcXVpcmVzQXBwcm92YWwpIHtcbiAgICAgICAgICAgIGlmIChzaGVsbFRvb2wub25BcHByb3ZhbCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGRlY2lzaW9uID0gYXdhaXQgc2hlbGxUb29sLm9uQXBwcm92YWwocnVuQ29udGV4dCwgYXBwcm92YWxJdGVtKTtcbiAgICAgICAgICAgICAgICBpZiAoZGVjaXNpb24uYXBwcm92ZSA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgICBydW5Db250ZXh0LmFwcHJvdmVUb29sKGFwcHJvdmFsSXRlbSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGRlY2lzaW9uLmFwcHJvdmUgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJ1bkNvbnRleHQucmVqZWN0VG9vbChhcHByb3ZhbEl0ZW0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGFwcHJvdmFsID0gcnVuQ29udGV4dC5pc1Rvb2xBcHByb3ZlZCh7XG4gICAgICAgICAgICAgICAgdG9vbE5hbWU6IHNoZWxsVG9vbC5uYW1lLFxuICAgICAgICAgICAgICAgIGNhbGxJZDogdG9vbENhbGwuY2FsbElkLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAoYXBwcm92YWwgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSAnVG9vbCBleGVjdXRpb24gd2FzIG5vdCBhcHByb3ZlZC4nO1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlamVjdGlvbk91dHB1dCA9IHtcbiAgICAgICAgICAgICAgICAgICAgc3Rkb3V0OiAnJyxcbiAgICAgICAgICAgICAgICAgICAgc3RkZXJyOiByZXNwb25zZSxcbiAgICAgICAgICAgICAgICAgICAgb3V0Y29tZTogeyB0eXBlOiAnZXhpdCcsIGV4aXRDb2RlOiBudWxsIH0sXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICByZXN1bHRzLnB1c2gobmV3IFJ1blRvb2xDYWxsT3V0cHV0SXRlbSh7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdzaGVsbF9jYWxsX291dHB1dCcsXG4gICAgICAgICAgICAgICAgICAgIGNhbGxJZDogdG9vbENhbGwuY2FsbElkLFxuICAgICAgICAgICAgICAgICAgICBvdXRwdXQ6IFtyZWplY3Rpb25PdXRwdXRdLFxuICAgICAgICAgICAgICAgIH0sIGFnZW50LCByZXNwb25zZSkpO1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGFwcHJvdmFsICE9PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0cy5wdXNoKGFwcHJvdmFsSXRlbSk7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcnVubmVyLmVtaXQoJ2FnZW50X3Rvb2xfc3RhcnQnLCBydW5Db250ZXh0LCBhZ2VudCwgc2hlbGxUb29sLCB7XG4gICAgICAgICAgICB0b29sQ2FsbCxcbiAgICAgICAgfSk7XG4gICAgICAgIGlmICh0eXBlb2YgYWdlbnQuZW1pdCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgYWdlbnQuZW1pdCgnYWdlbnRfdG9vbF9zdGFydCcsIHJ1bkNvbnRleHQsIHNoZWxsVG9vbCwgeyB0b29sQ2FsbCB9KTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgc2hlbGxPdXRwdXRzO1xuICAgICAgICBjb25zdCBwcm92aWRlck1ldGEgPSB7fTtcbiAgICAgICAgbGV0IG1heE91dHB1dExlbmd0aDtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHNoZWxsUmVzdWx0ID0gYXdhaXQgc2hlbGxUb29sLnNoZWxsLnJ1bih0b29sQ2FsbC5hY3Rpb24pO1xuICAgICAgICAgICAgc2hlbGxPdXRwdXRzID0gc2hlbGxSZXN1bHQub3V0cHV0ID8/IFtdO1xuICAgICAgICAgICAgaWYgKHNoZWxsUmVzdWx0LnByb3ZpZGVyRGF0YSkge1xuICAgICAgICAgICAgICAgIE9iamVjdC5hc3NpZ24ocHJvdmlkZXJNZXRhLCBzaGVsbFJlc3VsdC5wcm92aWRlckRhdGEpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHR5cGVvZiBzaGVsbFJlc3VsdC5tYXhPdXRwdXRMZW5ndGggPT09ICdudW1iZXInKSB7XG4gICAgICAgICAgICAgICAgbWF4T3V0cHV0TGVuZ3RoID0gc2hlbGxSZXN1bHQubWF4T3V0cHV0TGVuZ3RoO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgIGNvbnN0IGVycm9yVGV4dCA9IHRvRXJyb3JNZXNzYWdlKGVycik7XG4gICAgICAgICAgICBzaGVsbE91dHB1dHMgPSBbXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBzdGRvdXQ6ICcnLFxuICAgICAgICAgICAgICAgICAgICBzdGRlcnI6IGVycm9yVGV4dCxcbiAgICAgICAgICAgICAgICAgICAgb3V0Y29tZTogeyB0eXBlOiAnZXhpdCcsIGV4aXRDb2RlOiBudWxsIH0sXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF07XG4gICAgICAgICAgICBfbG9nZ2VyLmVycm9yKCdGYWlsZWQgdG8gZXhlY3V0ZSBzaGVsbCBhY3Rpb246JywgZXJyKTtcbiAgICAgICAgfVxuICAgICAgICBzaGVsbE91dHB1dHMgPSBzaGVsbE91dHB1dHMgPz8gW107XG4gICAgICAgIHJ1bm5lci5lbWl0KCdhZ2VudF90b29sX2VuZCcsIHJ1bkNvbnRleHQsIGFnZW50LCBzaGVsbFRvb2wsIEpTT04uc3RyaW5naWZ5KHNoZWxsT3V0cHV0cyksIHtcbiAgICAgICAgICAgIHRvb2xDYWxsLFxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKHR5cGVvZiBhZ2VudC5lbWl0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBhZ2VudC5lbWl0KCdhZ2VudF90b29sX2VuZCcsIHJ1bkNvbnRleHQsIHNoZWxsVG9vbCwgSlNPTi5zdHJpbmdpZnkoc2hlbGxPdXRwdXRzKSwge1xuICAgICAgICAgICAgICAgIHRvb2xDYWxsLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcmF3SXRlbSA9IHtcbiAgICAgICAgICAgIHR5cGU6ICdzaGVsbF9jYWxsX291dHB1dCcsXG4gICAgICAgICAgICBjYWxsSWQ6IHRvb2xDYWxsLmNhbGxJZCxcbiAgICAgICAgICAgIG91dHB1dDogc2hlbGxPdXRwdXRzID8/IFtdLFxuICAgICAgICB9O1xuICAgICAgICBpZiAodHlwZW9mIG1heE91dHB1dExlbmd0aCA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgICAgIHJhd0l0ZW0ubWF4T3V0cHV0TGVuZ3RoID0gbWF4T3V0cHV0TGVuZ3RoO1xuICAgICAgICB9XG4gICAgICAgIGlmIChPYmplY3Qua2V5cyhwcm92aWRlck1ldGEpLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHJhd0l0ZW0ucHJvdmlkZXJEYXRhID0gcHJvdmlkZXJNZXRhO1xuICAgICAgICB9XG4gICAgICAgIHJlc3VsdHMucHVzaChuZXcgUnVuVG9vbENhbGxPdXRwdXRJdGVtKHJhd0l0ZW0sIGFnZW50LCByYXdJdGVtLm91dHB1dCkpO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0cztcbn1cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBleGVjdXRlQXBwbHlQYXRjaE9wZXJhdGlvbnMoYWdlbnQsIGFjdGlvbnMsIHJ1bm5lciwgcnVuQ29udGV4dCwgY3VzdG9tTG9nZ2VyID0gdW5kZWZpbmVkKSB7XG4gICAgY29uc3QgX2xvZ2dlciA9IGN1c3RvbUxvZ2dlciA/PyBsb2dnZXI7XG4gICAgY29uc3QgcmVzdWx0cyA9IFtdO1xuICAgIGZvciAoY29uc3QgYWN0aW9uIG9mIGFjdGlvbnMpIHtcbiAgICAgICAgY29uc3QgYXBwbHlQYXRjaFRvb2wgPSBhY3Rpb24uYXBwbHlQYXRjaDtcbiAgICAgICAgY29uc3QgdG9vbENhbGwgPSBhY3Rpb24udG9vbENhbGw7XG4gICAgICAgIGNvbnN0IGFwcHJvdmFsSXRlbSA9IG5ldyBSdW5Ub29sQXBwcm92YWxJdGVtKHRvb2xDYWxsLCBhZ2VudCwgYXBwbHlQYXRjaFRvb2wubmFtZSk7XG4gICAgICAgIGNvbnN0IHJlcXVpcmVzQXBwcm92YWwgPSBhd2FpdCBhcHBseVBhdGNoVG9vbC5uZWVkc0FwcHJvdmFsKHJ1bkNvbnRleHQsIHRvb2xDYWxsLm9wZXJhdGlvbiwgdG9vbENhbGwuY2FsbElkKTtcbiAgICAgICAgaWYgKHJlcXVpcmVzQXBwcm92YWwpIHtcbiAgICAgICAgICAgIGlmIChhcHBseVBhdGNoVG9vbC5vbkFwcHJvdmFsKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZGVjaXNpb24gPSBhd2FpdCBhcHBseVBhdGNoVG9vbC5vbkFwcHJvdmFsKHJ1bkNvbnRleHQsIGFwcHJvdmFsSXRlbSk7XG4gICAgICAgICAgICAgICAgaWYgKGRlY2lzaW9uLmFwcHJvdmUgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgcnVuQ29udGV4dC5hcHByb3ZlVG9vbChhcHByb3ZhbEl0ZW0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChkZWNpc2lvbi5hcHByb3ZlID09PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgICAgICBydW5Db250ZXh0LnJlamVjdFRvb2woYXBwcm92YWxJdGVtKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBhcHByb3ZhbCA9IHJ1bkNvbnRleHQuaXNUb29sQXBwcm92ZWQoe1xuICAgICAgICAgICAgICAgIHRvb2xOYW1lOiBhcHBseVBhdGNoVG9vbC5uYW1lLFxuICAgICAgICAgICAgICAgIGNhbGxJZDogdG9vbENhbGwuY2FsbElkLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAoYXBwcm92YWwgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSAnVG9vbCBleGVjdXRpb24gd2FzIG5vdCBhcHByb3ZlZC4nO1xuICAgICAgICAgICAgICAgIHJlc3VsdHMucHVzaChuZXcgUnVuVG9vbENhbGxPdXRwdXRJdGVtKHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2FwcGx5X3BhdGNoX2NhbGxfb3V0cHV0JyxcbiAgICAgICAgICAgICAgICAgICAgY2FsbElkOiB0b29sQ2FsbC5jYWxsSWQsXG4gICAgICAgICAgICAgICAgICAgIHN0YXR1czogJ2ZhaWxlZCcsXG4gICAgICAgICAgICAgICAgICAgIG91dHB1dDogcmVzcG9uc2UsXG4gICAgICAgICAgICAgICAgfSwgYWdlbnQsIHJlc3BvbnNlKSk7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoYXBwcm92YWwgIT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICByZXN1bHRzLnB1c2goYXBwcm92YWxJdGVtKTtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBydW5uZXIuZW1pdCgnYWdlbnRfdG9vbF9zdGFydCcsIHJ1bkNvbnRleHQsIGFnZW50LCBhcHBseVBhdGNoVG9vbCwge1xuICAgICAgICAgICAgdG9vbENhbGwsXG4gICAgICAgIH0pO1xuICAgICAgICBpZiAodHlwZW9mIGFnZW50LmVtaXQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIGFnZW50LmVtaXQoJ2FnZW50X3Rvb2xfc3RhcnQnLCBydW5Db250ZXh0LCBhcHBseVBhdGNoVG9vbCwge1xuICAgICAgICAgICAgICAgIHRvb2xDYWxsLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IHN0YXR1cyA9ICdjb21wbGV0ZWQnO1xuICAgICAgICBsZXQgb3V0cHV0ID0gJyc7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBsZXQgcmVzdWx0O1xuICAgICAgICAgICAgc3dpdGNoICh0b29sQ2FsbC5vcGVyYXRpb24udHlwZSkge1xuICAgICAgICAgICAgICAgIGNhc2UgJ2NyZWF0ZV9maWxlJzpcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gYXdhaXQgYXBwbHlQYXRjaFRvb2wuZWRpdG9yLmNyZWF0ZUZpbGUodG9vbENhbGwub3BlcmF0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAndXBkYXRlX2ZpbGUnOlxuICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBhd2FpdCBhcHBseVBhdGNoVG9vbC5lZGl0b3IudXBkYXRlRmlsZSh0b29sQ2FsbC5vcGVyYXRpb24pO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdkZWxldGVfZmlsZSc6XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IGF3YWl0IGFwcGx5UGF0Y2hUb29sLmVkaXRvci5kZWxldGVGaWxlKHRvb2xDYWxsLm9wZXJhdGlvbik7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignVW5zdXBwb3J0ZWQgYXBwbHlfcGF0Y2ggb3BlcmF0aW9uJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocmVzdWx0ICYmIHR5cGVvZiByZXN1bHQuc3RhdHVzID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgIHN0YXR1cyA9IHJlc3VsdC5zdGF0dXM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocmVzdWx0ICYmIHR5cGVvZiByZXN1bHQub3V0cHV0ID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgIG91dHB1dCA9IHJlc3VsdC5vdXRwdXQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgc3RhdHVzID0gJ2ZhaWxlZCc7XG4gICAgICAgICAgICBvdXRwdXQgPSB0b0Vycm9yTWVzc2FnZShlcnIpO1xuICAgICAgICAgICAgX2xvZ2dlci5lcnJvcignRmFpbGVkIHRvIGV4ZWN1dGUgYXBwbHlfcGF0Y2ggb3BlcmF0aW9uOicsIGVycik7XG4gICAgICAgIH1cbiAgICAgICAgcnVubmVyLmVtaXQoJ2FnZW50X3Rvb2xfZW5kJywgcnVuQ29udGV4dCwgYWdlbnQsIGFwcGx5UGF0Y2hUb29sLCBvdXRwdXQsIHtcbiAgICAgICAgICAgIHRvb2xDYWxsLFxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKHR5cGVvZiBhZ2VudC5lbWl0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBhZ2VudC5lbWl0KCdhZ2VudF90b29sX2VuZCcsIHJ1bkNvbnRleHQsIGFwcGx5UGF0Y2hUb29sLCBvdXRwdXQsIHtcbiAgICAgICAgICAgICAgICB0b29sQ2FsbCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHJhd0l0ZW0gPSB7XG4gICAgICAgICAgICB0eXBlOiAnYXBwbHlfcGF0Y2hfY2FsbF9vdXRwdXQnLFxuICAgICAgICAgICAgY2FsbElkOiB0b29sQ2FsbC5jYWxsSWQsXG4gICAgICAgICAgICBzdGF0dXMsXG4gICAgICAgIH07XG4gICAgICAgIGlmIChvdXRwdXQpIHtcbiAgICAgICAgICAgIHJhd0l0ZW0ub3V0cHV0ID0gb3V0cHV0O1xuICAgICAgICB9XG4gICAgICAgIHJlc3VsdHMucHVzaChuZXcgUnVuVG9vbENhbGxPdXRwdXRJdGVtKHJhd0l0ZW0sIGFnZW50LCBvdXRwdXQpKTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdHM7XG59XG4vKipcbiAqIEBpbnRlcm5hbFxuICogRXhlY3V0ZXMgYW55IGNvbXB1dGVyLXVzZSBhY3Rpb25zIGVtaXR0ZWQgYnkgdGhlIG1vZGVsIGFuZCByZXR1cm5zIHRoZSByZXN1bHRpbmcgaXRlbXMgc28gdGhlXG4gKiBydW4gaGlzdG9yeSByZWZsZWN0cyB0aGUgY29tcHV0ZXIgc2Vzc2lvbi5cbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGV4ZWN1dGVDb21wdXRlckFjdGlvbnMoYWdlbnQsIGFjdGlvbnMsIHJ1bm5lciwgcnVuQ29udGV4dCwgY3VzdG9tTG9nZ2VyID0gdW5kZWZpbmVkKSB7XG4gICAgY29uc3QgX2xvZ2dlciA9IGN1c3RvbUxvZ2dlciA/PyBsb2dnZXI7XG4gICAgY29uc3QgcmVzdWx0cyA9IFtdO1xuICAgIGZvciAoY29uc3QgYWN0aW9uIG9mIGFjdGlvbnMpIHtcbiAgICAgICAgY29uc3QgdG9vbENhbGwgPSBhY3Rpb24udG9vbENhbGw7XG4gICAgICAgIC8vIEhvb2tzOiBvbl90b29sX3N0YXJ0IChnbG9iYWwgKyBhZ2VudClcbiAgICAgICAgcnVubmVyLmVtaXQoJ2FnZW50X3Rvb2xfc3RhcnQnLCBydW5Db250ZXh0LCBhZ2VudCwgYWN0aW9uLmNvbXB1dGVyLCB7XG4gICAgICAgICAgICB0b29sQ2FsbCxcbiAgICAgICAgfSk7XG4gICAgICAgIGlmICh0eXBlb2YgYWdlbnQuZW1pdCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgYWdlbnQuZW1pdCgnYWdlbnRfdG9vbF9zdGFydCcsIHJ1bkNvbnRleHQsIGFjdGlvbi5jb21wdXRlciwgeyB0b29sQ2FsbCB9KTtcbiAgICAgICAgfVxuICAgICAgICAvLyBSdW4gdGhlIGFjdGlvbiBhbmQgZ2V0IHNjcmVlbnNob3RcbiAgICAgICAgbGV0IG91dHB1dDtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IGNvbXB1dGVyID0gYXdhaXQgcmVzb2x2ZUNvbXB1dGVyKHtcbiAgICAgICAgICAgICAgICB0b29sOiBhY3Rpb24uY29tcHV0ZXIsXG4gICAgICAgICAgICAgICAgcnVuQ29udGV4dCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgb3V0cHV0ID0gYXdhaXQgX3J1bkNvbXB1dGVyQWN0aW9uQW5kU2NyZWVuc2hvdChjb21wdXRlciwgdG9vbENhbGwpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgIF9sb2dnZXIuZXJyb3IoJ0ZhaWxlZCB0byBleGVjdXRlIGNvbXB1dGVyIGFjdGlvbjonLCBlcnIpO1xuICAgICAgICAgICAgb3V0cHV0ID0gJyc7XG4gICAgICAgIH1cbiAgICAgICAgLy8gSG9va3M6IG9uX3Rvb2xfZW5kIChnbG9iYWwgKyBhZ2VudClcbiAgICAgICAgcnVubmVyLmVtaXQoJ2FnZW50X3Rvb2xfZW5kJywgcnVuQ29udGV4dCwgYWdlbnQsIGFjdGlvbi5jb21wdXRlciwgb3V0cHV0LCB7XG4gICAgICAgICAgICB0b29sQ2FsbCxcbiAgICAgICAgfSk7XG4gICAgICAgIGlmICh0eXBlb2YgYWdlbnQuZW1pdCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgYWdlbnQuZW1pdCgnYWdlbnRfdG9vbF9lbmQnLCBydW5Db250ZXh0LCBhY3Rpb24uY29tcHV0ZXIsIG91dHB1dCwge1xuICAgICAgICAgICAgICAgIHRvb2xDYWxsLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gUmV0dXJuIHRoZSBzY3JlZW5zaG90IGFzIGEgZGF0YSBVUkwgd2hlbiBhdmFpbGFibGU7IGZhbGwgYmFjayB0byBhbiBlbXB0eSBzdHJpbmcgb24gZmFpbHVyZXMuXG4gICAgICAgIGNvbnN0IGltYWdlVXJsID0gb3V0cHV0ID8gYGRhdGE6aW1hZ2UvcG5nO2Jhc2U2NCwke291dHB1dH1gIDogJyc7XG4gICAgICAgIGNvbnN0IHJhd0l0ZW0gPSB7XG4gICAgICAgICAgICB0eXBlOiAnY29tcHV0ZXJfY2FsbF9yZXN1bHQnLFxuICAgICAgICAgICAgY2FsbElkOiB0b29sQ2FsbC5jYWxsSWQsXG4gICAgICAgICAgICBvdXRwdXQ6IHsgdHlwZTogJ2NvbXB1dGVyX3NjcmVlbnNob3QnLCBkYXRhOiBpbWFnZVVybCB9LFxuICAgICAgICB9O1xuICAgICAgICByZXN1bHRzLnB1c2gobmV3IFJ1blRvb2xDYWxsT3V0cHV0SXRlbShyYXdJdGVtLCBhZ2VudCwgaW1hZ2VVcmwpKTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdHM7XG59XG4vKipcbiAqIEBpbnRlcm5hbFxuICogRHJpdmVzIGhhbmRvZmYgY2FsbHMgYnkgaW52b2tpbmcgdGhlIGRvd25zdHJlYW0gYWdlbnQgYW5kIGNhcHR1cmluZyBhbnkgZ2VuZXJhdGVkIGl0ZW1zIHNvXG4gKiB0aGUgY3VycmVudCBhZ2VudCBjYW4gY29udGludWUgd2l0aCB0aGUgbmV3IGNvbnRleHQuXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBleGVjdXRlSGFuZG9mZkNhbGxzKGFnZW50LCBvcmlnaW5hbElucHV0LCBwcmVTdGVwSXRlbXMsIG5ld1N0ZXBJdGVtcywgbmV3UmVzcG9uc2UsIHJ1bkhhbmRvZmZzLCBydW5uZXIsIHJ1bkNvbnRleHQpIHtcbiAgICBuZXdTdGVwSXRlbXMgPSBbLi4ubmV3U3RlcEl0ZW1zXTtcbiAgICBpZiAocnVuSGFuZG9mZnMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIGxvZ2dlci53YXJuKCdJbmNvcnJlY3RseSBjYWxsZWQgZXhlY3V0ZUhhbmRvZmZDYWxscyB3aXRoIG5vIGhhbmRvZmZzLiBUaGlzIHNob3VsZCBub3QgaGFwcGVuLiBNb3Zpbmcgb24uJyk7XG4gICAgICAgIHJldHVybiBuZXcgU2luZ2xlU3RlcFJlc3VsdChvcmlnaW5hbElucHV0LCBuZXdSZXNwb25zZSwgcHJlU3RlcEl0ZW1zLCBuZXdTdGVwSXRlbXMsIHsgdHlwZTogJ25leHRfc3RlcF9ydW5fYWdhaW4nIH0pO1xuICAgIH1cbiAgICBpZiAocnVuSGFuZG9mZnMubGVuZ3RoID4gMSkge1xuICAgICAgICAvLyBtdWx0aXBsZSBoYW5kb2Zmcy4gSWdub3JpbmcgYWxsIGJ1dCB0aGUgZmlyc3Qgb25lIGJ5IGFkZGluZyByZWplY3QgcmVzcG9uc2VzIGZvciB0aG9zZVxuICAgICAgICBjb25zdCBvdXRwdXRNZXNzYWdlID0gJ011bHRpcGxlIGhhbmRvZmZzIGRldGVjdGVkLCBpZ25vcmluZyB0aGlzIG9uZS4nO1xuICAgICAgICBmb3IgKGxldCBpID0gMTsgaSA8IHJ1bkhhbmRvZmZzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBuZXdTdGVwSXRlbXMucHVzaChuZXcgUnVuVG9vbENhbGxPdXRwdXRJdGVtKGdldFRvb2xDYWxsT3V0cHV0SXRlbShydW5IYW5kb2Zmc1tpXS50b29sQ2FsbCwgb3V0cHV0TWVzc2FnZSksIGFnZW50LCBvdXRwdXRNZXNzYWdlKSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY29uc3QgYWN0dWFsSGFuZG9mZiA9IHJ1bkhhbmRvZmZzWzBdO1xuICAgIHJldHVybiB3aXRoSGFuZG9mZlNwYW4oYXN5bmMgKGhhbmRvZmZTcGFuKSA9PiB7XG4gICAgICAgIGNvbnN0IGhhbmRvZmYgPSBhY3R1YWxIYW5kb2ZmLmhhbmRvZmY7XG4gICAgICAgIGNvbnN0IG5ld0FnZW50ID0gYXdhaXQgaGFuZG9mZi5vbkludm9rZUhhbmRvZmYocnVuQ29udGV4dCwgYWN0dWFsSGFuZG9mZi50b29sQ2FsbC5hcmd1bWVudHMpO1xuICAgICAgICBoYW5kb2ZmU3Bhbi5zcGFuRGF0YS50b19hZ2VudCA9IG5ld0FnZW50Lm5hbWU7XG4gICAgICAgIGlmIChydW5IYW5kb2Zmcy5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICBjb25zdCByZXF1ZXN0ZWRBZ2VudHMgPSBydW5IYW5kb2Zmcy5tYXAoKGgpID0+IGguaGFuZG9mZi5hZ2VudE5hbWUpO1xuICAgICAgICAgICAgaGFuZG9mZlNwYW4uc2V0RXJyb3Ioe1xuICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdNdWx0aXBsZSBoYW5kb2ZmcyByZXF1ZXN0ZWQnLFxuICAgICAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgcmVxdWVzdGVkX2FnZW50czogcmVxdWVzdGVkQWdlbnRzLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBuZXdTdGVwSXRlbXMucHVzaChuZXcgUnVuSGFuZG9mZk91dHB1dEl0ZW0oZ2V0VG9vbENhbGxPdXRwdXRJdGVtKGFjdHVhbEhhbmRvZmYudG9vbENhbGwsIGdldFRyYW5zZmVyTWVzc2FnZShuZXdBZ2VudCkpLCBhZ2VudCwgbmV3QWdlbnQpKTtcbiAgICAgICAgcnVubmVyLmVtaXQoJ2FnZW50X2hhbmRvZmYnLCBydW5Db250ZXh0LCBhZ2VudCwgbmV3QWdlbnQpO1xuICAgICAgICBhZ2VudC5lbWl0KCdhZ2VudF9oYW5kb2ZmJywgcnVuQ29udGV4dCwgbmV3QWdlbnQpO1xuICAgICAgICBjb25zdCBpbnB1dEZpbHRlciA9IGhhbmRvZmYuaW5wdXRGaWx0ZXIgPz8gcnVubmVyLmNvbmZpZy5oYW5kb2ZmSW5wdXRGaWx0ZXI7XG4gICAgICAgIGlmIChpbnB1dEZpbHRlcikge1xuICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKCdGaWx0ZXJpbmcgaW5wdXRzIGZvciBoYW5kb2ZmJyk7XG4gICAgICAgICAgICBpZiAodHlwZW9mIGlucHV0RmlsdGVyICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgaGFuZG9mZlNwYW4uc2V0RXJyb3Ioe1xuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnSW52YWxpZCBpbnB1dCBmaWx0ZXInLFxuICAgICAgICAgICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZXRhaWxzOiAnbm90IGNhbGxhYmxlJyxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGhhbmRvZmZJbnB1dERhdGEgPSB7XG4gICAgICAgICAgICAgICAgaW5wdXRIaXN0b3J5OiBBcnJheS5pc0FycmF5KG9yaWdpbmFsSW5wdXQpXG4gICAgICAgICAgICAgICAgICAgID8gWy4uLm9yaWdpbmFsSW5wdXRdXG4gICAgICAgICAgICAgICAgICAgIDogb3JpZ2luYWxJbnB1dCxcbiAgICAgICAgICAgICAgICBwcmVIYW5kb2ZmSXRlbXM6IFsuLi5wcmVTdGVwSXRlbXNdLFxuICAgICAgICAgICAgICAgIG5ld0l0ZW1zOiBbLi4ubmV3U3RlcEl0ZW1zXSxcbiAgICAgICAgICAgICAgICBydW5Db250ZXh0LFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNvbnN0IGZpbHRlcmVkID0gaW5wdXRGaWx0ZXIoaGFuZG9mZklucHV0RGF0YSk7XG4gICAgICAgICAgICBvcmlnaW5hbElucHV0ID0gZmlsdGVyZWQuaW5wdXRIaXN0b3J5O1xuICAgICAgICAgICAgcHJlU3RlcEl0ZW1zID0gZmlsdGVyZWQucHJlSGFuZG9mZkl0ZW1zO1xuICAgICAgICAgICAgbmV3U3RlcEl0ZW1zID0gZmlsdGVyZWQubmV3SXRlbXM7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBTaW5nbGVTdGVwUmVzdWx0KG9yaWdpbmFsSW5wdXQsIG5ld1Jlc3BvbnNlLCBwcmVTdGVwSXRlbXMsIG5ld1N0ZXBJdGVtcywgeyB0eXBlOiAnbmV4dF9zdGVwX2hhbmRvZmYnLCBuZXdBZ2VudCB9KTtcbiAgICB9LCB7XG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgIGZyb21fYWdlbnQ6IGFnZW50Lm5hbWUsXG4gICAgICAgIH0sXG4gICAgfSk7XG59XG5jb25zdCBOT1RfRklOQUxfT1VUUFVUID0ge1xuICAgIGlzRmluYWxPdXRwdXQ6IGZhbHNlLFxuICAgIGlzSW50ZXJydXB0ZWQ6IHVuZGVmaW5lZCxcbn07XG4vKipcbiAqIEBpbnRlcm5hbFxuICogRGV0ZXJtaW5lcyB3aGV0aGVyIHRvb2wgZXhlY3V0aW9ucyBwcm9kdWNlZCBhIGZpbmFsIGFnZW50IG91dHB1dCwgdHJpZ2dlcmVkIGFuIGludGVycnVwdGlvbixcbiAqIG9yIHdoZXRoZXIgdGhlIGFnZW50IGxvb3Agc2hvdWxkIGNvbnRpbnVlIGNvbGxlY3RpbmcgbW9yZSByZXNwb25zZXMuXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjaGVja0ZvckZpbmFsT3V0cHV0RnJvbVRvb2xzKGFnZW50LCB0b29sUmVzdWx0cywgc3RhdGUpIHtcbiAgICBpZiAodG9vbFJlc3VsdHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHJldHVybiBOT1RfRklOQUxfT1VUUFVUO1xuICAgIH1cbiAgICBjb25zdCBpbnRlcnJ1cHRpb25zID0gW107XG4gICAgZm9yIChjb25zdCByZXN1bHQgb2YgdG9vbFJlc3VsdHMpIHtcbiAgICAgICAgaWYgKHJlc3VsdC5ydW5JdGVtIGluc3RhbmNlb2YgUnVuVG9vbEFwcHJvdmFsSXRlbSkge1xuICAgICAgICAgICAgaW50ZXJydXB0aW9ucy5wdXNoKHJlc3VsdC5ydW5JdGVtKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocmVzdWx0LnR5cGUgPT09ICdmdW5jdGlvbl9vdXRwdXQnKSB7XG4gICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShyZXN1bHQuaW50ZXJydXB0aW9ucykpIHtcbiAgICAgICAgICAgICAgICBpbnRlcnJ1cHRpb25zLnB1c2goLi4ucmVzdWx0LmludGVycnVwdGlvbnMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAocmVzdWx0LmFnZW50UnVuUmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbmVzdGVkSW50ZXJydXB0aW9ucyA9IHJlc3VsdC5hZ2VudFJ1blJlc3VsdC5pbnRlcnJ1cHRpb25zO1xuICAgICAgICAgICAgICAgIGlmIChuZXN0ZWRJbnRlcnJ1cHRpb25zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgaW50ZXJydXB0aW9ucy5wdXNoKC4uLm5lc3RlZEludGVycnVwdGlvbnMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAoaW50ZXJydXB0aW9ucy5sZW5ndGggPiAwKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBpc0ZpbmFsT3V0cHV0OiBmYWxzZSxcbiAgICAgICAgICAgIGlzSW50ZXJydXB0ZWQ6IHRydWUsXG4gICAgICAgICAgICBpbnRlcnJ1cHRpb25zLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBpZiAoYWdlbnQudG9vbFVzZUJlaGF2aW9yID09PSAncnVuX2xsbV9hZ2FpbicpIHtcbiAgICAgICAgcmV0dXJuIE5PVF9GSU5BTF9PVVRQVVQ7XG4gICAgfVxuICAgIGNvbnN0IGZpcnN0VG9vbFJlc3VsdCA9IHRvb2xSZXN1bHRzWzBdO1xuICAgIGlmIChhZ2VudC50b29sVXNlQmVoYXZpb3IgPT09ICdzdG9wX29uX2ZpcnN0X3Rvb2wnKSB7XG4gICAgICAgIGlmIChmaXJzdFRvb2xSZXN1bHQ/LnR5cGUgPT09ICdmdW5jdGlvbl9vdXRwdXQnKSB7XG4gICAgICAgICAgICBjb25zdCBzdHJpbmdPdXRwdXQgPSB0b1NtYXJ0U3RyaW5nKGZpcnN0VG9vbFJlc3VsdC5vdXRwdXQpO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBpc0ZpbmFsT3V0cHV0OiB0cnVlLFxuICAgICAgICAgICAgICAgIGlzSW50ZXJydXB0ZWQ6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICBmaW5hbE91dHB1dDogc3RyaW5nT3V0cHV0LFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gTk9UX0ZJTkFMX09VVFBVVDtcbiAgICB9XG4gICAgY29uc3QgdG9vbFVzZUJlaGF2aW9yID0gYWdlbnQudG9vbFVzZUJlaGF2aW9yO1xuICAgIGlmICh0eXBlb2YgdG9vbFVzZUJlaGF2aW9yID09PSAnb2JqZWN0Jykge1xuICAgICAgICBjb25zdCBzdG9wcGluZ1Rvb2wgPSB0b29sUmVzdWx0cy5maW5kKChyKSA9PiB0b29sVXNlQmVoYXZpb3Iuc3RvcEF0VG9vbE5hbWVzLmluY2x1ZGVzKHIudG9vbC5uYW1lKSk7XG4gICAgICAgIGlmIChzdG9wcGluZ1Rvb2w/LnR5cGUgPT09ICdmdW5jdGlvbl9vdXRwdXQnKSB7XG4gICAgICAgICAgICBjb25zdCBzdHJpbmdPdXRwdXQgPSB0b1NtYXJ0U3RyaW5nKHN0b3BwaW5nVG9vbC5vdXRwdXQpO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBpc0ZpbmFsT3V0cHV0OiB0cnVlLFxuICAgICAgICAgICAgICAgIGlzSW50ZXJydXB0ZWQ6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICBmaW5hbE91dHB1dDogc3RyaW5nT3V0cHV0LFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gTk9UX0ZJTkFMX09VVFBVVDtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiB0b29sVXNlQmVoYXZpb3IgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgcmV0dXJuIHRvb2xVc2VCZWhhdmlvcihzdGF0ZS5fY29udGV4dCwgdG9vbFJlc3VsdHMpO1xuICAgIH1cbiAgICB0aHJvdyBuZXcgVXNlckVycm9yKGBJbnZhbGlkIHRvb2xVc2VCZWhhdmlvcjogJHt0b29sVXNlQmVoYXZpb3J9YCwgc3RhdGUpO1xufVxuZnVuY3Rpb24gZ2V0UnVuSXRlbVN0cmVhbUV2ZW50TmFtZShpdGVtKSB7XG4gICAgaWYgKGl0ZW0gaW5zdGFuY2VvZiBSdW5NZXNzYWdlT3V0cHV0SXRlbSkge1xuICAgICAgICByZXR1cm4gJ21lc3NhZ2Vfb3V0cHV0X2NyZWF0ZWQnO1xuICAgIH1cbiAgICBpZiAoaXRlbSBpbnN0YW5jZW9mIFJ1bkhhbmRvZmZDYWxsSXRlbSkge1xuICAgICAgICByZXR1cm4gJ2hhbmRvZmZfcmVxdWVzdGVkJztcbiAgICB9XG4gICAgaWYgKGl0ZW0gaW5zdGFuY2VvZiBSdW5IYW5kb2ZmT3V0cHV0SXRlbSkge1xuICAgICAgICByZXR1cm4gJ2hhbmRvZmZfb2NjdXJyZWQnO1xuICAgIH1cbiAgICBpZiAoaXRlbSBpbnN0YW5jZW9mIFJ1blRvb2xDYWxsSXRlbSkge1xuICAgICAgICByZXR1cm4gJ3Rvb2xfY2FsbGVkJztcbiAgICB9XG4gICAgaWYgKGl0ZW0gaW5zdGFuY2VvZiBSdW5Ub29sQ2FsbE91dHB1dEl0ZW0pIHtcbiAgICAgICAgcmV0dXJuICd0b29sX291dHB1dCc7XG4gICAgfVxuICAgIGlmIChpdGVtIGluc3RhbmNlb2YgUnVuUmVhc29uaW5nSXRlbSkge1xuICAgICAgICByZXR1cm4gJ3JlYXNvbmluZ19pdGVtX2NyZWF0ZWQnO1xuICAgIH1cbiAgICBpZiAoaXRlbSBpbnN0YW5jZW9mIFJ1blRvb2xBcHByb3ZhbEl0ZW0pIHtcbiAgICAgICAgcmV0dXJuICd0b29sX2FwcHJvdmFsX3JlcXVlc3RlZCc7XG4gICAgfVxuICAgIHJldHVybiB1bmRlZmluZWQ7XG59XG5mdW5jdGlvbiBlbnF1ZXVlUnVuSXRlbVN0cmVhbUV2ZW50KHJlc3VsdCwgaXRlbSkge1xuICAgIGNvbnN0IGl0ZW1OYW1lID0gZ2V0UnVuSXRlbVN0cmVhbUV2ZW50TmFtZShpdGVtKTtcbiAgICBpZiAoIWl0ZW1OYW1lKSB7XG4gICAgICAgIGxvZ2dlci53YXJuKCdVbmtub3duIGl0ZW0gdHlwZTogJywgaXRlbSk7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgcmVzdWx0Ll9hZGRJdGVtKG5ldyBSdW5JdGVtU3RyZWFtRXZlbnQoaXRlbU5hbWUsIGl0ZW0pKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBzdHJlYW1TdGVwSXRlbXNUb1J1blJlc3VsdChyZXN1bHQsIGl0ZW1zKSB7XG4gICAgLy8gUHJlc2VydmUgdGhlIG9yZGVyIGluIHdoaWNoIGl0ZW1zIHdlcmUgZ2VuZXJhdGVkIGJ5IGVucXVldWVpbmcgZWFjaCBvbmVcbiAgICAvLyBpbW1lZGlhdGVseSBvbiB0aGUgc3RyZWFtZWQgcmVzdWx0LlxuICAgIGZvciAoY29uc3QgaXRlbSBvZiBpdGVtcykge1xuICAgICAgICBlbnF1ZXVlUnVuSXRlbVN0cmVhbUV2ZW50KHJlc3VsdCwgaXRlbSk7XG4gICAgfVxufVxuZXhwb3J0IGZ1bmN0aW9uIGFkZFN0ZXBUb1J1blJlc3VsdChyZXN1bHQsIHN0ZXAsIG9wdGlvbnMpIHtcbiAgICAvLyBza2lwSXRlbXMgY29udGFpbnMgcnVuIGl0ZW1zIHRoYXQgd2VyZSBhbHJlYWR5IHN0cmVhbWVkIHNvIHdlIGF2b2lkXG4gICAgLy8gZW5xdWV1ZWluZyBkdXBsaWNhdGUgZXZlbnRzIGZvciB0aGUgc2FtZSBpbnN0YW5jZS5cbiAgICBjb25zdCBza2lwcGVkSXRlbXMgPSBvcHRpb25zPy5za2lwSXRlbXM7XG4gICAgZm9yIChjb25zdCBpdGVtIG9mIHN0ZXAubmV3U3RlcEl0ZW1zKSB7XG4gICAgICAgIGlmIChza2lwcGVkSXRlbXM/LmhhcyhpdGVtKSkge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgZW5xdWV1ZVJ1bkl0ZW1TdHJlYW1FdmVudChyZXN1bHQsIGl0ZW0pO1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBBZ2VudFRvb2xVc2VUcmFja2VyIHtcbiAgICAjYWdlbnRUb1Rvb2xzID0gbmV3IE1hcCgpO1xuICAgIGFkZFRvb2xVc2UoYWdlbnQsIHRvb2xOYW1lcykge1xuICAgICAgICB0aGlzLiNhZ2VudFRvVG9vbHMuc2V0KGFnZW50LCB0b29sTmFtZXMpO1xuICAgIH1cbiAgICBoYXNVc2VkVG9vbHMoYWdlbnQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuI2FnZW50VG9Ub29scy5oYXMoYWdlbnQpO1xuICAgIH1cbiAgICB0b0pTT04oKSB7XG4gICAgICAgIHJldHVybiBPYmplY3QuZnJvbUVudHJpZXMoQXJyYXkuZnJvbSh0aGlzLiNhZ2VudFRvVG9vbHMuZW50cmllcygpKS5tYXAoKFthZ2VudCwgdG9vbE5hbWVzXSkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIFthZ2VudC5uYW1lLCB0b29sTmFtZXNdO1xuICAgICAgICB9KSk7XG4gICAgfVxufVxuLyoqXG4gKiBAaW50ZXJuYWxcbiAqIENvbnZlcnQgYSB1c2VyLXByb3ZpZGVkIGlucHV0IGludG8gYSBsaXN0IG9mIGlucHV0IGl0ZW1zLlxuICovXG5leHBvcnQgZnVuY3Rpb24gdG9JbnB1dEl0ZW1MaXN0KGlucHV0KSB7XG4gICAgaWYgKHR5cGVvZiBpbnB1dCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB0eXBlOiAnbWVzc2FnZScsXG4gICAgICAgICAgICAgICAgcm9sZTogJ3VzZXInLFxuICAgICAgICAgICAgICAgIGNvbnRlbnQ6IGlucHV0LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgXTtcbiAgICB9XG4gICAgcmV0dXJuIFsuLi5pbnB1dF07XG59XG4vKipcbiAqIEBpbnRlcm5hbFxuICogRXh0cmFjdCBtb2RlbCBvdXRwdXQgaXRlbXMgZnJvbSBydW4gaXRlbXMsIGV4Y2x1ZGluZyB0b29sIGFwcHJvdmFsIGl0ZW1zLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZXh0cmFjdE91dHB1dEl0ZW1zRnJvbVJ1bkl0ZW1zKGl0ZW1zKSB7XG4gICAgcmV0dXJuIGl0ZW1zXG4gICAgICAgIC5maWx0ZXIoKGl0ZW0pID0+IGl0ZW0udHlwZSAhPT0gJ3Rvb2xfYXBwcm92YWxfaXRlbScpXG4gICAgICAgIC5tYXAoKGl0ZW0pID0+IGl0ZW0ucmF3SXRlbSk7XG59XG5mdW5jdGlvbiBub3JtYWxpemVJdGVtc0ZvclNlc3Npb25QZXJzaXN0ZW5jZShpdGVtcykge1xuICAgIC8vIFBlcnNpc3RlZCBzZXNzaW9ucyBtdXN0IGF2b2lkIHJhdyBiaW5hcnkgc28gd2UgY29udmVydCBldmVyeSBpdGVtIGludG8gYSBKU09OLXNhZmUgc2hhcGUgYmVmb3JlIHdyaXRpbmcgdG8gc3RvcmFnZS5cbiAgICByZXR1cm4gaXRlbXMubWFwKChpdGVtKSA9PiBzYW5pdGl6ZVZhbHVlRm9yU2Vzc2lvbihzdHJpcFRyYW5zaWVudENhbGxJZHMoaXRlbSkpKTtcbn1cbmZ1bmN0aW9uIHNhbml0aXplVmFsdWVGb3JTZXNzaW9uKHZhbHVlLCBjb250ZXh0ID0ge30pIHtcbiAgICBpZiAodmFsdWUgPT09IG51bGwgfHwgdmFsdWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgfVxuICAgIC8vIENvbnZlcnQgc3VwcG9ydGVkIGJpbmFyeSBwYXlsb2FkcyBpbnRvIEFycmF5QnVmZmVyIHZpZXdzIGJlZm9yZSBzZXJpYWxpemF0aW9uLlxuICAgIGNvbnN0IGJpbmFyeSA9IHRvVWludDhBcnJheUlmQmluYXJ5KHZhbHVlKTtcbiAgICBpZiAoYmluYXJ5KSB7XG4gICAgICAgIHJldHVybiB0b0RhdGFVcmxGcm9tQnl0ZXMoYmluYXJ5LCBjb250ZXh0Lm1lZGlhVHlwZSk7XG4gICAgfVxuICAgIGlmIChBcnJheS5pc0FycmF5KHZhbHVlKSkge1xuICAgICAgICByZXR1cm4gdmFsdWUubWFwKChlbnRyeSkgPT4gc2FuaXRpemVWYWx1ZUZvclNlc3Npb24oZW50cnksIGNvbnRleHQpKTtcbiAgICB9XG4gICAgaWYgKCFpc1BsYWluT2JqZWN0KHZhbHVlKSkge1xuICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgfVxuICAgIGNvbnN0IHJlY29yZCA9IHZhbHVlO1xuICAgIGNvbnN0IHJlc3VsdCA9IHt9O1xuICAgIGNvbnN0IG1lZGlhVHlwZSA9IHR5cGVvZiByZWNvcmQubWVkaWFUeXBlID09PSAnc3RyaW5nJyAmJiByZWNvcmQubWVkaWFUeXBlLmxlbmd0aCA+IDBcbiAgICAgICAgPyByZWNvcmQubWVkaWFUeXBlXG4gICAgICAgIDogY29udGV4dC5tZWRpYVR5cGU7XG4gICAgZm9yIChjb25zdCBba2V5LCBlbnRyeV0gb2YgT2JqZWN0LmVudHJpZXMocmVjb3JkKSkge1xuICAgICAgICAvLyBQcm9wYWdhdGUgZXhwbGljaXQgbWVkaWEgdHlwZSBvbmx5IHdoZW4gd2Fsa2luZyBpbnRvIGJpbmFyeSBwYXlsb2FkIGNvbnRhaW5lcnMuXG4gICAgICAgIGNvbnN0IG5leHRDb250ZXh0ID0ga2V5ID09PSAnZGF0YScgfHwga2V5ID09PSAnZmlsZURhdGEnID8geyBtZWRpYVR5cGUgfSA6IGNvbnRleHQ7XG4gICAgICAgIHJlc3VsdFtrZXldID0gc2FuaXRpemVWYWx1ZUZvclNlc3Npb24oZW50cnksIG5leHRDb250ZXh0KTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbn1cbmZ1bmN0aW9uIHRvVWludDhBcnJheUlmQmluYXJ5KHZhbHVlKSB7XG4gICAgLy8gTm9ybWFsaXplIHRoZSBkaXZlcnNlIGJpbmFyeSBjb250YWluZXJzIHdlIG1heSByZWNlaXZlIGludG8gYSBzaGFyZWQgVWludDhBcnJheSB2aWV3LlxuICAgIGlmICh2YWx1ZSBpbnN0YW5jZW9mIEFycmF5QnVmZmVyKSB7XG4gICAgICAgIHJldHVybiBuZXcgVWludDhBcnJheSh2YWx1ZSk7XG4gICAgfVxuICAgIGlmIChpc0FycmF5QnVmZmVyVmlldyh2YWx1ZSkpIHtcbiAgICAgICAgY29uc3QgdmlldyA9IHZhbHVlO1xuICAgICAgICByZXR1cm4gbmV3IFVpbnQ4QXJyYXkodmlldy5idWZmZXIsIHZpZXcuYnl0ZU9mZnNldCwgdmlldy5ieXRlTGVuZ3RoKTtcbiAgICB9XG4gICAgaWYgKGlzTm9kZUJ1ZmZlcih2YWx1ZSkpIHtcbiAgICAgICAgY29uc3QgdmlldyA9IHZhbHVlO1xuICAgICAgICByZXR1cm4gbmV3IFVpbnQ4QXJyYXkodmlldy5idWZmZXIsIHZpZXcuYnl0ZU9mZnNldCwgdmlldy5ieXRlTGVuZ3RoKTtcbiAgICB9XG4gICAgaWYgKGlzU2VyaWFsaXplZEJ1ZmZlclNuYXBzaG90KHZhbHVlKSkge1xuICAgICAgICBjb25zdCBzbmFwc2hvdCA9IHZhbHVlO1xuICAgICAgICByZXR1cm4gVWludDhBcnJheS5mcm9tKHNuYXBzaG90LmRhdGEpO1xuICAgIH1cbiAgICByZXR1cm4gdW5kZWZpbmVkO1xufVxuZnVuY3Rpb24gdG9EYXRhVXJsRnJvbUJ5dGVzKGJ5dGVzLCBtZWRpYVR5cGUpIHtcbiAgICAvLyBDb252ZXJ0IGJpbmFyeSBwYXlsb2FkcyBpbnRvIGEgZHVyYWJsZSBkYXRhIFVSTCBzbyBzZXNzaW9uIGZpbGVzIHJlbWFpbiBzZWxmLWNvbnRhaW5lZC5cbiAgICBjb25zdCBiYXNlNjQgPSBlbmNvZGVVaW50OEFycmF5VG9CYXNlNjQoYnl0ZXMpO1xuICAgIC8vIE5vdGUgdGhhdCBPcGVuQUkgUmVzcG9uc2VzIEFQSSBuZXZlciBhY2NlcHRzIGFwcGxpY2F0aW9uL29jdGV0LXN0cmVhbSBhcyBhIG1lZGlhIHR5cGUsXG4gICAgLy8gc28gd2UgZmFsbCBiYWNrIHRvIHRleHQvcGxhaW47IHRoYXQgc2FpZCwgdG9vbHMgYXJlIHN1cHBvc2VkIHRvIHJldHVybiBhIHZhbGlkIG1lZGlhIHR5cGUgd2hlbiB0aGlzIHV0aWxpdHkgaXMgdXNlZC5cbiAgICBjb25zdCB0eXBlID0gbWVkaWFUeXBlICYmICFtZWRpYVR5cGUuc3RhcnRzV2l0aCgnZGF0YTonKSA/IG1lZGlhVHlwZSA6ICd0ZXh0L3BsYWluJztcbiAgICByZXR1cm4gYGRhdGE6JHt0eXBlfTtiYXNlNjQsJHtiYXNlNjR9YDtcbn1cbmZ1bmN0aW9uIGlzUGxhaW5PYmplY3QodmFsdWUpIHtcbiAgICBpZiAodHlwZW9mIHZhbHVlICE9PSAnb2JqZWN0JyB8fCB2YWx1ZSA9PT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGNvbnN0IHByb3RvID0gT2JqZWN0LmdldFByb3RvdHlwZU9mKHZhbHVlKTtcbiAgICByZXR1cm4gcHJvdG8gPT09IE9iamVjdC5wcm90b3R5cGUgfHwgcHJvdG8gPT09IG51bGw7XG59XG5mdW5jdGlvbiBzdHJpcFRyYW5zaWVudENhbGxJZHModmFsdWUpIHtcbiAgICBpZiAodmFsdWUgPT09IG51bGwgfHwgdmFsdWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgfVxuICAgIGlmIChBcnJheS5pc0FycmF5KHZhbHVlKSkge1xuICAgICAgICByZXR1cm4gdmFsdWUubWFwKChlbnRyeSkgPT4gc3RyaXBUcmFuc2llbnRDYWxsSWRzKGVudHJ5KSk7XG4gICAgfVxuICAgIGlmICghaXNQbGFpbk9iamVjdCh2YWx1ZSkpIHtcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cbiAgICBjb25zdCByZWNvcmQgPSB2YWx1ZTtcbiAgICBjb25zdCByZXN1bHQgPSB7fTtcbiAgICBjb25zdCBpc1Byb3RvY29sSXRlbSA9IHR5cGVvZiByZWNvcmQudHlwZSA9PT0gJ3N0cmluZycgJiYgcmVjb3JkLnR5cGUubGVuZ3RoID4gMDtcbiAgICBjb25zdCBzaG91bGRTdHJpcElkID0gaXNQcm90b2NvbEl0ZW0gJiYgc2hvdWxkU3RyaXBJZEZvclR5cGUocmVjb3JkLnR5cGUpO1xuICAgIGZvciAoY29uc3QgW2tleSwgZW50cnldIG9mIE9iamVjdC5lbnRyaWVzKHJlY29yZCkpIHtcbiAgICAgICAgaWYgKHNob3VsZFN0cmlwSWQgJiYga2V5ID09PSAnaWQnKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICByZXN1bHRba2V5XSA9IHN0cmlwVHJhbnNpZW50Q2FsbElkcyhlbnRyeSk7XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG59XG5mdW5jdGlvbiBzaG91bGRTdHJpcElkRm9yVHlwZSh0eXBlKSB7XG4gICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICAgIGNhc2UgJ2Z1bmN0aW9uX2NhbGwnOlxuICAgICAgICBjYXNlICdmdW5jdGlvbl9jYWxsX3Jlc3VsdCc6XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG59XG5hc3luYyBmdW5jdGlvbiBydW5Db21wYWN0aW9uT25TZXNzaW9uKHNlc3Npb24sIHJlc3BvbnNlSWQsIHN0YXRlKSB7XG4gICAgaWYgKCFpc09wZW5BSVJlc3BvbnNlc0NvbXBhY3Rpb25Bd2FyZVNlc3Npb24oc2Vzc2lvbikpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICAvLyBDYWxsZWQgYWZ0ZXIgYSBjb21wbGV0ZWQgdHVybiBpcyBwZXJzaXN0ZWQgc28gY29tcGFjdGlvbiBjYW4gY29uc2lkZXIgdGhlIGxhdGVzdCBzdG9yZWQgc3RhdGUuXG4gICAgY29uc3QgY29tcGFjdGlvblJlc3VsdCA9IGF3YWl0IHNlc3Npb24ucnVuQ29tcGFjdGlvbih0eXBlb2YgcmVzcG9uc2VJZCA9PT0gJ3VuZGVmaW5lZCcgPyB1bmRlZmluZWQgOiB7IHJlc3BvbnNlSWQgfSk7XG4gICAgaWYgKCFjb21wYWN0aW9uUmVzdWx0KSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgdXNhZ2UgPSBjb21wYWN0aW9uUmVzdWx0LnVzYWdlO1xuICAgIHN0YXRlLl9jb250ZXh0LnVzYWdlLmFkZChuZXcgVXNhZ2Uoe1xuICAgICAgICByZXF1ZXN0czogMSxcbiAgICAgICAgaW5wdXRUb2tlbnM6IHVzYWdlLmlucHV0VG9rZW5zLFxuICAgICAgICBvdXRwdXRUb2tlbnM6IHVzYWdlLm91dHB1dFRva2VucyxcbiAgICAgICAgdG90YWxUb2tlbnM6IHVzYWdlLnRvdGFsVG9rZW5zLFxuICAgICAgICBpbnB1dFRva2Vuc0RldGFpbHM6IHVzYWdlLmlucHV0VG9rZW5zRGV0YWlscyxcbiAgICAgICAgb3V0cHV0VG9rZW5zRGV0YWlsczogdXNhZ2Uub3V0cHV0VG9rZW5zRGV0YWlscyxcbiAgICAgICAgcmVxdWVzdFVzYWdlRW50cmllczogW3VzYWdlXSxcbiAgICB9KSk7XG59XG4vKipcbiAqIEBpbnRlcm5hbFxuICogUGVyc2lzdCBmdWxsIHR1cm4gKGlucHV0ICsgb3V0cHV0cykgZm9yIG5vbi1zdHJlYW1pbmcgcnVucy5cbiAqL1xuLy8gUGVyc2lzdHMgdGhlIGNvbWJpbmF0aW9uIG9mIHVzZXIgaW5wdXRzIChwb3NzaWJseSBmaWx0ZXJlZCkgYW5kIG1vZGVsIG91dHB1dHMgZm9yIGEgY29tcGxldGVkIHR1cm4uXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gc2F2ZVRvU2Vzc2lvbihzZXNzaW9uLCBzZXNzaW9uSW5wdXRJdGVtcywgcmVzdWx0KSB7XG4gICAgaWYgKCFzZXNzaW9uKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgaW5wdXRJdGVtcyA9IHNlc3Npb25JbnB1dEl0ZW1zID8/IFtdO1xuICAgIGNvbnN0IHN0YXRlID0gcmVzdWx0LnN0YXRlO1xuICAgIGNvbnN0IGFscmVhZHlQZXJzaXN0ZWQgPSBzdGF0ZS5fY3VycmVudFR1cm5QZXJzaXN0ZWRJdGVtQ291bnQgPz8gMDtcbiAgICAvLyBQZXJzaXN0IG9ubHkgdGhlIHBvcnRpb24gb2YgX2dlbmVyYXRlZEl0ZW1zIHRoYXQgaGFzIG5vdCB5ZXQgYmVlbiBzdG9yZWQgZm9yIHRoaXMgdHVybi5cbiAgICBjb25zdCBuZXdSdW5JdGVtcyA9IHJlc3VsdC5uZXdJdGVtcy5zbGljZShhbHJlYWR5UGVyc2lzdGVkKTtcbiAgICBpZiAocHJvY2Vzcy5lbnYuT1BFTkFJX0FHRU5UU19fREVCVUdfU0FWRV9TRVNTSU9OKSB7XG4gICAgICAgIGNvbnNvbGUuZGVidWcoJ3NhdmVUb1Nlc3Npb246bmV3UnVuSXRlbXMnLCBuZXdSdW5JdGVtcy5tYXAoKGl0ZW0pID0+IGl0ZW0udHlwZSkpO1xuICAgIH1cbiAgICBjb25zdCBvdXRwdXRJdGVtcyA9IGV4dHJhY3RPdXRwdXRJdGVtc0Zyb21SdW5JdGVtcyhuZXdSdW5JdGVtcyk7XG4gICAgY29uc3QgaXRlbXNUb1NhdmUgPSBbLi4uaW5wdXRJdGVtcywgLi4ub3V0cHV0SXRlbXNdO1xuICAgIGlmIChpdGVtc1RvU2F2ZS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgc3RhdGUuX2N1cnJlbnRUdXJuUGVyc2lzdGVkSXRlbUNvdW50ID1cbiAgICAgICAgICAgIGFscmVhZHlQZXJzaXN0ZWQgKyBuZXdSdW5JdGVtcy5sZW5ndGg7XG4gICAgICAgIGF3YWl0IHJ1bkNvbXBhY3Rpb25PblNlc3Npb24oc2Vzc2lvbiwgcmVzdWx0Lmxhc3RSZXNwb25zZUlkLCBzdGF0ZSk7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3Qgc2FuaXRpemVkSXRlbXMgPSBub3JtYWxpemVJdGVtc0ZvclNlc3Npb25QZXJzaXN0ZW5jZShpdGVtc1RvU2F2ZSk7XG4gICAgYXdhaXQgc2Vzc2lvbi5hZGRJdGVtcyhzYW5pdGl6ZWRJdGVtcyk7XG4gICAgYXdhaXQgcnVuQ29tcGFjdGlvbk9uU2Vzc2lvbihzZXNzaW9uLCByZXN1bHQubGFzdFJlc3BvbnNlSWQsIHN0YXRlKTtcbiAgICBzdGF0ZS5fY3VycmVudFR1cm5QZXJzaXN0ZWRJdGVtQ291bnQgPSBhbHJlYWR5UGVyc2lzdGVkICsgbmV3UnVuSXRlbXMubGVuZ3RoO1xufVxuLyoqXG4gKiBAaW50ZXJuYWxcbiAqIFBlcnNpc3Qgb25seSB0aGUgdXNlciBpbnB1dCBmb3Igc3RyZWFtaW5nIHJ1bnMgYXQgc3RhcnQuXG4gKi9cbi8vIEZvciBzdHJlYW1pbmcgcnVucyB3ZSBwZXJzaXN0IHVzZXIgaW5wdXQgYXMgc29vbiBhcyBpdCBpcyBzZW50IHNvIHJlY29ubmVjdGlvbnMgY2FuIHJlc3VtZS5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBzYXZlU3RyZWFtSW5wdXRUb1Nlc3Npb24oc2Vzc2lvbiwgc2Vzc2lvbklucHV0SXRlbXMpIHtcbiAgICBpZiAoIXNlc3Npb24pIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAoIXNlc3Npb25JbnB1dEl0ZW1zIHx8IHNlc3Npb25JbnB1dEl0ZW1zLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IHNhbml0aXplZElucHV0ID0gbm9ybWFsaXplSXRlbXNGb3JTZXNzaW9uUGVyc2lzdGVuY2Uoc2Vzc2lvbklucHV0SXRlbXMpO1xuICAgIGF3YWl0IHNlc3Npb24uYWRkSXRlbXMoc2FuaXRpemVkSW5wdXQpO1xufVxuLyoqXG4gKiBAaW50ZXJuYWxcbiAqIFBlcnNpc3Qgb25seSB0aGUgbW9kZWwgb3V0cHV0cyBmb3Igc3RyZWFtaW5nIHJ1bnMgYXQgdGhlIGVuZCBvZiBhIHR1cm4uXG4gKi9cbi8vIENvbXBsZW1lbnRzIHNhdmVTdHJlYW1JbnB1dFRvU2Vzc2lvbiBieSByZWNvcmRpbmcgdGhlIHN0cmVhbWluZyBvdXRwdXRzIGF0IHRoZSBlbmQgb2YgdGhlIHR1cm4uXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gc2F2ZVN0cmVhbVJlc3VsdFRvU2Vzc2lvbihzZXNzaW9uLCByZXN1bHQpIHtcbiAgICBpZiAoIXNlc3Npb24pIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBzdGF0ZSA9IHJlc3VsdC5zdGF0ZTtcbiAgICBjb25zdCBhbHJlYWR5UGVyc2lzdGVkID0gc3RhdGUuX2N1cnJlbnRUdXJuUGVyc2lzdGVkSXRlbUNvdW50ID8/IDA7XG4gICAgY29uc3QgbmV3UnVuSXRlbXMgPSByZXN1bHQubmV3SXRlbXMuc2xpY2UoYWxyZWFkeVBlcnNpc3RlZCk7XG4gICAgY29uc3QgaXRlbXNUb1NhdmUgPSBleHRyYWN0T3V0cHV0SXRlbXNGcm9tUnVuSXRlbXMobmV3UnVuSXRlbXMpO1xuICAgIGlmIChpdGVtc1RvU2F2ZS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgc3RhdGUuX2N1cnJlbnRUdXJuUGVyc2lzdGVkSXRlbUNvdW50ID1cbiAgICAgICAgICAgIGFscmVhZHlQZXJzaXN0ZWQgKyBuZXdSdW5JdGVtcy5sZW5ndGg7XG4gICAgICAgIGF3YWl0IHJ1bkNvbXBhY3Rpb25PblNlc3Npb24oc2Vzc2lvbiwgcmVzdWx0Lmxhc3RSZXNwb25zZUlkLCBzdGF0ZSk7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3Qgc2FuaXRpemVkSXRlbXMgPSBub3JtYWxpemVJdGVtc0ZvclNlc3Npb25QZXJzaXN0ZW5jZShpdGVtc1RvU2F2ZSk7XG4gICAgYXdhaXQgc2Vzc2lvbi5hZGRJdGVtcyhzYW5pdGl6ZWRJdGVtcyk7XG4gICAgYXdhaXQgcnVuQ29tcGFjdGlvbk9uU2Vzc2lvbihzZXNzaW9uLCByZXN1bHQubGFzdFJlc3BvbnNlSWQsIHN0YXRlKTtcbiAgICBzdGF0ZS5fY3VycmVudFR1cm5QZXJzaXN0ZWRJdGVtQ291bnQgPSBhbHJlYWR5UGVyc2lzdGVkICsgbmV3UnVuSXRlbXMubGVuZ3RoO1xufVxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHByZXBhcmVJbnB1dEl0ZW1zV2l0aFNlc3Npb24oaW5wdXQsIHNlc3Npb24sIHNlc3Npb25JbnB1dENhbGxiYWNrLCBvcHRpb25zKSB7XG4gICAgaWYgKCFzZXNzaW9uKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBwcmVwYXJlZElucHV0OiBpbnB1dCxcbiAgICAgICAgICAgIHNlc3Npb25JdGVtczogdW5kZWZpbmVkLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBjb25zdCBpbmNsdWRlSGlzdG9yeUluUHJlcGFyZWRJbnB1dCA9IG9wdGlvbnM/LmluY2x1ZGVIaXN0b3J5SW5QcmVwYXJlZElucHV0ID8/IHRydWU7XG4gICAgY29uc3QgcHJlc2VydmVEcm9wcGVkTmV3SXRlbXMgPSBvcHRpb25zPy5wcmVzZXJ2ZURyb3BwZWROZXdJdGVtcyA/PyBmYWxzZTtcbiAgICBjb25zdCBoaXN0b3J5ID0gYXdhaXQgc2Vzc2lvbi5nZXRJdGVtcygpO1xuICAgIGNvbnN0IG5ld0lucHV0SXRlbXMgPSBBcnJheS5pc0FycmF5KGlucHV0KVxuICAgICAgICA/IFsuLi5pbnB1dF1cbiAgICAgICAgOiB0b0lucHV0SXRlbUxpc3QoaW5wdXQpO1xuICAgIGlmICghc2Vzc2lvbklucHV0Q2FsbGJhY2spIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHByZXBhcmVkSW5wdXQ6IGluY2x1ZGVIaXN0b3J5SW5QcmVwYXJlZElucHV0XG4gICAgICAgICAgICAgICAgPyBbLi4uaGlzdG9yeSwgLi4ubmV3SW5wdXRJdGVtc11cbiAgICAgICAgICAgICAgICA6IG5ld0lucHV0SXRlbXMsXG4gICAgICAgICAgICBzZXNzaW9uSXRlbXM6IG5ld0lucHV0SXRlbXMsXG4gICAgICAgIH07XG4gICAgfVxuICAgIC8vIENhcHR1cmUgc25hcHNob3RzIGJlZm9yZSBpbnZva2luZyB0aGUgY2FsbGJhY2sgc28gd2UgY2FuIHJlYXNvbiBhYm91dCB0aGUgb3JpZ2luYWwgc3RhdGUgZXZlblxuICAgIC8vIGlmIHRoZSBjYWxsYmFjayBtdXRhdGVzIHRoZSBoaXN0b3J5IGFycmF5IGluLXBsYWNlLlxuICAgIGNvbnN0IGhpc3RvcnlTbmFwc2hvdCA9IGhpc3Rvcnkuc2xpY2UoKTtcbiAgICBjb25zdCBuZXdJbnB1dFNuYXBzaG90ID0gbmV3SW5wdXRJdGVtcy5zbGljZSgpO1xuICAgIC8vIERlbGVnYXRlIGhpc3RvcnkgcmVjb25jaWxpYXRpb24gdG8gdGhlIHVzZXItc3VwcGxpZWQgY2FsbGJhY2suIEl0IG11c3QgcmV0dXJuIGEgY29uY3JldGUgbGlzdFxuICAgIC8vIHRvIGtlZXAgZG93bnN0cmVhbSBtb2RlbCByZXF1ZXN0cyB3ZWxsLXR5cGVkLlxuICAgIGNvbnN0IGNvbWJpbmVkID0gYXdhaXQgc2Vzc2lvbklucHV0Q2FsbGJhY2soaGlzdG9yeSwgbmV3SW5wdXRJdGVtcyk7XG4gICAgaWYgKCFBcnJheS5pc0FycmF5KGNvbWJpbmVkKSkge1xuICAgICAgICB0aHJvdyBuZXcgVXNlckVycm9yKCdTZXNzaW9uIGlucHV0IGNhbGxiYWNrIG11c3QgcmV0dXJuIGFuIGFycmF5IG9mIEFnZW50SW5wdXRJdGVtIG9iamVjdHMuJyk7XG4gICAgfVxuICAgIGNvbnN0IGhpc3RvcnlDb3VudHMgPSBidWlsZEl0ZW1GcmVxdWVuY3lNYXAoaGlzdG9yeVNuYXBzaG90KTtcbiAgICBjb25zdCBuZXdJbnB1dENvdW50cyA9IGJ1aWxkSXRlbUZyZXF1ZW5jeU1hcChuZXdJbnB1dFNuYXBzaG90KTtcbiAgICBjb25zdCBoaXN0b3J5UmVmcyA9IGJ1aWxkSXRlbVJlZmVyZW5jZU1hcChoaXN0b3J5U25hcHNob3QpO1xuICAgIGNvbnN0IG5ld0lucHV0UmVmcyA9IGJ1aWxkSXRlbVJlZmVyZW5jZU1hcChuZXdJbnB1dFNuYXBzaG90KTtcbiAgICBjb25zdCBhcHBlbmRlZCA9IFtdO1xuICAgIGZvciAoY29uc3QgaXRlbSBvZiBjb21iaW5lZCkge1xuICAgICAgICBjb25zdCBrZXkgPSBzZXNzaW9uSXRlbUtleShpdGVtKTtcbiAgICAgICAgaWYgKGNvbnN1bWVSZWZlcmVuY2UobmV3SW5wdXRSZWZzLCBrZXksIGl0ZW0pKSB7XG4gICAgICAgICAgICBkZWNyZW1lbnRDb3VudChuZXdJbnB1dENvdW50cywga2V5KTtcbiAgICAgICAgICAgIGFwcGVuZGVkLnB1c2goaXRlbSk7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICAvLyBQcmlvcml0aXplIGV4YWN0IGhpc3RvcnkgbWF0Y2hlcyBiZWZvcmUgcGF5bG9hZC1iYXNlZCBjb3VudHMgc28gY2FsbGJhY2tzIHRoYXQgc3VyZmFjZVxuICAgICAgICAvLyBoaXN0b3J5IGFoZWFkIG9mIGlkZW50aWNhbCBuZXcgaW5wdXRzIGtlZXAgcHJldmlvdXNseSBwZXJzaXN0ZWQgaXRlbXMgb3V0IG9mIHRoZSBuZXcgcXVldWUuXG4gICAgICAgIGlmIChjb25zdW1lUmVmZXJlbmNlKGhpc3RvcnlSZWZzLCBrZXksIGl0ZW0pKSB7XG4gICAgICAgICAgICBkZWNyZW1lbnRDb3VudChoaXN0b3J5Q291bnRzLCBrZXkpO1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgaGlzdG9yeVJlbWFpbmluZyA9IGhpc3RvcnlDb3VudHMuZ2V0KGtleSkgPz8gMDtcbiAgICAgICAgaWYgKGhpc3RvcnlSZW1haW5pbmcgPiAwKSB7XG4gICAgICAgICAgICBoaXN0b3J5Q291bnRzLnNldChrZXksIGhpc3RvcnlSZW1haW5pbmcgLSAxKTtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG5ld1JlbWFpbmluZyA9IG5ld0lucHV0Q291bnRzLmdldChrZXkpID8/IDA7XG4gICAgICAgIGlmIChuZXdSZW1haW5pbmcgPiAwKSB7XG4gICAgICAgICAgICBuZXdJbnB1dENvdW50cy5zZXQoa2V5LCBuZXdSZW1haW5pbmcgLSAxKTtcbiAgICAgICAgICAgIGFwcGVuZGVkLnB1c2goaXRlbSk7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBhcHBlbmRlZC5wdXNoKGl0ZW0pO1xuICAgIH1cbiAgICAvLyBQcmVzZXJ2ZSByZWRhY3RlZCBpbnB1dHMgZm9yIG1vZGVsIGRlbGl2ZXJ5IHdoZW4gcmVxdWVzdGVkIChlLmcuIHNlcnZlci1tYW5hZ2VkIGhpc3RvcmllcykuXG4gICAgY29uc3QgcHJlcGFyZWRJdGVtcyA9IGluY2x1ZGVIaXN0b3J5SW5QcmVwYXJlZElucHV0XG4gICAgICAgID8gY29tYmluZWRcbiAgICAgICAgOiBhcHBlbmRlZC5sZW5ndGggPiAwXG4gICAgICAgICAgICA/IGFwcGVuZGVkXG4gICAgICAgICAgICA6IHByZXNlcnZlRHJvcHBlZE5ld0l0ZW1zXG4gICAgICAgICAgICAgICAgPyBuZXdJbnB1dFNuYXBzaG90XG4gICAgICAgICAgICAgICAgOiBbXTtcbiAgICByZXR1cm4ge1xuICAgICAgICBwcmVwYXJlZElucHV0OiBwcmVwYXJlZEl0ZW1zLFxuICAgICAgICAvLyBSZXNwZWN0IGNhbGxiYWNrcyB0aGF0IGludGVudGlvbmFsbHkgZHJvcCB0aGUgbGF0ZXN0IGlucHV0cyAoZS5nLiB0byByZWRhY3Qgc2Vuc2l0aXZlXG4gICAgICAgIC8vIHZhbHVlcykgYnkgcGVyc2lzdGluZyBvbmx5IHRoZSBpdGVtcyB0aGV5IGtlcHQgaW4gdGhlIGNvbWJpbmVkIGFycmF5LlxuICAgICAgICBzZXNzaW9uSXRlbXM6IGFwcGVuZGVkLFxuICAgIH07XG59XG4vKipcbiAqIEFjY2VwdHMgd2hhdGV2ZXIgdGhlIHRvb2wgcmV0dXJuZWQgYW5kIGF0dGVtcHRzIHRvIGNvZXJjZSBpdCBpbnRvIHRoZSBzdHJ1Y3R1cmVkIHByb3RvY29sXG4gKiBzaGFwZXMgd2UgZXhwb3NlIHRvIGRvd25zdHJlYW0gbW9kZWwgYWRhcHRlcnMgKGlucHV0X3RleHQvaW5wdXRfaW1hZ2UvaW5wdXRfZmlsZSkuIFRvb2xzIGFyZVxuICogYWxsb3dlZCB0byByZXR1cm4gZWl0aGVyIGEgc2luZ2xlIHN0cnVjdHVyZWQgb2JqZWN0IG9yIGFuIGFycmF5IG9mIHRoZW07IGFueXRoaW5nIGVsc2UgZmFsbHNcbiAqIGJhY2sgdG8gdGhlIGxlZ2FjeSBzdHJpbmcgcGlwZWxpbmUuXG4gKi9cbmZ1bmN0aW9uIG5vcm1hbGl6ZVN0cnVjdHVyZWRUb29sT3V0cHV0cyhvdXRwdXQpIHtcbiAgICBpZiAoQXJyYXkuaXNBcnJheShvdXRwdXQpKSB7XG4gICAgICAgIGNvbnN0IHN0cnVjdHVyZWQgPSBbXTtcbiAgICAgICAgZm9yIChjb25zdCBpdGVtIG9mIG91dHB1dCkge1xuICAgICAgICAgICAgY29uc3Qgbm9ybWFsaXplZCA9IG5vcm1hbGl6ZVN0cnVjdHVyZWRUb29sT3V0cHV0KGl0ZW0pO1xuICAgICAgICAgICAgaWYgKCFub3JtYWxpemVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzdHJ1Y3R1cmVkLnB1c2gobm9ybWFsaXplZCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHN0cnVjdHVyZWQ7XG4gICAgfVxuICAgIGNvbnN0IG5vcm1hbGl6ZWQgPSBub3JtYWxpemVTdHJ1Y3R1cmVkVG9vbE91dHB1dChvdXRwdXQpO1xuICAgIHJldHVybiBub3JtYWxpemVkID8gW25vcm1hbGl6ZWRdIDogbnVsbDtcbn1cbi8qKlxuICogQmVzdC1lZmZvcnQgbm9ybWFsaXphdGlvbiBvZiBhIHNpbmdsZSB0b29sIG91dHB1dCBpdGVtLiBJZiB0aGUgb2JqZWN0IGFscmVhZHkgbWF0Y2hlcyB0aGVcbiAqIHByb3RvY29sIHNoYXBlIHdlIHNpbXBseSBjYXN0IGl0OyBvdGhlcndpc2Ugd2UgY29weSB0aGUgcmVjb2duaXNlZCBmaWVsZHMgaW50byB0aGUgY2Fub25pY2FsXG4gKiBzdHJ1Y3R1cmUuIFJldHVybmluZyBudWxsIGxldHMgdGhlIGNhbGxlciBrbm93IHdlIHNob3VsZCByZXZlcnQgdG8gcGxhaW4tc3RyaW5nIGhhbmRsaW5nLlxuICovXG5mdW5jdGlvbiBub3JtYWxpemVTdHJ1Y3R1cmVkVG9vbE91dHB1dCh2YWx1ZSkge1xuICAgIGlmICghaXNSZWNvcmQodmFsdWUpKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBjb25zdCB0eXBlID0gdmFsdWUudHlwZTtcbiAgICBpZiAodHlwZSA9PT0gJ3RleHQnICYmIHR5cGVvZiB2YWx1ZS50ZXh0ID09PSAnc3RyaW5nJykge1xuICAgICAgICBjb25zdCBvdXRwdXQgPSB7IHR5cGU6ICd0ZXh0JywgdGV4dDogdmFsdWUudGV4dCB9O1xuICAgICAgICBpZiAoaXNSZWNvcmQodmFsdWUucHJvdmlkZXJEYXRhKSkge1xuICAgICAgICAgICAgb3V0cHV0LnByb3ZpZGVyRGF0YSA9IHZhbHVlLnByb3ZpZGVyRGF0YTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb3V0cHV0O1xuICAgIH1cbiAgICBpZiAodHlwZSA9PT0gJ2ltYWdlJykge1xuICAgICAgICBjb25zdCBvdXRwdXQgPSB7IHR5cGU6ICdpbWFnZScgfTtcbiAgICAgICAgbGV0IGltYWdlU3RyaW5nO1xuICAgICAgICBsZXQgaW1hZ2VGaWxlSWQ7XG4gICAgICAgIGNvbnN0IGZhbGxiYWNrSW1hZ2VNZWRpYVR5cGUgPSBpc05vbkVtcHR5U3RyaW5nKHZhbHVlLm1lZGlhVHlwZSlcbiAgICAgICAgICAgID8gdmFsdWUubWVkaWFUeXBlXG4gICAgICAgICAgICA6IHVuZGVmaW5lZDtcbiAgICAgICAgY29uc3QgaW1hZ2VGaWVsZCA9IHZhbHVlLmltYWdlO1xuICAgICAgICBpZiAodHlwZW9mIGltYWdlRmllbGQgPT09ICdzdHJpbmcnICYmIGltYWdlRmllbGQubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgaW1hZ2VTdHJpbmcgPSBpbWFnZUZpZWxkO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGlzUmVjb3JkKGltYWdlRmllbGQpKSB7XG4gICAgICAgICAgICBjb25zdCBpbWFnZU9iaiA9IGltYWdlRmllbGQ7XG4gICAgICAgICAgICBjb25zdCBpbmxpbmVNZWRpYVR5cGUgPSBpc05vbkVtcHR5U3RyaW5nKGltYWdlT2JqLm1lZGlhVHlwZSlcbiAgICAgICAgICAgICAgICA/IGltYWdlT2JqLm1lZGlhVHlwZVxuICAgICAgICAgICAgICAgIDogZmFsbGJhY2tJbWFnZU1lZGlhVHlwZTtcbiAgICAgICAgICAgIGlmIChpc05vbkVtcHR5U3RyaW5nKGltYWdlT2JqLnVybCkpIHtcbiAgICAgICAgICAgICAgICBpbWFnZVN0cmluZyA9IGltYWdlT2JqLnVybDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGlzTm9uRW1wdHlTdHJpbmcoaW1hZ2VPYmouZGF0YSkpIHtcbiAgICAgICAgICAgICAgICBpbWFnZVN0cmluZyA9IHRvSW5saW5lSW1hZ2VTdHJpbmcoaW1hZ2VPYmouZGF0YSwgaW5saW5lTWVkaWFUeXBlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGltYWdlT2JqLmRhdGEgaW5zdGFuY2VvZiBVaW50OEFycmF5ICYmXG4gICAgICAgICAgICAgICAgaW1hZ2VPYmouZGF0YS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgaW1hZ2VTdHJpbmcgPSB0b0lubGluZUltYWdlU3RyaW5nKGltYWdlT2JqLmRhdGEsIGlubGluZU1lZGlhVHlwZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIWltYWdlU3RyaW5nKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgY2FuZGlkYXRlSWQgPSAoaXNOb25FbXB0eVN0cmluZyhpbWFnZU9iai5maWxlSWQpICYmIGltYWdlT2JqLmZpbGVJZCkgfHxcbiAgICAgICAgICAgICAgICAgICAgKGlzTm9uRW1wdHlTdHJpbmcoaW1hZ2VPYmouaWQpICYmIGltYWdlT2JqLmlkKSB8fFxuICAgICAgICAgICAgICAgICAgICB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgaWYgKGNhbmRpZGF0ZUlkKSB7XG4gICAgICAgICAgICAgICAgICAgIGltYWdlRmlsZUlkID0gY2FuZGlkYXRlSWQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICghaW1hZ2VTdHJpbmcgJiZcbiAgICAgICAgICAgIHR5cGVvZiB2YWx1ZS5pbWFnZVVybCA9PT0gJ3N0cmluZycgJiZcbiAgICAgICAgICAgIHZhbHVlLmltYWdlVXJsLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGltYWdlU3RyaW5nID0gdmFsdWUuaW1hZ2VVcmw7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFpbWFnZUZpbGVJZCAmJlxuICAgICAgICAgICAgdHlwZW9mIHZhbHVlLmZpbGVJZCA9PT0gJ3N0cmluZycgJiZcbiAgICAgICAgICAgIHZhbHVlLmZpbGVJZC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBpbWFnZUZpbGVJZCA9IHZhbHVlLmZpbGVJZDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWltYWdlU3RyaW5nICYmXG4gICAgICAgICAgICB0eXBlb2YgdmFsdWUuZGF0YSA9PT0gJ3N0cmluZycgJiZcbiAgICAgICAgICAgIHZhbHVlLmRhdGEubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgaW1hZ2VTdHJpbmcgPSBmYWxsYmFja0ltYWdlTWVkaWFUeXBlXG4gICAgICAgICAgICAgICAgPyB0b0lubGluZUltYWdlU3RyaW5nKHZhbHVlLmRhdGEsIGZhbGxiYWNrSW1hZ2VNZWRpYVR5cGUpXG4gICAgICAgICAgICAgICAgOiB2YWx1ZS5kYXRhO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKCFpbWFnZVN0cmluZyAmJlxuICAgICAgICAgICAgdmFsdWUuZGF0YSBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkgJiZcbiAgICAgICAgICAgIHZhbHVlLmRhdGEubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgaW1hZ2VTdHJpbmcgPSB0b0lubGluZUltYWdlU3RyaW5nKHZhbHVlLmRhdGEsIGZhbGxiYWNrSW1hZ2VNZWRpYVR5cGUpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlb2YgdmFsdWUuZGV0YWlsID09PSAnc3RyaW5nJyAmJiB2YWx1ZS5kZXRhaWwubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgb3V0cHV0LmRldGFpbCA9IHZhbHVlLmRldGFpbDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaW1hZ2VTdHJpbmcpIHtcbiAgICAgICAgICAgIG91dHB1dC5pbWFnZSA9IGltYWdlU3RyaW5nO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGltYWdlRmlsZUlkKSB7XG4gICAgICAgICAgICBvdXRwdXQuaW1hZ2UgPSB7IGZpbGVJZDogaW1hZ2VGaWxlSWQgfTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpc1JlY29yZCh2YWx1ZS5wcm92aWRlckRhdGEpKSB7XG4gICAgICAgICAgICBvdXRwdXQucHJvdmlkZXJEYXRhID0gdmFsdWUucHJvdmlkZXJEYXRhO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvdXRwdXQ7XG4gICAgfVxuICAgIGlmICh0eXBlID09PSAnZmlsZScpIHtcbiAgICAgICAgY29uc3QgZmlsZVZhbHVlID0gbm9ybWFsaXplRmlsZVZhbHVlKHZhbHVlKTtcbiAgICAgICAgaWYgKCFmaWxlVmFsdWUpIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG91dHB1dCA9IHsgdHlwZTogJ2ZpbGUnLCBmaWxlOiBmaWxlVmFsdWUgfTtcbiAgICAgICAgaWYgKGlzUmVjb3JkKHZhbHVlLnByb3ZpZGVyRGF0YSkpIHtcbiAgICAgICAgICAgIG91dHB1dC5wcm92aWRlckRhdGEgPSB2YWx1ZS5wcm92aWRlckRhdGE7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG91dHB1dDtcbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG59XG4vKipcbiAqIFRyYW5zbGF0ZXMgdGhlIG5vcm1hbGl6ZWQgdG9vbCBvdXRwdXQgaW50byB0aGUgcHJvdG9jb2wgYGlucHV0XypgIGl0ZW1zLiBUaGlzIGlzIHRoZSBsYXN0IGhvcFxuICogYmVmb3JlIHdlIGhhbmQgdGhlIGRhdGEgdG8gbW9kZWwtc3BlY2lmaWMgYWRhcHRlcnMsIHNvIHdlIGdlbmVyYXRlIHRoZSBleGFjdCBzY2hlbWEgZXhwZWN0ZWQgYnlcbiAqIHRoZSBwcm90b2NvbCBkZWZpbml0aW9ucy5cbiAqL1xuZnVuY3Rpb24gY29udmVydFN0cnVjdHVyZWRUb29sT3V0cHV0VG9JbnB1dEl0ZW0ob3V0cHV0KSB7XG4gICAgaWYgKG91dHB1dC50eXBlID09PSAndGV4dCcpIHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0ge1xuICAgICAgICAgICAgdHlwZTogJ2lucHV0X3RleHQnLFxuICAgICAgICAgICAgdGV4dDogb3V0cHV0LnRleHQsXG4gICAgICAgIH07XG4gICAgICAgIGlmIChvdXRwdXQucHJvdmlkZXJEYXRhKSB7XG4gICAgICAgICAgICByZXN1bHQucHJvdmlkZXJEYXRhID0gb3V0cHV0LnByb3ZpZGVyRGF0YTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbiAgICBpZiAob3V0cHV0LnR5cGUgPT09ICdpbWFnZScpIHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0geyB0eXBlOiAnaW5wdXRfaW1hZ2UnIH07XG4gICAgICAgIGlmICh0eXBlb2Ygb3V0cHV0LmRldGFpbCA9PT0gJ3N0cmluZycgJiYgb3V0cHV0LmRldGFpbC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICByZXN1bHQuZGV0YWlsID0gb3V0cHV0LmRldGFpbDtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIG91dHB1dC5pbWFnZSA9PT0gJ3N0cmluZycgJiYgb3V0cHV0LmltYWdlLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHJlc3VsdC5pbWFnZSA9IG91dHB1dC5pbWFnZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChpc1JlY29yZChvdXRwdXQuaW1hZ2UpKSB7XG4gICAgICAgICAgICBjb25zdCBpbWFnZU9iaiA9IG91dHB1dC5pbWFnZTtcbiAgICAgICAgICAgIGNvbnN0IGlubGluZU1lZGlhVHlwZSA9IGlzTm9uRW1wdHlTdHJpbmcoaW1hZ2VPYmoubWVkaWFUeXBlKVxuICAgICAgICAgICAgICAgID8gaW1hZ2VPYmoubWVkaWFUeXBlXG4gICAgICAgICAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgICAgICAgICBpZiAoaXNOb25FbXB0eVN0cmluZyhpbWFnZU9iai51cmwpKSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0LmltYWdlID0gaW1hZ2VPYmoudXJsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoaXNOb25FbXB0eVN0cmluZyhpbWFnZU9iai5kYXRhKSkge1xuICAgICAgICAgICAgICAgIHJlc3VsdC5pbWFnZSA9XG4gICAgICAgICAgICAgICAgICAgIGlubGluZU1lZGlhVHlwZSAmJiAhaW1hZ2VPYmouZGF0YS5zdGFydHNXaXRoKCdkYXRhOicpXG4gICAgICAgICAgICAgICAgICAgICAgICA/IGFzRGF0YVVybChpbWFnZU9iai5kYXRhLCBpbmxpbmVNZWRpYVR5cGUpXG4gICAgICAgICAgICAgICAgICAgICAgICA6IGltYWdlT2JqLmRhdGE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChpbWFnZU9iai5kYXRhIGluc3RhbmNlb2YgVWludDhBcnJheSAmJlxuICAgICAgICAgICAgICAgIGltYWdlT2JqLmRhdGEubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGJhc2U2NCA9IGVuY29kZVVpbnQ4QXJyYXlUb0Jhc2U2NChpbWFnZU9iai5kYXRhKTtcbiAgICAgICAgICAgICAgICByZXN1bHQuaW1hZ2UgPSBhc0RhdGFVcmwoYmFzZTY0LCBpbmxpbmVNZWRpYVR5cGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVmZXJlbmNlZElkID0gKGlzTm9uRW1wdHlTdHJpbmcoaW1hZ2VPYmouZmlsZUlkKSAmJiBpbWFnZU9iai5maWxlSWQpIHx8XG4gICAgICAgICAgICAgICAgICAgIChpc05vbkVtcHR5U3RyaW5nKGltYWdlT2JqLmlkKSAmJiBpbWFnZU9iai5pZCkgfHxcbiAgICAgICAgICAgICAgICAgICAgdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgIGlmIChyZWZlcmVuY2VkSWQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LmltYWdlID0geyBpZDogcmVmZXJlbmNlZElkIH07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChvdXRwdXQucHJvdmlkZXJEYXRhKSB7XG4gICAgICAgICAgICByZXN1bHQucHJvdmlkZXJEYXRhID0gb3V0cHV0LnByb3ZpZGVyRGF0YTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbiAgICBpZiAob3V0cHV0LnR5cGUgPT09ICdmaWxlJykge1xuICAgICAgICBjb25zdCByZXN1bHQgPSB7IHR5cGU6ICdpbnB1dF9maWxlJyB9O1xuICAgICAgICBjb25zdCBmaWxlVmFsdWUgPSBvdXRwdXQuZmlsZTtcbiAgICAgICAgaWYgKHR5cGVvZiBmaWxlVmFsdWUgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICByZXN1bHQuZmlsZSA9IGZpbGVWYWx1ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChmaWxlVmFsdWUgJiYgdHlwZW9mIGZpbGVWYWx1ZSA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgIGNvbnN0IHJlY29yZCA9IGZpbGVWYWx1ZTtcbiAgICAgICAgICAgIGlmICgnZGF0YScgaW4gcmVjb3JkICYmIHJlY29yZC5kYXRhKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbWVkaWFUeXBlID0gcmVjb3JkLm1lZGlhVHlwZSA/PyAndGV4dC9wbGFpbic7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiByZWNvcmQuZGF0YSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LmZpbGUgPSBhc0RhdGFVcmwocmVjb3JkLmRhdGEsIG1lZGlhVHlwZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBiYXNlNjQgPSBlbmNvZGVVaW50OEFycmF5VG9CYXNlNjQocmVjb3JkLmRhdGEpO1xuICAgICAgICAgICAgICAgICAgICByZXN1bHQuZmlsZSA9IGFzRGF0YVVybChiYXNlNjQsIG1lZGlhVHlwZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodHlwZW9mIHJlY29yZC51cmwgPT09ICdzdHJpbmcnICYmIHJlY29yZC51cmwubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIHJlc3VsdC5maWxlID0geyB1cmw6IHJlY29yZC51cmwgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlZmVyZW5jZWRJZCA9ICh0eXBlb2YgcmVjb3JkLmlkID09PSAnc3RyaW5nJyAmJlxuICAgICAgICAgICAgICAgICAgICByZWNvcmQuaWQubGVuZ3RoID4gMCAmJlxuICAgICAgICAgICAgICAgICAgICByZWNvcmQuaWQpIHx8XG4gICAgICAgICAgICAgICAgICAgICh0eXBlb2YgcmVjb3JkLmZpbGVJZCA9PT0gJ3N0cmluZycgJiYgcmVjb3JkLmZpbGVJZC5sZW5ndGggPiAwXG4gICAgICAgICAgICAgICAgICAgICAgICA/IHJlY29yZC5maWxlSWRcbiAgICAgICAgICAgICAgICAgICAgICAgIDogdW5kZWZpbmVkKTtcbiAgICAgICAgICAgICAgICBpZiAocmVmZXJlbmNlZElkKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdC5maWxlID0geyBpZDogcmVmZXJlbmNlZElkIH07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHR5cGVvZiByZWNvcmQuZmlsZW5hbWUgPT09ICdzdHJpbmcnICYmIHJlY29yZC5maWxlbmFtZS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0LmZpbGVuYW1lID0gcmVjb3JkLmZpbGVuYW1lO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChvdXRwdXQucHJvdmlkZXJEYXRhKSB7XG4gICAgICAgICAgICByZXN1bHQucHJvdmlkZXJEYXRhID0gb3V0cHV0LnByb3ZpZGVyRGF0YTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbiAgICBjb25zdCBleGhhdXN0aXZlQ2hlY2sgPSBvdXRwdXQ7XG4gICAgcmV0dXJuIGV4aGF1c3RpdmVDaGVjaztcbn1cbmZ1bmN0aW9uIGJ1aWxkSXRlbUZyZXF1ZW5jeU1hcChpdGVtcykge1xuICAgIGNvbnN0IGNvdW50cyA9IG5ldyBNYXAoKTtcbiAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgaXRlbXMpIHtcbiAgICAgICAgY29uc3Qga2V5ID0gc2Vzc2lvbkl0ZW1LZXkoaXRlbSk7XG4gICAgICAgIGNvdW50cy5zZXQoa2V5LCAoY291bnRzLmdldChrZXkpID8/IDApICsgMSk7XG4gICAgfVxuICAgIHJldHVybiBjb3VudHM7XG59XG5mdW5jdGlvbiBidWlsZEl0ZW1SZWZlcmVuY2VNYXAoaXRlbXMpIHtcbiAgICBjb25zdCByZWZzID0gbmV3IE1hcCgpO1xuICAgIGZvciAoY29uc3QgaXRlbSBvZiBpdGVtcykge1xuICAgICAgICBjb25zdCBrZXkgPSBzZXNzaW9uSXRlbUtleShpdGVtKTtcbiAgICAgICAgY29uc3QgbGlzdCA9IHJlZnMuZ2V0KGtleSk7XG4gICAgICAgIGlmIChsaXN0KSB7XG4gICAgICAgICAgICBsaXN0LnB1c2goaXRlbSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZWZzLnNldChrZXksIFtpdGVtXSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHJlZnM7XG59XG5mdW5jdGlvbiBjb25zdW1lUmVmZXJlbmNlKHJlZnMsIGtleSwgdGFyZ2V0KSB7XG4gICAgY29uc3QgY2FuZGlkYXRlcyA9IHJlZnMuZ2V0KGtleSk7XG4gICAgaWYgKCFjYW5kaWRhdGVzIHx8IGNhbmRpZGF0ZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgY29uc3QgaW5kZXggPSBjYW5kaWRhdGVzLmZpbmRJbmRleCgoY2FuZGlkYXRlKSA9PiBjYW5kaWRhdGUgPT09IHRhcmdldCk7XG4gICAgaWYgKGluZGV4ID09PSAtMSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGNhbmRpZGF0ZXMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICBpZiAoY2FuZGlkYXRlcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgcmVmcy5kZWxldGUoa2V5KTtcbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG59XG5mdW5jdGlvbiBkZWNyZW1lbnRDb3VudChtYXAsIGtleSkge1xuICAgIGNvbnN0IHJlbWFpbmluZyA9IChtYXAuZ2V0KGtleSkgPz8gMCkgLSAxO1xuICAgIGlmIChyZW1haW5pbmcgPD0gMCkge1xuICAgICAgICBtYXAuZGVsZXRlKGtleSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBtYXAuc2V0KGtleSwgcmVtYWluaW5nKTtcbiAgICB9XG59XG5mdW5jdGlvbiBzZXNzaW9uSXRlbUtleShpdGVtKSB7XG4gICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KGl0ZW0sIHNlc3Npb25TZXJpYWxpemF0aW9uUmVwbGFjZXIpO1xufVxuZnVuY3Rpb24gc2Vzc2lvblNlcmlhbGl6YXRpb25SZXBsYWNlcihfa2V5LCB2YWx1ZSkge1xuICAgIGlmICh2YWx1ZSBpbnN0YW5jZW9mIEFycmF5QnVmZmVyKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBfX3R5cGU6ICdBcnJheUJ1ZmZlcicsXG4gICAgICAgICAgICBkYXRhOiBlbmNvZGVVaW50OEFycmF5VG9CYXNlNjQobmV3IFVpbnQ4QXJyYXkodmFsdWUpKSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgaWYgKGlzQXJyYXlCdWZmZXJWaWV3KHZhbHVlKSkge1xuICAgICAgICBjb25zdCB2aWV3ID0gdmFsdWU7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBfX3R5cGU6IHZpZXcuY29uc3RydWN0b3IubmFtZSxcbiAgICAgICAgICAgIGRhdGE6IGVuY29kZVVpbnQ4QXJyYXlUb0Jhc2U2NChuZXcgVWludDhBcnJheSh2aWV3LmJ1ZmZlciwgdmlldy5ieXRlT2Zmc2V0LCB2aWV3LmJ5dGVMZW5ndGgpKSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgaWYgKGlzTm9kZUJ1ZmZlcih2YWx1ZSkpIHtcbiAgICAgICAgY29uc3QgdmlldyA9IHZhbHVlO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgX190eXBlOiAnQnVmZmVyJyxcbiAgICAgICAgICAgIGRhdGE6IGVuY29kZVVpbnQ4QXJyYXlUb0Jhc2U2NChuZXcgVWludDhBcnJheSh2aWV3LmJ1ZmZlciwgdmlldy5ieXRlT2Zmc2V0LCB2aWV3LmJ5dGVMZW5ndGgpKSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgaWYgKGlzU2VyaWFsaXplZEJ1ZmZlclNuYXBzaG90KHZhbHVlKSkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgX190eXBlOiAnQnVmZmVyJyxcbiAgICAgICAgICAgIGRhdGE6IGVuY29kZVVpbnQ4QXJyYXlUb0Jhc2U2NChVaW50OEFycmF5LmZyb20odmFsdWUuZGF0YSkpLFxuICAgICAgICB9O1xuICAgIH1cbiAgICByZXR1cm4gdmFsdWU7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1ydW5JbXBsZW1lbnRhdGlvbi5tanMubWFwIiwiaW1wb3J0IHsgeiB9IGZyb20gJ3pvZCc7XG5pbXBvcnQgeyBBZ2VudCB9IGZyb20gXCIuL2FnZW50Lm1qc1wiO1xuaW1wb3J0IHsgUnVuTWVzc2FnZU91dHB1dEl0ZW0sIFJ1blRvb2xBcHByb3ZhbEl0ZW0sIFJ1blRvb2xDYWxsSXRlbSwgUnVuVG9vbENhbGxPdXRwdXRJdGVtLCBSdW5SZWFzb25pbmdJdGVtLCBSdW5IYW5kb2ZmQ2FsbEl0ZW0sIFJ1bkhhbmRvZmZPdXRwdXRJdGVtLCB9IGZyb20gXCIuL2l0ZW1zLm1qc1wiO1xuaW1wb3J0IHsgUnVuQ29udGV4dCB9IGZyb20gXCIuL3J1bkNvbnRleHQubWpzXCI7XG5pbXBvcnQgeyBnZXRUdXJuSW5wdXQgfSBmcm9tIFwiLi9ydW4ubWpzXCI7XG5pbXBvcnQgeyBBZ2VudFRvb2xVc2VUcmFja2VyLCBuZXh0U3RlcFNjaGVtYSwgfSBmcm9tIFwiLi9ydW5JbXBsZW1lbnRhdGlvbi5tanNcIjtcbmltcG9ydCB7IFN5c3RlbUVycm9yLCBVc2VyRXJyb3IgfSBmcm9tIFwiLi9lcnJvcnMubWpzXCI7XG5pbXBvcnQgeyBnZXRHbG9iYWxUcmFjZVByb3ZpZGVyIH0gZnJvbSBcIi4vdHJhY2luZy9wcm92aWRlci5tanNcIjtcbmltcG9ydCB7IFVzYWdlIH0gZnJvbSBcIi4vdXNhZ2UubWpzXCI7XG5pbXBvcnQgeyBnZXRDdXJyZW50VHJhY2UgfSBmcm9tIFwiLi90cmFjaW5nL2luZGV4Lm1qc1wiO1xuaW1wb3J0IGxvZ2dlciBmcm9tIFwiLi9sb2dnZXIubWpzXCI7XG5pbXBvcnQgeyBoYW5kb2ZmIH0gZnJvbSBcIi4vaGFuZG9mZi5tanNcIjtcbmltcG9ydCAqIGFzIHByb3RvY29sIGZyb20gXCIuL3R5cGVzL3Byb3RvY29sLm1qc1wiO1xuaW1wb3J0IHsgc2FmZUV4ZWN1dGUgfSBmcm9tIFwiLi91dGlscy9zYWZlRXhlY3V0ZS5tanNcIjtcbi8qKlxuICogVGhlIHNjaGVtYSB2ZXJzaW9uIG9mIHRoZSBzZXJpYWxpemVkIHJ1biBzdGF0ZS4gVGhpcyBpcyB1c2VkIHRvIGVuc3VyZSB0aGF0IHRoZSBzZXJpYWxpemVkXG4gKiBydW4gc3RhdGUgaXMgY29tcGF0aWJsZSB3aXRoIHRoZSBjdXJyZW50IHZlcnNpb24gb2YgdGhlIFNESy5cbiAqIElmIGFueXRoaW5nIGluIHRoaXMgc2NoZW1hIGNoYW5nZXMsIHRoZSB2ZXJzaW9uIHdpbGwgaGF2ZSB0byBiZSBpbmNyZW1lbnRlZC5cbiAqL1xuZXhwb3J0IGNvbnN0IENVUlJFTlRfU0NIRU1BX1ZFUlNJT04gPSAnMS4wJztcbmNvbnN0ICRzY2hlbWFWZXJzaW9uID0gei5saXRlcmFsKENVUlJFTlRfU0NIRU1BX1ZFUlNJT04pO1xuY29uc3Qgc2VyaWFsaXplZEFnZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIG5hbWU6IHouc3RyaW5nKCksXG59KTtcbmNvbnN0IHNlcmlhbGl6ZWRTcGFuQmFzZSA9IHoub2JqZWN0KHtcbiAgICBvYmplY3Q6IHoubGl0ZXJhbCgndHJhY2Uuc3BhbicpLFxuICAgIGlkOiB6LnN0cmluZygpLFxuICAgIHRyYWNlX2lkOiB6LnN0cmluZygpLFxuICAgIHBhcmVudF9pZDogei5zdHJpbmcoKS5udWxsYWJsZSgpLFxuICAgIHN0YXJ0ZWRfYXQ6IHouc3RyaW5nKCkubnVsbGFibGUoKSxcbiAgICBlbmRlZF9hdDogei5zdHJpbmcoKS5udWxsYWJsZSgpLFxuICAgIGVycm9yOiB6XG4gICAgICAgIC5vYmplY3Qoe1xuICAgICAgICBtZXNzYWdlOiB6LnN0cmluZygpLFxuICAgICAgICBkYXRhOiB6LnJlY29yZCh6LnN0cmluZygpLCB6LmFueSgpKS5vcHRpb25hbCgpLFxuICAgIH0pXG4gICAgICAgIC5udWxsYWJsZSgpLFxuICAgIHNwYW5fZGF0YTogei5yZWNvcmQoei5zdHJpbmcoKSwgei5hbnkoKSksXG59KTtcbmNvbnN0IFNlcmlhbGl6ZWRTcGFuID0gc2VyaWFsaXplZFNwYW5CYXNlLmV4dGVuZCh7XG4gICAgcHJldmlvdXNfc3Bhbjogei5sYXp5KCgpID0+IFNlcmlhbGl6ZWRTcGFuKS5vcHRpb25hbCgpLFxufSk7XG5jb25zdCByZXF1ZXN0VXNhZ2VTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgaW5wdXRUb2tlbnM6IHoubnVtYmVyKCksXG4gICAgb3V0cHV0VG9rZW5zOiB6Lm51bWJlcigpLFxuICAgIHRvdGFsVG9rZW5zOiB6Lm51bWJlcigpLFxuICAgIGlucHV0VG9rZW5zRGV0YWlsczogei5yZWNvcmQoei5zdHJpbmcoKSwgei5udW1iZXIoKSkub3B0aW9uYWwoKSxcbiAgICBvdXRwdXRUb2tlbnNEZXRhaWxzOiB6LnJlY29yZCh6LnN0cmluZygpLCB6Lm51bWJlcigpKS5vcHRpb25hbCgpLFxuICAgIGVuZHBvaW50OiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG59KTtcbmNvbnN0IHVzYWdlU2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHJlcXVlc3RzOiB6Lm51bWJlcigpLFxuICAgIGlucHV0VG9rZW5zOiB6Lm51bWJlcigpLFxuICAgIG91dHB1dFRva2Vuczogei5udW1iZXIoKSxcbiAgICB0b3RhbFRva2Vuczogei5udW1iZXIoKSxcbiAgICBpbnB1dFRva2Vuc0RldGFpbHM6IHouYXJyYXkoei5yZWNvcmQoei5zdHJpbmcoKSwgei5udW1iZXIoKSkpLm9wdGlvbmFsKCksXG4gICAgb3V0cHV0VG9rZW5zRGV0YWlsczogei5hcnJheSh6LnJlY29yZCh6LnN0cmluZygpLCB6Lm51bWJlcigpKSkub3B0aW9uYWwoKSxcbiAgICByZXF1ZXN0VXNhZ2VFbnRyaWVzOiB6LmFycmF5KHJlcXVlc3RVc2FnZVNjaGVtYSkub3B0aW9uYWwoKSxcbn0pO1xuY29uc3QgbW9kZWxSZXNwb25zZVNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB1c2FnZTogdXNhZ2VTY2hlbWEsXG4gICAgb3V0cHV0OiB6LmFycmF5KHByb3RvY29sLk91dHB1dE1vZGVsSXRlbSksXG4gICAgcmVzcG9uc2VJZDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgIHByb3ZpZGVyRGF0YTogei5yZWNvcmQoei5zdHJpbmcoKSwgei5hbnkoKSkub3B0aW9uYWwoKSxcbn0pO1xuY29uc3QgaXRlbVNjaGVtYSA9IHouZGlzY3JpbWluYXRlZFVuaW9uKCd0eXBlJywgW1xuICAgIHoub2JqZWN0KHtcbiAgICAgICAgdHlwZTogei5saXRlcmFsKCdtZXNzYWdlX291dHB1dF9pdGVtJyksXG4gICAgICAgIHJhd0l0ZW06IHByb3RvY29sLkFzc2lzdGFudE1lc3NhZ2VJdGVtLFxuICAgICAgICBhZ2VudDogc2VyaWFsaXplZEFnZW50U2NoZW1hLFxuICAgIH0pLFxuICAgIHoub2JqZWN0KHtcbiAgICAgICAgdHlwZTogei5saXRlcmFsKCd0b29sX2NhbGxfaXRlbScpLFxuICAgICAgICByYXdJdGVtOiBwcm90b2NvbC5Ub29sQ2FsbEl0ZW0ub3IocHJvdG9jb2wuSG9zdGVkVG9vbENhbGxJdGVtKSxcbiAgICAgICAgYWdlbnQ6IHNlcmlhbGl6ZWRBZ2VudFNjaGVtYSxcbiAgICB9KSxcbiAgICB6Lm9iamVjdCh7XG4gICAgICAgIHR5cGU6IHoubGl0ZXJhbCgndG9vbF9jYWxsX291dHB1dF9pdGVtJyksXG4gICAgICAgIHJhd0l0ZW06IHByb3RvY29sLkZ1bmN0aW9uQ2FsbFJlc3VsdEl0ZW0sXG4gICAgICAgIGFnZW50OiBzZXJpYWxpemVkQWdlbnRTY2hlbWEsXG4gICAgICAgIG91dHB1dDogei5zdHJpbmcoKSxcbiAgICB9KSxcbiAgICB6Lm9iamVjdCh7XG4gICAgICAgIHR5cGU6IHoubGl0ZXJhbCgncmVhc29uaW5nX2l0ZW0nKSxcbiAgICAgICAgcmF3SXRlbTogcHJvdG9jb2wuUmVhc29uaW5nSXRlbSxcbiAgICAgICAgYWdlbnQ6IHNlcmlhbGl6ZWRBZ2VudFNjaGVtYSxcbiAgICB9KSxcbiAgICB6Lm9iamVjdCh7XG4gICAgICAgIHR5cGU6IHoubGl0ZXJhbCgnaGFuZG9mZl9jYWxsX2l0ZW0nKSxcbiAgICAgICAgcmF3SXRlbTogcHJvdG9jb2wuRnVuY3Rpb25DYWxsSXRlbSxcbiAgICAgICAgYWdlbnQ6IHNlcmlhbGl6ZWRBZ2VudFNjaGVtYSxcbiAgICB9KSxcbiAgICB6Lm9iamVjdCh7XG4gICAgICAgIHR5cGU6IHoubGl0ZXJhbCgnaGFuZG9mZl9vdXRwdXRfaXRlbScpLFxuICAgICAgICByYXdJdGVtOiBwcm90b2NvbC5GdW5jdGlvbkNhbGxSZXN1bHRJdGVtLFxuICAgICAgICBzb3VyY2VBZ2VudDogc2VyaWFsaXplZEFnZW50U2NoZW1hLFxuICAgICAgICB0YXJnZXRBZ2VudDogc2VyaWFsaXplZEFnZW50U2NoZW1hLFxuICAgIH0pLFxuICAgIHoub2JqZWN0KHtcbiAgICAgICAgdHlwZTogei5saXRlcmFsKCd0b29sX2FwcHJvdmFsX2l0ZW0nKSxcbiAgICAgICAgcmF3SXRlbTogcHJvdG9jb2wuRnVuY3Rpb25DYWxsSXRlbS5vcihwcm90b2NvbC5Ib3N0ZWRUb29sQ2FsbEl0ZW0pXG4gICAgICAgICAgICAub3IocHJvdG9jb2wuU2hlbGxDYWxsSXRlbSlcbiAgICAgICAgICAgIC5vcihwcm90b2NvbC5BcHBseVBhdGNoQ2FsbEl0ZW0pLFxuICAgICAgICBhZ2VudDogc2VyaWFsaXplZEFnZW50U2NoZW1hLFxuICAgICAgICB0b29sTmFtZTogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgIH0pLFxuXSk7XG5jb25zdCBzZXJpYWxpemVkVHJhY2VTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgb2JqZWN0OiB6LmxpdGVyYWwoJ3RyYWNlJyksXG4gICAgaWQ6IHouc3RyaW5nKCksXG4gICAgd29ya2Zsb3dfbmFtZTogei5zdHJpbmcoKSxcbiAgICBncm91cF9pZDogei5zdHJpbmcoKS5udWxsYWJsZSgpLFxuICAgIG1ldGFkYXRhOiB6LnJlY29yZCh6LnN0cmluZygpLCB6LmFueSgpKSxcbn0pO1xuY29uc3Qgc2VyaWFsaXplZFByb2Nlc3NlZFJlc3BvbnNlU2NoZW1hID0gei5vYmplY3Qoe1xuICAgIG5ld0l0ZW1zOiB6LmFycmF5KGl0ZW1TY2hlbWEpLFxuICAgIHRvb2xzVXNlZDogei5hcnJheSh6LnN0cmluZygpKSxcbiAgICBoYW5kb2Zmczogei5hcnJheSh6Lm9iamVjdCh7XG4gICAgICAgIHRvb2xDYWxsOiB6LmFueSgpLFxuICAgICAgICBoYW5kb2ZmOiB6LmFueSgpLFxuICAgIH0pKSxcbiAgICBmdW5jdGlvbnM6IHouYXJyYXkoei5vYmplY3Qoe1xuICAgICAgICB0b29sQ2FsbDogei5hbnkoKSxcbiAgICAgICAgdG9vbDogei5hbnkoKSxcbiAgICB9KSksXG4gICAgY29tcHV0ZXJBY3Rpb25zOiB6LmFycmF5KHoub2JqZWN0KHtcbiAgICAgICAgdG9vbENhbGw6IHouYW55KCksXG4gICAgICAgIGNvbXB1dGVyOiB6LmFueSgpLFxuICAgIH0pKSxcbiAgICBzaGVsbEFjdGlvbnM6IHpcbiAgICAgICAgLmFycmF5KHoub2JqZWN0KHtcbiAgICAgICAgdG9vbENhbGw6IHouYW55KCksXG4gICAgICAgIHNoZWxsOiB6LmFueSgpLFxuICAgIH0pKVxuICAgICAgICAub3B0aW9uYWwoKSxcbiAgICBhcHBseVBhdGNoQWN0aW9uczogelxuICAgICAgICAuYXJyYXkoei5vYmplY3Qoe1xuICAgICAgICB0b29sQ2FsbDogei5hbnkoKSxcbiAgICAgICAgYXBwbHlQYXRjaDogei5hbnkoKSxcbiAgICB9KSlcbiAgICAgICAgLm9wdGlvbmFsKCksXG4gICAgbWNwQXBwcm92YWxSZXF1ZXN0czogelxuICAgICAgICAuYXJyYXkoei5vYmplY3Qoe1xuICAgICAgICByZXF1ZXN0SXRlbTogei5vYmplY3Qoe1xuICAgICAgICAgICAgLy8gcHJvdG9jb2wuSG9zdGVkVG9vbENhbGxJdGVtXG4gICAgICAgICAgICByYXdJdGVtOiB6Lm9iamVjdCh7XG4gICAgICAgICAgICAgICAgdHlwZTogei5saXRlcmFsKCdob3N0ZWRfdG9vbF9jYWxsJyksXG4gICAgICAgICAgICAgICAgbmFtZTogei5zdHJpbmcoKSxcbiAgICAgICAgICAgICAgICBhcmd1bWVudHM6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICAgICAgICAgICAgICBzdGF0dXM6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICAgICAgICAgICAgICBvdXRwdXQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICAgICAgICAgICAgICAvLyB0aGlzIGFsd2F5cyBleGlzdHMgYnV0IG1hcmtlZCBhcyBvcHRpb25hbCBmb3IgZWFybHkgdmVyc2lvbiBjb21wYXRpYmlsaXR5OyB3aGVuIHJlbGVhc2luZyAxLjAsIHdlIGNhbiByZW1vdmUgdGhlIG51bGxhYmxlIGFuZCBvcHRpb25hbFxuICAgICAgICAgICAgICAgIHByb3ZpZGVyRGF0YTogei5yZWNvcmQoei5zdHJpbmcoKSwgei5hbnkoKSkubnVsbGFibGUoKS5vcHRpb25hbCgpLFxuICAgICAgICAgICAgfSksXG4gICAgICAgIH0pLFxuICAgICAgICAvLyBIb3N0ZWRNQ1BUb29sXG4gICAgICAgIG1jcFRvb2w6IHoub2JqZWN0KHtcbiAgICAgICAgICAgIHR5cGU6IHoubGl0ZXJhbCgnaG9zdGVkX3Rvb2wnKSxcbiAgICAgICAgICAgIG5hbWU6IHoubGl0ZXJhbCgnaG9zdGVkX21jcCcpLFxuICAgICAgICAgICAgcHJvdmlkZXJEYXRhOiB6LnJlY29yZCh6LnN0cmluZygpLCB6LmFueSgpKSxcbiAgICAgICAgfSksXG4gICAgfSkpXG4gICAgICAgIC5vcHRpb25hbCgpLFxufSk7XG5jb25zdCBndWFyZHJhaWxGdW5jdGlvbk91dHB1dFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0cmlwd2lyZVRyaWdnZXJlZDogei5ib29sZWFuKCksXG4gICAgb3V0cHV0SW5mbzogei5hbnkoKSxcbn0pO1xuY29uc3QgaW5wdXRHdWFyZHJhaWxSZXN1bHRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgZ3VhcmRyYWlsOiB6Lm9iamVjdCh7XG4gICAgICAgIHR5cGU6IHoubGl0ZXJhbCgnaW5wdXQnKSxcbiAgICAgICAgbmFtZTogei5zdHJpbmcoKSxcbiAgICB9KSxcbiAgICBvdXRwdXQ6IGd1YXJkcmFpbEZ1bmN0aW9uT3V0cHV0U2NoZW1hLFxufSk7XG5jb25zdCBvdXRwdXRHdWFyZHJhaWxSZXN1bHRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgZ3VhcmRyYWlsOiB6Lm9iamVjdCh7XG4gICAgICAgIHR5cGU6IHoubGl0ZXJhbCgnb3V0cHV0JyksXG4gICAgICAgIG5hbWU6IHouc3RyaW5nKCksXG4gICAgfSksXG4gICAgYWdlbnRPdXRwdXQ6IHouYW55KCksXG4gICAgYWdlbnQ6IHNlcmlhbGl6ZWRBZ2VudFNjaGVtYSxcbiAgICBvdXRwdXQ6IGd1YXJkcmFpbEZ1bmN0aW9uT3V0cHV0U2NoZW1hLFxufSk7XG5leHBvcnQgY29uc3QgU2VyaWFsaXplZFJ1blN0YXRlID0gei5vYmplY3Qoe1xuICAgICRzY2hlbWFWZXJzaW9uLFxuICAgIGN1cnJlbnRUdXJuOiB6Lm51bWJlcigpLFxuICAgIGN1cnJlbnRBZ2VudDogc2VyaWFsaXplZEFnZW50U2NoZW1hLFxuICAgIG9yaWdpbmFsSW5wdXQ6IHouc3RyaW5nKCkub3Ioei5hcnJheShwcm90b2NvbC5Nb2RlbEl0ZW0pKSxcbiAgICBtb2RlbFJlc3BvbnNlczogei5hcnJheShtb2RlbFJlc3BvbnNlU2NoZW1hKSxcbiAgICBjb250ZXh0OiB6Lm9iamVjdCh7XG4gICAgICAgIHVzYWdlOiB1c2FnZVNjaGVtYSxcbiAgICAgICAgYXBwcm92YWxzOiB6LnJlY29yZCh6LnN0cmluZygpLCB6Lm9iamVjdCh7XG4gICAgICAgICAgICBhcHByb3ZlZDogei5hcnJheSh6LnN0cmluZygpKS5vcih6LmJvb2xlYW4oKSksXG4gICAgICAgICAgICByZWplY3RlZDogei5hcnJheSh6LnN0cmluZygpKS5vcih6LmJvb2xlYW4oKSksXG4gICAgICAgIH0pKSxcbiAgICAgICAgY29udGV4dDogei5yZWNvcmQoei5zdHJpbmcoKSwgei5hbnkoKSksXG4gICAgfSksXG4gICAgdG9vbFVzZVRyYWNrZXI6IHoucmVjb3JkKHouc3RyaW5nKCksIHouYXJyYXkoei5zdHJpbmcoKSkpLFxuICAgIG1heFR1cm5zOiB6Lm51bWJlcigpLFxuICAgIGN1cnJlbnRBZ2VudFNwYW46IFNlcmlhbGl6ZWRTcGFuLm51bGxhYmxlKCkub3B0aW9uYWwoKSxcbiAgICBub0FjdGl2ZUFnZW50UnVuOiB6LmJvb2xlYW4oKSxcbiAgICBpbnB1dEd1YXJkcmFpbFJlc3VsdHM6IHouYXJyYXkoaW5wdXRHdWFyZHJhaWxSZXN1bHRTY2hlbWEpLFxuICAgIG91dHB1dEd1YXJkcmFpbFJlc3VsdHM6IHouYXJyYXkob3V0cHV0R3VhcmRyYWlsUmVzdWx0U2NoZW1hKSxcbiAgICBjdXJyZW50U3RlcDogbmV4dFN0ZXBTY2hlbWEub3B0aW9uYWwoKSxcbiAgICBsYXN0TW9kZWxSZXNwb25zZTogbW9kZWxSZXNwb25zZVNjaGVtYS5vcHRpb25hbCgpLFxuICAgIGdlbmVyYXRlZEl0ZW1zOiB6LmFycmF5KGl0ZW1TY2hlbWEpLFxuICAgIGxhc3RQcm9jZXNzZWRSZXNwb25zZTogc2VyaWFsaXplZFByb2Nlc3NlZFJlc3BvbnNlU2NoZW1hLm9wdGlvbmFsKCksXG4gICAgY3VycmVudFR1cm5QZXJzaXN0ZWRJdGVtQ291bnQ6IHoubnVtYmVyKCkuaW50KCkubWluKDApLm9wdGlvbmFsKCksXG4gICAgdHJhY2U6IHNlcmlhbGl6ZWRUcmFjZVNjaGVtYS5udWxsYWJsZSgpLFxufSk7XG4vKipcbiAqIFNlcmlhbGl6YWJsZSBzbmFwc2hvdCBvZiBhbiBhZ2VudCdzIHJ1biwgaW5jbHVkaW5nIGNvbnRleHQsIHVzYWdlIGFuZCB0cmFjZS5cbiAqIFdoaWxlIHRoaXMgY2xhc3MgaGFzIHB1YmxpY2x5IHdyaXRhYmxlIHByb3BlcnRpZXMgKHByZWZpeGVkIHdpdGggYF9gKSwgdGhleSBhcmUgbm90IG1lYW50IHRvIGJlXG4gKiB1c2VkIGRpcmVjdGx5LiBUbyByZWFkIHRoZXNlIHByb3BlcnRpZXMsIHVzZSB0aGUgYFJ1blJlc3VsdGAgaW5zdGVhZC5cbiAqXG4gKiBNYW5pcHVsYXRpb24gb2YgdGhlIHN0YXRlIGRpcmVjdGx5IGNhbiBsZWFkIHRvIHVuZXhwZWN0ZWQgYmVoYXZpb3IgYW5kIHNob3VsZCBiZSBhdm9pZGVkLlxuICogSW5zdGVhZCwgdXNlIHRoZSBgYXBwcm92ZWAgYW5kIGByZWplY3RgIG1ldGhvZHMgdG8gaW50ZXJhY3Qgd2l0aCB0aGUgc3RhdGUuXG4gKi9cbmV4cG9ydCBjbGFzcyBSdW5TdGF0ZSB7XG4gICAgLyoqXG4gICAgICogQ3VycmVudCB0dXJuIG51bWJlciBpbiB0aGUgY29udmVyc2F0aW9uLlxuICAgICAqL1xuICAgIF9jdXJyZW50VHVybiA9IDA7XG4gICAgLyoqXG4gICAgICogVGhlIGFnZW50IGN1cnJlbnRseSBoYW5kbGluZyB0aGUgY29udmVyc2F0aW9uLlxuICAgICAqL1xuICAgIF9jdXJyZW50QWdlbnQ7XG4gICAgLyoqXG4gICAgICogT3JpZ2luYWwgdXNlciBpbnB1dCBwcmlvciB0byBhbnkgcHJvY2Vzc2luZy5cbiAgICAgKi9cbiAgICBfb3JpZ2luYWxJbnB1dDtcbiAgICAvKipcbiAgICAgKiBSZXNwb25zZXMgZnJvbSB0aGUgbW9kZWwgc28gZmFyLlxuICAgICAqL1xuICAgIF9tb2RlbFJlc3BvbnNlcztcbiAgICAvKipcbiAgICAgKiBBY3RpdmUgdHJhY2luZyBzcGFuIGZvciB0aGUgY3VycmVudCBhZ2VudCBpZiB0cmFjaW5nIGlzIGVuYWJsZWQuXG4gICAgICovXG4gICAgX2N1cnJlbnRBZ2VudFNwYW47XG4gICAgLyoqXG4gICAgICogUnVuIGNvbnRleHQgdHJhY2tpbmcgYXBwcm92YWxzLCB1c2FnZSwgYW5kIG90aGVyIG1ldGFkYXRhLlxuICAgICAqL1xuICAgIF9jb250ZXh0O1xuICAgIC8qKlxuICAgICAqIFRoZSB1c2FnZSBhZ2dyZWdhdGVkIGZvciB0aGlzIHJ1bi4gVGhpcyBpbmNsdWRlcyBwZXItcmVxdWVzdCBicmVha2Rvd25zIHdoZW4gYXZhaWxhYmxlLlxuICAgICAqL1xuICAgIGdldCB1c2FnZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NvbnRleHQudXNhZ2U7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRyYWNrcyB3aGF0IHRvb2xzIGVhY2ggYWdlbnQgaGFzIHVzZWQuXG4gICAgICovXG4gICAgX3Rvb2xVc2VUcmFja2VyO1xuICAgIC8qKlxuICAgICAqIEl0ZW1zIGdlbmVyYXRlZCBieSB0aGUgYWdlbnQgZHVyaW5nIHRoZSBydW4uXG4gICAgICovXG4gICAgX2dlbmVyYXRlZEl0ZW1zO1xuICAgIC8qKlxuICAgICAqIE51bWJlciBvZiBgX2dlbmVyYXRlZEl0ZW1zYCBhbHJlYWR5IGZsdXNoZWQgdG8gc2Vzc2lvbiBzdG9yYWdlIGZvciB0aGUgY3VycmVudCB0dXJuLlxuICAgICAqXG4gICAgICogUGVyc2lzdGluZyB0aGUgZW50aXJlIHR1cm4gb24gZXZlcnkgc2F2ZSB3b3VsZCBkdXBsaWNhdGUgcmVzcG9uc2VzIGFuZCB0b29sIG91dHB1dHMuXG4gICAgICogSW5zdGVhZCwgYHNhdmVUb1Nlc3Npb25gIGFwcGVuZHMgb25seSB0aGUgZGVsdGEgc2luY2UgdGhlIHByZXZpb3VzIHdyaXRlLiBUaGlzIGNvdW50ZXJcbiAgICAgKiB0cmFja3MgaG93IG1hbnkgZ2VuZXJhdGVkIHJ1biBpdGVtcyBmcm9tICp0aGlzIHR1cm4qIHdlcmUgYWxyZWFkeSB3cml0dGVuIHNvIHRoZSBuZXh0XG4gICAgICogc2F2ZSBjYW4gc2xpY2Ugb2ZmIG9ubHkgdGhlIG5ldyBlbnRyaWVzLiBXaGVuIGEgdHVybiBpcyBpbnRlcnJ1cHRlZCAoZS5nLiwgYXdhaXRpbmcgdG9vbFxuICAgICAqIGFwcHJvdmFsKSBhbmQgbGF0ZXIgcmVzdW1lZCwgd2UgcmV3aW5kIHRoZSBjb3VudGVyIGJlZm9yZSBjb250aW51aW5nIHNvIHRoZSBwZW5kaW5nIHRvb2xcbiAgICAgKiBvdXRwdXQgc3RpbGwgZ2V0cyBzdG9yZWQuXG4gICAgICovXG4gICAgX2N1cnJlbnRUdXJuUGVyc2lzdGVkSXRlbUNvdW50O1xuICAgIC8qKlxuICAgICAqIE1heGltdW0gYWxsb3dlZCB0dXJucyBiZWZvcmUgZm9yY2luZyB0ZXJtaW5hdGlvbi5cbiAgICAgKi9cbiAgICBfbWF4VHVybnM7XG4gICAgLyoqXG4gICAgICogV2hldGhlciB0aGUgcnVuIGhhcyBhbiBhY3RpdmUgYWdlbnQgc3RlcCBpbiBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBfbm9BY3RpdmVBZ2VudFJ1biA9IHRydWU7XG4gICAgLyoqXG4gICAgICogTGFzdCBtb2RlbCByZXNwb25zZSBmb3IgdGhlIHByZXZpb3VzIHR1cm4uXG4gICAgICovXG4gICAgX2xhc3RUdXJuUmVzcG9uc2U7XG4gICAgLyoqXG4gICAgICogUmVzdWx0cyBmcm9tIGlucHV0IGd1YXJkcmFpbHMgYXBwbGllZCB0byB0aGUgcnVuLlxuICAgICAqL1xuICAgIF9pbnB1dEd1YXJkcmFpbFJlc3VsdHM7XG4gICAgLyoqXG4gICAgICogUmVzdWx0cyBmcm9tIG91dHB1dCBndWFyZHJhaWxzIGFwcGxpZWQgdG8gdGhlIHJ1bi5cbiAgICAgKi9cbiAgICBfb3V0cHV0R3VhcmRyYWlsUmVzdWx0cztcbiAgICAvKipcbiAgICAgKiBOZXh0IHN0ZXAgY29tcHV0ZWQgZm9yIHRoZSBhZ2VudCB0byB0YWtlLlxuICAgICAqL1xuICAgIF9jdXJyZW50U3RlcCA9IHVuZGVmaW5lZDtcbiAgICAvKipcbiAgICAgKiBQYXJzZWQgbW9kZWwgcmVzcG9uc2UgYWZ0ZXIgYXBwbHlpbmcgZ3VhcmRyYWlscyBhbmQgdG9vbHMuXG4gICAgICovXG4gICAgX2xhc3RQcm9jZXNzZWRSZXNwb25zZSA9IHVuZGVmaW5lZDtcbiAgICAvKipcbiAgICAgKiBUcmFjZSBhc3NvY2lhdGVkIHdpdGggdGhpcyBydW4gaWYgdHJhY2luZyBpcyBlbmFibGVkLlxuICAgICAqL1xuICAgIF90cmFjZSA9IG51bGw7XG4gICAgY29uc3RydWN0b3IoY29udGV4dCwgb3JpZ2luYWxJbnB1dCwgc3RhcnRpbmdBZ2VudCwgbWF4VHVybnMpIHtcbiAgICAgICAgdGhpcy5fY29udGV4dCA9IGNvbnRleHQ7XG4gICAgICAgIHRoaXMuX29yaWdpbmFsSW5wdXQgPSBzdHJ1Y3R1cmVkQ2xvbmUob3JpZ2luYWxJbnB1dCk7XG4gICAgICAgIHRoaXMuX21vZGVsUmVzcG9uc2VzID0gW107XG4gICAgICAgIHRoaXMuX2N1cnJlbnRBZ2VudFNwYW4gPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMuX2N1cnJlbnRBZ2VudCA9IHN0YXJ0aW5nQWdlbnQ7XG4gICAgICAgIHRoaXMuX3Rvb2xVc2VUcmFja2VyID0gbmV3IEFnZW50VG9vbFVzZVRyYWNrZXIoKTtcbiAgICAgICAgdGhpcy5fZ2VuZXJhdGVkSXRlbXMgPSBbXTtcbiAgICAgICAgdGhpcy5fY3VycmVudFR1cm5QZXJzaXN0ZWRJdGVtQ291bnQgPSAwO1xuICAgICAgICB0aGlzLl9tYXhUdXJucyA9IG1heFR1cm5zO1xuICAgICAgICB0aGlzLl9pbnB1dEd1YXJkcmFpbFJlc3VsdHMgPSBbXTtcbiAgICAgICAgdGhpcy5fb3V0cHV0R3VhcmRyYWlsUmVzdWx0cyA9IFtdO1xuICAgICAgICB0aGlzLl90cmFjZSA9IGdldEN1cnJlbnRUcmFjZSgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgaGlzdG9yeSBvZiB0aGUgYWdlbnQgcnVuLiBUaGlzIGluY2x1ZGVzIHRoZSBpbnB1dCBpdGVtcyBhbmQgdGhlIG5ldyBpdGVtcyBnZW5lcmF0ZWQgZHVyaW5nIHRoZSBydW4uXG4gICAgICpcbiAgICAgKiBUaGlzIGNhbiBiZSB1c2VkIGFzIGlucHV0cyBmb3IgdGhlIG5leHQgYWdlbnQgcnVuLlxuICAgICAqL1xuICAgIGdldCBoaXN0b3J5KCkge1xuICAgICAgICByZXR1cm4gZ2V0VHVybklucHV0KHRoaXMuX29yaWdpbmFsSW5wdXQsIHRoaXMuX2dlbmVyYXRlZEl0ZW1zKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhbGwgaW50ZXJydXB0aW9ucyBpZiB0aGUgY3VycmVudCBzdGVwIGlzIGFuIGludGVycnVwdGlvbiBvdGhlcndpc2UgcmV0dXJucyBhbiBlbXB0eSBhcnJheS5cbiAgICAgKi9cbiAgICBnZXRJbnRlcnJ1cHRpb25zKCkge1xuICAgICAgICBpZiAodGhpcy5fY3VycmVudFN0ZXA/LnR5cGUgIT09ICduZXh0X3N0ZXBfaW50ZXJydXB0aW9uJykge1xuICAgICAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLl9jdXJyZW50U3RlcC5kYXRhLmludGVycnVwdGlvbnM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFwcHJvdmVzIGEgdG9vbCBjYWxsIHJlcXVlc3RlZCBieSB0aGUgYWdlbnQgdGhyb3VnaCBhbiBpbnRlcnJ1cHRpb24gYW5kIGFwcHJvdmFsIGl0ZW0gcmVxdWVzdC5cbiAgICAgKlxuICAgICAqIFRvIGFwcHJvdmUgdGhlIHJlcXVlc3QgdXNlIHRoaXMgbWV0aG9kIGFuZCB0aGVuIHJ1biB0aGUgYWdlbnQgYWdhaW4gd2l0aCB0aGUgc2FtZSBzdGF0ZSBvYmplY3RcbiAgICAgKiB0byBjb250aW51ZSB0aGUgZXhlY3V0aW9uLlxuICAgICAqXG4gICAgICogQnkgZGVmYXVsdCBpdCB3aWxsIG9ubHkgYXBwcm92ZSB0aGUgY3VycmVudCB0b29sIGNhbGwuIFRvIGFsbG93IHRoZSB0b29sIHRvIGJlIHVzZWQgbXVsdGlwbGVcbiAgICAgKiB0aW1lcyB0aHJvdWdob3V0IHRoZSBydW4sIHNldCB0aGUgYGFsd2F5c0FwcHJvdmVgIG9wdGlvbiB0byBgdHJ1ZWAuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gYXBwcm92YWxJdGVtIC0gVGhlIHRvb2wgY2FsbCBhcHByb3ZhbCBpdGVtIHRvIGFwcHJvdmUuXG4gICAgICogQHBhcmFtIG9wdGlvbnMgLSBPcHRpb25zIGZvciB0aGUgYXBwcm92YWwuXG4gICAgICovXG4gICAgYXBwcm92ZShhcHByb3ZhbEl0ZW0sIG9wdGlvbnMgPSB7IGFsd2F5c0FwcHJvdmU6IGZhbHNlIH0pIHtcbiAgICAgICAgdGhpcy5fY29udGV4dC5hcHByb3ZlVG9vbChhcHByb3ZhbEl0ZW0sIG9wdGlvbnMpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZWplY3RzIGEgdG9vbCBjYWxsIHJlcXVlc3RlZCBieSB0aGUgYWdlbnQgdGhyb3VnaCBhbiBpbnRlcnJ1cHRpb24gYW5kIGFwcHJvdmFsIGl0ZW0gcmVxdWVzdC5cbiAgICAgKlxuICAgICAqIFRvIHJlamVjdCB0aGUgcmVxdWVzdCB1c2UgdGhpcyBtZXRob2QgYW5kIHRoZW4gcnVuIHRoZSBhZ2VudCBhZ2FpbiB3aXRoIHRoZSBzYW1lIHN0YXRlIG9iamVjdFxuICAgICAqIHRvIGNvbnRpbnVlIHRoZSBleGVjdXRpb24uXG4gICAgICpcbiAgICAgKiBCeSBkZWZhdWx0IGl0IHdpbGwgb25seSByZWplY3QgdGhlIGN1cnJlbnQgdG9vbCBjYWxsLiBUbyBhbGxvdyB0aGUgdG9vbCB0byBiZSB1c2VkIG11bHRpcGxlXG4gICAgICogdGltZXMgdGhyb3VnaG91dCB0aGUgcnVuLCBzZXQgdGhlIGBhbHdheXNSZWplY3RgIG9wdGlvbiB0byBgdHJ1ZWAuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gYXBwcm92YWxJdGVtIC0gVGhlIHRvb2wgY2FsbCBhcHByb3ZhbCBpdGVtIHRvIHJlamVjdC5cbiAgICAgKiBAcGFyYW0gb3B0aW9ucyAtIE9wdGlvbnMgZm9yIHRoZSByZWplY3Rpb24uXG4gICAgICovXG4gICAgcmVqZWN0KGFwcHJvdmFsSXRlbSwgb3B0aW9ucyA9IHsgYWx3YXlzUmVqZWN0OiBmYWxzZSB9KSB7XG4gICAgICAgIHRoaXMuX2NvbnRleHQucmVqZWN0VG9vbChhcHByb3ZhbEl0ZW0sIG9wdGlvbnMpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXJpYWxpemVzIHRoZSBydW4gc3RhdGUgdG8gYSBKU09OIG9iamVjdC5cbiAgICAgKlxuICAgICAqIFRoaXMgbWV0aG9kIGlzIHVzZWQgdG8gc2VyaWFsaXplIHRoZSBydW4gc3RhdGUgdG8gYSBKU09OIG9iamVjdCB0aGF0IGNhbiBiZSB1c2VkIHRvXG4gICAgICogcmVzdW1lIHRoZSBydW4gbGF0ZXIuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBUaGUgc2VyaWFsaXplZCBydW4gc3RhdGUuXG4gICAgICovXG4gICAgdG9KU09OKCkge1xuICAgICAgICBjb25zdCBvdXRwdXQgPSB7XG4gICAgICAgICAgICAkc2NoZW1hVmVyc2lvbjogQ1VSUkVOVF9TQ0hFTUFfVkVSU0lPTixcbiAgICAgICAgICAgIGN1cnJlbnRUdXJuOiB0aGlzLl9jdXJyZW50VHVybixcbiAgICAgICAgICAgIGN1cnJlbnRBZ2VudDoge1xuICAgICAgICAgICAgICAgIG5hbWU6IHRoaXMuX2N1cnJlbnRBZ2VudC5uYW1lLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG9yaWdpbmFsSW5wdXQ6IHRoaXMuX29yaWdpbmFsSW5wdXQsXG4gICAgICAgICAgICBtb2RlbFJlc3BvbnNlczogdGhpcy5fbW9kZWxSZXNwb25zZXMubWFwKChyZXNwb25zZSkgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIHVzYWdlOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXF1ZXN0czogcmVzcG9uc2UudXNhZ2UucmVxdWVzdHMsXG4gICAgICAgICAgICAgICAgICAgICAgICBpbnB1dFRva2VuczogcmVzcG9uc2UudXNhZ2UuaW5wdXRUb2tlbnMsXG4gICAgICAgICAgICAgICAgICAgICAgICBvdXRwdXRUb2tlbnM6IHJlc3BvbnNlLnVzYWdlLm91dHB1dFRva2VucyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvdGFsVG9rZW5zOiByZXNwb25zZS51c2FnZS50b3RhbFRva2VucyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0VG9rZW5zRGV0YWlsczogcmVzcG9uc2UudXNhZ2UuaW5wdXRUb2tlbnNEZXRhaWxzLFxuICAgICAgICAgICAgICAgICAgICAgICAgb3V0cHV0VG9rZW5zRGV0YWlsczogcmVzcG9uc2UudXNhZ2Uub3V0cHV0VG9rZW5zRGV0YWlscyxcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLihyZXNwb25zZS51c2FnZS5yZXF1ZXN0VXNhZ2VFbnRyaWVzICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UudXNhZ2UucmVxdWVzdFVzYWdlRW50cmllcy5sZW5ndGggPiAwXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPyB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVlc3RVc2FnZUVudHJpZXM6IHJlc3BvbnNlLnVzYWdlLnJlcXVlc3RVc2FnZUVudHJpZXMubWFwKChlbnRyeSkgPT4gKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0VG9rZW5zOiBlbnRyeS5pbnB1dFRva2VucyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG91dHB1dFRva2VuczogZW50cnkub3V0cHV0VG9rZW5zLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG90YWxUb2tlbnM6IGVudHJ5LnRvdGFsVG9rZW5zLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXRUb2tlbnNEZXRhaWxzOiBlbnRyeS5pbnB1dFRva2Vuc0RldGFpbHMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvdXRwdXRUb2tlbnNEZXRhaWxzOiBlbnRyeS5vdXRwdXRUb2tlbnNEZXRhaWxzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uKGVudHJ5LmVuZHBvaW50ID8geyBlbmRwb2ludDogZW50cnkuZW5kcG9pbnQgfSA6IHt9KSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IHt9KSxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgb3V0cHV0OiByZXNwb25zZS5vdXRwdXQsXG4gICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlSWQ6IHJlc3BvbnNlLnJlc3BvbnNlSWQsXG4gICAgICAgICAgICAgICAgICAgIHByb3ZpZGVyRGF0YTogcmVzcG9uc2UucHJvdmlkZXJEYXRhLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIGNvbnRleHQ6IHRoaXMuX2NvbnRleHQudG9KU09OKCksXG4gICAgICAgICAgICB0b29sVXNlVHJhY2tlcjogdGhpcy5fdG9vbFVzZVRyYWNrZXIudG9KU09OKCksXG4gICAgICAgICAgICBtYXhUdXJuczogdGhpcy5fbWF4VHVybnMsXG4gICAgICAgICAgICBjdXJyZW50QWdlbnRTcGFuOiB0aGlzLl9jdXJyZW50QWdlbnRTcGFuPy50b0pTT04oKSxcbiAgICAgICAgICAgIG5vQWN0aXZlQWdlbnRSdW46IHRoaXMuX25vQWN0aXZlQWdlbnRSdW4sXG4gICAgICAgICAgICBpbnB1dEd1YXJkcmFpbFJlc3VsdHM6IHRoaXMuX2lucHV0R3VhcmRyYWlsUmVzdWx0cyxcbiAgICAgICAgICAgIG91dHB1dEd1YXJkcmFpbFJlc3VsdHM6IHRoaXMuX291dHB1dEd1YXJkcmFpbFJlc3VsdHMubWFwKChyKSA9PiAoe1xuICAgICAgICAgICAgICAgIC4uLnIsXG4gICAgICAgICAgICAgICAgYWdlbnQ6IHIuYWdlbnQudG9KU09OKCksXG4gICAgICAgICAgICB9KSksXG4gICAgICAgICAgICBjdXJyZW50U3RlcDogdGhpcy5fY3VycmVudFN0ZXAsXG4gICAgICAgICAgICBsYXN0TW9kZWxSZXNwb25zZTogdGhpcy5fbGFzdFR1cm5SZXNwb25zZSxcbiAgICAgICAgICAgIGdlbmVyYXRlZEl0ZW1zOiB0aGlzLl9nZW5lcmF0ZWRJdGVtcy5tYXAoKGl0ZW0pID0+IGl0ZW0udG9KU09OKCkpLFxuICAgICAgICAgICAgY3VycmVudFR1cm5QZXJzaXN0ZWRJdGVtQ291bnQ6IHRoaXMuX2N1cnJlbnRUdXJuUGVyc2lzdGVkSXRlbUNvdW50LFxuICAgICAgICAgICAgbGFzdFByb2Nlc3NlZFJlc3BvbnNlOiB0aGlzLl9sYXN0UHJvY2Vzc2VkUmVzcG9uc2UsXG4gICAgICAgICAgICB0cmFjZTogdGhpcy5fdHJhY2UgPyB0aGlzLl90cmFjZS50b0pTT04oKSA6IG51bGwsXG4gICAgICAgIH07XG4gICAgICAgIC8vIHBhcnNpbmcgdGhlIHNjaGVtYSB0byBlbnN1cmUgdGhlIG91dHB1dCBpcyB2YWxpZCBmb3IgcmVwYXJzaW5nXG4gICAgICAgIGNvbnN0IHBhcnNlZCA9IFNlcmlhbGl6ZWRSdW5TdGF0ZS5zYWZlUGFyc2Uob3V0cHV0KTtcbiAgICAgICAgaWYgKCFwYXJzZWQuc3VjY2Vzcykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFN5c3RlbUVycm9yKGBGYWlsZWQgdG8gc2VyaWFsaXplIHJ1biBzdGF0ZS4gJHtwYXJzZWQuZXJyb3IubWVzc2FnZX1gKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcGFyc2VkLmRhdGE7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNlcmlhbGl6ZXMgdGhlIHJ1biBzdGF0ZSB0byBhIHN0cmluZy5cbiAgICAgKlxuICAgICAqIFRoaXMgbWV0aG9kIGlzIHVzZWQgdG8gc2VyaWFsaXplIHRoZSBydW4gc3RhdGUgdG8gYSBzdHJpbmcgdGhhdCBjYW4gYmUgdXNlZCB0b1xuICAgICAqIHJlc3VtZSB0aGUgcnVuIGxhdGVyLlxuICAgICAqXG4gICAgICogQHJldHVybnMgVGhlIHNlcmlhbGl6ZWQgcnVuIHN0YXRlLlxuICAgICAqL1xuICAgIHRvU3RyaW5nKCkge1xuICAgICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkodGhpcy50b0pTT04oKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIERlc2VyaWFsaXplcyBhIHJ1biBzdGF0ZSBmcm9tIGEgc3RyaW5nLlxuICAgICAqXG4gICAgICogVGhpcyBtZXRob2QgaXMgdXNlZCB0byBkZXNlcmlhbGl6ZSBhIHJ1biBzdGF0ZSBmcm9tIGEgc3RyaW5nIHRoYXQgd2FzIHNlcmlhbGl6ZWQgdXNpbmcgdGhlXG4gICAgICogYHRvU3RyaW5nYCBtZXRob2QuXG4gICAgICovXG4gICAgc3RhdGljIGFzeW5jIGZyb21TdHJpbmcoaW5pdGlhbEFnZW50LCBzdHIpIHtcbiAgICAgICAgY29uc3QgW3BhcnNpbmdFcnJvciwganNvblJlc3VsdF0gPSBhd2FpdCBzYWZlRXhlY3V0ZSgoKSA9PiBKU09OLnBhcnNlKHN0cikpO1xuICAgICAgICBpZiAocGFyc2luZ0Vycm9yKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVXNlckVycm9yKGBGYWlsZWQgdG8gcGFyc2UgcnVuIHN0YXRlLiAke3BhcnNpbmdFcnJvciBpbnN0YW5jZW9mIEVycm9yID8gcGFyc2luZ0Vycm9yLm1lc3NhZ2UgOiBTdHJpbmcocGFyc2luZ0Vycm9yKX1gKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBjdXJyZW50U2NoZW1hVmVyc2lvbiA9IGpzb25SZXN1bHQuJHNjaGVtYVZlcnNpb247XG4gICAgICAgIGlmICghY3VycmVudFNjaGVtYVZlcnNpb24pIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBVc2VyRXJyb3IoJ1J1biBzdGF0ZSBpcyBtaXNzaW5nIHNjaGVtYSB2ZXJzaW9uJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGN1cnJlbnRTY2hlbWFWZXJzaW9uICE9PSBDVVJSRU5UX1NDSEVNQV9WRVJTSU9OKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVXNlckVycm9yKGBSdW4gc3RhdGUgc2NoZW1hIHZlcnNpb24gJHtjdXJyZW50U2NoZW1hVmVyc2lvbn0gaXMgbm90IHN1cHBvcnRlZC4gUGxlYXNlIHVzZSB2ZXJzaW9uICR7Q1VSUkVOVF9TQ0hFTUFfVkVSU0lPTn1gKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBzdGF0ZUpzb24gPSBTZXJpYWxpemVkUnVuU3RhdGUucGFyc2UoSlNPTi5wYXJzZShzdHIpKTtcbiAgICAgICAgY29uc3QgYWdlbnRNYXAgPSBidWlsZEFnZW50TWFwKGluaXRpYWxBZ2VudCk7XG4gICAgICAgIC8vXG4gICAgICAgIC8vIFJlYnVpbGQgdGhlIGNvbnRleHRcbiAgICAgICAgLy9cbiAgICAgICAgY29uc3QgY29udGV4dCA9IG5ldyBSdW5Db250ZXh0KHN0YXRlSnNvbi5jb250ZXh0LmNvbnRleHQpO1xuICAgICAgICBjb250ZXh0Ll9yZWJ1aWxkQXBwcm92YWxzKHN0YXRlSnNvbi5jb250ZXh0LmFwcHJvdmFscyk7XG4gICAgICAgIC8vXG4gICAgICAgIC8vIEZpbmQgdGhlIGN1cnJlbnQgYWdlbnQgZnJvbSB0aGUgaW5pdGlhbCBhZ2VudFxuICAgICAgICAvL1xuICAgICAgICBjb25zdCBjdXJyZW50QWdlbnQgPSBhZ2VudE1hcC5nZXQoc3RhdGVKc29uLmN1cnJlbnRBZ2VudC5uYW1lKTtcbiAgICAgICAgaWYgKCFjdXJyZW50QWdlbnQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBVc2VyRXJyb3IoYEFnZW50ICR7c3RhdGVKc29uLmN1cnJlbnRBZ2VudC5uYW1lfSBub3QgZm91bmRgKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBzdGF0ZSA9IG5ldyBSdW5TdGF0ZShjb250ZXh0LCAnJywgY3VycmVudEFnZW50LCBzdGF0ZUpzb24ubWF4VHVybnMpO1xuICAgICAgICBzdGF0ZS5fY3VycmVudFR1cm4gPSBzdGF0ZUpzb24uY3VycmVudFR1cm47XG4gICAgICAgIC8vIHJlYnVpbGQgdG9vbCB1c2UgdHJhY2tlclxuICAgICAgICBzdGF0ZS5fdG9vbFVzZVRyYWNrZXIgPSBuZXcgQWdlbnRUb29sVXNlVHJhY2tlcigpO1xuICAgICAgICBmb3IgKGNvbnN0IFthZ2VudE5hbWUsIHRvb2xOYW1lc10gb2YgT2JqZWN0LmVudHJpZXMoc3RhdGVKc29uLnRvb2xVc2VUcmFja2VyKSkge1xuICAgICAgICAgICAgc3RhdGUuX3Rvb2xVc2VUcmFja2VyLmFkZFRvb2xVc2UoYWdlbnRNYXAuZ2V0KGFnZW50TmFtZSksIHRvb2xOYW1lcyk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gcmVidWlsZCBjdXJyZW50IGFnZW50IHNwYW5cbiAgICAgICAgaWYgKHN0YXRlSnNvbi5jdXJyZW50QWdlbnRTcGFuKSB7XG4gICAgICAgICAgICBpZiAoIXN0YXRlSnNvbi50cmFjZSkge1xuICAgICAgICAgICAgICAgIGxvZ2dlci53YXJuKCdUcmFjZSBpcyBub3Qgc2V0LCBza2lwcGluZyB0cmFjaW5nIHNldHVwJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCB0cmFjZSA9IGdldEdsb2JhbFRyYWNlUHJvdmlkZXIoKS5jcmVhdGVUcmFjZSh7XG4gICAgICAgICAgICAgICAgdHJhY2VJZDogc3RhdGVKc29uLnRyYWNlPy5pZCxcbiAgICAgICAgICAgICAgICBuYW1lOiBzdGF0ZUpzb24udHJhY2U/LndvcmtmbG93X25hbWUsXG4gICAgICAgICAgICAgICAgZ3JvdXBJZDogc3RhdGVKc29uLnRyYWNlPy5ncm91cF9pZCA/PyB1bmRlZmluZWQsXG4gICAgICAgICAgICAgICAgbWV0YWRhdGE6IHN0YXRlSnNvbi50cmFjZT8ubWV0YWRhdGEsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHN0YXRlLl9jdXJyZW50QWdlbnRTcGFuID0gZGVzZXJpYWxpemVTcGFuKHRyYWNlLCBzdGF0ZUpzb24uY3VycmVudEFnZW50U3Bhbik7XG4gICAgICAgICAgICBzdGF0ZS5fdHJhY2UgPSB0cmFjZTtcbiAgICAgICAgfVxuICAgICAgICBzdGF0ZS5fbm9BY3RpdmVBZ2VudFJ1biA9IHN0YXRlSnNvbi5ub0FjdGl2ZUFnZW50UnVuO1xuICAgICAgICBzdGF0ZS5faW5wdXRHdWFyZHJhaWxSZXN1bHRzID1cbiAgICAgICAgICAgIHN0YXRlSnNvbi5pbnB1dEd1YXJkcmFpbFJlc3VsdHM7XG4gICAgICAgIHN0YXRlLl9vdXRwdXRHdWFyZHJhaWxSZXN1bHRzID0gc3RhdGVKc29uLm91dHB1dEd1YXJkcmFpbFJlc3VsdHMubWFwKChyKSA9PiAoe1xuICAgICAgICAgICAgLi4ucixcbiAgICAgICAgICAgIGFnZW50OiBhZ2VudE1hcC5nZXQoci5hZ2VudC5uYW1lKSxcbiAgICAgICAgfSkpO1xuICAgICAgICBzdGF0ZS5fY3VycmVudFN0ZXAgPSBzdGF0ZUpzb24uY3VycmVudFN0ZXA7XG4gICAgICAgIHN0YXRlLl9vcmlnaW5hbElucHV0ID0gc3RhdGVKc29uLm9yaWdpbmFsSW5wdXQ7XG4gICAgICAgIHN0YXRlLl9tb2RlbFJlc3BvbnNlcyA9IHN0YXRlSnNvbi5tb2RlbFJlc3BvbnNlcy5tYXAoZGVzZXJpYWxpemVNb2RlbFJlc3BvbnNlKTtcbiAgICAgICAgc3RhdGUuX2xhc3RUdXJuUmVzcG9uc2UgPSBzdGF0ZUpzb24ubGFzdE1vZGVsUmVzcG9uc2VcbiAgICAgICAgICAgID8gZGVzZXJpYWxpemVNb2RlbFJlc3BvbnNlKHN0YXRlSnNvbi5sYXN0TW9kZWxSZXNwb25zZSlcbiAgICAgICAgICAgIDogdW5kZWZpbmVkO1xuICAgICAgICBzdGF0ZS5fZ2VuZXJhdGVkSXRlbXMgPSBzdGF0ZUpzb24uZ2VuZXJhdGVkSXRlbXMubWFwKChpdGVtKSA9PiBkZXNlcmlhbGl6ZUl0ZW0oaXRlbSwgYWdlbnRNYXApKTtcbiAgICAgICAgc3RhdGUuX2N1cnJlbnRUdXJuUGVyc2lzdGVkSXRlbUNvdW50ID1cbiAgICAgICAgICAgIHN0YXRlSnNvbi5jdXJyZW50VHVyblBlcnNpc3RlZEl0ZW1Db3VudCA/PyAwO1xuICAgICAgICBzdGF0ZS5fbGFzdFByb2Nlc3NlZFJlc3BvbnNlID0gc3RhdGVKc29uLmxhc3RQcm9jZXNzZWRSZXNwb25zZVxuICAgICAgICAgICAgPyBhd2FpdCBkZXNlcmlhbGl6ZVByb2Nlc3NlZFJlc3BvbnNlKGFnZW50TWFwLCBzdGF0ZS5fY3VycmVudEFnZW50LCBzdGF0ZS5fY29udGV4dCwgc3RhdGVKc29uLmxhc3RQcm9jZXNzZWRSZXNwb25zZSlcbiAgICAgICAgICAgIDogdW5kZWZpbmVkO1xuICAgICAgICBpZiAoc3RhdGVKc29uLmN1cnJlbnRTdGVwPy50eXBlID09PSAnbmV4dF9zdGVwX2hhbmRvZmYnKSB7XG4gICAgICAgICAgICBzdGF0ZS5fY3VycmVudFN0ZXAgPSB7XG4gICAgICAgICAgICAgICAgdHlwZTogJ25leHRfc3RlcF9oYW5kb2ZmJyxcbiAgICAgICAgICAgICAgICBuZXdBZ2VudDogYWdlbnRNYXAuZ2V0KHN0YXRlSnNvbi5jdXJyZW50U3RlcC5uZXdBZ2VudC5uYW1lKSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHN0YXRlO1xuICAgIH1cbn1cbi8qKlxuICogQGludGVybmFsXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBidWlsZEFnZW50TWFwKGluaXRpYWxBZ2VudCkge1xuICAgIGNvbnN0IG1hcCA9IG5ldyBNYXAoKTtcbiAgICBjb25zdCBxdWV1ZSA9IFtpbml0aWFsQWdlbnRdO1xuICAgIHdoaWxlIChxdWV1ZS5sZW5ndGggPiAwKSB7XG4gICAgICAgIGNvbnN0IGN1cnJlbnRBZ2VudCA9IHF1ZXVlLnNoaWZ0KCk7XG4gICAgICAgIGlmIChtYXAuaGFzKGN1cnJlbnRBZ2VudC5uYW1lKSkge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgbWFwLnNldChjdXJyZW50QWdlbnQubmFtZSwgY3VycmVudEFnZW50KTtcbiAgICAgICAgZm9yIChjb25zdCBoYW5kb2ZmIG9mIGN1cnJlbnRBZ2VudC5oYW5kb2Zmcykge1xuICAgICAgICAgICAgaWYgKGhhbmRvZmYgaW5zdGFuY2VvZiBBZ2VudCkge1xuICAgICAgICAgICAgICAgIGlmICghbWFwLmhhcyhoYW5kb2ZmLm5hbWUpKSB7XG4gICAgICAgICAgICAgICAgICAgIHF1ZXVlLnB1c2goaGFuZG9mZik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoaGFuZG9mZi5hZ2VudCkge1xuICAgICAgICAgICAgICAgIGlmICghbWFwLmhhcyhoYW5kb2ZmLmFnZW50Lm5hbWUpKSB7XG4gICAgICAgICAgICAgICAgICAgIHF1ZXVlLnB1c2goaGFuZG9mZi5hZ2VudCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBtYXA7XG59XG4vKipcbiAqIEBpbnRlcm5hbFxuICovXG5leHBvcnQgZnVuY3Rpb24gZGVzZXJpYWxpemVTcGFuKHRyYWNlLCBzZXJpYWxpemVkU3Bhbikge1xuICAgIGNvbnN0IHNwYW5EYXRhID0gc2VyaWFsaXplZFNwYW4uc3Bhbl9kYXRhO1xuICAgIGNvbnN0IHByZXZpb3VzU3BhbiA9IHNlcmlhbGl6ZWRTcGFuLnByZXZpb3VzX3NwYW5cbiAgICAgICAgPyBkZXNlcmlhbGl6ZVNwYW4odHJhY2UsIHNlcmlhbGl6ZWRTcGFuLnByZXZpb3VzX3NwYW4pXG4gICAgICAgIDogdW5kZWZpbmVkO1xuICAgIGNvbnN0IHNwYW4gPSBnZXRHbG9iYWxUcmFjZVByb3ZpZGVyKCkuY3JlYXRlU3Bhbih7XG4gICAgICAgIHNwYW5JZDogc2VyaWFsaXplZFNwYW4uaWQsXG4gICAgICAgIHRyYWNlSWQ6IHNlcmlhbGl6ZWRTcGFuLnRyYWNlX2lkLFxuICAgICAgICBwYXJlbnRJZDogc2VyaWFsaXplZFNwYW4ucGFyZW50X2lkID8/IHVuZGVmaW5lZCxcbiAgICAgICAgc3RhcnRlZEF0OiBzZXJpYWxpemVkU3Bhbi5zdGFydGVkX2F0ID8/IHVuZGVmaW5lZCxcbiAgICAgICAgZW5kZWRBdDogc2VyaWFsaXplZFNwYW4uZW5kZWRfYXQgPz8gdW5kZWZpbmVkLFxuICAgICAgICBkYXRhOiBzcGFuRGF0YSxcbiAgICB9LCB0cmFjZSk7XG4gICAgc3Bhbi5wcmV2aW91c1NwYW4gPSBwcmV2aW91c1NwYW47XG4gICAgcmV0dXJuIHNwYW47XG59XG4vKipcbiAqIEBpbnRlcm5hbFxuICovXG5leHBvcnQgZnVuY3Rpb24gZGVzZXJpYWxpemVNb2RlbFJlc3BvbnNlKHNlcmlhbGl6ZWRNb2RlbFJlc3BvbnNlKSB7XG4gICAgY29uc3QgdXNhZ2UgPSBuZXcgVXNhZ2Uoc2VyaWFsaXplZE1vZGVsUmVzcG9uc2UudXNhZ2UpO1xuICAgIHJldHVybiB7XG4gICAgICAgIHVzYWdlLFxuICAgICAgICBvdXRwdXQ6IHNlcmlhbGl6ZWRNb2RlbFJlc3BvbnNlLm91dHB1dC5tYXAoKGl0ZW0pID0+IHByb3RvY29sLk91dHB1dE1vZGVsSXRlbS5wYXJzZShpdGVtKSksXG4gICAgICAgIHJlc3BvbnNlSWQ6IHNlcmlhbGl6ZWRNb2RlbFJlc3BvbnNlLnJlc3BvbnNlSWQsXG4gICAgICAgIHByb3ZpZGVyRGF0YTogc2VyaWFsaXplZE1vZGVsUmVzcG9uc2UucHJvdmlkZXJEYXRhLFxuICAgIH07XG59XG4vKipcbiAqIEBpbnRlcm5hbFxuICovXG5leHBvcnQgZnVuY3Rpb24gZGVzZXJpYWxpemVJdGVtKHNlcmlhbGl6ZWRJdGVtLCBhZ2VudE1hcCkge1xuICAgIHN3aXRjaCAoc2VyaWFsaXplZEl0ZW0udHlwZSkge1xuICAgICAgICBjYXNlICdtZXNzYWdlX291dHB1dF9pdGVtJzpcbiAgICAgICAgICAgIHJldHVybiBuZXcgUnVuTWVzc2FnZU91dHB1dEl0ZW0oc2VyaWFsaXplZEl0ZW0ucmF3SXRlbSwgYWdlbnRNYXAuZ2V0KHNlcmlhbGl6ZWRJdGVtLmFnZW50Lm5hbWUpKTtcbiAgICAgICAgY2FzZSAndG9vbF9jYWxsX2l0ZW0nOlxuICAgICAgICAgICAgcmV0dXJuIG5ldyBSdW5Ub29sQ2FsbEl0ZW0oc2VyaWFsaXplZEl0ZW0ucmF3SXRlbSwgYWdlbnRNYXAuZ2V0KHNlcmlhbGl6ZWRJdGVtLmFnZW50Lm5hbWUpKTtcbiAgICAgICAgY2FzZSAndG9vbF9jYWxsX291dHB1dF9pdGVtJzpcbiAgICAgICAgICAgIHJldHVybiBuZXcgUnVuVG9vbENhbGxPdXRwdXRJdGVtKHNlcmlhbGl6ZWRJdGVtLnJhd0l0ZW0sIGFnZW50TWFwLmdldChzZXJpYWxpemVkSXRlbS5hZ2VudC5uYW1lKSwgc2VyaWFsaXplZEl0ZW0ub3V0cHV0KTtcbiAgICAgICAgY2FzZSAncmVhc29uaW5nX2l0ZW0nOlxuICAgICAgICAgICAgcmV0dXJuIG5ldyBSdW5SZWFzb25pbmdJdGVtKHNlcmlhbGl6ZWRJdGVtLnJhd0l0ZW0sIGFnZW50TWFwLmdldChzZXJpYWxpemVkSXRlbS5hZ2VudC5uYW1lKSk7XG4gICAgICAgIGNhc2UgJ2hhbmRvZmZfY2FsbF9pdGVtJzpcbiAgICAgICAgICAgIHJldHVybiBuZXcgUnVuSGFuZG9mZkNhbGxJdGVtKHNlcmlhbGl6ZWRJdGVtLnJhd0l0ZW0sIGFnZW50TWFwLmdldChzZXJpYWxpemVkSXRlbS5hZ2VudC5uYW1lKSk7XG4gICAgICAgIGNhc2UgJ2hhbmRvZmZfb3V0cHV0X2l0ZW0nOlxuICAgICAgICAgICAgcmV0dXJuIG5ldyBSdW5IYW5kb2ZmT3V0cHV0SXRlbShzZXJpYWxpemVkSXRlbS5yYXdJdGVtLCBhZ2VudE1hcC5nZXQoc2VyaWFsaXplZEl0ZW0uc291cmNlQWdlbnQubmFtZSksIGFnZW50TWFwLmdldChzZXJpYWxpemVkSXRlbS50YXJnZXRBZ2VudC5uYW1lKSk7XG4gICAgICAgIGNhc2UgJ3Rvb2xfYXBwcm92YWxfaXRlbSc6XG4gICAgICAgICAgICByZXR1cm4gbmV3IFJ1blRvb2xBcHByb3ZhbEl0ZW0oc2VyaWFsaXplZEl0ZW0ucmF3SXRlbSwgYWdlbnRNYXAuZ2V0KHNlcmlhbGl6ZWRJdGVtLmFnZW50Lm5hbWUpLCBzZXJpYWxpemVkSXRlbS50b29sTmFtZSk7XG4gICAgfVxufVxuLyoqXG4gKiBAaW50ZXJuYWxcbiAqL1xuYXN5bmMgZnVuY3Rpb24gZGVzZXJpYWxpemVQcm9jZXNzZWRSZXNwb25zZShhZ2VudE1hcCwgY3VycmVudEFnZW50LCBjb250ZXh0LCBzZXJpYWxpemVkUHJvY2Vzc2VkUmVzcG9uc2UpIHtcbiAgICBjb25zdCBhbGxUb29scyA9IGF3YWl0IGN1cnJlbnRBZ2VudC5nZXRBbGxUb29scyhjb250ZXh0KTtcbiAgICBjb25zdCB0b29scyA9IG5ldyBNYXAoYWxsVG9vbHNcbiAgICAgICAgLmZpbHRlcigodG9vbCkgPT4gdG9vbC50eXBlID09PSAnZnVuY3Rpb24nKVxuICAgICAgICAubWFwKCh0b29sKSA9PiBbdG9vbC5uYW1lLCB0b29sXSkpO1xuICAgIGNvbnN0IGNvbXB1dGVyVG9vbHMgPSBuZXcgTWFwKGFsbFRvb2xzXG4gICAgICAgIC5maWx0ZXIoKHRvb2wpID0+IHRvb2wudHlwZSA9PT0gJ2NvbXB1dGVyJylcbiAgICAgICAgLm1hcCgodG9vbCkgPT4gW3Rvb2wubmFtZSwgdG9vbF0pKTtcbiAgICBjb25zdCBzaGVsbFRvb2xzID0gbmV3IE1hcChhbGxUb29sc1xuICAgICAgICAuZmlsdGVyKCh0b29sKSA9PiB0b29sLnR5cGUgPT09ICdzaGVsbCcpXG4gICAgICAgIC5tYXAoKHRvb2wpID0+IFt0b29sLm5hbWUsIHRvb2xdKSk7XG4gICAgY29uc3QgYXBwbHlQYXRjaFRvb2xzID0gbmV3IE1hcChhbGxUb29sc1xuICAgICAgICAuZmlsdGVyKCh0b29sKSA9PiB0b29sLnR5cGUgPT09ICdhcHBseV9wYXRjaCcpXG4gICAgICAgIC5tYXAoKHRvb2wpID0+IFt0b29sLm5hbWUsIHRvb2xdKSk7XG4gICAgY29uc3QgaGFuZG9mZnMgPSBuZXcgTWFwKGN1cnJlbnRBZ2VudC5oYW5kb2Zmcy5tYXAoKGVudHJ5KSA9PiB7XG4gICAgICAgIGlmIChlbnRyeSBpbnN0YW5jZW9mIEFnZW50KSB7XG4gICAgICAgICAgICByZXR1cm4gW2VudHJ5Lm5hbWUsIGhhbmRvZmYoZW50cnkpXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gW2VudHJ5LnRvb2xOYW1lLCBlbnRyeV07XG4gICAgfSkpO1xuICAgIGNvbnN0IHJlc3VsdCA9IHtcbiAgICAgICAgbmV3SXRlbXM6IHNlcmlhbGl6ZWRQcm9jZXNzZWRSZXNwb25zZS5uZXdJdGVtcy5tYXAoKGl0ZW0pID0+IGRlc2VyaWFsaXplSXRlbShpdGVtLCBhZ2VudE1hcCkpLFxuICAgICAgICB0b29sc1VzZWQ6IHNlcmlhbGl6ZWRQcm9jZXNzZWRSZXNwb25zZS50b29sc1VzZWQsXG4gICAgICAgIGhhbmRvZmZzOiBzZXJpYWxpemVkUHJvY2Vzc2VkUmVzcG9uc2UuaGFuZG9mZnMubWFwKChoYW5kb2ZmKSA9PiB7XG4gICAgICAgICAgICBpZiAoIWhhbmRvZmZzLmhhcyhoYW5kb2ZmLmhhbmRvZmYudG9vbE5hbWUpKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFVzZXJFcnJvcihgSGFuZG9mZiAke2hhbmRvZmYuaGFuZG9mZi50b29sTmFtZX0gbm90IGZvdW5kYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHRvb2xDYWxsOiBoYW5kb2ZmLnRvb2xDYWxsLFxuICAgICAgICAgICAgICAgIGhhbmRvZmY6IGhhbmRvZmZzLmdldChoYW5kb2ZmLmhhbmRvZmYudG9vbE5hbWUpLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSksXG4gICAgICAgIGZ1bmN0aW9uczogYXdhaXQgUHJvbWlzZS5hbGwoc2VyaWFsaXplZFByb2Nlc3NlZFJlc3BvbnNlLmZ1bmN0aW9ucy5tYXAoYXN5bmMgKGZ1bmN0aW9uQ2FsbCkgPT4ge1xuICAgICAgICAgICAgaWYgKCF0b29scy5oYXMoZnVuY3Rpb25DYWxsLnRvb2wubmFtZSkpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVXNlckVycm9yKGBUb29sICR7ZnVuY3Rpb25DYWxsLnRvb2wubmFtZX0gbm90IGZvdW5kYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHRvb2xDYWxsOiBmdW5jdGlvbkNhbGwudG9vbENhbGwsXG4gICAgICAgICAgICAgICAgdG9vbDogdG9vbHMuZ2V0KGZ1bmN0aW9uQ2FsbC50b29sLm5hbWUpLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSkpLFxuICAgICAgICBjb21wdXRlckFjdGlvbnM6IHNlcmlhbGl6ZWRQcm9jZXNzZWRSZXNwb25zZS5jb21wdXRlckFjdGlvbnMubWFwKChjb21wdXRlckFjdGlvbikgPT4ge1xuICAgICAgICAgICAgY29uc3QgdG9vbE5hbWUgPSBjb21wdXRlckFjdGlvbi5jb21wdXRlci5uYW1lO1xuICAgICAgICAgICAgaWYgKCFjb21wdXRlclRvb2xzLmhhcyh0b29sTmFtZSkpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVXNlckVycm9yKGBDb21wdXRlciB0b29sICR7dG9vbE5hbWV9IG5vdCBmb3VuZGApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICB0b29sQ2FsbDogY29tcHV0ZXJBY3Rpb24udG9vbENhbGwsXG4gICAgICAgICAgICAgICAgY29tcHV0ZXI6IGNvbXB1dGVyVG9vbHMuZ2V0KHRvb2xOYW1lKSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pLFxuICAgICAgICBzaGVsbEFjdGlvbnM6IChzZXJpYWxpemVkUHJvY2Vzc2VkUmVzcG9uc2Uuc2hlbGxBY3Rpb25zID8/IFtdKS5tYXAoKHNoZWxsQWN0aW9uKSA9PiB7XG4gICAgICAgICAgICBjb25zdCB0b29sTmFtZSA9IHNoZWxsQWN0aW9uLnNoZWxsLm5hbWU7XG4gICAgICAgICAgICBpZiAoIXNoZWxsVG9vbHMuaGFzKHRvb2xOYW1lKSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBVc2VyRXJyb3IoYFNoZWxsIHRvb2wgJHt0b29sTmFtZX0gbm90IGZvdW5kYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHRvb2xDYWxsOiBzaGVsbEFjdGlvbi50b29sQ2FsbCxcbiAgICAgICAgICAgICAgICBzaGVsbDogc2hlbGxUb29scy5nZXQodG9vbE5hbWUpLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSksXG4gICAgICAgIGFwcGx5UGF0Y2hBY3Rpb25zOiAoc2VyaWFsaXplZFByb2Nlc3NlZFJlc3BvbnNlLmFwcGx5UGF0Y2hBY3Rpb25zID8/IFtdKS5tYXAoKGFwcGx5UGF0Y2hBY3Rpb24pID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHRvb2xOYW1lID0gYXBwbHlQYXRjaEFjdGlvbi5hcHBseVBhdGNoLm5hbWU7XG4gICAgICAgICAgICBpZiAoIWFwcGx5UGF0Y2hUb29scy5oYXModG9vbE5hbWUpKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFVzZXJFcnJvcihgQXBwbHkgcGF0Y2ggdG9vbCAke3Rvb2xOYW1lfSBub3QgZm91bmRgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgdG9vbENhbGw6IGFwcGx5UGF0Y2hBY3Rpb24udG9vbENhbGwsXG4gICAgICAgICAgICAgICAgYXBwbHlQYXRjaDogYXBwbHlQYXRjaFRvb2xzLmdldCh0b29sTmFtZSksXG4gICAgICAgICAgICB9O1xuICAgICAgICB9KSxcbiAgICAgICAgbWNwQXBwcm92YWxSZXF1ZXN0czogKHNlcmlhbGl6ZWRQcm9jZXNzZWRSZXNwb25zZS5tY3BBcHByb3ZhbFJlcXVlc3RzID8/IFtdKS5tYXAoKGFwcHJvdmFsUmVxdWVzdCkgPT4gKHtcbiAgICAgICAgICAgIHJlcXVlc3RJdGVtOiBuZXcgUnVuVG9vbEFwcHJvdmFsSXRlbShhcHByb3ZhbFJlcXVlc3QucmVxdWVzdEl0ZW1cbiAgICAgICAgICAgICAgICAucmF3SXRlbSwgY3VycmVudEFnZW50KSxcbiAgICAgICAgICAgIG1jcFRvb2w6IGFwcHJvdmFsUmVxdWVzdC5tY3BUb29sLFxuICAgICAgICB9KSksXG4gICAgfTtcbiAgICByZXR1cm4ge1xuICAgICAgICAuLi5yZXN1bHQsXG4gICAgICAgIGhhc1Rvb2xzT3JBcHByb3ZhbHNUb1J1bigpIHtcbiAgICAgICAgICAgIHJldHVybiAocmVzdWx0LmhhbmRvZmZzLmxlbmd0aCA+IDAgfHxcbiAgICAgICAgICAgICAgICByZXN1bHQuZnVuY3Rpb25zLmxlbmd0aCA+IDAgfHxcbiAgICAgICAgICAgICAgICByZXN1bHQubWNwQXBwcm92YWxSZXF1ZXN0cy5sZW5ndGggPiAwIHx8XG4gICAgICAgICAgICAgICAgcmVzdWx0LmNvbXB1dGVyQWN0aW9ucy5sZW5ndGggPiAwIHx8XG4gICAgICAgICAgICAgICAgcmVzdWx0LnNoZWxsQWN0aW9ucy5sZW5ndGggPiAwIHx8XG4gICAgICAgICAgICAgICAgcmVzdWx0LmFwcGx5UGF0Y2hBY3Rpb25zLmxlbmd0aCA+IDApO1xuICAgICAgICB9LFxuICAgIH07XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1ydW5TdGF0ZS5tanMubWFwIiwiaW1wb3J0IHsgQWdlbnQgfSBmcm9tIFwiLi9hZ2VudC5tanNcIjtcbmltcG9ydCB7IGRlZmluZUlucHV0R3VhcmRyYWlsLCBkZWZpbmVPdXRwdXRHdWFyZHJhaWwsIH0gZnJvbSBcIi4vZ3VhcmRyYWlsLm1qc1wiO1xuaW1wb3J0IHsgZ2V0RGVmYXVsdE1vZGVsUHJvdmlkZXIgfSBmcm9tIFwiLi9wcm92aWRlcnMubWpzXCI7XG5pbXBvcnQgeyBSdW5Db250ZXh0IH0gZnJvbSBcIi4vcnVuQ29udGV4dC5tanNcIjtcbmltcG9ydCB7IFJ1blJlc3VsdCwgU3RyZWFtZWRSdW5SZXN1bHQgfSBmcm9tIFwiLi9yZXN1bHQubWpzXCI7XG5pbXBvcnQgeyBSdW5Ib29rcyB9IGZyb20gXCIuL2xpZmVjeWNsZS5tanNcIjtcbmltcG9ydCBsb2dnZXIgZnJvbSBcIi4vbG9nZ2VyLm1qc1wiO1xuaW1wb3J0IHsgc2VyaWFsaXplVG9vbCwgc2VyaWFsaXplSGFuZG9mZiB9IGZyb20gXCIuL3V0aWxzL3NlcmlhbGl6ZS5tanNcIjtcbmltcG9ydCB7IEd1YXJkcmFpbEV4ZWN1dGlvbkVycm9yLCBJbnB1dEd1YXJkcmFpbFRyaXB3aXJlVHJpZ2dlcmVkLCBNYXhUdXJuc0V4Y2VlZGVkRXJyb3IsIE1vZGVsQmVoYXZpb3JFcnJvciwgT3V0cHV0R3VhcmRyYWlsVHJpcHdpcmVUcmlnZ2VyZWQsIFVzZXJFcnJvciwgfSBmcm9tIFwiLi9lcnJvcnMubWpzXCI7XG5pbXBvcnQgeyBhZGRTdGVwVG9SdW5SZXN1bHQsIHJlc29sdmVJbnRlcnJ1cHRlZFR1cm4sIHJlc29sdmVUdXJuQWZ0ZXJNb2RlbFJlc3BvbnNlLCBtYXliZVJlc2V0VG9vbENob2ljZSwgcHJvY2Vzc01vZGVsUmVzcG9uc2UsIHN0cmVhbVN0ZXBJdGVtc1RvUnVuUmVzdWx0LCBzYXZlU3RyZWFtSW5wdXRUb1Nlc3Npb24sIHNhdmVTdHJlYW1SZXN1bHRUb1Nlc3Npb24sIHNhdmVUb1Nlc3Npb24sIHByZXBhcmVJbnB1dEl0ZW1zV2l0aFNlc3Npb24sIH0gZnJvbSBcIi4vcnVuSW1wbGVtZW50YXRpb24ubWpzXCI7XG5pbXBvcnQgeyByZXNvbHZlQ29tcHV0ZXIsIGRpc3Bvc2VSZXNvbHZlZENvbXB1dGVycywgfSBmcm9tIFwiLi90b29sLm1qc1wiO1xuaW1wb3J0IHsgZ2V0T3JDcmVhdGVUcmFjZSwgYWRkRXJyb3JUb0N1cnJlbnRTcGFuLCByZXNldEN1cnJlbnRTcGFuLCBzZXRDdXJyZW50U3Bhbiwgd2l0aE5ld1NwYW5Db250ZXh0LCB3aXRoVHJhY2UsIH0gZnJvbSBcIi4vdHJhY2luZy9jb250ZXh0Lm1qc1wiO1xuaW1wb3J0IHsgY3JlYXRlQWdlbnRTcGFuLCB3aXRoR3VhcmRyYWlsU3BhbiB9IGZyb20gXCIuL3RyYWNpbmcvaW5kZXgubWpzXCI7XG5pbXBvcnQgeyBVc2FnZSB9IGZyb20gXCIuL3VzYWdlLm1qc1wiO1xuaW1wb3J0IHsgUnVuQWdlbnRVcGRhdGVkU3RyZWFtRXZlbnQsIFJ1blJhd01vZGVsU3RyZWFtRXZlbnQgfSBmcm9tIFwiLi9ldmVudHMubWpzXCI7XG5pbXBvcnQgeyBSdW5TdGF0ZSB9IGZyb20gXCIuL3J1blN0YXRlLm1qc1wiO1xuaW1wb3J0IHsgU3RyZWFtRXZlbnRSZXNwb25zZUNvbXBsZXRlZCB9IGZyb20gXCIuL3R5cGVzL3Byb3RvY29sLm1qc1wiO1xuaW1wb3J0IHsgY29udmVydEFnZW50T3V0cHV0VHlwZVRvU2VyaWFsaXphYmxlIH0gZnJvbSBcIi4vdXRpbHMvdG9vbHMubWpzXCI7XG5pbXBvcnQgeyBncHQ1UmVhc29uaW5nU2V0dGluZ3NSZXF1aXJlZCwgaXNHcHQ1RGVmYXVsdCB9IGZyb20gXCIuL2RlZmF1bHRNb2RlbC5tanNcIjtcbmltcG9ydCB7IGVuY29kZVVpbnQ4QXJyYXlUb0Jhc2U2NCB9IGZyb20gXCIuL3V0aWxzL2Jhc2U2NC5tanNcIjtcbmltcG9ydCB7IGlzQXJyYXlCdWZmZXJWaWV3LCBpc05vZGVCdWZmZXIsIGlzU2VyaWFsaXplZEJ1ZmZlclNuYXBzaG90LCB9IGZyb20gXCIuL3V0aWxzL3NtYXJ0U3RyaW5nLm1qc1wiO1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHJ1bihhZ2VudCwgaW5wdXQsIG9wdGlvbnMpIHtcbiAgICBjb25zdCBydW5uZXIgPSBnZXREZWZhdWx0UnVubmVyKCk7XG4gICAgaWYgKG9wdGlvbnM/LnN0cmVhbSkge1xuICAgICAgICByZXR1cm4gYXdhaXQgcnVubmVyLnJ1bihhZ2VudCwgaW5wdXQsIG9wdGlvbnMpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGF3YWl0IHJ1bm5lci5ydW4oYWdlbnQsIGlucHV0LCBvcHRpb25zKTtcbiAgICB9XG59XG4vKipcbiAqIE9yY2hlc3RyYXRlcyBhZ2VudCBleGVjdXRpb24sIGluY2x1ZGluZyBndWFyZHJhaWxzLCB0b29sIGNhbGxzLCBzZXNzaW9uIHBlcnNpc3RlbmNlLCBhbmRcbiAqIHRyYWNpbmcuIFJldXNlIGEgYFJ1bm5lcmAgaW5zdGFuY2Ugd2hlbiB5b3Ugd2FudCBjb25zaXN0ZW50IGNvbmZpZ3VyYXRpb24gYWNyb3NzIG11bHRpcGxlIHJ1bnMuXG4gKi9cbmV4cG9ydCBjbGFzcyBSdW5uZXIgZXh0ZW5kcyBSdW5Ib29rcyB7XG4gICAgY29uZmlnO1xuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBydW5uZXIgd2l0aCBvcHRpb25hbCBkZWZhdWx0cyB0aGF0IGFwcGx5IHRvIGV2ZXJ5IHN1YnNlcXVlbnQgcnVuIGludm9jYXRpb24uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gY29uZmlnIC0gT3ZlcnJpZGVzIGZvciBtb2RlbHMsIGd1YXJkcmFpbHMsIHRyYWNpbmcsIG9yIHNlc3Npb24gYmVoYXZpb3IuXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoY29uZmlnID0ge30pIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5jb25maWcgPSB7XG4gICAgICAgICAgICBtb2RlbFByb3ZpZGVyOiBjb25maWcubW9kZWxQcm92aWRlciA/PyBnZXREZWZhdWx0TW9kZWxQcm92aWRlcigpLFxuICAgICAgICAgICAgbW9kZWw6IGNvbmZpZy5tb2RlbCxcbiAgICAgICAgICAgIG1vZGVsU2V0dGluZ3M6IGNvbmZpZy5tb2RlbFNldHRpbmdzLFxuICAgICAgICAgICAgaGFuZG9mZklucHV0RmlsdGVyOiBjb25maWcuaGFuZG9mZklucHV0RmlsdGVyLFxuICAgICAgICAgICAgaW5wdXRHdWFyZHJhaWxzOiBjb25maWcuaW5wdXRHdWFyZHJhaWxzLFxuICAgICAgICAgICAgb3V0cHV0R3VhcmRyYWlsczogY29uZmlnLm91dHB1dEd1YXJkcmFpbHMsXG4gICAgICAgICAgICB0cmFjaW5nRGlzYWJsZWQ6IGNvbmZpZy50cmFjaW5nRGlzYWJsZWQgPz8gZmFsc2UsXG4gICAgICAgICAgICB0cmFjZUluY2x1ZGVTZW5zaXRpdmVEYXRhOiBjb25maWcudHJhY2VJbmNsdWRlU2Vuc2l0aXZlRGF0YSA/PyB0cnVlLFxuICAgICAgICAgICAgd29ya2Zsb3dOYW1lOiBjb25maWcud29ya2Zsb3dOYW1lID8/ICdBZ2VudCB3b3JrZmxvdycsXG4gICAgICAgICAgICB0cmFjZUlkOiBjb25maWcudHJhY2VJZCxcbiAgICAgICAgICAgIGdyb3VwSWQ6IGNvbmZpZy5ncm91cElkLFxuICAgICAgICAgICAgdHJhY2VNZXRhZGF0YTogY29uZmlnLnRyYWNlTWV0YWRhdGEsXG4gICAgICAgICAgICBzZXNzaW9uSW5wdXRDYWxsYmFjazogY29uZmlnLnNlc3Npb25JbnB1dENhbGxiYWNrLFxuICAgICAgICAgICAgY2FsbE1vZGVsSW5wdXRGaWx0ZXI6IGNvbmZpZy5jYWxsTW9kZWxJbnB1dEZpbHRlcixcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5pbnB1dEd1YXJkcmFpbERlZnMgPSAoY29uZmlnLmlucHV0R3VhcmRyYWlscyA/PyBbXSkubWFwKGRlZmluZUlucHV0R3VhcmRyYWlsKTtcbiAgICAgICAgdGhpcy5vdXRwdXRHdWFyZHJhaWxEZWZzID0gKGNvbmZpZy5vdXRwdXRHdWFyZHJhaWxzID8/IFtdKS5tYXAoZGVmaW5lT3V0cHV0R3VhcmRyYWlsKTtcbiAgICB9XG4gICAgYXN5bmMgcnVuKGFnZW50LCBpbnB1dCwgb3B0aW9ucyA9IHtcbiAgICAgICAgc3RyZWFtOiBmYWxzZSxcbiAgICAgICAgY29udGV4dDogdW5kZWZpbmVkLFxuICAgIH0pIHtcbiAgICAgICAgY29uc3QgcmVzb2x2ZWRPcHRpb25zID0gb3B0aW9ucyA/PyB7IHN0cmVhbTogZmFsc2UsIGNvbnRleHQ6IHVuZGVmaW5lZCB9O1xuICAgICAgICAvLyBQZXItcnVuIG9wdGlvbnMgdGFrZSBwcmVjZWRlbmNlIG92ZXIgcnVubmVyIGRlZmF1bHRzIGZvciBzZXNzaW9uIG1lbW9yeSBiZWhhdmlvci5cbiAgICAgICAgY29uc3Qgc2Vzc2lvbklucHV0Q2FsbGJhY2sgPSByZXNvbHZlZE9wdGlvbnMuc2Vzc2lvbklucHV0Q2FsbGJhY2sgPz8gdGhpcy5jb25maWcuc2Vzc2lvbklucHV0Q2FsbGJhY2s7XG4gICAgICAgIC8vIExpa2V3aXNlIGFsbG93IGNhbGxlcnMgdG8gb3ZlcnJpZGUgY2FsbE1vZGVsSW5wdXRGaWx0ZXIgb24gaW5kaXZpZHVhbCBydW5zLlxuICAgICAgICBjb25zdCBjYWxsTW9kZWxJbnB1dEZpbHRlciA9IHJlc29sdmVkT3B0aW9ucy5jYWxsTW9kZWxJbnB1dEZpbHRlciA/PyB0aGlzLmNvbmZpZy5jYWxsTW9kZWxJbnB1dEZpbHRlcjtcbiAgICAgICAgY29uc3QgaGFzQ2FsbE1vZGVsSW5wdXRGaWx0ZXIgPSBCb29sZWFuKGNhbGxNb2RlbElucHV0RmlsdGVyKTtcbiAgICAgICAgY29uc3QgZWZmZWN0aXZlT3B0aW9ucyA9IHtcbiAgICAgICAgICAgIC4uLnJlc29sdmVkT3B0aW9ucyxcbiAgICAgICAgICAgIHNlc3Npb25JbnB1dENhbGxiYWNrLFxuICAgICAgICAgICAgY2FsbE1vZGVsSW5wdXRGaWx0ZXIsXG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IHNlcnZlck1hbmFnZXNDb252ZXJzYXRpb24gPSBCb29sZWFuKGVmZmVjdGl2ZU9wdGlvbnMuY29udmVyc2F0aW9uSWQpIHx8XG4gICAgICAgICAgICBCb29sZWFuKGVmZmVjdGl2ZU9wdGlvbnMucHJldmlvdXNSZXNwb25zZUlkKTtcbiAgICAgICAgLy8gV2hlbiB0aGUgc2VydmVyIHRyYWNrcyBjb252ZXJzYXRpb24gaGlzdG9yeSB3ZSBkZWZlciB0byBpdCBmb3IgcHJldmlvdXMgdHVybnMgc28gbG9jYWwgc2Vzc2lvblxuICAgICAgICAvLyBwZXJzaXN0ZW5jZSBjYW4gZm9jdXMgc29sZWx5IG9uIHRoZSBuZXcgZGVsdGEgYmVpbmcgZ2VuZXJhdGVkIGluIHRoaXMgcHJvY2Vzcy5cbiAgICAgICAgY29uc3Qgc2Vzc2lvbiA9IGVmZmVjdGl2ZU9wdGlvbnMuc2Vzc2lvbjtcbiAgICAgICAgY29uc3QgcmVzdW1pbmdGcm9tU3RhdGUgPSBpbnB1dCBpbnN0YW5jZW9mIFJ1blN0YXRlO1xuICAgICAgICBsZXQgc2Vzc2lvbklucHV0T3JpZ2luYWxTbmFwc2hvdCA9IHNlc3Npb24gJiYgcmVzdW1pbmdGcm9tU3RhdGUgPyBbXSA6IHVuZGVmaW5lZDtcbiAgICAgICAgbGV0IHNlc3Npb25JbnB1dEZpbHRlcmVkU25hcHNob3QgPSB1bmRlZmluZWQ7XG4gICAgICAgIC8vIFRyYWNrcyByZW1haW5pbmcgcGVyc2lzdGVuY2Ugc2xvdHMgcGVyIEFnZW50SW5wdXRJdGVtIGtleSBzbyByZXN1bWVkIHNlc3Npb25zIG9ubHkgd3JpdGUgZWFjaCBvcmlnaW5hbCBvY2N1cnJlbmNlIG9uY2UuXG4gICAgICAgIGxldCBzZXNzaW9uSW5wdXRQZW5kaW5nV3JpdGVDb3VudHMgPSBzZXNzaW9uICYmIHJlc3VtaW5nRnJvbVN0YXRlID8gbmV3IE1hcCgpIDogdW5kZWZpbmVkO1xuICAgICAgICAvLyBLZWVwcyB0cmFjayBvZiB3aGljaCBpbnB1dHMgc2hvdWxkIGJlIHdyaXR0ZW4gYmFjayB0byBzZXNzaW9uIG1lbW9yeS4gYHNvdXJjZUl0ZW1zYCByZWZsZWN0c1xuICAgICAgICAvLyB0aGUgb3JpZ2luYWwgb2JqZWN0cyAoc28gd2UgY2FuIHJlc3BlY3QgcmVzdW1lIGNvdW50cykgd2hpbGUgYGZpbHRlcmVkSXRlbXNgLCB3aGVuIHByZXNlbnQsXG4gICAgICAgIC8vIGNvbnRhaW5zIHRoZSBmaWx0ZXJlZC9yZWRhY3RlZCBjbG9uZXMgdGhhdCBtdXN0IGJlIHBlcnNpc3RlZCBmb3IgaGlzdG9yeS5cbiAgICAgICAgLy8gVGhlIGhlbHBlciByZWNvbmNpbGVzIHRoZSBmaWx0ZXJlZCBjb3BpZXMgcHJvZHVjZWQgYnkgY2FsbE1vZGVsSW5wdXRGaWx0ZXIgd2l0aCB0aGVpciBvcmlnaW5hbFxuICAgICAgICAvLyBjb3VudGVycGFydHMgc28gcmVzdW1lLWZyb20tc3RhdGUgYm9va2tlZXBpbmcgc3RheXMgY29uc2lzdGVudCBhbmQgZHVwbGljYXRlIHJlZmVyZW5jZXMgb25seVxuICAgICAgICAvLyBjb25zdW1lIGEgc2luZ2xlIHBlcnNpc3RlbmNlIHNsb3QuXG4gICAgICAgIGNvbnN0IHJlY29yZFNlc3Npb25JdGVtc0ZvclBlcnNpc3RlbmNlID0gKHNvdXJjZUl0ZW1zLCBmaWx0ZXJlZEl0ZW1zKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBwZW5kaW5nV3JpdGVDb3VudHMgPSBzZXNzaW9uSW5wdXRQZW5kaW5nV3JpdGVDb3VudHM7XG4gICAgICAgICAgICBpZiAoZmlsdGVyZWRJdGVtcyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFwZW5kaW5nV3JpdGVDb3VudHMpIHtcbiAgICAgICAgICAgICAgICAgICAgc2Vzc2lvbklucHV0RmlsdGVyZWRTbmFwc2hvdCA9IGZpbHRlcmVkSXRlbXMubWFwKChpdGVtKSA9PiBzdHJ1Y3R1cmVkQ2xvbmUoaXRlbSkpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IHBlcnNpc3RhYmxlSXRlbXMgPSBbXTtcbiAgICAgICAgICAgICAgICBjb25zdCBzb3VyY2VPY2N1cnJlbmNlQ291bnRzID0gbmV3IFdlYWtNYXAoKTtcbiAgICAgICAgICAgICAgICAvLyBUcmFjayBob3cgbWFueSB0aW1lcyBlYWNoIG9yaWdpbmFsIG9iamVjdCBhcHBlYXJzIHNvIGR1cGxpY2F0ZSByZWZlcmVuY2VzIG9ubHkgY29uc3VtZSBvbmUgcGVyc2lzdGVuY2Ugc2xvdC5cbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHNvdXJjZSBvZiBzb3VyY2VJdGVtcykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXNvdXJjZSB8fCB0eXBlb2Ygc291cmNlICE9PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV4dENvdW50ID0gKHNvdXJjZU9jY3VycmVuY2VDb3VudHMuZ2V0KHNvdXJjZSkgPz8gMCkgKyAxO1xuICAgICAgICAgICAgICAgICAgICBzb3VyY2VPY2N1cnJlbmNlQ291bnRzLnNldChzb3VyY2UsIG5leHRDb3VudCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIExldCBmaWx0ZXJlZCBpdGVtcyB3aXRob3V0IGEgb25lLXRvLW9uZSBzb3VyY2UgbWF0Y2ggY2xhaW0gYW55IHJlbWFpbmluZyBwZXJzaXN0ZW5jZSBjb3VudC5cbiAgICAgICAgICAgICAgICBjb25zdCBjb25zdW1lQW55UGVuZGluZ1dyaXRlU2xvdCA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBba2V5LCByZW1haW5pbmddIG9mIHBlbmRpbmdXcml0ZUNvdW50cykge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlbWFpbmluZyA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZW5kaW5nV3JpdGVDb3VudHMuc2V0KGtleSwgcmVtYWluaW5nIC0gMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBmaWx0ZXJlZEl0ZW1zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGZpbHRlcmVkSXRlbSA9IGZpbHRlcmVkSXRlbXNbaV07XG4gICAgICAgICAgICAgICAgICAgIGlmICghZmlsdGVyZWRJdGVtKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBsZXQgYWxsb2NhdGVkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHNvdXJjZSA9IHNvdXJjZUl0ZW1zW2ldO1xuICAgICAgICAgICAgICAgICAgICBpZiAoc291cmNlICYmIHR5cGVvZiBzb3VyY2UgPT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBwZW5kaW5nT2NjdXJyZW5jZXMgPSAoc291cmNlT2NjdXJyZW5jZUNvdW50cy5nZXQoc291cmNlKSA/PyAwKSAtIDE7XG4gICAgICAgICAgICAgICAgICAgICAgICBzb3VyY2VPY2N1cnJlbmNlQ291bnRzLnNldChzb3VyY2UsIHBlbmRpbmdPY2N1cnJlbmNlcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocGVuZGluZ09jY3VycmVuY2VzID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc291cmNlS2V5ID0gZ2V0QWdlbnRJbnB1dEl0ZW1LZXkoc291cmNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlbWFpbmluZyA9IHBlbmRpbmdXcml0ZUNvdW50cy5nZXQoc291cmNlS2V5KSA/PyAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlbWFpbmluZyA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZW5kaW5nV3JpdGVDb3VudHMuc2V0KHNvdXJjZUtleSwgcmVtYWluaW5nIC0gMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGVyc2lzdGFibGVJdGVtcy5wdXNoKHN0cnVjdHVyZWRDbG9uZShmaWx0ZXJlZEl0ZW0pKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGxvY2F0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGZpbHRlcmVkS2V5ID0gZ2V0QWdlbnRJbnB1dEl0ZW1LZXkoZmlsdGVyZWRJdGVtKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZmlsdGVyZWRSZW1haW5pbmcgPSBwZW5kaW5nV3JpdGVDb3VudHMuZ2V0KGZpbHRlcmVkS2V5KSA/PyAwO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZmlsdGVyZWRSZW1haW5pbmcgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwZW5kaW5nV3JpdGVDb3VudHMuc2V0KGZpbHRlcmVkS2V5LCBmaWx0ZXJlZFJlbWFpbmluZyAtIDEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcGVyc2lzdGFibGVJdGVtcy5wdXNoKHN0cnVjdHVyZWRDbG9uZShmaWx0ZXJlZEl0ZW0pKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFsbG9jYXRlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoIXNvdXJjZSAmJiBjb25zdW1lQW55UGVuZGluZ1dyaXRlU2xvdCgpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwZXJzaXN0YWJsZUl0ZW1zLnB1c2goc3RydWN0dXJlZENsb25lKGZpbHRlcmVkSXRlbSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYWxsb2NhdGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoIWFsbG9jYXRlZCAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgIXNvdXJjZSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgc2Vzc2lvbklucHV0RmlsdGVyZWRTbmFwc2hvdCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBQcmVzZXJ2ZSBhdCBsZWFzdCBvbmUgY29weSBzbyBsYXRlciBwZXJzaXN0ZW5jZSByZXNvbHZlcyBldmVuIHdoZW4gbm8gY291bnRlcnMgcmVtYWluLlxuICAgICAgICAgICAgICAgICAgICAgICAgcGVyc2lzdGFibGVJdGVtcy5wdXNoKHN0cnVjdHVyZWRDbG9uZShmaWx0ZXJlZEl0ZW0pKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAocGVyc2lzdGFibGVJdGVtcy5sZW5ndGggPiAwIHx8XG4gICAgICAgICAgICAgICAgICAgIHNlc3Npb25JbnB1dEZpbHRlcmVkU25hcHNob3QgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICBzZXNzaW9uSW5wdXRGaWx0ZXJlZFNuYXBzaG90ID0gcGVyc2lzdGFibGVJdGVtcztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgZmlsdGVyZWQgPSBbXTtcbiAgICAgICAgICAgIGlmICghcGVuZGluZ1dyaXRlQ291bnRzKSB7XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBpdGVtIG9mIHNvdXJjZUl0ZW1zKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghaXRlbSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZmlsdGVyZWQucHVzaChzdHJ1Y3R1cmVkQ2xvbmUoaXRlbSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgaXRlbSBvZiBzb3VyY2VJdGVtcykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWl0ZW0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGtleSA9IGdldEFnZW50SW5wdXRJdGVtS2V5KGl0ZW0pO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCByZW1haW5pbmcgPSBwZW5kaW5nV3JpdGVDb3VudHMuZ2V0KGtleSkgPz8gMDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlbWFpbmluZyA8PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBwZW5kaW5nV3JpdGVDb3VudHMuc2V0KGtleSwgcmVtYWluaW5nIC0gMSk7XG4gICAgICAgICAgICAgICAgICAgIGZpbHRlcmVkLnB1c2goc3RydWN0dXJlZENsb25lKGl0ZW0pKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZmlsdGVyZWQubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIHNlc3Npb25JbnB1dEZpbHRlcmVkU25hcHNob3QgPSBmaWx0ZXJlZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHNlc3Npb25JbnB1dEZpbHRlcmVkU25hcHNob3QgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHNlc3Npb25JbnB1dEZpbHRlcmVkU25hcHNob3QgPSBbXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgLy8gRGV0ZXJtaW5lIHdoaWNoIGl0ZW1zIHNob3VsZCBiZSBjb21taXR0ZWQgdG8gc2Vzc2lvbiBtZW1vcnkgZm9yIHRoaXMgdHVybi5cbiAgICAgICAgLy8gRmlsdGVycyB0YWtlIHByZWNlZGVuY2UgYmVjYXVzZSB0aGV5IHJlZmxlY3QgdGhlIGV4YWN0IHBheWxvYWQgZGVsaXZlcmVkIHRvIHRoZSBtb2RlbC5cbiAgICAgICAgY29uc3QgcmVzb2x2ZVNlc3Npb25JdGVtc0ZvclBlcnNpc3RlbmNlID0gKCkgPT4ge1xuICAgICAgICAgICAgaWYgKHNlc3Npb25JbnB1dEZpbHRlcmVkU25hcHNob3QgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBzZXNzaW9uSW5wdXRGaWx0ZXJlZFNuYXBzaG90O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGhhc0NhbGxNb2RlbElucHV0RmlsdGVyKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBzZXNzaW9uSW5wdXRPcmlnaW5hbFNuYXBzaG90O1xuICAgICAgICB9O1xuICAgICAgICBsZXQgcHJlcGFyZWRJbnB1dCA9IGlucHV0O1xuICAgICAgICBpZiAoIShwcmVwYXJlZElucHV0IGluc3RhbmNlb2YgUnVuU3RhdGUpKSB7XG4gICAgICAgICAgICBpZiAoc2Vzc2lvbiAmJiBBcnJheS5pc0FycmF5KHByZXBhcmVkSW5wdXQpICYmICFzZXNzaW9uSW5wdXRDYWxsYmFjaykge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBVc2VyRXJyb3IoJ1J1bkNvbmZpZy5zZXNzaW9uSW5wdXRDYWxsYmFjayBtdXN0IGJlIHByb3ZpZGVkIHdoZW4gdXNpbmcgc2Vzc2lvbiBoaXN0b3J5IHdpdGggbGlzdCBpbnB1dHMuJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBwcmVwYXJlZCA9IGF3YWl0IHByZXBhcmVJbnB1dEl0ZW1zV2l0aFNlc3Npb24ocHJlcGFyZWRJbnB1dCwgc2Vzc2lvbiwgc2Vzc2lvbklucHV0Q2FsbGJhY2ssIHtcbiAgICAgICAgICAgICAgICAvLyBXaGVuIHRoZSBzZXJ2ZXIgdHJhY2tzIGNvbnZlcnNhdGlvbiBzdGF0ZSB3ZSBvbmx5IHNlbmQgdGhlIG5ldyB0dXJuIGlucHV0cztcbiAgICAgICAgICAgICAgICAvLyBwcmV2aW91cyBtZXNzYWdlcyBhcmUgcmVjb3ZlcmVkIHZpYSBjb252ZXJzYXRpb25JZC9wcmV2aW91c1Jlc3BvbnNlSWQuXG4gICAgICAgICAgICAgICAgaW5jbHVkZUhpc3RvcnlJblByZXBhcmVkSW5wdXQ6ICFzZXJ2ZXJNYW5hZ2VzQ29udmVyc2F0aW9uLFxuICAgICAgICAgICAgICAgIHByZXNlcnZlRHJvcHBlZE5ld0l0ZW1zOiBzZXJ2ZXJNYW5hZ2VzQ29udmVyc2F0aW9uLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAoc2VydmVyTWFuYWdlc0NvbnZlcnNhdGlvbiAmJiBzZXNzaW9uKSB7XG4gICAgICAgICAgICAgICAgLy8gV2hlbiB0aGUgc2VydmVyIG1hbmFnZXMgbWVtb3J5IHdlIG9ubHkgcGVyc2lzdCB0aGUgbmV3IHR1cm4gaW5wdXRzIGxvY2FsbHkgc28gdGhlXG4gICAgICAgICAgICAgICAgLy8gY29udmVyc2F0aW9uIHNlcnZpY2Ugc3RheXMgdGhlIHNpbmdsZSBzb3VyY2Ugb2YgdHJ1dGggZm9yIHByaW9yIGV4Y2hhbmdlcy5cbiAgICAgICAgICAgICAgICBjb25zdCBzZXNzaW9uSXRlbXMgPSBwcmVwYXJlZC5zZXNzaW9uSXRlbXM7XG4gICAgICAgICAgICAgICAgaWYgKHNlc3Npb25JdGVtcyAmJiBzZXNzaW9uSXRlbXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICBwcmVwYXJlZElucHV0ID0gc2Vzc2lvbkl0ZW1zO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcHJlcGFyZWRJbnB1dCA9IHByZXBhcmVkLnByZXBhcmVkSW5wdXQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcHJlcGFyZWRJbnB1dCA9IHByZXBhcmVkLnByZXBhcmVkSW5wdXQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoc2Vzc2lvbikge1xuICAgICAgICAgICAgICAgIGNvbnN0IGl0ZW1zID0gcHJlcGFyZWQuc2Vzc2lvbkl0ZW1zID8/IFtdO1xuICAgICAgICAgICAgICAgIC8vIENsb25lIHRoZSBpdGVtcyB0aGF0IHdpbGwgYmUgcGVyc2lzdGVkIHNvIGxhdGVyIG11dGF0aW9ucyAoZmlsdGVycywgaG9va3MpIGNhbm5vdCBkZXN5bmMgaGlzdG9yeS5cbiAgICAgICAgICAgICAgICBzZXNzaW9uSW5wdXRPcmlnaW5hbFNuYXBzaG90ID0gaXRlbXMubWFwKChpdGVtKSA9PiBzdHJ1Y3R1cmVkQ2xvbmUoaXRlbSkpO1xuICAgICAgICAgICAgICAgIC8vIFJlc2V0IHBlbmRpbmcgY291bnRzIHNvIGVhY2ggcHJlcGFyZWQgaXRlbSByZXNlcnZlcyBleGFjdGx5IG9uZSB3cml0ZSBzbG90IHVudGlsIGZpbHRlcnMgcmVzb2x2ZSBtYXRjaGVzLlxuICAgICAgICAgICAgICAgIHNlc3Npb25JbnB1dFBlbmRpbmdXcml0ZUNvdW50cyA9IG5ldyBNYXAoKTtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgaXRlbXMpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qga2V5ID0gZ2V0QWdlbnRJbnB1dEl0ZW1LZXkoaXRlbSk7XG4gICAgICAgICAgICAgICAgICAgIHNlc3Npb25JbnB1dFBlbmRpbmdXcml0ZUNvdW50cy5zZXQoa2V5LCAoc2Vzc2lvbklucHV0UGVuZGluZ1dyaXRlQ291bnRzLmdldChrZXkpID8/IDApICsgMSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIFN0cmVhbWluZyBydW5zIHBlcnNpc3QgdGhlIGlucHV0IGFzeW5jaHJvbm91c2x5LCBzbyB0cmFjayBhIG9uZS1zaG90IGhlbHBlclxuICAgICAgICAvLyB0aGF0IGNhbiBiZSBhd2FpdGVkIGZyb20gbXVsdGlwbGUgYnJhbmNoZXMgd2l0aG91dCBkb3VibGUtd3JpdGluZy5cbiAgICAgICAgbGV0IGVuc3VyZVN0cmVhbUlucHV0UGVyc2lzdGVkO1xuICAgICAgICAvLyBTZXNzaW9ucyByZW1haW4gdXNhYmxlIGFsb25nc2lkZSBzZXJ2ZXItbWFuYWdlZCBjb252ZXJzYXRpb25zIChlLmcuLCBPcGVuQUlDb252ZXJzYXRpb25zU2Vzc2lvbilcbiAgICAgICAgLy8gc28gY2FsbGVycyBjYW4gcmV1c2UgY2FsbGJhY2tzLCByZXN1bWUtZnJvbS1zdGF0ZSBsb2dpYywgYW5kIG90aGVyIGhlbHBlcnMgd2l0aG91dCBkdXBsaWNhdGluZ1xuICAgICAgICAvLyByZW1vdGUgaGlzdG9yeSwgc28gcGVyc2lzdGVuY2UgaXMgZ2F0ZWQgb24gc2VydmVyTWFuYWdlc0NvbnZlcnNhdGlvbi5cbiAgICAgICAgaWYgKHNlc3Npb24gJiYgIXNlcnZlck1hbmFnZXNDb252ZXJzYXRpb24pIHtcbiAgICAgICAgICAgIGxldCBwZXJzaXN0ZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIGVuc3VyZVN0cmVhbUlucHV0UGVyc2lzdGVkID0gYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChwZXJzaXN0ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCBpdGVtc1RvUGVyc2lzdCA9IHJlc29sdmVTZXNzaW9uSXRlbXNGb3JQZXJzaXN0ZW5jZSgpO1xuICAgICAgICAgICAgICAgIGlmICghaXRlbXNUb1BlcnNpc3QgfHwgaXRlbXNUb1BlcnNpc3QubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcGVyc2lzdGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBhd2FpdCBzYXZlU3RyZWFtSW5wdXRUb1Nlc3Npb24oc2Vzc2lvbiwgaXRlbXNUb1BlcnNpc3QpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBleGVjdXRlUnVuID0gYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgaWYgKGVmZmVjdGl2ZU9wdGlvbnMuc3RyZWFtKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgc3RyZWFtUmVzdWx0ID0gYXdhaXQgdGhpcy4jcnVuSW5kaXZpZHVhbFN0cmVhbShhZ2VudCwgcHJlcGFyZWRJbnB1dCwgZWZmZWN0aXZlT3B0aW9ucywgZW5zdXJlU3RyZWFtSW5wdXRQZXJzaXN0ZWQsIHJlY29yZFNlc3Npb25JdGVtc0ZvclBlcnNpc3RlbmNlKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gc3RyZWFtUmVzdWx0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgcnVuUmVzdWx0ID0gYXdhaXQgdGhpcy4jcnVuSW5kaXZpZHVhbE5vblN0cmVhbShhZ2VudCwgcHJlcGFyZWRJbnB1dCwgZWZmZWN0aXZlT3B0aW9ucywgcmVjb3JkU2Vzc2lvbkl0ZW1zRm9yUGVyc2lzdGVuY2UpO1xuICAgICAgICAgICAgLy8gU2VlIG5vdGUgYWJvdmU6IGFsbG93IHNlc3Npb25zIHRvIHJ1biBmb3IgY2FsbGJhY2tzL3N0YXRlIGJ1dCBza2lwIHdyaXRlcyB3aGVuIHRoZSBzZXJ2ZXJcbiAgICAgICAgICAgIC8vIGlzIHRoZSBzb3VyY2Ugb2YgdHJ1dGggZm9yIHRyYW5zY3JpcHQgaGlzdG9yeS5cbiAgICAgICAgICAgIGlmIChzZXNzaW9uICYmICFzZXJ2ZXJNYW5hZ2VzQ29udmVyc2F0aW9uKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgc2F2ZVRvU2Vzc2lvbihzZXNzaW9uLCByZXNvbHZlU2Vzc2lvbkl0ZW1zRm9yUGVyc2lzdGVuY2UoKSwgcnVuUmVzdWx0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBydW5SZXN1bHQ7XG4gICAgICAgIH07XG4gICAgICAgIGlmIChwcmVwYXJlZElucHV0IGluc3RhbmNlb2YgUnVuU3RhdGUgJiYgcHJlcGFyZWRJbnB1dC5fdHJhY2UpIHtcbiAgICAgICAgICAgIHJldHVybiB3aXRoVHJhY2UocHJlcGFyZWRJbnB1dC5fdHJhY2UsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAocHJlcGFyZWRJbnB1dC5fY3VycmVudEFnZW50U3Bhbikge1xuICAgICAgICAgICAgICAgICAgICBzZXRDdXJyZW50U3BhbihwcmVwYXJlZElucHV0Ll9jdXJyZW50QWdlbnRTcGFuKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIGV4ZWN1dGVSdW4oKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBnZXRPckNyZWF0ZVRyYWNlKGFzeW5jICgpID0+IGV4ZWN1dGVSdW4oKSwge1xuICAgICAgICAgICAgdHJhY2VJZDogdGhpcy5jb25maWcudHJhY2VJZCxcbiAgICAgICAgICAgIG5hbWU6IHRoaXMuY29uZmlnLndvcmtmbG93TmFtZSxcbiAgICAgICAgICAgIGdyb3VwSWQ6IHRoaXMuY29uZmlnLmdyb3VwSWQsXG4gICAgICAgICAgICBtZXRhZGF0YTogdGhpcy5jb25maWcudHJhY2VNZXRhZGF0YSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgLy8gIEludGVybmFsc1xuICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgaW5wdXRHdWFyZHJhaWxEZWZzO1xuICAgIG91dHB1dEd1YXJkcmFpbERlZnM7XG4gICAgI2dldElucHV0R3VhcmRyYWlsRGVmaW5pdGlvbnMoc3RhdGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaW5wdXRHdWFyZHJhaWxEZWZzLmNvbmNhdChzdGF0ZS5fY3VycmVudEFnZW50LmlucHV0R3VhcmRyYWlscy5tYXAoZGVmaW5lSW5wdXRHdWFyZHJhaWwpKTtcbiAgICB9XG4gICAgI3NwbGl0SW5wdXRHdWFyZHJhaWxzKHN0YXRlKSB7XG4gICAgICAgIGNvbnN0IGd1YXJkcmFpbHMgPSB0aGlzLiNnZXRJbnB1dEd1YXJkcmFpbERlZmluaXRpb25zKHN0YXRlKTtcbiAgICAgICAgY29uc3QgYmxvY2tpbmcgPSBbXTtcbiAgICAgICAgY29uc3QgcGFyYWxsZWwgPSBbXTtcbiAgICAgICAgZm9yIChjb25zdCBndWFyZHJhaWwgb2YgZ3VhcmRyYWlscykge1xuICAgICAgICAgICAgaWYgKGd1YXJkcmFpbC5ydW5JblBhcmFsbGVsID09PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgIGJsb2NraW5nLnB1c2goZ3VhcmRyYWlsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHBhcmFsbGVsLnB1c2goZ3VhcmRyYWlsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4geyBibG9ja2luZywgcGFyYWxsZWwgfTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGludGVybmFsXG4gICAgICogUmVzb2x2ZXMgdGhlIGVmZmVjdGl2ZSBtb2RlbCBvbmNlIHNvIGJvdGggcnVuIGxvb3BzIG9iZXkgdGhlIHNhbWUgcHJlY2VkZW5jZSBydWxlcy5cbiAgICAgKi9cbiAgICBhc3luYyAjcmVzb2x2ZU1vZGVsRm9yQWdlbnQoYWdlbnQpIHtcbiAgICAgICAgY29uc3QgZXhwbGljdGx5TW9kZWxTZXQgPSAoYWdlbnQubW9kZWwgIT09IHVuZGVmaW5lZCAmJlxuICAgICAgICAgICAgYWdlbnQubW9kZWwgIT09IEFnZW50LkRFRkFVTFRfTU9ERUxfUExBQ0VIT0xERVIpIHx8XG4gICAgICAgICAgICAodGhpcy5jb25maWcubW9kZWwgIT09IHVuZGVmaW5lZCAmJlxuICAgICAgICAgICAgICAgIHRoaXMuY29uZmlnLm1vZGVsICE9PSBBZ2VudC5ERUZBVUxUX01PREVMX1BMQUNFSE9MREVSKTtcbiAgICAgICAgbGV0IHJlc29sdmVkTW9kZWwgPSBzZWxlY3RNb2RlbChhZ2VudC5tb2RlbCwgdGhpcy5jb25maWcubW9kZWwpO1xuICAgICAgICBpZiAodHlwZW9mIHJlc29sdmVkTW9kZWwgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICByZXNvbHZlZE1vZGVsID0gYXdhaXQgdGhpcy5jb25maWcubW9kZWxQcm92aWRlci5nZXRNb2RlbChyZXNvbHZlZE1vZGVsKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4geyBtb2RlbDogcmVzb2x2ZWRNb2RlbCwgZXhwbGljdGx5TW9kZWxTZXQgfTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgYXN5bmMgI3J1bkluZGl2aWR1YWxOb25TdHJlYW0oc3RhcnRpbmdBZ2VudCwgaW5wdXQsIG9wdGlvbnMsIFxuICAgIC8vIHNlc3Npb25JbnB1dFVwZGF0ZSBsZXRzIHRoZSBjYWxsZXIgYWRqdXN0IHF1ZXVlZCBzZXNzaW9uIGl0ZW1zIGFmdGVyIGZpbHRlcnMgcnVuIHNvIHdlXG4gICAgLy8gcGVyc2lzdCBleGFjdGx5IHdoYXQgd2Ugc2VuZCB0byB0aGUgbW9kZWwgKGUuZy4sIGFmdGVyIHJlZGFjdGlvbnMgb3IgdHJ1bmNhdGlvbikuXG4gICAgc2Vzc2lvbklucHV0VXBkYXRlKSB7XG4gICAgICAgIHJldHVybiB3aXRoTmV3U3BhbkNvbnRleHQoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgLy8gaWYgd2UgaGF2ZSBhIHNhdmVkIHN0YXRlIHdlIHVzZSB0aGF0IG9uZSwgb3RoZXJ3aXNlIHdlIGNyZWF0ZSBhIG5ldyBvbmVcbiAgICAgICAgICAgIGNvbnN0IGlzUmVzdW1lZFN0YXRlID0gaW5wdXQgaW5zdGFuY2VvZiBSdW5TdGF0ZTtcbiAgICAgICAgICAgIGNvbnN0IHN0YXRlID0gaXNSZXN1bWVkU3RhdGVcbiAgICAgICAgICAgICAgICA/IGlucHV0XG4gICAgICAgICAgICAgICAgOiBuZXcgUnVuU3RhdGUob3B0aW9ucy5jb250ZXh0IGluc3RhbmNlb2YgUnVuQ29udGV4dFxuICAgICAgICAgICAgICAgICAgICA/IG9wdGlvbnMuY29udGV4dFxuICAgICAgICAgICAgICAgICAgICA6IG5ldyBSdW5Db250ZXh0KG9wdGlvbnMuY29udGV4dCksIGlucHV0LCBzdGFydGluZ0FnZW50LCBvcHRpb25zLm1heFR1cm5zID8/IERFRkFVTFRfTUFYX1RVUk5TKTtcbiAgICAgICAgICAgIGNvbnN0IHNlcnZlckNvbnZlcnNhdGlvblRyYWNrZXIgPSBvcHRpb25zLmNvbnZlcnNhdGlvbklkIHx8IG9wdGlvbnMucHJldmlvdXNSZXNwb25zZUlkXG4gICAgICAgICAgICAgICAgPyBuZXcgU2VydmVyQ29udmVyc2F0aW9uVHJhY2tlcih7XG4gICAgICAgICAgICAgICAgICAgIGNvbnZlcnNhdGlvbklkOiBvcHRpb25zLmNvbnZlcnNhdGlvbklkLFxuICAgICAgICAgICAgICAgICAgICBwcmV2aW91c1Jlc3BvbnNlSWQ6IG9wdGlvbnMucHJldmlvdXNSZXNwb25zZUlkLFxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgICAgICAgICBpZiAoc2VydmVyQ29udmVyc2F0aW9uVHJhY2tlciAmJiBpc1Jlc3VtZWRTdGF0ZSkge1xuICAgICAgICAgICAgICAgIHNlcnZlckNvbnZlcnNhdGlvblRyYWNrZXIucHJpbWVGcm9tU3RhdGUoe1xuICAgICAgICAgICAgICAgICAgICBvcmlnaW5hbElucHV0OiBzdGF0ZS5fb3JpZ2luYWxJbnB1dCxcbiAgICAgICAgICAgICAgICAgICAgZ2VuZXJhdGVkSXRlbXM6IHN0YXRlLl9nZW5lcmF0ZWRJdGVtcyxcbiAgICAgICAgICAgICAgICAgICAgbW9kZWxSZXNwb25zZXM6IHN0YXRlLl9tb2RlbFJlc3BvbnNlcyxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCBjb250aW51aW5nSW50ZXJydXB0ZWRUdXJuID0gZmFsc2U7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHdoaWxlICh0cnVlKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGlmIHdlIGRvbid0IGhhdmUgYSBjdXJyZW50IHN0ZXAsIHdlIHRyZWF0IHRoaXMgYXMgYSBuZXcgcnVuXG4gICAgICAgICAgICAgICAgICAgIHN0YXRlLl9jdXJyZW50U3RlcCA9IHN0YXRlLl9jdXJyZW50U3RlcCA/PyB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnbmV4dF9zdGVwX3J1bl9hZ2FpbicsXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIGlmIChzdGF0ZS5fY3VycmVudFN0ZXAudHlwZSA9PT0gJ25leHRfc3RlcF9pbnRlcnJ1cHRpb24nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsb2dnZXIuZGVidWcoJ0NvbnRpbnVpbmcgZnJvbSBpbnRlcnJ1cHRpb24nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghc3RhdGUuX2xhc3RUdXJuUmVzcG9uc2UgfHwgIXN0YXRlLl9sYXN0UHJvY2Vzc2VkUmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVXNlckVycm9yKCdObyBtb2RlbCByZXNwb25zZSBmb3VuZCBpbiBwcmV2aW91cyBzdGF0ZScsIHN0YXRlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHR1cm5SZXN1bHQgPSBhd2FpdCByZXNvbHZlSW50ZXJydXB0ZWRUdXJuKHN0YXRlLl9jdXJyZW50QWdlbnQsIHN0YXRlLl9vcmlnaW5hbElucHV0LCBzdGF0ZS5fZ2VuZXJhdGVkSXRlbXMsIHN0YXRlLl9sYXN0VHVyblJlc3BvbnNlLCBzdGF0ZS5fbGFzdFByb2Nlc3NlZFJlc3BvbnNlLCB0aGlzLCBzdGF0ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZS5fdG9vbFVzZVRyYWNrZXIuYWRkVG9vbFVzZShzdGF0ZS5fY3VycmVudEFnZW50LCBzdGF0ZS5fbGFzdFByb2Nlc3NlZFJlc3BvbnNlLnRvb2xzVXNlZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZS5fb3JpZ2luYWxJbnB1dCA9IHR1cm5SZXN1bHQub3JpZ2luYWxJbnB1dDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlLl9nZW5lcmF0ZWRJdGVtcyA9IHR1cm5SZXN1bHQuZ2VuZXJhdGVkSXRlbXM7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBEb24ndCByZXNldCBjb3VudGVyIGhlcmUgLSByZXNvbHZlSW50ZXJydXB0ZWRUdXJuIGFscmVhZHkgYWRqdXN0ZWQgaXQgdmlhIHJld2luZCBsb2dpY1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGhlIGNvdW50ZXIgd2lsbCBiZSByZXNldCB3aGVuIF9jdXJyZW50VHVybiBpcyBpbmNyZW1lbnRlZCAoc3RhcnRpbmcgYSBuZXcgdHVybilcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0dXJuUmVzdWx0Lm5leHRTdGVwLnR5cGUgPT09ICduZXh0X3N0ZXBfaW50ZXJydXB0aW9uJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHdlIGFyZSBzdGlsbCBpbiBhbiBpbnRlcnJ1cHRpb24sIHNvIHdlIG5lZWQgdG8gYXZvaWQgYW4gaW5maW5pdGUgbG9vcFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlLl9jdXJyZW50U3RlcCA9IHR1cm5SZXN1bHQubmV4dFN0ZXA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBSdW5SZXN1bHQoc3RhdGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gSWYgY29udGludWluZyBmcm9tIGludGVycnVwdGlvbiB3aXRoIG5leHRfc3RlcF9ydW5fYWdhaW4sIHNldCBzdGVwIHRvIHVuZGVmaW5lZFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gc28gdGhlIGxvb3AgdHJlYXRzIGl0IGFzIGEgbmV3IHN0ZXAgd2l0aG91dCBpbmNyZW1lbnRpbmcgdGhlIHR1cm4uXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBUaGUgY291bnRlciBoYXMgYWxyZWFkeSBiZWVuIGFkanVzdGVkIGJ5IHJlc29sdmVJbnRlcnJ1cHRlZFR1cm4ncyByZXdpbmQgbG9naWMuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodHVyblJlc3VsdC5uZXh0U3RlcC50eXBlID09PSAnbmV4dF9zdGVwX3J1bl9hZ2FpbicpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51aW5nSW50ZXJydXB0ZWRUdXJuID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZS5fY3VycmVudFN0ZXAgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51aW5nSW50ZXJydXB0ZWRUdXJuID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZS5fY3VycmVudFN0ZXAgPSB0dXJuUmVzdWx0Lm5leHRTdGVwO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChzdGF0ZS5fY3VycmVudFN0ZXAudHlwZSA9PT0gJ25leHRfc3RlcF9ydW5fYWdhaW4nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBhcnRpZmFjdHMgPSBhd2FpdCBwcmVwYXJlQWdlbnRBcnRpZmFjdHMoc3RhdGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaXNSZXN1bWluZ0Zyb21JbnRlcnJ1cHRpb24gPSBpc1Jlc3VtZWRTdGF0ZSAmJiBjb250aW51aW5nSW50ZXJydXB0ZWRUdXJuO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWluZ0ludGVycnVwdGVkVHVybiA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gRG8gbm90IGFkdmFuY2UgdGhlIHR1cm4gd2hlbiByZXN1bWluZyBmcm9tIGFuIGludGVycnVwdGlvbjsgdGhlIG5leHQgbW9kZWwgY2FsbCBpc1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gc3RpbGwgcGFydCBvZiB0aGUgc2FtZSBsb2dpY2FsIHR1cm4uXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWlzUmVzdW1pbmdGcm9tSW50ZXJydXB0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUuX2N1cnJlbnRUdXJuKys7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUuX2N1cnJlbnRUdXJuUGVyc2lzdGVkSXRlbUNvdW50ID0gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzdGF0ZS5fY3VycmVudFR1cm4gPiBzdGF0ZS5fbWF4VHVybnMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZS5fY3VycmVudEFnZW50U3Bhbj8uc2V0RXJyb3Ioe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnTWF4IHR1cm5zIGV4Y2VlZGVkJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogeyBtYXhfdHVybnM6IHN0YXRlLl9tYXhUdXJucyB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBNYXhUdXJuc0V4Y2VlZGVkRXJyb3IoYE1heCB0dXJucyAoJHtzdGF0ZS5fbWF4VHVybnN9KSBleGNlZWRlZGAsIHN0YXRlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZyhgUnVubmluZyBhZ2VudCAke3N0YXRlLl9jdXJyZW50QWdlbnQubmFtZX0gKHR1cm4gJHtzdGF0ZS5fY3VycmVudFR1cm59KWApO1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHBhcmFsbGVsR3VhcmRyYWlsUHJvbWlzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIE9ubHkgcnVuIGlucHV0IGd1YXJkcmFpbHMgb24gdGhlIGZpcnN0IHR1cm4gb2YgYSBuZXcgcnVuLlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHN0YXRlLl9jdXJyZW50VHVybiA9PT0gMSAmJiAhaXNSZXN1bWluZ0Zyb21JbnRlcnJ1cHRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBndWFyZHJhaWxzID0gdGhpcy4jc3BsaXRJbnB1dEd1YXJkcmFpbHMoc3RhdGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChndWFyZHJhaWxzLmJsb2NraW5nLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy4jcnVuSW5wdXRHdWFyZHJhaWxzKHN0YXRlLCBndWFyZHJhaWxzLmJsb2NraW5nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGd1YXJkcmFpbHMucGFyYWxsZWwubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJhbGxlbEd1YXJkcmFpbFByb21pc2UgPSB0aGlzLiNydW5JbnB1dEd1YXJkcmFpbHMoc3RhdGUsIGd1YXJkcmFpbHMucGFyYWxsZWwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJhbGxlbEd1YXJkcmFpbFByb21pc2UuY2F0Y2goKCkgPT4geyB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0dXJuSW5wdXQgPSBzZXJ2ZXJDb252ZXJzYXRpb25UcmFja2VyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBzZXJ2ZXJDb252ZXJzYXRpb25UcmFja2VyLnByZXBhcmVJbnB1dChzdGF0ZS5fb3JpZ2luYWxJbnB1dCwgc3RhdGUuX2dlbmVyYXRlZEl0ZW1zKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogZ2V0VHVybklucHV0KHN0YXRlLl9vcmlnaW5hbElucHV0LCBzdGF0ZS5fZ2VuZXJhdGVkSXRlbXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHN0YXRlLl9ub0FjdGl2ZUFnZW50UnVuKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUuX2N1cnJlbnRBZ2VudC5lbWl0KCdhZ2VudF9zdGFydCcsIHN0YXRlLl9jb250ZXh0LCBzdGF0ZS5fY3VycmVudEFnZW50LCB0dXJuSW5wdXQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgnYWdlbnRfc3RhcnQnLCBzdGF0ZS5fY29udGV4dCwgc3RhdGUuX2N1cnJlbnRBZ2VudCwgdHVybklucHV0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHByZXBhcmVkQ2FsbCA9IGF3YWl0IHRoaXMuI3ByZXBhcmVNb2RlbENhbGwoc3RhdGUsIG9wdGlvbnMsIGFydGlmYWN0cywgdHVybklucHV0LCBzZXJ2ZXJDb252ZXJzYXRpb25UcmFja2VyLCBzZXNzaW9uSW5wdXRVcGRhdGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUuX2xhc3RUdXJuUmVzcG9uc2UgPSBhd2FpdCBwcmVwYXJlZENhbGwubW9kZWwuZ2V0UmVzcG9uc2Uoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN5c3RlbUluc3RydWN0aW9uczogcHJlcGFyZWRDYWxsLm1vZGVsSW5wdXQuaW5zdHJ1Y3Rpb25zLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb21wdDogcHJlcGFyZWRDYWxsLnByb21wdCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBFeHBsaWNpdCBhZ2VudC9ydW4gY29uZmlnIG1vZGVscyBzaG91bGQgdGFrZSBwcmVjZWRlbmNlIG92ZXIgcHJvbXB0IGRlZmF1bHRzLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLihwcmVwYXJlZENhbGwuZXhwbGljdGx5TW9kZWxTZXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyB7IG92ZXJyaWRlUHJvbXB0TW9kZWw6IHRydWUgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IHt9KSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnB1dDogcHJlcGFyZWRDYWxsLm1vZGVsSW5wdXQuaW5wdXQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJldmlvdXNSZXNwb25zZUlkOiBwcmVwYXJlZENhbGwucHJldmlvdXNSZXNwb25zZUlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnZlcnNhdGlvbklkOiBwcmVwYXJlZENhbGwuY29udmVyc2F0aW9uSWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbW9kZWxTZXR0aW5nczogcHJlcGFyZWRDYWxsLm1vZGVsU2V0dGluZ3MsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9vbHM6IHByZXBhcmVkQ2FsbC5zZXJpYWxpemVkVG9vbHMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9vbHNFeHBsaWNpdGx5UHJvdmlkZWQ6IHByZXBhcmVkQ2FsbC50b29sc0V4cGxpY2l0bHlQcm92aWRlZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvdXRwdXRUeXBlOiBjb252ZXJ0QWdlbnRPdXRwdXRUeXBlVG9TZXJpYWxpemFibGUoc3RhdGUuX2N1cnJlbnRBZ2VudC5vdXRwdXRUeXBlKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYW5kb2ZmczogcHJlcGFyZWRDYWxsLnNlcmlhbGl6ZWRIYW5kb2ZmcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cmFjaW5nOiBnZXRUcmFjaW5nKHRoaXMuY29uZmlnLnRyYWNpbmdEaXNhYmxlZCwgdGhpcy5jb25maWcudHJhY2VJbmNsdWRlU2Vuc2l0aXZlRGF0YSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2lnbmFsOiBvcHRpb25zLnNpZ25hbCxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUuX21vZGVsUmVzcG9uc2VzLnB1c2goc3RhdGUuX2xhc3RUdXJuUmVzcG9uc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUuX2NvbnRleHQudXNhZ2UuYWRkKHN0YXRlLl9sYXN0VHVyblJlc3BvbnNlLnVzYWdlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlLl9ub0FjdGl2ZUFnZW50UnVuID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBBZnRlciBlYWNoIHR1cm4gcmVjb3JkIHRoZSBpdGVtcyBlY2hvZWQgYnkgdGhlIHNlcnZlciBzbyBmdXR1cmUgcmVxdWVzdHMgb25seVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gaW5jbHVkZSB0aGUgaW5jcmVtZW50YWwgaW5wdXRzIHRoYXQgaGF2ZSBub3QgeWV0IGJlZW4gYWNrbm93bGVkZ2VkLlxuICAgICAgICAgICAgICAgICAgICAgICAgc2VydmVyQ29udmVyc2F0aW9uVHJhY2tlcj8udHJhY2tTZXJ2ZXJJdGVtcyhzdGF0ZS5fbGFzdFR1cm5SZXNwb25zZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBwcm9jZXNzZWRSZXNwb25zZSA9IHByb2Nlc3NNb2RlbFJlc3BvbnNlKHN0YXRlLl9sYXN0VHVyblJlc3BvbnNlLCBzdGF0ZS5fY3VycmVudEFnZW50LCBwcmVwYXJlZENhbGwudG9vbHMsIHByZXBhcmVkQ2FsbC5oYW5kb2Zmcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZS5fbGFzdFByb2Nlc3NlZFJlc3BvbnNlID0gcHJvY2Vzc2VkUmVzcG9uc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0dXJuUmVzdWx0ID0gYXdhaXQgcmVzb2x2ZVR1cm5BZnRlck1vZGVsUmVzcG9uc2Uoc3RhdGUuX2N1cnJlbnRBZ2VudCwgc3RhdGUuX29yaWdpbmFsSW5wdXQsIHN0YXRlLl9nZW5lcmF0ZWRJdGVtcywgc3RhdGUuX2xhc3RUdXJuUmVzcG9uc2UsIHN0YXRlLl9sYXN0UHJvY2Vzc2VkUmVzcG9uc2UsIHRoaXMsIHN0YXRlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlLl90b29sVXNlVHJhY2tlci5hZGRUb29sVXNlKHN0YXRlLl9jdXJyZW50QWdlbnQsIHN0YXRlLl9sYXN0UHJvY2Vzc2VkUmVzcG9uc2UudG9vbHNVc2VkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlLl9vcmlnaW5hbElucHV0ID0gdHVyblJlc3VsdC5vcmlnaW5hbElucHV0O1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUuX2dlbmVyYXRlZEl0ZW1zID0gdHVyblJlc3VsdC5nZW5lcmF0ZWRJdGVtcztcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0dXJuUmVzdWx0Lm5leHRTdGVwLnR5cGUgPT09ICduZXh0X3N0ZXBfcnVuX2FnYWluJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlLl9jdXJyZW50VHVyblBlcnNpc3RlZEl0ZW1Db3VudCA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZS5fY3VycmVudFN0ZXAgPSB0dXJuUmVzdWx0Lm5leHRTdGVwO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBhcmFsbGVsR3VhcmRyYWlsUHJvbWlzZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHBhcmFsbGVsR3VhcmRyYWlsUHJvbWlzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoc3RhdGUuX2N1cnJlbnRTdGVwICYmXG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZS5fY3VycmVudFN0ZXAudHlwZSA9PT0gJ25leHRfc3RlcF9maW5hbF9vdXRwdXQnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLiNydW5PdXRwdXRHdWFyZHJhaWxzKHN0YXRlLCBzdGF0ZS5fY3VycmVudFN0ZXAub3V0cHV0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgnYWdlbnRfZW5kJywgc3RhdGUuX2NvbnRleHQsIHN0YXRlLl9jdXJyZW50QWdlbnQsIHN0YXRlLl9jdXJyZW50U3RlcC5vdXRwdXQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUuX2N1cnJlbnRBZ2VudC5lbWl0KCdhZ2VudF9lbmQnLCBzdGF0ZS5fY29udGV4dCwgc3RhdGUuX2N1cnJlbnRTdGVwLm91dHB1dCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFJ1blJlc3VsdChzdGF0ZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoc3RhdGUuX2N1cnJlbnRTdGVwICYmXG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZS5fY3VycmVudFN0ZXAudHlwZSA9PT0gJ25leHRfc3RlcF9oYW5kb2ZmJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUuX2N1cnJlbnRBZ2VudCA9IHN0YXRlLl9jdXJyZW50U3RlcC5uZXdBZ2VudDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzdGF0ZS5fY3VycmVudEFnZW50U3Bhbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlLl9jdXJyZW50QWdlbnRTcGFuLmVuZCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc2V0Q3VycmVudFNwYW4oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZS5fY3VycmVudEFnZW50U3BhbiA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlLl9ub0FjdGl2ZUFnZW50UnVuID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHdlJ3ZlIHByb2Nlc3NlZCB0aGUgaGFuZG9mZiwgc28gd2UgbmVlZCB0byBydW4gdGhlIGxvb3AgYWdhaW5cbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlLl9jdXJyZW50U3RlcCA9IHsgdHlwZTogJ25leHRfc3RlcF9ydW5fYWdhaW4nIH07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoc3RhdGUuX2N1cnJlbnRTdGVwICYmXG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZS5fY3VycmVudFN0ZXAudHlwZSA9PT0gJ25leHRfc3RlcF9pbnRlcnJ1cHRpb24nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBpbnRlcnJ1cHRlZC4gRG9uJ3QgcnVuIGFueSBndWFyZHJhaWxzXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFJ1blJlc3VsdChzdGF0ZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsb2dnZXIuZGVidWcoJ1J1bm5pbmcgbmV4dCBsb29wJyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgaWYgKHN0YXRlLl9jdXJyZW50QWdlbnRTcGFuKSB7XG4gICAgICAgICAgICAgICAgICAgIHN0YXRlLl9jdXJyZW50QWdlbnRTcGFuLnNldEVycm9yKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdFcnJvciBpbiBhZ2VudCBydW4nLFxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogeyBlcnJvcjogU3RyaW5nKGVycikgfSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRocm93IGVycjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZpbmFsbHkge1xuICAgICAgICAgICAgICAgIGlmIChzdGF0ZS5fY3VycmVudFN0ZXA/LnR5cGUgIT09ICduZXh0X3N0ZXBfaW50ZXJydXB0aW9uJykge1xuICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgZGlzcG9zZVJlc29sdmVkQ29tcHV0ZXJzKHsgcnVuQ29udGV4dDogc3RhdGUuX2NvbnRleHQgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsb2dnZXIud2FybihgRmFpbGVkIHRvIGRpc3Bvc2UgY29tcHV0ZXJzIGFmdGVyIHJ1bjogJHtlcnJvcn1gKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoc3RhdGUuX2N1cnJlbnRBZ2VudFNwYW4pIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHN0YXRlLl9jdXJyZW50U3RlcD8udHlwZSAhPT0gJ25leHRfc3RlcF9pbnRlcnJ1cHRpb24nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBkb24ndCBlbmQgdGhlIHNwYW4gaWYgdGhlIHJ1biB3YXMgaW50ZXJydXB0ZWRcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlLl9jdXJyZW50QWdlbnRTcGFuLmVuZCgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJlc2V0Q3VycmVudFNwYW4oKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBhc3luYyAjcnVuU3RyZWFtTG9vcChyZXN1bHQsIG9wdGlvbnMsIGlzUmVzdW1lZFN0YXRlLCBlbnN1cmVTdHJlYW1JbnB1dFBlcnNpc3RlZCwgc2Vzc2lvbklucHV0VXBkYXRlKSB7XG4gICAgICAgIGNvbnN0IHNlcnZlck1hbmFnZXNDb252ZXJzYXRpb24gPSBCb29sZWFuKG9wdGlvbnMuY29udmVyc2F0aW9uSWQpIHx8IEJvb2xlYW4ob3B0aW9ucy5wcmV2aW91c1Jlc3BvbnNlSWQpO1xuICAgICAgICBjb25zdCBzZXJ2ZXJDb252ZXJzYXRpb25UcmFja2VyID0gc2VydmVyTWFuYWdlc0NvbnZlcnNhdGlvblxuICAgICAgICAgICAgPyBuZXcgU2VydmVyQ29udmVyc2F0aW9uVHJhY2tlcih7XG4gICAgICAgICAgICAgICAgY29udmVyc2F0aW9uSWQ6IG9wdGlvbnMuY29udmVyc2F0aW9uSWQsXG4gICAgICAgICAgICAgICAgcHJldmlvdXNSZXNwb25zZUlkOiBvcHRpb25zLnByZXZpb3VzUmVzcG9uc2VJZCxcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICA6IHVuZGVmaW5lZDtcbiAgICAgICAgbGV0IGhhbmRlZElucHV0VG9Nb2RlbCA9IGZhbHNlO1xuICAgICAgICBsZXQgc3RyZWFtSW5wdXRQZXJzaXN0ZWQgPSBmYWxzZTtcbiAgICAgICAgY29uc3QgcGVyc2lzdFN0cmVhbUlucHV0SWZOZWVkZWQgPSBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBpZiAoc3RyZWFtSW5wdXRQZXJzaXN0ZWQgfHwgIWVuc3VyZVN0cmVhbUlucHV0UGVyc2lzdGVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gQm90aCBzdWNjZXNzIGFuZCBlcnJvciBwYXRocyBjYWxsIHRoaXMgaGVscGVyLCBzbyBndWFyZCBhZ2FpbnN0IG11bHRpcGxlIHdyaXRlcy5cbiAgICAgICAgICAgIGF3YWl0IGVuc3VyZVN0cmVhbUlucHV0UGVyc2lzdGVkKCk7XG4gICAgICAgICAgICBzdHJlYW1JbnB1dFBlcnNpc3RlZCA9IHRydWU7XG4gICAgICAgIH07XG4gICAgICAgIGlmIChzZXJ2ZXJDb252ZXJzYXRpb25UcmFja2VyICYmIGlzUmVzdW1lZFN0YXRlKSB7XG4gICAgICAgICAgICBzZXJ2ZXJDb252ZXJzYXRpb25UcmFja2VyLnByaW1lRnJvbVN0YXRlKHtcbiAgICAgICAgICAgICAgICBvcmlnaW5hbElucHV0OiByZXN1bHQuc3RhdGUuX29yaWdpbmFsSW5wdXQsXG4gICAgICAgICAgICAgICAgZ2VuZXJhdGVkSXRlbXM6IHJlc3VsdC5zdGF0ZS5fZ2VuZXJhdGVkSXRlbXMsXG4gICAgICAgICAgICAgICAgbW9kZWxSZXNwb25zZXM6IHJlc3VsdC5zdGF0ZS5fbW9kZWxSZXNwb25zZXMsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgY29udGludWluZ0ludGVycnVwdGVkVHVybiA9IGZhbHNlO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgd2hpbGUgKHRydWUpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBjdXJyZW50QWdlbnQgPSByZXN1bHQuc3RhdGUuX2N1cnJlbnRBZ2VudDtcbiAgICAgICAgICAgICAgICByZXN1bHQuc3RhdGUuX2N1cnJlbnRTdGVwID0gcmVzdWx0LnN0YXRlLl9jdXJyZW50U3RlcCA/PyB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICduZXh0X3N0ZXBfcnVuX2FnYWluJyxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGlmIChyZXN1bHQuc3RhdGUuX2N1cnJlbnRTdGVwLnR5cGUgPT09ICduZXh0X3N0ZXBfaW50ZXJydXB0aW9uJykge1xuICAgICAgICAgICAgICAgICAgICBsb2dnZXIuZGVidWcoJ0NvbnRpbnVpbmcgZnJvbSBpbnRlcnJ1cHRpb24nKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFyZXN1bHQuc3RhdGUuX2xhc3RUdXJuUmVzcG9uc2UgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICFyZXN1bHQuc3RhdGUuX2xhc3RQcm9jZXNzZWRSZXNwb25zZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IFVzZXJFcnJvcignTm8gbW9kZWwgcmVzcG9uc2UgZm91bmQgaW4gcHJldmlvdXMgc3RhdGUnLCByZXN1bHQuc3RhdGUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHR1cm5SZXN1bHQgPSBhd2FpdCByZXNvbHZlSW50ZXJydXB0ZWRUdXJuKHJlc3VsdC5zdGF0ZS5fY3VycmVudEFnZW50LCByZXN1bHQuc3RhdGUuX29yaWdpbmFsSW5wdXQsIHJlc3VsdC5zdGF0ZS5fZ2VuZXJhdGVkSXRlbXMsIHJlc3VsdC5zdGF0ZS5fbGFzdFR1cm5SZXNwb25zZSwgcmVzdWx0LnN0YXRlLl9sYXN0UHJvY2Vzc2VkUmVzcG9uc2UsIHRoaXMsIHJlc3VsdC5zdGF0ZSk7XG4gICAgICAgICAgICAgICAgICAgIGFkZFN0ZXBUb1J1blJlc3VsdChyZXN1bHQsIHR1cm5SZXN1bHQpO1xuICAgICAgICAgICAgICAgICAgICByZXN1bHQuc3RhdGUuX3Rvb2xVc2VUcmFja2VyLmFkZFRvb2xVc2UocmVzdWx0LnN0YXRlLl9jdXJyZW50QWdlbnQsIHJlc3VsdC5zdGF0ZS5fbGFzdFByb2Nlc3NlZFJlc3BvbnNlLnRvb2xzVXNlZCk7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdC5zdGF0ZS5fb3JpZ2luYWxJbnB1dCA9IHR1cm5SZXN1bHQub3JpZ2luYWxJbnB1dDtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnN0YXRlLl9nZW5lcmF0ZWRJdGVtcyA9IHR1cm5SZXN1bHQuZ2VuZXJhdGVkSXRlbXM7XG4gICAgICAgICAgICAgICAgICAgIC8vIERvbid0IHJlc2V0IGNvdW50ZXIgaGVyZSAtIHJlc29sdmVJbnRlcnJ1cHRlZFR1cm4gYWxyZWFkeSBhZGp1c3RlZCBpdCB2aWEgcmV3aW5kIGxvZ2ljXG4gICAgICAgICAgICAgICAgICAgIC8vIFRoZSBjb3VudGVyIHdpbGwgYmUgcmVzZXQgd2hlbiBfY3VycmVudFR1cm4gaXMgaW5jcmVtZW50ZWQgKHN0YXJ0aW5nIGEgbmV3IHR1cm4pXG4gICAgICAgICAgICAgICAgICAgIGlmICh0dXJuUmVzdWx0Lm5leHRTdGVwLnR5cGUgPT09ICduZXh0X3N0ZXBfaW50ZXJydXB0aW9uJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gd2UgYXJlIHN0aWxsIGluIGFuIGludGVycnVwdGlvbiwgc28gd2UgbmVlZCB0byBhdm9pZCBhbiBpbmZpbml0ZSBsb29wXG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQuc3RhdGUuX2N1cnJlbnRTdGVwID0gdHVyblJlc3VsdC5uZXh0U3RlcDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAvLyBJZiBjb250aW51aW5nIGZyb20gaW50ZXJydXB0aW9uIHdpdGggbmV4dF9zdGVwX3J1bl9hZ2Fpbiwgc2V0IHN0ZXAgdG8gdW5kZWZpbmVkXG4gICAgICAgICAgICAgICAgICAgIC8vIHNvIHRoZSBsb29wIHRyZWF0cyBpdCBhcyBhIG5ldyBzdGVwIHdpdGhvdXQgaW5jcmVtZW50aW5nIHRoZSB0dXJuLlxuICAgICAgICAgICAgICAgICAgICAvLyBUaGUgY291bnRlciBoYXMgYWxyZWFkeSBiZWVuIGFkanVzdGVkIGJ5IHJlc29sdmVJbnRlcnJ1cHRlZFR1cm4ncyByZXdpbmQgbG9naWMuXG4gICAgICAgICAgICAgICAgICAgIGlmICh0dXJuUmVzdWx0Lm5leHRTdGVwLnR5cGUgPT09ICduZXh0X3N0ZXBfcnVuX2FnYWluJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWluZ0ludGVycnVwdGVkVHVybiA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQuc3RhdGUuX2N1cnJlbnRTdGVwID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY29udGludWluZ0ludGVycnVwdGVkVHVybiA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICByZXN1bHQuc3RhdGUuX2N1cnJlbnRTdGVwID0gdHVyblJlc3VsdC5uZXh0U3RlcDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5zdGF0ZS5fY3VycmVudFN0ZXAudHlwZSA9PT0gJ25leHRfc3RlcF9ydW5fYWdhaW4nKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGFydGlmYWN0cyA9IGF3YWl0IHByZXBhcmVBZ2VudEFydGlmYWN0cyhyZXN1bHQuc3RhdGUpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBpc1Jlc3VtaW5nRnJvbUludGVycnVwdGlvbiA9IGlzUmVzdW1lZFN0YXRlICYmIGNvbnRpbnVpbmdJbnRlcnJ1cHRlZFR1cm47XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVpbmdJbnRlcnJ1cHRlZFR1cm4gPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgLy8gRG8gbm90IGFkdmFuY2UgdGhlIHR1cm4gd2hlbiByZXN1bWluZyBmcm9tIGFuIGludGVycnVwdGlvbjsgdGhlIG5leHQgbW9kZWwgY2FsbCBpc1xuICAgICAgICAgICAgICAgICAgICAvLyBzdGlsbCBwYXJ0IG9mIHRoZSBzYW1lIGxvZ2ljYWwgdHVybi5cbiAgICAgICAgICAgICAgICAgICAgaWYgKCFpc1Jlc3VtaW5nRnJvbUludGVycnVwdGlvbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnN0YXRlLl9jdXJyZW50VHVybisrO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnN0YXRlLl9jdXJyZW50VHVyblBlcnNpc3RlZEl0ZW1Db3VudCA9IDA7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5zdGF0ZS5fY3VycmVudFR1cm4gPiByZXN1bHQuc3RhdGUuX21heFR1cm5zKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQuc3RhdGUuX2N1cnJlbnRBZ2VudFNwYW4/LnNldEVycm9yKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnTWF4IHR1cm5zIGV4Y2VlZGVkJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiB7IG1heF90dXJuczogcmVzdWx0LnN0YXRlLl9tYXhUdXJucyB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTWF4VHVybnNFeGNlZWRlZEVycm9yKGBNYXggdHVybnMgKCR7cmVzdWx0LnN0YXRlLl9tYXhUdXJuc30pIGV4Y2VlZGVkYCwgcmVzdWx0LnN0YXRlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBsb2dnZXIuZGVidWcoYFJ1bm5pbmcgYWdlbnQgJHtjdXJyZW50QWdlbnQubmFtZX0gKHR1cm4gJHtyZXN1bHQuc3RhdGUuX2N1cnJlbnRUdXJufSlgKTtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGd1YXJkcmFpbEVycm9yO1xuICAgICAgICAgICAgICAgICAgICBsZXQgcGFyYWxsZWxHdWFyZHJhaWxQcm9taXNlO1xuICAgICAgICAgICAgICAgICAgICAvLyBPbmx5IHJ1biBpbnB1dCBndWFyZHJhaWxzIG9uIHRoZSBmaXJzdCB0dXJuIG9mIGEgbmV3IHJ1bi5cbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5zdGF0ZS5fY3VycmVudFR1cm4gPT09IDEgJiYgIWlzUmVzdW1pbmdGcm9tSW50ZXJydXB0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBndWFyZHJhaWxzID0gdGhpcy4jc3BsaXRJbnB1dEd1YXJkcmFpbHMocmVzdWx0LnN0YXRlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChndWFyZHJhaWxzLmJsb2NraW5nLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLiNydW5JbnB1dEd1YXJkcmFpbHMocmVzdWx0LnN0YXRlLCBndWFyZHJhaWxzLmJsb2NraW5nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChndWFyZHJhaWxzLnBhcmFsbGVsLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBwcm9taXNlID0gdGhpcy4jcnVuSW5wdXRHdWFyZHJhaWxzKHJlc3VsdC5zdGF0ZSwgZ3VhcmRyYWlscy5wYXJhbGxlbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyYWxsZWxHdWFyZHJhaWxQcm9taXNlID0gcHJvbWlzZS5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGd1YXJkcmFpbEVycm9yID0gZXJyO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gW107XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdHVybklucHV0ID0gc2VydmVyQ29udmVyc2F0aW9uVHJhY2tlclxuICAgICAgICAgICAgICAgICAgICAgICAgPyBzZXJ2ZXJDb252ZXJzYXRpb25UcmFja2VyLnByZXBhcmVJbnB1dChyZXN1bHQuaW5wdXQsIHJlc3VsdC5uZXdJdGVtcylcbiAgICAgICAgICAgICAgICAgICAgICAgIDogZ2V0VHVybklucHV0KHJlc3VsdC5pbnB1dCwgcmVzdWx0Lm5ld0l0ZW1zKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5zdGF0ZS5fbm9BY3RpdmVBZ2VudFJ1bikge1xuICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudEFnZW50LmVtaXQoJ2FnZW50X3N0YXJ0JywgcmVzdWx0LnN0YXRlLl9jb250ZXh0LCBjdXJyZW50QWdlbnQsIHR1cm5JbnB1dCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ2FnZW50X3N0YXJ0JywgcmVzdWx0LnN0YXRlLl9jb250ZXh0LCBjdXJyZW50QWdlbnQsIHR1cm5JbnB1dCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgbGV0IGZpbmFsUmVzcG9uc2UgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHByZXBhcmVkQ2FsbCA9IGF3YWl0IHRoaXMuI3ByZXBhcmVNb2RlbENhbGwocmVzdWx0LnN0YXRlLCBvcHRpb25zLCBhcnRpZmFjdHMsIHR1cm5JbnB1dCwgc2VydmVyQ29udmVyc2F0aW9uVHJhY2tlciwgc2Vzc2lvbklucHV0VXBkYXRlKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGd1YXJkcmFpbEVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBndWFyZHJhaWxFcnJvcjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBoYW5kZWRJbnB1dFRvTW9kZWwgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCBwZXJzaXN0U3RyZWFtSW5wdXRJZk5lZWRlZCgpO1xuICAgICAgICAgICAgICAgICAgICBmb3IgYXdhaXQgKGNvbnN0IGV2ZW50IG9mIHByZXBhcmVkQ2FsbC5tb2RlbC5nZXRTdHJlYW1lZFJlc3BvbnNlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN5c3RlbUluc3RydWN0aW9uczogcHJlcGFyZWRDYWxsLm1vZGVsSW5wdXQuaW5zdHJ1Y3Rpb25zLFxuICAgICAgICAgICAgICAgICAgICAgICAgcHJvbXB0OiBwcmVwYXJlZENhbGwucHJvbXB0LFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gU3RyZWFtaW5nIHJlcXVlc3RzIHNob3VsZCBhbHNvIGhvbm9yIGV4cGxpY2l0bHkgY2hvc2VuIG1vZGVscy5cbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLihwcmVwYXJlZENhbGwuZXhwbGljdGx5TW9kZWxTZXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IHsgb3ZlcnJpZGVQcm9tcHRNb2RlbDogdHJ1ZSB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgOiB7fSksXG4gICAgICAgICAgICAgICAgICAgICAgICBpbnB1dDogcHJlcGFyZWRDYWxsLm1vZGVsSW5wdXQuaW5wdXQsXG4gICAgICAgICAgICAgICAgICAgICAgICBwcmV2aW91c1Jlc3BvbnNlSWQ6IHByZXBhcmVkQ2FsbC5wcmV2aW91c1Jlc3BvbnNlSWQsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb252ZXJzYXRpb25JZDogcHJlcGFyZWRDYWxsLmNvbnZlcnNhdGlvbklkLFxuICAgICAgICAgICAgICAgICAgICAgICAgbW9kZWxTZXR0aW5nczogcHJlcGFyZWRDYWxsLm1vZGVsU2V0dGluZ3MsXG4gICAgICAgICAgICAgICAgICAgICAgICB0b29sczogcHJlcGFyZWRDYWxsLnNlcmlhbGl6ZWRUb29scyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvb2xzRXhwbGljaXRseVByb3ZpZGVkOiBwcmVwYXJlZENhbGwudG9vbHNFeHBsaWNpdGx5UHJvdmlkZWQsXG4gICAgICAgICAgICAgICAgICAgICAgICBoYW5kb2ZmczogcHJlcGFyZWRDYWxsLnNlcmlhbGl6ZWRIYW5kb2ZmcyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG91dHB1dFR5cGU6IGNvbnZlcnRBZ2VudE91dHB1dFR5cGVUb1NlcmlhbGl6YWJsZShjdXJyZW50QWdlbnQub3V0cHV0VHlwZSksXG4gICAgICAgICAgICAgICAgICAgICAgICB0cmFjaW5nOiBnZXRUcmFjaW5nKHRoaXMuY29uZmlnLnRyYWNpbmdEaXNhYmxlZCwgdGhpcy5jb25maWcudHJhY2VJbmNsdWRlU2Vuc2l0aXZlRGF0YSksXG4gICAgICAgICAgICAgICAgICAgICAgICBzaWduYWw6IG9wdGlvbnMuc2lnbmFsLFxuICAgICAgICAgICAgICAgICAgICB9KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGd1YXJkcmFpbEVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgZ3VhcmRyYWlsRXJyb3I7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXZlbnQudHlwZSA9PT0gJ3Jlc3BvbnNlX2RvbmUnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcGFyc2VkID0gU3RyZWFtRXZlbnRSZXNwb25zZUNvbXBsZXRlZC5wYXJzZShldmVudCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmluYWxSZXNwb25zZSA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNhZ2U6IG5ldyBVc2FnZShwYXJzZWQucmVzcG9uc2UudXNhZ2UpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvdXRwdXQ6IHBhcnNlZC5yZXNwb25zZS5vdXRwdXQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlSWQ6IHBhcnNlZC5yZXNwb25zZS5pZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC5zdGF0ZS5fY29udGV4dC51c2FnZS5hZGQoZmluYWxSZXNwb25zZS51c2FnZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0LmNhbmNlbGxlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFdoZW4gdGhlIHVzZXIncyBjb2RlIGV4aXRzIGEgbG9vcCB0byBjb25zdW1lIHRoZSBzdHJlYW0sIHdlIG5lZWQgdG8gYnJlYWtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB0aGlzIGxvb3AgdG8gcHJldmVudCBpbnRlcm5hbCBmYWxzZSBlcnJvcnMgYW5kIHVubmVjZXNzYXJ5IHByb2Nlc3NpbmdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQuX2FkZEl0ZW0obmV3IFJ1blJhd01vZGVsU3RyZWFtRXZlbnQoZXZlbnQpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAocGFyYWxsZWxHdWFyZHJhaWxQcm9taXNlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBwYXJhbGxlbEd1YXJkcmFpbFByb21pc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZ3VhcmRyYWlsRXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBndWFyZHJhaWxFcnJvcjtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXN1bHQuc3RhdGUuX25vQWN0aXZlQWdlbnRSdW4gPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFmaW5hbFJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTW9kZWxCZWhhdmlvckVycm9yKCdNb2RlbCBkaWQgbm90IHByb2R1Y2UgYSBmaW5hbCByZXNwb25zZSEnLCByZXN1bHQuc3RhdGUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdC5zdGF0ZS5fbGFzdFR1cm5SZXNwb25zZSA9IGZpbmFsUmVzcG9uc2U7XG4gICAgICAgICAgICAgICAgICAgIC8vIEtlZXAgdGhlIHRyYWNrZXIgaW4gc3luYyB3aXRoIHRoZSBzdHJlYW1lZCByZXNwb25zZSBzbyByZWNvbm5lY3Rpb25zIHJlbWFpbiBhY2N1cmF0ZS5cbiAgICAgICAgICAgICAgICAgICAgc2VydmVyQ29udmVyc2F0aW9uVHJhY2tlcj8udHJhY2tTZXJ2ZXJJdGVtcyhmaW5hbFJlc3BvbnNlKTtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnN0YXRlLl9tb2RlbFJlc3BvbnNlcy5wdXNoKHJlc3VsdC5zdGF0ZS5fbGFzdFR1cm5SZXNwb25zZSk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHByb2Nlc3NlZFJlc3BvbnNlID0gcHJvY2Vzc01vZGVsUmVzcG9uc2UocmVzdWx0LnN0YXRlLl9sYXN0VHVyblJlc3BvbnNlLCBjdXJyZW50QWdlbnQsIHByZXBhcmVkQ2FsbC50b29scywgcHJlcGFyZWRDYWxsLmhhbmRvZmZzKTtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnN0YXRlLl9sYXN0UHJvY2Vzc2VkUmVzcG9uc2UgPSBwcm9jZXNzZWRSZXNwb25zZTtcbiAgICAgICAgICAgICAgICAgICAgLy8gUmVjb3JkIHRoZSBpdGVtcyBlbWl0dGVkIGRpcmVjdGx5IGZyb20gdGhlIG1vZGVsIHJlc3BvbnNlIHNvIHdlIGRvIG5vdFxuICAgICAgICAgICAgICAgICAgICAvLyBzdHJlYW0gdGhlbSBhZ2FpbiBhZnRlciB0b29scyBhbmQgb3RoZXIgc2lkZSBlZmZlY3RzIGZpbmlzaC5cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcHJlVG9vbEl0ZW1zID0gbmV3IFNldChwcm9jZXNzZWRSZXNwb25zZS5uZXdJdGVtcyk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChwcmVUb29sSXRlbXMuc2l6ZSA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0cmVhbVN0ZXBJdGVtc1RvUnVuUmVzdWx0KHJlc3VsdCwgcHJvY2Vzc2VkUmVzcG9uc2UubmV3SXRlbXMpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHR1cm5SZXN1bHQgPSBhd2FpdCByZXNvbHZlVHVybkFmdGVyTW9kZWxSZXNwb25zZShjdXJyZW50QWdlbnQsIHJlc3VsdC5zdGF0ZS5fb3JpZ2luYWxJbnB1dCwgcmVzdWx0LnN0YXRlLl9nZW5lcmF0ZWRJdGVtcywgcmVzdWx0LnN0YXRlLl9sYXN0VHVyblJlc3BvbnNlLCByZXN1bHQuc3RhdGUuX2xhc3RQcm9jZXNzZWRSZXNwb25zZSwgdGhpcywgcmVzdWx0LnN0YXRlKTtcbiAgICAgICAgICAgICAgICAgICAgYWRkU3RlcFRvUnVuUmVzdWx0KHJlc3VsdCwgdHVyblJlc3VsdCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2tpcEl0ZW1zOiBwcmVUb29sSXRlbXMsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICByZXN1bHQuc3RhdGUuX3Rvb2xVc2VUcmFja2VyLmFkZFRvb2xVc2UoY3VycmVudEFnZW50LCBwcm9jZXNzZWRSZXNwb25zZS50b29sc1VzZWQpO1xuICAgICAgICAgICAgICAgICAgICByZXN1bHQuc3RhdGUuX29yaWdpbmFsSW5wdXQgPSB0dXJuUmVzdWx0Lm9yaWdpbmFsSW5wdXQ7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdC5zdGF0ZS5fZ2VuZXJhdGVkSXRlbXMgPSB0dXJuUmVzdWx0LmdlbmVyYXRlZEl0ZW1zO1xuICAgICAgICAgICAgICAgICAgICBpZiAodHVyblJlc3VsdC5uZXh0U3RlcC50eXBlID09PSAnbmV4dF9zdGVwX3J1bl9hZ2FpbicpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC5zdGF0ZS5fY3VycmVudFR1cm5QZXJzaXN0ZWRJdGVtQ291bnQgPSAwO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdC5zdGF0ZS5fY3VycmVudFN0ZXAgPSB0dXJuUmVzdWx0Lm5leHRTdGVwO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0LnN0YXRlLl9jdXJyZW50U3RlcC50eXBlID09PSAnbmV4dF9zdGVwX2ZpbmFsX291dHB1dCcpIHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy4jcnVuT3V0cHV0R3VhcmRyYWlscyhyZXN1bHQuc3RhdGUsIHJlc3VsdC5zdGF0ZS5fY3VycmVudFN0ZXAub3V0cHV0KTtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgcGVyc2lzdFN0cmVhbUlucHV0SWZOZWVkZWQoKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gR3VhcmRyYWlscyBtdXN0IHN1Y2NlZWQgYmVmb3JlIHBlcnNpc3Rpbmcgc2Vzc2lvbiBtZW1vcnkgdG8gYXZvaWQgc3RvcmluZyBibG9ja2VkIG91dHB1dHMuXG4gICAgICAgICAgICAgICAgICAgIGlmICghc2VydmVyTWFuYWdlc0NvbnZlcnNhdGlvbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgc2F2ZVN0cmVhbVJlc3VsdFRvU2Vzc2lvbihvcHRpb25zLnNlc3Npb24sIHJlc3VsdCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5lbWl0KCdhZ2VudF9lbmQnLCByZXN1bHQuc3RhdGUuX2NvbnRleHQsIGN1cnJlbnRBZ2VudCwgcmVzdWx0LnN0YXRlLl9jdXJyZW50U3RlcC5vdXRwdXQpO1xuICAgICAgICAgICAgICAgICAgICBjdXJyZW50QWdlbnQuZW1pdCgnYWdlbnRfZW5kJywgcmVzdWx0LnN0YXRlLl9jb250ZXh0LCByZXN1bHQuc3RhdGUuX2N1cnJlbnRTdGVwLm91dHB1dCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAocmVzdWx0LnN0YXRlLl9jdXJyZW50U3RlcC50eXBlID09PSAnbmV4dF9zdGVwX2ludGVycnVwdGlvbicpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gd2UgYXJlIGRvbmUgZm9yIG5vdy4gRG9uJ3QgcnVuIGFueSBvdXRwdXQgZ3VhcmRyYWlsc1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCBwZXJzaXN0U3RyZWFtSW5wdXRJZk5lZWRlZCgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXNlcnZlck1hbmFnZXNDb252ZXJzYXRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHNhdmVTdHJlYW1SZXN1bHRUb1Nlc3Npb24ob3B0aW9ucy5zZXNzaW9uLCByZXN1bHQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAocmVzdWx0LnN0YXRlLl9jdXJyZW50U3RlcC50eXBlID09PSAnbmV4dF9zdGVwX2hhbmRvZmYnKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdC5zdGF0ZS5fY3VycmVudEFnZW50ID0gcmVzdWx0LnN0YXRlLl9jdXJyZW50U3RlcFxuICAgICAgICAgICAgICAgICAgICAgICAgPy5uZXdBZ2VudDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5zdGF0ZS5fY3VycmVudEFnZW50U3Bhbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnN0YXRlLl9jdXJyZW50QWdlbnRTcGFuLmVuZCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzZXRDdXJyZW50U3BhbigpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdC5zdGF0ZS5fY3VycmVudEFnZW50U3BhbiA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0Ll9hZGRJdGVtKG5ldyBSdW5BZ2VudFVwZGF0ZWRTdHJlYW1FdmVudChyZXN1bHQuc3RhdGUuX2N1cnJlbnRBZ2VudCkpO1xuICAgICAgICAgICAgICAgICAgICByZXN1bHQuc3RhdGUuX25vQWN0aXZlQWdlbnRSdW4gPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAvLyB3ZSd2ZSBwcm9jZXNzZWQgdGhlIGhhbmRvZmYsIHNvIHdlIG5lZWQgdG8gcnVuIHRoZSBsb29wIGFnYWluXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdC5zdGF0ZS5fY3VycmVudFN0ZXAgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnbmV4dF9zdGVwX3J1bl9hZ2FpbicsXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBsb2dnZXIuZGVidWcoJ1J1bm5pbmcgbmV4dCBsb29wJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgaWYgKGhhbmRlZElucHV0VG9Nb2RlbCAmJiAhc3RyZWFtSW5wdXRQZXJzaXN0ZWQpIHtcbiAgICAgICAgICAgICAgICBhd2FpdCBwZXJzaXN0U3RyZWFtSW5wdXRJZk5lZWRlZCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHJlc3VsdC5zdGF0ZS5fY3VycmVudEFnZW50U3Bhbikge1xuICAgICAgICAgICAgICAgIHJlc3VsdC5zdGF0ZS5fY3VycmVudEFnZW50U3Bhbi5zZXRFcnJvcih7XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdFcnJvciBpbiBhZ2VudCBydW4nLFxuICAgICAgICAgICAgICAgICAgICBkYXRhOiB7IGVycm9yOiBTdHJpbmcoZXJyb3IpIH0sXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgfVxuICAgICAgICBmaW5hbGx5IHtcbiAgICAgICAgICAgIGlmIChyZXN1bHQuc3RhdGUuX2N1cnJlbnRTdGVwPy50eXBlICE9PSAnbmV4dF9zdGVwX2ludGVycnVwdGlvbicpIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCBkaXNwb3NlUmVzb2x2ZWRDb21wdXRlcnMoeyBydW5Db250ZXh0OiByZXN1bHQuc3RhdGUuX2NvbnRleHQgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICBsb2dnZXIud2FybihgRmFpbGVkIHRvIGRpc3Bvc2UgY29tcHV0ZXJzIGFmdGVyIHJ1bjogJHtlcnJvcn1gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocmVzdWx0LnN0YXRlLl9jdXJyZW50QWdlbnRTcGFuKSB7XG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5zdGF0ZS5fY3VycmVudFN0ZXA/LnR5cGUgIT09ICduZXh0X3N0ZXBfaW50ZXJydXB0aW9uJykge1xuICAgICAgICAgICAgICAgICAgICByZXN1bHQuc3RhdGUuX2N1cnJlbnRBZ2VudFNwYW4uZW5kKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJlc2V0Q3VycmVudFNwYW4oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBhc3luYyAjcnVuSW5kaXZpZHVhbFN0cmVhbShhZ2VudCwgaW5wdXQsIG9wdGlvbnMsIGVuc3VyZVN0cmVhbUlucHV0UGVyc2lzdGVkLCBzZXNzaW9uSW5wdXRVcGRhdGUpIHtcbiAgICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgPz8ge307XG4gICAgICAgIHJldHVybiB3aXRoTmV3U3BhbkNvbnRleHQoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgLy8gSW5pdGlhbGl6ZSBvciByZXVzZSBleGlzdGluZyBzdGF0ZVxuICAgICAgICAgICAgY29uc3QgaXNSZXN1bWVkU3RhdGUgPSBpbnB1dCBpbnN0YW5jZW9mIFJ1blN0YXRlO1xuICAgICAgICAgICAgY29uc3Qgc3RhdGUgPSBpc1Jlc3VtZWRTdGF0ZVxuICAgICAgICAgICAgICAgID8gaW5wdXRcbiAgICAgICAgICAgICAgICA6IG5ldyBSdW5TdGF0ZShvcHRpb25zLmNvbnRleHQgaW5zdGFuY2VvZiBSdW5Db250ZXh0XG4gICAgICAgICAgICAgICAgICAgID8gb3B0aW9ucy5jb250ZXh0XG4gICAgICAgICAgICAgICAgICAgIDogbmV3IFJ1bkNvbnRleHQob3B0aW9ucy5jb250ZXh0KSwgaW5wdXQsIGFnZW50LCBvcHRpb25zLm1heFR1cm5zID8/IERFRkFVTFRfTUFYX1RVUk5TKTtcbiAgICAgICAgICAgIC8vIEluaXRpYWxpemUgdGhlIHN0cmVhbWVkIHJlc3VsdCB3aXRoIGV4aXN0aW5nIHN0YXRlXG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBuZXcgU3RyZWFtZWRSdW5SZXN1bHQoe1xuICAgICAgICAgICAgICAgIHNpZ25hbDogb3B0aW9ucy5zaWduYWwsXG4gICAgICAgICAgICAgICAgc3RhdGUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIC8vIFNldHVwIGRlZmF1bHRzXG4gICAgICAgICAgICByZXN1bHQubWF4VHVybnMgPSBvcHRpb25zLm1heFR1cm5zID8/IHN0YXRlLl9tYXhUdXJucztcbiAgICAgICAgICAgIC8vIENvbnRpbnVlIHRoZSBzdHJlYW0gbG9vcCB3aXRob3V0IGJsb2NraW5nXG4gICAgICAgICAgICBjb25zdCBzdHJlYW1Mb29wUHJvbWlzZSA9IHRoaXMuI3J1blN0cmVhbUxvb3AocmVzdWx0LCBvcHRpb25zLCBpc1Jlc3VtZWRTdGF0ZSwgZW5zdXJlU3RyZWFtSW5wdXRQZXJzaXN0ZWQsIHNlc3Npb25JbnB1dFVwZGF0ZSkudGhlbigoKSA9PiB7XG4gICAgICAgICAgICAgICAgcmVzdWx0Ll9kb25lKCk7XG4gICAgICAgICAgICB9LCAoZXJyKSA9PiB7XG4gICAgICAgICAgICAgICAgcmVzdWx0Ll9yYWlzZUVycm9yKGVycik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIC8vIEF0dGFjaCB0aGUgc3RyZWFtIGxvb3AgcHJvbWlzZSBzbyB0cmFjZSBlbmQgd2FpdHMgZm9yIHRoZSBsb29wIHRvIGNvbXBsZXRlXG4gICAgICAgICAgICByZXN1bHQuX3NldFN0cmVhbUxvb3BQcm9taXNlKHN0cmVhbUxvb3BQcm9taXNlKTtcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBhc3luYyAjcnVuSW5wdXRHdWFyZHJhaWxzKHN0YXRlLCBndWFyZHJhaWxzT3ZlcnJpZGUpIHtcbiAgICAgICAgY29uc3QgZ3VhcmRyYWlscyA9IGd1YXJkcmFpbHNPdmVycmlkZSA/PyB0aGlzLiNnZXRJbnB1dEd1YXJkcmFpbERlZmluaXRpb25zKHN0YXRlKTtcbiAgICAgICAgaWYgKGd1YXJkcmFpbHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgY29uc3QgZ3VhcmRyYWlsQXJncyA9IHtcbiAgICAgICAgICAgICAgICBhZ2VudDogc3RhdGUuX2N1cnJlbnRBZ2VudCxcbiAgICAgICAgICAgICAgICBpbnB1dDogc3RhdGUuX29yaWdpbmFsSW5wdXQsXG4gICAgICAgICAgICAgICAgY29udGV4dDogc3RhdGUuX2NvbnRleHQsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHRzID0gYXdhaXQgUHJvbWlzZS5hbGwoZ3VhcmRyYWlscy5tYXAoYXN5bmMgKGd1YXJkcmFpbCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gd2l0aEd1YXJkcmFpbFNwYW4oYXN5bmMgKHNwYW4pID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGd1YXJkcmFpbC5ydW4oZ3VhcmRyYWlsQXJncyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzcGFuLnNwYW5EYXRhLnRyaWdnZXJlZCA9IHJlc3VsdC5vdXRwdXQudHJpcHdpcmVUcmlnZ2VyZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICAgICAgICAgICAgICB9LCB7IGRhdGE6IHsgbmFtZTogZ3VhcmRyYWlsLm5hbWUgfSB9LCBzdGF0ZS5fY3VycmVudEFnZW50U3Bhbik7XG4gICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgICAgIHN0YXRlLl9pbnB1dEd1YXJkcmFpbFJlc3VsdHMucHVzaCguLi5yZXN1bHRzKTtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHJlc3VsdCBvZiByZXN1bHRzKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQub3V0cHV0LnRyaXB3aXJlVHJpZ2dlcmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3RhdGUuX2N1cnJlbnRBZ2VudFNwYW4pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZS5fY3VycmVudEFnZW50U3Bhbi5zZXRFcnJvcih7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdHdWFyZHJhaWwgdHJpcHdpcmUgdHJpZ2dlcmVkJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogeyBndWFyZHJhaWw6IHJlc3VsdC5ndWFyZHJhaWwubmFtZSB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IElucHV0R3VhcmRyYWlsVHJpcHdpcmVUcmlnZ2VyZWQoYElucHV0IGd1YXJkcmFpbCB0cmlnZ2VyZWQ6ICR7SlNPTi5zdHJpbmdpZnkocmVzdWx0Lm91dHB1dC5vdXRwdXRJbmZvKX1gLCByZXN1bHQsIHN0YXRlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0cztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgaWYgKGUgaW5zdGFuY2VvZiBJbnB1dEd1YXJkcmFpbFRyaXB3aXJlVHJpZ2dlcmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IGU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIHJvbGwgYmFjayB0aGUgY3VycmVudCB0dXJuIHRvIGVuYWJsZSByZXJ1bnNcbiAgICAgICAgICAgICAgICBzdGF0ZS5fY3VycmVudFR1cm4tLTtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgR3VhcmRyYWlsRXhlY3V0aW9uRXJyb3IoYElucHV0IGd1YXJkcmFpbCBmYWlsZWQgdG8gY29tcGxldGU6ICR7ZX1gLCBlLCBzdGF0ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFtdO1xuICAgIH1cbiAgICBhc3luYyAjcnVuT3V0cHV0R3VhcmRyYWlscyhzdGF0ZSwgb3V0cHV0KSB7XG4gICAgICAgIGNvbnN0IGd1YXJkcmFpbHMgPSB0aGlzLm91dHB1dEd1YXJkcmFpbERlZnMuY29uY2F0KHN0YXRlLl9jdXJyZW50QWdlbnQub3V0cHV0R3VhcmRyYWlscy5tYXAoZGVmaW5lT3V0cHV0R3VhcmRyYWlsKSk7XG4gICAgICAgIGlmIChndWFyZHJhaWxzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGNvbnN0IGFnZW50T3V0cHV0ID0gc3RhdGUuX2N1cnJlbnRBZ2VudC5wcm9jZXNzRmluYWxPdXRwdXQob3V0cHV0KTtcbiAgICAgICAgICAgIGNvbnN0IHJ1bk91dHB1dCA9IGdldFR1cm5JbnB1dChbXSwgc3RhdGUuX2dlbmVyYXRlZEl0ZW1zKTtcbiAgICAgICAgICAgIGNvbnN0IGd1YXJkcmFpbEFyZ3MgPSB7XG4gICAgICAgICAgICAgICAgYWdlbnQ6IHN0YXRlLl9jdXJyZW50QWdlbnQsXG4gICAgICAgICAgICAgICAgYWdlbnRPdXRwdXQsXG4gICAgICAgICAgICAgICAgY29udGV4dDogc3RhdGUuX2NvbnRleHQsXG4gICAgICAgICAgICAgICAgZGV0YWlsczoge1xuICAgICAgICAgICAgICAgICAgICBtb2RlbFJlc3BvbnNlOiBzdGF0ZS5fbGFzdFR1cm5SZXNwb25zZSxcbiAgICAgICAgICAgICAgICAgICAgb3V0cHV0OiBydW5PdXRwdXQsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdHMgPSBhd2FpdCBQcm9taXNlLmFsbChndWFyZHJhaWxzLm1hcChhc3luYyAoZ3VhcmRyYWlsKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB3aXRoR3VhcmRyYWlsU3Bhbihhc3luYyAoc3BhbikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZ3VhcmRyYWlsLnJ1bihndWFyZHJhaWxBcmdzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNwYW4uc3BhbkRhdGEudHJpZ2dlcmVkID0gcmVzdWx0Lm91dHB1dC50cmlwd2lyZVRyaWdnZXJlZDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgICAgICAgICAgICAgIH0sIHsgZGF0YTogeyBuYW1lOiBndWFyZHJhaWwubmFtZSB9IH0sIHN0YXRlLl9jdXJyZW50QWdlbnRTcGFuKTtcbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCByZXN1bHQgb2YgcmVzdWx0cykge1xuICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0Lm91dHB1dC50cmlwd2lyZVRyaWdnZXJlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHN0YXRlLl9jdXJyZW50QWdlbnRTcGFuKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUuX2N1cnJlbnRBZ2VudFNwYW4uc2V0RXJyb3Ioe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnR3VhcmRyYWlsIHRyaXB3aXJlIHRyaWdnZXJlZCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IHsgZ3VhcmRyYWlsOiByZXN1bHQuZ3VhcmRyYWlsLm5hbWUgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBPdXRwdXRHdWFyZHJhaWxUcmlwd2lyZVRyaWdnZXJlZChgT3V0cHV0IGd1YXJkcmFpbCB0cmlnZ2VyZWQ6ICR7SlNPTi5zdHJpbmdpZnkocmVzdWx0Lm91dHB1dC5vdXRwdXRJbmZvKX1gLCByZXN1bHQsIHN0YXRlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgaWYgKGUgaW5zdGFuY2VvZiBPdXRwdXRHdWFyZHJhaWxUcmlwd2lyZVRyaWdnZXJlZCkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgR3VhcmRyYWlsRXhlY3V0aW9uRXJyb3IoYE91dHB1dCBndWFyZHJhaWwgZmFpbGVkIHRvIGNvbXBsZXRlOiAke2V9YCwgZSwgc3RhdGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqIEFwcGxpZXMgY2FsbC1sZXZlbCBmaWx0ZXJzIGFuZCBtZXJnZXMgc2Vzc2lvbiB1cGRhdGVzIHNvIHRoZSBtb2RlbCByZXF1ZXN0IG1pcnJvcnMgZXhhY3RseVxuICAgICAqIHdoYXQgd2UgcGVyc2lzdGVkIGZvciBoaXN0b3J5LlxuICAgICAqL1xuICAgIGFzeW5jICNwcmVwYXJlTW9kZWxDYWxsKHN0YXRlLCBvcHRpb25zLCBhcnRpZmFjdHMsIHR1cm5JbnB1dCwgc2VydmVyQ29udmVyc2F0aW9uVHJhY2tlciwgc2Vzc2lvbklucHV0VXBkYXRlKSB7XG4gICAgICAgIGNvbnN0IHsgbW9kZWwsIGV4cGxpY3RseU1vZGVsU2V0IH0gPSBhd2FpdCB0aGlzLiNyZXNvbHZlTW9kZWxGb3JBZ2VudChzdGF0ZS5fY3VycmVudEFnZW50KTtcbiAgICAgICAgbGV0IG1vZGVsU2V0dGluZ3MgPSB7XG4gICAgICAgICAgICAuLi50aGlzLmNvbmZpZy5tb2RlbFNldHRpbmdzLFxuICAgICAgICAgICAgLi4uc3RhdGUuX2N1cnJlbnRBZ2VudC5tb2RlbFNldHRpbmdzLFxuICAgICAgICB9O1xuICAgICAgICBtb2RlbFNldHRpbmdzID0gYWRqdXN0TW9kZWxTZXR0aW5nc0Zvck5vbkdQVDVSdW5uZXJNb2RlbChleHBsaWN0bHlNb2RlbFNldCwgc3RhdGUuX2N1cnJlbnRBZ2VudC5tb2RlbFNldHRpbmdzLCBtb2RlbCwgbW9kZWxTZXR0aW5ncyk7XG4gICAgICAgIG1vZGVsU2V0dGluZ3MgPSBtYXliZVJlc2V0VG9vbENob2ljZShzdGF0ZS5fY3VycmVudEFnZW50LCBzdGF0ZS5fdG9vbFVzZVRyYWNrZXIsIG1vZGVsU2V0dGluZ3MpO1xuICAgICAgICBjb25zdCBzeXN0ZW1JbnN0cnVjdGlvbnMgPSBhd2FpdCBzdGF0ZS5fY3VycmVudEFnZW50LmdldFN5c3RlbVByb21wdChzdGF0ZS5fY29udGV4dCk7XG4gICAgICAgIGNvbnN0IHByb21wdCA9IGF3YWl0IHN0YXRlLl9jdXJyZW50QWdlbnQuZ2V0UHJvbXB0KHN0YXRlLl9jb250ZXh0KTtcbiAgICAgICAgY29uc3QgeyBtb2RlbElucHV0LCBzb3VyY2VJdGVtcywgcGVyc2lzdGVkSXRlbXMsIGZpbHRlckFwcGxpZWQgfSA9IGF3YWl0IGFwcGx5Q2FsbE1vZGVsSW5wdXRGaWx0ZXIoc3RhdGUuX2N1cnJlbnRBZ2VudCwgb3B0aW9ucy5jYWxsTW9kZWxJbnB1dEZpbHRlciwgc3RhdGUuX2NvbnRleHQsIHR1cm5JbnB1dCwgc3lzdGVtSW5zdHJ1Y3Rpb25zKTtcbiAgICAgICAgLy8gSW5mb3JtIHRoZSB0cmFja2VyIHdoaWNoIGV4YWN0IG9yaWdpbmFsIG9iamVjdHMgbWFkZSBpdCB0byB0aGUgcHJvdmlkZXIgc28gZnV0dXJlIHR1cm5zXG4gICAgICAgIC8vIG9ubHkgc2VuZCB0aGUgZGVsdGEgdGhhdCBoYXMgbm90IHlldCBiZWVuIGFja25vd2xlZGdlZCBieSB0aGUgc2VydmVyLlxuICAgICAgICBzZXJ2ZXJDb252ZXJzYXRpb25UcmFja2VyPy5tYXJrSW5wdXRBc1NlbnQoc291cmNlSXRlbXMpO1xuICAgICAgICAvLyBQcm92aWRlIGZpbHRlcmVkIGNsb25lcyB3aGVuZXZlciBmaWx0ZXJzIHJ1biBzbyBzZXNzaW9uIGhpc3RvcnkgbWlycm9ycyB0aGUgbW9kZWwgcGF5bG9hZC5cbiAgICAgICAgLy8gUmV0dXJuaW5nIGFuIGVtcHR5IGFycmF5IGlzIGludGVudGlvbmFsOiBpdCB0ZWxscyB0aGUgc2Vzc2lvbiBsYXllciB0byBwZXJzaXN0IFwibm90aGluZ1wiXG4gICAgICAgIC8vIGluc3RlYWQgb2YgZmFsbGluZyBiYWNrIHRvIHRoZSB1bmZpbHRlcmVkIG9yaWdpbmFscyB3aGVuIHRoZSBmaWx0ZXIgcmVkYWN0cyBldmVyeXRoaW5nLlxuICAgICAgICBzZXNzaW9uSW5wdXRVcGRhdGU/Lihzb3VyY2VJdGVtcywgZmlsdGVyQXBwbGllZCA/IHBlcnNpc3RlZEl0ZW1zIDogdW5kZWZpbmVkKTtcbiAgICAgICAgY29uc3QgcHJldmlvdXNSZXNwb25zZUlkID0gc2VydmVyQ29udmVyc2F0aW9uVHJhY2tlcj8ucHJldmlvdXNSZXNwb25zZUlkID8/XG4gICAgICAgICAgICBvcHRpb25zLnByZXZpb3VzUmVzcG9uc2VJZDtcbiAgICAgICAgY29uc3QgY29udmVyc2F0aW9uSWQgPSBzZXJ2ZXJDb252ZXJzYXRpb25UcmFja2VyPy5jb252ZXJzYXRpb25JZCA/PyBvcHRpb25zLmNvbnZlcnNhdGlvbklkO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgLi4uYXJ0aWZhY3RzLFxuICAgICAgICAgICAgbW9kZWwsXG4gICAgICAgICAgICBleHBsaWN0bHlNb2RlbFNldCxcbiAgICAgICAgICAgIG1vZGVsU2V0dGluZ3MsXG4gICAgICAgICAgICBtb2RlbElucHV0LFxuICAgICAgICAgICAgcHJvbXB0LFxuICAgICAgICAgICAgcHJldmlvdXNSZXNwb25zZUlkLFxuICAgICAgICAgICAgY29udmVyc2F0aW9uSWQsXG4gICAgICAgIH07XG4gICAgfVxufVxuLyoqXG4gKiBDb25zdHJ1Y3RzIHRoZSBtb2RlbCBpbnB1dCBhcnJheSBmb3IgdGhlIGN1cnJlbnQgdHVybiBieSBjb21iaW5pbmcgdGhlIG9yaWdpbmFsIHR1cm4gaW5wdXQgd2l0aFxuICogYW55IG5ldyBydW4gaXRlbXMgKGV4Y2x1ZGluZyB0b29sIGFwcHJvdmFsIHBsYWNlaG9sZGVycykuIFRoaXMgaGVscHMgZW5zdXJlIHRoYXQgcmVwZWF0ZWQgY2FsbHNcbiAqIHRvIHRoZSBSZXNwb25zZXMgQVBJIG9ubHkgc2VuZCBuZXdseSBnZW5lcmF0ZWQgY29udGVudC5cbiAqXG4gKiBTZWU6IGh0dHBzOi8vcGxhdGZvcm0ub3BlbmFpLmNvbS9kb2NzL2d1aWRlcy9jb252ZXJzYXRpb24tc3RhdGU/YXBpLW1vZGU9cmVzcG9uc2VzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0VHVybklucHV0KG9yaWdpbmFsSW5wdXQsIGdlbmVyYXRlZEl0ZW1zKSB7XG4gICAgY29uc3QgcmF3SXRlbXMgPSBnZW5lcmF0ZWRJdGVtc1xuICAgICAgICAuZmlsdGVyKChpdGVtKSA9PiBpdGVtLnR5cGUgIT09ICd0b29sX2FwcHJvdmFsX2l0ZW0nKSAvLyBkb24ndCBpbmNsdWRlIGFwcHJvdmFsIGl0ZW1zIHRvIGF2b2lkIGRvdWJsZSBmdW5jdGlvbiBjYWxsc1xuICAgICAgICAubWFwKChpdGVtKSA9PiBpdGVtLnJhd0l0ZW0pO1xuICAgIHJldHVybiBbLi4udG9BZ2VudElucHV0TGlzdChvcmlnaW5hbElucHV0KSwgLi4ucmF3SXRlbXNdO1xufVxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vICBJbnRlcm5hbCBoZWxwZXJzXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuY29uc3QgREVGQVVMVF9NQVhfVFVSTlMgPSAxMDtcbmxldCBfZGVmYXVsdFJ1bm5lciA9IHVuZGVmaW5lZDtcbmZ1bmN0aW9uIGdldERlZmF1bHRSdW5uZXIoKSB7XG4gICAgaWYgKF9kZWZhdWx0UnVubmVyKSB7XG4gICAgICAgIHJldHVybiBfZGVmYXVsdFJ1bm5lcjtcbiAgICB9XG4gICAgX2RlZmF1bHRSdW5uZXIgPSBuZXcgUnVubmVyKCk7XG4gICAgcmV0dXJuIF9kZWZhdWx0UnVubmVyO1xufVxuLyoqXG4gKiBSZXNvbHZlcyB0aGUgZWZmZWN0aXZlIG1vZGVsIGZvciB0aGUgbmV4dCB0dXJuIGJ5IGdpdmluZyBwcmVjZWRlbmNlIHRvIHRoZSBhZ2VudC1zcGVjaWZpY1xuICogY29uZmlndXJhdGlvbiB3aGVuIHByZXNlbnQsIG90aGVyd2lzZSBmYWxsaW5nIGJhY2sgdG8gdGhlIHJ1bm5lci1sZXZlbCBkZWZhdWx0LlxuICovXG5leHBvcnQgZnVuY3Rpb24gc2VsZWN0TW9kZWwoYWdlbnRNb2RlbCwgcnVuQ29uZmlnTW9kZWwpIHtcbiAgICAvLyBXaGVuIGluaXRpYWxpemluZyBhbiBhZ2VudCB3aXRob3V0IG1vZGVsIG5hbWUsIHRoZSBtb2RlbCBwcm9wZXJ0eSBpcyBzZXQgdG8gYW4gZW1wdHkgc3RyaW5nLiBTbyxcbiAgICAvLyAqIGFnZW50TW9kZWwgPT09IEFnZW50LkRFRkFVTFRfTU9ERUxfUExBQ0VIT0xERVIgJiBydW5Db25maWdNb2RlbCBleGlzdHMsIHJ1bkNvbmZpZ01vZGVsIHdpbGwgYmUgdXNlZFxuICAgIC8vICogYWdlbnRNb2RlbCBpcyBzZXQsIHRoZSBhZ2VudE1vZGVsIHdpbGwgYmUgdXNlZCBvdmVyIHJ1bkNvbmZpZ01vZGVsXG4gICAgaWYgKCh0eXBlb2YgYWdlbnRNb2RlbCA9PT0gJ3N0cmluZycgJiZcbiAgICAgICAgYWdlbnRNb2RlbCAhPT0gQWdlbnQuREVGQVVMVF9NT0RFTF9QTEFDRUhPTERFUikgfHxcbiAgICAgICAgYWdlbnRNb2RlbCAvLyBhbnkgdHJ1dGh5IHZhbHVlXG4gICAgKSB7XG4gICAgICAgIHJldHVybiBhZ2VudE1vZGVsO1xuICAgIH1cbiAgICByZXR1cm4gcnVuQ29uZmlnTW9kZWwgPz8gYWdlbnRNb2RlbCA/PyBBZ2VudC5ERUZBVUxUX01PREVMX1BMQUNFSE9MREVSO1xufVxuLyoqXG4gKiBOb3JtYWxpemVzIHRyYWNpbmcgY29uZmlndXJhdGlvbiBpbnRvIHRoZSBmb3JtYXQgZXhwZWN0ZWQgYnkgbW9kZWwgcHJvdmlkZXJzLlxuICogUmV0dXJucyBgZmFsc2VgIHRvIGRpc2FibGUgdHJhY2luZywgYHRydWVgIHRvIGluY2x1ZGUgZnVsbCBwYXlsb2FkIGRhdGEsIG9yXG4gKiBgJ2VuYWJsZWRfd2l0aG91dF9kYXRhJ2AgdG8gb21pdCBzZW5zaXRpdmUgY29udGVudCB3aGlsZSBzdGlsbCBlbWl0dGluZyBzcGFucy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFRyYWNpbmcodHJhY2luZ0Rpc2FibGVkLCB0cmFjZUluY2x1ZGVTZW5zaXRpdmVEYXRhKSB7XG4gICAgaWYgKHRyYWNpbmdEaXNhYmxlZCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGlmICh0cmFjZUluY2x1ZGVTZW5zaXRpdmVEYXRhKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gJ2VuYWJsZWRfd2l0aG91dF9kYXRhJztcbn1cbi8qKlxuICogQGludGVybmFsXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIGFwcGx5Q2FsbE1vZGVsSW5wdXRGaWx0ZXIoYWdlbnQsIGNhbGxNb2RlbElucHV0RmlsdGVyLCBjb250ZXh0LCBpbnB1dEl0ZW1zLCBzeXN0ZW1JbnN0cnVjdGlvbnMpIHtcbiAgICBjb25zdCBjbG9uZUlucHV0SXRlbXMgPSAoaXRlbXMsIG1hcCkgPT4gaXRlbXMubWFwKChpdGVtKSA9PiB7XG4gICAgICAgIGNvbnN0IGNsb25lZCA9IHN0cnVjdHVyZWRDbG9uZShpdGVtKTtcbiAgICAgICAgaWYgKG1hcCAmJiBjbG9uZWQgJiYgdHlwZW9mIGNsb25lZCA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgIG1hcC5zZXQoY2xvbmVkLCBpdGVtKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY2xvbmVkO1xuICAgIH0pO1xuICAgIC8vIFJlY29yZCB0aGUgcmVsYXRpb25zaGlwIGJldHdlZW4gdGhlIGNsb25lZCBhcnJheSBwYXNzZWQgdG8gZmlsdGVycyBhbmQgdGhlIG9yaWdpbmFsIGlucHV0cy5cbiAgICBjb25zdCBjbG9uZU1hcCA9IG5ldyBXZWFrTWFwKCk7XG4gICAgY29uc3Qgb3JpZ2luYWxQb29sID0gYnVpbGRBZ2VudElucHV0UG9vbChpbnB1dEl0ZW1zKTtcbiAgICBjb25zdCBmYWxsYmFja09yaWdpbmFscyA9IFtdO1xuICAgIC8vIFRyYWNrIGFueSBvcmlnaW5hbCBvYmplY3QgaW5wdXRzIHNvIGZpbHRlcmVkIHJlcGxhY2VtZW50cyBjYW4gc3RpbGwgbWFyayB0aGVtIGFzIGRlbGl2ZXJlZC5cbiAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgaW5wdXRJdGVtcykge1xuICAgICAgICBpZiAoaXRlbSAmJiB0eXBlb2YgaXRlbSA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgIGZhbGxiYWNrT3JpZ2luYWxzLnB1c2goaXRlbSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY29uc3QgcmVtb3ZlRnJvbUZhbGxiYWNrID0gKGNhbmRpZGF0ZSkgPT4ge1xuICAgICAgICBpZiAoIWNhbmRpZGF0ZSB8fCB0eXBlb2YgY2FuZGlkYXRlICE9PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGluZGV4ID0gZmFsbGJhY2tPcmlnaW5hbHMuZmluZEluZGV4KChvcmlnaW5hbCkgPT4gb3JpZ2luYWwgPT09IGNhbmRpZGF0ZSk7XG4gICAgICAgIGlmIChpbmRleCAhPT0gLTEpIHtcbiAgICAgICAgICAgIGZhbGxiYWNrT3JpZ2luYWxzLnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIGNvbnN0IHRha2VGYWxsYmFja09yaWdpbmFsID0gKCkgPT4ge1xuICAgICAgICBjb25zdCBuZXh0ID0gZmFsbGJhY2tPcmlnaW5hbHMuc2hpZnQoKTtcbiAgICAgICAgaWYgKG5leHQpIHtcbiAgICAgICAgICAgIHJlbW92ZUFnZW50SW5wdXRGcm9tUG9vbChvcmlnaW5hbFBvb2wsIG5leHQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXh0O1xuICAgIH07XG4gICAgLy8gQWx3YXlzIGNyZWF0ZSBhIGRlZXAgY29weSBzbyBkb3duc3RyZWFtIG11dGF0aW9ucyBpbnNpZGUgZmlsdGVycyBjYW5ub3QgYWZmZWN0XG4gICAgLy8gdGhlIGNhY2hlZCB0dXJuIHN0YXRlLlxuICAgIGNvbnN0IGNsb25lZEJhc2VJbnB1dCA9IGNsb25lSW5wdXRJdGVtcyhpbnB1dEl0ZW1zLCBjbG9uZU1hcCk7XG4gICAgY29uc3QgYmFzZSA9IHtcbiAgICAgICAgaW5wdXQ6IGNsb25lZEJhc2VJbnB1dCxcbiAgICAgICAgaW5zdHJ1Y3Rpb25zOiBzeXN0ZW1JbnN0cnVjdGlvbnMsXG4gICAgfTtcbiAgICBpZiAoIWNhbGxNb2RlbElucHV0RmlsdGVyKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBtb2RlbElucHV0OiBiYXNlLFxuICAgICAgICAgICAgc291cmNlSXRlbXM6IFsuLi5pbnB1dEl0ZW1zXSxcbiAgICAgICAgICAgIHBlcnNpc3RlZEl0ZW1zOiBbXSxcbiAgICAgICAgICAgIGZpbHRlckFwcGxpZWQ6IGZhbHNlLFxuICAgICAgICB9O1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjYWxsTW9kZWxJbnB1dEZpbHRlcih7XG4gICAgICAgICAgICBtb2RlbERhdGE6IGJhc2UsXG4gICAgICAgICAgICBhZ2VudCxcbiAgICAgICAgICAgIGNvbnRleHQ6IGNvbnRleHQuY29udGV4dCxcbiAgICAgICAgfSk7XG4gICAgICAgIGlmICghcmVzdWx0IHx8ICFBcnJheS5pc0FycmF5KHJlc3VsdC5pbnB1dCkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBVc2VyRXJyb3IoJ2NhbGxNb2RlbElucHV0RmlsdGVyIG11c3QgcmV0dXJuIGEgTW9kZWxJbnB1dERhdGEgb2JqZWN0IHdpdGggYW4gaW5wdXQgYXJyYXkuJyk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gUHJlc2VydmUgYSBwb2ludGVyIHRvIHRoZSBvcmlnaW5hbCBvYmplY3QgYmFja2luZyBlYWNoIGZpbHRlcmVkIGNsb25lIHNvIGRvd25zdHJlYW1cbiAgICAgICAgLy8gdHJhY2tlcnMgY2FuIGtlZXAgdGhlaXIgYm9va2tlZXBpbmcgY29uc2lzdGVudCBldmVuIGFmdGVyIHJlZGFjdGlvbi5cbiAgICAgICAgY29uc3Qgc291cmNlSXRlbXMgPSByZXN1bHQuaW5wdXQubWFwKChpdGVtKSA9PiB7XG4gICAgICAgICAgICBpZiAoIWl0ZW0gfHwgdHlwZW9mIGl0ZW0gIT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IG9yaWdpbmFsID0gY2xvbmVNYXAuZ2V0KGl0ZW0pO1xuICAgICAgICAgICAgaWYgKG9yaWdpbmFsKSB7XG4gICAgICAgICAgICAgICAgcmVtb3ZlRnJvbUZhbGxiYWNrKG9yaWdpbmFsKTtcbiAgICAgICAgICAgICAgICByZW1vdmVBZ2VudElucHV0RnJvbVBvb2wob3JpZ2luYWxQb29sLCBvcmlnaW5hbCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG9yaWdpbmFsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3Qga2V5ID0gZ2V0QWdlbnRJbnB1dEl0ZW1LZXkoaXRlbSk7XG4gICAgICAgICAgICBjb25zdCBtYXRjaGVkQnlDb250ZW50ID0gdGFrZUFnZW50SW5wdXRGcm9tUG9vbChvcmlnaW5hbFBvb2wsIGtleSk7XG4gICAgICAgICAgICBpZiAobWF0Y2hlZEJ5Q29udGVudCkge1xuICAgICAgICAgICAgICAgIHJlbW92ZUZyb21GYWxsYmFjayhtYXRjaGVkQnlDb250ZW50KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gbWF0Y2hlZEJ5Q29udGVudDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGZhbGxiYWNrID0gdGFrZUZhbGxiYWNrT3JpZ2luYWwoKTtcbiAgICAgICAgICAgIGlmIChmYWxsYmFjaykge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxsYmFjaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCBjbG9uZWRGaWx0ZXJlZElucHV0ID0gY2xvbmVJbnB1dEl0ZW1zKHJlc3VsdC5pbnB1dCk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBtb2RlbElucHV0OiB7XG4gICAgICAgICAgICAgICAgaW5wdXQ6IGNsb25lZEZpbHRlcmVkSW5wdXQsXG4gICAgICAgICAgICAgICAgaW5zdHJ1Y3Rpb25zOiB0eXBlb2YgcmVzdWx0Lmluc3RydWN0aW9ucyA9PT0gJ3VuZGVmaW5lZCdcbiAgICAgICAgICAgICAgICAgICAgPyBzeXN0ZW1JbnN0cnVjdGlvbnNcbiAgICAgICAgICAgICAgICAgICAgOiByZXN1bHQuaW5zdHJ1Y3Rpb25zLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHNvdXJjZUl0ZW1zLFxuICAgICAgICAgICAgcGVyc2lzdGVkSXRlbXM6IGNsb25lZEZpbHRlcmVkSW5wdXQubWFwKChpdGVtKSA9PiBzdHJ1Y3R1cmVkQ2xvbmUoaXRlbSkpLFxuICAgICAgICAgICAgZmlsdGVyQXBwbGllZDogdHJ1ZSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGFkZEVycm9yVG9DdXJyZW50U3Bhbih7XG4gICAgICAgICAgICBtZXNzYWdlOiAnRXJyb3IgaW4gY2FsbE1vZGVsSW5wdXRGaWx0ZXInLFxuICAgICAgICAgICAgZGF0YTogeyBlcnJvcjogU3RyaW5nKGVycm9yKSB9LFxuICAgICAgICB9KTtcbiAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxufVxuLy8gVHJhY2tzIHdoaWNoIGl0ZW1zIGhhdmUgYWxyZWFkeSBiZWVuIHNlbnQgdG8gb3IgcmVjZWl2ZWQgZnJvbSB0aGUgUmVzcG9uc2VzIEFQSSB3aGVuIHRoZSBjYWxsZXJcbi8vIHN1cHBsaWVzIGBjb252ZXJzYXRpb25JZGAvYHByZXZpb3VzUmVzcG9uc2VJZGAuIFRoaXMgZW5zdXJlcyB3ZSBvbmx5IHNlbmQgdGhlIGRlbHRhIGVhY2ggdHVybi5cbmNsYXNzIFNlcnZlckNvbnZlcnNhdGlvblRyYWNrZXIge1xuICAgIC8vIENvbnZlcnNhdGlvbiBJRDpcbiAgICAvLyAtIGh0dHBzOi8vcGxhdGZvcm0ub3BlbmFpLmNvbS9kb2NzL2d1aWRlcy9jb252ZXJzYXRpb24tc3RhdGU/YXBpLW1vZGU9cmVzcG9uc2VzI3VzaW5nLXRoZS1jb252ZXJzYXRpb25zLWFwaVxuICAgIC8vIC0gaHR0cHM6Ly9wbGF0Zm9ybS5vcGVuYWkuY29tL2RvY3MvYXBpLXJlZmVyZW5jZS9jb252ZXJzYXRpb25zL2NyZWF0ZVxuICAgIGNvbnZlcnNhdGlvbklkO1xuICAgIC8vIFByZXZpb3VzIFJlc3BvbnNlIElEOlxuICAgIC8vIGh0dHBzOi8vcGxhdGZvcm0ub3BlbmFpLmNvbS9kb2NzL2d1aWRlcy9jb252ZXJzYXRpb24tc3RhdGU/YXBpLW1vZGU9cmVzcG9uc2VzI3Bhc3NpbmctY29udGV4dC1mcm9tLXRoZS1wcmV2aW91cy1yZXNwb25zZVxuICAgIHByZXZpb3VzUmVzcG9uc2VJZDtcbiAgICAvLyBVc2luZyB0aGlzIGZsYWcgYmVjYXVzZSBXZWFrU2V0IGRvZXMgbm90IHByb3ZpZGUgYSB3YXkgdG8gY2hlY2sgaXRzIHNpemVcbiAgICBzZW50SW5pdGlhbElucHV0ID0gZmFsc2U7XG4gICAgLy8gVGhlIGl0ZW1zIGFscmVhZHkgc2VudCB0byB0aGUgbW9kZWw7IHVzaW5nIFdlYWtTZXQgZm9yIG1lbW9yeSBlZmZpY2llbmN5XG4gICAgc2VudEl0ZW1zID0gbmV3IFdlYWtTZXQoKTtcbiAgICAvLyBUaGUgaXRlbXMgcmVjZWl2ZWQgZnJvbSB0aGUgc2VydmVyOyB1c2luZyBXZWFrU2V0IGZvciBtZW1vcnkgZWZmaWNpZW5jeVxuICAgIHNlcnZlckl0ZW1zID0gbmV3IFdlYWtTZXQoKTtcbiAgICAvLyBUcmFjayBpbml0aWFsIGlucHV0IGl0ZW1zIHRoYXQgaGF2ZSBub3QgeWV0IGJlZW4gc2VudCBzbyB0aGV5IGNhbiBiZSByZXRyaWVkIG9uIGxhdGVyIHR1cm5zLlxuICAgIHJlbWFpbmluZ0luaXRpYWxJbnB1dCA9IG51bGw7XG4gICAgY29uc3RydWN0b3IoeyBjb252ZXJzYXRpb25JZCwgcHJldmlvdXNSZXNwb25zZUlkLCB9KSB7XG4gICAgICAgIHRoaXMuY29udmVyc2F0aW9uSWQgPSBjb252ZXJzYXRpb25JZCA/PyB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMucHJldmlvdXNSZXNwb25zZUlkID0gcHJldmlvdXNSZXNwb25zZUlkID8/IHVuZGVmaW5lZDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUHJlLXBvcHVsYXRlcyB0cmFja2VyIGNhY2hlcyBmcm9tIGFuIGV4aXN0aW5nIFJ1blN0YXRlIHdoZW4gcmVzdW1pbmcgc2VydmVyLW1hbmFnZWQgcnVucy5cbiAgICAgKi9cbiAgICBwcmltZUZyb21TdGF0ZSh7IG9yaWdpbmFsSW5wdXQsIGdlbmVyYXRlZEl0ZW1zLCBtb2RlbFJlc3BvbnNlcywgfSkge1xuICAgICAgICBpZiAodGhpcy5zZW50SW5pdGlhbElucHV0KSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChjb25zdCBpdGVtIG9mIHRvQWdlbnRJbnB1dExpc3Qob3JpZ2luYWxJbnB1dCkpIHtcbiAgICAgICAgICAgIGlmIChpdGVtICYmIHR5cGVvZiBpdGVtID09PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgICAgIHRoaXMuc2VudEl0ZW1zLmFkZChpdGVtKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLnNlbnRJbml0aWFsSW5wdXQgPSB0cnVlO1xuICAgICAgICB0aGlzLnJlbWFpbmluZ0luaXRpYWxJbnB1dCA9IG51bGw7XG4gICAgICAgIGNvbnN0IGxhdGVzdFJlc3BvbnNlID0gbW9kZWxSZXNwb25zZXNbbW9kZWxSZXNwb25zZXMubGVuZ3RoIC0gMV07XG4gICAgICAgIGZvciAoY29uc3QgcmVzcG9uc2Ugb2YgbW9kZWxSZXNwb25zZXMpIHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgaXRlbSBvZiByZXNwb25zZS5vdXRwdXQpIHtcbiAgICAgICAgICAgICAgICBpZiAoaXRlbSAmJiB0eXBlb2YgaXRlbSA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXJ2ZXJJdGVtcy5hZGQoaXRlbSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICghdGhpcy5jb252ZXJzYXRpb25JZCAmJiBsYXRlc3RSZXNwb25zZT8ucmVzcG9uc2VJZCkge1xuICAgICAgICAgICAgdGhpcy5wcmV2aW91c1Jlc3BvbnNlSWQgPSBsYXRlc3RSZXNwb25zZS5yZXNwb25zZUlkO1xuICAgICAgICB9XG4gICAgICAgIGZvciAoY29uc3QgaXRlbSBvZiBnZW5lcmF0ZWRJdGVtcykge1xuICAgICAgICAgICAgY29uc3QgcmF3SXRlbSA9IGl0ZW0ucmF3SXRlbTtcbiAgICAgICAgICAgIGlmICghcmF3SXRlbSB8fCB0eXBlb2YgcmF3SXRlbSAhPT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLnNlcnZlckl0ZW1zLmhhcyhyYXdJdGVtKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2VudEl0ZW1zLmFkZChyYXdJdGVtKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZWNvcmRzIHRoZSByYXcgaXRlbXMgcmV0dXJuZWQgYnkgdGhlIHNlcnZlciBzbyBmdXR1cmUgZGVsdGEgY2FsY3VsYXRpb25zIHNraXAgdGhlbS5cbiAgICAgKiBBbHNvIGNhcHR1cmVzIHRoZSBsYXRlc3QgcmVzcG9uc2UgaWRlbnRpZmllciB0byBjaGFpbiBmb2xsb3ctdXAgY2FsbHMgd2hlbiBwb3NzaWJsZS5cbiAgICAgKi9cbiAgICB0cmFja1NlcnZlckl0ZW1zKG1vZGVsUmVzcG9uc2UpIHtcbiAgICAgICAgaWYgKCFtb2RlbFJlc3BvbnNlKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChjb25zdCBpdGVtIG9mIG1vZGVsUmVzcG9uc2Uub3V0cHV0KSB7XG4gICAgICAgICAgICBpZiAoaXRlbSAmJiB0eXBlb2YgaXRlbSA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNlcnZlckl0ZW1zLmFkZChpdGVtKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRoaXMuY29udmVyc2F0aW9uSWQgJiYgbW9kZWxSZXNwb25zZS5yZXNwb25zZUlkKSB7XG4gICAgICAgICAgICB0aGlzLnByZXZpb3VzUmVzcG9uc2VJZCA9IG1vZGVsUmVzcG9uc2UucmVzcG9uc2VJZDtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBtaW5pbXVtIHNldCBvZiBpdGVtcyB0aGF0IHN0aWxsIG5lZWQgdG8gYmUgZGVsaXZlcmVkIHRvIHRoZSBzZXJ2ZXIgZm9yIHRoZVxuICAgICAqIGN1cnJlbnQgdHVybi4gVGhpcyBpbmNsdWRlcyB0aGUgb3JpZ2luYWwgdHVybiBpbnB1dHMgKHVudGlsIGFja25vd2xlZGdlZCkgcGx1cyBhbnlcbiAgICAgKiBuZXdseSBnZW5lcmF0ZWQgaXRlbXMgdGhhdCBoYXZlIG5vdCB5ZXQgYmVlbiBlY2hvZWQgYmFjayBieSB0aGUgQVBJLlxuICAgICAqL1xuICAgIHByZXBhcmVJbnB1dChvcmlnaW5hbElucHV0LCBnZW5lcmF0ZWRJdGVtcykge1xuICAgICAgICBjb25zdCBpbnB1dEl0ZW1zID0gW107XG4gICAgICAgIGlmICghdGhpcy5zZW50SW5pdGlhbElucHV0KSB7XG4gICAgICAgICAgICBjb25zdCBpbml0aWFsSXRlbXMgPSB0b0FnZW50SW5wdXRMaXN0KG9yaWdpbmFsSW5wdXQpO1xuICAgICAgICAgICAgLy8gUHJlc2VydmUgdGhlIGZ1bGwgaW5pdGlhbCBwYXlsb2FkIHNvIGEgZmlsdGVyIGNhbiBkcm9wIGl0ZW1zIHdpdGhvdXQgbG9zaW5nIHRoZWlyIG9yaWdpbmFscy5cbiAgICAgICAgICAgIGlucHV0SXRlbXMucHVzaCguLi5pbml0aWFsSXRlbXMpO1xuICAgICAgICAgICAgdGhpcy5yZW1haW5pbmdJbml0aWFsSW5wdXQgPSBpbml0aWFsSXRlbXMuZmlsdGVyKChpdGVtKSA9PiBCb29sZWFuKGl0ZW0pICYmIHR5cGVvZiBpdGVtID09PSAnb2JqZWN0Jyk7XG4gICAgICAgICAgICB0aGlzLnNlbnRJbml0aWFsSW5wdXQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRoaXMucmVtYWluaW5nSW5pdGlhbElucHV0ICYmXG4gICAgICAgICAgICB0aGlzLnJlbWFpbmluZ0luaXRpYWxJbnB1dC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAvLyBSZS1xdWV1ZSBwcmlvciBpbml0aWFsIGl0ZW1zIHVudGlsIHRoZSB0cmFja2VyIGNvbmZpcm1zIHRoZXkgd2VyZSBkZWxpdmVyZWQgdG8gdGhlIEFQSS5cbiAgICAgICAgICAgIGlucHV0SXRlbXMucHVzaCguLi50aGlzLnJlbWFpbmluZ0luaXRpYWxJbnB1dCk7XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChjb25zdCBpdGVtIG9mIGdlbmVyYXRlZEl0ZW1zKSB7XG4gICAgICAgICAgICBpZiAoaXRlbS50eXBlID09PSAndG9vbF9hcHByb3ZhbF9pdGVtJykge1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgcmF3SXRlbSA9IGl0ZW0ucmF3SXRlbTtcbiAgICAgICAgICAgIGlmICghcmF3SXRlbSB8fCB0eXBlb2YgcmF3SXRlbSAhPT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLnNlbnRJdGVtcy5oYXMocmF3SXRlbSkgfHwgdGhpcy5zZXJ2ZXJJdGVtcy5oYXMocmF3SXRlbSkpIHtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlucHV0SXRlbXMucHVzaChyYXdJdGVtKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaW5wdXRJdGVtcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogTWFya3MgdGhlIHByb3ZpZGVkIG9yaWdpbmFscyBhcyBkZWxpdmVyZWQgc28gZnV0dXJlIHR1cm5zIGRvIG5vdCByZXNlbmQgdGhlbSBhbmQgYW55XG4gICAgICogcGVuZGluZyBpbml0aWFsIGlucHV0cyBjYW4gYmUgZHJvcHBlZCBvbmNlIHRoZSBzZXJ2ZXIgYWNrbm93bGVkZ2VzIHJlY2VpcHQuXG4gICAgICovXG4gICAgbWFya0lucHV0QXNTZW50KGl0ZW1zKSB7XG4gICAgICAgIGlmICghaXRlbXMubGVuZ3RoKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZGVsaXZlcmVkID0gbmV3IFNldCgpO1xuICAgICAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgaXRlbXMpIHtcbiAgICAgICAgICAgIGlmICghaXRlbSB8fCB0eXBlb2YgaXRlbSAhPT0gJ29iamVjdCcgfHwgZGVsaXZlcmVkLmhhcyhpdGVtKSkge1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gU29tZSBpbnB1dHMgbWF5IGJlIHJlcGVhdGVkIGluIHRoZSBmaWx0ZXJlZCBsaXN0OyBvbmx5IG1hcmsgdW5pcXVlIG9yaWdpbmFscyBvbmNlLlxuICAgICAgICAgICAgZGVsaXZlcmVkLmFkZChpdGVtKTtcbiAgICAgICAgICAgIHRoaXMuc2VudEl0ZW1zLmFkZChpdGVtKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRoaXMucmVtYWluaW5nSW5pdGlhbElucHV0IHx8XG4gICAgICAgICAgICB0aGlzLnJlbWFpbmluZ0luaXRpYWxJbnB1dC5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnJlbWFpbmluZ0luaXRpYWxJbnB1dCA9IHRoaXMucmVtYWluaW5nSW5pdGlhbElucHV0LmZpbHRlcigoaXRlbSkgPT4gIWRlbGl2ZXJlZC5oYXMoaXRlbSkpO1xuICAgICAgICBpZiAodGhpcy5yZW1haW5pbmdJbml0aWFsSW5wdXQubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICB0aGlzLnJlbWFpbmluZ0luaXRpYWxJbnB1dCA9IG51bGw7XG4gICAgICAgIH1cbiAgICB9XG59XG4vKipcbiAqIFdoZW4gdGhlIGRlZmF1bHQgbW9kZWwgaXMgYSBHUFQtNSB2YXJpYW50LCBhZ2VudHMgbWF5IGNhcnJ5IEdQVC01LXNwZWNpZmljIHByb3ZpZGVyRGF0YVxuICogKGUuZy4sIHJlYXNvbmluZyBlZmZvcnQsIHRleHQgdmVyYm9zaXR5KS4gSWYgYSBydW4gcmVzb2x2ZXMgdG8gYSBub24tR1BULTUgbW9kZWwgYW5kIHRoZVxuICogYWdlbnQgcmVsaWVkIG9uIHRoZSBkZWZhdWx0IG1vZGVsIChpLmUuLCBubyBleHBsaWNpdCBtb2RlbCBzZXQpLCB0aGVzZSBHUFQtNS1vbmx5IHNldHRpbmdzXG4gKiBhcmUgaW5jb21wYXRpYmxlIGFuZCBzaG91bGQgYmUgc3RyaXBwZWQgdG8gYXZvaWQgcnVudGltZSBlcnJvcnMuXG4gKi9cbmZ1bmN0aW9uIGFkanVzdE1vZGVsU2V0dGluZ3NGb3JOb25HUFQ1UnVubmVyTW9kZWwoZXhwbGljdGx5TW9kZWxTZXQsIGFnZW50TW9kZWxTZXR0aW5ncywgcnVubmVyTW9kZWwsIG1vZGVsU2V0dGluZ3MpIHtcbiAgICBpZiAoXG4gICAgLy8gZ3B0LTUgaXMgZW5hYmxlZCBmb3IgdGhlIGRlZmF1bHQgbW9kZWwgZm9yIGFnZW50c1xuICAgIGlzR3B0NURlZmF1bHQoKSAmJlxuICAgICAgICAvLyBleHBsaWNpdGx5IHNldCBtb2RlbCBmb3IgdGhlIGFnZW50XG4gICAgICAgIGV4cGxpY3RseU1vZGVsU2V0ICYmXG4gICAgICAgIC8vIHRoaXMgcnVubmVyIHVzZXMgYSBub24tZ3B0LTUgbW9kZWxcbiAgICAgICAgKHR5cGVvZiBydW5uZXJNb2RlbCAhPT0gJ3N0cmluZycgfHxcbiAgICAgICAgICAgICFncHQ1UmVhc29uaW5nU2V0dGluZ3NSZXF1aXJlZChydW5uZXJNb2RlbCkpICYmXG4gICAgICAgIChhZ2VudE1vZGVsU2V0dGluZ3MucHJvdmlkZXJEYXRhPy5yZWFzb25pbmcgfHxcbiAgICAgICAgICAgIGFnZW50TW9kZWxTZXR0aW5ncy5wcm92aWRlckRhdGE/LnRleHQ/LnZlcmJvc2l0eSB8fFxuICAgICAgICAgICAgYWdlbnRNb2RlbFNldHRpbmdzLnByb3ZpZGVyRGF0YT8ucmVhc29uaW5nX2VmZm9ydCkpIHtcbiAgICAgICAgY29uc3QgY29waWVkTW9kZWxTZXR0aW5ncyA9IHsgLi4ubW9kZWxTZXR0aW5ncyB9O1xuICAgICAgICAvLyB0aGUgaW5jb21wYXRpYmxlIHBhcmFtZXRlcnMgc2hvdWxkIGJlIHJlbW92ZWQgdG8gYXZvaWQgcnVudGltZSBlcnJvcnNcbiAgICAgICAgZGVsZXRlIGNvcGllZE1vZGVsU2V0dGluZ3MucHJvdmlkZXJEYXRhPy5yZWFzb25pbmc7XG4gICAgICAgIGRlbGV0ZSBjb3BpZWRNb2RlbFNldHRpbmdzLnByb3ZpZGVyRGF0YT8udGV4dD8udmVyYm9zaXR5O1xuICAgICAgICBkZWxldGUgY29waWVkTW9kZWxTZXR0aW5ncy5wcm92aWRlckRhdGE/LnJlYXNvbmluZ19lZmZvcnQ7XG4gICAgICAgIGlmIChjb3BpZWRNb2RlbFNldHRpbmdzLnJlYXNvbmluZykge1xuICAgICAgICAgICAgZGVsZXRlIGNvcGllZE1vZGVsU2V0dGluZ3MucmVhc29uaW5nLmVmZm9ydDtcbiAgICAgICAgICAgIGRlbGV0ZSBjb3BpZWRNb2RlbFNldHRpbmdzLnJlYXNvbmluZy5zdW1tYXJ5O1xuICAgICAgICB9XG4gICAgICAgIGlmIChjb3BpZWRNb2RlbFNldHRpbmdzLnRleHQpIHtcbiAgICAgICAgICAgIGRlbGV0ZSBjb3BpZWRNb2RlbFNldHRpbmdzLnRleHQudmVyYm9zaXR5O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjb3BpZWRNb2RlbFNldHRpbmdzO1xuICAgIH1cbiAgICByZXR1cm4gbW9kZWxTZXR0aW5ncztcbn1cbi8qKlxuICogQGludGVybmFsXG4gKiBDb2xsZWN0cyB0b29scy9oYW5kb2ZmcyBlYXJseSBzbyB3ZSBjYW4gYW5ub3RhdGUgc3BhbnMgYmVmb3JlIG1vZGVsIGV4ZWN1dGlvbiBiZWdpbnMuXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIHByZXBhcmVBZ2VudEFydGlmYWN0cyhzdGF0ZSkge1xuICAgIGNvbnN0IGhhbmRvZmZzID0gYXdhaXQgc3RhdGUuX2N1cnJlbnRBZ2VudC5nZXRFbmFibGVkSGFuZG9mZnMoc3RhdGUuX2NvbnRleHQpO1xuICAgIGNvbnN0IHRvb2xzID0gYXdhaXQgc3RhdGUuX2N1cnJlbnRBZ2VudC5nZXRBbGxUb29scyhzdGF0ZS5fY29udGV4dCk7XG4gICAgY29uc3QgY29tcHV0ZXJUb29scyA9IHRvb2xzLmZpbHRlcigodG9vbCkgPT4gdG9vbC50eXBlID09PSAnY29tcHV0ZXInKTtcbiAgICBpZiAoY29tcHV0ZXJUb29scy5sZW5ndGggPiAwKSB7XG4gICAgICAgIGF3YWl0IFByb21pc2UuYWxsKGNvbXB1dGVyVG9vbHMubWFwKGFzeW5jICh0b29sKSA9PiB7XG4gICAgICAgICAgICBhd2FpdCByZXNvbHZlQ29tcHV0ZXIoeyB0b29sLCBydW5Db250ZXh0OiBzdGF0ZS5fY29udGV4dCB9KTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBpZiAoIXN0YXRlLl9jdXJyZW50QWdlbnRTcGFuKSB7XG4gICAgICAgIGNvbnN0IGhhbmRvZmZOYW1lcyA9IGhhbmRvZmZzLm1hcCgoaCkgPT4gaC5hZ2VudE5hbWUpO1xuICAgICAgICBzdGF0ZS5fY3VycmVudEFnZW50U3BhbiA9IGNyZWF0ZUFnZW50U3Bhbih7XG4gICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgbmFtZTogc3RhdGUuX2N1cnJlbnRBZ2VudC5uYW1lLFxuICAgICAgICAgICAgICAgIGhhbmRvZmZzOiBoYW5kb2ZmTmFtZXMsXG4gICAgICAgICAgICAgICAgdG9vbHM6IHRvb2xzLm1hcCgodCkgPT4gdC5uYW1lKSxcbiAgICAgICAgICAgICAgICBvdXRwdXRfdHlwZTogc3RhdGUuX2N1cnJlbnRBZ2VudC5vdXRwdXRTY2hlbWFOYW1lLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgICAgIHN0YXRlLl9jdXJyZW50QWdlbnRTcGFuLnN0YXJ0KCk7XG4gICAgICAgIHNldEN1cnJlbnRTcGFuKHN0YXRlLl9jdXJyZW50QWdlbnRTcGFuKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHN0YXRlLl9jdXJyZW50QWdlbnRTcGFuLnNwYW5EYXRhLnRvb2xzID0gdG9vbHMubWFwKCh0KSA9PiB0Lm5hbWUpO1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgICBoYW5kb2ZmcyxcbiAgICAgICAgdG9vbHMsXG4gICAgICAgIHNlcmlhbGl6ZWRIYW5kb2ZmczogaGFuZG9mZnMubWFwKChoYW5kb2ZmKSA9PiBzZXJpYWxpemVIYW5kb2ZmKGhhbmRvZmYpKSxcbiAgICAgICAgc2VyaWFsaXplZFRvb2xzOiB0b29scy5tYXAoKHRvb2wpID0+IHNlcmlhbGl6ZVRvb2wodG9vbCkpLFxuICAgICAgICB0b29sc0V4cGxpY2l0bHlQcm92aWRlZDogc3RhdGUuX2N1cnJlbnRBZ2VudC5oYXNFeHBsaWNpdFRvb2xDb25maWcoKSxcbiAgICB9O1xufVxuZnVuY3Rpb24gZ2V0QWdlbnRJbnB1dEl0ZW1LZXkoaXRlbSkge1xuICAgIC8vIERlZXAgc2VyaWFsaXphdGlvbiBrZWVwcyBiaW5hcnkgaW5wdXRzIGNvbXBhcmFibGUgYWZ0ZXIgZmlsdGVycyBjbG9uZSB0aGVtLlxuICAgIHJldHVybiBKU09OLnN0cmluZ2lmeShpdGVtLCBhZ2VudElucHV0U2VyaWFsaXphdGlvblJlcGxhY2VyKTtcbn1cbmZ1bmN0aW9uIGJ1aWxkQWdlbnRJbnB1dFBvb2woaXRlbXMpIHtcbiAgICAvLyBUcmFjayBldmVyeSBvcmlnaW5hbCBvYmplY3Qgc28gZmlsdGVycyBjYW4gc2FmZWx5IHJldHVybiBjbG9uZWQgY29waWVzLlxuICAgIGNvbnN0IHBvb2wgPSBuZXcgTWFwKCk7XG4gICAgZm9yIChjb25zdCBpdGVtIG9mIGl0ZW1zKSB7XG4gICAgICAgIGNvbnN0IGtleSA9IGdldEFnZW50SW5wdXRJdGVtS2V5KGl0ZW0pO1xuICAgICAgICBjb25zdCBleGlzdGluZyA9IHBvb2wuZ2V0KGtleSk7XG4gICAgICAgIGlmIChleGlzdGluZykge1xuICAgICAgICAgICAgZXhpc3RpbmcucHVzaChpdGVtKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHBvb2wuc2V0KGtleSwgW2l0ZW1dKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcG9vbDtcbn1cbmZ1bmN0aW9uIHRha2VBZ2VudElucHV0RnJvbVBvb2wocG9vbCwga2V5KSB7XG4gICAgLy8gUHJlZmVyIHJldXNpbmcgdGhlIGVhcmxpZXN0IHVudG91Y2hlZCBvcmlnaW5hbCB0byBrZWVwIG9yZGVyaW5nIHN0YWJsZS5cbiAgICBjb25zdCBjYW5kaWRhdGVzID0gcG9vbC5nZXQoa2V5KTtcbiAgICBpZiAoIWNhbmRpZGF0ZXMgfHwgY2FuZGlkYXRlcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG4gICAgY29uc3QgW2ZpcnN0XSA9IGNhbmRpZGF0ZXM7XG4gICAgY2FuZGlkYXRlcy5zaGlmdCgpO1xuICAgIGlmIChjYW5kaWRhdGVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICBwb29sLmRlbGV0ZShrZXkpO1xuICAgIH1cbiAgICByZXR1cm4gZmlyc3Q7XG59XG5mdW5jdGlvbiByZW1vdmVBZ2VudElucHV0RnJvbVBvb2wocG9vbCwgaXRlbSkge1xuICAgIC8vIFJlbW92ZSBleGFjdGx5IHRoZSBtYXRjaGVkIGluc3RhbmNlIHNvIGR1cGxpY2F0ZSBwYXlsb2FkcyByZW1haW4gYXZhaWxhYmxlLlxuICAgIGNvbnN0IGtleSA9IGdldEFnZW50SW5wdXRJdGVtS2V5KGl0ZW0pO1xuICAgIGNvbnN0IGNhbmRpZGF0ZXMgPSBwb29sLmdldChrZXkpO1xuICAgIGlmICghY2FuZGlkYXRlcyB8fCBjYW5kaWRhdGVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IGluZGV4ID0gY2FuZGlkYXRlcy5maW5kSW5kZXgoKGNhbmRpZGF0ZSkgPT4gY2FuZGlkYXRlID09PSBpdGVtKTtcbiAgICBpZiAoaW5kZXggPT09IC0xKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY2FuZGlkYXRlcy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgIGlmIChjYW5kaWRhdGVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICBwb29sLmRlbGV0ZShrZXkpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGFnZW50SW5wdXRTZXJpYWxpemF0aW9uUmVwbGFjZXIoX2tleSwgdmFsdWUpIHtcbiAgICAvLyBNaXJyb3IgcnVuSW1wbGVtZW50YXRpb24gc2VyaWFsaXphdGlvbiBzbyBidWZmZXIgc25hcHNob3RzIHJvdW5kLXRyaXAuXG4gICAgaWYgKHZhbHVlIGluc3RhbmNlb2YgQXJyYXlCdWZmZXIpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIF9fdHlwZTogJ0FycmF5QnVmZmVyJyxcbiAgICAgICAgICAgIGRhdGE6IGVuY29kZVVpbnQ4QXJyYXlUb0Jhc2U2NChuZXcgVWludDhBcnJheSh2YWx1ZSkpLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBpZiAoaXNBcnJheUJ1ZmZlclZpZXcodmFsdWUpKSB7XG4gICAgICAgIGNvbnN0IHZpZXcgPSB2YWx1ZTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIF9fdHlwZTogdmlldy5jb25zdHJ1Y3Rvci5uYW1lLFxuICAgICAgICAgICAgZGF0YTogZW5jb2RlVWludDhBcnJheVRvQmFzZTY0KG5ldyBVaW50OEFycmF5KHZpZXcuYnVmZmVyLCB2aWV3LmJ5dGVPZmZzZXQsIHZpZXcuYnl0ZUxlbmd0aCkpLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBpZiAoaXNOb2RlQnVmZmVyKHZhbHVlKSkge1xuICAgICAgICBjb25zdCB2aWV3ID0gdmFsdWU7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBfX3R5cGU6ICdCdWZmZXInLFxuICAgICAgICAgICAgZGF0YTogZW5jb2RlVWludDhBcnJheVRvQmFzZTY0KG5ldyBVaW50OEFycmF5KHZpZXcuYnVmZmVyLCB2aWV3LmJ5dGVPZmZzZXQsIHZpZXcuYnl0ZUxlbmd0aCkpLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBpZiAoaXNTZXJpYWxpemVkQnVmZmVyU25hcHNob3QodmFsdWUpKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBfX3R5cGU6ICdCdWZmZXInLFxuICAgICAgICAgICAgZGF0YTogZW5jb2RlVWludDhBcnJheVRvQmFzZTY0KFVpbnQ4QXJyYXkuZnJvbSh2YWx1ZS5kYXRhKSksXG4gICAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiB2YWx1ZTtcbn1cbi8vIE5vcm1hbGl6ZXMgdXNlci1wcm92aWRlZCBpbnB1dCBpbnRvIHRoZSBzdHJ1Y3R1cmUgdGhlIG1vZGVsIGV4cGVjdHMuIFN0cmluZ3MgYmVjb21lIHVzZXIgbWVzc2FnZXMsXG4vLyBhcnJheXMgYXJlIGtlcHQgYXMtaXMgc28gZG93bnN0cmVhbSBsb29wcyBjYW4gdHJlYXQgYm90aCBzY2VuYXJpb3MgdW5pZm9ybWx5LlxuZnVuY3Rpb24gdG9BZ2VudElucHV0TGlzdChvcmlnaW5hbElucHV0KSB7XG4gICAgLy8gQWxsb3cgY2FsbGVycyB0byBwYXNzIHBsYWluIHN0cmluZ3Mgd2hpbGUgcHJlc2VydmluZyBvcmlnaW5hbCBpdGVtIG9yZGVyLlxuICAgIGlmICh0eXBlb2Ygb3JpZ2luYWxJbnB1dCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgcmV0dXJuIFt7IHR5cGU6ICdtZXNzYWdlJywgcm9sZTogJ3VzZXInLCBjb250ZW50OiBvcmlnaW5hbElucHV0IH1dO1xuICAgIH1cbiAgICByZXR1cm4gWy4uLm9yaWdpbmFsSW5wdXRdO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cnVuLm1qcy5tYXAiLCJpbXBvcnQgeyBSZWFkYWJsZVN0cmVhbSBhcyBfUmVhZGFibGVTdHJlYW0sIFRyYW5zZm9ybVN0cmVhbSwgUmVhZGFibGUsIH0gZnJvbSAnQG9wZW5haS9hZ2VudHMtY29yZS9fc2hpbXMnO1xuaW1wb3J0IHsgZ2V0VHVybklucHV0IH0gZnJvbSBcIi4vcnVuLm1qc1wiO1xuaW1wb3J0IGxvZ2dlciBmcm9tIFwiLi9sb2dnZXIubWpzXCI7XG5pbXBvcnQgeyBTdHJlYW1FdmVudFRleHRTdHJlYW0gfSBmcm9tIFwiLi90eXBlcy9wcm90b2NvbC5tanNcIjtcbmNsYXNzIFJ1blJlc3VsdEJhc2Uge1xuICAgIHN0YXRlO1xuICAgIGNvbnN0cnVjdG9yKHN0YXRlKSB7XG4gICAgICAgIHRoaXMuc3RhdGUgPSBzdGF0ZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIGhpc3Rvcnkgb2YgdGhlIGFnZW50IHJ1bi4gVGhpcyBpbmNsdWRlcyB0aGUgaW5wdXQgaXRlbXMgYW5kIHRoZSBuZXcgaXRlbXMgZ2VuZXJhdGVkIGR1cmluZ1xuICAgICAqIHRoZSBhZ2VudCBydW4uXG4gICAgICpcbiAgICAgKiBUaGlzIGNhbiBiZSB1c2VkIGFzIGlucHV0cyBmb3IgdGhlIG5leHQgYWdlbnQgcnVuLlxuICAgICAqL1xuICAgIGdldCBoaXN0b3J5KCkge1xuICAgICAgICByZXR1cm4gZ2V0VHVybklucHV0KHRoaXMuaW5wdXQsIHRoaXMubmV3SXRlbXMpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgbmV3IGl0ZW1zIGdlbmVyYXRlZCBkdXJpbmcgdGhlIGFnZW50IHJ1bi4gVGhlc2UgaW5jbHVkZSB0aGluZ3MgbGlrZSBuZXcgbWVzc2FnZXMsIHRvb2xcbiAgICAgKiBjYWxscyBhbmQgdGhlaXIgb3V0cHV0cywgZXRjLlxuICAgICAqXG4gICAgICogSXQgZG9lcyBub3QgaW5jbHVkZSBpbmZvcm1hdGlvbiBhYm91dCB0aGUgYWdlbnRzIGFuZCBpbnN0ZWFkIHJlcHJlc2VudHMgdGhlIG1vZGVsIGRhdGEuXG4gICAgICpcbiAgICAgKiBGb3IgdGhlIG91dHB1dCBpbmNsdWRpbmcgdGhlIGFnZW50cywgdXNlIHRoZSBgbmV3SXRlbXNgIHByb3BlcnR5LlxuICAgICAqL1xuICAgIGdldCBvdXRwdXQoKSB7XG4gICAgICAgIHJldHVybiBnZXRUdXJuSW5wdXQoW10sIHRoaXMubmV3SXRlbXMpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBIGNvcHkgb2YgdGhlIG9yaWdpbmFsIGlucHV0IGl0ZW1zLlxuICAgICAqL1xuICAgIGdldCBpbnB1dCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3RhdGUuX29yaWdpbmFsSW5wdXQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBydW4gaXRlbXMgZ2VuZXJhdGVkIGR1cmluZyB0aGUgYWdlbnQgcnVuLiBUaGlzIGFzc29jaWF0ZXMgdGhlIG1vZGVsIGRhdGEgd2l0aCB0aGUgYWdlbnRzLlxuICAgICAqXG4gICAgICogRm9yIHRoZSBtb2RlbCBkYXRhIHRoYXQgY2FuIGJlIHVzZWQgYXMgaW5wdXRzIGZvciB0aGUgbmV4dCBhZ2VudCBydW4sIHVzZSB0aGUgYG91dHB1dGAgcHJvcGVydHkuXG4gICAgICovXG4gICAgZ2V0IG5ld0l0ZW1zKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zdGF0ZS5fZ2VuZXJhdGVkSXRlbXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSByYXcgTExNIHJlc3BvbnNlcyBnZW5lcmF0ZWQgYnkgdGhlIG1vZGVsIGR1cmluZyB0aGUgYWdlbnQgcnVuLlxuICAgICAqL1xuICAgIGdldCByYXdSZXNwb25zZXMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnN0YXRlLl9tb2RlbFJlc3BvbnNlcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIGxhc3QgcmVzcG9uc2UgSUQgZ2VuZXJhdGVkIGJ5IHRoZSBtb2RlbCBkdXJpbmcgdGhlIGFnZW50IHJ1bi5cbiAgICAgKi9cbiAgICBnZXQgbGFzdFJlc3BvbnNlSWQoKSB7XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlcyA9IHRoaXMucmF3UmVzcG9uc2VzO1xuICAgICAgICByZXR1cm4gcmVzcG9uc2VzICYmIHJlc3BvbnNlcy5sZW5ndGggPiAwXG4gICAgICAgICAgICA/IHJlc3BvbnNlc1tyZXNwb25zZXMubGVuZ3RoIC0gMV0ucmVzcG9uc2VJZFxuICAgICAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBsYXN0IGFnZW50IHRoYXQgd2FzIHJ1blxuICAgICAqL1xuICAgIGdldCBsYXN0QWdlbnQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnN0YXRlLl9jdXJyZW50QWdlbnQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEd1YXJkcmFpbCByZXN1bHRzIGZvciB0aGUgaW5wdXQgbWVzc2FnZXMuXG4gICAgICovXG4gICAgZ2V0IGlucHV0R3VhcmRyYWlsUmVzdWx0cygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3RhdGUuX2lucHV0R3VhcmRyYWlsUmVzdWx0cztcbiAgICB9XG4gICAgLyoqXG4gICAgICogR3VhcmRyYWlsIHJlc3VsdHMgZm9yIHRoZSBmaW5hbCBvdXRwdXQgb2YgdGhlIGFnZW50LlxuICAgICAqL1xuICAgIGdldCBvdXRwdXRHdWFyZHJhaWxSZXN1bHRzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zdGF0ZS5fb3V0cHV0R3VhcmRyYWlsUmVzdWx0cztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQW55IGludGVycnVwdGlvbnMgdGhhdCBvY2N1cnJlZCBkdXJpbmcgdGhlIGFnZW50IHJ1biBmb3IgZXhhbXBsZSBmb3IgdG9vbCBhcHByb3ZhbHMuXG4gICAgICovXG4gICAgZ2V0IGludGVycnVwdGlvbnMoKSB7XG4gICAgICAgIGlmICh0aGlzLnN0YXRlLl9jdXJyZW50U3RlcD8udHlwZSA9PT0gJ25leHRfc3RlcF9pbnRlcnJ1cHRpb24nKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zdGF0ZS5fY3VycmVudFN0ZXAuZGF0YS5pbnRlcnJ1cHRpb25zO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBbXTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIGZpbmFsIG91dHB1dCBvZiB0aGUgYWdlbnQuIElmIHRoZSBvdXRwdXQgdHlwZSB3YXMgc2V0IHRvIGFueXRoaW5nIG90aGVyIHRoYW4gYHRleHRgLFxuICAgICAqIHRoaXMgd2lsbCBiZSBwYXJzZWQgZWl0aGVyIGFzIEpTT04gb3IgdXNpbmcgdGhlIFpvZCBzY2hlbWEgeW91IHByb3ZpZGVkLlxuICAgICAqL1xuICAgIGdldCBmaW5hbE91dHB1dCgpIHtcbiAgICAgICAgaWYgKHRoaXMuc3RhdGUuX2N1cnJlbnRTdGVwPy50eXBlID09PSAnbmV4dF9zdGVwX2ZpbmFsX291dHB1dCcpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnN0YXRlLl9jdXJyZW50QWdlbnQucHJvY2Vzc0ZpbmFsT3V0cHV0KHRoaXMuc3RhdGUuX2N1cnJlbnRTdGVwLm91dHB1dCk7XG4gICAgICAgIH1cbiAgICAgICAgbG9nZ2VyLndhcm4oJ0FjY2Vzc2VkIGZpbmFsT3V0cHV0IGJlZm9yZSBhZ2VudCBydW4gaXMgY29tcGxldGVkLicpO1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbn1cbi8qKlxuICogVGhlIHJlc3VsdCBvZiBhbiBhZ2VudCBydW4uXG4gKi9cbmV4cG9ydCBjbGFzcyBSdW5SZXN1bHQgZXh0ZW5kcyBSdW5SZXN1bHRCYXNlIHtcbiAgICBjb25zdHJ1Y3RvcihzdGF0ZSkge1xuICAgICAgICBzdXBlcihzdGF0ZSk7XG4gICAgfVxufVxuLyoqXG4gKiBUaGUgcmVzdWx0IG9mIGFuIGFnZW50IHJ1biBpbiBzdHJlYW1pbmcgbW9kZS5cbiAqL1xuZXhwb3J0IGNsYXNzIFN0cmVhbWVkUnVuUmVzdWx0IGV4dGVuZHMgUnVuUmVzdWx0QmFzZSB7XG4gICAgLyoqXG4gICAgICogVGhlIGN1cnJlbnQgYWdlbnQgdGhhdCBpcyBydW5uaW5nXG4gICAgICovXG4gICAgZ2V0IGN1cnJlbnRBZ2VudCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubGFzdEFnZW50O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgY3VycmVudCB0dXJuIG51bWJlclxuICAgICAqL1xuICAgIGN1cnJlbnRUdXJuID0gMDtcbiAgICAvKipcbiAgICAgKiBUaGUgbWF4aW11bSBudW1iZXIgb2YgdHVybnMgdGhhdCBjYW4gYmUgcnVuXG4gICAgICovXG4gICAgbWF4VHVybnM7XG4gICAgI2Vycm9yID0gbnVsbDtcbiAgICAjc2lnbmFsO1xuICAgICNyZWFkYWJsZUNvbnRyb2xsZXI7XG4gICAgI3JlYWRhYmxlU3RyZWFtO1xuICAgICNjb21wbGV0ZWRQcm9taXNlO1xuICAgICNjb21wbGV0ZWRQcm9taXNlUmVzb2x2ZTtcbiAgICAjY29tcGxldGVkUHJvbWlzZVJlamVjdDtcbiAgICAjY2FuY2VsbGVkID0gZmFsc2U7XG4gICAgI3N0cmVhbUxvb3BQcm9taXNlO1xuICAgIGNvbnN0cnVjdG9yKHJlc3VsdCA9IHt9KSB7XG4gICAgICAgIHN1cGVyKHJlc3VsdC5zdGF0ZSk7XG4gICAgICAgIHRoaXMuI3NpZ25hbCA9IHJlc3VsdC5zaWduYWw7XG4gICAgICAgIHRoaXMuI3JlYWRhYmxlU3RyZWFtID0gbmV3IF9SZWFkYWJsZVN0cmVhbSh7XG4gICAgICAgICAgICBzdGFydDogKGNvbnRyb2xsZXIpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLiNyZWFkYWJsZUNvbnRyb2xsZXIgPSBjb250cm9sbGVyO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGNhbmNlbDogKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuI2NhbmNlbGxlZCA9IHRydWU7XG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy4jY29tcGxldGVkUHJvbWlzZSA9IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgIHRoaXMuI2NvbXBsZXRlZFByb21pc2VSZXNvbHZlID0gcmVzb2x2ZTtcbiAgICAgICAgICAgIHRoaXMuI2NvbXBsZXRlZFByb21pc2VSZWplY3QgPSByZWplY3Q7XG4gICAgICAgIH0pO1xuICAgICAgICBpZiAodGhpcy4jc2lnbmFsKSB7XG4gICAgICAgICAgICBjb25zdCBoYW5kbGVBYm9ydCA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy4jY2FuY2VsbGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy4jY2FuY2VsbGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBjb25zdCBjb250cm9sbGVyID0gdGhpcy4jcmVhZGFibGVDb250cm9sbGVyO1xuICAgICAgICAgICAgICAgIHRoaXMuI3JlYWRhYmxlQ29udHJvbGxlciA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy4jcmVhZGFibGVTdHJlYW0ubG9ja2VkKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjb250cm9sbGVyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZXIuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2dnZXIuZGVidWcoYEZhaWxlZCB0byBjbG9zZSByZWFkYWJsZSBzdHJlYW0gb24gYWJvcnQ6ICR7ZXJyfWApO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB2b2lkIHRoaXMuI3JlYWRhYmxlU3RyZWFtXG4gICAgICAgICAgICAgICAgICAgICAgICAuY2FuY2VsKHRoaXMuI3NpZ25hbD8ucmVhc29uKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZyhgRmFpbGVkIHRvIGNhbmNlbCByZWFkYWJsZSBzdHJlYW0gb24gYWJvcnQ6ICR7ZXJyfWApO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy4jY29tcGxldGVkUHJvbWlzZVJlc29sdmU/LigpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGlmICh0aGlzLiNzaWduYWwuYWJvcnRlZCkge1xuICAgICAgICAgICAgICAgIGhhbmRsZUFib3J0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLiNzaWduYWwuYWRkRXZlbnRMaXN0ZW5lcignYWJvcnQnLCBoYW5kbGVBYm9ydCwgeyBvbmNlOiB0cnVlIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqIEFkZHMgYW4gaXRlbSB0byB0aGUgc3RyZWFtIG9mIG91dHB1dCBpdGVtc1xuICAgICAqL1xuICAgIF9hZGRJdGVtKGl0ZW0pIHtcbiAgICAgICAgaWYgKCF0aGlzLmNhbmNlbGxlZCkge1xuICAgICAgICAgICAgdGhpcy4jcmVhZGFibGVDb250cm9sbGVyPy5lbnF1ZXVlKGl0ZW0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqIEluZGljYXRlcyB0aGF0IHRoZSBzdHJlYW0gaGFzIGJlZW4gY29tcGxldGVkXG4gICAgICovXG4gICAgX2RvbmUoKSB7XG4gICAgICAgIGlmICghdGhpcy5jYW5jZWxsZWQgJiYgdGhpcy4jcmVhZGFibGVDb250cm9sbGVyKSB7XG4gICAgICAgICAgICB0aGlzLiNyZWFkYWJsZUNvbnRyb2xsZXIuY2xvc2UoKTtcbiAgICAgICAgICAgIHRoaXMuI3JlYWRhYmxlQ29udHJvbGxlciA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIHRoaXMuI2NvbXBsZXRlZFByb21pc2VSZXNvbHZlPy4oKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKiBIYW5kbGVzIGFuIGVycm9yIGluIHRoZSBzdHJlYW0gbG9vcC5cbiAgICAgKi9cbiAgICBfcmFpc2VFcnJvcihlcnIpIHtcbiAgICAgICAgaWYgKCF0aGlzLmNhbmNlbGxlZCAmJiB0aGlzLiNyZWFkYWJsZUNvbnRyb2xsZXIpIHtcbiAgICAgICAgICAgIHRoaXMuI3JlYWRhYmxlQ29udHJvbGxlci5lcnJvcihlcnIpO1xuICAgICAgICAgICAgdGhpcy4jcmVhZGFibGVDb250cm9sbGVyID0gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuI2Vycm9yID0gZXJyO1xuICAgICAgICB0aGlzLiNjb21wbGV0ZWRQcm9taXNlUmVqZWN0Py4oZXJyKTtcbiAgICAgICAgdGhpcy4jY29tcGxldGVkUHJvbWlzZS5jYXRjaCgoZSkgPT4ge1xuICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKGBSZXN1bHRlZCBpbiBhbiBlcnJvcjogJHtlfWApO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0cnVlIGlmIHRoZSBzdHJlYW0gaGFzIGJlZW4gY2FuY2VsbGVkLlxuICAgICAqL1xuICAgIGdldCBjYW5jZWxsZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiNjYW5jZWxsZWQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIHVuZGVybHlpbmcgcmVhZGFibGUgc3RyZWFtLlxuICAgICAqIEByZXR1cm5zIEEgcmVhZGFibGUgc3RyZWFtIG9mIHRoZSBhZ2VudCBydW4uXG4gICAgICovXG4gICAgdG9TdHJlYW0oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiNyZWFkYWJsZVN0cmVhbTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQXdhaXQgdGhpcyBwcm9taXNlIHRvIGVuc3VyZSB0aGF0IHRoZSBzdHJlYW0gaGFzIGJlZW4gY29tcGxldGVkIGlmIHlvdSBhcmUgbm90IGNvbnN1bWluZyB0aGVcbiAgICAgKiBzdHJlYW0gZGlyZWN0bHkuXG4gICAgICovXG4gICAgZ2V0IGNvbXBsZXRlZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuI2NvbXBsZXRlZFByb21pc2U7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEVycm9yIHRocm93biBkdXJpbmcgdGhlIHJ1biwgaWYgYW55LlxuICAgICAqL1xuICAgIGdldCBlcnJvcigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuI2Vycm9yO1xuICAgIH1cbiAgICB0b1RleHRTdHJlYW0ob3B0aW9ucyA9IHt9KSB7XG4gICAgICAgIGNvbnN0IHN0cmVhbSA9IHRoaXMuI3JlYWRhYmxlU3RyZWFtLnBpcGVUaHJvdWdoKG5ldyBUcmFuc2Zvcm1TdHJlYW0oe1xuICAgICAgICAgICAgdHJhbnNmb3JtKGV2ZW50LCBjb250cm9sbGVyKSB7XG4gICAgICAgICAgICAgICAgaWYgKGV2ZW50LnR5cGUgPT09ICdyYXdfbW9kZWxfc3RyZWFtX2V2ZW50JyAmJlxuICAgICAgICAgICAgICAgICAgICBldmVudC5kYXRhLnR5cGUgPT09ICdvdXRwdXRfdGV4dF9kZWx0YScpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaXRlbSA9IFN0cmVhbUV2ZW50VGV4dFN0cmVhbS5wYXJzZShldmVudC5kYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgY29udHJvbGxlci5lbnF1ZXVlKGl0ZW0uZGVsdGEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pKTtcbiAgICAgICAgaWYgKG9wdGlvbnMuY29tcGF0aWJsZVdpdGhOb2RlU3RyZWFtcykge1xuICAgICAgICAgICAgcmV0dXJuIFJlYWRhYmxlLmZyb21XZWIoc3RyZWFtKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc3RyZWFtO1xuICAgIH1cbiAgICBbU3ltYm9sLmFzeW5jSXRlcmF0b3JdKCkge1xuICAgICAgICByZXR1cm4gdGhpcy4jcmVhZGFibGVTdHJlYW1bU3ltYm9sLmFzeW5jSXRlcmF0b3JdKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqIFNldHMgdGhlIHN0cmVhbSBsb29wIHByb21pc2UgdGhhdCBjb21wbGV0ZXMgd2hlbiB0aGUgaW50ZXJuYWwgc3RyZWFtIGxvb3AgZmluaXNoZXMuXG4gICAgICogVGhpcyBpcyB1c2VkIHRvIGRlZmVyIHRyYWNlIGVuZCB1bnRpbCBhbGwgYWdlbnQgd29yayBpcyBjb21wbGV0ZS5cbiAgICAgKi9cbiAgICBfc2V0U3RyZWFtTG9vcFByb21pc2UocHJvbWlzZSkge1xuICAgICAgICB0aGlzLiNzdHJlYW1Mb29wUHJvbWlzZSA9IHByb21pc2U7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqIFJldHVybnMgYSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgd2hlbiB0aGUgc3RyZWFtIGxvb3AgY29tcGxldGVzLlxuICAgICAqIFRoaXMgaXMgdXNlZCBieSB0aGUgdHJhY2luZyBzeXN0ZW0gdG8gd2FpdCBmb3IgYWxsIGFnZW50IHdvcmsgYmVmb3JlIGVuZGluZyB0aGUgdHJhY2UuXG4gICAgICovXG4gICAgX2dldFN0cmVhbUxvb3BQcm9taXNlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy4jc3RyZWFtTG9vcFByb21pc2U7XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cmVzdWx0Lm1qcy5tYXAiLCJpbXBvcnQgeyBBc3luY0xvY2FsU3RvcmFnZSB9IGZyb20gJ0BvcGVuYWkvYWdlbnRzLWNvcmUvX3NoaW1zJztcbmltcG9ydCB7IGdldEdsb2JhbFRyYWNlUHJvdmlkZXIgfSBmcm9tIFwiLi9wcm92aWRlci5tanNcIjtcbmltcG9ydCB7IFN0cmVhbWVkUnVuUmVzdWx0IH0gZnJvbSBcIi4uL3Jlc3VsdC5tanNcIjtcbmxldCBfY29udGV4dEFzeW5jTG9jYWxTdG9yYWdlO1xuZnVuY3Rpb24gZ2V0Q29udGV4dEFzeW5jTG9jYWxTdG9yYWdlKCkge1xuICAgIF9jb250ZXh0QXN5bmNMb2NhbFN0b3JhZ2UgPz89IG5ldyBBc3luY0xvY2FsU3RvcmFnZSgpO1xuICAgIHJldHVybiBfY29udGV4dEFzeW5jTG9jYWxTdG9yYWdlO1xufVxuLyoqXG4gKiBUaGlzIGZ1bmN0aW9uIHdpbGwgZ2V0IHRoZSBjdXJyZW50IHRyYWNlIGZyb20gdGhlIGV4ZWN1dGlvbiBjb250ZXh0LlxuICpcbiAqIEByZXR1cm5zIFRoZSBjdXJyZW50IHRyYWNlIG9yIG51bGwgaWYgdGhlcmUgaXMgbm8gdHJhY2UuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRDdXJyZW50VHJhY2UoKSB7XG4gICAgY29uc3QgY3VycmVudFRyYWNlID0gZ2V0Q29udGV4dEFzeW5jTG9jYWxTdG9yYWdlKCkuZ2V0U3RvcmUoKTtcbiAgICBpZiAoY3VycmVudFRyYWNlPy50cmFjZSkge1xuICAgICAgICByZXR1cm4gY3VycmVudFRyYWNlLnRyYWNlO1xuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbn1cbi8qKlxuICogVGhpcyBmdW5jdGlvbiB3aWxsIGdldCB0aGUgY3VycmVudCBzcGFuIGZyb20gdGhlIGV4ZWN1dGlvbiBjb250ZXh0LlxuICpcbiAqIEByZXR1cm5zIFRoZSBjdXJyZW50IHNwYW4gb3IgbnVsbCBpZiB0aGVyZSBpcyBubyBzcGFuLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0Q3VycmVudFNwYW4oKSB7XG4gICAgY29uc3QgY3VycmVudFNwYW4gPSBnZXRDb250ZXh0QXN5bmNMb2NhbFN0b3JhZ2UoKS5nZXRTdG9yZSgpO1xuICAgIGlmIChjdXJyZW50U3Bhbj8uc3Bhbikge1xuICAgICAgICByZXR1cm4gY3VycmVudFNwYW4uc3BhbjtcbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG59XG4vKipcbiAqIFRoaXMgaXMgYW4gQXN5bmNMb2NhbFN0b3JhZ2UgaW5zdGFuY2UgdGhhdCBzdG9yZXMgdGhlIGN1cnJlbnQgdHJhY2UuXG4gKiBJdCB3aWxsIGF1dG9tYXRpY2FsbHkgaGFuZGxlIHRoZSBleGVjdXRpb24gY29udGV4dCBvZiBkaWZmZXJlbnQgZXZlbnQgbG9vcCBleGVjdXRpb25zLlxuICpcbiAqIFRoZSBmdW5jdGlvbnMgYmVsb3cgc2hvdWxkIGJlIHRoZSBvbmx5IHdheSB0aGF0IHRoaXMgY29udGV4dCBnZXRzIGludGVyZmFjZWQgd2l0aC5cbiAqL1xuZnVuY3Rpb24gX3dyYXBGdW5jdGlvbldpdGhUcmFjZUxpZmVjeWNsZShmbikge1xuICAgIHJldHVybiBhc3luYyAoKSA9PiB7XG4gICAgICAgIGNvbnN0IHRyYWNlID0gZ2V0Q3VycmVudFRyYWNlKCk7XG4gICAgICAgIGlmICghdHJhY2UpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignTm8gdHJhY2UgZm91bmQnKTtcbiAgICAgICAgfVxuICAgICAgICBhd2FpdCB0cmFjZS5zdGFydCgpO1xuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBmbih0cmFjZSk7XG4gICAgICAgIC8vIElmIHJlc3VsdCBpcyBhIFN0cmVhbWVkUnVuUmVzdWx0LCBkZWZlciB0cmFjZSBlbmQgdW50aWwgc3RyZWFtIGxvb3AgY29tcGxldGVzXG4gICAgICAgIGlmIChyZXN1bHQgaW5zdGFuY2VvZiBTdHJlYW1lZFJ1blJlc3VsdCkge1xuICAgICAgICAgICAgY29uc3Qgc3RyZWFtTG9vcFByb21pc2UgPSByZXN1bHQuX2dldFN0cmVhbUxvb3BQcm9taXNlKCk7XG4gICAgICAgICAgICBpZiAoc3RyZWFtTG9vcFByb21pc2UpIHtcbiAgICAgICAgICAgICAgICBzdHJlYW1Mb29wUHJvbWlzZS5maW5hbGx5KCgpID0+IHRyYWNlLmVuZCgpKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIEZvciBub24tc3RyZWFtaW5nIHJlc3VsdHMsIGVuZCB0cmFjZSBzeW5jaHJvbm91c2x5XG4gICAgICAgIGF3YWl0IHRyYWNlLmVuZCgpO1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH07XG59XG4vKipcbiAqIFRoaXMgZnVuY3Rpb24gd2lsbCBjcmVhdGUgYSBuZXcgdHJhY2UgYW5kIGFzc2lnbiBpdCB0byB0aGUgZXhlY3V0aW9uIGNvbnRleHQgb2YgdGhlIGZ1bmN0aW9uXG4gKiBwYXNzZWQgdG8gaXQuXG4gKlxuICogQHBhcmFtIGZuIC0gVGhlIGZ1bmN0aW9uIHRvIHJ1biBhbmQgYXNzaWduIHRoZSB0cmFjZSBjb250ZXh0IHRvLlxuICogQHBhcmFtIG9wdGlvbnMgLSBPcHRpb25zIGZvciB0aGUgY3JlYXRpb24gb2YgdGhlIHRyYWNlXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB3aXRoVHJhY2UodHJhY2UsIGZuLCBvcHRpb25zID0ge30pIHtcbiAgICBjb25zdCBuZXdUcmFjZSA9IHR5cGVvZiB0cmFjZSA9PT0gJ3N0cmluZydcbiAgICAgICAgPyBnZXRHbG9iYWxUcmFjZVByb3ZpZGVyKCkuY3JlYXRlVHJhY2Uoe1xuICAgICAgICAgICAgLi4ub3B0aW9ucyxcbiAgICAgICAgICAgIG5hbWU6IHRyYWNlLFxuICAgICAgICB9KVxuICAgICAgICA6IHRyYWNlO1xuICAgIHJldHVybiBnZXRDb250ZXh0QXN5bmNMb2NhbFN0b3JhZ2UoKS5ydW4oeyB0cmFjZTogbmV3VHJhY2UgfSwgX3dyYXBGdW5jdGlvbldpdGhUcmFjZUxpZmVjeWNsZShmbikpO1xufVxuLyoqXG4gKiBUaGlzIGZ1bmN0aW9uIHdpbGwgY2hlY2sgaWYgdGhlcmUgaXMgYW4gZXhpc3RpbmcgYWN0aXZlIHRyYWNlIGluIHRoZSBleGVjdXRpb24gY29udGV4dC4gSWYgdGhlcmVcbiAqIGlzLCBpdCB3aWxsIHJ1biB0aGUgZ2l2ZW4gZnVuY3Rpb24gd2l0aCB0aGUgZXhpc3RpbmcgdHJhY2UuIElmIHRoZXJlIGlzIG5vIHRyYWNlLCBpdCB3aWxsIGNyZWF0ZVxuICogYSBuZXcgb25lIGFuZCBhc3NpZ24gaXQgdG8gdGhlIGV4ZWN1dGlvbiBjb250ZXh0IG9mIHRoZSBmdW5jdGlvbi5cbiAqXG4gKiBAcGFyYW0gZm4gLSBUaGUgZnp1bmN0aW9uIHRvIHJ1biBhbmQgYXNzaWduIHRoZSB0cmFjZSBjb250ZXh0IHRvLlxuICogQHBhcmFtIG9wdGlvbnMgLSBPcHRpb25zIGZvciB0aGUgY3JlYXRpb24gb2YgdGhlIHRyYWNlXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRPckNyZWF0ZVRyYWNlKGZuLCBvcHRpb25zID0ge30pIHtcbiAgICBjb25zdCBjdXJyZW50VHJhY2UgPSBnZXRDdXJyZW50VHJhY2UoKTtcbiAgICBpZiAoY3VycmVudFRyYWNlKSB7XG4gICAgICAgIC8vIGlmIHRoaXMgZXhlY3V0aW9uIGNvbnRleHQgYWxyZWFkeSBoYXMgYSB0cmFjZSBpbnN0YW5jZSBpbiBpdCB3ZSBqdXN0IGNvbnRpbnVlXG4gICAgICAgIHJldHVybiBhd2FpdCBmbigpO1xuICAgIH1cbiAgICBjb25zdCBuZXdUcmFjZSA9IGdldEdsb2JhbFRyYWNlUHJvdmlkZXIoKS5jcmVhdGVUcmFjZShvcHRpb25zKTtcbiAgICByZXR1cm4gZ2V0Q29udGV4dEFzeW5jTG9jYWxTdG9yYWdlKCkucnVuKHsgdHJhY2U6IG5ld1RyYWNlIH0sIF93cmFwRnVuY3Rpb25XaXRoVHJhY2VMaWZlY3ljbGUoZm4pKTtcbn1cbi8qKlxuICogVGhpcyBmdW5jdGlvbiB3aWxsIHNldCB0aGUgY3VycmVudCBzcGFuIGluIHRoZSBleGVjdXRpb24gY29udGV4dC5cbiAqXG4gKiBAcGFyYW0gc3BhbiAtIFRoZSBzcGFuIHRvIHNldCBhcyB0aGUgY3VycmVudCBzcGFuLlxuICovXG5leHBvcnQgZnVuY3Rpb24gc2V0Q3VycmVudFNwYW4oc3Bhbikge1xuICAgIGNvbnN0IGNvbnRleHQgPSBnZXRDb250ZXh0QXN5bmNMb2NhbFN0b3JhZ2UoKS5nZXRTdG9yZSgpO1xuICAgIGlmICghY29udGV4dCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vIGV4aXN0aW5nIHRyYWNlIGZvdW5kJyk7XG4gICAgfVxuICAgIGlmIChjb250ZXh0LnNwYW4pIHtcbiAgICAgICAgY29udGV4dC5zcGFuLnByZXZpb3VzU3BhbiA9IGNvbnRleHQucHJldmlvdXNTcGFuO1xuICAgICAgICBjb250ZXh0LnByZXZpb3VzU3BhbiA9IGNvbnRleHQuc3BhbjtcbiAgICB9XG4gICAgc3Bhbi5wcmV2aW91c1NwYW4gPSBjb250ZXh0LnNwYW4gPz8gY29udGV4dC5wcmV2aW91c1NwYW47XG4gICAgY29udGV4dC5zcGFuID0gc3BhbjtcbiAgICBnZXRDb250ZXh0QXN5bmNMb2NhbFN0b3JhZ2UoKS5lbnRlcldpdGgoY29udGV4dCk7XG59XG5leHBvcnQgZnVuY3Rpb24gcmVzZXRDdXJyZW50U3BhbigpIHtcbiAgICBjb25zdCBjb250ZXh0ID0gZ2V0Q29udGV4dEFzeW5jTG9jYWxTdG9yYWdlKCkuZ2V0U3RvcmUoKTtcbiAgICBpZiAoY29udGV4dCkge1xuICAgICAgICBjb250ZXh0LnNwYW4gPSBjb250ZXh0LnByZXZpb3VzU3BhbjtcbiAgICAgICAgY29udGV4dC5wcmV2aW91c1NwYW4gPSBjb250ZXh0LnByZXZpb3VzU3Bhbj8ucHJldmlvdXNTcGFuO1xuICAgICAgICBnZXRDb250ZXh0QXN5bmNMb2NhbFN0b3JhZ2UoKS5lbnRlcldpdGgoY29udGV4dCk7XG4gICAgfVxufVxuLyoqXG4gKiBUaGlzIGZ1bmN0aW9uIHdpbGwgYWRkIGFuIGVycm9yIHRvIHRoZSBjdXJyZW50IHNwYW4uXG4gKlxuICogQHBhcmFtIHNwYW5FcnJvciAtIFRoZSBlcnJvciB0byBhZGQgdG8gdGhlIGN1cnJlbnQgc3Bhbi5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFkZEVycm9yVG9DdXJyZW50U3BhbihzcGFuRXJyb3IpIHtcbiAgICBjb25zdCBjdXJyZW50U3BhbiA9IGdldEN1cnJlbnRTcGFuKCk7XG4gICAgaWYgKGN1cnJlbnRTcGFuKSB7XG4gICAgICAgIGN1cnJlbnRTcGFuLnNldEVycm9yKHNwYW5FcnJvcik7XG4gICAgfVxufVxuLyoqXG4gKiBUaGlzIGZ1bmN0aW9uIHdpbGwgY2xvbmUgdGhlIGN1cnJlbnQgY29udGV4dCBieSBjcmVhdGluZyBuZXcgaW5zdGFuY2VzIG9mIHRoZSB0cmFjZSwgc3BhbiwgYW5kXG4gKiBwcmV2aW91cyBzcGFuLlxuICpcbiAqIEBwYXJhbSBjb250ZXh0IC0gVGhlIGNvbnRleHQgdG8gY2xvbmUuXG4gKiBAcmV0dXJucyBBIGNsb25lIG9mIHRoZSBjb250ZXh0LlxuICovXG5leHBvcnQgZnVuY3Rpb24gY2xvbmVDdXJyZW50Q29udGV4dChjb250ZXh0KSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgdHJhY2U6IGNvbnRleHQudHJhY2U/LmNsb25lKCksXG4gICAgICAgIHNwYW46IGNvbnRleHQuc3Bhbj8uY2xvbmUoKSxcbiAgICAgICAgcHJldmlvdXNTcGFuOiBjb250ZXh0LnByZXZpb3VzU3Bhbj8uY2xvbmUoKSxcbiAgICB9O1xufVxuLyoqXG4gKiBUaGlzIGZ1bmN0aW9uIHdpbGwgcnVuIHRoZSBnaXZlbiBmdW5jdGlvbiB3aXRoIGEgbmV3IHNwYW4gY29udGV4dC5cbiAqXG4gKiBAcGFyYW0gZm4gLSBUaGUgZnVuY3Rpb24gdG8gcnVuIHdpdGggdGhlIG5ldyBzcGFuIGNvbnRleHQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB3aXRoTmV3U3BhbkNvbnRleHQoZm4pIHtcbiAgICBjb25zdCBjdXJyZW50Q29udGV4dCA9IGdldENvbnRleHRBc3luY0xvY2FsU3RvcmFnZSgpLmdldFN0b3JlKCk7XG4gICAgaWYgKCFjdXJyZW50Q29udGV4dCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vIGV4aXN0aW5nIHRyYWNlIGZvdW5kJyk7XG4gICAgfVxuICAgIGNvbnN0IGNvcHlPZkNvbnRleHQgPSBjbG9uZUN1cnJlbnRDb250ZXh0KGN1cnJlbnRDb250ZXh0KTtcbiAgICByZXR1cm4gZ2V0Q29udGV4dEFzeW5jTG9jYWxTdG9yYWdlKCkucnVuKGNvcHlPZkNvbnRleHQsIGZuKTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNvbnRleHQubWpzLm1hcCIsImltcG9ydCBsb2dnZXIgZnJvbSBcIi4uL2xvZ2dlci5tanNcIjtcbmltcG9ydCB7IHRpbWVyIGFzIF90aW1lciwgaXNUcmFjaW5nTG9vcFJ1bm5pbmdCeURlZmF1bHQsIH0gZnJvbSAnQG9wZW5haS9hZ2VudHMtY29yZS9fc2hpbXMnO1xuaW1wb3J0IHsgdHJhY2luZyB9IGZyb20gXCIuLi9jb25maWcubWpzXCI7XG4vKipcbiAqIFByaW50cyB0aGUgdHJhY2VzIGFuZCBzcGFucyB0byB0aGUgY29uc29sZVxuICovXG5leHBvcnQgY2xhc3MgQ29uc29sZVNwYW5FeHBvcnRlciB7XG4gICAgYXN5bmMgZXhwb3J0KGl0ZW1zKSB7XG4gICAgICAgIGlmICh0cmFjaW5nLmRpc2FibGVkKSB7XG4gICAgICAgICAgICBsb2dnZXIuZGVidWcoJ1RyYWNpbmcgaXMgZGlzYWJsZWQuIFNraXBwaW5nIGV4cG9ydCcpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGZvciAoY29uc3QgaXRlbSBvZiBpdGVtcykge1xuICAgICAgICAgICAgaWYgKGl0ZW0udHlwZSA9PT0gJ3RyYWNlJykge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBbRXhwb3J0ZXJdIEV4cG9ydCB0cmFjZSB0cmFjZUlkPSR7aXRlbS50cmFjZUlkfSBuYW1lPSR7aXRlbS5uYW1lfSR7aXRlbS5ncm91cElkID8gYCBncm91cElkPSR7aXRlbS5ncm91cElkfWAgOiAnJ31gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBbRXhwb3J0ZXJdIEV4cG9ydCBzcGFuOiAke0pTT04uc3RyaW5naWZ5KGl0ZW0pfWApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIEJhdGNoVHJhY2VQcm9jZXNzb3Ige1xuICAgICNtYXhRdWV1ZVNpemU7XG4gICAgI21heEJhdGNoU2l6ZTtcbiAgICAjc2NoZWR1bGVEZWxheTtcbiAgICAjZXhwb3J0VHJpZ2dlclNpemU7XG4gICAgI2V4cG9ydGVyO1xuICAgICNidWZmZXIgPSBbXTtcbiAgICAjdGltZXI7XG4gICAgI3RpbWVvdXQgPSBudWxsO1xuICAgICNleHBvcnRJblByb2dyZXNzID0gZmFsc2U7XG4gICAgI3RpbWVvdXRBYm9ydENvbnRyb2xsZXIgPSBudWxsO1xuICAgIGNvbnN0cnVjdG9yKGV4cG9ydGVyLCB7IG1heFF1ZXVlU2l6ZSA9IDEwMDAsIG1heEJhdGNoU2l6ZSA9IDEwMCwgc2NoZWR1bGVEZWxheSA9IDUwMDAsIC8vIDUgc2Vjb25kc1xuICAgIGV4cG9ydFRyaWdnZXJSYXRpbyA9IDAuOCwgfSA9IHt9KSB7XG4gICAgICAgIHRoaXMuI21heFF1ZXVlU2l6ZSA9IG1heFF1ZXVlU2l6ZTtcbiAgICAgICAgdGhpcy4jbWF4QmF0Y2hTaXplID0gbWF4QmF0Y2hTaXplO1xuICAgICAgICB0aGlzLiNzY2hlZHVsZURlbGF5ID0gc2NoZWR1bGVEZWxheTtcbiAgICAgICAgdGhpcy4jZXhwb3J0VHJpZ2dlclNpemUgPSBtYXhRdWV1ZVNpemUgKiBleHBvcnRUcmlnZ2VyUmF0aW87XG4gICAgICAgIHRoaXMuI2V4cG9ydGVyID0gZXhwb3J0ZXI7XG4gICAgICAgIHRoaXMuI3RpbWVyID0gX3RpbWVyO1xuICAgICAgICBpZiAoaXNUcmFjaW5nTG9vcFJ1bm5pbmdCeURlZmF1bHQoKSkge1xuICAgICAgICAgICAgdGhpcy5zdGFydCgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKCdBdXRvbWF0aWMgdHJhY2UgZXhwb3J0IGxvb3AgaXMgbm90IHN1cHBvcnRlZCBpbiB0aGlzIGVudmlyb25tZW50LiBZb3UgbmVlZCB0byBtYW51YWxseSBjYWxsIGBnZXRHbG9iYWxUcmFjZVByb3ZpZGVyKCkuZm9yY2VGbHVzaCgpYCB0byBleHBvcnQgdHJhY2VzLicpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0YXJ0KCkge1xuICAgICAgICB0aGlzLiN0aW1lb3V0QWJvcnRDb250cm9sbGVyID0gbmV3IEFib3J0Q29udHJvbGxlcigpO1xuICAgICAgICB0aGlzLiNydW5FeHBvcnRMb29wKCk7XG4gICAgfVxuICAgIGFzeW5jICNzYWZlQWRkSXRlbShpdGVtKSB7XG4gICAgICAgIGlmICh0aGlzLiNidWZmZXIubGVuZ3RoICsgMSA+IHRoaXMuI21heFF1ZXVlU2l6ZSkge1xuICAgICAgICAgICAgbG9nZ2VyLmVycm9yKCdEcm9wcGluZyB0cmFjZSBiZWNhdXNlIGJ1ZmZlciBpcyBmdWxsJyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgLy8gYWRkIHRoZSBpdGVtIHRvIHRoZSBidWZmZXJcbiAgICAgICAgdGhpcy4jYnVmZmVyLnB1c2goaXRlbSk7XG4gICAgICAgIGlmICh0aGlzLiNidWZmZXIubGVuZ3RoID4gdGhpcy4jZXhwb3J0VHJpZ2dlclNpemUpIHtcbiAgICAgICAgICAgIC8vIHN0YXJ0IGV4cG9ydGluZyBpbW1lZGlhdGVseVxuICAgICAgICAgICAgYXdhaXQgdGhpcy4jZXhwb3J0QmF0Y2hlcygpO1xuICAgICAgICB9XG4gICAgfVxuICAgICNydW5FeHBvcnRMb29wKCkge1xuICAgICAgICB0aGlzLiN0aW1lb3V0ID0gdGhpcy4jdGltZXIuc2V0VGltZW91dChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAvLyBzY2hlZHVsZWQgZXhwb3J0XG4gICAgICAgICAgICBhd2FpdCB0aGlzLiNleHBvcnRCYXRjaGVzKCk7XG4gICAgICAgICAgICB0aGlzLiNydW5FeHBvcnRMb29wKCk7XG4gICAgICAgIH0sIHRoaXMuI3NjaGVkdWxlRGVsYXkpO1xuICAgICAgICAvLyBXZSBzZXQgdGhpcyBzbyB0aGF0IE5vZGUgbm8gbG9uZ2VyIGNvbnNpZGVycyB0aGlzIHBhcnQgb2YgdGhlIGV2ZW50IGxvb3AgYW5kIGtlZXBzIHRoZVxuICAgICAgICAvLyBwcm9jZXNzIGFsaXZlIHVudGlsIHRoZSB0aW1lciBpcyBkb25lLlxuICAgICAgICBpZiAodHlwZW9mIHRoaXMuI3RpbWVvdXQudW5yZWYgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIHRoaXMuI3RpbWVvdXQudW5yZWYoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyAjZXhwb3J0QmF0Y2hlcyhmb3JjZSA9IGZhbHNlKSB7XG4gICAgICAgIGlmICh0aGlzLiNidWZmZXIubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgbG9nZ2VyLmRlYnVnKGBFeHBvcnRpbmcgYmF0Y2hlcy4gRm9yY2U6ICR7Zm9yY2V9LiBCdWZmZXIgc2l6ZTogJHt0aGlzLiNidWZmZXIubGVuZ3RofWApO1xuICAgICAgICBpZiAoZm9yY2UgfHwgdGhpcy4jYnVmZmVyLmxlbmd0aCA8IHRoaXMuI21heEJhdGNoU2l6ZSkge1xuICAgICAgICAgICAgY29uc3QgdG9FeHBvcnQgPSBbLi4udGhpcy4jYnVmZmVyXTtcbiAgICAgICAgICAgIHRoaXMuI2J1ZmZlciA9IFtdO1xuICAgICAgICAgICAgdGhpcy4jZXhwb3J0SW5Qcm9ncmVzcyA9IHRydWU7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLiNleHBvcnRlci5leHBvcnQodG9FeHBvcnQpO1xuICAgICAgICAgICAgdGhpcy4jZXhwb3J0SW5Qcm9ncmVzcyA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRoaXMuI2J1ZmZlci5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBjb25zdCBiYXRjaCA9IHRoaXMuI2J1ZmZlci5zcGxpY2UoMCwgdGhpcy4jbWF4QmF0Y2hTaXplKTtcbiAgICAgICAgICAgIHRoaXMuI2V4cG9ydEluUHJvZ3Jlc3MgPSB0cnVlO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy4jZXhwb3J0ZXIuZXhwb3J0KGJhdGNoKTtcbiAgICAgICAgICAgIHRoaXMuI2V4cG9ydEluUHJvZ3Jlc3MgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyBvblRyYWNlU3RhcnQodHJhY2UpIHtcbiAgICAgICAgYXdhaXQgdGhpcy4jc2FmZUFkZEl0ZW0odHJhY2UpO1xuICAgIH1cbiAgICBhc3luYyBvblRyYWNlRW5kKF90cmFjZSkge1xuICAgICAgICAvLyBXZSBkb24ndCBzZW5kIHRyYWNlcyBvbiBlbmQgYmVjYXVzZSB3ZSBhbHJlYWR5IHNlbmQgdGhlbSBvbiBzdGFydFxuICAgIH1cbiAgICBhc3luYyBvblNwYW5TdGFydChfc3Bhbikge1xuICAgICAgICAvLyBXZSBkb24ndCBzZW5kIHNwYW5zIG9uIHN0YXJ0IGJlY2F1c2Ugd2Ugc2VuZCB0aGVtIGF0IHRoZSBlbmRcbiAgICB9XG4gICAgYXN5bmMgb25TcGFuRW5kKHNwYW4pIHtcbiAgICAgICAgYXdhaXQgdGhpcy4jc2FmZUFkZEl0ZW0oc3Bhbik7XG4gICAgfVxuICAgIGFzeW5jIHNodXRkb3duKHRpbWVvdXQpIHtcbiAgICAgICAgaWYgKHRpbWVvdXQpIHtcbiAgICAgICAgICAgIHRoaXMuI3RpbWVyLnNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgIC8vIGZvcmNlIHNodXRkb3duIHRoZSBIVFRQIHJlcXVlc3RcbiAgICAgICAgICAgICAgICB0aGlzLiN0aW1lb3V0QWJvcnRDb250cm9sbGVyPy5hYm9ydCgpO1xuICAgICAgICAgICAgfSwgdGltZW91dCk7XG4gICAgICAgIH1cbiAgICAgICAgbG9nZ2VyLmRlYnVnKCdTaHV0dGluZyBkb3duIGdyYWNlZnVsbHknKTtcbiAgICAgICAgd2hpbGUgKHRoaXMuI2J1ZmZlci5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBsb2dnZXIuZGVidWcoYFdhaXRpbmcgZm9yIGJ1ZmZlciB0byBlbXB0eS4gSXRlbXMgbGVmdDogJHt0aGlzLiNidWZmZXIubGVuZ3RofWApO1xuICAgICAgICAgICAgaWYgKCF0aGlzLiNleHBvcnRJblByb2dyZXNzKSB7XG4gICAgICAgICAgICAgICAgLy8gbm8gY3VycmVudCBleHBvcnQgaW4gcHJvZ3Jlc3MuIEZvcmNpbmcgYWxsIGl0ZW1zIHRvIGJlIGV4cG9ydGVkXG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy4jZXhwb3J0QmF0Y2hlcyh0cnVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLiN0aW1lb3V0QWJvcnRDb250cm9sbGVyPy5zaWduYWwuYWJvcnRlZCkge1xuICAgICAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZygnVGltZW91dCByZWFjaGVkLCBmb3JjZSBmbHVzaGluZycpO1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuI2V4cG9ydEJhdGNoZXModHJ1ZSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyB1c2luZyBzZXRUaW1lb3V0IHRvIGFkZCB0byB0aGUgZXZlbnQgbG9vcCBhbmQga2VlcCB0aGlzIGFsaXZlIHVudGlsIGRvbmVcbiAgICAgICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB0aGlzLiN0aW1lci5zZXRUaW1lb3V0KHJlc29sdmUsIDUwMCkpO1xuICAgICAgICB9XG4gICAgICAgIGxvZ2dlci5kZWJ1ZygnQnVmZmVyIGVtcHR5LiBFeGl0aW5nJyk7XG4gICAgICAgIGlmICh0aGlzLiN0aW1lciAmJiB0aGlzLiN0aW1lb3V0KSB7XG4gICAgICAgICAgICAvLyBtYWtpbmcgc3VyZSB0aGVyZSBhcmUgbm8gbW9yZSByZXF1ZXN0c1xuICAgICAgICAgICAgdGhpcy4jdGltZXIuY2xlYXJUaW1lb3V0KHRoaXMuI3RpbWVvdXQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jIGZvcmNlRmx1c2goKSB7XG4gICAgICAgIGlmICh0aGlzLiNidWZmZXIubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy4jZXhwb3J0QmF0Y2hlcyh0cnVlKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBNdWx0aVRyYWNpbmdQcm9jZXNzb3Ige1xuICAgICNwcm9jZXNzb3JzID0gW107XG4gICAgc3RhcnQoKSB7XG4gICAgICAgIGZvciAoY29uc3QgcHJvY2Vzc29yIG9mIHRoaXMuI3Byb2Nlc3NvcnMpIHtcbiAgICAgICAgICAgIGlmIChwcm9jZXNzb3Iuc3RhcnQpIHtcbiAgICAgICAgICAgICAgICBwcm9jZXNzb3Iuc3RhcnQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBhZGRUcmFjZVByb2Nlc3Nvcihwcm9jZXNzb3IpIHtcbiAgICAgICAgdGhpcy4jcHJvY2Vzc29ycy5wdXNoKHByb2Nlc3Nvcik7XG4gICAgfVxuICAgIHNldFByb2Nlc3NvcnMocHJvY2Vzc29ycykge1xuICAgICAgICBsb2dnZXIuZGVidWcoJ1NodXR0aW5nIGRvd24gb2xkIHByb2Nlc3NvcnMnKTtcbiAgICAgICAgZm9yIChjb25zdCBwcm9jZXNzb3Igb2YgdGhpcy4jcHJvY2Vzc29ycykge1xuICAgICAgICAgICAgcHJvY2Vzc29yLnNodXRkb3duKCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy4jcHJvY2Vzc29ycyA9IHByb2Nlc3NvcnM7XG4gICAgfVxuICAgIGFzeW5jIG9uVHJhY2VTdGFydCh0cmFjZSkge1xuICAgICAgICBmb3IgKGNvbnN0IHByb2Nlc3NvciBvZiB0aGlzLiNwcm9jZXNzb3JzKSB7XG4gICAgICAgICAgICBhd2FpdCBwcm9jZXNzb3Iub25UcmFjZVN0YXJ0KHRyYWNlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyBvblRyYWNlRW5kKHRyYWNlKSB7XG4gICAgICAgIGZvciAoY29uc3QgcHJvY2Vzc29yIG9mIHRoaXMuI3Byb2Nlc3NvcnMpIHtcbiAgICAgICAgICAgIGF3YWl0IHByb2Nlc3Nvci5vblRyYWNlRW5kKHRyYWNlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyBvblNwYW5TdGFydChzcGFuKSB7XG4gICAgICAgIGZvciAoY29uc3QgcHJvY2Vzc29yIG9mIHRoaXMuI3Byb2Nlc3NvcnMpIHtcbiAgICAgICAgICAgIGF3YWl0IHByb2Nlc3Nvci5vblNwYW5TdGFydChzcGFuKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyBvblNwYW5FbmQoc3Bhbikge1xuICAgICAgICBmb3IgKGNvbnN0IHByb2Nlc3NvciBvZiB0aGlzLiNwcm9jZXNzb3JzKSB7XG4gICAgICAgICAgICBhd2FpdCBwcm9jZXNzb3Iub25TcGFuRW5kKHNwYW4pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jIHNodXRkb3duKHRpbWVvdXQpIHtcbiAgICAgICAgZm9yIChjb25zdCBwcm9jZXNzb3Igb2YgdGhpcy4jcHJvY2Vzc29ycykge1xuICAgICAgICAgICAgYXdhaXQgcHJvY2Vzc29yLnNodXRkb3duKHRpbWVvdXQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jIGZvcmNlRmx1c2goKSB7XG4gICAgICAgIGZvciAoY29uc3QgcHJvY2Vzc29yIG9mIHRoaXMuI3Byb2Nlc3NvcnMpIHtcbiAgICAgICAgICAgIGF3YWl0IHByb2Nlc3Nvci5mb3JjZUZsdXNoKCk7XG4gICAgICAgIH1cbiAgICB9XG59XG5sZXQgX2RlZmF1bHRFeHBvcnRlciA9IG51bGw7XG5sZXQgX2RlZmF1bHRQcm9jZXNzb3IgPSBudWxsO1xuZXhwb3J0IGZ1bmN0aW9uIGRlZmF1bHRFeHBvcnRlcigpIHtcbiAgICBpZiAoIV9kZWZhdWx0RXhwb3J0ZXIpIHtcbiAgICAgICAgX2RlZmF1bHRFeHBvcnRlciA9IG5ldyBDb25zb2xlU3BhbkV4cG9ydGVyKCk7XG4gICAgfVxuICAgIHJldHVybiBfZGVmYXVsdEV4cG9ydGVyO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGRlZmF1bHRQcm9jZXNzb3IoKSB7XG4gICAgaWYgKCFfZGVmYXVsdFByb2Nlc3Nvcikge1xuICAgICAgICBfZGVmYXVsdFByb2Nlc3NvciA9IG5ldyBCYXRjaFRyYWNlUHJvY2Vzc29yKGRlZmF1bHRFeHBvcnRlcigpKTtcbiAgICB9XG4gICAgcmV0dXJuIF9kZWZhdWx0UHJvY2Vzc29yO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cHJvY2Vzc29yLm1qcy5tYXAiLCJpbXBvcnQgeyByYW5kb21VVUlEIH0gZnJvbSAnQG9wZW5haS9hZ2VudHMtY29yZS9fc2hpbXMnO1xuLyoqXG4gKiBHZW5lcmF0ZSBhbiBJU08gODYwMSB0aW1lc3RhbXAgb2YgdGhlIGN1cnJlbnQgdGltZS5cbiAqIEByZXR1cm5zIEFuIElTTyA4NjAxIHRpbWVzdGFtcC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHRpbWVJc28oKSB7XG4gICAgcmV0dXJuIG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKTtcbn1cbi8qKlxuICogR2VuZXJhdGUgYSB0cmFjZSBJRCBieSBjcmVhdGluZyBhIHJhbmRvbSBVVUlEIHY0IGFuZCByZW1vdmluZyB0aGUgZGFzaGVzLiBUaGlzIGlzIHRoZSBlcXVpdmFsZW50XG4gKiBvZiBgdXVpZDQoKS5oZXhgIGluIFB5dGhvbiBhbmQgcHJlZml4aW5nIGl0IHdpdGggYHRyYWNlX2AuXG4gKiBAcmV0dXJucyBBIHRyYWNlIElELlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2VuZXJhdGVUcmFjZUlkKCkge1xuICAgIHJldHVybiBgdHJhY2VfJHtyYW5kb21VVUlEKCkucmVwbGFjZSgvLS9nLCAnJyl9YDtcbn1cbi8qKlxuICogR2VuZXJhdGUgYSBzcGFuIElEIGJ5IGNyZWF0aW5nIGEgcmFuZG9tIFVVSUQgdjQgYW5kIHJlbW92aW5nIHRoZSBkYXNoZXMuIFRoaXMgaXMgdGhlIGVxdWl2YWxlbnRcbiAqIG9mIGB1dWlkNCgpLmhleGAgaW4gUHl0aG9uIGFuZCBwcmVmaXhpbmcgaXQgd2l0aCBgc3Bhbl9gLlxuICogQHJldHVybnMgQSBzcGFuIElELlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2VuZXJhdGVTcGFuSWQoKSB7XG4gICAgcmV0dXJuIGBzcGFuXyR7cmFuZG9tVVVJRCgpLnJlcGxhY2UoLy0vZywgJycpLnNsaWNlKDAsIDI0KX1gO1xufVxuLyoqXG4gKiBHZW5lcmF0ZSBhIGdyb3VwIElEIGJ5IGNyZWF0aW5nIGEgcmFuZG9tIFVVSUQgdjQgYW5kIHJlbW92aW5nIHRoZSBkYXNoZXMuIFRoaXMgaXMgdGhlIGVxdWl2YWxlbnRcbiAqIG9mIGB1dWlkNCgpLmhleGAgaW4gUHl0aG9uIGFuZCBwcmVmaXhpbmcgaXQgd2l0aCBgZ3JvdXBfYC5cbiAqIEByZXR1cm5zIEEgZ3JvdXAgSUQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZW5lcmF0ZUdyb3VwSWQoKSB7XG4gICAgcmV0dXJuIGBncm91cF8ke3JhbmRvbVVVSUQoKS5yZXBsYWNlKC8tL2csICcnKS5zbGljZSgwLCAyNCl9YDtcbn1cbi8qKlxuICogUmVtb3ZlIGZpZWxkcyB0aGF0IHN0YXJ0IHdpdGggYW4gdW5kZXJzY29yZSBmcm9tIGFuIG9iamVjdC5cbiAqIEBwYXJhbSBvYmogLSBUaGUgb2JqZWN0IHRvIHJlbW92ZSBwcml2YXRlIGZpZWxkcyBmcm9tLlxuICogQHJldHVybnMgQSBuZXcgb2JqZWN0IHdpdGggcHJpdmF0ZSBmaWVsZHMgcmVtb3ZlZC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJlbW92ZVByaXZhdGVGaWVsZHMob2JqKSB7XG4gICAgcmV0dXJuIE9iamVjdC5mcm9tRW50cmllcyhPYmplY3QuZW50cmllcyhvYmopLmZpbHRlcigoW2tleV0pID0+ICFrZXkuc3RhcnRzV2l0aCgnXycpKSk7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD11dGlscy5tanMubWFwIiwiaW1wb3J0IGxvZ2dlciBmcm9tIFwiLi4vbG9nZ2VyLm1qc1wiO1xuaW1wb3J0IHsgZ2VuZXJhdGVTcGFuSWQsIHJlbW92ZVByaXZhdGVGaWVsZHMsIHRpbWVJc28gfSBmcm9tIFwiLi91dGlscy5tanNcIjtcbmV4cG9ydCBjbGFzcyBTcGFuIHtcbiAgICB0eXBlID0gJ3RyYWNlLnNwYW4nO1xuICAgICNkYXRhO1xuICAgICN0cmFjZUlkO1xuICAgICNzcGFuSWQ7XG4gICAgI3BhcmVudElkO1xuICAgICNwcm9jZXNzb3I7XG4gICAgI3N0YXJ0ZWRBdDtcbiAgICAjZW5kZWRBdDtcbiAgICAjZXJyb3I7XG4gICAgI3ByZXZpb3VzU3BhbjtcbiAgICBjb25zdHJ1Y3RvcihvcHRpb25zLCBwcm9jZXNzb3IpIHtcbiAgICAgICAgdGhpcy4jdHJhY2VJZCA9IG9wdGlvbnMudHJhY2VJZDtcbiAgICAgICAgdGhpcy4jc3BhbklkID0gb3B0aW9ucy5zcGFuSWQgPz8gZ2VuZXJhdGVTcGFuSWQoKTtcbiAgICAgICAgdGhpcy4jZGF0YSA9IG9wdGlvbnMuZGF0YTtcbiAgICAgICAgdGhpcy4jcHJvY2Vzc29yID0gcHJvY2Vzc29yO1xuICAgICAgICB0aGlzLiNwYXJlbnRJZCA9IG9wdGlvbnMucGFyZW50SWQgPz8gbnVsbDtcbiAgICAgICAgdGhpcy4jZXJyb3IgPSBvcHRpb25zLmVycm9yID8/IG51bGw7XG4gICAgICAgIHRoaXMuI3N0YXJ0ZWRBdCA9IG9wdGlvbnMuc3RhcnRlZEF0ID8/IG51bGw7XG4gICAgICAgIHRoaXMuI2VuZGVkQXQgPSBvcHRpb25zLmVuZGVkQXQgPz8gbnVsbDtcbiAgICB9XG4gICAgZ2V0IHRyYWNlSWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiN0cmFjZUlkO1xuICAgIH1cbiAgICBnZXQgc3BhbkRhdGEoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiNkYXRhO1xuICAgIH1cbiAgICBnZXQgc3BhbklkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy4jc3BhbklkO1xuICAgIH1cbiAgICBnZXQgcGFyZW50SWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiNwYXJlbnRJZDtcbiAgICB9XG4gICAgZ2V0IHByZXZpb3VzU3BhbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuI3ByZXZpb3VzU3BhbjtcbiAgICB9XG4gICAgc2V0IHByZXZpb3VzU3BhbihzcGFuKSB7XG4gICAgICAgIHRoaXMuI3ByZXZpb3VzU3BhbiA9IHNwYW47XG4gICAgfVxuICAgIHN0YXJ0KCkge1xuICAgICAgICBpZiAodGhpcy4jc3RhcnRlZEF0KSB7XG4gICAgICAgICAgICBsb2dnZXIud2FybignU3BhbiBhbHJlYWR5IHN0YXJ0ZWQnKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLiNzdGFydGVkQXQgPSB0aW1lSXNvKCk7XG4gICAgICAgIHRoaXMuI3Byb2Nlc3Nvci5vblNwYW5TdGFydCh0aGlzKTtcbiAgICB9XG4gICAgZW5kKCkge1xuICAgICAgICBpZiAodGhpcy4jZW5kZWRBdCkge1xuICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKCdTcGFuIGFscmVhZHkgZmluaXNoZWQnLCB0aGlzLnNwYW5EYXRhKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLiNlbmRlZEF0ID0gdGltZUlzbygpO1xuICAgICAgICB0aGlzLiNwcm9jZXNzb3Iub25TcGFuRW5kKHRoaXMpO1xuICAgIH1cbiAgICBzZXRFcnJvcihlcnJvcikge1xuICAgICAgICB0aGlzLiNlcnJvciA9IGVycm9yO1xuICAgIH1cbiAgICBnZXQgZXJyb3IoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiNlcnJvcjtcbiAgICB9XG4gICAgZ2V0IHN0YXJ0ZWRBdCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuI3N0YXJ0ZWRBdDtcbiAgICB9XG4gICAgZ2V0IGVuZGVkQXQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiNlbmRlZEF0O1xuICAgIH1cbiAgICBjbG9uZSgpIHtcbiAgICAgICAgY29uc3Qgc3BhbiA9IG5ldyBTcGFuKHtcbiAgICAgICAgICAgIHRyYWNlSWQ6IHRoaXMudHJhY2VJZCxcbiAgICAgICAgICAgIHNwYW5JZDogdGhpcy5zcGFuSWQsXG4gICAgICAgICAgICBwYXJlbnRJZDogdGhpcy5wYXJlbnRJZCA/PyB1bmRlZmluZWQsXG4gICAgICAgICAgICBkYXRhOiB0aGlzLnNwYW5EYXRhLFxuICAgICAgICAgICAgc3RhcnRlZEF0OiB0aGlzLiNzdGFydGVkQXQgPz8gdW5kZWZpbmVkLFxuICAgICAgICAgICAgZW5kZWRBdDogdGhpcy4jZW5kZWRBdCA/PyB1bmRlZmluZWQsXG4gICAgICAgICAgICBlcnJvcjogdGhpcy4jZXJyb3IgPz8gdW5kZWZpbmVkLFxuICAgICAgICB9LCB0aGlzLiNwcm9jZXNzb3IpO1xuICAgICAgICBzcGFuLnByZXZpb3VzU3BhbiA9IHRoaXMucHJldmlvdXNTcGFuPy5jbG9uZSgpO1xuICAgICAgICByZXR1cm4gc3BhbjtcbiAgICB9XG4gICAgdG9KU09OKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgb2JqZWN0OiB0aGlzLnR5cGUsXG4gICAgICAgICAgICBpZDogdGhpcy5zcGFuSWQsXG4gICAgICAgICAgICB0cmFjZV9pZDogdGhpcy50cmFjZUlkLFxuICAgICAgICAgICAgcGFyZW50X2lkOiB0aGlzLnBhcmVudElkLFxuICAgICAgICAgICAgc3RhcnRlZF9hdDogdGhpcy5zdGFydGVkQXQsXG4gICAgICAgICAgICBlbmRlZF9hdDogdGhpcy5lbmRlZEF0LFxuICAgICAgICAgICAgc3Bhbl9kYXRhOiByZW1vdmVQcml2YXRlRmllbGRzKHRoaXMuc3BhbkRhdGEpLFxuICAgICAgICAgICAgZXJyb3I6IHRoaXMuZXJyb3IsXG4gICAgICAgIH07XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIE5vb3BTcGFuIGV4dGVuZHMgU3BhbiB7XG4gICAgY29uc3RydWN0b3IoZGF0YSwgcHJvY2Vzc29yKSB7XG4gICAgICAgIHN1cGVyKHsgdHJhY2VJZDogJ25vLW9wJywgc3BhbklkOiAnbm8tb3AnLCBkYXRhIH0sIHByb2Nlc3Nvcik7XG4gICAgfVxuICAgIHN0YXJ0KCkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGVuZCgpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBzZXRFcnJvcigpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0b0pTT04oKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXNwYW5zLm1qcy5tYXAiLCJpbXBvcnQgeyBkZWZhdWx0UHJvY2Vzc29yIH0gZnJvbSBcIi4vcHJvY2Vzc29yLm1qc1wiO1xuaW1wb3J0IHsgZ2VuZXJhdGVUcmFjZUlkIH0gZnJvbSBcIi4vdXRpbHMubWpzXCI7XG5leHBvcnQgY2xhc3MgVHJhY2Uge1xuICAgIHR5cGUgPSAndHJhY2UnO1xuICAgIHRyYWNlSWQ7XG4gICAgbmFtZTtcbiAgICBncm91cElkID0gbnVsbDtcbiAgICBtZXRhZGF0YTtcbiAgICAjcHJvY2Vzc29yO1xuICAgICNzdGFydGVkO1xuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMsIHByb2Nlc3Nvcikge1xuICAgICAgICB0aGlzLnRyYWNlSWQgPSBvcHRpb25zLnRyYWNlSWQgPz8gZ2VuZXJhdGVUcmFjZUlkKCk7XG4gICAgICAgIHRoaXMubmFtZSA9IG9wdGlvbnMubmFtZSA/PyAnQWdlbnQgd29ya2Zsb3cnO1xuICAgICAgICB0aGlzLmdyb3VwSWQgPSBvcHRpb25zLmdyb3VwSWQgPz8gbnVsbDtcbiAgICAgICAgdGhpcy5tZXRhZGF0YSA9IG9wdGlvbnMubWV0YWRhdGEgPz8ge307XG4gICAgICAgIHRoaXMuI3Byb2Nlc3NvciA9IHByb2Nlc3NvciA/PyBkZWZhdWx0UHJvY2Vzc29yKCk7XG4gICAgICAgIHRoaXMuI3N0YXJ0ZWQgPSBvcHRpb25zLnN0YXJ0ZWQgPz8gZmFsc2U7XG4gICAgfVxuICAgIGFzeW5jIHN0YXJ0KCkge1xuICAgICAgICBpZiAodGhpcy4jc3RhcnRlZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuI3N0YXJ0ZWQgPSB0cnVlO1xuICAgICAgICBhd2FpdCB0aGlzLiNwcm9jZXNzb3Iub25UcmFjZVN0YXJ0KHRoaXMpO1xuICAgIH1cbiAgICBhc3luYyBlbmQoKSB7XG4gICAgICAgIGlmICghdGhpcy4jc3RhcnRlZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuI3N0YXJ0ZWQgPSBmYWxzZTtcbiAgICAgICAgYXdhaXQgdGhpcy4jcHJvY2Vzc29yLm9uVHJhY2VFbmQodGhpcyk7XG4gICAgfVxuICAgIGNsb25lKCkge1xuICAgICAgICByZXR1cm4gbmV3IFRyYWNlKHtcbiAgICAgICAgICAgIHRyYWNlSWQ6IHRoaXMudHJhY2VJZCxcbiAgICAgICAgICAgIG5hbWU6IHRoaXMubmFtZSxcbiAgICAgICAgICAgIGdyb3VwSWQ6IHRoaXMuZ3JvdXBJZCA/PyB1bmRlZmluZWQsXG4gICAgICAgICAgICBtZXRhZGF0YTogdGhpcy5tZXRhZGF0YSxcbiAgICAgICAgICAgIHN0YXJ0ZWQ6IHRoaXMuI3N0YXJ0ZWQsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICB0b0pTT04oKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBvYmplY3Q6IHRoaXMudHlwZSxcbiAgICAgICAgICAgIGlkOiB0aGlzLnRyYWNlSWQsXG4gICAgICAgICAgICB3b3JrZmxvd19uYW1lOiB0aGlzLm5hbWUsXG4gICAgICAgICAgICBncm91cF9pZDogdGhpcy5ncm91cElkLFxuICAgICAgICAgICAgbWV0YWRhdGE6IHRoaXMubWV0YWRhdGEsXG4gICAgICAgIH07XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIE5vb3BUcmFjZSBleHRlbmRzIFRyYWNlIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoe30pO1xuICAgIH1cbiAgICBhc3luYyBzdGFydCgpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBhc3luYyBlbmQoKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdG9KU09OKCkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD10cmFjZXMubWpzLm1hcCIsImltcG9ydCB7IGdldEN1cnJlbnRTcGFuLCBnZXRDdXJyZW50VHJhY2UgfSBmcm9tIFwiLi9jb250ZXh0Lm1qc1wiO1xuaW1wb3J0IHsgdHJhY2luZyB9IGZyb20gXCIuLi9jb25maWcubWpzXCI7XG5pbXBvcnQgbG9nZ2VyIGZyb20gXCIuLi9sb2dnZXIubWpzXCI7XG5pbXBvcnQgeyBNdWx0aVRyYWNpbmdQcm9jZXNzb3IgfSBmcm9tIFwiLi9wcm9jZXNzb3IubWpzXCI7XG5pbXBvcnQgeyBOb29wU3BhbiwgU3BhbiB9IGZyb20gXCIuL3NwYW5zLm1qc1wiO1xuaW1wb3J0IHsgTm9vcFRyYWNlLCBUcmFjZSB9IGZyb20gXCIuL3RyYWNlcy5tanNcIjtcbmltcG9ydCB7IGdlbmVyYXRlVHJhY2VJZCB9IGZyb20gXCIuL3V0aWxzLm1qc1wiO1xuZXhwb3J0IGNsYXNzIFRyYWNlUHJvdmlkZXIge1xuICAgICNtdWx0aVByb2Nlc3NvcjtcbiAgICAjZGlzYWJsZWQ7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuI211bHRpUHJvY2Vzc29yID0gbmV3IE11bHRpVHJhY2luZ1Byb2Nlc3NvcigpO1xuICAgICAgICB0aGlzLiNkaXNhYmxlZCA9IHRyYWNpbmcuZGlzYWJsZWQ7XG4gICAgICAgIHRoaXMuI2FkZENsZWFudXBMaXN0ZW5lcnMoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQWRkIGEgcHJvY2Vzc29yIHRvIHRoZSBsaXN0IG9mIHByb2Nlc3NvcnMuIEVhY2ggcHJvY2Vzc29yIHdpbGwgcmVjZWl2ZSBhbGwgdHJhY2VzL3NwYW5zLlxuICAgICAqXG4gICAgICogQHBhcmFtIHByb2Nlc3NvciAtIFRoZSBwcm9jZXNzb3IgdG8gYWRkLlxuICAgICAqL1xuICAgIHJlZ2lzdGVyUHJvY2Vzc29yKHByb2Nlc3Nvcikge1xuICAgICAgICB0aGlzLiNtdWx0aVByb2Nlc3Nvci5hZGRUcmFjZVByb2Nlc3Nvcihwcm9jZXNzb3IpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXQgdGhlIGxpc3Qgb2YgcHJvY2Vzc29ycy4gVGhpcyB3aWxsIHJlcGxhY2UgYW55IGV4aXN0aW5nIHByb2Nlc3NvcnMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gcHJvY2Vzc29ycyAtIFRoZSBsaXN0IG9mIHByb2Nlc3NvcnMgdG8gc2V0LlxuICAgICAqL1xuICAgIHNldFByb2Nlc3NvcnMocHJvY2Vzc29ycykge1xuICAgICAgICB0aGlzLiNtdWx0aVByb2Nlc3Nvci5zZXRQcm9jZXNzb3JzKHByb2Nlc3NvcnMpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGN1cnJlbnQgdHJhY2UuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBUaGUgY3VycmVudCB0cmFjZS5cbiAgICAgKi9cbiAgICBnZXRDdXJyZW50VHJhY2UoKSB7XG4gICAgICAgIHJldHVybiBnZXRDdXJyZW50VHJhY2UoKTtcbiAgICB9XG4gICAgZ2V0Q3VycmVudFNwYW4oKSB7XG4gICAgICAgIHJldHVybiBnZXRDdXJyZW50U3BhbigpO1xuICAgIH1cbiAgICBzZXREaXNhYmxlZChkaXNhYmxlZCkge1xuICAgICAgICB0aGlzLiNkaXNhYmxlZCA9IGRpc2FibGVkO1xuICAgIH1cbiAgICBzdGFydEV4cG9ydExvb3AoKSB7XG4gICAgICAgIHRoaXMuI211bHRpUHJvY2Vzc29yLnN0YXJ0KCk7XG4gICAgfVxuICAgIGNyZWF0ZVRyYWNlKHRyYWNlT3B0aW9ucykge1xuICAgICAgICBpZiAodGhpcy4jZGlzYWJsZWQpIHtcbiAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZygnVHJhY2luZyBpcyBkaXNhYmxlZCwgTm90IGNyZWF0aW5nIHRyYWNlICVvJywgdHJhY2VPcHRpb25zKTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgTm9vcFRyYWNlKCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgdHJhY2VJZCA9IHRyYWNlT3B0aW9ucy50cmFjZUlkID8/IGdlbmVyYXRlVHJhY2VJZCgpO1xuICAgICAgICBjb25zdCBuYW1lID0gdHJhY2VPcHRpb25zLm5hbWUgPz8gJ0FnZW50IHdvcmtmbG93JztcbiAgICAgICAgbG9nZ2VyLmRlYnVnKCdDcmVhdGluZyB0cmFjZSAlcyB3aXRoIG5hbWUgJXMnLCB0cmFjZUlkLCBuYW1lKTtcbiAgICAgICAgcmV0dXJuIG5ldyBUcmFjZSh7IC4uLnRyYWNlT3B0aW9ucywgbmFtZSwgdHJhY2VJZCB9LCB0aGlzLiNtdWx0aVByb2Nlc3Nvcik7XG4gICAgfVxuICAgIGNyZWF0ZVNwYW4oc3Bhbk9wdGlvbnMsIHBhcmVudCkge1xuICAgICAgICBpZiAodGhpcy4jZGlzYWJsZWQgfHwgc3Bhbk9wdGlvbnMuZGlzYWJsZWQpIHtcbiAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZygnVHJhY2luZyBpcyBkaXNhYmxlZCwgTm90IGNyZWF0aW5nIHNwYW4gJW8nLCBzcGFuT3B0aW9ucyk7XG4gICAgICAgICAgICByZXR1cm4gbmV3IE5vb3BTcGFuKHNwYW5PcHRpb25zLmRhdGEsIHRoaXMuI211bHRpUHJvY2Vzc29yKTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgcGFyZW50SWQ7XG4gICAgICAgIGxldCB0cmFjZUlkO1xuICAgICAgICBpZiAoIXBhcmVudCkge1xuICAgICAgICAgICAgY29uc3QgY3VycmVudFRyYWNlID0gZ2V0Q3VycmVudFRyYWNlKCk7XG4gICAgICAgICAgICBjb25zdCBjdXJyZW50U3BhbiA9IGdldEN1cnJlbnRTcGFuKCk7XG4gICAgICAgICAgICBpZiAoIWN1cnJlbnRUcmFjZSkge1xuICAgICAgICAgICAgICAgIGxvZ2dlci5lcnJvcignTm8gYWN0aXZlIHRyYWNlLiBNYWtlIHN1cmUgdG8gc3RhcnQgYSB0cmFjZSB3aXRoIGB3aXRoVHJhY2UoKWAgZmlyc3QuIFJldHVybmluZyBOb29wU3Bhbi4nKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IE5vb3BTcGFuKHNwYW5PcHRpb25zLmRhdGEsIHRoaXMuI211bHRpUHJvY2Vzc29yKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChjdXJyZW50U3BhbiBpbnN0YW5jZW9mIE5vb3BTcGFuIHx8XG4gICAgICAgICAgICAgICAgY3VycmVudFRyYWNlIGluc3RhbmNlb2YgTm9vcFRyYWNlKSB7XG4gICAgICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKGBQYXJlbnQgJHtjdXJyZW50U3Bhbn0gb3IgJHtjdXJyZW50VHJhY2V9IGlzIG5vLW9wLCByZXR1cm5pbmcgTm9vcFNwYW5gKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IE5vb3BTcGFuKHNwYW5PcHRpb25zLmRhdGEsIHRoaXMuI211bHRpUHJvY2Vzc29yKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRyYWNlSWQgPSBjdXJyZW50VHJhY2UudHJhY2VJZDtcbiAgICAgICAgICAgIGlmIChjdXJyZW50U3Bhbikge1xuICAgICAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZygnVXNpbmcgcGFyZW50IHNwYW4gJXMnLCBjdXJyZW50U3Bhbi5zcGFuSWQpO1xuICAgICAgICAgICAgICAgIHBhcmVudElkID0gY3VycmVudFNwYW4uc3BhbklkO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKCdObyBwYXJlbnQgc3BhbiwgdXNpbmcgY3VycmVudCB0cmFjZSAlcycsIGN1cnJlbnRUcmFjZS50cmFjZUlkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChwYXJlbnQgaW5zdGFuY2VvZiBUcmFjZSkge1xuICAgICAgICAgICAgaWYgKHBhcmVudCBpbnN0YW5jZW9mIE5vb3BUcmFjZSkge1xuICAgICAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZygnUGFyZW50IHRyYWNlIGlzIG5vLW9wLCByZXR1cm5pbmcgTm9vcFNwYW4nKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IE5vb3BTcGFuKHNwYW5PcHRpb25zLmRhdGEsIHRoaXMuI211bHRpUHJvY2Vzc29yKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRyYWNlSWQgPSBwYXJlbnQudHJhY2VJZDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChwYXJlbnQgaW5zdGFuY2VvZiBTcGFuKSB7XG4gICAgICAgICAgICBpZiAocGFyZW50IGluc3RhbmNlb2YgTm9vcFNwYW4pIHtcbiAgICAgICAgICAgICAgICBsb2dnZXIuZGVidWcoJ1BhcmVudCBzcGFuIGlzIG5vLW9wLCByZXR1cm5pbmcgTm9vcFNwYW4nKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IE5vb3BTcGFuKHNwYW5PcHRpb25zLmRhdGEsIHRoaXMuI211bHRpUHJvY2Vzc29yKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHBhcmVudElkID0gcGFyZW50LnNwYW5JZDtcbiAgICAgICAgICAgIHRyYWNlSWQgPSBwYXJlbnQudHJhY2VJZDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRyYWNlSWQpIHtcbiAgICAgICAgICAgIGxvZ2dlci5lcnJvcignTm8gdHJhY2VJZCBmb3VuZC4gTWFrZSBzdXJlIHRvIHN0YXJ0IGEgdHJhY2Ugd2l0aCBgd2l0aFRyYWNlKClgIGZpcnN0LiBSZXR1cm5pbmcgTm9vcFNwYW4uJyk7XG4gICAgICAgICAgICByZXR1cm4gbmV3IE5vb3BTcGFuKHNwYW5PcHRpb25zLmRhdGEsIHRoaXMuI211bHRpUHJvY2Vzc29yKTtcbiAgICAgICAgfVxuICAgICAgICBsb2dnZXIuZGVidWcoYENyZWF0aW5nIHNwYW4gJHtKU09OLnN0cmluZ2lmeShzcGFuT3B0aW9ucy5kYXRhKX0gd2l0aCBpZCAke3NwYW5PcHRpb25zLnNwYW5JZCA/PyB0cmFjZUlkfWApO1xuICAgICAgICByZXR1cm4gbmV3IFNwYW4oe1xuICAgICAgICAgICAgLi4uc3Bhbk9wdGlvbnMsXG4gICAgICAgICAgICB0cmFjZUlkLFxuICAgICAgICAgICAgcGFyZW50SWQsXG4gICAgICAgIH0sIHRoaXMuI211bHRpUHJvY2Vzc29yKTtcbiAgICB9XG4gICAgYXN5bmMgc2h1dGRvd24odGltZW91dCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKCdTaHV0dGluZyBkb3duIHRyYWNpbmcgcHJvdmlkZXInKTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuI211bHRpUHJvY2Vzc29yLnNodXRkb3duKHRpbWVvdXQpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgbG9nZ2VyLmVycm9yKCdFcnJvciBzaHV0dGluZyBkb3duIHRyYWNpbmcgcHJvdmlkZXIgJW8nLCBlcnJvcik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqIEFkZHMgbGlzdGVuZXJzIHRvIGBwcm9jZXNzYCB0byBlbnN1cmUgYHNodXRkb3duYCBvY2N1cnMgYmVmb3JlIGV4aXQuICovXG4gICAgI2FkZENsZWFudXBMaXN0ZW5lcnMoKSB7XG4gICAgICAgIGlmICh0eXBlb2YgcHJvY2VzcyAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIHByb2Nlc3Mub24gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIC8vIGhhbmRsaW5nIE5vZGUuanMgcHJvY2VzcyB0ZXJtaW5hdGlvblxuICAgICAgICAgICAgY29uc3QgY2xlYW51cCA9IGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCB0aW1lb3V0ID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybignQ2xlYW51cCB0aW1lb3V0LCBmb3JjaW5nIGV4aXQnKTtcbiAgICAgICAgICAgICAgICAgICAgcHJvY2Vzcy5leGl0KDEpO1xuICAgICAgICAgICAgICAgIH0sIDUwMDApO1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuc2h1dGRvd24oKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZmluYWxseSB7XG4gICAgICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgLy8gSGFuZGxlIG5vcm1hbCB0ZXJtaW5hdGlvblxuICAgICAgICAgICAgcHJvY2Vzcy5vbignYmVmb3JlRXhpdCcsIGNsZWFudXApO1xuICAgICAgICAgICAgLy8gSGFuZGxlIENUUkwrQyAoU0lHSU5UKVxuICAgICAgICAgICAgcHJvY2Vzcy5vbignU0lHSU5UJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGF3YWl0IGNsZWFudXAoKTtcbiAgICAgICAgICAgICAgICBpZiAoIWhhc090aGVyTGlzdGVuZXJzRm9yU2lnbmFscygnU0lHSU5UJykpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gT25seSB3aGVuIHRoZXJlIGFyZSBubyBvdGhlciBsaXN0ZW5lcnMsIGV4aXQgdGhlIHByb2Nlc3Mgb24gdGhpcyBTREsgc2lkZVxuICAgICAgICAgICAgICAgICAgICBwcm9jZXNzLmV4aXQoMTMwKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIC8vIEhhbmRsZSB0ZXJtaW5hdGlvbiAoU0lHVEVSTSlcbiAgICAgICAgICAgIHByb2Nlc3Mub24oJ1NJR1RFUk0nLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgYXdhaXQgY2xlYW51cCgpO1xuICAgICAgICAgICAgICAgIGlmICghaGFzT3RoZXJMaXN0ZW5lcnNGb3JTaWduYWxzKCdTSUdURVJNJykpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gT25seSB3aGVuIHRoZXJlIGFyZSBubyBvdGhlciBsaXN0ZW5lcnMsIGV4aXQgdGhlIHByb2Nlc3Mgb24gdGhpcyBTREsgc2lkZVxuICAgICAgICAgICAgICAgICAgICBwcm9jZXNzLmV4aXQoMCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBwcm9jZXNzLm9uKCd1bmhhbmRsZWRSZWplY3Rpb24nLCBhc3luYyAocmVhc29uLCBwcm9taXNlKSA9PiB7XG4gICAgICAgICAgICAgICAgbG9nZ2VyLmVycm9yKCdVbmhhbmRsZWQgcmVqZWN0aW9uJywgcmVhc29uLCBwcm9taXNlKTtcbiAgICAgICAgICAgICAgICBhd2FpdCBjbGVhbnVwKCk7XG4gICAgICAgICAgICAgICAgaWYgKCFoYXNPdGhlckxpc3RlbmVyc0ZvckV2ZW50cygndW5oYW5kbGVkUmVqZWN0aW9uJykpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gT25seSB3aGVuIHRoZXJlIGFyZSBubyBvdGhlciBsaXN0ZW5lcnMsIGV4aXQgdGhlIHByb2Nlc3Mgb24gdGhpcyBTREsgc2lkZVxuICAgICAgICAgICAgICAgICAgICBwcm9jZXNzLmV4aXQoMSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXN5bmMgZm9yY2VGbHVzaCgpIHtcbiAgICAgICAgYXdhaXQgdGhpcy4jbXVsdGlQcm9jZXNzb3IuZm9yY2VGbHVzaCgpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGhhc090aGVyTGlzdGVuZXJzRm9yU2lnbmFscyhldmVudCkge1xuICAgIHJldHVybiBwcm9jZXNzLmxpc3RlbmVycyhldmVudCkubGVuZ3RoID4gMTtcbn1cbmZ1bmN0aW9uIGhhc090aGVyTGlzdGVuZXJzRm9yRXZlbnRzKGV2ZW50KSB7XG4gICAgcmV0dXJuIHByb2Nlc3MubGlzdGVuZXJzKGV2ZW50KS5sZW5ndGggPiAxO1xufVxubGV0IEdMT0JBTF9UUkFDRV9QUk9WSURFUiA9IHVuZGVmaW5lZDtcbmV4cG9ydCBmdW5jdGlvbiBnZXRHbG9iYWxUcmFjZVByb3ZpZGVyKCkge1xuICAgIGlmICghR0xPQkFMX1RSQUNFX1BST1ZJREVSKSB7XG4gICAgICAgIEdMT0JBTF9UUkFDRV9QUk9WSURFUiA9IG5ldyBUcmFjZVByb3ZpZGVyKCk7XG4gICAgfVxuICAgIHJldHVybiBHTE9CQUxfVFJBQ0VfUFJPVklERVI7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1wcm92aWRlci5tanMubWFwIiwiaW1wb3J0IHsgZ2V0R2xvYmFsVHJhY2VQcm92aWRlciB9IGZyb20gXCIuL3Byb3ZpZGVyLm1qc1wiO1xuZXhwb3J0IHsgZ2V0Q3VycmVudFNwYW4sIGdldEN1cnJlbnRUcmFjZSwgZ2V0T3JDcmVhdGVUcmFjZSwgcmVzZXRDdXJyZW50U3Bhbiwgc2V0Q3VycmVudFNwYW4sIHdpdGhUcmFjZSwgfSBmcm9tIFwiLi9jb250ZXh0Lm1qc1wiO1xuZXhwb3J0ICogZnJvbSBcIi4vY3JlYXRlU3BhbnMubWpzXCI7XG5leHBvcnQgeyBCYXRjaFRyYWNlUHJvY2Vzc29yLCBDb25zb2xlU3BhbkV4cG9ydGVyLCB9IGZyb20gXCIuL3Byb2Nlc3Nvci5tanNcIjtcbmV4cG9ydCB7IE5vb3BTcGFuLCBTcGFuIH0gZnJvbSBcIi4vc3BhbnMubWpzXCI7XG5leHBvcnQgeyBOb29wVHJhY2UsIFRyYWNlIH0gZnJvbSBcIi4vdHJhY2VzLm1qc1wiO1xuZXhwb3J0IHsgZ2VuZXJhdGVHcm91cElkLCBnZW5lcmF0ZVNwYW5JZCwgZ2VuZXJhdGVUcmFjZUlkIH0gZnJvbSBcIi4vdXRpbHMubWpzXCI7XG4vKipcbiAqIEFkZCBhIHByb2Nlc3NvciB0byB0aGUgbGlzdCBvZiBwcm9jZXNzb3JzLiBFYWNoIHByb2Nlc3NvciB3aWxsIHJlY2VpdmUgYWxsIHRyYWNlcy9zcGFucy5cbiAqXG4gKiBAcGFyYW0gcHJvY2Vzc29yIC0gVGhlIHByb2Nlc3NvciB0byBhZGQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhZGRUcmFjZVByb2Nlc3Nvcihwcm9jZXNzb3IpIHtcbiAgICBnZXRHbG9iYWxUcmFjZVByb3ZpZGVyKCkucmVnaXN0ZXJQcm9jZXNzb3IocHJvY2Vzc29yKTtcbn1cbi8qKlxuICogU2V0IHRoZSBsaXN0IG9mIHByb2Nlc3NvcnMuIFRoaXMgd2lsbCByZXBsYWNlIGFueSBleGlzdGluZyBwcm9jZXNzb3JzLlxuICpcbiAqIEBwYXJhbSBwcm9jZXNzb3JzIC0gVGhlIGxpc3Qgb2YgcHJvY2Vzc29ycyB0byBzZXQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzZXRUcmFjZVByb2Nlc3NvcnMocHJvY2Vzc29ycykge1xuICAgIGdldEdsb2JhbFRyYWNlUHJvdmlkZXIoKS5zZXRQcm9jZXNzb3JzKHByb2Nlc3NvcnMpO1xufVxuLyoqXG4gKiBTZXQgdGhlIGRpc2FibGVkIHN0YXRlIG9mIHRoZSB0cmFjaW5nIHByb3ZpZGVyLlxuICpcbiAqIEBwYXJhbSBkaXNhYmxlZCAtIFdoZXRoZXIgdG8gZGlzYWJsZSB0cmFjaW5nLlxuICovXG5leHBvcnQgZnVuY3Rpb24gc2V0VHJhY2luZ0Rpc2FibGVkKGRpc2FibGVkKSB7XG4gICAgZ2V0R2xvYmFsVHJhY2VQcm92aWRlcigpLnNldERpc2FibGVkKGRpc2FibGVkKTtcbn1cbi8qKlxuICogU3RhcnQgdGhlIHRyYWNlIGV4cG9ydCBsb29wLlxuICovXG5leHBvcnQgZnVuY3Rpb24gc3RhcnRUcmFjZUV4cG9ydExvb3AoKSB7XG4gICAgZ2V0R2xvYmFsVHJhY2VQcm92aWRlcigpLnN0YXJ0RXhwb3J0TG9vcCgpO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXgubWpzLm1hcCIsImltcG9ydCB7IGFkZFRyYWNlUHJvY2Vzc29yIH0gZnJvbSBcIi4vdHJhY2luZy9pbmRleC5tanNcIjtcbmltcG9ydCB7IGRlZmF1bHRQcm9jZXNzb3IgfSBmcm9tIFwiLi90cmFjaW5nL3Byb2Nlc3Nvci5tanNcIjtcbmV4cG9ydCB7IFJ1bnRpbWVFdmVudEVtaXR0ZXIgfSBmcm9tICdAb3BlbmFpL2FnZW50cy1jb3JlL19zaGltcyc7XG5leHBvcnQgeyBBZ2VudCwgfSBmcm9tIFwiLi9hZ2VudC5tanNcIjtcbmV4cG9ydCB7IEFnZW50c0Vycm9yLCBHdWFyZHJhaWxFeGVjdXRpb25FcnJvciwgSW5wdXRHdWFyZHJhaWxUcmlwd2lyZVRyaWdnZXJlZCwgTWF4VHVybnNFeGNlZWRlZEVycm9yLCBNb2RlbEJlaGF2aW9yRXJyb3IsIE91dHB1dEd1YXJkcmFpbFRyaXB3aXJlVHJpZ2dlcmVkLCBUb29sQ2FsbEVycm9yLCBVc2VyRXJyb3IsIFN5c3RlbUVycm9yLCB9IGZyb20gXCIuL2Vycm9ycy5tanNcIjtcbmV4cG9ydCB7IFJ1bkFnZW50VXBkYXRlZFN0cmVhbUV2ZW50LCBSdW5SYXdNb2RlbFN0cmVhbUV2ZW50LCBSdW5JdGVtU3RyZWFtRXZlbnQsIH0gZnJvbSBcIi4vZXZlbnRzLm1qc1wiO1xuZXhwb3J0IHsgZGVmaW5lT3V0cHV0R3VhcmRyYWlsLCB9IGZyb20gXCIuL2d1YXJkcmFpbC5tanNcIjtcbmV4cG9ydCB7IGdldEhhbmRvZmYsIGdldFRyYW5zZmVyTWVzc2FnZSwgSGFuZG9mZiwgaGFuZG9mZiwgfSBmcm9tIFwiLi9oYW5kb2ZmLm1qc1wiO1xuZXhwb3J0IHsgYXNzaXN0YW50LCBzeXN0ZW0sIHVzZXIgfSBmcm9tIFwiLi9oZWxwZXJzL21lc3NhZ2UubWpzXCI7XG5leHBvcnQgeyBleHRyYWN0QWxsVGV4dE91dHB1dCwgUnVuSGFuZG9mZkNhbGxJdGVtLCBSdW5IYW5kb2ZmT3V0cHV0SXRlbSwgUnVuTWVzc2FnZU91dHB1dEl0ZW0sIFJ1blJlYXNvbmluZ0l0ZW0sIFJ1blRvb2xBcHByb3ZhbEl0ZW0sIFJ1blRvb2xDYWxsSXRlbSwgUnVuVG9vbENhbGxPdXRwdXRJdGVtLCB9IGZyb20gXCIuL2l0ZW1zLm1qc1wiO1xuZXhwb3J0IHsgQWdlbnRIb29rcyB9IGZyb20gXCIuL2xpZmVjeWNsZS5tanNcIjtcbmV4cG9ydCB7IGdldExvZ2dlciB9IGZyb20gXCIuL2xvZ2dlci5tanNcIjtcbmV4cG9ydCB7IGFwcGx5RGlmZiB9IGZyb20gXCIuL3V0aWxzL2FwcGx5RGlmZi5tanNcIjtcbmV4cG9ydCB7IGdldEFsbE1jcFRvb2xzLCBpbnZhbGlkYXRlU2VydmVyVG9vbHNDYWNoZSwgbWNwVG9GdW5jdGlvblRvb2wsIE1DUFNlcnZlclN0ZGlvLCBNQ1BTZXJ2ZXJTdHJlYW1hYmxlSHR0cCwgTUNQU2VydmVyU1NFLCB9IGZyb20gXCIuL21jcC5tanNcIjtcbmV4cG9ydCB7IGNyZWF0ZU1DUFRvb2xTdGF0aWNGaWx0ZXIsIH0gZnJvbSBcIi4vbWNwVXRpbC5tanNcIjtcbmV4cG9ydCB7IE9QRU5BSV9ERUZBVUxUX01PREVMX0VOVl9WQVJJQUJMRV9OQU1FLCBncHQ1UmVhc29uaW5nU2V0dGluZ3NSZXF1aXJlZCwgZ2V0RGVmYXVsdE1vZGVsLCBnZXREZWZhdWx0TW9kZWxTZXR0aW5ncywgaXNHcHQ1RGVmYXVsdCwgfSBmcm9tIFwiLi9kZWZhdWx0TW9kZWwubWpzXCI7XG5leHBvcnQgeyBzZXREZWZhdWx0TW9kZWxQcm92aWRlciB9IGZyb20gXCIuL3Byb3ZpZGVycy5tanNcIjtcbmV4cG9ydCB7IFJ1blJlc3VsdCwgU3RyZWFtZWRSdW5SZXN1bHQgfSBmcm9tIFwiLi9yZXN1bHQubWpzXCI7XG5leHBvcnQgeyBydW4sIFJ1bm5lciwgfSBmcm9tIFwiLi9ydW4ubWpzXCI7XG5leHBvcnQgeyBSdW5Db250ZXh0IH0gZnJvbSBcIi4vcnVuQ29udGV4dC5tanNcIjtcbmV4cG9ydCB7IFJ1blN0YXRlIH0gZnJvbSBcIi4vcnVuU3RhdGUubWpzXCI7XG5leHBvcnQgeyBjb21wdXRlclRvb2wsIHNoZWxsVG9vbCwgYXBwbHlQYXRjaFRvb2wsIGhvc3RlZE1jcFRvb2wsIHRvb2wsIH0gZnJvbSBcIi4vdG9vbC5tanNcIjtcbmV4cG9ydCAqIGZyb20gXCIuL3RyYWNpbmcvaW5kZXgubWpzXCI7XG5leHBvcnQgeyBnZXRHbG9iYWxUcmFjZVByb3ZpZGVyLCBUcmFjZVByb3ZpZGVyIH0gZnJvbSBcIi4vdHJhY2luZy9wcm92aWRlci5tanNcIjtcbmV4cG9ydCB7IFJlcXVlc3RVc2FnZSwgVXNhZ2UgfSBmcm9tIFwiLi91c2FnZS5tanNcIjtcbmV4cG9ydCB7IGlzT3BlbkFJUmVzcG9uc2VzQ29tcGFjdGlvbkF3YXJlU2Vzc2lvbiB9IGZyb20gXCIuL21lbW9yeS9zZXNzaW9uLm1qc1wiO1xuZXhwb3J0IHsgTWVtb3J5U2Vzc2lvbiB9IGZyb20gXCIuL21lbW9yeS9tZW1vcnlTZXNzaW9uLm1qc1wiO1xuZXhwb3J0ICogYXMgcHJvdG9jb2wgZnJvbSBcIi4vdHlwZXMvcHJvdG9jb2wubWpzXCI7XG4vKipcbiAqIEFkZCB0aGUgZGVmYXVsdCBwcm9jZXNzb3IsIHdoaWNoIGV4cG9ydHMgdHJhY2VzIGFuZCBzcGFucyB0byB0aGUgYmFja2VuZCBpbiBiYXRjaGVzLiBZb3UgY2FuXG4gKiBjaGFuZ2UgdGhlIGRlZmF1bHQgYmVoYXZpb3IgYnkgZWl0aGVyOlxuICogMS4gY2FsbGluZyBhZGRUcmFjZVByb2Nlc3Nvciwgd2hpY2ggYWRkcyBhZGRpdGlvbmFsIHByb2Nlc3NvcnMsIG9yXG4gKiAyLiBjYWxsaW5nIHNldFRyYWNlUHJvY2Vzc29ycywgd2hpY2ggc2V0cyB0aGUgcHJvY2Vzc29ycyBhbmQgZGlzY2FyZHMgdGhlIGRlZmF1bHQgb25lXG4gKi9cbmFkZFRyYWNlUHJvY2Vzc29yKGRlZmF1bHRQcm9jZXNzb3IoKSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5tanMubWFwIiwiaW1wb3J0IE1FVEFEQVRBIGZyb20gXCIuL21ldGFkYXRhLm1qc1wiO1xuaW1wb3J0IHsgUnVuVG9vbEFwcHJvdmFsSXRlbSB9IGZyb20gJ0BvcGVuYWkvYWdlbnRzLWNvcmUnO1xuLyoqXG4gKiBDb252ZXJ0cyBhIGJhc2U2NCBzdHJpbmcgdG8gYW4gQXJyYXlCdWZmZXJcbiAqIEBwYXJhbSB7c3RyaW5nfSBiYXNlNjRcbiAqIEByZXR1cm5zIHtBcnJheUJ1ZmZlcn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGJhc2U2NFRvQXJyYXlCdWZmZXIoYmFzZTY0KSB7XG4gICAgY29uc3QgYmluYXJ5U3RyaW5nID0gYXRvYihiYXNlNjQpO1xuICAgIGNvbnN0IGxlbiA9IGJpbmFyeVN0cmluZy5sZW5ndGg7XG4gICAgY29uc3QgYnl0ZXMgPSBuZXcgVWludDhBcnJheShsZW4pO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgYnl0ZXNbaV0gPSBiaW5hcnlTdHJpbmcuY2hhckNvZGVBdChpKTtcbiAgICB9XG4gICAgcmV0dXJuIGJ5dGVzLmJ1ZmZlcjtcbn1cbi8qKlxuICogQ29udmVydHMgYW4gQXJyYXlCdWZmZXIgdG8gYSBiYXNlNjQgc3RyaW5nXG4gKiBAcGFyYW0ge0FycmF5QnVmZmVyfSBhcnJheUJ1ZmZlclxuICogQHJldHVybnMge3N0cmluZ31cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFycmF5QnVmZmVyVG9CYXNlNjQoYXJyYXlCdWZmZXIpIHtcbiAgICBjb25zdCBiaW5hcnlTdHJpbmcgPSBTdHJpbmcuZnJvbUNoYXJDb2RlKC4uLm5ldyBVaW50OEFycmF5KGFycmF5QnVmZmVyKSk7XG4gICAgcmV0dXJuIGJ0b2EoYmluYXJ5U3RyaW5nKTtcbn1cbi8qKlxuICogR2V0IHRoZSBsYXN0IHRleHQgZnJvbSBhbiBhdWRpbyBvdXRwdXQgbWVzc2FnZVxuICogQHBhcmFtIGl0ZW1cbiAqIEByZXR1cm5zXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRMYXN0VGV4dEZyb21BdWRpb091dHB1dE1lc3NhZ2UoaXRlbSkge1xuICAgIGlmICh0eXBlb2YgaXRlbSA9PT0gJ3VuZGVmaW5lZCcgfHxcbiAgICAgICAgaXRlbSA9PT0gbnVsbCB8fFxuICAgICAgICB0eXBlb2YgaXRlbSAhPT0gJ29iamVjdCcgfHxcbiAgICAgICAgISgndHlwZScgaW4gaXRlbSkgfHxcbiAgICAgICAgdHlwZW9mIGl0ZW0udHlwZSAhPT0gJ3N0cmluZycgfHxcbiAgICAgICAgIWl0ZW0udHlwZSkge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgICBpZiAoaXRlbS50eXBlICE9PSAnbWVzc2FnZScpIHtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG4gICAgaWYgKCEoJ2NvbnRlbnQnIGluIGl0ZW0pIHx8XG4gICAgICAgICFBcnJheS5pc0FycmF5KGl0ZW0uY29udGVudCkgfHxcbiAgICAgICAgaXRlbS5jb250ZW50Lmxlbmd0aCA8IDEpIHtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG4gICAgY29uc3QgbGFzdENvbnRlbnRJdGVtID0gaXRlbS5jb250ZW50W2l0ZW0uY29udGVudC5sZW5ndGggLSAxXTtcbiAgICBpZiAoISgndHlwZScgaW4gbGFzdENvbnRlbnRJdGVtKSB8fFxuICAgICAgICB0eXBlb2YgbGFzdENvbnRlbnRJdGVtLnR5cGUgIT09ICdzdHJpbmcnKSB7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGlmIChsYXN0Q29udGVudEl0ZW0udHlwZSA9PT0gJ291dHB1dF90ZXh0Jykge1xuICAgICAgICByZXR1cm4gdHlwZW9mIGxhc3RDb250ZW50SXRlbS50ZXh0ID09PSAnc3RyaW5nJ1xuICAgICAgICAgICAgPyBsYXN0Q29udGVudEl0ZW0udGV4dFxuICAgICAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGlmIChsYXN0Q29udGVudEl0ZW0udHlwZSA9PT0gJ291dHB1dF9hdWRpbycpIHtcbiAgICAgICAgcmV0dXJuIHR5cGVvZiBsYXN0Q29udGVudEl0ZW0udHJhbnNjcmlwdCA9PT0gJ3N0cmluZydcbiAgICAgICAgICAgID8gbGFzdENvbnRlbnRJdGVtLnRyYW5zY3JpcHRcbiAgICAgICAgICAgIDogdW5kZWZpbmVkO1xuICAgIH1cbiAgICByZXR1cm4gdW5kZWZpbmVkO1xufVxuLyoqXG4gKiBDb21wYXJlIHR3byBjb252ZXJzYXRpb24gaGlzdG9yaWVzIHRvIGRldGVybWluZSB0aGUgcmVtb3ZhbHMsIGFkZGl0aW9ucywgYW5kIHVwZGF0ZXMuXG4gKiBAcGFyYW0gb2xkSGlzdG9yeSAtIFRoZSBvbGQgaGlzdG9yeS5cbiAqIEBwYXJhbSBuZXdIaXN0b3J5IC0gVGhlIG5ldyBoaXN0b3J5LlxuICogQHJldHVybnMgQSBkaWZmIG9mIHRoZSB0d28gaGlzdG9yaWVzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZGlmZlJlYWx0aW1lSGlzdG9yeShvbGRIaXN0b3J5LCBuZXdIaXN0b3J5KSB7XG4gICAgY29uc3QgcmVtb3ZhbHMgPSBvbGRIaXN0b3J5LmZpbHRlcigoaXRlbSkgPT4gIW5ld0hpc3Rvcnkuc29tZSgobmV3SXRlbSkgPT4gbmV3SXRlbS5pdGVtSWQgPT09IGl0ZW0uaXRlbUlkKSk7XG4gICAgY29uc3QgYWRkaXRpb25zID0gbmV3SGlzdG9yeS5maWx0ZXIoKGl0ZW0pID0+ICFvbGRIaXN0b3J5LnNvbWUoKG9sZEl0ZW0pID0+IG9sZEl0ZW0uaXRlbUlkID09PSBpdGVtLml0ZW1JZCkpO1xuICAgIGNvbnN0IHVwZGF0ZXMgPSBuZXdIaXN0b3J5LmZpbHRlcigoaXRlbSkgPT4gb2xkSGlzdG9yeS5zb21lKChvbGRJdGVtKSA9PiBvbGRJdGVtLml0ZW1JZCA9PT0gaXRlbS5pdGVtSWQgJiZcbiAgICAgICAgSlNPTi5zdHJpbmdpZnkob2xkSXRlbSkgIT09IEpTT04uc3RyaW5naWZ5KGl0ZW0pKSk7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgcmVtb3ZhbHMsXG4gICAgICAgIGFkZGl0aW9ucyxcbiAgICAgICAgdXBkYXRlcyxcbiAgICB9O1xufVxuLyoqXG4gKiBDaGVjayBpZiB0aGUgYnJvd3NlciBzdXBwb3J0cyBXZWJSVEMuXG4gKiBAcmV0dXJucyBUcnVlIGlmIFdlYlJUQyBpcyBzdXBwb3J0ZWQsIGZhbHNlIG90aGVyd2lzZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGhhc1dlYlJUQ1N1cHBvcnQoKSB7XG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgcmV0dXJuIHR5cGVvZiB3aW5kb3dbJ1JUQ1BlZXJDb25uZWN0aW9uJ10gIT09ICd1bmRlZmluZWQnO1xufVxuLyoqXG4gKiBSZW1vdmVzIHRoZSBhdWRpbyBkYXRhIGZyb20gYWxsIGNvbnRlbnQgaW4gYSBtZXNzYWdlIGJ5IHNldHRpbmcgaXQgdG8gbnVsbC5cbiAqIEBwYXJhbSBpdGVtXG4gKiBAcmV0dXJuc1xuICovXG5leHBvcnQgZnVuY3Rpb24gcmVtb3ZlQXVkaW9Gcm9tQ29udGVudChpdGVtKSB7XG4gICAgaWYgKGl0ZW0ucm9sZSA9PT0gJ3N5c3RlbScpIHtcbiAgICAgICAgcmV0dXJuIGl0ZW07XG4gICAgfVxuICAgIGlmIChpdGVtLnJvbGUgPT09ICdhc3Npc3RhbnQnKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAuLi5pdGVtLFxuICAgICAgICAgICAgY29udGVudDogaXRlbS5jb250ZW50Lm1hcCgoZW50cnkpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoZW50cnkudHlwZSA9PT0gJ291dHB1dF9hdWRpbycpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLmVudHJ5LFxuICAgICAgICAgICAgICAgICAgICAgICAgYXVkaW86IG51bGwsXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBlbnRyeTtcbiAgICAgICAgICAgIH0pLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBpZiAoaXRlbS5yb2xlID09PSAndXNlcicpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIC4uLml0ZW0sXG4gICAgICAgICAgICBjb250ZW50OiBpdGVtLmNvbnRlbnQubWFwKChlbnRyeSkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChlbnRyeS50eXBlID09PSAnaW5wdXRfYXVkaW8nKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAuLi5lbnRyeSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGF1ZGlvOiBudWxsLFxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gZW50cnk7XG4gICAgICAgICAgICB9KSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIGl0ZW07XG59XG4vLyBSZWFsdGltZSBjYW4gcmVzZW5kIHRydW5jYXRlZCBhc3Npc3RhbnQgaXRlbXMgd2l0aG91dCB0cmFuc2NyaXB0cyBhZnRlciBhblxuLy8gaW50ZXJydXB0L3JldHJpZXZlIGN5Y2xlLiBUaGlzIGhlbHBlciBtZXJnZXMgdGhvc2UgdXBkYXRlcyB3aXRoIHRoZSBsYXRlc3Rcbi8vIGtub3duIHRyYW5zY3JpcHQgc28gVUlzIHJldGFpbiB0aGUgcG9ydGlvbiBvZiB0aGUgbWVzc2FnZSB0aGUgdXNlciBhbHJlYWR5XG4vLyBoZWFyZC5cbmZ1bmN0aW9uIHByZXNlcnZlQXNzaXN0YW50QXVkaW9UcmFuc2NyaXB0cyhleGlzdGluZywgaW5jb21pbmcpIHtcbiAgICBpZiAoZXhpc3Rpbmcucm9sZSAhPT0gJ2Fzc2lzdGFudCcgfHwgaW5jb21pbmcucm9sZSAhPT0gJ2Fzc2lzdGFudCcpIHtcbiAgICAgICAgcmV0dXJuIGluY29taW5nO1xuICAgIH1cbiAgICBjb25zdCBtZXJnZWRDb250ZW50ID0gaW5jb21pbmcuY29udGVudC5tYXAoKGVudHJ5LCBpbmRleCkgPT4ge1xuICAgICAgICBpZiAoZW50cnkudHlwZSAhPT0gJ291dHB1dF9hdWRpbycpIHtcbiAgICAgICAgICAgIHJldHVybiBlbnRyeTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB0cmFuc2NyaXB0TWlzc2luZyA9IHR5cGVvZiBlbnRyeS50cmFuc2NyaXB0ICE9PSAnc3RyaW5nJyB8fCBlbnRyeS50cmFuc2NyaXB0Lmxlbmd0aCA9PT0gMDtcbiAgICAgICAgaWYgKCF0cmFuc2NyaXB0TWlzc2luZykge1xuICAgICAgICAgICAgcmV0dXJuIGVudHJ5O1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHByZXZpb3VzRW50cnkgPSBleGlzdGluZy5jb250ZW50W2luZGV4XTtcbiAgICAgICAgaWYgKHByZXZpb3VzRW50cnkgJiZcbiAgICAgICAgICAgIHByZXZpb3VzRW50cnkudHlwZSA9PT0gJ291dHB1dF9hdWRpbycgJiZcbiAgICAgICAgICAgIHR5cGVvZiBwcmV2aW91c0VudHJ5LnRyYW5zY3JpcHQgPT09ICdzdHJpbmcnICYmXG4gICAgICAgICAgICBwcmV2aW91c0VudHJ5LnRyYW5zY3JpcHQubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAuLi5lbnRyeSxcbiAgICAgICAgICAgICAgICB0cmFuc2NyaXB0OiBwcmV2aW91c0VudHJ5LnRyYW5zY3JpcHQsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBlbnRyeTtcbiAgICB9KTtcbiAgICByZXR1cm4ge1xuICAgICAgICAuLi5pbmNvbWluZyxcbiAgICAgICAgY29udGVudDogbWVyZ2VkQ29udGVudCxcbiAgICB9O1xufVxuLyoqXG4gKiBVcGRhdGVzIHRoZSByZWFsdGltZSBoaXN0b3J5IGFycmF5IGJhc2VkIG9uIHRoZSBpbmNvbWluZyBldmVudCBhbmQgb3B0aW9ucy5cbiAqIEBwYXJhbSBoaXN0b3J5IC0gVGhlIGN1cnJlbnQgaGlzdG9yeSBhcnJheS5cbiAqIEBwYXJhbSBldmVudCAtIFRoZSBldmVudCB0byBwcm9jZXNzIChSZWFsdGltZUl0ZW0pLlxuICogQHBhcmFtIHNob3VsZEluY2x1ZGVBdWRpb0RhdGEgLSBXaGV0aGVyIHRvIGluY2x1ZGUgYXVkaW8gZGF0YSBpbiBtZXNzYWdlIGl0ZW1zLlxuICogQHJldHVybnMgVGhlIHVwZGF0ZWQgaGlzdG9yeSBhcnJheS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHVwZGF0ZVJlYWx0aW1lSGlzdG9yeShoaXN0b3J5LCBldmVudCwgc2hvdWxkSW5jbHVkZUF1ZGlvRGF0YSkge1xuICAgIC8vIE1lcmdlIHRyYW5zY3JpcHQgaW50byBwbGFjZWhvbGRlciBpbnB1dF9hdWRpbyBtZXNzYWdlXG4gICAgaWYgKGV2ZW50LnR5cGUgPT09ICdjb252ZXJzYXRpb24uaXRlbS5pbnB1dF9hdWRpb190cmFuc2NyaXB0aW9uLmNvbXBsZXRlZCcpIHtcbiAgICAgICAgcmV0dXJuIGhpc3RvcnkubWFwKChpdGVtKSA9PiB7XG4gICAgICAgICAgICBpZiAoaXRlbS5pdGVtSWQgPT09IGV2ZW50Lml0ZW1faWQgJiZcbiAgICAgICAgICAgICAgICBpdGVtLnR5cGUgPT09ICdtZXNzYWdlJyAmJlxuICAgICAgICAgICAgICAgICdyb2xlJyBpbiBpdGVtICYmXG4gICAgICAgICAgICAgICAgaXRlbS5yb2xlID09PSAndXNlcicpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB1cGRhdGVkQ29udGVudCA9IGl0ZW0uY29udGVudC5tYXAoKGVudHJ5KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChlbnRyeS50eXBlID09PSAnaW5wdXRfYXVkaW8nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmVudHJ5LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zY3JpcHQ6IGV2ZW50LnRyYW5zY3JpcHQsXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBlbnRyeTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAuLi5pdGVtLFxuICAgICAgICAgICAgICAgICAgICBjb250ZW50OiB1cGRhdGVkQ29udGVudCxcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiAnY29tcGxldGVkJyxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGl0ZW07XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBjb25zdCBuZXdFdmVudCA9ICFzaG91bGRJbmNsdWRlQXVkaW9EYXRhICYmIGV2ZW50LnR5cGUgPT09ICdtZXNzYWdlJ1xuICAgICAgICA/IHJlbW92ZUF1ZGlvRnJvbUNvbnRlbnQoZXZlbnQpXG4gICAgICAgIDogZXZlbnQ7XG4gICAgY29uc3QgZXhpc3RpbmdJbmRleCA9IGhpc3RvcnkuZmluZEluZGV4KChpdGVtKSA9PiBpdGVtLml0ZW1JZCA9PT0gZXZlbnQuaXRlbUlkKTtcbiAgICBpZiAoZXhpc3RpbmdJbmRleCAhPT0gLTEpIHtcbiAgICAgICAgY29uc3QgZXhpc3RpbmdJdGVtID0gaGlzdG9yeVtleGlzdGluZ0luZGV4XTtcbiAgICAgICAgY29uc3QgbWVyZ2VkRXZlbnQgPSBuZXdFdmVudC50eXBlID09PSAnbWVzc2FnZScgJiYgZXhpc3RpbmdJdGVtLnR5cGUgPT09ICdtZXNzYWdlJ1xuICAgICAgICAgICAgPyBwcmVzZXJ2ZUFzc2lzdGFudEF1ZGlvVHJhbnNjcmlwdHMoZXhpc3RpbmdJdGVtLCBuZXdFdmVudClcbiAgICAgICAgICAgIDogbmV3RXZlbnQ7XG4gICAgICAgIC8vIFVwZGF0ZSBleGlzdGluZyBpdGVtXG4gICAgICAgIHJldHVybiBoaXN0b3J5Lm1hcCgoaXRlbSwgaWR4KSA9PiB7XG4gICAgICAgICAgICBpZiAoaWR4ID09PSBleGlzdGluZ0luZGV4KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG1lcmdlZEV2ZW50O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFzaG91bGRJbmNsdWRlQXVkaW9EYXRhICYmIGl0ZW0udHlwZSA9PT0gJ21lc3NhZ2UnKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlbW92ZUF1ZGlvRnJvbUNvbnRlbnQoaXRlbSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gaXRlbTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKGV2ZW50LnByZXZpb3VzSXRlbUlkKSB7XG4gICAgICAgIC8vIEluc2VydCBhZnRlciBwcmV2aW91c0l0ZW1JZCBpZiBmb3VuZCwgZWxzZSBhdCBlbmRcbiAgICAgICAgY29uc3QgcHJldkluZGV4ID0gaGlzdG9yeS5maW5kSW5kZXgoKGl0ZW0pID0+IGl0ZW0uaXRlbUlkID09PSBldmVudC5wcmV2aW91c0l0ZW1JZCk7XG4gICAgICAgIGlmIChwcmV2SW5kZXggIT09IC0xKSB7XG4gICAgICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgICAgIC4uLmhpc3Rvcnkuc2xpY2UoMCwgcHJldkluZGV4ICsgMSksXG4gICAgICAgICAgICAgICAgbmV3RXZlbnQsXG4gICAgICAgICAgICAgICAgLi4uaGlzdG9yeS5zbGljZShwcmV2SW5kZXggKyAxKSxcbiAgICAgICAgICAgIF07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gWy4uLmhpc3RvcnksIG5ld0V2ZW50XTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIFsuLi5oaXN0b3J5LCBuZXdFdmVudF07XG4gICAgfVxufVxuLyoqXG4gKiBUaGUgaGVhZGVycyB0byB1c2UgZm9yIHRoZSBSZWFsdGltZSBBUEkuXG4gKi9cbmV4cG9ydCBjb25zdCBIRUFERVJTID0ge1xuICAgICdVc2VyLUFnZW50JzogYEFnZW50cy9KYXZhU2NyaXB0ICR7TUVUQURBVEEudmVyc2lvbn1gLFxuICAgICdYLU9wZW5BSS1BZ2VudHMtU0RLJzogYG9wZW5haS1hZ2VudHMtc2RrLiR7TUVUQURBVEEudmVyc2lvbn1gLFxufTtcbi8qKlxuICogQnJvd3NlciB3ZWJzb2NrZXQgaGVhZGVyXG4gKi9cbmV4cG9ydCBjb25zdCBXRUJTT0NLRVRfTUVUQSA9IGBvcGVuYWktYWdlbnRzLXNkay4ke01FVEFEQVRBLnZlcnNpb259YDtcbmV4cG9ydCBmdW5jdGlvbiByZWFsdGltZUFwcHJvdmFsSXRlbVRvQXBwcm92YWxJdGVtKGFnZW50LCBpdGVtKSB7XG4gICAgY29uc3QgeyBuYW1lLCBhcmd1bWVudHM6IGFyZ3MsIC4uLnJlc3QgfSA9IGl0ZW07XG4gICAgcmV0dXJuIG5ldyBSdW5Ub29sQXBwcm92YWxJdGVtKHtcbiAgICAgICAgdHlwZTogJ2hvc3RlZF90b29sX2NhbGwnLFxuICAgICAgICBuYW1lLFxuICAgICAgICBhcmd1bWVudHM6IEpTT04uc3RyaW5naWZ5KGFyZ3MpLFxuICAgICAgICBzdGF0dXM6ICdpbl9wcm9ncmVzcycsXG4gICAgICAgIHByb3ZpZGVyRGF0YToge1xuICAgICAgICAgICAgLi4ucmVzdCxcbiAgICAgICAgfSxcbiAgICB9LCBhZ2VudCk7XG59XG5leHBvcnQgZnVuY3Rpb24gYXBwcm92YWxJdGVtVG9SZWFsdGltZUFwcHJvdmFsSXRlbShpdGVtKSB7XG4gICAgaWYgKGl0ZW0ucmF3SXRlbS50eXBlICE9PSAnZnVuY3Rpb25fY2FsbCcgJiZcbiAgICAgICAgaXRlbS5yYXdJdGVtLnR5cGUgIT09ICdob3N0ZWRfdG9vbF9jYWxsJykge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgYXBwcm92YWwgaXRlbSB0eXBlIGZvciBSZWFsdGltZSBNQ1AgYXBwcm92YWwgcmVxdWVzdCcpO1xuICAgIH1cbiAgICBjb25zdCB7IG5hbWUsIGFyZ3VtZW50czogYXJncywgcHJvdmlkZXJEYXRhIH0gPSBpdGVtLnJhd0l0ZW07XG4gICAgY29uc3QgeyBpdGVtSWQsIHNlcnZlckxhYmVsLCAuLi5yZXN0IH0gPSBwcm92aWRlckRhdGEgPz8ge307XG4gICAgaWYgKCFpdGVtSWQgfHwgIXNlcnZlckxhYmVsKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBhcHByb3ZhbCBpdGVtIGZvciBSZWFsdGltZSBNQ1AgYXBwcm92YWwgcmVxdWVzdCcpO1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgICB0eXBlOiAnbWNwX2FwcHJvdmFsX3JlcXVlc3QnLFxuICAgICAgICBpdGVtSWQsXG4gICAgICAgIHNlcnZlckxhYmVsLFxuICAgICAgICAuLi5yZXN0LFxuICAgICAgICBuYW1lLFxuICAgICAgICBhcmd1bWVudHM6IGFyZ3MgPyBKU09OLnBhcnNlKGFyZ3MpIDoge30sXG4gICAgICAgIGFwcHJvdmVkOiBudWxsLFxuICAgIH07XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD11dGlscy5tanMubWFwIiwiaW1wb3J0IHsgQWdlbnQsIH0gZnJvbSAnQG9wZW5haS9hZ2VudHMtY29yZSc7XG4vKipcbiAqIEEgc3BlY2lhbGl6ZWQgYWdlbnQgaW5zdGFuY2UgdGhhdCBpcyBtZWFudCB0byBiZSB1c2VkIHdpdGhpbiBhIGBSZWFsdGltZVNlc3Npb25gIHRvIGJ1aWxkXG4gKiB2b2ljZSBhZ2VudHMuIER1ZSB0byB0aGUgbmF0dXJlIG9mIHRoaXMgYWdlbnQsIHNvbWUgY29uZmlndXJhdGlvbiBvcHRpb25zIGFyZSBub3Qgc3VwcG9ydGVkXG4gKiB0aGF0IGFyZSBzdXBwb3J0ZWQgYnkgcmVndWxhciBgQWdlbnRgIGluc3RhbmNlcy4gRm9yIGV4YW1wbGU6XG4gKiAtIGBtb2RlbGAgY2hvaWNlIGlzIG5vdCBzdXBwb3J0ZWQgYXMgYWxsIFJlYWx0aW1lQWdlbnRzIHdpbGwgYmUgaGFuZGxlZCBieSB0aGUgc2FtZSBtb2RlbCB3aXRoaW5cbiAqICAgYSBgUmVhbHRpbWVTZXNzaW9uYFxuICogLSBgbW9kZWxTZXR0aW5nc2AgaXMgbm90IHN1cHBvcnRlZCBhcyBhbGwgUmVhbHRpbWVBZ2VudHMgd2lsbCBiZSBoYW5kbGVkIGJ5IHRoZSBzYW1lIG1vZGVsIHdpdGhpblxuICogICBhIGBSZWFsdGltZVNlc3Npb25gXG4gKiAtIGBvdXRwdXRUeXBlYCBpcyBub3Qgc3VwcG9ydGVkIGFzIFJlYWx0aW1lQWdlbnRzIGRvIG5vdCBzdXBwb3J0IHN0cnVjdHVyZWQgb3V0cHV0c1xuICogLSBgdG9vbFVzZUJlaGF2aW9yYCBpcyBub3Qgc3VwcG9ydGVkIGFzIGFsbCBSZWFsdGltZUFnZW50cyB3aWxsIGJlIGhhbmRsZWQgYnkgdGhlIHNhbWUgbW9kZWwgd2l0aGluXG4gKiAgIGEgYFJlYWx0aW1lU2Vzc2lvbmBcbiAqIC0gYHZvaWNlYCBjYW4gYmUgY29uZmlndXJlZCBvbiBhbiBgQWdlbnRgIGxldmVsIGhvd2V2ZXIgaXQgY2Fubm90IGJlIGNoYW5nZWQgYWZ0ZXIgdGhlIGZpcnN0XG4gKiAgICBhZ2VudCB3aXRoaW4gYSBgUmVhbHRpbWVTZXNzaW9uYCBzcG9rZVxuICpcbiAqIEBleGFtcGxlXG4gKiBgYGB0c1xuICogY29uc3QgYWdlbnQgPSBuZXcgUmVhbHRpbWVBZ2VudCh7XG4gKiAgIG5hbWU6ICdteS1hZ2VudCcsXG4gKiAgIGluc3RydWN0aW9uczogJ1lvdSBhcmUgYSBoZWxwZnVsIGFzc2lzdGFudCB0aGF0IGNhbiBhbnN3ZXIgcXVlc3Rpb25zIGFuZCBoZWxwIHdpdGggdGFza3MuJyxcbiAqIH0pXG4gKlxuICogY29uc3Qgc2Vzc2lvbiA9IG5ldyBSZWFsdGltZVNlc3Npb24oYWdlbnQpO1xuICogYGBgXG4gKi9cbmV4cG9ydCBjbGFzcyBSZWFsdGltZUFnZW50IGV4dGVuZHMgQWdlbnQge1xuICAgIC8qKlxuICAgICAqIFRoZSB2b2ljZSBpbnRlbmRlZCB0byBiZSB1c2VkIGJ5IHRoZSBhZ2VudC4gSWYgYW5vdGhlciBhZ2VudCBhbHJlYWR5IHNwb2tlIGR1cmluZyB0aGVcbiAgICAgKiBSZWFsdGltZVNlc3Npb24sIGNoYW5naW5nIHRoZSB2b2ljZSBkdXJpbmcgYSBoYW5kb2ZmIHdpbGwgZmFpbC5cbiAgICAgKi9cbiAgICB2b2ljZTtcbiAgICBjb25zdHJ1Y3Rvcihjb25maWcpIHtcbiAgICAgICAgc3VwZXIoY29uZmlnKTtcbiAgICAgICAgdGhpcy52b2ljZSA9IGNvbmZpZy52b2ljZTtcbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1yZWFsdGltZUFnZW50Lm1qcy5tYXAiLCJpbXBvcnQgeyBkZWZpbmVPdXRwdXRHdWFyZHJhaWwsIH0gZnJvbSAnQG9wZW5haS9hZ2VudHMtY29yZSc7XG5leHBvcnQgZnVuY3Rpb24gZ2V0UmVhbHRpbWVHdWFyZHJhaWxTZXR0aW5ncyhzZXR0aW5ncykge1xuICAgIHJldHVybiB7XG4gICAgICAgIGRlYm91bmNlVGV4dExlbmd0aDogc2V0dGluZ3MuZGVib3VuY2VUZXh0TGVuZ3RoID8/IDEwMCxcbiAgICB9O1xufVxuZXhwb3J0IGZ1bmN0aW9uIGRlZmluZVJlYWx0aW1lT3V0cHV0R3VhcmRyYWlsKHsgcG9saWN5SGludDogcG9saWN5SGludElucHV0LCAuLi5vcHRpb25zIH0pIHtcbiAgICBjb25zdCBiYXNlR3VhcmRyYWlsID0gZGVmaW5lT3V0cHV0R3VhcmRyYWlsKG9wdGlvbnMpO1xuICAgIGNvbnN0IHBvbGljeUhpbnQgPSBwb2xpY3lIaW50SW5wdXQgPz8gYmFzZUd1YXJkcmFpbC5uYW1lO1xuICAgIHJldHVybiB7XG4gICAgICAgIC4uLmJhc2VHdWFyZHJhaWwsXG4gICAgICAgIHBvbGljeUhpbnQsXG4gICAgICAgIHJ1bjogYXN5bmMgKGFyZ3MpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGJhc2VHdWFyZHJhaWwucnVuKGFyZ3MpO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAuLi5yZXN1bHQsXG4gICAgICAgICAgICAgICAgZ3VhcmRyYWlsOiB7IC4uLnJlc3VsdC5ndWFyZHJhaWwsIHBvbGljeUhpbnQgfSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0sXG4gICAgfTtcbn1cbi8qKlxuICogR2VuZXJhdGVzIGEgbWVzc2FnZSB0aGF0IGluZm9ybXMgdGhlIG1vZGVsIGFib3V0IHdoeSB0aGUgZ3VhcmRyYWlsIHdhcyB0cmlnZ2VyZWQgYW5kIHRvXG4gKiBjb3JyZWN0IHRoZSBiZWhhdmlvci5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFJlYWx0aW1lR3VhcmRyYWlsRmVlZGJhY2tNZXNzYWdlKHJlc3VsdCkge1xuICAgIHJldHVybiBgXG7imqDvuI8gWW91ciBsYXN0IGFuc3dlciB3YXMgYmxvY2tlZC4gXG5GYWlsZWQgR3VhcmRyYWlsIFJlYXNvbjogJHtyZXN1bHQuZ3VhcmRyYWlsLnBvbGljeUhpbnR9LiBcbkZhaWx1cmUgRGV0YWlsczogJHtKU09OLnN0cmluZ2lmeShyZXN1bHQub3V0cHV0Lm91dHB1dEluZm8gPz8ge30pfS4gXG5QbGVhc2UgcmVzcG9uZCBhZ2FpbiBmb2xsb3dpbmcgcG9saWN5LiBBcG9sb2dpemUgZm9yIG5vdCBiZWluZyBhYmxlIHRvIGFuc3dlciB0aGUgcXVlc3Rpb24gKHdoaWxlIGF2b2lkaW5nIHRoZSBzcGVjaWZpYyByZWFzb24pIGFuZCBkaXZlcnQgZGlzY3Vzc2lvbiBiYWNrIHRvIGFuIGFwcHJvdmVkIHRvcGljIGltbWVkaWF0ZWx5IGFuZCBub3QgaW52aXRlIG1vcmUgZGlzY3Vzc2lvbi5cbmAudHJpbSgpO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Z3VhcmRyYWlsLm1qcy5tYXAiLCJmdW5jdGlvbiBpc0RlZmluZWQoa2V5LCBvYmplY3QpIHtcbiAgICAvLyBAdHMtZXhwZWN0LWVycm9yIGZ1ZGdpbmcgd2l0aCB0eXBlcyBoZXJlIGZvciB0aGUgaW5kZXggdHlwZXNcbiAgICByZXR1cm4ga2V5IGluIG9iamVjdCAmJiB0eXBlb2Ygb2JqZWN0W2tleV0gIT09ICd1bmRlZmluZWQnO1xufVxuZnVuY3Rpb24gaXNEZXByZWNhdGVkQ29uZmlnKGNvbmZpZykge1xuICAgIHJldHVybiAoaXNEZWZpbmVkKCdtb2RhbGl0aWVzJywgY29uZmlnKSB8fFxuICAgICAgICBpc0RlZmluZWQoJ2lucHV0QXVkaW9Gb3JtYXQnLCBjb25maWcpIHx8XG4gICAgICAgIGlzRGVmaW5lZCgnb3V0cHV0QXVkaW9Gb3JtYXQnLCBjb25maWcpIHx8XG4gICAgICAgIGlzRGVmaW5lZCgnaW5wdXRBdWRpb1RyYW5zY3JpcHRpb24nLCBjb25maWcpIHx8XG4gICAgICAgIGlzRGVmaW5lZCgndHVybkRldGVjdGlvbicsIGNvbmZpZykgfHxcbiAgICAgICAgaXNEZWZpbmVkKCdpbnB1dEF1ZGlvTm9pc2VSZWR1Y3Rpb24nLCBjb25maWcpIHx8XG4gICAgICAgIGlzRGVmaW5lZCgnc3BlZWQnLCBjb25maWcpKTtcbn1cbi8qKlxuICogQ29udmVydCBhbnkgZ2l2ZW4gY29uZmlnIChvbGQgb3IgbmV3KSB0byB0aGUgbmV3IEdBIGNvbmZpZyBzaGFwZS5cbiAqIElmIGEgbmV3IGNvbmZpZyBpcyBwcm92aWRlZCwgaXQgd2lsbCBiZSByZXR1cm5lZCBhcy1pcyAobm9ybWFsaXplZCBzaGFsbG93bHkpLlxuICovXG5leHBvcnQgZnVuY3Rpb24gdG9OZXdTZXNzaW9uQ29uZmlnKGNvbmZpZykge1xuICAgIGlmICghaXNEZXByZWNhdGVkQ29uZmlnKGNvbmZpZykpIHtcbiAgICAgICAgY29uc3QgaW5wdXRDb25maWcgPSBjb25maWcuYXVkaW8/LmlucHV0XG4gICAgICAgICAgICA/IHtcbiAgICAgICAgICAgICAgICBmb3JtYXQ6IG5vcm1hbGl6ZUF1ZGlvRm9ybWF0KGNvbmZpZy5hdWRpby5pbnB1dC5mb3JtYXQpLFxuICAgICAgICAgICAgICAgIG5vaXNlUmVkdWN0aW9uOiBjb25maWcuYXVkaW8uaW5wdXQubm9pc2VSZWR1Y3Rpb24gPz8gbnVsbCxcbiAgICAgICAgICAgICAgICB0cmFuc2NyaXB0aW9uOiBjb25maWcuYXVkaW8uaW5wdXQudHJhbnNjcmlwdGlvbixcbiAgICAgICAgICAgICAgICB0dXJuRGV0ZWN0aW9uOiBjb25maWcuYXVkaW8uaW5wdXQudHVybkRldGVjdGlvbixcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIDogdW5kZWZpbmVkO1xuICAgICAgICBjb25zdCByZXF1ZXN0ZWRPdXRwdXRWb2ljZSA9IGNvbmZpZy5hdWRpbz8ub3V0cHV0Py52b2ljZSA/PyBjb25maWcudm9pY2U7XG4gICAgICAgIGNvbnN0IG91dHB1dENvbmZpZyA9IGNvbmZpZy5hdWRpbz8ub3V0cHV0IHx8IHR5cGVvZiByZXF1ZXN0ZWRPdXRwdXRWb2ljZSAhPT0gJ3VuZGVmaW5lZCdcbiAgICAgICAgICAgID8ge1xuICAgICAgICAgICAgICAgIGZvcm1hdDogbm9ybWFsaXplQXVkaW9Gb3JtYXQoY29uZmlnLmF1ZGlvPy5vdXRwdXQ/LmZvcm1hdCksXG4gICAgICAgICAgICAgICAgdm9pY2U6IHJlcXVlc3RlZE91dHB1dFZvaWNlLFxuICAgICAgICAgICAgICAgIHNwZWVkOiBjb25maWcuYXVkaW8/Lm91dHB1dD8uc3BlZWQsXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICA6IHVuZGVmaW5lZDtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG1vZGVsOiBjb25maWcubW9kZWwsXG4gICAgICAgICAgICBpbnN0cnVjdGlvbnM6IGNvbmZpZy5pbnN0cnVjdGlvbnMsXG4gICAgICAgICAgICB0b29sQ2hvaWNlOiBjb25maWcudG9vbENob2ljZSxcbiAgICAgICAgICAgIHRvb2xzOiBjb25maWcudG9vbHMsXG4gICAgICAgICAgICB0cmFjaW5nOiBjb25maWcudHJhY2luZyxcbiAgICAgICAgICAgIHByb3ZpZGVyRGF0YTogY29uZmlnLnByb3ZpZGVyRGF0YSxcbiAgICAgICAgICAgIHByb21wdDogY29uZmlnLnByb21wdCxcbiAgICAgICAgICAgIG91dHB1dE1vZGFsaXRpZXM6IGNvbmZpZy5vdXRwdXRNb2RhbGl0aWVzLFxuICAgICAgICAgICAgYXVkaW86IGlucHV0Q29uZmlnIHx8IG91dHB1dENvbmZpZ1xuICAgICAgICAgICAgICAgID8ge1xuICAgICAgICAgICAgICAgICAgICBpbnB1dDogaW5wdXRDb25maWcsXG4gICAgICAgICAgICAgICAgICAgIG91dHB1dDogb3V0cHV0Q29uZmlnLFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICA6IHVuZGVmaW5lZCxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgICAgbW9kZWw6IGNvbmZpZy5tb2RlbCxcbiAgICAgICAgaW5zdHJ1Y3Rpb25zOiBjb25maWcuaW5zdHJ1Y3Rpb25zLFxuICAgICAgICB0b29sQ2hvaWNlOiBjb25maWcudG9vbENob2ljZSxcbiAgICAgICAgdG9vbHM6IGNvbmZpZy50b29scyxcbiAgICAgICAgdHJhY2luZzogY29uZmlnLnRyYWNpbmcsXG4gICAgICAgIHByb3ZpZGVyRGF0YTogY29uZmlnLnByb3ZpZGVyRGF0YSxcbiAgICAgICAgcHJvbXB0OiBjb25maWcucHJvbXB0LFxuICAgICAgICBvdXRwdXRNb2RhbGl0aWVzOiBjb25maWcubW9kYWxpdGllcyxcbiAgICAgICAgYXVkaW86IHtcbiAgICAgICAgICAgIGlucHV0OiB7XG4gICAgICAgICAgICAgICAgZm9ybWF0OiBub3JtYWxpemVBdWRpb0Zvcm1hdChjb25maWcuaW5wdXRBdWRpb0Zvcm1hdCksXG4gICAgICAgICAgICAgICAgbm9pc2VSZWR1Y3Rpb246IGNvbmZpZy5pbnB1dEF1ZGlvTm9pc2VSZWR1Y3Rpb24gPz8gbnVsbCxcbiAgICAgICAgICAgICAgICB0cmFuc2NyaXB0aW9uOiBjb25maWcuaW5wdXRBdWRpb1RyYW5zY3JpcHRpb24sXG4gICAgICAgICAgICAgICAgdHVybkRldGVjdGlvbjogY29uZmlnLnR1cm5EZXRlY3Rpb24sXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgb3V0cHV0OiB7XG4gICAgICAgICAgICAgICAgZm9ybWF0OiBub3JtYWxpemVBdWRpb0Zvcm1hdChjb25maWcub3V0cHV0QXVkaW9Gb3JtYXQpLFxuICAgICAgICAgICAgICAgIHZvaWNlOiBjb25maWcudm9pY2UsXG4gICAgICAgICAgICAgICAgc3BlZWQ6IGNvbmZpZy5zcGVlZCxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgfTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBub3JtYWxpemVBdWRpb0Zvcm1hdChmb3JtYXQpIHtcbiAgICBpZiAoIWZvcm1hdClcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICBpZiAodHlwZW9mIGZvcm1hdCA9PT0gJ29iamVjdCcpXG4gICAgICAgIHJldHVybiBmb3JtYXQ7XG4gICAgY29uc3QgZiA9IFN0cmluZyhmb3JtYXQpO1xuICAgIGlmIChmID09PSAncGNtMTYnKVxuICAgICAgICByZXR1cm4geyB0eXBlOiAnYXVkaW8vcGNtJywgcmF0ZTogMjQwMDAgfTtcbiAgICBpZiAoZiA9PT0gJ2c3MTFfdWxhdycpXG4gICAgICAgIHJldHVybiB7IHR5cGU6ICdhdWRpby9wY211JyB9O1xuICAgIGlmIChmID09PSAnZzcxMV9hbGF3JylcbiAgICAgICAgcmV0dXJuIHsgdHlwZTogJ2F1ZGlvL3BjbWEnIH07XG4gICAgLy8gRGVmYXVsdCBmYWxsYmFjazogYXNzdW1lIDI0a0h6IFBDTSBpZiB1bmtub3duIHN0cmluZ1xuICAgIHJldHVybiB7IHR5cGU6ICdhdWRpby9wY20nLCByYXRlOiAyNDAwMCB9O1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y2xpZW50TWVzc2FnZXMubWpzLm1hcCIsImltcG9ydCB7IHogfSBmcm9tICd6b2QnO1xuZXhwb3J0IGNvbnN0IGJhc2VJdGVtU2NoZW1hID0gei5vYmplY3Qoe1xuICAgIGl0ZW1JZDogei5zdHJpbmcoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IHJlYWx0aW1lTWVzc2FnZUl0ZW1TY2hlbWEgPSB6LmRpc2NyaW1pbmF0ZWRVbmlvbigncm9sZScsIFtcbiAgICB6Lm9iamVjdCh7XG4gICAgICAgIGl0ZW1JZDogei5zdHJpbmcoKSxcbiAgICAgICAgcHJldmlvdXNJdGVtSWQ6IHouc3RyaW5nKCkubnVsbGFibGUoKS5vcHRpb25hbCgpLFxuICAgICAgICB0eXBlOiB6LmxpdGVyYWwoJ21lc3NhZ2UnKSxcbiAgICAgICAgcm9sZTogei5saXRlcmFsKCdzeXN0ZW0nKSxcbiAgICAgICAgY29udGVudDogei5hcnJheSh6Lm9iamVjdCh7IHR5cGU6IHoubGl0ZXJhbCgnaW5wdXRfdGV4dCcpLCB0ZXh0OiB6LnN0cmluZygpIH0pKSxcbiAgICB9KSxcbiAgICB6Lm9iamVjdCh7XG4gICAgICAgIGl0ZW1JZDogei5zdHJpbmcoKSxcbiAgICAgICAgcHJldmlvdXNJdGVtSWQ6IHouc3RyaW5nKCkubnVsbGFibGUoKS5vcHRpb25hbCgpLFxuICAgICAgICB0eXBlOiB6LmxpdGVyYWwoJ21lc3NhZ2UnKSxcbiAgICAgICAgcm9sZTogei5saXRlcmFsKCd1c2VyJyksXG4gICAgICAgIHN0YXR1czogei5lbnVtKFsnaW5fcHJvZ3Jlc3MnLCAnY29tcGxldGVkJ10pLFxuICAgICAgICBjb250ZW50OiB6LmFycmF5KHoub2JqZWN0KHsgdHlwZTogei5saXRlcmFsKCdpbnB1dF90ZXh0JyksIHRleHQ6IHouc3RyaW5nKCkgfSkub3Ioei5vYmplY3Qoe1xuICAgICAgICAgICAgdHlwZTogei5saXRlcmFsKCdpbnB1dF9hdWRpbycpLFxuICAgICAgICAgICAgYXVkaW86IHouc3RyaW5nKCkubnVsbGFibGUoKS5vcHRpb25hbCgpLFxuICAgICAgICAgICAgdHJhbnNjcmlwdDogei5zdHJpbmcoKS5udWxsYWJsZSgpLFxuICAgICAgICB9KSkpLFxuICAgIH0pLFxuICAgIHoub2JqZWN0KHtcbiAgICAgICAgaXRlbUlkOiB6LnN0cmluZygpLFxuICAgICAgICBwcmV2aW91c0l0ZW1JZDogei5zdHJpbmcoKS5udWxsYWJsZSgpLm9wdGlvbmFsKCksXG4gICAgICAgIHR5cGU6IHoubGl0ZXJhbCgnbWVzc2FnZScpLFxuICAgICAgICByb2xlOiB6LmxpdGVyYWwoJ2Fzc2lzdGFudCcpLFxuICAgICAgICBzdGF0dXM6IHouZW51bShbJ2luX3Byb2dyZXNzJywgJ2NvbXBsZXRlZCcsICdpbmNvbXBsZXRlJ10pLFxuICAgICAgICBjb250ZW50OiB6LmFycmF5KHoub2JqZWN0KHsgdHlwZTogei5saXRlcmFsKCdvdXRwdXRfdGV4dCcpLCB0ZXh0OiB6LnN0cmluZygpIH0pLm9yKHoub2JqZWN0KHtcbiAgICAgICAgICAgIHR5cGU6IHoubGl0ZXJhbCgnb3V0cHV0X2F1ZGlvJyksXG4gICAgICAgICAgICBhdWRpbzogei5zdHJpbmcoKS5udWxsYWJsZSgpLm9wdGlvbmFsKCksXG4gICAgICAgICAgICB0cmFuc2NyaXB0OiB6LnN0cmluZygpLm51bGxhYmxlKCkub3B0aW9uYWwoKSxcbiAgICAgICAgfSkpKSxcbiAgICB9KSxcbl0pO1xuZXhwb3J0IGNvbnN0IHJlYWx0aW1lVG9vbENhbGxJdGVtID0gei5vYmplY3Qoe1xuICAgIGl0ZW1JZDogei5zdHJpbmcoKSxcbiAgICBwcmV2aW91c0l0ZW1JZDogei5zdHJpbmcoKS5udWxsYWJsZSgpLm9wdGlvbmFsKCksXG4gICAgdHlwZTogei5saXRlcmFsKCdmdW5jdGlvbl9jYWxsJyksXG4gICAgc3RhdHVzOiB6LmVudW0oWydpbl9wcm9ncmVzcycsICdjb21wbGV0ZWQnLCAnaW5jb21wbGV0ZSddKSxcbiAgICBhcmd1bWVudHM6IHouc3RyaW5nKCksXG4gICAgbmFtZTogei5zdHJpbmcoKSxcbiAgICBvdXRwdXQ6IHouc3RyaW5nKCkubnVsbGFibGUoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IHJlYWx0aW1lTWNwQ2FsbEl0ZW0gPSB6Lm9iamVjdCh7XG4gICAgaXRlbUlkOiB6LnN0cmluZygpLFxuICAgIHByZXZpb3VzSXRlbUlkOiB6LnN0cmluZygpLm51bGxhYmxlKCkub3B0aW9uYWwoKSxcbiAgICB0eXBlOiB6LmVudW0oWydtY3BfY2FsbCcsICdtY3BfdG9vbF9jYWxsJ10pLFxuICAgIHN0YXR1czogei5lbnVtKFsnaW5fcHJvZ3Jlc3MnLCAnY29tcGxldGVkJywgJ2luY29tcGxldGUnXSksXG4gICAgYXJndW1lbnRzOiB6LnN0cmluZygpLFxuICAgIG5hbWU6IHouc3RyaW5nKCksXG4gICAgb3V0cHV0OiB6LnN0cmluZygpLm51bGxhYmxlKCksXG59KTtcbmV4cG9ydCBjb25zdCByZWFsdGltZU1jcENhbGxBcHByb3ZhbFJlcXVlc3RJdGVtID0gei5vYmplY3Qoe1xuICAgIGl0ZW1JZDogei5zdHJpbmcoKSxcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ21jcF9hcHByb3ZhbF9yZXF1ZXN0JyksXG4gICAgc2VydmVyTGFiZWw6IHouc3RyaW5nKCksXG4gICAgbmFtZTogei5zdHJpbmcoKSxcbiAgICBhcmd1bWVudHM6IHoucmVjb3JkKHouc3RyaW5nKCksIHouYW55KCkpLFxuICAgIGFwcHJvdmVkOiB6LmJvb2xlYW4oKS5vcHRpb25hbCgpLm51bGxhYmxlKCksXG59KTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWl0ZW1zLm1qcy5tYXAiLCJpbXBvcnQgeyBnZXRMb2dnZXIgfSBmcm9tICdAb3BlbmFpL2FnZW50cy1jb3JlJztcbmNvbnN0IGxvZ2dlciA9IGdldExvZ2dlcignb3BlbmFpLWFnZW50czpyZWFsdGltZScpO1xuZXhwb3J0IGRlZmF1bHQgbG9nZ2VyO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bG9nZ2VyLm1qcy5tYXAiLCJpbXBvcnQgeyB6IH0gZnJvbSAnem9kJztcbi8vIEV2ZW50IHNjaGVtYXMgbWlycm9yaW5nIHRoZSBzdHJ1Y3R1cmVzIGRlZmluZWQgaW4gdGhlIE9wZW5BSSBTREsgdHlwaW5ncy5cbi8vIE1vc3QgZmllbGRzIGZyb20gdGhlIGludGVyZmFjZXMgaW4gYHJlYWx0aW1lLmQudHNgIGFyZSBjYXB0dXJlZCBoZXJlIHRvXG4vLyBwcm92aWRlIGJldHRlciBydW50aW1lIHZhbGlkYXRpb24gd2hlbiBwYXJzaW5nIGV2ZW50cyBmcm9tIHRoZSBzZXJ2ZXIuXG5leHBvcnQgY29uc3QgcmVhbHRpbWVSZXNwb25zZSA9IHoub2JqZWN0KHtcbiAgICBpZDogei5zdHJpbmcoKS5vcHRpb25hbCgpLm51bGxhYmxlKCksXG4gICAgY29udmVyc2F0aW9uX2lkOiB6LnN0cmluZygpLm9wdGlvbmFsKCkubnVsbGFibGUoKSxcbiAgICBtYXhfb3V0cHV0X3Rva2Vuczogei5udW1iZXIoKS5vcih6LmxpdGVyYWwoJ2luZicpKS5vcHRpb25hbCgpLm51bGxhYmxlKCksXG4gICAgbWV0YWRhdGE6IHoucmVjb3JkKHouc3RyaW5nKCksIHouYW55KCkpLm9wdGlvbmFsKCkubnVsbGFibGUoKSxcbiAgICAvLyBHQSByZW5hbWU6IG1vZGFsaXRpZXMgLT4gb3V0cHV0X21vZGFsaXRpZXNcbiAgICBvdXRwdXRfbW9kYWxpdGllczogei5hcnJheSh6LnN0cmluZygpKS5vcHRpb25hbCgpLm51bGxhYmxlKCksXG4gICAgb2JqZWN0OiB6LmxpdGVyYWwoJ3JlYWx0aW1lLnJlc3BvbnNlJykub3B0aW9uYWwoKS5udWxsYWJsZSgpLFxuICAgIG91dHB1dDogei5hcnJheSh6LmFueSgpKS5vcHRpb25hbCgpLm51bGxhYmxlKCksXG4gICAgLy8gR0EgZ3JvdXBpbmc6IGF1ZGlvLm91dHB1dC57Zm9ybWF0LHZvaWNlfVxuICAgIGF1ZGlvOiB6XG4gICAgICAgIC5vYmplY3Qoe1xuICAgICAgICBvdXRwdXQ6IHpcbiAgICAgICAgICAgIC5vYmplY3Qoe1xuICAgICAgICAgICAgZm9ybWF0OiB6LmFueSgpLm9wdGlvbmFsKCkubnVsbGFibGUoKSxcbiAgICAgICAgICAgIHZvaWNlOiB6LnN0cmluZygpLm9wdGlvbmFsKCkubnVsbGFibGUoKSxcbiAgICAgICAgfSlcbiAgICAgICAgICAgIC5vcHRpb25hbCgpXG4gICAgICAgICAgICAubnVsbGFibGUoKSxcbiAgICB9KVxuICAgICAgICAub3B0aW9uYWwoKVxuICAgICAgICAubnVsbGFibGUoKSxcbiAgICBzdGF0dXM6IHpcbiAgICAgICAgLmVudW0oWydjb21wbGV0ZWQnLCAnaW5jb21wbGV0ZScsICdmYWlsZWQnLCAnY2FuY2VsbGVkJywgJ2luX3Byb2dyZXNzJ10pXG4gICAgICAgIC5vcHRpb25hbCgpXG4gICAgICAgIC5udWxsYWJsZSgpLFxuICAgIHN0YXR1c19kZXRhaWxzOiB6LnJlY29yZCh6LnN0cmluZygpLCB6LmFueSgpKS5vcHRpb25hbCgpLm51bGxhYmxlKCksXG4gICAgdXNhZ2U6IHpcbiAgICAgICAgLm9iamVjdCh7XG4gICAgICAgIGlucHV0X3Rva2Vuczogei5udW1iZXIoKS5vcHRpb25hbCgpLFxuICAgICAgICBpbnB1dF90b2tlbl9kZXRhaWxzOiB6LnJlY29yZCh6LnN0cmluZygpLCB6LmFueSgpKS5vcHRpb25hbCgpLm51bGxhYmxlKCksXG4gICAgICAgIG91dHB1dF90b2tlbnM6IHoubnVtYmVyKCkub3B0aW9uYWwoKSxcbiAgICAgICAgb3V0cHV0X3Rva2VuX2RldGFpbHM6IHoucmVjb3JkKHouc3RyaW5nKCksIHouYW55KCkpLm9wdGlvbmFsKCkubnVsbGFibGUoKSxcbiAgICB9KVxuICAgICAgICAub3B0aW9uYWwoKVxuICAgICAgICAubnVsbGFibGUoKSxcbn0pO1xuLy8gQmFzaWMgY29udGVudCBzY2hlbWEgdXNlZCBieSBDb252ZXJzYXRpb25JdGVtLlxuZXhwb3J0IGNvbnN0IGNvbnZlcnNhdGlvbkl0ZW1Db250ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIGlkOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgYXVkaW86IHouc3RyaW5nKCkubnVsbGFibGUoKS5vcHRpb25hbCgpLFxuICAgIHRleHQ6IHouc3RyaW5nKCkubnVsbGFibGUoKS5vcHRpb25hbCgpLFxuICAgIHRyYW5zY3JpcHQ6IHouc3RyaW5nKCkubnVsbGFibGUoKS5vcHRpb25hbCgpLFxuICAgIHR5cGU6IHoudW5pb24oW1xuICAgICAgICB6LmxpdGVyYWwoJ2lucHV0X3RleHQnKSxcbiAgICAgICAgei5saXRlcmFsKCdpbnB1dF9hdWRpbycpLFxuICAgICAgICB6LmxpdGVyYWwoJ2l0ZW1fcmVmZXJlbmNlJyksXG4gICAgICAgIHoubGl0ZXJhbCgnb3V0cHV0X3RleHQnKSxcbiAgICAgICAgei5saXRlcmFsKCdvdXRwdXRfYXVkaW8nKSxcbiAgICBdKSxcbn0pO1xuZXhwb3J0IGNvbnN0IGNvbnZlcnNhdGlvbkl0ZW1TY2hlbWEgPSB6XG4gICAgLm9iamVjdCh7XG4gICAgaWQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICBhcmd1bWVudHM6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICBjYWxsX2lkOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgY29udGVudDogei5hcnJheShjb252ZXJzYXRpb25JdGVtQ29udGVudFNjaGVtYSkub3B0aW9uYWwoKSxcbiAgICBuYW1lOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgb3V0cHV0OiB6LnN0cmluZygpLm51bGxhYmxlKCkub3B0aW9uYWwoKSxcbiAgICByb2xlOiB6LmVudW0oWyd1c2VyJywgJ2Fzc2lzdGFudCcsICdzeXN0ZW0nXSkub3B0aW9uYWwoKSxcbiAgICBzdGF0dXM6IHouZW51bShbJ2NvbXBsZXRlZCcsICdpbmNvbXBsZXRlJywgJ2luX3Byb2dyZXNzJ10pLm9wdGlvbmFsKCksXG4gICAgdHlwZTogelxuICAgICAgICAuZW51bShbXG4gICAgICAgICdtZXNzYWdlJyxcbiAgICAgICAgJ2Z1bmN0aW9uX2NhbGwnLFxuICAgICAgICAnZnVuY3Rpb25fY2FsbF9vdXRwdXQnLFxuICAgICAgICAnbWNwX2xpc3RfdG9vbHMnLFxuICAgICAgICAnbWNwX3Rvb2xfY2FsbCcsXG4gICAgICAgICdtY3BfY2FsbCcsXG4gICAgICAgICdtY3BfYXBwcm92YWxfcmVxdWVzdCcsXG4gICAgICAgICdtY3BfYXBwcm92YWxfcmVzcG9uc2UnLFxuICAgIF0pXG4gICAgICAgIC5vcHRpb25hbCgpLFxuICAgIGFwcHJvdmFsX3JlcXVlc3RfaWQ6IHouc3RyaW5nKCkubnVsbGFibGUoKS5vcHRpb25hbCgpLFxuICAgIGFwcHJvdmU6IHouYm9vbGVhbigpLm51bGxhYmxlKCkub3B0aW9uYWwoKSxcbiAgICByZWFzb246IHouc3RyaW5nKCkubnVsbGFibGUoKS5vcHRpb25hbCgpLFxuICAgIHNlcnZlcl9sYWJlbDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgIGVycm9yOiB6LmFueSgpLm51bGxhYmxlKCkub3B0aW9uYWwoKSxcbiAgICB0b29sczogelxuICAgICAgICAuYXJyYXkoelxuICAgICAgICAub2JqZWN0KHtcbiAgICAgICAgbmFtZTogei5zdHJpbmcoKSxcbiAgICAgICAgZGVzY3JpcHRpb246IHouc3RyaW5nKCksXG4gICAgICAgIGlucHV0X3NjaGVtYTogei5yZWNvcmQoei5hbnkoKSkub3B0aW9uYWwoKSxcbiAgICB9KVxuICAgICAgICAucGFzc3Rocm91Z2goKSlcbiAgICAgICAgLm9wdGlvbmFsKCksXG59KVxuICAgIC5wYXNzdGhyb3VnaCgpO1xuZXhwb3J0IGNvbnN0IGNvbnZlcnNhdGlvbkNyZWF0ZWRFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ2NvbnZlcnNhdGlvbi5jcmVhdGVkJyksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCksXG4gICAgY29udmVyc2F0aW9uOiB6Lm9iamVjdCh7XG4gICAgICAgIGlkOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgICAgIG9iamVjdDogei5saXRlcmFsKCdyZWFsdGltZS5jb252ZXJzYXRpb24nKS5vcHRpb25hbCgpLFxuICAgIH0pLFxufSk7XG4vLyBHQSByZW5hbWU6IGNvbnZlcnNhdGlvbi5pdGVtLmNyZWF0ZWQgLT4gY29udmVyc2F0aW9uLml0ZW0uYWRkZWRcbmV4cG9ydCBjb25zdCBjb252ZXJzYXRpb25JdGVtQWRkZWRFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ2NvbnZlcnNhdGlvbi5pdGVtLmFkZGVkJyksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCksXG4gICAgaXRlbTogY29udmVyc2F0aW9uSXRlbVNjaGVtYSxcbiAgICBwcmV2aW91c19pdGVtX2lkOiB6LnN0cmluZygpLm51bGxhYmxlKCkub3B0aW9uYWwoKSxcbn0pO1xuLy8gR0EgYWRkaXRpb246IGNvbnZlcnNhdGlvbi5pdGVtLmRvbmVcbmV4cG9ydCBjb25zdCBjb252ZXJzYXRpb25JdGVtRG9uZUV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnY29udmVyc2F0aW9uLml0ZW0uZG9uZScpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLFxuICAgIGl0ZW06IGNvbnZlcnNhdGlvbkl0ZW1TY2hlbWEsXG4gICAgcHJldmlvdXNfaXRlbV9pZDogei5zdHJpbmcoKS5udWxsYWJsZSgpLm9wdGlvbmFsKCksXG59KTtcbmV4cG9ydCBjb25zdCBjb252ZXJzYXRpb25JdGVtRGVsZXRlZEV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnY29udmVyc2F0aW9uLml0ZW0uZGVsZXRlZCcpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLFxuICAgIGl0ZW1faWQ6IHouc3RyaW5nKCksXG59KTtcbmV4cG9ydCBjb25zdCBjb252ZXJzYXRpb25JdGVtSW5wdXRBdWRpb1RyYW5zY3JpcHRpb25Db21wbGV0ZWRFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ2NvbnZlcnNhdGlvbi5pdGVtLmlucHV0X2F1ZGlvX3RyYW5zY3JpcHRpb24uY29tcGxldGVkJyksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCksXG4gICAgaXRlbV9pZDogei5zdHJpbmcoKSxcbiAgICBjb250ZW50X2luZGV4OiB6Lm51bWJlcigpLFxuICAgIHRyYW5zY3JpcHQ6IHouc3RyaW5nKCksXG4gICAgbG9ncHJvYnM6IHouYXJyYXkoei5hbnkoKSkubnVsbGFibGUoKS5vcHRpb25hbCgpLFxuICAgIHVzYWdlOiB6XG4gICAgICAgIC5vYmplY3Qoe1xuICAgICAgICB0eXBlOiB6LmxpdGVyYWwoJ3Rva2VucycpLFxuICAgICAgICB0b3RhbF90b2tlbnM6IHoubnVtYmVyKCksXG4gICAgICAgIGlucHV0X3Rva2Vuczogei5udW1iZXIoKSxcbiAgICAgICAgaW5wdXRfdG9rZW5fZGV0YWlsczogei5vYmplY3Qoe1xuICAgICAgICAgICAgdGV4dF90b2tlbnM6IHoubnVtYmVyKCksXG4gICAgICAgICAgICBhdWRpb190b2tlbnM6IHoubnVtYmVyKCksXG4gICAgICAgIH0pLFxuICAgICAgICBvdXRwdXRfdG9rZW5zOiB6Lm51bWJlcigpLFxuICAgIH0pXG4gICAgICAgIC5vcHRpb25hbCgpLFxufSk7XG5leHBvcnQgY29uc3QgY29udmVyc2F0aW9uSXRlbUlucHV0QXVkaW9UcmFuc2NyaXB0aW9uRGVsdGFFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ2NvbnZlcnNhdGlvbi5pdGVtLmlucHV0X2F1ZGlvX3RyYW5zY3JpcHRpb24uZGVsdGEnKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKSxcbiAgICBpdGVtX2lkOiB6LnN0cmluZygpLFxuICAgIGNvbnRlbnRfaW5kZXg6IHoubnVtYmVyKCkub3B0aW9uYWwoKSxcbiAgICBkZWx0YTogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgIGxvZ3Byb2JzOiB6LmFycmF5KHouYW55KCkpLm51bGxhYmxlKCkub3B0aW9uYWwoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IGNvbnZlcnNhdGlvbkl0ZW1JbnB1dEF1ZGlvVHJhbnNjcmlwdGlvbkZhaWxlZEV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnY29udmVyc2F0aW9uLml0ZW0uaW5wdXRfYXVkaW9fdHJhbnNjcmlwdGlvbi5mYWlsZWQnKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKSxcbiAgICBpdGVtX2lkOiB6LnN0cmluZygpLFxuICAgIGNvbnRlbnRfaW5kZXg6IHoubnVtYmVyKCksXG4gICAgZXJyb3I6IHoub2JqZWN0KHtcbiAgICAgICAgY29kZTogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgICAgICBtZXNzYWdlOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgICAgIHBhcmFtOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgICAgIHR5cGU6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICB9KSxcbn0pO1xuZXhwb3J0IGNvbnN0IGNvbnZlcnNhdGlvbkl0ZW1SZXRyaWV2ZWRFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ2NvbnZlcnNhdGlvbi5pdGVtLnJldHJpZXZlZCcpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLFxuICAgIGl0ZW06IGNvbnZlcnNhdGlvbkl0ZW1TY2hlbWEsXG59KTtcbmV4cG9ydCBjb25zdCBjb252ZXJzYXRpb25JdGVtVHJ1bmNhdGVkRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdjb252ZXJzYXRpb24uaXRlbS50cnVuY2F0ZWQnKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKSxcbiAgICBpdGVtX2lkOiB6LnN0cmluZygpLFxuICAgIGF1ZGlvX2VuZF9tczogei5udW1iZXIoKSxcbiAgICBjb250ZW50X2luZGV4OiB6Lm51bWJlcigpLFxufSk7XG5leHBvcnQgY29uc3QgY29udmVyc2F0aW9uSXRlbUNyZWF0ZUV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnY29udmVyc2F0aW9uLml0ZW0uY3JlYXRlJyksXG4gICAgaXRlbTogY29udmVyc2F0aW9uSXRlbVNjaGVtYSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgIHByZXZpb3VzX2l0ZW1faWQ6IHouc3RyaW5nKCkubnVsbGFibGUoKS5vcHRpb25hbCgpLFxufSk7XG5leHBvcnQgY29uc3QgY29udmVyc2F0aW9uSXRlbURlbGV0ZUV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnY29udmVyc2F0aW9uLml0ZW0uZGVsZXRlJyksXG4gICAgaXRlbV9pZDogei5zdHJpbmcoKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxufSk7XG5leHBvcnQgY29uc3QgY29udmVyc2F0aW9uSXRlbVJldHJpZXZlRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdjb252ZXJzYXRpb24uaXRlbS5yZXRyaWV2ZScpLFxuICAgIGl0ZW1faWQ6IHouc3RyaW5nKCksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IGNvbnZlcnNhdGlvbkl0ZW1UcnVuY2F0ZUV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnY29udmVyc2F0aW9uLml0ZW0udHJ1bmNhdGUnKSxcbiAgICBpdGVtX2lkOiB6LnN0cmluZygpLFxuICAgIGF1ZGlvX2VuZF9tczogei5udW1iZXIoKSxcbiAgICBjb250ZW50X2luZGV4OiB6Lm51bWJlcigpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG59KTtcbmV4cG9ydCBjb25zdCBlcnJvckV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnZXJyb3InKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgIGVycm9yOiB6LmFueSgpLm9wdGlvbmFsKCksXG59KTtcbmV4cG9ydCBjb25zdCBpbnB1dEF1ZGlvQnVmZmVyQ2xlYXJlZEV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnaW5wdXRfYXVkaW9fYnVmZmVyLmNsZWFyZWQnKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IGlucHV0QXVkaW9CdWZmZXJBcHBlbmRFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ2lucHV0X2F1ZGlvX2J1ZmZlci5hcHBlbmQnKSxcbiAgICBhdWRpbzogei5zdHJpbmcoKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxufSk7XG5leHBvcnQgY29uc3QgaW5wdXRBdWRpb0J1ZmZlckNsZWFyRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdpbnB1dF9hdWRpb19idWZmZXIuY2xlYXInKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxufSk7XG5leHBvcnQgY29uc3QgaW5wdXRBdWRpb0J1ZmZlckNvbW1pdEV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnaW5wdXRfYXVkaW9fYnVmZmVyLmNvbW1pdCcpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG59KTtcbmV4cG9ydCBjb25zdCBpbnB1dEF1ZGlvQnVmZmVyQ29tbWl0dGVkRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdpbnB1dF9hdWRpb19idWZmZXIuY29tbWl0dGVkJyksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCksXG4gICAgaXRlbV9pZDogei5zdHJpbmcoKSxcbiAgICBwcmV2aW91c19pdGVtX2lkOiB6LnN0cmluZygpLm51bGxhYmxlKCkub3B0aW9uYWwoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IGlucHV0QXVkaW9CdWZmZXJTcGVlY2hTdGFydGVkRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdpbnB1dF9hdWRpb19idWZmZXIuc3BlZWNoX3N0YXJ0ZWQnKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKSxcbiAgICBpdGVtX2lkOiB6LnN0cmluZygpLFxuICAgIGF1ZGlvX3N0YXJ0X21zOiB6Lm51bWJlcigpLFxufSk7XG5leHBvcnQgY29uc3QgaW5wdXRBdWRpb0J1ZmZlclNwZWVjaFN0b3BwZWRFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ2lucHV0X2F1ZGlvX2J1ZmZlci5zcGVlY2hfc3RvcHBlZCcpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLFxuICAgIGl0ZW1faWQ6IHouc3RyaW5nKCksXG4gICAgYXVkaW9fZW5kX21zOiB6Lm51bWJlcigpLFxufSk7XG5leHBvcnQgY29uc3Qgb3V0cHV0QXVkaW9CdWZmZXJTdGFydGVkRXZlbnRTY2hlbWEgPSB6XG4gICAgLm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdvdXRwdXRfYXVkaW9fYnVmZmVyLnN0YXJ0ZWQnKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKSxcbn0pXG4gICAgLnBhc3N0aHJvdWdoKCk7XG5leHBvcnQgY29uc3Qgb3V0cHV0QXVkaW9CdWZmZXJTdG9wcGVkRXZlbnRTY2hlbWEgPSB6XG4gICAgLm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdvdXRwdXRfYXVkaW9fYnVmZmVyLnN0b3BwZWQnKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKSxcbn0pXG4gICAgLnBhc3N0aHJvdWdoKCk7XG5leHBvcnQgY29uc3Qgb3V0cHV0QXVkaW9CdWZmZXJDbGVhcmVkRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdvdXRwdXRfYXVkaW9fYnVmZmVyLmNsZWFyZWQnKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IHJhdGVMaW1pdHNVcGRhdGVkRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdyYXRlX2xpbWl0cy51cGRhdGVkJyksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCksXG4gICAgcmF0ZV9saW1pdHM6IHouYXJyYXkoei5vYmplY3Qoe1xuICAgICAgICBsaW1pdDogei5udW1iZXIoKS5vcHRpb25hbCgpLFxuICAgICAgICBuYW1lOiB6LmVudW0oWydyZXF1ZXN0cycsICd0b2tlbnMnXSkub3B0aW9uYWwoKSxcbiAgICAgICAgcmVtYWluaW5nOiB6Lm51bWJlcigpLm9wdGlvbmFsKCksXG4gICAgICAgIHJlc2V0X3NlY29uZHM6IHoubnVtYmVyKCkub3B0aW9uYWwoKSxcbiAgICB9KSksXG59KTtcbmV4cG9ydCBjb25zdCByZXNwb25zZUF1ZGlvRGVsdGFFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ3Jlc3BvbnNlLm91dHB1dF9hdWRpby5kZWx0YScpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLFxuICAgIGl0ZW1faWQ6IHouc3RyaW5nKCksXG4gICAgY29udGVudF9pbmRleDogei5udW1iZXIoKSxcbiAgICBkZWx0YTogei5zdHJpbmcoKSxcbiAgICBvdXRwdXRfaW5kZXg6IHoubnVtYmVyKCksXG4gICAgcmVzcG9uc2VfaWQ6IHouc3RyaW5nKCksXG59KTtcbmV4cG9ydCBjb25zdCByZXNwb25zZUF1ZGlvRG9uZUV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgncmVzcG9uc2Uub3V0cHV0X2F1ZGlvLmRvbmUnKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKSxcbiAgICBpdGVtX2lkOiB6LnN0cmluZygpLFxuICAgIGNvbnRlbnRfaW5kZXg6IHoubnVtYmVyKCksXG4gICAgb3V0cHV0X2luZGV4OiB6Lm51bWJlcigpLFxuICAgIHJlc3BvbnNlX2lkOiB6LnN0cmluZygpLFxufSk7XG5leHBvcnQgY29uc3QgcmVzcG9uc2VBdWRpb1RyYW5zY3JpcHREZWx0YUV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgncmVzcG9uc2Uub3V0cHV0X2F1ZGlvX3RyYW5zY3JpcHQuZGVsdGEnKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKSxcbiAgICBpdGVtX2lkOiB6LnN0cmluZygpLFxuICAgIGNvbnRlbnRfaW5kZXg6IHoubnVtYmVyKCksXG4gICAgZGVsdGE6IHouc3RyaW5nKCksXG4gICAgb3V0cHV0X2luZGV4OiB6Lm51bWJlcigpLFxuICAgIHJlc3BvbnNlX2lkOiB6LnN0cmluZygpLFxufSk7XG5leHBvcnQgY29uc3QgcmVzcG9uc2VBdWRpb1RyYW5zY3JpcHREb25lRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgLy8gIEdBIG1heSBpbnRyb2R1Y2UgcmVzcG9uc2Uub3V0cHV0X2F1ZGlvX3RyYW5zY3JpcHQuZG9uZVxuICAgIHR5cGU6IHoubGl0ZXJhbCgncmVzcG9uc2Uub3V0cHV0X2F1ZGlvX3RyYW5zY3JpcHQuZG9uZScpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLFxuICAgIGl0ZW1faWQ6IHouc3RyaW5nKCksXG4gICAgY29udGVudF9pbmRleDogei5udW1iZXIoKSxcbiAgICB0cmFuc2NyaXB0OiB6LnN0cmluZygpLFxuICAgIG91dHB1dF9pbmRleDogei5udW1iZXIoKSxcbiAgICByZXNwb25zZV9pZDogei5zdHJpbmcoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IHJlc3BvbnNlQ29udGVudFBhcnRBZGRlZEV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgncmVzcG9uc2UuY29udGVudF9wYXJ0LmFkZGVkJyksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCksXG4gICAgaXRlbV9pZDogei5zdHJpbmcoKSxcbiAgICBjb250ZW50X2luZGV4OiB6Lm51bWJlcigpLFxuICAgIG91dHB1dF9pbmRleDogei5udW1iZXIoKSxcbiAgICByZXNwb25zZV9pZDogei5zdHJpbmcoKSxcbiAgICBwYXJ0OiB6Lm9iamVjdCh7XG4gICAgICAgIGF1ZGlvOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgICAgIHRleHQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICAgICAgdHJhbnNjcmlwdDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgICAgICB0eXBlOiB6LmVudW0oWyd0ZXh0JywgJ2F1ZGlvJ10pLm9wdGlvbmFsKCksXG4gICAgfSksXG59KTtcbmV4cG9ydCBjb25zdCByZXNwb25zZUNvbnRlbnRQYXJ0RG9uZUV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgncmVzcG9uc2UuY29udGVudF9wYXJ0LmRvbmUnKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKSxcbiAgICBpdGVtX2lkOiB6LnN0cmluZygpLFxuICAgIGNvbnRlbnRfaW5kZXg6IHoubnVtYmVyKCksXG4gICAgb3V0cHV0X2luZGV4OiB6Lm51bWJlcigpLFxuICAgIHJlc3BvbnNlX2lkOiB6LnN0cmluZygpLFxuICAgIHBhcnQ6IHoub2JqZWN0KHtcbiAgICAgICAgYXVkaW86IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICAgICAgdGV4dDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgICAgICB0cmFuc2NyaXB0OiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgICAgIHR5cGU6IHouZW51bShbJ3RleHQnLCAnYXVkaW8nXSkub3B0aW9uYWwoKSxcbiAgICB9KSxcbn0pO1xuZXhwb3J0IGNvbnN0IHJlc3BvbnNlQ3JlYXRlZEV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgncmVzcG9uc2UuY3JlYXRlZCcpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLFxuICAgIHJlc3BvbnNlOiByZWFsdGltZVJlc3BvbnNlLFxufSk7XG5leHBvcnQgY29uc3QgcmVzcG9uc2VEb25lRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdyZXNwb25zZS5kb25lJyksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCksXG4gICAgcmVzcG9uc2U6IHJlYWx0aW1lUmVzcG9uc2UsXG59KTtcbmV4cG9ydCBjb25zdCByZXNwb25zZUZ1bmN0aW9uQ2FsbEFyZ3VtZW50c0RlbHRhRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdyZXNwb25zZS5mdW5jdGlvbl9jYWxsX2FyZ3VtZW50cy5kZWx0YScpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLFxuICAgIGl0ZW1faWQ6IHouc3RyaW5nKCksXG4gICAgY2FsbF9pZDogei5zdHJpbmcoKSxcbiAgICBkZWx0YTogei5zdHJpbmcoKSxcbiAgICBvdXRwdXRfaW5kZXg6IHoubnVtYmVyKCksXG4gICAgcmVzcG9uc2VfaWQ6IHouc3RyaW5nKCksXG59KTtcbmV4cG9ydCBjb25zdCByZXNwb25zZUZ1bmN0aW9uQ2FsbEFyZ3VtZW50c0RvbmVFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ3Jlc3BvbnNlLmZ1bmN0aW9uX2NhbGxfYXJndW1lbnRzLmRvbmUnKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKSxcbiAgICBpdGVtX2lkOiB6LnN0cmluZygpLFxuICAgIGNhbGxfaWQ6IHouc3RyaW5nKCksXG4gICAgYXJndW1lbnRzOiB6LnN0cmluZygpLFxuICAgIG91dHB1dF9pbmRleDogei5udW1iZXIoKSxcbiAgICByZXNwb25zZV9pZDogei5zdHJpbmcoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IHJlc3BvbnNlT3V0cHV0SXRlbUFkZGVkRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdyZXNwb25zZS5vdXRwdXRfaXRlbS5hZGRlZCcpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLFxuICAgIGl0ZW06IGNvbnZlcnNhdGlvbkl0ZW1TY2hlbWEsXG4gICAgb3V0cHV0X2luZGV4OiB6Lm51bWJlcigpLFxuICAgIHJlc3BvbnNlX2lkOiB6LnN0cmluZygpLFxufSk7XG5leHBvcnQgY29uc3QgcmVzcG9uc2VPdXRwdXRJdGVtRG9uZUV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgncmVzcG9uc2Uub3V0cHV0X2l0ZW0uZG9uZScpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLFxuICAgIGl0ZW06IGNvbnZlcnNhdGlvbkl0ZW1TY2hlbWEsXG4gICAgb3V0cHV0X2luZGV4OiB6Lm51bWJlcigpLFxuICAgIHJlc3BvbnNlX2lkOiB6LnN0cmluZygpLFxufSk7XG5leHBvcnQgY29uc3QgcmVzcG9uc2VUZXh0RGVsdGFFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ3Jlc3BvbnNlLm91dHB1dF90ZXh0LmRlbHRhJyksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCksXG4gICAgaXRlbV9pZDogei5zdHJpbmcoKSxcbiAgICBjb250ZW50X2luZGV4OiB6Lm51bWJlcigpLFxuICAgIGRlbHRhOiB6LnN0cmluZygpLFxuICAgIG91dHB1dF9pbmRleDogei5udW1iZXIoKSxcbiAgICByZXNwb25zZV9pZDogei5zdHJpbmcoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IHJlc3BvbnNlVGV4dERvbmVFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICAvLyBObyByZW5hbWUgc3BlY2lmaWVkIGZvciBkb25lOyBrZWVwIHJlc3BvbnNlLnRleHQuZG9uZVxuICAgIHR5cGU6IHoubGl0ZXJhbCgncmVzcG9uc2Uub3V0cHV0X3RleHQuZG9uZScpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLFxuICAgIGl0ZW1faWQ6IHouc3RyaW5nKCksXG4gICAgY29udGVudF9pbmRleDogei5udW1iZXIoKSxcbiAgICB0ZXh0OiB6LnN0cmluZygpLFxuICAgIG91dHB1dF9pbmRleDogei5udW1iZXIoKSxcbiAgICByZXNwb25zZV9pZDogei5zdHJpbmcoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IHNlc3Npb25DcmVhdGVkRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdzZXNzaW9uLmNyZWF0ZWQnKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKSxcbiAgICBzZXNzaW9uOiB6LmFueSgpLFxufSk7XG5leHBvcnQgY29uc3Qgc2Vzc2lvblVwZGF0ZWRFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ3Nlc3Npb24udXBkYXRlZCcpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLFxuICAgIHNlc3Npb246IHouYW55KCksXG59KTtcbmV4cG9ydCBjb25zdCByZXNwb25zZUNhbmNlbEV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgncmVzcG9uc2UuY2FuY2VsJyksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICByZXNwb25zZV9pZDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxufSk7XG5leHBvcnQgY29uc3QgcmVzcG9uc2VDcmVhdGVFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ3Jlc3BvbnNlLmNyZWF0ZScpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgcmVzcG9uc2U6IHouYW55KCkub3B0aW9uYWwoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IHNlc3Npb25VcGRhdGVFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ3Nlc3Npb24udXBkYXRlJyksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICBzZXNzaW9uOiB6LmFueSgpLFxufSk7XG5leHBvcnQgY29uc3QgbWNwTGlzdFRvb2xzSW5Qcm9ncmVzc0V2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnbWNwX2xpc3RfdG9vbHMuaW5fcHJvZ3Jlc3MnKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgIGl0ZW1faWQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IG1jcExpc3RUb29sc0NvbXBsZXRlZEV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnbWNwX2xpc3RfdG9vbHMuY29tcGxldGVkJyksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICBpdGVtX2lkOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG59KTtcbmV4cG9ydCBjb25zdCByZXNwb25zZU1jcENhbGxBcmd1bWVudHNEZWx0YUV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgncmVzcG9uc2UubWNwX2NhbGxfYXJndW1lbnRzLmRlbHRhJyksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCksXG4gICAgcmVzcG9uc2VfaWQ6IHouc3RyaW5nKCksXG4gICAgaXRlbV9pZDogei5zdHJpbmcoKSxcbiAgICBvdXRwdXRfaW5kZXg6IHoubnVtYmVyKCksXG4gICAgZGVsdGE6IHouc3RyaW5nKCksXG4gICAgb2JmdXNjYXRpb246IHouc3RyaW5nKCksXG59KTtcbmV4cG9ydCBjb25zdCByZXNwb25zZU1jcENhbGxBcmd1bWVudHNEb25lRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdyZXNwb25zZS5tY3BfY2FsbF9hcmd1bWVudHMuZG9uZScpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLFxuICAgIHJlc3BvbnNlX2lkOiB6LnN0cmluZygpLFxuICAgIGl0ZW1faWQ6IHouc3RyaW5nKCksXG4gICAgb3V0cHV0X2luZGV4OiB6Lm51bWJlcigpLFxuICAgIGFyZ3VtZW50czogei5zdHJpbmcoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IHJlc3BvbnNlTWNwQ2FsbEluUHJvZ3Jlc3NFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ3Jlc3BvbnNlLm1jcF9jYWxsLmluX3Byb2dyZXNzJyksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCksXG4gICAgb3V0cHV0X2luZGV4OiB6Lm51bWJlcigpLFxuICAgIGl0ZW1faWQ6IHouc3RyaW5nKCksXG59KTtcbmV4cG9ydCBjb25zdCByZXNwb25zZU1jcENhbGxDb21wbGV0ZWRFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ3Jlc3BvbnNlLm1jcF9jYWxsLmNvbXBsZXRlZCcpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLFxuICAgIG91dHB1dF9pbmRleDogei5udW1iZXIoKSxcbiAgICBpdGVtX2lkOiB6LnN0cmluZygpLFxufSk7XG5leHBvcnQgY29uc3QgbWNwTGlzdFRvb2xzRmFpbGVkRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdtY3BfbGlzdF90b29scy5mYWlsZWQnKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgIGl0ZW1faWQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbn0pO1xuLyoqXG4gKiBUaGlzIHNjaGVtYSBpcyB1c2VkIGlmIGFuIGV2ZW50IGlzIHVua25vd24gdG8gdGhlIGNsaWVudC4gVGhlIFJlYWx0aW1lIEFQSSBtaWdodCBpbnRyb2R1Y2VcbiAqIG5ldyBldmVudHMgYXQgc29tZSBwb2ludCBhbmQgd2Ugc2hvdWxkIGhhbmRsZSB0aGVtIGdyYWNlZnVsbHkgYnkgdHJlYXRpbmcgdGhlbSBhcyBnZW5lcmljIGV2ZW50c1xuICogb25seSByZXF1aXJpbmcgYSB0eXBlIGFuZCBhbiBvcHRpb25hbCBldmVudF9pZC5cbiAqL1xuZXhwb3J0IGNvbnN0IGdlbmVyaWNFdmVudFNjaGVtYSA9IHpcbiAgICAub2JqZWN0KHtcbiAgICB0eXBlOiB6LnN0cmluZygpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLm9wdGlvbmFsKCkubnVsbGFibGUoKSxcbn0pXG4gICAgLnBhc3N0aHJvdWdoKCk7XG5leHBvcnQgY29uc3QgcmVhbHRpbWVTZXJ2ZXJFdmVudFNjaGVtYSA9IHouZGlzY3JpbWluYXRlZFVuaW9uKCd0eXBlJywgW1xuICAgIGNvbnZlcnNhdGlvbkNyZWF0ZWRFdmVudFNjaGVtYSxcbiAgICBjb252ZXJzYXRpb25JdGVtQWRkZWRFdmVudFNjaGVtYSxcbiAgICBjb252ZXJzYXRpb25JdGVtRG9uZUV2ZW50U2NoZW1hLFxuICAgIGNvbnZlcnNhdGlvbkl0ZW1EZWxldGVkRXZlbnRTY2hlbWEsXG4gICAgY29udmVyc2F0aW9uSXRlbUlucHV0QXVkaW9UcmFuc2NyaXB0aW9uQ29tcGxldGVkRXZlbnRTY2hlbWEsXG4gICAgY29udmVyc2F0aW9uSXRlbUlucHV0QXVkaW9UcmFuc2NyaXB0aW9uRGVsdGFFdmVudFNjaGVtYSxcbiAgICBjb252ZXJzYXRpb25JdGVtSW5wdXRBdWRpb1RyYW5zY3JpcHRpb25GYWlsZWRFdmVudFNjaGVtYSxcbiAgICBjb252ZXJzYXRpb25JdGVtUmV0cmlldmVkRXZlbnRTY2hlbWEsXG4gICAgY29udmVyc2F0aW9uSXRlbVRydW5jYXRlZEV2ZW50U2NoZW1hLFxuICAgIGVycm9yRXZlbnRTY2hlbWEsXG4gICAgaW5wdXRBdWRpb0J1ZmZlckNsZWFyZWRFdmVudFNjaGVtYSxcbiAgICBpbnB1dEF1ZGlvQnVmZmVyQ29tbWl0dGVkRXZlbnRTY2hlbWEsXG4gICAgaW5wdXRBdWRpb0J1ZmZlclNwZWVjaFN0YXJ0ZWRFdmVudFNjaGVtYSxcbiAgICBpbnB1dEF1ZGlvQnVmZmVyU3BlZWNoU3RvcHBlZEV2ZW50U2NoZW1hLFxuICAgIG91dHB1dEF1ZGlvQnVmZmVyU3RhcnRlZEV2ZW50U2NoZW1hLFxuICAgIG91dHB1dEF1ZGlvQnVmZmVyU3RvcHBlZEV2ZW50U2NoZW1hLFxuICAgIG91dHB1dEF1ZGlvQnVmZmVyQ2xlYXJlZEV2ZW50U2NoZW1hLFxuICAgIHJhdGVMaW1pdHNVcGRhdGVkRXZlbnRTY2hlbWEsXG4gICAgcmVzcG9uc2VBdWRpb0RlbHRhRXZlbnRTY2hlbWEsXG4gICAgcmVzcG9uc2VBdWRpb0RvbmVFdmVudFNjaGVtYSxcbiAgICByZXNwb25zZUF1ZGlvVHJhbnNjcmlwdERlbHRhRXZlbnRTY2hlbWEsXG4gICAgcmVzcG9uc2VBdWRpb1RyYW5zY3JpcHREb25lRXZlbnRTY2hlbWEsXG4gICAgcmVzcG9uc2VDb250ZW50UGFydEFkZGVkRXZlbnRTY2hlbWEsXG4gICAgcmVzcG9uc2VDb250ZW50UGFydERvbmVFdmVudFNjaGVtYSxcbiAgICByZXNwb25zZUNyZWF0ZWRFdmVudFNjaGVtYSxcbiAgICByZXNwb25zZURvbmVFdmVudFNjaGVtYSxcbiAgICByZXNwb25zZUZ1bmN0aW9uQ2FsbEFyZ3VtZW50c0RlbHRhRXZlbnRTY2hlbWEsXG4gICAgcmVzcG9uc2VGdW5jdGlvbkNhbGxBcmd1bWVudHNEb25lRXZlbnRTY2hlbWEsXG4gICAgcmVzcG9uc2VPdXRwdXRJdGVtQWRkZWRFdmVudFNjaGVtYSxcbiAgICByZXNwb25zZU91dHB1dEl0ZW1Eb25lRXZlbnRTY2hlbWEsXG4gICAgcmVzcG9uc2VUZXh0RGVsdGFFdmVudFNjaGVtYSxcbiAgICByZXNwb25zZVRleHREb25lRXZlbnRTY2hlbWEsXG4gICAgc2Vzc2lvbkNyZWF0ZWRFdmVudFNjaGVtYSxcbiAgICBzZXNzaW9uVXBkYXRlZEV2ZW50U2NoZW1hLFxuICAgIG1jcExpc3RUb29sc0luUHJvZ3Jlc3NFdmVudFNjaGVtYSxcbiAgICBtY3BMaXN0VG9vbHNDb21wbGV0ZWRFdmVudFNjaGVtYSxcbiAgICBtY3BMaXN0VG9vbHNGYWlsZWRFdmVudFNjaGVtYSxcbiAgICByZXNwb25zZU1jcENhbGxBcmd1bWVudHNEZWx0YUV2ZW50U2NoZW1hLFxuICAgIHJlc3BvbnNlTWNwQ2FsbEFyZ3VtZW50c0RvbmVFdmVudFNjaGVtYSxcbiAgICByZXNwb25zZU1jcENhbGxJblByb2dyZXNzRXZlbnRTY2hlbWEsXG4gICAgcmVzcG9uc2VNY3BDYWxsQ29tcGxldGVkRXZlbnRTY2hlbWEsXG5dKTtcbmV4cG9ydCBjb25zdCByZWFsdGltZUNsaWVudEV2ZW50U2NoZW1hID0gei5kaXNjcmltaW5hdGVkVW5pb24oJ3R5cGUnLCBbXG4gICAgY29udmVyc2F0aW9uSXRlbUNyZWF0ZUV2ZW50U2NoZW1hLFxuICAgIGNvbnZlcnNhdGlvbkl0ZW1EZWxldGVFdmVudFNjaGVtYSxcbiAgICBjb252ZXJzYXRpb25JdGVtUmV0cmlldmVFdmVudFNjaGVtYSxcbiAgICBjb252ZXJzYXRpb25JdGVtVHJ1bmNhdGVFdmVudFNjaGVtYSxcbiAgICBpbnB1dEF1ZGlvQnVmZmVyQXBwZW5kRXZlbnRTY2hlbWEsXG4gICAgaW5wdXRBdWRpb0J1ZmZlckNsZWFyRXZlbnRTY2hlbWEsXG4gICAgaW5wdXRBdWRpb0J1ZmZlckNvbW1pdEV2ZW50U2NoZW1hLFxuICAgIHJlc3BvbnNlQ2FuY2VsRXZlbnRTY2hlbWEsXG4gICAgcmVzcG9uc2VDcmVhdGVFdmVudFNjaGVtYSxcbiAgICBzZXNzaW9uVXBkYXRlRXZlbnRTY2hlbWEsXG5dKTtcbi8qKlxuICogUGFyc2VzIGEgcmVhbHRpbWUgZXZlbnQgZnJvbSB0aGUgc2VydmVyLiBJZiB0aGUgZXZlbnQgaXMgdW5rbm93biB0byB0aGUgY2xpZW50LCBpdCB3aWxsIGJlIHRyZWF0ZWQgYXMgYSBnZW5lcmljIGV2ZW50LlxuICogQHBhcmFtIGV2ZW50IC0gVGhlIGV2ZW50IHRvIHBhcnNlLlxuICogQHJldHVybnMgVGhlIHBhcnNlZCBldmVudCBvciBudWxsIGlmIHRoZSBldmVudCBpcyB1bmtub3duIHRvIHRoZSBjbGllbnQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBwYXJzZVJlYWx0aW1lRXZlbnQoZXZlbnQpIHtcbiAgICBjb25zdCByYXcgPSBKU09OLnBhcnNlKGV2ZW50LmRhdGEudG9TdHJpbmcoKSk7XG4gICAgY29uc3QgcGFyc2VkID0gcmVhbHRpbWVTZXJ2ZXJFdmVudFNjaGVtYS5zYWZlUGFyc2UocmF3KTtcbiAgICBpZiAoIXBhcnNlZC5zdWNjZXNzKSB7XG4gICAgICAgIGNvbnN0IGdlbmVyaWNQYXJzZWQgPSBnZW5lcmljRXZlbnRTY2hlbWEuc2FmZVBhcnNlKHJhdyk7XG4gICAgICAgIGlmIChnZW5lcmljUGFyc2VkLnN1Y2Nlc3MpIHtcbiAgICAgICAgICAgIHJldHVybiB7IGRhdGE6IGdlbmVyaWNQYXJzZWQuZGF0YSwgaXNHZW5lcmljOiB0cnVlIH07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHsgZGF0YTogbnVsbCwgaXNHZW5lcmljOiB0cnVlIH07XG4gICAgfVxuICAgIHJldHVybiB7IGRhdGE6IHBhcnNlZC5kYXRhLCBpc0dlbmVyaWM6IGZhbHNlIH07XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1vcGVuYWlSZWFsdGltZUV2ZW50cy5tanMubWFwIiwiaW1wb3J0IHsgUnVudGltZUV2ZW50RW1pdHRlciwgVXNhZ2UgfSBmcm9tICdAb3BlbmFpL2FnZW50cy1jb3JlJztcbmltcG9ydCB7IHRvTmV3U2Vzc2lvbkNvbmZpZywgfSBmcm9tIFwiLi9jbGllbnRNZXNzYWdlcy5tanNcIjtcbmltcG9ydCB7IHJlYWx0aW1lTWNwQ2FsbEFwcHJvdmFsUmVxdWVzdEl0ZW0sIHJlYWx0aW1lTWNwQ2FsbEl0ZW0sIHJlYWx0aW1lTWVzc2FnZUl0ZW1TY2hlbWEsIHJlYWx0aW1lVG9vbENhbGxJdGVtLCB9IGZyb20gXCIuL2l0ZW1zLm1qc1wiO1xuaW1wb3J0IGxvZ2dlciBmcm9tIFwiLi9sb2dnZXIubWpzXCI7XG5pbXBvcnQgeyBwYXJzZVJlYWx0aW1lRXZlbnQsIHJlc3BvbnNlRG9uZUV2ZW50U2NoZW1hLCB9IGZyb20gXCIuL29wZW5haVJlYWx0aW1lRXZlbnRzLm1qc1wiO1xuaW1wb3J0IHsgYXJyYXlCdWZmZXJUb0Jhc2U2NCwgZGlmZlJlYWx0aW1lSGlzdG9yeSB9IGZyb20gXCIuL3V0aWxzLm1qc1wiO1xuaW1wb3J0IHsgRXZlbnRFbWl0dGVyRGVsZWdhdGUgfSBmcm9tICdAb3BlbmFpL2FnZW50cy1jb3JlL3V0aWxzJztcbi8qKlxuICogVGhlIGRlZmF1bHQgbW9kZWwgdGhhdCBpcyB1c2VkIGR1cmluZyB0aGUgY29ubmVjdGlvbiBpZiBubyBtb2RlbCBpcyBwcm92aWRlZC5cbiAqL1xuZXhwb3J0IGNvbnN0IERFRkFVTFRfT1BFTkFJX1JFQUxUSU1FX01PREVMID0gJ2dwdC1yZWFsdGltZSc7XG4vKipcbiAqIFRoZSBkZWZhdWx0IHNlc3Npb24gY29uZmlnIHRoYXQgZ2V0cyBzZW5kIG92ZXIgZHVyaW5nIHNlc3Npb24gY29ubmVjdGlvbiB1bmxlc3Mgb3ZlcnJpZGRlblxuICogYnkgdGhlIHVzZXIuXG4gKi9cbmV4cG9ydCBjb25zdCBERUZBVUxUX09QRU5BSV9SRUFMVElNRV9TRVNTSU9OX0NPTkZJRyA9IHtcbiAgICBvdXRwdXRNb2RhbGl0aWVzOiBbJ2F1ZGlvJ10sXG4gICAgYXVkaW86IHtcbiAgICAgICAgaW5wdXQ6IHtcbiAgICAgICAgICAgIGZvcm1hdDogeyB0eXBlOiAnYXVkaW8vcGNtJywgcmF0ZTogMjQwMDAgfSxcbiAgICAgICAgICAgIHRyYW5zY3JpcHRpb246IHsgbW9kZWw6ICdncHQtNG8tbWluaS10cmFuc2NyaWJlJyB9LFxuICAgICAgICAgICAgdHVybkRldGVjdGlvbjogeyB0eXBlOiAnc2VtYW50aWNfdmFkJyB9LFxuICAgICAgICAgICAgbm9pc2VSZWR1Y3Rpb246IG51bGwsXG4gICAgICAgIH0sXG4gICAgICAgIG91dHB1dDoge1xuICAgICAgICAgICAgZm9ybWF0OiB7IHR5cGU6ICdhdWRpby9wY20nLCByYXRlOiAyNDAwMCB9LFxuICAgICAgICAgICAgc3BlZWQ6IDEsXG4gICAgICAgIH0sXG4gICAgfSxcbn07XG5leHBvcnQgY2xhc3MgT3BlbkFJUmVhbHRpbWVCYXNlIGV4dGVuZHMgRXZlbnRFbWl0dGVyRGVsZWdhdGUge1xuICAgICNtb2RlbDtcbiAgICAjYXBpS2V5O1xuICAgICN0cmFjaW5nQ29uZmlnID0gbnVsbDtcbiAgICAjcmF3U2Vzc2lvbkNvbmZpZyA9IG51bGw7XG4gICAgZXZlbnRFbWl0dGVyID0gbmV3IFJ1bnRpbWVFdmVudEVtaXR0ZXIoKTtcbiAgICBjb25zdHJ1Y3RvcihvcHRpb25zID0ge30pIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy4jbW9kZWwgPSBvcHRpb25zLm1vZGVsID8/IERFRkFVTFRfT1BFTkFJX1JFQUxUSU1FX01PREVMO1xuICAgICAgICB0aGlzLiNhcGlLZXkgPSBvcHRpb25zLmFwaUtleTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIGN1cnJlbnQgbW9kZWwgdGhhdCBpcyBiZWluZyB1c2VkIGJ5IHRoZSB0cmFuc3BvcnQgbGF5ZXIuXG4gICAgICovXG4gICAgZ2V0IGN1cnJlbnRNb2RlbCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuI21vZGVsO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgY3VycmVudCBtb2RlbCB0aGF0IGlzIGJlaW5nIHVzZWQgYnkgdGhlIHRyYW5zcG9ydCBsYXllci5cbiAgICAgKiAqKk5vdGUqKjogVGhlIG1vZGVsIGNhbm5vdCBiZSBjaGFuZ2VkIG1pZCBjb252ZXJzYXRpb24uXG4gICAgICovXG4gICAgc2V0IGN1cnJlbnRNb2RlbChtb2RlbCkge1xuICAgICAgICB0aGlzLiNtb2RlbCA9IG1vZGVsO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBIb29rIGZvciBzdWJjbGFzc2VzIHRvIGNsZWFuIHVwIHRyYW5zcG9ydC1zcGVjaWZpYyBzdGF0ZSB3aGVuIGF1ZGlvXG4gICAgICogcGxheWJhY2sgZmluaXNoZXMuIERlZmF1bHRzIHRvIGEgbm8tb3AuXG4gICAgICovXG4gICAgX2FmdGVyQXVkaW9Eb25lRXZlbnQoKSB7XG4gICAgICAgIC8vIEludGVudGlvbmFsbHkgZW1wdHkuXG4gICAgfVxuICAgIGdldCBfcmF3U2Vzc2lvbkNvbmZpZygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuI3Jhd1Nlc3Npb25Db25maWcgPz8gbnVsbDtcbiAgICB9XG4gICAgYXN5bmMgX2dldEFwaUtleShvcHRpb25zKSB7XG4gICAgICAgIGNvbnN0IGFwaUtleSA9IG9wdGlvbnMuYXBpS2V5ID8/IHRoaXMuI2FwaUtleTtcbiAgICAgICAgaWYgKHR5cGVvZiBhcGlLZXkgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIHJldHVybiBhd2FpdCBhcGlLZXkoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYXBpS2V5O1xuICAgIH1cbiAgICBfb25NZXNzYWdlKGV2ZW50KSB7XG4gICAgICAgIGNvbnN0IHsgZGF0YTogcGFyc2VkLCBpc0dlbmVyaWMgfSA9IHBhcnNlUmVhbHRpbWVFdmVudChldmVudCk7XG4gICAgICAgIGlmIChwYXJzZWQgPT09IG51bGwpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmVtaXQoJyonLCBwYXJzZWQpO1xuICAgICAgICBpZiAoaXNHZW5lcmljKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBhcnNlZC50eXBlID09PSAnZXJyb3InKSB7XG4gICAgICAgICAgICB0aGlzLmVtaXQoJ2Vycm9yJywgeyB0eXBlOiAnZXJyb3InLCBlcnJvcjogcGFyc2VkIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5lbWl0KHBhcnNlZC50eXBlLCBwYXJzZWQpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwYXJzZWQudHlwZSA9PT0gJ3Jlc3BvbnNlLmNyZWF0ZWQnKSB7XG4gICAgICAgICAgICB0aGlzLmVtaXQoJ3R1cm5fc3RhcnRlZCcsIHtcbiAgICAgICAgICAgICAgICB0eXBlOiAncmVzcG9uc2Vfc3RhcnRlZCcsXG4gICAgICAgICAgICAgICAgcHJvdmlkZXJEYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgIC4uLnBhcnNlZCxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBhcnNlZC50eXBlID09PSAnc2Vzc2lvbi51cGRhdGVkJykge1xuICAgICAgICAgICAgdGhpcy4jcmF3U2Vzc2lvbkNvbmZpZyA9IHBhcnNlZC5zZXNzaW9uO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwYXJzZWQudHlwZSA9PT0gJ3Jlc3BvbnNlLmRvbmUnKSB7XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHJlc3BvbnNlRG9uZUV2ZW50U2NoZW1hLnNhZmVQYXJzZShwYXJzZWQpO1xuICAgICAgICAgICAgaWYgKCFyZXNwb25zZS5zdWNjZXNzKSB7XG4gICAgICAgICAgICAgICAgbG9nZ2VyLmVycm9yKCdFcnJvciBwYXJzaW5nIHJlc3BvbnNlIGRvbmUgZXZlbnQnLCByZXNwb25zZS5lcnJvcik7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgaW5wdXRUb2tlbnMgPSByZXNwb25zZS5kYXRhLnJlc3BvbnNlLnVzYWdlPy5pbnB1dF90b2tlbnMgPz8gMDtcbiAgICAgICAgICAgIGNvbnN0IG91dHB1dFRva2VucyA9IHJlc3BvbnNlLmRhdGEucmVzcG9uc2UudXNhZ2U/Lm91dHB1dF90b2tlbnMgPz8gMDtcbiAgICAgICAgICAgIGNvbnN0IHRvdGFsVG9rZW5zID0gaW5wdXRUb2tlbnMgKyBvdXRwdXRUb2tlbnM7XG4gICAgICAgICAgICBjb25zdCB1c2FnZSA9IG5ldyBVc2FnZSh7XG4gICAgICAgICAgICAgICAgaW5wdXRUb2tlbnMsXG4gICAgICAgICAgICAgICAgaW5wdXRUb2tlbnNEZXRhaWxzOiByZXNwb25zZS5kYXRhLnJlc3BvbnNlLnVzYWdlPy5pbnB1dF90b2tlbl9kZXRhaWxzID8/IHt9LFxuICAgICAgICAgICAgICAgIG91dHB1dFRva2VucyxcbiAgICAgICAgICAgICAgICBvdXRwdXRUb2tlbnNEZXRhaWxzOiByZXNwb25zZS5kYXRhLnJlc3BvbnNlLnVzYWdlPy5vdXRwdXRfdG9rZW5fZGV0YWlscyA/PyB7fSxcbiAgICAgICAgICAgICAgICB0b3RhbFRva2VucyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5lbWl0KCd1c2FnZV91cGRhdGUnLCB1c2FnZSk7XG4gICAgICAgICAgICB0aGlzLmVtaXQoJ3R1cm5fZG9uZScsIHtcbiAgICAgICAgICAgICAgICB0eXBlOiAncmVzcG9uc2VfZG9uZScsXG4gICAgICAgICAgICAgICAgcmVzcG9uc2U6IHtcbiAgICAgICAgICAgICAgICAgICAgaWQ6IHJlc3BvbnNlLmRhdGEucmVzcG9uc2UuaWQgPz8gJycsXG4gICAgICAgICAgICAgICAgICAgIG91dHB1dDogcmVzcG9uc2UuZGF0YS5yZXNwb25zZS5vdXRwdXQgPz8gW10sXG4gICAgICAgICAgICAgICAgICAgIHVzYWdlOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbnB1dFRva2VucyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0VG9rZW5zRGV0YWlsczogcmVzcG9uc2UuZGF0YS5yZXNwb25zZS51c2FnZT8uaW5wdXRfdG9rZW5fZGV0YWlscyA/PyB7fSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG91dHB1dFRva2VucyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG91dHB1dFRva2Vuc0RldGFpbHM6IHJlc3BvbnNlLmRhdGEucmVzcG9uc2UudXNhZ2U/Lm91dHB1dF90b2tlbl9kZXRhaWxzID8/IHt9LFxuICAgICAgICAgICAgICAgICAgICAgICAgdG90YWxUb2tlbnMsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwYXJzZWQudHlwZSA9PT0gJ3Jlc3BvbnNlLm91dHB1dF9hdWRpby5kb25lJykge1xuICAgICAgICAgICAgdGhpcy5lbWl0KCdhdWRpb19kb25lJyk7XG4gICAgICAgICAgICB0aGlzLl9hZnRlckF1ZGlvRG9uZUV2ZW50KCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBhcnNlZC50eXBlID09PSAnY29udmVyc2F0aW9uLml0ZW0uZGVsZXRlZCcpIHtcbiAgICAgICAgICAgIHRoaXMuZW1pdCgnaXRlbV9kZWxldGVkJywge1xuICAgICAgICAgICAgICAgIGl0ZW1JZDogcGFyc2VkLml0ZW1faWQsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAocGFyc2VkLnR5cGUgPT09ICdjb252ZXJzYXRpb24uaXRlbS5pbnB1dF9hdWRpb190cmFuc2NyaXB0aW9uLmNvbXBsZXRlZCcgfHxcbiAgICAgICAgICAgIHBhcnNlZC50eXBlID09PSAnY29udmVyc2F0aW9uLml0ZW0udHJ1bmNhdGVkJykge1xuICAgICAgICAgICAgLy8gcmlnaHQgbm93IHJhdGhlciB0aGFuIGtlZXBpbmcgdHJhY2sgb2YgcGFydGlhbHMgYW5kIHJlYnVpbGRpbmcgdGhlIGl0ZW0gd2VcbiAgICAgICAgICAgIC8vIHdpbGwgcmV0cmlldmUgaXQgaW5zdGVhZCB3aGljaCB0cmlnZ2VycyB0aGUgYGNvbnZlcnNhdGlvbi5pdGVtLnJldHJpZXZlZGAgZXZlbnQgYmVsb3dcbiAgICAgICAgICAgIHRoaXMuc2VuZEV2ZW50KHtcbiAgICAgICAgICAgICAgICB0eXBlOiAnY29udmVyc2F0aW9uLml0ZW0ucmV0cmlldmUnLFxuICAgICAgICAgICAgICAgIGl0ZW1faWQ6IHBhcnNlZC5pdGVtX2lkLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBhcnNlZC50eXBlID09PSAnY29udmVyc2F0aW9uLml0ZW0uaW5wdXRfYXVkaW9fdHJhbnNjcmlwdGlvbi5kZWx0YScgfHxcbiAgICAgICAgICAgIHBhcnNlZC50eXBlID09PSAncmVzcG9uc2Uub3V0cHV0X3RleHQuZGVsdGEnIHx8XG4gICAgICAgICAgICBwYXJzZWQudHlwZSA9PT0gJ3Jlc3BvbnNlLm91dHB1dF9hdWRpb190cmFuc2NyaXB0LmRlbHRhJyB8fFxuICAgICAgICAgICAgcGFyc2VkLnR5cGUgPT09ICdyZXNwb25zZS5mdW5jdGlvbl9jYWxsX2FyZ3VtZW50cy5kZWx0YScpIHtcbiAgICAgICAgICAgIGlmIChwYXJzZWQudHlwZSA9PT0gJ3Jlc3BvbnNlLm91dHB1dF9hdWRpb190cmFuc2NyaXB0LmRlbHRhJykge1xuICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgnYXVkaW9fdHJhbnNjcmlwdF9kZWx0YScsIHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3RyYW5zY3JpcHRfZGVsdGEnLFxuICAgICAgICAgICAgICAgICAgICBkZWx0YTogcGFyc2VkLmRlbHRhLFxuICAgICAgICAgICAgICAgICAgICBpdGVtSWQ6IHBhcnNlZC5pdGVtX2lkLFxuICAgICAgICAgICAgICAgICAgICByZXNwb25zZUlkOiBwYXJzZWQucmVzcG9uc2VfaWQsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBubyBzdXBwb3J0IGZvciBwYXJ0aWFsIHRyYW5zY3JpcHRzIHlldC5cbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAocGFyc2VkLnR5cGUgPT09ICdjb252ZXJzYXRpb24uaXRlbS5hZGRlZCcgfHxcbiAgICAgICAgICAgIHBhcnNlZC50eXBlID09PSAnY29udmVyc2F0aW9uLml0ZW0uZG9uZScgfHxcbiAgICAgICAgICAgIHBhcnNlZC50eXBlID09PSAnY29udmVyc2F0aW9uLml0ZW0ucmV0cmlldmVkJykge1xuICAgICAgICAgICAgLy8gSGFuZGxlIE1DUCBsaXN0IHRvb2xzIGl0ZW1zIChvbmx5IGFjdCB3aGVuIGRvbmUgdG8gZW5zdXJlIHRvb2xzIGFyZSBwcmVzZW50KVxuICAgICAgICAgICAgaWYgKHBhcnNlZC5pdGVtLnR5cGUgPT09ICdtY3BfbGlzdF90b29scycgJiZcbiAgICAgICAgICAgICAgICBwYXJzZWQudHlwZSA9PT0gJ2NvbnZlcnNhdGlvbi5pdGVtLmRvbmUnKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgc2VydmVyTGFiZWwgPSBwYXJzZWQuaXRlbS5zZXJ2ZXJfbGFiZWwgPz8gJyc7XG4gICAgICAgICAgICAgICAgY29uc3QgdG9vbHMgPSAocGFyc2VkLml0ZW0udG9vbHMgPz8gW10pO1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgnbWNwX3Rvb2xzX2xpc3RlZCcsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlcnZlckxhYmVsLFxuICAgICAgICAgICAgICAgICAgICAgICAgdG9vbHMsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgIGxvZ2dlci5lcnJvcignRXJyb3IgZW1pdHRpbmcgbWNwX3Rvb2xzX2xpc3RlZCcsIGVyciwgcGFyc2VkLml0ZW0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBXZSBkbyBub3QgYWRkIHRoaXMgaXRlbSB0byBoaXN0b3J5OyBpdCdzIGEgdHJhbnNwb3J0LWxldmVsIHNpZGUtY2hhbm5lbC5cbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocGFyc2VkLml0ZW0udHlwZSA9PT0gJ21lc3NhZ2UnKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcHJldmlvdXNJdGVtSWQgPSBwYXJzZWQudHlwZSA9PT0gJ2NvbnZlcnNhdGlvbi5pdGVtLmFkZGVkJyB8fFxuICAgICAgICAgICAgICAgICAgICBwYXJzZWQudHlwZSA9PT0gJ2NvbnZlcnNhdGlvbi5pdGVtLmRvbmUnXG4gICAgICAgICAgICAgICAgICAgID8gcGFyc2VkLnByZXZpb3VzX2l0ZW1faWRcbiAgICAgICAgICAgICAgICAgICAgOiBudWxsO1xuICAgICAgICAgICAgICAgIGNvbnN0IGl0ZW0gPSByZWFsdGltZU1lc3NhZ2VJdGVtU2NoZW1hLnBhcnNlKHtcbiAgICAgICAgICAgICAgICAgICAgaXRlbUlkOiBwYXJzZWQuaXRlbS5pZCxcbiAgICAgICAgICAgICAgICAgICAgcHJldmlvdXNJdGVtSWQsXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IHBhcnNlZC5pdGVtLnR5cGUsXG4gICAgICAgICAgICAgICAgICAgIHJvbGU6IHBhcnNlZC5pdGVtLnJvbGUsXG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6IHBhcnNlZC5pdGVtLmNvbnRlbnQsXG4gICAgICAgICAgICAgICAgICAgIHN0YXR1czogcGFyc2VkLml0ZW0uc3RhdHVzLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgnaXRlbV91cGRhdGUnLCBpdGVtKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocGFyc2VkLml0ZW0udHlwZSA9PT0gJ21jcF9hcHByb3ZhbF9yZXF1ZXN0JyAmJlxuICAgICAgICAgICAgICAgIHBhcnNlZC50eXBlID09PSAnY29udmVyc2F0aW9uLml0ZW0uZG9uZScpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBpdGVtID0gcGFyc2VkLml0ZW07XG4gICAgICAgICAgICAgICAgY29uc3QgbWNwQXBwcm92YWxSZXF1ZXN0ID0gcmVhbHRpbWVNY3BDYWxsQXBwcm92YWxSZXF1ZXN0SXRlbS5wYXJzZSh7XG4gICAgICAgICAgICAgICAgICAgIGl0ZW1JZDogaXRlbS5pZCxcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogaXRlbS50eXBlLFxuICAgICAgICAgICAgICAgICAgICBzZXJ2ZXJMYWJlbDogaXRlbS5zZXJ2ZXJfbGFiZWwsXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IGl0ZW0ubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgYXJndW1lbnRzOiBKU09OLnBhcnNlKGl0ZW0uYXJndW1lbnRzIHx8ICd7fScpLFxuICAgICAgICAgICAgICAgICAgICBhcHByb3ZlZDogaXRlbS5hcHByb3ZlZCxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ2l0ZW1fdXBkYXRlJywgbWNwQXBwcm92YWxSZXF1ZXN0KTtcbiAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ21jcF9hcHByb3ZhbF9yZXF1ZXN0JywgbWNwQXBwcm92YWxSZXF1ZXN0KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocGFyc2VkLml0ZW0udHlwZSA9PT0gJ21jcF90b29sX2NhbGwnIHx8XG4gICAgICAgICAgICAgICAgcGFyc2VkLml0ZW0udHlwZSA9PT0gJ21jcF9jYWxsJykge1xuICAgICAgICAgICAgICAgIGNvbnN0IHN0YXR1cyA9IHBhcnNlZC50eXBlID09PSAnY29udmVyc2F0aW9uLml0ZW0uZG9uZSdcbiAgICAgICAgICAgICAgICAgICAgPyAnY29tcGxldGVkJ1xuICAgICAgICAgICAgICAgICAgICA6ICdpbl9wcm9ncmVzcyc7XG4gICAgICAgICAgICAgICAgY29uc3QgbWNwQ2FsbCA9IHJlYWx0aW1lTWNwQ2FsbEl0ZW0ucGFyc2Uoe1xuICAgICAgICAgICAgICAgICAgICBpdGVtSWQ6IHBhcnNlZC5pdGVtLmlkLFxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBwYXJzZWQuaXRlbS50eXBlLFxuICAgICAgICAgICAgICAgICAgICBzdGF0dXMsXG4gICAgICAgICAgICAgICAgICAgIGFyZ3VtZW50czogcGFyc2VkLml0ZW0uYXJndW1lbnRzLFxuICAgICAgICAgICAgICAgICAgICBuYW1lOiBwYXJzZWQuaXRlbS5uYW1lLFxuICAgICAgICAgICAgICAgICAgICBvdXRwdXQ6IHBhcnNlZC5pdGVtLm91dHB1dCxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ2l0ZW1fdXBkYXRlJywgbWNwQ2FsbCk7XG4gICAgICAgICAgICAgICAgaWYgKHBhcnNlZC50eXBlID09PSAnY29udmVyc2F0aW9uLml0ZW0uZG9uZScpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5lbWl0KCdtY3BfdG9vbF9jYWxsX2NvbXBsZXRlZCcsIG1jcENhbGwpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBhcnNlZC50eXBlID09PSAncmVzcG9uc2UubWNwX2NhbGwuaW5fcHJvZ3Jlc3MnKSB7XG4gICAgICAgICAgICBjb25zdCBpdGVtID0gcGFyc2VkO1xuICAgICAgICAgICAgdGhpcy5zZW5kRXZlbnQoe1xuICAgICAgICAgICAgICAgIHR5cGU6ICdjb252ZXJzYXRpb24uaXRlbS5yZXRyaWV2ZScsXG4gICAgICAgICAgICAgICAgaXRlbV9pZDogaXRlbS5pdGVtX2lkLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBhcnNlZC50eXBlID09PSAnbWNwX2xpc3RfdG9vbHMuaW5fcHJvZ3Jlc3MnKSB7XG4gICAgICAgICAgICBjb25zdCBpdGVtID0gcGFyc2VkO1xuICAgICAgICAgICAgaWYgKGl0ZW0uaXRlbV9pZCkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2VuZEV2ZW50KHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2NvbnZlcnNhdGlvbi5pdGVtLnJldHJpZXZlJyxcbiAgICAgICAgICAgICAgICAgICAgaXRlbV9pZDogaXRlbS5pdGVtX2lkLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwYXJzZWQudHlwZSA9PT0gJ3Jlc3BvbnNlLm91dHB1dF9pdGVtLmRvbmUnIHx8XG4gICAgICAgICAgICBwYXJzZWQudHlwZSA9PT0gJ3Jlc3BvbnNlLm91dHB1dF9pdGVtLmFkZGVkJykge1xuICAgICAgICAgICAgY29uc3QgaXRlbSA9IHBhcnNlZC5pdGVtO1xuICAgICAgICAgICAgaWYgKGl0ZW0udHlwZSA9PT0gJ2Z1bmN0aW9uX2NhbGwnICYmIGl0ZW0uc3RhdHVzID09PSAnY29tcGxldGVkJykge1xuICAgICAgICAgICAgICAgIGNvbnN0IHRvb2xDYWxsID0gcmVhbHRpbWVUb29sQ2FsbEl0ZW0ucGFyc2Uoe1xuICAgICAgICAgICAgICAgICAgICBpdGVtSWQ6IGl0ZW0uaWQsXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IGl0ZW0udHlwZSxcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiAnaW5fcHJvZ3Jlc3MnLCAvLyB3ZSBzZXQgaXQgdG8gaW5fcHJvZ3Jlc3MgZm9yIHRoZSBVSSBhcyBpdCB3aWxsIG9ubHkgYmUgY29tcGxldGVkIHdpdGggdGhlIG91dHB1dFxuICAgICAgICAgICAgICAgICAgICBhcmd1bWVudHM6IGl0ZW0uYXJndW1lbnRzLFxuICAgICAgICAgICAgICAgICAgICBuYW1lOiBpdGVtLm5hbWUsXG4gICAgICAgICAgICAgICAgICAgIG91dHB1dDogbnVsbCxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ2l0ZW1fdXBkYXRlJywgdG9vbENhbGwpO1xuICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgnZnVuY3Rpb25fY2FsbCcsIHtcbiAgICAgICAgICAgICAgICAgICAgaWQ6IGl0ZW0uaWQsXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdmdW5jdGlvbl9jYWxsJyxcbiAgICAgICAgICAgICAgICAgICAgY2FsbElkOiBpdGVtLmNhbGxfaWQgPz8gJycsXG4gICAgICAgICAgICAgICAgICAgIGFyZ3VtZW50czogaXRlbS5hcmd1bWVudHMgPz8gJycsXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IGl0ZW0ubmFtZSA/PyAnJyxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoaXRlbS50eXBlID09PSAnbWNwX3Rvb2xfY2FsbCcgfHwgaXRlbS50eXBlID09PSAnbWNwX2NhbGwnKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbWNwQ2FsbCA9IHJlYWx0aW1lTWNwQ2FsbEl0ZW0ucGFyc2Uoe1xuICAgICAgICAgICAgICAgICAgICBpdGVtSWQ6IGl0ZW0uaWQsXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IGl0ZW0udHlwZSxcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiBwYXJzZWQudHlwZSA9PT0gJ3Jlc3BvbnNlLm91dHB1dF9pdGVtLmRvbmUnXG4gICAgICAgICAgICAgICAgICAgICAgICA/ICdjb21wbGV0ZWQnXG4gICAgICAgICAgICAgICAgICAgICAgICA6ICdpbl9wcm9ncmVzcycsIC8vIHdlIHNldCBpdCB0byBpbl9wcm9ncmVzcyBmb3IgdGhlIFVJIGFzIGl0IHdpbGwgb25seSBiZSBjb21wbGV0ZWQgd2l0aCB0aGUgb3V0cHV0XG4gICAgICAgICAgICAgICAgICAgIGFyZ3VtZW50czogaXRlbS5hcmd1bWVudHMsXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IGl0ZW0ubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgb3V0cHV0OiBpdGVtLm91dHB1dCxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ2l0ZW1fdXBkYXRlJywgbWNwQ2FsbCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGl0ZW0udHlwZSA9PT0gJ21lc3NhZ2UnKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVhbHRpbWVJdGVtID0gcmVhbHRpbWVNZXNzYWdlSXRlbVNjaGVtYS5wYXJzZSh7XG4gICAgICAgICAgICAgICAgICAgIGl0ZW1JZDogcGFyc2VkLml0ZW0uaWQsXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IHBhcnNlZC5pdGVtLnR5cGUsXG4gICAgICAgICAgICAgICAgICAgIHJvbGU6IHBhcnNlZC5pdGVtLnJvbGUsXG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6IHBhcnNlZC5pdGVtLmNvbnRlbnQsXG4gICAgICAgICAgICAgICAgICAgIHN0YXR1czogcGFyc2VkLnR5cGUgPT09ICdyZXNwb25zZS5vdXRwdXRfaXRlbS5kb25lJ1xuICAgICAgICAgICAgICAgICAgICAgICAgPyAoaXRlbS5zdGF0dXMgPz8gJ2NvbXBsZXRlZCcpXG4gICAgICAgICAgICAgICAgICAgICAgICA6IChpdGVtLnN0YXR1cyA/PyAnaW5fcHJvZ3Jlc3MnKSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ2l0ZW1fdXBkYXRlJywgcmVhbHRpbWVJdGVtKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgX29uRXJyb3IoZXJyb3IpIHtcbiAgICAgICAgdGhpcy5lbWl0KCdlcnJvcicsIHtcbiAgICAgICAgICAgIHR5cGU6ICdlcnJvcicsXG4gICAgICAgICAgICBlcnJvcixcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIF9vbk9wZW4oKSB7XG4gICAgICAgIHRoaXMuZW1pdCgnY29ubmVjdGVkJyk7XG4gICAgfVxuICAgIF9vbkNsb3NlKCkge1xuICAgICAgICB0aGlzLmVtaXQoJ2Rpc2Nvbm5lY3RlZCcpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZW5kIGEgbWVzc2FnZSB0byB0aGUgUmVhbHRpbWUgQVBJLiBUaGlzIHdpbGwgY3JlYXRlIGEgbmV3IGl0ZW0gaW4gdGhlIGNvbnZlcnNhdGlvbiBhbmRcbiAgICAgKiB0cmlnZ2VyIGEgcmVzcG9uc2UuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gbWVzc2FnZSAtIFRoZSBtZXNzYWdlIHRvIHNlbmQuXG4gICAgICogQHBhcmFtIG90aGVyRXZlbnREYXRhIC0gQWRkaXRpb25hbCBldmVudCBkYXRhIHRvIHNlbmQuXG4gICAgICovXG4gICAgc2VuZE1lc3NhZ2UobWVzc2FnZSwgb3RoZXJFdmVudERhdGEsIHsgdHJpZ2dlclJlc3BvbnNlID0gdHJ1ZSB9ID0ge30pIHtcbiAgICAgICAgY29uc3QgY29udGVudCA9IHR5cGVvZiBtZXNzYWdlID09PSAnc3RyaW5nJ1xuICAgICAgICAgICAgPyBbXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiAnaW5wdXRfdGV4dCcsXG4gICAgICAgICAgICAgICAgICAgIHRleHQ6IG1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF1cbiAgICAgICAgICAgIDogbWVzc2FnZS5jb250ZW50Lm1hcCgoY29udGVudCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChjb250ZW50LnR5cGUgPT09ICdpbnB1dF9pbWFnZScpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdpbnB1dF9pbWFnZScsXG4gICAgICAgICAgICAgICAgICAgICAgICBpbWFnZV91cmw6IGNvbnRlbnQuaW1hZ2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAuLi4oY29udGVudC5wcm92aWRlckRhdGEgPz8ge30pLFxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gY29udGVudDtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB0aGlzLnNlbmRFdmVudCh7XG4gICAgICAgICAgICB0eXBlOiAnY29udmVyc2F0aW9uLml0ZW0uY3JlYXRlJyxcbiAgICAgICAgICAgIGl0ZW06IHtcbiAgICAgICAgICAgICAgICB0eXBlOiAnbWVzc2FnZScsXG4gICAgICAgICAgICAgICAgcm9sZTogJ3VzZXInLFxuICAgICAgICAgICAgICAgIGNvbnRlbnQsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgLi4ub3RoZXJFdmVudERhdGEsXG4gICAgICAgIH0pO1xuICAgICAgICBpZiAodHJpZ2dlclJlc3BvbnNlKSB7XG4gICAgICAgICAgICB0aGlzLnNlbmRFdmVudCh7XG4gICAgICAgICAgICAgICAgdHlwZTogJ3Jlc3BvbnNlLmNyZWF0ZScsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhZGRJbWFnZShpbWFnZSwgeyB0cmlnZ2VyUmVzcG9uc2UgPSB0cnVlIH0gPSB7fSkge1xuICAgICAgICB0aGlzLnNlbmRNZXNzYWdlKHtcbiAgICAgICAgICAgIHR5cGU6ICdtZXNzYWdlJyxcbiAgICAgICAgICAgIHJvbGU6ICd1c2VyJyxcbiAgICAgICAgICAgIGNvbnRlbnQ6IFt7IHR5cGU6ICdpbnB1dF9pbWFnZScsIGltYWdlIH1dLFxuICAgICAgICB9LCB7fSwgeyB0cmlnZ2VyUmVzcG9uc2UgfSk7XG4gICAgfVxuICAgIF9nZXRNZXJnZWRTZXNzaW9uQ29uZmlnKGNvbmZpZykge1xuICAgICAgICBjb25zdCBuZXdDb25maWcgPSB0b05ld1Nlc3Npb25Db25maWcoY29uZmlnKTtcbiAgICAgICAgY29uc3Qgc2Vzc2lvbkRhdGEgPSB7XG4gICAgICAgICAgICB0eXBlOiAncmVhbHRpbWUnLFxuICAgICAgICAgICAgaW5zdHJ1Y3Rpb25zOiBuZXdDb25maWcuaW5zdHJ1Y3Rpb25zLFxuICAgICAgICAgICAgbW9kZWw6IG5ld0NvbmZpZy5tb2RlbCA/PyB0aGlzLiNtb2RlbCxcbiAgICAgICAgICAgIG91dHB1dF9tb2RhbGl0aWVzOiBuZXdDb25maWcub3V0cHV0TW9kYWxpdGllcyA/P1xuICAgICAgICAgICAgICAgIERFRkFVTFRfT1BFTkFJX1JFQUxUSU1FX1NFU1NJT05fQ09ORklHLm91dHB1dE1vZGFsaXRpZXMsXG4gICAgICAgICAgICBhdWRpbzoge1xuICAgICAgICAgICAgICAgIGlucHV0OiB7XG4gICAgICAgICAgICAgICAgICAgIGZvcm1hdDogbmV3Q29uZmlnLmF1ZGlvPy5pbnB1dD8uZm9ybWF0ID8/XG4gICAgICAgICAgICAgICAgICAgICAgICBERUZBVUxUX09QRU5BSV9SRUFMVElNRV9TRVNTSU9OX0NPTkZJRy5hdWRpbz8uaW5wdXQ/LmZvcm1hdCxcbiAgICAgICAgICAgICAgICAgICAgbm9pc2VfcmVkdWN0aW9uOiBuZXdDb25maWcuYXVkaW8/LmlucHV0Py5ub2lzZVJlZHVjdGlvbiA/P1xuICAgICAgICAgICAgICAgICAgICAgICAgREVGQVVMVF9PUEVOQUlfUkVBTFRJTUVfU0VTU0lPTl9DT05GSUcuYXVkaW8/LmlucHV0Py5ub2lzZVJlZHVjdGlvbixcbiAgICAgICAgICAgICAgICAgICAgdHJhbnNjcmlwdGlvbjogbmV3Q29uZmlnLmF1ZGlvPy5pbnB1dD8udHJhbnNjcmlwdGlvbiA/P1xuICAgICAgICAgICAgICAgICAgICAgICAgREVGQVVMVF9PUEVOQUlfUkVBTFRJTUVfU0VTU0lPTl9DT05GSUcuYXVkaW8/LmlucHV0Py50cmFuc2NyaXB0aW9uLFxuICAgICAgICAgICAgICAgICAgICB0dXJuX2RldGVjdGlvbjogT3BlbkFJUmVhbHRpbWVCYXNlLmJ1aWxkVHVybkRldGVjdGlvbkNvbmZpZyhuZXdDb25maWcuYXVkaW8/LmlucHV0Py50dXJuRGV0ZWN0aW9uKSA/P1xuICAgICAgICAgICAgICAgICAgICAgICAgREVGQVVMVF9PUEVOQUlfUkVBTFRJTUVfU0VTU0lPTl9DT05GSUcuYXVkaW8/LmlucHV0Py50dXJuRGV0ZWN0aW9uLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgb3V0cHV0OiB7XG4gICAgICAgICAgICAgICAgICAgIGZvcm1hdDogbmV3Q29uZmlnLmF1ZGlvPy5vdXRwdXQ/LmZvcm1hdCA/P1xuICAgICAgICAgICAgICAgICAgICAgICAgREVGQVVMVF9PUEVOQUlfUkVBTFRJTUVfU0VTU0lPTl9DT05GSUcuYXVkaW8/Lm91dHB1dD8uZm9ybWF0LFxuICAgICAgICAgICAgICAgICAgICB2b2ljZTogbmV3Q29uZmlnLmF1ZGlvPy5vdXRwdXQ/LnZvaWNlID8/XG4gICAgICAgICAgICAgICAgICAgICAgICBERUZBVUxUX09QRU5BSV9SRUFMVElNRV9TRVNTSU9OX0NPTkZJRy5hdWRpbz8ub3V0cHV0Py52b2ljZSxcbiAgICAgICAgICAgICAgICAgICAgc3BlZWQ6IG5ld0NvbmZpZy5hdWRpbz8ub3V0cHV0Py5zcGVlZCA/P1xuICAgICAgICAgICAgICAgICAgICAgICAgREVGQVVMVF9PUEVOQUlfUkVBTFRJTUVfU0VTU0lPTl9DT05GSUcuYXVkaW8/Lm91dHB1dD8uc3BlZWQsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB0b29sX2Nob2ljZTogbmV3Q29uZmlnLnRvb2xDaG9pY2UgPz9cbiAgICAgICAgICAgICAgICBERUZBVUxUX09QRU5BSV9SRUFMVElNRV9TRVNTSU9OX0NPTkZJRy50b29sQ2hvaWNlLFxuICAgICAgICAgICAgLy8gV2UgZG9uJ3Qgc2V0IHRyYWNpbmcgaGVyZSB0byBtYWtlIHN1cmUgdGhhdCB3ZSBkb24ndCB0cnkgdG8gb3ZlcnJpZGUgaXQgb24gZXZlcnlcbiAgICAgICAgICAgIC8vIHNlc3Npb24udXBkYXRlIGFzIGl0IG1pZ2h0IGxlYWQgdG8gZXJyb3JzXG4gICAgICAgICAgICAuLi4obmV3Q29uZmlnLnByb3ZpZGVyRGF0YSA/PyB7fSksXG4gICAgICAgIH07XG4gICAgICAgIGlmIChuZXdDb25maWcucHJvbXB0KSB7XG4gICAgICAgICAgICBzZXNzaW9uRGF0YS5wcm9tcHQgPSB7XG4gICAgICAgICAgICAgICAgaWQ6IG5ld0NvbmZpZy5wcm9tcHQucHJvbXB0SWQsXG4gICAgICAgICAgICAgICAgdmVyc2lvbjogbmV3Q29uZmlnLnByb21wdC52ZXJzaW9uLFxuICAgICAgICAgICAgICAgIHZhcmlhYmxlczogbmV3Q29uZmlnLnByb21wdC52YXJpYWJsZXMsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIGlmIChuZXdDb25maWcudG9vbHMgJiYgbmV3Q29uZmlnLnRvb2xzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHNlc3Npb25EYXRhLnRvb2xzID0gbmV3Q29uZmlnLnRvb2xzLm1hcCgodG9vbCkgPT4gKHtcbiAgICAgICAgICAgICAgICAuLi50b29sLFxuICAgICAgICAgICAgICAgIHN0cmljdDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzZXNzaW9uRGF0YTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQnVpbGQgdGhlIHBheWxvYWQgb2JqZWN0IGV4cGVjdGVkIGJ5IHRoZSBSZWFsdGltZSBBUEkgd2hlbiBjcmVhdGluZyBvciB1cGRhdGluZyBhIHNlc3Npb24uXG4gICAgICpcbiAgICAgKiBUaGUgaGVscGVyIGNlbnRyYWxpc2VzIHRoZSBjb252ZXJzaW9uIGZyb20gY2FtZWxDYXNlIHJ1bnRpbWUgY29uZmlnIHRvIHRoZSBzbmFrZV9jYXNlIHBheWxvYWRcbiAgICAgKiByZXF1aXJlZCBieSB0aGUgUmVhbHRpbWUgQVBJIHNvIHRyYW5zcG9ydHMgdGhhdCBuZWVkIGEgb25lLW9mZiBwYXlsb2FkIChmb3IgZXhhbXBsZSBTSVAgY2FsbFxuICAgICAqIGFjY2VwdGFuY2UpIGNhbiByZXVzZSB0aGUgc2FtZSBsb2dpYyB3aXRob3V0IGR1cGxpY2F0aW5nIHByaXZhdGUgc3RhdGUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gY29uZmlnIC0gVGhlIHNlc3Npb24gY29uZmlnIHRvIG1lcmdlIHdpdGggZGVmYXVsdHMuXG4gICAgICovXG4gICAgYnVpbGRTZXNzaW9uUGF5bG9hZChjb25maWcpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2dldE1lcmdlZFNlc3Npb25Db25maWcoY29uZmlnKTtcbiAgICB9XG4gICAgc3RhdGljIGJ1aWxkVHVybkRldGVjdGlvbkNvbmZpZyhjKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYyA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgeyB0eXBlLCBjcmVhdGVSZXNwb25zZSwgY3JlYXRlX3Jlc3BvbnNlLCBlYWdlcm5lc3MsIGludGVycnVwdFJlc3BvbnNlLCBpbnRlcnJ1cHRfcmVzcG9uc2UsIHByZWZpeFBhZGRpbmdNcywgcHJlZml4X3BhZGRpbmdfbXMsIHNpbGVuY2VEdXJhdGlvbk1zLCBzaWxlbmNlX2R1cmF0aW9uX21zLCB0aHJlc2hvbGQsIGlkbGVUaW1lb3V0TXMsIGlkbGVfdGltZW91dF9tcywgLi4ucmVzdCB9ID0gYztcbiAgICAgICAgY29uc3QgY29uZmlnID0ge1xuICAgICAgICAgICAgdHlwZSxcbiAgICAgICAgICAgIGNyZWF0ZV9yZXNwb25zZTogY3JlYXRlUmVzcG9uc2UgPyBjcmVhdGVSZXNwb25zZSA6IGNyZWF0ZV9yZXNwb25zZSxcbiAgICAgICAgICAgIGVhZ2VybmVzcyxcbiAgICAgICAgICAgIGludGVycnVwdF9yZXNwb25zZTogaW50ZXJydXB0UmVzcG9uc2VcbiAgICAgICAgICAgICAgICA/IGludGVycnVwdFJlc3BvbnNlXG4gICAgICAgICAgICAgICAgOiBpbnRlcnJ1cHRfcmVzcG9uc2UsXG4gICAgICAgICAgICBwcmVmaXhfcGFkZGluZ19tczogcHJlZml4UGFkZGluZ01zID8gcHJlZml4UGFkZGluZ01zIDogcHJlZml4X3BhZGRpbmdfbXMsXG4gICAgICAgICAgICBzaWxlbmNlX2R1cmF0aW9uX21zOiBzaWxlbmNlRHVyYXRpb25Nc1xuICAgICAgICAgICAgICAgID8gc2lsZW5jZUR1cmF0aW9uTXNcbiAgICAgICAgICAgICAgICA6IHNpbGVuY2VfZHVyYXRpb25fbXMsXG4gICAgICAgICAgICBpZGxlX3RpbWVvdXRfbXM6IGlkbGVUaW1lb3V0TXMgPyBpZGxlVGltZW91dE1zIDogaWRsZV90aW1lb3V0X21zLFxuICAgICAgICAgICAgdGhyZXNob2xkLFxuICAgICAgICAgICAgLi4ucmVzdCxcbiAgICAgICAgfTtcbiAgICAgICAgLy8gUmVtb3ZlIHVuZGVmaW5lZCB2YWx1ZXMgZnJvbSB0aGUgY29uZmlnXG4gICAgICAgIE9iamVjdC5rZXlzKGNvbmZpZykuZm9yRWFjaCgoa2V5KSA9PiB7XG4gICAgICAgICAgICBpZiAoY29uZmlnW2tleV0gPT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgICAgICBkZWxldGUgY29uZmlnW2tleV07XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gT2JqZWN0LmtleXMoY29uZmlnKS5sZW5ndGggPiAwID8gY29uZmlnIDogdW5kZWZpbmVkO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXRzIHRoZSBpbnRlcm5hbCB0cmFjaW5nIGNvbmZpZy4gVGhpcyBpcyB1c2VkIHRvIHRyYWNrIHRoZSB0cmFjaW5nIGNvbmZpZyB0aGF0IGhhcyBiZWVuIHNldFxuICAgICAqIGR1cmluZyB0aGUgc2Vzc2lvbi5jcmVhdGUgZXZlbnQuXG4gICAgICovXG4gICAgc2V0IF90cmFjaW5nQ29uZmlnKHRyYWNpbmdDb25maWcpIHtcbiAgICAgICAgdGhpcy4jdHJhY2luZ0NvbmZpZyA9IHRyYWNpbmdDb25maWc7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldHMgdGhlIHRyYWNpbmcgY29uZmlnIGZvciB0aGUgc2Vzc2lvbi4gVGhpcyB3aWxsIHNlbmQgdGhlIHRyYWNpbmcgY29uZmlnIHRvIHRoZSBSZWFsdGltZSBBUEkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdHJhY2luZ0NvbmZpZyAtIFRoZSB0cmFjaW5nIGNvbmZpZyB0byBzZXQuIFdlIGRvbid0IHN1cHBvcnQgJ2F1dG8nIGhlcmUgYXMgdGhlIFNESyB3aWxsIGFsd2F5cyBjb25maWd1cmUgYSBXb3JrZmxvdyBOYW1lIHVubGVzcyBpdCBleGlzdHNcbiAgICAgKi9cbiAgICBfdXBkYXRlVHJhY2luZ0NvbmZpZyh0cmFjaW5nQ29uZmlnKSB7XG4gICAgICAgIGlmICh0eXBlb2YgdGhpcy4jdHJhY2luZ0NvbmZpZyA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIC8vIHRyZWF0aW5nIGl0IGFzIGRlZmF1bHQgdmFsdWVcbiAgICAgICAgICAgIHRoaXMuI3RyYWNpbmdDb25maWcgPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0cmFjaW5nQ29uZmlnID09PSAnYXV0bycpIHtcbiAgICAgICAgICAgIC8vIHR1cm4gb24gdHJhY2luZyBpbiBhdXRvIG1vZGVcbiAgICAgICAgICAgIHRoaXMuc2VuZEV2ZW50KHtcbiAgICAgICAgICAgICAgICB0eXBlOiAnc2Vzc2lvbi51cGRhdGUnLFxuICAgICAgICAgICAgICAgIHNlc3Npb246IHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3JlYWx0aW1lJyxcbiAgICAgICAgICAgICAgICAgICAgdHJhY2luZzogJ2F1dG8nLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy4jdHJhY2luZ0NvbmZpZyAhPT0gbnVsbCAmJlxuICAgICAgICAgICAgdHlwZW9mIHRoaXMuI3RyYWNpbmdDb25maWcgIT09ICdzdHJpbmcnICYmXG4gICAgICAgICAgICB0eXBlb2YgdHJhY2luZ0NvbmZpZyAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIC8vIHRyYWNpbmcgaXMgYWxyZWFkeSBzZXQsIHdlIGNhbid0IGNoYW5nZSBpdFxuICAgICAgICAgICAgbG9nZ2VyLndhcm4oJ1RyYWNpbmcgY29uZmlnIGlzIGFscmVhZHkgc2V0LCBza2lwcGluZyBzZXR0aW5nIGl0IGFnYWluLiBUaGlzIGxpa2VseSBoYXBwZW5zIHdoZW4geW91IGFscmVhZHkgc2V0IGEgdHJhY2luZyBjb25maWcgb24gc2Vzc2lvbiBjcmVhdGlvbi4nKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHJhY2luZ0NvbmZpZyA9PT0gbnVsbCkge1xuICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKCdEaXNhYmxpbmcgdHJhY2luZyBmb3IgdGhpcyBzZXNzaW9uLiBJdCBjYW5ub3QgYmUgdHVybmVkIG9uIGZvciB0aGlzIHNlc3Npb24gZnJvbSB0aGlzIHBvaW50IG9uLicpO1xuICAgICAgICAgICAgdGhpcy5zZW5kRXZlbnQoe1xuICAgICAgICAgICAgICAgIHR5cGU6ICdzZXNzaW9uLnVwZGF0ZScsXG4gICAgICAgICAgICAgICAgc2Vzc2lvbjoge1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiAncmVhbHRpbWUnLFxuICAgICAgICAgICAgICAgICAgICB0cmFjaW5nOiBudWxsLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy4jdHJhY2luZ0NvbmZpZyA9PT0gbnVsbCB8fFxuICAgICAgICAgICAgdHlwZW9mIHRoaXMuI3RyYWNpbmdDb25maWcgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAvLyB0cmFjaW5nIGlzIGN1cnJlbnRseSBub3Qgc2V0IHNvIHdlIGNhbiBzZXQgaXQgdG8gdGhlIG5ldyB2YWx1ZVxuICAgICAgICAgICAgdGhpcy5zZW5kRXZlbnQoe1xuICAgICAgICAgICAgICAgIHR5cGU6ICdzZXNzaW9uLnVwZGF0ZScsXG4gICAgICAgICAgICAgICAgc2Vzc2lvbjoge1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiAncmVhbHRpbWUnLFxuICAgICAgICAgICAgICAgICAgICB0cmFjaW5nOiB0cmFjaW5nQ29uZmlnLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHJhY2luZ0NvbmZpZz8uZ3JvdXBfaWQgIT09IHRoaXMuI3RyYWNpbmdDb25maWc/Lmdyb3VwX2lkIHx8XG4gICAgICAgICAgICB0cmFjaW5nQ29uZmlnPy5tZXRhZGF0YSAhPT0gdGhpcy4jdHJhY2luZ0NvbmZpZz8ubWV0YWRhdGEgfHxcbiAgICAgICAgICAgIHRyYWNpbmdDb25maWc/LndvcmtmbG93X25hbWUgIT09IHRoaXMuI3RyYWNpbmdDb25maWc/LndvcmtmbG93X25hbWUpIHtcbiAgICAgICAgICAgIGxvZ2dlci53YXJuKCdNaXNtYXRjaCBpbiB0cmFjaW5nIGNvbmZpZy4gSWdub3JpbmcgdGhlIG5ldyB0cmFjaW5nIGNvbmZpZy4gVGhpcyBsaWtlbHkgaGFwcGVucyB3aGVuIHlvdSBhbHJlYWR5IHNldCBhIHRyYWNpbmcgY29uZmlnIG9uIHNlc3Npb24gY3JlYXRpb24uIEN1cnJlbnQgdHJhY2luZyBjb25maWc6ICVzLCBuZXcgdHJhY2luZyBjb25maWc6ICVzJywgSlNPTi5zdHJpbmdpZnkodGhpcy4jdHJhY2luZ0NvbmZpZyksIEpTT04uc3RyaW5naWZ5KHRyYWNpbmdDb25maWcpKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnNlbmRFdmVudCh7XG4gICAgICAgICAgICB0eXBlOiAnc2Vzc2lvbi51cGRhdGUnLFxuICAgICAgICAgICAgc2Vzc2lvbjoge1xuICAgICAgICAgICAgICAgIHR5cGU6ICdyZWFsdGltZScsXG4gICAgICAgICAgICAgICAgdHJhY2luZzogdHJhY2luZ0NvbmZpZyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBVcGRhdGVzIHRoZSBzZXNzaW9uIGNvbmZpZy4gVGhpcyB3aWxsIG1lcmdlIGl0IHdpdGggdGhlIGN1cnJlbnQgc2Vzc2lvbiBjb25maWcgd2l0aCB0aGUgZGVmYXVsdFxuICAgICAqIHZhbHVlcyBhbmQgc2VuZCBpdCB0byB0aGUgUmVhbHRpbWUgQVBJLlxuICAgICAqXG4gICAgICogQHBhcmFtIGNvbmZpZyAtIFRoZSBzZXNzaW9uIGNvbmZpZyB0byB1cGRhdGUuXG4gICAgICovXG4gICAgdXBkYXRlU2Vzc2lvbkNvbmZpZyhjb25maWcpIHtcbiAgICAgICAgY29uc3Qgc2Vzc2lvbkRhdGEgPSB0aGlzLmJ1aWxkU2Vzc2lvblBheWxvYWQoY29uZmlnKTtcbiAgICAgICAgdGhpcy5zZW5kRXZlbnQoe1xuICAgICAgICAgICAgdHlwZTogJ3Nlc3Npb24udXBkYXRlJyxcbiAgICAgICAgICAgIHNlc3Npb246IHNlc3Npb25EYXRhLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2VuZCB0aGUgb3V0cHV0IG9mIGEgZnVuY3Rpb24gY2FsbCB0byB0aGUgUmVhbHRpbWUgQVBJLlxuICAgICAqXG4gICAgICogQHBhcmFtIHRvb2xDYWxsIC0gVGhlIHRvb2wgY2FsbCB0byBzZW5kIHRoZSBvdXRwdXQgZm9yLlxuICAgICAqIEBwYXJhbSBvdXRwdXQgLSBUaGUgb3V0cHV0IG9mIHRoZSBmdW5jdGlvbiBjYWxsLlxuICAgICAqIEBwYXJhbSBzdGFydFJlc3BvbnNlIC0gV2hldGhlciB0byBzdGFydCBhIG5ldyByZXNwb25zZSBhZnRlciBzZW5kaW5nIHRoZSBvdXRwdXQuXG4gICAgICovXG4gICAgc2VuZEZ1bmN0aW9uQ2FsbE91dHB1dCh0b29sQ2FsbCwgb3V0cHV0LCBzdGFydFJlc3BvbnNlID0gdHJ1ZSkge1xuICAgICAgICB0aGlzLnNlbmRFdmVudCh7XG4gICAgICAgICAgICB0eXBlOiAnY29udmVyc2F0aW9uLml0ZW0uY3JlYXRlJyxcbiAgICAgICAgICAgIGl0ZW06IHtcbiAgICAgICAgICAgICAgICB0eXBlOiAnZnVuY3Rpb25fY2FsbF9vdXRwdXQnLFxuICAgICAgICAgICAgICAgIG91dHB1dCxcbiAgICAgICAgICAgICAgICBjYWxsX2lkOiB0b29sQ2FsbC5jYWxsSWQsXG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IGl0ZW0gPSByZWFsdGltZVRvb2xDYWxsSXRlbS5wYXJzZSh7XG4gICAgICAgICAgICAgICAgaXRlbUlkOiB0b29sQ2FsbC5pZCxcbiAgICAgICAgICAgICAgICBwcmV2aW91c0l0ZW1JZDogdG9vbENhbGwucHJldmlvdXNJdGVtSWQsXG4gICAgICAgICAgICAgICAgdHlwZTogJ2Z1bmN0aW9uX2NhbGwnLFxuICAgICAgICAgICAgICAgIHN0YXR1czogJ2NvbXBsZXRlZCcsXG4gICAgICAgICAgICAgICAgYXJndW1lbnRzOiB0b29sQ2FsbC5hcmd1bWVudHMsXG4gICAgICAgICAgICAgICAgbmFtZTogdG9vbENhbGwubmFtZSxcbiAgICAgICAgICAgICAgICBvdXRwdXQsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMuZW1pdCgnaXRlbV91cGRhdGUnLCBpdGVtKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGxvZ2dlci5lcnJvcignRXJyb3IgcGFyc2luZyB0b29sIGNhbGwgaXRlbScsIGVycm9yLCB0b29sQ2FsbCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHN0YXJ0UmVzcG9uc2UpIHtcbiAgICAgICAgICAgIHRoaXMuc2VuZEV2ZW50KHtcbiAgICAgICAgICAgICAgICB0eXBlOiAncmVzcG9uc2UuY3JlYXRlJyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNlbmQgYW4gYXVkaW8gYnVmZmVyIHRvIHRoZSBSZWFsdGltZSBBUEkuIElmIGB7IGNvbW1pdDogdHJ1ZSB9YCBpcyBwYXNzZWQsIHRoZSBhdWRpbyBidWZmZXJcbiAgICAgKiB3aWxsIGJlIGNvbW1pdHRlZCBhbmQgdGhlIG1vZGVsIHdpbGwgc3RhcnQgcHJvY2Vzc2luZyBpdC4gVGhpcyBpcyBuZWNlc3NhcnkgaWYgeW91IGhhdmVcbiAgICAgKiBkaXNhYmxlZCB0dXJuIGRldGVjdGlvbiAvIHZvaWNlIGFjdGl2aXR5IGRldGVjdGlvbiAoVkFEKS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBhdWRpbyAtIFRoZSBhdWRpbyBidWZmZXIgdG8gc2VuZC5cbiAgICAgKiBAcGFyYW0gb3B0aW9ucyAtIFRoZSBvcHRpb25zIGZvciB0aGUgYXVkaW8gYnVmZmVyLlxuICAgICAqL1xuICAgIHNlbmRBdWRpbyhhdWRpbywgeyBjb21taXQgPSBmYWxzZSB9ID0ge30pIHtcbiAgICAgICAgdGhpcy5zZW5kRXZlbnQoe1xuICAgICAgICAgICAgdHlwZTogJ2lucHV0X2F1ZGlvX2J1ZmZlci5hcHBlbmQnLFxuICAgICAgICAgICAgYXVkaW86IGFycmF5QnVmZmVyVG9CYXNlNjQoYXVkaW8pLFxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKGNvbW1pdCkge1xuICAgICAgICAgICAgdGhpcy5zZW5kRXZlbnQoe1xuICAgICAgICAgICAgICAgIHR5cGU6ICdpbnB1dF9hdWRpb19idWZmZXIuY29tbWl0JyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlc2V0IHRoZSBoaXN0b3J5IG9mIHRoZSBjb252ZXJzYXRpb24uIFRoaXMgd2lsbCBjcmVhdGUgYSBkaWZmIGJldHdlZW4gdGhlIG9sZCBhbmQgbmV3IGhpc3RvcnlcbiAgICAgKiBhbmQgc2VuZCB0aGUgbmVjZXNzYXJ5IGV2ZW50cyB0byB0aGUgUmVhbHRpbWUgQVBJIHRvIHVwZGF0ZSB0aGUgaGlzdG9yeS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBvbGRIaXN0b3J5IC0gVGhlIG9sZCBoaXN0b3J5IG9mIHRoZSBjb252ZXJzYXRpb24uXG4gICAgICogQHBhcmFtIG5ld0hpc3RvcnkgLSBUaGUgbmV3IGhpc3Rvcnkgb2YgdGhlIGNvbnZlcnNhdGlvbi5cbiAgICAgKi9cbiAgICByZXNldEhpc3Rvcnkob2xkSGlzdG9yeSwgbmV3SGlzdG9yeSkge1xuICAgICAgICBjb25zdCB7IHJlbW92YWxzLCBhZGRpdGlvbnMsIHVwZGF0ZXMgfSA9IGRpZmZSZWFsdGltZUhpc3Rvcnkob2xkSGlzdG9yeSwgbmV3SGlzdG9yeSk7XG4gICAgICAgIGNvbnN0IHJlbW92YWxJZHMgPSBuZXcgU2V0KHJlbW92YWxzLm1hcCgoaXRlbSkgPT4gaXRlbS5pdGVtSWQpKTtcbiAgICAgICAgLy8gd2UgZG9uJ3QgaGF2ZSBhbiB1cGRhdGUgZXZlbnQgZm9yIGl0ZW1zIHNvIHdlIHdpbGwgcmVtb3ZlIGFuZCByZS1hZGQgd2hhdCdzIHRoZXJlXG4gICAgICAgIGZvciAoY29uc3QgdXBkYXRlIG9mIHVwZGF0ZXMpIHtcbiAgICAgICAgICAgIHJlbW92YWxJZHMuYWRkKHVwZGF0ZS5pdGVtSWQpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChyZW1vdmFsSWRzLnNpemUgPiAwKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGl0ZW1JZCBvZiByZW1vdmFsSWRzKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZW5kRXZlbnQoe1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiAnY29udmVyc2F0aW9uLml0ZW0uZGVsZXRlJyxcbiAgICAgICAgICAgICAgICAgICAgaXRlbV9pZDogaXRlbUlkLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGFkZGl0aW9uc0FuZFVwZGF0ZXMgPSBbLi4uYWRkaXRpb25zLCAuLi51cGRhdGVzXTtcbiAgICAgICAgZm9yIChjb25zdCBhZGRpdGlvbiBvZiBhZGRpdGlvbnNBbmRVcGRhdGVzKSB7XG4gICAgICAgICAgICBpZiAoYWRkaXRpb24udHlwZSA9PT0gJ21lc3NhZ2UnKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgaXRlbUVudHJ5ID0ge1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiAnbWVzc2FnZScsXG4gICAgICAgICAgICAgICAgICAgIHJvbGU6IGFkZGl0aW9uLnJvbGUsXG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6IGFkZGl0aW9uLmNvbnRlbnQsXG4gICAgICAgICAgICAgICAgICAgIGlkOiBhZGRpdGlvbi5pdGVtSWQsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBpZiAoYWRkaXRpb24ucm9sZSAhPT0gJ3N5c3RlbScgJiYgYWRkaXRpb24uc3RhdHVzKSB7XG4gICAgICAgICAgICAgICAgICAgIGl0ZW1FbnRyeS5zdGF0dXMgPSBhZGRpdGlvbi5zdGF0dXM7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuc2VuZEV2ZW50KHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2NvbnZlcnNhdGlvbi5pdGVtLmNyZWF0ZScsXG4gICAgICAgICAgICAgICAgICAgIGl0ZW06IGl0ZW1FbnRyeSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGFkZGl0aW9uLnR5cGUgPT09ICdmdW5jdGlvbl9jYWxsJykge1xuICAgICAgICAgICAgICAgIGxvZ2dlci53YXJuKCdGdW5jdGlvbiBjYWxscyBjYW5ub3QgYmUgbWFudWFsbHkgYWRkZWQgb3IgdXBkYXRlZCBhdCB0aGUgbW9tZW50LiBJZ25vcmluZy4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBzZW5kTWNwUmVzcG9uc2UoYXBwcm92YWxSZXF1ZXN0LCBhcHByb3ZlZCkge1xuICAgICAgICB0aGlzLnNlbmRFdmVudCh7XG4gICAgICAgICAgICB0eXBlOiAnY29udmVyc2F0aW9uLml0ZW0uY3JlYXRlJyxcbiAgICAgICAgICAgIHByZXZpb3VzX2l0ZW1faWQ6IGFwcHJvdmFsUmVxdWVzdC5pdGVtSWQsXG4gICAgICAgICAgICBpdGVtOiB7XG4gICAgICAgICAgICAgICAgdHlwZTogJ21jcF9hcHByb3ZhbF9yZXNwb25zZScsXG4gICAgICAgICAgICAgICAgYXBwcm92YWxfcmVxdWVzdF9pZDogYXBwcm92YWxSZXF1ZXN0Lml0ZW1JZCxcbiAgICAgICAgICAgICAgICBhcHByb3ZlOiBhcHByb3ZlZCxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW9wZW5haVJlYWx0aW1lQmFzZS5tanMubWFwIiwiLy8vIDxyZWZlcmVuY2UgbGliPVwiZG9tXCIgLz5cbmltcG9ydCB7IGlzQnJvd3NlckVudmlyb25tZW50IH0gZnJvbSAnQG9wZW5haS9hZ2VudHMtY29yZS9fc2hpbXMnO1xuaW1wb3J0IHsgVXNlckVycm9yIH0gZnJvbSAnQG9wZW5haS9hZ2VudHMtY29yZSc7XG5pbXBvcnQgbG9nZ2VyIGZyb20gXCIuL2xvZ2dlci5tanNcIjtcbmltcG9ydCB7IE9wZW5BSVJlYWx0aW1lQmFzZSwgfSBmcm9tIFwiLi9vcGVuYWlSZWFsdGltZUJhc2UubWpzXCI7XG5pbXBvcnQgeyBwYXJzZVJlYWx0aW1lRXZlbnQgfSBmcm9tIFwiLi9vcGVuYWlSZWFsdGltZUV2ZW50cy5tanNcIjtcbmltcG9ydCB7IEhFQURFUlMgfSBmcm9tIFwiLi91dGlscy5tanNcIjtcbi8qKlxuICogVHJhbnNwb3J0IGxheWVyIHRoYXQncyBoYW5kbGluZyB0aGUgY29ubmVjdGlvbiBiZXR3ZWVuIHRoZSBjbGllbnQgYW5kIE9wZW5BSSdzIFJlYWx0aW1lIEFQSVxuICogdmlhIFdlYlJUQy4gV2hpbGUgdGhpcyB0cmFuc3BvcnQgbGF5ZXIgaXMgZGVzaWduZWQgdG8gYmUgdXNlZCB3aXRoaW4gYSBSZWFsdGltZVNlc3Npb24sIGl0IGNhblxuICogYWxzbyBiZSB1c2VkIHN0YW5kYWxvbmUgaWYgeW91IHdhbnQgdG8gaGF2ZSBhIGRpcmVjdCBjb25uZWN0aW9uIHRvIHRoZSBSZWFsdGltZSBBUEkuXG4gKlxuICogVW5sZXNzIHlvdSBzcGVjaWZ5IGEgYG1lZGlhU3RyZWFtYCBvciBgYXVkaW9FbGVtZW50YCBvcHRpb24sIHRoZSB0cmFuc3BvcnQgbGF5ZXIgd2lsbFxuICogYXV0b21hdGljYWxseSBjb25maWd1cmUgdGhlIG1pY3JvcGhvbmUgYW5kIGF1ZGlvIG91dHB1dCB0byBiZSB1c2VkIGJ5IHRoZSBzZXNzaW9uLlxuICovXG5leHBvcnQgY2xhc3MgT3BlbkFJUmVhbHRpbWVXZWJSVEMgZXh0ZW5kcyBPcGVuQUlSZWFsdGltZUJhc2Uge1xuICAgIG9wdGlvbnM7XG4gICAgI3VybDtcbiAgICAjc3RhdGUgPSB7XG4gICAgICAgIHN0YXR1czogJ2Rpc2Nvbm5lY3RlZCcsXG4gICAgICAgIHBlZXJDb25uZWN0aW9uOiB1bmRlZmluZWQsXG4gICAgICAgIGRhdGFDaGFubmVsOiB1bmRlZmluZWQsXG4gICAgICAgIGNhbGxJZDogdW5kZWZpbmVkLFxuICAgIH07XG4gICAgI3VzZUluc2VjdXJlQXBpS2V5O1xuICAgICNvbmdvaW5nUmVzcG9uc2UgPSBmYWxzZTtcbiAgICAjbXV0ZWQgPSBmYWxzZTtcbiAgICBjb25zdHJ1Y3RvcihvcHRpb25zID0ge30pIHtcbiAgICAgICAgaWYgKHR5cGVvZiBSVENQZWVyQ29ubmVjdGlvbiA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignV2ViUlRDIGlzIG5vdCBzdXBwb3J0ZWQgaW4gdGhpcyBlbnZpcm9ubWVudCcpO1xuICAgICAgICB9XG4gICAgICAgIHN1cGVyKG9wdGlvbnMpO1xuICAgICAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICAgICAgICB0aGlzLiN1cmwgPSBvcHRpb25zLmJhc2VVcmwgPz8gYGh0dHBzOi8vYXBpLm9wZW5haS5jb20vdjEvcmVhbHRpbWUvY2FsbHNgO1xuICAgICAgICB0aGlzLiN1c2VJbnNlY3VyZUFwaUtleSA9IG9wdGlvbnMudXNlSW5zZWN1cmVBcGlLZXkgPz8gZmFsc2U7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBjdXJyZW50IGNhbGwgSUQgb2YgdGhlIFdlYlJUQyBjb25uZWN0aW9uLlxuICAgICAqL1xuICAgIGdldCBjYWxsSWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiNzdGF0ZS5jYWxsSWQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBjdXJyZW50IHN0YXR1cyBvZiB0aGUgV2ViUlRDIGNvbm5lY3Rpb24uXG4gICAgICovXG4gICAgZ2V0IHN0YXR1cygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuI3N0YXRlLnN0YXR1cztcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIGN1cnJlbnQgY29ubmVjdGlvbiBzdGF0ZSBvZiB0aGUgV2ViUlRDIGNvbm5lY3Rpb24gaW5jbHVkaW5nIHRoZSBwZWVyIGNvbm5lY3Rpb24gYW5kIGRhdGFcbiAgICAgKiBjaGFubmVsLlxuICAgICAqL1xuICAgIGdldCBjb25uZWN0aW9uU3RhdGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiNzdGF0ZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogV2hldGhlciB0aGUgc2Vzc2lvbiBpcyBtdXRlZC5cbiAgICAgKi9cbiAgICBnZXQgbXV0ZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiNtdXRlZDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ29ubmVjdCB0byB0aGUgUmVhbHRpbWUgQVBJLiBUaGlzIHdpbGwgZXN0YWJsaXNoIHRoZSBjb25uZWN0aW9uIHRvIHRoZSBPcGVuQUkgUmVhbHRpbWUgQVBJXG4gICAgICogdmlhIFdlYlJUQy5cbiAgICAgKlxuICAgICAqIElmIHlvdSBhcmUgdXNpbmcgYSBicm93c2VyLCB0aGUgdHJhbnNwb3J0IGxheWVyIHdpbGwgYWxzbyBhdXRvbWF0aWNhbGx5IGNvbmZpZ3VyZSB0aGVcbiAgICAgKiBtaWNyb3Bob25lIGFuZCBhdWRpbyBvdXRwdXQgdG8gYmUgdXNlZCBieSB0aGUgc2Vzc2lvbi5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBvcHRpb25zIC0gVGhlIG9wdGlvbnMgZm9yIHRoZSBjb25uZWN0aW9uLlxuICAgICAqL1xuICAgIGFzeW5jIGNvbm5lY3Qob3B0aW9ucykge1xuICAgICAgICBpZiAodGhpcy4jc3RhdGUuc3RhdHVzID09PSAnY29ubmVjdGVkJykge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLiNzdGF0ZS5zdGF0dXMgPT09ICdjb25uZWN0aW5nJykge1xuICAgICAgICAgICAgbG9nZ2VyLndhcm4oJ1JlYWx0aW1lIGNvbm5lY3Rpb24gYWxyZWFkeSBpbiBwcm9ncmVzcy4gUGxlYXNlIGF3YWl0IG9yaWdpbmFsIHByb21pc2UnKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBtb2RlbCA9IG9wdGlvbnMubW9kZWwgPz8gdGhpcy5jdXJyZW50TW9kZWw7XG4gICAgICAgIHRoaXMuY3VycmVudE1vZGVsID0gbW9kZWw7XG4gICAgICAgIGNvbnN0IGJhc2VVcmwgPSBvcHRpb25zLnVybCA/PyB0aGlzLiN1cmw7XG4gICAgICAgIGNvbnN0IGFwaUtleSA9IGF3YWl0IHRoaXMuX2dldEFwaUtleShvcHRpb25zKTtcbiAgICAgICAgY29uc3QgaXNDbGllbnRLZXkgPSB0eXBlb2YgYXBpS2V5ID09PSAnc3RyaW5nJyAmJiBhcGlLZXkuc3RhcnRzV2l0aCgnZWtfJyk7XG4gICAgICAgIGlmIChpc0Jyb3dzZXJFbnZpcm9ubWVudCgpICYmICF0aGlzLiN1c2VJbnNlY3VyZUFwaUtleSAmJiAhaXNDbGllbnRLZXkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBVc2VyRXJyb3IoJ1VzaW5nIHRoZSBXZWJSVEMgY29ubmVjdGlvbiBpbiBhIGJyb3dzZXIgZW52aXJvbm1lbnQgcmVxdWlyZXMgYW4gZXBoZW1lcmFsIGNsaWVudCBrZXkuIElmIHlvdSBuZWVkIHRvIHVzZSBhIHJlZ3VsYXIgQVBJIGtleSwgdXNlIHRoZSBXZWJTb2NrZXQgdHJhbnNwb3J0IG9yIHNldCB0aGUgYHVzZUluc2VjdXJlQXBpS2V5YCBvcHRpb24gdG8gdHJ1ZS4nKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tYXN5bmMtcHJvbWlzZS1leGVjdXRvclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoYXN5bmMgKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjb25zdCB1c2VyU2Vzc2lvbkNvbmZpZyA9IHtcbiAgICAgICAgICAgICAgICAgICAgLi4uKG9wdGlvbnMuaW5pdGlhbFNlc3Npb25Db25maWcgfHwge30pLFxuICAgICAgICAgICAgICAgICAgICBtb2RlbDogdGhpcy5jdXJyZW50TW9kZWwsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBjb25zdCBjb25uZWN0aW9uVXJsID0gbmV3IFVSTChiYXNlVXJsKTtcbiAgICAgICAgICAgICAgICBsZXQgcGVlckNvbm5lY3Rpb24gPSBuZXcgUlRDUGVlckNvbm5lY3Rpb24oKTtcbiAgICAgICAgICAgICAgICBjb25zdCBkYXRhQ2hhbm5lbCA9IHBlZXJDb25uZWN0aW9uLmNyZWF0ZURhdGFDaGFubmVsKCdvYWktZXZlbnRzJyk7XG4gICAgICAgICAgICAgICAgbGV0IGNhbGxJZCA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICBjb25zdCBhdHRhY2hDb25uZWN0aW9uU3RhdGVIYW5kbGVyID0gKGNvbm5lY3Rpb24pID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29ubmVjdGlvbi5vbmNvbm5lY3Rpb25zdGF0ZWNoYW5nZSA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoY29ubmVjdGlvbi5jb25uZWN0aW9uU3RhdGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdkaXNjb25uZWN0ZWQnOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ2ZhaWxlZCc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnY2xvc2VkJzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAnY29ubmVjdGVkJyBzdGF0ZSBpcyBoYW5kbGVkIGJ5IGRhdGFDaGFubmVsLm9ub3Blbi4gU28gd2UgZG9uJ3QgbmVlZCB0byBoYW5kbGUgaXQgaGVyZS5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAnbmV3JyBhbmQgJ2Nvbm5lY3RpbmcnIGFyZSBpbnRlcm1lZGlhdGUgc3RhdGVzIGFuZCBkbyBub3QgcmVxdWlyZSBhY3Rpb24gaGVyZS5cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGF0dGFjaENvbm5lY3Rpb25TdGF0ZUhhbmRsZXIocGVlckNvbm5lY3Rpb24pO1xuICAgICAgICAgICAgICAgIHRoaXMuI3N0YXRlID0ge1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXM6ICdjb25uZWN0aW5nJyxcbiAgICAgICAgICAgICAgICAgICAgcGVlckNvbm5lY3Rpb24sXG4gICAgICAgICAgICAgICAgICAgIGRhdGFDaGFubmVsLFxuICAgICAgICAgICAgICAgICAgICBjYWxsSWQsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ2Nvbm5lY3Rpb25fY2hhbmdlJywgdGhpcy4jc3RhdGUuc3RhdHVzKTtcbiAgICAgICAgICAgICAgICBkYXRhQ2hhbm5lbC5hZGRFdmVudExpc3RlbmVyKCdvcGVuJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLiNzdGF0ZSA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXR1czogJ2Nvbm5lY3RlZCcsXG4gICAgICAgICAgICAgICAgICAgICAgICBwZWVyQ29ubmVjdGlvbixcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFDaGFubmVsLFxuICAgICAgICAgICAgICAgICAgICAgICAgY2FsbElkLFxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAvLyBTZW5kaW5nIHRoZSBzZXNzaW9uIGNvbmZpZyBhZ2FpbiBoZXJlIG9uY2UgdGhlIGNoYW5uZWwgaXMgY29ubmVjdGVkIHRvIGVuc3VyZVxuICAgICAgICAgICAgICAgICAgICAvLyB0aGF0IHRoZSBzZXNzaW9uIGNvbmZpZyBpcyBzZW50IHRvIHRoZSBzZXJ2ZXIgYmVmb3JlIHRoZSBmaXJzdCByZXNwb25zZSBpcyByZWNlaXZlZFxuICAgICAgICAgICAgICAgICAgICAvLyBTZXR0aW5nIGl0IG9uIGNvbm5lY3Rpb24gc2hvdWxkIHdvcmsgYnV0IHRoZSBjb25maWcgaXMgbm90IGJlaW5nIHZhbGlkYXRlZCBvbiB0aGVcbiAgICAgICAgICAgICAgICAgICAgLy8gc2VydmVyLiBUaGlzIHRyaWdnZXJzIGEgdmFsaWRhdGlvbiBlcnJvciBpZiB0aGUgY29uZmlnIGlzIG5vdCB2YWxpZC5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVTZXNzaW9uQ29uZmlnKHVzZXJTZXNzaW9uQ29uZmlnKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5lbWl0KCdjb25uZWN0aW9uX2NoYW5nZScsIHRoaXMuI3N0YXRlLnN0YXR1cyk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX29uT3BlbigpO1xuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgZGF0YUNoYW5uZWwuYWRkRXZlbnRMaXN0ZW5lcignZXJyb3InLCAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9vbkVycm9yKGV2ZW50KTtcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KGV2ZW50KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBkYXRhQ2hhbm5lbC5hZGRFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX29uTWVzc2FnZShldmVudCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHsgZGF0YTogcGFyc2VkLCBpc0dlbmVyaWMgfSA9IHBhcnNlUmVhbHRpbWVFdmVudChldmVudCk7XG4gICAgICAgICAgICAgICAgICAgIGlmICghcGFyc2VkIHx8IGlzR2VuZXJpYykge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChwYXJzZWQudHlwZSA9PT0gJ3Jlc3BvbnNlLmNyZWF0ZWQnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiNvbmdvaW5nUmVzcG9uc2UgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHBhcnNlZC50eXBlID09PSAncmVzcG9uc2UuZG9uZScpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuI29uZ29pbmdSZXNwb25zZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChwYXJzZWQudHlwZSA9PT0gJ3Nlc3Npb24uY3JlYXRlZCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX3RyYWNpbmdDb25maWcgPSBwYXJzZWQuc2Vzc2lvbi50cmFjaW5nO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gVHJ5aW5nIHRvIHR1cm4gb24gdHJhY2luZyBhZnRlciB0aGUgc2Vzc2lvbiBpcyBjcmVhdGVkXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0cmFjaW5nQ29uZmlnID0gdHlwZW9mIHVzZXJTZXNzaW9uQ29uZmlnLnRyYWNpbmcgPT09ICd1bmRlZmluZWQnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPyAnYXV0bydcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IHVzZXJTZXNzaW9uQ29uZmlnLnRyYWNpbmc7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl91cGRhdGVUcmFjaW5nQ29uZmlnKHRyYWNpbmdDb25maWcpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgLy8gc2V0IHVwIGF1ZGlvIHBsYXliYWNrXG4gICAgICAgICAgICAgICAgY29uc3QgYXVkaW9FbGVtZW50ID0gdGhpcy5vcHRpb25zLmF1ZGlvRWxlbWVudCA/PyBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhdWRpbycpO1xuICAgICAgICAgICAgICAgIGF1ZGlvRWxlbWVudC5hdXRvcGxheSA9IHRydWU7XG4gICAgICAgICAgICAgICAgcGVlckNvbm5lY3Rpb24ub250cmFjayA9IChldmVudCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBhdWRpb0VsZW1lbnQuc3JjT2JqZWN0ID0gZXZlbnQuc3RyZWFtc1swXTtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIC8vIGdldCBtaWNyb3Bob25lIHN0cmVhbVxuICAgICAgICAgICAgICAgIGNvbnN0IHN0cmVhbSA9IHRoaXMub3B0aW9ucy5tZWRpYVN0cmVhbSA/P1xuICAgICAgICAgICAgICAgICAgICAoYXdhaXQgbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWEoe1xuICAgICAgICAgICAgICAgICAgICAgICAgYXVkaW86IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgICAgICBwZWVyQ29ubmVjdGlvbi5hZGRUcmFjayhzdHJlYW0uZ2V0QXVkaW9UcmFja3MoKVswXSk7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5jaGFuZ2VQZWVyQ29ubmVjdGlvbikge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBvcmlnaW5hbFBlZXJDb25uZWN0aW9uID0gcGVlckNvbm5lY3Rpb247XG4gICAgICAgICAgICAgICAgICAgIHBlZXJDb25uZWN0aW9uID1cbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMub3B0aW9ucy5jaGFuZ2VQZWVyQ29ubmVjdGlvbihwZWVyQ29ubmVjdGlvbik7XG4gICAgICAgICAgICAgICAgICAgIGlmIChvcmlnaW5hbFBlZXJDb25uZWN0aW9uICE9PSBwZWVyQ29ubmVjdGlvbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgb3JpZ2luYWxQZWVyQ29ubmVjdGlvbi5vbmNvbm5lY3Rpb25zdGF0ZWNoYW5nZSA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYXR0YWNoQ29ubmVjdGlvblN0YXRlSGFuZGxlcihwZWVyQ29ubmVjdGlvbik7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuI3N0YXRlID0geyAuLi50aGlzLiNzdGF0ZSwgcGVlckNvbm5lY3Rpb24gfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3Qgb2ZmZXIgPSBhd2FpdCBwZWVyQ29ubmVjdGlvbi5jcmVhdGVPZmZlcigpO1xuICAgICAgICAgICAgICAgIGF3YWl0IHBlZXJDb25uZWN0aW9uLnNldExvY2FsRGVzY3JpcHRpb24ob2ZmZXIpO1xuICAgICAgICAgICAgICAgIGlmICghb2ZmZXIuc2RwKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignRmFpbGVkIHRvIGNyZWF0ZSBvZmZlcicpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCBzZHBSZXNwb25zZSA9IGF3YWl0IGZldGNoKGNvbm5lY3Rpb25VcmwsIHtcbiAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICAgICAgICAgIGJvZHk6IG9mZmVyLnNkcCxcbiAgICAgICAgICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9zZHAnLFxuICAgICAgICAgICAgICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke2FwaUtleX1gLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ1gtT3BlbkFJLUFnZW50cy1TREsnOiBIRUFERVJTWydYLU9wZW5BSS1BZ2VudHMtU0RLJ10sXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgY2FsbElkID0gc2RwUmVzcG9uc2UuaGVhZGVycz8uZ2V0KCdMb2NhdGlvbicpPy5zcGxpdCgnLycpLnBvcCgpO1xuICAgICAgICAgICAgICAgIHRoaXMuI3N0YXRlID0geyAuLi50aGlzLiNzdGF0ZSwgY2FsbElkIH07XG4gICAgICAgICAgICAgICAgY29uc3QgYW5zd2VyID0ge1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiAnYW5zd2VyJyxcbiAgICAgICAgICAgICAgICAgICAgc2RwOiBhd2FpdCBzZHBSZXNwb25zZS50ZXh0KCksXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBhd2FpdCBwZWVyQ29ubmVjdGlvbi5zZXRSZW1vdGVEZXNjcmlwdGlvbihhbnN3ZXIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICAgICAgICAgIHRoaXMuX29uRXJyb3IoZXJyb3IpO1xuICAgICAgICAgICAgICAgIHJlamVjdChlcnJvcik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZW5kIGFuIGV2ZW50IHRvIHRoZSBSZWFsdGltZSBBUEkuIFRoaXMgd2lsbCBzdHJpbmdpZnkgdGhlIGV2ZW50IGFuZCBzZW5kIGl0IGRpcmVjdGx5IHRvIHRoZVxuICAgICAqIEFQSS4gVGhpcyBjYW4gYmUgdXNlZCBpZiB5b3Ugd2FudCB0byB0YWtlIGNvbnRyb2wgb3ZlciB0aGUgY29ubmVjdGlvbiBhbmQgc2VuZCBldmVudHMgbWFudWFsbHkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZXZlbnQgLSBUaGUgZXZlbnQgdG8gc2VuZC5cbiAgICAgKi9cbiAgICBzZW5kRXZlbnQoZXZlbnQpIHtcbiAgICAgICAgaWYgKCF0aGlzLiNzdGF0ZS5kYXRhQ2hhbm5lbCB8fFxuICAgICAgICAgICAgdGhpcy4jc3RhdGUuZGF0YUNoYW5uZWwucmVhZHlTdGF0ZSAhPT0gJ29wZW4nKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1dlYlJUQyBkYXRhIGNoYW5uZWwgaXMgbm90IGNvbm5lY3RlZC4gTWFrZSBzdXJlIHlvdSBjYWxsIGBjb25uZWN0KClgIGJlZm9yZSBzZW5kaW5nIGV2ZW50cy4nKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLiNzdGF0ZS5kYXRhQ2hhbm5lbC5zZW5kKEpTT04uc3RyaW5naWZ5KGV2ZW50KSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE11dGUgb3IgdW5tdXRlIHRoZSBzZXNzaW9uLlxuICAgICAqIEBwYXJhbSBtdXRlZCAtIFdoZXRoZXIgdG8gbXV0ZSB0aGUgc2Vzc2lvbi5cbiAgICAgKi9cbiAgICBtdXRlKG11dGVkKSB7XG4gICAgICAgIHRoaXMuI211dGVkID0gbXV0ZWQ7XG4gICAgICAgIGlmICh0aGlzLiNzdGF0ZS5wZWVyQ29ubmVjdGlvbikge1xuICAgICAgICAgICAgY29uc3QgcGVlckNvbm5lY3Rpb24gPSB0aGlzLiNzdGF0ZS5wZWVyQ29ubmVjdGlvbjtcbiAgICAgICAgICAgIHBlZXJDb25uZWN0aW9uLmdldFNlbmRlcnMoKS5mb3JFYWNoKChzZW5kZXIpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoc2VuZGVyLnRyYWNrKSB7XG4gICAgICAgICAgICAgICAgICAgIHNlbmRlci50cmFjay5lbmFibGVkID0gIW11dGVkO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIF9hZnRlckF1ZGlvRG9uZUV2ZW50KCkge1xuICAgICAgICB0aGlzLiNvbmdvaW5nUmVzcG9uc2UgPSBmYWxzZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2xvc2UgdGhlIGNvbm5lY3Rpb24gdG8gdGhlIFJlYWx0aW1lIEFQSSBhbmQgZGlzY29ubmVjdHMgdGhlIHVuZGVybHlpbmcgV2ViUlRDIGNvbm5lY3Rpb24uXG4gICAgICovXG4gICAgY2xvc2UoKSB7XG4gICAgICAgIGlmICh0aGlzLiNzdGF0ZS5kYXRhQ2hhbm5lbCkge1xuICAgICAgICAgICAgdGhpcy4jc3RhdGUuZGF0YUNoYW5uZWwuY2xvc2UoKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy4jc3RhdGUucGVlckNvbm5lY3Rpb24pIHtcbiAgICAgICAgICAgIGNvbnN0IHBlZXJDb25uZWN0aW9uID0gdGhpcy4jc3RhdGUucGVlckNvbm5lY3Rpb247XG4gICAgICAgICAgICBwZWVyQ29ubmVjdGlvbi5vbmNvbm5lY3Rpb25zdGF0ZWNoYW5nZSA9IG51bGw7XG4gICAgICAgICAgICBwZWVyQ29ubmVjdGlvbi5nZXRTZW5kZXJzKCkuZm9yRWFjaCgoc2VuZGVyKSA9PiB7XG4gICAgICAgICAgICAgICAgc2VuZGVyLnRyYWNrPy5zdG9wKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHBlZXJDb25uZWN0aW9uLmNsb3NlKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuI3N0YXRlLnN0YXR1cyAhPT0gJ2Rpc2Nvbm5lY3RlZCcpIHtcbiAgICAgICAgICAgIHRoaXMuI3N0YXRlID0ge1xuICAgICAgICAgICAgICAgIHN0YXR1czogJ2Rpc2Nvbm5lY3RlZCcsXG4gICAgICAgICAgICAgICAgcGVlckNvbm5lY3Rpb246IHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICBkYXRhQ2hhbm5lbDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgICAgIGNhbGxJZDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMuZW1pdCgnY29ubmVjdGlvbl9jaGFuZ2UnLCB0aGlzLiNzdGF0ZS5zdGF0dXMpO1xuICAgICAgICAgICAgdGhpcy5fb25DbG9zZSgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEludGVycnVwdCB0aGUgY3VycmVudCByZXNwb25zZSBpZiBvbmUgaXMgb25nb2luZyBhbmQgY2xlYXIgdGhlIGF1ZGlvIGJ1ZmZlciBzbyB0aGF0IHRoZSBhZ2VudFxuICAgICAqIHN0b3BzIHRhbGtpbmcuXG4gICAgICovXG4gICAgaW50ZXJydXB0KCkge1xuICAgICAgICBpZiAodGhpcy4jb25nb2luZ1Jlc3BvbnNlKSB7XG4gICAgICAgICAgICB0aGlzLnNlbmRFdmVudCh7XG4gICAgICAgICAgICAgICAgdHlwZTogJ3Jlc3BvbnNlLmNhbmNlbCcsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMuI29uZ29pbmdSZXNwb25zZSA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc2VuZEV2ZW50KHtcbiAgICAgICAgICAgIHR5cGU6ICdvdXRwdXRfYXVkaW9fYnVmZmVyLmNsZWFyJyxcbiAgICAgICAgfSk7XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9b3BlbmFpUmVhbHRpbWVXZWJSdGMubWpzLm1hcCIsIi8vLyA8cmVmZXJlbmNlIGxpYj1cImRvbVwiIC8+XG5leHBvcnQgY29uc3QgV2ViU29ja2V0ID0gZ2xvYmFsVGhpcy5XZWJTb2NrZXQ7XG5leHBvcnQgZnVuY3Rpb24gaXNCcm93c2VyRW52aXJvbm1lbnQoKSB7XG4gICAgcmV0dXJuIHRydWU7XG59XG5leHBvcnQgY29uc3QgdXNlV2ViU29ja2V0UHJvdG9jb2xzID0gdHJ1ZTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXNoaW1zLWJyb3dzZXIubWpzLm1hcCIsImltcG9ydCB7IGlzQnJvd3NlckVudmlyb25tZW50LCB1c2VXZWJTb2NrZXRQcm90b2NvbHMsIFdlYlNvY2tldCwgfSBmcm9tICdAb3BlbmFpL2FnZW50cy1yZWFsdGltZS9fc2hpbXMnO1xuaW1wb3J0IHsgT3BlbkFJUmVhbHRpbWVCYXNlLCB9IGZyb20gXCIuL29wZW5haVJlYWx0aW1lQmFzZS5tanNcIjtcbmltcG9ydCB7IGJhc2U2NFRvQXJyYXlCdWZmZXIsIEhFQURFUlMsIFdFQlNPQ0tFVF9NRVRBIH0gZnJvbSBcIi4vdXRpbHMubWpzXCI7XG5pbXBvcnQgeyBVc2VyRXJyb3IgfSBmcm9tICdAb3BlbmFpL2FnZW50cy1jb3JlJztcbmltcG9ydCB7IHBhcnNlUmVhbHRpbWVFdmVudCB9IGZyb20gXCIuL29wZW5haVJlYWx0aW1lRXZlbnRzLm1qc1wiO1xuLyoqXG4gKiBUcmFuc3BvcnQgbGF5ZXIgdGhhdCdzIGhhbmRsaW5nIHRoZSBjb25uZWN0aW9uIGJldHdlZW4gdGhlIGNsaWVudCBhbmQgT3BlbkFJJ3MgUmVhbHRpbWUgQVBJXG4gKiB2aWEgV2ViU29ja2V0cy4gV2hpbGUgdGhpcyB0cmFuc3BvcnQgbGF5ZXIgaXMgZGVzaWduZWQgdG8gYmUgdXNlZCB3aXRoaW4gYSBSZWFsdGltZVNlc3Npb24sIGl0XG4gKiBjYW4gYWxzbyBiZSB1c2VkIHN0YW5kYWxvbmUgaWYgeW91IHdhbnQgdG8gaGF2ZSBhIGRpcmVjdCBjb25uZWN0aW9uIHRvIHRoZSBSZWFsdGltZSBBUEkuXG4gKi9cbmV4cG9ydCBjbGFzcyBPcGVuQUlSZWFsdGltZVdlYlNvY2tldCBleHRlbmRzIE9wZW5BSVJlYWx0aW1lQmFzZSB7XG4gICAgI2FwaUtleTtcbiAgICAjdXJsO1xuICAgICNkZWZhdWx0VXJsO1xuICAgICNzdGF0ZSA9IHtcbiAgICAgICAgc3RhdHVzOiAnZGlzY29ubmVjdGVkJyxcbiAgICAgICAgd2Vic29ja2V0OiB1bmRlZmluZWQsXG4gICAgfTtcbiAgICAjdXNlSW5zZWN1cmVBcGlLZXk7XG4gICAgI2N1cnJlbnRJdGVtSWQ7XG4gICAgI2N1cnJlbnRBdWRpb0NvbnRlbnRJbmRleDtcbiAgICAvKipcbiAgICAgKiBUaW1lc3RhbXAgbWFpbnRhaW5lZCBieSB0aGUgdHJhbnNwb3J0IGxheWVyIHRvIGFpZCB3aXRoIHRoZSBjYWxjdWxhdGlvbiBvZiB0aGUgZWxhcHNlZCB0aW1lXG4gICAgICogc2luY2UgdGhlIHJlc3BvbnNlIHN0YXJ0ZWQgdG8gY29tcHV0ZSB0aGUgcmlnaHQgaW50ZXJydXB0aW9uIHRpbWUuXG4gICAgICpcbiAgICAgKiBNb3N0bHkgaW50ZXJuYWwgYnV0IG1pZ2h0IGJlIHVzZWQgYnkgZXh0ZW5kZWQgdHJhbnNwb3J0IGxheWVycyBmb3IgdGhlaXIgaW50ZXJydXB0aW9uXG4gICAgICogY2FsY3VsYXRpb24uXG4gICAgICovXG4gICAgX2ZpcnN0QXVkaW9UaW1lc3RhbXA7XG4gICAgX2F1ZGlvTGVuZ3RoTXMgPSAwO1xuICAgICNvbmdvaW5nUmVzcG9uc2UgPSBmYWxzZTtcbiAgICAjY3JlYXRlV2ViU29ja2V0O1xuICAgICNza2lwT3BlbkV2ZW50TGlzdGVuZXJzO1xuICAgICNyZXNldEF1ZGlvUGxheWJhY2tTdGF0ZSgpIHtcbiAgICAgICAgdGhpcy4jY3VycmVudEl0ZW1JZCA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5fZmlyc3RBdWRpb1RpbWVzdGFtcCA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5fYXVkaW9MZW5ndGhNcyA9IDA7XG4gICAgICAgIHRoaXMuI2N1cnJlbnRBdWRpb0NvbnRlbnRJbmRleCA9IHVuZGVmaW5lZDtcbiAgICB9XG4gICAgY29uc3RydWN0b3Iob3B0aW9ucyA9IHt9KSB7XG4gICAgICAgIHN1cGVyKG9wdGlvbnMpO1xuICAgICAgICB0aGlzLiN1cmwgPSBvcHRpb25zLnVybDtcbiAgICAgICAgdGhpcy4jZGVmYXVsdFVybCA9IG9wdGlvbnMudXJsO1xuICAgICAgICB0aGlzLiN1c2VJbnNlY3VyZUFwaUtleSA9IG9wdGlvbnMudXNlSW5zZWN1cmVBcGlLZXkgPz8gZmFsc2U7XG4gICAgICAgIHRoaXMuI2NyZWF0ZVdlYlNvY2tldCA9IG9wdGlvbnMuY3JlYXRlV2ViU29ja2V0O1xuICAgICAgICB0aGlzLiNza2lwT3BlbkV2ZW50TGlzdGVuZXJzID0gb3B0aW9ucy5za2lwT3BlbkV2ZW50TGlzdGVuZXJzID8/IGZhbHNlO1xuICAgIH1cbiAgICBnZXRDb21tb25SZXF1ZXN0SGVhZGVycygpIHtcbiAgICAgICAgcmV0dXJuIEhFQURFUlM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBjdXJyZW50IHN0YXR1cyBvZiB0aGUgV2ViU29ja2V0IGNvbm5lY3Rpb24uXG4gICAgICovXG4gICAgZ2V0IHN0YXR1cygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuI3N0YXRlLnN0YXR1cztcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIGN1cnJlbnQgY29ubmVjdGlvbiBzdGF0ZSBvZiB0aGUgV2ViU29ja2V0IGNvbm5lY3Rpb24uXG4gICAgICovXG4gICAgZ2V0IGNvbm5lY3Rpb25TdGF0ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuI3N0YXRlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBbHdheXMgcmV0dXJucyBgbnVsbGAgYXMgdGhlIFdlYlNvY2tldCB0cmFuc3BvcnQgbGF5ZXIgZG9lcyBub3QgaGFuZGxlIG11dGluZy4gSW5zdGVhZCxcbiAgICAgKiB0aGlzIHNob3VsZCBiZSBoYW5kbGVkIGJ5IHRoZSBjbGllbnQgYnkgbm90IHRyaWdnZXJpbmcgdGhlIGBzZW5kQXVkaW9gIG1ldGhvZC5cbiAgICAgKi9cbiAgICBnZXQgbXV0ZWQoKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgY3VycmVudCBpdGVtIElEIG9mIHRoZSBvbmdvaW5nIHJlc3BvbnNlLlxuICAgICAqL1xuICAgIGdldCBjdXJyZW50SXRlbUlkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy4jY3VycmVudEl0ZW1JZDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVHJpZ2dlcnMgdGhlIGBhdWRpb2AgZXZlbnQgdGhhdCBhIGNsaWVudCBtaWdodCBsaXN0ZW4gdG8gdG8gcmVjZWl2ZSB0aGUgYXVkaW8gYnVmZmVyLlxuICAgICAqIFByb3RlY3RlZCBmb3IgeW91IHRvIGJlIGFibGUgdG8gb3ZlcnJpZGUgYW5kIGRpc2FibGUgZW1pdHRpbmcgdGhpcyBldmVudCBpbiBjYXNlIHlvdXIgZXh0ZW5kZWRcbiAgICAgKiB0cmFuc3BvcnQgbGF5ZXIgaGFuZGxlcyBhdWRpbyBpbnRlcm5hbGx5LlxuICAgICAqXG4gICAgICogQHBhcmFtIGF1ZGlvRXZlbnQgLSBUaGUgYXVkaW8gZXZlbnQgdG8gZW1pdC5cbiAgICAgKi9cbiAgICBfb25BdWRpbyhhdWRpb0V2ZW50KSB7XG4gICAgICAgIHRoaXMuZW1pdCgnYXVkaW8nLCBhdWRpb0V2ZW50KTtcbiAgICB9XG4gICAgX2FmdGVyQXVkaW9Eb25lRXZlbnQoKSB7XG4gICAgICAgIHRoaXMuI3Jlc2V0QXVkaW9QbGF5YmFja1N0YXRlKCk7XG4gICAgfVxuICAgIGFzeW5jICNzZXR1cFdlYlNvY2tldChyZXNvbHZlLCByZWplY3QsIHNlc3Npb25Db25maWcpIHtcbiAgICAgICAgaWYgKHRoaXMuI3N0YXRlLndlYnNvY2tldCkge1xuICAgICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmICghdGhpcy4jYXBpS2V5KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVXNlckVycm9yKCdBUEkga2V5IGlzIG5vdCBzZXQuIFBsZWFzZSBjYWxsIGBjb25uZWN0KClgIHdpdGggYW4gQVBJIGtleSBmaXJzdC4nKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaXNCcm93c2VyRW52aXJvbm1lbnQoKSAmJlxuICAgICAgICAgICAgIXRoaXMuI2FwaUtleS5zdGFydHNXaXRoKCdla18nKSAmJlxuICAgICAgICAgICAgIXRoaXMuI3VzZUluc2VjdXJlQXBpS2V5KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVXNlckVycm9yKCdVc2luZyB0aGUgV2ViU29ja2V0IGNvbm5lY3Rpb24gaW4gYSBicm93c2VyIGVudmlyb25tZW50IHJlcXVpcmVzIGFuIGVwaGVtZXJhbCBjbGllbnQga2V5LiBJZiB5b3UgaGF2ZSB0byB1c2UgYSByZWd1bGFyIEFQSSBrZXksIHNldCB0aGUgYHVzZUluc2VjdXJlQXBpS2V5YCBvcHRpb24gdG8gdHJ1ZS4nKTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgd3MgPSBudWxsO1xuICAgICAgICBpZiAodGhpcy4jY3JlYXRlV2ViU29ja2V0KSB7XG4gICAgICAgICAgICB3cyA9IGF3YWl0IHRoaXMuI2NyZWF0ZVdlYlNvY2tldCh7XG4gICAgICAgICAgICAgICAgdXJsOiB0aGlzLiN1cmwsXG4gICAgICAgICAgICAgICAgYXBpS2V5OiB0aGlzLiNhcGlLZXksXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIC8vIGJyb3dzZXJzIGFuZCB3b3JrZXJkIHNob3VsZCB1c2UgdGhlIHByb3RvY29scyBhcmd1bWVudCwgbm9kZSBzaG91bGQgdXNlIHRoZSBoZWFkZXJzIGFyZ3VtZW50XG4gICAgICAgICAgICBjb25zdCB3ZWJzb2NrZXRBcmd1bWVudHMgPSB1c2VXZWJTb2NrZXRQcm90b2NvbHNcbiAgICAgICAgICAgICAgICA/IFtcbiAgICAgICAgICAgICAgICAgICAgJ3JlYWx0aW1lJyxcbiAgICAgICAgICAgICAgICAgICAgLy8gQXV0aFxuICAgICAgICAgICAgICAgICAgICAnb3BlbmFpLWluc2VjdXJlLWFwaS1rZXkuJyArIHRoaXMuI2FwaUtleSxcbiAgICAgICAgICAgICAgICAgICAgLy8gVmVyc2lvbiBoZWFkZXJcbiAgICAgICAgICAgICAgICAgICAgV0VCU09DS0VUX01FVEEsXG4gICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgICAgIDoge1xuICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7dGhpcy4jYXBpS2V5fWAsXG4gICAgICAgICAgICAgICAgICAgICAgICAuLi50aGlzLmdldENvbW1vblJlcXVlc3RIZWFkZXJzKCksXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHdzID0gbmV3IFdlYlNvY2tldCh0aGlzLiN1cmwsIHdlYnNvY2tldEFyZ3VtZW50cyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy4jc3RhdGUgPSB7XG4gICAgICAgICAgICBzdGF0dXM6ICdjb25uZWN0aW5nJyxcbiAgICAgICAgICAgIHdlYnNvY2tldDogd3MsXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuZW1pdCgnY29ubmVjdGlvbl9jaGFuZ2UnLCB0aGlzLiNzdGF0ZS5zdGF0dXMpO1xuICAgICAgICBjb25zdCBvblNvY2tldE9wZW5SZWFkeSA9ICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuI3N0YXRlID0ge1xuICAgICAgICAgICAgICAgIHN0YXR1czogJ2Nvbm5lY3RlZCcsXG4gICAgICAgICAgICAgICAgd2Vic29ja2V0OiB3cyxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLmVtaXQoJ2Nvbm5lY3Rpb25fY2hhbmdlJywgdGhpcy4jc3RhdGUuc3RhdHVzKTtcbiAgICAgICAgICAgIHRoaXMuX29uT3BlbigpO1xuICAgICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICB9O1xuICAgICAgICBpZiAodGhpcy4jc2tpcE9wZW5FdmVudExpc3RlbmVycyA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgb25Tb2NrZXRPcGVuUmVhZHkoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHdzLmFkZEV2ZW50TGlzdGVuZXIoJ29wZW4nLCBvblNvY2tldE9wZW5SZWFkeSk7XG4gICAgICAgIH1cbiAgICAgICAgd3MuYWRkRXZlbnRMaXN0ZW5lcignZXJyb3InLCAoZXJyb3IpID0+IHtcbiAgICAgICAgICAgIHRoaXMuX29uRXJyb3IoZXJyb3IpO1xuICAgICAgICAgICAgdGhpcy4jc3RhdGUgPSB7XG4gICAgICAgICAgICAgICAgc3RhdHVzOiAnZGlzY29ubmVjdGVkJyxcbiAgICAgICAgICAgICAgICB3ZWJzb2NrZXQ6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLmVtaXQoJ2Nvbm5lY3Rpb25fY2hhbmdlJywgdGhpcy4jc3RhdGUuc3RhdHVzKTtcbiAgICAgICAgICAgIHJlamVjdChlcnJvcik7XG4gICAgICAgIH0pO1xuICAgICAgICB3cy5hZGRFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgKG1lc3NhZ2UpID0+IHtcbiAgICAgICAgICAgIHRoaXMuX29uTWVzc2FnZShtZXNzYWdlKTtcbiAgICAgICAgICAgIGNvbnN0IHsgZGF0YTogcGFyc2VkLCBpc0dlbmVyaWMgfSA9IHBhcnNlUmVhbHRpbWVFdmVudChtZXNzYWdlKTtcbiAgICAgICAgICAgIGlmICghcGFyc2VkIHx8IGlzR2VuZXJpYykge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChwYXJzZWQudHlwZSA9PT0gJ3Jlc3BvbnNlLm91dHB1dF9hdWRpby5kZWx0YScpIHtcbiAgICAgICAgICAgICAgICB0aGlzLiNjdXJyZW50QXVkaW9Db250ZW50SW5kZXggPSBwYXJzZWQuY29udGVudF9pbmRleDtcbiAgICAgICAgICAgICAgICB0aGlzLiNjdXJyZW50SXRlbUlkID0gcGFyc2VkLml0ZW1faWQ7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuX2ZpcnN0QXVkaW9UaW1lc3RhbXAgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAvLyBJZiB0aGUgcmVzcG9uc2Ugc3RhcnQgdGltZXN0YW1wIGlzIG5vdCBzZXQsIHdlIHNldCBpdCB0byB0aGUgY3VycmVudCB0aW1lLlxuICAgICAgICAgICAgICAgICAgICAvLyBUaGlzIGlzIHVzZWQgdG8gY2FsY3VsYXRlIHRoZSBlbGFwc2VkIHRpbWUgZm9yIGludGVycnVwdGlvbi5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fZmlyc3RBdWRpb1RpbWVzdGFtcCA9IERhdGUubm93KCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2F1ZGlvTGVuZ3RoTXMgPSAwO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCBidWZmID0gYmFzZTY0VG9BcnJheUJ1ZmZlcihwYXJzZWQuZGVsdGEpO1xuICAgICAgICAgICAgICAgIC8vIGNhbGN1bGF0ZSB0aGUgYXVkaW8gbGVuZ3RoIGluIG1pbGxpc2Vjb25kc1xuICAgICAgICAgICAgICAgIC8vIEdBIGZvcm1hdDogc2Vzc2lvbi5hdWRpby5vdXRwdXQuZm9ybWF0IHN1cHBvcnRzIHN0cnVjdHVyZWQgeyB0eXBlOiBcImF1ZGlvL3BjbVwiLCByYXRlIH0gb3IgXCJhdWRpby9wY211XCIgZXRjLlxuICAgICAgICAgICAgICAgIGNvbnN0IGZtdCA9IHRoaXMuX3Jhd1Nlc3Npb25Db25maWc/LmF1ZGlvPy5vdXRwdXQ/LmZvcm1hdDtcbiAgICAgICAgICAgICAgICBpZiAoZm10ICYmIHR5cGVvZiBmbXQgPT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFN0cnVjdHVyZWQgZm9ybWF0XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHQgPSBmbXQudHlwZTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHQgPT09ICdhdWRpby9wY211JyB8fCB0ID09PSAnYXVkaW8vcGNtYScpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIDhrSHosIDEgYnl0ZSBwZXIgc2FtcGxlXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9hdWRpb0xlbmd0aE1zICs9IGJ1ZmYuYnl0ZUxlbmd0aCAvIDg7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAodCA9PT0gJ2F1ZGlvL3BjbScpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHJhdGUgPSBmbXQucmF0ZSA/PyAyNDAwMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGJ5dGVzIC0+IHNhbXBsZXMgKDIgYnl0ZXMgcGVyIHNhbXBsZSkgLT4gbXNcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX2F1ZGlvTGVuZ3RoTXMgKz0gKGJ1ZmYuYnl0ZUxlbmd0aCAvIDIgLyByYXRlKSAqIDEwMDA7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBGYWxsYmFjayBhc3N1bXB0aW9uIHNpbWlsYXIgdG8gbGVnYWN5XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9hdWRpb0xlbmd0aE1zICs9IGJ1ZmYuYnl0ZUxlbmd0aCAvIDI0IC8gMjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmICh0eXBlb2YgZm10ID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZm10LnN0YXJ0c1dpdGgoJ2c3MTFfJykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX2F1ZGlvTGVuZ3RoTXMgKz0gYnVmZi5ieXRlTGVuZ3RoIC8gODtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEFzc3VtZSAyNGtIeiBQQ00xNlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fYXVkaW9MZW5ndGhNcyArPSBidWZmLmJ5dGVMZW5ndGggLyAyNCAvIDI7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIERlZmF1bHQgdG8gMjRrSHogUENNMTYgYmVoYXZpb3IgaWYgdW5zcGVjaWZpZWRcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fYXVkaW9MZW5ndGhNcyArPSBidWZmLmJ5dGVMZW5ndGggLyAyNCAvIDI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IGF1ZGlvRXZlbnQgPSB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdhdWRpbycsXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IGJ1ZmYsXG4gICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlSWQ6IHBhcnNlZC5yZXNwb25zZV9pZCxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHRoaXMuX29uQXVkaW8oYXVkaW9FdmVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChwYXJzZWQudHlwZSA9PT0gJ2lucHV0X2F1ZGlvX2J1ZmZlci5zcGVlY2hfc3RhcnRlZCcpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBhdXRvbWF0aWNSZXNwb25zZUNhbmNlbGxhdGlvbkVuYWJsZWQgPSB0aGlzLl9yYXdTZXNzaW9uQ29uZmlnPy5hdWRpbz8uaW5wdXQ/LnR1cm5fZGV0ZWN0aW9uXG4gICAgICAgICAgICAgICAgICAgID8uaW50ZXJydXB0X3Jlc3BvbnNlID8/IGZhbHNlO1xuICAgICAgICAgICAgICAgIHRoaXMuaW50ZXJydXB0KCFhdXRvbWF0aWNSZXNwb25zZUNhbmNlbGxhdGlvbkVuYWJsZWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAocGFyc2VkLnR5cGUgPT09ICdyZXNwb25zZS5jcmVhdGVkJykge1xuICAgICAgICAgICAgICAgIHRoaXMuI29uZ29pbmdSZXNwb25zZSA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChwYXJzZWQudHlwZSA9PT0gJ3Jlc3BvbnNlLmRvbmUnKSB7XG4gICAgICAgICAgICAgICAgdGhpcy4jb25nb2luZ1Jlc3BvbnNlID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChwYXJzZWQudHlwZSA9PT0gJ3Nlc3Npb24uY3JlYXRlZCcpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl90cmFjaW5nQ29uZmlnID0gcGFyc2VkLnNlc3Npb24udHJhY2luZztcbiAgICAgICAgICAgICAgICAvLyBUcnlpbmcgdG8gdHVybiBvbiB0cmFjaW5nIGFmdGVyIHRoZSBzZXNzaW9uIGlzIGNyZWF0ZWRcbiAgICAgICAgICAgICAgICBjb25zdCB0cmFjaW5nQ29uZmlnID0gdHlwZW9mIHNlc3Npb25Db25maWcudHJhY2luZyA9PT0gJ3VuZGVmaW5lZCdcbiAgICAgICAgICAgICAgICAgICAgPyAnYXV0bydcbiAgICAgICAgICAgICAgICAgICAgOiBzZXNzaW9uQ29uZmlnLnRyYWNpbmc7XG4gICAgICAgICAgICAgICAgdGhpcy5fdXBkYXRlVHJhY2luZ0NvbmZpZyh0cmFjaW5nQ29uZmlnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHdzLmFkZEV2ZW50TGlzdGVuZXIoJ2Nsb3NlJywgKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy4jc3RhdGUgPSB7XG4gICAgICAgICAgICAgICAgc3RhdHVzOiAnZGlzY29ubmVjdGVkJyxcbiAgICAgICAgICAgICAgICB3ZWJzb2NrZXQ6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLmVtaXQoJ2Nvbm5lY3Rpb25fY2hhbmdlJywgdGhpcy4jc3RhdGUuc3RhdHVzKTtcbiAgICAgICAgICAgIHRoaXMuX29uQ2xvc2UoKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGFzeW5jIGNvbm5lY3Qob3B0aW9ucykge1xuICAgICAgICBjb25zdCBtb2RlbCA9IG9wdGlvbnMubW9kZWwgPz8gdGhpcy5jdXJyZW50TW9kZWw7XG4gICAgICAgIHRoaXMuY3VycmVudE1vZGVsID0gbW9kZWw7XG4gICAgICAgIHRoaXMuI2FwaUtleSA9IGF3YWl0IHRoaXMuX2dldEFwaUtleShvcHRpb25zKTtcbiAgICAgICAgY29uc3QgY2FsbElkID0gb3B0aW9ucy5jYWxsSWQ7XG4gICAgICAgIGxldCB1cmw7XG4gICAgICAgIGlmIChvcHRpb25zLnVybCkge1xuICAgICAgICAgICAgdXJsID0gb3B0aW9ucy51cmw7XG4gICAgICAgICAgICB0aGlzLiNkZWZhdWx0VXJsID0gb3B0aW9ucy51cmw7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoY2FsbElkKSB7XG4gICAgICAgICAgICB1cmwgPSBgd3NzOi8vYXBpLm9wZW5haS5jb20vdjEvcmVhbHRpbWU/Y2FsbF9pZD0ke2NhbGxJZH1gO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRoaXMuI2RlZmF1bHRVcmwpIHtcbiAgICAgICAgICAgIHVybCA9IHRoaXMuI2RlZmF1bHRVcmw7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB1cmwgPSBgd3NzOi8vYXBpLm9wZW5haS5jb20vdjEvcmVhbHRpbWU/bW9kZWw9JHt0aGlzLmN1cnJlbnRNb2RlbH1gO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuI3VybCA9IHVybDtcbiAgICAgICAgY29uc3Qgc2Vzc2lvbkNvbmZpZyA9IHtcbiAgICAgICAgICAgIC4uLihvcHRpb25zLmluaXRpYWxTZXNzaW9uQ29uZmlnIHx8IHt9KSxcbiAgICAgICAgICAgIG1vZGVsOiB0aGlzLmN1cnJlbnRNb2RlbCxcbiAgICAgICAgfTtcbiAgICAgICAgYXdhaXQgbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgdGhpcy4jc2V0dXBXZWJTb2NrZXQocmVzb2x2ZSwgcmVqZWN0LCBzZXNzaW9uQ29uZmlnKS5jYXRjaChyZWplY3QpO1xuICAgICAgICB9KTtcbiAgICAgICAgYXdhaXQgdGhpcy51cGRhdGVTZXNzaW9uQ29uZmlnKHNlc3Npb25Db25maWcpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZW5kIGFuIGV2ZW50IHRvIHRoZSBSZWFsdGltZSBBUEkuIFRoaXMgd2lsbCBzdHJpbmdpZnkgdGhlIGV2ZW50IGFuZCBzZW5kIGl0IGRpcmVjdGx5IHRvIHRoZVxuICAgICAqIEFQSS4gVGhpcyBjYW4gYmUgdXNlZCBpZiB5b3Ugd2FudCB0byB0YWtlIGNvbnRyb2wgb3ZlciB0aGUgY29ubmVjdGlvbiBhbmQgc2VuZCBldmVudHMgbWFudWFsbHkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZXZlbnQgLSBUaGUgZXZlbnQgdG8gc2VuZC5cbiAgICAgKi9cbiAgICBzZW5kRXZlbnQoZXZlbnQpIHtcbiAgICAgICAgaWYgKCF0aGlzLiNzdGF0ZS53ZWJzb2NrZXQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignV2ViU29ja2V0IGlzIG5vdCBjb25uZWN0ZWQuIE1ha2Ugc3VyZSB5b3UgY2FsbCBgY29ubmVjdCgpYCBiZWZvcmUgc2VuZGluZyBldmVudHMuJyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy4jc3RhdGUud2Vic29ja2V0LnNlbmQoSlNPTi5zdHJpbmdpZnkoZXZlbnQpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2xvc2UgdGhlIFdlYlNvY2tldCBjb25uZWN0aW9uLlxuICAgICAqXG4gICAgICogVGhpcyB3aWxsIGFsc28gcmVzZXQgYW55IGludGVybmFsIGNvbm5lY3Rpb24gdHJhY2tpbmcgdXNlZCBmb3IgaW50ZXJydXB0aW9uIGhhbmRsaW5nLlxuICAgICAqL1xuICAgIGNsb3NlKCkge1xuICAgICAgICB0aGlzLiNzdGF0ZS53ZWJzb2NrZXQ/LmNsb3NlKCk7XG4gICAgICAgIHRoaXMuI2N1cnJlbnRJdGVtSWQgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMuX2ZpcnN0QXVkaW9UaW1lc3RhbXAgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMuX2F1ZGlvTGVuZ3RoTXMgPSAwO1xuICAgICAgICB0aGlzLiNjdXJyZW50QXVkaW9Db250ZW50SW5kZXggPSB1bmRlZmluZWQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFdpbGwgdGhyb3cgYW4gZXJyb3IgYXMgdGhlIFdlYlNvY2tldCB0cmFuc3BvcnQgbGF5ZXIgZG9lcyBub3Qgc3VwcG9ydCBtdXRpbmcuXG4gICAgICovXG4gICAgbXV0ZShfbXV0ZWQpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdNdXRlIGlzIG5vdCBzdXBwb3J0ZWQgZm9yIHRoZSBXZWJTb2NrZXQgdHJhbnNwb3J0LiBZb3UgaGF2ZSB0byBtdXRlIHRoZSBhdWRpbyBpbnB1dCB5b3Vyc2VsZi4nKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2VuZCBhbiBhdWRpbyBidWZmZXIgdG8gdGhlIFJlYWx0aW1lIEFQSS4gVGhpcyBpcyB1c2VkIGZvciB5b3VyIGNsaWVudCB0byBzZW5kIGF1ZGlvIHRvIHRoZVxuICAgICAqIG1vZGVsIHRvIHJlc3BvbmQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gYXVkaW8gLSBUaGUgYXVkaW8gYnVmZmVyIHRvIHNlbmQuXG4gICAgICogQHBhcmFtIG9wdGlvbnMgLSBUaGUgb3B0aW9ucyBmb3IgdGhlIGF1ZGlvIGJ1ZmZlci5cbiAgICAgKi9cbiAgICBzZW5kQXVkaW8oYXVkaW8sIG9wdGlvbnMgPSB7fSkge1xuICAgICAgICBpZiAodGhpcy4jc3RhdGUuc3RhdHVzID09PSAnY29ubmVjdGVkJykge1xuICAgICAgICAgICAgc3VwZXIuc2VuZEF1ZGlvKGF1ZGlvLCBvcHRpb25zKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZW5kIGEgY2FuY2VsIHJlc3BvbnNlIGV2ZW50IHRvIHRoZSBSZWFsdGltZSBBUEkuIFRoaXMgaXMgdXNlZCB0byBjYW5jZWwgYW4gb25nb2luZ1xuICAgICAqICByZXNwb25zZSB0aGF0IHRoZSBtb2RlbCBpcyBjdXJyZW50bHkgZ2VuZXJhdGluZy5cbiAgICAgKi9cbiAgICBfY2FuY2VsUmVzcG9uc2UoKSB7XG4gICAgICAgIC8vIGNhbmNlbCB0aGUgb25nb2luZyByZXNwb25zZVxuICAgICAgICBpZiAodGhpcy4jb25nb2luZ1Jlc3BvbnNlKSB7XG4gICAgICAgICAgICB0aGlzLnNlbmRFdmVudCh7XG4gICAgICAgICAgICAgICAgdHlwZTogJ3Jlc3BvbnNlLmNhbmNlbCcsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMuI29uZ29pbmdSZXNwb25zZSA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIERvIE5PVCBjYWxsIHRoaXMgbWV0aG9kIGRpcmVjdGx5LiBDYWxsIGBpbnRlcnJ1cHQoKWAgaW5zdGVhZCBmb3IgcHJvcGVyIGludGVycnVwdGlvbiBoYW5kbGluZy5cbiAgICAgKlxuICAgICAqIFRoaXMgbWV0aG9kIGlzIHVzZWQgdG8gc2VuZCB0aGUgcmlnaHQgZXZlbnRzIHRvIHRoZSBBUEkgdG8gaW5mb3JtIHRoZSBtb2RlbCB0aGF0IHRoZSB1c2VyIGhhc1xuICAgICAqIGludGVycnVwdGVkIHRoZSByZXNwb25zZS4gSXQgbWlnaHQgYmUgb3ZlcnJpZGRlbi9leHRlbmRlZCBieSBhbiBleHRlbmRlZCB0cmFuc3BvcnQgbGF5ZXIuIFNlZVxuICAgICAqIHRoZSBgVHdpbGlvUmVhbHRpbWVUcmFuc3BvcnRMYXllcmAgZm9yIGFuIGV4YW1wbGUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZWxhcHNlZFRpbWUgLSBUaGUgZWxhcHNlZCB0aW1lIHNpbmNlIHRoZSByZXNwb25zZSBzdGFydGVkLlxuICAgICAqL1xuICAgIF9pbnRlcnJ1cHQoZWxhcHNlZFRpbWUsIGNhbmNlbE9uZ29pbmdSZXNwb25zZSA9IHRydWUpIHtcbiAgICAgICAgaWYgKGVsYXBzZWRUaW1lIDwgMCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIC8vIGltbWVkaWF0ZWx5IGVtaXQgdGhpcyBldmVudCBzbyB0aGUgY2xpZW50IGNhbiBzdG9wIHBsYXlpbmcgYXVkaW9cbiAgICAgICAgaWYgKGNhbmNlbE9uZ29pbmdSZXNwb25zZSkge1xuICAgICAgICAgICAgdGhpcy5fY2FuY2VsUmVzcG9uc2UoKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBsZW5ndGggPSB0aGlzLl9hdWRpb0xlbmd0aE1zID8/IE51bWJlci5QT1NJVElWRV9JTkZJTklUWTtcbiAgICAgICAgLy8gYXVkaW9fZW5kX21zIG11c3QgYmUgYW4gaW50ZWdlclxuICAgICAgICBjb25zdCBhdWRpb19lbmRfbXMgPSBNYXRoLm1heCgwLCBNYXRoLmZsb29yKE1hdGgubWluKGVsYXBzZWRUaW1lLCBsZW5ndGgpKSk7XG4gICAgICAgIHRoaXMuZW1pdCgnYXVkaW9faW50ZXJydXB0ZWQnKTtcbiAgICAgICAgdGhpcy5zZW5kRXZlbnQoe1xuICAgICAgICAgICAgdHlwZTogJ2NvbnZlcnNhdGlvbi5pdGVtLnRydW5jYXRlJyxcbiAgICAgICAgICAgIGl0ZW1faWQ6IHRoaXMuI2N1cnJlbnRJdGVtSWQsXG4gICAgICAgICAgICBjb250ZW50X2luZGV4OiB0aGlzLiNjdXJyZW50QXVkaW9Db250ZW50SW5kZXgsXG4gICAgICAgICAgICBhdWRpb19lbmRfbXMsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBJbnRlcnJ1cHQgdGhlIG9uZ29pbmcgcmVzcG9uc2UuIFRoaXMgbWV0aG9kIGlzIHRyaWdnZXJlZCBhdXRvbWF0aWNhbGx5IGJ5IHRoZSBjbGllbnQgd2hlblxuICAgICAqIHZvaWNlIGFjdGl2aXR5IGRldGVjdGlvbiAoVkFEKSBpcyBlbmFibGVkIChkZWZhdWx0KSBhcyB3ZWxsIGFzIHdoZW4gYW4gb3V0cHV0IGd1YXJkcmFpbCBnb3RcbiAgICAgKiB0cmlnZ2VyZWQuXG4gICAgICpcbiAgICAgKiBZb3UgY2FuIGFsc28gY2FsbCB0aGlzIG1ldGhvZCBkaXJlY3RseSBpZiB5b3Ugd2FudCB0byBpbnRlcnJ1cHQgdGhlIGNvbnZlcnNhdGlvbiBmb3IgZXhhbXBsZVxuICAgICAqIGJhc2VkIG9uIGFuIGV2ZW50IGluIHRoZSBjbGllbnQuXG4gICAgICovXG4gICAgaW50ZXJydXB0KGNhbmNlbE9uZ29pbmdSZXNwb25zZSA9IHRydWUpIHtcbiAgICAgICAgaWYgKCF0aGlzLiNjdXJyZW50SXRlbUlkIHx8IHR5cGVvZiB0aGlzLl9maXJzdEF1ZGlvVGltZXN0YW1wICE9PSAnbnVtYmVyJykge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGVsYXBzZWRUaW1lID0gRGF0ZS5ub3coKSAtIHRoaXMuX2ZpcnN0QXVkaW9UaW1lc3RhbXA7XG4gICAgICAgIGlmIChlbGFwc2VkVGltZSA+PSAwKSB7XG4gICAgICAgICAgICB0aGlzLl9pbnRlcnJ1cHQoZWxhcHNlZFRpbWUsIGNhbmNlbE9uZ29pbmdSZXNwb25zZSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy4jcmVzZXRBdWRpb1BsYXliYWNrU3RhdGUoKTtcbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1vcGVuYWlSZWFsdGltZVdlYnNvY2tldC5tanMubWFwIiwiaW1wb3J0IHsgVXNlckVycm9yLCB9IGZyb20gJ0BvcGVuYWkvYWdlbnRzLWNvcmUnO1xuZXhwb3J0IGNvbnN0IEJBQ0tHUk9VTkRfUkVTVUxUX1NZTUJPTCA9IFN5bWJvbCgnYmFja2dyb3VuZFJlc3VsdCcpO1xuZXhwb3J0IGZ1bmN0aW9uIGJhY2tncm91bmRSZXN1bHQoY29udGVudCkge1xuICAgIHJldHVybiB7XG4gICAgICAgIFtCQUNLR1JPVU5EX1JFU1VMVF9TWU1CT0xdOiB0cnVlLFxuICAgICAgICBjb250ZW50LFxuICAgIH07XG59XG5leHBvcnQgZnVuY3Rpb24gaXNCYWNrZ3JvdW5kUmVzdWx0KHJlc3VsdCkge1xuICAgIHJldHVybiAodHlwZW9mIHJlc3VsdCA9PT0gJ29iamVjdCcgJiZcbiAgICAgICAgcmVzdWx0ICE9PSBudWxsICYmXG4gICAgICAgIEJBQ0tHUk9VTkRfUkVTVUxUX1NZTUJPTCBpbiByZXN1bHQpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGlzVmFsaWRSZWFsdGltZVRvb2wodG9vbCkge1xuICAgIHJldHVybiAodG9vbC50eXBlID09PSAnZnVuY3Rpb24nIHx8XG4gICAgICAgICh0b29sLnR5cGUgPT09ICdob3N0ZWRfdG9vbCcgJiYgdG9vbC5uYW1lID09PSAnaG9zdGVkX21jcCcpKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiB0b1JlYWx0aW1lVG9vbERlZmluaXRpb24odG9vbCkge1xuICAgIGlmICh0b29sLnR5cGUgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgcmV0dXJuIHRvb2w7XG4gICAgfVxuICAgIGlmICh0b29sLnR5cGUgPT09ICdob3N0ZWRfdG9vbCcgJiYgdG9vbC5uYW1lID09PSAnaG9zdGVkX21jcCcpIHtcbiAgICAgICAgY29uc3Qgc2VydmVyVXJsID0gdG9vbC5wcm92aWRlckRhdGEuc2VydmVyX3VybCAmJiB0b29sLnByb3ZpZGVyRGF0YS5zZXJ2ZXJfdXJsLmxlbmd0aCA+IDBcbiAgICAgICAgICAgID8gdG9vbC5wcm92aWRlckRhdGEuc2VydmVyX3VybFxuICAgICAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB0eXBlOiAnbWNwJyxcbiAgICAgICAgICAgIHNlcnZlcl9sYWJlbDogdG9vbC5wcm92aWRlckRhdGEuc2VydmVyX2xhYmVsLFxuICAgICAgICAgICAgc2VydmVyX3VybDogc2VydmVyVXJsLFxuICAgICAgICAgICAgaGVhZGVyczogdG9vbC5wcm92aWRlckRhdGEuaGVhZGVycyxcbiAgICAgICAgICAgIGFsbG93ZWRfdG9vbHM6IHRvb2wucHJvdmlkZXJEYXRhLmFsbG93ZWRfdG9vbHMsXG4gICAgICAgICAgICByZXF1aXJlX2FwcHJvdmFsOiB0b29sLnByb3ZpZGVyRGF0YS5yZXF1aXJlX2FwcHJvdmFsLFxuICAgICAgICB9O1xuICAgIH1cbiAgICB0aHJvdyBuZXcgVXNlckVycm9yKGBJbnZhbGlkIHRvb2wgdHlwZTogJHt0b29sfWApO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dG9vbC5tanMubWFwIiwiaW1wb3J0IHsgZ2V0VHJhbnNmZXJNZXNzYWdlLCBNb2RlbEJlaGF2aW9yRXJyb3IsIE91dHB1dEd1YXJkcmFpbFRyaXB3aXJlVHJpZ2dlcmVkLCBSdW5Db250ZXh0LCBSdW5Ub29sQXBwcm92YWxJdGVtLCB9IGZyb20gJ0BvcGVuYWkvYWdlbnRzLWNvcmUnO1xuaW1wb3J0IHsgUnVudGltZUV2ZW50RW1pdHRlciB9IGZyb20gJ0BvcGVuYWkvYWdlbnRzLWNvcmUvX3NoaW1zJztcbmltcG9ydCB7IGlzWm9kT2JqZWN0LCB0b1NtYXJ0U3RyaW5nIH0gZnJvbSAnQG9wZW5haS9hZ2VudHMtY29yZS91dGlscyc7XG5pbXBvcnQgeyBkZWZpbmVSZWFsdGltZU91dHB1dEd1YXJkcmFpbCwgZ2V0UmVhbHRpbWVHdWFyZHJhaWxGZWVkYmFja01lc3NhZ2UsIGdldFJlYWx0aW1lR3VhcmRyYWlsU2V0dGluZ3MsIH0gZnJvbSBcIi4vZ3VhcmRyYWlsLm1qc1wiO1xuaW1wb3J0IHsgREVGQVVMVF9PUEVOQUlfUkVBTFRJTUVfU0VTU0lPTl9DT05GSUcsIH0gZnJvbSBcIi4vb3BlbmFpUmVhbHRpbWVCYXNlLm1qc1wiO1xuaW1wb3J0IHsgT3BlbkFJUmVhbHRpbWVXZWJSVEMgfSBmcm9tIFwiLi9vcGVuYWlSZWFsdGltZVdlYlJ0Yy5tanNcIjtcbmltcG9ydCB7IE9wZW5BSVJlYWx0aW1lV2ViU29ja2V0IH0gZnJvbSBcIi4vb3BlbmFpUmVhbHRpbWVXZWJzb2NrZXQubWpzXCI7XG5pbXBvcnQgeyBhcHByb3ZhbEl0ZW1Ub1JlYWx0aW1lQXBwcm92YWxJdGVtLCBnZXRMYXN0VGV4dEZyb21BdWRpb091dHB1dE1lc3NhZ2UsIGhhc1dlYlJUQ1N1cHBvcnQsIHJlYWx0aW1lQXBwcm92YWxJdGVtVG9BcHByb3ZhbEl0ZW0sIHVwZGF0ZVJlYWx0aW1lSGlzdG9yeSwgfSBmcm9tIFwiLi91dGlscy5tanNcIjtcbmltcG9ydCBsb2dnZXIgZnJvbSBcIi4vbG9nZ2VyLm1qc1wiO1xuaW1wb3J0IHsgaXNCYWNrZ3JvdW5kUmVzdWx0LCBpc1ZhbGlkUmVhbHRpbWVUb29sLCB0b1JlYWx0aW1lVG9vbERlZmluaXRpb24sIH0gZnJvbSBcIi4vdG9vbC5tanNcIjtcbmZ1bmN0aW9uIGNsb25lRGVmYXVsdFNlc3Npb25Db25maWcoKSB7XG4gICAgcmV0dXJuIEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoREVGQVVMVF9PUEVOQUlfUkVBTFRJTUVfU0VTU0lPTl9DT05GSUcpKTtcbn1cbi8qKlxuICogQSBgUmVhbHRpbWVTZXNzaW9uYCBpcyB0aGUgY29ybmVyc3RvbmUgb2YgYnVpbGRpbmcgVm9pY2UgQWdlbnRzLiBJdCdzIHRoZSBlcXVpdmFsZW50IG9mIGFcbiAqIFJ1bm5lciBpbiB0ZXh0LWJhc2VkIGFnZW50cyBleGNlcHQgdGhhdCBpdCBhdXRvbWF0aWNhbGx5IGhhbmRsZXMgbXVsdGlwbGUgdHVybnMgYnkgbWFpbnRhaW5pbmcgYVxuICogY29ubmVjdGlvbiB3aXRoIHRoZSB1bmRlcmx5aW5nIHRyYW5zcG9ydCBsYXllci5cbiAqXG4gKiBUaGUgc2Vzc2lvbiBoYW5kbGVzIG1hbmFnaW5nIHRoZSBsb2NhbCBoaXN0b3J5IGNvcHksIGV4ZWN1dGVzIHRvb2xzLCBydW5zIG91dHB1dCBndWFyZHJhaWxzLCBhbmRcbiAqIGZhY2lsaXRhdGVzIGhhbmRvZmZzLlxuICpcbiAqIFRoZSBhY3R1YWwgYXVkaW8gaGFuZGxpbmcgYW5kIGdlbmVyYXRpb24gb2YgbW9kZWwgcmVzcG9uc2VzIGlzIGhhbmRsZWQgYnkgdGhlIHVuZGVybHlpbmdcbiAqIHRyYW5zcG9ydCBsYXllci4gQnkgZGVmYXVsdCBpZiB5b3UgYXJlIHVzaW5nIGEgYnJvd3NlciB3aXRoIFdlYlJUQyBzdXBwb3J0LCB0aGUgc2Vzc2lvbiB3aWxsXG4gKiBhdXRvbWF0aWNhbGx5IHVzZSB0aGUgV2ViUlRDIHZlcnNpb24gb2YgdGhlIE9wZW5BSSBSZWFsdGltZSBBUEkuIE9uIHRoZSBzZXJ2ZXIgb3IgaWYgeW91IHBhc3NcbiAqIGB3ZWJzb2NrZXRgIGFzIHRoZSB0cmFuc3BvcnQgbGF5ZXIsIHRoZSBzZXNzaW9uIHdpbGwgZXN0YWJsaXNoIGEgY29ubmVjdGlvbiB1c2luZyBXZWJTb2NrZXRzLlxuICpcbiAqIEluIHRoZSBjYXNlIG9mIFdlYlJUQywgaW4gdGhlIGJyb3dzZXIsIHRoZSB0cmFuc3BvcnQgbGF5ZXIgd2lsbCBhbHNvIGF1dG9tYXRpY2FsbHkgY29uZmlndXJlIHRoZVxuICogbWljcm9waG9uZSBhbmQgYXVkaW8gb3V0cHV0IHRvIGJlIHVzZWQgYnkgdGhlIHNlc3Npb24uXG4gKlxuICogWW91IGNhbiBhbHNvIGNyZWF0ZSBhIHRyYW5zcG9ydCBsYXllciBpbnN0YW5jZSB5b3Vyc2VsZiBhbmQgcGFzcyBpdCBpbiB0byBoYXZlIG1vcmUgY29udHJvbCBvdmVyXG4gKiB0aGUgY29uZmlndXJhdGlvbiBvciBldmVuIGV4dGVuZCB0aGUgZXhpc3Rpbmcgb25lcy4gQ2hlY2sgb3V0IHRoZSBgVHdpbGlvUmVhbHRpbWVUcmFuc3BvcnRMYXllcmBcbiAqIGZvciBhbiBleGFtcGxlIG9mIGhvdyB0byBjcmVhdGUgYSBjdXN0b20gdHJhbnNwb3J0IGxheWVyLlxuICpcbiAqIEBleGFtcGxlXG4gKiBgYGB0c1xuICogY29uc3QgYWdlbnQgPSBuZXcgUmVhbHRpbWVBZ2VudCh7XG4gKiAgIG5hbWU6ICdteS1hZ2VudCcsXG4gKiAgIGluc3RydWN0aW9uczogJ1lvdSBhcmUgYSBoZWxwZnVsIGFzc2lzdGFudCB0aGF0IGNhbiBhbnN3ZXIgcXVlc3Rpb25zIGFuZCBoZWxwIHdpdGggdGFza3MuJyxcbiAqIH0pXG4gKlxuICogY29uc3Qgc2Vzc2lvbiA9IG5ldyBSZWFsdGltZVNlc3Npb24oYWdlbnQpO1xuICogc2Vzc2lvbi5jb25uZWN0KHtcbiAqICAgYXBpS2V5OiAneW91ci1hcGkta2V5JyxcbiAqIH0pO1xuICogYGBgXG4gKi9cbmV4cG9ydCBjbGFzcyBSZWFsdGltZVNlc3Npb24gZXh0ZW5kcyBSdW50aW1lRXZlbnRFbWl0dGVyIHtcbiAgICBpbml0aWFsQWdlbnQ7XG4gICAgb3B0aW9ucztcbiAgICAjdHJhbnNwb3J0O1xuICAgICNjdXJyZW50QWdlbnQ7XG4gICAgI2N1cnJlbnRUb29scztcbiAgICAjY29udGV4dDtcbiAgICAjb3V0cHV0R3VhcmRyYWlscyA9IFtdO1xuICAgICNvdXRwdXRHdWFyZHJhaWxTZXR0aW5ncztcbiAgICAjdHJhbnNjcmliZWRUZXh0RGVsdGFzID0ge307XG4gICAgI2hpc3RvcnkgPSBbXTtcbiAgICAjc2hvdWxkSW5jbHVkZUF1ZGlvRGF0YTtcbiAgICAjaW50ZXJydXB0ZWRCeUd1YXJkcmFpbCA9IHt9O1xuICAgICNhdWRpb1N0YXJ0ZWQgPSBmYWxzZTtcbiAgICAvLyBUcmFja3MgYWxsIE1DUCB0b29scyBmZXRjaGVkIHBlciBzZXJ2ZXIgbGFiZWwgKGZyb20gbWNwX2xpc3RfdG9vbHMgcmVzdWx0cykuXG4gICAgI2FsbE1jcFRvb2xzQnlTZXJ2ZXIgPSBuZXcgTWFwKCk7XG4gICAgLy8gVHJhY2tzIGN1cnJlbnRseSBhdmFpbGFibGUgTUNQIHRvb2xzIGJhc2VkIG9uIHRoZSBhY3RpdmUgYWdlbnQncyBjb25maWd1cmVkIHNlcnZlcl9sYWJlbHMuXG4gICAgI2F2YWlsYWJsZU1jcFRvb2xzID0gW107XG4gICAgLy8gS2VlcHMgdHJhY2sgb2YgdGhlIGxhc3QgZnVsbCBzZXNzaW9uIGNvbmZpZyB3ZSBzZW50IChjYW1lbENhc2Uga2V5cykgc28gdGhhdFxuICAgIC8vIHN1YnNlcXVlbnQgdXBkYXRlcyAoZS5nLiBkdXJpbmcgYWdlbnQgaGFuZG9mZnMpIHByZXNlcnZlIHByb3BlcnRpZXMgdGhhdCBhcmVcbiAgICAvLyBub3QgZXhwbGljaXRseSByZWNhbGN1bGF0ZWQgaGVyZSAoc3VjaCBhcyBpbnB1dEF1ZGlvRm9ybWF0LCBvdXRwdXRBdWRpb0Zvcm1hdCxcbiAgICAvLyBtb2RhbGl0aWVzLCBzcGVlZCwgdG9vbENob2ljZSwgdHVybkRldGVjdGlvbiwgZXRjLikuIFdpdGhvdXQgdGhpcywgdXBkYXRpbmdcbiAgICAvLyB0aGUgYWdlbnQgd291bGQgZHJvcCBhdWRpbyBmb3JtYXQgb3ZlcnJpZGVzIChlLmcuIGc3MTFfdWxhdykgYW5kIHJldmVydCB0b1xuICAgIC8vIHRyYW5zcG9ydCBkZWZhdWx0cyBjYXVzaW5nIGlzc3VlcyBmb3IgaW50ZWdyYXRpb25zIGxpa2UgVHdpbGlvLlxuICAgICNsYXN0U2Vzc2lvbkNvbmZpZyA9IGNsb25lRGVmYXVsdFNlc3Npb25Db25maWcoKTtcbiAgICAjYXV0b21hdGljYWxseVRyaWdnZXJSZXNwb25zZUZvck1jcFRvb2xDYWxscyA9IHRydWU7XG4gICAgY29uc3RydWN0b3IoaW5pdGlhbEFnZW50LCBvcHRpb25zID0ge30pIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5pbml0aWFsQWdlbnQgPSBpbml0aWFsQWdlbnQ7XG4gICAgICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG4gICAgICAgIGlmICgodHlwZW9mIG9wdGlvbnMudHJhbnNwb3J0ID09PSAndW5kZWZpbmVkJyAmJiBoYXNXZWJSVENTdXBwb3J0KCkpIHx8XG4gICAgICAgICAgICBvcHRpb25zLnRyYW5zcG9ydCA9PT0gJ3dlYnJ0YycpIHtcbiAgICAgICAgICAgIHRoaXMuI3RyYW5zcG9ydCA9IG5ldyBPcGVuQUlSZWFsdGltZVdlYlJUQygpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKG9wdGlvbnMudHJhbnNwb3J0ID09PSAnd2Vic29ja2V0JyB8fFxuICAgICAgICAgICAgdHlwZW9mIG9wdGlvbnMudHJhbnNwb3J0ID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgdGhpcy4jdHJhbnNwb3J0ID0gbmV3IE9wZW5BSVJlYWx0aW1lV2ViU29ja2V0KCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLiN0cmFuc3BvcnQgPSBvcHRpb25zLnRyYW5zcG9ydDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLiNjdXJyZW50QWdlbnQgPSBpbml0aWFsQWdlbnQ7XG4gICAgICAgIHRoaXMuI2NvbnRleHQgPSBuZXcgUnVuQ29udGV4dCh7XG4gICAgICAgICAgICAuLi4ob3B0aW9ucy5jb250ZXh0ID8/IHt9KSxcbiAgICAgICAgICAgIGhpc3Rvcnk6IHRoaXMuI2hpc3RvcnksXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLiNvdXRwdXRHdWFyZHJhaWxzID0gKG9wdGlvbnMub3V0cHV0R3VhcmRyYWlscyA/PyBbXSkubWFwKGRlZmluZVJlYWx0aW1lT3V0cHV0R3VhcmRyYWlsKTtcbiAgICAgICAgdGhpcy4jb3V0cHV0R3VhcmRyYWlsU2V0dGluZ3MgPSBnZXRSZWFsdGltZUd1YXJkcmFpbFNldHRpbmdzKG9wdGlvbnMub3V0cHV0R3VhcmRyYWlsU2V0dGluZ3MgPz8ge30pO1xuICAgICAgICB0aGlzLiNzaG91bGRJbmNsdWRlQXVkaW9EYXRhID0gb3B0aW9ucy5oaXN0b3J5U3RvcmVBdWRpbyA/PyBmYWxzZTtcbiAgICAgICAgdGhpcy4jYXV0b21hdGljYWxseVRyaWdnZXJSZXNwb25zZUZvck1jcFRvb2xDYWxscyA9XG4gICAgICAgICAgICBvcHRpb25zLmF1dG9tYXRpY2FsbHlUcmlnZ2VyUmVzcG9uc2VGb3JNY3BUb29sQ2FsbHMgPz8gdHJ1ZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIHRyYW5zcG9ydCBsYXllciB1c2VkIGJ5IHRoZSBzZXNzaW9uLlxuICAgICAqL1xuICAgIGdldCB0cmFuc3BvcnQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiN0cmFuc3BvcnQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBjdXJyZW50IGFnZW50IGluIHRoZSBzZXNzaW9uLlxuICAgICAqL1xuICAgIGdldCBjdXJyZW50QWdlbnQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiNjdXJyZW50QWdlbnQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBjdXJyZW50IHVzYWdlIG9mIHRoZSBzZXNzaW9uLlxuICAgICAqL1xuICAgIGdldCB1c2FnZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuI2NvbnRleHQudXNhZ2U7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBjdXJyZW50IGNvbnRleHQgb2YgdGhlIHNlc3Npb24uXG4gICAgICovXG4gICAgZ2V0IGNvbnRleHQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiNjb250ZXh0O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBXaGV0aGVyIHRoZSBzZXNzaW9uIGlzIG11dGVkLiBNaWdodCBiZSBgbnVsbGAgaWYgdGhlIHVuZGVybHlpbmcgdHJhbnNwb3J0IGxheWVyIGRvZXMgbm90XG4gICAgICogc3VwcG9ydCBtdXRpbmcuXG4gICAgICovXG4gICAgZ2V0IG11dGVkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy4jdHJhbnNwb3J0Lm11dGVkO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgaGlzdG9yeSBvZiB0aGUgc2Vzc2lvbi5cbiAgICAgKi9cbiAgICBnZXQgaGlzdG9yeSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuI2hpc3Rvcnk7XG4gICAgfVxuICAgIGdldCBhdmFpbGFibGVNY3BUb29scygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuI2F2YWlsYWJsZU1jcFRvb2xzO1xuICAgIH1cbiAgICBhc3luYyAjc2V0Q3VycmVudEFnZW50KGFnZW50KSB7XG4gICAgICAgIHRoaXMuI2N1cnJlbnRBZ2VudCA9IGFnZW50O1xuICAgICAgICBjb25zdCBoYW5kb2ZmcyA9IGF3YWl0IHRoaXMuI2N1cnJlbnRBZ2VudC5nZXRFbmFibGVkSGFuZG9mZnModGhpcy4jY29udGV4dCk7XG4gICAgICAgIGNvbnN0IGhhbmRvZmZUb29scyA9IGhhbmRvZmZzLm1hcCgoaGFuZG9mZikgPT4gaGFuZG9mZi5nZXRIYW5kb2ZmQXNGdW5jdGlvblRvb2woKSk7XG4gICAgICAgIGNvbnN0IGFsbFRvb2xzID0gKGF3YWl0IHRoaXMuI2N1cnJlbnRBZ2VudC5nZXRBbGxUb29scyh0aGlzLiNjb250ZXh0KSlcbiAgICAgICAgICAgIC5maWx0ZXIoaXNWYWxpZFJlYWx0aW1lVG9vbClcbiAgICAgICAgICAgIC5tYXAodG9SZWFsdGltZVRvb2xEZWZpbml0aW9uKTtcbiAgICAgICAgY29uc3QgaGFzVG9vbHNEZWZpbmVkID0gdHlwZW9mIHRoaXMuI2N1cnJlbnRBZ2VudC50b29scyAhPT0gJ3VuZGVmaW5lZCcgfHxcbiAgICAgICAgICAgIHR5cGVvZiB0aGlzLiNjdXJyZW50QWdlbnQubWNwU2VydmVycyAhPT0gJ3VuZGVmaW5lZCc7XG4gICAgICAgIGNvbnN0IGhhc0hhbmRvZmZzRGVmaW5lZCA9IGhhbmRvZmZzLmxlbmd0aCA+IDA7XG4gICAgICAgIHRoaXMuI2N1cnJlbnRUb29scyA9XG4gICAgICAgICAgICBoYXNUb29sc0RlZmluZWQgfHwgaGFzSGFuZG9mZnNEZWZpbmVkXG4gICAgICAgICAgICAgICAgPyBbLi4uYWxsVG9vbHMsIC4uLmhhbmRvZmZUb29sc11cbiAgICAgICAgICAgICAgICA6IHVuZGVmaW5lZDtcbiAgICAgICAgLy8gUmVjb21wdXRlIGN1cnJlbnRseSBhdmFpbGFibGUgTUNQIHRvb2xzIGJhc2VkIG9uIHRoZSBuZXcgYWdlbnQncyBhY3RpdmUgc2VydmVyIGxhYmVscy5cbiAgICAgICAgdGhpcy4jdXBkYXRlQXZhaWxhYmxlTWNwVG9vbHMoKTtcbiAgICB9XG4gICAgYXN5bmMgI2dldFNlc3Npb25Db25maWcoYWRkaXRpb25hbENvbmZpZyA9IHt9KSB7XG4gICAgICAgIGNvbnN0IG92ZXJyaWRlc0NvbmZpZyA9IGFkZGl0aW9uYWxDb25maWcgPz8ge307XG4gICAgICAgIGNvbnN0IG9wdGlvbnNDb25maWcgPSB0aGlzLm9wdGlvbnMuY29uZmlnID8/IHt9O1xuICAgICAgICBjb25zdCBpbnN0cnVjdGlvbnMgPSBhd2FpdCB0aGlzLiNjdXJyZW50QWdlbnQuZ2V0U3lzdGVtUHJvbXB0KHRoaXMuI2NvbnRleHQpO1xuICAgICAgICBjb25zdCBnZXRBdWRpb091dHB1dFZvaWNlT3ZlcnJpZGUgPSAoY29uZmlnKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBhdWRpb0NvbmZpZyA9IGNvbmZpZ1xuICAgICAgICAgICAgICAgIC5hdWRpbztcbiAgICAgICAgICAgIHJldHVybiBhdWRpb0NvbmZpZz8ub3V0cHV0Py52b2ljZTtcbiAgICAgICAgfTtcbiAgICAgICAgLy8gUmVhbHRpbWUgZXhwZWN0cyB0cmFjaW5nIHRvIGJlIGV4cGxpY2l0bHkgbnVsbCB0byBkaXNhYmxlIGl0OyBsZWF2aW5nIHRoZSBwcmV2aW91cyBjb25maWdcbiAgICAgICAgLy8gaW4gcGxhY2Ugd291bGQgb3RoZXJ3aXNlIGNvbnRpbnVlIGVtaXR0aW5nIHNwYW5zLlxuICAgICAgICBjb25zdCB0cmFjaW5nQ29uZmlnID0gdGhpcy5vcHRpb25zXG4gICAgICAgICAgICAudHJhY2luZ0Rpc2FibGVkXG4gICAgICAgICAgICA/IG51bGxcbiAgICAgICAgICAgIDogdGhpcy5vcHRpb25zLndvcmtmbG93TmFtZVxuICAgICAgICAgICAgICAgID8ge1xuICAgICAgICAgICAgICAgICAgICB3b3JrZmxvd19uYW1lOiB0aGlzLm9wdGlvbnMud29ya2Zsb3dOYW1lLFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICA6ICdhdXRvJztcbiAgICAgICAgaWYgKHRyYWNpbmdDb25maWcgIT09IG51bGwgJiYgdHJhY2luZ0NvbmZpZyAhPT0gJ2F1dG8nKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5vcHRpb25zLmdyb3VwSWQpIHtcbiAgICAgICAgICAgICAgICB0cmFjaW5nQ29uZmlnLmdyb3VwX2lkID0gdGhpcy5vcHRpb25zLmdyb3VwSWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5vcHRpb25zLnRyYWNlTWV0YWRhdGEpIHtcbiAgICAgICAgICAgICAgICB0cmFjaW5nQ29uZmlnLm1ldGFkYXRhID0gdGhpcy5vcHRpb25zLnRyYWNlTWV0YWRhdGE7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodGhpcy5vcHRpb25zLmdyb3VwSWQgfHwgdGhpcy5vcHRpb25zLnRyYWNlTWV0YWRhdGEpIHtcbiAgICAgICAgICAgIGxvZ2dlci53YXJuKCdJbiBvcmRlciB0byBzZXQgdHJhY2VNZXRhZGF0YSBvciBhIGdyb3VwSWQgeW91IG5lZWQgdG8gc3BlY2lmeSBhIHdvcmtmbG93TmFtZS4nKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBhdWRpb091dHB1dFZvaWNlT3ZlcnJpZGUgPSBnZXRBdWRpb091dHB1dFZvaWNlT3ZlcnJpZGUob3ZlcnJpZGVzQ29uZmlnKSA/P1xuICAgICAgICAgICAgZ2V0QXVkaW9PdXRwdXRWb2ljZU92ZXJyaWRlKG9wdGlvbnNDb25maWcpO1xuICAgICAgICBjb25zdCB0b3BMZXZlbFZvaWNlT3ZlcnJpZGUgPSBvdmVycmlkZXNDb25maWcudm9pY2UgPz8gb3B0aW9uc0NvbmZpZy52b2ljZTtcbiAgICAgICAgY29uc3QgcmVzb2x2ZWRWb2ljZSA9IHR5cGVvZiBhdWRpb091dHB1dFZvaWNlT3ZlcnJpZGUgIT09ICd1bmRlZmluZWQnXG4gICAgICAgICAgICA/IGF1ZGlvT3V0cHV0Vm9pY2VPdmVycmlkZVxuICAgICAgICAgICAgOiB0eXBlb2YgdG9wTGV2ZWxWb2ljZU92ZXJyaWRlICE9PSAndW5kZWZpbmVkJ1xuICAgICAgICAgICAgICAgID8gdG9wTGV2ZWxWb2ljZU92ZXJyaWRlXG4gICAgICAgICAgICAgICAgOiB0aGlzLiNjdXJyZW50QWdlbnQudm9pY2U7XG4gICAgICAgIC8vIFN0YXJ0IGZyb20gYW55IHByZXZpb3VzbHktc2VudCBjb25maWcgKHNvIHdlIHByZXNlcnZlIHZhbHVlcyBsaWtlIGF1ZGlvIGZvcm1hdHMpXG4gICAgICAgIC8vIGFuZCB0aGUgb3JpZ2luYWwgb3B0aW9ucy5jb25maWcgcHJvdmlkZWQgYnkgdGhlIHVzZXIuIFByZWZlcmVuY2Ugb3JkZXI6XG4gICAgICAgIC8vIDEuIExhc3Qgc2Vzc2lvbiBjb25maWcgd2Ugc2VudCAoI2xhc3RTZXNzaW9uQ29uZmlnKVxuICAgICAgICAvLyAyLiBPcmlnaW5hbCBvcHRpb25zLmNvbmZpZ1xuICAgICAgICAvLyAzLiBBZGRpdGlvbmFsIGNvbmZpZyBwYXNzZWQgaW50byB0aGlzIGludm9jYXRpb24gKGV4cGxpY2l0IG92ZXJyaWRlcylcbiAgICAgICAgLy8gRmluYWxseSB3ZSBvdmVyd3JpdGUgZHluYW1pYyBmaWVsZHMgKGluc3RydWN0aW9ucywgdm9pY2UsIG1vZGVsLCB0b29scywgdHJhY2luZylcbiAgICAgICAgLy8gdG8gZW5zdXJlIHRoZXkgYWx3YXlzIHJlZmxlY3QgdGhlIGN1cnJlbnQgYWdlbnQgJiBydW50aW1lIHN0YXRlLlxuICAgICAgICBjb25zdCBiYXNlID0ge1xuICAgICAgICAgICAgLi4uKHRoaXMuI2xhc3RTZXNzaW9uQ29uZmlnID8/IHt9KSxcbiAgICAgICAgICAgIC4uLm9wdGlvbnNDb25maWcsXG4gICAgICAgICAgICAuLi5vdmVycmlkZXNDb25maWcsXG4gICAgICAgIH07XG4gICAgICAgIC8vIE5vdGU6IENlcnRhaW4gZmllbGRzIGNhbm5vdCBiZSB1cGRhdGVkIGFmdGVyIHRoZSBzZXNzaW9uIGJlZ2lucywgc3VjaCBhcyB2b2ljZSBhbmQgbW9kZWxcbiAgICAgICAgY29uc3QgZnVsbENvbmZpZyA9IHtcbiAgICAgICAgICAgIC4uLmJhc2UsXG4gICAgICAgICAgICBpbnN0cnVjdGlvbnMsXG4gICAgICAgICAgICB2b2ljZTogcmVzb2x2ZWRWb2ljZSxcbiAgICAgICAgICAgIG1vZGVsOiB0aGlzLm9wdGlvbnMubW9kZWwsXG4gICAgICAgICAgICB0b29sczogdGhpcy4jY3VycmVudFRvb2xzLFxuICAgICAgICAgICAgdHJhY2luZzogdHJhY2luZ0NvbmZpZyxcbiAgICAgICAgICAgIHByb21wdDogdHlwZW9mIHRoaXMuI2N1cnJlbnRBZ2VudC5wcm9tcHQgPT09ICdmdW5jdGlvbidcbiAgICAgICAgICAgICAgICA/IGF3YWl0IHRoaXMuI2N1cnJlbnRBZ2VudC5wcm9tcHQodGhpcy4jY29udGV4dCwgdGhpcy4jY3VycmVudEFnZW50KVxuICAgICAgICAgICAgICAgIDogdGhpcy4jY3VycmVudEFnZW50LnByb21wdCxcbiAgICAgICAgfTtcbiAgICAgICAgLy8gVXBkYXRlIG91ciBjYWNoZSBzbyBzdWJzZXF1ZW50IHVwZGF0ZXMgaW5oZXJpdCB0aGUgZnVsbCBzZXQgaW5jbHVkaW5nIGFueVxuICAgICAgICAvLyBkeW5hbWljIGZpZWxkcyB3ZSBqdXN0IG92ZXJ3cm90ZS5cbiAgICAgICAgdGhpcy4jbGFzdFNlc3Npb25Db25maWcgPSBmdWxsQ29uZmlnO1xuICAgICAgICByZXR1cm4gZnVsbENvbmZpZztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ29tcHV0ZSB0aGUgaW5pdGlhbCBzZXNzaW9uIGNvbmZpZyB0aGF0IHRoZSBjdXJyZW50IHNlc3Npb24gd2lsbCB1c2Ugd2hlbiBjb25uZWN0aW5nLlxuICAgICAqXG4gICAgICogVGhpcyBtaXJyb3JzIHRoZSBjb25maWd1cmF0aW9uIHBheWxvYWQgd2Ugc2VuZCBkdXJpbmcgYGNvbm5lY3RgLCBpbmNsdWRpbmcgZHluYW1pYyB2YWx1ZXNcbiAgICAgKiBzdWNoIGFzIHRoZSB1cHN0cmVhbSBhZ2VudCBpbnN0cnVjdGlvbnMsIHRvb2wgZGVmaW5pdGlvbnMsIGFuZCBwcm9tcHQgY29udGVudCBnZW5lcmF0ZWQgYXRcbiAgICAgKiBydW50aW1lLiBLZWVwaW5nIHRoaXMgaGVscGVyIGV4cG9zZWQgYWxsb3dzIHRyYW5zcG9ydHMgb3Igb3JjaGVzdHJhdGlvbiBsYXllcnMgdG8gcHJlY29tcHV0ZVxuICAgICAqIGEgQ2FsbEFjY2VwdC1jb21wYXRpYmxlIHBheWxvYWQgd2l0aG91dCBvcGVuaW5nIGEgc29ja2V0LlxuICAgICAqXG4gICAgICogQHBhcmFtIG92ZXJyaWRlcyAtIEFkZGl0aW9uYWwgY29uZmlnIG92ZXJyaWRlcyBhcHBsaWVkIG9uIHRvcCBvZiB0aGUgc2Vzc2lvbiBvcHRpb25zLlxuICAgICAqL1xuICAgIGFzeW5jIGdldEluaXRpYWxTZXNzaW9uQ29uZmlnKG92ZXJyaWRlcyA9IHt9KSB7XG4gICAgICAgIGF3YWl0IHRoaXMuI3NldEN1cnJlbnRBZ2VudCh0aGlzLmluaXRpYWxBZ2VudCk7XG4gICAgICAgIHJldHVybiB0aGlzLiNnZXRTZXNzaW9uQ29uZmlnKHtcbiAgICAgICAgICAgIC4uLih0aGlzLm9wdGlvbnMuY29uZmlnID8/IHt9KSxcbiAgICAgICAgICAgIC4uLihvdmVycmlkZXMgPz8ge30pLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ29udmVuaWVuY2UgaGVscGVyIHRvIGNvbXB1dGUgdGhlIGluaXRpYWwgc2Vzc2lvbiBjb25maWcgd2l0aG91dCBtYW51YWxseSBpbnN0YW50aWF0aW5nIGFuZCBjb25uZWN0aW5nIGEgc2Vzc2lvbi5cbiAgICAgKlxuICAgICAqIFRoaXMgaXMgcHJpbWFyaWx5IHVzZWZ1bCBmb3IgaW50ZWdyYXRpb25zIHRoYXQgbXVzdCBwcm92aWRlIHRoZSBzZXNzaW9uIGNvbmZpZ3VyYXRpb24gdG8gYVxuICAgICAqIHRoaXJkIHBhcnR5IChmb3IgZXhhbXBsZSB0aGUgU0lQIGBjYWxscy5hY2NlcHRgIGVuZHBvaW50KSBiZWZvcmUgdGhlIGFjdHVhbCByZWFsdGltZSBzZXNzaW9uXG4gICAgICogaXMgYXR0YWNoZWQuIFRoZSBoZWxwZXIgaW5zdGFudGlhdGVzIGEgdGhyb3dhd2F5IHNlc3Npb24gc28gYWxsIGFnZW50LWRyaXZlbiBkeW5hbWljIGZpZWxkc1xuICAgICAqIHJlc29sdmUgaW4gZXhhY3RseSB0aGUgc2FtZSB3YXkgYXMgdGhlIGxpdmUgc2Vzc2lvbiBwYXRoLlxuICAgICAqXG4gICAgICogQHBhcmFtIGFnZW50IC0gVGhlIHN0YXJ0aW5nIGFnZW50IGZvciB0aGUgc2Vzc2lvbi5cbiAgICAgKiBAcGFyYW0gb3B0aW9ucyAtIFNlc3Npb24gb3B0aW9ucyB1c2VkIHRvIHNlZWQgdGhlIGNvbmZpZyBjYWxjdWxhdGlvbi5cbiAgICAgKiBAcGFyYW0gb3ZlcnJpZGVzIC0gQWRkaXRpb25hbCBjb25maWcgb3ZlcnJpZGVzIGFwcGxpZWQgb24gdG9wIG9mIHRoZSBwcm92aWRlZCBvcHRpb25zLlxuICAgICAqL1xuICAgIHN0YXRpYyBhc3luYyBjb21wdXRlSW5pdGlhbFNlc3Npb25Db25maWcoYWdlbnQsIG9wdGlvbnMgPSB7fSwgb3ZlcnJpZGVzID0ge30pIHtcbiAgICAgICAgY29uc3Qgc2Vzc2lvbiA9IG5ldyBSZWFsdGltZVNlc3Npb24oYWdlbnQsIG9wdGlvbnMpO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmV0dXJuIGF3YWl0IHNlc3Npb24uZ2V0SW5pdGlhbFNlc3Npb25Db25maWcob3ZlcnJpZGVzKTtcbiAgICAgICAgfVxuICAgICAgICBmaW5hbGx5IHtcbiAgICAgICAgICAgIHNlc3Npb24uY2xvc2UoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyB1cGRhdGVBZ2VudChuZXdBZ2VudCkge1xuICAgICAgICB0aGlzLiNjdXJyZW50QWdlbnQuZW1pdCgnYWdlbnRfaGFuZG9mZicsIHRoaXMuI2NvbnRleHQsIG5ld0FnZW50KTtcbiAgICAgICAgdGhpcy5lbWl0KCdhZ2VudF9oYW5kb2ZmJywgdGhpcy4jY29udGV4dCwgdGhpcy4jY3VycmVudEFnZW50LCBuZXdBZ2VudCk7XG4gICAgICAgIGF3YWl0IHRoaXMuI3NldEN1cnJlbnRBZ2VudChuZXdBZ2VudCk7XG4gICAgICAgIGF3YWl0IHRoaXMuI3RyYW5zcG9ydC51cGRhdGVTZXNzaW9uQ29uZmlnKGF3YWl0IHRoaXMuI2dldFNlc3Npb25Db25maWcoKSk7XG4gICAgICAgIHJldHVybiBuZXdBZ2VudDtcbiAgICB9XG4gICAgYXN5bmMgI2hhbmRsZUhhbmRvZmYodG9vbENhbGwsIGhhbmRvZmYpIHtcbiAgICAgICAgY29uc3QgbmV3QWdlbnQgPSAoYXdhaXQgaGFuZG9mZi5vbkludm9rZUhhbmRvZmYodGhpcy4jY29udGV4dCwgdG9vbENhbGwuYXJndW1lbnRzKSk7XG4gICAgICAgIHRoaXMuI2N1cnJlbnRBZ2VudC5lbWl0KCdhZ2VudF9oYW5kb2ZmJywgdGhpcy4jY29udGV4dCwgbmV3QWdlbnQpO1xuICAgICAgICB0aGlzLmVtaXQoJ2FnZW50X2hhbmRvZmYnLCB0aGlzLiNjb250ZXh0LCB0aGlzLiNjdXJyZW50QWdlbnQsIG5ld0FnZW50KTtcbiAgICAgICAgLy8gdXBkYXRlIHNlc3Npb24gd2l0aCBuZXcgYWdlbnRcbiAgICAgICAgYXdhaXQgdGhpcy4jc2V0Q3VycmVudEFnZW50KG5ld0FnZW50KTtcbiAgICAgICAgYXdhaXQgdGhpcy4jdHJhbnNwb3J0LnVwZGF0ZVNlc3Npb25Db25maWcoYXdhaXQgdGhpcy4jZ2V0U2Vzc2lvbkNvbmZpZygpKTtcbiAgICAgICAgY29uc3Qgb3V0cHV0ID0gZ2V0VHJhbnNmZXJNZXNzYWdlKG5ld0FnZW50KTtcbiAgICAgICAgdGhpcy4jdHJhbnNwb3J0LnNlbmRGdW5jdGlvbkNhbGxPdXRwdXQodG9vbENhbGwsIG91dHB1dCwgdHJ1ZSk7XG4gICAgICAgIHJldHVybiBuZXdBZ2VudDtcbiAgICB9XG4gICAgYXN5bmMgI2hhbmRsZUZ1bmN0aW9uVG9vbENhbGwodG9vbENhbGwsIHRvb2wpIHtcbiAgICAgICAgdGhpcy4jY29udGV4dC5jb250ZXh0Lmhpc3RvcnkgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHRoaXMuI2hpc3RvcnkpKTsgLy8gZGVlcCBjb3B5IG9mIHRoZSBoaXN0b3J5XG4gICAgICAgIGxldCBwYXJzZWRBcmdzID0gdG9vbENhbGwuYXJndW1lbnRzO1xuICAgICAgICBpZiAodG9vbC5wYXJhbWV0ZXJzKSB7XG4gICAgICAgICAgICBpZiAoaXNab2RPYmplY3QodG9vbC5wYXJhbWV0ZXJzKSkge1xuICAgICAgICAgICAgICAgIHBhcnNlZEFyZ3MgPSB0b29sLnBhcmFtZXRlcnMucGFyc2UocGFyc2VkQXJncyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBwYXJzZWRBcmdzID0gSlNPTi5wYXJzZShwYXJzZWRBcmdzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjb25zdCBuZWVkc0FwcHJvdmFsID0gYXdhaXQgdG9vbC5uZWVkc0FwcHJvdmFsKHRoaXMuI2NvbnRleHQsIHBhcnNlZEFyZ3MsIHRvb2xDYWxsLmNhbGxJZCk7XG4gICAgICAgIGlmIChuZWVkc0FwcHJvdmFsKSB7XG4gICAgICAgICAgICBjb25zdCBhcHByb3ZhbCA9IHRoaXMuY29udGV4dC5pc1Rvb2xBcHByb3ZlZCh7XG4gICAgICAgICAgICAgICAgdG9vbE5hbWU6IHRvb2wubmFtZSxcbiAgICAgICAgICAgICAgICBjYWxsSWQ6IHRvb2xDYWxsLmNhbGxJZCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKGFwcHJvdmFsID09PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgnYWdlbnRfdG9vbF9zdGFydCcsIHRoaXMuI2NvbnRleHQsIHRoaXMuI2N1cnJlbnRBZ2VudCwgdG9vbCwge1xuICAgICAgICAgICAgICAgICAgICB0b29sQ2FsbCxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB0aGlzLiNjdXJyZW50QWdlbnQuZW1pdCgnYWdlbnRfdG9vbF9zdGFydCcsIHRoaXMuI2NvbnRleHQsIHRvb2wsIHtcbiAgICAgICAgICAgICAgICAgICAgdG9vbENhbGwsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gJ1Rvb2wgZXhlY3V0aW9uIHdhcyBub3QgYXBwcm92ZWQuJztcbiAgICAgICAgICAgICAgICB0aGlzLiN0cmFuc3BvcnQuc2VuZEZ1bmN0aW9uQ2FsbE91dHB1dCh0b29sQ2FsbCwgcmVzdWx0LCB0cnVlKTtcbiAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ2FnZW50X3Rvb2xfZW5kJywgdGhpcy4jY29udGV4dCwgdGhpcy4jY3VycmVudEFnZW50LCB0b29sLCByZXN1bHQsIHsgdG9vbENhbGwgfSk7XG4gICAgICAgICAgICAgICAgdGhpcy4jY3VycmVudEFnZW50LmVtaXQoJ2FnZW50X3Rvb2xfZW5kJywgdGhpcy4jY29udGV4dCwgdG9vbCwgcmVzdWx0LCB7XG4gICAgICAgICAgICAgICAgICAgIHRvb2xDYWxsLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHR5cGVvZiBhcHByb3ZhbCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ3Rvb2xfYXBwcm92YWxfcmVxdWVzdGVkJywgdGhpcy4jY29udGV4dCwgdGhpcy4jY3VycmVudEFnZW50LCB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdmdW5jdGlvbl9hcHByb3ZhbCcsXG4gICAgICAgICAgICAgICAgICAgIHRvb2wsXG4gICAgICAgICAgICAgICAgICAgIGFwcHJvdmFsSXRlbTogbmV3IFJ1blRvb2xBcHByb3ZhbEl0ZW0odG9vbENhbGwsIHRoaXMuI2N1cnJlbnRBZ2VudCksXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMuZW1pdCgnYWdlbnRfdG9vbF9zdGFydCcsIHRoaXMuI2NvbnRleHQsIHRoaXMuI2N1cnJlbnRBZ2VudCwgdG9vbCwge1xuICAgICAgICAgICAgdG9vbENhbGwsXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLiNjdXJyZW50QWdlbnQuZW1pdCgnYWdlbnRfdG9vbF9zdGFydCcsIHRoaXMuI2NvbnRleHQsIHRvb2wsIHtcbiAgICAgICAgICAgIHRvb2xDYWxsLFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy4jY29udGV4dC5jb250ZXh0Lmhpc3RvcnkgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHRoaXMuI2hpc3RvcnkpKTsgLy8gZGVlcCBjb3B5IG9mIHRoZSBoaXN0b3J5XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRvb2wuaW52b2tlKHRoaXMuI2NvbnRleHQsIHRvb2xDYWxsLmFyZ3VtZW50cywge1xuICAgICAgICAgICAgdG9vbENhbGwsXG4gICAgICAgIH0pO1xuICAgICAgICBsZXQgc3RyaW5nUmVzdWx0O1xuICAgICAgICBpZiAoaXNCYWNrZ3JvdW5kUmVzdWx0KHJlc3VsdCkpIHtcbiAgICAgICAgICAgIC8vIERvbid0IGdlbmVyYXRlIGEgbmV3IHJlc3BvbnNlLCBqdXN0IHNlbmQgdGhlIHJlc3VsdFxuICAgICAgICAgICAgc3RyaW5nUmVzdWx0ID0gdG9TbWFydFN0cmluZyhyZXN1bHQuY29udGVudCk7XG4gICAgICAgICAgICB0aGlzLiN0cmFuc3BvcnQuc2VuZEZ1bmN0aW9uQ2FsbE91dHB1dCh0b29sQ2FsbCwgc3RyaW5nUmVzdWx0LCBmYWxzZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBzdHJpbmdSZXN1bHQgPSB0b1NtYXJ0U3RyaW5nKHJlc3VsdCk7XG4gICAgICAgICAgICB0aGlzLiN0cmFuc3BvcnQuc2VuZEZ1bmN0aW9uQ2FsbE91dHB1dCh0b29sQ2FsbCwgc3RyaW5nUmVzdWx0LCB0cnVlKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmVtaXQoJ2FnZW50X3Rvb2xfZW5kJywgdGhpcy4jY29udGV4dCwgdGhpcy4jY3VycmVudEFnZW50LCB0b29sLCBzdHJpbmdSZXN1bHQsIHsgdG9vbENhbGwgfSk7XG4gICAgICAgIHRoaXMuI2N1cnJlbnRBZ2VudC5lbWl0KCdhZ2VudF90b29sX2VuZCcsIHRoaXMuI2NvbnRleHQsIHRvb2wsIHN0cmluZ1Jlc3VsdCwgeyB0b29sQ2FsbCB9KTtcbiAgICB9XG4gICAgYXN5bmMgI2hhbmRsZUZ1bmN0aW9uQ2FsbCh0b29sQ2FsbCkge1xuICAgICAgICBjb25zdCBlbmFibGVkSGFuZG9mZnMgPSBhd2FpdCB0aGlzLiNjdXJyZW50QWdlbnQuZ2V0RW5hYmxlZEhhbmRvZmZzKHRoaXMuI2NvbnRleHQpO1xuICAgICAgICBjb25zdCBoYW5kb2ZmTWFwID0gbmV3IE1hcChlbmFibGVkSGFuZG9mZnMubWFwKChoYW5kb2ZmKSA9PiBbaGFuZG9mZi50b29sTmFtZSwgaGFuZG9mZl0pKTtcbiAgICAgICAgY29uc3QgYWxsVG9vbHMgPSBhd2FpdCB0aGlzLiNjdXJyZW50QWdlbnQuZ2V0QWxsVG9vbHModGhpcy4jY29udGV4dCk7XG4gICAgICAgIGNvbnN0IGZ1bmN0aW9uVG9vbE1hcCA9IG5ldyBNYXAoYWxsVG9vbHMubWFwKCh0b29sKSA9PiBbdG9vbC5uYW1lLCB0b29sXSkpO1xuICAgICAgICBjb25zdCBwb3NzaWJsZUhhbmRvZmYgPSBoYW5kb2ZmTWFwLmdldCh0b29sQ2FsbC5uYW1lKTtcbiAgICAgICAgaWYgKHBvc3NpYmxlSGFuZG9mZikge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy4jaGFuZGxlSGFuZG9mZih0b29sQ2FsbCwgcG9zc2libGVIYW5kb2ZmKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IGZ1bmN0aW9uVG9vbCA9IGZ1bmN0aW9uVG9vbE1hcC5nZXQodG9vbENhbGwubmFtZSk7XG4gICAgICAgICAgICBpZiAoZnVuY3Rpb25Ub29sICYmIGZ1bmN0aW9uVG9vbC50eXBlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy4jaGFuZGxlRnVuY3Rpb25Ub29sQ2FsbCh0b29sQ2FsbCwgZnVuY3Rpb25Ub29sKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBNb2RlbEJlaGF2aW9yRXJyb3IoYFRvb2wgJHt0b29sQ2FsbC5uYW1lfSBub3QgZm91bmRgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyAjcnVuT3V0cHV0R3VhcmRyYWlscyhvdXRwdXQsIHJlc3BvbnNlSWQsIGl0ZW1JZCkge1xuICAgICAgICBpZiAodGhpcy4jb3V0cHV0R3VhcmRyYWlscy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBndWFyZHJhaWxBcmdzID0ge1xuICAgICAgICAgICAgYWdlbnQ6IHRoaXMuI2N1cnJlbnRBZ2VudCxcbiAgICAgICAgICAgIGFnZW50T3V0cHV0OiBvdXRwdXQsXG4gICAgICAgICAgICBjb250ZXh0OiB0aGlzLiNjb250ZXh0LFxuICAgICAgICB9O1xuICAgICAgICBjb25zdCByZXN1bHRzID0gYXdhaXQgUHJvbWlzZS5hbGwodGhpcy4jb3V0cHV0R3VhcmRyYWlscy5tYXAoKGd1YXJkcmFpbCkgPT4gZ3VhcmRyYWlsLnJ1bihndWFyZHJhaWxBcmdzKSkpO1xuICAgICAgICBjb25zdCBmaXJzdFRyaXB3aXJlVHJpZ2dlcmVkID0gcmVzdWx0cy5maW5kKChyZXN1bHQpID0+IHJlc3VsdC5vdXRwdXQudHJpcHdpcmVUcmlnZ2VyZWQpO1xuICAgICAgICBpZiAoZmlyc3RUcmlwd2lyZVRyaWdnZXJlZCkge1xuICAgICAgICAgICAgLy8gdGhpcyBlbnN1cmVzIHRoYXQgaWYgb25lIGd1YXJkcmFpbCBhbHJlYWR5IHRyaXBzIGFuZCB3ZSBhcmUgaW4gdGhlIG1pZGRsZSBvZiBhbm90aGVyXG4gICAgICAgICAgICAvLyBndWFyZHJhaWwgcnVuLCB3ZSBkb24ndCB0cmlwIGFnYWluXG4gICAgICAgICAgICBpZiAodGhpcy4jaW50ZXJydXB0ZWRCeUd1YXJkcmFpbFtyZXNwb25zZUlkXSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuI2ludGVycnVwdGVkQnlHdWFyZHJhaWxbcmVzcG9uc2VJZF0gPSB0cnVlO1xuICAgICAgICAgICAgY29uc3QgZXJyb3IgPSBuZXcgT3V0cHV0R3VhcmRyYWlsVHJpcHdpcmVUcmlnZ2VyZWQoYE91dHB1dCBndWFyZHJhaWwgdHJpZ2dlcmVkOiAke0pTT04uc3RyaW5naWZ5KGZpcnN0VHJpcHdpcmVUcmlnZ2VyZWQub3V0cHV0Lm91dHB1dEluZm8pfWAsIGZpcnN0VHJpcHdpcmVUcmlnZ2VyZWQpO1xuICAgICAgICAgICAgdGhpcy5lbWl0KCdndWFyZHJhaWxfdHJpcHBlZCcsIHRoaXMuI2NvbnRleHQsIHRoaXMuI2N1cnJlbnRBZ2VudCwgZXJyb3IsIHtcbiAgICAgICAgICAgICAgICBpdGVtSWQsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMuaW50ZXJydXB0KCk7XG4gICAgICAgICAgICBjb25zdCBmZWVkYmFja1RleHQgPSBnZXRSZWFsdGltZUd1YXJkcmFpbEZlZWRiYWNrTWVzc2FnZShmaXJzdFRyaXB3aXJlVHJpZ2dlcmVkKTtcbiAgICAgICAgICAgIHRoaXMuc2VuZE1lc3NhZ2UoZmVlZGJhY2tUZXh0KTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgIH1cbiAgICAjc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgICAgIHRoaXMuI3RyYW5zcG9ydC5vbignKicsIChldmVudCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5lbWl0KCd0cmFuc3BvcnRfZXZlbnQnLCBldmVudCk7XG4gICAgICAgICAgICAvLyBIYW5kbGUgY29tcGxldGVkIHVzZXIgdHJhbnNjcmlwdGlvbiBldmVudHNcbiAgICAgICAgICAgIGlmIChldmVudC50eXBlID09PSAnY29udmVyc2F0aW9uLml0ZW0uaW5wdXRfYXVkaW9fdHJhbnNjcmlwdGlvbi5jb21wbGV0ZWQnKSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY29tcGxldGVkRXZlbnQgPSBldmVudDtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy4jaGlzdG9yeSA9IHVwZGF0ZVJlYWx0aW1lSGlzdG9yeSh0aGlzLiNoaXN0b3J5LCBjb21wbGV0ZWRFdmVudCwgdGhpcy4jc2hvdWxkSW5jbHVkZUF1ZGlvRGF0YSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuI2NvbnRleHQuY29udGV4dC5oaXN0b3J5ID0gdGhpcy4jaGlzdG9yeTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5lbWl0KCdoaXN0b3J5X3VwZGF0ZWQnLCB0aGlzLiNoaXN0b3J5KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ2Vycm9yJywge1xuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2Vycm9yJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yOiBlcnIsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuI3RyYW5zcG9ydC5vbignbWNwX3Rvb2xzX2xpc3RlZCcsICh7IHNlcnZlckxhYmVsLCB0b29scyB9KSA9PiB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHRoaXMuI2FsbE1jcFRvb2xzQnlTZXJ2ZXIuc2V0KHNlcnZlckxhYmVsLCB0b29scyA/PyBbXSk7XG4gICAgICAgICAgICAgICAgdGhpcy4jdXBkYXRlQXZhaWxhYmxlTWNwVG9vbHMoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ2Vycm9yJywgeyB0eXBlOiAnZXJyb3InLCBlcnJvcjogZXJyIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy4jdHJhbnNwb3J0Lm9uKCdhdWRpbycsIChldmVudCkgPT4ge1xuICAgICAgICAgICAgaWYgKCF0aGlzLiNhdWRpb1N0YXJ0ZWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLiNhdWRpb1N0YXJ0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgnYXVkaW9fc3RhcnQnLCB0aGlzLiNjb250ZXh0LCB0aGlzLiNjdXJyZW50QWdlbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5lbWl0KCdhdWRpbycsIGV2ZW50KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuI3RyYW5zcG9ydC5vbigndHVybl9zdGFydGVkJywgKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy4jYXVkaW9TdGFydGVkID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLmVtaXQoJ2FnZW50X3N0YXJ0JywgdGhpcy4jY29udGV4dCwgdGhpcy4jY3VycmVudEFnZW50KTtcbiAgICAgICAgICAgIHRoaXMuI2N1cnJlbnRBZ2VudC5lbWl0KCdhZ2VudF9zdGFydCcsIHRoaXMuI2NvbnRleHQsIHRoaXMuI2N1cnJlbnRBZ2VudCk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLiN0cmFuc3BvcnQub24oJ3R1cm5fZG9uZScsIChldmVudCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgaXRlbSA9IGV2ZW50LnJlc3BvbnNlLm91dHB1dFtldmVudC5yZXNwb25zZS5vdXRwdXQubGVuZ3RoIC0gMV07XG4gICAgICAgICAgICBjb25zdCB0ZXh0T3V0cHV0ID0gZ2V0TGFzdFRleHRGcm9tQXVkaW9PdXRwdXRNZXNzYWdlKGl0ZW0pID8/ICcnO1xuICAgICAgICAgICAgY29uc3QgaXRlbUlkID0gaXRlbT8uaWQgPz8gJyc7XG4gICAgICAgICAgICB0aGlzLmVtaXQoJ2FnZW50X2VuZCcsIHRoaXMuI2NvbnRleHQsIHRoaXMuI2N1cnJlbnRBZ2VudCwgdGV4dE91dHB1dCk7XG4gICAgICAgICAgICB0aGlzLiNjdXJyZW50QWdlbnQuZW1pdCgnYWdlbnRfZW5kJywgdGhpcy4jY29udGV4dCwgdGV4dE91dHB1dCk7XG4gICAgICAgICAgICB0aGlzLiNydW5PdXRwdXRHdWFyZHJhaWxzKHRleHRPdXRwdXQsIGV2ZW50LnJlc3BvbnNlLmlkLCBpdGVtSWQpO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy4jdHJhbnNwb3J0Lm9uKCdhdWRpb19kb25lJywgKCkgPT4ge1xuICAgICAgICAgICAgaWYgKHRoaXMuI2F1ZGlvU3RhcnRlZCkge1xuICAgICAgICAgICAgICAgIHRoaXMuI2F1ZGlvU3RhcnRlZCA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5lbWl0KCdhdWRpb19zdG9wcGVkJywgdGhpcy4jY29udGV4dCwgdGhpcy4jY3VycmVudEFnZW50KTtcbiAgICAgICAgfSk7XG4gICAgICAgIGxldCBsYXN0UnVuSW5kZXggPSAwO1xuICAgICAgICBsZXQgbGFzdEl0ZW1JZDtcbiAgICAgICAgdGhpcy4jdHJhbnNwb3J0Lm9uKCdhdWRpb190cmFuc2NyaXB0X2RlbHRhJywgKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGRlbHRhID0gZXZlbnQuZGVsdGE7XG4gICAgICAgICAgICAgICAgY29uc3QgaXRlbUlkID0gZXZlbnQuaXRlbUlkO1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlSWQgPSBldmVudC5yZXNwb25zZUlkO1xuICAgICAgICAgICAgICAgIGlmIChsYXN0SXRlbUlkICE9PSBpdGVtSWQpIHtcbiAgICAgICAgICAgICAgICAgICAgbGFzdEl0ZW1JZCA9IGl0ZW1JZDtcbiAgICAgICAgICAgICAgICAgICAgbGFzdFJ1bkluZGV4ID0gMDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3QgY3VycmVudFRleHQgPSB0aGlzLiN0cmFuc2NyaWJlZFRleHREZWx0YXNbaXRlbUlkXSA/PyAnJztcbiAgICAgICAgICAgICAgICBjb25zdCBuZXdUZXh0ID0gY3VycmVudFRleHQgKyBkZWx0YTtcbiAgICAgICAgICAgICAgICB0aGlzLiN0cmFuc2NyaWJlZFRleHREZWx0YXNbaXRlbUlkXSA9IG5ld1RleHQ7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuI291dHB1dEd1YXJkcmFpbFNldHRpbmdzLmRlYm91bmNlVGV4dExlbmd0aCA8IDApIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCBuZXdSdW5JbmRleCA9IE1hdGguZmxvb3IobmV3VGV4dC5sZW5ndGggLyB0aGlzLiNvdXRwdXRHdWFyZHJhaWxTZXR0aW5ncy5kZWJvdW5jZVRleHRMZW5ndGgpO1xuICAgICAgICAgICAgICAgIGlmIChuZXdSdW5JbmRleCA+IGxhc3RSdW5JbmRleCkge1xuICAgICAgICAgICAgICAgICAgICBsYXN0UnVuSW5kZXggPSBuZXdSdW5JbmRleDtcbiAgICAgICAgICAgICAgICAgICAgLy8gV2UgZG9uJ3QgY2FuY2VsIGV4aXN0aW5nIHJ1bnMgYmVjYXVzZSB3ZSB3YW50IHRoZSBmaXJzdCBvbmUgdG8gZmFpbCB0byBmYWlsXG4gICAgICAgICAgICAgICAgICAgIC8vIFRoZSB0cmFuc3BvcnQgbGF5ZXIgc2hvdWxkIHVwb24gZmFpbHVyZSBoYW5kbGUgdGhlIGludGVycnVwdGlvbiBhbmQgc3RvcCB0aGUgbW9kZWxcbiAgICAgICAgICAgICAgICAgICAgLy8gZnJvbSBnZW5lcmF0aW5nIGZ1cnRoZXJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy4jcnVuT3V0cHV0R3VhcmRyYWlscyhuZXdUZXh0LCByZXNwb25zZUlkLCBpdGVtSWQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ2Vycm9yJywge1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiAnZXJyb3InLFxuICAgICAgICAgICAgICAgICAgICBlcnJvcjogZXJyLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy4jdHJhbnNwb3J0Lm9uKCdpdGVtX3VwZGF0ZScsIChldmVudCkgPT4ge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjb25zdCBpc05ldyA9ICF0aGlzLiNoaXN0b3J5LnNvbWUoKGl0ZW0pID0+IGl0ZW0uaXRlbUlkID09PSBldmVudC5pdGVtSWQpO1xuICAgICAgICAgICAgICAgIHRoaXMuI2hpc3RvcnkgPSB1cGRhdGVSZWFsdGltZUhpc3RvcnkodGhpcy4jaGlzdG9yeSwgZXZlbnQsIHRoaXMuI3Nob3VsZEluY2x1ZGVBdWRpb0RhdGEpO1xuICAgICAgICAgICAgICAgIHRoaXMuI2NvbnRleHQuY29udGV4dC5oaXN0b3J5ID0gdGhpcy4jaGlzdG9yeTtcbiAgICAgICAgICAgICAgICBpZiAoaXNOZXcpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYWRkZWRJdGVtID0gdGhpcy4jaGlzdG9yeS5maW5kKChpdGVtKSA9PiBpdGVtLml0ZW1JZCA9PT0gZXZlbnQuaXRlbUlkKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGFkZGVkSXRlbSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lbWl0KCdoaXN0b3J5X2FkZGVkJywgYWRkZWRJdGVtKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ2hpc3RvcnlfdXBkYXRlZCcsIHRoaXMuI2hpc3RvcnkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgnZXJyb3InLCB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdlcnJvcicsXG4gICAgICAgICAgICAgICAgICAgIGVycm9yOiBlcnIsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLiN0cmFuc3BvcnQub24oJ2l0ZW1fZGVsZXRlZCcsIChldmVudCkgPT4ge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICB0aGlzLiNoaXN0b3J5ID0gdGhpcy4jaGlzdG9yeS5maWx0ZXIoKGl0ZW0pID0+IGl0ZW0uaXRlbUlkICE9PSBldmVudC5pdGVtSWQpO1xuICAgICAgICAgICAgICAgIHRoaXMuI2NvbnRleHQuY29udGV4dC5oaXN0b3J5ID0gdGhpcy4jaGlzdG9yeTtcbiAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ2hpc3RvcnlfdXBkYXRlZCcsIHRoaXMuI2hpc3RvcnkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgnZXJyb3InLCB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdlcnJvcicsXG4gICAgICAgICAgICAgICAgICAgIGVycm9yOiBlcnIsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLiN0cmFuc3BvcnQub24oJ2Z1bmN0aW9uX2NhbGwnLCBhc3luYyAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy4jaGFuZGxlRnVuY3Rpb25DYWxsKGV2ZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgIGxvZ2dlci5lcnJvcignRXJyb3IgaGFuZGxpbmcgZnVuY3Rpb24gY2FsbCcsIGVycm9yKTtcbiAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ2Vycm9yJywge1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiAnZXJyb3InLFxuICAgICAgICAgICAgICAgICAgICBlcnJvcixcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuI3RyYW5zcG9ydC5vbigndXNhZ2VfdXBkYXRlJywgKHVzYWdlKSA9PiB7XG4gICAgICAgICAgICB0aGlzLiNjb250ZXh0LnVzYWdlLmFkZCh1c2FnZSk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLiN0cmFuc3BvcnQub24oJ2F1ZGlvX2ludGVycnVwdGVkJywgKCkgPT4ge1xuICAgICAgICAgICAgaWYgKHRoaXMuI2F1ZGlvU3RhcnRlZCkge1xuICAgICAgICAgICAgICAgIHRoaXMuI2F1ZGlvU3RhcnRlZCA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5lbWl0KCdhdWRpb19pbnRlcnJ1cHRlZCcsIHRoaXMuI2NvbnRleHQsIHRoaXMuI2N1cnJlbnRBZ2VudCk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLiN0cmFuc3BvcnQub24oJ2Vycm9yJywgKGVycm9yKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmVtaXQoJ2Vycm9yJywgZXJyb3IpO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy4jdHJhbnNwb3J0Lm9uKCdtY3BfdG9vbF9jYWxsX2NvbXBsZXRlZCcsICh0b29sQ2FsbCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5lbWl0KCdtY3BfdG9vbF9jYWxsX2NvbXBsZXRlZCcsIHRoaXMuI2NvbnRleHQsIHRoaXMuI2N1cnJlbnRBZ2VudCwgdG9vbENhbGwpO1xuICAgICAgICAgICAgaWYgKHRoaXMuI2F1dG9tYXRpY2FsbHlUcmlnZ2VyUmVzcG9uc2VGb3JNY3BUb29sQ2FsbHMpIHtcbiAgICAgICAgICAgICAgICB0aGlzLiN0cmFuc3BvcnQuc2VuZEV2ZW50KHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3Jlc3BvbnNlLmNyZWF0ZScsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLiN0cmFuc3BvcnQub24oJ21jcF9hcHByb3ZhbF9yZXF1ZXN0JywgKGFwcHJvdmFsUmVxdWVzdCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5lbWl0KCd0b29sX2FwcHJvdmFsX3JlcXVlc3RlZCcsIHRoaXMuI2NvbnRleHQsIHRoaXMuI2N1cnJlbnRBZ2VudCwge1xuICAgICAgICAgICAgICAgIHR5cGU6ICdtY3BfYXBwcm92YWxfcmVxdWVzdCcsXG4gICAgICAgICAgICAgICAgYXBwcm92YWxJdGVtOiByZWFsdGltZUFwcHJvdmFsSXRlbVRvQXBwcm92YWxJdGVtKHRoaXMuI2N1cnJlbnRBZ2VudCwgYXBwcm92YWxSZXF1ZXN0KSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVjb21wdXRlcyB0aGUgY3VycmVudGx5IGF2YWlsYWJsZSBNQ1AgdG9vbHMgYmFzZWQgb24gdGhlIGN1cnJlbnQgYWdlbnQncyBhY3RpdmVcbiAgICAgKiBNQ1Agc2VydmVyIGNvbmZpZ3VyYXRpb25zIGFuZCB0aGUgY2FjaGVkIHBlci1zZXJ2ZXIgdG9vbCBsaXN0aW5ncy4gRW1pdHNcbiAgICAgKiBgbWNwX3Rvb2xzX2NoYW5nZWRgIGlmIHRoZSBzZXQgY2hhbmdlZC5cbiAgICAgKi9cbiAgICAjdXBkYXRlQXZhaWxhYmxlTWNwVG9vbHMoKSB7XG4gICAgICAgIC8vIENvbGxlY3QgYWN0aXZlIE1DUCBzZXJ2ZXIgbGFiZWxzIGFuZCBvcHRpb25hbCBhbGxvd2VkIGZpbHRlcnMgZnJvbSB0aGUgY3VycmVudCBhZ2VudFxuICAgICAgICBjb25zdCBhY3RpdmVNY3BDb25maWdzID0gdGhpcy4jY3VycmVudFRvb2xzPy5maWx0ZXIoKHQpID0+IHQudHlwZSA9PT0gJ21jcCcpO1xuICAgICAgICBjb25zdCBhbGxvd2VkRnJvbUNvbmZpZyA9IChjZmcpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGFsbG93ZWQgPSBjZmcuYWxsb3dlZF90b29scztcbiAgICAgICAgICAgIGlmICghYWxsb3dlZClcbiAgICAgICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoYWxsb3dlZCkpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGFsbG93ZWQ7XG4gICAgICAgICAgICBpZiAoYWxsb3dlZCAmJiBBcnJheS5pc0FycmF5KGFsbG93ZWQudG9vbF9uYW1lcykpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGFsbG93ZWQudG9vbF9uYW1lcztcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IGRlZHVwQnlOYW1lID0gbmV3IE1hcCgpO1xuICAgICAgICBmb3IgKGNvbnN0IGNmZyBvZiBhY3RpdmVNY3BDb25maWdzKSB7XG4gICAgICAgICAgICBjb25zdCB0b29scyA9IHRoaXMuI2FsbE1jcFRvb2xzQnlTZXJ2ZXIuZ2V0KGNmZy5zZXJ2ZXJfbGFiZWwpID8/IFtdO1xuICAgICAgICAgICAgY29uc3QgYWxsb3dlZCA9IGFsbG93ZWRGcm9tQ29uZmlnKGNmZyk7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHRvb2wgb2YgdG9vbHMpIHtcbiAgICAgICAgICAgICAgICBpZiAoYWxsb3dlZCAmJiAhYWxsb3dlZC5pbmNsdWRlcyh0b29sLm5hbWUpKVxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICBpZiAoIWRlZHVwQnlOYW1lLmhhcyh0b29sLm5hbWUpKSB7XG4gICAgICAgICAgICAgICAgICAgIGRlZHVwQnlOYW1lLnNldCh0b29sLm5hbWUsIHRvb2wpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjb25zdCBuZXh0ID0gQXJyYXkuZnJvbShkZWR1cEJ5TmFtZS52YWx1ZXMoKSk7XG4gICAgICAgIGNvbnN0IHByZXYgPSB0aGlzLiNhdmFpbGFibGVNY3BUb29scztcbiAgICAgICAgY29uc3QgY2hhbmdlZCA9IHByZXYubGVuZ3RoICE9PSBuZXh0Lmxlbmd0aCB8fFxuICAgICAgICAgICAgSlNPTi5zdHJpbmdpZnkocHJldi5tYXAoKHQpID0+IHQubmFtZSkuc29ydCgpKSAhPT1cbiAgICAgICAgICAgICAgICBKU09OLnN0cmluZ2lmeShuZXh0Lm1hcCgodCkgPT4gdC5uYW1lKS5zb3J0KCkpO1xuICAgICAgICBpZiAoY2hhbmdlZCkge1xuICAgICAgICAgICAgdGhpcy4jYXZhaWxhYmxlTWNwVG9vbHMgPSBuZXh0O1xuICAgICAgICAgICAgdGhpcy5lbWl0KCdtY3BfdG9vbHNfY2hhbmdlZCcsIHRoaXMuI2F2YWlsYWJsZU1jcFRvb2xzKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBDb25uZWN0IHRvIHRoZSBzZXNzaW9uLiBUaGlzIHdpbGwgZXN0YWJsaXNoIHRoZSBjb25uZWN0aW9uIHRvIHRoZSB1bmRlcmx5aW5nIHRyYW5zcG9ydCBsYXllclxuICAgICAqIGFuZCBzdGFydCB0aGUgc2Vzc2lvbi5cbiAgICAgKlxuICAgICAqIEFmdGVyIGNvbm5lY3RpbmcsIHRoZSBzZXNzaW9uIHdpbGwgYWxzbyBlbWl0IGEgYGhpc3RvcnlfdXBkYXRlZGAgZXZlbnQgd2l0aCBhbiBlbXB0eSBoaXN0b3J5LlxuICAgICAqXG4gICAgICogQHBhcmFtIG9wdGlvbnMgLSBUaGUgb3B0aW9ucyBmb3IgdGhlIGNvbm5lY3Rpb24uXG4gICAgICovXG4gICAgYXN5bmMgY29ubmVjdChvcHRpb25zKSB7XG4gICAgICAgIC8vIG1ha2VzIHN1cmUgdGhlIGN1cnJlbnQgYWdlbnQgaXMgY29ycmVjdGx5IHNldCBhbmQgbG9hZHMgdGhlIHRvb2xzXG4gICAgICAgIGF3YWl0IHRoaXMuI3NldEN1cnJlbnRBZ2VudCh0aGlzLmluaXRpYWxBZ2VudCk7XG4gICAgICAgIHRoaXMuI3NldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgICAgIGF3YWl0IHRoaXMuI3RyYW5zcG9ydC5jb25uZWN0KHtcbiAgICAgICAgICAgIGFwaUtleTogb3B0aW9ucy5hcGlLZXkgPz8gdGhpcy5vcHRpb25zLmFwaUtleSxcbiAgICAgICAgICAgIG1vZGVsOiB0aGlzLm9wdGlvbnMubW9kZWwsXG4gICAgICAgICAgICB1cmw6IG9wdGlvbnMudXJsLFxuICAgICAgICAgICAgY2FsbElkOiBvcHRpb25zLmNhbGxJZCxcbiAgICAgICAgICAgIGluaXRpYWxTZXNzaW9uQ29uZmlnOiBhd2FpdCB0aGlzLiNnZXRTZXNzaW9uQ29uZmlnKHRoaXMub3B0aW9ucy5jb25maWcpLFxuICAgICAgICB9KTtcbiAgICAgICAgLy8gRW5zdXJlIHRoZSBjYWNoZWQgbGFzdFNlc3Npb25Db25maWcgaW5jbHVkZXMgZXZlcnl0aGluZyBwYXNzZWQgYXMgdGhlIGluaXRpYWwgc2Vzc2lvbiBjb25maWdcbiAgICAgICAgLy8gKHRoZSBjYWxsIGFib3ZlIGFscmVhZHkgc2V0IGl0IHZpYSAjZ2V0U2Vzc2lvbkNvbmZpZyBidXQgaW4gY2FzZSBhZGRpdGlvbmFsIG92ZXJyaWRlcyB3ZXJlXG4gICAgICAgIC8vIHBhc3NlZCBkaXJlY3RseSBoZXJlIGluIHRoZSBmdXR1cmUgd2UgY291bGQgbWVyZ2UgdGhlbSkuIEZvciBub3cgaXQncyBhIG5vLW9wLlxuICAgICAgICB0aGlzLiNoaXN0b3J5ID0gW107XG4gICAgICAgIHRoaXMuZW1pdCgnaGlzdG9yeV91cGRhdGVkJywgdGhpcy4jaGlzdG9yeSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFVwZGF0ZSB0aGUgaGlzdG9yeSBvZiB0aGUgc2Vzc2lvbi5cbiAgICAgKiBAcGFyYW0gbmV3SGlzdG9yeSAtIFRoZSBuZXcgaGlzdG9yeSB0byBzZXQuXG4gICAgICovXG4gICAgdXBkYXRlSGlzdG9yeShuZXdIaXN0b3J5KSB7XG4gICAgICAgIGxldCB1cGRhdGVkSGlzdG9yeTtcbiAgICAgICAgaWYgKHR5cGVvZiBuZXdIaXN0b3J5ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICB1cGRhdGVkSGlzdG9yeSA9IG5ld0hpc3RvcnkodGhpcy4jaGlzdG9yeSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB1cGRhdGVkSGlzdG9yeSA9IG5ld0hpc3Rvcnk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy4jdHJhbnNwb3J0LnJlc2V0SGlzdG9yeSh0aGlzLiNoaXN0b3J5LCB1cGRhdGVkSGlzdG9yeSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNlbmQgYSBtZXNzYWdlIHRvIHRoZSBzZXNzaW9uLlxuICAgICAqIEBwYXJhbSBtZXNzYWdlIC0gVGhlIG1lc3NhZ2UgdG8gc2VuZC5cbiAgICAgKiBAcGFyYW0gb3RoZXJFdmVudERhdGEgLSBBZGRpdGlvbmFsIGV2ZW50IGRhdGEgdG8gc2VuZC5cbiAgICAgKi9cbiAgICBzZW5kTWVzc2FnZShtZXNzYWdlLCBvdGhlckV2ZW50RGF0YSA9IHt9KSB7XG4gICAgICAgIHRoaXMuI3RyYW5zcG9ydC5zZW5kTWVzc2FnZShtZXNzYWdlLCBvdGhlckV2ZW50RGF0YSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFkZCBpbWFnZSB0byB0aGUgc2Vzc2lvblxuICAgICAqIEBwYXJhbSBpbWFnZSAtIFRoZSBpbWFnZSB0byBhZGQuXG4gICAgICovXG4gICAgYWRkSW1hZ2UoaW1hZ2UsIHsgdHJpZ2dlclJlc3BvbnNlID0gdHJ1ZSB9ID0ge30pIHtcbiAgICAgICAgdGhpcy4jdHJhbnNwb3J0LmFkZEltYWdlKGltYWdlLCB7IHRyaWdnZXJSZXNwb25zZSB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTXV0ZSB0aGUgc2Vzc2lvbi5cbiAgICAgKiBAcGFyYW0gbXV0ZWQgLSBXaGV0aGVyIHRvIG11dGUgdGhlIHNlc3Npb24uXG4gICAgICovXG4gICAgbXV0ZShtdXRlZCkge1xuICAgICAgICB0aGlzLiN0cmFuc3BvcnQubXV0ZShtdXRlZCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIERpc2Nvbm5lY3QgZnJvbSB0aGUgc2Vzc2lvbi5cbiAgICAgKi9cbiAgICBjbG9zZSgpIHtcbiAgICAgICAgdGhpcy4jaW50ZXJydXB0ZWRCeUd1YXJkcmFpbCA9IHt9O1xuICAgICAgICB0aGlzLiN0cmFuc3BvcnQuY2xvc2UoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2VuZCBhdWRpbyB0byB0aGUgc2Vzc2lvbi5cbiAgICAgKiBAcGFyYW0gYXVkaW8gLSBUaGUgYXVkaW8gdG8gc2VuZC5cbiAgICAgKiBAcGFyYW0gb3B0aW9ucyAtIEFkZGl0aW9uYWwgb3B0aW9ucy5cbiAgICAgKiBAcGFyYW0gb3B0aW9ucy5jb21taXQgLSBXaGV0aGVyIHRvIGZpbmlzaCB0aGUgdHVybiB3aXRoIHRoaXMgYXVkaW8uXG4gICAgICovXG4gICAgc2VuZEF1ZGlvKGF1ZGlvLCBvcHRpb25zID0ge30pIHtcbiAgICAgICAgdGhpcy4jdHJhbnNwb3J0LnNlbmRBdWRpbyhhdWRpbywgb3B0aW9ucyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEludGVycnVwdCB0aGUgc2Vzc2lvbiBhcnRpZmljaWFsbHkgZm9yIGV4YW1wbGUgaWYgeW91IHdhbnQgdG8gYnVpbGQgYSBcInN0b3AgdGFsa2luZ1wiXG4gICAgICogYnV0dG9uLlxuICAgICAqL1xuICAgIGludGVycnVwdCgpIHtcbiAgICAgICAgdGhpcy4jdHJhbnNwb3J0LmludGVycnVwdCgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBcHByb3ZlIGEgdG9vbCBjYWxsLiBUaGlzIHdpbGwgYWxzbyB0cmlnZ2VyIHRoZSB0b29sIGNhbGwgdG8gdGhlIGFnZW50LlxuICAgICAqIEBwYXJhbSBhcHByb3ZhbEl0ZW0gLSBUaGUgYXBwcm92YWwgaXRlbSB0byBhcHByb3ZlLlxuICAgICAqIEBwYXJhbSBvcHRpb25zIC0gQWRkaXRpb25hbCBvcHRpb25zLlxuICAgICAqIEBwYXJhbSBvcHRpb25zLmFsd2F5c0FwcHJvdmUgLSBXaGV0aGVyIHRvIGFsd2F5cyBhcHByb3ZlIHRoZSB0b29sIGNhbGwuXG4gICAgICovXG4gICAgYXN5bmMgYXBwcm92ZShhcHByb3ZhbEl0ZW0sIG9wdGlvbnMgPSB7IGFsd2F5c0FwcHJvdmU6IGZhbHNlIH0pIHtcbiAgICAgICAgdGhpcy4jY29udGV4dC5hcHByb3ZlVG9vbChhcHByb3ZhbEl0ZW0sIG9wdGlvbnMpO1xuICAgICAgICBjb25zdCB0b29sTmFtZSA9IGFwcHJvdmFsSXRlbS50b29sTmFtZSA/PyBhcHByb3ZhbEl0ZW0ucmF3SXRlbS5uYW1lO1xuICAgICAgICBjb25zdCB0b29sID0gdGhpcy4jY3VycmVudEFnZW50LnRvb2xzLmZpbmQoKHRvb2wpID0+IHRvb2wubmFtZSA9PT0gdG9vbE5hbWUpO1xuICAgICAgICBpZiAodG9vbCAmJlxuICAgICAgICAgICAgdG9vbC50eXBlID09PSAnZnVuY3Rpb24nICYmXG4gICAgICAgICAgICBhcHByb3ZhbEl0ZW0ucmF3SXRlbS50eXBlID09PSAnZnVuY3Rpb25fY2FsbCcpIHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuI2hhbmRsZUZ1bmN0aW9uVG9vbENhbGwoYXBwcm92YWxJdGVtLnJhd0l0ZW0sIHRvb2wpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGFwcHJvdmFsSXRlbS5yYXdJdGVtLnR5cGUgPT09ICdob3N0ZWRfdG9vbF9jYWxsJykge1xuICAgICAgICAgICAgaWYgKG9wdGlvbnMuYWx3YXlzQXBwcm92ZSkge1xuICAgICAgICAgICAgICAgIGxvZ2dlci53YXJuKCdBbHdheXMgYXBwcm92aW5nIE1DUCB0b29scyBpcyBub3Qgc3VwcG9ydGVkLiBVc2UgdGhlIGFsbG93ZWQgdG9vbHMgY29uZmlndXJhdGlvbiBpbnN0ZWFkLicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgbWNwQXBwcm92YWxSZXF1ZXN0ID0gYXBwcm92YWxJdGVtVG9SZWFsdGltZUFwcHJvdmFsSXRlbShhcHByb3ZhbEl0ZW0pO1xuICAgICAgICAgICAgdGhpcy4jdHJhbnNwb3J0LnNlbmRNY3BSZXNwb25zZShtY3BBcHByb3ZhbFJlcXVlc3QsIHRydWUpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhyb3cgbmV3IE1vZGVsQmVoYXZpb3JFcnJvcihgVG9vbCAke3Rvb2xOYW1lID8/ICd1bmtub3duJ30gbm90IGZvdW5kYCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVqZWN0IGEgdG9vbCBjYWxsLiBUaGlzIHdpbGwgYWxzbyB0cmlnZ2VyIHRoZSB0b29sIGNhbGwgdG8gdGhlIGFnZW50LlxuICAgICAqIEBwYXJhbSBhcHByb3ZhbEl0ZW0gLSBUaGUgYXBwcm92YWwgaXRlbSB0byByZWplY3QuXG4gICAgICogQHBhcmFtIG9wdGlvbnMgLSBBZGRpdGlvbmFsIG9wdGlvbnMuXG4gICAgICogQHBhcmFtIG9wdGlvbnMuYWx3YXlzUmVqZWN0IC0gV2hldGhlciB0byBhbHdheXMgcmVqZWN0IHRoZSB0b29sIGNhbGwuXG4gICAgICovXG4gICAgYXN5bmMgcmVqZWN0KGFwcHJvdmFsSXRlbSwgb3B0aW9ucyA9IHsgYWx3YXlzUmVqZWN0OiBmYWxzZSB9KSB7XG4gICAgICAgIHRoaXMuI2NvbnRleHQucmVqZWN0VG9vbChhcHByb3ZhbEl0ZW0sIG9wdGlvbnMpO1xuICAgICAgICAvLyB3ZSBzdGlsbCBuZWVkIHRvIHNpbXVsYXRlIGEgdG9vbCBjYWxsIHRvIHRoZSBhZ2VudCB0byBsZXQgdGhlIGFnZW50IGtub3dcbiAgICAgICAgY29uc3QgdG9vbE5hbWUgPSBhcHByb3ZhbEl0ZW0udG9vbE5hbWUgPz8gYXBwcm92YWxJdGVtLnJhd0l0ZW0ubmFtZTtcbiAgICAgICAgY29uc3QgdG9vbCA9IHRoaXMuI2N1cnJlbnRBZ2VudC50b29scy5maW5kKCh0b29sKSA9PiB0b29sLm5hbWUgPT09IHRvb2xOYW1lKTtcbiAgICAgICAgaWYgKHRvb2wgJiZcbiAgICAgICAgICAgIHRvb2wudHlwZSA9PT0gJ2Z1bmN0aW9uJyAmJlxuICAgICAgICAgICAgYXBwcm92YWxJdGVtLnJhd0l0ZW0udHlwZSA9PT0gJ2Z1bmN0aW9uX2NhbGwnKSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLiNoYW5kbGVGdW5jdGlvblRvb2xDYWxsKGFwcHJvdmFsSXRlbS5yYXdJdGVtLCB0b29sKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChhcHByb3ZhbEl0ZW0ucmF3SXRlbS50eXBlID09PSAnaG9zdGVkX3Rvb2xfY2FsbCcpIHtcbiAgICAgICAgICAgIGlmIChvcHRpb25zLmFsd2F5c1JlamVjdCkge1xuICAgICAgICAgICAgICAgIGxvZ2dlci53YXJuKCdBbHdheXMgcmVqZWN0aW5nIE1DUCB0b29scyBpcyBub3Qgc3VwcG9ydGVkLiBVc2UgdGhlIGFsbG93ZWQgdG9vbHMgY29uZmlndXJhdGlvbiBpbnN0ZWFkLicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgbWNwQXBwcm92YWxSZXF1ZXN0ID0gYXBwcm92YWxJdGVtVG9SZWFsdGltZUFwcHJvdmFsSXRlbShhcHByb3ZhbEl0ZW0pO1xuICAgICAgICAgICAgdGhpcy4jdHJhbnNwb3J0LnNlbmRNY3BSZXNwb25zZShtY3BBcHByb3ZhbFJlcXVlc3QsIGZhbHNlKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBNb2RlbEJlaGF2aW9yRXJyb3IoYFRvb2wgJHt0b29sTmFtZSA/PyAndW5rbm93bid9IG5vdCBmb3VuZGApO1xuICAgICAgICB9XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cmVhbHRpbWVTZXNzaW9uLm1qcy5tYXAiLCJpbXBvcnQgeyBVc2VyRXJyb3IgfSBmcm9tICdAb3BlbmFpL2FnZW50cy1jb3JlJztcbmltcG9ydCB7IE9wZW5BSVJlYWx0aW1lV2ViU29ja2V0LCB9IGZyb20gXCIuL29wZW5haVJlYWx0aW1lV2Vic29ja2V0Lm1qc1wiO1xuaW1wb3J0IHsgUmVhbHRpbWVTZXNzaW9uLCB9IGZyb20gXCIuL3JlYWx0aW1lU2Vzc2lvbi5tanNcIjtcbi8qKlxuICogVHJhbnNwb3J0IGxheWVyIHRoYXQgY29ubmVjdHMgdG8gYW4gZXhpc3RpbmcgU0lQLWluaXRpYXRlZCBSZWFsdGltZSBjYWxsIHZpYSBjYWxsIElELlxuICovXG5leHBvcnQgY2xhc3MgT3BlbkFJUmVhbHRpbWVTSVAgZXh0ZW5kcyBPcGVuQUlSZWFsdGltZVdlYlNvY2tldCB7XG4gICAgY29uc3RydWN0b3Iob3B0aW9ucyA9IHt9KSB7XG4gICAgICAgIHN1cGVyKG9wdGlvbnMpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBCdWlsZCB0aGUgaW5pdGlhbCBzZXNzaW9uIHBheWxvYWQgZm9yIGEgU0lQLWF0dGFjaGVkIHNlc3Npb24sIG1hdGNoaW5nIHRoZSBjb25maWcgdGhhdCBhIFJlYWx0aW1lU2Vzc2lvbiB3b3VsZCBzZW5kIG9uIGNvbm5lY3QuXG4gICAgICpcbiAgICAgKiBUaGlzIGVuYWJsZXMgU0lQIGRlcGxveW1lbnRzIHRvIGFjY2VwdCBhbiBpbmNvbWluZyBjYWxsIHdpdGggYSBwYXlsb2FkIHRoYXQgYWxyZWFkeSByZWZsZWN0c1xuICAgICAqIHRoZSBhY3RpdmUgYWdlbnQncyBpbnN0cnVjdGlvbnMsIHRvb2xzLCBwcm9tcHQsIGFuZCB0cmFjaW5nIG1ldGFkYXRhIHdpdGhvdXQgZHVwbGljYXRpbmcgdGhlXG4gICAgICogc2Vzc2lvbiBsb2dpYyBvdXRzaWRlIG9mIHRoZSBTREsuIFRoZSByZXR1cm5lZCBvYmplY3Qgc3RydWN0dXJhbGx5IG1hdGNoZXMgdGhlIFJFU1RcbiAgICAgKiBgQ2FsbEFjY2VwdFBhcmFtc2AgaW50ZXJmYWNlLCBzbyBpdCBjYW4gYmUgZm9yd2FyZGVkIGRpcmVjdGx5IHRvXG4gICAgICogYG9wZW5haS5yZWFsdGltZS5jYWxscy5hY2NlcHQoLi4uKWAuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gYWdlbnQgLSBUaGUgc3RhcnRpbmcgYWdlbnQgdXNlZCB0byBzZWVkIHRoZSBzZXNzaW9uIGluc3RydWN0aW9ucywgdG9vbHMsIGFuZCBwcm9tcHQuXG4gICAgICogQHBhcmFtIG9wdGlvbnMgLSBPcHRpb25hbCBzZXNzaW9uIG9wdGlvbnMgdGhhdCBtaXJyb3IgdGhlIG9uZXMgcGFzc2VkIHRvIHRoZSBSZWFsdGltZVNlc3Npb24gY29uc3RydWN0b3IuXG4gICAgICogQHBhcmFtIG92ZXJyaWRlcyAtIEFkZGl0aW9uYWwgY29uZmlnIG92ZXJyaWRlcyBhcHBsaWVkIG9uIHRvcCBvZiB0aGUgc2Vzc2lvbiBvcHRpb25zLlxuICAgICAqL1xuICAgIHN0YXRpYyBhc3luYyBidWlsZEluaXRpYWxDb25maWcoYWdlbnQsIG9wdGlvbnMgPSB7fSwgb3ZlcnJpZGVzID0ge30pIHtcbiAgICAgICAgY29uc3Qgc2Vzc2lvbkNvbmZpZyA9IGF3YWl0IFJlYWx0aW1lU2Vzc2lvbi5jb21wdXRlSW5pdGlhbFNlc3Npb25Db25maWcoYWdlbnQsIG9wdGlvbnMsIG92ZXJyaWRlcyk7XG4gICAgICAgIGNvbnN0IHRyYW5zcG9ydCA9IG5ldyBPcGVuQUlSZWFsdGltZVNJUCgpO1xuICAgICAgICByZXR1cm4gdHJhbnNwb3J0LmJ1aWxkU2Vzc2lvblBheWxvYWQoc2Vzc2lvbkNvbmZpZyk7XG4gICAgfVxuICAgIHNlbmRBdWRpbyhfYXVkaW8sIF9vcHRpb25zID0ge30pIHtcbiAgICAgICAgLy8gU0lQIGludGVncmF0aW9ucyBzdHJlYW0gYXVkaW8gdG8gT3BlbkFJIGRpcmVjdGx5IHRocm91Z2ggdGhlIHRlbGVwaG9ueSBwcm92aWRlciwgc28gdGhlXG4gICAgICAgIC8vIHRyYW5zcG9ydCBkZWxpYmVyYXRlbHkgcHJldmVudHMgdXNlcmxhbmQgY29kZSBmcm9tIHNlbmRpbmcgZHVwbGljYXRlIGJ1ZmZlcnMuXG4gICAgICAgIHRocm93IG5ldyBFcnJvcignT3BlbkFJUmVhbHRpbWVTSVAgZG9lcyBub3Qgc3VwcG9ydCBzZW5kaW5nIGF1ZGlvIGJ1ZmZlcnM7IGF1ZGlvIGlzIGhhbmRsZWQgYnkgdGhlIFNJUCBjYWxsLicpO1xuICAgIH1cbiAgICBhc3luYyBjb25uZWN0KG9wdGlvbnMpIHtcbiAgICAgICAgaWYgKCFvcHRpb25zLmNhbGxJZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFVzZXJFcnJvcignT3BlbkFJUmVhbHRpbWVTSVAgcmVxdWlyZXMgYGNhbGxJZGAgaW4gdGhlIGNvbm5lY3Qgb3B0aW9ucy4nKTtcbiAgICAgICAgfVxuICAgICAgICBhd2FpdCBzdXBlci5jb25uZWN0KG9wdGlvbnMpO1xuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW9wZW5haVJlYWx0aW1lU2lwLm1qcy5tYXAiLCJpbXBvcnQgKiBhcyB1dGlsSW1wb3J0IGZyb20gXCIuL3V0aWxzLm1qc1wiO1xuZXhwb3J0IHsgUmVhbHRpbWVBZ2VudCB9IGZyb20gXCIuL3JlYWx0aW1lQWdlbnQubWpzXCI7XG5leHBvcnQgeyBSZWFsdGltZVNlc3Npb24sIH0gZnJvbSBcIi4vcmVhbHRpbWVTZXNzaW9uLm1qc1wiO1xuZXhwb3J0IHsgT3BlbkFJUmVhbHRpbWVXZWJSVEMsIH0gZnJvbSBcIi4vb3BlbmFpUmVhbHRpbWVXZWJSdGMubWpzXCI7XG5leHBvcnQgeyBPcGVuQUlSZWFsdGltZVdlYlNvY2tldCwgfSBmcm9tIFwiLi9vcGVuYWlSZWFsdGltZVdlYnNvY2tldC5tanNcIjtcbmV4cG9ydCB7IE9wZW5BSVJlYWx0aW1lU0lQIH0gZnJvbSBcIi4vb3BlbmFpUmVhbHRpbWVTaXAubWpzXCI7XG5leHBvcnQgeyBPcGVuQUlSZWFsdGltZUJhc2UsIERFRkFVTFRfT1BFTkFJX1JFQUxUSU1FX01PREVMLCBERUZBVUxUX09QRU5BSV9SRUFMVElNRV9TRVNTSU9OX0NPTkZJRywgfSBmcm9tIFwiLi9vcGVuYWlSZWFsdGltZUJhc2UubWpzXCI7XG5leHBvcnQgY29uc3QgdXRpbHMgPSB7XG4gICAgYmFzZTY0VG9BcnJheUJ1ZmZlcjogdXRpbEltcG9ydC5iYXNlNjRUb0FycmF5QnVmZmVyLFxuICAgIGFycmF5QnVmZmVyVG9CYXNlNjQ6IHV0aWxJbXBvcnQuYXJyYXlCdWZmZXJUb0Jhc2U2NCxcbiAgICBnZXRMYXN0VGV4dEZyb21BdWRpb091dHB1dE1lc3NhZ2U6IHV0aWxJbXBvcnQuZ2V0TGFzdFRleHRGcm9tQXVkaW9PdXRwdXRNZXNzYWdlLFxufTtcbmV4cG9ydCB7IE1vZGVsQmVoYXZpb3JFcnJvciwgT3V0cHV0R3VhcmRyYWlsVHJpcHdpcmVUcmlnZ2VyZWQsIHRvb2wsIFVzZXJFcnJvciwgfSBmcm9tICdAb3BlbmFpL2FnZW50cy1jb3JlJztcbmV4cG9ydCB7IGJhY2tncm91bmRSZXN1bHQsIGlzQmFja2dyb3VuZFJlc3VsdCB9IGZyb20gXCIuL3Rvb2wubWpzXCI7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5tanMubWFwIl0sIm5hbWVzIjpbIk1FVEFEQVRBIiwic2FmZUV4ZWN1dGUiLCJmbiIsImVycm9yIiwiZ2V0RW51bVZhbHVlcyIsImVudHJpZXMiLCJudW1lcmljVmFsdWVzIiwidiIsImsiLCJfIiwiJFpvZFJlZ2lzdHJ5Iiwic2NoZW1hIiwiX21ldGEiLCJtZXRhIiwicCIsInBtIiwicmVnaXN0cnkiLCJnbG9iYWxSZWdpc3RyeSIsIkpTT05TY2hlbWFHZW5lcmF0b3IiLCJwYXJhbXMiLCJfcGFyYW1zIiwiX2EiLCJkZWYiLCJmb3JtYXRNYXAiLCJzZWVuIiwicmVzdWx0Iiwib3ZlcnJpZGVTY2hlbWEiLCJfYiIsInBhcmVudCIsIl9qc29uIiwianNvbiIsIm1pbmltdW0iLCJtYXhpbXVtIiwiZm9ybWF0IiwicGF0dGVybnMiLCJjb250ZW50RW5jb2RpbmciLCJyZWdleGVzIiwicmVnZXgiLCJtdWx0aXBsZU9mIiwiZXhjbHVzaXZlTWF4aW11bSIsImV4Y2x1c2l2ZU1pbmltdW0iLCJzaGFwZSIsImtleSIsImFsbEtleXMiLCJyZXF1aXJlZEtleXMiLCJfYyIsIngiLCJpIiwiYSIsImIiLCJpc1NpbXBsZUludGVyc2VjdGlvbiIsInZhbCIsImFsbE9mIiwicHJlZml4SXRlbXMiLCJyZXN0IiwidmFsdWVzIiwidmFscyIsImZpbGUiLCJtaW1lIiwibSIsImlubmVyIiwiY2F0Y2hWYWx1ZSIsInBhdHRlcm4iLCJpbm5lclR5cGUiLCJpc1RyYW5zZm9ybWluZyIsInJvb3QiLCJtYWtlVVJJIiwiZW50cnkiLCJkZWZzU2VnbWVudCIsImV4dGVybmFsSWQiLCJ1cmlHZW5lcmF0b3IiLCJpZCIsImRlZlVyaVByZWZpeCIsImRlZklkIiwiZXh0cmFjdFRvRGVmIiwicmVmIiwiZXh0IiwiZmxhdHRlblJlZiIsInpvZFNjaGVtYSIsIl9jYWNoZWQiLCJyZWZTY2hlbWEiLCJfZCIsIl9lIiwiZGVmcyIsIl9mIiwidG9KU09OU2NoZW1hIiwiaW5wdXQiLCJnZW4iLCJzY2hlbWFzIiwiZXh0ZXJuYWwiLCJfc2NoZW1hIiwiX2N0eCIsImN0eCIsIm9wdGlvbiIsIml0ZW0iLCJtYWtlUGFyc2VhYmxlVGV4dEZvcm1hdCIsInJlc3BvbnNlX2Zvcm1hdCIsInBhcnNlciIsIm9iaiIsImlnbm9yZU92ZXJyaWRlIiwiZGVmYXVsdE9wdGlvbnMiLCJnZXREZWZhdWx0T3B0aW9ucyIsIm9wdGlvbnMiLCJ6b2REZWYiLCJpc0VtcHR5T2JqIiwiX2siLCJnZXRSZWZzIiwiX29wdGlvbnMiLCJjdXJyZW50UGF0aCIsIm5hbWUiLCJhZGRFcnJvck1lc3NhZ2UiLCJyZXMiLCJlcnJvck1lc3NhZ2UiLCJyZWZzIiwic2V0UmVzcG9uc2VWYWx1ZUFuZEVycm9ycyIsInZhbHVlIiwidXRpbCIsImFzc2VydElzIiwiX2FyZyIsImFzc2VydE5ldmVyIiwiX3giLCJpdGVtcyIsInZhbGlkS2V5cyIsImZpbHRlcmVkIiwiZSIsIm9iamVjdCIsImtleXMiLCJhcnIiLCJjaGVja2VyIiwiam9pblZhbHVlcyIsImFycmF5Iiwic2VwYXJhdG9yIiwib2JqZWN0VXRpbCIsImZpcnN0Iiwic2Vjb25kIiwiWm9kUGFyc2VkVHlwZSIsImdldFBhcnNlZFR5cGUiLCJkYXRhIiwiWm9kSXNzdWVDb2RlIiwiWm9kRXJyb3IiLCJpc3N1ZXMiLCJzdWIiLCJzdWJzIiwiYWN0dWFsUHJvdG8iLCJfbWFwcGVyIiwibWFwcGVyIiwiaXNzdWUiLCJmaWVsZEVycm9ycyIsInByb2Nlc3NFcnJvciIsImN1cnIiLCJlbCIsImZvcm1FcnJvcnMiLCJmaXJzdEVsIiwiZXJyb3JNYXAiLCJtZXNzYWdlIiwib3ZlcnJpZGVFcnJvck1hcCIsImRlZmF1bHRFcnJvck1hcCIsImdldEVycm9yTWFwIiwibWFrZUlzc3VlIiwicGF0aCIsImVycm9yTWFwcyIsImlzc3VlRGF0YSIsImZ1bGxQYXRoIiwiZnVsbElzc3VlIiwibWFwcyIsIm1hcCIsImFkZElzc3VlVG9Db250ZXh0Iiwib3ZlcnJpZGVNYXAiLCJQYXJzZVN0YXR1cyIsInN0YXR1cyIsInJlc3VsdHMiLCJhcnJheVZhbHVlIiwiSU5WQUxJRCIsInBhaXJzIiwic3luY1BhaXJzIiwicGFpciIsImZpbmFsT2JqZWN0IiwiRElSVFkiLCJPSyIsImlzQWJvcnRlZCIsImlzRGlydHkiLCJpc1ZhbGlkIiwiaXNBc3luYyIsImVycm9yVXRpbCIsIlBhcnNlSW5wdXRMYXp5UGF0aCIsImhhbmRsZVJlc3VsdCIsInByb2Nlc3NDcmVhdGVQYXJhbXMiLCJpbnZhbGlkX3R5cGVfZXJyb3IiLCJyZXF1aXJlZF9lcnJvciIsImRlc2NyaXB0aW9uIiwiaXNzIiwiWm9kVHlwZSIsImVyciIsIm1heWJlQXN5bmNSZXN1bHQiLCJjaGVjayIsImdldElzc3VlUHJvcGVydGllcyIsInNldEVycm9yIiwicmVmaW5lbWVudERhdGEiLCJyZWZpbmVtZW50IiwiWm9kRWZmZWN0cyIsIlpvZEZpcnN0UGFydHlUeXBlS2luZCIsIlpvZE9wdGlvbmFsIiwiWm9kTnVsbGFibGUiLCJab2RBcnJheSIsIlpvZFByb21pc2UiLCJab2RVbmlvbiIsImluY29taW5nIiwiWm9kSW50ZXJzZWN0aW9uIiwidHJhbnNmb3JtIiwiZGVmYXVsdFZhbHVlRnVuYyIsIlpvZERlZmF1bHQiLCJab2RCcmFuZGVkIiwiY2F0Y2hWYWx1ZUZ1bmMiLCJab2RDYXRjaCIsIlRoaXMiLCJ0YXJnZXQiLCJab2RQaXBlbGluZSIsIlpvZFJlYWRvbmx5IiwiY3VpZFJlZ2V4IiwiY3VpZDJSZWdleCIsInVsaWRSZWdleCIsInV1aWRSZWdleCIsIm5hbm9pZFJlZ2V4Iiwiand0UmVnZXgiLCJkdXJhdGlvblJlZ2V4IiwiZW1haWxSZWdleCIsIl9lbW9qaVJlZ2V4IiwiZW1vamlSZWdleCIsImlwdjRSZWdleCIsImlwdjRDaWRyUmVnZXgiLCJpcHY2UmVnZXgiLCJpcHY2Q2lkclJlZ2V4IiwiYmFzZTY0UmVnZXgiLCJiYXNlNjR1cmxSZWdleCIsImRhdGVSZWdleFNvdXJjZSIsImRhdGVSZWdleCIsInRpbWVSZWdleFNvdXJjZSIsImFyZ3MiLCJzZWNvbmRzUmVnZXhTb3VyY2UiLCJzZWNvbmRzUXVhbnRpZmllciIsInRpbWVSZWdleCIsImRhdGV0aW1lUmVnZXgiLCJvcHRzIiwiaXNWYWxpZElQIiwiaXAiLCJ2ZXJzaW9uIiwiaXNWYWxpZEpXVCIsImp3dCIsImFsZyIsImhlYWRlciIsImJhc2U2NCIsImRlY29kZWQiLCJpc1ZhbGlkQ2lkciIsIlpvZFN0cmluZyIsInRvb0JpZyIsInRvb1NtYWxsIiwidmFsaWRhdGlvbiIsIm1pbkxlbmd0aCIsIm1heExlbmd0aCIsImxlbiIsImNoIiwibWluIiwibWF4IiwiZmxvYXRTYWZlUmVtYWluZGVyIiwic3RlcCIsInZhbERlY0NvdW50Iiwic3RlcERlY0NvdW50IiwiZGVjQ291bnQiLCJ2YWxJbnQiLCJzdGVwSW50IiwiWm9kTnVtYmVyIiwia2luZCIsImluY2x1c2l2ZSIsIlpvZEJpZ0ludCIsIlpvZEJvb2xlYW4iLCJab2REYXRlIiwibWluRGF0ZSIsIm1heERhdGUiLCJab2RTeW1ib2wiLCJab2RVbmRlZmluZWQiLCJab2ROdWxsIiwiWm9kQW55IiwiWm9kVW5rbm93biIsIlpvZE5ldmVyIiwiWm9kVm9pZCIsImRlZXBQYXJ0aWFsaWZ5IiwiWm9kT2JqZWN0IiwibmV3U2hhcGUiLCJmaWVsZFNjaGVtYSIsIlpvZFR1cGxlIiwic2hhcGVLZXlzIiwiZXh0cmFLZXlzIiwia2V5VmFsaWRhdG9yIiwidW5rbm93bktleXMiLCJjYXRjaGFsbCIsImRlZmF1bHRFcnJvciIsImF1Z21lbnRhdGlvbiIsIm1lcmdpbmciLCJpbmRleCIsIm1hc2siLCJuZXdGaWVsZCIsImNyZWF0ZVpvZEVudW0iLCJoYW5kbGVSZXN1bHRzIiwidW5pb25FcnJvcnMiLCJjaGlsZEN0eCIsImRpcnR5IiwidHlwZXMiLCJnZXREaXNjcmltaW5hdG9yIiwidHlwZSIsIlpvZExhenkiLCJab2RMaXRlcmFsIiwiWm9kRW51bSIsIlpvZE5hdGl2ZUVudW0iLCJab2REaXNjcmltaW5hdGVkVW5pb24iLCJkaXNjcmltaW5hdG9yIiwiZGlzY3JpbWluYXRvclZhbHVlIiwib3B0aW9uc01hcCIsImRpc2NyaW1pbmF0b3JWYWx1ZXMiLCJtZXJnZVZhbHVlcyIsImFUeXBlIiwiYlR5cGUiLCJiS2V5cyIsInNoYXJlZEtleXMiLCJuZXdPYmoiLCJzaGFyZWRWYWx1ZSIsIm5ld0FycmF5IiwiaXRlbUEiLCJpdGVtQiIsImhhbmRsZVBhcnNlZCIsInBhcnNlZExlZnQiLCJwYXJzZWRSaWdodCIsIm1lcmdlZCIsImxlZnQiLCJyaWdodCIsIml0ZW1JbmRleCIsIlpvZFJlY29yZCIsImtleVR5cGUiLCJ2YWx1ZVR5cGUiLCJ0aGlyZCIsIlpvZE1hcCIsImZpbmFsTWFwIiwiWm9kU2V0IiwiZmluYWxpemVTZXQiLCJlbGVtZW50cyIsInBhcnNlZFNldCIsImVsZW1lbnQiLCJtaW5TaXplIiwibWF4U2l6ZSIsInNpemUiLCJnZXR0ZXIiLCJleHBlY3RlZFZhbHVlcyIsImVudW1WYWx1ZXMiLCJuZXdEZWYiLCJvcHQiLCJuYXRpdmVFbnVtVmFsdWVzIiwicHJvbWlzaWZpZWQiLCJlZmZlY3QiLCJjaGVja0N0eCIsImFyZyIsInByb2Nlc3NlZCIsImV4ZWN1dGVSZWZpbmVtZW50IiwiYWNjIiwiYmFzZSIsInByZXByb2Nlc3MiLCJuZXdDdHgiLCJab2ROYU4iLCJpblJlc3VsdCIsImZyZWV6ZSIsImNsZWFuUGFyYW1zIiwiY3VzdG9tIiwiZmF0YWwiLCJyIiwiX2ZhdGFsIiwiaW5zdGFuY2VPZlR5cGUiLCJjbHMiLCJzdHJpbmdUeXBlIiwibnVtYmVyVHlwZSIsImJvb2xlYW5UeXBlIiwiYW55VHlwZSIsImFycmF5VHlwZSIsIm9iamVjdFR5cGUiLCJ1bmlvblR5cGUiLCJkaXNjcmltaW5hdGVkVW5pb25UeXBlIiwicmVjb3JkVHlwZSIsImxhenlUeXBlIiwibGl0ZXJhbFR5cGUiLCJlbnVtVHlwZSIsInBhcnNlQW55RGVmIiwicGFyc2VBcnJheURlZiIsInBhcnNlRGVmIiwicGFyc2VCaWdpbnREZWYiLCJwYXJzZUJvb2xlYW5EZWYiLCJwYXJzZUJyYW5kZWREZWYiLCJfZGVmIiwicGFyc2VDYXRjaERlZiIsInBhcnNlRGF0ZURlZiIsIm92ZXJyaWRlRGF0ZVN0cmF0ZWd5Iiwic3RyYXRlZ3kiLCJpbnRlZ2VyRGF0ZVBhcnNlciIsInBhcnNlRGVmYXVsdERlZiIsInBhcnNlRWZmZWN0c0RlZiIsImZvcmNlUmVzb2x1dGlvbiIsInBhcnNlRW51bURlZiIsImlzSnNvblNjaGVtYTdBbGxPZlR5cGUiLCJwYXJzZUludGVyc2VjdGlvbkRlZiIsInVuZXZhbHVhdGVkUHJvcGVydGllcyIsIm1lcmdlZEFsbE9mIiwibmVzdGVkU2NoZW1hIiwiYWRkaXRpb25hbFByb3BlcnRpZXMiLCJwYXJzZUxpdGVyYWxEZWYiLCJwYXJzZWRUeXBlIiwiem9kUGF0dGVybnMiLCJwYXJzZVN0cmluZ0RlZiIsInByb2Nlc3NQYXR0ZXJuIiwiZXNjYXBlTm9uQWxwaGFOdW1lcmljIiwiYWRkRm9ybWF0IiwiYWRkUGF0dGVybiIsImMiLCJwcm9jZXNzUmVnRXhwIiwicmVnZXhPckZ1bmN0aW9uIiwiZmxhZ3MiLCJzb3VyY2UiLCJpc0VzY2FwZWQiLCJpbkNoYXJHcm91cCIsImluQ2hhclJhbmdlIiwicmVnZXhUZXN0IiwicGFyc2VSZWNvcmREZWYiLCJwYXJzZU1hcERlZiIsInBhcnNlTmF0aXZlRW51bURlZiIsImFjdHVhbFZhbHVlcyIsInBhcnNlZFR5cGVzIiwicGFyc2VOZXZlckRlZiIsInBhcnNlTnVsbERlZiIsInByaW1pdGl2ZU1hcHBpbmdzIiwicGFyc2VVbmlvbkRlZiIsImFzQW55T2YiLCJ1bmlxdWVUeXBlcyIsImFueU9mIiwicGFyc2VOdWxsYWJsZURlZiIsInBhcnNlTnVtYmVyRGVmIiwiZGVjaWRlQWRkaXRpb25hbFByb3BlcnRpZXMiLCJwYXJzZU9iamVjdERlZiIsInByb3BOYW1lIiwicHJvcERlZiIsInByb3BlcnR5UGF0aCIsInBhcnNlZERlZiIsInBhcnNlT3B0aW9uYWxEZWYiLCJpbm5lclNjaGVtYSIsInBhcnNlUGlwZWxpbmVEZWYiLCJwYXJzZVByb21pc2VEZWYiLCJwYXJzZVNldERlZiIsInBhcnNlVHVwbGVEZWYiLCJwYXJzZVVuZGVmaW5lZERlZiIsInBhcnNlVW5rbm93bkRlZiIsInBhcnNlUmVhZG9ubHlEZWYiLCJzZWVuSXRlbSIsIm92ZXJyaWRlUmVzdWx0Iiwic2VlblNjaGVtYSIsImdldCRyZWYiLCJuZXdJdGVtIiwianNvblNjaGVtYSIsInNlbGVjdFBhcnNlciIsImFkZE1ldGEiLCJnZXRSZWxhdGl2ZVBhdGgiLCJwYXRoQSIsInBhdGhCIiwidHlwZU5hbWUiLCJ6b2RUb0pzb25TY2hlbWEiLCJtYWluIiwidGl0bGUiLCJkZWZpbml0aW9ucyIsInByb2Nlc3NlZERlZmluaXRpb25zIiwibmV3RGVmaW5pdGlvbnMiLCJjb21iaW5lZCIsIm1ha2VQYXJzZWFibGVSZXNwb25zZVRvb2wiLCJ0b29sIiwiY2FsbGJhY2siLCJ0b1N0cmljdEpzb25TY2hlbWEiLCJzY2hlbWFDb3B5IiwiZW5zdXJlU3RyaWN0SnNvblNjaGVtYSIsImlzTnVsbGFibGUiLCJvbmVPZlZhcmlhbnQiLCJhbGxPZlZhcmlhbnQiLCJpc09iamVjdCIsImRlZk5hbWUiLCJkZWZTY2hlbWEiLCJkZWZpbml0aW9uTmFtZSIsImRlZmluaXRpb25TY2hlbWEiLCJyZXF1aXJlZCIsInByb3BlcnRpZXMiLCJwcm9wU2NoZW1hIiwidmFyaWFudCIsInJlc29sdmVkIiwiaGFzTW9yZVRoYW5OS2V5cyIsInJlc29sdmVSZWYiLCJwYXRoUGFydHMiLCJuIiwiem9kVjNUb0pzb25TY2hlbWEiLCJfem9kVG9Kc29uU2NoZW1hIiwiem9kVjRUb0pzb25TY2hlbWEiLCJ6NC50b0pTT05TY2hlbWEiLCJpc1pvZFY0Iiwiem9kT2JqZWN0Iiwiem9kVGV4dEZvcm1hdCIsInByb3BzIiwiY29udGVudCIsInpvZFJlc3BvbnNlc0Z1bmN0aW9uIiwiQWdlbnRzRXJyb3IiLCJzdGF0ZSIsIl9fcHVibGljRmllbGQiLCJTeXN0ZW1FcnJvciIsIk1heFR1cm5zRXhjZWVkZWRFcnJvciIsIk1vZGVsQmVoYXZpb3JFcnJvciIsIlVzZXJFcnJvciIsIkd1YXJkcmFpbEV4ZWN1dGlvbkVycm9yIiwiVG9vbENhbGxFcnJvciIsIklucHV0R3VhcmRyYWlsVHJpcHdpcmVUcmlnZ2VyZWQiLCJPdXRwdXRHdWFyZHJhaWxUcmlwd2lyZVRyaWdnZXJlZCIsInJlYWRab2REZWZpbml0aW9uIiwiY2FuZGlkYXRlIiwicmVhZFpvZFR5cGUiLCJyYXdUeXBlIiwibG93ZXIiLCJpc1pvZE9iamVjdCIsImlzQWdlbnRUb29sSW5wdXQiLCJKU09OX1NDSEVNQV9EUkFGVF8wNyIsIk9QVElPTkFMX1dSQVBQRVJTIiwiREVDT1JBVE9SX1dSQVBQRVJTIiwiU0lNUExFX1RZUEVfTUFQUElORyIsImhhc0pzb25TY2hlbWFPYmplY3RTaGFwZSIsInpvZEpzb25TY2hlbWFDb21wYXQiLCJidWlsZE9iamVjdFNjaGVtYSIsInJlYWRTaGFwZSIsImZpZWxkIiwib3B0aW9uYWwiLCJjb252ZXJ0UHJvcGVydHkiLCJjdXJyZW50IiwidW53cmFwRGVjb3JhdG9ycyIsIm5leHQiLCJjb252ZXJ0U2NoZW1hIiwidW53cmFwcGVkIiwiYnVpbGRBcnJheVNjaGVtYSIsImJ1aWxkVHVwbGVTY2hlbWEiLCJidWlsZFVuaW9uU2NoZW1hIiwiYnVpbGRJbnRlcnNlY3Rpb25TY2hlbWEiLCJidWlsZExpdGVyYWwiLCJidWlsZEVudW0iLCJidWlsZFJlY29yZFNjaGVtYSIsImJ1aWxkTWFwU2NoZW1hIiwiYnVpbGRTZXRTY2hlbWEiLCJidWlsZE51bGxhYmxlU2NoZW1hIiwiZXh0cmFjdEZpcnN0IiwiY29lcmNlQXJyYXkiLCJ2YWx1ZVNjaGVtYSIsImxpdGVyYWwiLCJ6b2RSZXNwb25zZXNGdW5jdGlvbkNvbXBhdCIsInpvZFRleHRGb3JtYXRDb21wYXQiLCJidWlsZEpzb25TY2hlbWFGcm9tWm9kIiwiaW5wdXRUeXBlIiwidG9GdW5jdGlvblRvb2xOYW1lIiwiZ2V0U2NoZW1hQW5kUGFyc2VyRnJvbUlucHV0VHlwZSIsInVzZUZhbGxiYWNrIiwib3JpZ2luYWxFcnJvciIsImZhbGxiYWNrU2NoZW1hIiwicmF3SW5wdXQiLCJmb3JtYXR0ZWRGdW5jdGlvbiIsImNvbnZlcnRBZ2VudE91dHB1dFR5cGVUb1NlcmlhbGl6YWJsZSIsIm91dHB1dFR5cGUiLCJleGlzdGluZyIsIm91dHB1dCIsInMiLCJoIiwiZCIsInciLCJ5IiwibXMiLCJwYXJzZSIsImZtdExvbmciLCJmbXRTaG9ydCIsInN0ciIsIm1hdGNoIiwibXNBYnMiLCJwbHVyYWwiLCJpc1BsdXJhbCIsInNldHVwIiwiZW52IiwiY3JlYXRlRGVidWciLCJjb2VyY2UiLCJkaXNhYmxlIiwiZW5hYmxlIiwiZW5hYmxlZCIsInJlcXVpcmUkJDAiLCJkZXN0cm95Iiwic2VsZWN0Q29sb3IiLCJuYW1lc3BhY2UiLCJoYXNoIiwicHJldlRpbWUiLCJlbmFibGVPdmVycmlkZSIsIm5hbWVzcGFjZXNDYWNoZSIsImVuYWJsZWRDYWNoZSIsImRlYnVnIiwic2VsZiIsImZvcm1hdHRlciIsImV4dGVuZCIsImRlbGltaXRlciIsIm5ld0RlYnVnIiwibmFtZXNwYWNlcyIsInNwbGl0IiwibnMiLCJtYXRjaGVzVGVtcGxhdGUiLCJzZWFyY2giLCJ0ZW1wbGF0ZSIsInNlYXJjaEluZGV4IiwidGVtcGxhdGVJbmRleCIsInN0YXJJbmRleCIsIm1hdGNoSW5kZXgiLCJza2lwIiwiY29tbW9uIiwiZXhwb3J0cyIsImZvcm1hdEFyZ3MiLCJzYXZlIiwibG9hZCIsInVzZUNvbG9ycyIsImxvY2Fsc3RvcmFnZSIsIndhcm5lZCIsIm1vZHVsZSIsImxhc3RDIiwiZm9ybWF0dGVycyIsImxvYWRFbnYiLCJfbG9hZEVudiIsImlzRW5hYmxlZCIsImZsYWdOYW1lIiwidHJhY2luZyIsImxvZ2dpbmciLCJkb250TG9nTW9kZWxEYXRhIiwiZG9udExvZ1Rvb2xEYXRhIiwiZ2V0TG9nZ2VyIiwibG9nZ2VyIiwiQllURV9QUkVWSUVXX0xJTUlUIiwidG9TbWFydFN0cmluZyIsImlzQXJyYXlCdWZmZXJMaWtlIiwiZm9ybWF0Qnl0ZUFycmF5IiwiaXNBcnJheUJ1ZmZlclZpZXciLCJ2aWV3Iiwic21hcnRTdHJpbmdSZXBsYWNlciIsInNoYXJlZEFycmF5QnVmZmVyQ3RvciIsImlzU2VyaWFsaXplZEJ1ZmZlclNuYXBzaG90IiwiaXNOb2RlQnVmZmVyIiwiYnVmZmVyQ3RvciIsImJ5dGVzIiwicHJldmlld0xlbmd0aCIsInByZXZpZXdQYXJ0cyIsImZvcm1hdEJ5dGUiLCJlbGxpcHNpcyIsImJ5dGUiLCJfa2V5IiwibmVzdGVkVmFsdWUiLCJpc0NvbXB1dGVyUHJvdmlkZXIiLCJjb21wdXRlckNhY2hlIiwiY29tcHV0ZXJJbml0aWFsaXplck1hcCIsImNvbXB1dGVyc0J5UnVuQ29udGV4dCIsImdldENvbXB1dGVySW5pdGlhbGl6ZXIiLCJpbml0aWFsaXplciIsInRyYWNrUmVzb2x2ZWRDb21wdXRlciIsInJ1bkNvbnRleHQiLCJyZXNvbHZlZEJ5UnVuIiwicmVzb2x2ZUNvbXB1dGVyIiwidG9vbEtleSIsInBlckNvbnRleHQiLCJjYWNoZWQiLCJpbml0aWFsaXplckNvbmZpZyIsImxpZmVjeWNsZSIsImRpc3Bvc2VyIiwiY29tcHV0ZXIiLCJkaXNwb3NlUmVzb2x2ZWRDb21wdXRlcnMiLCJkaXNwb3NlcnMiLCJzdG9yZWRJbml0aWFsaXplciIsImRpc3Bvc2UiLCJkZWZhdWx0VG9vbEVycm9yRnVuY3Rpb24iLCJjb250ZXh0IiwidG9vbEVycm9yRnVuY3Rpb24iLCJzdHJpY3RNb2RlIiwicGFyYW1ldGVycyIsIl9pbnZva2UiLCJkZXRhaWxzIiwicGFyc2VkIiwic3RyaW5nUmVzdWx0IiwiaW52b2tlIiwiY3VycmVudFNwYW4iLCJnZXRDdXJyZW50U3BhbiIsIm5lZWRzQXBwcm92YWwiLCJhZ2VudCIsInByZWRpY2F0ZSIsInoub2JqZWN0Iiwiei5zdHJpbmciLCJ6LmxpdGVyYWwiLCJ6LnJlY29yZCIsInouYW55Iiwiei5hcnJheSIsInouYm9vbGVhbiIsIl9jYWNoZWRUb29scyIsIl9jYWNoZWRUb29sS2V5c0J5U2VydmVyIiwiZGVmYXVsdE1DUFRvb2xDYWNoZUtleSIsInNlcnZlciIsImdldEZ1bmN0aW9uVG9vbHNGcm9tU2VydmVyIiwiY29udmVydFNjaGVtYXNUb1N0cmljdCIsImdlbmVyYXRlTUNQVG9vbENhY2hlS2V5IiwiY2FjaGVLZXkiLCJ0IiwibWNwVG9GdW5jdGlvblRvb2wiLCJsaXN0VG9vbHNGb3JTZXJ2ZXIiLCJzcGFuIiwiZmV0Y2hlZE1jcFRvb2xzIiwibWNwVG9vbHMiLCJmaWx0ZXJlZFRvb2xzIiwiZmlsdGVyIiwiZ2xvYmFsTG9nZ2VyIiwiYWxsb3dlZFRvb2xOYW1lcyIsImJsb2NrZWRUb29sTmFtZXMiLCJhbGxvd2VkIiwiYmxvY2tlZCIsInRvb2xzIiwiZ2V0Q3VycmVudFRyYWNlIiwid2l0aE1DUExpc3RUb29sc1NwYW4iLCJnZXRBbGxNY3BUb29scyIsIm1jcFNlcnZlcnNPck9wdHMiLCJtY3BTZXJ2ZXJzIiwiY29udmVydFNjaGVtYXNUb1N0cmljdEZyb21PcHRzIiwicnVuQ29udGV4dEZyb21PcHRzIiwiYWdlbnRGcm9tT3B0cyIsImFsbFRvb2xzIiwidG9vbE5hbWVzIiwic2VydmVyVG9vbHMiLCJpbnRlcnNlY3Rpb24iLCJtY3BUb29sIiwiX2NvbnRleHQiLCJzdHJpY3RTY2hlbWEiLCJub25TdHJpY3RTY2hlbWEiLCJvdXQiLCJCcm93c2VyRXZlbnRFbWl0dGVyIiwiX19wcml2YXRlQWRkIiwiX3RhcmdldCIsIl9saXN0ZW5lcldyYXBwZXJzIiwibGlzdGVuZXIiLCJldmVudFR5cGUiLCJsaXN0ZW5lcnNGb3JUeXBlIiwiX19wcml2YXRlR2V0Iiwid3JhcHBlcnMiLCJ3cmFwcGVyIiwiZXZlbnQiLCJoYW5kbGVyIiwicmFuZG9tVVVJRCIsIlJlYWRhYmxlIiwiX2Rlc3RpbmF0aW9uIiwiX3RyYW5zZm9ybSIsIlJlYWRhYmxlU3RyZWFtIiwiVHJhbnNmb3JtU3RyZWFtIiwiQXN5bmNMb2NhbFN0b3JhZ2UiLCJCcm93c2VyVGltZXIiLCJ0aW1lb3V0IiwidGltZW91dElkIiwidGltZXIiLCJFdmVudEVtaXR0ZXJEZWxlZ2F0ZSIsIkFnZW50SG9va3MiLCJSdW50aW1lRXZlbnRFbWl0dGVyIiwiUnVuSG9va3MiLCJPUEVOQUlfREVGQVVMVF9NT0RFTF9FTlZfVkFSSUFCTEVfTkFNRSIsImdwdDVSZWFzb25pbmdTZXR0aW5nc1JlcXVpcmVkIiwibW9kZWxOYW1lIiwiaXNHcHQ1RGVmYXVsdCIsImdldERlZmF1bHRNb2RlbCIsImdldERlZmF1bHRNb2RlbFNldHRpbmdzIiwibW9kZWwiLCJfbW9kZWwiLCJnZXRUcmFuc2Zlck1lc3NhZ2UiLCJkZWZhdWx0SGFuZG9mZlRvb2xOYW1lIiwiZGVmYXVsdEhhbmRvZmZUb29sRGVzY3JpcHRpb24iLCJIYW5kb2ZmIiwib25JbnZva2VIYW5kb2ZmIiwiaGFuZG9mZiIsImNvbmZpZyIsImhhc09uSGFuZG9mZiIsImhhc0lucHV0VHlwZSIsImlucHV0SnNvblN0cmluZyIsImFkZEVycm9yVG9DdXJyZW50U3BhbiIsImdldEhhbmRvZmYiLCJnZXRMYXN0VGV4dEZyb21PdXRwdXRNZXNzYWdlIiwib3V0cHV0TWVzc2FnZSIsImxhc3RJdGVtIiwiZ2V0T3V0cHV0VGV4dCIsImFnZW50VG9vbFJ1blJlc3VsdHMiLCJzYXZlQWdlbnRUb29sUnVuUmVzdWx0IiwidG9vbENhbGwiLCJydW5SZXN1bHQiLCJjb25zdW1lQWdlbnRUb29sUnVuUmVzdWx0IiwiQWdlbnRBc1Rvb2xOZWVkQXBwcm92YWxTY2hhbWUiLCJfQWdlbnQiLCJvdXRwdXRUeXBlcyIsInRvb2xOYW1lIiwidG9vbERlc2NyaXB0aW9uIiwiY3VzdG9tT3V0cHV0RXh0cmFjdG9yIiwicnVuQ29uZmlnIiwicnVuT3B0aW9ucyIsIm9uU3RyZWFtIiwiZXZlbnRIYW5kbGVycyIsImVtaXRFdmVudCIsInNwZWNpZmljIiwid2lsZGNhcmQiLCJjYW5kaWRhdGVzIiwiYWdlbnRUb29sIiwicnVubmVyIiwiUnVubmVyIiwic2hvdWxkU3RyZWFtIiwic3RyZWFtUGF5bG9hZCIsInN0cmVhbVJlc3VsdCIsImNvbXBsZXRlZFJlc3VsdCIsInVzZXNTdG9wQXRUb29sTmFtZXMiLCJvdXRwdXRUZXh0Iiwic2V0IiwiZW5hYmxlZFRvb2xzIiwibWF5YmVJc0VuYWJsZWQiLCJoYW5kb2ZmcyIsIkFnZW50IiwiZGVmaW5lSW5wdXRHdWFyZHJhaWwiLCJleGVjdXRlIiwicnVuSW5QYXJhbGxlbCIsImRlZmluZU91dHB1dEd1YXJkcmFpbCIsImdldERlZmF1bHRNb2RlbFByb3ZpZGVyIiwiU2hhcmVkQmFzZSIsIkl0ZW1CYXNlIiwiUmVmdXNhbCIsIk91dHB1dFRleHQiLCJJbnB1dFRleHQiLCJSZWFzb25pbmdUZXh0IiwiSW5wdXRJbWFnZSIsInpcbiAgICAgICAgLy8gMS4gaW1hZ2UgZGF0YVxuICAgICAgICAuc3RyaW5nIiwiSW5wdXRGaWxlIiwielxuICAgICAgICAvLyAxLiBmaWxlIGRhdGFcbiAgICAgICAgLnN0cmluZyIsIkF1ZGlvQ29udGVudCIsInpcbiAgICAgICAgLnN0cmluZyIsIkltYWdlQ29udGVudCIsIlRvb2xPdXRwdXRUZXh0IiwiSW1hZ2VEYXRhT2JqZWN0U2NoZW1hIiwielxuICAgICAgICAudW5pb24iLCJ6Lmluc3RhbmNlb2YiLCJJbWFnZVVybE9iamVjdFNjaGVtYSIsIkltYWdlRmlsZUlkT2JqZWN0U2NoZW1hIiwiSW1hZ2VPYmplY3RTY2hlbWEiLCJ6XG4gICAgLnVuaW9uIiwiRmlsZURhdGFPYmplY3RTY2hlbWEiLCJGaWxlVXJsT2JqZWN0U2NoZW1hIiwiRmlsZUlkT2JqZWN0U2NoZW1hIiwiRmlsZVJlZmVyZW5jZVNjaGVtYSIsInpTdHJpbmdXaXRoSGludHMiLCJfaGludHMiLCJUb29sT3V0cHV0SW1hZ2UiLCJUb29sT3V0cHV0RmlsZUNvbnRlbnQiLCJDb21wdXRlclRvb2xPdXRwdXQiLCJjb21wdXRlckFjdGlvbnMiLCJ6LmRpc2NyaW1pbmF0ZWRVbmlvbiIsInoubnVtYmVyIiwiei5lbnVtIiwiQXNzaXN0YW50Q29udGVudCIsIk1lc3NhZ2VCYXNlIiwiQXNzaXN0YW50TWVzc2FnZUl0ZW0iLCJVc2VyQ29udGVudCIsIlVzZXJNZXNzYWdlSXRlbSIsIlN5c3RlbU1lc3NhZ2VJdGVtIiwiSG9zdGVkVG9vbENhbGxJdGVtIiwiRnVuY3Rpb25DYWxsSXRlbSIsIlRvb2xDYWxsT3V0cHV0Q29udGVudCIsIlRvb2xDYWxsU3RydWN0dXJlZE91dHB1dCIsIkZ1bmN0aW9uQ2FsbFJlc3VsdEl0ZW0iLCJDb21wdXRlclVzZUNhbGxJdGVtIiwiQ29tcHV0ZXJDYWxsUmVzdWx0SXRlbSIsIlNoZWxsQWN0aW9uIiwiU2hlbGxDYWxsSXRlbSIsIlNoZWxsQ2FsbE91dGNvbWUiLCJTaGVsbENhbGxPdXRwdXRDb250ZW50IiwielxuICAgIC5vYmplY3QiLCJTaGVsbENhbGxSZXN1bHRJdGVtIiwiQXBwbHlQYXRjaE9wZXJhdGlvbkNyZWF0ZUZpbGUiLCJBcHBseVBhdGNoT3BlcmF0aW9uVXBkYXRlRmlsZSIsIkFwcGx5UGF0Y2hPcGVyYXRpb25EZWxldGVGaWxlIiwiQXBwbHlQYXRjaE9wZXJhdGlvbiIsIkFwcGx5UGF0Y2hDYWxsSXRlbSIsIkFwcGx5UGF0Y2hDYWxsUmVzdWx0SXRlbSIsIlRvb2xDYWxsSXRlbSIsIlJlYXNvbmluZ0l0ZW0iLCJDb21wYWN0aW9uSXRlbSIsIlVua25vd25JdGVtIiwiT3V0cHV0TW9kZWxJdGVtIiwiTW9kZWxJdGVtIiwiei51bmlvbiIsIlJlcXVlc3RVc2FnZURhdGEiLCJVc2FnZURhdGEiLCJTdHJlYW1FdmVudFRleHRTdHJlYW0iLCJTdHJlYW1FdmVudFJlc3BvbnNlU3RhcnRlZCIsIlN0cmVhbUV2ZW50UmVzcG9uc2VDb21wbGV0ZWQiLCJTdHJlYW1FdmVudEdlbmVyaWNJdGVtIiwiUmVxdWVzdFVzYWdlIiwiaW5wdXRUb2tlbnNEZXRhaWxzIiwib3V0cHV0VG9rZW5zRGV0YWlscyIsIlVzYWdlIiwicmVxdWVzdFVzYWdlRW50cmllcyIsIm5vcm1hbGl6ZWRSZXF1ZXN0VXNhZ2VFbnRyaWVzIiwibmV3VXNhZ2UiLCJSdW5Db250ZXh0IiwiX2FwcHJvdmFscyIsIl9fcHJpdmF0ZVNldCIsImFwcHJvdmFscyIsImFwcHJvdmFsIiwiY2FsbElkIiwiYXBwcm92YWxFbnRyeSIsImluZGl2aWR1YWxDYWxsQXBwcm92YWwiLCJpbmRpdmlkdWFsQ2FsbFJlamVjdGlvbiIsImFwcHJvdmFsSXRlbSIsImFsd2F5c0FwcHJvdmUiLCJhbHdheXNSZWplY3QiLCJpc0NvbXB1dGVySW5zdGFuY2UiLCJzZXJpYWxpemVUb29sIiwic2VyaWFsaXplSGFuZG9mZiIsIlJ1bkl0ZW1CYXNlIiwiUnVuTWVzc2FnZU91dHB1dEl0ZW0iLCJyYXdJdGVtIiwicGFydCIsIlJ1blRvb2xDYWxsSXRlbSIsIlJ1blRvb2xDYWxsT3V0cHV0SXRlbSIsIlJ1blJlYXNvbmluZ0l0ZW0iLCJSdW5IYW5kb2ZmQ2FsbEl0ZW0iLCJSdW5IYW5kb2ZmT3V0cHV0SXRlbSIsInNvdXJjZUFnZW50IiwidGFyZ2V0QWdlbnQiLCJSdW5Ub29sQXBwcm92YWxJdGVtIiwiX3dpdGhTcGFuRmFjdG9yeSIsImNyZWF0ZVNwYW4iLCJ3aXRoTmV3U3BhbkNvbnRleHQiLCJzZXRDdXJyZW50U3BhbiIsInJlc2V0Q3VycmVudFNwYW4iLCJjcmVhdGVBZ2VudFNwYW4iLCJnZXRHbG9iYWxUcmFjZVByb3ZpZGVyIiwiY3JlYXRlRnVuY3Rpb25TcGFuIiwid2l0aEZ1bmN0aW9uU3BhbiIsImNyZWF0ZUhhbmRvZmZTcGFuIiwid2l0aEhhbmRvZmZTcGFuIiwiY3JlYXRlR3VhcmRyYWlsU3BhbiIsIndpdGhHdWFyZHJhaWxTcGFuIiwiY3JlYXRlTUNQTGlzdFRvb2xzU3BhbiIsImVuY29kZVVpbnQ4QXJyYXlUb0Jhc2U2NCIsImdsb2JhbEJ1ZmZlciIsImJpbmFyeSIsImNoYXJzIiwiYzEiLCJjMiIsImMzIiwiZW5jMSIsImVuYzIiLCJlbmMzIiwiZW5jNCIsIlJ1blJhd01vZGVsU3RyZWFtRXZlbnQiLCJSdW5JdGVtU3RyZWFtRXZlbnQiLCJSdW5BZ2VudFVwZGF0ZWRTdHJlYW1FdmVudCIsImlzT3BlbkFJUmVzcG9uc2VzQ29tcGFjdGlvbkF3YXJlU2Vzc2lvbiIsInNlc3Npb24iLCJpc0FwcHJvdmFsSXRlbUxpa2UiLCJpdGVtVHlwZSIsImdldEFwcHJvdmFsSWRlbnRpdHkiLCJwcm92aWRlckRhdGEiLCJhZ2VudE5hbWUiLCJmb3JtYXRGaW5hbE91dHB1dFR5cGVFcnJvciIsInouWm9kRXJyb3IiLCJpc3N1ZVBhdGhQYXJ0cyIsImlzc3VlUGF0aCIsInRydW5jYXRlRm9yRGV2ZWxvcGVyIiwidHJpbW1lZCIsInByb2Nlc3NNb2RlbFJlc3BvbnNlIiwibW9kZWxSZXNwb25zZSIsInJ1bkhhbmRvZmZzIiwicnVuRnVuY3Rpb25zIiwicnVuQ29tcHV0ZXJBY3Rpb25zIiwicnVuU2hlbGxBY3Rpb25zIiwicnVuQXBwbHlQYXRjaEFjdGlvbnMiLCJydW5NQ1BBcHByb3ZhbFJlcXVlc3RzIiwidG9vbHNVc2VkIiwiaGFuZG9mZk1hcCIsImZ1bmN0aW9uTWFwIiwiY29tcHV0ZXJUb29sIiwic2hlbGxUb29sIiwiYXBwbHlQYXRjaFRvb2wiLCJtY3BUb29sTWFwIiwibWNwU2VydmVyTGFiZWwiLCJtY3BTZXJ2ZXJUb29sIiwiZnVuY3Rpb25Ub29sIiwibmV4dFN0ZXBTY2hlbWEiLCJTaW5nbGVTdGVwUmVzdWx0Iiwib3JpZ2luYWxJbnB1dCIsInByZVN0ZXBJdGVtcyIsIm5ld1N0ZXBJdGVtcyIsIm5leHRTdGVwIiwibWF5YmVSZXNldFRvb2xDaG9pY2UiLCJ0b29sVXNlVHJhY2tlciIsIm1vZGVsU2V0dGluZ3MiLCJyZXNvbHZlSW50ZXJydXB0ZWRUdXJuIiwib3JpZ2luYWxQcmVTdGVwSXRlbXMiLCJuZXdSZXNwb25zZSIsInByb2Nlc3NlZFJlc3BvbnNlIiwiZnVuY3Rpb25DYWxsSWRzIiwicGVuZGluZ0FwcHJvdmFsSXRlbXMiLCJwZW5kaW5nQXBwcm92YWxJZGVudGl0aWVzIiwiaWRlbnRpdHkiLCJyZXdpbmRDb3VudCIsImZ1bmN0aW9uVG9vbFJ1bnMiLCJydW4iLCJmdW5jdGlvblJlc3VsdHMiLCJleGVjdXRlRnVuY3Rpb25Ub29sQ2FsbHMiLCJjb21wdXRlclJlc3VsdHMiLCJleGVjdXRlQ29tcHV0ZXJBY3Rpb25zIiwib3JpZ2luYWxQcmVTdGVwSXRlbVNldCIsIm5ld0l0ZW1zIiwibmV3SXRlbXNTZXQiLCJhcHBlbmRJZk5ldyIsIm1jcEFwcHJvdmFsUnVucyIsInBlbmRpbmdIb3N0ZWRNQ1BBcHByb3ZhbHMiLCJwZW5kaW5nSG9zdGVkTUNQQXBwcm92YWxJZHMiLCJhcHByb3ZhbFJlcXVlc3RJZCIsImFwcHJvdmVkIiwicmVzcG9uc2VJdGVtIiwiY29tcGxldGVkU3RlcCIsIm1heWJlQ29tcGxldGVUdXJuRnJvbVRvb2xSZXN1bHRzIiwicmVzb2x2ZVR1cm5BZnRlck1vZGVsUmVzcG9uc2UiLCJzZWVuSXRlbXMiLCJzaGVsbFJlc3VsdHMiLCJhcHBseVBhdGNoUmVzdWx0cyIsImV4ZWN1dGVTaGVsbEFjdGlvbnMiLCJleGVjdXRlQXBwbHlQYXRjaE9wZXJhdGlvbnMiLCJhcHByb3ZhbFJlcXVlc3QiLCJ0b29sRGF0YSIsInJlcXVlc3REYXRhIiwiYXBwcm92YWxSZXN1bHQiLCJhcHByb3ZhbFJlc3BvbnNlRGF0YSIsImV4ZWN1dGVIYW5kb2ZmQ2FsbHMiLCJtZXNzYWdlSXRlbXMiLCJwb3RlbnRpYWxGaW5hbE91dHB1dCIsIm91dHB1dEVycm9yTWVzc2FnZSIsInRvb2xPdXRjb21lIiwiY2hlY2tGb3JGaW5hbE91dHB1dEZyb21Ub29scyIsImdldFRvb2xDYWxsT3V0cHV0SXRlbSIsIm1heWJlU3RydWN0dXJlZE91dHB1dHMiLCJub3JtYWxpemVTdHJ1Y3R1cmVkVG9vbE91dHB1dHMiLCJzdHJ1Y3R1cmVkSXRlbXMiLCJjb252ZXJ0U3RydWN0dXJlZFRvb2xPdXRwdXRUb0lucHV0SXRlbSIsIm5vcm1hbGl6ZUZpbGVWYWx1ZSIsImRpcmVjdEZpbGUiLCJub3JtYWxpemVkT2JqZWN0Iiwibm9ybWFsaXplRmlsZU9iamVjdENhbmRpZGF0ZSIsImxlZ2FjeVZhbHVlIiwibm9ybWFsaXplTGVnYWN5RmlsZVZhbHVlIiwiaXNSZWNvcmQiLCJkYXRhVmFsdWUiLCJoYXNTdHJpbmdEYXRhIiwiaGFzQmluYXJ5RGF0YSIsImlzTm9uRW1wdHlTdHJpbmciLCJyZWZlcmVuY2VkSWQiLCJmaWxlbmFtZSIsIm1lZGlhVHlwZSIsInRvSW5saW5lSW1hZ2VTdHJpbmciLCJhc0RhdGFVcmwiLCJ0b29sUnVucyIsInJ1blNpbmdsZVRvb2wiLCJ0b29sUnVuIiwicGFyc2VkQXJncyIsInJlc3BvbnNlIiwidG9vbE91dHB1dCIsImZ1bmN0aW9uUmVzdWx0IiwibmVzdGVkUnVuUmVzdWx0IiwibmVzdGVkSW50ZXJydXB0aW9ucyIsImVycm9yUmVzdWx0IiwiX3J1bkNvbXB1dGVyQWN0aW9uQW5kU2NyZWVuc2hvdCIsImFjdGlvbiIsInNjcmVlbnNob3QiLCJ0b0Vycm9yTWVzc2FnZSIsImFjdGlvbnMiLCJjdXN0b21Mb2dnZXIiLCJfbG9nZ2VyIiwiZGVjaXNpb24iLCJyZWplY3Rpb25PdXRwdXQiLCJzaGVsbE91dHB1dHMiLCJwcm92aWRlck1ldGEiLCJtYXhPdXRwdXRMZW5ndGgiLCJzaGVsbFJlc3VsdCIsImltYWdlVXJsIiwiYWN0dWFsSGFuZG9mZiIsImhhbmRvZmZTcGFuIiwibmV3QWdlbnQiLCJyZXF1ZXN0ZWRBZ2VudHMiLCJpbnB1dEZpbHRlciIsImhhbmRvZmZJbnB1dERhdGEiLCJOT1RfRklOQUxfT1VUUFVUIiwidG9vbFJlc3VsdHMiLCJpbnRlcnJ1cHRpb25zIiwiZmlyc3RUb29sUmVzdWx0IiwidG9vbFVzZUJlaGF2aW9yIiwic3RvcHBpbmdUb29sIiwiZ2V0UnVuSXRlbVN0cmVhbUV2ZW50TmFtZSIsImVucXVldWVSdW5JdGVtU3RyZWFtRXZlbnQiLCJpdGVtTmFtZSIsInN0cmVhbVN0ZXBJdGVtc1RvUnVuUmVzdWx0IiwiYWRkU3RlcFRvUnVuUmVzdWx0Iiwic2tpcHBlZEl0ZW1zIiwiQWdlbnRUb29sVXNlVHJhY2tlciIsIl9hZ2VudFRvVG9vbHMiLCJ0b0lucHV0SXRlbUxpc3QiLCJleHRyYWN0T3V0cHV0SXRlbXNGcm9tUnVuSXRlbXMiLCJub3JtYWxpemVJdGVtc0ZvclNlc3Npb25QZXJzaXN0ZW5jZSIsInNhbml0aXplVmFsdWVGb3JTZXNzaW9uIiwic3RyaXBUcmFuc2llbnRDYWxsSWRzIiwidG9VaW50OEFycmF5SWZCaW5hcnkiLCJ0b0RhdGFVcmxGcm9tQnl0ZXMiLCJpc1BsYWluT2JqZWN0IiwicmVjb3JkIiwibmV4dENvbnRleHQiLCJzbmFwc2hvdCIsInByb3RvIiwic2hvdWxkU3RyaXBJZCIsInNob3VsZFN0cmlwSWRGb3JUeXBlIiwicnVuQ29tcGFjdGlvbk9uU2Vzc2lvbiIsInJlc3BvbnNlSWQiLCJjb21wYWN0aW9uUmVzdWx0IiwidXNhZ2UiLCJzYXZlVG9TZXNzaW9uIiwic2Vzc2lvbklucHV0SXRlbXMiLCJpbnB1dEl0ZW1zIiwiYWxyZWFkeVBlcnNpc3RlZCIsIm5ld1J1bkl0ZW1zIiwib3V0cHV0SXRlbXMiLCJpdGVtc1RvU2F2ZSIsInNhbml0aXplZEl0ZW1zIiwic2F2ZVN0cmVhbUlucHV0VG9TZXNzaW9uIiwic2FuaXRpemVkSW5wdXQiLCJzYXZlU3RyZWFtUmVzdWx0VG9TZXNzaW9uIiwicHJlcGFyZUlucHV0SXRlbXNXaXRoU2Vzc2lvbiIsInNlc3Npb25JbnB1dENhbGxiYWNrIiwiaW5jbHVkZUhpc3RvcnlJblByZXBhcmVkSW5wdXQiLCJwcmVzZXJ2ZURyb3BwZWROZXdJdGVtcyIsImhpc3RvcnkiLCJuZXdJbnB1dEl0ZW1zIiwiaGlzdG9yeVNuYXBzaG90IiwibmV3SW5wdXRTbmFwc2hvdCIsImhpc3RvcnlDb3VudHMiLCJidWlsZEl0ZW1GcmVxdWVuY3lNYXAiLCJuZXdJbnB1dENvdW50cyIsImhpc3RvcnlSZWZzIiwiYnVpbGRJdGVtUmVmZXJlbmNlTWFwIiwibmV3SW5wdXRSZWZzIiwiYXBwZW5kZWQiLCJzZXNzaW9uSXRlbUtleSIsImNvbnN1bWVSZWZlcmVuY2UiLCJkZWNyZW1lbnRDb3VudCIsImhpc3RvcnlSZW1haW5pbmciLCJuZXdSZW1haW5pbmciLCJzdHJ1Y3R1cmVkIiwibm9ybWFsaXplZCIsIm5vcm1hbGl6ZVN0cnVjdHVyZWRUb29sT3V0cHV0IiwiaW1hZ2VTdHJpbmciLCJpbWFnZUZpbGVJZCIsImZhbGxiYWNrSW1hZ2VNZWRpYVR5cGUiLCJpbWFnZUZpZWxkIiwiaW1hZ2VPYmoiLCJpbmxpbmVNZWRpYVR5cGUiLCJjYW5kaWRhdGVJZCIsImZpbGVWYWx1ZSIsImNvdW50cyIsImxpc3QiLCJyZW1haW5pbmciLCJzZXNzaW9uU2VyaWFsaXphdGlvblJlcGxhY2VyIiwiQ1VSUkVOVF9TQ0hFTUFfVkVSU0lPTiIsIiRzY2hlbWFWZXJzaW9uIiwic2VyaWFsaXplZEFnZW50U2NoZW1hIiwic2VyaWFsaXplZFNwYW5CYXNlIiwielxuICAgICAgICAub2JqZWN0IiwiU2VyaWFsaXplZFNwYW4iLCJ6LmxhenkiLCJyZXF1ZXN0VXNhZ2VTY2hlbWEiLCJ1c2FnZVNjaGVtYSIsIm1vZGVsUmVzcG9uc2VTY2hlbWEiLCJwcm90b2NvbC5PdXRwdXRNb2RlbEl0ZW0iLCJpdGVtU2NoZW1hIiwicHJvdG9jb2wuQXNzaXN0YW50TWVzc2FnZUl0ZW0iLCJwcm90b2NvbC5Ub29sQ2FsbEl0ZW0iLCJwcm90b2NvbC5Ib3N0ZWRUb29sQ2FsbEl0ZW0iLCJwcm90b2NvbC5GdW5jdGlvbkNhbGxSZXN1bHRJdGVtIiwicHJvdG9jb2wuUmVhc29uaW5nSXRlbSIsInByb3RvY29sLkZ1bmN0aW9uQ2FsbEl0ZW0iLCJwcm90b2NvbC5TaGVsbENhbGxJdGVtIiwicHJvdG9jb2wuQXBwbHlQYXRjaENhbGxJdGVtIiwic2VyaWFsaXplZFRyYWNlU2NoZW1hIiwic2VyaWFsaXplZFByb2Nlc3NlZFJlc3BvbnNlU2NoZW1hIiwielxuICAgICAgICAuYXJyYXkiLCJndWFyZHJhaWxGdW5jdGlvbk91dHB1dFNjaGVtYSIsImlucHV0R3VhcmRyYWlsUmVzdWx0U2NoZW1hIiwib3V0cHV0R3VhcmRyYWlsUmVzdWx0U2NoZW1hIiwiU2VyaWFsaXplZFJ1blN0YXRlIiwicHJvdG9jb2wuTW9kZWxJdGVtIiwiUnVuU3RhdGUiLCJzdGFydGluZ0FnZW50IiwibWF4VHVybnMiLCJnZXRUdXJuSW5wdXQiLCJpbml0aWFsQWdlbnQiLCJwYXJzaW5nRXJyb3IiLCJqc29uUmVzdWx0IiwiY3VycmVudFNjaGVtYVZlcnNpb24iLCJzdGF0ZUpzb24iLCJhZ2VudE1hcCIsImJ1aWxkQWdlbnRNYXAiLCJjdXJyZW50QWdlbnQiLCJ0cmFjZSIsImRlc2VyaWFsaXplU3BhbiIsImRlc2VyaWFsaXplTW9kZWxSZXNwb25zZSIsImRlc2VyaWFsaXplSXRlbSIsImRlc2VyaWFsaXplUHJvY2Vzc2VkUmVzcG9uc2UiLCJxdWV1ZSIsInNlcmlhbGl6ZWRTcGFuIiwic3BhbkRhdGEiLCJwcmV2aW91c1NwYW4iLCJzZXJpYWxpemVkTW9kZWxSZXNwb25zZSIsInNlcmlhbGl6ZWRJdGVtIiwic2VyaWFsaXplZFByb2Nlc3NlZFJlc3BvbnNlIiwiY29tcHV0ZXJUb29scyIsInNoZWxsVG9vbHMiLCJhcHBseVBhdGNoVG9vbHMiLCJmdW5jdGlvbkNhbGwiLCJjb21wdXRlckFjdGlvbiIsInNoZWxsQWN0aW9uIiwiYXBwbHlQYXRjaEFjdGlvbiIsIl9SdW5uZXJfaW5zdGFuY2VzIiwicmVzb2x2ZWRPcHRpb25zIiwiY2FsbE1vZGVsSW5wdXRGaWx0ZXIiLCJoYXNDYWxsTW9kZWxJbnB1dEZpbHRlciIsImVmZmVjdGl2ZU9wdGlvbnMiLCJzZXJ2ZXJNYW5hZ2VzQ29udmVyc2F0aW9uIiwicmVzdW1pbmdGcm9tU3RhdGUiLCJzZXNzaW9uSW5wdXRPcmlnaW5hbFNuYXBzaG90Iiwic2Vzc2lvbklucHV0RmlsdGVyZWRTbmFwc2hvdCIsInNlc3Npb25JbnB1dFBlbmRpbmdXcml0ZUNvdW50cyIsInJlY29yZFNlc3Npb25JdGVtc0ZvclBlcnNpc3RlbmNlIiwic291cmNlSXRlbXMiLCJmaWx0ZXJlZEl0ZW1zIiwicGVuZGluZ1dyaXRlQ291bnRzIiwicGVyc2lzdGFibGVJdGVtcyIsInNvdXJjZU9jY3VycmVuY2VDb3VudHMiLCJuZXh0Q291bnQiLCJjb25zdW1lQW55UGVuZGluZ1dyaXRlU2xvdCIsImZpbHRlcmVkSXRlbSIsImFsbG9jYXRlZCIsInBlbmRpbmdPY2N1cnJlbmNlcyIsInNvdXJjZUtleSIsImdldEFnZW50SW5wdXRJdGVtS2V5IiwiZmlsdGVyZWRLZXkiLCJmaWx0ZXJlZFJlbWFpbmluZyIsInJlc29sdmVTZXNzaW9uSXRlbXNGb3JQZXJzaXN0ZW5jZSIsInByZXBhcmVkSW5wdXQiLCJwcmVwYXJlZCIsInNlc3Npb25JdGVtcyIsImVuc3VyZVN0cmVhbUlucHV0UGVyc2lzdGVkIiwicGVyc2lzdGVkIiwiaXRlbXNUb1BlcnNpc3QiLCJleGVjdXRlUnVuIiwiX19wcml2YXRlTWV0aG9kIiwicnVuSW5kaXZpZHVhbFN0cmVhbV9mbiIsInJ1bkluZGl2aWR1YWxOb25TdHJlYW1fZm4iLCJ3aXRoVHJhY2UiLCJnZXRPckNyZWF0ZVRyYWNlIiwiZ2V0SW5wdXRHdWFyZHJhaWxEZWZpbml0aW9uc19mbiIsInNwbGl0SW5wdXRHdWFyZHJhaWxzX2ZuIiwiZ3VhcmRyYWlscyIsImJsb2NraW5nIiwicGFyYWxsZWwiLCJndWFyZHJhaWwiLCJyZXNvbHZlTW9kZWxGb3JBZ2VudF9mbiIsImV4cGxpY3RseU1vZGVsU2V0IiwicmVzb2x2ZWRNb2RlbCIsInNlbGVjdE1vZGVsIiwic2Vzc2lvbklucHV0VXBkYXRlIiwiaXNSZXN1bWVkU3RhdGUiLCJERUZBVUxUX01BWF9UVVJOUyIsInNlcnZlckNvbnZlcnNhdGlvblRyYWNrZXIiLCJTZXJ2ZXJDb252ZXJzYXRpb25UcmFja2VyIiwiY29udGludWluZ0ludGVycnVwdGVkVHVybiIsInR1cm5SZXN1bHQiLCJSdW5SZXN1bHQiLCJhcnRpZmFjdHMiLCJwcmVwYXJlQWdlbnRBcnRpZmFjdHMiLCJpc1Jlc3VtaW5nRnJvbUludGVycnVwdGlvbiIsInBhcmFsbGVsR3VhcmRyYWlsUHJvbWlzZSIsInJ1bklucHV0R3VhcmRyYWlsc19mbiIsInR1cm5JbnB1dCIsInByZXBhcmVkQ2FsbCIsInByZXBhcmVNb2RlbENhbGxfZm4iLCJnZXRUcmFjaW5nIiwicnVuT3V0cHV0R3VhcmRyYWlsc19mbiIsInJ1blN0cmVhbUxvb3BfZm4iLCJoYW5kZWRJbnB1dFRvTW9kZWwiLCJzdHJlYW1JbnB1dFBlcnNpc3RlZCIsInBlcnNpc3RTdHJlYW1JbnB1dElmTmVlZGVkIiwiZ3VhcmRyYWlsRXJyb3IiLCJmaW5hbFJlc3BvbnNlIiwicHJlVG9vbEl0ZW1zIiwiU3RyZWFtZWRSdW5SZXN1bHQiLCJzdHJlYW1Mb29wUHJvbWlzZSIsImd1YXJkcmFpbHNPdmVycmlkZSIsImd1YXJkcmFpbEFyZ3MiLCJhZ2VudE91dHB1dCIsInJ1bk91dHB1dCIsImFkanVzdE1vZGVsU2V0dGluZ3NGb3JOb25HUFQ1UnVubmVyTW9kZWwiLCJzeXN0ZW1JbnN0cnVjdGlvbnMiLCJwcm9tcHQiLCJtb2RlbElucHV0IiwicGVyc2lzdGVkSXRlbXMiLCJmaWx0ZXJBcHBsaWVkIiwiYXBwbHlDYWxsTW9kZWxJbnB1dEZpbHRlciIsInByZXZpb3VzUmVzcG9uc2VJZCIsImNvbnZlcnNhdGlvbklkIiwiZ2VuZXJhdGVkSXRlbXMiLCJyYXdJdGVtcyIsInRvQWdlbnRJbnB1dExpc3QiLCJhZ2VudE1vZGVsIiwicnVuQ29uZmlnTW9kZWwiLCJ0cmFjaW5nRGlzYWJsZWQiLCJ0cmFjZUluY2x1ZGVTZW5zaXRpdmVEYXRhIiwiY2xvbmVJbnB1dEl0ZW1zIiwiY2xvbmVkIiwiY2xvbmVNYXAiLCJvcmlnaW5hbFBvb2wiLCJidWlsZEFnZW50SW5wdXRQb29sIiwiZmFsbGJhY2tPcmlnaW5hbHMiLCJyZW1vdmVGcm9tRmFsbGJhY2siLCJvcmlnaW5hbCIsInRha2VGYWxsYmFja09yaWdpbmFsIiwicmVtb3ZlQWdlbnRJbnB1dEZyb21Qb29sIiwibWF0Y2hlZEJ5Q29udGVudCIsInRha2VBZ2VudElucHV0RnJvbVBvb2wiLCJmYWxsYmFjayIsImNsb25lZEZpbHRlcmVkSW5wdXQiLCJtb2RlbFJlc3BvbnNlcyIsImxhdGVzdFJlc3BvbnNlIiwiaW5pdGlhbEl0ZW1zIiwiZGVsaXZlcmVkIiwiYWdlbnRNb2RlbFNldHRpbmdzIiwicnVubmVyTW9kZWwiLCJjb3BpZWRNb2RlbFNldHRpbmdzIiwiX2ciLCJfaCIsImhhbmRvZmZOYW1lcyIsImFnZW50SW5wdXRTZXJpYWxpemF0aW9uUmVwbGFjZXIiLCJwb29sIiwiUnVuUmVzdWx0QmFzZSIsInJlc3BvbnNlcyIsIl9lcnJvciIsIl9zaWduYWwiLCJfcmVhZGFibGVDb250cm9sbGVyIiwiX3JlYWRhYmxlU3RyZWFtIiwiX2NvbXBsZXRlZFByb21pc2UiLCJfY29tcGxldGVkUHJvbWlzZVJlc29sdmUiLCJfY29tcGxldGVkUHJvbWlzZVJlamVjdCIsIl9jYW5jZWxsZWQiLCJfc3RyZWFtTG9vcFByb21pc2UiLCJfUmVhZGFibGVTdHJlYW0iLCJjb250cm9sbGVyIiwicmVzb2x2ZSIsInJlamVjdCIsImhhbmRsZUFib3J0Iiwic3RyZWFtIiwicHJvbWlzZSIsIl9jb250ZXh0QXN5bmNMb2NhbFN0b3JhZ2UiLCJnZXRDb250ZXh0QXN5bmNMb2NhbFN0b3JhZ2UiLCJjdXJyZW50VHJhY2UiLCJfd3JhcEZ1bmN0aW9uV2l0aFRyYWNlTGlmZWN5Y2xlIiwibmV3VHJhY2UiLCJzcGFuRXJyb3IiLCJjbG9uZUN1cnJlbnRDb250ZXh0IiwiY3VycmVudENvbnRleHQiLCJjb3B5T2ZDb250ZXh0IiwiQ29uc29sZVNwYW5FeHBvcnRlciIsIkJhdGNoVHJhY2VQcm9jZXNzb3IiLCJleHBvcnRlciIsIm1heFF1ZXVlU2l6ZSIsIm1heEJhdGNoU2l6ZSIsInNjaGVkdWxlRGVsYXkiLCJleHBvcnRUcmlnZ2VyUmF0aW8iLCJfQmF0Y2hUcmFjZVByb2Nlc3Nvcl9pbnN0YW5jZXMiLCJfbWF4UXVldWVTaXplIiwiX21heEJhdGNoU2l6ZSIsIl9zY2hlZHVsZURlbGF5IiwiX2V4cG9ydFRyaWdnZXJTaXplIiwiX2V4cG9ydGVyIiwiX2J1ZmZlciIsIl90aW1lciIsIl90aW1lb3V0IiwiX2V4cG9ydEluUHJvZ3Jlc3MiLCJfdGltZW91dEFib3J0Q29udHJvbGxlciIsInJ1bkV4cG9ydExvb3BfZm4iLCJzYWZlQWRkSXRlbV9mbiIsIl90cmFjZSIsIl9zcGFuIiwiZXhwb3J0QmF0Y2hlc19mbiIsImZvcmNlIiwidG9FeHBvcnQiLCJiYXRjaCIsIk11bHRpVHJhY2luZ1Byb2Nlc3NvciIsIl9wcm9jZXNzb3JzIiwicHJvY2Vzc29yIiwicHJvY2Vzc29ycyIsIl9kZWZhdWx0RXhwb3J0ZXIiLCJfZGVmYXVsdFByb2Nlc3NvciIsImRlZmF1bHRFeHBvcnRlciIsImRlZmF1bHRQcm9jZXNzb3IiLCJ0aW1lSXNvIiwiZ2VuZXJhdGVUcmFjZUlkIiwiZ2VuZXJhdGVTcGFuSWQiLCJyZW1vdmVQcml2YXRlRmllbGRzIiwiX1NwYW4iLCJfZGF0YSIsIl90cmFjZUlkIiwiX3NwYW5JZCIsIl9wYXJlbnRJZCIsIl9wcm9jZXNzb3IiLCJfc3RhcnRlZEF0IiwiX2VuZGVkQXQiLCJfcHJldmlvdXNTcGFuIiwiU3BhbiIsIk5vb3BTcGFuIiwiX1RyYWNlIiwiX3N0YXJ0ZWQiLCJUcmFjZSIsIk5vb3BUcmFjZSIsIlRyYWNlUHJvdmlkZXIiLCJfVHJhY2VQcm92aWRlcl9pbnN0YW5jZXMiLCJfbXVsdGlQcm9jZXNzb3IiLCJfZGlzYWJsZWQiLCJhZGRDbGVhbnVwTGlzdGVuZXJzX2ZuIiwiZGlzYWJsZWQiLCJ0cmFjZU9wdGlvbnMiLCJ0cmFjZUlkIiwic3Bhbk9wdGlvbnMiLCJwYXJlbnRJZCIsImNsZWFudXAiLCJoYXNPdGhlckxpc3RlbmVyc0ZvclNpZ25hbHMiLCJyZWFzb24iLCJoYXNPdGhlckxpc3RlbmVyc0ZvckV2ZW50cyIsIkdMT0JBTF9UUkFDRV9QUk9WSURFUiIsImFkZFRyYWNlUHJvY2Vzc29yIiwiYmFzZTY0VG9BcnJheUJ1ZmZlciIsImJpbmFyeVN0cmluZyIsImFycmF5QnVmZmVyVG9CYXNlNjQiLCJhcnJheUJ1ZmZlciIsImdldExhc3RUZXh0RnJvbUF1ZGlvT3V0cHV0TWVzc2FnZSIsImxhc3RDb250ZW50SXRlbSIsImRpZmZSZWFsdGltZUhpc3RvcnkiLCJvbGRIaXN0b3J5IiwibmV3SGlzdG9yeSIsInJlbW92YWxzIiwiYWRkaXRpb25zIiwib2xkSXRlbSIsInVwZGF0ZXMiLCJoYXNXZWJSVENTdXBwb3J0IiwicmVtb3ZlQXVkaW9Gcm9tQ29udGVudCIsInByZXNlcnZlQXNzaXN0YW50QXVkaW9UcmFuc2NyaXB0cyIsIm1lcmdlZENvbnRlbnQiLCJwcmV2aW91c0VudHJ5IiwidXBkYXRlUmVhbHRpbWVIaXN0b3J5Iiwic2hvdWxkSW5jbHVkZUF1ZGlvRGF0YSIsInVwZGF0ZWRDb250ZW50IiwibmV3RXZlbnQiLCJleGlzdGluZ0luZGV4IiwiZXhpc3RpbmdJdGVtIiwibWVyZ2VkRXZlbnQiLCJpZHgiLCJwcmV2SW5kZXgiLCJIRUFERVJTIiwiV0VCU09DS0VUX01FVEEiLCJyZWFsdGltZUFwcHJvdmFsSXRlbVRvQXBwcm92YWxJdGVtIiwiYXBwcm92YWxJdGVtVG9SZWFsdGltZUFwcHJvdmFsSXRlbSIsIml0ZW1JZCIsInNlcnZlckxhYmVsIiwiUmVhbHRpbWVBZ2VudCIsImdldFJlYWx0aW1lR3VhcmRyYWlsU2V0dGluZ3MiLCJzZXR0aW5ncyIsImRlZmluZVJlYWx0aW1lT3V0cHV0R3VhcmRyYWlsIiwicG9saWN5SGludElucHV0IiwiYmFzZUd1YXJkcmFpbCIsInBvbGljeUhpbnQiLCJnZXRSZWFsdGltZUd1YXJkcmFpbEZlZWRiYWNrTWVzc2FnZSIsImlzRGVmaW5lZCIsImlzRGVwcmVjYXRlZENvbmZpZyIsInRvTmV3U2Vzc2lvbkNvbmZpZyIsImlucHV0Q29uZmlnIiwibm9ybWFsaXplQXVkaW9Gb3JtYXQiLCJyZXF1ZXN0ZWRPdXRwdXRWb2ljZSIsIm91dHB1dENvbmZpZyIsImYiLCJyZWFsdGltZU1lc3NhZ2VJdGVtU2NoZW1hIiwicmVhbHRpbWVUb29sQ2FsbEl0ZW0iLCJyZWFsdGltZU1jcENhbGxJdGVtIiwicmVhbHRpbWVNY3BDYWxsQXBwcm92YWxSZXF1ZXN0SXRlbSIsInJlYWx0aW1lUmVzcG9uc2UiLCJ6XG4gICAgICAgICAgICAub2JqZWN0IiwielxuICAgICAgICAuZW51bSIsImNvbnZlcnNhdGlvbkl0ZW1Db250ZW50U2NoZW1hIiwiY29udmVyc2F0aW9uSXRlbVNjaGVtYSIsImNvbnZlcnNhdGlvbkNyZWF0ZWRFdmVudFNjaGVtYSIsImNvbnZlcnNhdGlvbkl0ZW1BZGRlZEV2ZW50U2NoZW1hIiwiY29udmVyc2F0aW9uSXRlbURvbmVFdmVudFNjaGVtYSIsImNvbnZlcnNhdGlvbkl0ZW1EZWxldGVkRXZlbnRTY2hlbWEiLCJjb252ZXJzYXRpb25JdGVtSW5wdXRBdWRpb1RyYW5zY3JpcHRpb25Db21wbGV0ZWRFdmVudFNjaGVtYSIsImNvbnZlcnNhdGlvbkl0ZW1JbnB1dEF1ZGlvVHJhbnNjcmlwdGlvbkRlbHRhRXZlbnRTY2hlbWEiLCJjb252ZXJzYXRpb25JdGVtSW5wdXRBdWRpb1RyYW5zY3JpcHRpb25GYWlsZWRFdmVudFNjaGVtYSIsImNvbnZlcnNhdGlvbkl0ZW1SZXRyaWV2ZWRFdmVudFNjaGVtYSIsImNvbnZlcnNhdGlvbkl0ZW1UcnVuY2F0ZWRFdmVudFNjaGVtYSIsImNvbnZlcnNhdGlvbkl0ZW1DcmVhdGVFdmVudFNjaGVtYSIsImNvbnZlcnNhdGlvbkl0ZW1EZWxldGVFdmVudFNjaGVtYSIsImNvbnZlcnNhdGlvbkl0ZW1SZXRyaWV2ZUV2ZW50U2NoZW1hIiwiY29udmVyc2F0aW9uSXRlbVRydW5jYXRlRXZlbnRTY2hlbWEiLCJlcnJvckV2ZW50U2NoZW1hIiwiaW5wdXRBdWRpb0J1ZmZlckNsZWFyZWRFdmVudFNjaGVtYSIsImlucHV0QXVkaW9CdWZmZXJBcHBlbmRFdmVudFNjaGVtYSIsImlucHV0QXVkaW9CdWZmZXJDbGVhckV2ZW50U2NoZW1hIiwiaW5wdXRBdWRpb0J1ZmZlckNvbW1pdEV2ZW50U2NoZW1hIiwiaW5wdXRBdWRpb0J1ZmZlckNvbW1pdHRlZEV2ZW50U2NoZW1hIiwiaW5wdXRBdWRpb0J1ZmZlclNwZWVjaFN0YXJ0ZWRFdmVudFNjaGVtYSIsImlucHV0QXVkaW9CdWZmZXJTcGVlY2hTdG9wcGVkRXZlbnRTY2hlbWEiLCJvdXRwdXRBdWRpb0J1ZmZlclN0YXJ0ZWRFdmVudFNjaGVtYSIsIm91dHB1dEF1ZGlvQnVmZmVyU3RvcHBlZEV2ZW50U2NoZW1hIiwib3V0cHV0QXVkaW9CdWZmZXJDbGVhcmVkRXZlbnRTY2hlbWEiLCJyYXRlTGltaXRzVXBkYXRlZEV2ZW50U2NoZW1hIiwicmVzcG9uc2VBdWRpb0RlbHRhRXZlbnRTY2hlbWEiLCJyZXNwb25zZUF1ZGlvRG9uZUV2ZW50U2NoZW1hIiwicmVzcG9uc2VBdWRpb1RyYW5zY3JpcHREZWx0YUV2ZW50U2NoZW1hIiwicmVzcG9uc2VBdWRpb1RyYW5zY3JpcHREb25lRXZlbnRTY2hlbWEiLCJyZXNwb25zZUNvbnRlbnRQYXJ0QWRkZWRFdmVudFNjaGVtYSIsInJlc3BvbnNlQ29udGVudFBhcnREb25lRXZlbnRTY2hlbWEiLCJyZXNwb25zZUNyZWF0ZWRFdmVudFNjaGVtYSIsInJlc3BvbnNlRG9uZUV2ZW50U2NoZW1hIiwicmVzcG9uc2VGdW5jdGlvbkNhbGxBcmd1bWVudHNEZWx0YUV2ZW50U2NoZW1hIiwicmVzcG9uc2VGdW5jdGlvbkNhbGxBcmd1bWVudHNEb25lRXZlbnRTY2hlbWEiLCJyZXNwb25zZU91dHB1dEl0ZW1BZGRlZEV2ZW50U2NoZW1hIiwicmVzcG9uc2VPdXRwdXRJdGVtRG9uZUV2ZW50U2NoZW1hIiwicmVzcG9uc2VUZXh0RGVsdGFFdmVudFNjaGVtYSIsInJlc3BvbnNlVGV4dERvbmVFdmVudFNjaGVtYSIsInNlc3Npb25DcmVhdGVkRXZlbnRTY2hlbWEiLCJzZXNzaW9uVXBkYXRlZEV2ZW50U2NoZW1hIiwicmVzcG9uc2VDYW5jZWxFdmVudFNjaGVtYSIsInJlc3BvbnNlQ3JlYXRlRXZlbnRTY2hlbWEiLCJzZXNzaW9uVXBkYXRlRXZlbnRTY2hlbWEiLCJtY3BMaXN0VG9vbHNJblByb2dyZXNzRXZlbnRTY2hlbWEiLCJtY3BMaXN0VG9vbHNDb21wbGV0ZWRFdmVudFNjaGVtYSIsInJlc3BvbnNlTWNwQ2FsbEFyZ3VtZW50c0RlbHRhRXZlbnRTY2hlbWEiLCJyZXNwb25zZU1jcENhbGxBcmd1bWVudHNEb25lRXZlbnRTY2hlbWEiLCJyZXNwb25zZU1jcENhbGxJblByb2dyZXNzRXZlbnRTY2hlbWEiLCJyZXNwb25zZU1jcENhbGxDb21wbGV0ZWRFdmVudFNjaGVtYSIsIm1jcExpc3RUb29sc0ZhaWxlZEV2ZW50U2NoZW1hIiwiZ2VuZXJpY0V2ZW50U2NoZW1hIiwicmVhbHRpbWVTZXJ2ZXJFdmVudFNjaGVtYSIsInBhcnNlUmVhbHRpbWVFdmVudCIsInJhdyIsImdlbmVyaWNQYXJzZWQiLCJERUZBVUxUX09QRU5BSV9SRUFMVElNRV9NT0RFTCIsIkRFRkFVTFRfT1BFTkFJX1JFQUxUSU1FX1NFU1NJT05fQ09ORklHIiwiX09wZW5BSVJlYWx0aW1lQmFzZSIsIl9hcGlLZXkiLCJfdHJhY2luZ0NvbmZpZyIsIl9yYXdTZXNzaW9uQ29uZmlnIiwiYXBpS2V5IiwiaXNHZW5lcmljIiwiaW5wdXRUb2tlbnMiLCJvdXRwdXRUb2tlbnMiLCJ0b3RhbFRva2VucyIsInByZXZpb3VzSXRlbUlkIiwibWNwQXBwcm92YWxSZXF1ZXN0IiwibWNwQ2FsbCIsInJlYWx0aW1lSXRlbSIsIm90aGVyRXZlbnREYXRhIiwidHJpZ2dlclJlc3BvbnNlIiwiaW1hZ2UiLCJuZXdDb25maWciLCJzZXNzaW9uRGF0YSIsIl9qIiwiX2kiLCJfbCIsIl9uIiwiX20iLCJfcCIsIl9vIiwiX3IiLCJfcSIsIl90IiwiX3MiLCJfdiIsIl91IiwiX3ciLCJfeiIsIl95IiwiX0IiLCJfQSIsImNyZWF0ZVJlc3BvbnNlIiwiY3JlYXRlX3Jlc3BvbnNlIiwiZWFnZXJuZXNzIiwiaW50ZXJydXB0UmVzcG9uc2UiLCJpbnRlcnJ1cHRfcmVzcG9uc2UiLCJwcmVmaXhQYWRkaW5nTXMiLCJwcmVmaXhfcGFkZGluZ19tcyIsInNpbGVuY2VEdXJhdGlvbk1zIiwic2lsZW5jZV9kdXJhdGlvbl9tcyIsInRocmVzaG9sZCIsImlkbGVUaW1lb3V0TXMiLCJpZGxlX3RpbWVvdXRfbXMiLCJ0cmFjaW5nQ29uZmlnIiwic3RhcnRSZXNwb25zZSIsImF1ZGlvIiwiY29tbWl0IiwicmVtb3ZhbElkcyIsInVwZGF0ZSIsImFkZGl0aW9uc0FuZFVwZGF0ZXMiLCJhZGRpdGlvbiIsIml0ZW1FbnRyeSIsIk9wZW5BSVJlYWx0aW1lQmFzZSIsIk9wZW5BSVJlYWx0aW1lV2ViUlRDIiwiX3VybCIsIl9zdGF0ZSIsIl91c2VJbnNlY3VyZUFwaUtleSIsIl9vbmdvaW5nUmVzcG9uc2UiLCJfbXV0ZWQiLCJiYXNlVXJsIiwiaXNDbGllbnRLZXkiLCJ1c2VyU2Vzc2lvbkNvbmZpZyIsImNvbm5lY3Rpb25VcmwiLCJwZWVyQ29ubmVjdGlvbiIsImRhdGFDaGFubmVsIiwiYXR0YWNoQ29ubmVjdGlvblN0YXRlSGFuZGxlciIsImNvbm5lY3Rpb24iLCJhdWRpb0VsZW1lbnQiLCJvcmlnaW5hbFBlZXJDb25uZWN0aW9uIiwib2ZmZXIiLCJzZHBSZXNwb25zZSIsImFuc3dlciIsIm11dGVkIiwic2VuZGVyIiwiV2ViU29ja2V0IiwiT3BlbkFJUmVhbHRpbWVXZWJTb2NrZXQiLCJfT3BlbkFJUmVhbHRpbWVXZWJTb2NrZXRfaW5zdGFuY2VzIiwiX2RlZmF1bHRVcmwiLCJfY3VycmVudEl0ZW1JZCIsIl9jdXJyZW50QXVkaW9Db250ZW50SW5kZXgiLCJfY3JlYXRlV2ViU29ja2V0IiwiX3NraXBPcGVuRXZlbnRMaXN0ZW5lcnMiLCJhdWRpb0V2ZW50IiwicmVzZXRBdWRpb1BsYXliYWNrU3RhdGVfZm4iLCJ1cmwiLCJzZXNzaW9uQ29uZmlnIiwic2V0dXBXZWJTb2NrZXRfZm4iLCJlbGFwc2VkVGltZSIsImNhbmNlbE9uZ29pbmdSZXNwb25zZSIsImxlbmd0aCIsImF1ZGlvX2VuZF9tcyIsIndzIiwid2Vic29ja2V0QXJndW1lbnRzIiwib25Tb2NrZXRPcGVuUmVhZHkiLCJidWZmIiwiZm10IiwicmF0ZSIsImF1dG9tYXRpY1Jlc3BvbnNlQ2FuY2VsbGF0aW9uRW5hYmxlZCIsIkJBQ0tHUk9VTkRfUkVTVUxUX1NZTUJPTCIsImJhY2tncm91bmRSZXN1bHQiLCJpc0JhY2tncm91bmRSZXN1bHQiLCJpc1ZhbGlkUmVhbHRpbWVUb29sIiwidG9SZWFsdGltZVRvb2xEZWZpbml0aW9uIiwic2VydmVyVXJsIiwiY2xvbmVEZWZhdWx0U2Vzc2lvbkNvbmZpZyIsIl9SZWFsdGltZVNlc3Npb24iLCJfUmVhbHRpbWVTZXNzaW9uX2luc3RhbmNlcyIsIl90cmFuc3BvcnQiLCJfY3VycmVudEFnZW50IiwiX2N1cnJlbnRUb29scyIsIl9vdXRwdXRHdWFyZHJhaWxzIiwiX291dHB1dEd1YXJkcmFpbFNldHRpbmdzIiwiX3RyYW5zY3JpYmVkVGV4dERlbHRhcyIsIl9oaXN0b3J5IiwiX3Nob3VsZEluY2x1ZGVBdWRpb0RhdGEiLCJfaW50ZXJydXB0ZWRCeUd1YXJkcmFpbCIsIl9hdWRpb1N0YXJ0ZWQiLCJfYWxsTWNwVG9vbHNCeVNlcnZlciIsIl9hdmFpbGFibGVNY3BUb29scyIsIl9sYXN0U2Vzc2lvbkNvbmZpZyIsIl9hdXRvbWF0aWNhbGx5VHJpZ2dlclJlc3BvbnNlRm9yTWNwVG9vbENhbGxzIiwib3ZlcnJpZGVzIiwic2V0Q3VycmVudEFnZW50X2ZuIiwiZ2V0U2Vzc2lvbkNvbmZpZ19mbiIsInNldEV2ZW50TGlzdGVuZXJzX2ZuIiwidXBkYXRlZEhpc3RvcnkiLCJoYW5kbGVGdW5jdGlvblRvb2xDYWxsX2ZuIiwiaGFuZG9mZlRvb2xzIiwiaGFzVG9vbHNEZWZpbmVkIiwiaGFzSGFuZG9mZnNEZWZpbmVkIiwidXBkYXRlQXZhaWxhYmxlTWNwVG9vbHNfZm4iLCJhZGRpdGlvbmFsQ29uZmlnIiwib3ZlcnJpZGVzQ29uZmlnIiwib3B0aW9uc0NvbmZpZyIsImluc3RydWN0aW9ucyIsImdldEF1ZGlvT3V0cHV0Vm9pY2VPdmVycmlkZSIsImF1ZGlvQ29uZmlnIiwiYXVkaW9PdXRwdXRWb2ljZU92ZXJyaWRlIiwidG9wTGV2ZWxWb2ljZU92ZXJyaWRlIiwicmVzb2x2ZWRWb2ljZSIsImZ1bGxDb25maWciLCJoYW5kbGVIYW5kb2ZmX2ZuIiwiaGFuZGxlRnVuY3Rpb25DYWxsX2ZuIiwiZW5hYmxlZEhhbmRvZmZzIiwiZnVuY3Rpb25Ub29sTWFwIiwicG9zc2libGVIYW5kb2ZmIiwiZmlyc3RUcmlwd2lyZVRyaWdnZXJlZCIsImZlZWRiYWNrVGV4dCIsImNvbXBsZXRlZEV2ZW50IiwidGV4dE91dHB1dCIsImxhc3RSdW5JbmRleCIsImxhc3RJdGVtSWQiLCJkZWx0YSIsIm5ld1RleHQiLCJuZXdSdW5JbmRleCIsImlzTmV3IiwiYWRkZWRJdGVtIiwiYWN0aXZlTWNwQ29uZmlncyIsImFsbG93ZWRGcm9tQ29uZmlnIiwiY2ZnIiwiZGVkdXBCeU5hbWUiLCJwcmV2IiwiUmVhbHRpbWVTZXNzaW9uIiwiT3BlbkFJUmVhbHRpbWVTSVAiLCJfYXVkaW8iLCJ1dGlscyIsInV0aWxJbXBvcnQuYmFzZTY0VG9BcnJheUJ1ZmZlciIsInV0aWxJbXBvcnQuYXJyYXlCdWZmZXJUb0Jhc2U2NCIsInV0aWxJbXBvcnQuZ2V0TGFzdFRleHRGcm9tQXVkaW9PdXRwdXRNZXNzYWdlIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQ08sTUFBTUEsS0FBVztBQUFBLEVBRXBCLFNBQVc7QUFLZjtBQ1JPLGVBQWVDLEdBQVlDLEdBQUk7QUFDbEMsTUFBSTtBQUNBLFdBQU8sQ0FBQyxNQUFNLE1BQU1BLEdBQUk7QUFBQSxFQUM1QixTQUNPQyxHQUFPO0FBQ1YsV0FBTyxDQUFDQSxHQUFPLElBQUk7QUFBQSxFQUN2QjtBQUNKO0FDS08sU0FBU0MsR0FBY0MsR0FBUztBQUNuQyxRQUFNQyxJQUFnQixPQUFPLE9BQU9ELENBQU8sRUFBRSxPQUFPLENBQUNFLE1BQU0sT0FBT0EsS0FBTSxRQUFRO0FBSWhGLFNBSGUsT0FBTyxRQUFRRixDQUFPLEVBQ2hDLE9BQU8sQ0FBQyxDQUFDRyxHQUFHQyxDQUFDLE1BQU1ILEVBQWMsUUFBUSxDQUFDRSxDQUFDLE1BQU0sRUFBRSxFQUNuRCxJQUFJLENBQUMsQ0FBQ0MsR0FBR0YsQ0FBQyxNQUFNQSxDQUFDO0FBRTFCO0FDaEJPLE1BQU1HLEdBQWE7QUFBQSxFQUN0QixjQUFjO0FBQ1YsU0FBSyxPQUFPLG9CQUFJLElBQUcsR0FDbkIsS0FBSyxTQUFTLG9CQUFJLElBQUc7QUFBQSxFQUN6QjtBQUFBLEVBQ0EsSUFBSUMsTUFB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QUFJLFFBQVE7QUFDUixXQUFPLENBQUMsQ0FBQyxLQUFLLEtBQUssT0FBTyxLQUFLLENBQUNBLE1BQU9BLEVBQUcsU0FBUyxLQUFLO0FBQUEsRUFDNUQ7QUFBQSxFQUNBLElBQUksVUFBVTtBQUNWLFdBQU8sQ0FBQyxDQUFDLEtBQUssS0FBSyxPQUFPLEtBQUssQ0FBQ0EsTUFBT0EsRUFBRyxTQUFTLE9BQU87QUFBQSxFQUM5RDtBQUFBLEVBQ0EsSUFBSSxTQUFTO0FBQ1QsV0FBTyxDQUFDLENBQUMsS0FBSyxLQUFLLE9BQU8sS0FBSyxDQUFDQSxNQUFPQSxFQUFHLFNBQVMsTUFBTTtBQUFBLEVBQzdEO0FBQUEsRUFDQSxJQUFJLFdBQVc7QUFDWCxXQUFPLENBQUMsQ0FBQyxLQUFLLEtBQUssT0FBTyxLQUFLLENBQUNBLE1BQU9BLEVBQUcsU0FBUyxRQUFRO0FBQUEsRUFDL0Q7QUFBQSxFQUNBLElBQUksU0FBUztBQUNULFdBQU8sQ0FBQyxDQUFDLEtBQUssS0FBSyxPQUFPLEtBQUssQ0FBQ0EsTUFBT0EsRUFBRyxTQUFTLE1BQU07QUFBQSxFQUM3RDtBQUFBLEVBQ0EsSUFBSSxVQUFVO0FBQ1YsV0FBTyxDQUFDLENBQUMsS0FBSyxLQUFLLE9BQU8sS0FBSyxDQUFDQSxNQUFPQSxFQUFHLFNBQVMsT0FBTztBQUFBLEVBQzlEO0FBQUEsRUFDQSxJQUFJLFNBQVM7QUFDVCxXQUFPLENBQUMsQ0FBQyxLQUFLLEtBQUssT0FBTyxLQUFLLENBQUNBLE1BQU9BLEVBQUcsU0FBUyxNQUFNO0FBQUEsRUFDN0Q7QUFBQSxFQUNBLElBQUksT0FBTztBQUNQLFdBQU8sQ0FBQyxDQUFDLEtBQUssS0FBSyxPQUFPLEtBQUssQ0FBQ0EsTUFBT0EsRUFBRyxTQUFTLElBQUk7QUFBQSxFQUMzRDtBQUFBLEVBQ0EsSUFBSSxTQUFTO0FBQ1QsV0FBTyxDQUFDLENBQUMsS0FBSyxLQUFLLE9BQU8sS0FBSyxDQUFDQSxNQUFPQSxFQUFHLFNBQVMsTUFBTTtBQUFBLEVBQzdEO0FBQUEsRUFDQSxJQUFJLFdBQVc7QUFDWCxXQUFP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QUFDakUsVUFBTXBDLElBQWdCLE1BQU02RSxHQUFnQiw0QkFBNEJuaEMsR0FBTzdrQixHQUFTdWpELENBQVM7QUFFakcsV0FEa0IsSUFBSTBDLEdBQWlCLEVBQ3RCLG9CQUFvQjlFLENBQWE7QUFBQSxFQUN0RDtBQUFBLEVBQ0EsVUFBVStFLEdBQVE3bEQsSUFBVyxJQUFJO0FBRzdCLFVBQU0sSUFBSSxNQUFNLDZGQUE2RjtBQUFBLEVBQ2pIO0FBQUEsRUFDQSxNQUFNLFFBQVFMLEdBQVM7QUFDbkIsUUFBSSxDQUFDQSxFQUFRO0FBQ1QsWUFBTSxJQUFJMlosR0FBVSw2REFBNkQ7QUFFckYsVUFBTSxNQUFNLFFBQVEzWixDQUFPO0FBQUEsRUFDL0I7QUFDSjtBQ2hDWSxNQUFDbW1ELEtBQVE7QUFBQSxFQUNqQixxQkFBcUJDO0FBQUFBLEVBQ3JCLHFCQUFxQkM7QUFBQUEsRUFDckIsbUNBQW1DQztBQUN2QzsiLCJ4X2dvb2dsZV9pZ25vcmVMaXN0IjpbMiwzLDQsNSw2LDcsOCw5LDEwLDExLDEyLDEzLDE0LDE1LDE2LDE3LDE4LDE5LDIwLDIxLDIyLDIzLDI0LDI1LDI2LDI3LDI4LDI5LDMwLDMxLDMyLDMzLDM0LDM1LDM2LDM3LDM4LDM5LDQwLDQxLDQyLDQzLDQ0LDQ1LDQ2LDQ3LDQ4LDQ5LDUwLDUxLDU3LDU4LDU5XX0=
